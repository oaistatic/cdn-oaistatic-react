var Te=Object.freeze,De=Object.defineProperty,ns=Object.defineProperties;var ls=Object.getOwnPropertyDescriptors;var Ee=Object.getOwnPropertySymbols;var cs=Object.prototype.hasOwnProperty,ds=Object.prototype.propertyIsEnumerable;var Le=(t,e,r)=>e in t?De(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,C=(t,e)=>{for(var r in e||(e={}))cs.call(e,r)&&Le(t,r,e[r]);if(Ee)for(var r of Ee(e))ds.call(e,r)&&Le(t,r,e[r]);return t},ee=(t,e)=>ns(t,ls(e));var ye=(t,e)=>Te(De(t,"raw",{value:Te(e||t.slice())}));import{j as s,r as j,M as S,d as fe,L as ke,c as Q,l as qe,m as ms,g as ge,u as us,b as oe,v as Ae,at as fs}from"./n75kuy1cx6f5mogg.js";import{B as Y,P as O,gU as gs,i as X,j as we,ae as Be,ac as hs,e as U,du as xs,r as he,q as ps,R as He,F as $e,T as xe,rn as ys,gM as vs,ro as js,rp as bs,gf as te,qx as je,eN as ae,fB as Qe,ex as ue,f8 as Ss,fC as ks,G as re,rq as ws,dh as Ns,dr as zs,E as Ke,rr as Ps,rs as Cs,o0 as Ve,aa as Gs,rt as Rs,W as V,L as Ms,p as _s,dv as Ye,ru as Ts,gN as Es,lE as Ls,m as Ds,bR as As,jn as Ie,mD as Is,jL as Ws,H as Xe,n0 as Os,gD as Us,gS as Fs,mJ as qs}from"./ewse8exzafeu10ji.js";import{nw as Bs,a2 as Je,nx as Hs,js as $s,jr as Ne,c9 as ze,bv as Qs,mS as Ks,bI as Pe,ke as Vs,a5 as Ys,bO as Ze,bP as es,aj as ss,ny as Xs,jH as Js,H as Zs,mq as et,aR as me,ap as se}from"./ny10lj7zpuz89fvf.js";import{S as ts}from"./neqgr1r8uemp4194.js";import{N as st}from"./kj8rd4pu8k32z2dy.js";import{P as tt}from"./d65yyyom1modmtdi.js";import{G as rt}from"./ifxxnmh3s31g51fc.js";import{G as at,C as it}from"./pauhxwu99lgnazxx.js";function ot({href:t,children:e,onClickTrackingEventName:r,onClick:i}){function a(){r&&O.logEvent(r),i==null||i()}return t?s.jsx(Y,{as:"link",to:t,onClick:a,size:"large",children:e}):s.jsx(Y,{onClick:a,size:"large",children:e})}function rr({gizmo:t}){const e=gs(t),[r,i]=j.useState(!1),a=X(),n=we(a,"1855896025");return s.jsxs("div",{className:"flex h-full flex-col",children:[s.jsx(be,{redirectUrl:e}),s.jsxs("div",{className:"flex grow flex-col items-center justify-center p-2",children:[s.jsx(Bs,{gizmo:t,isAnon:!0,children:s.jsxs("div",{className:"mt-7 flex flex-col items-center gap-4",children:[s.jsx(ot,{onClick:()=>Be(a,{callbackUrl:e,skipLoginModal:!1}),children:s.jsx(S,{id:"gizmo.anonLandingPage.login",defaultMessage:"Sign up to chat"})}),s.jsxs("div",{className:"text-token-text-tertiary flex gap-2 text-sm whitespace-nowrap",children:[s.jsx("div",{children:s.jsx(S,{id:"gizmo.anonLandingPage.loginSubtext",defaultMessage:"Sign up or Log in to chat"})}),n&&s.jsxs(s.Fragment,{children:["|",s.jsx("div",{onClick:()=>i(!0),className:"cursor-pointer",children:s.jsx(S,{id:"gizmo.anonLandingPage.report",defaultMessage:"Report illegal content"})})]})]})]})}),r&&s.jsx(rt,{onClose:()=>i(!1),gizmoId:t.gizmo.id})]})]})}function be({redirectUrl:t,className:e}){const r=X(),i=hs(lt.signUpCta);return s.jsxs("div",{className:U("flex items-center justify-between px-7 py-4",e),children:[s.jsx(nt,{}),s.jsx(Y,{color:"primary",onClick:()=>Be(r,{callbackUrl:t,skipLoginModal:!1}),children:s.jsx(S,C({},i))})]})}function nt(){return s.jsx(ke,{to:"/",children:s.jsx(xs,{className:"h-8 w-8"})})}const lt=fe({signUpCta:{id:"gizmo.anonLandingPage.signup",defaultMessage:"Sign up"}}),ct=()=>{"use forget";var i;const t=Q.c(2),e=X();let r;if(t[0]!==e){const a=he(e),n=ps(e,"690090010");r=((i=a==null?void 0:a.isWorkspaceAccount)==null?void 0:i.call(a))&&n.get("enabled",!1),t[0]=e,t[1]=r}else r=t[1];return r};function ar(t){"use forget";var _,W,b,E,P,M,A,T,L;const e=Q.c(30),{workspaceId:r,limit:i,search:a,categories:n,userIds:c,enabled:l}=t,d=i===void 0?20:i,g=l===void 0?!0:l;let m;e[0]!==n||e[1]!==d||e[2]!==a||e[3]!==c||e[4]!==r?(m=["workspace_gizmos",{workspaceId:r,limit:d,search:a,categories:n,user_ids:c}],e[0]=n,e[1]=d,e[2]=a,e[3]=c,e[4]=r,e[5]=m):m=e[5];const v=g&&r!=null;let p;e[6]!==n||e[7]!==d||e[8]!==a||e[9]!==c||e[10]!==r?(p=async I=>{const{pageParam:J}=I;if(!r)return{gizmos:[],next_cursor:null,query_id:null};const Z={limit:d};return J!=null&&(Z.cursor=J.cursor,Z.query_id=J.query_id),a&&(Z.search=a),n&&n.length>0&&(Z.categories=n),c&&c.length>0&&(Z.user_ids=c),await He.safeGet("/workspace-resources/{workspace_id}/gizmos",{parameters:{path:{workspace_id:r},query:Z}})},e[6]=n,e[7]=d,e[8]=a,e[9]=c,e[10]=r,e[11]=p):p=e[11];let o;e[12]===Symbol.for("react.memo_cache_sentinel")?(o={},e[12]=o):o=e[12];let h;e[13]!==m||e[14]!==v||e[15]!==p?(h={queryKey:m,enabled:v,getNextPageParam:mt,queryFn:p,initialPageParam:o},e[13]=m,e[14]=v,e[15]=p,e[16]=h):h=e[16];const f=qe(h);let w;e[17]!==((_=f.data)==null?void 0:_.pages)?(w=(b=(W=f.data)==null?void 0:W.pages.flatMap(dt))!=null?b:[],e[17]=(E=f.data)==null?void 0:E.pages,e[18]=w):w=e[18];const u=w;let N;e[19]!==((P=f.data)==null?void 0:P.pages)?(N=(T=(A=(M=f.data)==null?void 0:M.pages.at(-1))==null?void 0:A.next_cursor)!=null?T:null,e[19]=(L=f.data)==null?void 0:L.pages,e[20]=N):N=e[20];const y=N,z=!!y;let k;e[21]!==y||e[22]!==f?(k=()=>y?f.fetchNextPage():Promise.resolve(),e[21]=y,e[22]=f,e[23]=k):k=e[23];let R;return e[24]!==u||e[25]!==y||e[26]!==f||e[27]!==z||e[28]!==k?(R=ee(C({},f),{gizmos:u,nextCursor:y,hasMore:z,loadMore:k}),e[24]=u,e[25]=y,e[26]=f,e[27]=z,e[28]=k,e[29]=R):R=e[29],R}function dt(t){return t.gizmos}function mt(t){return{cursor:t.next_cursor,query_id:t.query_id}}function ir(t){"use forget";var k,R,_,W,b;const e=Q.c(23),{workspaceId:r,search:i,limit:a,enabled:n}=t,c=a===void 0?50:a,l=n===void 0?!0:n;let d;e[0]!==c||e[1]!==i||e[2]!==r?(d=["workspace_users_infinite",{workspaceId:r,search:i,limit:c}],e[0]=c,e[1]=i,e[2]=r,e[3]=d):d=e[3];const g=l&&!!r;let m;e[4]!==c||e[5]!==i||e[6]!==r?(m=async E=>{var L;const{pageParam:P}=E;if(!r)return{items:[],total:0,limit:c,offset:0};const M=(L=P==null?void 0:P.offset)!=null?L:0,A=await He.safeGet("/accounts/{account_id}/users",{parameters:{path:{account_id:r},query:{offset:M,limit:c,query:i}}});return{items:A.items.map(ft),total:A.total,limit:c,offset:M}},e[4]=c,e[5]=i,e[6]=r,e[7]=m):m=e[7];let v;e[8]===Symbol.for("react.memo_cache_sentinel")?(v={},e[8]=v):v=e[8];let p;e[9]!==d||e[10]!==g||e[11]!==m?(p={queryKey:d,enabled:g,getNextPageParam:gt,queryFn:m,initialPageParam:v},e[9]=d,e[10]=g,e[11]=m,e[12]=p):p=e[12];const o=qe(p);let h;e[13]!==((k=o.data)==null?void 0:k.pages)?(h=(_=(R=o.data)==null?void 0:R.pages.flatMap(ut))!=null?_:[],e[13]=(W=o.data)==null?void 0:W.pages,e[14]=h):h=e[14];const f=h;let w;const u=(b=o.data)==null?void 0:b.pages.at(-1);w=!!u&&u.offset+u.limit<u.total;const N=w;let y;e[15]!==N||e[16]!==o?(y=()=>N?o.fetchNextPage():Promise.resolve(),e[15]=N,e[16]=o,e[17]=y):y=e[17];let z;return e[18]!==f||e[19]!==N||e[20]!==o||e[21]!==y?(z=ee(C({},o),{users:f,hasMore:N,loadMore:y}),e[18]=f,e[19]=N,e[20]=o,e[21]=y,e[22]=z):z=e[22],z}function ut(t){return t.items}function ft(t){var e,r;return{id:t.id,accountUserId:t.account_user_id,name:(e=t.name)!=null?e:void 0,email:(r=t.email)!=null?r:void 0}}function gt(t){const e=t.offset+t.limit;if(!(e>=t.total))return{offset:e}}function ie({delay:t,animateTap:e=!0,children:r}){return s.jsx(ms.div,{whileTap:{scale:e?.98:void 0},initial:{opacity:0,translateY:5},animate:{opacity:1,translateY:0,transition:{duration:.3,ease:"easeIn",delay:t!=null?t:0}},children:r})}var ht=(t=>(t.Enabled="enabled",t.ComingSoon="coming-soon",t))(ht||{});function xt({gizmoResource:t}){var a,n;const e=(a=t.gizmo.vanity_metrics)==null?void 0:a.num_conversations_str,r=(n=t.gizmo.share_recipient)!=null?n:re.Private,i=ws(r);return s.jsxs("div",{children:[t.gizmo.share_recipient!==re.Private&&e!=null?s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx(Pe,{className:"icon-sm"}),s.jsx("span",{children:s.jsx(S,ee(C({},vt.conversationCountStrLabel),{values:{numConvos:e}}))})]}):void 0,s.jsxs("div",{className:"flex items-center gap-1",children:[r===re.Link||r===re.Marketplace?s.jsx(Vs,{className:"icon-sm shrink-0"}):r===re.Workspace?s.jsx(Ys,{className:"icon-sm shrink-0"}):s.jsx(Ns,{className:"icon-sm shrink-0"}),s.jsx("span",{className:"line-clamp-1",children:i})]})]})}function or({gizmoResource:t,canRemoveRecent:e}){var d,g,m;const r=X(),i=ge(),{canEdit:a}=vs(t),{canDelete:n}=js(t),c=bs(t),l=!!((d=t.gizmo.tags)!=null&&d.includes(te.FirstParty));return s.jsx(rs,{href:c?je(t.gizmo.id):ae(r,t),icon:s.jsx(ze,{isFirstParty:l,src:(g=t==null?void 0:t.gizmo.display.profile_picture_url)!=null?g:void 0,className:"h-[42px] w-[42px] shrink-0"}),title:t.gizmo.display.name||Hs,isDraft:c,description:(m=t.gizmo.display.description)!=null?m:"",byline:a?s.jsx(xt,{gizmoResource:t}):s.jsx(Ne,{gizmo:t}),buttons:s.jsxs(s.Fragment,{children:[a&&s.jsx(xe,{label:s.jsx(S,{id:"gizmo.gpt.grid.EditGPT",defaultMessage:"Edit GPT"}),className:"flex justify-center",side:"top",children:s.jsx("button",{className:"text-token-text-primary rounded-lg px-3 py-2 transition-transform duration-100 ease-in hover:bg-white active:scale-[0.9] dark:bg-transparent dark:hover:bg-gray-700",onClick:()=>{i(je(t.gizmo.id))},children:s.jsx($s,{className:"icon-sm"})})}),s.jsx(yt,{gizmoResource:t,canDelete:n,canRemoveRecent:e})]})})}var Ue;const pt=$e.div(Ue||(Ue=ye(["flex h-[42px] w-[42px] shrink-0 items-center justify-center rounded-full border border-dashed\n",""])),({$disabled:t})=>t?"":"border-token-border-default bg-token-main-surface-secondary");function nr({type:t}){const e=ys(),r=t==="coming-soon";return s.jsxs(xe,{disabled:!r,label:s.jsx(S,{id:"gizmo.gpt.grid.CreateGPTComingSoon",defaultMessage:"GPT creation will be available in the coming weeks"}),triggerAs:null,children:[s.jsx(rs,{href:e,disabled:r,icon:s.jsx(pt,{$disabled:r,children:s.jsx(Je,{className:U("icon-sm",r&&"opacity-30")})}),title:s.jsx("div",{className:"flex items-center gap-1",children:s.jsx(S,{id:"gizmo.gpt.grid.CreateGPT",defaultMessage:"Create a GPT"})}),description:"Customize a version of ChatGPT for a specific purpose",byline:r?s.jsx("div",{className:"flex items-center justify-end",children:s.jsx("div",{className:"flex items-center",children:s.jsx(S,{id:"gizmo.gpt.grid.ComingSoon",defaultMessage:"Coming soon"})})}):void 0}),s.jsx("div",{className:"h-px bg-gray-100 dark:bg-gray-700"})]})}function rs({href:t,icon:e,title:r,isDraft:i=!1,description:a,byline:n,buttons:c,disabled:l,className:d}){const g=U("flex items-center px-2 py-4 rounded-xl",l?"":"hover:bg-token-main-surface-secondary",d),m=s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"flex grow items-center overflow-hidden md:w-3/5 md:grow-0",children:[e,s.jsxs("div",{className:U("grow overflow-hidden ps-4 pe-9 leading-tight",l?"opacity-50":"hover:cursor-pointer"),children:[s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx("span",{className:"font-semibold",children:r}),i&&s.jsx(xe,{label:s.jsx(S,{id:"gizmo.gpt.grid.Draft",defaultMessage:"Draft"}),className:"flex justify-center",side:"top",children:s.jsx("div",{className:"m-1.5 inline-block h-1.5 w-1.5 rounded-full bg-gray-200 dark:bg-gray-600"})})]}),s.jsx("div",{className:"line-clamp-2 overflow-hidden text-sm break-words text-ellipsis",children:a}),n!=null&&s.jsx("div",{className:"text-token-text-tertiary text-sm text-ellipsis md:hidden",children:n})]})]}),n!=null&&s.jsx("div",{className:"text-token-text-tertiary hidden flex-1 text-sm text-ellipsis md:block",children:n}),c!=null&&s.jsx("div",{onClick:v=>{v.preventDefault()},onPointerDownCapture:v=>{v.stopPropagation()},className:"flex h-9 shrink-0 justify-end gap-2 font-semibold md:w-[100px]",children:c})]});return l?s.jsx(ie,{children:s.jsx("span",{className:g,children:m})}):s.jsx(ie,{children:s.jsx(ke,{className:g,to:t,children:m})})}function yt({gizmoResource:t,canDelete:e,canRemoveRecent:r}){const[i,a]=j.useState(!1),[n,c]=j.useState(!1),l=us();return!e&&!r?null:s.jsxs(s.Fragment,{children:[s.jsxs(Qe,{side:"top",contentAlign:"end",sideOffset:8,open:n,onOpenChange:d=>c(d),triggerButton:s.jsx("button",{color:"secondary",className:"text-token-text-primary rounded-lg bg-transparent px-3 py-2 duration-100 ease-in hover:bg-white active:scale-[0.9] dark:bg-transparent dark:hover:bg-gray-700",onClick:()=>{c(d=>!d)},children:s.jsx(ks,{className:"icon"})}),children:[e&&s.jsx(ue.Item,{color:"danger",onClick:()=>{a(!0)},icon:Qs,children:s.jsx(S,{id:"gizmo.gpt.grid.DeleteGPT",defaultMessage:"Delete GPT"})}),r&&s.jsx(ue.Item,{onClick:()=>{Ss.removeFromRecent(l,t.gizmo.id)},children:s.jsx(S,{id:"gizmo.gpt.grid.RemoveFromRecent",defaultMessage:"Remove from Recent"})})]}),i&&s.jsx(Ks,{children:s.jsx(at,{gizmoId:t.gizmo.id,onSuccess:()=>{a(!1)},onClose:()=>{a(!1)}})})]})}const vt=fe({conversationCountStrLabel:{id:"gizmo.gpt.grid.conversationCountStrLabel",defaultMessage:"{numConvos} Chats"}});function as({gizmo:t,children:e,onClick:r,onModalOpen:i,onModalClose:a,selectOnly:n,className:c}){const l=X(),d=we(l,"1825130190"),[g,m]=j.useState(!1);return n?s.jsx("a",{className:U("gizmo-link cursor-pointer",c),href:"#",onClick:v=>{v.preventDefault(),r==null||r(v)},children:e}):d?s.jsxs(s.Fragment,{children:[g&&s.jsx(Ze,{gizmoId:t.gizmo.id,creatorId:t.gizmo.author.user_id,onClose:()=>{m(!1),a==null||a()},children:s.jsx(es,{as:"link",to:ae(l,t)})}),s.jsx("a",{className:U("gizmo-link cursor-pointer",c),href:"#",onClick:v=>{v.preventDefault(),r==null||r(v),m(!0),i==null||i()},children:e})]}):s.jsx(ke,{to:ae(l,t),className:U("gizmo-link",c),target:"_blank",onClick:r,children:e})}function jt(t){"use forget";const e=Q.c(28),{placeholder:r,effectiveRole:i,onSelect:a,popoverClassName:n}=t,c=oe(),[l,d]=j.useState("ALL"),[g,m]=j.useState(""),[v,p]=j.useState(""),[o,h]=j.useState(null),f=X();let w;if(e[0]!==f){const T=he(f);w=T==null?void 0:T.isWorkspaceAccount(),e[0]=f,e[1]=w}else w=e[1];const u=w,N=u!==void 0&&u;let y,z;e[2]!==g?(y=()=>{const T=setTimeout(()=>{p(g)},250);return()=>{clearTimeout(T)}},z=[g],e[2]=g,e[3]=y,e[4]=z):(y=e[3],z=e[4]),j.useEffect(y,z);const k=X(),R=ge();let _;e[5]!==a||e[6]!==R||e[7]!==k?(_=T=>{if(a){a(T);return}if(!we(k,"1825130190")){const I=ae(k,T);R(I);return}h(T)},e[5]=a,e[6]=R,e[7]=k,e[8]=_):_=e[8];const W=_;let b;e[9]===Symbol.for("react.memo_cache_sentinel")?(b=s.jsx(zs,{className:"text-token-text-tertiary icon absolute start-5 top-1/2 z-30 -translate-y-1/2"}),e[9]=b):b=e[9];let E;e[10]!==c||e[11]!==r||e[12]!==n||e[13]!==g?(E=(T,L)=>s.jsxs(it,{label:r!=null?r:c.formatMessage(B.discoverySearch),inputClassName:"bg-token-main-surface-primary! py-4 px-3 rounded-xl font-normal text-base! ps-12",popoverClassName:U("-top-3! border-token-border-default! rounded-xl",n!=null?n:"bg-token-main-surface-primary!"),className:"border-token-border-default! rounded-xl! p-0! ring-0!",name:"search",inputValue:g,onInputChange:m,onTabChange:I=>d(I==="WORKSPACE"?"WORKSPACE":"ALL"),suggestions:T,RenderTab:St,children:[L,L==null&&s.jsx("div",{className:"w-full py-4",children:s.jsx(kt,{})})]}),e[10]=c,e[11]=r,e[12]=n,e[13]=g,e[14]=E):E=e[14];let P;e[15]!==l||e[16]!==v||e[17]!==i||e[18]!==W||e[19]!==N||e[20]!==E?(P=s.jsx(wt,{activeTab:l,query:v,effectiveRole:i,setPopoverForceOpen:bt,onSelect:W,showWorkspaceResults:N,renderCombobox:E}),e[15]=l,e[16]=v,e[17]=i,e[18]=W,e[19]=N,e[20]=E,e[21]=P):P=e[21];let M;e[22]!==o||e[23]!==k?(M=o&&s.jsx(Ze,{gizmoId:o.gizmo.id,creatorId:o.gizmo.author.user_id,onClose:()=>{h(null)},children:s.jsx(es,{as:"link",to:ae(k,o)})}),e[22]=o,e[23]=k,e[24]=M):M=e[24];let A;return e[25]!==P||e[26]!==M?(A=s.jsxs("div",{className:"relative z-0",children:[b,P,M]}),e[25]=P,e[26]=M,e[27]=A):A=e[27],A}function bt(){}function St(t){"use forget";const e=Q.c(4),{tab:r}=t,i=ss();if(r==="ALL"){let a;return e[0]===Symbol.for("react.memo_cache_sentinel")?(a=s.jsx(S,C({},B.discoveryAllResultsHeader)),e[0]=a):a=e[0],a}if(r==="WORKSPACE"){let a;return e[1]!==i?(a=s.jsx(S,ee(C({},B.discoveryWorkspaceResultsHeader),{values:{workspaceName:i}})),e[1]=i,e[2]=a):a=e[2],a}if(r==="discoverySearchRecentlyUsed"){let a;return e[3]===Symbol.for("react.memo_cache_sentinel")?(a=s.jsx(S,C({},B.discoverySearchRecentlyUsed)),e[3]=a):a=e[3],a}return r}function kt(){return s.jsx("div",{className:"flex items-center justify-center py-1",children:s.jsx(Ke,{})})}function wt(t){"use forget";var _;const e=Q.c(20),{activeTab:r,query:i,effectiveRole:a,setPopoverForceOpen:n,showWorkspaceResults:c,onSelect:l,renderCombobox:d}=t;let g;e[0]===Symbol.for("react.memo_cache_sentinel")?(g=[],e[0]=g):g=e[0],j.useEffect(Pt,g);const{data:m,isLoading:v}=Ps(i),{data:p,isLoading:o}=Cs(i,c);let h;e[1]===Symbol.for("react.memo_cache_sentinel")?(h={cutId:"recent",limit:3},e[1]=h):h=e[1];const{data:f,isLoading:w}=Ve(h),u=m==null?void 0:m.items,N=m==null?void 0:m.cursor,y=p==null?void 0:p.items,z=p==null?void 0:p.cursor;let k;e[2]!==(f==null?void 0:f.pages)?(k=(_=f==null?void 0:f.pages.flatMap(Nt))!=null?_:[],e[2]=f==null?void 0:f.pages,e[3]=k):k=e[3];let R;return e[4]!==r||e[5]!==a||e[6]!==w||e[7]!==v||e[8]!==o||e[9]!==l||e[10]!==i||e[11]!==d||e[12]!==n||e[13]!==c||e[14]!==u||e[15]!==N||e[16]!==y||e[17]!==z||e[18]!==k?(R=s.jsx(Ct,{debouncedQuery:i,searchResults:u,isLoadingSearch:v,searchResultsCursor:N,showWorkspaceResults:c,workspaceSearchResults:y,workspaceSearchResultsCursor:z,isLoadingWorkspaceSearch:o,isLoadingRecent:w,recent:k,effectiveRole:a,setPopoverForceOpen:n,onSelect:l,activeTab:r,renderCombobox:d}),e[4]=r,e[5]=a,e[6]=w,e[7]=v,e[8]=o,e[9]=l,e[10]=i,e[11]=d,e[12]=n,e[13]=c,e[14]=u,e[15]=N,e[16]=y,e[17]=z,e[18]=k,e[19]=R):R=e[19],R}function Nt(t){return t.list.items.map(zt)}function zt(t){return t.resource}function Pt(){O.logEvent("Search Start")}function Ct(t){"use forget";const e=Q.c(25),{activeTab:r,debouncedQuery:i,searchResults:a,isLoadingSearch:n,searchResultsCursor:c,showWorkspaceResults:l,workspaceSearchResults:d,workspaceSearchResultsCursor:g,isLoadingWorkspaceSearch:m,recent:v,isLoadingRecent:p,effectiveRole:o,setPopoverForceOpen:h,onSelect:f,renderCombobox:w}=t;let u;e[0]===Symbol.for("react.memo_cache_sentinel")?(u=Ae(),e[0]=u):u=e[0];const N=j.useRef(u);let y;e[1]===Symbol.for("react.memo_cache_sentinel")?(y=[],e[1]=y):y=e[1],j.useEffect(Gt,y);let z,k;e[2]!==i||e[3]!==n||e[4]!==a?(z=()=>{!n&&a&&(N.current=Ae(),a.length>0?Promise.all(a.map((W,b)=>{O.logEvent("Search Display Result",{search_id:N.current,gizmo_id:W.gizmo.id,position:b,query:i})})):O.logEvent("Search No Results",{query:i}))},k=[a,n,i],e[2]=i,e[3]=n,e[4]=a,e[5]=z,e[6]=k):(z=e[5],k=e[6]),j.useEffect(z,k);let R;e[7]!==v?(R=v!=null?v:[],e[7]=v,e[8]=R):R=e[8];let _;return e[9]!==r||e[10]!==i||e[11]!==o||e[12]!==p||e[13]!==n||e[14]!==m||e[15]!==f||e[16]!==w||e[17]!==a||e[18]!==c||e[19]!==h||e[20]!==l||e[21]!==R||e[22]!==d||e[23]!==g?(_=s.jsx(Rt,{query:i,activeTab:r,searchIdRef:N,searchResults:a,searchResultsCursor:c,isLoadingSearch:n,showWorkspaceResults:l,workspaceSearchResults:d,workspaceSearchResultsCursor:g,isLoadingWorkspaceSearch:m,isLoadingRecent:p,recentSearchResults:R,setPopoverForceOpen:h,effectiveRole:o,onSelect:f,renderCombobox:w}),e[9]=r,e[10]=i,e[11]=o,e[12]=p,e[13]=n,e[14]=m,e[15]=f,e[16]=w,e[17]=a,e[18]=c,e[19]=h,e[20]=l,e[21]=R,e[22]=d,e[23]=g,e[24]=_):_=e[24],_}function Gt(){O.logEvent("Search Start")}function ve(t){"use forget";const e=Q.c(6),{children:r,onClick:i,isSelected:a,isClickable:n}=t,c="text-token-text-tertiary px-3 pb-2 text-xs ".concat(a?"border-b-2 font-bold":"font-semibold"," ").concat(n?"cursor-pointer":"");let l;e[0]!==i?(l=()=>{i==null||i()},e[0]=i,e[1]=l):l=e[1];let d;return e[2]!==r||e[3]!==c||e[4]!==l?(d=s.jsx("div",{className:c,onClick:l,children:r}),e[2]=r,e[3]=c,e[4]=l,e[5]=d):d=e[5],d}function Rt(t){"use forget";var Ge,Re,Me,_e;const e=Q.c(74),{query:r,searchIdRef:i,isLoadingRecent:a,searchResults:n,searchResultsCursor:c,isLoadingSearch:l,showWorkspaceResults:d,workspaceSearchResults:g,workspaceSearchResultsCursor:m,isLoadingWorkspaceSearch:v,recentSearchResults:p,setPopoverForceOpen:o,activeTab:h,effectiveRole:f,onSelect:w,renderCombobox:u}=t;let N;e[0]!==n?(N=n===void 0?[]:n,e[0]=n,e[1]=N):N=e[1];const y=N;let z;e[2]!==g?(z=g===void 0?[]:g,e[2]=g,e[3]=z):z=e[3];const k=z,R=Gs(),[_,W]=j.useState(!1),b=Rs(r,_,h==="WORKSPACE",h==="WORKSPACE"?m:c);let E;e[4]!==((Ge=b.data)==null?void 0:Ge.pages)?(E=(Me=(Re=b.data)==null?void 0:Re.pages.flatMap(Tt))!=null?Me:[],e[4]=(_e=b.data)==null?void 0:_e.pages,e[5]=E):E=e[5];let P;e[6]!==b||e[7]!==E?(P=ee(C({},b),{data:E}),e[6]=b,e[7]=E,e[8]=P):P=e[8];const{data:M,hasNextPage:A,fetchNextPage:T,isFetchingNextPage:L,isError:I}=P,[J,Z]=j.useState(M.length),Ce=j.useRef(null);let ne,le;e[9]!==J||e[10]!==M.length?(ne=()=>{var x;M.length>J&&(Z(M.length),(x=Ce.current)==null||x.scrollIntoView({behavior:"smooth",block:"nearest"}))},le=[M.length,J],e[9]=J,e[10]=M.length,e[11]=ne,e[12]=le):(ne=e[11],le=e[12]),j.useEffect(ne,le);let ce;e[13]!==f||e[14]!==R||e[15]!==w||e[16]!==r||e[17]!==i?(ce=(x,G)=>{var F,$;const D=(F=x.gizmo.vanity_metrics)==null?void 0:F.num_conversations_str,H=(($=x.gizmo.tags)==null?void 0:$.includes(te.WorkspaceDisabled))&&f!==V.OWNER;return{id:x.gizmo.id,className:U("group flex items-center gap-3 rounded-lg px-3 py-2 hover:bg-gray-50 dark:hover:bg-white/10",H&&"opacity-50 hover:opacity-100"),focusedClassName:"bg-gray-50 dark:bg-white/10",onClick:()=>{w?w(x):O.logEvent("Store Click Gizmo",{search_id:i.current,gizmo_id:x.gizmo.id,position:G,query:r,section:"search"})},children:s.jsx(Lt,{resource:x,grayedOut:H!=null?H:!1,isScreenSm:R,numConvos:D})}},e[13]=f,e[14]=R,e[15]=w,e[16]=r,e[17]=i,e[18]=ce):ce=e[18];const K=ce;if(r===""&&p&&p.length>0){let x;return e[19]!==K||e[20]!==p||e[21]!==u?(x=u({discoverySearchRecentlyUsed:p.map(K)},null),e[19]=K,e[20]=p,e[21]=u,e[22]=x):x=e[22],x}if(r===""&&a){let x;return e[23]!==u?(x=u([],null),e[23]=u,e[24]=x):x=e[24],x}if(r===""){let x;if(e[25]!==u){let G;e[27]===Symbol.for("react.memo_cache_sentinel")?(G=s.jsx(ve,{onClick:void 0,isSelected:void 0,isClickable:!1,children:s.jsx(S,C({},B.discoverySearchRecentlyUsedEmpty))}),e[27]=G):G=e[27],x=u([],G),e[25]=u,e[26]=x}else x=e[26];return x}if(r!==""&&!l&&h==="ALL"&&(y==null||y.length===0)){let x;if(e[28]!==u){let G;e[30]===Symbol.for("react.memo_cache_sentinel")?(G=s.jsx("div",{className:"text-token-text-tertiary mt-4 px-3 pb-2 text-xs font-semibold",children:s.jsx(S,C({},B.discoveryNoResultsSearch))}),e[30]=G):G=e[30],x=u([],G),e[28]=u,e[29]=x}else x=e[29];return x}if(r!==""&&!v&&h==="WORKSPACE"&&(k==null||k.length===0)){let x;if(e[31]!==u){let G;e[33]===Symbol.for("react.memo_cache_sentinel")?(G=s.jsx("div",{className:"text-token-text-tertiary mt-4 px-3 pb-2 text-xs font-semibold",children:s.jsx(S,C({},B.discoveryNoResultsSearch))}),e[33]=G):G=e[33],x=u([],G),e[31]=u,e[32]=x}else x=e[32];return x}if(d){if(r!==""&&!l&&!v&&(!y||y.length===0)&&(!k||k.length===0)){let x;if(e[34]!==u){let G;e[36]===Symbol.for("react.memo_cache_sentinel")?(G=s.jsx("div",{className:"mx-2",children:s.jsx(ve,{onClick:void 0,isSelected:void 0,isClickable:!1,children:s.jsx(S,C({},B.discoveryNoResultsSearch))})}),e[36]=G):G=e[36],x=u([],G),e[34]=u,e[35]=x}else x=e[35];return x}}else{if(l){let x;return e[37]!==u?(x=u([],null),e[37]=u,e[38]=x):x=e[38],x}if(r!==""&&!l&&(!y||y.length===0)){let x;if(e[39]!==u){let G;e[41]===Symbol.for("react.memo_cache_sentinel")?(G=s.jsx("div",{className:"mx-2",children:s.jsx(ve,{onClick:void 0,isSelected:void 0,isClickable:!1,children:s.jsx(S,C({},B.discoveryNoResultsSearch))})}),e[41]=G):G=e[41],x=u([],G),e[39]=u,e[40]=x}else x=e[40];return x}}let de;if(e[42]!==T||e[43]!==A||e[44]!==I||e[45]!==L||e[46]!==_||e[47]!==M||e[48]!==K||e[49]!==u||e[50]!==y||e[51]!==c||e[52]!==o||e[53]!==k||e[54]!==m){let x=[];if(y){const D=y.map(K);x=[...x,...D]}if(y&&M){const D=M.map(K);x=[...x,...D]}if((!_&&M.length===0||A||L||I)&&c!=null){let D;e[56]!==T||e[57]!==o?(D=()=>{W(!0),T(),o==null||o(!0)},e[56]=T,e[57]=o,e[58]=D):D=e[58];const H=I?"danger-outline":"secondary";let F;e[59]!==I?(F=I?s.jsx(S,C({},B.discoveryLoadMoreError)):s.jsx(S,C({},B.discoveryLoadMore)),e[59]=I,e[60]=F):F=e[60];let $;e[61]!==L||e[62]!==H||e[63]!==F?($=s.jsx(Y,{color:H,onClick:_t,loading:L,fullWidth:!0,className:"mt-2 md:mt-3",children:F}),e[61]=L,e[62]=H,e[63]=F,e[64]=$):$=e[64];const pe={id:"all-load-more-button",className:"",onClick:D,children:$};x=[...x,pe]}const G={ALL:x};if(k){const D=k.map(K);G.WORKSPACE=D}if(k&&M){const D=M.map(K);G.WORKSPACE=[...G.WORKSPACE,...D]}if((!_&&M.length===0||A||L||I)&&m!=null){let D;e[65]!==T||e[66]!==o?(D=()=>{W(!0),T(),o==null||o(!0)},e[65]=T,e[66]=o,e[67]=D):D=e[67];const H=I?"danger-outline":"secondary";let F;e[68]!==I?(F=I?s.jsx(S,C({},B.discoveryLoadMoreError)):s.jsx(S,C({},B.discoveryLoadMore)),e[68]=I,e[69]=F):F=e[69];let $;e[70]!==L||e[71]!==H||e[72]!==F?($=s.jsx(Y,{color:H,onClick:Mt,fullWidth:!0,className:"mt-2 md:mt-3",loading:L,children:F}),e[70]=L,e[71]=H,e[72]=F,e[73]=$):$=e[73];const pe={id:"workspace-load-more-button",className:"",onClick:D,children:$};G.WORKSPACE=[...G.WORKSPACE,pe]}de=u(G,null),e[42]=T,e[43]=A,e[44]=I,e[45]=L,e[46]=_,e[47]=M,e[48]=K,e[49]=u,e[50]=y,e[51]=c,e[52]=o,e[53]=k,e[54]=m,e[55]=de}else de=e[55];return de}function Mt(){}function _t(){}function Tt(t){return t.items.map(Et)}function Et(t){return t}function Lt(t){"use forget";var N,y;const e=Q.c(25),{resource:r,grayedOut:i,isScreenSm:a,numConvos:n}=t,c=!!((N=r.gizmo.tags)!=null&&N.includes(te.FirstParty)),l=(y=r.gizmo.display.profile_picture_url)!=null?y:void 0,d=i&&"grayscale group-hover:grayscale-0";let g;e[0]!==d?(g=U("h-8 w-8 shrink-0",d),e[0]=d,e[1]=g):g=e[1];let m;e[2]!==c||e[3]!==l||e[4]!==g?(m=s.jsx(ze,{isFirstParty:c,src:l,className:g}),e[2]=c,e[3]=l,e[4]=g,e[5]=m):m=e[5];let v;e[6]!==r.gizmo.display.name?(v=s.jsx("div",{className:"flex flex-row items-end space-x-2",children:s.jsx("span",{className:"shrink-0 truncate text-sm font-semibold",children:r.gizmo.display.name})}),e[6]=r.gizmo.display.name,e[7]=v):v=e[7];let p;e[8]!==a||e[9]!==r.gizmo.display.description?(p=a&&s.jsx("span",{className:"text-token-text-tertiary max-w-md truncate text-xs",children:r.gizmo.display.description}),e[8]=a,e[9]=r.gizmo.display.description,e[10]=p):p=e[10];let o;e[11]!==r?(o=s.jsx("div",{className:"-mt-1",children:s.jsx(Ne,{gizmo:r,className:"text-token-text-tertiary truncate text-xs",hideLink:!0})}),e[11]=r,e[12]=o):o=e[12];let h;e[13]!==n?(h=n&&s.jsxs("div",{className:"text-token-text-tertiary flex items-center gap-1 font-semibold",style:{marginTop:"-2px"},children:[s.jsx(Pe,{className:"icon-xs"}),s.jsx("span",{className:"line-clamp-1 text-xs",children:n})]}),e[13]=n,e[14]=h):h=e[14];let f;e[15]!==o||e[16]!==h?(f=s.jsxs("div",{className:"flex items-center gap-2",children:[o,h]}),e[15]=o,e[16]=h,e[17]=f):f=e[17];let w;e[18]!==f||e[19]!==v||e[20]!==p?(w=s.jsxs("div",{className:"flex flex-col space-y-1 truncate",children:[v,p,f]}),e[18]=f,e[19]=v,e[20]=p,e[21]=w):w=e[21];let u;return e[22]!==w||e[23]!==m?(u=s.jsxs(s.Fragment,{children:[m,w]}),e[22]=w,e[23]=m,e[24]=u):u=e[24],u}const B=fe({discoveryAllResultsHeader:{id:"gizmo.discovery.AllResultsHeader",defaultMessage:"All"},discoveryWorkspaceResultsHeader:{id:"gizmo.discovery.workspaceResultsHeaderName",defaultMessage:"{workspaceName} workspace"},discoveryNoResultsSearch:{id:"gizmo.discovery.search.empty",defaultMessage:"No results found"},discoverySearch:{id:"gizmo.discovery.search",defaultMessage:"Search GPTs"},discoverySearchRecentlyUsed:{id:"gizmo.discovery.search.recentlyUsed",defaultMessage:"Recently Used"},discoverySearchRecentlyUsedEmpty:{id:"gizmo.discovery.search.recentlyUsedEmpty",defaultMessage:"No recently used GPTs"},discoveryLoadMore:{id:"gizmo.discovery.loadMore",defaultMessage:"See more"},discoveryLoadMoreError:{id:"gizmo.discovery.loadMoreError",defaultMessage:"Error loading more"}});var Fe;const is=$e.div(Fe||(Fe=ye(["grid grid-cols-1 gap-x-1.5 gap-y-1 md:gap-x-2 md:gap-y-1.5 lg:grid-cols-2 lg:gap-x-3 lg:gap-y-2.5"]))),Se="gpt_store";function Dt(t,e){e.scrollLeft>t.offsetLeft?e.scrollBy({left:t.offsetLeft-e.scrollLeft-20,behavior:"smooth"}):e.scrollLeft+e.clientWidth<t.offsetLeft+t.clientWidth&&e.scrollBy({left:t.offsetLeft+t.clientWidth-e.clientWidth-e.scrollLeft+20,behavior:"smooth"})}function lr({anon:t}){const[e]=j.useState(()=>Ms.getItem(_s.GizmoDiscoveryLocale)),r=Ye(),[i,a]=j.useState(!1),n=r!=null&&r.isOwnerOfAccount()&&!i?V.OWNER:V.STANDARD;return s.jsx(At,{anon:t,currAccount:r,requestedLocale:e,effectiveRole:n,setPretendStandardUser:a})}function At({anon:t,currAccount:e,requestedLocale:r,effectiveRole:i,setPretendStandardUser:a}){const[n,c]=j.useState(void 0),l=!!t||(e==null?void 0:e.isPersonalAccount())&&!0,{data:d,isLoading:g,isError:m}=Ts(r,l);j.useEffect(()=>{d&&c({locale:d.locale,workspace_filtered:d.workspace_filtered,cuts:d.cuts.map(p=>({info:p.info,list:{items:p.list.items.map(o=>o.resource),cursor:p.list.cursor}}))})},[d]);const v=(...p)=>{var h,f;const o=Ve(...p);return ee(C({},o),{data:(f=(h=o.data)==null?void 0:h.pages.flatMap(w=>w.list.items.map(u=>u.resource)))!=null?f:[]})};return s.jsx(Wt,{anon:t,discoveryLanding:n,isLoading:g,isError:m,effectiveRole:i,setPretendStandardUser:a,useFetchMoreQuery:v})}function It(t,e){if(t)return s.jsx(me,{type:"info",children:s.jsx(S,C({},q.discoveryResidencyRestriction))});switch(e){case"allow_none":return s.jsx(me,{type:"info",children:s.jsx(S,C({},q.discoveryThirdPartyDisabled))});case"allow_specific":return s.jsx(me,{type:"info",children:s.jsx(S,C({},q.discoveryThirdPartySpecific))});default:return null}}function Wt({anon:t,discoveryLanding:e,isLoading:r,isError:i,effectiveRole:a,setPretendStandardUser:n,useFetchMoreQuery:c}){var R,_,W;const l=Ye(),d=Ds(l==null?void 0:l.getWorkspaceId()),g=j.useRef({}),[m,v]=j.useState({}),p=ct(),o=j.useMemo(()=>et(As(e==null?void 0:e.cuts.map(b=>({id:b.info.id,name:b.info.display_group}))),"name"),[e]),h=j.useRef(null),f=(R=o.find(b=>m[b.id]))!=null?R:o[0];j.useEffect(()=>{const b=g.current,E=new IntersectionObserver(P=>{P.forEach(M=>{for(const A of o){const T=b[A.id];T!=null&&M.target===T&&v(L=>ee(C({},L),{[A.id]:M.isIntersecting}))}})},{root:null,rootMargin:"-96px",threshold:.1});return Object.values(b).forEach(P=>{P!=null&&E.observe(P)}),()=>{Object.values(b).forEach(P=>{P!=null&&E.unobserve(P)})}},[g,o]);const w=j.useRef(null),u=s.jsx("div",{className:"flex h-full w-full items-center justify-center",children:i?s.jsx(me,{type:"danger",children:s.jsx(S,C({},q.discoveryError))}):s.jsx(Ke,{})}),N=(l==null?void 0:l.data.residencyRegion)!=null&&l.data.residencyRegion!=="no_constraint"&&l.data.residencyRegion!=="us",y=(_=d.data)==null?void 0:_.allow_third_party_gpts,z=It(N,y),k=s.jsxs("div",{className:"screen-arch:w-full mx-auto max-w-3xl overflow-x-clip px-4",children:[s.jsx(Ot,{}),s.jsxs("div",{className:"bg-token-bg-primary sticky top-14 z-30 -mt-2 mb-12 flex flex-col gap-6 pt-2 [@media(min-width:1560px)]:top-0",children:[!t&&s.jsx(jt,{}),s.jsx("div",{ref:h,className:"scroll-mt-28"}),z,o.length>0&&s.jsx(Ut,{displayGroups:o,currentDisplayGroup:f,scrollToDisplayGroup:b=>{var P;((P=g.current[b.id])!=null?P:h.current).scrollIntoView({behavior:"smooth",block:"start"})}})]}),(W=e==null?void 0:e.cuts.map(b=>{var E;return b.info.display_type==="featured"?s.jsx(Ht,{info:b.info,items:b.list.items,ref:P=>{P!=null&&(g.current[b.info.id]=P)},effectiveRole:a},b.info.id):s.jsx(Qt,{info:b.info,items:b.list.items,cursor:(E=b.list.cursor)!=null?E:void 0,ref:P=>{P!=null&&(g.current[b.info.id]=P)},anon:t,effectiveRole:a,useFetchMoreQuery:c},b.info.id)}))!=null?W:[]]});return r||i?s.jsxs(s.Fragment,{children:[t?s.jsx(be,{redirectUrl:Ie(),className:"bg-token-main-surface-primary sticky top-0 z-30 h-14"}):p?null:s.jsx(We,{}),u]}):s.jsxs("div",{ref:w,className:"h-full overflow-y-auto",children:[t?s.jsx(be,{redirectUrl:Ie(),className:"bg-token-main-surface-primary sticky top-0 z-30 h-14"}):s.jsxs(s.Fragment,{children:[(l==null?void 0:l.isWorkspaceAccount())&&s.jsx(qt,{role:a,onPretendStandardUser:b=>{n(b)}}),!p&&s.jsx(We,{})]}),k,(e==null?void 0:e.workspace_filtered)&&!(l!=null&&l.isOwnerOfAccount())&&s.jsx(Ft,{})]})}function Ot(){return s.jsxs("div",{className:"mb-6",children:[s.jsx("div",{className:"my-2 text-center text-3xl font-bold md:my-4 md:text-5xl",children:s.jsx(S,C({},q.discoverySplashHeader))}),s.jsx("div",{className:"text-token-text-secondary mx-auto w-full text-center text-sm md:text-lg md:leading-tight",children:s.jsx(S,C({},q.discoverySplashDescription))})]})}function Ut({displayGroups:t,currentDisplayGroup:e,scrollToDisplayGroup:r}){const i=j.useRef(null),a=oe(),n=(...o)=>a.formatMessage(...o),c=j.useRef({}),[l,d]=j.useState(!1);j.useEffect(()=>{if(l||e==null)return;const h=c.current[e.id];if(h==null)return;const f=i.current;f!=null&&Dt(h,f)},[e,l]);const[g,m]=j.useState(!1),[v,p]=j.useState(!1);return j.useEffect(()=>{const o=i.current,h=()=>{o!=null&&(m(o.scrollLeft>0),p(o.scrollLeft+o.clientWidth<o.scrollWidth))};return o==null||o.addEventListener("scroll",h),window.addEventListener("resize",h),h(),()=>{o==null||o.removeEventListener("scroll",h),window.removeEventListener("resize",h)}},[i]),s.jsxs("div",{className:"bg-token-main-surface-primary sticky top-14 z-10 -ms-4 w-screen py-2 text-sm md:ms-0 md:w-full md:pb-0",children:[g&&s.jsx("div",{className:"absolute start-0 top-2 hidden h-full items-end bg-linear-to-r from-white from-50% to-transparent pe-8 md:block dark:from-gray-800",children:s.jsx("button",{className:"mt-2 rounded-full bg-gray-100 p-1 hover:bg-gray-200 dark:bg-gray-700 dark:hover:bg-white/20",onClick:()=>{i.current!=null&&i.current.scrollBy({left:-400,behavior:"smooth"})},children:s.jsx(Os,{className:"icon-sm"})})}),s.jsx("div",{className:"no-scrollbar flex scroll-m-5 gap-1.5 overflow-x-auto md:overflow-hidden",ref:i,children:t.map(o=>s.jsx("div",{className:U("md:text-token-text-primary cursor-pointer scroll-mx-5 rounded-3xl px-3 py-2 whitespace-nowrap select-none first:ms-4 last:me-4 md:bg-transparent md:px-2 md:first:ms-0 md:last:me-0",o.id===(e==null?void 0:e.id)?"border-token-text-primary text-token-main-surface-primary bg-black md:rounded-none md:border-b-2 dark:bg-gray-100 dark:md:bg-transparent":"bg-token-main-surface-secondary hover:text-token-text-primary md:text-token-text-tertiary hover:bg-gray-100 md:rounded-lg md:hover:bg-gray-50 dark:hover:bg-white/20 dark:md:bg-transparent dark:md:hover:bg-gray-700"),onClick:()=>{d(!0),r(o),setTimeout(()=>{d(!1)},1e3),O.logEvent("Store Click Category",{category:o.id})},ref:h=>{h!=null&&(c.current[o.id]=h)},children:n({id:"gizmo.categoryName.".concat(o.name),defaultMessage:o.name,description:"store category"})},o.id))}),v&&s.jsx("div",{className:"absolute end-0 top-2 hidden h-full bg-linear-to-l from-white from-50% to-transparent ps-8 md:block dark:from-gray-800",children:s.jsx("button",{className:"mt-2 rounded-full bg-gray-100 p-1 hover:bg-gray-200 dark:bg-gray-700 dark:hover:bg-white/10",onClick:()=>{i.current!=null&&i.current.scrollBy({left:400,behavior:"smooth"})},children:s.jsx(Us,{className:"icon-sm"})})})]})}function Ft(){const t=oe(),e=ss(),r=qs();return s.jsxs("div",{className:U("bg-token-main-surface-secondary text-token-text-secondary screen-arch:static fixed bottom-0 flex w-full items-center justify-center gap-2 p-3 text-sm",r&&"md:w-[calc(100%-16rem)]"),children:[s.jsx(ts,{className:"icon-sm"}),t.formatMessage(q.discoveryThirdPartyGPTsDisabled,{workspaceName:e})]})}function qt({role:t,onPretendStandardUser:e}){const r=oe();return Fs()?s.jsxs("div",{className:"h-52px flex w-full items-center justify-center gap-2 bg-gray-100 p-3 text-sm dark:bg-gray-700",children:[s.jsx(ts,{className:"icon-sm"}),s.jsx(S,{id:"gizmo.discovery.browsingAsOwner",defaultMessage:"You're viewing as a <b>workspace member</b>",values:{b:a=>s.jsxs(se.Root,{defaultValue:t,onValueChange:n=>{e(n===V.STANDARD)},children:[s.jsxs(se.Trigger,{className:"-mx-2 -my-2 bg-transparent px-1 font-semibold",children:[s.jsx(xe,{disabled:t!==V.OWNER,label:r.formatMessage({id:"gizmo.discovery.browsingAsOwnerTooltip",defaultMessage:"Owners can access all third-party GPTs, even if they haven’t been approved."}),side:"bottom",triggerAs:null,children:s.jsx(se.Value,{})}),s.jsx(se.Icon,{})]}),s.jsx(se.Portal,{children:s.jsxs(se.Content,{children:[s.jsx(se.Item,{value:V.OWNER,children:s.jsx(S,{id:"gizmo.discovery.browsingOwnerRole",defaultMessage:"workspace owner"})}),s.jsx(se.Item,{value:V.STANDARD,children:s.jsx(S,{id:"gizmo.discovery.browsingMemberRole",defaultMessage:"workspace member"})})]})})]})}})]}):null}function We({isMobile:t=!1}){var m;const e=je(),r=ge(),i=oe(),{canCreate:a,isLoading:n}=Es(),c=X(),l=he(c),d=(m=l==null?void 0:l.planType)!=null?m:"unknown",g=()=>{a?(O.logEvent("Store Create Gizmo"),r(e)):(O.logUpsellGetPlusButtonClicked({location:Se,type:"create_gpt",plan_type:d}),Xe(r,"Gizmo Discovery page upsell"))};return s.jsx(s.Fragment,{children:s.jsxs(Js,{className:U("z-30 flex w-full items-center justify-between whitespace-nowrap",t&&"ps-2 pe-0",!t&&"max-md:hidden"),children:[s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx("div",{className:"hidden md:flex",children:s.jsx(st,{clientThreadId:Ls})}),s.jsx("h1",{className:"px-2 text-lg font-normal select-none [text-box-trim:trim-both] [view-transition-name:var(--vt-tool-page-title)]",children:s.jsx(S,{id:"h8AzQb",defaultMessage:"Explore GPTs"})})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsxs("div",{className:"hidden items-center gap-2 md:flex",children:[a&&s.jsx(Y,{color:"ghost",onClick:()=>{r("/gpts/mine"),O.logEvent("Store My Gizmos")},children:s.jsx(S,C({},q.discoveryMyGPTs))}),s.jsx(Bt,{canCreateGPTs:a,loadingPermissions:n,createUrl:e})]}),s.jsx("div",{className:"md:hidden",children:s.jsxs(Qe,{contentAlign:"end",triggerButton:s.jsx(Zs,{"aria-label":i.formatMessage({id:"pdxBIm",defaultMessage:"Open actions menu"})}),children:[a&&s.jsx(ue.Item,{onClick:()=>{r("/gpts/mine"),O.logEvent("Store My Gizmos")},children:s.jsx(S,C({},q.discoveryMyGPTs))}),s.jsx(ue.Item,{onClick:g,children:s.jsx(S,C({},q.discoveryCreateGPT))})]})}),s.jsx("div",{className:"hidden md:block",children:s.jsx(tt,{})})]})]})})}const Bt=({canCreateGPTs:t,loadingPermissions:e,createUrl:r})=>{var N;const[i,a]=j.useState(!1),n=j.useRef(void 0),c=Is(),l=X(),d=he(l),g=d==null?void 0:d.isFree(),m=d==null?void 0:d.isWorkspaceAccount(),v=(N=d==null?void 0:d.planType)!=null?N:"unknown",p="create_gpt",o=()=>{t||(O.logPopoverHover({location:Se,type:p,plan_type:v}),clearTimeout(n.current),a(!0))},h=()=>{t||(n.current=c(function(){a(!1)},300))},f=ge(),w=()=>{O.logUpsellGetPlusButtonClicked({location:Se,type:p,plan_type:v}),Xe(f,"Gizmo Discovery page upsell")},u=t?()=>O.logEvent("Store Create Gizmo"):y=>y.preventDefault();return s.jsxs("div",{onMouseEnter:o,onMouseLeave:h,className:"screen-arch:flex screen-arch:items-center relative",children:[s.jsx(Y,{color:"secondary",disabled:!t,visuallyDisabled:!t,onClick:u,as:"link",to:r,icon:Je,"data-testid":"create-gpt-discovery-button",loading:e,children:s.jsx(S,C({},q.discoveryCreateGPT))}),!t&&i&&s.jsx("div",{className:"border-token-border-default bg-token-main-surface-primary screen-arch:top-12 absolute end-0 z-10 mt-2 w-64 rounded-lg border p-3 text-sm shadow-lg",children:g?s.jsxs(s.Fragment,{children:[s.jsx("p",{className:"from-token-text-tertiary mb-2 text-start font-normal break-words whitespace-normal",children:s.jsx(S,C({},q.createGPTUpsell))}),s.jsx(Y,{color:"secondary",onClick:w,size:"small",children:s.jsx(S,C({},Ws(l)))})]}):m?s.jsx("p",{className:"from-token-text-tertiary mb-2 text-start font-normal break-words whitespace-normal",children:s.jsx(S,C({},q.createGPTDisabledByAdmin))}):null})]})},Ht=j.forwardRef(function({info:e,items:r,effectiveRole:i},a){return s.jsx(os,{title:e.title,description:e.description,ref:a,children:s.jsx(is,{children:r.map((n,c)=>s.jsx($t,{resource:n,effectiveRole:i},"".concat(c,"-").concat(n.gizmo.id)))})})});function $t({resource:t,effectiveRole:e}){var a,n,c,l;const r=(a=t.gizmo.vanity_metrics)==null?void 0:a.num_conversations_str,i=((n=t.gizmo.tags)==null?void 0:n.includes(te.WorkspaceDisabled))&&e!==V.OWNER;return s.jsx(ie,{children:s.jsxs(as,{gizmo:t,className:U("group flex h-24 items-center gap-5 overflow-hidden rounded-xl bg-gray-50 px-7 py-8 hover:bg-gray-100 md:h-32 lg:h-36 dark:bg-gray-700 dark:hover:bg-white/10",i&&"opacity-50 hover:opacity-100"),onClick:()=>{O.logEvent("Store Click Gizmo",{gizmo_id:t.gizmo.id,section:"featured"})},children:[s.jsx(ze,{isFirstParty:!!((c=t.gizmo.tags)!=null&&c.includes(te.FirstParty)),src:(l=t.gizmo.display.profile_picture_url)!=null?l:void 0,className:U("h-16 w-16 shrink-0 md:h-24 md:w-24",i&&"grayscale group-hover:grayscale-0")}),s.jsxs("div",{className:"flex flex-col",children:[s.jsx("div",{className:"line-clamp-2 font-semibold md:text-lg",children:t.gizmo.display.name}),s.jsx("span",{className:"line-clamp-2 text-xs md:line-clamp-3",children:t.gizmo.display.description}),s.jsxs("div",{className:"text-token-text-tertiary mt-1 line-clamp-1 flex justify-start gap-1 text-xs",children:[s.jsx(Ne,{gizmo:t,className:"text-xs",hideLink:!0}),r&&s.jsxs(s.Fragment,{children:[s.jsx("span",{className:"text-[10px]",children:"•"}),s.jsx(Pe,{className:"mt-0.5 h-3 w-3"}),r]})]})]})]})})}const Qt=j.forwardRef(function({info:e,items:r,cursor:i,anon:a,effectiveRole:n,useFetchMoreQuery:c},l){const[d,g]=j.useState(r.length===0),{data:m,hasNextPage:v,fetchNextPage:p,isFetchingNextPage:o,isError:h}=c({cutId:e.id,locale:e.locale,limit:6,cursor:i,enabled:d});j.useEffect(()=>{r.length===0&&p()},[p,r.length]);const[f,w]=j.useState(m.length),u=j.useRef(null),N=fs(.1);return j.useEffect(()=>{var y;m.length>f&&(w(m.length),(y=u.current)==null||y.scrollIntoView({behavior:"smooth",block:"nearest"}))},[m.length,f]),s.jsxs(os,{title:e.title,description:e.description,ref:l,children:[s.jsxs(is,{children:[r.map((y,z)=>s.jsx(Oe,{resource:y,rank:z+1,cutId:e.id,effectiveRole:n},z)),m.map((y,z)=>s.jsx(Oe,{resource:y,rank:r.length+z+1,cutId:e.id,delay:N(z-f,m.length-f),effectiveRole:n},z))]}),(!d||v||o||h)&&!a&&i!=null&&s.jsx(Y,{color:h?"danger-outline":"secondary",onClick:()=>{g(!0),O.logEvent("Store Load More",{section:e.id}),p()},fullWidth:!0,className:"mt-2 md:mt-3",loading:o,children:h?s.jsx(S,C({},q.discoveryLoadMoreError)):s.jsx(S,C({},q.discoveryLoadMore))}),s.jsx("div",{ref:u})]})});function Oe({resource:t,rank:e,cutId:r,delay:i,effectiveRole:a}){var l,d;const n=((l=t.gizmo.tags)==null?void 0:l.includes(te.WorkspaceDisabled))&&a!==V.OWNER,c=(d=t.gizmo.tags)==null?void 0:d.includes(te.FirstParty);return s.jsx(ie,{delay:i,children:s.jsxs(as,{gizmo:t,className:U("group hover:bg-token-main-surface-secondary flex h-[104px] items-center gap-2.5 overflow-hidden rounded-xl px-1 py-4 md:px-3 md:py-4 lg:px-3",n&&"opacity-50 hover:opacity-100"),onClick:()=>{O.logEvent("Store Click Gizmo",{gizmo_id:t.gizmo.id,position:e,section:c?"first_party":r})},children:[s.jsx("div",{className:"text-md flex w-8 shrink-0 items-center justify-center font-semibold",children:e}),s.jsx(Xs,{resource:t,grayedOut:n})]},t.gizmo.id)})}const os=j.forwardRef(function({title:e,description:r,className:i,children:a},n){return s.jsxs("div",{ref:n,className:"h-fit scroll-mt-28 last:min-h-[calc(100vh-8rem)]",children:[s.jsxs(ie,{animateTap:!1,children:[s.jsx("div",{className:"text-xl font-semibold md:text-2xl",children:e}),r&&s.jsx("div",{className:"text-token-text-tertiary text-sm md:text-base",children:r})]}),s.jsx("div",{className:U("mt-4 mb-10",i),children:a})]})}),q=fe({discoveryAllResultsHeader:{id:"gizmo.discovery.AllResultsHeader",defaultMessage:"All"},discoveryWorkspaceResultsHeader:{id:"gizmo.discovery.workspaceResultsHeaderName",defaultMessage:"{workspaceName} workspace"},discoveryEmpty:{id:"gizmo.discovery.empty",defaultMessage:"Nothing to discover"},discoveryNoResultsSearch:{id:"gizmo.discovery.search.empty",defaultMessage:"No results found"},discoveryError:{id:"gizmo.discovery.error",defaultMessage:"Error loading GPTs"},discoverySearch:{id:"gizmo.discovery.search",defaultMessage:"Search GPTs"},discoverySearchSmall:{id:"gizmo.discovery.searchSmall",defaultMessage:"Search"},discoverySearchRecentlyUsed:{id:"gizmo.discovery.search.recentlyUsed",defaultMessage:"Recently Used"},discoverySearchRecentlyUsedEmpty:{id:"gizmo.discovery.search.recentlyUsedEmpty",defaultMessage:"No recently used GPTs"},discoverySearchResults:{id:"gizmo.discovery.search.results",defaultMessage:"Search Results"},discoveryLoadMore:{id:"gizmo.discovery.loadMore",defaultMessage:"See more"},discoveryLoadMoreError:{id:"gizmo.discovery.loadMoreError",defaultMessage:"Error loading more"},discoveryMyGPTs:{id:"gizmo.discovery.myGPTs",defaultMessage:"My GPTs"},discoveryCreateGPT:{id:"gizmo.discovery.createGPT",defaultMessage:"Create"},discoveryThirdPartyGPTsDisabled:{id:"gizmo.discovery.thirdPartyGPTsDisabled",defaultMessage:"Your admin has blocked GPTs created outside {workspaceName}."},discoverySplashHeader:{id:"gizmo.discovery.splashHeader",defaultMessage:"GPTs"},discoverySplashDescription:{id:"gizmo.discovery.splashDescription",defaultMessage:"Discover and create custom versions of ChatGPT that combine instructions, extra knowledge, and any combination of skills."},discoveryGlobalViewOn:{id:"gizmo.discovery.globalViewOn",defaultMessage:"Global View On"},discoveryGlobalViewOff:{id:"gizmo.discovery.globalViewOff",defaultMessage:"Global View Off"},createdAgoLabel:{id:"gizmo.discovery.createdAgoLabel",defaultMessage:"Created {createdAgo}"},createGPTUpsell:{id:"gizmo.discovery.createGPTUpsell",defaultMessage:"Get ChatGPT Plus to create and share your own GPTs"},createGPTDisabledByAdmin:{id:"bOPXXW",defaultMessage:"Your admin has disabled the ability to create GPTs."},discoveryResidencyRestriction:{id:"gizmo.discovery.residencyRestriction",defaultMessage:"To comply with data residency requirements, only GPTs created within your workspace are accessible. All third-party GPTs are not available."},discoveryThirdPartyDisabled:{id:"gizmo.discovery.thirdPartyDisabled",defaultMessage:"Your admin has disabled all third-party GPTs. Only workspace GPTs are available."},discoveryThirdPartySpecific:{id:"gizmo.discovery.thirdPartySpecific",defaultMessage:"Your admin has disabled most third-party GPTs, except for specific ones that have been explicitly approved. Workspace GPTs are available."}});export{nr as C,We as G,jt as a,ht as b,or as c,ar as d,as as e,ct as f,lr as g,rr as h,ot as i,ir as u};
//# sourceMappingURL=k6kbayc5yys4ai47.js.map
