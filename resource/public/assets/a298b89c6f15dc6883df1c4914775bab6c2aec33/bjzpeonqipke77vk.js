var ws=Object.defineProperty,Ds=Object.defineProperties;var Is=Object.getOwnPropertyDescriptors;var Ye=Object.getOwnPropertySymbols;var Ct=Object.prototype.hasOwnProperty,Mt=Object.prototype.propertyIsEnumerable;var St=(s,e,a)=>e in s?ws(s,e,{enumerable:!0,configurable:!0,writable:!0,value:a}):s[e]=a,V=(s,e)=>{for(var a in e||(e={}))Ct.call(e,a)&&St(s,a,e[a]);if(Ye)for(var a of Ye(e))Mt.call(e,a)&&St(s,a,e[a]);return s},X=(s,e)=>Ds(s,Is(e));var xt=(s,e)=>{var a={};for(var n in s)Ct.call(s,n)&&e.indexOf(n)<0&&(a[n]=s[n]);if(s!=null&&Ye)for(var n of Ye(s))e.indexOf(n)<0&&Mt.call(s,n)&&(a[n]=s[n]);return a};import{r as W,j as t,c as pe,M as y,d as Ve,L as Re,b as ge,u as Rs,f as mt,g as js}from"./n75kuy1cx6f5mogg.js";import{P as $,a9 as Ke,v,z as Z,B as Ge,fo as Ns,e as le,rQ as kt,C as ze,ho as Es,aF as bt,aj as vs,rW as Ne,h3 as Ut,h4 as Ft,h5 as At,h6 as Ot,h7 as Lt,h8 as Yt,h9 as Bt,ha as Ht,hb as Gt,hc as Vt,hd as Kt,he as zt,hf as $t,hg as Wt,hh as qt,hi as Qt,hj as Jt,hk as Xt,hl as Zt,f as es,dv as Ts,lb as Ee,w as ts,an as wt,gY as ks,L as Dt,p as It,E as ss,el as be,q$ as Us,r0 as Fs,eJ as As,i as as,y as Os,l0 as he,rX as Ls,lm as xe,rY as Ys,rO as Bs,rP as Hs,rU as Gs,T as Je,rR as ns,t as He,rZ as Vs,R as Ks,dw as os,r as zs,jh as $s,d9 as Ws,r_ as qs}from"./ewse8exzafeu10ji.js";import{g as Qs,v as Ze,t as et,r as tt,p as st,n as at,l as nt,j as ot,h as rt,e as lt,P as it,z as T,a as Js,A as je,B as Me,x as Rt,w as Xs}from"./fh2tsu8ocsi22jc3.js";import{P as pt,f as K,g as Zs,a as Xe}from"./nnb0v70g00lhjclz.js";import{oc as jt,lm as ea,lX as ta,ol as sa,ln as rs,bR as gt,fO as ls,og as aa,of as na,dh as oa,fN as ra,b6 as la,b7 as ia,bb as z,bc as ne,bg as ca}from"./ny10lj7zpuz89fvf.js";import{u as Nt}from"./jrb3eqknnmp1dh1j.js";import{u as ua}from"./jibfal0i45wkyt1w.js";import{i as da,C as ma}from"./fftookz3hme34txu.js";const is=()=>{$.logEvent("Account Portal: Click Get Help")};function pa(s){if(Ns(s))return"secondary";switch(s){case v.FREE:return"green";case v.GO:return"green";case v.PLUS:return"green";case v.SELF_SERVE_BUSINESS:return"primary";case v.PRO:return"primary";case v.QUORUM:return"primary"}}function ct(u){var c=u,{isCurrentPlan:s=!1,planType:e,disabled:a,loading:n=!1,onClick:o,children:l,testId:r,activeColor:m}=c,f=xt(c,["isCurrentPlan","planType","disabled","loading","onClick","children","testId","activeColor"]);return t.jsx(Ge,X(V({fullWidth:!0,size:"large",color:s?"secondary":m||pa(e),disabled:a,loading:n,onClick:o,"data-testid":r,className:a?"bg-token-sidebar-surface-tertiary text-token-text-primary hover:bg-token-sidebar-surface-tertiary dark:bg-token-text-tertiary border-none font-semibold":"font-semibold"},f),{children:l}))}function cs(s,e){const[a,n]=W.useState(!1);W.useEffect(()=>{if(!a){n(!0);return}s?$.logEventWithStatsig("Email Verify Popup Shown","chatgpt_email_verify_popup_shown",e):$.logEventWithStatsig("Email Verify Popup Hidden","chatgpt_email_verify_popup_hidden",e)},[s])}function us({ctx:s,shouldLogExposure:e}){return Ke(s,"2273762597",{disableExposureLog:!e})}function ga({ctx:s,shouldLogExposure:e}){return us({ctx:s,shouldLogExposure:e}).get("web_plus_intro_offer_coupon","none")}function fa({ctx:s,shouldLogExposure:e}){return us({ctx:s,shouldLogExposure:e}).get("is_plus_intro_offer_enabled",!1)}function ha({ctx:s,planType:e}){const n=Ke(s,"978971143").get("cta_type","default");if(e===v.PLUS)switch(n){case"long_ctas":return Z.longCtaPlus;case"upgrade_to_x":return Z.upgradeToPlus;case"join_x":return Z.joinPlus;case"unlock_x":return Z.unlockPlus;default:return Z.getPlus}else switch(n){case"long_ctas":return Z.longCtaPro;case"upgrade_to_x":return Z.upgradeToPro;case"join_x":return Z.joinPro;case"unlock_x":return Z.unlockPro;default:return Z.getPro}}const Wa=s=>{"use forget";const e=pe.c(18),{billingDetails:a,isWebRedesign:n,shouldUseComparisonSpacing:o,shouldUseOnboardingFeatures:l,isUnifiedPricingPage:r,className:m,cta:f}=s;let u;e[0]!==n||e[1]!==l?(u=Qs({isWebRedesign:n,shouldUseOnboardingFeatures:l}),e[0]=n,e[1]=l,e[2]=u):u=e[2];const c=u;let i;e[3]!==f||e[4]!==n||e[5]!==c?(i=f!=null?f:t.jsx(Ge,{color:"secondary",disabled:!0,size:"large",className:le(n?"btn-secondary disabled:bg-token-bg-primary w-[100%]":"bg-token-sidebar-surface-tertiary text-token-text-primary hover:bg-token-sidebar-surface-tertiary dark:bg-token-text-tertiary dark:text-token-text-primary dark:hover:bg-token-text-tertiary w-[100%] border-none font-semibold"),children:t.jsx(y,V({},c.callToAction.inactive))}),e[3]=f,e[4]=n,e[5]=c,e[6]=i):i=e[6];let p;e[7]!==n?(p=[t.jsx(y,X(V({},ya.haveExistingPlan),{values:{link:_=>t.jsx(Re,{target:"_blank",to:kt,onClick:is,className:le("underline",n&&"font-medium"),children:_},"row-plus-plan-help-link")}}),"existing-plan-help")],e[7]=n,e[8]=p):p=e[8];let d;return e[9]!==a||e[10]!==m||e[11]!==r||e[12]!==n||e[13]!==c||e[14]!==o||e[15]!==i||e[16]!==p?(d=t.jsx(pt,{className:m,isUnifiedPricingPage:r,planType:v.FREE,pricingPlan:c,shouldUseComparisonSpacing:o,callToActionButton:i,additionalLinks:p,billingDetails:a,isWebRedesign:n}),e[9]=a,e[10]=m,e[11]=r,e[12]=n,e[13]=c,e[14]=o,e[15]=i,e[16]=p,e[17]=d):d=e[17],d},ya=Ve({haveExistingPlan:{id:"FreeColumn.haveExistingPlan",defaultMessage:"Have an existing plan? <link>See billing help</link>"}});function Pa({isOpen:s,onClose:e,onContinue:a,analyticsParams:n}){W.useEffect(()=>{s&&$.logEventWithStatsig("Mobile Subscription Warning Modal Shown","chatgpt_mobile_subscription_warning_modal_shown",n)},[n,s]);const o=()=>{$.logEventWithStatsig("Mobile Subscription Warning Modal Continue Clicked","chatgpt_mobile_subscription_warning_modal_continue_clicked",n),a()},l=()=>{$.logEventWithStatsig("Mobile Subscription Warning Modal Close Clicked","chatgpt_mobile_subscription_warning_modal_close_clicked",n),e()};return t.jsx(ze,{testId:"modal-mobile-subscription-warning",isOpen:s,onClose:l,type:"warning",icon:Es,title:t.jsx(y,V({},Be.checkSubscriptionHeader)),primaryButton:t.jsx(bt.Button,{title:Be.dismissModal.defaultMessage,color:"primary",onClick:l}),secondaryButton:t.jsx(bt.Button,{title:Be.continueToNextStep.defaultMessage,color:"secondary",onClick:o}),children:t.jsx("span",{className:"gap-2 text-gray-600",children:Be.checkSubscriptionBody.defaultMessage})})}const Be=Ve({checkSubscriptionHeader:{id:"mobileSubscriptionWarningModal.checkSubscriptionHeader",defaultMessage:"Check your App Store subscription"},checkSubscriptionBody:{id:"mobileSubscriptionWarningModal.checkSubscriptionBody",defaultMessage:"Your subscription through the Apple App Store is currently on pause due to a payment issue. Please resolve that issue to resume using ChatGPT Plus and avoid duplicate charges."},dismissModal:{id:"mobileSubscriptionWarningModal.dismissModal",defaultMessage:"Cancel"},continueToNextStep:{id:"mobileSubscriptionWarningModal.continueToNextStep",defaultMessage:"I understand, continue anyways"}}),ds=vs(s=>({recentlyDowngraded:!1,recentlyUpgraded:!1,recentlyCanceled:!1,setRecentlyDowngraded:e=>s({recentlyDowngraded:e}),setRecentlyUpgraded:e=>s({recentlyUpgraded:e}),setRecentlyCanceled:e=>s({recentlyCanceled:e})}));function ut(s,e,a,n){let o,l;n===Ut?(o=Ze,l=Ft):n===At?(o=et,l=Ot):n===Lt?(o=tt,l=Yt):n===Bt?(o=st,l=Ht):n===Gt?(o=at,l=Vt):n===Kt?(o=nt,l=zt):n===$t?(o=ot,l=Wt):n===qt?(o=rt,l=Qt):n===Jt?(o=lt,l=Xt):(o=it,l=Zt);const r=o*e;let m;if("percentage"in a)m=r*(1-a.percentage/100);else if("value"in a)m=r-a.value;else throw new Error("Invalid discount type");return{formattedDiscountedCost:s.formatNumber(m,{style:"currency",currency:n,minimumFractionDigits:0,maximumFractionDigits:2}),currencySymbol:l}}function ms(s,e,a,n){const o=V({},e);let l;if(n&&(n.period==="year"?n.num_periods===1?l=s.formatMessage({id:"pricingPlanConstants.promoCostSubtitleForSingleYear",defaultMessage:"for the first year"}):l=s.formatMessage({id:"pricingPlanConstants.promoCostSubtitleForPluralYears",defaultMessage:"for the first {num_years} years"},{num_years:n.num_periods}):n.num_periods===1?l=s.formatMessage({id:"pricingPlanConstants.promoCostSubtitleForSingleMonth",defaultMessage:"for the first month"}):l=s.formatMessage({id:"pricingPlanConstants.promoCostSubtitleForPluralMonths",defaultMessage:"for the first {num_months} months"},{num_months:n.num_periods})),o.costDuration={id:"promoCostDuration",defaultMessage:l,description:"Cost duration for promo plan"},"percentage"in a||"discount_type"in a&&a.discount_type===Ne.PERCENTAGE){const r=("percentage"in a?a.percentage:a.amount)/100;o.costInDollars={id:"discountedCost",defaultMessage:K((1-r)*it).toString()},o.costInEuros={id:"discountedCostEuros",defaultMessage:K((1-r)*Ze).toString()},o.costInPounds={id:"discountedCostPounds",defaultMessage:K((1-r)*et).toString()},o.costInINR={id:"discountedCostInr",defaultMessage:K((1-r)*tt).toString()},o.costInIDR={id:"discountedCostIDR",defaultMessage:K((1-r)*st).toString()},o.costInPKR={id:"discountedCostPKR",defaultMessage:K((1-r)*at).toString()},o.costInTHB={id:"discountedCostTHB",defaultMessage:K((1-r)*nt).toString()},o.costInMYR={id:"discountedCostMYR",defaultMessage:K((1-r)*ot).toString()},o.costInVND={id:"discountedCostVND",defaultMessage:K((1-r)*rt).toString()},o.costInPHP={id:"discountedCostPHP",defaultMessage:K((1-r)*lt).toString()}}else if("value"in a||a.discount_type===Ne.FIXED){const r="value"in a?a.value:a.amount;o.costInDollars={id:"discountedCost",defaultMessage:K(it-r).toString()},o.costInEuros={id:"discountedCostEuros",defaultMessage:K(Ze-r).toString()},o.costInPounds={id:"discountedCostPounds",defaultMessage:K(et-r).toString()},o.costInINR={id:"discountedCostInr",defaultMessage:K(tt-r).toString()},o.costInIDR={id:"discountedCostIDR",defaultMessage:K(st-r).toString()},o.costInPKR={id:"discountedCostPKR",defaultMessage:K(at-r).toString()},o.costInTHB={id:"discountedCostTHB",defaultMessage:K(nt-r).toString()},o.costInMYR={id:"discountedCostMYR",defaultMessage:K(ot-r).toString()},o.costInVND={id:"discountedCostVND",defaultMessage:K(rt-r).toString()},o.costInPHP={id:"discountedCostPHP",defaultMessage:K(lt-r).toString()}}return o}function ps(s){switch(s){case v.FREE:return"chatgptfreeplan";case v.GO:return"chatgptgoplan";case v.PLUS:return"chatgptplusplan";case v.PRO:return"chatgptpro";case v.SELF_SERVE_BUSINESS:return"chatgptteamplan";default:throw new Error("Invalid plan type: ".concat(s))}}function me(s){return gt(s.toLowerCase())}function _a({isOpen:s,onClose:e,accountId:a,initialPlanType:n,updatedPlanType:o,billingDetails:l,promoMetadata:r,promoCode:m,fullPriceResumeDateString:f,onPromoClose:u}){"use no forget";var q,ke,we;const c=ge(),i=es(),p=Ts(),[d,_]=W.useState(!1),h=(r==null?void 0:r.plan_type_change)==="equal",C=n===o&&!h,S=jt(n)<jt(o),j=ps(o);W.useEffect(()=>{$.logTogglePlanManagementModal({isOpen:!0})},[]);const P=()=>{$.logTogglePlanManagementModal({isOpen:!1}),e()},b=ea(a),w=ta(a),k=sa(a),{data:M,isError:N,isLoading:U}=rs(a,void 0,j,void 0,h);!C&&N&&((p==null?void 0:p.planType)===v.SELF_SERVE_BUSINESS?i.warning(c.formatMessage({id:"planManagement.errorUpgradingTeam",defaultMessage:"Updates to {capitalizedUpdatedPlanType} aren't yet supported for users with Team subscriptions"},{capitalizedUpdatedPlanType:me(o)}),{hasCloseButton:!0}):i.warning(c.formatMessage({id:"planManagement.errorFetchingPreview",defaultMessage:"There was a problem updating your subscription"}),{hasCloseButton:!0}),e());const x=te=>new Intl.DateTimeFormat(c.locale,{year:"numeric",month:"short",day:"numeric"}).format(te),I=p==null?void 0:p.getDaysUntilPlanRenews();let F=typeof I=="number"&&I>0?Ee(new Date,I):null,g=F?x(F):"";const O=p==null?void 0:p.getDaysUntilSubscriptionCancelAt();F&&typeof I=="number"&&typeof O=="number"&&O>0&&O>I&&(F=Ee(new Date,O),g=x(F));const{recentlyCanceled:D,setRecentlyUpgraded:L,setRecentlyDowngraded:A}=ds(),B=(p==null?void 0:p.willRenewSubscription())||D,[Y,R]=W.useState(!1),E=Rs();if(!p)return null;const G=h?F:M!=null&&M.renewal_date?new Date(M.renewal_date):null,ee=G?G.toLocaleDateString(c.locale,{year:"numeric",month:"long",day:"numeric"}):c.formatMessage(Z.notApplicable),oe=f?new Date(f).toLocaleDateString(c.locale,{year:"numeric",month:"long",day:"numeric"}):c.formatMessage(Z.notApplicable),{goCost:ce,plusCost:ve,proCost:Te,currencySymbol:ie}=Na(l.currency),$e=(ke=(q=r==null?void 0:r.duration)==null?void 0:q.num_periods)!=null?ke:1,{formattedDiscountedCost:Q}=r!=null&&r.discount?ut(c,$e,r.discount,(we=ie.code.defaultMessage)==null?void 0:we.toString()):{formattedDiscountedCost:null},ye=async te=>{var Pe;_(!0);try{if(C)await w.mutateAsync(a),i.success(g===""?c.formatMessage({id:"planManagement.successfullyRenewedSubscription2",defaultMessage:"Your subscription has been renewed."}):c.formatMessage({id:"planManagement.successfullyRenewedSubscription",defaultMessage:"Your subscription has been renewed. Your subscription will auto-renew on {renewalDate}."},{renewalDate:g}),{hasCloseButton:!0}),$.logEvent("Renew Plan Success",{planType:te}),wt.logEvent("chatgpt_renew_plan_success",null,{planType:te});else if(h&&m)await b.mutateAsync({accountId:a,updatedPlan:void 0,updatedPriceInterval:void 0,updatedSeats:void 0,updatedPromoCode:m}),i.success(g===""?c.formatMessage({id:"planManagement.successfullyRenewedSubscriptionPromotion",defaultMessage:"Your subscription has been updated and will auto-renew at the promotional rate of {promotionalCost} during your next billing cycle."},{promotionalCost:Q}):c.formatMessage({id:"planManagement.successfullyRenewedSubscriptionPromotion2",defaultMessage:"Your subscription has been updated and will auto-renew at your promotional rate of {promotionalCost} on {renewalDate}."},{renewalDate:g,promotionalCost:Q}),{hasCloseButton:!0});else{B||(await w.mutateAsync(a),R(!0));const We=m?void 0:j;await b.mutateAsync({accountId:a,updatedPlan:We,updatedPriceInterval:void 0,updatedSeats:void 0,updatedPromoCode:m!=null?m:void 0});const _e=S?c.formatMessage({id:"planManagement.successfullyUpdatedSubscription",defaultMessage:"You're now subscribed to ChatGPT {capitalizedUpdatedPlanType}"},{capitalizedUpdatedPlanType:me(o)}):c.formatMessage({id:"planManagement.updatedSubscriptionToPlus",defaultMessage:"Your subscription has been updated. Your subscription will change to {capitalizedUpdatedPlanType} on {renewalDateFormatted}."},{renewalDateFormatted:ee,capitalizedUpdatedPlanType:me(o)});if(te!==o){const Ue=S?"Upgrade Plan Success":"Downgrade Plan Success",qe=S?"chatgpt_upgrade_plan_success":"chatgpt_downgrade_plan_success";$.logEvent(Ue,{fromPlan:te,toPlan:o}),wt.logEvent(qe,null,{fromPlan:te,toPlan:o}),S?L(!0):A(!0),i.success(_e,{hasCloseButton:!0})}localStorage.setItem("subscriptionUpdateMessage_".concat(p.id),_e)}E.invalidateQueries(ks());const de=Dt.getItem(It.CheckoutFrom);da(de)&&(Dt.removeItem(It.CheckoutFrom),window.location.href=ma[de]),e()}catch(de){((Pe=de==null?void 0:de.detail)==null?void 0:Pe.error_type)==="card_declined"?i.warning(c.formatMessage({id:"planManagement.cardDeclinedError",defaultMessage:"Payment error. Your card may be invalid or authentication may be needed."}),{hasCloseButton:!0}):i.warning(c.formatMessage({id:"planManagement.errorUpdatingSubscription",defaultMessage:"There was a problem updating your subscription"}),{hasCloseButton:!0}),Y&&await k.mutateAsync(a),e()}finally{_(!1),m&&(u==null||u())}};let ue=ve;return o===v.GO?ue=ce:o===v.PRO?ue=Te:o!==v.PLUS&&ts.error("Invalid target plan type: ".concat(o)),t.jsx(ze,{testId:"modal-plan-management",type:"success",isOpen:s,onClose:P,size:"custom",noPadding:!0,className:"max-w-xl",showCloseButton:!0,title:c.formatMessage({id:"planManagementModal.title",defaultMessage:"Confirm plan changes"}),removePopoverStyling:!0,headerClassName:"py-4! px-6! [&_h2]:font-medium",children:U?t.jsx(gs,{}):h||C&&p?t.jsx(ja,{account:p,renewalDate:g,handleUpdate:()=>ye(n),isUpdating:d,onClose:P,targetPlanCost:ue,currencySymbol:ie,promoMetadata:r,fullPriceResumeDateFormatted:oe,formattedDiscountedCost:Q,renewalDateFormatted:ee}):N||!M?null:S?t.jsx(Ca,{accountId:a,handleUpdate:()=>ye(n),isUpdating:d,onClose:P,initialPlanType:n,updatedPlanType:o,currencySymbol:ie}):t.jsx(Ra,{renewalDate:M.renewal_date,handleUpdate:()=>ye(n),isUpdating:d,onClose:P,targetPlanCost:ue,currentPlanType:n,updatedPlanType:o,currencySymbol:ie,promoMetadata:r,fullPriceResumeDateFormatted:oe,formattedDiscountedCost:Q})})}function gs(){"use forget";const s=pe.c(1);let e;return s[0]===Symbol.for("react.memo_cache_sentinel")?(e=t.jsx("div",{className:"flex items-center justify-center p-6",children:t.jsx(ss,{})}),s[0]=e):e=s[0],e}function Sa(s){"use forget";const e=pe.c(12),{adjustmentMessage:a,proratedCreditMessage:n,proratedCreditInfoMessage:o}=s;let l;e[0]!==a?(l=t.jsx("span",{className:"font-semibold",children:a}),e[0]=a,e[1]=l):l=e[1];let r;e[2]!==n?(r=t.jsx("span",{className:"font-semibold text-green-600",children:n}),e[2]=n,e[3]=r):r=e[3];let m;e[4]!==l||e[5]!==r?(m=t.jsxs("div",{className:"mt-4 flex justify-between",children:[l,r]}),e[4]=l,e[5]=r,e[6]=m):m=e[6];let f;e[7]!==o?(f=t.jsx("span",{className:"text-token-text-secondary text-sm",children:o}),e[7]=o,e[8]=f):f=e[8];let u;return e[9]!==m||e[10]!==f?(u=t.jsxs("div",{children:[m,f]}),e[9]=m,e[10]=f,e[11]=u):u=e[11],u}function Ca(s){"use forget";const e=pe.c(42),{accountId:a,handleUpdate:n,isUpdating:o,onClose:l,currencySymbol:r,updatedPlanType:m,initialPlanType:f}=s,u=ge();let c;e[0]!==m?(c=ps(m),e[0]=m,e[1]=c):c=e[1];const{data:i,isError:p,isLoading:d}=rs(a,void 0,c);if(d){let x;return e[2]===Symbol.for("react.memo_cache_sentinel")?(x=t.jsx(gs,{}),e[2]=x):x=e[2],x}if(p||!i)return null;let _,h,C;if(e[3]!==r||e[4]!==i||e[5]!==f||e[6]!==u||e[7]!==m){const x=ba({data:i,intl:u,currencySymbol:r,currentPlanType:f});_="px-6 pb-6",e[11]!==r||e[12]!==i||e[13]!==m?(h=t.jsx(wa,{data:i,currencySymbol:r,updatedPlanType:m}),e[11]=r,e[12]=i,e[13]=m,e[14]=h):h=e[14],C=x.filter(xa).map(Ma),e[3]=r,e[4]=i,e[5]=f,e[6]=u,e[7]=m,e[8]=_,e[9]=h,e[10]=C}else _=e[8],h=e[9],C=e[10];let S;e[15]===Symbol.for("react.memo_cache_sentinel")?(S=t.jsx("hr",{className:"mt-4 mb-4"}),e[15]=S):S=e[15];let j;e[16]!==r||e[17]!==i?(j=t.jsx(Da,{data:i,currencySymbol:r}),e[16]=r,e[17]=i,e[18]=j):j=e[18];let P;e[19]!==i.default_payment_method?(P=i.default_payment_method&&t.jsxs(t.Fragment,{children:[t.jsx("hr",{className:"mt-4 mb-4"}),t.jsx(Ia,{defaultPaymentMethod:i.default_payment_method})]}),e[19]=i.default_payment_method,e[20]=P):P=e[20];let b;e[21]!==u?(b=u.formatMessage({id:"planUpgradeModal.cancel",defaultMessage:"Cancel"}),e[21]=u,e[22]=b):b=e[22];let w;e[23]!==l||e[24]!==b?(w=t.jsx(be,{title:b,color:"secondary",onClick:l}),e[23]=l,e[24]=b,e[25]=w):w=e[25];let k;e[26]!==u?(k=u.formatMessage({id:"planUpgradeModal.payNow",defaultMessage:"Pay now"}),e[26]=u,e[27]=k):k=e[27];let M;e[28]!==n||e[29]!==o||e[30]!==k?(M=t.jsx(be,{title:k,color:"primary",onClick:n,loading:o}),e[28]=n,e[29]=o,e[30]=k,e[31]=M):M=e[31];let N;e[32]!==M||e[33]!==w?(N=t.jsxs("div",{className:"mt-8 flex justify-end gap-2",children:[w,M]}),e[32]=M,e[33]=w,e[34]=N):N=e[34];let U;return e[35]!==N||e[36]!==_||e[37]!==h||e[38]!==C||e[39]!==j||e[40]!==P?(U=t.jsxs("div",{className:_,children:[h,C,S,j,P,N]}),e[35]=N,e[36]=_,e[37]=h,e[38]=C,e[39]=j,e[40]=P,e[41]=U):U=e[41],U}function Ma(s,e){return t.jsx(Sa,{adjustmentMessage:s.adjustmentMessage,proratedCreditMessage:s.proratedCreditMessage,proratedCreditInfoMessage:s.proratedCreditInfoMessage},e)}function xa(s){return s.value!==0}function ba({data:s,intl:e,currencySymbol:a,currentPlanType:n}){return[{adjustmentMessage:t.jsx(y,{id:"planUpgradeModal.adjustment",defaultMessage:"Adjustment"}),proratedCreditMessage:t.jsx(y,{id:"planUpgradeModal.proratedCredit",defaultMessage:"-{currencySign}{adjustment}",values:{currencySign:e.formatMessage(a.sign),adjustment:(-s.negative_line_item_total/100).toFixed(2)}}),proratedCreditInfoMessage:t.jsx(y,{id:"planUpgradeModal.proratedCreditInfo",defaultMessage:"Prorated credit for the remainder of your {currentPlanType} subscription",values:{currentPlanType:n}}),value:s.negative_line_item_total},{adjustmentMessage:t.jsx(y,{id:"planUpgradeModal.discount",defaultMessage:"Adjustment"}),proratedCreditMessage:t.jsx(y,{id:"planUpgradeModal.discountAmount",defaultMessage:"-{currencySign}{discount}",values:{currencySign:e.formatMessage(a.sign),discount:(s.discount_amount/100).toFixed(2)}}),proratedCreditInfoMessage:t.jsx(y,{id:"planUpgradeModal.discountInfo",defaultMessage:"Account discount applied"}),value:s.discount_amount},{adjustmentMessage:t.jsx(y,{id:"planUpgradeModal.credits",defaultMessage:"Adjustments"}),proratedCreditMessage:t.jsx(y,{id:"planUpgradeModal.creditsAmount",defaultMessage:"-{currencySign}{credits}",values:{currencySign:e.formatMessage(a.sign),credits:(s.applied_balance/100).toFixed(2)}}),proratedCreditInfoMessage:t.jsx(y,{id:"planUpgradeModal.creditsInfo",defaultMessage:"Credits applied"}),value:s.applied_balance}]}function wa({data:s,currencySymbol:e,updatedPlanType:a}){const n=ge();return t.jsxs(t.Fragment,{children:[t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{className:"font-semibold",children:t.jsx(y,{id:"planUpgradeModal.subscription",defaultMessage:"ChatGPT {capitalizedUpdatedPlanType} subscription",values:{capitalizedUpdatedPlanType:me(a)}})}),t.jsx("span",{className:"font-semibold",children:t.jsx(y,{id:"planUpgradeModal.subscriptionCost",defaultMessage:"{currencySign}{totalCost}",values:{currencySign:n.formatMessage(e.sign),totalCost:(s.positive_line_item_total/100).toFixed(2)}})})]}),t.jsx("span",{className:"text-token-text-secondary text-sm",children:t.jsx(y,{id:"planUpgradeModal.billingCycle",defaultMessage:"Billed monthly, starting today"})})]})}function Da(s){"use forget";const e=pe.c(17),{data:a,currencySymbol:n}=s,o=ge();let l;e[0]!==n.sign||e[1]!==a.amount_due.amount_excluding_tax||e[2]!==a.amount_due.tax_amount||e[3]!==o?(l=a.amount_due.tax_amount>0&&t.jsxs(t.Fragment,{children:[t.jsxs("div",{className:"mt-4 flex justify-between",children:[t.jsx("span",{className:"font-semibold",children:t.jsx(y,{id:"planUpgradeModal.subTotal",defaultMessage:"Subtotal"})}),t.jsx("span",{children:t.jsx(y,{id:"planUpgradeModal.subtotalPrice",defaultMessage:"{currencySign}{totalCost}",values:{currencySign:o.formatMessage(n.sign),totalCost:(a.amount_due.amount_excluding_tax/100).toFixed(2)}})})]}),t.jsxs("div",{className:"mt-2 flex justify-between",children:[t.jsxs("span",{className:"font-semibold",children:[t.jsx(y,{id:"planUpgradeModal.tax",defaultMessage:"Tax"}),t.jsx("span",{className:"text-token-text-secondary font-normal",children:t.jsx(y,{id:"planUpgradeModal.taxPercent",defaultMessage:" {taxPercent}%",values:{taxPercent:(a.amount_due.tax_amount/a.amount_due.amount_excluding_tax*100).toFixed(0)}})})]}),t.jsx("span",{children:t.jsx(y,{id:"planUpgradeModal.taxAmount",defaultMessage:"{currencySign}{tax}",values:{currencySign:o.formatMessage(n.sign),tax:(a.amount_due.tax_amount/100).toFixed(2)}})})]})]}),e[0]=n.sign,e[1]=a.amount_due.amount_excluding_tax,e[2]=a.amount_due.tax_amount,e[3]=o,e[4]=l):l=e[4];let r;e[5]===Symbol.for("react.memo_cache_sentinel")?(r=t.jsx("span",{className:"font-semibold",children:t.jsx(y,{id:"planUpgradeModal.totalDueToday",defaultMessage:"Total due today"})}),e[5]=r):r=e[5];let m;e[6]!==n.sign||e[7]!==o?(m=o.formatMessage(n.sign),e[6]=n.sign,e[7]=o,e[8]=m):m=e[8];const f=a.amount_due.amount/100;let u;e[9]!==f?(u=f.toFixed(2),e[9]=f,e[10]=u):u=e[10];let c;e[11]!==m||e[12]!==u?(c=t.jsxs("div",{className:"mt-2 flex justify-between",children:[r,t.jsx("span",{className:"font-semibold",children:t.jsx(y,{id:"planUpgradeModal.totalDueTodayAmount",defaultMessage:"{currencySign}{totalCost}",values:{currencySign:m,totalCost:u}})})]}),e[11]=m,e[12]=u,e[13]=c):c=e[13];let i;return e[14]!==l||e[15]!==c?(i=t.jsxs(t.Fragment,{children:[l,c]}),e[14]=l,e[15]=c,e[16]=i):i=e[16],i}function Ia(s){"use forget";var r;const e=pe.c(6),{defaultPaymentMethod:a}=s;let n;e[0]===Symbol.for("react.memo_cache_sentinel")?(n=t.jsx("span",{className:"font-semibold",children:t.jsx(y,{id:"planUpgradeModal.paymentMethod",defaultMessage:"Payment Method"})}),e[0]=n):n=e[0];let o;e[1]!==a.card_brand?(o=(r=a.card_brand)==null?void 0:r.toUpperCase(),e[1]=a.card_brand,e[2]=o):o=e[2];let l;return e[3]!==a.card_last4||e[4]!==o?(l=t.jsxs("div",{className:"flex justify-between",children:[n,t.jsxs("span",{className:"text-token-text-secondary",children:[o," *",a.card_last4]})]}),e[3]=a.card_last4,e[4]=o,e[5]=l):l=e[5],l}function Ra(s){"use forget";var oe,ce;const e=pe.c(66),{renewalDate:a,handleUpdate:n,isUpdating:o,onClose:l,targetPlanCost:r,currentPlanType:m,currencySymbol:f,updatedPlanType:u,promoMetadata:c,fullPriceResumeDateFormatted:i,formattedDiscountedCost:p}=s,d=ge(),_=(c==null?void 0:c.plan_type_change)==="downgrade",h=(ce=(oe=c==null?void 0:c.duration)==null?void 0:oe.period)!=null?ce:"month";let C;e[0]!==d||e[1]!==a?(C=a?new Date(a).toLocaleDateString(d.locale,{year:"numeric",month:"long",day:"numeric"}):d.formatMessage(Z.notApplicable),e[0]=d,e[1]=a,e[2]=C):C=e[2];const S=C;let j;e[3]!==m?(j=me(m),e[3]=m,e[4]=j):j=e[4];let P;e[5]!==u?(P=me(u),e[5]=u,e[6]=P):P=e[6];let b;e[7]!==S||e[8]!==j||e[9]!==P?(b=t.jsx("p",{className:"text-token-text-secondary",children:t.jsx(y,{id:"planDowngradeModal.currentSubscription",defaultMessage:"Your current {currentPlanType} subscription will remain active until {renewalDateFormatted}, when it will change to {nextPlanType}.",values:{renewalDateFormatted:S,currentPlanType:j,nextPlanType:P}})}),e[7]=S,e[8]=j,e[9]=P,e[10]=b):b=e[10];const w=_?"text-token-text-primary text-[15px]":"font-semibold";let k;e[11]!==u?(k=me(u),e[11]=u,e[12]=k):k=e[12];let M;e[13]!==k?(M=t.jsx(y,{id:"planDowngradeModal.newPlan",defaultMessage:"ChatGPT {capitalizedUpdatedPlanType}",values:{capitalizedUpdatedPlanType:k}}),e[13]=k,e[14]=M):M=e[14];let N;e[15]!==w||e[16]!==M?(N=t.jsx("span",{className:w,children:M}),e[15]=w,e[16]=M,e[17]=N):N=e[17];let U;e[18]!==f||e[19]!==p||e[20]!==d||e[21]!==_||e[22]!==r?(U=_?t.jsx("span",{className:"text-token-text-primary text-[15px]",children:t.jsx(y,{id:"planDowngradeModal.newPlanCostOfPromo",defaultMessage:"{promotionalCost} w/ promo",values:{promotionalCost:p}})}):t.jsx("span",{className:"text-token-text-secondary",children:t.jsx(y,{id:"planDowngradeModal.newPlanCost",defaultMessage:"{currencyCode} {currencySign}{planCost}/month",values:{currencyCode:d.formatMessage(f.code),currencySign:d.formatMessage(f.sign),planCost:d.formatMessage(r)}})}),e[18]=f,e[19]=p,e[20]=d,e[21]=_,e[22]=r,e[23]=U):U=e[23];let x;e[24]!==N||e[25]!==U?(x=t.jsxs("div",{className:"flex justify-between",children:[N,U]}),e[24]=N,e[25]=U,e[26]=x):x=e[26];const I=_&&"text-token-text-secondary text-xs";let F;e[27]!==I?(F=le("text-token-text-secondary",I),e[27]=I,e[28]=F):F=e[28];let g;e[29]!==i||e[30]!==_||e[31]!==h||e[32]!==S?(g=_?dt({fullPriceResumeDateFormatted:i,period:h,type:"billingStartAfterPromo"}):t.jsx(y,{id:"planDowngradeModal.billingStart",defaultMessage:"Billing will start on {renewalDateFormatted}",values:{renewalDateFormatted:S}}),e[29]=i,e[30]=_,e[31]=h,e[32]=S,e[33]=g):g=e[33];let O;e[34]!==F||e[35]!==g?(O=t.jsx("span",{className:F,children:g}),e[34]=F,e[35]=g,e[36]=O):O=e[36];let D;e[37]!==f||e[38]!==d||e[39]!==_||e[40]!==r?(D=_&&t.jsx("span",{className:"text-token-text-secondary text-xs",children:t.jsx(y,{id:"planDowngradeModal.newPlanCostAfterPromo",defaultMessage:"{currencySign}{planCost}/month after",values:{currencySign:d.formatMessage(f.sign),planCost:d.formatMessage(r)}})}),e[37]=f,e[38]=d,e[39]=_,e[40]=r,e[41]=D):D=e[41];let L;e[42]!==O||e[43]!==D?(L=t.jsxs("div",{className:"flex items-center justify-between",children:[O,D]}),e[42]=O,e[43]=D,e[44]=L):L=e[44];let A;e[45]!==x||e[46]!==L?(A=t.jsxs("div",{className:"bg-token-main-surface-secondary mt-4 flex flex-col gap-1 rounded-2xl! rounded-md border-[1px] p-4",children:[x,L]}),e[45]=x,e[46]=L,e[47]=A):A=e[47];let B;e[48]!==d?(B=d.formatMessage({id:"planDowngradeModal.cancel",defaultMessage:"Cancel"}),e[48]=d,e[49]=B):B=e[49];let Y;e[50]!==l||e[51]!==B?(Y=t.jsx(be,{title:B,color:"secondary",onClick:l}),e[50]=l,e[51]=B,e[52]=Y):Y=e[52];let R;e[53]!==d?(R=d.formatMessage({id:"planDowngradeModal.confirm",defaultMessage:"Confirm"}),e[53]=d,e[54]=R):R=e[54];let E;e[55]!==n||e[56]!==o||e[57]!==R?(E=t.jsx(be,{title:R,color:"primary",onClick:n,loading:o}),e[55]=n,e[56]=o,e[57]=R,e[58]=E):E=e[58];let G;e[59]!==Y||e[60]!==E?(G=t.jsxs("div",{className:"mt-8 flex justify-end gap-2",children:[Y,E]}),e[59]=Y,e[60]=E,e[61]=G):G=e[61];let ee;return e[62]!==A||e[63]!==G||e[64]!==b?(ee=t.jsxs("div",{className:"px-6 pb-6",children:[b,A,G]}),e[62]=A,e[63]=G,e[64]=b,e[65]=ee):ee=e[65],ee}function ja(s){"use forget";var ee,oe;const e=pe.c(63),{account:a,renewalDate:n,handleUpdate:o,isUpdating:l,onClose:r,targetPlanCost:m,currencySymbol:f,promoMetadata:u,fullPriceResumeDateFormatted:c,renewalDateFormatted:i,formattedDiscountedCost:p}=s,d=ge(),_=a.data.subscriptionStatus.planType;let h;e[0]!==_?(h=me(_),e[0]=_,e[1]=h):h=e[1];const C=h,S=(u==null?void 0:u.plan_type_change)==="equal",j=(oe=(ee=u==null?void 0:u.duration)==null?void 0:ee.period)!=null?oe:"month";let P;e[2]!==S||e[3]!==j||e[4]!==C||e[5]!==n||e[6]!==i?(P=S?dt({renewalDateFormatted:i,period:j,type:"currentSubscriptionPromo"}):t.jsx(y,{id:"planRenewalModal.currentSubscription",defaultMessage:"Your current {planName} subscription will auto-renew on {renewalDate}.",values:{planName:C,renewalDate:n}}),e[2]=S,e[3]=j,e[4]=C,e[5]=n,e[6]=i,e[7]=P):P=e[7];let b;e[8]!==P?(b=t.jsx("p",{className:"text-token-text-primary",children:P}),e[8]=P,e[9]=b):b=e[9];const w=S?"text-token-text-primary text-[15px]":"font-semibold";let k;e[10]!==C?(k=t.jsx(y,{id:"planRenewalModal.newPlan",defaultMessage:"ChatGPT {planName}",values:{planName:C}}),e[10]=C,e[11]=k):k=e[11];let M;e[12]!==w||e[13]!==k?(M=t.jsx("span",{className:w,children:k}),e[12]=w,e[13]=k,e[14]=M):M=e[14];let N;e[15]!==f||e[16]!==p||e[17]!==d||e[18]!==S||e[19]!==m?(N=S?t.jsx("span",{className:"text-token-text-primary text-[15px]",children:t.jsx(y,{id:"planRenewalModal.newPlanCostAfterPromo",defaultMessage:"{promotionalCost} w/ promo",values:{promotionalCost:p}})}):t.jsx("span",{className:"text-token-text-secondary",children:t.jsx(y,{id:"planRenewalModal.newPlanCost",defaultMessage:"{currencyCode} {currencySign}{planCost}/month",values:{currencyCode:d.formatMessage(f.code),currencySign:d.formatMessage(f.sign),planCost:d.formatMessage(m)}})}),e[15]=f,e[16]=p,e[17]=d,e[18]=S,e[19]=m,e[20]=N):N=e[20];let U;e[21]!==M||e[22]!==N?(U=t.jsxs("div",{className:"flex justify-between",children:[M,N]}),e[21]=M,e[22]=N,e[23]=U):U=e[23];const x=S&&"text-token-text-secondary text-xs";let I;e[24]!==x?(I=le("text-token-text-secondary",x),e[24]=x,e[25]=I):I=e[25];let F;e[26]!==c||e[27]!==S||e[28]!==n?(F=S?t.jsx(y,{id:"planRenewalModal.billingStartAfterPromo",defaultMessage:"Billing will start on {fullPriceResumeDateFormatted}",values:{fullPriceResumeDateFormatted:c}}):t.jsx(y,{id:"planRenewalModal.billingStart",defaultMessage:"Billing will auto-renew on {renewalDate}",values:{renewalDate:n}}),e[26]=c,e[27]=S,e[28]=n,e[29]=F):F=e[29];let g;e[30]!==I||e[31]!==F?(g=t.jsx("span",{className:I,children:F}),e[30]=I,e[31]=F,e[32]=g):g=e[32];let O;e[33]!==f||e[34]!==d||e[35]!==S||e[36]!==j||e[37]!==m?(O=S&&t.jsx("span",{className:"text-token-text-secondary text-xs",children:dt({period:j,type:"newPlanCostAfterPromo",currencySign:d.formatMessage(f.sign),planCost:d.formatMessage(m)})}),e[33]=f,e[34]=d,e[35]=S,e[36]=j,e[37]=m,e[38]=O):O=e[38];let D;e[39]!==g||e[40]!==O?(D=t.jsxs("div",{className:"flex items-center justify-between",children:[g,O]}),e[39]=g,e[40]=O,e[41]=D):D=e[41];let L;e[42]!==D||e[43]!==U?(L=t.jsxs("div",{className:"bg-token-main-surface-secondary mt-4 flex flex-col gap-1 rounded-2xl! rounded-md border-[1px] p-4",children:[U,D]}),e[42]=D,e[43]=U,e[44]=L):L=e[44];let A;e[45]!==d?(A=d.formatMessage({id:"planRenewalModal.cancel",defaultMessage:"Cancel"}),e[45]=d,e[46]=A):A=e[46];let B;e[47]!==r||e[48]!==A?(B=t.jsx(be,{title:A,color:"secondary",onClick:r}),e[47]=r,e[48]=A,e[49]=B):B=e[49];let Y;e[50]!==d?(Y=d.formatMessage({id:"planRenewalModal.confirm",defaultMessage:"Confirm"}),e[50]=d,e[51]=Y):Y=e[51];let R;e[52]!==o||e[53]!==l||e[54]!==Y?(R=t.jsx(be,{title:Y,color:"primary",onClick:o,loading:l}),e[52]=o,e[53]=l,e[54]=Y,e[55]=R):R=e[55];let E;e[56]!==B||e[57]!==R?(E=t.jsxs("div",{className:"mt-8 flex justify-end gap-2",children:[B,R]}),e[56]=B,e[57]=R,e[58]=E):E=e[58];let G;return e[59]!==L||e[60]!==E||e[61]!==b?(G=t.jsxs("div",{className:"px-6 pb-6",children:[b,L,E]}),e[59]=L,e[60]=E,e[61]=b,e[62]=G):G=e[62],G}function Na(s){return s===Ut?{goCost:T.go.goCostInEuros,plusCost:T.plus.plusCostInEuros,proCost:T.pro.proCostInEuros,currencySymbol:Ft}:s===At?{goCost:T.go.goCostInPounds,plusCost:T.plus.plusCostInPounds,proCost:T.pro.proCostInPounds,currencySymbol:Ot}:s===Lt?{goCost:T.go.goCostInINR,plusCost:T.plus.plusCostInINR,proCost:T.pro.proCostInINR,currencySymbol:Yt}:s===Bt?{goCost:T.go.goCostInIDR,plusCost:T.plus.plusCostInIDR,proCost:T.pro.proCostInIDR,currencySymbol:Ht}:s===Gt?{goCost:T.go.goCostInPKR,plusCost:T.plus.plusCostInPKR,proCost:T.pro.proCostInPKR,currencySymbol:Vt}:s===Kt?{goCost:T.go.goCostInTHB,plusCost:T.plus.plusCostInTHB,proCost:T.pro.proCostInTHB,currencySymbol:zt}:s===$t?{goCost:T.go.goCostInMYR,plusCost:T.plus.plusCostInMYR,proCost:T.pro.proCostInMYR,currencySymbol:Wt}:s===qt?{goCost:T.go.goCostInVND,plusCost:T.plus.plusCostInVND,proCost:T.pro.proCostInVND,currencySymbol:Qt}:s===Jt?{goCost:T.go.goCostInPHP,plusCost:T.plus.plusCostInPHP,proCost:T.pro.proCostInPHP,currencySymbol:Xt}:{goCost:T.go.goCost,plusCost:T.plus.plusCost,proCost:T.pro.proCost,currencySymbol:Zt}}function dt({fullPriceResumeDateFormatted:s,renewalDateFormatted:e,period:a,type:n,currencySign:o,planCost:l}){switch(["month","year"].includes(a)||ts.warn("Invalid period passed to PlanManagementModal.getPeriodFormattedMessage",{period:a}),n){case"billingStartAfterPromo":return t.jsx(y,{id:"planDowngradeModal.billingResumeAfterPromo",defaultMessage:"Billing will resume on {fullPriceResumeDateFormatted}",values:{fullPriceResumeDateFormatted:s}});case"currentSubscriptionPromo":return t.jsx(y,{id:"planRenewalModal.currentSubscriptionPromo",defaultMessage:"After the billing cycle for your current plan ends on {renewalDateFormatted}, your promotional subscription will go into effect.",values:{renewalDateFormatted:e}});case"newPlanCostAfterPromo":if(a==="month")return t.jsx(y,{id:"planDowngradeModal.newPlanCostAfterPromoMonth",defaultMessage:"{currencySign}{planCost}/month after",values:{currencySign:o,planCost:l}});if(a==="year")return t.jsx(y,{id:"planDowngradeModal.newPlanCostAfterPromoYear",defaultMessage:"{currencySign}{planCost}/year after",values:{currencySign:o,planCost:l}});break}}function Et(s,e){const a=Ee(new Date,s);return new Intl.DateTimeFormat(e,{year:"numeric",month:"short",day:"numeric"}).format(a)}function Ea({isWebRedesign:s,currentAccount:e,intl:a,billingDetails:n,pricingPlan:o,promoMetadata:l,columnPlanType:r}){var h;if(l||!e.data.subscriptionStatus.discount)return{activeDiscountMetadata:null,scheduledAdditionalLink:null};const m=e.getDaysUntilPlanDiscountExpires(),f=e.data.subscriptionStatus.discount,u=e.planType,c=e.getNextPlanType(),i=(h=f.discount_start_in_num_periods)!=null?h:0,p=i>0&&u===r&&!c,d=i>0&&c===r,_=a.formatNumber(f.amount,{style:"currency",currency:n.currency,minimumFractionDigits:0,maximumFractionDigits:2});return p||d?{activeDiscountMetadata:null,scheduledAdditionalLink:t.jsx("div",{className:"mb-3 w-full",children:t.jsx("div",{className:le(s?"font-medium text-[#615EEB]":"text-green-600","px-1 text-sm"),children:f.discount_type===Ne.PERCENTAGE?t.jsx(y,{id:"PlusColumn.scheduledPercentDiscount",defaultMessage:"Your {discountPercent}% discount will apply in {numPeriods, plural, one {the next billing period} other {# billing periods}}.",values:{discountPercent:f.amount,numPeriods:i}}):t.jsx(y,{id:"PlusColumn.scheduledFixedDiscount",defaultMessage:"Your {discountFixed} discount will apply in {numPeriods, plural, one {the next billing period} other {# billing periods}}.",values:{discountFixed:_,numPeriods:i}})})})}:i>0||r!==e.data.subscriptionStatus.planType?{activeDiscountMetadata:null,scheduledAdditionalLink:null}:(o.cost=ms(a,o.cost,f),f.discount_type===Ne.PERCENTAGE?{activeDiscountMetadata:{discount:{percentage:f.amount,expires_at:m?Et(m,a.locale):void 0}},scheduledAdditionalLink:null}:f.discount_type===Ne.FIXED?{activeDiscountMetadata:{discount:{value:f.amount,expires_at:m?Et(m,a.locale):void 0}},scheduledAdditionalLink:null}:{activeDiscountMetadata:null,scheduledAdditionalLink:null})}function vt(s,e,a,n){let o;switch(s){case"month":o=Fs(new Date,e);break;case"year":o=Us(new Date,e);break}return n&&o&&(o=Ee(o,n)),new Intl.DateTimeFormat(a,{year:"numeric",month:"short",day:"numeric"}).format(o)}function va({intl:s,pricingPlan:e,planName:a,promoMetadata:n,currency:o,currentAccount:l}){var U,x,I,F,g,O,D,L,A,B,Y;const{costTitle:r,currencySymbol:m}=Zs(e,o),f=(x=(U=r==null?void 0:r.defaultMessage)==null?void 0:U.toString())!=null?x:"20",u=gt(a.toLowerCase()),{schedule:c}=n,i=(F=(I=n.duration)==null?void 0:I.period)!=null?F:"month",p=(O=(g=n.duration)==null?void 0:g.num_periods)!=null?O:1,d=(D=c==null?void 0:c.start_after_num_periods)!=null?D:0,_=(L=c==null?void 0:c.period)!=null?L:i,h=d>0?vt(_,d,s.locale):void 0,C=vt(i,p+(d>0?d:0),s.locale,l==null?void 0:l.getDaysUntilPlanRenews()),S=ms(s,e.cost,n.discount,(A=n.duration)!=null?A:{num_periods:1,period:"month"}),j=(Y=(B=m.code.defaultMessage)==null?void 0:B.toString())!=null?Y:"USD",P=s.formatNumber(parseFloat(f)||0,{style:"currency",currency:j,minimumFractionDigits:0,maximumFractionDigits:2}),b=(n==null?void 0:n.no_auto_renewal_at_discount_end)===!0;let w;switch(i){case"month":d>0?p===1?w=s.formatMessage(H.promoPlanDisclaimerScheduledForSingleMonth,{start_date:h,end_date:C,cost:P,plan_name:u}):w=s.formatMessage(H.promoPlanDisclaimerScheduledForPluralMonths,{num_months:p,start_date:h,end_date:C,cost:P,plan_name:u}):p===1?w=b?s.formatMessage(H.promoPlanDisclaimerNoRenewForSingleMonth,{}):s.formatMessage(H.promoPlanDisclaimerForSingleMonth,{date:C,cost:P,plan_name:u}):w=b?s.formatMessage(H.promoPlanDisclaimerNoRenewForPluralMonths,{num_months:p}):s.formatMessage(H.promoPlanDisclaimerForPluralMonths,{num_months:p,date:C,cost:P,plan_name:u});break;case"year":d>0?p===1?w=s.formatMessage(H.promoPlanDisclaimerScheduledForSingleYear,{start_date:h,end_date:C,cost:P,plan_name:u}):w=s.formatMessage(H.promoPlanDisclaimerScheduledForPluralYears,{num_years:p,start_date:h,end_date:C,cost:P,plan_name:u}):p===1?w=b?s.formatMessage(H.promoPlanDisclaimerNoRenewForSingleYear,{}):s.formatMessage(H.promoPlanDisclaimerForSingleYear,{date:C,cost:P,plan_name:u}):w=b?s.formatMessage(H.promoPlanDisclaimerNoRenewForPluralYears,{num_years:p}):s.formatMessage(H.promoPlanDisclaimerForPluralYears,{num_years:p,date:C,cost:P,plan_name:u});break;case"hour":throw new Error("Period 'hour' is not supported")}const k="<article>"+s.formatMessage(H.termsApply)+"</article> "+w;let M=n.summary;if(d>0){const{formattedDiscountedCost:R}=ut(s,1,n.discount,o),E=R;switch(i){case"month":p===1?M=s.formatMessage(H.promoSummaryScheduledForSingleMonth,{discounted_cost:E}):M=s.formatMessage(H.promoSummaryScheduledForPluralMonths,{discounted_cost:E,num_months:p});break;case"year":p===1?M=s.formatMessage(H.promoSummaryScheduledForSingleYear,{discounted_cost:E}):M=s.formatMessage(H.promoSummaryScheduledForPluralYears,{discounted_cost:E,num_years:p});break}}let N=S;if(d>0){const{formattedDiscountedCost:R}=ut(s,1,n.discount,o);let E;switch(i){case"month":p===1?E=s.formatMessage(H.promoCostSubtitleScheduledForSingleMonth,{start_date:h,discounted_cost:R}):E=s.formatMessage(H.promoCostSubtitleScheduledForPluralMonths,{start_date:h,discounted_cost:R,num_months:p});break;case"year":p===1?E=s.formatMessage(H.promoCostSubtitleScheduledForSingleYear,{start_date:h,discounted_cost:R}):E=s.formatMessage(H.promoCostSubtitleScheduledForPluralYears,{start_date:h,discounted_cost:R,num_years:p});break}N=X(V({},e.cost),{costDuration:{id:"promoCostDurationScheduled",defaultMessage:E,description:"Cost duration subtitle for scheduled promo indicating when discount starts and for how long"}})}return e=X(V({},e),{summary:{id:"promoSummary",defaultMessage:M},disclaimer:{id:"promoDisclaimer",defaultMessage:k,article:"https://help.openai.com/en/articles/10492689-chatgpt-plus-promotions-referrals"},fullPriceResumeDateString:C,cost:N,callToAction:X(V({},e.callToAction),{promo:{id:"pricingPlanConstants.promo.callToAction",defaultMessage:"Apply to My Subscription",description:"Payment call to action for existing subscribers adding a discount to their plan"}})}),e}const H=Ve({specialOffer:{id:"pricingPlanConstants.specialOffer",defaultMessage:"SPECIAL OFFER"},promoPlanDisclaimerForPluralMonths:{id:"pricingPlanConstants.promoPlanDisclaimerForPluralMonths",defaultMessage:"Promo pricing applies for {num_months} months. Starting {date}, ChatGPT {plan_name} will continue at {cost}/month. Cancel anytime."},promoPlanDisclaimerScheduledForPluralMonths:{id:"pricingPlanConstants.promoPlanDisclaimerScheduledForPluralMonths",defaultMessage:"Promo pricing applies for {num_months} months starting {start_date}. Starting {end_date}, ChatGPT {plan_name} will continue at {cost}/month. Cancel anytime."},promoPlanDisclaimerScheduledForSingleMonth:{id:"pricingPlanConstants.promoPlanDisclaimerScheduledForSingleMonth",defaultMessage:"Promo pricing applies for 1 month starting {start_date}. Starting {end_date}, ChatGPT {plan_name} will continue at {cost}/month. Cancel anytime."},promoPlanDisclaimerScheduledForPluralYears:{id:"pricingPlanConstants.promoPlanDisclaimerScheduledForPluralYears",defaultMessage:"Promo pricing applies for {num_years} years starting {start_date}. Starting {end_date}, ChatGPT {plan_name} will continue at {cost}/year. Cancel anytime."},promoPlanDisclaimerScheduledForSingleYear:{id:"pricingPlanConstants.promoPlanDisclaimerScheduledForSingleYear",defaultMessage:"Promo pricing applies for 1 year starting {start_date}. Starting {end_date}, ChatGPT {plan_name} will continue at {cost}/year. Cancel anytime."},promoPlanDisclaimerForSingleMonth:{id:"pricingPlanConstants.promoPlanDisclaimerForSingleMonth",defaultMessage:"Promo pricing applies for 1 month. Starting {date}, ChatGPT {plan_name} will continue at {cost}/month. Cancel anytime."},promoPlanDisclaimerNoRenewForPluralMonths:{id:"pricingPlanConstants.promoPlanDisclaimerNoRenewForPluralMonths",defaultMessage:"Promo pricing applies for {num_months} months."},promoPlanDisclaimerNoRenewForSingleMonth:{id:"pricingPlanConstants.promoPlanDisclaimerNoRenewForSingleMonth",defaultMessage:"Promo pricing applies for 1 month."},promoCostSubtitleScheduledForPluralMonths:{id:"pricingPlanConstants.promoCostSubtitleScheduledForPluralMonths",defaultMessage:"Starting {start_date}: {discounted_cost}/month for {num_months} months"},promoCostSubtitleScheduledForSingleMonth:{id:"pricingPlanConstants.promoCostSubtitleScheduledForSingleMonth",defaultMessage:"Starting {start_date}: {discounted_cost}/month for 1 month"},promoCostSubtitleScheduledForPluralYears:{id:"pricingPlanConstants.promoCostSubtitleScheduledForPluralYears",defaultMessage:"Starting {start_date}: {discounted_cost}/year for {num_years} years"},promoCostSubtitleScheduledForSingleYear:{id:"pricingPlanConstants.promoCostSubtitleScheduledForSingleYear",defaultMessage:"Starting {start_date}: {discounted_cost}/year for 1 year"},promoPlanDisclaimerForPluralYears:{id:"pricingPlanConstants.promoPlanDisclaimerForPluralYears",defaultMessage:"Promo pricing applies for {num_years} years. Starting {date}, ChatGPT {plan_name} will continue at {cost}/year. Cancel anytime."},promoPlanDisclaimerForSingleYear:{id:"pricingPlanConstants.promoPlanDisclaimerForSingleYear",defaultMessage:"Promo pricing applies for 1 year. Starting {date}, ChatGPT {plan_name} will continue at {cost}/year. Cancel anytime."},promoPlanDisclaimerNoRenewForPluralYears:{id:"pricingPlanConstants.promoPlanDisclaimerNoRenewForPluralYears",defaultMessage:"Promo pricing applies for {num_years} years."},promoPlanDisclaimerNoRenewForSingleYear:{id:"pricingPlanConstants.promoPlanDisclaimerNoRenewForSingleYear",defaultMessage:"Promo pricing applies for 1 year."},termsApply:{id:"pricingPlanConstants.termsApply",defaultMessage:"Terms apply."},promoSummaryScheduledForPluralMonths:{id:"pricingPlanConstants.promoSummaryScheduledForPluralMonths",defaultMessage:"Pay for the first month, then the next {num_months} months are {discounted_cost}."},promoSummaryScheduledForSingleMonth:{id:"pricingPlanConstants.promoSummaryScheduledForSingleMonth",defaultMessage:"Pay for the first month, then the next month is {discounted_cost}."},promoSummaryScheduledForPluralYears:{id:"pricingPlanConstants.promoSummaryScheduledForPluralYears",defaultMessage:"Pay for the first year, then the next {num_years} years are {discounted_cost}."},promoSummaryScheduledForSingleYear:{id:"pricingPlanConstants.promoSummaryScheduledForSingleYear",defaultMessage:"Pay for the first year, then the next year is {discounted_cost}."}}),Ce=v.PLUS,Ta=()=>mt({queryKey:["has-app-store-subscription-in-billing-retry"],queryFn:async()=>await Ks.safeGet("/subscriptions/has_app_store_subscription_in_billing_retry")});function ka(s,e){const a=s.data.subscriptionStatus.planType,n=s.getNextPlanType();let o=s.getDaysUntilPlanChanges(),l=n===v.PLUS&&a===v.PRO||n===v.GO&&[v.PRO,v.PLUS].includes(a);return e&&!l&&(o=s.getDaysUntilPlanRenews(),l=!0),{daysUntilPlanChanges:o,isDowngradeScheduled:l,nextPlanType:n}}function Ua(s,e){const a=Ee(new Date,s);return new Intl.DateTimeFormat(e,{year:"numeric",month:"short",day:"numeric"}).format(a)}function Tt(s){return Vs.includes(s)?s:"USD"}function Fa(s,e,a,n){if(s==="plus-10-for-3-months")switch(a.currency){case"USD":{const o={value:10,currency_code:Tt(a.currency)};return{plan_name:he.PLUS,title:"",summary:e.formatMessage(n?je.headline:Me.plusSummary),discount:o,duration:{num_periods:3,period:"month"},price_period:"recurring",promotion_type:"discount",promotion_type_label:null}}case"EUR":case"GBP":return{plan_name:he.PLUS,title:"",summary:e.formatMessage(n?je.headline:Me.plusSummary),discount:{percentage:52.18},duration:{num_periods:3,period:"month"},price_period:"recurring",promotion_type:"discount",promotion_type_label:null};case"INR":return null;case"IDR":case"PKR":case"THB":case"MYR":case"VND":case"PHP":return null}else if(s==="plus-10-for-12-mos")switch(a.currency){case"USD":{const o={value:10,currency_code:Tt(a.currency)};return{plan_name:he.PLUS,title:"",summary:e.formatMessage(n?je.headline:Me.plusSummary),discount:o,duration:{num_periods:12,period:"month"},price_period:"recurring",promotion_type:"discount",promotion_type_label:null}}case"EUR":case"GBP":return{plan_name:he.PLUS,title:"",summary:e.formatMessage(n?je.headline:Me.plusSummary),discount:{percentage:52.18},duration:{num_periods:12,period:"month"},price_period:"recurring",promotion_type:"discount",promotion_type_label:null};case"INR":return null;case"IDR":case"PKR":case"THB":case"MYR":case"VND":case"PHP":return null}return null}const qa=({analyticsParams:s,className:e,currentAccount:a,planLoading:n,isPromoLoading:o,onUpgradeButtonClick:l,setPlanLoading:r,plusPricingPlan:m=null,shouldShowAdditionalLinks:f=!0,billingDetails:u,promoCode:c=null,promoMetadata:i=null,onClose:p,disableForMobile:d=!1,type:_,isWebRedesign:h,shouldUseComparisonSpacing:C,isUnifiedPricingPage:S,autoUpgrade:j=!1,fromiOSWebview:P=!1})=>{"use forget";const{data:b}=As(),{data:w,refetch:k}=mt(os),{data:{value:M}={}}=Ta(),{trackSelectedPixels:N}=Nt({key:v.PLUS}),{trackSelectedPixels:U}=Nt({key:"plus-secondary"}),x=a.features,I=as(),F=!Os(I),g=ge(),O=es();let D=m||Js({isWebRedesign:h});const L=ga({ctx:I,shouldLogExposure:!1}),{data:A}=ls(L);i==null&&(A==null?void 0:A.coupon)===L&&(A==null?void 0:A.state)==="eligible"&&fa({ctx:I,shouldLogExposure:!0})&&(i=Fa(L,g,u,h),c=L);const{eligible:B,campaignId:Y}=aa();let R;i==null&&B&&(!c&&Y&&(R=Y),i={plan_name:he.PLUS,title:"",summary:g.formatMessage(h?je.headline:Me.plusSummary),discount:{percentage:100},duration:{num_periods:1,period:"month"},price_period:"recurring",promotion_type:"discount",promotion_type_label:g.formatMessage(re.specialOffer)});const E=W.useRef(!1),G=W.useRef(!1),[ee,oe]=W.useState(!1),[ce,ve]=W.useState(!1),[Te,ie]=W.useState(!1),{recentlyDowngraded:$e}=ds();let Q=[];const ye=a.isOrWasPaidCustomer(),ue=a.hasPaidSubscription(),q=ue&&a.isPlus(),ke=ue&&a.isPro(),we=a.getLastActiveSubscription(),te=Ke(I,"3950229590"),{prepareCheckoutSession:Pe,navigateToCheckout:de}=ua(),We=Ls(b),_e=x.includes("disable_plus_upgrade_ui")&&!ye,{daysUntilPlanChanges:Ue,isDowngradeScheduled:qe,nextPlanType:ft}=ka(a,$e),se=W.useMemo(()=>X(V({},s),{promoCode:c,promoCampaign:R,planType:Ce,isUpgradeUiDisabled:_e}),[s,c,R,_e]),fs=!!(w!=null&&w.email),De=W.useRef(new Map),Qe=W.useRef(null);W.useEffect(()=>{if(!q&&te.get("enabled_prefetch_checkout_for_plus",!1)){const J={plan_name:he.PLUS,billing_details:u,promo_code:c,promo_campaign:R},ae=JSON.stringify(J);if(!De.current.has(ae)){$.logEventWithStatsig("Account Pay: Prefetch Checkout Session","chatgpt_account_payment_modal_prefetch_checkout_session",se),De.current.clear();const fe=te.get("skip_sentinel_checkout",!1),Se=Pe(J,{skipSentinelCheckout:fe,fromiOSWebview:P});De.current.set(ae,Se)}}},[Pe,se,u,c,x,q,te,Y,R,P]);const hs=()=>{const J={plan_name:he.PLUS,billing_details:u,promo_code:c,promo_campaign:R},ae=De.current.get(JSON.stringify(J));if(ae)return $.logEventWithStatsig("Account Pay: Using Prefetched Checkout Session","chatgpt_account_payment_modal_using_prefetched_checkout_session",se),ae;$.logEventWithStatsig("Account Pay: Click to Fetch Checkout Session","chatgpt_account_payment_modal_click_to_fetch_checkout_session",se),De.current.clear();const fe=te.get("skip_sentinel_checkout",!1);return Pe(J,{skipSentinelCheckout:fe,fromiOSWebview:P})},ys=async({skipEmailCheck:J})=>{var ae,fe;if(!fs&&!J){ie(!0);return}r==null||r(v.PLUS),$.logEvent("Account Pay: Payment Checkout Clicked",se),He(I,"chatgpt_account_payment_modal_upgrade_button_click",Ce),Qe.current=Date.now();try{const Se=await hs();let Le;Qe.current&&(Le=Date.now()-Qe.current),$.logEvent("Account Pay: Navigating to Payment Checkout",X(V({},se),{url:(ae=Se.url)!=null?ae:"",latency_ms:Le}));const _t={url:String((fe=Se.url)!=null?fe:"")};Le!==void 0&&(_t.latency_ms=Le.toString()),He(I,"chatgpt_account_payment_modal_navigating_to_checkout",Ce,_t),await de(Se)}catch(Se){O.warning(g.formatMessage(re.paymentErrorWarning),{hasCloseButton:!0})}r==null||r(null)},Ps=()=>{$.logEvent("Account Portal: Click iOS Manage Subscription",se)},_s=()=>{$.logEvent("Account Portal: Click Android Manage Subscription",se)},Ss=q&&[xe.CHATGPT_IOS,xe.SORA_IOS].includes(we.purchase_origin_platform),Cs=q&&we.purchase_origin_platform===xe.MOBILE_ANDROID;We&&!q&&Q.push(t.jsx(Re,{to:Ys,target:"_blank",className:le(h?"px-1 font-medium":"px-2","underline"),children:t.jsx(y,V({},re.limitsApply))},"row-plus-plan-usage-limits")),Ss&&Q.push(t.jsx(Re,{to:Bs,target:"_blank",onClick:Ps,className:le(h?"px-1 font-medium":"px-2","underline"),children:g.formatMessage(Rt.manageSubscriptionIos.callToAction)},"row-plus-plan-manage-ios")),Cs&&Q.push(t.jsx(Re,{to:Hs,target:"_blank",onClick:_s,className:le(h?"px-1 font-medium":"px-2","underline"),children:g.formatMessage(Rt.manageSubscriptionAndroid.callToAction)},"row-plus-plan-manage-android")),q&&ye&&Q.push(t.jsx(Re,{target:"_blank",to:kt,onClick:is,className:le(h?"px-1 font-medium":"px-2","underline"),children:t.jsx(y,V({},re.billingHelp))},"row-plus-plan-help-link"));const Fe=({skipAppStoreSubscriptionInBillingRetryCheck:J=!1,skipEmailCheck:ae=!1}={})=>{if(M&&!J)return oe(!0);if(l)return l(u,se);ue&&!q&&!a.isActiveSubscriptionGratis()?($.logEvent("Account Pay: Payment Checkout Clicked",se),He(I,"chatgpt_account_payment_modal_upgrade_button_click",Ce),ve(!0)):(N(),U(),ys({skipEmailCheck:ae}))};W.useEffect(()=>{!j||G.current||(G.current=!0,Fe())},[j]);const Ae=(J,ae)=>t.jsx(ct,{planType:Ce,isCurrentPlan:q&&!Oe,disabled:J,onClick:ae,testId:"select-plan-button-plus-upgrade",activeColor:ke?"secondary":h&&_==="highlight"||_==="promo"?"purple":_==="standard"||Ms?"primary":void 0,children:n===v.PLUS&&!ce?t.jsx(ss,{}):Oe&&q&&D.callToAction.promo?g.formatMessage(D.callToAction.promo):q?g.formatMessage(D.callToAction.active):ht&&F&&D.callToAction.inactiveUnauthenticated?g.formatMessage(D.callToAction.inactiveUnauthenticated):g.formatMessage(ha({ctx:I,planType:v.PLUS}))});cs(Te,{plan:se});const Oe=i!=null,Ms=(i==null?void 0:i.promotion_type)==="student_discount",ht=i!=null&&"referrer_name"in i,xs=(!q||Oe)&&n==null;Q=Oe?[]:Q;const{activeDiscountMetadata:yt,scheduledAdditionalLink:Pt}=Ea({isWebRedesign:h,currentAccount:a,intl:g,billingDetails:u,pricingPlan:D,promoMetadata:i,columnPlanType:v.PLUS});if(Pt&&Q.unshift(Pt),yt&&(D.summary=Me.plusSummaryWithDiscount),i&&(D=va({intl:g,pricingPlan:D,promoMetadata:i,currency:u.currency,planName:v.PLUS,currentAccount:a})),o!=null&&o)return null;const bs=Aa(a);return t.jsxs(t.Fragment,{children:[t.jsx(pt,{planType:Ce,elementId:Gs,pricingPlan:D,shouldUseComparisonSpacing:C,isUnifiedPricingPage:S,callToActionButton:_e?t.jsx("div",{className:"relative w-full",children:t.jsx(Je,{side:"bottom",sideOffset:20,label:g.formatMessage(re.highDemandDisabledText),children:Ae(!0,()=>{})})}):d&&bs?t.jsx("div",{children:t.jsx(Je,{side:"top",sideOffset:20,label:g.formatMessage({id:"I2JCGZ",defaultMessage:"Mobile subscriptions are currently not eligible for this promotion."}),onOpenChange:J=>{J&&!E.current&&(ht&&na.logMobileSubscriptionTooltipOpen(),E.current=!0)},children:t.jsx("div",{children:Ae(!0,()=>{})})})}):t.jsxs("div",{children:[Ue&&qe&&ft?t.jsx(Je,{side:"top",sideOffset:20,label:t.jsx(y,{id:"Rd9wuM",defaultMessage:"Your subscription will change to {nextPlanType} on {date}.",values:{date:Ua(Ue,g.locale),nextPlanType:gt(ft.toLowerCase())}}),children:Ae(!0,()=>{})}):Ae(!xs,Fe),t.jsx(Pa,{isOpen:ee,onClose:()=>oe(!1),onContinue:()=>Fe({skipAppStoreSubscriptionInBillingRetryCheck:!0}),analyticsParams:se}),ce&&t.jsx(_a,{isOpen:ce,onClose:()=>ve(!1),accountId:a.id,initialPlanType:a.planType,updatedPlanType:v.PLUS,billingDetails:u,promoMetadata:i,promoCode:c,onPromoClose:p,fullPriceResumeDateString:D.fullPriceResumeDateString})]}),secondaryCallToActionButton:_==="promo"?t.jsx(Ge,{size:"large",color:"secondary",onClick:p,children:t.jsx(y,V({},re.notNow))}):null,additionalLinks:f?Q:[],type:_,promoMetadata:i,activeDiscountMetadata:yt,billingDetails:u,className:e,isWebRedesign:h}),t.jsx(ze,{testId:"modal-add-email",isOpen:Te,onClose:()=>ie(!1),type:"success",className:"max-w-sm",children:t.jsx(ns,{enterEmailTitle:g.formatMessage(re.addEmailTitle),enterEmailDescription:g.formatMessage(re.addEmailDescription),onVerified:()=>{k(),ie(!1),Fe({skipEmailCheck:!0})},cancelFlowButton:t.jsx(Ge,{className:"w-full rounded-md",color:"secondary",onClick:()=>ie(!1),children:t.jsx(y,V({},re.cancelAddEmail))})})})]})};function Aa(s){const e=s.hasPaidSubscription(),a=s.getLastActiveSubscription(),n=e&&[xe.CHATGPT_IOS,xe.SORA_IOS].includes(a.purchase_origin_platform),o=e&&a.purchase_origin_platform===xe.MOBILE_ANDROID;return n||o}const re=Ve({specialOffer:{id:"pricingPlanConstants.specialOffer",defaultMessage:"SPECIAL OFFER"},addEmailTitle:{id:"AccountPaymentModal.addEmailTitle",defaultMessage:"Email required"},addEmailDescription:{id:"AccountPaymentModal.addEmailDescription",defaultMessage:"You'll be able to login with this email. It will also be used for account updates (like password resets) and information about OpenAI services."},cancelAddEmail:{id:"AccountPaymentModal.cancelAddEmail",defaultMessage:"Cancel"},haveExistingPlan:{id:"AccountPaymentModal.haveExistingPlan",defaultMessage:"Have an existing plan?"},billingHelp:{id:"AccountPaymentModel.billingHelp",defaultMessage:"I need help with a billing issue"},paymentErrorWarning:{id:"AccountPaymentModal.paymentErrorWarning",defaultMessage:"The payments page encountered an error. Please try again. If the problem continues, please visit help.openai.com."},accountErrorWarning:{id:"AccountPaymentModal.accountErrorWarning",defaultMessage:"The account management page encountered an error. Please try again. If the problem continues, please visit help.openai.com."},limitsApply:{id:"xda4i3",defaultMessage:"Limits apply"},notNow:{id:"AccountPaymentModal.notNow",defaultMessage:"Not Now"},highDemandDisabledText:{id:"AccountPaymentModal.highDemandDisabledText",defaultMessage:"Due to high demand, we've temporarily paused upgrades."}}),Ie=v.SELF_SERVE_BUSINESS,Oa={INR:z.team1dollarPromoDisclaimerINR,IDR:z.team1dollarPromoDisclaimerIDR,PKR:z.team1dollarPromoDisclaimerPKR,THB:z.team1dollarPromoDisclaimerTHB,MYR:z.team1dollarPromoDisclaimerMYR,VND:z.team1dollarPromoDisclaimerVND,PHP:z.team1dollarPromoDisclaimerPHP},Qa=({analyticsParams:s,planLoading:e,billingDetails:a,isWebRedesign:n,isUnifiedPricingPage:o,showBusinessTooltips:l,type:r=Xe.standard,shouldUseComparisonSpacing:m,shouldUseOnboardingFeatures:f,className:u,cta:c})=>{var B;const{data:i,refetch:p}=mt(os),d=ge(),_=as(),h=zs(_),C=js(),S=ca(),[j,P]=W.useState(!1),b=h==null?void 0:h.isTeam(),w=h==null?void 0:h.isPlus(),k=X(V({},s),{planType:Ie}),M=!!(i!=null&&i.email),N=Ke(_,"111733276").get("show_upgrade_page_v2_copy",!1),U=oa();let x=Xs({isWebRedesign:n,isBusinessUpgradeV2CopyEnabled:N,shouldUseOnboardingFeatures:f,isTrialEnabled:U.eligible,showBusinessTooltips:l});const I=ra(),{data:F}=ls(I!=null?I:""),g=F!=null?F:U.eligible?{coupon:U.campaignId,state:"eligible",redemption:null}:void 0,O=(g==null?void 0:g.coupon)===la&&(g==null?void 0:g.state)==="eligible",D=g&&ia(g==null?void 0:g.coupon)&&(g==null?void 0:g.state)==="eligible";let L=null;if((O||D)&&(L={plan_name:"chatgptteamplan",title:"",summary:"",discount:{value:0,currency_code:"USD"},duration:{num_periods:1,period:"month"},price_period:"recurring",promotion_type:"discount",promotion_type_label:null}),O){const R=(B=Oa[a.currency])!=null?B:z.team1dollarPromoDisclaimer;x=X(V({},x),{cost:X(V({},x.cost),{costInDollars:z.promoCost,costInPounds:z.promoCost,costInEuros:z.promoCost,costInINR:z.promoCostINR,costInIDR:z.promoCostIDR,costInPKR:z.promoCostPKR,costInTHB:z.promoCostTHB,costInMYR:z.promoCostMYR,costInVND:z.promoCostVND,costInPHP:z.promoCostPHP,costDuration:z.promoCostDuration}),disclaimer:R})}else D&&(x=X(V({},x),{cost:X(V({},x.cost),{costInDollars:ne.promoCost,costInPounds:ne.promoCost,costInEuros:ne.promoCost,costInINR:ne.promoCostINR,costInIDR:ne.promoCost,costInPKR:ne.promoCost,costInTHB:ne.promoCost,costInMYR:ne.promoCost,costInVND:ne.promoCost,costInPHP:ne.promoCost,costDuration:ne.promoCostDuration}),disclaimer:ne.teamFreeTrialPromoDisclaimerWithPerSeatMonthlyPrice}));const A=Y=>{var G;if(!M&&!Y){P(!0);return}$.logEvent("Account Pay: Payment Checkout Clicked",k),He(_,"chatgpt_account_payment_modal_upgrade_button_click",Ie);const E=(G=new URLSearchParams(window.location.search).get("referrer"))!=null?G:document.referrer;Ws.setPurchaseWorkspaceData({minimumSeats:S,billingDetails:a,promoData:(g==null?void 0:g.state)==="eligible"?g:void 0,referrer:E}),qs(C)};return cs(j,{plan:k}),t.jsxs(t.Fragment,{children:[t.jsx(pt,{planType:Ie,isWebRedesign:n,className:le(u,n&&!o&&"md:max-w-117"),elementId:$s,pricingPlan:x,promoData:g,promoMetadata:L,type:r,shouldUseComparisonSpacing:m,isUnifiedPricingPage:o,isBusinessUpgradeV2CopyEnabled:N,useRecommendedBadge:r===Xe.highlight,callToActionButton:t.jsxs("div",{className:"flex flex-col gap-2",children:[b&&t.jsx(ct,{planType:Ie,isCurrentPlan:!0,disabled:e!=null||b,onClick:()=>A(),testId:"select-plan-button-teams-upgrade",children:d.formatMessage(x.callToAction.active)}),c!=null?c:t.jsx(ct,{className:"w-full",planType:Ie,disabled:e!=null,activeColor:r===Xe.highlight?"purple":void 0,onClick:()=>A(),testId:"select-plan-button-teams-create",children:b||w?d.formatMessage(x.callToAction.create):d.formatMessage(x.callToAction.inactive)})]}),billingDetails:a}),t.jsx(ze,{testId:"modal-add-email",isOpen:j,onClose:()=>P(!1),type:"success",className:"max-w-sm",children:t.jsx(ns,{enterEmailTitle:d.formatMessage(re.addEmailTitle),enterEmailDescription:d.formatMessage(re.addEmailDescription),onVerified:async()=>{P(!1),await p(),A(!0)}})})]})};export{Sa as A,Wa as F,Pa as M,_a as P,ct as S,Qa as T,cs as a,ha as b,va as c,Ea as d,qa as e,Ua as f,ka as g,is as h,ut as i,Na as j,Da as k,Ia as l,re as m,ds as u};
//# sourceMappingURL=bjzpeonqipke77vk.js.map
