import{m7 as h,S as x,B as y}from"./lgw4q0e8zlqqfgug.js";import{O as g,a as P,r as m,u as j,j as e,M as i,d as C}from"./m60bpb0x3x7rg8fj.js";import{C as k}from"./l0p6qq8f8it6pgl9.js";const S=1e3,M=3e4,v=h(function(){const{processorEntity:s,checkoutSessionId:r,planType:u}=g(),l=P(),[t,d]=m.useState({firstRequestAt:Date.now(),pollCount:0,finished:!1,redirected:!1}),{data:o}=j({queryKey:["checkoutSession",s,r],queryFn:async()=>{const n=await k.fetchExistingCheckoutSession(s,r),p=n.status==="complete"||Date.now()-t.firstRequestAt>M;return d(f=>({...f,pollCount:f.pollCount+1,finished:p})),n},refetchInterval:S,enabled:!t.finished});m.useEffect(()=>{!t.finished||t.redirected||o?.status==="complete"&&(d(n=>({...n,redirected:!0})),l({pathname:"/payments/success",search:`?stripe_session_id=${r}&plan_type=${u}&processor_entity=${s}`}))},[t,o,r,s,u,l]);const a=t.finished&&o?.status!=="complete";return e.jsx("div",{className:"flex h-screen flex-col p-4",children:e.jsx("div",{className:"flex flex-1 items-center justify-center",children:e.jsxs("div",{className:"flex flex-col items-center gap-3",children:[!a&&e.jsx(x,{className:"icon-xl"}),e.jsx("span",{className:"text-muted-foreground text-center text-sm",children:a?e.jsx(i,{...c.errorProcessingPayment}):e.jsx(i,{...c.processingPayment})}),a&&e.jsx(y,{color:"primary",as:"link",to:"/#pricing",children:e.jsx(i,{...c.returnButtonText})})]})})})}),c=C({processingPayment:{id:"CheckoutVerifyRoute.processingPayment",defaultMessage:"Processing Payment"},errorProcessingPayment:{id:"CheckoutVerifyRoute.errorProcessingPayment",defaultMessage:"There was an error processing your payment"},returnButtonText:{id:"CheckoutVerifyRoute.returnButtonText",defaultMessage:"Return to ChatGPT"}});export{v as default};
//# sourceMappingURL=odlg34pnds57b5nz.js.map
