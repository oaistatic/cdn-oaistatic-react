import{eM as U,aA as Ue,oa as ze,qn as ae}from"./lgw4q0e8zlqqfgug.js";import{j7 as O,j8 as F,j9 as k,ja as q,jb as z,jc as w,jd as _,je as x,jf as m,hZ as Te,jg as qe,jh as xe,ji as je,jj as me,jk as Fe}from"./ggjzadbnd3k1vu0k.js";import"./m60bpb0x3x7rg8fj.js";class J{static interfaceName="web.bridge.AgentHandler";static interfaceVersion=0}(e=>{let c;(s=>{s.VERSION_INFO=[{version:0,size:16}],s.CURRENT_VERSION=s.VERSION_INFO[s.VERSION_INFO.length-1];function r(V){return O.bytes(s.CURRENT_VERSION.size).add(O.forString(V.agentid))}s.measure=r;function N(V,g){V.setString(0,g.agentid)}s.encode=N;function f(V,g){return{agentid:F(V.getString(0))}}s.decode=f})(c=e.AgentHandler_TryOpenAgentViewer_Params||(e.AgentHandler_TryOpenAgentViewer_Params={}));let R;(s=>{s.VERSION_INFO=[{version:0,size:16}],s.CURRENT_VERSION=s.VERSION_INFO[s.VERSION_INFO.length-1];function r(V){return O.bytes(s.CURRENT_VERSION.size)}s.measure=r;function N(V,g){let y=0;g.response&&(y|=1),V.setU8(0,y)}s.encode=N;function f(V,g){return{response:(V.getU8(0)&1)!=0}}s.decode=f})(R=e.AgentHandler_TryOpenAgentViewer_ResponseParams||(e.AgentHandler_TryOpenAgentViewer_ResponseParams={}));let o;(s=>{s.VERSION_INFO=[{version:0,size:8}],s.CURRENT_VERSION=s.VERSION_INFO[s.VERSION_INFO.length-1];function r(V){return O.bytes(s.CURRENT_VERSION.size)}s.measure=r;function N(V,g){}s.encode=N;function f(V,g){return{}}s.decode=f})(o=e.AgentHandler_GetClientID_Params||(e.AgentHandler_GetClientID_Params={}));let t;(s=>{s.VERSION_INFO=[{version:0,size:16}],s.CURRENT_VERSION=s.VERSION_INFO[s.VERSION_INFO.length-1];function r(V){return O.bytes(s.CURRENT_VERSION.size).add(O.forString(V.clientid))}s.measure=r;function N(V,g){V.setString(0,g.clientid)}s.encode=N;function f(V,g){return{clientid:F(V.getString(0))}}s.decode=f})(t=e.AgentHandler_GetClientID_ResponseParams||(e.AgentHandler_GetClientID_ResponseParams={}));let n;(s=>{s.VERSION_INFO=[{version:0,size:16}],s.CURRENT_VERSION=s.VERSION_INFO[s.VERSION_INFO.length-1];function r(V){return O.bytes(s.CURRENT_VERSION.size).add(O.forString(V.agentid))}s.measure=r;function N(V,g){V.setString(0,g.agentid)}s.encode=N;function f(V,g){return{agentid:F(V.getString(0))}}s.decode=f})(n=e.AgentHandler_UserSentMessageInAgentConversation_Params||(e.AgentHandler_UserSentMessageInAgentConversation_Params={}));let E;(s=>{s.VERSION_INFO=[{version:0,size:24}],s.CURRENT_VERSION=s.VERSION_INFO[s.VERSION_INFO.length-1];function r(V){return O.bytes(s.CURRENT_VERSION.size).add(O.forString(V.agentid)).add(O.forStringArray(V.urls))}s.measure=r;function N(V,g){V.setString(0,g.agentid),V.setStringArray(8,g.urls)}s.encode=N;function f(V,g){return{agentid:F(V.getString(0)),urls:F(k(V.getStringArray(8)))}}s.decode=f})(E=e.AgentHandler_OpenAgentTabs_Params||(e.AgentHandler_OpenAgentTabs_Params={}));class u{constructor(r){this._endpoint=new q(r.endpointState,!0),this._version=0}static create(){const[r,N]=z.createChannel(e);return[new u(r),N]}static createToBrowser(){const[r,N]=this.create();return Mojo.bindInterface(e.interfaceName,N.pipe.rawHandle),r}async tryOpenAgentViewer(r){const N={agentid:r};return(await this._endpoint.sendAndAwaitResponse(w.encode(0,_.None,c,N))).decode(R).response}async getClientID(){const r={};return(await this._endpoint.sendAndAwaitResponse(w.encode(1,_.None,o,r))).decode(t).clientid}userSentMessageInAgentConversation(r){const N={agentid:r};this._endpoint.send(w.encode(2,_.None,n,N))}openAgentTabs(r,N){const f={agentid:r,urls:N};this._endpoint.send(w.encode(3,_.None,E,f))}_endpoint;_version}e.Proxy=u;class i extends x{constructor(){super(e)}onDisconnect;bind(r,N){this.addReceiver(N,async(f,V)=>{switch(f.header.ordinal){case 0:{const g=f.decode(c),y=r.tryOpenAgentViewer(g.agentid),a=V.createResponder(R,0,f.header.requestID),B=await y;a({response:B});break}case 1:{f.decode(o);const g=r.getClientID(),y=V.createResponder(t,1,f.header.requestID),a=await g;y({clientid:a});break}case 2:{const g=f.decode(n);r.userSentMessageInAgentConversation(g.agentid);break}case 3:{const g=f.decode(E);r.openAgentTabs(g.agentid,g.urls);break}default:f.header.expectsResponse&&V.sendUnimplementedResponse(f.header.requestID,f.header.ordinal)}return Promise.resolve()},()=>{this.onDisconnect&&this.onDisconnect(r)})}createRemote(r){const[N,f]=z.createChannel(e);return this.bind(r,f),N}}e.Dispatcher=i})(J||(J={}));var K;(e=>{e.VERSION_INFO=[{version:0,size:32}],e.CURRENT_VERSION=e.VERSION_INFO[e.VERSION_INFO.length-1];function c(t){return O.bytes(e.CURRENT_VERSION.size).add(O.forString(t.accessToken)).add(O.forString(t.idToken))}e.measure=c;function R(t,n){t.setString(0,n.accessToken),t.setString(8,n.idToken),t.setF64(16,n.expiresTimestampMsSince1970)}e.encode=R;function o(t,n){return{accessToken:F(t.getString(0)),idToken:F(t.getString(8)),expiresTimestampMsSince1970:F(t.getF64(16))}}e.decode=o})(K||(K={}));var te;(e=>{function c(o){if(o==="justLoggedInAccessToken")return 0;if(o==="reloadPageIfLoggedOut")return 1;if(o==="fullTokenToSessionConversion")return 2;throw new m}e.encode=c;function R(o){switch(o){case 0:return"justLoggedInAccessToken";case 1:return"reloadPageIfLoggedOut";case 2:return"fullTokenToSessionConversion";default:return"justLoggedInAccessToken"}}e.decode=R})(te||(te={}));class ne{static interfaceName="web.bridge.AuthHandler";static interfaceVersion=0}(e=>{let c;(n=>{n.VERSION_INFO=[{version:0,size:8}],n.CURRENT_VERSION=n.VERSION_INFO[n.VERSION_INFO.length-1];function E(s){return O.bytes(n.CURRENT_VERSION.size)}n.measure=E;function u(s,r){}n.encode=u;function i(s,r){return{}}n.decode=i})(c=e.AuthHandler_HandleMissingSessionAuth_Params||(e.AuthHandler_HandleMissingSessionAuth_Params={}));let R;(n=>{n.VERSION_INFO=[{version:0,size:8}],n.CURRENT_VERSION=n.VERSION_INFO[n.VERSION_INFO.length-1];function E(s){return O.bytes(n.CURRENT_VERSION.size)}n.measure=E;function u(s,r){}n.encode=u;function i(s,r){return{}}n.decode=i})(R=e.AuthHandler_RecordAvailableSessionAuth_Params||(e.AuthHandler_RecordAvailableSessionAuth_Params={}));class o{constructor(E){this._endpoint=new q(E.endpointState,!0),this._version=0}static create(){const[E,u]=z.createChannel(e);return[new o(E),u]}static createToBrowser(){const[E,u]=this.create();return Mojo.bindInterface(e.interfaceName,u.pipe.rawHandle),E}handleMissingSessionAuth(){const E={};this._endpoint.send(w.encode(0,_.None,c,E))}recordAvailableSessionAuth(){const E={};this._endpoint.send(w.encode(1,_.None,R,E))}_endpoint;_version}e.Proxy=o;class t extends x{constructor(){super(e)}onDisconnect;bind(E,u){this.addReceiver(u,async(i,s)=>{switch(i.header.ordinal){case 0:{i.decode(c),E.handleMissingSessionAuth();break}case 1:{i.decode(R),E.recordAvailableSessionAuth();break}default:i.header.expectsResponse&&s.sendUnimplementedResponse(i.header.requestID,i.header.ordinal)}return Promise.resolve()},()=>{this.onDisconnect&&this.onDisconnect(E)})}createRemote(E){const[u,i]=z.createChannel(e);return this.bind(E,i),u}}e.Dispatcher=t})(ne||(ne={}));class C{static interfaceName="web.bridge.AuthStateController";static interfaceVersion=0}(e=>{let c;(t=>{t.VERSION_INFO=[{version:0,size:24}],t.CURRENT_VERSION=t.VERSION_INFO[t.VERSION_INFO.length-1];function n(i){return O.bytes(t.CURRENT_VERSION.size).add(O.forObject(K,i.authToken))}t.measure=n;function E(i,s){i.setObjectIndirect(K,0,s.authToken),i.setEnumValue(te,8,s.behavior)}t.encode=E;function u(i,s){return{authToken:F(i.getObjectIndirect(K,0)),behavior:F(i.getEnumValue(te,8))}}t.decode=u})(c=e.AuthStateController_RefreshSessionContext_Params||(e.AuthStateController_RefreshSessionContext_Params={}));class R{constructor(n){this._endpoint=new q(n.endpointState,!0),this._version=0}static create(){const[n,E]=z.createChannel(e);return[new R(n),E]}static createToBrowser(){const[n,E]=this.create();return Mojo.bindInterface(e.interfaceName,E.pipe.rawHandle),n}refreshSessionContext(n,E){const u={authToken:n,behavior:E};this._endpoint.send(w.encode(0,_.None,c,u))}_endpoint;_version}e.Proxy=R;class o extends x{constructor(){super(e)}onDisconnect;bind(n,E){this.addReceiver(E,async(u,i)=>{switch(u.header.ordinal){case 0:{const s=u.decode(c);n.refreshSessionContext(s.authToken,s.behavior);break}default:u.header.expectsResponse&&i.sendUnimplementedResponse(u.header.requestID,u.header.ordinal)}return Promise.resolve()},()=>{this.onDisconnect&&this.onDisconnect(n)})}createRemote(n){const[E,u]=z.createChannel(e);return this.bind(n,u),E}}e.Dispatcher=o})(C||(C={}));var Q;(e=>{e.VERSION_INFO=[{version:0,size:32}],e.CURRENT_VERSION=e.VERSION_INFO[e.VERSION_INFO.length-1];function c(t){return O.bytes(e.CURRENT_VERSION.size).add(O.forString(t.conduitToken))}e.measure=c;function R(t,n){t.setEnumValue(se,0,n.prepareState),t.setF64(8,n.lastPrepareTimestampMsSince1970),t.setString(16,n.conduitToken)}e.encode=R;function o(t,n){return{prepareState:F(t.getEnumValue(se,0)),lastPrepareTimestampMsSince1970:F(t.getF64(8)),conduitToken:F(t.getString(16))}}e.decode=o})(Q||(Q={}));var X;(e=>{e.VERSION_INFO=[{version:0,size:16}],e.CURRENT_VERSION=e.VERSION_INFO[e.VERSION_INFO.length-1];function c(t){return O.bytes(e.CURRENT_VERSION.size)}e.measure=c;function R(t,n){t.setEnumValue(ie,0,n.selectedTab)}e.encode=R;function o(t,n){return{selectedTab:F(t.getEnumValue(ie,0))}}e.decode=o})(X||(X={}));var Y;(e=>{e.VERSION_INFO=[{version:0,size:56}],e.CURRENT_VERSION=e.VERSION_INFO[e.VERSION_INFO.length-1];function c(t){return O.bytes(e.CURRENT_VERSION.size).add(O.forString(t.id)).add(O.forString(t.name)).add(O.forString(t.mimeType))}e.measure=c;function R(t,n){let E=0;t.setString(0,n.id),t.setI64(8,n.size),t.setString(16,n.name),t.setString(24,n.mimeType),n.width!==null&&n.width!==void 0&&(E|=1,t.setI32(36,n.width)),n.height!==null&&n.height!==void 0&&(E|=2,t.setI32(40,n.height)),n.fileTokenSize!==null&&n.fileTokenSize!==void 0&&(E|=4,t.setI32(44,n.fileTokenSize)),t.setU8(32,E)}e.encode=R;function o(t,n){const E=t.getU8(32),u=(E&1)!=0,i=(E&2)!=0,s=(E&4)!=0;return{id:F(t.getString(0)),size:F(t.getI64(8)),name:F(t.getString(16)),mimeType:F(t.getString(24)),...u?{width:F(t.getI32(36))}:{},...i?{height:F(t.getI32(40))}:{},...s?{fileTokenSize:F(t.getI32(44))}:{}}}e.decode=o})(Y||(Y={}));var l;(e=>{e.VERSION_INFO=[{version:0,size:40},{version:1,size:48},{version:2,size:56}],e.CURRENT_VERSION=e.VERSION_INFO[e.VERSION_INFO.length-1];function c(t){return O.bytes(e.CURRENT_VERSION.size).add(O.forString(t.id)).add(O.forString(t.url)).add(O.forString(t.title)).add(O.forString(t.base64favicon??null)).add(O.forString(t.selection??null))}e.measure=c;function R(t,n){let E=0;t.setString(0,n.id),t.setString(8,n.url),t.setString(16,n.title),t.setString(24,n.base64favicon??null),t.setString(32,n.selection??null),n.blocked!==null&&n.blocked!==void 0&&(E|=1,n.blocked&&(E|=2)),t.setU8(40,E)}e.encode=R;function o(t,n){const E=t.getString(24),u=n>=1?t.getString(32):null,i=n>=2?t.getU8(40):0,s=(i&1)!=0;return{id:F(t.getString(0)),url:F(t.getString(8)),title:F(t.getString(16)),...E!==null?{base64favicon:E}:{},...u!==null?{selection:u}:{},...s?{blocked:(i&2)!=0}:{}}}e.decode=o})(l||(l={}));var ce;(e=>{function c(o){if(o==="mainPage")return 0;if(o==="sidebar")return 1;throw new m}e.encode=c;function R(o){switch(o){case 0:return"mainPage";case 1:return"sidebar";default:throw new m}}e.decode=R})(ce||(ce={}));var se;(e=>{function c(o){if(o==="none")return 0;if(o==="sent")return 1;if(o==="success")return 2;if(o==="failure")return 3;throw new m}e.encode=c;function R(o){switch(o){case 0:return"none";case 1:return"sent";case 2:return"success";case 3:return"failure";default:return"none"}}e.decode=R})(se||(se={}));var ie;(e=>{function c(o){if(o==="answer")return 0;if(o==="web")return 1;if(o==="images")return 2;if(o==="videos")return 3;throw new m}e.encode=c;function R(o){switch(o){case 0:return"answer";case 1:return"web";case 2:return"images";case 3:return"videos";default:return"answer"}}e.decode=R})(ie||(ie={}));var re;(e=>{function c(o){if(o==="default_")return 0;if(o==="blue")return 1;if(o==="green")return 2;if(o==="yellow")return 3;if(o==="purple")return 4;if(o==="pink")return 5;if(o==="orange")return 6;if(o==="black")return 7;throw new m}e.encode=c;function R(o){switch(o){case 0:return"default_";case 1:return"blue";case 2:return"green";case 3:return"yellow";case 4:return"purple";case 5:return"pink";case 6:return"orange";case 7:return"black";default:return"default_"}}e.decode=R})(re||(re={}));var de;(e=>{function c(o){if(o==="none")return 0;if(o==="startTakeoverFromAgent")return 1;if(o==="endTakeoverFromAgent")return 2;if(o==="stopAgent")return 3;throw new m}e.encode=c;function R(o){switch(o){case 0:return"none";case 1:return"startTakeoverFromAgent";case 2:return"endTakeoverFromAgent";case 3:return"stopAgent";default:return"none"}}e.decode=R})(de||(de={}));class ee{static interfaceName="web.bridge.ConversationController";static interfaceVersion=2}(e=>{let c;(d=>{d.VERSION_INFO=[{version:0,size:16}],d.CURRENT_VERSION=d.VERSION_INFO[d.VERSION_INFO.length-1];function h(I){return O.bytes(d.CURRENT_VERSION.size)}d.measure=h;function p(I,S){I.setEnumValue(ce,0,S.windowStyle)}d.encode=p;function b(I,S){return{windowStyle:F(I.getEnumValue(ce,0))}}d.decode=b})(c=e.ConversationController_SetWindowStyle_Params||(e.ConversationController_SetWindowStyle_Params={}));let R;(d=>{d.VERSION_INFO=[{version:0,size:16}],d.CURRENT_VERSION=d.VERSION_INFO[d.VERSION_INFO.length-1];function h(I){return O.bytes(d.CURRENT_VERSION.size).add(O.forString(I.modelSlug))}d.measure=h;function p(I,S){I.setString(0,S.modelSlug)}d.encode=p;function b(I,S){return{modelSlug:F(I.getString(0))}}d.decode=b})(R=e.ConversationController_SetModel_Params||(e.ConversationController_SetModel_Params={}));let o;(d=>{d.VERSION_INFO=[{version:0,size:8}],d.CURRENT_VERSION=d.VERSION_INFO[d.VERSION_INFO.length-1];function h(I){return O.bytes(d.CURRENT_VERSION.size)}d.measure=h;function p(I,S){}d.encode=p;function b(I,S){return{}}d.decode=b})(o=e.ConversationController_NewConversation_Params||(e.ConversationController_NewConversation_Params={}));let t;(d=>{d.VERSION_INFO=[{version:0,size:16}],d.CURRENT_VERSION=d.VERSION_INFO[d.VERSION_INFO.length-1];function h(I){return O.bytes(d.CURRENT_VERSION.size).add(O.forString(I.remoteConversationId))}d.measure=h;function p(I,S){I.setString(0,S.remoteConversationId)}d.encode=p;function b(I,S){return{remoteConversationId:F(I.getString(0))}}d.decode=b})(t=e.ConversationController_LoadConversation_Params||(e.ConversationController_LoadConversation_Params={}));let n;(d=>{d.VERSION_INFO=[{version:0,size:32}],d.CURRENT_VERSION=d.VERSION_INFO[d.VERSION_INFO.length-1];function h(I){return O.bytes(d.CURRENT_VERSION.size).add(O.forString(I.prompt)).add(O.forStringArray(I.systemHints)).add(O.forString(I.modelSlug))}d.measure=h;function p(I,S){I.setString(0,S.prompt),I.setStringArray(8,S.systemHints),I.setString(16,S.modelSlug)}d.encode=p;function b(I,S){return{prompt:F(I.getString(0)),systemHints:F(k(I.getStringArray(8))),modelSlug:F(I.getString(16))}}d.decode=b})(n=e.ConversationController_RequestCompletion_Params||(e.ConversationController_RequestCompletion_Params={}));let E;(d=>{d.VERSION_INFO=[{version:0,size:24}],d.CURRENT_VERSION=d.VERSION_INFO[d.VERSION_INFO.length-1];function h(I){return O.bytes(d.CURRENT_VERSION.size).add(O.forString(I.userMessage??null)).add(O.forString(I.targetedReply??null))}d.measure=h;function p(I,S){I.setString(0,S.userMessage??null),I.setString(8,S.targetedReply??null)}d.encode=p;function b(I,S){const j=I.getString(0),Z=I.getString(8);return{...j!==null?{userMessage:j}:{},...Z!==null?{targetedReply:Z}:{}}}d.decode=b})(E=e.ConversationController_PopulatePrompt_Params||(e.ConversationController_PopulatePrompt_Params={}));let u;(d=>{d.VERSION_INFO=[{version:0,size:32},{version:1,size:40},{version:2,size:48}],d.CURRENT_VERSION=d.VERSION_INFO[d.VERSION_INFO.length-1];function h(I){return O.bytes(d.CURRENT_VERSION.size).add(O.forString(I.url)).add(O.forString(I.title)).add(O.forString(I.base64favicon??null)).add(O.forString(I.selection??null))}d.measure=h;function p(I,S){let j=0;I.setString(0,S.url),I.setString(8,S.title),I.setString(16,S.base64favicon??null),I.setString(24,S.selection??null),S.blocked!==null&&S.blocked!==void 0&&(j|=1,S.blocked&&(j|=2)),I.setU8(32,j)}d.encode=p;function b(I,S){const j=I.getString(16),Z=S>=1?I.getString(24):null,be=S>=2?I.getU8(32):0,_e=(be&1)!=0;return{url:F(I.getString(0)),title:F(I.getString(8)),...j!==null?{base64favicon:j}:{},...Z!==null?{selection:Z}:{},..._e?{blocked:(be&2)!=0}:{}}}d.decode=b})(u=e.ConversationController_UpdateContext_Params||(e.ConversationController_UpdateContext_Params={}));let i;(d=>{d.VERSION_INFO=[{version:0,size:16}],d.CURRENT_VERSION=d.VERSION_INFO[d.VERSION_INFO.length-1];function h(I){return O.bytes(d.CURRENT_VERSION.size).add(O.forObject(Q,I.details))}d.measure=h;function p(I,S){I.setObjectIndirect(Q,0,S.details)}d.encode=p;function b(I,S){return{details:F(I.getObjectIndirect(Q,0))}}d.decode=b})(i=e.ConversationController_PrepareConversation_Params||(e.ConversationController_PrepareConversation_Params={}));let s;(d=>{d.VERSION_INFO=[{version:0,size:16}],d.CURRENT_VERSION=d.VERSION_INFO[d.VERSION_INFO.length-1];function h(I){return O.bytes(d.CURRENT_VERSION.size).add(O.forObject(X,I.options))}d.measure=h;function p(I,S){I.setObjectIndirect(X,0,S.options)}d.encode=p;function b(I,S){return{options:F(I.getObjectIndirect(X,0))}}d.decode=b})(s=e.ConversationController_SetSuperWidgetOptions_Params||(e.ConversationController_SetSuperWidgetOptions_Params={}));let r;(d=>{d.VERSION_INFO=[{version:0,size:16}],d.CURRENT_VERSION=d.VERSION_INFO[d.VERSION_INFO.length-1];function h(I){return O.bytes(d.CURRENT_VERSION.size).add(O.forObjectArray(Y,I.attachments))}d.measure=h;function p(I,S){I.setObjectArray(Y,0,S.attachments)}d.encode=p;function b(I,S){return{attachments:F(k(I.getObjectArray(Y,0)))}}d.decode=b})(r=e.ConversationController_SetAttachments_Params||(e.ConversationController_SetAttachments_Params={}));let N;(d=>{d.VERSION_INFO=[{version:0,size:16}],d.CURRENT_VERSION=d.VERSION_INFO[d.VERSION_INFO.length-1];function h(I){return O.bytes(d.CURRENT_VERSION.size).add(O.forString(I.to))}d.measure=h;function p(I,S){I.setString(0,S.to)}d.encode=p;function b(I,S){return{to:F(I.getString(0))}}d.decode=b})(N=e.ConversationController_Navigate_Params||(e.ConversationController_Navigate_Params={}));let f;(d=>{d.VERSION_INFO=[{version:0,size:16}],d.CURRENT_VERSION=d.VERSION_INFO[d.VERSION_INFO.length-1];function h(I){return O.bytes(d.CURRENT_VERSION.size).add(O.forObject($,I.whisperContent))}d.measure=h;function p(I,S){I.setObjectIndirect($,0,S.whisperContent)}d.encode=p;function b(I,S){return{whisperContent:F(I.getObjectIndirect($,0))}}d.decode=b})(f=e.ConversationController_SetWhisperContent_Params||(e.ConversationController_SetWhisperContent_Params={}));let V;(d=>{d.VERSION_INFO=[{version:0,size:16}],d.CURRENT_VERSION=d.VERSION_INFO[d.VERSION_INFO.length-1];function h(I){return O.bytes(d.CURRENT_VERSION.size).add(O.forObjectArray(l,I.tabs))}d.measure=h;function p(I,S){I.setObjectArray(l,0,S.tabs)}d.encode=p;function b(I,S){return{tabs:F(k(I.getObjectArray(l,0)))}}d.decode=b})(V=e.ConversationController_SetTabContext_Params||(e.ConversationController_SetTabContext_Params={}));let g;(d=>{d.VERSION_INFO=[{version:0,size:16}],d.CURRENT_VERSION=d.VERSION_INFO[d.VERSION_INFO.length-1];function h(I){return O.bytes(d.CURRENT_VERSION.size).add(O.forString(I.origin))}d.measure=h;function p(I,S){I.setString(0,S.origin)}d.encode=p;function b(I,S){return{origin:F(I.getString(0))}}d.decode=b})(g=e.ConversationController_SetPromptOrigin_Params||(e.ConversationController_SetPromptOrigin_Params={}));let y;(d=>{d.VERSION_INFO=[{version:0,size:8}],d.CURRENT_VERSION=d.VERSION_INFO[d.VERSION_INFO.length-1];function h(I){return O.bytes(d.CURRENT_VERSION.size)}d.measure=h;function p(I,S){}d.encode=p;function b(I,S){return{}}d.decode=b})(y=e.ConversationController_CloseNavigationSidebar_Params||(e.ConversationController_CloseNavigationSidebar_Params={}));let a;(d=>{d.VERSION_INFO=[{version:0,size:16}],d.CURRENT_VERSION=d.VERSION_INFO[d.VERSION_INFO.length-1];function h(I){return O.bytes(d.CURRENT_VERSION.size)}d.measure=h;function p(I,S){I.setEnumValue(re,0,S.theme)}d.encode=p;function b(I,S){return{theme:F(I.getEnumValue(re,0))}}d.decode=b})(a=e.ConversationController_SetChatTheme_Params||(e.ConversationController_SetChatTheme_Params={}));let B;(d=>{d.VERSION_INFO=[{version:0,size:8}],d.CURRENT_VERSION=d.VERSION_INFO[d.VERSION_INFO.length-1];function h(I){return O.bytes(d.CURRENT_VERSION.size)}d.measure=h;function p(I,S){}d.encode=p;function b(I,S){return{}}d.decode=b})(B=e.ConversationController_ShowSearch_Params||(e.ConversationController_ShowSearch_Params={}));let Oe;(d=>{d.VERSION_INFO=[{version:0,size:24}],d.CURRENT_VERSION=d.VERSION_INFO[d.VERSION_INFO.length-1];function h(I){return O.bytes(d.CURRENT_VERSION.size).add(O.forString(I.query)).add(O.forString(I.navlinksEvent))}d.measure=h;function p(I,S){I.setString(0,S.query),I.setString(8,S.navlinksEvent)}d.encode=p;function b(I,S){return{query:F(I.getString(0)),navlinksEvent:F(I.getString(8))}}d.decode=b})(Oe=e.ConversationController_PopulateNavlinks_Params||(e.ConversationController_PopulateNavlinks_Params={}));let Ee;(d=>{d.VERSION_INFO=[{version:0,size:16}],d.CURRENT_VERSION=d.VERSION_INFO[d.VERSION_INFO.length-1];function h(I){return O.bytes(d.CURRENT_VERSION.size)}d.measure=h;function p(I,S){I.setEnumValue(de,0,S.request)}d.encode=p;function b(I,S){return{request:F(I.getEnumValue(de,0))}}d.decode=b})(Ee=e.ConversationController_HandleAgentRequest_Params||(e.ConversationController_HandleAgentRequest_Params={}));let fe;(d=>{d.VERSION_INFO=[{version:0,size:32}],d.CURRENT_VERSION=d.VERSION_INFO[d.VERSION_INFO.length-1];function h(I){return O.bytes(d.CURRENT_VERSION.size).add(O.forString(I.name)).add(O.forNumericArray(Uint8Array,I.bytes)).add(O.forString(I.mimeType))}d.measure=h;function p(I,S){I.setString(0,S.name),I.setNumericArray(Uint8Array,8,S.bytes),I.setString(16,S.mimeType)}d.encode=p;function b(I,S){return{name:F(I.getString(0)),bytes:F(I.getNumericArray(Uint8Array,8)),mimeType:F(I.getString(16))}}d.decode=b})(fe=e.ConversationController_AttachUserFile_Params||(e.ConversationController_AttachUserFile_Params={}));class Se{constructor(h){this._endpoint=new q(h.endpointState,!0),this._version=2}static create(){const[h,p]=z.createChannel(e);return[new Se(h),p]}static createToBrowser(){const[h,p]=this.create();return Mojo.bindInterface(e.interfaceName,p.pipe.rawHandle),h}setWindowStyle(h){const p={windowStyle:h};this._endpoint.send(w.encode(0,_.None,c,p))}setModel(h){const p={modelSlug:h};this._endpoint.send(w.encode(1,_.None,R,p))}newConversation(){const h={};this._endpoint.send(w.encode(2,_.None,o,h))}loadConversation(h){const p={remoteConversationId:h};this._endpoint.send(w.encode(3,_.None,t,p))}requestCompletion(h,p,b){const I={prompt:h,systemHints:p,modelSlug:b};this._endpoint.send(w.encode(4,_.None,n,I))}populatePrompt(h,p){const b={userMessage:h,targetedReply:p};this._endpoint.send(w.encode(5,_.None,E,b))}updateContext(h,p,b,I,S){const j={url:h,title:p,base64favicon:b,selection:I,blocked:S};this._endpoint.send(w.encode(6,_.None,u,j))}prepareConversation(h){const p={details:h};this._endpoint.send(w.encode(7,_.None,i,p))}setSuperWidgetOptions(h){const p={options:h};this._endpoint.send(w.encode(8,_.None,s,p))}setAttachments(h){const p={attachments:h};this._endpoint.send(w.encode(9,_.None,r,p))}navigate(h){const p={to:h};this._endpoint.send(w.encode(10,_.None,N,p))}setWhisperContent(h){const p={whisperContent:h};this._endpoint.send(w.encode(11,_.None,f,p))}setTabContext(h){const p={tabs:h};this._endpoint.send(w.encode(12,_.None,V,p))}setPromptOrigin(h){const p={origin:h};this._endpoint.send(w.encode(13,_.None,g,p))}closeNavigationSidebar(){const h={};this._endpoint.send(w.encode(14,_.None,y,h))}setChatTheme(h){const p={theme:h};this._endpoint.send(w.encode(15,_.None,a,p))}showSearch(){const h={};this._endpoint.send(w.encode(16,_.None,B,h))}populateNavlinks(h,p){const b={query:h,navlinksEvent:p};this._endpoint.send(w.encode(17,_.None,Oe,b))}handleAgentRequest(h){const p={request:h};this._endpoint.send(w.encode(18,_.None,Ee,p))}attachUserFile(h,p,b){const I={name:h,bytes:p,mimeType:b};this._endpoint.send(w.encode(19,_.None,fe,I))}_endpoint;_version}e.Proxy=Se;class we extends x{constructor(){super(e)}onDisconnect;bind(h,p){this.addReceiver(p,async(b,I)=>{switch(b.header.ordinal){case 0:{const S=b.decode(c);h.setWindowStyle(S.windowStyle);break}case 1:{const S=b.decode(R);h.setModel(S.modelSlug);break}case 2:{b.decode(o),h.newConversation();break}case 3:{const S=b.decode(t);h.loadConversation(S.remoteConversationId);break}case 4:{const S=b.decode(n);h.requestCompletion(S.prompt,S.systemHints,S.modelSlug);break}case 5:{const S=b.decode(E);h.populatePrompt(S.userMessage,S.targetedReply);break}case 6:{const S=b.decode(u);h.updateContext(S.url,S.title,S.base64favicon,S.selection,S.blocked);break}case 7:{const S=b.decode(i);h.prepareConversation(S.details);break}case 8:{const S=b.decode(s);h.setSuperWidgetOptions(S.options);break}case 9:{const S=b.decode(r);h.setAttachments(S.attachments);break}case 10:{const S=b.decode(N);h.navigate(S.to);break}case 11:{const S=b.decode(f);h.setWhisperContent(S.whisperContent);break}case 12:{const S=b.decode(V);h.setTabContext(S.tabs);break}case 13:{const S=b.decode(g);h.setPromptOrigin(S.origin);break}case 14:{b.decode(y),h.closeNavigationSidebar();break}case 15:{const S=b.decode(a);h.setChatTheme(S.theme);break}case 16:{b.decode(B),h.showSearch();break}case 17:{const S=b.decode(Oe);h.populateNavlinks(S.query,S.navlinksEvent);break}case 18:{const S=b.decode(Ee);h.handleAgentRequest(S.request);break}case 19:{const S=b.decode(fe);h.attachUserFile(S.name,S.bytes,S.mimeType);break}default:b.header.expectsResponse&&I.sendUnimplementedResponse(b.header.requestID,b.header.ordinal)}return Promise.resolve()},()=>{this.onDisconnect&&this.onDisconnect(h)})}createRemote(h){const[p,b]=z.createChannel(e);return this.bind(h,b),p}}e.Dispatcher=we})(ee||(ee={}));class ye{static interfaceName="web.bridge.GenericInterface";static interfaceVersion=0}(e=>{let c;(n=>{n.VERSION_INFO=[{version:0,size:16}],n.CURRENT_VERSION=n.VERSION_INFO[n.VERSION_INFO.length-1];function E(s){return O.bytes(n.CURRENT_VERSION.size).add(O.forString(s.request))}n.measure=E;function u(s,r){s.setString(0,r.request)}n.encode=u;function i(s,r){return{request:F(s.getString(0))}}n.decode=i})(c=e.GenericInterface_AcceptMessage_Params||(e.GenericInterface_AcceptMessage_Params={}));let R;(n=>{n.VERSION_INFO=[{version:0,size:16}],n.CURRENT_VERSION=n.VERSION_INFO[n.VERSION_INFO.length-1];function E(s){return O.bytes(n.CURRENT_VERSION.size).add(O.forString(s.response??null))}n.measure=E;function u(s,r){s.setString(0,r.response??null)}n.encode=u;function i(s,r){const N=s.getString(0);return{...N!==null?{response:N}:{}}}n.decode=i})(R=e.GenericInterface_AcceptMessage_ResponseParams||(e.GenericInterface_AcceptMessage_ResponseParams={}));class o{constructor(E){this._endpoint=new q(E.endpointState,!0),this._version=0}static create(){const[E,u]=z.createChannel(e);return[new o(E),u]}static createToBrowser(){const[E,u]=this.create();return Mojo.bindInterface(e.interfaceName,u.pipe.rawHandle),E}async acceptMessage(E){const u={request:E};return(await this._endpoint.sendAndAwaitResponse(w.encode(0,_.None,c,u))).decode(R).response}_endpoint;_version}e.Proxy=o;class t extends x{constructor(){super(e)}onDisconnect;bind(E,u){this.addReceiver(u,async(i,s)=>{switch(i.header.ordinal){case 0:{const r=i.decode(c),N=E.acceptMessage(r.request),f=s.createResponder(R,0,i.header.requestID),V=await N;f({response:V});break}default:i.header.expectsResponse&&s.sendUnimplementedResponse(i.header.requestID,i.header.ordinal)}return Promise.resolve()},()=>{this.onDisconnect&&this.onDisconnect(E)})}createRemote(E){const[u,i]=z.createChannel(e);return this.bind(E,i),u}}e.Dispatcher=t})(ye||(ye={}));class he{static interfaceName="web.bridge.LinkHandler";static interfaceVersion=0}(e=>{let c;(t=>{t.VERSION_INFO=[{version:0,size:24}],t.CURRENT_VERSION=t.VERSION_INFO[t.VERSION_INFO.length-1];function n(i){return O.bytes(t.CURRENT_VERSION.size).add(O.forString(i.url)).add(O.forString(i.target))}t.measure=n;function E(i,s){i.setString(0,s.url),i.setString(8,s.target)}t.encode=E;function u(i,s){return{url:F(i.getString(0)),target:F(i.getString(8))}}t.decode=u})(c=e.LinkHandler_HandleLink_Params||(e.LinkHandler_HandleLink_Params={}));class R{constructor(n){this._endpoint=new q(n.endpointState,!0),this._version=0}static create(){const[n,E]=z.createChannel(e);return[new R(n),E]}static createToBrowser(){const[n,E]=this.create();return Mojo.bindInterface(e.interfaceName,E.pipe.rawHandle),n}handleLink(n,E){const u={url:n,target:E};this._endpoint.send(w.encode(0,_.None,c,u))}_endpoint;_version}e.Proxy=R;class o extends x{constructor(){super(e)}onDisconnect;bind(n,E){this.addReceiver(E,async(u,i)=>{switch(u.header.ordinal){case 0:{const s=u.decode(c);n.handleLink(s.url,s.target);break}default:u.header.expectsResponse&&i.sendUnimplementedResponse(u.header.requestID,u.header.ordinal)}return Promise.resolve()},()=>{this.onDisconnect&&this.onDisconnect(n)})}createRemote(n){const[E,u]=z.createChannel(e);return this.bind(n,u),E}}e.Dispatcher=o})(he||(he={}));var A;(e=>{e.VERSION_INFO=[{version:0,size:24}],e.CURRENT_VERSION=e.VERSION_INFO[e.VERSION_INFO.length-1];function c(t){return O.bytes(e.CURRENT_VERSION.size).add(O.forString(t.author)).add(O.forString(t.message))}e.measure=c;function R(t,n){t.setString(0,n.author),t.setString(8,n.message)}e.encode=R;function o(t,n){return{author:F(t.getString(0)),message:F(t.getString(8))}}e.decode=o})(A||(A={}));class ue{static interfaceName="web.bridge.LocalToolHandler";static interfaceVersion=0}(e=>{let c;(u=>{u.VERSION_INFO=[{version:0,size:24}],u.CURRENT_VERSION=u.VERSION_INFO[u.VERSION_INFO.length-1];function i(N){return O.bytes(u.CURRENT_VERSION.size).add(O.forString(N.toolname)).add(O.forString(N.args))}u.measure=i;function s(N,f){N.setString(0,f.toolname),N.setString(8,f.args)}u.encode=s;function r(N,f){return{toolname:F(N.getString(0)),args:F(N.getString(8))}}u.decode=r})(c=e.LocalToolHandler_CallLocalTool_Params||(e.LocalToolHandler_CallLocalTool_Params={}));let R;(u=>{u.VERSION_INFO=[{version:0,size:16}],u.CURRENT_VERSION=u.VERSION_INFO[u.VERSION_INFO.length-1];function i(N){return O.bytes(u.CURRENT_VERSION.size).add(O.forObjectArray(A,N.response))}u.measure=i;function s(N,f){N.setObjectArray(A,0,f.response)}u.encode=s;function r(N,f){return{response:F(k(N.getObjectArray(A,0)))}}u.decode=r})(R=e.LocalToolHandler_CallLocalTool_ResponseParams||(e.LocalToolHandler_CallLocalTool_ResponseParams={}));let o;(u=>{u.VERSION_INFO=[{version:0,size:8}],u.CURRENT_VERSION=u.VERSION_INFO[u.VERSION_INFO.length-1];function i(N){return O.bytes(u.CURRENT_VERSION.size)}u.measure=i;function s(N,f){}u.encode=s;function r(N,f){return{}}u.decode=r})(o=e.LocalToolHandler_GetToolNames_Params||(e.LocalToolHandler_GetToolNames_Params={}));let t;(u=>{u.VERSION_INFO=[{version:0,size:16}],u.CURRENT_VERSION=u.VERSION_INFO[u.VERSION_INFO.length-1];function i(N){return O.bytes(u.CURRENT_VERSION.size).add(O.forStringArray(N.toolnames))}u.measure=i;function s(N,f){N.setStringArray(0,f.toolnames)}u.encode=s;function r(N,f){return{toolnames:F(k(N.getStringArray(0)))}}u.decode=r})(t=e.LocalToolHandler_GetToolNames_ResponseParams||(e.LocalToolHandler_GetToolNames_ResponseParams={}));class n{constructor(i){this._endpoint=new q(i.endpointState,!0),this._version=0}static create(){const[i,s]=z.createChannel(e);return[new n(i),s]}static createToBrowser(){const[i,s]=this.create();return Mojo.bindInterface(e.interfaceName,s.pipe.rawHandle),i}async callLocalTool(i,s){const r={toolname:i,args:s};return(await this._endpoint.sendAndAwaitResponse(w.encode(0,_.None,c,r))).decode(R).response}async getToolNames(){const i={};return(await this._endpoint.sendAndAwaitResponse(w.encode(1,_.None,o,i))).decode(t).toolnames}_endpoint;_version}e.Proxy=n;class E extends x{constructor(){super(e)}onDisconnect;bind(i,s){this.addReceiver(s,async(r,N)=>{switch(r.header.ordinal){case 0:{const f=r.decode(c),V=i.callLocalTool(f.toolname,f.args),g=N.createResponder(R,0,r.header.requestID),y=await V;g({response:y});break}case 1:{r.decode(o);const f=i.getToolNames(),V=N.createResponder(t,1,r.header.requestID),g=await f;V({toolnames:g});break}default:r.header.expectsResponse&&N.sendUnimplementedResponse(r.header.requestID,r.header.ordinal)}return Promise.resolve()},()=>{this.onDisconnect&&this.onDisconnect(i)})}createRemote(i){const[s,r]=z.createChannel(e);return this.bind(i,r),s}}e.Dispatcher=E})(ue||(ue={}));var D;(e=>{e.VERSION_INFO=[{version:0,size:24}],e.CURRENT_VERSION=e.VERSION_INFO[e.VERSION_INFO.length-1];function c(t){return O.bytes(e.CURRENT_VERSION.size).add(O.forString(t.clientId)).add(O.forString(t.serverId??null))}e.measure=c;function R(t,n){t.setString(0,n.clientId),t.setString(8,n.serverId??null)}e.encode=R;function o(t,n){const E=t.getString(8);return{clientId:F(t.getString(0)),...E!==null?{serverId:E}:{}}}e.decode=o})(D||(D={}));var M;(e=>{e.VERSION_INFO=[{version:0,size:32}],e.CURRENT_VERSION=e.VERSION_INFO[e.VERSION_INFO.length-1];function c(t){return O.bytes(e.CURRENT_VERSION.size).add(O.forString(t.title??null))}e.measure=c;function R(t,n){let E=0;t.setString(0,n.title??null),n.updateTimestampMsSince1970!==null&&n.updateTimestampMsSince1970!==void 0&&(E|=1,t.setF64(16,n.updateTimestampMsSince1970)),n.status!==null&&n.status!==void 0&&(E|=2,t.setEnumValue(oe,12,n.status)),t.setU8(8,E)}e.encode=R;function o(t,n){const E=t.getString(0),u=t.getU8(8),i=(u&1)!=0,s=(u&2)!=0;return{...E!==null?{title:E}:{},...i?{updateTimestampMsSince1970:F(t.getF64(16))}:{},...s?{status:F(t.getEnumValue(oe,12))}:{}}}e.decode=o})(M||(M={}));var oe;(e=>{function c(o){if(o==="none")return 0;if(o==="inProgress")return 1;if(o==="done")return 2;throw new m}e.encode=c;function R(o){switch(o){case 0:return"none";case 1:return"inProgress";case 2:return"done";default:return"none"}}e.decode=R})(oe||(oe={}));class Ve{static interfaceName="web.bridge.NavigationSidebarController";static interfaceVersion=0}(e=>{let c;(r=>{r.VERSION_INFO=[{version:0,size:16}],r.CURRENT_VERSION=r.VERSION_INFO[r.VERSION_INFO.length-1];function N(g){return O.bytes(r.CURRENT_VERSION.size)}r.measure=N;function f(g,y){let a=0;y.visible&&(a|=1),g.setU8(0,a)}r.encode=f;function V(g,y){return{visible:(g.getU8(0)&1)!=0}}r.decode=V})(c=e.NavigationSidebarController_SetSidebarVisibility_Params||(e.NavigationSidebarController_SetSidebarVisibility_Params={}));let R;(r=>{r.VERSION_INFO=[{version:0,size:8}],r.CURRENT_VERSION=r.VERSION_INFO[r.VERSION_INFO.length-1];function N(g){return O.bytes(r.CURRENT_VERSION.size)}r.measure=N;function f(g,y){}r.encode=f;function V(g,y){return{}}r.decode=V})(R=e.NavigationSidebarController_ToggleSidebarVisibility_Params||(e.NavigationSidebarController_ToggleSidebarVisibility_Params={}));let o;(r=>{r.VERSION_INFO=[{version:0,size:8}],r.CURRENT_VERSION=r.VERSION_INFO[r.VERSION_INFO.length-1];function N(g){return O.bytes(r.CURRENT_VERSION.size)}r.measure=N;function f(g,y){}r.encode=f;function V(g,y){return{}}r.decode=V})(o=e.NavigationSidebarController_NewConversation_Params||(e.NavigationSidebarController_NewConversation_Params={}));let t;(r=>{r.VERSION_INFO=[{version:0,size:24}],r.CURRENT_VERSION=r.VERSION_INFO[r.VERSION_INFO.length-1];function N(g){return O.bytes(r.CURRENT_VERSION.size).add(O.forObject(D,g.id)).add(O.forObject(M,g.data))}r.measure=N;function f(g,y){g.setObjectIndirect(D,0,y.id),g.setObjectIndirect(M,8,y.data)}r.encode=f;function V(g,y){return{id:F(g.getObjectIndirect(D,0)),data:F(g.getObjectIndirect(M,8))}}r.decode=V})(t=e.NavigationSidebarController_AddConversationHistoryItem_Params||(e.NavigationSidebarController_AddConversationHistoryItem_Params={}));let n;(r=>{r.VERSION_INFO=[{version:0,size:24}],r.CURRENT_VERSION=r.VERSION_INFO[r.VERSION_INFO.length-1];function N(g){return O.bytes(r.CURRENT_VERSION.size).add(O.forObject(D,g.id)).add(O.forObject(M,g.data))}r.measure=N;function f(g,y){g.setObjectIndirect(D,0,y.id),g.setObjectIndirect(M,8,y.data)}r.encode=f;function V(g,y){return{id:F(g.getObjectIndirect(D,0)),data:F(g.getObjectIndirect(M,8))}}r.decode=V})(n=e.NavigationSidebarController_UpdateConversationHistoryItem_Params||(e.NavigationSidebarController_UpdateConversationHistoryItem_Params={}));let E;(r=>{r.VERSION_INFO=[{version:0,size:8}],r.CURRENT_VERSION=r.VERSION_INFO[r.VERSION_INFO.length-1];function N(g){return O.bytes(r.CURRENT_VERSION.size)}r.measure=N;function f(g,y){}r.encode=f;function V(g,y){return{}}r.decode=V})(E=e.NavigationSidebarController_GetSidebarVisibility_Params||(e.NavigationSidebarController_GetSidebarVisibility_Params={}));let u;(r=>{r.VERSION_INFO=[{version:0,size:16}],r.CURRENT_VERSION=r.VERSION_INFO[r.VERSION_INFO.length-1];function N(g){return O.bytes(r.CURRENT_VERSION.size)}r.measure=N;function f(g,y){let a=0;y.visible&&(a|=1),g.setU8(0,a)}r.encode=f;function V(g,y){return{visible:(g.getU8(0)&1)!=0}}r.decode=V})(u=e.NavigationSidebarController_GetSidebarVisibility_ResponseParams||(e.NavigationSidebarController_GetSidebarVisibility_ResponseParams={}));class i{constructor(N){this._endpoint=new q(N.endpointState,!0),this._version=0}static create(){const[N,f]=z.createChannel(e);return[new i(N),f]}static createToBrowser(){const[N,f]=this.create();return Mojo.bindInterface(e.interfaceName,f.pipe.rawHandle),N}setSidebarVisibility(N){const f={visible:N};this._endpoint.send(w.encode(0,_.None,c,f))}toggleSidebarVisibility(){const N={};this._endpoint.send(w.encode(1,_.None,R,N))}newConversation(){const N={};this._endpoint.send(w.encode(2,_.None,o,N))}addConversationHistoryItem(N,f){const V={id:N,data:f};this._endpoint.send(w.encode(3,_.None,t,V))}updateConversationHistoryItem(N,f){const V={id:N,data:f};this._endpoint.send(w.encode(4,_.None,n,V))}async getSidebarVisibility(){const N={};return(await this._endpoint.sendAndAwaitResponse(w.encode(5,_.None,E,N))).decode(u).visible}_endpoint;_version}e.Proxy=i;class s extends x{constructor(){super(e)}onDisconnect;bind(N,f){this.addReceiver(f,async(V,g)=>{switch(V.header.ordinal){case 0:{const y=V.decode(c);N.setSidebarVisibility(y.visible);break}case 1:{V.decode(R),N.toggleSidebarVisibility();break}case 2:{V.decode(o),N.newConversation();break}case 3:{const y=V.decode(t);N.addConversationHistoryItem(y.id,y.data);break}case 4:{const y=V.decode(n);N.updateConversationHistoryItem(y.id,y.data);break}case 5:{V.decode(E);const y=N.getSidebarVisibility(),a=g.createResponder(u,5,V.header.requestID),B=await y;a({visible:B});break}default:V.header.expectsResponse&&g.sendUnimplementedResponse(V.header.requestID,V.header.ordinal)}return Promise.resolve()},()=>{this.onDisconnect&&this.onDisconnect(N)})}createRemote(N){const[f,V]=z.createChannel(e);return this.bind(N,V),f}}e.Dispatcher=s})(Ve||(Ve={}));var Ne;(e=>{function c(o){if(o==="general")return 0;if(o==="personalization")return 1;if(o==="searchEngines")return 2;if(o==="dataControls")return 3;if(o==="modelTraining")return 4;if(o==="autofill")return 5;throw new m}e.encode=c;function R(o){switch(o){case 0:return"general";case 1:return"personalization";case 2:return"searchEngines";case 3:return"dataControls";case 4:return"modelTraining";case 5:return"autofill";default:return"general"}}e.decode=R})(Ne||(Ne={}));class ge{static interfaceName="web.bridge.OpenSettingsController";static interfaceVersion=0}(e=>{let c;(t=>{t.VERSION_INFO=[{version:0,size:16}],t.CURRENT_VERSION=t.VERSION_INFO[t.VERSION_INFO.length-1];function n(i){return O.bytes(t.CURRENT_VERSION.size)}t.measure=n;function E(i,s){let r=0;s.tab!==null&&s.tab!==void 0&&(r|=1,i.setEnumValue(Ne,4,s.tab)),i.setU8(0,r)}t.encode=E;function u(i,s){return{...(i.getU8(0)&1)!=0?{tab:F(i.getEnumValue(Ne,4))}:{}}}t.decode=u})(c=e.OpenSettingsController_OpenSettings_Params||(e.OpenSettingsController_OpenSettings_Params={}));class R{constructor(n){this._endpoint=new q(n.endpointState,!0),this._version=0}static create(){const[n,E]=z.createChannel(e);return[new R(n),E]}static createToBrowser(){const[n,E]=this.create();return Mojo.bindInterface(e.interfaceName,E.pipe.rawHandle),n}openSettings(n){const E={tab:n};this._endpoint.send(w.encode(0,_.None,c,E))}_endpoint;_version}e.Proxy=R;class o extends x{constructor(){super(e)}onDisconnect;bind(n,E){this.addReceiver(E,async(u,i)=>{switch(u.header.ordinal){case 0:{const s=u.decode(c);n.openSettings(s.tab);break}default:u.header.expectsResponse&&i.sendUnimplementedResponse(u.header.requestID,u.header.ordinal)}return Promise.resolve()},()=>{this.onDisconnect&&this.onDisconnect(n)})}createRemote(n){const[E,u]=z.createChannel(e);return this.bind(n,u),E}}e.Dispatcher=o})(ge||(ge={}));var Re;(e=>{function c(o){if(o==="messageSent")return 0;throw new m}e.encode=c;function R(o){switch(o){case 0:return"messageSent";default:return"messageSent"}}e.decode=R})(Re||(Re={}));class pe{static interfaceName="web.bridge.ProductEventHandler";static interfaceVersion=0}(e=>{let c;(t=>{t.VERSION_INFO=[{version:0,size:16}],t.CURRENT_VERSION=t.VERSION_INFO[t.VERSION_INFO.length-1];function n(i){return O.bytes(t.CURRENT_VERSION.size)}t.measure=n;function E(i,s){i.setEnumValue(Re,0,s.eventName)}t.encode=E;function u(i,s){return{eventName:F(i.getEnumValue(Re,0))}}t.decode=u})(c=e.ProductEventHandler_TriggerProductEvent_Params||(e.ProductEventHandler_TriggerProductEvent_Params={}));class R{constructor(n){this._endpoint=new q(n.endpointState,!0),this._version=0}static create(){const[n,E]=z.createChannel(e);return[new R(n),E]}static createToBrowser(){const[n,E]=this.create();return Mojo.bindInterface(e.interfaceName,E.pipe.rawHandle),n}triggerProductEvent(n){const E={eventName:n};this._endpoint.send(w.encode(0,_.None,c,E))}_endpoint;_version}e.Proxy=R;class o extends x{constructor(){super(e)}onDisconnect;bind(n,E){this.addReceiver(E,async(u,i)=>{switch(u.header.ordinal){case 0:{const s=u.decode(c);n.triggerProductEvent(s.eventName);break}default:u.header.expectsResponse&&i.sendUnimplementedResponse(u.header.requestID,u.header.ordinal)}return Promise.resolve()},()=>{this.onDisconnect&&this.onDisconnect(n)})}createRemote(n){const[E,u]=z.createChannel(e);return this.bind(n,u),E}}e.Dispatcher=o})(pe||(pe={}));class v{static interfaceName="web.bridge.DesktopSidebarController";static interfaceVersion=0}(e=>{let c;(i=>{i.VERSION_INFO=[{version:0,size:8}],i.CURRENT_VERSION=i.VERSION_INFO[i.VERSION_INFO.length-1];function s(f){return O.bytes(i.CURRENT_VERSION.size)}i.measure=s;function r(f,V){}i.encode=r;function N(f,V){return{}}i.decode=N})(c=e.DesktopSidebarController_CloseSidebar_Params||(e.DesktopSidebarController_CloseSidebar_Params={}));let R;(i=>{i.VERSION_INFO=[{version:0,size:8}],i.CURRENT_VERSION=i.VERSION_INFO[i.VERSION_INFO.length-1];function s(f){return O.bytes(i.CURRENT_VERSION.size)}i.measure=s;function r(f,V){}i.encode=r;function N(f,V){return{}}i.decode=N})(R=e.DesktopSidebarController_CanHideHeader_Params||(e.DesktopSidebarController_CanHideHeader_Params={}));let o;(i=>{i.VERSION_INFO=[{version:0,size:16}],i.CURRENT_VERSION=i.VERSION_INFO[i.VERSION_INFO.length-1];function s(f){return O.bytes(i.CURRENT_VERSION.size)}i.measure=s;function r(f,V){let g=0;V.canHideHeader&&(g|=1),f.setU8(0,g)}i.encode=r;function N(f,V){return{canHideHeader:(f.getU8(0)&1)!=0}}i.decode=N})(o=e.DesktopSidebarController_CanHideHeader_ResponseParams||(e.DesktopSidebarController_CanHideHeader_ResponseParams={}));let t;(i=>{i.VERSION_INFO=[{version:0,size:8}],i.CURRENT_VERSION=i.VERSION_INFO[i.VERSION_INFO.length-1];function s(f){return O.bytes(i.CURRENT_VERSION.size)}i.measure=s;function r(f,V){}i.encode=r;function N(f,V){return{}}i.decode=N})(t=e.DesktopSidebarController_BecomeMainPage_Params||(e.DesktopSidebarController_BecomeMainPage_Params={}));let n;(i=>{i.VERSION_INFO=[{version:0,size:8}],i.CURRENT_VERSION=i.VERSION_INFO[i.VERSION_INFO.length-1];function s(f){return O.bytes(i.CURRENT_VERSION.size)}i.measure=s;function r(f,V){}i.encode=r;function N(f,V){return{}}i.decode=N})(n=e.DesktopSidebarController_OpenInNewTab_Params||(e.DesktopSidebarController_OpenInNewTab_Params={}));class E{constructor(s){this._endpoint=new q(s.endpointState,!0),this._version=0}static create(){const[s,r]=z.createChannel(e);return[new E(s),r]}static createToBrowser(){const[s,r]=this.create();return Mojo.bindInterface(e.interfaceName,r.pipe.rawHandle),s}closeSidebar(){const s={};this._endpoint.send(w.encode(0,_.None,c,s))}async canHideHeader(){const s={};return(await this._endpoint.sendAndAwaitResponse(w.encode(1,_.None,R,s))).decode(o).canHideHeader}becomeMainPage(){const s={};this._endpoint.send(w.encode(2,_.None,t,s))}openInNewTab(){const s={};this._endpoint.send(w.encode(3,_.None,n,s))}_endpoint;_version}e.Proxy=E;class u extends x{constructor(){super(e)}onDisconnect;bind(s,r){this.addReceiver(r,async(N,f)=>{switch(N.header.ordinal){case 0:{N.decode(c),s.closeSidebar();break}case 1:{N.decode(R);const V=s.canHideHeader(),g=f.createResponder(o,1,N.header.requestID),y=await V;g({canHideHeader:y});break}case 2:{N.decode(t),s.becomeMainPage();break}case 3:{N.decode(n),s.openInNewTab();break}default:N.header.expectsResponse&&f.sendUnimplementedResponse(N.header.requestID,N.header.ordinal)}return Promise.resolve()},()=>{this.onDisconnect&&this.onDisconnect(s)})}createRemote(s){const[r,N]=z.createChannel(e);return this.bind(s,N),r}}e.Dispatcher=u})(v||(v={}));var L;(e=>{e.VERSION_INFO=[{version:0,size:8}],e.CURRENT_VERSION=e.VERSION_INFO[e.VERSION_INFO.length-1];function c(t){return O.bytes(e.CURRENT_VERSION.size)}e.measure=c;function R(t,n){}e.encode=R;function o(t,n){return{}}e.decode=o})(L||(L={}));var G;(e=>{e.VERSION_INFO=[{version:0,size:48}],e.CURRENT_VERSION=e.VERSION_INFO[e.VERSION_INFO.length-1];function c(t){return O.bytes(e.CURRENT_VERSION.size).add(O.forString(t.id)).add(O.forString(t.fileid)).add(O.forString(t.name)).add(O.forString(t.mimetype))}e.measure=c;function R(t,n){t.setString(0,n.id),t.setString(8,n.fileid),t.setString(16,n.name),t.setU32(24,n.size),t.setString(32,n.mimetype)}e.encode=R;function o(t,n){return{id:F(t.getString(0)),fileid:F(t.getString(8)),name:F(t.getString(16)),size:F(t.getU32(24)),mimetype:F(t.getString(32))}}e.decode=o})(G||(G={}));var W;(e=>{e.VERSION_INFO=[{version:0,size:32}],e.CURRENT_VERSION=e.VERSION_INFO[e.VERSION_INFO.length-1];function c(t){return O.bytes(e.CURRENT_VERSION.size).add(O.forString(t.assetPointer))}e.measure=c;function R(t,n){t.setString(0,n.assetPointer),t.setU32(8,n.sizeBytes),t.setU32(12,n.width),t.setU32(16,n.height)}e.encode=R;function o(t,n){return{assetPointer:F(t.getString(0)),sizeBytes:F(t.getU32(8)),width:F(t.getU32(12)),height:F(t.getU32(16))}}e.decode=o})(W||(W={}));var H;(e=>{e.VERSION_INFO=[{version:0,size:32}],e.CURRENT_VERSION=e.VERSION_INFO[e.VERSION_INFO.length-1];function c(t){return O.bytes(e.CURRENT_VERSION.size).add(O.forString(t.content??null)).add(O.forString(t.url??null)).add(O.forString(t.title??null))}e.measure=c;function R(t,n){t.setString(0,n.content??null),t.setString(8,n.url??null),t.setString(16,n.title??null)}e.encode=R;function o(t,n){const E=t.getString(0),u=t.getString(8),i=t.getString(16);return{...E!==null?{content:E}:{},...u!==null?{url:u}:{},...i!==null?{title:i}:{}}}e.decode=o})(H||(H={}));var $;(e=>{e.VERSION_INFO=[{version:0,size:32},{version:1,size:48}],e.CURRENT_VERSION=e.VERSION_INFO[e.VERSION_INFO.length-1];function c(t){return O.bytes(e.CURRENT_VERSION.size).add(O.forString(t.content??null)).add(O.forObjectArray(G,t.files??null)).add(O.forObjectArray(W,t.imageAssetPointers??null)).add(O.forObjectArray(H,t.embeddedDocumentContexts??null)).add(O.forString(t.customInstructions??null))}e.measure=c;function R(t,n){t.setString(0,n.content??null),t.setObjectArray(G,8,n.files??null),t.setObjectArray(W,16,n.imageAssetPointers??null),t.setObjectArray(H,24,n.embeddedDocumentContexts??null),t.setString(32,n.customInstructions??null)}e.encode=R;function o(t,n){const E=t.getString(0),u=k(t.getObjectArray(G,8)),i=k(t.getObjectArray(W,16)),s=n>=1?k(t.getObjectArray(H,24)):null,r=n>=1?t.getString(32):null;return{...E!==null?{content:E}:{},...u!==null?{files:u}:{},...i!==null?{imageAssetPointers:i}:{},...s!==null?{embeddedDocumentContexts:s}:{},...r!==null?{customInstructions:r}:{}}}e.decode=o})($||($={}));var P;(e=>{e.VERSION_INFO=[{version:0,size:32}],e.CURRENT_VERSION=e.VERSION_INFO[e.VERSION_INFO.length-1];function c(t){return O.bytes(e.CURRENT_VERSION.size).add(O.forString(t.base64image)).add(O.forString(t.mimetype)).add(O.forString(t.filename))}e.measure=c;function R(t,n){t.setString(0,n.base64image),t.setString(8,n.mimetype),t.setString(16,n.filename)}e.encode=R;function o(t,n){return{base64image:F(t.getString(0)),mimetype:F(t.getString(8)),filename:F(t.getString(16))}}e.decode=o})(P||(P={}));class Ie{static interfaceName="web.bridge.WhisperContentProvider";static interfaceVersion=0}(e=>{let c;(u=>{u.VERSION_INFO=[{version:0,size:16}],u.CURRENT_VERSION=u.VERSION_INFO[u.VERSION_INFO.length-1];function i(N){return O.bytes(u.CURRENT_VERSION.size).add(O.forObject(L,N.options??null))}u.measure=i;function s(N,f){N.setObjectIndirect(L,0,f.options??null)}u.encode=s;function r(N,f){const V=N.getObjectIndirect(L,0);return{...V!==null?{options:V}:{}}}u.decode=r})(c=e.WhisperContentProvider_GetWhisperContent_Params||(e.WhisperContentProvider_GetWhisperContent_Params={}));let R;(u=>{u.VERSION_INFO=[{version:0,size:16}],u.CURRENT_VERSION=u.VERSION_INFO[u.VERSION_INFO.length-1];function i(N){return O.bytes(u.CURRENT_VERSION.size).add(O.forObject($,N.content??null))}u.measure=i;function s(N,f){N.setObjectIndirect($,0,f.content??null)}u.encode=s;function r(N,f){const V=N.getObjectIndirect($,0);return{...V!==null?{content:V}:{}}}u.decode=r})(R=e.WhisperContentProvider_GetWhisperContent_ResponseParams||(e.WhisperContentProvider_GetWhisperContent_ResponseParams={}));let o;(u=>{u.VERSION_INFO=[{version:0,size:8}],u.CURRENT_VERSION=u.VERSION_INFO[u.VERSION_INFO.length-1];function i(N){return O.bytes(u.CURRENT_VERSION.size)}u.measure=i;function s(N,f){}u.encode=s;function r(N,f){return{}}u.decode=r})(o=e.WhisperContentProvider_GetTabScreenshot_Params||(e.WhisperContentProvider_GetTabScreenshot_Params={}));let t;(u=>{u.VERSION_INFO=[{version:0,size:16}],u.CURRENT_VERSION=u.VERSION_INFO[u.VERSION_INFO.length-1];function i(N){return O.bytes(u.CURRENT_VERSION.size).add(O.forObject(P,N.screenshot??null))}u.measure=i;function s(N,f){N.setObjectIndirect(P,0,f.screenshot??null)}u.encode=s;function r(N,f){const V=N.getObjectIndirect(P,0);return{...V!==null?{screenshot:V}:{}}}u.decode=r})(t=e.WhisperContentProvider_GetTabScreenshot_ResponseParams||(e.WhisperContentProvider_GetTabScreenshot_ResponseParams={}));class n{constructor(i){this._endpoint=new q(i.endpointState,!0),this._version=0}static create(){const[i,s]=z.createChannel(e);return[new n(i),s]}static createToBrowser(){const[i,s]=this.create();return Mojo.bindInterface(e.interfaceName,s.pipe.rawHandle),i}async getWhisperContent(i){const s={options:i};return(await this._endpoint.sendAndAwaitResponse(w.encode(0,_.None,c,s))).decode(R).content}async getTabScreenshot(){const i={};return(await this._endpoint.sendAndAwaitResponse(w.encode(1,_.None,o,i))).decode(t).screenshot}_endpoint;_version}e.Proxy=n;class E extends x{constructor(){super(e)}onDisconnect;bind(i,s){this.addReceiver(s,async(r,N)=>{switch(r.header.ordinal){case 0:{const f=r.decode(c),V=i.getWhisperContent(f.options),g=N.createResponder(R,0,r.header.requestID),y=await V;g({content:y});break}case 1:{r.decode(o);const f=i.getTabScreenshot(),V=N.createResponder(t,1,r.header.requestID),g=await f;V({screenshot:g});break}default:r.header.expectsResponse&&N.sendUnimplementedResponse(r.header.requestID,r.header.ordinal)}return Promise.resolve()},()=>{this.onDisconnect&&this.onDisconnect(i)})}createRemote(i){const[s,r]=z.createChannel(e);return this.bind(i,r),s}}e.Dispatcher=E})(Ie||(Ie={}));class ke{dispatcher;constructor(c){this.dispatcher=new C.Dispatcher,this.dispatcher.bind(this,c)}refreshSessionContext(c,R){U.authSessionContext={authToken:c,behavior:R},U.wantsAuthSessionContext$.set(!0)}}function De(e){return e==="none"||e==="sent"||e==="success"||e==="failure"}class Me{prepareState;lastPrepareTimestamp;conduitToken;constructor(c,R,o){this.prepareState=De(c)?c:"none",this.lastPrepareTimestamp=R-performance.timeOrigin,this.conduitToken=o}}class $e{dispatcher;constructor(c){this.dispatcher=new ee.Dispatcher,this.dispatcher.bind(this,c)}closeNavigationSidebar(){Ue.setSidebarOpen(!1)}setChatTheme(c){const R=c==="default_"?"default":c;U.chatTheme=R,U.wantsSetChatTheme$.set(!0)}showSearch(){throw new Error("Method not implemented.")}setWindowStyle(c){U.windowStyle$.set(c)}setModel(c){U.wantsModelSlug$.set(c)}newConversation(){U.wantsNewConversation$.set(!0),U.selectedConversationId$.set(void 0)}loadConversation(c){U.wantsNewConversation$.set(!1),U.selectedConversationId$.set(c)}requestCompletion(c,R,o){U.requestCompletion={prompt:c,systemHints:R,modelSlug:o},U.wantsRequestCompletion$.set(!0)}populatePrompt(c,R){U.populatePrompt={userMessage:c??null,targetedReply:R??null},U.wantsPopulatePrompt$.set(!0)}updateContext(c,R,o,t,n){U.context$.set({id:c,url:c,title:R,base64favicon:o,selection:t,blocked:n})}prepareConversation(c){U.prepareConversationDetails=new Me(c.prepareState,c.lastPrepareTimestampMsSince1970,c.conduitToken??void 0)}setSuperWidgetOptions(c){Te.set(c.selectedTab)}setAttachments(c){U.attachments=c.map(R=>{const{id:o,name:t,size:n,mimeType:E,width:u,height:i,fileTokenSize:s}=R;return{...o&&{id:o},...t&&{name:t},...n&&{size:typeof n=="bigint"?Number(n):n},...E&&{mime_type:E},...u&&{width:u},...i&&{height:i},...s&&{file_token_size:s}}})}attachUserFile(c,R,o){U.attachUserFileRequest={name:c,bytes:R,mimeType:o},U.wantsAttachUserFile$.set(!0)}setWhisperContent(c){U.whisperContent=c}setTabContext(c){U.tabContext=c}setPromptOrigin(c){U.promptOrigin=c}navigate(c){ze(c)}populateNavlinks(c,R){const o=JSON.parse(R);qe.getState().updateFromEvent(c,o)}handleAgentRequest(c){U.agentRequest=c,U.wantsHandleAgentRequest$.set(!0)}}const Be=6e4;class Je{host;logger;lastMissingAuthTime=0;constructor(c,R){this.host=c,this.logger=R}async getAccountID(){return await this.host.getAccountID()}onMissingSessionAuth(){const c=Date.now();if(c-this.lastMissingAuthTime>Be){this.lastMissingAuthTime=c;const[R,o]=ne.Proxy.create();this.bindReceiver(o),this.logger.notice("onMissingSessionAuth.invoked"),R.handleMissingSessionAuth()}}recordAvailableSessionAuth(){const[c,R]=ne.Proxy.create();this.bindReceiver(R),this.logger.notice("recordAvailableSessionAuth.invoked"),c.recordAvailableSessionAuth()}tryOpenAgentViewer(c){const[R,o]=J.Proxy.create();return this.bindReceiver(o),R.tryOpenAgentViewer(c)}userSentMessageInAgentConversation(c){const[R,o]=J.Proxy.create();this.bindReceiver(o),R.userSentMessageInAgentConversation(c)}openAgentTabs(c,R){const[o,t]=J.Proxy.create();this.bindReceiver(t),o.openAgentTabs(c,R)}getClientID(){const[c,R]=J.Proxy.create();return this.bindReceiver(R),c.getClientID()}becomeMainPage(){const[c,R]=v.Proxy.create();this.bindReceiver(R),c.becomeMainPage()}openInNewTab(){const[c,R]=v.Proxy.create();this.bindReceiver(R),c.openInNewTab()}closeSideChat(){const[c,R]=v.Proxy.create();this.bindReceiver(R),c.closeSidebar()}async getWhisperContent(){const[c,R]=Ie.Proxy.create();return this.bindReceiver(R),await c.getWhisperContent({})}async getTabScreenshot(){const[c,R]=Ie.Proxy.create();return this.bindReceiver(R),await c.getTabScreenshot()}receivedFirstToken(){this.host.receivedFirstToken("")}async callLocalTool(c,R){const[o,t]=ue.Proxy.create();return this.bindReceiver(t),await o.callLocalTool(c,R)}bindReceiver(c){this.host.bindReceiver(c.interfaceType.interfaceName,c.pipe)}async getToolNames(){const[c,R]=ue.Proxy.create();return this.bindReceiver(R),await c.getToolNames()}openSettings(c){const[R,o]=ge.Proxy.create();this.bindReceiver(o),R.openSettings(c)}}class Ze{proxy;constructor(c){this.proxy=c}handleLink(c,R){this.proxy.handleLink(c,R)}}class Ke{proxy;constructor(c){this.proxy=c}triggerProductEvent(c){this.proxy.triggerProductEvent(c)}}class Qe{dispatcher;host;logger;conversationControllers=[];authStateController=[];navigationSidebarController;constructor(){this.logger=ae.createLogger("web-bridge-host","info","http"),this.dispatcher=new xe.Dispatcher;const c=je.Proxy.createToBrowser();this.host=new Je(c,this.logger),c.setFrontend(this.dispatcher.createRemote(this));const[R,o]=Ve.Proxy.create();this.host.bindReceiver(o),this.navigationSidebarController=new me(R)}get linkHandler(){const[c,R]=he.Proxy.create();return this.host.bindReceiver(R),new Ze(c)}get productEventHandler(){const[c,R]=pe.Proxy.create();return this.host.bindReceiver(R),new Ke(c)}logConsoleMessage(c){this.logger.info(c)}sendMessage(c,R){return Promise.resolve(null)}bindReceiver(c,R){c===ee.interfaceName?this.conversationControllers.push(new $e(new Fe(ee,R))):c===C.interfaceName&&this.authStateController.push(new ke(new Fe(C,R)))}}let T;async function Ae(){T=new Qe;const e=await T.host.getAccountID();T.logger.info(`Account ID: ${e}`)}function ve(){return T?.host}function Le(){return T?.linkHandler}function Ge(){return T?.productEventHandler}async function We(){return T?(T.logger.debug("Getting whisper content"),await T.host.getWhisperContent()):null}async function He(){return T?await T.host.getTabScreenshot():null}function Pe(){if(!T)return null;T.host.closeSideChat()}export{Pe as closeSideChat,ve as getHost,Le as getLinkHandler,Ge as getProductEventHandler,We as getSidebarWhisperContent,He as getTabScreenshot,Ae as initHostConnection};
//# sourceMappingURL=iayy5u2a26jybmdr.js.map
