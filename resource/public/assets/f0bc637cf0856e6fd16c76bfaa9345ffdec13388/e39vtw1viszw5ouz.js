import{m7 as I,cl as h,gH as l,dG as M,gb as R,ar as E,cu as T,mM as F,f3 as O,ds as B,cO as D,gD as H}from"./lgw4q0e8zlqqfgug.js";import{P as A,b as N,a as Q,r as s,h as _,j as e}from"./m60bpb0x3x7rg8fj.js";import{C as k}from"./koh2m2w2ywhm6pl3.js";import{r as L,u as $,s as G,C as y,a as q,g as K,b,T as V,c as W}from"./ggjzadbnd3k1vu0k.js";import{T as z,C as J}from"./ib61luj52j5qoibx.js";import{g as U}from"./cum2m9ppsxjdt1u5.js";import{C as j,T as X}from"./lfugw8qvvom7caj7.js";import"./9q3v44p2xpoi75pn.js";import"./hs2mcew9gnq8d8k8.js";import"./ns51nblw8ziscsgd.js";import"./jy1u8exw8iz2slve.js";import"./j770ggbjd02m3hqj.js";import"./g4h5bud8allgzrnd.js";import"./5a6x9gba3iwtvxlr.js";import"./g61ghrdmm0y010eo.js";import"./kfjcy5y4cxuymbdf.js";import"./imrl18sy28ygoppx.js";import"./kh89q49991ykwivd.js";import"./kl7c6054usfnqmd4.js";import"./mia7qmdupqoji40k.js";import"./cqdszxwxh9yigbop.js";import"./n70zh1fo8aekhdb0.js";import"./lf8mxjdfum7t34gh.js";import"./d4l47j95cc16bbv9.js";import"./mlo67gs1ylzshmge.js";import"./h81zqbvh0a7amk0o.js";import"./bk8slwxjkdlmxjxm.js";import"./og0mzunrykkt4tp0.js";import"./lff9oru7r5vtmz06.js";import"./tfkm8dsw7zx8il21.js";import"./rx5cs0ja7c7phupc.js";import"./n5yj38pa2aamrsfp.js";import"./mog17ocsx2bkw4q4.js";import"./evlyokzg1xrjbsou.js";const Be=()=>(L(),null),De=I(function(){const r=A(),[o]=N(),u=Q(),p=h(r.conversationId),i=l(o.get("readonly"),!1),c=l(o.get("isFullScreen"),!1),d=l(o.get("header"),!0),m=l(o.get("appPreview"),!1),a=M(),x=R(),P=l(o.get("hideBottomComposer"),!!i),n=h(r.canmoreId),t=p,f=$();s.useEffect(()=>{G({type:y.Textdoc,textdocId:n})},[n]),q(t,{kind:E.PrimaryAssistant});const g=_();if(s.useEffect(()=>(T.retainThread(t),()=>{setTimeout(()=>{g.invalidateQueries(K({clientThreadId:t}))},0),T.releaseThread(t)}),[t,g]),s.useEffect(()=>{n||u("/")},[n,u]),s.useEffect(()=>{b().sendMessage({type:j.Loaded})},[n]),!n||f?.type!==y.Textdoc)return null;const w=()=>{b().sendMessage({type:j.Close})},S=i&&!d;return e.jsxs("div",{className:"h-full w-full overflow-hidden contain-content",children:[e.jsx("meta",{name:"viewport",content:"width=device-width, initial-scale=1, maximum-scale=1"}),e.jsx(F,{clientThreadId:t,children:e.jsx(O,{clientThreadId:t,children:e.jsx(V,{clientThreadId:t,children:m?e.jsx(B,{children:e.jsx(Y,{textdocId:f.textdocId})}):S?e.jsxs(e.Fragment,{children:[e.jsx(z,{clientThreadId:t,disableScroll:!a,textdocId:f.textdocId}),e.jsx(J,{})]}):e.jsx(X,{isEmbedded:!0,hideRunCode:!a,isFullScreen:c,hideHeader:!d,hideBottomComposer:P,isReadonlyFromQueryParam:i,hideRenameButton:x,clientThreadId:t,focusedTextdoc:f,onClose:w},"textdocContent")})})})]})}),Y=({textdocId:C})=>{const r=s.useRef(null),o=W(C),[u,p]=s.useState(!1),i=o?.versions??[],c=D(i),d=s.useCallback(H(async m=>{const a=U(m.type,m.content);if(r.current&&(a==="react"||a==="html")){p(!0);const v=r.current.evalAsync({language:a,code:m.content});for await(const x of v)console.debug(x)}p(!1)},100),[]);return s.useEffect(()=>{c&&d(c)},[c,d]),e.jsx(k,{id:C,visuallyHidden:!u,ref:r,enableTransition:!0,title:""})};export{Be as clientLoader,De as default};
//# sourceMappingURL=e39vtw1viszw5ouz.js.map
