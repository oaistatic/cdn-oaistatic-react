import{f as j,a as oe,r as y,j as e,d as B,M as x,c as L}from"./m60bpb0x3x7rg8fj.js";import{d as ne,u as U,aZ as re,W as _,M as S,P as O,a5 as k,i6 as ae,l as se,kg as G,g7 as ce,g5 as ie,g3 as le,g1 as de,b2 as ue,pq as me,ha as pe,e as ge,p as fe,C as he,pr as w,hn as Ce,bH as N,gd as xe,B as Me,t as be,z as I,ps as Te,ei as F}from"./lgw4q0e8zlqqfgug.js";import{dZ as ye,d_ as _e,ag as Se,d$ as Y,e0 as Pe,e1 as Ne,e2 as je,e3 as ve,e4 as Re,e5 as Ee,e6 as Oe,e7 as ke,e8 as we,e9 as Ie,ea as Fe,eb as De,aU as Ae,ec as Be,ed as Le,X as Ue}from"./ggjzadbnd3k1vu0k.js";import{u as Ge}from"./glu06a3y5u0laqff.js";import{u as Ye}from"./dgb06x9f8z6d0ar9.js";const q=ne.hasDismissedPromoRedemption,P="month",H="year",V="hour";function qe(r){return r==="chatgptplusplan"?"Plus":r==="chatgptgoplan"?"Go":(se.warn("Unsupported plan name for promo redemption banner, falling back to Plus: ",{planName:r}),"Plus")}function et(){const{eligible:r}=U(q);return _.getItem(S.PromoCode)?r:!1}function tt(){const r=j(),{markAsViewed:t}=U(q),c=oe(),s=re(),{initialBillingDetails:o}=Ge(s,!0),p=_.getItem(S.PromoCode),{promoMetadata:i}=ye(p),l=i!=null&&!i.schedule,C=i?.plan_name&&qe(i.plan_name)||"";if(y.useEffect(()=>{l&&(O.logEvent("Promo Redemption Banner Shown",{promoCode:p}),k.logEvent("chatgpt_promo_redemption_banner_shown"))},[l,p]),!l)return null;const d=i.plan_name==="chatgptgoplan"?_e():Se(),m=Ve(r,o,i,d,C),u=$e(r,o,i,d),g=e.jsxs("div",{className:"grow",children:[e.jsx("div",{className:"mb-0.5 font-semibold",children:m}),e.jsx("span",{className:"text-token-text-secondary",children:u})]});return e.jsx(ae,{onPrimaryCtaClick:()=>{const h=_.getItem(S.PromoCode);_.removeItem(S.PromoCode),t(),c(`/p/${h}#pricing`),O.logEvent("Promo Redemption Banner Redeem Button Clicked",{promoCode:h}),k.logEvent("chatgpt_promo_redemption_banner_redeem_button_clicked")},primaryCtaText:r.formatMessage(M.bannerPrimaryCta),onDismiss:t,content:g})}function He({billingDetails:r,planName:t}){const c=r.currency;let s;switch(c){case de:s=t==="chatgptgoplan"?we:Ie;break;case le:s=t==="chatgptgoplan"?Oe:ke;break;case ie:s=t==="chatgptgoplan"?Re:Ee;break;case ce:s=t==="chatgptgoplan"?je:ve;break;default:s=t==="chatgptgoplan"?Pe:Ne}return s}function $(r,t){const{discount:c}=t;let s=He({billingDetails:r,planName:t.plan_name});if("percentage"in c){const o=c?.percentage/100;s=s*(1-o)}else if("value"in c){const o=c?.value;s-=o}return s}function Ve(r,t,c,s,o){const{discount:p,duration:i}=c,{currencySymbol:l}=Y(s,t.currency),C=i?i.period:P,d=i?i.num_periods:1;if("percentage"in p){const m=p?.percentage;return r.formatMessage(M.bannerTitleForPercentageDiscount,{discount:`${m}`,planName:o})}else if("value"in p){const m=$(t,c),u=l.code.defaultMessage?.toString()??G,g=r.formatNumber(m,{style:"currency",currency:u,minimumFractionDigits:0,maximumFractionDigits:2});let h;switch(C){case P:d===1?h=r.formatMessage(M.bannerTitleForSingleMonth,{cost:g,planName:o}):h=r.formatMessage(M.bannerTitleForPluralMonths,{cost:g,num_months:d,planName:o});break;case H:d===1?h=r.formatMessage(M.bannerTitleForSingleYear,{cost:g,planName:o}):h=r.formatMessage(M.bannerTitleForPluralYears,{cost:g,num_years:d,planName:o});break;case V:throw new Error("Period 'hour' is not supported")}return h}}function $e(r,t,c,s){const{duration:o}=c,{currencySymbol:p}=Y(s,t.currency),i=o?o.period:P,l=o?o.num_periods:1,C=p.code.defaultMessage?.toString()??G,d=$(t,c),m=r.formatNumber(d,{style:"currency",currency:C,minimumFractionDigits:0,maximumFractionDigits:2});let u;switch(i){case P:l===1?u=r.formatMessage(M.bannerContentForSingleMonth,{cost:m}):u=r.formatMessage(M.bannerContentForPluralMonths,{num_months:l,cost:m});break;case H:l===1?u=r.formatMessage(M.bannerContentForSingleYear,{cost:m}):u=r.formatMessage(M.bannerContentForPluralYears,{num_years:l,cost:m});break;case V:throw new Error("Period 'hour' is not supported")}return u}const M=B({bannerTitleForPluralMonths:{id:"promoRedemptionBannerTitleForPluralMonths",defaultMessage:"Get {planName} for {cost}/month for the first {num_months} months"},bannerTitleForSingleMonth:{id:"promoRedemptionBannerTitleForSingleMonth",defaultMessage:"Get {planName} for {cost}/month for the first month"},bannerTitleForPluralYears:{id:"promoRedemptionBannerTitleForPluralYears",defaultMessage:"Get {planName} for {cost}/year for the first {num_years} years"},bannerTitleForSingleYear:{id:"promoRedemptionBannerTitleForSingleYear",defaultMessage:"Get {planName} for {cost}/year for the first year"},bannerTitleForPercentageDiscount:{id:"promoRedemptionBannerTitleForPercentageDiscount",defaultMessage:"Finish redeeming your {discount}% off code for {planName}"},bannerContentForPluralMonths:{id:"promoRedemptionBannerContentForPluralMonths",defaultMessage:"Get {num_months} months of expanded access for only {cost} per month."},bannerContentForSingleMonth:{id:"promoRedemptionBannerContentForSingleMonth",defaultMessage:"Get 1 month of expanded access for only {cost} per month."},bannerContentForPluralYears:{id:"promoRedemptionBannerContentForPluralYears",defaultMessage:"Get {num_years} years of expanded access for only {cost} per year."},bannerContentForSingleYear:{id:"promoRedemptionBannerContentForSingleYear",defaultMessage:"Get 1 year of expanded access for only {cost} per year."},bannerPrimaryCta:{id:"promoRedemptionBannerPrimaryCta",defaultMessage:"Redeem"}}),D=1024*1024*4,A=()=>{"use forget";const r=L.c(1);let t;return r[0]===Symbol.for("react.memo_cache_sentinel")?(t=e.jsx("span",{className:"text-token-text-tertiary font-normal",children:e.jsx(x,{...a.optionalText})}),r[0]=t):t=r[0],t},ze=r=>{"use forget";const t=L.c(15),{previewUrl:c,isDragActive:s}=r,o=j(),p=be();if(!c||s){const u=s?"border-green-600 bg-green-600/30 text-green-600":"border-token-border-heavy text-token-text-tertiary";let g;t[0]!==u?(g=I("rounded-xl border border-dashed p-4",u),t[0]=u,t[1]=g):g=t[1];let h;t[2]===Symbol.for("react.memo_cache_sentinel")?(h=e.jsx(Ue,{className:"h-6 w-6"}),t[2]=h):h=t[2];let T;return t[3]!==g?(T=e.jsx("span",{className:g,children:h}),t[3]=g,t[4]=T):T=t[4],T}const i=p&&"bg-white";let l;t[5]!==i?(l=I("bg-token-bg-tertiary overflow-hidden rounded-xl border",i),t[5]=i,t[6]=l):l=t[6];let C;t[7]!==o?(C=o.formatMessage(a.iconPreviewAlt),t[7]=o,t[8]=C):C=t[8];let d;t[9]!==c||t[10]!==C?(d=e.jsx("img",{src:c,alt:C,className:"h-14 w-14 object-cover"}),t[9]=c,t[10]=C,t[11]=d):d=t[11];let m;return t[12]!==l||t[13]!==d?(m=e.jsx("span",{className:l,children:d}),t[12]=l,t[13]=d,t[14]=m):m=t[14],m},Ke=r=>new Promise((t,c)=>{const s=new FileReader;s.onloadend=()=>t(s.result),s.onerror=()=>c(),s.readAsDataURL(r)}),ot=({onClose:r})=>{"use forget";const t=ue(),{mutateAsync:c,isPending:s}=me(pe.CONNECTOR_SETTING),o=j(),[p,i]=y.useState(!1),[l,C]=y.useState("OAUTH"),[d,m]=y.useState(!1),u=Fe({defaultValues:{name:"",url:"",description:""},onSubmit:async({value:n})=>{const f=g?await Ke(g):null;let E=[];if(l==="OAUTH")try{E=[await Te(n.url.trim())]}catch{t.danger(o.formatMessage(a.oauthConfigError));return}try{const b=await c({name:n.name.trim(),mcp_url:n.url.trim(),description:n.description.trim(),logo_url:f,supported_auth:E});if(!b.implementsRetrievable){R(!0);return}r(b.connector?.id)}catch(b){if(b instanceof F&&b.status===409)t.danger(o.formatMessage(a.duplicateName));else{const te=b instanceof F&&typeof b.detail?.details=="string"?b.detail.details:void 0;t.danger(o.formatMessage(a.createConnectorError),{description:te})}return}},validators:{onSubmit:({value:n})=>{const f={};return n.name.trim()||(f.name=o.formatMessage({id:"vtyh9X",defaultMessage:"Name is required"})),n.url.trim()?n.url.trim().match(/^https?:\/\//)||(f.url=o.formatMessage({id:"7hn6Jq",defaultMessage:"URL is invalid"})):f.url=o.formatMessage({id:"7WV2q4",defaultMessage:"URL is required"}),{fields:f}}}}),[g,h]=y.useState(null),[T,z]=y.useState(null),[v,R]=y.useState(!1),K=ge(),W=fe(K,"735368229"),X=n=>{if(T&&URL.revokeObjectURL(T),n.size>D){t.danger(o.formatMessage(a.iconTooLarge));return}h(n);const f=URL.createObjectURL(n);z(f)},{getRootProps:Z,getInputProps:J,isDragActive:Q}=Ye({accept:{"image/*":[]},multiple:!1,noKeyboard:!0,noClick:!0,maxSize:D,onDropAccepted:n=>{n.length>0&&X(n[0])},onDropRejected:()=>{t.danger(o.formatMessage(a.iconInvalid))}}),ee=n=>{n.preventDefault(),d&&(i(!0),u.handleSubmit())};return e.jsx(he,{testId:"modal-create-custom-connector",title:e.jsx("span",{className:"flex items-center gap-1",children:e.jsx(x,{...a.createCustomConnectorModalTitle,values:{betaBadge:e.jsx(Le,{})}})}),type:"success",isOpen:!0,onClose:()=>r(),showCloseButton:!0,size:"custom",className:"max-w-[448px]",children:e.jsxs("form",{onSubmit:ee,className:"flex flex-col gap-4",children:[e.jsxs("label",{...Z({className:"flex cursor-pointer items-center gap-2.5"}),children:[e.jsx("input",{...J()}),e.jsx(ze,{previewUrl:T,isDragActive:Q}),e.jsxs("span",{className:"flex flex-col gap-1",children:[e.jsx("span",{className:"text-sm font-medium",children:e.jsx(x,{...a.iconTitle,values:{optionalText:e.jsx(A,{})}})}),e.jsx("span",{className:"text-token-text-tertiary text-xs",children:e.jsx(x,{...a.iconDescription})})]})]}),e.jsx(u.Field,{name:"name",children:n=>e.jsxs("div",{children:[e.jsx("label",{htmlFor:"custom-connector-name",className:"mb-1 block text-sm font-medium",children:e.jsx(x,{...a.nameTitle})}),e.jsx(w,{name:"custom-connector-name",value:n.state.value,onChange:f=>{n.handleChange(f.target.value),p&&i(!1)},ariaLabel:o.formatMessage(a.nameTitle),placeholder:o.formatMessage(a.namePlaceholder),error:p?n.state.meta.errors[0]:void 0})]})}),e.jsx(u.Field,{name:"description",children:n=>e.jsxs("div",{children:[e.jsx("label",{htmlFor:"custom-connector-description",className:"mb-1 block text-sm font-medium",children:e.jsx(x,{...a.descriptionTitle,values:{optionalText:e.jsx(A,{})}})}),e.jsx(Ce,{name:"custom-connector-description",value:n.state.value,onChange:f=>n.handleChange(f.target.value),ariaLabel:o.formatMessage(a.descriptionTitle,{optionalText:o.formatMessage(a.optionalText)}),placeholder:o.formatMessage(a.descriptionPlaceholder)})]})}),e.jsx(u.Field,{name:"url",children:n=>e.jsxs("div",{children:[e.jsx("label",{htmlFor:"custom-connector-url",className:"mb-1 block text-sm font-medium",children:e.jsx(x,{...a.urlTitle})}),e.jsx(w,{name:"custom-connector-url",value:n.state.value,onChange:f=>{n.handleChange(f.target.value),p&&i(!1),v&&R(!1)},ariaLabel:o.formatMessage(a.urlTitle),placeholder:o.formatMessage(a.urlPlaceholder),error:v?e.jsx("span",{children:e.jsx(x,{...W?a.developerModeConformanceError:a.conformanceError,values:{link:f=>e.jsx(N,{href:"https://platform.openai.com/docs/mcp",openNewTab:!0,children:f})}})}):p?n.state.meta.errors[0]:void 0})]})}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"custom-connector-auth",className:"mb-1 block text-sm font-medium",children:e.jsx(x,{...a.authTypeTitle})}),e.jsx(De,{options:[{label:o.formatMessage(a.oauthOption),value:"OAUTH"},{label:o.formatMessage(a.noAuthOption),value:"NONE"}],value:l,onValueChange:n=>C(n),triggerId:"custom-connector-auth",triggerClassName:"w-full justify-between border-token-border-medium"})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"border-token-border-status-warning bg-token-bg-status-warning text-token-text-status-warning flex items-center gap-2 rounded-t-2xl border border-b-0 px-4 py-3 text-sm font-medium",children:[e.jsx(xe,{className:"h-6 w-6"}),e.jsx("span",{children:e.jsx(x,{...a.customConnectorBanner,values:{link:n=>e.jsx(N,{href:"http://platform.openai.com/docs/mcp#risks-and-safety",openNewTab:!0,className:"inline",children:n},"custom-connector-banner-link")}})})]}),e.jsxs("label",{htmlFor:"trust-checkbox",className:"flex items-center gap-3 rounded-b-2xl border border-gray-200 bg-white px-4 py-4 text-sm dark:border-gray-700 dark:bg-gray-800",children:[e.jsx(Ae,{id:"trust-checkbox",onChange:()=>m(n=>!n),disabled:s}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium",children:e.jsx(x,{...a.customConnectorTrustTitle})}),e.jsx("p",{className:"text-token-text-tertiary text-sm",children:e.jsx(x,{...a.customConnectorTrustSubtitle})})]})]})]}),e.jsxs("div",{className:"flex w-full items-center justify-between",children:[e.jsxs(N,{href:"http://platform.openai.com/docs/mcp",openNewTab:!0,className:"text-token-text-tertiary text-sm",children:[e.jsx(Be,{className:"me-1.5 inline h-4.5 w-4.5"}),e.jsx(x,{...a.readTheGuideLink})]}),e.jsx(u.Subscribe,{selector:n=>[n.isSubmitting],children:([n])=>e.jsx(Me,{type:"submit",loading:n,disabled:!d,children:e.jsx(x,{...a.createButton})})})]})]})})},a=B({createCustomConnectorModalTitle:{id:"createCustomConnectorModal.title",defaultMessage:"New Connector {betaBadge}"},iconTitle:{id:"createCustomConnectorModal.iconTitle",defaultMessage:"Icon {optionalText}"},iconDescription:{id:"createCustomConnectorModal.iconDescription",defaultMessage:"Minimum size: 128 x 128 px"},nameTitle:{id:"createCustomConnectorModal.nameTitle",defaultMessage:"Name"},urlTitle:{id:"createCustomConnectorModal.urlTitle",defaultMessage:"MCP Server URL"},descriptionTitle:{id:"createCustomConnectorModal.descriptionTitle",defaultMessage:"Description {optionalText}"},optionalText:{id:"createCustomConnectorModal.optionalText",defaultMessage:"(optional)"},readTheGuideLink:{id:"createCustomConnectorModal.readTheGuideLink",defaultMessage:"Read the guide"},createButton:{id:"createCustomConnectorModal.createButton",defaultMessage:"Create"},iconPreviewAlt:{id:"createCustomConnectorModal.iconPreviewAlt",defaultMessage:"Icon preview"},namePlaceholder:{id:"createCustomConnectorModal.namePlaceholder",defaultMessage:"Custom Tool"},urlPlaceholder:{id:"createCustomConnectorModal.urlPlaceholder",defaultMessage:"https://example.com/sse"},descriptionPlaceholder:{id:"createCustomConnectorModal.descriptionPlaceholder",defaultMessage:"Explain what it does in a few words"},iconTooLarge:{id:"createCustomConnectorModal.iconTooLarge",defaultMessage:"Icon is too large"},iconInvalid:{id:"createCustomConnectorModal.iconInvalid",defaultMessage:"Invalid icon"},authTypeTitle:{id:"createCustomConnectorModal.authTypeTitle",defaultMessage:"Authentication"},oauthOption:{id:"createCustomConnectorModal.oauthOption",defaultMessage:"OAuth"},noAuthOption:{id:"createCustomConnectorModal.noAuthOption",defaultMessage:"No authentication"},oauthConfigError:{id:"createCustomConnectorModal.oauthConfigError",defaultMessage:"Error fetching OAuth configuration"},customConnectorBanner:{id:"createCustomConnectorModal.customConnectorBanner",defaultMessage:"Beta intended for developer use only. <link>Learn more</link>"},customConnectorTrustTitle:{id:"createCustomConnectorModal.customConnectorTrustTitle",defaultMessage:"I trust this application"},customConnectorTrustSubtitle:{id:"createCustomConnectorModal.customConnectorTrustSubtitle",defaultMessage:"Custom connectors are not verified by OpenAI. Malicious developers may attempt to steal your data."},conformanceError:{id:"createCustomConnectorModal.conformanceError",defaultMessage:"This MCP server doesn't implement <link>our specification</link>"},developerModeConformanceError:{id:"createCustomConnectorModal.developerModeConformanceError",defaultMessage:"This MCP server doesn't implement <link>our specification</link>. Enable Developer Mode in Advanced Connector Settings to create custom connectors that support arbitrary tool calls"},createConnectorError:{id:"createCustomConnectorModal.createConnectorError",defaultMessage:"Error creating connector"},duplicateName:{id:"createCustomConnectorModal.duplicateName",defaultMessage:"Connector name already exists"}});export{ot as C,tt as P,q as a,et as u};
//# sourceMappingURL=ls4akj6tri7bc2dz.js.map
