import{j as e,r as c,M as g}from"./m60bpb0x3x7rg8fj.js";import{z as k,b8 as N,B as S}from"./lgw4q0e8zlqqfgug.js";import{fO as P,fP as M}from"./ggjzadbnd3k1vu0k.js";import{S as C}from"./g43t6mvc4wvemyu6.js";import{s as w,a as T}from"./xe390if828rmv032.js";import{u as z}from"./hf4p7t05oigpiihm.js";import"./hp08qw6yu0x90xkd.js";import"./lc2g6guksc7c51bw.js";const E=({goPrev:s,goNext:m,setIsPlaying:x,thumbnails:o,selectedSlideIdx:l})=>{const h=o.length<=1||l===0,a=o.length<=1||l===o.length-1,d=o.length<=1;return e.jsxs("div",{className:k("absolute start-1/2 bottom-2 flex -translate-x-1/2 items-center overflow-hidden rounded-2xl border","border-token-border-light bg-token-bg-primary text-token-text-primary","transition-opacity duration-150","can-hover:opacity-0 can-hover:pointer-events-none","can-hover:group-hover:opacity-100 can-hover:group-hover:pointer-events-auto"),children:[e.jsx("button",{onClick:s,disabled:h,className:"hover:text-token-text-primary disabled:text-token-text-tertiary rounded px-4 py-2",children:e.jsx(P,{className:"icon-sm"})}),e.jsx("div",{className:"border-token-border-light h-6 border-s"}),e.jsx("button",{onClick:()=>x(!0),disabled:d,className:"hover:text-token-text-primary disabled:text-token-text-tertiary rounded px-4 py-2",children:e.jsx(M,{className:"size-5"})}),e.jsx("div",{className:"border-token-border-light h-6 border-s"}),e.jsx("button",{onClick:m,disabled:a,className:"hover:text-token-text-primary disabled:text-token-text-tertiary rounded px-4 py-2",children:e.jsx(N,{className:"icon-sm"})})]})},O=({walnutId:s,isLoading:m,isError:x,isInShareModal:o,errorMessage:l,handleDownloadClick:h})=>{const{presentationMap:a,setSelectedSlideIdx:d}=z(),r=a[s]?.presentation,n=a[s]?.workbook,b=a[s]?.selectedSlideIdx,[i,u]=c.useState([]),[v,f]=c.useState(!1);if(c.useEffect(()=>{r&&(async()=>{const t=await Promise.all(r.slides.map(p=>w(p,r)));u(t)})()},[r]),c.useEffect(()=>{n&&(async()=>{const t=await Promise.all(n.sheets.map(p=>T(p,20,10,0,n)));u(t)})()},[n]),x||l==="fileTooLarge")return e.jsxs("div",{className:"flex h-[250px] flex-col items-center justify-center gap-2 text-center",children:[e.jsx("div",{className:"text-token-text-primary max-w-[80%] text-xs",children:e.jsx(g,{id:"YMbrlR",defaultMessage:"Preview not available."})}),e.jsx(S,{color:"ghost",size:"small",as:"button",onClick:t=>h(t),children:e.jsx(g,{id:"GjJtUJ",defaultMessage:"Download"})})]});if(m||!r&&!n||!i.length)return e.jsx("div",{className:"flex h-[250px] items-center justify-center gap-2",children:e.jsx("div",{className:"border-token-border-heavy h-4 w-4 animate-spin rounded-full border-2 border-t-transparent"})});const y=()=>{d(s,t=>t>0?t-1:i.length-1)},j=()=>{d(s,t=>t<i.length-1?t+1:0)};return e.jsxs("div",{className:"relative flex flex-col items-center",children:[r&&e.jsx(E,{goPrev:y,goNext:j,setIsPlaying:f,thumbnails:i,selectedSlideIdx:b}),e.jsx("img",{src:i[b],alt:"",className:"m-0 rounded border",style:{background:"#fff"}}),r&&v&&e.jsx(C,{startIndex:0,onExit:()=>f(!1),walnutId:s}),o&&e.jsx("div",{className:"from-token-main-surface-primary pointer-events-none absolute start-0 end-0 bottom-0 z-10 h-40 bg-gradient-to-t to-transparent","data-testid":"walnut-mini-player-share-gradient"})]})};export{O as WalnutMiniPlayer};
//# sourceMappingURL=k0o2yofpsl49x5ud.js.map
