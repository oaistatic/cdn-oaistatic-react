import{hD as b,f5 as v,Y as _,eE as C,oP as F,aa as T,oQ as q}from"./lgw4q0e8zlqqfgug.js";import{bQ as w,bR as A,bS as Q}from"./ggjzadbnd3k1vu0k.js";import{r as i,u as x}from"./m60bpb0x3x7rg8fj.js";const c=5*60*1e3,P=30*1e3;function U(l,y,m,f,h){const s=i.useContext(b)?.serverSharedThreadId,r=w(m),p=i.useMemo(()=>({asset_pointer:r,content_type:v.ArbitraryAssetPointer}),[r]),o=A(),{isUnauthenticated:E}=_(),n=C(y),t=Q.makeQueryOptions({asset:p,sharedThreadId:s,postId:o,gizmoId:void 0,isUnauthenticated:E,conversationId:s?void 0:n}),a=F(),I=!!(l&&(n||s||o)&&r&&t.enabled),u=t.queryFn;if(typeof u=="symbol")throw Error("Unexpected symbol query fn...");return x({queryKey:t.queryKey,queryFn:async g=>{try{const e=await u(g);return f?.(e.url),{status:"success",download_url:e.url}}catch(e){T.addError(e);let d=a("default_download_link_error",{fileName:r});throw e instanceof q&&e.code!=null&&(d=a(e.code)),h?.(d),e}},enabled:I,staleTime:c,gcTime:P,refetchInterval:c,refetchOnWindowFocus:!0})}export{U as u};
//# sourceMappingURL=j4gbrzdh1iwlkiif.js.map
