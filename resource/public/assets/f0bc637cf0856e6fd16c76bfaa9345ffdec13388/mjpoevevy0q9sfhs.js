const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/b4yd8acft1trj1fs.js","assets/m60bpb0x3x7rg8fj.js"])))=>i.map(i=>d[i]);
import{ah as Oe,b_ as le,z as ce,bc as Ue,b$ as de,e as ue,b2 as me,H as Te,aZ as ge,aq as We,gt as qe,d6 as Be,d7 as h,cs as Z,qc as L,C as pe,aN as xe,dd as De,B as $,cd as y,dj as Ke,qd as A,db as fe,dr as $e,dK as Ve,P as V,am as se,R as ze}from"./lgw4q0e8zlqqfgug.js";import{r as w,f as I,j as t,h as Qe,M as f,c as U,u as Fe,p as z}from"./m60bpb0x3x7rg8fj.js";import{eo as Ge,is as he,it as Ze,$ as ye,iu as je,iv as ae,iw as ne,df as He,i6 as Xe,bE as H,ix as Je,iy as Ye,iz as et,i4 as tt,iA as st,iB as Q,i8 as at,i9 as ie,aV as nt}from"./ggjzadbnd3k1vu0k.js";import{L as it,R as ot,X as rt}from"./b0ezjmuszi870prk.js";import{a as lt}from"./fg36ujrp67ag8qf3.js";import{c as ct,E as dt}from"./hb68k3oakb3tiftg.js";import{S as ut,c as oe}from"./nn6a4342otoakkr2.js";const mt=s=>w.createElement("svg",{width:20,height:20,viewBox:"0 0 20 20",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",...s},w.createElement("path",{d:"M8.90137 11.417C9.26455 11.3625 9.60269 11.6124 9.65723 11.9756C9.71173 12.3388 9.46183 12.6769 9.09863 12.7314C6.40834 13.1352 4.41518 15.2967 4.41504 17.833C4.41504 18.2003 4.11727 18.498 3.75 18.498C3.38273 18.498 3.08496 18.2003 3.08496 17.833C3.0851 14.5616 5.63904 11.9066 8.90137 11.417Z"}),w.createElement("path",{d:"M16.1367 12.8027C16.4296 12.5102 16.9045 12.5101 17.1973 12.8027C17.4899 13.0955 17.4898 13.5704 17.1973 13.8633L15.6436 15.416L17.1973 16.9697L17.248 17.0264C17.4884 17.3209 17.4717 17.7556 17.1973 18.0303C16.9226 18.3049 16.4879 18.3215 16.1934 18.0811L16.1367 18.0303L14.583 16.4766L13.0303 18.0303C12.7374 18.323 12.2626 18.323 11.9697 18.0303C11.6771 17.7374 11.6771 17.2626 11.9697 16.9697L13.5225 15.416L11.9697 13.8633L11.918 13.8066C11.6778 13.5121 11.6952 13.0773 11.9697 12.8027C12.2443 12.5283 12.6791 12.5109 12.9736 12.751L13.0303 12.8027L14.583 14.3555L16.1367 12.8027Z"}),w.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M10 1.75C12.2549 1.75013 14.0838 3.57808 14.084 5.83301C14.084 8.08809 12.2551 9.91686 10 9.91699C7.74499 9.91682 5.91699 8.08806 5.91699 5.83301C5.91717 3.57811 7.7451 1.75018 10 1.75ZM10 3.25C8.57352 3.25018 7.41717 4.40653 7.41699 5.83301C7.41699 7.25963 8.57341 8.41682 10 8.41699C11.4266 8.41686 12.584 7.25966 12.584 5.83301C12.5838 4.40651 11.4265 3.25013 10 3.25Z"})),gt=le(()=>de(()=>import("./b4yd8acft1trj1fs.js"),__vite__mapDeps([0,1])).then(s=>s.DirectorySyncResourceManagedIndication));function pt({value:s,onChange:e,options:a,onSearch:c,placeholder:r,trailingComponent:o,isLoading:l,menuIsOpen:n,classNames:d}){const u=I(),p=u.formatMessage({id:"F+GhgL",defaultMessage:"People outside of your workspace cannot be added"}),g=i=>t.jsx(oe.IndicatorsContainer,{...i,children:o}),x=(i,v)=>v.context==="value"?i.label:t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsxs("div",{className:"flex flex-col",children:[t.jsx("span",{className:"text-sm",children:i.label}),i.sublabel&&t.jsx("span",{className:"text-token-text-secondary text-xs",children:i.sublabel})]}),i.kind==="group"&&i.isScimManaged&&t.jsx(gt,{})]}),j=i=>{const{isFocused:v,isSelected:k,innerProps:_,innerRef:b,data:R}=i;return t.jsx("div",{..._,ref:b,className:ce("cursor-pointer rounded-md p-2",k?"bg-token-interactive-bg-secondary-press":v?"bg-token-interactive-bg-secondary-hover":"bg-transparent"),children:x(R,{context:"menu"})})},C=i=>t.jsx(oe.MultiValue,{...i,children:t.jsx("div",{className:"text-token-text-primary bg-token-bg-secondary hover:border-token-border-light hover:bg-token-interactive-bg-secondary-hover m-1 cursor-pointer rounded-md border border-transparent px-1.5 py-1 text-sm",role:"button",tabIndex:0,...i.removeProps,children:t.jsxs("span",{className:"flex min-w-0 items-center gap-1",children:[t.jsx("span",{className:"min-w-0",children:i.children}),t.jsx(Ue,{className:"icon-sm"})]})})});return t.jsx(ut,{className:"react-select-container min-w-0",classNamePrefix:"react-select",isMulti:!0,isClearable:!1,isLoading:l,menuIsOpen:n,options:a,value:s,classNames:d,getOptionValue:i=>`${i.kind}:${i.id}`,getOptionLabel:i=>i.label,onChange:i=>e(i),onInputChange:(i,v)=>{v.action!=="menu-close"&&v.action!=="input-blur"&&c(i)},placeholder:r,openMenuOnFocus:!0,openMenuOnClick:!0,hideSelectedOptions:!1,closeMenuOnSelect:!1,backspaceRemovesValue:!0,controlShouldRenderValue:!0,components:{DropdownIndicator:()=>null,ClearIndicator:()=>null,IndicatorsContainer:g,MultiValue:C,Option:j,MultiValueRemove:()=>null},formatOptionLabel:x,noOptionsMessage:()=>p,loadingMessage:()=>u.formatMessage(Oe.loading),filterOption:(i,v)=>i.data.label.toLowerCase().includes(v.toLowerCase())||(i.data.sublabel??"").toLowerCase().includes(v.toLowerCase())})}const xt=le(()=>de(()=>import("./b4yd8acft1trj1fs.js"),__vite__mapDeps([0,1])).then(s=>s.DirectorySyncResourceManagedIndication));function ve(s,e){return s===void 0||e===void 0?!1:s.split("__")[0]===e.split("__")[0]}function re(s){return s.toLowerCase().trim()}function ft(s,e){return s===void 0||e===void 0?!1:re(s)===re(e)}function F(s,e){return ve(s?.user_id,e?.id)||ft(s?.user_email,e?.email)}function ht(s,e){const a=new Set,c=new Set,r=new Set,o=new Set,l=[...s];for(const n of s)n.type===h.USER?a.add(n.user_id):n.type===h.EMAIL?r.add(n.user_email):n.type===h.GROUP?c.add(n.group_id):o.add(n.type);for(const n of e)if(n.type===h.EMAIL){if(r.has(n.user_email))continue;r.add(n.user_email),l.push(n)}else if(n.type===h.USER){if(a.has(n.user_id))continue;a.add(n.user_id),l.push(n)}else if(n.type===h.GROUP){if(c.has(n.group_id))continue;c.add(n.group_id),l.push(n)}else{if(o.has(n.type))continue;o.add(n.type),l.push(n)}return l}function yt(s,e){const a=s.filter(c=>st(c));return e!=null&&a.push(e),a}function jt(s){return s.some(e=>e.type===h.ALL)?Q.Link:s.some(e=>e.type===h.WORKSPACE)?Q.WorkspaceLink:Q.Private}function be(s){return s.can_write?"edit":"view"}function vt(s){switch(s){case h.ALL:return"link";case h.WORKSPACE:return"workspaceLink";default:return"invite"}}function Ce(s){"use forget";const e=U.c(4),{subjectType:a,workspaceName:c}=s;if(a===h.ALL){let o;return e[0]===Symbol.for("react.memo_cache_sentinel")?(o=t.jsx(f,{id:"Mr1Pk0",defaultMessage:"Anyone with a link"}),e[0]=o):o=e[0],o}if(a===h.WORKSPACE){let o;return e[1]!==c?(o=t.jsx(f,{id:"okIeDq",defaultMessage:"Anyone at {workspaceName} with the link",values:{workspaceName:c}}),e[1]=c,e[2]=o):o=e[2],o}let r;return e[3]===Symbol.for("react.memo_cache_sentinel")?(r=t.jsx(f,{id:"fAE/rP",defaultMessage:"Only those invited"}),e[3]=r):r=e[3],r}const bt=s=>e=>e.kind==="user"?{type:h.USER,user_id:e.id,user_name:e.label,user_email:e.sublabel??"",avatar_url:e.avatarUrl??null,capabilities:s}:{type:h.GROUP,group_id:e.id,group_name:e.label,is_scim_managed:!!e.isScimManaged,capabilities:s},Ct=s=>e=>({type:h.EMAIL,user_email:e,capabilities:s}),kt=({label:s,projectName:e,onConfirm:a,onClose:c})=>{"use forget";const r=I(),o=r.formatMessage({id:"tnQ4zL",defaultMessage:"{label, select, undefined {Remove from {projectName}?} other {Remove {label} from {projectName}}}?"},{label:s??"undefined",projectName:e}),[l,n]=w.useState(!1);return t.jsx(pe,{testId:"modal-snorlax-remove-user-confirmation-modal",isOpen:!0,onClose:()=>c(),type:"success",title:o,primaryButton:t.jsx(se.Button,{title:r.formatMessage({id:"qvV5dW",defaultMessage:"Remove"}),color:"danger",onClick:async()=>{n(!0);try{await a(),c()}finally{n(!1)}},loading:l,disabled:l,"data-testid":"button-confirm-remove-user"}),secondaryButton:t.jsx(se.Button,{title:r.formatMessage({id:"8Z8QAH",defaultMessage:"Cancel"}),disabled:l,color:"secondary",onClick:()=>c()}),children:t.jsx("div",{className:"text-token-text-secondary",children:t.jsx(f,{id:"QkibL8",defaultMessage:"{label, select, undefined {They} other {<b>{label}</b>}} will lose access to all contents in this project.",values:{label:s??"undefined",b:d=>t.jsx("span",{className:"text-token-text-primary font-medium",children:d})}})})})};function $t({gizmo:s,publishedGizmo:e,onClose:a}){"use forget";const c=ue(),r=I(),o=me(),l=Te(c),n=ge(),d=l?.isWorkspaceAccount()??!1,u=We(),p=r.formatMessage({id:"nJUofg",defaultMessage:"your workspace"}),g=n?.name??p,x=Ge(),[j,C]=w.useState(s.sharing?.subjects??[]),[i,v]=w.useState(!1),k=Qe(),{canEdit:_}=qe(e);w.useEffect(()=>{k.invalidateQueries({queryKey:Be(k,e.gizmo.id).queryKey})},[e.gizmo.id,k]);function b(m,S,M){return m.type===h.USER&&m.user_id.indexOf("__")===-1?{...m,user_id:m.user_id+"__"+l?.getWorkspaceId()}:m}async function R(m,S,M){if(i)return;v(!0);const N=S?M.map(b):M,Pe=jt(N);try{const P=await x.mutateAsync({id:m,update:{sharing:{recipient:Pe,subjects:N}}});P?.resource&&C(Je(P.resource).sharing.subjects)}catch(P){const Ae=Ke(P);o.warning(Ae??"Error",{duration:2}),C(s.sharing?.subjects??[])}v(!1),k.invalidateQueries({queryKey:["gizmos"]}),k.refetchQueries({queryKey:["gizmos","discovery"]}),k.refetchQueries({queryKey:["gizmo",{gizmoId:m}]}),k.invalidateQueries({queryKey:["gizmo","userActionSettings",{gizmoId:m}]}),k.invalidateQueries({queryKey:["workspace"]})}const T=ve(e.gizmo.author.user_id.split("__")[0],u?.id),W=he(j),X=W?.type!==h.WORKSPACE&&W?.type!==h.ALL,we=X?xe:d?ye:je,J=t.jsx(f,{id:"wDjvNM",defaultMessage:"Only the owner can change permissions. Contact them if you'd like to update someone's access."}),Me=t.jsx(Z,{label:J,side:"top",children:t.jsx(Ce,{subjectType:W?.type,workspaceName:g})}),_e=m=>t.jsx(Z,{label:J,side:"top",children:t.jsx("span",{className:"text-token-text-primary pe-4 text-sm",children:t.jsx(f,{...O(m.capabilities)})})}),Ne=m=>t.jsxs(y.Root,{children:[t.jsxs(y.Trigger,{color:"secondary",className:"text-token-text-primary text-normal hover:bg-token-interactive-bg-secondary-hover radix-state-open:bg-token-interactive-bg-secondary-press whitespace-nowrap",disabled:i,children:[t.jsx(f,{...O(m.capabilities)}),t.jsx(H,{className:"icon-sm"})]}),t.jsx(y.Portal,{children:t.jsxs(y.Content,{className:"max-w-[320px]",children:[t.jsx(y.RadioGroup,{value:be(m.capabilities),onValueChange:S=>{const M=j.map(N=>N===m?{...N,capabilities:S==="edit"?A:L}:N);C(M),R(e.gizmo.id,d,M)},children:[L,A].map((S,M)=>t.jsx(Se,{capabilities:S,selected:fe(S,m.capabilities)},M))}),t.jsx(y.Item,{onClick:()=>{const S=ne(m);$e(c,kt,{label:S?.value,projectName:e.gizmo.display.name,onConfirm:async()=>{const M=j.filter(N=>N!==m);await R(e.gizmo.id,d,M),C(M)}})},color:"danger",icon:mt,children:t.jsx(f,{id:"HEaMqG",defaultMessage:"Remove from project"})})]})})]}),[E,Y]=w.useState(L),[q,B]=w.useState([]),[D,K]=w.useState([]),Le=q.length>0||D.length>0,ee=async()=>{const m=d?q.map(bt(E)):D.map(Ct(E)),S=ht(j,m);await R(e.gizmo.id,d,S),C(S),K([]),B([])},Ie=()=>{B([]),K([])},te=t.jsx($,{color:"secondary",disabled:i,onClick:Ie,children:t.jsx(f,{id:"Pxo4Mv",defaultMessage:"Cancel"})}),Re=d?t.jsx("div",{className:"text-token-text-secondary flex text-xs",children:t.jsx(f,{id:"uAtWCq",defaultMessage:"Project files, chats, and instructions are shared."})}):null,Ee=Le&&_?d?t.jsxs("div",{className:"flex items-center gap-2",children:[te,t.jsx($,{color:"blue",disabled:i,loading:i,onClick:ee,children:t.jsx(f,{id:"BdwAiM",defaultMessage:"Invite"})})]}):t.jsxs("div",{className:"flex items-center gap-2",children:[te,t.jsx($,{color:"blue",disabled:i,loading:i,onClick:ee,children:t.jsx(f,{id:"n1mfg+",defaultMessage:"Invite"})})]}):t.jsx(wt,{gizmo:e,isBusinessWorkspace:d});return t.jsx(pe,{testId:"modal-share-project",type:"success",className:"max-w-[512px]",size:"custom",isOpen:!0,onClose:a,footerContent:Re,footerClassName:"mt-5 sm:mt-4",modalActionsClassName:"mt-0!",footerIsSpacedBetween:!0,primaryButton:Ee,title:r.formatMessage(He.projectShareTitle),showCloseButton:!0,children:t.jsxs("div",{className:"flex flex-col space-y-4",children:[_&&(d?t.jsx(_t,{publishedGizmo:e,capabilities:E,setCapabilities:Y,subjects:q,setSubjects:B}):t.jsx(Nt,{capabilities:E,setCapabilities:Y,emails:D,setEmails:K})),t.jsx("div",{className:"text-token-text-secondary mb-2 text-sm font-normal",children:t.jsx(f,{id:"eMoeS0",defaultMessage:"Who has access"})}),t.jsxs(Ze,{className:"max-h-[220px] overflow-y-auto",children:[t.jsx(G,{icon:t.jsx("div",{className:"flex h-6 w-6 items-center justify-center",children:t.jsx(we,{className:X?"h-5 w-5":"h-6 w-6"})}),children:T?t.jsx(At,{newSharingSubjects:j,setNewSharingSubjects:C,saveGizmo:R,publishedGizmo:e,isBusinessWorkspace:d,isSaving:i,workspaceName:g}):Me}),t.jsx(G,{icon:t.jsx(ae,{monogram:{id:e.gizmo.author.user_id??"Owner",value:e.gizmo.author.display_name??"User"}}),trailing:t.jsx("span",{className:"text-token-text-primary pe-4 text-sm",children:t.jsx(f,{id:"qb439J",defaultMessage:"Owner"})}),children:T?t.jsx(f,{id:"I6hNog",defaultMessage:"{userName} {you}",values:{userName:u?.name??u?.email,you:t.jsx("span",{className:"text-token-text-secondary",children:t.jsx(f,{id:"VZNoWp",defaultMessage:"(you)"})})}}):e.gizmo.author.display_name??e.gizmo.author.user_email}),j.map((m,S)=>De(m)&&t.jsx(G,{icon:t.jsx(ae,{monogram:ne(m)}),trailing:T?Ne(m):_e(m),children:t.jsxs("div",{className:"flex flex-col justify-center",children:[d&&t.jsxs("span",{className:"flex flex-row items-center",children:[t.jsx("span",{className:"text-token-text-primary truncate text-sm leading-tight",children:m.type===h.GROUP?m.group_name:t.jsx(f,{id:"B3bf3E",defaultMessage:"{userName} {you}",values:{userName:m.user_name,you:F(m,u)?t.jsx("span",{className:"text-token-text-secondary",children:t.jsx(f,{id:"VZNoWp",defaultMessage:"(you)"})}):null}})}),m.type===h.GROUP&&m.is_scim_managed&&t.jsx(xt,{})]}),!d&&(m.type===h.USER||m.type===h.EMAIL)&&t.jsx("span",{className:"text-token-text-primary truncate text-sm leading-tight",children:t.jsx(f,{id:"oj/38v",defaultMessage:"{email} {you}",values:{email:F(m,u)?u?.name:m.user_email??"",you:F(m,u)?t.jsx("span",{className:"text-token-text-secondary",children:t.jsx(f,{id:"VZNoWp",defaultMessage:"(you)"})}):null}})})]})},S)),t.jsx("hr",{className:"border-token-border-light sticky bottom-0 hidden group-data-scrolled-from-end/scrollport:block"})]}),!d&&t.jsx(St,{})]})})}function St(){return t.jsxs("div",{className:"bg-token-bg-tertiary flex flex-row items-center gap-3 rounded-xl p-3",children:[t.jsx(Ve,{className:"icon text-token-text-secondary"}),t.jsxs("div",{className:"flex flex-col",children:[t.jsx("span",{className:"text-token-text-primary text-xs font-medium",children:t.jsx(f,{id:"pD1bmW",defaultMessage:"This project may include personal information"})}),t.jsx("span",{className:"text-token-text-secondary text-xs",children:t.jsx(f,{id:"EonGo6",defaultMessage:"All project contents are visible to collaborators. Personal memories are disabled for shared projects."})})]})]})}function wt({gizmo:s,isBusinessWorkspace:e}){const a=ue(),c=me(),r=Ye(a,s),o=s.gizmo.display.name;return t.jsxs("div",{className:"flex flex-row items-center gap-2",children:[!e&&t.jsxs(t.Fragment,{children:[t.jsx("a",{href:`https://www.linkedin.com/shareArticle?url=${encodeURIComponent(r)}&text=${encodeURIComponent(o)}`,target:"_blank",rel:"noopener noreferrer",onClick:()=>{V.logEventWithStatsig("Share Project: LinkedIn Social Clicked","chatgpt_share_project_linkedin_social_clicked",{projectTitle:o})},children:t.jsx(it,{initialBackgroundColor:"var(--main-surface-secondary)",initialFillColor:"var(--text-secondary)",size:36})}),t.jsx("a",{href:`https://www.reddit.com/submit?url=${encodeURIComponent(r)}&title=${encodeURIComponent(o)}`,target:"_blank",rel:"noopener noreferrer",onClick:()=>{V.logEventWithStatsig("Share Project: Reddit Social Clicked","chatgpt_share_project_reddit_social_clicked",{projectTitle:o})},children:t.jsx(ot,{initialBackgroundColor:"var(--main-surface-secondary)",initialFillColor:"var(--text-secondary)",size:36})}),t.jsx("a",{href:`https://twitter.com/intent/tweet?url=${encodeURIComponent(r)}&text=${encodeURIComponent(o)}`,target:"_blank",rel:"noopener noreferrer",onClick:()=>{V.logEventWithStatsig("Share Project: X Social Clicked","chatgpt_share_project_x_social_clicked",{projectTitle:o})},children:t.jsx(rt,{initialBackgroundColor:"var(--main-surface-secondary)",initialFillColor:"var(--text-secondary)",size:36})})]}),t.jsx(et,{onClickCopy:l=>tt(a,s,c,l)})]})}function ke(s){"use forget";const e=U.c(23),{capabilities:a,onChange:c,triggerClassNames:r}=s;let o;e[0]!==r?(o=ce("text-token-text-secondary hover:bg-token-interactive-bg-secondary-hover radix-state-open:bg-token-interactive-bg-secondary-press whitespace-nowrap",r),e[0]=r,e[1]=o):o=e[1];let l;e[2]!==a?(l=O(a),e[2]=a,e[3]=l):l=e[3];let n;e[4]!==l?(n=t.jsx(f,{...l}),e[4]=l,e[5]=n):n=e[5];let d;e[6]===Symbol.for("react.memo_cache_sentinel")?(d=t.jsx(H,{className:"icon-sm"}),e[6]=d):d=e[6];let u;e[7]!==o||e[8]!==n?(u=t.jsxs(y.Trigger,{color:"secondary",className:o,children:[n,d]}),e[7]=o,e[8]=n,e[9]=u):u=e[9];let p;e[10]!==a?(p=be(a),e[10]=a,e[11]=p):p=e[11];let g;e[12]!==c?(g=i=>{c(i==="edit"?A:L)},e[12]=c,e[13]=g):g=e[13];let x;e[14]!==a?(x=[L,A].map((i,v)=>t.jsx(Se,{capabilities:i,selected:fe(i,a)},v)),e[14]=a,e[15]=x):x=e[15];let j;e[16]!==p||e[17]!==g||e[18]!==x?(j=t.jsx(y.Portal,{children:t.jsx(y.Content,{className:"max-w-[320px]",children:t.jsx(y.RadioGroup,{value:p,onValueChange:g,children:x})})}),e[16]=p,e[17]=g,e[18]=x,e[19]=j):j=e[19];let C;return e[20]!==u||e[21]!==j?(C=t.jsxs(y.Root,{children:[u,j]}),e[20]=u,e[21]=j,e[22]=C):C=e[22],C}function O(s){return s.can_write?z({id:"vsUknl",defaultMessage:"Can edit"}):s.can_view_config?z({id:"4ceJzB",defaultMessage:"Can chat"}):z({id:"x2E8ET",defaultMessage:"Unknown"})}function Mt(s){return s.can_write?at:s.can_view_config?ie:ie}function Se(s){"use forget";const e=U.c(14),{capabilities:a,selected:c}=s,r=I();let o;e[0]!==a.can_write?(o=a.can_write?t.jsx(f,{id:"IShl7Y",defaultMessage:"Chat and edit project content"}):t.jsx(f,{id:"Ux4GYU",defaultMessage:"Chat and view project content"}),e[0]=a.can_write,e[1]=o):o=e[1];const l=o,n=a.can_write?"edit":"view",d=c?"selected":"default";let u;e[2]!==a?(u=Mt(a),e[2]=a,e[3]=u):u=e[3];let p;e[4]===Symbol.for("react.memo_cache_sentinel")?(p=t.jsx(y.RadioItemCheck,{}),e[4]=p):p=e[4];let g;e[5]!==a||e[6]!==r?(g=r.formatMessage(O(a)),e[5]=a,e[6]=r,e[7]=g):g=e[7];let x;return e[8]!==l||e[9]!==n||e[10]!==d||e[11]!==u||e[12]!==g?(x=t.jsx(y.RadioItem,{value:n,color:d,icon:u,trailing:p,label:g,secondary:l}),e[8]=l,e[9]=n,e[10]=d,e[11]=u,e[12]=g,e[13]=x):x=e[13],x}function _t({publishedGizmo:s,capabilities:e,setCapabilities:a,subjects:c,setSubjects:r}){"use forget";const o=I(),l=ge(),[n,d]=w.useState(""),[u]=lt(n,100),p=Xe(l?.id,0,u,10),g=w.useMemo(()=>p.data?.items?.filter(b=>b.account_user_id!==s?.gizmo.author.user_id).map(b=>({kind:"user",id:b.account_user_id,label:b.name??"Unknown User",sublabel:b.email??""}))??[],[p.data?.items,s]),{data:x,isLoading:j}=Fe({queryKey:[l?.id,"groups","filtered",u],queryFn:l?()=>ze.safeGet("/accounts/{account_id}/groups",{parameters:{path:{account_id:l.id},query:{query:u,offset:0,orderby:"@score",limit:20}}}):void 0,enabled:u.trim()!==""&&l!=null&&!!l.getWorkspaceId()}),C=w.useMemo(()=>x?.items.slice(0,10).map(b=>({kind:"group",id:b.id,label:b.name,sublabel:o.formatMessage({id:"r3Rx6X",defaultMessage:"{numMembers, plural, one {1 member} other {# members}}"},{numMembers:b.num_members??0}),isScimManaged:!!b.is_scim_managed}))??[],[x,o]),i=b=>`${b.kind}:${b.id}`,v=new Set(c.map(i)),k=[...g,...C].filter(b=>!v.has(i(b))),_=o.formatMessage({id:"hbjC0K",defaultMessage:"Search people or groups"});return t.jsx("div",{className:"w-full min-w-0",children:t.jsx(pt,{value:c,classNames:{menuList:()=>"bg-token-bg-primary",control:()=>"h-auto! min-h-[40px]! max-h-[192px] items-start overflow-y-auto p-1! cursor-text!"},onChange:b=>r([...b]),onSearch:d,menuIsOpen:n.trim()!=="",options:k,placeholder:_,trailingComponent:c.length>0&&t.jsx(ke,{capabilities:e,onChange:a,triggerClassNames:"text-token-text-secondary"}),isLoading:p.isLoading||j})})}function Nt(s){"use forget";const e=U.c(15),{capabilities:a,setCapabilities:c,emails:r,setEmails:o}=s,l=I();let n;e[0]!==r?(n=r.map(Pt),e[0]=r,e[1]=n):n=e[1];const d=n;let u;e[2]!==o?(u=k=>{const _=k.map(Et);o(Ot(_))},e[2]=o,e[3]=u):u=e[3];const p=u;let g;e[4]!==l?(g=l.formatMessage({id:"Mabh3o",defaultMessage:"Email, separated by commas"}),e[4]=l,e[5]=g):g=e[5];const x=g,j=Rt;let C;e[6]===Symbol.for("react.memo_cache_sentinel")?(C={menuList:It,control:Lt},e[6]=C):C=e[6];let i;e[7]!==a||e[8]!==c?(i=t.jsx(ke,{capabilities:a,onChange:c,triggerClassNames:"text-token-text-secondary"}),e[7]=a,e[8]=c,e[9]=i):i=e[9];let v;return e[10]!==d||e[11]!==p||e[12]!==x||e[13]!==i?(v=t.jsx("div",{className:"w-full min-w-0",children:t.jsx(dt,{value:d,onChange:p,placeholder:x,classNames:C,trailingComponent:i,shouldShowTrailingComponent:j})}),e[10]=d,e[11]=p,e[12]=x,e[13]=i,e[14]=v):v=e[14],v}function Lt(){return"h-auto! min-h-[40px]! max-h-[192px] items-start overflow-y-auto p-0! cursor-text!"}function It(){return"bg-token-bg-primary"}function Rt(s,e){return s&&s.length>0?!0:!!(e&&nt.test(e))}function Et(s){return s.value}function Pt(s){return ct(s??"")}function At({newSharingSubjects:s,setNewSharingSubjects:e,saveGizmo:a,publishedGizmo:c,isBusinessWorkspace:r,isSaving:o,workspaceName:l}){const n=I(),d=he(s)?.type,u=d===h.WORKSPACE,p=d===h.ALL,g=u||p;return t.jsxs(y.Root,{children:[t.jsx(Z,{label:t.jsx(f,{id:"gWJtAX",defaultMessage:"Shared links give chat-only access. Users can be upgraded to edit access after joining."}),triggerAs:null,disabled:!g,side:"top",children:t.jsxs(y.Trigger,{className:"px-0","data-no-hover-bg":!0,disabled:o,children:[t.jsx(Ce,{subjectType:d,workspaceName:l}),t.jsx(H,{className:"icon-sm"})]})}),t.jsx(y.Portal,{children:t.jsx(y.Content,{children:t.jsxs(y.RadioGroup,{value:vt(d),onValueChange:x=>{const j=yt(s,x==="link"?{type:h.ALL,capabilities:L}:x==="workspaceLink"?{type:h.WORKSPACE,capabilities:L}:null);e(j),a(c.gizmo.id,r,j)},children:[t.jsx(y.RadioItem,{icon:xe,value:"invite",label:n.formatMessage({id:"fAE/rP",defaultMessage:"Only those invited"}),trailing:t.jsx(y.RadioItemCheck,{}),color:g?"default":"selected"}),r&&t.jsx(y.RadioItem,{icon:ye,value:"workspaceLink",label:n.formatMessage({id:"a6GwHG",defaultMessage:"Anyone at {workspaceName} with the link"},{workspaceName:l}),trailing:t.jsx(y.RadioItemCheck,{}),color:u?"selected":"default"}),!r&&t.jsx(y.RadioItem,{icon:je,value:"link",label:n.formatMessage({id:"Mr1Pk0",defaultMessage:"Anyone with a link"}),trailing:t.jsx(y.RadioItemCheck,{}),color:p?"selected":"default"})]})})})]})}function G({icon:s,children:e,trailing:a,className:c=""}){return t.jsxs("div",{className:`mb-1 flex min-h-9 flex-row items-center justify-between space-x-2 ${c}`,children:[t.jsx("div",{className:"shrink-0 grow-0",children:s}),t.jsx("div",{className:"text-token-text-primary grow truncate text-sm",children:e}),a&&t.jsx("div",{children:a})]})}function Ot(s){const e=new Set,a=[];for(const c of s){const r=c.toLowerCase();e.has(r)||(e.add(r),a.push(r))}return a}export{$t as ShareProjectModal};
//# sourceMappingURL=mjpoevevy0q9sfhs.js.map
