import{m7 as P,W as d,M as p,aZ as h,A as l,nP as _,e as M,b2 as S,f as E,Z as m,P as L,a5 as b,mc as w}from"./lgw4q0e8zlqqfgug.js";import{b as F,O as T,j as A,f as O,a as R,h as v,r as x,d as I}from"./m60bpb0x3x7rg8fj.js";import{i as k,C as N}from"./oo5ncbfpx577zaun.js";import{bt as j}from"./ggjzadbnd3k1vu0k.js";function g({intl:t,message:e,navigate:s,toaster:a}){a.warning(t.formatMessage(e),{duration:5}),s("/#pricing")}function D({checkoutFrom:t,checkoutPlanType:e,ctx:s,currentAccount:a,intl:c,navigate:r,queryClient:n,isEligibleForProOnboarding:o,toaster:i}){const u=m(s,"2494348560"),y=m(s,"2239990662");if(L.logPaymentSuccess({plan_type:e}),e===l.PLUS&&b.logEvent("chatgpt_plus_payment_success_page"),a.isFree())n.invalidateQueries(w());else if(t)d.removeItem(p.CheckoutFrom),window.location.href=N[t];else if(o&&u.get("enable_ca_pro_onboarding_flow",!1))window.location.href="/payments/success-ind";else{const C=y.get("redirect_to_home",!1);r(C?"/":"/#pricing"),i.success(c.formatMessage(f.paymentConfirmationToastMessage,{planName:j(e)}),{duration:5})}}function K({checkoutFrom:t,checkoutPlanType:e,currentAccount:s,postCheckoutResult:a,isEligibleForProOnboarding:c}){const r=M(),n=O(),o=R(),i=v(),u=S();return x.useEffect(()=>{switch(a){case"success":return D({checkoutFrom:t,checkoutPlanType:e,ctx:r,currentAccount:s,intl:n,isEligibleForProOnboarding:c,navigate:o,queryClient:i,toaster:u});case"payment_failed":return g({intl:n,toaster:u,navigate:o,message:f.paymentFailedToastMessage});case"other_error":return g({intl:n,toaster:u,navigate:o,message:E.somethingWentWrong})}},[t,e,r,s,n,c,o,a,i,u]),null}const H=P(function(){const[e]=F(),s=d.getItem(p.CheckoutFrom),a=h(),c=T(),r=e.get("plan_type")??l.PLUS,{anyConnectorEnabled:n,isLoading:o}=_();if(!a||o)return null;const i=!n&&r===l.PRO;return A.jsx(K,{checkoutFrom:k(s)?s:null,checkoutPlanType:r,currentAccount:a,isEligibleForProOnboarding:i,postCheckoutResult:c.postCheckoutResult})}),f=I({paymentConfirmationToastMessage:{id:"Payments.success.toast",defaultMessage:"You're now subscribed to ChatGPT {planName}"},paymentFailedToastMessage:{id:"Payments.success.paymentFailedToastMessage",defaultMessage:"Payment failed. Please try again."}});export{H as default};
//# sourceMappingURL=dv673zjipsrak5eq.js.map
