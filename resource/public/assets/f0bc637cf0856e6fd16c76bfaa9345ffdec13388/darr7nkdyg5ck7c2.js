const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/oytfwpwuv1vkrh3w.js","assets/m60bpb0x3x7rg8fj.js","assets/lgw4q0e8zlqqfgug.js","assets/root-otc54kct.css","assets/g43t6mvc4wvemyu6.js","assets/hf4p7t05oigpiihm.js","assets/ggjzadbnd3k1vu0k.js","assets/conversation-small-j0gcsxmz.css","assets/hp08qw6yu0x90xkd.js","assets/fg36ujrp67ag8qf3.js","assets/xe390if828rmv032.js","assets/lc2g6guksc7c51bw.js"])))=>i.map(i=>d[i]);
import{f as E,d as F,j as e,M as N,r as S,A as P}from"./m60bpb0x3x7rg8fj.js";import{b2 as B,e as M,z as C,bc as R,cs as W,dK as z,B as _,p as T,C as L,b_ as k,b$ as D,dI as V,aa as A}from"./lgw4q0e8zlqqfgug.js";import{u as I,r as O}from"./hf4p7t05oigpiihm.js";import{S as H}from"./g43t6mvc4wvemyu6.js";import{iI as Q,da as G,fP as K}from"./ggjzadbnd3k1vu0k.js";import{u as $}from"./j4gbrzdh1iwlkiif.js";import{d as q}from"./kl7c6054usfnqmd4.js";import{F as J}from"./b64z5jg99ka1julv.js";import"./hp08qw6yu0x90xkd.js";const b=F({downloadFileError:{id:"postSharingModal.downloadFileError",defaultMessage:"Failed to download file. Please try again later."},title:{id:"walnut.title",defaultMessage:"Preview"},tooltip:{id:"walnut.tooltip",defaultMessage:"This is a web preview and may not reflect exact formatting. Download to open in your preferred software for best results."}}),U=({onClose:s,onPlay:a,extension:o,contentType:t,clientThreadId:g})=>{const h=E(),n=B(),w=t==="presentation",{formatMessage:m}=E(),f=m(b.title),j=m(b.tooltip);M();const{focusedWalnutId:u,presentationMap:r}=I(),i=u?r[u]:void 0,y=i?.fileName??(t==="presentation"?"presentation.pptx":"spreadsheet.xlsx"),d=!1,v=i?.fileBlob,l=h.formatMessage(b.downloadFileError),x=$(!1,g,u??"",()=>{},()=>{n.danger(l,{toastId:"post_sharing_modal_download_error",loggingTitle:l,loggingDescription:"Error message when a file download fails"})});return e.jsxs("div",{className:C("text-token-text-secondary border-token-border-light relative flex w-full items-center justify-between border-b px-3 py-2",d),children:[e.jsxs("div",{className:"z-10 flex flex-row gap-2",children:[e.jsx(Q,{onClick:s,children:e.jsx(R,{})}),!1]}),e.jsxs("div",{className:"absolute start-1/2 top-1/2 flex -translate-x-1/2 -translate-y-1/2 items-center gap-1",children:[e.jsx(J,{fileName:f??null}),e.jsx("div",{className:"text-token-text-primary flex flex-row items-center truncate text-sm font-medium",children:e.jsx(W,{label:j,theme:"white",defaultOpen:!0,customBackgroundColorClassName:"bg-[#6B91F1]",labelClassName:"text-white font-light",side:"bottom",disabled:d,children:e.jsxs("div",{className:"flex flex-row items-center",children:[f,e.jsx(z,{className:"ms-1 size-4"})]})})}),o&&e.jsx("div",{className:"text-token-text-tertiary ms-2 text-sm",children:o})]}),e.jsxs("div",{className:"z-10 flex items-center gap-1",children:[!1,e.jsx(_,{color:"ghost",size:"small",onClick:async()=>{if(v)q(v,y);else{const{data:c}=await x.refetch();if(c===void 0||c?.status!=="success"){n.danger(l,{toastId:"post_sharing_modal_download_error",loggingTitle:l,loggingDescription:"Error message when a file download fails"});return}const p=document.createElement("a");p.href=c.download_url,p.click()}},children:e.jsx(G,{})}),w&&e.jsx(_,{color:"primary",onClick:a,size:"small",children:e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(K,{}),e.jsx("span",{className:"hidden sm:block",children:e.jsx(N,{id:"walnut.play",defaultMessage:"Play Slideshow"})})]})})]})]})},X=k(()=>D(()=>import("./oytfwpwuv1vkrh3w.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11])).then(s=>s.CanvasRenderer)),Y=k(()=>D(()=>import("./lc2g6guksc7c51bw.js").then(s=>s.s),__vite__mapDeps([11,1,6,2,3,7,4,5,8])).then(s=>s.SpreadsheetRenderer));function Z({isOpen:s,onClose:a,clientThreadId:o}){const[t,g]=S.useState(!1),{presentationMap:h,focusedWalnutId:n,setSelectedSlideIdx:w}=I(),m=M(),f=T(m,"3245235608"),[j,u]=S.useState(!1),r=n?h[n]:null,{presentation:i,fileName:y,workbook:d,document:v}=r??{};if(!n||!r)return null;const l=i?"presentation":d?"spreadsheet":"none",x=l==="presentation"&&i&&!t,c=l==="spreadsheet"&&d&&!t;return e.jsx(L,{testId:"modal-walnut-content",type:"success",size:"fullscreen",isOpen:s,onClose:a,visuallyHiddenHeader:!0,children:e.jsxs("div",{className:"flex h-full flex-col overflow-hidden",children:[e.jsx(U,{onClose:a,onPlay:()=>g(!t),title:y,contentType:l,clientThreadId:o}),x&&e.jsx(X,{presentation:i,selectedSlideIdx:r.selectedSlideIdx,setSelectedSlideIdx:p=>w(n,p),isWalnutV2Enabled:f,isEditing:j,setIsEditing:u}),c&&e.jsx(Y,{workbook:d,selectedSheetIdx:r.selectedSheetIdx}),!1,t&&e.jsx(H,{startIndex:0,onExit:a,walnutId:n}),!x&&!c&&!0&&!t&&e.jsx("div",{className:"flex h-full w-full items-center justify-center",children:e.jsx(N,{id:"walnut.noFile",defaultMessage:"No file selected."})})]})})}const ee=({clientThreadId:s})=>{const{isOpen:a,close:o}=I(),t=a?e.jsx(Z,{isOpen:a,onClose:o,clientThreadId:s}):null;return e.jsx(P,{children:t},s)},ce=s=>{const a=S.useRef(null);return e.jsx(V,{ref:a,onError:(o,t)=>{O(),setTimeout(()=>{a.current?.resetErrorBoundary()}),A.addError(o,{componentStack:t})},name:"walnut-focused-view",children:e.jsx(ee,{...s})})};export{ce as WalnutFocusedViewManager};
//# sourceMappingURL=darr7nkdyg5ck7c2.js.map
