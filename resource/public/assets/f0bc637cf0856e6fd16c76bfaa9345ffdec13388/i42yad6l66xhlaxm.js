import{aq as P,a as A,e as O,b as D,b2 as E,aa as R,a5 as B,aA as I,kg as T,C as _,a1 as U,c2 as h,R as b,pB as L,pC as F,b5 as H,m7 as Y,aH as j,c0 as w,aZ as G}from"./lgw4q0e8zlqqfgug.js";import{r as u,f as K,j as e,M as t,d as q,a as z}from"./m60bpb0x3x7rg8fj.js";import{ek as Q,el as Z,bK as J,em as V}from"./ggjzadbnd3k1vu0k.js";import{H as X}from"./249ji6zbk1u6d1qa.js";function $(){const r=P(),{data:n}=A();O();const a=D(n),p=a!=null||n!=null,[c,o]=u.useState(!1),d=n?.accountItems,v=Q(a?.id??""),g=Z(),W=a?.id,l=d?.find(i=>i.id===W),x=!(a?.eligibleForReactivation??!1),M=a?.isOwnerOfAccount()&&a.isTeam()&&!a.hasPaidSubscription()&&!x,S=a?.isOwnerOfAccount()&&a.isTeam()&&a.hasPaidSubscription()&&!x,m=d?.filter(i=>!i.isDeactivated()),k=K(),N=E();let f=T;a&&(f=a.mustGetSubscriptionBillingCurrency("DeactivatedWorkspaceModal")),u.useEffect(()=>{a||(R.addError(new Error("Current account is undefined in DeactivatedWorkspaceModal")),B.logEvent("chatgpt_undefined_current_account"))},[a]);const C=u.useCallback(()=>{o(!0),I.setPurchaseWorkspaceData({minimumSeats:Math.max(v,g),billingDetails:{currency:f},existingAccount:l}),o(!1)},[v,l,f,g]),y=async()=>{o(!0);try{const i=await b.safeGet("/payments/customer_portal",{intercomEventOnError:"fetch-error:customer_portal:get"});location.href=i.url,o(!1)}catch{o(!1),N.warning(k.formatMessage(s.unableToOpenStripeDashboard),{hasCloseButton:!0})}};return a==null||!l||!m?e.jsx(e.Fragment,{}):e.jsx(_,{testId:"modal-deactivated-workspace",type:"success",onClose:U,isOpen:p,title:e.jsx("span",{className:"text-lg",children:e.jsx(t,{...s.workspaceDeactivated})}),children:e.jsxs("div",{className:"flex flex-col items-center justify-center gap-4",children:[e.jsxs("div",{className:"flex w-full items-center gap-2",children:[e.jsx(J,{src:l.data.profilePictureUrl}),e.jsx("div",{children:l.data.name})]}),e.jsx("div",{children:e.jsxs("ul",{className:"list-disc ps-5 text-sm",children:[e.jsx("li",{className:"mb-1",children:e.jsx(t,{...s.chatHistoryUnavailable})}),e.jsx("li",{children:e.jsx(t,{...s.otherWorkspacesAvailable})})]})}),M&&e.jsxs("div",{className:"flex w-full flex-col",children:[e.jsx("p",{children:e.jsx(t,{...s.purchaseNewSubscription})}),e.jsx(h,{className:"m-auto mt-2 w-full",loading:c,onClick:C,children:e.jsx(t,{...s.purchaseNewSubscriptionButton})})]}),S&&e.jsxs("div",{className:"flex w-full flex-col",children:[e.jsx("p",{children:e.jsx(t,{...s.resolveOutstandingInvoice})}),e.jsx(h,{className:"m-auto mt-2 w-full",loading:c,onClick:y,children:e.jsx(t,{...s.manageSubscriptionButton})})]}),e.jsx(X,{}),e.jsx("div",{className:"w-full justify-center",children:m.length>0?e.jsxs(e.Fragment,{children:[e.jsx("h3",{className:"mb-2 text-base font-normal",children:e.jsx(t,{...s.selectWorkspace})}),e.jsx(V,{data:m})]}):e.jsxs("div",{className:"flex flex-col gap-6 text-sm",children:[e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx("h3",{className:"text-base font-normal",children:e.jsx(t,{...s.createPersonalWorkspace})}),e.jsx(t,{...s.deactivatedWorkspaceReason})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsxs("div",{className:"flex w-full items-center gap-2",children:[r&&r.picture&&e.jsx("img",{alt:"Profile",src:r.picture,className:"flex h-6 w-6 items-center justify-center rounded-full"}),r&&e.jsx("span",{className:"truncate",children:r.name})]}),e.jsx(h,{title:k.formatMessage(s.createPersonalWorkspaceButton),loading:c,onClick:async()=>{o(!0),await b.safePost("/accounts/personal"),L(F),H()},color:"primary",className:"ms-4"})]})]})})]})})}const s=q({workspaceDeactivated:{id:"deactivatedWorkspaceModal.workspaceDeactivated",defaultMessage:"Your workspace has been deactivated"},chatHistoryUnavailable:{id:"deactivatedWorkspaceModal.chatHistoryUnavailable",defaultMessage:"Your chat history and settings will not be available."},otherWorkspacesAvailable:{id:"deactivatedWorkspaceModal.otherWorkspacesAvailable",defaultMessage:"You will still be able to use ChatGPT with the other workspaces associated with this email address."},selectWorkspace:{id:"deactivatedWorkspaceModal.selectWorkspace",defaultMessage:"Select a workspace to continue"},createPersonalWorkspace:{id:"deactivatedWorkspaceModal.createPersonalWorkspace",defaultMessage:"Create a personal workspace to continue"},deactivatedWorkspaceReason:{id:"deactivatedWorkspaceModal.deactivatedWorkspaceReason",defaultMessage:"Because your workspace has been deactivated, you need to create a personal workspace to continue using ChatGPT."},createPersonalWorkspaceButton:{id:"deactivatedWorkspaceModal.createPersonalWorkspaceButton",defaultMessage:"Create a personal workspace"},unableToOpenStripeDashboard:{id:"deactivatedWorkspaceModal.unableToOpenStripeDashboard",defaultMessage:"Unable to open Stripe dashboard"},purchaseNewSubscription:{id:"deactivatedWorkspaceModal.purchaseNewSubscription",defaultMessage:"You can reactivate your workspace by purchasing a new subscription."},purchaseNewSubscriptionButton:{id:"deactivatedWorkspaceModal.purchaseNewSubscriptionButton",defaultMessage:"Purchase subscription"},resolveOutstandingInvoice:{id:"deactivatedWorkspaceModal.resolveOutstandingInvoice",defaultMessage:"You can reactivate your workspace by resolving an outstanding invoice on your subscription."},manageSubscriptionButton:{id:"deactivatedWorkspaceModal.manageSubscriptionButton",defaultMessage:"Manage subscription"}}),oe=Y(function(){const n=j(w.workspaces),a=G(),p=j(w.workspaceId),c=n.find(d=>d.id===p),o=z();return u.useEffect(()=>{a&&(!c||!c.deactivated)&&o("/")},[a,c,o]),a&&(!c||!c.deactivated)?e.jsx("div",{}):e.jsx($,{})});export{oe as default};
//# sourceMappingURL=i42yad6l66xhlaxm.js.map
