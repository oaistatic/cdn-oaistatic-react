import{f as I,h as j,r as d,i as N,d as P,j as e,M as B}from"./m60bpb0x3x7rg8fj.js";import{u as C}from"./dtpfza6h9i0ex0bu.js";import{b2 as E,R as h,C as F,hn as S,B as f}from"./lgw4q0e8zlqqfgug.js";import"./ggjzadbnd3k1vu0k.js";import"./hy6s1jaxh8po14h5.js";import"./d4l47j95cc16bbv9.js";import"./mlo67gs1ylzshmge.js";import"./h81zqbvh0a7amk0o.js";import"./og0mzunrykkt4tp0.js";import"./lff9oru7r5vtmz06.js";import"./kl7c6054usfnqmd4.js";import"./mia7qmdupqoji40k.js";import"./jk1xz4ir2z9wt21v.js";import"./fuq4frieju7b1bzx.js";import"./k7xqg1gcnx5m6h91.js";import"./mzp048mocl5te1fn.js";import"./mb9azmyuz6lg619u.js";import"./m40e1ct7so23v704.js";import"./ha73j9iy5pkvdx6y.js";import"./fnje4v6gzdtvboh3.js";import"./jozqsyj8lvw2y89i.js";import"./l0p6qq8f8it6pgl9.js";import"./oo5ncbfpx577zaun.js";import"./glu06a3y5u0laqff.js";import"./kime2kclye4c7vau.js";import"./opnqtrf44t0g14xb.js";import"./nzzchhib31ujph3g.js";import"./nyb6qzfj9cwbbq9m.js";import"./hkzcnlt7dmtlzav8.js";import"./jh8srhgrrwf9rrcc.js";import"./iej0cupg2dqkmejt.js";import"./ls4akj6tri7bc2dz.js";import"./dgb06x9f8z6d0ar9.js";import"./dl0t1ee5jw6sc80q.js";import"./d71wc8yq330unren.js";import"./l45weg13jezcq847.js";import"./fg36ujrp67ag8qf3.js";import"./ihfhk4rvbppxuc1w.js";import"./c2ydsdl029zi541a.js";import"./c3kvde7di7mudh4j.js";import"./fxr8k06ldp92zu6e.js";import"./lp550lzjbjov6tk6.js";import"./mw537ymyyyvf0hlo.js";import"./je5fxp5a852v8yln.js";import"./d03j86wbldy8g9mv.js";import"./m8dywj7vwik95qv3.js";import"./dirudxvdak8r6a17.js";import"./jykd7v1tpigt9yby.js";import"./jiql7n7371z0m4r5.js";import"./hg1hygbe4ieqyyvy.js";import"./g4tl5lt9yqf20m4s.js";import"./kxo4brqbh86yrfh4.js";import"./o5edhf9v3hg4igci.js";import"./ofmk3rqjad14dft0.js";import"./hg4cf4xjdtnguqel.js";import"./bk8slwxjkdlmxjxm.js";import"./cs281ckvaib8kadh.js";function Qe({amphora_id:b,onClose:n}){const a=I(),l=j(),s=C(),x=E(),[M,g]=d.useState(b??null),[p,v]=d.useState(""),[i,y]=d.useState(""),c=N({mutationFn:async({email:t,role:m})=>{let o=M;if(!o){const u=m==="owner"?"member_role":"owner";if(o=(await h.safePost("/amphora",{requestBody:{role:u}}))?.id??null,!o)throw window.location.reload(),new Error("Failed to create amphora group");g(o),l.setQueryData(["amphora"],w=>({...w??{},id:o,role:u}))}if(!o)throw new Error("Failed to determine amphora id");return await h.safePost("/amphora/{amphora_id}/members",{parameters:{path:{amphora_id:o}},requestBody:{members:[{email:t,role:m}]}}),o},onSuccess:t=>{l.invalidateQueries({queryKey:["amphora"]}),t&&l.invalidateQueries({queryKey:["amphora",t]}),n()},onError:t=>{const m=t instanceof Error?t.message:String(t);x.danger(a.formatMessage(r.inviteError,{error:m}),{toastId:"amphora_invite_error"})}});return e.jsxs(F,{testId:"modal-invite-members-to-amphora",isOpen:!0,onClose:n,size:"custom",showCloseButton:!0,className:"max-w-md text-sm",title:s(a.formatMessage(r.inviteMemberModalTitle)),description:e.jsx("p",{children:a.formatMessage(r.inviteMemberModalDescription)}),children:[e.jsxs("div",{className:"flex flex-col gap-4",children:[e.jsxs("div",{className:"flex flex-col",children:[e.jsx("label",{htmlFor:"email",className:"mb-2 text-sm font-medium",children:a.formatMessage(r.invitesInputLabel)}),e.jsx(S,{name:"email",ariaLabel:!1,className:"",type:"email",value:p,onChange:t=>v(t.target.value),placeholder:a.formatMessage(r.invitesInputPlaceholder)}),e.jsx("p",{className:"text-token-text-tertiary mt-1 text-xs",children:a.formatMessage(r.invitesInputHelperText)})]}),e.jsxs("div",{className:"mt-4 flex flex-col",children:[e.jsx("hr",{className:"border-token-border-default my-1"}),e.jsxs("div",{className:"flex items-center justify-between py-1",children:[e.jsx("label",{htmlFor:"amphora-role",className:"text-sm font-medium",children:a.formatMessage(r.relationshipQuestion)}),e.jsxs("select",{id:"amphora-role",value:i,onChange:t=>y(t.target.value),className:"text-token-text-primary border-0 bg-transparent text-sm outline-none focus:ring-0 focus:outline-none",children:[e.jsx("option",{value:"",children:a.formatMessage(r.selectPlaceholder)}),e.jsx("option",{value:"owner",children:s(a.formatMessage(r.roleOwner))}),e.jsx("option",{value:"member_role",children:s(a.formatMessage(r.roleMember))})]})]}),e.jsx("hr",{className:"border-token-border-default my-1"})]}),i==="owner"?e.jsx("p",{className:"text-token-text-tertiary text-xs",children:s(a.formatMessage(r.relationshipInfoForMember))}):i==="member_role"?e.jsx("p",{className:"text-token-text-tertiary text-xs",children:s(a.formatMessage(r.relationshipInfoForOwner))}):null]}),e.jsxs("div",{className:"mt-8 flex justify-end gap-2",children:[e.jsx(f,{color:"secondary",onClick:n,children:a.formatMessage(r.cancelButton)}),e.jsx(f,{onClick:()=>{const t=i==="owner"?"owner":"member_role";c.mutate({email:p,role:t})},disabled:!p||!i||c.isPending,children:e.jsx(B,{...r.modalInviteButton})})]})]})}const r=P({inviteMemberModalTitle:{id:"amphora.inviteMemberModalTitle",defaultMessage:"Invite amphora member"},inviteError:{id:"amphora.members.inviteError",defaultMessage:"Unable to send invite: {error}"},inviteMemberModalDescription:{id:"amphora.inviteMemberModalDescription",defaultMessage:"Enter the email address of the user to invite."},invitesInputPlaceholder:{id:"amphora.members.invitesInputPlaceholder",defaultMessage:"name@example.com"},invitesInputLabel:{id:"amphora.members.invitesInputLabel",defaultMessage:"Email address"},invitesInputHelperText:{id:"amphora.members.invitesInputHelperText",defaultMessage:"We'll send your amphora member an email to link to your ChatGPT account."},cancelButton:{id:"amphora.members.cancelButton",defaultMessage:"Cancel"},modalInviteButton:{id:"amphora.members.modalInviteButton",defaultMessage:"Send"},roleSelectLabel:{id:"amphora.members.roleSelectLabel",defaultMessage:"Role"},relationshipQuestion:{id:"amphora.members.relationshipQuestion",defaultMessage:"What is their relationship to you?"},selectPlaceholder:{id:"amphora.members.selectPlaceholder",defaultMessage:"Select"},relationshipInfoForOwner:{id:"amphora.members.relationshipInfoForOwner",defaultMessage:"By linking to your member_role's account, you'll be able to manage some of their settings and receive safety alerts if ChatGPT is used in ways that could be harmful. You won't have access to your member_role's conversations with ChatGPT."},relationshipInfoForMember:{id:"amphora.members.relationshipInfoForMember",defaultMessage:"Your owner will be able to manage some of your settings and get an alert if something risky happens. They won't have access to your conversations with ChatGPT."},roleMember:{id:"amphora.members.inviteModalRoleMember",defaultMessage:"Member_role"},roleOwner:{id:"amphora.members.inviteModalRoleOwner",defaultMessage:"Owner"}});export{Qe as default};
//# sourceMappingURL=bqvo4sufgsasppmw.js.map
