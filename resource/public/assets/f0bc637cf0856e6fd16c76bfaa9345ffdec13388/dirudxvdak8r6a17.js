import{r as u,j as e,M as g,f as A,d as T}from"./m60bpb0x3x7rg8fj.js";import{io as F,ip as L,b2 as O,iq as E,B as R,k as U,U as b,m as X,ix as f,e as N,p as P,o as H,x as W,il as h,ge as B,iy as z}from"./lgw4q0e8zlqqfgug.js";import{eX as G,eY as J,al as l,eZ as K,e_ as Y,e$ as $,f0 as q,f1 as Z,f2 as Q}from"./ggjzadbnd3k1vu0k.js";import{S as ee}from"./jykd7v1tpigt9yby.js";function se({voice:s,voiceSpeed:n}){const[r,a]=u.useState(!1),t=F(),i=s.voice,d=s.preview_url,c=u.useRef({playPromise:null}).current,o=L(x=>x.isPlaying&&x.sourceUrl===d);u.useEffect(()=>{t&&t.setSpeed(n)},[t,n]);const p=O(),V=u.useCallback(async()=>{if(!t)return;const x={voice:i,source:d};E.previews.click(x);try{a(!0),t.changeSource(d),c.playPromise=t.play(),a(!1)}catch(k){E.previews.error(k,x),p.danger({defaultMessage:"Something went wrong playing preview",description:"Error message when message playing the preview fails"},{toastId:"voice_preview_player_play_error"})}},[t,d,i,c,p]),m=u.useCallback(()=>{t&&(c.playPromise?c.playPromise.then(()=>{t.stop(),c.playPromise=null}):t.stop())},[t,c]),D=u.useCallback(()=>{o?m():r||V()},[m,V,r,o]);return u.useEffect(()=>()=>{o&&m()},[s,o,m]),e.jsx(R,{onClick:D,color:"secondary",className:"flex flex-row flex-nowrap items-center gap-1 border-none font-normal",loading:r,icon:o?ee:G,children:o?e.jsx(g,{id:"yGpEMJ",defaultMessage:"Stop"}):e.jsx(g,{id:"JwYDVp",defaultMessage:"Play"})})}const j=.5,v=2,_=.1,I=Math.round((v-j)/_),te=Array.from({length:I+1},(s,n)=>n),C=2,S=8,M=(S-C)/2,ne=s=>{const n=Number(s);return isNaN(n)?1:n};function ae(){const s=N();return P(s,"174366048")}function ie(){const s=N();return P(s,"3302173089")}function pe(){const s=ae(),n=U(),r=ie(),{isLoading:a,value:t,setValue:i}=y(b.VoiceSpeed),d=ne(t),c=J();if(!s)return null;const o=n?.length&&!n?.includes(X.VideoScreenSharing);return e.jsxs(e.Fragment,{children:[c&&e.jsx(f,{children:e.jsx(re,{})}),e.jsx(f,{children:e.jsx(oe,{voiceSpeed:d})}),r&&e.jsx(f,{children:e.jsx(le,{voiceSpeed:d,setVoiceSpeed:i,isLoading:a})}),o&&e.jsx(f,{children:e.jsx(ce,{})})]})}function y(s,n=!1){const{data:r,isLoading:a}=H(s)||{},t=W(n);return{isLoading:a,value:r,setValue:i=>{t.mutate({setting:s,value:i})}}}function oe({voiceSpeed:s}){const{isLoading:n,value:r,setValue:a}=y(b.VoiceName),t=K(),i=Y(),d=n?"":$(r,i),c=t.find(({voice:o})=>o===d);return e.jsx(e.Fragment,{children:e.jsx("div",{className:"flex flex-col flex-nowrap gap-2",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{children:e.jsx(g,{id:"speechSettings.content.voice",defaultMessage:"Voice"})}),e.jsxs("div",{className:"flex flex-row flex-nowrap items-center gap-1",children:[c?e.jsxs(e.Fragment,{children:[e.jsx(se,{voice:c,voiceSpeed:s}),e.jsx("div",{className:"h-4 border-s"})]}):null,e.jsxs(l.Root,{value:d,onValueChange:o=>a(o),disabled:n,children:[e.jsxs(l.Trigger,{children:[e.jsx(l.Value,{}),e.jsx(l.Icon,{})]}),e.jsx(l.Portal,{children:e.jsx(l.Content,{children:t.map(({voice:o,name:p})=>e.jsx(l.Item,{value:o,children:p},o))})})]})]})]})})})}function le({voiceSpeed:s,setVoiceSpeed:n,isLoading:r}){const[a,t]=u.useState(s);return u.useEffect(()=>t(s),[s]),e.jsxs("div",{className:"flex w-full flex-col gap-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{children:e.jsx(g,{id:"speechSettings.content.voiceSpeed",defaultMessage:"Voice speed"})}),e.jsx("div",{className:"text-token-text-secondary tabular-nums",children:e.jsx(g,{id:"speechSettings.content.voiceSpeed.current",defaultMessage:"{value}x",values:{value:a.toFixed(1)}})})]}),e.jsx("div",{className:"w-full",children:e.jsx("div",{className:"flex items-center gap-3",children:e.jsxs(q,{className:"relative flex w-full items-center",min:j,max:v,step:_,value:[a],disabled:r,onValueChange:i=>t(i[0]),onValueCommit:i=>{const d=i[0],c=Math.min(v,Math.max(j,d));n(c.toString())},children:[e.jsxs(Z,{className:"relative h-[4px] grow rounded-full",children:[e.jsx("div",{className:"bg-token-text-tertiary/30 absolute top-0 bottom-0 rounded-full",style:{left:M,right:M}}),e.jsx("div",{className:"pointer-events-none absolute top-0 bottom-0",style:{left:S/2,right:S/2},children:te.map(i=>e.jsx("div",{className:"bg-token-text-secondary/30 absolute top-[-2px] bottom-[-2px] rounded",style:{width:C,left:`${i/I*100}%`,transform:"translateX(-50%)"}},i))})]}),e.jsx(Q,{className:"bg-token-bg-primary border-token-bg-secondary block h-[24px] cursor-pointer rounded-full border focus:outline-none",style:{width:S}})]})})})]})}function re(){const{isLoading:s,value:n,setValue:r}=y(b.VoiceMainLanguage);return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{children:e.jsx(g,{id:"speechSettings.content.language",defaultMessage:"Spoken language"})}),e.jsxs(l.Root,{value:s?"":n??h.Auto,onValueChange:a=>r(a),disabled:s,children:[e.jsxs(l.Trigger,{children:[e.jsx(l.Value,{}),e.jsx(l.Icon,{})]}),e.jsx(l.Portal,{children:e.jsxs(l.Content,{position:"popper",style:{maxHeight:"calc(var(--radix-select-content-available-height) - 5rem)"},children:[e.jsx(l.Item,{value:h.Auto,children:e.jsx(g,{id:"speechSettings.content.autoDetect",defaultMessage:"Auto-detect"})}),Object.entries(h).filter(([a,t])=>t!==h.Auto).map(([a,t])=>e.jsx(l.Item,{value:t,className:"capitalize",children:a},t))]})})]})]}),e.jsx(B,{children:e.jsx(g,{id:"speechSettings.content.autoDetectDescription",defaultMessage:"For best results, select the language you mainly speak. If it's not listed, it may still be supported via auto-detection."})})]})}function ce(){const s=A();return e.jsx(z,{label:s.formatMessage(w.voiceAndScreenSharing),enabled:!1,onChange:()=>{},disabled:!0,description:s.formatMessage(w.voiceAndScreenSharingDescription)})}const w=T({voiceAndScreenSharing:{id:"9dnywk",defaultMessage:"Voice and screen sharing"},voiceAndScreenSharingDescription:{id:"wjwSas",defaultMessage:"Sharing your screen and video while in voice mode has been disabled by your workspace administrator."}});export{pe as S,y as u};
//# sourceMappingURL=dirudxvdak8r6a17.js.map
