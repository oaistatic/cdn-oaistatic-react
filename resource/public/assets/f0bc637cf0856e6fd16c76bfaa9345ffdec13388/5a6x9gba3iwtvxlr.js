const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/denr7ds3sm1ere5w.js","assets/m60bpb0x3x7rg8fj.js","assets/nqmrqp6oj37scesd.js","assets/j770ggbjd02m3hqj.js","assets/lgw4q0e8zlqqfgug.js","assets/root-otc54kct.css","assets/koh2m2w2ywhm6pl3.js","assets/ggjzadbnd3k1vu0k.js","assets/conversation-small-j0gcsxmz.css","assets/9q3v44p2xpoi75pn.js","assets/cum2m9ppsxjdt1u5.js","assets/ns51nblw8ziscsgd.js","assets/jy1u8exw8iz2slve.js","assets/hs2mcew9gnq8d8k8.js","assets/g4h5bud8allgzrnd.js","assets/g5bh4mjh9t2vmm93.js","assets/i4rip6yaxdxd1xd5.js","assets/cyridnrl7jpyirze.js","assets/comments-plugin-tah3dlup.css","assets/codemirror-gmx89wcl.css","assets/lfugw8qvvom7caj7.js","assets/n70zh1fo8aekhdb0.js","assets/lf8mxjdfum7t34gh.js","assets/d4l47j95cc16bbv9.js","assets/mlo67gs1ylzshmge.js","assets/h81zqbvh0a7amk0o.js","assets/bk8slwxjkdlmxjxm.js","assets/og0mzunrykkt4tp0.js","assets/lff9oru7r5vtmz06.js","assets/tfkm8dsw7zx8il21.js","assets/rx5cs0ja7c7phupc.js","assets/n5yj38pa2aamrsfp.js","assets/mog17ocsx2bkw4q4.js","assets/evlyokzg1xrjbsou.js","assets/pclfr6lyaiirijb5.js","assets/n9mc8ay6b1mvrc8r.js","assets/g61ghrdmm0y010eo.js","assets/kfjcy5y4cxuymbdf.js","assets/imrl18sy28ygoppx.js","assets/kh89q49991ykwivd.js","assets/kl7c6054usfnqmd4.js","assets/mia7qmdupqoji40k.js","assets/cqdszxwxh9yigbop.js","assets/nfp56eju7l2tzdoe.js","assets/iu6ics6kflocby0n.js","assets/dj5wvooi5050kuwj.js","assets/ekc4a26ow669vmxe.js","assets/envm9t71cd7luwm9.js","assets/h69gi6rcjg78v64i.js","assets/pc2givv05uuq8g6l.js","assets/prosemirror-eh65ggsy.css","assets/enuwppfnm9s2n8ir.js","assets/m9elivgqkyz3hcka.js"])))=>i.map(i=>d[i]);
import{j as p,m as he,A as xe,r as L,f as le,d as Ce,g as Ee,i as ge}from"./m60bpb0x3x7rg8fj.js";import{Z as be,C as ue}from"./jy1u8exw8iz2slve.js";import{z as T,cq as ce,bc as ye,b_ as fe,ld as me,b$ as J,e as Te,b2 as pe,m1 as De,du as Oe,aa as _e,R as Le,P as Z}from"./lgw4q0e8zlqqfgug.js";import{N as we,cW as Ie,qq as Ne,qr as Ae,bO as Re,sm as Me,qs as ke,sn as Se,dm as r,di as je,dl as Pe,dj as Be,so as ze,bL as Fe,bm as qe,sp as $e,lQ as Q,lR as He,Y as Ge}from"./ggjzadbnd3k1vu0k.js";import{b as V}from"./g61ghrdmm0y010eo.js";import{B as Ue}from"./kfjcy5y4cxuymbdf.js";import{c as Je}from"./cum2m9ppsxjdt1u5.js";import{u as Ye}from"./9q3v44p2xpoi75pn.js";import{s as de}from"./imrl18sy28ygoppx.js";import{d as B}from"./kl7c6054usfnqmd4.js";import{g as We}from"./mia7qmdupqoji40k.js";import{r as Xe}from"./cqdszxwxh9yigbop.js";function Ze({className:e,zIndexKey:n,onClick:t}){return p.jsx(he.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:T("absolute inset-0",e,be[n]),onClick:t})}function Qe({zIndexKey:e,onClick:n}){return p.jsx(Ze,{zIndexKey:e,onClick:n,className:"bg-gray-50/50 dark:bg-black/50"})}const Ve=({onScroll:e})=>(Me(({scrollTop:n})=>{e?.(n)}),null),Ke=({shouldScrollToTop:e})=>{const n=ke();return L.useEffect(()=>{e===!0&&n({behavior:"smooth"})},[e,n]),null},en=()=>{const e=Ne();L.useEffect(()=>{e({behavior:"smooth"})},[e]);const[n]=Ae();return n?null:p.jsx("button",{onClick:()=>e({behavior:"smooth"}),className:"border-token-border-default bg-token-main-surface-primary text-token-text-secondary absolute end-1/2 bottom-5 z-10 flex h-8 w-8 translate-x-1/2 cursor-pointer items-center justify-center rounded-full border bg-clip-padding",children:p.jsx(Re,{className:"icon text-token-text-primary"})})};function nn({children:e,onScroll:n,shouldScrollToTop:t,scrollToBottomMode:o="top",isLoading:a=!1,header:s,height:i="auto",overlay:u,hideChildren:m=!1,disableScroll:l=!1,ref:c}){const f=p.jsx("div",{className:T(m?"hidden":"block",i==="auto"?"h-auto":"h-full"),children:e});return p.jsxs("section",{ref:c,className:T("relative flex min-h-0 flex-auto grow flex-col",l&&"overflow-hidden"),children:[p.jsx(xe,{children:a&&p.jsx(Qe,{zIndexKey:"textdocDiffLoadingOverlay"})}),!l&&p.jsxs(Ue,{followButtonClassName:"hidden",initialScrollBehavior:"auto",scrollViewClassName:"flex flex-col",className:"h-full",mode:o,children:[s,f,u&&p.jsx("div",{className:"pointer-events-none w-full flex-1",children:u}),o==="bottom"&&p.jsx(en,{}),p.jsx(Ve,{onScroll:n}),p.jsx(Ke,{shouldScrollToTop:t})]}),l&&p.jsxs(p.Fragment,{children:[s,f,u&&p.jsx("div",{className:"pointer-events-none h-full w-full",children:u})]})]})}function tn({className:e,children:n}){return p.jsx("header",{className:T(e,"touch:px-2.5 h-header-height flex flex-none items-center justify-between gap-1 px-2"),children:n})}function on({className:e,children:n,size:t="lg",bold:o}){return p.jsx("h2",{className:T(e,"text-token-text-primary truncate",o?"font-bold":"font-normal",t==="lg"&&"text-lg",t==="base"&&"text-base"),children:n})}const sn=({onClick:e})=>{const t=ce()?Ie:ye;return p.jsx(we,{icon:t,onClick:e})},K=e=>{const{r:n,g:t,b:o}=V.toRGBA(V.parse(e));return(n*299+t*587+o*114)/1e3<125},k=({children:e,isPreviewingCode:n=!1,transitionBackground:t=!1,previewBackgroundColor:o=null})=>{const a=n&&o&&K(o),s=n&&o&&!K(o);return p.jsx("section",{className:T("popover flex h-full w-full flex-col",t&&"transition-colors",a&&"dark",s&&"light",n?"bg-[rgba(249,249,249,1)] dark:bg-[rgba(33,33,33,1)]":"bg-transparent"),style:{backgroundColor:n&&o?o:void 0},children:e})};k.Title=on;k.CloseButton=sn;k.Header=tn;k.Content=nn;const an=fe(()=>J(()=>import("./denr7ds3sm1ere5w.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42])).then(e=>e.CodeComposer),{loading:()=>p.jsx("div",{className:ue.code,children:p.jsx("div",{className:"h-full w-full px-4",children:p.jsx(me,{lines:20})})})}),Fn=e=>p.jsx(an,{...e}),qn=(e=[])=>e.filter(({status:n})=>n!==Se.DISMISSED);var rn=(e=>(e.ALL_HIDDEN="all_hidden",e.COMMENTS_READONLY="comments_readonly",e.ENABLED="enabled",e))(rn||{});const ee=775,ln=580,un=36,cn=18,$n=24,Hn=16,fn=({numLines:e=20})=>{const[{width:n},t]=Ye(),o=ce(),a=n>=ee+Je?ee:ln,s=o?cn:un;return p.jsx("div",{className:T(ue.document,"mt-4"),ref:t,style:{margin:`0 ${s}px`},children:p.jsx("div",{style:{width:a},children:p.jsx(me,{lines:e})})})},mn=fe(()=>J(()=>import("./nfp56eju7l2tzdoe.js"),__vite__mapDeps([43,1,44,4,5,16,3,15,10,7,8,11,12,9,17,14,6,13,18,45,39,46,47,48,49,50,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,40,41,42])).then(e=>e.DocumentComposer),{loading:({value:e,width:n=window.innerWidth})=>p.jsx(fn,{numLines:Math.ceil(e.length/(n/8))})}),Gn=e=>p.jsx(mn,{...e});function E(){}E.prototype={diff:function(n,t){var o,a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},s=a.callback;typeof a=="function"&&(s=a,a={});var i=this;function u(d){return d=i.postProcess(d,a),s?(setTimeout(function(){s(d)},0),!0):d}n=this.castInput(n,a),t=this.castInput(t,a),n=this.removeEmpty(this.tokenize(n,a)),t=this.removeEmpty(this.tokenize(t,a));var m=t.length,l=n.length,c=1,f=m+l;a.maxEditLength!=null&&(f=Math.min(f,a.maxEditLength));var h=(o=a.timeout)!==null&&o!==void 0?o:1/0,x=Date.now()+h,v=[{oldPos:-1,lastComponent:void 0}],C=this.extractCommon(v[0],t,n,0,a);if(v[0].oldPos+1>=l&&C+1>=m)return u(ne(i,v[0].lastComponent,t,n,i.useLongestToken));var g=-1/0,b=1/0;function I(){for(var d=Math.max(g,-c);d<=Math.min(b,c);d+=2){var y=void 0,D=v[d-1],O=v[d+1];D&&(v[d-1]=void 0);var P=!1;if(O){var W=O.oldPos-d;P=O&&0<=W&&W<m}var X=D&&D.oldPos+1<l;if(!P&&!X){v[d]=void 0;continue}if(!X||P&&D.oldPos<O.oldPos?y=i.addToPath(O,!0,!1,0,a):y=i.addToPath(D,!1,!0,1,a),C=i.extractCommon(y,t,n,d,a),y.oldPos+1>=l&&C+1>=m)return u(ne(i,y.lastComponent,t,n,i.useLongestToken));v[d]=y,y.oldPos+1>=l&&(b=Math.min(b,d-1)),C+1>=m&&(g=Math.max(g,d+1))}c++}if(s)(function d(){setTimeout(function(){if(c>f||Date.now()>x)return s();I()||d()},0)})();else for(;c<=f&&Date.now()<=x;){var N=I();if(N)return N}},addToPath:function(n,t,o,a,s){var i=n.lastComponent;return i&&!s.oneChangePerToken&&i.added===t&&i.removed===o?{oldPos:n.oldPos+a,lastComponent:{count:i.count+1,added:t,removed:o,previousComponent:i.previousComponent}}:{oldPos:n.oldPos+a,lastComponent:{count:1,added:t,removed:o,previousComponent:i}}},extractCommon:function(n,t,o,a,s){for(var i=t.length,u=o.length,m=n.oldPos,l=m-a,c=0;l+1<i&&m+1<u&&this.equals(o[m+1],t[l+1],s);)l++,m++,c++,s.oneChangePerToken&&(n.lastComponent={count:1,previousComponent:n.lastComponent,added:!1,removed:!1});return c&&!s.oneChangePerToken&&(n.lastComponent={count:c,previousComponent:n.lastComponent,added:!1,removed:!1}),n.oldPos=m,l},equals:function(n,t,o){return o.comparator?o.comparator(n,t):n===t||o.ignoreCase&&n.toLowerCase()===t.toLowerCase()},removeEmpty:function(n){for(var t=[],o=0;o<n.length;o++)n[o]&&t.push(n[o]);return t},castInput:function(n){return n},tokenize:function(n){return Array.from(n)},join:function(n){return n.join("")},postProcess:function(n){return n}};function ne(e,n,t,o,a){for(var s=[],i;n;)s.push(n),i=n.previousComponent,delete n.previousComponent,n=i;s.reverse();for(var u=0,m=s.length,l=0,c=0;u<m;u++){var f=s[u];if(f.removed)f.value=e.join(o.slice(c,c+f.count)),c+=f.count;else{if(!f.added&&a){var h=t.slice(l,l+f.count);h=h.map(function(x,v){var C=o[c+v];return C.length>x.length?C:x}),f.value=e.join(h)}else f.value=e.join(t.slice(l,l+f.count));l+=f.count,f.added||(c+=f.count)}}return s}function te(e,n){var t;for(t=0;t<e.length&&t<n.length;t++)if(e[t]!=n[t])return e.slice(0,t);return e.slice(0,t)}function oe(e,n){var t;if(!e||!n||e[e.length-1]!=n[n.length-1])return"";for(t=0;t<e.length&&t<n.length;t++)if(e[e.length-(t+1)]!=n[n.length-(t+1)])return e.slice(-t);return e.slice(-t)}function q(e,n,t){if(e.slice(0,n.length)!=n)throw Error("string ".concat(JSON.stringify(e)," doesn't start with prefix ").concat(JSON.stringify(n),"; this is a bug"));return t+e.slice(n.length)}function $(e,n,t){if(!n)return e+t;if(e.slice(-n.length)!=n)throw Error("string ".concat(JSON.stringify(e)," doesn't end with suffix ").concat(JSON.stringify(n),"; this is a bug"));return e.slice(0,-n.length)+t}function _(e,n){return q(e,n,"")}function A(e,n){return $(e,n,"")}function se(e,n){return n.slice(0,pn(e,n))}function pn(e,n){var t=0;e.length>n.length&&(t=e.length-n.length);var o=n.length;e.length<n.length&&(o=e.length);var a=Array(o),s=0;a[0]=0;for(var i=1;i<o;i++){for(n[i]==n[s]?a[i]=a[s]:a[i]=s;s>0&&n[i]!=n[s];)s=a[s];n[i]==n[s]&&s++}s=0;for(var u=t;u<e.length;u++){for(;s>0&&e[u]!=n[s];)s=a[s];e[u]==n[s]&&s++}return s}var M="a-zA-Z0-9_\\u{C0}-\\u{FF}\\u{D8}-\\u{F6}\\u{F8}-\\u{2C6}\\u{2C8}-\\u{2D7}\\u{2DE}-\\u{2FF}\\u{1E00}-\\u{1EFF}",dn=new RegExp("[".concat(M,"]+|\\s+|[^").concat(M,"]"),"ug"),S=new E;S.equals=function(e,n,t){return t.ignoreCase&&(e=e.toLowerCase(),n=n.toLowerCase()),e.trim()===n.trim()};S.tokenize=function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},t;if(n.intlSegmenter){if(n.intlSegmenter.resolvedOptions().granularity!="word")throw new Error('The segmenter passed must have a granularity of "word"');t=Array.from(n.intlSegmenter.segment(e),function(s){return s.segment})}else t=e.match(dn)||[];var o=[],a=null;return t.forEach(function(s){/\s/.test(s)?a==null?o.push(s):o.push(o.pop()+s):/\s/.test(a)?o[o.length-1]==a?o.push(o.pop()+s):o.push(a+s):o.push(s),a=s}),o};S.join=function(e){return e.map(function(n,t){return t==0?n:n.replace(/^\s+/,"")}).join("")};S.postProcess=function(e,n){if(!e||n.oneChangePerToken)return e;var t=null,o=null,a=null;return e.forEach(function(s){s.added?o=s:s.removed?a=s:((o||a)&&ae(t,a,o,s),t=s,o=null,a=null)}),(o||a)&&ae(t,a,o,null),e};function ae(e,n,t,o){if(n&&t){var a=n.value.match(/^\s*/)[0],s=n.value.match(/\s*$/)[0],i=t.value.match(/^\s*/)[0],u=t.value.match(/\s*$/)[0];if(e){var m=te(a,i);e.value=$(e.value,i,m),n.value=_(n.value,m),t.value=_(t.value,m)}if(o){var l=oe(s,u);o.value=q(o.value,u,l),n.value=A(n.value,l),t.value=A(t.value,l)}}else if(t)e&&(t.value=t.value.replace(/^\s*/,"")),o&&(o.value=o.value.replace(/^\s*/,""));else if(e&&o){var c=o.value.match(/^\s*/)[0],f=n.value.match(/^\s*/)[0],h=n.value.match(/\s*$/)[0],x=te(c,f);n.value=_(n.value,x);var v=oe(_(c,x),h);n.value=A(n.value,v),o.value=q(o.value,c,v),e.value=$(e.value,c,c.slice(0,c.length-v.length))}else if(o){var C=o.value.match(/^\s*/)[0],g=n.value.match(/\s*$/)[0],b=se(g,C);n.value=A(n.value,b)}else if(e){var I=e.value.match(/\s*$/)[0],N=n.value.match(/^\s*/)[0],d=se(I,N);n.value=_(n.value,d)}}var vn=new E;vn.tokenize=function(e){var n=new RegExp("(\\r?\\n)|[".concat(M,"]+|[^\\S\\n\\r]+|[^").concat(M,"]"),"ug");return e.match(n)||[]};var j=new E;j.tokenize=function(e,n){n.stripTrailingCr&&(e=e.replace(/\r\n/g,`
`));var t=[],o=e.split(/(\n|\r\n)/);o[o.length-1]||o.pop();for(var a=0;a<o.length;a++){var s=o[a];a%2&&!n.newlineIsToken?t[t.length-1]+=s:t.push(s)}return t};j.equals=function(e,n,t){return t.ignoreWhitespace?((!t.newlineIsToken||!e.includes(`
`))&&(e=e.trim()),(!t.newlineIsToken||!n.includes(`
`))&&(n=n.trim())):t.ignoreNewlineAtEof&&!t.newlineIsToken&&(e.endsWith(`
`)&&(e=e.slice(0,-1)),n.endsWith(`
`)&&(n=n.slice(0,-1))),E.prototype.equals.call(this,e,n,t)};function hn(e,n,t){return j.diff(e,n,t)}var xn=new E;xn.tokenize=function(e){return e.split(/(\S.+?[.!?])(?=\s+|$)/)};var Cn=new E;Cn.tokenize=function(e){return e.split(/([{}:;,]|\s+)/)};function H(e){"@babel/helpers - typeof";return H=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(n){return typeof n}:function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},H(e)}var w=new E;w.useLongestToken=!0;w.tokenize=j.tokenize;w.castInput=function(e,n){var t=n.undefinedReplacement,o=n.stringifyReplacer,a=o===void 0?function(s,i){return typeof i>"u"?t:i}:o;return typeof e=="string"?e:JSON.stringify(G(e,null,null,a),a,"  ")};w.equals=function(e,n,t){return E.prototype.equals.call(w,e.replace(/,([\r\n])/g,"$1"),n.replace(/,([\r\n])/g,"$1"),t)};function G(e,n,t,o,a){n=n||[],t=t||[],o&&(e=o(a,e));var s;for(s=0;s<n.length;s+=1)if(n[s]===e)return t[s];var i;if(Object.prototype.toString.call(e)==="[object Array]"){for(n.push(e),i=new Array(e.length),t.push(i),s=0;s<e.length;s+=1)i[s]=G(e[s],n,t,o,a);return n.pop(),t.pop(),i}if(e&&e.toJSON&&(e=e.toJSON()),H(e)==="object"&&e!==null){n.push(e),i={},t.push(i);var u=[],m;for(m in e)Object.prototype.hasOwnProperty.call(e,m)&&u.push(m);for(u.sort(),s=0;s<u.length;s+=1)m=u[s],i[m]=G(e[m],n,t,o,m);n.pop(),t.pop()}else i=e;return i}var U=new E;U.tokenize=function(e){return e.slice()};U.join=U.removeEmpty=function(e){return e};var R=(e=>(e.ADDED="added",e.REMOVED="removed",e.UNCHANGED="unchanged",e))(R||{});function Y(e){if(e==="")return 0;const n=e.split(`
`).length;return e.endsWith(`
`)?n-1:n}function En(e,n){return hn(e,n,{newlineIsToken:!0}).map(o=>({count:o.count??Y(o.value),value:o.value,type:o.added?"added":o.removed?"removed":"unchanged"}))}function gn(e){let n="";for(const{type:t,value:o}of e)(t==="added"||t==="unchanged")&&(n+=o);return n}function bn(e,n){const t=Y(n),o=Dn(e,t);return{changes:En(o,n),numLinesDiffed:t}}function yn(e){const n=[...e],t=[],o=[];for(;n.length>0;){const a=n[n.length-1];if(a.type===R.REMOVED)n.pop(),a.type===R.REMOVED&&t.unshift(a);else if(a.type===R.ADDED)n.pop(),o.unshift(a);else break}return{prunedChanges:[...n,...o],prunedRemovedChanges:t}}function Tn(e,n){const{changes:t,numLinesDiffed:o}=bn(e,n),{prunedChanges:a,prunedRemovedChanges:s}=yn(t),i=gn(a),u=s.map(l=>l.value).join(`
`),m=ve(e,o,"start");return{content:i+u+m,numLinesDiffed:Y(i)}}function Dn(e,n){if(n<=0)return"";let t=0,o=e.length;for(let a=0;a<e.length;a++)if(e[a]===`
`&&(t++,t===n)){o=a+1;break}return e.substring(0,o)}function ve(e,n,t="start"){if(n<=0)return e;if(t==="start"){let i=0;for(let u=0;u<e.length;u++)if(e[u]===`
`&&(i++,i===n))return e.substring(u+1);return""}let o=0,a=-1;const s=e.endsWith(`
`)?n+1:n;for(let i=e.length-1;i>=0;i--)if(e[i]===`
`&&(o++,o===s)){a=i;break}return a===-1?"":e.substring(0,a+1)}function Un(e,n){const t=e?.type??r.LOADING,o=e?.content??"",a=je(e);if(!Pe(t)||n==null||!a||!Be(e))return{content:o,currentlyStreamingLineIndex:null};const s=ve(o,1,"end");if(s==="")return{content:n.content,currentlyStreamingLineIndex:0};const i=Tn(n.content,s);return{content:i.content,currentlyStreamingLineIndex:i.numLinesDiffed}}function Jn({textdocVersion:e,clientThreadId:n}){const t=Te(),o=le(),a=pe(),[s,i]=L.useState(!1),u=De(),m=ze(f=>e&&f?.lastCanvasAssistantMessageById[e.textdocId]),l=L.useRef(e?.content??"");return L.useEffect(()=>{l.current=e?.content??""},[e]),{handleCopy:f=>{s||(u(async()=>{const h=await de(l.current),x=Oe(n);e!=null&&x!=null&&m!=null&&$e(t,{type:"copy",source:"mouse",location:"canvas",selectedText:h,messageId:m,serverThreadId:x}),Q.logButtonClick(He.COPY,{contentLength:h.length,textdocType:e?.type});let v={"text/plain":h};if(e?.type===r.DOCUMENT)try{const{markdownToClipboardContent:C}=await J(async()=>{const{markdownToClipboardContent:g}=await import("./enuwppfnm9s2n8ir.js").then(b=>b.i);return{markdownToClipboardContent:g}},__vite__mapDeps([51,7,4,1,5,8,52,46,47,49]));v=C(h,[])}catch(C){Q.logError("Error copying rich text",C)}Ge(v,a,f)},0),i(!0),u(()=>i(!1),2e3))},Icon:s?Fe:qe,copyLabel:o.formatMessage(On.copy)}}const On=Ce({copy:{id:"rbIYfo",defaultMessage:"Copy"}}),ie={[r.CODE_BASH]:{filenameExtension:"sh",blobType:"text/x-shellscript"},[r.CODE_ZSH]:{filenameExtension:"zsh",blobType:"text/x-shellscript"},[r.CODE_JAVASCRIPT]:{filenameExtension:"js",blobType:"application/javascript"},[r.CODE_TYPESCRIPT]:{filenameExtension:"ts",blobType:"application/typescript"},[r.CODE_HTML]:{filenameExtension:"html",blobType:"text/html"},[r.CODE_CSS]:{filenameExtension:"css",blobType:"text/css"},[r.CODE_PYTHON]:{filenameExtension:"py",blobType:"text/x-python"},[r.CODE_JSON]:{filenameExtension:"json",blobType:"application/json"},[r.CODE_SQL]:{filenameExtension:"sql",blobType:"application/sql"},[r.CODE_GO]:{filenameExtension:"go",blobType:"text/x-go"},[r.CODE_YAML]:{filenameExtension:"yaml",blobType:"application/x-yaml"},[r.CODE_JAVA]:{filenameExtension:"java",blobType:"text/x-java-source"},[r.CODE_RUST]:{filenameExtension:"rs",blobType:"text/rust"},[r.CODE_CPP]:{filenameExtension:"cpp",blobType:"text/x-c++src"},[r.CODE_SWIFT]:{filenameExtension:"swift",blobType:"text/swift"},[r.CODE_PHP]:{filenameExtension:"php",blobType:"application/x-httpd-php"},[r.CODE_XML]:{filenameExtension:"xml",blobType:"application/xml"},[r.CODE_RUBY]:{filenameExtension:"rb",blobType:"text/x-ruby"},[r.CODE_HASKELL]:{filenameExtension:"hs",blobType:"text/x-haskell"},[r.CODE_KOTLIN]:{filenameExtension:"kt",blobType:"text/x-kotlin"},[r.CODE_CSHARP]:{filenameExtension:"cs",blobType:"text/x-csharp"},[r.CODE_C]:{filenameExtension:"c",blobType:"text/x-csrc"},[r.CODE_OBJECTIVEC]:{filenameExtension:"m",blobType:"text/x-objectivec"},[r.CODE_R]:{filenameExtension:"r",blobType:"text/plain"},[r.CODE_LUA]:{filenameExtension:"lua",blobType:"text/x-lua"},[r.CODE_DART]:{filenameExtension:"dart",blobType:"text/x-dart"},[r.CODE_SCALA]:{filenameExtension:"scala",blobType:"text/x-scala"},[r.CODE_PERL]:{filenameExtension:"pl",blobType:"text/x-perl"},[r.CODE_COMMONLISP]:{filenameExtension:"lisp",blobType:"text/x-common-lisp"},[r.CODE_CLOJURE]:{filenameExtension:"clj",blobType:"text/x-clojure"},[r.CODE_OCAML]:{filenameExtension:"ml",blobType:"text/x-ocaml"},[r.CODE_POWERSHELL]:{filenameExtension:"ps1",blobType:"text/x-powershell"},[r.CODE_VERILOG]:{filenameExtension:"v",blobType:"text/x-verilog"},[r.CODE_DOCKERFILE]:{filenameExtension:"Dockerfile",blobType:"text/x-dockerfile"},[r.CODE_VUE]:{filenameExtension:"vue",blobType:"text/x-vue"},[r.CODE_REACT]:{filenameExtension:"jsx",blobType:"application/javascript"},[r.CODE_OTHER]:{filenameExtension:"txt",blobType:"text/plain"},[r.DOCUMENT]:{filenameExtension:"md",blobType:"text/markdown"},[r.LOADING]:{filenameExtension:"txt",blobType:"text/plain"}};var z,re;function _n(){if(re)return z;re=1;var e=Xe(),n=e(function(t,o,a){return t+(a?"_":"")+o.toLowerCase()});return z=n,z}var Ln=_n();const F=Ee(Ln);function Yn(e){const n=le(),t=pe(),o=n.formatMessage({id:"canvas.downloadFileError",defaultMessage:"Failed to download file. Please try again later."}),{mutate:a,isPending:s}=ge({mutationFn:async({textdocId:l,exportType:c})=>{const f=await Le.safePost("/export_doc/canvas",{requestBody:{textdoc_id:l,export_type:c},skipJsonTransform:!0});if(!f.ok)throw new Error("Failed to download file");return f},onSuccess:async(l,{exportType:c})=>{if(!e)return;const f=await l.blob(),h=l.headers.get("Content-Disposition"),x=We(h)??`${F(e.title)}.${c}`;B(f,x)},onError:l=>{t.danger(o,{toastId:"textdoc_download_button",loggingTitle:o,loggingDescription:"Failed to download file"}),_e.addError(l)}}),i=async l=>{if(e&&e.type!==r.LOADING&&e.type===r.DOCUMENT){let c;switch(l){case"md":c="chatgpt_canvas_md_download";break;case"pdf":c="chatgpt_canvas_pdf_download";break;case"docx":c="chatgpt_canvas_docx_download";break}if(Z.logEventWithStatsig("ChatGPT Canvas Download",c),l==="pdf"||l==="docx")a({textdocId:e.textdocId,exportType:l});else if(l==="md"){const{filenameExtension:f,blobType:h}=ie[e.type],x=await de(e.content),v=new Blob([x],{type:h});B(v,`${F(e.title)}.${f}`)}}},u=()=>{if(!e)return;const{filenameExtension:l,blobType:c}=ie[e.type];if(e.type===r.LOADING)return;Z.logEventWithStatsig("ChatGPT Canvas Download","chatgpt_canvas_code_download",{blobType:c});const f=new Blob([e.content],{type:c});B(f,`${F(e.title)}.${l}`)},m=n.formatMessage({id:"canvas.download-button",defaultMessage:"Download"});return{handleFileDownload:i,handleBlobDownload:u,isLoading:s,downloadCopyLabel:m,isDocument:e?.type===r.DOCUMENT}}export{Fn as A,rn as C,fn as D,Qe as L,$n as M,Ze as O,Hn as S,Gn as a,k as b,Yn as c,cn as d,un as e,qn as f,Un as g,ee as h,ln as i,Jn as u};
//# sourceMappingURL=5a6x9gba3iwtvxlr.js.map
