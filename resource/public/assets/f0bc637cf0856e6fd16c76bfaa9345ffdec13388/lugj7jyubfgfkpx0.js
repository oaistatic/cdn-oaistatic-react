import{pE as Fe,S as z,sE as fe,B as N,bH as it,tB as lt,qX as te,h9 as ws,ha as Se,rL as rt,tC as ct,b2 as I,c1 as Ge,qY as H,R as Q,P as Z,bR as Le,n9 as ks,e as K,H as J,oE as dt,oF as ut,pF as mt,bT as Ss,bV as Ts,tD as xt,tE as gt,cd as O,dO as Be,tF as ft,gh as We,C as B,hn as pt,cs as Os,dK as Is,dP as A,t5 as ne,bL as Ds,tG as ht,gd as pe,ld as qe,ho as bt,bJ as be,t7 as Te,bN as jt,z as D,tH as _t,bW as Ue,bF as Ct,w as yt,ei as vt,i3 as Oe,hi as ms,hg as xs,hf as gs,hh as fs,sk as Mt,fc as Nt,pa as wt,aZ as kt,p3 as St,c6 as Tt,p as Ot,rv as It,p4 as Dt,m7 as Pt}from"./lgw4q0e8zlqqfgug.js";import{f as y,j as e,d as Ie,M as l,r as d,h as De,i as je,u as _e,m as Ps,A as As}from"./m60bpb0x3x7rg8fj.js";import{j as At,a as Rt,c as Et}from"./lx0y091m5xst5og4.js";import{a as He,b as ze,c as Ft,A as Pe,g as ps,f as oe,h as Lt,d as Ut}from"./etw953p5af9bs5n2.js";import{sC as Gt,sD as Bt,sE as Wt,sF as hs,f3 as Ke,sG as qt,sH as Ht,sI as zt,sJ as Kt,aT as Ae,bL as Ye,X as Rs,sK as Yt,cW as Vt,z as Es,ri as Ve,sL as ie,sM as bs,sN as Xt,d6 as Qt,d8 as js,d5 as Zt,sO as _s,sP as Jt,sQ as $t,aS as U,F as en}from"./ggjzadbnd3k1vu0k.js";import{l as sn,u as tn}from"./c2ydsdl029zi541a.js";import{l as Fs,j as nn,m as an}from"./m4wtp6x2hm4t62ik.js";import{c as on}from"./b2lwi6is3nazvxrr.js";import{C as ln,a as rn,b as cn,c as Ls,u as Us,R as Gs,A as dn,g as un,d as mn,e as xn,f as gn,h as fn,i as pn,j as hn,M as bn,D as S,G as jn,S as _n}from"./osps6mdg8uoxvua3.js";import{S as Xe}from"./mw537ymyyyvf0hlo.js";import{d as Cs}from"./l1ka89a9nbqv3utj.js";import{C as Cn}from"./c3kvde7di7mudh4j.js";import{S as yn}from"./ipzjskqkorba38yx.js";import{A as vn}from"./miqgu0ia35ccn8w1.js";import{T as Mn}from"./h81zqbvh0a7amk0o.js";import{a as Nn,g as ys}from"./bhtyhoc4rmgt9iir.js";import{c as Bs}from"./d66h1wmdf2bqey2z.js";import"./hbir13mtq07o9x1a.js";import"./o53bheyqocotqvus.js";import"./l9bupap4fyh5egbo.js";import"./dgb06x9f8z6d0ar9.js";import"./gohr301ka7cpfe4s.js";import"./jobqnbdildqzowzf.js";import"./ls4akj6tri7bc2dz.js";import"./glu06a3y5u0laqff.js";import"./iayy5u2a26jybmdr.js";import"./n5yj38pa2aamrsfp.js";import"./rx5cs0ja7c7phupc.js";import"./dfbgvqz3f2t2gfhn.js";import"./hzuwclo1fy1q03ik.js";import"./hb68k3oakb3tiftg.js";import"./nn6a4342otoakkr2.js";import"./jh57htegso1fdrwn.js";import"./kh7rmh4dpsh5j6sg.js";import"./lff9oru7r5vtmz06.js";import"./d03j86wbldy8g9mv.js";import"./fqw2knnbh82u5s47.js";import"./lp550lzjbjov6tk6.js";import"./mb9azmyuz6lg619u.js";import"./fxr8k06ldp92zu6e.js";import"./mlo67gs1ylzshmge.js";const wn=Bs("Search16Regular","16",["M9.3 10.02a4.5 4.5 0 1 1 .7-.7l3.85 3.83a.5.5 0 0 1-.7.7L9.3 10.02ZM10 6.5a3.5 3.5 0 1 0-7 0 3.5 3.5 0 0 0 7 0Z"]),kn=Bs("SettingsCogMultiple20Filled","20",["M8 2c-.37 0-.73.04-1.08.1a.5.5 0 0 0-.4.4l-.26 1.36c-.05.25-.3.4-.54.31l-1.3-.45a.5.5 0 0 0-.55.14A5.5 5.5 0 0 0 2.8 5.74c-.07.2-.01.4.14.54l1.05.9c.19.17.19.47 0 .63l-1.05.91a.5.5 0 0 0-.14.54c.23.7.6 1.34 1.08 1.88.14.15.35.2.54.14l1.3-.45c.25-.08.5.06.55.31l.27 1.36c.03.2.19.35.39.4a5.52 5.52 0 0 0 2.17 0 .5.5 0 0 0 .4-.4l.25-1.36c.05-.25.3-.4.55-.31l1.3.45c.19.06.4 0 .54-.14a5.5 5.5 0 0 0 1.08-1.89.5.5 0 0 0-.14-.53l-1.04-.9a.42.42 0 0 1 0-.63l1.04-.9a.5.5 0 0 0 .14-.54 5.5 5.5 0 0 0-1.08-1.89.5.5 0 0 0-.54-.14l-1.3.45a.42.42 0 0 1-.55-.31L9.48 2.5a.5.5 0 0 0-.4-.4C8.75 2.05 8.39 2 8 2ZM6.5 7.5a1.5 1.5 0 1 1 3 0 1.5 1.5 0 0 1-3 0Zm4.66 4.95a.46.46 0 0 1 .53-.15l.8.27c.26.1.54-.07.6-.34l.15-.83c.04-.2.2-.36.4-.38a3.55 3.55 0 0 1 .72 0c.2.02.35.18.4.38l.15.83c.06.27.34.43.6.34l.8-.27c.19-.07.4-.02.52.15.14.2.27.4.36.62.09.19.03.4-.13.53l-.64.56c-.2.18-.2.5 0 .68l.64.56c.16.13.22.34.13.53-.1.22-.22.43-.36.62a.46.46 0 0 1-.52.15l-.8-.27a.45.45 0 0 0-.6.34l-.16.83c-.04.2-.19.36-.4.38a3.55 3.55 0 0 1-.71 0 .46.46 0 0 1-.4-.38l-.16-.83a.45.45 0 0 0-.6-.34l-.8.27c-.18.07-.4.02-.52-.15a3.5 3.5 0 0 1-.36-.62.46.46 0 0 1 .13-.53l.64-.56c.21-.18.21-.5 0-.68l-.64-.56a.46.46 0 0 1-.13-.53c.1-.22.22-.43.36-.62ZM15 14.5a1 1 0 1 0-2 0 1 1 0 0 0 2 0Z"]);function Sn({workspaceId:s,connector:t,roles:a,onDisable:n,onClose:o}){const i=y(),r=!!a?.data?.length&&a.data.length>1,{data:c,isLoading:f}=Fs({workspaceId:s,connectorId:t.id,enabled:r}),u=c?.roles_with_permissions?.filter(g=>g.connector_permissions.includes(Fe.UseConnector)).length??0,x=u>1;return e.jsx(Gt,{open:!0,onOpenChange:g=>{g||o()},children:e.jsxs(Bt,{children:[e.jsx(Wt,{className:"border-token-border-medium radix-state-open:animate-show bg-token-bg-scrim fixed inset-0"}),f?e.jsx(hs,{className:"bg-token-main-surface-primary radix-state-open:animate-alertShow fixed start-1/2 top-1/2 flex max-h-[85vh] w-[90vw] max-w-lg -translate-x-1/2 -translate-y-1/2 flex-col gap-2 rounded-2xl shadow-2xl focus:outline-hidden",onEscapeKeyDown:g=>g.preventDefault(),children:e.jsx("div",{className:"flex justify-center pt-8",children:e.jsx(z,{})})}):e.jsxs(hs,{className:"bg-token-main-surface-primary radix-state-open:animate-alertShow fixed start-1/2 top-1/2 flex max-h-[85vh] w-[90vw] max-w-lg -translate-x-1/2 -translate-y-1/2 flex-col gap-2 rounded-2xl shadow-2xl focus:outline-hidden",onEscapeKeyDown:g=>g.preventDefault(),children:[e.jsx("div",{className:"flex justify-center pt-8",children:e.jsx(Ke,{connector:t,size:"large",className:"flex h-12 w-12 items-center justify-center rounded-xl border-[0.5px] shadow-sm"})}),e.jsx(qt,{className:"p-6 pt-3 pb-2 text-center text-lg font-semibold md:p-6 md:pb-2",children:i.formatMessage(ge.disableConnectorTitle,{connectorName:fe(t.name,i)})}),e.jsxs("div",{className:"flex flex-col gap-4 p-6 pt-0 md:p-6 md:pt-0",children:[e.jsx(Ht,{className:"text-center text-base",children:x?i.formatMessage(ge.disableConnectorRbacDescription,{connectorName:fe(t.name,i),count:u}):i.formatMessage(ge.disableConnectorDescription,{connectorName:fe(t.name,i)})}),e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsx(zt,{asChild:!0,children:e.jsx(N,{color:"secondary",onClick:o,className:"w-full",children:e.jsx(l,{...ge.cancel})})}),e.jsx(Kt,{asChild:!0,children:e.jsx(N,{color:"danger",onClick:n,className:"w-full",children:e.jsx(l,{...ge.disable})})})]})]})]})]})})}const ge=Ie({disableConnectorTitle:{id:"NVjYkV",defaultMessage:"Disable {connectorName}?"},disableConnectorDescription:{id:"5JmIk1",defaultMessage:"To use {connectorName} with ChatGPT, all workspace members will need to reconnect their accounts."},disableConnectorRbacDescription:{id:"8yzta8",defaultMessage:"{connectorName} is currently enabled for {count, plural, one {# role} other {# roles}}. If you disconnect it, these roles will lose access to this connector."},cancel:{id:"N+FA7P",defaultMessage:"Cancel"},disable:{id:"wMyWcp",defaultMessage:"Disable"}}),Ws=({worksWith:s})=>{const t=y();return e.jsx("span",{className:"bg-token-bg-tertiary text-token-text-secondary mx-1.5 rounded-md px-1.5 py-0.5 text-xs",children:sn(s,t)})},Tn=()=>e.jsx("span",{className:"text-token-text-secondary mx-1.5 rounded-full border px-1.5 py-0.5 text-[9px] uppercase",children:e.jsx(l,{...C.customConnectorBadge})}),Qe=({icon:s,label:t,isCustom:a,worksWith:n,description:o,trailingContent:i,infoText:r})=>e.jsxs(Ft,{className:"border-token-border-default items-center border-b last:border-b-0",children:[s,e.jsxs("div",{className:"flex-1 overflow-hidden",children:[e.jsxs("div",{className:"text-token-text-primary text-md flex items-center font-medium",children:[t,a?e.jsx(Tn,{}):n?.map(c=>e.jsx(Ws,{worksWith:c},c))]}),e.jsxs("div",{className:"text-token-text-secondary mt-0.5 flex items-center gap-1 truncate text-sm",children:[o&&e.jsx("span",{className:"truncate",children:o}),r&&e.jsx(Os,{label:r,children:e.jsx(Is,{className:"h-4 w-4"})})]})]}),i]}),Re=({icon:s,label:t,worksWith:a,description:n,infoText:o,enabled:i,onChange:r,isLoading:c,isCustom:f,onDelete:u,onManageRoles:x})=>{const g=u||x?e.jsxs(O.Root,{children:[e.jsx(O.BasicTrigger,{asChild:!0,children:e.jsx(N,{color:"secondary",size:"small",children:e.jsx(l,{...C.manageConnector})})}),e.jsx(O.Portal,{children:e.jsxs(O.Content,{size:"small",align:"end",children:[x&&e.jsxs(O.Item,{onClick:x,color:"default",children:[e.jsx(Yt,{className:"icon"}),e.jsx(l,{...C.manageConnectorRoles})]}),u&&e.jsxs(O.Item,{onClick:u,color:"danger",children:[e.jsx(Ae,{className:"icon"}),e.jsx(l,{...C.deleteConnector})]})]})})]}):null;return e.jsx(Qe,{icon:s,label:t,worksWith:a,description:n,infoText:o,isCustom:f,trailingContent:c?e.jsx(z,{}):e.jsxs("div",{className:"flex items-center gap-5",children:[g,e.jsx(We,{checked:i,onCheckedChange:r,"aria-label":t,size:"normal"})]})})},qs=(s,t)=>s.description?s.description:s.owners.length>0?t.formatMessage(C.createdByDefault):null,Hs=(s,t)=>s.created_at&&s.base_url?`${s.base_url}
${t.formatMessage(C.createdAt,{createdAt:new Date(s.created_at).toLocaleString(t.locale,{dateStyle:"medium",timeStyle:"short"})})}`:s.created_at?t.formatMessage(C.createdAt,{createdAt:new Date(s.created_at).toLocaleString(t.locale,{dateStyle:"medium",timeStyle:"short"})}):s.base_url,On=({workspaceId:s,connector:t,onPublish:a,onDelete:n,isPublished:o,roles:i})=>{const r=I(),c=y(),[f,u]=d.useState(!1),[x,g]=d.useState(!1),h=i?.data?.length&&i.data.length>1,j=async()=>{u(!0);try{await a().then(()=>{h&&g(!0)})}catch{r.danger(C.publishConnectorFailed,{toastId:"allowed_connectors_section"})}finally{u(!1)}},_=e.jsxs(O.Root,{children:[e.jsx(O.BasicTrigger,{children:e.jsx(Be,{})}),e.jsx(O.Portal,{children:e.jsx(O.Content,{size:"small",align:"end",children:e.jsxs(O.Item,{onClick:n,color:"danger",children:[e.jsx(Ae,{className:"icon"}),e.jsx(l,{...C.deleteConnector})]})})})]});return e.jsxs(e.Fragment,{children:[x&&e.jsx(Ce,{workspaceId:s,connector:t,onClose:()=>g(!1)}),e.jsx(Qe,{icon:e.jsx(Ke,{connector:t,size:"small",className:"h-fit rounded-xl border-[0.5px] p-2 shadow-sm"}),label:fe(t.name,c),description:qs(t,c),infoText:Hs(t,c),trailingContent:e.jsxs(e.Fragment,{children:[f||!o?e.jsx(N,{color:"secondary",size:"small",onClick:j,loading:f,children:e.jsx(l,{...C.publishConnector})}):e.jsxs(N,{color:"secondary",size:"small",disabled:!0,children:[e.jsx(Ye,{className:"me-1 h-4 w-4"}),e.jsx(l,{...C.publishedConnector})]}),_]})})]})},In=({onCreate:s})=>{const t=y();return e.jsx("button",{onClick:s,children:e.jsx(Qe,{icon:e.jsx("span",{className:"border-token-border-heavy h-fit rounded-xl border border-dashed p-2",children:e.jsx(Rs,{className:"icon-lg"})}),label:t.formatMessage(C.createConnector),description:t.formatMessage(C.createConnectorDescription)})})},Dn=({connector:s,loggingParams:t,onDelete:a,workspaceId:n,roles:o})=>{const i=y(),r=I(),c=De(),f=K(),u=J(f),{enabled:x,isLoading:g}=dt(s.id,Se.ADMIN_SETTING,"workspace_settings"),h=tn(s),j=s.owners.length>0,[_,v]=d.useState(!1),[m,M]=d.useState(!1),p=o?.data?.length&&o.data.length>1,b=te(),{variables:w,mutate:Y}=je({mutationFn:T=>Q.safePost("/accounts/{account_id}/connectors/{connector_id}/workspace_permissions",{parameters:{path:{account_id:n,connector_id:s.id}},requestBody:{enabled:T}}),onSuccess:(T,$)=>{Z.logEventWithStatsig("Connectors Workspace Connector Permission Updated","chatgpt_connectors_workspace_connector_permission_updated",{...t,enabled:$?"enabled":"disabled"}),$&&p&&b&&M(!0)},onSettled:()=>{c.invalidateQueries({queryKey:ut(u?.normalizedAccountUserId,"workspace_settings"),refetchType:"all"}),c.invalidateQueries({queryKey:mt(n),refetchType:"all"});const T=Ss[Ts.GITHUB_CONNECTOR];s.id===T&&!w&&c.invalidateQueries({queryKey:["workspace-settings",n]})},onError:()=>{r.danger(C.featureSettingsUpdateFailed,{toastId:"allowed_connectors_section"})}});return e.jsxs(e.Fragment,{children:[e.jsx(Re,{icon:e.jsx(Ke,{connector:s,size:"small",className:"h-fit rounded-xl border-[0.5px] p-2 shadow-sm"}),label:fe(s.name,i),description:qs(s,i),infoText:j?Hs(s,i):void 0,worksWith:s.id===xt?h:void 0,enabled:w??!!x,onChange:T=>{T?Y(!0):v(!0)},isLoading:g,isCustom:j,onDelete:j?a:void 0,onManageRoles:p&&x&&b?()=>M(!0):void 0}),m&&e.jsx(Ce,{workspaceId:n,connector:s,onClose:()=>M(!1)}),_&&e.jsx(Sn,{workspaceId:n,connector:s,roles:o,onClose:()=>v(!1),onDisable:()=>{Y(!1),v(!1)}})]})},Pn=({loggingParams:s,workspaceId:t,roles:a})=>{const n=y(),o=I(),i=De(),{data:r,isLoading:c}=Ge(t),f=!!r?.beta_settings[H.CONTEXT_CONNECTOR_GDRIVE],[u,x]=d.useState(!1),g=a?.data?.length&&a.data.length>1,h=te(),{variables:j,mutate:_}=je({mutationFn:v=>Q.safePost("/accounts/{account_id}/beta_features",{parameters:{path:{account_id:t}},requestBody:{feature:H.CONTEXT_CONNECTOR_GDRIVE,value:v}}),onSuccess:(v,m)=>{Z.logEventWithStatsig("Connectors Workspace Connector Permission Updated","chatgpt_connectors_workspace_connector_permission_updated",{...s,enabled:m?"enabled":"disabled"}),m&&g&&h&&x(!0)},onSettled:()=>{i.invalidateQueries({queryKey:["workspace-settings"]})},onError:()=>{o.danger(C.featureSettingsUpdateFailed,{toastId:"allowed_connectors_section"})}});return e.jsxs(e.Fragment,{children:[e.jsx(Re,{icon:e.jsx("span",{className:"h-fit rounded-xl border-[0.5px] p-2 shadow-sm",children:e.jsx(Le,{className:"h-6 w-6"})}),label:n.formatMessage(C.gdriveFileUploadLabel),worksWith:["fileUploads"],description:n.formatMessage(C.gdriveFileUploadDescription),enabled:j??!!f,onChange:_,isLoading:c,onManageRoles:g&&f&&h?()=>x(!0):void 0}),u&&e.jsx(Ce,{workspaceId:t,connector:{id:H.CONTEXT_CONNECTOR_GDRIVE,name:"Google Drive"},onClose:()=>x(!1)})]})},An=({loggingParams:s,workspaceId:t,roles:a})=>{const n=y(),o=I(),i=De(),{data:r,isLoading:c}=Ge(t),f=!!r?.beta_settings[H.CONTEXT_CONNECTOR_O365_BUSINESS],[u,x]=d.useState(!1),g=a?.data?.length&&a.data.length>1,h=te(),{variables:j,mutate:_}=je({mutationFn:v=>Q.safePost("/accounts/{account_id}/beta_features",{parameters:{path:{account_id:t}},requestBody:{feature:H.CONTEXT_CONNECTOR_O365_BUSINESS,value:v}}),onSuccess:(v,m)=>{Z.logEventWithStatsig("Connectors Workspace Connector Permission Updated","chatgpt_connectors_workspace_connector_permission_updated",{...s,enabled:m?"enabled":"disabled"}),m&&g&&h&&x(!0)},onSettled:()=>{i.invalidateQueries({queryKey:["workspace-settings"]})},onError:()=>{o.danger(C.featureSettingsUpdateFailed,{toastId:"allowed_connectors_section"})}});return e.jsxs(e.Fragment,{children:[e.jsx(Re,{icon:e.jsx("span",{className:"h-fit rounded-xl border-[0.5px] p-2 shadow-sm",children:e.jsx(ks,{className:"h-6 w-6"})}),label:n.formatMessage(C.sharepointFileUploadLabel),worksWith:["fileUploads"],description:n.formatMessage(C.sharepointFileUploadDescription),enabled:j??!!f,onChange:_,isLoading:c,onManageRoles:g&&f&&h?()=>x(!0):void 0}),u&&e.jsx(Ce,{workspaceId:t,connector:{id:H.CONTEXT_CONNECTOR_O365_BUSINESS,name:"Sharepoint"},onClose:()=>x(!1)})]})},Rn=({loggingParams:s,workspaceId:t,roles:a})=>{const n=y(),o=I(),i=De(),{data:r}=Ge(t),c=!!r?.beta_settings[H.CONTEXT_CONNECTOR_O365_PERSONAL],[f,u]=d.useState(!1),x=a?.data?.length&&a.data.length>1,g=te(),{variables:h,mutate:j}=je({mutationFn:_=>Q.safePost("/accounts/{account_id}/beta_features",{parameters:{path:{account_id:t}},requestBody:{feature:H.CONTEXT_CONNECTOR_O365_PERSONAL,value:_}}),onSuccess:(_,v)=>{Z.logEventWithStatsig("Connectors Workspace Connector Permission Updated","chatgpt_connectors_workspace_connector_permission_updated",{...s,enabled:v?"enabled":"disabled"}),v&&x&&g&&u(!0)},onSettled:()=>{i.invalidateQueries({queryKey:["workspace-settings"]})},onError:()=>{o.danger(C.featureSettingsUpdateFailed,{toastId:"allowed_connectors_section"})}});return e.jsxs(e.Fragment,{children:[e.jsx(Re,{icon:e.jsx("span",{className:"h-fit rounded-xl border-[0.5px] p-2 shadow-sm",children:e.jsx(ks,{className:"h-6 w-6"})}),label:n.formatMessage(C.onedrivePersonalFileUploadLabel),worksWith:["fileUploads"],description:n.formatMessage(C.onedrivePersonalFileUploadDescription),enabled:h??!!c,onChange:j,onManageRoles:x&&c&&g?()=>u(!0):void 0}),f&&e.jsx(Ce,{workspaceId:t,connector:{id:H.CONTEXT_CONNECTOR_O365_PERSONAL,name:"OneDrive"},onClose:()=>u(!1)})]})},zs=()=>e.jsx(l,{...C.connectorsSubtitle,values:{link:s=>e.jsx(it,{href:"https://help.openai.com/en/collections/12923329-connected-apps",openNewTab:!0,children:s},"allowed-connectors-subtitle-link")}}),En=()=>e.jsxs("div",{children:[e.jsx(He,{children:e.jsx(l,{...C.connectorsTitle})}),e.jsx(ze,{className:"text-token-text-secondary",children:e.jsx(zs,{})})]});function Fn({workspaceId:s}){const t=y(),{enabled:a,availableConnectors:n}=lt({purpose:"workspace_settings"}),o=te(),{data:i}=nn({workspaceId:s,enabled:o}),{platformConnectors:r,isLoading:c,refetch:f}=ws(!0,Se.ADMIN_SETTING,"workspace_settings"),{showWorkspaceSettings:u}=rt(),x=d.useMemo(()=>Array.from(r.values()).filter(p=>p.connector_type==="MCP"||n.some(b=>b.id===p.id)),[r,n]),g=d.useMemo(()=>{const p=x.filter(T=>T.connector_type!=="MCP"||T.status!=="ONLY_ME").map(T=>({type:"platform",ownerCount:T.owners.length,name:T.name,connector:T})),b={type:"gdrive_file_upload",ownerCount:0,name:t.formatMessage(C.gdriveFileUploadLabel)},w={type:"sharepoint_file_upload",ownerCount:0,name:t.formatMessage(C.sharepointFileUploadLabel)},Y={type:"onedrive_personal_file_upload",ownerCount:0,name:t.formatMessage(C.onedrivePersonalFileUploadLabel)};return[...p,...u?[b,w,Y]:[]].sort((T,$)=>$.ownerCount-T.ownerCount||T.name.localeCompare($.name))},[x,t,u]),[h,j]=d.useState([]),_=d.useMemo(()=>x.filter(p=>p.connector_type==="MCP"&&(p.status==="ONLY_ME"||h.includes(p.id))),[x,h]),v=async p=>{j(b=>[...b,p]),await ft(p,s),await f()},m=a&&!!g.length;if(c)return e.jsx(z,{});if(!a)return null;const M=async p=>{await gt(p),f()};return e.jsx(on,{items:[...m?[{key:"workspace",label:t.formatMessage(C.workspaceTabLabel),children:e.jsx(e.Fragment,{children:g.map(p=>p.type==="gdrive_file_upload"?e.jsx(Pn,{loggingParams:{name:p.name,type:p.type},workspaceId:s,roles:i},p.type):p.type==="sharepoint_file_upload"?e.jsx(An,{loggingParams:{name:p.name,type:p.type},workspaceId:s,roles:i},p.type):p.type==="onedrive_personal_file_upload"?e.jsx(Rn,{loggingParams:{name:p.name,type:p.type},workspaceId:s,roles:i},p.type):e.jsx(Dn,{connector:p.connector,loggingParams:{name:p.connector.name,type:p.connector.connector_type},workspaceId:s,onDelete:()=>M(p.connector.id),roles:i},p.connector.id))})}]:[],{key:"my",label:t.formatMessage(C.myTabLabel),children:e.jsxs(e.Fragment,{children:[_.map(p=>e.jsx(On,{workspaceId:s,roles:i,connector:p,onPublish:()=>v(p.id),onDelete:()=>M(p.id),isPublished:h.includes(p.id)},p.id)),e.jsx(In,{onCreate:()=>{window.location.hash=`${ct}?create-connector=true`}})]})}]})}const Ce=({workspaceId:s,connector:t,onClose:a})=>{const n=y(),[o,i]=d.useState(""),{data:r,isLoading:c}=Fs({workspaceId:s,connectorId:t.id}),f=te(),u=d.useMemo(()=>r?.roles_with_permissions?.map(m=>({...m,displayText:m.role.predefined_role?n.formatMessage(C.rolesModalWorkspaceDefaultRole):m.role.name,searchText:m.role.predefined_role?[n.formatMessage(C.rolesModalWorkspaceDefaultRole).toLowerCase(),n.formatMessage(C.rolesModalWorkspaceDefaultRoleBadge).toLowerCase(),m.role.description?.toLowerCase()??""].join(" "):[m.role.name.toLowerCase(),m.role.description?.toLowerCase()??""].join(" ")})),[r,n]),x=d.useMemo(()=>u?.sort((m,M)=>m.role.predefined_role?-1:M.role.predefined_role?1:m.displayText.localeCompare(M.displayText)),[u]),g=d.useMemo(()=>{const m=x??[],M=o.trim().toLowerCase();return M?m.filter(p=>p.searchText.includes(M)):m},[x,o]),{updateConnectorRolePermission:h}=an({workspaceId:s,connectorId:t.id}),[j,_]=d.useState(()=>new Set),v=(m,M)=>{_(p=>new Set(p).add(m)),h({roleId:m,permissions:M?[Fe.UseConnector]:[]}).finally(()=>{_(p=>{const b=new Set(p);return b.delete(m),b})})};return e.jsx(B,{testId:"modal-roles-access",title:n.formatMessage({id:"TIsQZ6",defaultMessage:"Who can access {name}?"},{name:t.name??"this connector"}),isOpen:f,onClose:a,showCloseButton:!0,size:"custom",className:"max-w-[640px]",children:e.jsx("div",{className:"flex max-h-[80vh] flex-col gap-4",children:c?e.jsx("div",{className:"flex justify-center pt-8",children:e.jsx(z,{})}):e.jsxs("div",{className:"flex flex-col gap-4",children:[e.jsx("div",{children:e.jsx(pt,{name:"search",value:o,onChange:m=>i(m.target.value),placeholder:n.formatMessage({id:"hhmvjo",defaultMessage:"Search by name or keyword"}),ariaLabel:n.formatMessage({id:"RS8Uk8",defaultMessage:"Search roles"})})}),e.jsx("div",{className:"bg-token-main-surface flex-1 overflow-y-auto",children:g.length===0?e.jsx("div",{className:"text-token-text-tertiary px-4 py-10 text-center text-sm",children:e.jsx(l,{id:"bO3hZ+",defaultMessage:"No matching roles."})}):g.map(m=>{const M=m.connector_permissions.includes(Fe.UseConnector),p=j.has(m.role.id);return e.jsxs("div",{className:"flex items-center justify-between gap-3 px-4 py-3",children:[e.jsxs("div",{className:"flex flex-col",children:[m.role.predefined_role?e.jsxs("div",{className:"truncate text-sm font-medium",children:[n.formatMessage(C.rolesModalWorkspaceDefaultRole),e.jsx("span",{className:"bg-token-bg-tertiary text-token-text-secondary mx-1.5 rounded-md px-1.5 py-0.5 text-xs",children:e.jsx(l,{...C.rolesModalWorkspaceDefaultRoleBadge})})]}):e.jsx("div",{className:"truncate text-sm font-medium",children:m.role.name}),m.role.description&&e.jsx("div",{className:"text-token-text-tertiary mt-0.5 text-xs",children:m.role.description})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[p?e.jsx(z,{className:"h-4 w-4"}):null,e.jsx(We,{checked:M,onCheckedChange:b=>v(m.role.id,b),disabled:p,"aria-label":n.formatMessage({id:"8ejEtk",defaultMessage:"Enable {name}"},{name:m.role.name})})]})]},m.role.id)})})]})})})},C=Ie({connectorsTitle:{id:"8ZP+KV",defaultMessage:"Connectors"},connectorsSubtitle:{id:"8WR/V3",defaultMessage:"Manage which apps users in this workspace can connect to. <link>Learn more</link>"},featureSettingsUpdateFailed:{id:"allowedConnectorsSection.adminPermissionsUpdateFailed",defaultMessage:"Failed to update permissions for connector"},gdriveFileUploadLabel:{id:"allowedConnectorsSection.gdriveFileUploadLabel",defaultMessage:"Google Drive"},gdriveFileUploadDescription:{id:"allowedConnectorsSection.gdriveFileUploadDescription",defaultMessage:"Upload Google Drive files in messages sent to ChatGPT."},sharepointFileUploadLabel:{id:"allowedConnectorsSection.sharepointFileUploadLabel",defaultMessage:"Microsoft OneDrive (work/school)"},sharepointFileUploadDescription:{id:"allowedConnectorsSection.sharepointFileUploadDescription",defaultMessage:"Upload SharePoint and OneDrive for Business files in messages sent to ChatGPT."},onedrivePersonalFileUploadLabel:{id:"allowedConnectorsSection.onedrivePersonalFileUploadLabel",defaultMessage:"Microsoft OneDrive (personal)"},onedrivePersonalFileUploadDescription:{id:"allowedConnectorsSection.onedrivePersonalFileUploadDescription",defaultMessage:"Upload personal OneDrive files in messages sent to ChatGPT."},workspaceTabLabel:{id:"b8IYtR",defaultMessage:"Workspace"},myTabLabel:{id:"C2YTBV",defaultMessage:"My connectors"},createdByDefault:{id:"c1BULn",defaultMessage:"Created by your workspace's admin"},customConnectorBadge:{id:"q4oGB6",defaultMessage:"Custom"},publishedConnector:{id:"5gTvjk",defaultMessage:"Published"},publishConnector:{id:"HtDEy8",defaultMessage:"Publish to workspace"},publishConnectorFailed:{id:"iTXiK2",defaultMessage:"Failed to publish connector"},deleteConnector:{id:"DJDhnI",defaultMessage:"Delete"},createdAt:{id:"vQx/QC",defaultMessage:"Created {createdAt}"},manageConnector:{id:"ejE2jG",defaultMessage:"Manage"},manageConnectorRoles:{id:"yMishD",defaultMessage:"Access control"},createConnector:{id:"nrxInz",defaultMessage:"Create a connector"},createConnectorDescription:{id:"+sWVSA",defaultMessage:"Connect ChatGPT to your favorite tools"},rolesModalWorkspaceDefaultRole:{id:"uft0cC",defaultMessage:"Workspace"},rolesModalWorkspaceDefaultRoleBadge:{id:"VEokx9",defaultMessage:"Default"}});function Ln({onClose:s}){const t=K(),a=J(t);return a?e.jsx(Un,{accountId:a.id,onClose:s}):null}function Un({onClose:s,accountId:t}){const a=y(),n=I(),[o,i]=d.useState(!1),r=d.useCallback(()=>{i(!0),A.admin_create_connection_instance(t,{connection_config_id:"--fake-local-id",knowledge_connector_type:"box"}).then(()=>{s()}).catch(()=>{n.danger(a.formatMessage({id:"aqpeYE",defaultMessage:"Something went wrong. Please try again."}),{toastId:"box_connection_setup_modal",loggingTitle:"Failed to create connection",loggingDescription:"Failed to create connection"})}).finally(()=>{i(!1)})},[t,a,s,n]);return e.jsxs(B,{...ln,onClose:s,testId:"modal-box-basic-info",children:[e.jsxs("div",{className:"px-6 pt-4 pb-10",children:[e.jsx("div",{className:"text-xl font-medium",children:e.jsx(l,{id:"gGG/WF",defaultMessage:"Enable Box sync for ChatGPT"})}),e.jsx("div",{className:"text-md text-token-text-secondary mt-3",children:e.jsx(l,{id:"Obd15q",defaultMessage:"Connecting Box helps ChatGPT provide answers grounded in the files and folders your company stores in Box. Once enabled, members of your organization can link their Box accounts to ChatGPT."})}),e.jsx("div",{className:"mt-6 text-lg font-medium",children:e.jsx(l,{id:"gj6Y5o",defaultMessage:"What to expect"})}),e.jsxs("ul",{className:"text-md text-token-text-secondary ms-6 mt-4",children:[e.jsx("li",{className:"mb-2 list-disc",children:e.jsx(l,{id:"p1e7BR",defaultMessage:"Continuous sync: Your Box content stays up to date in ChatGPT."})}),e.jsx("li",{className:"mb-2 list-disc",children:e.jsx(l,{id:"U/poiK",defaultMessage:"Permission-aware: ChatGPT honors Box collaboration permissions, ensuring users can only view content they’re authorized to access."})}),e.jsx("li",{className:"list-disc",children:e.jsx(l,{id:"c1heZy",defaultMessage:"You’re in control: Disable access anytime to instantly revoke permissions."})})]})]}),e.jsx(ne,{primaryButton:e.jsx(N,{color:"primary",onClick:r,loading:o,children:e.jsx(l,{id:"y+cVaH",defaultMessage:"Enable"})})})]})}function Gn({onClose:s}){const t=K(),a=J(t);return a?e.jsx(Bn,{accountId:a.id,onClose:s}):null}function Bn({onClose:s,accountId:t}){const a=y(),n=I(),[o,i]=d.useState(!1),r=d.useCallback(()=>{i(!0),A.admin_create_connection_instance(t,{connection_config_id:"--fake-local-id",knowledge_connector_type:"dropbox"}).then(()=>{s()}).catch(()=>{n.danger(a.formatMessage({id:"aqpeYE",defaultMessage:"Something went wrong. Please try again."}),{toastId:"dropbox_connection_setup_modal",loggingTitle:"Failed to create connection",loggingDescription:"Failed to create connection"})}).finally(()=>{i(!1)})},[t,a,s,n]);return e.jsxs(B,{...rn,onClose:s,testId:"modal-dropbox-basic-info",children:[e.jsxs("div",{className:"px-6 pt-4 pb-10",children:[e.jsx("div",{className:"text-xl font-medium",children:e.jsx(l,{id:"liABKZ",defaultMessage:"Enable Dropbox sync for ChatGPT"})}),e.jsx("div",{className:"text-md text-token-text-secondary mt-3",children:e.jsx(l,{id:"Croygj",defaultMessage:"Connecting Dropbox lets ChatGPT answer questions with the latest documents your team stores in shared folders. Once enabled, members of your organization can link their Dropbox accounts to ChatGPT."})}),e.jsx("div",{className:"mt-6 text-lg font-medium",children:e.jsx(l,{id:"VzSIS3",defaultMessage:"What to expect"})}),e.jsxs("ul",{className:"text-md text-token-text-secondary ms-6 mt-4",children:[e.jsx("li",{className:"mb-2 list-disc",children:e.jsx(l,{id:"6TUAG8",defaultMessage:"Continuous sync: Your Dropbox content stays up to date in ChatGPT."})}),e.jsx("li",{className:"mb-2 list-disc",children:e.jsx(l,{id:"dzxFm9",defaultMessage:"Permission-aware: ChatGPT respects Dropbox sharing permissions, ensuring users can only view content they’re authorized to access."})}),e.jsx("li",{className:"list-disc",children:e.jsx(l,{id:"lz+2xm",defaultMessage:"You’re in control: Disable access anytime to instantly revoke permissions."})})]})]}),e.jsx(ne,{primaryButton:e.jsx(N,{color:"primary",onClick:r,loading:o,children:e.jsx(l,{id:"y+cVaH",defaultMessage:"Enable"})})})]})}function Wn({onClose:s}){const t=K(),a=J(t);return a?e.jsx(qn,{accountId:a.id,onClose:s}):null}function qn({onClose:s,accountId:t}){const a=y(),n=I(),[o,i]=d.useState(!1),r=d.useCallback(()=>{i(!0),A.admin_create_connection_instance(t,{connection_config_id:"--fake-local-id",knowledge_connector_type:"github",organization_name:null}).then(c=>{s()}).catch(()=>{n.danger(a.formatMessage({id:"aqpeYE",defaultMessage:"Something went wrong. Please try again."}),{toastId:"github_connection_setup_modal",loggingTitle:"Failed to create connection",loggingDescription:"Failed to create connection"})}).finally(()=>{i(!1)})},[t,a,s,n]);return e.jsxs(B,{...cn,onClose:s,testId:"modal-github-basic-info",children:[e.jsxs("div",{className:"px-6 pt-4 pb-10",children:[e.jsx("div",{className:"text-xl font-medium",children:e.jsx(l,{id:"KMNaNX",defaultMessage:"Enable GitHub sync for ChatGPT"})}),e.jsx("div",{className:"text-md text-token-text-secondary mt-3",children:e.jsx(l,{id:"WBCMAs",defaultMessage:"By enabling ChatGPT to access your GitHub repositories, you empower your organization with more tailored answers based on your codebase. Once enabled, members of your organization can connect their GitHub accounts to ChatGPT."})}),e.jsx("div",{className:"mt-6 text-lg font-medium",children:e.jsx(l,{id:"gI0O+q",defaultMessage:"What to expect"})}),e.jsxs("ul",{className:"text-md text-token-text-secondary ms-6 mt-4",children:[e.jsx("li",{className:"mb-2 list-disc",children:e.jsx(l,{id:"ED01hn",defaultMessage:"Continuous sync: Your repositories stay up to date in ChatGPT."})}),e.jsx("li",{className:"mb-2 list-disc",children:e.jsx(l,{id:"q7cWzh",defaultMessage:"Privacy first: ChatGPT adheres to GitHub permissions, ensuring users access only what they can view on GitHub."})}),e.jsx("li",{className:"list-disc",children:e.jsx(l,{id:"vE8AIz",defaultMessage:"You’re in control: Disable access anytime to instantly revoke permissions."})})]})]}),e.jsx(ne,{primaryButton:e.jsx(N,{color:"primary",onClick:r,loading:o,children:e.jsx(l,{id:"y+cVaH",defaultMessage:"Enable"})})})]})}const V=Ie({fileSingular:{id:"TKyiaj",defaultMessage:"file"},filesPlural:{id:"krAMi5",defaultMessage:"files"},domainSingular:{id:"ExZP9r",defaultMessage:"domain"},domainsPlural:{id:"PmkQD7",defaultMessage:"domains"}});function E(s,t){return s==="google_drive_dwd"||s==="google_drive_oauth"?{objectTypeSingular:t.formatMessage(V.fileSingular),objectTypePlural:t.formatMessage(V.filesPlural),externalLinkableUnitSingular:t.formatMessage(V.domainSingular),externalLinkableUnitPlural:t.formatMessage(V.domainsPlural)}:s==="slack"?{objectTypeSingular:t.formatMessage({id:"Y22i2G",defaultMessage:"channel"}),objectTypePlural:t.formatMessage({id:"UXSOIk",defaultMessage:"channels"}),externalLinkableUnitSingular:t.formatMessage({id:"yyIyWp",defaultMessage:"workspace"}),externalLinkableUnitPlural:t.formatMessage({id:"LuznzN",defaultMessage:"workspaces"})}:{objectTypeSingular:t.formatMessage(V.fileSingular),objectTypePlural:t.formatMessage(V.filesPlural),externalLinkableUnitSingular:t.formatMessage(V.domainSingular),externalLinkableUnitPlural:t.formatMessage(V.domainsPlural)}}function he({label:s,value:t}){return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"border-token-border-medium w-full border-t"}),e.jsxs("div",{className:"flex w-full flex-row justify-between py-2",children:[e.jsx("span",{className:"text-token-text-primary",children:s}),e.jsx("span",{className:"text-token-text-secondary",children:t})]})]})}function Hn({connection:s,adminUserConnectionState:t}){const a=t&&t.user_connection_details.activation_status!=="inactive"&&t.user_connection_details.auth_status!=="not_connected",n=s.connection_config.knowledge_connector_type;return n?n==="google_drive_oauth"?e.jsx(zn,{connectionConfig:s.connection_config,connectionStatus:s.connection_status,isAdminConnected:a}):n==="slack"?e.jsx(Yn,{connectionConfig:s.connection_config,connectionStatus:s.connection_status,isAdminConnected:a}):e.jsx(Kn,{}):null}function zn({connectionConfig:s,connectionStatus:t,isAdminConnected:a}){const n=y(),o=t==="activating"||t==="partially_activated"||t==="active";return e.jsxs("div",{className:"px-4",children:[o&&a!=null&&!a&&e.jsx(Ks,{connectionConfig:s}),e.jsx(he,{label:n.formatMessage({id:"bVi1Vt",defaultMessage:"Connection type"}),value:n.formatMessage({id:"DSWj22",defaultMessage:"Self-service"})}),!!s.domain_name&&e.jsx(he,{label:n.formatMessage({id:"DtrjbM",defaultMessage:"Domain name"}),value:s.domain_name})]})}function Kn(){const s=y();return e.jsx("div",{className:"px-4",children:e.jsx(he,{label:s.formatMessage({id:"bVi1Vt",defaultMessage:"Connection type"}),value:s.formatMessage({id:"voo3FC",defaultMessage:"Admin-managed"})})})}function Yn({connectionConfig:s,connectionStatus:t,isAdminConnected:a}){const n=y();return e.jsxs("div",{className:"px-4",children:[t==="activating"&&a!=null&&!a&&e.jsx(Ks,{connectionConfig:s}),e.jsx(he,{label:n.formatMessage({id:"JXKtnI",defaultMessage:"Slack domain"}),value:s.team_domain}),e.jsx(he,{label:n.formatMessage({id:"a1Cjhf",defaultMessage:"Team ID"}),value:s.team_id})]})}function Ks({connectionConfig:s}){const{data:t,isLoading:a,refetch:n}=_e({queryKey:["user_connection_status"],queryFn:A.user_connection_status}),{refetch:o}=Ds({skip:!0}),i=()=>{n(),o()},r=t?.connection_statuses.some(f=>f.user_connection_details.connection_instance_id===s.connection_config_id&&f.user_connection_details.auth_status==="user_connected");if(a||r)return null;const c=({isLoading:f,disabled:u,onClick:x})=>e.jsx(N,{color:"primary",loading:f,disabled:u,onClick:x,children:e.jsx(l,{id:"9ZiK24",defaultMessage:"Connect"})});return e.jsxs(Ps.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{delay:.2,duration:.5},className:"bg-token-hint-bg dark:bg-token-main-surface-tertiary mb-2 flex flex-col gap-2 rounded-xl p-4",children:[e.jsxs("div",{className:"flex flex-row items-start gap-4",children:[e.jsx(Is,{className:"icon-lg"}),e.jsx("span",{className:"text-sm",children:e.jsx(l,{id:"gdALIj",defaultMessage:"This connection will not finish activating until a user connects."})})]}),e.jsx(ht,{connectionId:s.connection_config_id,connectorType:s.knowledge_connector_type,renderButton:c,location:"admin_settings",refetch:i})]})}function Ys({isOpen:s,onClose:t,connectionId:a,accountId:n,isPostActivation:o,footerContent:i,primaryButton:r,secondaryButton:c}){const f=y(),{data:u,isLoading:x,error:g,refetch:h}=_e({queryKey:["slack_channel_type_scopes",a],queryFn:()=>A.admin_connection_list_item_scopes(n,a,"channel_type")});let j,_;return u?.object_selections.forEach(({object_handle:v,selection:m})=>{v==="public"?j=m==="include":v==="private"&&(_=m==="include")}),e.jsxs(B,{testId:"modal-slack-channel-scope",...Ls,isOpen:s,onClose:t,children:[e.jsxs("div",{className:"flex flex-col gap-4 px-6 pt-4 pb-10",children:[e.jsx("p",{className:"text-token-text-primary",children:e.jsx(l,{id:"Ot9UkQ",defaultMessage:"Control which types of channels should be synced."})}),!o&&e.jsxs("div",{className:"bg-token-main-surface-secondary text-token-text-primary flex w-full flex-row items-center gap-4 rounded-xl p-4",children:[e.jsx(pe,{className:"icon-lg"}),e.jsx("span",{className:"text-sm",children:e.jsx(l,{id:"qByMz2",defaultMessage:"You will not be able to modify the sync policy once the connection starts syncing data."})})]}),g&&e.jsxs("div",{className:"my-2 flex flex-row items-center gap-2 rounded-lg bg-red-500 p-2 text-white",children:[e.jsx(pe,{className:"icon inline"}),e.jsx(l,{id:"F9HsRh",defaultMessage:"Something went wrong."}),e.jsx("button",{onClick:()=>h(),className:"underline",children:e.jsx(l,{id:"y/IEAC",defaultMessage:"Try again"})})]}),x?e.jsx(qe,{lines:4}):e.jsxs(e.Fragment,{children:[j!=null&&e.jsx(vs,{connectionId:a,accountId:n,slackChannelScope:"public",title:f.formatMessage({id:"CXSVXf",defaultMessage:"Public channels"}),refetch:h,value:j,isPostActivation:o}),_!=null&&e.jsx(vs,{connectionId:a,accountId:n,slackChannelScope:"private",title:f.formatMessage({id:"5XrboJ",defaultMessage:"Private channels"}),refetch:h,value:_,isPostActivation:o})]})]}),e.jsx(ne,{footerContent:i,primaryButton:r,secondaryButton:c})]})}function vs({connectionId:s,accountId:t,slackChannelScope:a,title:n,refetch:o,value:i,isPostActivation:r}){const c=I(),f=y(),[u,x]=d.useState(!1),g=async h=>{if(!u){x(!0);try{h?await A.admin_connection_unblock_items(t,s,"channel_type",[a]):await A.admin_connection_block_items(t,s,"channel_type",[a]),o()}catch{c.danger(f.formatMessage({id:"7QF5n6",defaultMessage:"Failed to update policy. Please try again later."}),{toastId:"slack_channel_scope_modal",loggingTitle:"Failed to update policy",loggingDescription:"Failed to update policy"})}finally{x(!1)}}};return r?e.jsxs("div",{className:"group border-token-border-medium flex w-full flex-row items-center gap-4 rounded-xl border px-8 py-4",children:[i?e.jsx(bt,{className:"icon-lg"}):e.jsx(yn,{className:"icon-lg"}),e.jsx("p",{className:"flex-1",children:n})]}):e.jsxs("div",{className:"group border-token-border-medium flex w-full flex-row items-center gap-4 rounded-xl border px-8 py-4",children:[e.jsx(We,{checked:i,disabled:u,"aria-label":n,onCheckedChange:g}),e.jsx("p",{children:n}),u&&e.jsx(z,{})]})}const Vs=s=>d.createElement("svg",{width:20,height:20,viewBox:"0 0 20 20",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",...s},d.createElement("path",{d:"M16.0015 7.33331C16.0015 6.62228 16.0016 6.12894 15.9702 5.74542C15.9472 5.46347 15.9094 5.27396 15.8579 5.13019L15.8022 5.00031C15.6483 4.6982 15.4139 4.44517 15.1265 4.26886L14.9995 4.19855C14.8415 4.11809 14.63 4.06127 14.2544 4.03058C13.8709 3.99926 13.3774 3.99835 12.6665 3.99835H7.3335C6.62246 3.99835 6.12913 3.99924 5.74561 4.03058C5.46375 4.05361 5.27412 4.09047 5.13037 4.14191L5.00049 4.19855C4.69823 4.35257 4.44536 4.58669 4.26904 4.87433L4.19873 5.00031C4.11822 5.15831 4.06146 5.36972 4.03076 5.74542C3.99943 6.12894 3.99854 6.62228 3.99854 7.33331V12.6663C3.99854 13.3772 3.99945 13.8707 4.03076 14.2542C4.06145 14.6298 4.11827 14.8413 4.19873 14.9993L4.26904 15.1263C4.44535 15.4137 4.69838 15.6481 5.00049 15.8021L5.13037 15.8577C5.27414 15.9092 5.46365 15.947 5.74561 15.97C6.12912 16.0014 6.62246 16.0013 7.3335 16.0013H12.6665C13.3774 16.0013 13.8709 16.0013 14.2544 15.97C14.6298 15.9394 14.8415 15.8824 14.9995 15.8021L15.1265 15.7308C15.4138 15.5545 15.6483 15.3014 15.8022 14.9993L15.8579 14.8694C15.9093 14.7257 15.9472 14.536 15.9702 14.2542C16.0015 13.8707 16.0015 13.3772 16.0015 12.6663V7.33331ZM12.4976 6.90851C12.7089 6.60837 13.124 6.53631 13.4243 6.74738C13.7246 6.95872 13.7967 7.37379 13.5855 7.67413L9.62744 13.2991C9.51129 13.4642 9.32596 13.5678 9.12451 13.5804C8.92318 13.5929 8.72701 13.5129 8.59131 13.3636L6.5083 11.0726L7.4917 10.178L9.01611 11.8548L12.4976 6.90851ZM6.55322 10.1331C6.82498 9.88623 7.2447 9.90636 7.4917 10.178L6.5083 11.0726C6.26125 10.8008 6.28147 10.3802 6.55322 10.1331ZM17.3315 12.6663C17.3315 13.3553 17.3322 13.9124 17.2954 14.3626C17.2627 14.7636 17.1977 15.1247 17.0532 15.4612L16.9868 15.6038C16.7213 16.1248 16.3175 16.5605 15.8218 16.8646L15.604 16.9866C15.2272 17.1786 14.8208 17.2578 14.3628 17.2952C13.9126 17.332 13.3555 17.3314 12.6665 17.3314H7.3335C6.64441 17.3314 6.08745 17.332 5.63721 17.2952C5.23652 17.2625 4.87587 17.1973 4.53955 17.053L4.39697 16.9866C3.87586 16.7211 3.43936 16.3174 3.13525 15.8216L3.01318 15.6038C2.82122 15.2271 2.74201 14.8206 2.70459 14.3626C2.66782 13.9124 2.66846 13.3553 2.66846 12.6663V7.33331C2.66846 6.64422 2.6678 6.08727 2.70459 5.63702C2.742 5.17923 2.82138 4.77341 3.01318 4.39679L3.13525 4.17804C3.43935 3.68233 3.87594 3.27848 4.39697 3.013L4.53955 2.9466C4.87584 2.80236 5.23656 2.73715 5.63721 2.70441C6.08745 2.66762 6.6444 2.66827 7.3335 2.66827H12.6665C13.3555 2.66827 13.9126 2.66764 14.3628 2.70441C14.8208 2.74183 15.2272 2.82103 15.604 3.013L15.8218 3.13507C16.3176 3.43917 16.7213 3.87567 16.9868 4.39679L17.0532 4.53937C17.1975 4.87569 17.2627 5.23634 17.2954 5.63702C17.3322 6.08727 17.3315 6.64422 17.3315 7.33331V12.6663Z"}));function le({label:s,onClick:t,disabled:a}){return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-full px-4",children:e.jsx("div",{className:"border-token-border-medium w-full border-t"})}),e.jsxs("div",{className:D("flew-row flex items-center gap-4 px-4 py-2",a&&"cursor-not-allowed opacity-50",!a&&t&&"cursor-pointer"),onClick:a?void 0:t,children:[e.jsx("p",{className:"flex-1",children:s}),t&&e.jsx(Vt,{className:"icon text-token-text-secondary"})]})]})}function Vn({accountId:s,connectionId:t,refetch:a}){const[n,o]=d.useState(!1),i=be(),[r,c]=d.useState(!1),{triggerLocation:f}=Us(),u=e.jsx(N,{color:"primary",disabled:i,icon:Vs,onClick:()=>o(!0),loading:r,children:e.jsx(l,{id:"S6paZh",defaultMessage:"Finish connecting"})}),x=async()=>{c(!0),await A.admin_activate_connection_instance(s,t),Z.logEventWithStatsig("Contextual Answers Admin Connection Activated","chatgpt_contextual_answers_admin_connection_activated",{triggerLocation:f,connectorType:"google_drive_oauth",connectionId:t,adminQuickstart:!0}),a(),c(!1)};return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-full px-4",children:e.jsx("div",{className:"border-token-border-medium w-full border-t"})}),e.jsx("div",{className:"flex w-full flex-col gap-2 p-4",children:i?e.jsx(Te,{children:u}):u}),n&&e.jsx(jt,{connectionId:t,location:"admin_connection_quickstart_row",isAdminFlow:!0,isAdminQuickstartFlow:!0,onClose:()=>o(!1),onSuccess:x,accountId:s})]})}function Xn({accountId:s,connectionId:t,refetch:a}){const[n,o]=d.useState(!1);return e.jsxs(e.Fragment,{children:[e.jsx(le,{onClick:()=>o(!0),label:e.jsx(l,{id:"wM9lvD",defaultMessage:"Configure credentials"})}),n&&e.jsx(mn,{onClose:()=>o(!1),onNext:()=>{a(),o(!1)},accountId:s,connectionId:t})]})}function Qn({accountId:s,connectionId:t,isPostActivation:a}){const[n,o]=d.useState(!1);return e.jsxs(e.Fragment,{children:[e.jsx(le,{onClick:()=>o(!0),label:e.jsx(l,{id:"lTeSGb",defaultMessage:"Sync policy"})}),n&&e.jsx(Ys,{isOpen:!0,onClose:()=>o(!1),accountId:s,connectionId:t,isPostActivation:a})]})}function Zn({accountId:s,connectionId:t,isPostActivation:a}){const[n,o]=d.useState(!1);return e.jsxs(e.Fragment,{children:[e.jsx(le,{onClick:()=>o(!0),label:e.jsx(l,{id:"AgDWHl",defaultMessage:"User drives"})}),n&&e.jsx(xn,{isOpen:!0,isPostActivation:a,onClose:()=>o(!1),accountId:s,connectionId:t})]})}function Jn({accountId:s,connectionId:t}){const[a,n]=d.useState(!1);return e.jsxs(e.Fragment,{children:[e.jsx(le,{onClick:()=>n(!0),label:e.jsx(l,{id:"gsRcYT",defaultMessage:"Shared drives"})}),a&&e.jsx(gn,{isOpen:!0,onClose:()=>n(!1),accountId:s,connectionId:t})]})}function $n({accountId:s,connectionId:t,objectType:a,disabled:n}){const[o,i]=d.useState(!1);return e.jsxs(e.Fragment,{children:[e.jsx(le,{disabled:n,onClick:()=>i(!0),label:e.jsx(l,{id:"tisZLQ",defaultMessage:"Block items"})}),o&&e.jsx(Cn,{isOpen:!0,onClose:()=>i(!1),accountId:s,connectionId:t,objectType:a})]})}function ea({accountId:s,connection:t,disabled:a}){const[n,o]=d.useState(!1),i=te();return!t.connection_config.knowledge_connector_type||i?null:e.jsxs(e.Fragment,{children:[e.jsx(le,{disabled:a,onClick:()=>o(!0),label:e.jsx(l,{id:"9iRaQo",defaultMessage:"User access"})}),n&&e.jsx(dn,{connectorType:t.connection_config.knowledge_connector_type,fallbackEstimatedMaxNumUsers:un(t.connection_config),onClose:()=>o(!1),accountId:s,connectionId:t.connection_config.connection_config_id})]})}function sa({accountId:s,connectionId:t,connectorType:a,connectionDisplayInfo:n,onActivate:o,activationBlockingError:i}){const[r,c]=d.useState(!1),f=be(),u=e.jsx(N,{color:i?"secondary":"primary",disabled:!!i||f,icon:Vs,onClick:()=>c(!0),children:e.jsx(l,{id:"tVDCWM",defaultMessage:"Review and finish setup"})});return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-full px-4",children:e.jsx("div",{className:"border-token-border-medium w-full border-t"})}),e.jsxs("div",{className:"flex w-full flex-col gap-2 p-4",children:[i&&e.jsx("p",{className:"text-token-text-secondary text-sm",children:i}),f?e.jsx(Te,{children:u}):u]}),r&&e.jsx(Gs,{isOpen:!0,onClose:()=>c(!1),accountId:s,connectionId:t,connectionDisplayInfo:n,onActivate:o,connectorType:a})]})}const ta=({open:s,onOpenChange:t,deleteConnection:a,isDeleting:n,connectionDisplayInfo:o})=>{const i=y();return e.jsx(B,{testId:"modal-delete-connection",isOpen:s,onClose:()=>t(!1),shouldIgnoreClickOutside:!0,title:i.formatMessage({id:"oXdl2Z",defaultMessage:"Confirm deletion"}),type:"danger",icon:pe,primaryButton:e.jsx(N,{color:"danger",onClick:a,disabled:n,loading:n,children:e.jsx(l,{id:"knS5PY",defaultMessage:"Delete"})}),secondaryButton:e.jsx(N,{color:"secondary",disabled:n,onClick:()=>{t(!1)},children:e.jsx(l,{id:"KnPHlG",defaultMessage:"Cancel"})}),children:e.jsxs("ul",{className:"px-4",children:[e.jsx("li",{className:"mb-2 list-disc ps-2",children:e.jsx(l,{id:"BvnNwE",defaultMessage:"You are about to delete the connection {connection_name}.",values:{connection_name:e.jsx(fn,{connectionDisplayInfo:o})}})}),e.jsx("li",{className:"mb-2 list-disc ps-2",children:e.jsx(l,{id:"0m+fk7",defaultMessage:"Deleting this connection will stop syncing and delete synced data."})}),e.jsx("li",{className:"mb-2 list-disc ps-2 font-bold",children:e.jsx(l,{id:"a86dO+",defaultMessage:"This action cannot be undone."})})]})})},na=({open:s,onOpenChange:t,defaultName:a,accountId:n,connectionId:o,refetch:i})=>{const r=y(),[c,f]=d.useState(a),[u,x]=d.useState(!1),g=d.useId(),h=I(),j=d.useCallback(()=>{x(!0),A.admin_edit_name_connection_instance(n,o,{name:c}).then(()=>{h.success(r.formatMessage({id:"pepxEP",defaultMessage:"Connection updated successfully."})),i(),t(!1)}).catch(()=>{h.danger(r.formatMessage({id:"aqpeYE",defaultMessage:"Something went wrong. Please try again."}),{toastId:"rename_modal",loggingTitle:"Failed to rename connection",loggingDescription:"Failed to rename connection"})}).finally(()=>{x(!1)})},[n,o,r,c,t,i,h]);return e.jsx(B,{testId:"modal-rename",isOpen:s,onClose:()=>t(!1),shouldIgnoreClickOutside:!0,title:r.formatMessage({id:"mmCJWI",defaultMessage:"Rename"}),type:"success",icon:Es,primaryButton:e.jsx(N,{onClick:()=>j(),loading:u,children:e.jsx(l,{id:"LebexD",defaultMessage:"Rename"})}),secondaryButton:e.jsx(N,{color:"secondary",onClick:()=>{t(!1)},children:e.jsx(l,{id:"KnPHlG",defaultMessage:"Cancel"})}),children:e.jsxs("form",{onSubmit:_=>{_.preventDefault(),j()},className:"flex flex-col gap-2",children:[e.jsx("label",{htmlFor:g,className:"text-token-text-secondary text-base font-medium",children:e.jsx(l,{id:"Gk2g3Q",defaultMessage:"Connection name"})}),e.jsx("input",{type:"text",value:c,onChange:_=>f(_.target.value),id:g,className:"border-token-border-default bg-token-main-surface-primary text-token-text-primary rounded-lg border border-solid"}),e.jsx("button",{type:"submit",className:"display-none"})]})})};function Xs({accountId:s,adminUserConnectionState:t,connectedKnowledgeSource:a,connection:n,connectorName:o,onCreateAnotherInstance:i,refetchConnectionInstances:r,showIcon:c=!1}){const[f,u]=d.useState(!1),x=y();let g;const h=n.connection_config.knowledge_connector_type;if(h)h==="slack"?g="synced_channel":g="synced_object";else return null;let j;n.connection_status!=="draft"||(h==="google_drive_oauth"&&!n.connection_config.domain_name?j=e.jsx(Vn,{accountId:s,connectionId:n.connection_config.connection_config_id,refetch:r}):j=e.jsx(sa,{connectorType:h,connectionId:n.connection_config.connection_config_id,accountId:s,connectionDisplayInfo:n.display_info,onActivate:r,activationBlockingError:ia(n,x)}));const _=h==="github"||h==="sharepoint"||h==="sharepoint_admin";return e.jsxs(Ps.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.5},className:"group bg-token-main-surface-secondary w-full rounded-xl pb-2",children:[e.jsxs("div",{className:"flex items-start justify-between gap-4 p-4 pb-6",children:[c&&n.display_info.icon_url&&e.jsx("div",{className:"bg-token-bg-primary h-fit rounded-xl border-[0.5px] p-2 shadow-sm",children:e.jsx("div",{className:"h-[28px] w-[28px]",children:e.jsx("img",{src:n.display_info.icon_url??"",alt:"",className:"icon-xl self-center"})})}),e.jsxs("div",{className:"w-full shrink overflow-hidden",children:[e.jsx("div",{className:"text-token-text-primary overflow-hidden font-medium text-ellipsis whitespace-nowrap",children:e.jsx(Os,{label:o??n.display_info.display_name,side:"top",align:"center",children:o??n.display_info.display_name})}),e.jsx("div",{children:e.jsx(aa,{connectionDisplayName:n.display_info.display_name,connectionStatus:n.connection_status})})]}),e.jsx(oa,{accountId:s,className:D("hover:bg-token-main-surface-secondary-selected h-8 w-8",f?"bg-token-main-surface-secondary-selected":"bg-transparent"),connectedKnowledgeSource:a,connectionDisplayInfo:n.display_info,connectionId:n.connection_config.connection_config_id,isOpen:f,onCreateAnotherInstance:i,refetch:r,setIsOpen:u})]}),e.jsx(Hn,{connection:n,adminUserConnectionState:t}),["google_drive_oauth","google_drive_dwd"].includes(h)&&e.jsx(ea,{connection:n,accountId:s}),h==="google_drive_dwd"&&e.jsxs(e.Fragment,{children:[e.jsx(Xn,{connectionId:n.connection_config.connection_config_id,accountId:s,refetch:r}),e.jsx(Zn,{connectionId:n.connection_config.connection_config_id,accountId:s,isPostActivation:n.connection_status!=="draft"}),e.jsx(Jn,{connectionId:n.connection_config.connection_config_id,accountId:s})]}),h==="slack"&&e.jsx(Qn,{connectionId:n.connection_config.connection_config_id,accountId:s,isPostActivation:n.connection_status!=="draft"}),g!=null&&!_&&e.jsx($n,{connectionId:n.connection_config.connection_config_id,accountId:s,objectType:g}),j]})}const aa=({connectionDisplayName:s,connectionStatus:t})=>{switch(t){case"active":case"partially_activated":case"activating":return e.jsxs("div",{className:"flex items-center",children:[e.jsx(Ye,{className:"icon-sm text-token-text-secondary"}),e.jsx("span",{className:"text-token-text-secondary ms-0.5 text-sm",children:e.jsx(l,{id:"3aMZRu",defaultMessage:"Configured • {connectionDisplayName}",values:{connectionDisplayName:s}})})]});case"draft":return e.jsxs("div",{className:"flex items-center",children:[e.jsx(Be,{className:"icon-sm text-token-text-secondary"}),e.jsx("span",{className:"text-token-text-secondary ms-0.5 text-sm",children:e.jsx(l,{id:"rEztVG",defaultMessage:"Draft • {connectionDisplayName}",values:{connectionDisplayName:s}})})]});case"deleting":case"deleted":return null}};function oa({accountId:s,className:t,connectionDisplayInfo:a,connectionId:n,connectedKnowledgeSource:o,isOpen:i,onCreateAnotherInstance:r,refetch:c,setIsOpen:f}){const u=be(),x=I(),g=y(),[h,j]=d.useState(!1),[_,v]=d.useState(!1),[m,M]=d.useState(!1),p=async()=>{if(!m){M(!0);try{await A.admin_delete_connection_instance(s,n),x.success(g.formatMessage({id:"zM0Z9u",defaultMessage:"Connection deleted."}))}catch{x.danger(g.formatMessage({id:"3lBGk2",defaultMessage:"Failed to delete this connection. Please try again later."}),{toastId:"connection_instance_menu",loggingTitle:"Failed to delete connection",loggingDescription:"Failed to delete connection"})}finally{c(),M(!1),v(!1)}}},b=e.jsx(O.Item,{icon:Rs,onSelect:()=>r?.(),disabled:!r,children:e.jsx(l,{id:"NLydA/",defaultMessage:"Connect another {connectedKnowledgeSource}",values:{connectedKnowledgeSource:o}})});return e.jsxs(e.Fragment,{children:[e.jsxs(O.Root,{open:i,onOpenChange:f,children:[e.jsx(O.Trigger,{className:t,children:e.jsx(Be,{className:"icon-lg"})}),e.jsx(O.Portal,{children:e.jsxs(O.Content,{size:"medium",children:[e.jsx(O.Item,{icon:Es,onSelect:()=>Cs(j)(!0),disabled:m||_,children:e.jsx(l,{id:"XSQcFy",defaultMessage:"Rename connection"})}),r?b:u?e.jsx(Te,{children:b}):null,e.jsx(O.Item,{icon:m||_?z:Ae,onSelect:()=>Cs(v)(!0),color:"danger",disabled:m||_,children:e.jsx(l,{id:"EAIYOb",defaultMessage:"Delete connection"})}),!1]})})]}),e.jsx(na,{open:h,onOpenChange:j,defaultName:a.display_name,connectionId:n,accountId:s,refetch:c}),e.jsx(ta,{open:_,onOpenChange:v,deleteConnection:p,isDeleting:m,connectionDisplayInfo:a})]})}function ia(s,t){if(s.connection_config.knowledge_connector_type==="google_drive_dwd"){if(!s.connection_config.admin_email_address||!s.connection_config.service_account_credential_id)return t.formatMessage({id:"BfNdzb",defaultMessage:"Credential configuration is incomplete"})}else if(s.connection_config.knowledge_connector_type==="google_drive_oauth"&&!s.connection_config.domain_name)return t.formatMessage({id:"PxrodU",defaultMessage:"Google Workspace domain must be set"})}function la({onClose:s}){const t=K(),a=J(t);return a?e.jsx(ra,{accountId:a.id,onClose:s}):null}function ra({onClose:s,accountId:t}){const a=y(),n=I(),[o,i]=d.useState(!1),r=d.useCallback(()=>{i(!0),A.admin_create_connection_instance(t,{connection_config_id:"--fake-local-id",knowledge_connector_type:"linear"}).then(()=>{s()}).catch(()=>{n.danger(a.formatMessage({id:"aqpeYE",defaultMessage:"Something went wrong. Please try again."}),{toastId:"linear_connection_setup_modal",loggingTitle:"Failed to create connection",loggingDescription:"Failed to create connection"})}).finally(()=>{i(!1)})},[t,a,s,n]);return e.jsxs(B,{...pn,onClose:s,testId:"modal-linear-basic-info",children:[e.jsxs("div",{className:"px-6 pt-4 pb-10",children:[e.jsx("div",{className:"text-xl font-medium",children:e.jsx(l,{id:"vBRKNn",defaultMessage:"Enable Linear sync for ChatGPT"})}),e.jsx("div",{className:"text-md text-token-text-secondary mt-3",children:e.jsx(l,{id:"14Mkqz",defaultMessage:"Connecting Linear lets ChatGPT surface updates from your team's issues, cycles, and projects. Once enabled, members of your organization can link their Linear accounts to ChatGPT."})}),e.jsx("div",{className:"mt-6 text-lg font-medium",children:e.jsx(l,{id:"2cUW21",defaultMessage:"What to expect"})}),e.jsxs("ul",{className:"text-md text-token-text-secondary ms-6 mt-4",children:[e.jsx("li",{className:"mb-2 list-disc",children:e.jsx(l,{id:"fsB6zs",defaultMessage:"Continuous sync: Your Linear issues stay up to date in ChatGPT."})}),e.jsx("li",{className:"mb-2 list-disc",children:e.jsx(l,{id:"xLrJk+",defaultMessage:"Permission-aware: ChatGPT respects Linear workspace permissions, ensuring users can only view content they’re authorized to access."})}),e.jsx("li",{className:"list-disc",children:e.jsx(l,{id:"dyTDHR",defaultMessage:"You’re in control: Disable access anytime to instantly revoke permissions."})})]})]}),e.jsx(ne,{primaryButton:e.jsx(N,{color:"primary",onClick:r,loading:o,children:e.jsx(l,{id:"y+cVaH",defaultMessage:"Enable"})})})]})}function ca({className:s,onClick:t,disabled:a,loading:n}){return e.jsx("div",{className:D("bg-token-bg-primary border-token-border-light flex w-full flex-col gap-4 rounded-xl border-[1px] p-5",s),children:e.jsxs("div",{className:"flex w-full flex-row flex-wrap items-center gap-4",children:[e.jsx("div",{className:"h-fit rounded-xl border-[0.5px] p-2 shadow-sm",children:e.jsx(Ue,{className:"icon-lg shrink-0"})}),e.jsxs("div",{className:"flex min-w-[240px] flex-1 flex-col gap-0.5",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-primary",children:e.jsx(l,{id:"9Ko9hB",defaultMessage:"SharePoint Admin"})}),e.jsx("span",{className:"bg-token-bg-tertiary text-token-text-secondary rounded-full px-2 py-[2px] text-xs tracking-wide uppercase",children:e.jsx(l,{id:"jlua8Q",defaultMessage:"Internal test"})})]}),e.jsx("p",{className:"text-token-text-secondary text-sm",children:e.jsx(l,{id:"KpfAOp",defaultMessage:"Launch the SharePoint OAuth popup without provisioning sync."})})]}),e.jsx("div",{className:"flex shrink-0 items-center",children:e.jsx(N,{className:"text-nowrap",color:"secondary",onClick:t,disabled:a,loading:n,children:e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(Xe,{className:"icon text-[#007AFF]"}),e.jsx(l,{id:"HxBQF5",defaultMessage:"OAuth"})]})})})]})})}function da({className:s}){const t=y(),a=I(),{platformConnectors:n,isLoading:o}=ws(!0,Se.CONNECTOR_SETTING),[i,r]=d.useState(!1),c=d.useMemo(()=>{if(!n?.size)return;const u=Ss[Ts.SHAREPOINT_ADMIN_CONNECTOR];return n.get(u)},[n]),f=d.useCallback(async()=>{if(!c){a.danger(t.formatMessage({id:"kAaIRU",defaultMessage:"Unable to load the SharePoint OAuth connector."}));return}r(!0);try{await _t({connector:c,openPopup:!0,toaster:a,intl:t,productSku:Se.CONNECTOR_SETTING})}catch(u){a.danger(t.formatMessage({id:"Gr0hUA",defaultMessage:"Encountered an error connecting your account. Please try again later."}),{toastId:"sharepoint_admin_oauth_test_modal_error",loggingTitle:"SharePoint admin OAuth failed",loggingDescription:u instanceof Error?u.message:"Unknown SharePoint admin OAuth error"})}finally{r(!1)}},[t,c,a]);return e.jsx(ca,{className:s,onClick:f,disabled:!c||i,loading:i||o})}function ua({onClose:s}){const t=K(),a=J(t);return a?e.jsx(ma,{accountId:a.id,onClose:s}):null}function ma({onClose:s,accountId:t}){const a=y(),n=I(),[o,i]=d.useState(!1),r=d.useCallback(()=>{i(!0),A.admin_create_connection_instance(t,{connection_config_id:"--fake-local-id",knowledge_connector_type:"sharepoint"}).then(c=>{s()}).catch(()=>{n.danger(a.formatMessage({id:"aqpeYE",defaultMessage:"Something went wrong. Please try again."}),{toastId:"sharepoint_connection_setup_modal",loggingTitle:"Failed to create connection",loggingDescription:"Failed to create connection"})}).finally(()=>{i(!1)})},[t,a,s,n]);return e.jsxs(B,{...hn,onClose:s,testId:"modal-sharepoint-basic-info",children:[e.jsxs("div",{className:"px-6 pt-4 pb-10",children:[e.jsx("div",{className:"text-xl font-medium",children:e.jsx(l,{id:"/xY4Wr",defaultMessage:"Enable SharePoint sync for ChatGPT"})}),e.jsx("div",{className:"text-md text-token-text-secondary mt-3",children:e.jsx(l,{id:"7OB8RX",defaultMessage:"By enabling ChatGPT to access your SharePoint, you empower your organization with more tailored answers based on your files and sites. Once enabled, members of your organization can connect their SharePoint accounts to ChatGPT."})}),e.jsx("div",{className:"mt-6 text-lg font-medium",children:e.jsx(l,{id:"jvGDDD",defaultMessage:"What to expect"})}),e.jsxs("ul",{className:"text-md text-token-text-secondary ms-6 mt-4",children:[e.jsx("li",{className:"mb-2 list-disc",children:e.jsx(l,{id:"V2Y5oq",defaultMessage:"Continuous sync: Your SharePoint content stays up to date in ChatGPT."})}),e.jsx("li",{className:"mb-2 list-disc",children:e.jsx(l,{id:"ihB/1d",defaultMessage:"Privacy first: ChatGPT adheres to SharePoint permissions, ensuring users access only what they can view in Microsoft 365."})}),e.jsx("li",{className:"list-disc",children:e.jsx(l,{id:"XYlNw1",defaultMessage:"You’re in control: Disable access anytime to instantly revoke permissions."})})]})]}),e.jsx(ne,{primaryButton:e.jsx(N,{color:"primary",onClick:r,loading:o,children:e.jsx(l,{id:"y+cVaH",defaultMessage:"Enable"})})})]})}function xa({onClose:s}){const[t,a]=d.useState(),n=K(),o=J(n);return o?t?e.jsx(fa,{accountId:o.id,connection:t,onClose:s}):e.jsx(ga,{accountId:o.id,onClose:s,setConnection:a}):null}function ga({onClose:s,setConnection:t,accountId:a}){const n=y(),o=I(),{triggerLocation:i}=Us(),[r,c]=d.useState({teamDomain:"app"});d.useEffect(()=>{Z.logEventWithStatsig("Contextual Answers Admin Create Connection Step","chatgpt_contextual_answers_admin_create_connection_step",{connectorType:"slack",stepName:"basic_info",triggerLocation:i})},[i]);const[f,u]=d.useState(!1),x=d.useCallback(()=>{!(r.teamDomain&&r.teamId)||!a||(u(!0),A.admin_create_connection_instance(a,{connection_config_id:"--fake-local-id",knowledge_connector_type:"slack",team_id:r.teamId,team_domain:r.teamDomain},r.connectionName).then(m=>{t(m)}).catch(()=>{o.danger(n.formatMessage({id:"aqpeYE",defaultMessage:"Something went wrong. Please try again."}),{toastId:"slack_connection_setup_modal",loggingTitle:"Failed to create connection",loggingDescription:"Failed to create connection"})}).finally(()=>{u(!1)}))},[a,r.connectionName,r.teamDomain,r.teamId,n,t,o]),g=!!r.connectionName?.length&&r.connectionName.length>128,h=!!(r.teamDomain&&r.teamId&&!g),j=d.useId(),_=d.useId(),v=d.useId();return e.jsxs(B,{...Ls,onClose:s,testId:"modal-slack-basic-info",children:[e.jsxs("form",{onSubmit:m=>{m.preventDefault(),h&&x()},className:"flex flex-col gap-4 px-6 pt-4 pb-6",children:[e.jsxs("div",{className:"mb-2 flex flex-col gap-2",children:[e.jsx("label",{htmlFor:j,className:"text-token-text-secondary text-base font-medium",children:e.jsx(l,{id:"e2yF8/",defaultMessage:"Connection display name"})}),e.jsx("input",{type:"text",value:r.connectionName??"",onChange:m=>c(M=>({...M,connectionName:m.target.value})),placeholder:n.formatMessage({id:"0gZ+BA",defaultMessage:"(optional)"}),id:j,className:"border-token-border-default bg-token-main-surface-primary text-token-text-primary rounded-lg border border-solid"}),g?e.jsx("p",{className:"text-red-500",children:e.jsx(l,{id:"vT7EGU",defaultMessage:"Name is too long."})}):null]}),e.jsxs("div",{className:"mb-2 flex flex-col gap-2",children:[e.jsx("label",{htmlFor:_,className:"text-token-text-secondary text-base font-medium",children:e.jsx(l,{id:"hEnKIS",defaultMessage:"Slack workspace domain"})}),e.jsxs("p",{children:[e.jsx("input",{type:"text",value:r.teamDomain??"",onChange:m=>c(M=>({...M,teamDomain:m.target.value})),id:_,className:"border-token-border-default bg-token-main-surface-primary text-token-text-primary rounded-lg border border-solid"}),e.jsx("span",{className:"text-token-text-secondary ms-1 font-medium",children:".slack.com"})]})]}),e.jsxs("div",{className:"mb-2 flex flex-col gap-2",children:[e.jsx("label",{htmlFor:v,className:"text-token-text-secondary text-base font-medium",children:e.jsx(l,{id:"azUOrk",defaultMessage:"Slack workspace ID"})}),e.jsx("input",{type:"text",value:r.teamId??"",onChange:m=>c(M=>({...M,teamId:m.target.value})),placeholder:n.formatMessage({id:"vUK9Kc",defaultMessage:"T0000000000"}),id:v,className:"border-token-border-default bg-token-main-surface-primary text-token-text-primary rounded-lg border border-solid"})]}),e.jsx("button",{type:"submit",className:"display-none"})]}),e.jsx(ne,{primaryButton:e.jsx(N,{color:"primary",disabled:!h,onClick:x,loading:f,children:e.jsx(l,{id:"lZthRm",defaultMessage:"Save Draft and Continue"})})})]})}function fa({connection:s,accountId:t,onClose:a}){return e.jsx(bn,{onClose:a,steps:[{connectorType:"slack",name:"slack_channel_scope",fn:({goForward:n,goBackward:o,close:i,stepNumber:r,totalSteps:c})=>e.jsx(Ys,{isOpen:!0,isPostActivation:!1,onClose:()=>i?.(),accountId:t,connectionId:s.connection_config.connection_config_id,primaryButton:n&&e.jsx(N,{color:"primary",onClick:n,children:e.jsx(l,{id:"z5fExR",defaultMessage:"Next"})}),secondaryButton:o&&e.jsx(N,{color:"secondary",onClick:o,children:e.jsx(l,{id:"xJnONr",defaultMessage:"Back"})}),footerContent:e.jsx("span",{className:"text-token-text-secondary flex-1 align-middle font-medium",children:e.jsx(l,{id:"Wp0nVY",defaultMessage:"Step {stepNum} of {totalSteps}",values:{stepNum:r+1,totalSteps:c}})})})},{connectorType:"slack",name:"review_and_activate",fn:({goBackward:n,close:o,stepNumber:i,totalSteps:r})=>e.jsx(Gs,{isOpen:!0,onClose:()=>o?.(),accountId:t,connectorType:"slack",connectionId:s.connection_config.connection_config_id,connectionDisplayInfo:s.display_info,secondaryButton:n&&e.jsx(N,{color:"secondary",onClick:n,children:e.jsx(l,{id:"xJnONr",defaultMessage:"Back"})}),footerContent:e.jsx("span",{className:"text-token-text-secondary flex-1 align-middle font-medium",children:e.jsx(l,{id:"Wp0nVY",defaultMessage:"Step {stepNum} of {totalSteps}",values:{stepNum:i+1,totalSteps:r}})})})}]})}const pa=Ct.div`w-full border-b-1 border-token-border-light`;async function ha(s){const[t,a]=await Promise.all([A.admin_list_knowledge_connectors(s),A.admin_list_connection_instances(s)]),n=new Map;return t.knowledge_conectors.forEach(o=>n.set(o.connector_details.knowledge_connector_type,{displayInfo:o.display_info,availability:o.connector_details.availability,connections:[],limits:o.connector_details.limits??{max_instances:3}})),a.connection_instances.forEach(o=>{if(!o.connection_config.knowledge_connector_type)return;const i=n.get(o.connection_config.knowledge_connector_type)?.connections;i!=null?i.push(o):n.set(o.connection_config.knowledge_connector_type,{displayInfo:o.display_info,availability:"unavailable",limits:S,connections:[o]})}),n}function X(s){return!(s.connection_status==="deleted"||s.connection_status==="deleting")}function ba(){const s=y(),t=K(),a=J(t),[n,o]=d.useState(!1),[i,r]=d.useState(!1),[c,f]=d.useState(!1),[u,x]=d.useState(!1),[g,h]=d.useState(!1),[j,_]=d.useState(!1),[v,m]=d.useState(!1),M=yt(t,"4243523004"),p=M.get("enabledConnectors",[]);d.useEffect(()=>{Z.logEventWithStatsig("Contextual Answers Admin Page Visited","chatgpt_contextual_answers_admin_page_visited")},[]);const{data:b,isLoading:w,error:Y,refetch:T}=_e({queryKey:["admin:knowledge_connectors_with_connections",a?.id],queryFn:async()=>{if(!a)throw new Error("No current account");return await ha(a.id)},enabled:!!a}),{refetch:$,connectionInstanceData:R}=Ds(),k=()=>{T(),$()},Ee=b?.get("google_drive_oauth")?.availability==="available"||b?.get("google_drive_dwd")?.availability==="available",{combinedGoogleDriveConnections:ee,slackConnections:re,githubConnections:ce,sharepointConnections:de,dropboxConnections:ue,boxConnections:me,linearConnections:xe,unavailableConnections:Ze}=d.useMemo(()=>{const L=[],os=[],is=[],ls=[],rs=[],cs=[],ds=[],us=[];return b?.forEach((q,W)=>{if(!((W==="github"||W==="sharepoint")&&a?.isTeam())){if(q.availability!=="available"){us.push(...q.connections.filter(X));return}W==="google_drive_dwd"||W==="google_drive_oauth"?L.push(...q.connections.filter(X)):W==="slack"?os.push(...q.connections.filter(X)):W==="github"?is.push(...q.connections.filter(X)):W==="sharepoint"?ls.push(...q.connections.filter(X)):W==="dropbox"?rs.push(...q.connections.filter(X)):W==="box"?cs.push(...q.connections.filter(X)):W==="linear"&&ds.push(...q.connections.filter(X))}}),{combinedGoogleDriveConnections:L,slackConnections:os,githubConnections:is,sharepointConnections:ls,dropboxConnections:rs,boxConnections:cs,linearConnections:ds,unavailableConnections:us}},[a,b]),ye=b?.get("slack")?.availability==="available",ve=b?.get("github")?.availability==="available"&&!a?.isTeam(),Me=b?.get("sharepoint")?.availability==="available"&&!a?.isTeam(),Ne=b?.get("dropbox")?.availability==="available"&&!a?.isTeam(),we=b?.get("box")?.availability==="available"&&!a?.isTeam(),ke=b?.get("linear")?.availability==="available"&&!a?.isTeam(),Js=M.get("enabled",!1)&&p.includes("sharepoint_admin_connector"),$s=be(),et=ye&&re.length===0,st=ve&&ce.length===0,tt=Me&&de.length===0,nt=Ne&&ue.length===0,at=we&&me.length===0,ot=ke&&xe.length===0,Je=((b?.get("google_drive_oauth")?.limits??b?.get("google_drive_dwd")?.limits)?.max_instances??S.max_instances)!==0,$e=(b?.get("slack")?.limits?.max_instances??S.max_instances)!==0,es=(b?.get("github")?.limits?.max_instances??S.max_instances)!==0,ss=(b?.get("sharepoint")?.limits?.max_instances??S.max_instances)!==0,ts=(b?.get("dropbox")?.limits?.max_instances??S.max_instances)!==0,ns=(b?.get("box")?.limits?.max_instances??S.max_instances)!==0,as=(b?.get("linear")?.limits?.max_instances??S.max_instances)!==0,G=[];Ee&&ee.length===0&&Je&&G.push("google_drive"),ye&&et&&$e&&G.push("slack"),ve&&st&&es&&G.push("github"),Me&&tt&&ss&&G.push("sharepoint"),Ne&&nt&&ts&&G.push("dropbox"),we&&at&&ns&&G.push("box"),ke&&ot&&as&&G.push("linear");const ae=G[0],se=G[G.length-1];return a?.id?e.jsxs(Pe,{className:"gap-4",children:[e.jsx(Qs,{showDescription:ee.length>0}),Y&&e.jsxs("div",{className:"my-2 flex flex-row items-center gap-2 rounded-lg bg-red-500 p-2 text-white",children:[e.jsx(pe,{className:"icon inline"}),Y instanceof vt&&Y.code==="unsupported_data_residency"?e.jsx(l,{id:"IqeMXI",defaultMessage:"Synced connectors are not currently supported for your data residency region."}):e.jsx(l,{id:"zNCx93",defaultMessage:"Failed to get connection instances. Please refresh to try again."})]}),$s&&e.jsxs("div",{className:"my-2 flex flex-row items-center gap-2 rounded-lg bg-red-500 p-2 text-white",children:[e.jsx(pe,{className:"icon inline"}),e.jsx(l,{id:"hnTY+Z",defaultMessage:"Our systems are experiencing high load. Some operations may be temporarily unavailable."})]}),w&&e.jsx(z,{}),e.jsxs("div",{children:[Ee&&ee.length===0&&Je&&e.jsxs("div",{className:"bg-token-interactive-bg-accent-inactive rounded-xl",children:[w||ee.length>0?null:e.jsx("div",{className:"px-4 py-3 text-[13px] text-[#007AFF]",children:e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(Xe,{className:"icon"}),e.jsx(l,{id:"woNVMz",defaultMessage:"Syncing is required to use Google Drive in chat. {learnMore}",values:{learnMore:e.jsx(Oe,{href:ie,className:"underline",onClick:()=>Ve({link:ie,location:"admin_settings_header"}),children:e.jsx(l,{id:"WGpoE2",defaultMessage:"Learn more"})},"learnMore")}})]})}),e.jsx(F,{adminUserConnectionStatus:R?.connection_statuses,accountId:a.id,badge:e.jsx(Ws,{worksWith:"chat"}),className:se!=="google_drive"?"rounded-b-none":"",connectionInstancesLoading:w,connectionInstances:ee,connectorName:s.formatMessage({id:"oDI3Mt",defaultMessage:"Google Drive"}),connectorType:"google_drive",description:s.formatMessage({id:"xlgXB9",defaultMessage:"Sync Docs, Sheets, Slides and other files"}),Icon:Le,limits:b?.get("google_drive_oauth")?.limits??b?.get("google_drive_dwd")?.limits??S,onClickConnect:()=>o(!0),refetchConnectionInstances:k,singularNounConnectedObjectName:E("google_drive_oauth",s).externalLinkableUnitSingular})]}),ye&&re.length===0&&$e&&e.jsx(F,{accountId:a.id,className:D(ae!=="slack"?"rounded-t-none border-t-0":"mt-4",se!=="slack"?"rounded-b-none":""),connectorType:"slack",connectorName:s.formatMessage({id:"pUDRLC",defaultMessage:"Slack"}),limits:b?.get("slack")?.limits??S,description:s.formatMessage({id:"p1qvhM",defaultMessage:"Connect messages and channels."}),Icon:bs,onClickConnect:()=>r(!0),connectionInstancesLoading:w,connectionInstances:re,adminUserConnectionStatus:R?.connection_statuses,refetchConnectionInstances:k,singularNounConnectedObjectName:E("slack",s).externalLinkableUnitSingular}),ve&&ce.length===0&&es&&e.jsx(F,{accountId:a.id,className:D(ae!=="github"?"rounded-t-none border-t-0":"mt-4",se!=="github"?"rounded-b-none":""),connectorType:"github",connectorName:s.formatMessage({id:"y86x7z",defaultMessage:"GitHub"}),limits:b?.get("github")?.limits??S,description:s.formatMessage({id:"Bg9AsX",defaultMessage:"Sync repositories and commits."}),Icon:ms,onClickConnect:()=>f(!0),connectionInstancesLoading:w,connectionInstances:ce,adminUserConnectionStatus:R?.connection_statuses,refetchConnectionInstances:k,singularNounConnectedObjectName:E("github",s).externalLinkableUnitSingular}),Me&&de.length===0&&ss&&e.jsx(F,{accountId:a.id,className:D(ae!=="sharepoint"?"rounded-t-none border-t-0":"mt-4",se!=="sharepoint"?"rounded-b-none":""),connectorType:"sharepoint",connectorName:s.formatMessage({id:"W7MdA4",defaultMessage:"SharePoint"}),limits:b?.get("sharepoint")?.limits??S,description:s.formatMessage({id:"4Ae5JA",defaultMessage:"Sync documents and files from your SharePoint and OneDrive."}),Icon:Ue,onClickConnect:()=>x(!0),connectionInstancesLoading:w,connectionInstances:de,adminUserConnectionStatus:R?.connection_statuses,refetchConnectionInstances:k,singularNounConnectedObjectName:E("sharepoint",s).externalLinkableUnitSingular}),Ne&&ue.length===0&&ts&&e.jsx(F,{accountId:a.id,className:D(ae!=="dropbox"?"rounded-t-none border-t-0":"mt-4",se!=="dropbox"?"rounded-b-none":""),connectorType:"dropbox",connectorName:s.formatMessage({id:"l+iCh4",defaultMessage:"Dropbox"}),limits:b?.get("dropbox")?.limits??S,description:s.formatMessage({id:"603OUM",defaultMessage:"Sync files and folders stored in Dropbox."}),Icon:xs,onClickConnect:()=>h(!0),connectionInstancesLoading:w,connectionInstances:ue,adminUserConnectionStatus:R?.connection_statuses,refetchConnectionInstances:k,singularNounConnectedObjectName:E("dropbox",s).externalLinkableUnitSingular}),we&&me.length===0&&ns&&e.jsx(F,{accountId:a.id,className:D(ae!=="box"?"rounded-t-none border-t-0":"mt-4",se!=="box"?"rounded-b-none":""),connectorType:"box",connectorName:s.formatMessage({id:"5MF6mn",defaultMessage:"Box"}),limits:b?.get("box")?.limits??S,description:s.formatMessage({id:"jEKiy9",defaultMessage:"Sync files and folders stored in Box."}),Icon:gs,onClickConnect:()=>_(!0),connectionInstancesLoading:w,connectionInstances:me,adminUserConnectionStatus:R?.connection_statuses,refetchConnectionInstances:k,singularNounConnectedObjectName:E("box",s).externalLinkableUnitSingular}),ke&&xe.length===0&&as&&e.jsx(F,{accountId:a.id,className:D(ae!=="linear"?"rounded-t-none border-t-0":"mt-4",se!=="linear"?"rounded-b-none":""),connectorType:"linear",connectorName:s.formatMessage({id:"BXvK6H",defaultMessage:"Linear"}),limits:b?.get("linear")?.limits??S,description:s.formatMessage({id:"B2o6RW",defaultMessage:"Sync issues, cycles, and projects from Linear."}),Icon:fs,onClickConnect:()=>m(!0),connectionInstancesLoading:w,connectionInstances:xe,adminUserConnectionStatus:R?.connection_statuses,refetchConnectionInstances:k,singularNounConnectedObjectName:E("linear",s).externalLinkableUnitSingular}),Js&&e.jsx(da,{className:D(G.length>0?"rounded-t-none border-t-0":"","mt-4")}),(()=>{const L=[];return Ee&&ee.length>0&&L.push(e.jsx(F,{adminUserConnectionStatus:R?.connection_statuses,accountId:a.id,connectorName:s.formatMessage({id:"oDI3Mt",defaultMessage:"Google Drive"}),connectorType:"google_drive",description:s.formatMessage({id:"xlgXB9",defaultMessage:"Sync Docs, Sheets, Slides and other files"}),Icon:Le,limits:b?.get("google_drive_oauth")?.limits??b?.get("google_drive_dwd")?.limits??S,onClickConnect:()=>o(!0),refetchConnectionInstances:k,connectionInstancesLoading:w,connectionInstances:ee,singularNounConnectedObjectName:E("google_drive_oauth",s).externalLinkableUnitSingular},"connected-google-drive")),ye&&re.length>0&&L.push(e.jsx(F,{accountId:a.id,connectorType:"slack",connectorName:s.formatMessage({id:"pUDRLC",defaultMessage:"Slack"}),limits:b?.get("slack")?.limits??S,description:s.formatMessage({id:"p1qvhM",defaultMessage:"Connect messages and channels."}),Icon:bs,onClickConnect:()=>r(!0),connectionInstancesLoading:w,connectionInstances:re,adminUserConnectionStatus:R?.connection_statuses,refetchConnectionInstances:k,singularNounConnectedObjectName:E("slack",s).externalLinkableUnitSingular},"connected-slack")),ve&&ce.length>0&&L.push(e.jsx(F,{accountId:a.id,connectorType:"github",connectorName:s.formatMessage({id:"y86x7z",defaultMessage:"GitHub"}),limits:b?.get("github")?.limits??S,description:s.formatMessage({id:"Bg9AsX",defaultMessage:"Sync repositories and commits."}),Icon:ms,onClickConnect:()=>f(!0),connectionInstancesLoading:w,connectionInstances:ce,adminUserConnectionStatus:R?.connection_statuses,refetchConnectionInstances:k,singularNounConnectedObjectName:E("github",s).externalLinkableUnitSingular},"connected-github")),Me&&de.length>0&&L.push(e.jsx(F,{accountId:a.id,connectorType:"sharepoint",connectorName:s.formatMessage({id:"W7MdA4",defaultMessage:"SharePoint"}),limits:b?.get("sharepoint")?.limits??S,description:s.formatMessage({id:"4Ae5JA",defaultMessage:"Sync documents and files from your SharePoint and OneDrive."}),Icon:Ue,onClickConnect:()=>x(!0),connectionInstancesLoading:w,connectionInstances:de,adminUserConnectionStatus:R?.connection_statuses,refetchConnectionInstances:k,singularNounConnectedObjectName:E("sharepoint",s).externalLinkableUnitSingular},"connected-sharepoint")),Ne&&ue.length>0&&L.push(e.jsx(F,{accountId:a.id,connectorType:"dropbox",connectorName:s.formatMessage({id:"l+iCh4",defaultMessage:"Dropbox"}),limits:b?.get("dropbox")?.limits??S,description:s.formatMessage({id:"603OUM",defaultMessage:"Sync files and folders stored in Dropbox."}),Icon:xs,onClickConnect:()=>h(!0),connectionInstancesLoading:w,connectionInstances:ue,adminUserConnectionStatus:R?.connection_statuses,refetchConnectionInstances:k,singularNounConnectedObjectName:E("dropbox",s).externalLinkableUnitSingular},"connected-dropbox")),we&&me.length>0&&L.push(e.jsx(F,{accountId:a.id,connectorType:"box",connectorName:s.formatMessage({id:"5MF6mn",defaultMessage:"Box"}),limits:b?.get("box")?.limits??S,description:s.formatMessage({id:"jEKiy9",defaultMessage:"Sync files and folders stored in Box."}),Icon:gs,onClickConnect:()=>_(!0),connectionInstancesLoading:w,connectionInstances:me,adminUserConnectionStatus:R?.connection_statuses,refetchConnectionInstances:k,singularNounConnectedObjectName:E("box",s).externalLinkableUnitSingular},"connected-box")),ke&&xe.length>0&&L.push(e.jsx(F,{accountId:a.id,connectorType:"linear",connectorName:s.formatMessage({id:"BXvK6H",defaultMessage:"Linear"}),limits:b?.get("linear")?.limits??S,description:s.formatMessage({id:"B2o6RW",defaultMessage:"Sync issues, cycles, and projects from Linear."}),Icon:fs,onClickConnect:()=>m(!0),connectionInstancesLoading:w,connectionInstances:xe,adminUserConnectionStatus:R?.connection_statuses,refetchConnectionInstances:k,singularNounConnectedObjectName:E("linear",s).externalLinkableUnitSingular},"connected-linear")),L.length>0?e.jsx("div",{className:D("mt-4 grid grid-cols-1 gap-4",L.length>1&&"lg:grid-cols-2"),children:L}):null})()]}),Ze.length>0&&e.jsx(ja,{accountId:a.id,connectionInstancesLoading:w,connectionInstances:Ze,refetchConnectionInstances:k}),n&&e.jsx(jn,{isDwdEnabled:b?.get("google_drive_dwd")?.availability==="available",onClose:()=>{o(!1),k()},triggerLocation:"admin_settings"}),i&&e.jsx(xa,{onClose:()=>{r(!1),k()}}),c&&e.jsx(Wn,{onClose:()=>{f(!1),k()}}),u&&e.jsx(ua,{onClose:()=>{x(!1),k()}}),g&&e.jsx(Gn,{onClose:()=>{h(!1),k()}}),j&&e.jsx(Ln,{onClose:()=>{_(!1),k()}}),v&&e.jsx(la,{onClose:()=>{m(!1),k()}})]}):null}function F({accountId:s,adminUserConnectionStatus:t,badge:a,className:n,connectionInstances:o,connectionInstancesLoading:i,connectorName:r,connectorType:c,description:f,Icon:u,limits:x,onClickConnect:g,refetchConnectionInstances:h,singularNounConnectedObjectName:j}){const _=be(),v=o!=null&&!_&&(x.max_instances===_n||o.length<x.max_instances),m=()=>{Z.logEventWithStatsig("Contextual Answers Admin Create Connection Button Clicked","chatgpt_contextual_answers_admin_create_connection_button_clicked",{connectorType:c}),g?.()},M=e.jsx(N,{className:"text-nowrap",color:"secondary",onClick:m,disabled:!v,children:e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(Xe,{className:"icon text-[#007AFF]"}),e.jsx(l,{id:"FSQUDq",defaultMessage:"Enable Sync"})]})});return e.jsxs("div",{className:D("bg-token-bg-primary flex w-full flex-col gap-4",o?.length===0?"border-token-border-light rounded-xl border-[1px] p-5":"mt-2",n),children:[o?.length===0&&e.jsxs("div",{className:"flex w-full flex-row flex-wrap items-center gap-4",children:[e.jsx("div",{className:"h-fit rounded-xl border-[0.5px] p-2 shadow-sm",children:e.jsx(u,{className:"icon-lg shrink-0"})}),e.jsxs("div",{className:"flex min-w-[240px] flex-1 flex-col gap-0.5",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("p",{className:"text-primary",children:r}),a]}),e.jsx("p",{className:"text-token-text-secondary text-sm",children:f})]}),e.jsx("div",{className:"flex shrink-0 items-center",children:v?M:_?e.jsx(Te,{children:M}):null})]}),i?e.jsx(qe,{lines:2}):o?.length?e.jsx(As,{children:e.jsxs("div",{className:"grid w-full gap-4",style:{gridTemplateColumns:"repeat(auto-fit, minmax(360px, 1fr))"},children:[o.filter(p=>!["deleted","deleting"].includes(p.connection_status)).map(p=>e.jsx(Xs,{accountId:s,adminUserConnectionState:t?.find(b=>b.user_connection_details.connection_instance_id===p.connection_config.connection_config_id),connectedKnowledgeSource:j,connection:p,connectorName:r,onCreateAnotherInstance:v?m:void 0,refetchConnectionInstances:h,showIcon:!0},p.connection_config.connection_config_id)),o.length===1&&e.jsx("div",{},"grid-spacer")]})}):null]})}function ja({accountId:s,connectionInstances:t,connectionInstancesLoading:a,refetchConnectionInstances:n}){return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"flex w-full flex-col gap-4",children:a?e.jsx(qe,{lines:2}):t?.length?e.jsx(As,{children:e.jsxs("div",{className:"grid w-full gap-4",style:{gridTemplateColumns:"repeat(auto-fit, minmax(360px, 1fr))"},children:[t.map(o=>e.jsx(Xs,{connection:o,showIcon:!0,accountId:s,refetchConnectionInstances:n},o.connection_config.connection_config_id)),t.length===1&&e.jsx("div",{},"grid-spacer")]})}):null}),e.jsx(pa,{})]})}function Qs({badge:s,showDescription:t=!0}){const a=y();return e.jsxs("div",{children:[e.jsxs(He,{className:"flex flex-row items-center gap-2",children:[e.jsx("span",{children:a.formatMessage({id:"PzngEC",defaultMessage:"Synced connectors"})}),s]}),t&&e.jsx(ze,{className:"text-token-text-secondary",children:e.jsx(l,{id:"XWG8hZ",defaultMessage:"ChatGPT syncs your organization’s content for higher quality, up-to-date answers. {learnMore}",values:{learnMore:e.jsx(Oe,{href:ie,className:"underline",onClick:()=>Ve({link:ie,location:"admin_settings_header"}),children:e.jsx(l,{id:"WGpoE2",defaultMessage:"Learn more"})},"learnMore")}})})]})}function _a({feedbackMetadata:s,currentWorkspaceId:t,onClose:a,onFeedbackActionTaken:n}){const o=y(),{data:i,refetch:r,isLoading:c}=_e({queryKey:["adminGetCaMessageFeedback",t,s.feedback_id],queryFn:()=>Q.safeGet("/ca/admin/feedback/{feedback_id}",{parameters:{path:{feedback_id:s.feedback_id},query:{account_id:t}}})}),f=I(),u=je({mutationFn:g=>g.operation==="delete"?Q.safeDelete("/ca/admin/feedback/{feedback_id}",{parameters:{path:{feedback_id:g.feedbackId},query:{account_id:g.workspaceId}}}):Q.safePost("/ca/admin/feedback/{feedback_id}/approve",{parameters:{path:{feedback_id:g.feedbackId},query:{account_id:g.workspaceId,with_sources:g.withSources}}}),onSuccess:(g,h)=>{n(),a(),f.success(h.operation==="approve"?o.formatMessage(P.feedbackApproved):o.formatMessage(P.feedbackDeleted))},onError:(g,h)=>{r(),f.warning(h.operation==="approve"?o.formatMessage(P.errorApprovingFeedback):o.formatMessage(P.errorDeletingFeedback))}}),x=d.useMemo(()=>{const g=s.review_status==="unreviewed",h=s.review_status==="unreviewed";let j;switch(s.review_status){case"approved_with_sources":case"approved_without_sources_data_expired":{j=o.formatMessage(P.actionMessageNoActionsAvailable);break}case"approved_without_sources_data_available":{j=o.formatMessage(P.actionMessageApprovedWithoutSources);break}case"deleted":{j=o.formatMessage(P.actionMessageFeedbackDeleted);break}}const _={workspaceId:t,feedbackId:s.feedback_id,withSources:!0};return e.jsxs("div",{className:"bg-token-main-surface-secondary sticky bottom-0 flex w-full flex-col gap-2 rounded-lg p-4",children:[!!j&&e.jsx("div",{children:e.jsx("p",{children:j})}),e.jsxs("div",{className:"flex flex-row gap-2",children:[g&&e.jsx(N,{color:"primary",icon:Ye,onClick:()=>u.mutate({..._,operation:"approve"}),loading:u.isPending,children:e.jsx(l,{id:"Zq8YOH",defaultMessage:"Approve Feedback"})}),h&&e.jsx(N,{color:"danger-outline",icon:Ae,onClick:()=>u.mutate({..._,operation:"delete"}),loading:u.isPending,children:e.jsx(l,{id:"qeIjD9",defaultMessage:"Delete Feedback"})})]})]})},[s.review_status,s.feedback_id,u,t,o]);return e.jsx(Ca,{actionBar:x,onClose:a,isLoading:c,feedbackData:i,feedbackMetadata:s})}function Ca({actionBar:s=null,onClose:t=()=>{},isLoading:a=!1,isDebugView:n=!1,feedbackData:o,feedbackMetadata:i}){const r=y();return e.jsx(B,{testId:"modal-admin-feedback",size:"custom",className:"max-w-lg overflow-y-auto text-base",isOpen:!0,icon:Xt,onClose:t,showCloseButton:!0,type:"success",title:r.formatMessage(P.modalTitle),children:e.jsx("div",{className:"flex flex-col",children:o&&!a?e.jsxs(e.Fragment,{children:[e.jsx(ya,{feedbackData:o,feedbackMetadata:i,isDebugView:n}),e.jsx(ps,{className:"my-4"}),e.jsx(Ma,{fileRefs:o.file_references}),e.jsx(ps,{className:"my-4"}),e.jsx(Na,{retrievalMessages:o.retrieval_messages,userDisplayName:i.submitter_display_name??i.submitter_email,isDebugView:n}),s]}):e.jsx(Mt,{lines:8})})})}function ya({feedbackMetadata:s,feedbackData:t,isDebugView:a=!1}){const n=y(),o=s.submitter_display_name&&s.submitter_email?n.formatMessage(P.userDisplayName,{displayName:s.submitter_display_name,email:s.submitter_email}):s.submitter_id,i=d.useMemo(()=>t.sources_feedback?Object.entries(t.sources_feedback).map(([r,c])=>{if(!c.rating&&!(c.tags&&c.tags.length>0))return null;const f=t.file_references.find(x=>x.document_id===r)?.title,u=c.tags&&c.tags.length===1&&c.tags[0]===Nn;return e.jsxs("li",{className:"flex flex-col p-1 text-sm break-words",children:[e.jsxs("div",{className:"mb-1 flex flex-row items-center gap-2",children:[c.rating==="thumbsUp"?e.jsx(Qt,{className:"icon-sm"}):c.rating==="thumbsDown"?e.jsx(js,{className:"icon-sm"}):null,e.jsx("a",{href:c.url??void 0,className:"text-sm font-semibold",children:f??c.url??r})]}),e.jsx("div",{className:"flex flex-row flex-wrap gap-1",children:u?e.jsx("span",{className:"italic",children:e.jsx(l,{id:"yNGc6H",defaultMessage:"This source should have been used."})}):c.tags?.map(x=>e.jsx("div",{className:"border-token-border-default text-token-text-secondary rounded-lg border px-3 py-1 text-xs",children:ys(x,n)},x))})]},r)}).filter(r=>!!r):[],[t.file_references,t.sources_feedback,n]);return e.jsxs("div",{children:[!a&&e.jsx("div",{className:"mb-2",children:e.jsx(Zs,{reviewStatus:s.review_status})}),e.jsxs("div",{className:"mb-2 flex items-center gap-2",children:[t.rating==="thumbsUp"?e.jsx(Zt,{className:"icon-xl m-2"}):e.jsx(js,{className:"icon-xl m-2"}),e.jsxs("div",{className:"flex flex-col gap-1",children:[e.jsx("p",{children:o}),s.submitted_at&&e.jsx("p",{className:"text-token-text-secondary text-xs",children:new Date(s.submitted_at).toLocaleString()})]})]}),t.tags&&t.tags.length>0&&e.jsx("div",{className:"mb-2 flex flex-wrap gap-1",children:t.tags?.map(r=>e.jsx("div",{className:"border-token-border-default text-token-text-secondary rounded-lg border px-3 py-1 text-sm",children:ys(r,n)},r))}),e.jsxs("div",{className:"mb-2",children:[e.jsx(oe,{className:"mb-1",children:e.jsx(l,{id:"VrPx6x",defaultMessage:"Feedback"})}),e.jsx("p",{className:"rounded-sm border p-2 text-sm break-words",children:t.text?t.text:e.jsx("span",{className:"italic",children:e.jsx(l,{id:"pEEJ/8",defaultMessage:"No written feedback was provided."})})})]}),e.jsxs("div",{className:"mb-2",children:[e.jsx(oe,{className:"mb-1",children:e.jsx(l,{id:"LUg6Vl",defaultMessage:"Additional Sources"})}),e.jsx("p",{className:"rounded-sm border p-2 text-sm break-words",children:t.additional_sources?t.additional_sources:e.jsx("span",{className:"italic",children:e.jsx(l,{id:"u24Zo5",defaultMessage:"No additional sources were provided."})})})]}),i.length>0&&e.jsxs("div",{className:"mb-2",children:[e.jsx(oe,{className:"mb-1",children:e.jsx(l,{id:"lNSdNZ",defaultMessage:"Sources Feedback"})}),e.jsx("ul",{className:"flex flex-col gap-1",children:i})]})]})}const va=["citation","context_stuff","search_result"];function Ms(s){return Array.from(s.map(t=>Jt({id:t.document_id,cloud_doc_url:t.external_url??void 0,name:t.title??"",extra:{cloud_doc_url:t.external_url??void 0}})).filter(t=>!!t))}function Ma({fileRefs:s}){const[t,a]=d.useMemo(()=>{const n=new Map,o=new Map;return s.forEach(i=>{va.includes(i.reference_source)&&i.external_url&&!n.has(i.document_id)?n.set(i.document_id,i):i.reference_source==="user_feedback"&&i.external_url&&!o.has(i.document_id)&&o.set(i.document_id,i)}),[Ms(Array.from(n.values())),Ms(Array.from(o.values()))]},[s]);return e.jsxs("div",{children:[e.jsxs("div",{children:[e.jsx(oe,{className:"mb-2",children:e.jsx(l,{id:"FB4YIA",defaultMessage:"Sources In Conversation"})}),t.length>0?e.jsxs(e.Fragment,{children:[e.jsx("p",{className:"text-token-text-secondary mb-2 text-xs",children:e.jsx(l,{id:"iTNNoN",defaultMessage:"These sources were considered or cited in the conversation. Snapshots of these sources will be included with the feedback if you choose to approve the feedback."})}),e.jsx("div",{className:"flex flex-col gap-1",children:t.map(n=>e.jsx(_s,{compact:!0,citationMetadata:n},n.url))})]}):e.jsx("p",{className:"text-token-text-secondary text-xs",children:e.jsx(l,{id:"Q+DKpB",defaultMessage:"No synced sources were considered or cited in the conversation, however there may be other sources present such as user uploaded files. If you choose to approve this feedback, only the snippets of those files that ChatGPT looked at will be shared with this feedback."})})]}),a.length>0&&e.jsxs("div",{className:"mt-8",children:[e.jsx(oe,{className:"mb-2",children:e.jsx(l,{id:"SCwQnr",defaultMessage:"Sources From Feedback"})}),e.jsx("p",{className:"text-token-text-secondary mb-2 text-xs",children:e.jsx(l,{id:"Rr+4KZ",defaultMessage:"The feedback submitter mentioned these documents in their feedback. Snapshots of these documents will be included with the feedback if you choose to approve the feedback with sources and the user had access to them."})}),e.jsx("div",{className:"flex flex-col gap-1",children:a.map(n=>e.jsx(_s,{compact:!0,citationMetadata:n},n.url))})]})]})}function Na({retrievalMessages:s,userDisplayName:t,isDebugView:a=!1}){return e.jsxs("div",{className:"mb-8",children:[e.jsx(oe,{className:"mb-4",children:e.jsx(l,{id:"pOb00r",defaultMessage:"Conversation"})}),s.map(n=>e.jsx(wa,{message:n,userDisplayName:t,isDebugView:a},n.id))]})}function wa({message:s,userDisplayName:t,isDebugView:a=!1}){const n=y();switch(s.type){case"visible_text":{if(s.author==="unknown")return null;const o={id:s.id,author:{role:s.author},clientMetadata:{canRetry:!1},metadata:{citations:s.citations??[],attachments:s.attachments??[],content_references:s.content_refs?s.content_refs:(s.citations??[]).map(i=>i.metadata?.type!=="file"?null:{start_idx:i.start_ix,end_idx:i.end_ix,refs:[],matched_text:s.text.slice(i.start_ix,i.end_ix),type:"file",source:i.metadata.source,name:i.metadata.name,id:i.metadata.id,cloud_doc_url:i.metadata.cloud_doc_url??i.metadata.extra?.cloud_doc_url}).filter(i=>!!i)},content:{content_type:Nt.Text,parts:[s.text]}};return e.jsxs("div",{className:"mb-4",children:[e.jsx("p",{className:D("text-token-text-secondary mb-1 text-xs",s.author==="user"?"pe-4 text-end":"text-start"),children:s.author==="assistant"?n.formatMessage(P.authorChatGPT):s.author==="user"?t??n.formatMessage(P.authorUser):s.author}),e.jsx(Mn,{id:s.id,messages:[o],attachments:o.metadata?.attachments,citations:o.metadata?.citations,contentReferences:o.metadata?.content_references,parts:[s.text],displayParts:wt({isUserTurn:s.author==="user",parts:[s.text]}),isActivelyStreaming:!1,isCompletionInProgress:!1,isFinalUserTurn:!1,hasActiveRequest:!1,clientThreadId:"--fake-thread-id--",isUserTurn:s.author==="user",turnIndex:0,isFeedbackEnabled:!1})]})}case"query":return e.jsxs("div",{className:"text-token-text-primary my-2 text-xs",children:[e.jsx(wn,{className:"me-2"}),a?e.jsx(l,{id:"AVzRit",defaultMessage:"ChatGPT performed a search: {query}",values:{query:s.query}}):e.jsx(l,{id:"bJ9BXd",defaultMessage:"ChatGPT performed a search."})]});case"result":return a?e.jsx(ka,{message:s}):null;case"fetch":return a?e.jsxs("div",{className:"text-token-text-primary my-2 text-xs",children:[e.jsx($t,{className:"me-2"}),e.jsx(l,{id:"uH5X47",defaultMessage:"Read file: {fileName}",values:{fileName:s.content.content_type==="tether_quote"?s.content.title:"unknown"}})]}):null;case"generic_file_search_tool":return a?e.jsxs("div",{className:"text-token-text-primary my-2 text-xs",children:[e.jsx(kn,{className:"me-2"}),e.jsx(l,{id:"pJmg4S",defaultMessage:"Tool message with command: {command}.",values:{command:s.command}})]}):null;case"system":case void 0:return null}}function ka({message:s}){const[t,a]=d.useState(!1);return s.type!=="result"?null:e.jsxs("div",{className:"text-token-text-primary mt-2 mb-4 text-xs",children:[e.jsxs("div",{onClick:()=>a(n=>!n),className:"flex flex-row",children:[e.jsx(vn,{checked:t,className:"flex-0"}),e.jsx("div",{className:"flex-1",children:e.jsx(l,{id:"94EEkt",defaultMessage:"Found {numResults} results.",values:{numResults:s.result.chunks.length}})})]}),t&&e.jsxs("div",{className:"mt-2",children:[s.result.chunks.map(n=>e.jsxs("div",{className:"mb-2",children:[e.jsx("h4",{className:"text-token-text-primary mb-1 text-sm font-bold",children:e.jsx(l,{id:"zyGUoc",defaultMessage:"Result {number}: {title}",values:{number:n.result_num,title:n.title}})}),e.jsx("h4",{className:"text-token-text-secondary mb-1 text-xs",children:n.document_id}),e.jsx("pre",{className:"max-h-[200px] max-w-full overflow-auto p-2 text-wrap",children:n.contents})]},n.result_num)),e.jsxs("div",{className:"p-2 text-center",onClick:()=>a(!1),children:[e.jsx("p",{className:"text-token-text-secondary mb-1 font-bold",children:e.jsx(l,{id:"8UUzYt",defaultMessage:"Collapse Results"})}),e.jsx("hr",{className:""})]})]})]})}function Zs({reviewStatus:s,onClick:t,disabled:a}){let n;const o=y();switch(s){case"unreviewed":n=o.formatMessage(P.reviewStatusUnreviewed);break;case"approved_with_sources":n=o.formatMessage(P.reviewStatusApprovedWithSouces);break;case"approved_without_sources_data_available":case"approved_without_sources_data_expired":n=o.formatMessage(P.reviewStatusApprovedWithoutSources);break;case"deleted":n=o.formatMessage(P.reviewStatusDeleted);break}return e.jsx("button",{className:D("text-token-text-primary rounded-2xl px-3 py-1 text-sm",s==="unreviewed"&&"bg-[#e2c541] dark:bg-[#EA8444]"),onClick:t,disabled:!!a||!t,children:n})}const P=Ie({modalTitle:{id:"zufVun",defaultMessage:"Review Feedback"},feedbackApproved:{id:"DS+YGt",defaultMessage:"Feedback approved."},feedbackDeleted:{id:"Rz/tmW",defaultMessage:"Feedback deleted."},errorApprovingFeedback:{id:"UVsTlf",defaultMessage:"Encountered an error approving this feedback. Please refresh and try again."},errorDeletingFeedback:{id:"cI6gt9",defaultMessage:"Encountered an error deleting this feedback. Please refresh and try again."},actionMessageFeedbackCreating:{id:"urBely",defaultMessage:"You can't take actions on this feedback yet because it's still being processed. Once it's done processing, it will be available for review."},actionMessageNoActionsAvailable:{id:"JGNhjT",defaultMessage:"This feedback has been reviewed."},actionMessageApprovedWithoutSources:{id:"68PAfK",defaultMessage:"This feedback has already been approved without sources, but you can re-approve it with sources."},actionMessageFeedbackDeleted:{id:"Kel9lE",defaultMessage:"This feedback has been deleted."},labelIncludeSources:{id:"8UlZM0",defaultMessage:"Include Sources"},authorChatGPT:{id:"7Fo5p2",defaultMessage:"ChatGPT"},authorUser:{id:"TpT0hg",defaultMessage:"User"},userDisplayName:{id:"3OKTcX",defaultMessage:"{displayName} ({email})"},reviewStatusUnreviewed:{id:"FEHKZj",defaultMessage:"Needs Review"},reviewStatusCreating:{id:"7lVVU7",defaultMessage:"Preparing for Review"},reviewStatusApprovedWithSouces:{id:"kpZ41g",defaultMessage:"Approved With Sources"},reviewStatusApprovedWithoutSources:{id:"Y0lc+p",defaultMessage:"Approved Without Sources"},reviewStatusDeleted:{id:"gKoYhr",defaultMessage:"Deleted"}});function Sa({currentWorkspaceId:s}){const{data:t,refetch:a,isLoading:n}=_e({queryKey:["adminListCaMessageFeedback",s],queryFn:()=>Q.safeGet("/ca/admin/feedback",{parameters:{query:{account_id:s}}})}),[o,i]=d.useState();return e.jsxs(Pe,{className:"mb-8",children:[e.jsx(He,{children:e.jsx(l,{id:"r4Y3mj",defaultMessage:"Review Feedback"})}),e.jsx(ze,{className:"text-token-text-secondary",children:e.jsx(l,{id:"mqh7NS",defaultMessage:"Review feedback your workspace users have submitted. Feedback is not shared with OpenAI until you approve it."})}),t&&!n?e.jsx(Ta,{feedbackList:t.feedback,setSelectedFeedback:i}):e.jsx(z,{}),o&&e.jsx(_a,{feedbackMetadata:o,currentWorkspaceId:s,onClose:()=>i(void 0),onFeedbackActionTaken:()=>a()})]})}function Ns(s){switch(s){case"unreviewed":return 1;case"approved_with_sources":return 2;case"approved_without_sources_data_available":return 3;case"approved_without_sources_data_expired":return 4;case"deleted":return 5}}function Ta({feedbackList:s,setSelectedFeedback:t}){const a=d.useMemo(()=>[...s].sort((n,o)=>{const i=Ns(n.review_status)-Ns(o.review_status);return i!==0?i:n.submitted_at>o.submitted_at?-1:n.submitted_at<o.submitted_at?1:0}),[s]);return e.jsxs(U.Root,{size:"normal",children:[e.jsxs(U.Header,{children:[e.jsx(U.HeaderCell,{className:"bg-token-main-surface-primary",children:e.jsx(l,{id:"KcGNl2",defaultMessage:"Review Status"})}),e.jsx(U.HeaderCell,{className:"bg-token-main-surface-primary w-40",children:e.jsx(l,{id:"joba0B",defaultMessage:"Submitted By"})}),e.jsx(U.HeaderCell,{className:"bg-token-main-surface-primary w-40",children:e.jsx(l,{id:"yl1cCR",defaultMessage:"Submitted At"})})]}),e.jsx(U.Body,{children:a.length===0?e.jsx(U.Row,{children:e.jsx(U.Cell,{children:e.jsx(l,{id:"AYwCJD",defaultMessage:"No feedback yet."})})}):a.map(n=>{const o=n.review_status==="deleted",i=o?void 0:()=>t(n);return e.jsxs(U.Row,{className:D("my-2",o?"bg-token-main-surface-tertiary":"hover:bg-token-main-surface-secondary hover:cursor-pointer"),onClick:i,children:[e.jsx(U.Cell,{className:"truncate",children:e.jsx(Zs,{reviewStatus:n.review_status,onClick:i,disabled:o})}),e.jsx(U.Cell,{className:"truncate",children:e.jsx("span",{children:n.submitter_display_name&&n.submitter_email?e.jsx(l,{id:"3OKTcX",defaultMessage:"{displayName} ({email})",values:{displayName:n.submitter_display_name,email:n.submitter_email}}):e.jsx("code",{children:n.submitter_id.split("__")[0]})})}),e.jsx(U.Cell,{className:"truncate",children:e.jsx("span",{children:new Date(n.submitted_at).toLocaleString()})})]},n.feedback_id)})})]})}function Oa(){const s=y(),t=kt(),a=St(),n=At(),o=Tt(),i=K(),r=Ot(i,"2509278897"),{isComingSoon:c}=It(),f=n||c;return e.jsxs(e.Fragment,{children:[e.jsx(Rt,{title:s.formatMessage({id:"q9azuh",defaultMessage:"Connectors"}),subtitle:f?void 0:e.jsx(zs,{})}),e.jsxs(Et,{skipLegacyWorkspaceCheck:!0,children:[o?e.jsxs(Lt,{children:[e.jsx(l,{id:"9menCz",defaultMessage:"Connectors may allow end users to share data, which could include protected health information (PHI), with third parties. You should ensure that your use of connectors complies with your obligations under HIPAA. "}),e.jsx(Oe,{href:"https://help.openai.com/en/articles/11509118-admin-controls-security-and-compliance-in-connectors-enterprise-edu-and-team#h_f11dede080",className:"ms-1 underline",children:e.jsx(l,{id:"f0WqA2",defaultMessage:"Learn more about Connectors."})})]}):null,e.jsxs(Ut,{className:"mt-6 gap-12",children:[n?e.jsxs(e.Fragment,{children:[e.jsx(ba,{}),t!=null&&a===Dt.ALPHA&&e.jsx(Sa,{currentWorkspaceId:t.id})]}):c?e.jsx(Ia,{}):null,t!=null&&r&&e.jsxs(Pe,{children:[f&&e.jsx(En,{}),e.jsx(Fn,{workspaceId:t.id})]})]})]})]})}function Ia(){return e.jsxs(e.Fragment,{children:[e.jsx(Pe,{children:e.jsx(Qs,{badge:e.jsx("div",{children:e.jsx("span",{className:"text-token-text-secondary rounded-xl border px-2 py-1 text-[8px] font-bold uppercase",children:e.jsx(l,{id:"IrfQIu",defaultMessage:"Coming soon"})})})})}),e.jsxs("div",{className:"bg-token-main-surface-tertiary text-token-text-secondary flex flex-row gap-2 rounded-xl p-4",children:[e.jsx(en,{className:"icon"}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("p",{className:"text-xs font-bold",children:e.jsx(l,{id:"ES5xU+",defaultMessage:"When will this feature be available?"})}),e.jsxs("p",{className:"text-xs",children:[e.jsx(l,{id:"FYrNXO",defaultMessage:"Internal knowledge will be rolled out incrementally to ChatGPT Business workspaces over the next few weeks. We will notify you in ChatGPT when your workspace is eligible."})," ",e.jsx(Oe,{href:ie,className:"underline",onClick:()=>Ve({link:ie,location:"admin_settings_coming_soon_widget"}),children:e.jsx(l,{id:"WGpoE2",defaultMessage:"Learn more"})})]})]})]})]})}const Co=Pt(function(){return e.jsx(Oa,{})});export{Co as default};
//# sourceMappingURL=lugj7jyubfgfkpx0.js.map
