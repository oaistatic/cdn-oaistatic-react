import{r as E,P as F,j as o}from"./m60bpb0x3x7rg8fj.js";import{eS as _,ap as f,e as Q,H as U,fx as H,kk as K,ez as $,fR as q,eA as J,ar as V,nl as X,p as Y,g_ as Z,T as r,mW as ee}from"./lgw4q0e8zlqqfgug.js";import{a_ as oe,a$ as se,b0 as ae,b1 as te,b2 as ne,b3 as re}from"./ggjzadbnd3k1vu0k.js";import{P as ie}from"./jobqnbdildqzowzf.js";function ue({clientThreadId:e,currentModelId:t,disableDraftPersistence:C=!1,isNewThread:h,isProjectThread:M=!1,onRequestCompletion:S,onContinueGenerating:x,headerClassName:P,hideHeader:z,onlyAllowImageUploads:j,layoutMode:b="bottom"}){const{modelsData:n,externalModelsLoading:A}=_(),[i,l,c,k,w]=f(e,s=>{const g=r.getCurrentNode(s);return[g.message.clientMetadata?.errType!=null&&g.message.clientMetadata.errType!=="info",ee(r.getCurrentNode(s).message),s?.mode,!!s?.continuingFromSharedPostId,s?.continuingFromSharedProjectConversationId!=null]}),m=Q(),d=U(m),N=H(),a=oe({clientThreadId:e}),{isOpen:v,onClose:R}=se({type:"just-hit-rate-limit"}),y=E.useMemo(()=>a?!1:!i&&l,[i,l,a]),I=a,G=K(e),W=f(e,r.hasRecentPIMWarning),L=$(G).data,T=q(),u=W?"pimBlock":L?.gizmo.tags?.includes(J.WorkspaceDisabled)&&!T?"workspaceDisallowsGizmo":n?.models.size===0?"noModelsAvailable":c?.kind===V.GizmoTest&&c.gizmo_id==null?"noTestGizmoId":null,D=F(),p=X(),B=D.action==="moderate",O=Y(m,"1860647109");return o.jsxs(o.Fragment,{children:[o.jsx(ae,{composerController:N,clientThreadId:e,currentModelId:t,isCompletionInProgress:a}),o.jsx("div",{className:"flex justify-center empty:hidden",children:p&&B&&O?o.jsx(te,{}):null}),v?o.jsx(ne,{onClose:R}):null,M&&o.jsx(re,{clientThreadId:e,accountUserId:d?.normalizedAccountUserId}),o.jsx(ie,{clientThreadId:e,disableDraftPersistence:C,onCreateNewCompletion:S,onContinueGenerating:x,currentModelId:t,account:d,currentModelConfig:Z(n?.models,t),areModelsLoading:A,isNewThread:h,isCompletionInProgress:a,className:"w-full",canContinue:y,disabled:!!u,disabledReason:u??void 0,canPause:I,isInteractableSharedThread:p||k||w,headerClassName:P,hideHeader:z,onlyAllowImageUploads:j,layoutMode:b,modelsData:n},e)]})}export{ue as P};
//# sourceMappingURL=gohr301ka7cpfe4s.js.map
