import{f as P,r as Z,j as e,d as J,M as k}from"./m60bpb0x3x7rg8fj.js";import{e as N,dT as ee,eE as se,H as ae,Z as G,ap as te,dS as ne,eH as oe,q as re,r as ie,ey as ce,k as le,eK as de,i as v,ez as ue,p as ge,B as f,dr as he,aA as R,cs as B,a4 as me,V as pe,$ as Se,oc as xe,z as C,X as M,P as y,m8 as ve,Y as fe,od as Ce,T as z,gm as be}from"./lgw4q0e8zlqqfgug.js";import{h as je,j as ke,k as Me,l as ye,S as Pe,n as H,N as w,o as Ne,p as Be,O as we,G as Oe,H as _e,q as Ae,P as F,t as Ie,v as Le,w as Ee,x as Ue,y as Te,z as ze,A as He,B as Fe}from"./ggjzadbnd3k1vu0k.js";import{P as Ge}from"./n5yj38pa2aamrsfp.js";function Ze({showShareButton:a,showProfileDropdown:s,showConversationPrivacyIndicator:o,clientThreadId:t}){const n=N(),m=ee(n,t),i=se(t),d=ae(n),u=P(),b=G(n,"1547743984"),g=d?.normalizedAccountUserId,[p,r,O,h,c,_,S,x]=te(t,l=>[z.hasUserMessage(l),z.getGizmoId(l),Fe(l),l?.title,l?.is_do_not_remember,l?.isStarred,l?.sharedProjectConversationOwner,l?.continuingFromSharedProjectConversationId]),A=ne(()=>be(m)?.value),D=Z.useMemo(()=>je({clientThreadId:t,gizmoId:r,conversationTitle:h,conversationAsyncStatus:A,isDoNotRemember:c,isStarred:_}),[t,r,h,A,c,_]),W=oe(t),{prefetchSearchPromises:q}=ke(),K=q!=null,I=re(ie),V=b.get("show_share_button_text",!1)&&!I,L=u.formatMessage({id:"GizmoInformation.shareChat",defaultMessage:"Share"}),E=ce(r),Q=le();de();const U=!v(n),{data:j}=ue(r),$=(j?.gizmo?.sharing?.subjects?.length??0)>0,X=ge(n,"773249106"),Y=(S||g)&&j&&(i||x)&&E&&($||S&&S!==g)&&X,T=()=>Y?he(n,Ae,{gizmo:j,serverThreadId:i??x,ownerUserId:S?.id??g??""}):R.openSharingModal(i);return e.jsxs(e.Fragment,{children:[v(n)?e.jsx(Me,{}):null,v(n)&&Q?.includes("caterpillar")&&e.jsx(ye,{}),null,r&&E&&e.jsx(Pe,{gizmoId:r,serverThreadId:i??x}),a&&(i||x)&&e.jsx(e.Fragment,{children:V?e.jsx(f,{onClick:T,icon:H,label:L,"data-testid":"share-chat-button",color:"ghost",className:"text-token-text-primary mx-2",style:{viewTransitionName:"var(--vt_share_chat_wide_button)"},children:L}):e.jsx(B,{label:u.formatMessage({id:"CPEfES",defaultMessage:"Share chat"}),children:e.jsx(w,{"data-testid":"share-chat-button",onClick:T,icon:H,style:{viewTransitionName:"var(--vt_share_chat_compact_button)"}})})}),e.jsxs("div",{className:"flex items-center",children:[!U&&!r&&W&&!K&&!p&&!I&&e.jsx(e.Fragment,{children:e.jsx(Ne,{clientThreadId:t})}),o&&e.jsx("div",{className:"me-2",children:e.jsx(Be,{clientThreadId:t,gizmoId:r})}),e.jsx(we,{}),i!=null&&!U&&e.jsx(Oe,{conversation:D,inMainScreen:!0,isActiveConversation:!0,inChatWindow:!0,children:e.jsx(_e,{"aria-label":u.formatMessage({id:"9Mk/E3",defaultMessage:"Open conversation options"}),"data-testid":"conversation-options-button"})}),s&&e.jsx(Re,{clientThreadId:t})]})]})}const Re=({clientThreadId:a})=>{const s=N(),o=me();return F.markStart("LoginOrProfileMenu"),F.markRendered("LoginOrProfileMenu"),e.jsxs(e.Fragment,{children:[!o&&!v(s)&&e.jsx(qe,{}),!o&&e.jsx(Ge,{clientThreadId:a})]})};function De({onClick:a,className:s,testId:o}){const n=P().formatMessage({id:"OFyxqj",defaultMessage:"New chat"});return e.jsx(B,{label:n,className:C("flex",s),children:e.jsx(w,{onClick:m=>He(m,a),icon:ze,"aria-label":n,"data-testid":o,as:"link"})})}function Je({clientThreadId:a,hideNewChat:s=!1}){const o=Te({clientThreadId:a,location:"Navigation actions"});return Ce()?e.jsxs("div",{className:"flex items-center",children:[e.jsx(We,{}),!s&&e.jsx(De,{onClick:o})]}):null}function We(){const a=P(),s=ve(),{isUnauthenticated:o}=fe(),t=Le(Ue,Ee,!1,!0);return o||s?null:e.jsx(B,{label:a.formatMessage({id:"cElEQV",defaultMessage:"Open sidebar"}),className:"flex",children:e.jsx(w,{"aria-label":a.formatMessage({id:"pV/Etp",defaultMessage:"Open sidebar"}),onClick:()=>{R.setSidebarOpen(!0)},icon:t})})}function qe(){const a=N(),s=pe(),o=Ie(),t=Se(Ke.signUpCta),n=xe(),i=G(a,"3637408529").get("is_desktop_primary_auth_button_on_right",!1),d="Chat header",u=()=>{M(a,{fallbackScreenHint:"login",callback:c=>{y.logLogInButtonClicked({location:d,provider:c})}})},b=()=>{M(a,{fallbackScreenHint:"signup",callback:c=>{y.logSignUpButtonClicked({location:d,provider:c})}})},g=()=>{M(a,{fallbackScreenHint:"login_or_signup",callback:c=>{y.logLoginOrSignUpButtonClicked({location:d,provider:c})}})},p=e.jsx(f,{onClick:u,color:s?"primary":"secondary","data-testid":"login-button",className:C(!s&&"screen-arch:hidden md:screen-arch:flex"),children:e.jsx(k,{id:"B1SN7b",defaultMessage:"Log in"})},"login"),r=e.jsx(f,{color:s?"secondary":"primary",onClick:b,"data-testid":"signup-button",className:C(s&&"screen-arch:hidden md:screen-arch:flex"),children:e.jsx(k,{...t})},"signup"),O=e.jsx(f,{color:"primary",onClick:g,"data-testid":"login-or-signup-button",className:C(s&&"screen-arch:hidden md:screen-arch:flex"),children:e.jsx(k,{...n})},"signup"),h=o?[O]:s?[p,r]:[r,p];return e.jsx("div",{className:"flex items-center justify-center gap-2",children:i?h.reverse():h})}const Ke=J({signUpCta:{id:"P6cySK",defaultMessage:"Sign up"}});export{Ze as C,We as E,Re as L,Je as N,qe as a,De as b};
//# sourceMappingURL=rx5cs0ja7c7phupc.js.map
