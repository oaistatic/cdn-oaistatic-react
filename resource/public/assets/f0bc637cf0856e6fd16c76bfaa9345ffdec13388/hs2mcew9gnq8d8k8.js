import{r as R,j as r}from"./m60bpb0x3x7rg8fj.js";import{mx as w,z as g,b8 as v,b2 as tt,cl as et,fB as st}from"./lgw4q0e8zlqqfgug.js";import{kc as nt,Y as rt}from"./ggjzadbnd3k1vu0k.js";function ot(t){const a=D(t,new WeakMap);try{return structuredClone(a)}catch{}return a}function D(t,e){if(t===null||typeof t=="string"||typeof t=="number"||typeof t=="boolean"||typeof t=="bigint")return t;if(typeof t=="symbol"||typeof t=="function"||typeof t>"u")return String(t);if(e.has(t))return e.get(t);try{return structuredClone(t)}catch{}const a=Object.prototype.toString.call(t);if(a==="[object Date]")return new Date(t.getTime());if(a==="[object RegExp]")return it(t);if(a==="[object ArrayBuffer]")return t.slice(0);if(a==="[object DataView]"){const n=t,s=D(n.buffer,e);try{return new DataView(s,n.byteOffset,n.byteLength)}catch{return String(t)}}if(ArrayBuffer.isView(t)&&!(t instanceof DataView))try{const n=t.constructor;if(typeof t.slice=="function")return t.slice();const s=new n(t.length);return s.set(t),s}catch{return String(t)}if(a==="[object Map]"){const n=new Map;e.set(t,n);for(const[s,o]of t)n.set(x(s,e),x(o,e));return n}if(a==="[object Set]"){const n=new Set;e.set(t,n);for(const s of t)n.add(x(s,e));return n}if(typeof Blob<"u"&&t instanceof Blob)try{return typeof File<"u"&&t instanceof File?new File([t],t.name,{type:t.type,lastModified:t.lastModified}):new Blob([t],{type:t.type})}catch{return String(t)}if(typeof URL<"u"&&t instanceof URL)try{return new URL(t.toString())}catch{return String(t)}if(typeof URLSearchParams<"u"&&t instanceof URLSearchParams)try{return new URLSearchParams(t.toString())}catch{return String(t)}if(t instanceof Error){const n=t;let s;try{const o=n.constructor;s=typeof o=="function"?new o(n.message):new Error(n.message)}catch{s=new Error(n.message)}if(s.name=n.name,typeof n.stack=="string"&&(s.stack=n.stack),"cause"in n)try{s.cause=x(n.cause,e)}catch{s.cause=String(n.cause)}for(const o of Object.keys(n))try{s[o]=x(n[o],e)}catch{s[o]=String(n[o])}return s}if(typeof SharedArrayBuffer<"u"&&t instanceof SharedArrayBuffer||typeof WeakMap<"u"&&t instanceof WeakMap||typeof WeakSet<"u"&&t instanceof WeakSet)return String(t);if(Array.isArray(t)){const n=new Array(t.length);e.set(t,n);for(let s=0;s<t.length;s++)s in t&&(n[s]=x(t[s],e));return n}const f={};e.set(t,f);for(const n of Object.keys(t)){let s;try{s=t[n]}catch(o){s=String(o)}f[n]=x(s,e)}return f}function x(t,e){try{return structuredClone(t)}catch{}return D(t,e)}function it(t){const e=new RegExp(t.source,t.flags);return e.lastIndex=t.lastIndex,e}const I="ABORT",_="CALL",U="REJECT",k="RESOLVE";function y(t,e){const a=s=>{const o=s.data;if(Array.isArray(o)&&o[0]===_){s.stopImmediatePropagation();const[p]=s.ports;if(!p)throw new Error("RPCCallMessage must contains a port.");e?async function(){const c=new AbortController;try{p.onmessage=({data:i})=>Array.isArray(i)&&i[0]===I&&c.abort(),p.postMessage([k,await e.call({signal:c.signal},...o.slice(1))])}catch(i){if(i instanceof Error&&i.name==="DataCloneError")try{p.postMessage([k,await e.call({signal:c.signal},...ot(o.slice(1)))]);return}catch{}p.postMessage([U,i])}finally{p.close()}}():(p.postMessage([U,new Error("No function was registered on this RPC. This is probably calling a client which do not implement the function.")]),p.close())}};t.addEventListener("message",a),t.start();const f=s=>(...o)=>new Promise((p,c)=>{const{port1:i,port2:l}=new MessageChannel;i.onmessage=d=>{const h=d.data;h[0]===k?p(h[1]):c(h[1]),i.close()},s?.signal?.addEventListener("abort",()=>{i.postMessage([I]),i.close(),c(new Error("Aborted."))}),t.postMessage([_,...o],[l,...s.transfer||[]])}),n=f({});return n.withOptions=f,n}const W="GENERATOR_GENERATE";function z(t,e){const a=s=>{const o=s.data;if(Array.isArray(o)&&o[0]===W){if(s.stopImmediatePropagation(),!e)throw new Error("No function was registered on this RPC. This is probably calling a client which do not implement the function.");const[p,c,...i]=o,l=e(...i);y(c.next,l.next.bind(l)),y(c.return,d=>l.return?.(d)||{done:!0}),y(c.throw,d=>l.throw?.(d)||Promise.reject(d)),y(c.asyncDispose,async()=>{const d=Symbol.asyncDispose||Symbol.for("Symbol.asyncDispose"),h=Symbol.dispose||Symbol.for("Symbol.dispose");d in l?await l[d]?.():h in l&&l[h]?.()})}};t.addEventListener("message",a),t.start();const f=s=>{let o;return(...p)=>{const{port1:c,port2:i}=new MessageChannel,{port1:l,port2:d}=new MessageChannel,{port1:h,port2:C}=new MessageChannel,{port1:L,port2:E}=new MessageChannel,b={signal:s.signal},A=()=>{c.close(),i.close(),l.close(),d.close(),h.close(),C.close(),L.close(),E.close()},Y=y(c).withOptions(b),q=y(l).withOptions(b),Q=y(h).withOptions(b),Z=y(L).withOptions(b);let N=!1;const O=async m=>{if(o?.(),N)return{done:!0};const B=await m();return B.done&&(N=!0,A()),B},V=async m=>{o?.(),await m(),N=!0,A(),o=()=>{throw new Error("This generator has been disposed.")}},T={next:m=>O(()=>q(m)),return:m=>O(()=>Q(m)),throw:m=>O(()=>Z(m)),[Symbol.asyncDispose||Symbol.for("Symbol.asyncDispose")]:()=>V(()=>Y()),[Symbol.asyncIterator]:()=>T};return t.postMessage([W,{asyncDispose:i,next:d,return:C,throw:E},...p],[...s.transfer||[],i,d,C,E]),s.signal?.addEventListener("abort",()=>{o=()=>{throw new Error("This generator has been aborted.")},A()},{once:!0}),T}},n=f({});return n.withOptions=f,n}const yt=async(t,e,a=[])=>{const f=new Set(Object.keys(e).filter(c=>e[c]?.constructor?.name==="AsyncGeneratorFunction")),n={};for(const[c,i]of Object.entries(e)){const l=new MessageChannel;f.has(c)?z(l.port1,i):y(l.port1,i),n[c]=l.port2}const{ports:s,replyPort:o}=await new Promise(c=>{const i=l=>{l.data.type==="init"&&l.source&&l.source===t.contentWindow&&(window.removeEventListener("message",i),c(l.data))};window.addEventListener("message",i)});return o.postMessage(n,Object.values(n)),o.start(),Object.fromEntries(Object.entries(s).map(([c,i])=>[c,a.includes(c)?z(i):y(i)]))},at="{{.sandboxHost}}",ct=`https://${at}`,{origin:ft}=new URL(ct),gt=[ft,"https://cdn.jsdelivr.net","https://cdn.tailwindcss.com","https://esm.sh","https://unpkg.com","https://pypi.org","https://files.pythonhosted.org"],u=t=>Array.isArray(t)||w(t)||t instanceof Map||t instanceof Set,j=t=>t==null||typeof t=="string"||typeof t=="number"||typeof t=="boolean",G=t=>w(t)?Object.entries(t):Array.from(t.entries()),$=t=>`${typeof t}:${typeof t=="object"?JSON.stringify(t):t}`,mt=({isPreview:t=!1,isInitialLevelExpanded:e=!1,value:a})=>{const[f,n]=R.useState(e);return j(a)?r.jsx(S,{value:a,depth:0}):u(a)?r.jsxs("span",{className:g("relative z-0 max-w-full font-mono text-sm leading-6",f&&"w-full flex-auto"),children:[r.jsxs("span",{role:"button",className:"group/row flex flex-wrap items-center gap-x-1 italic",onClick:()=>n(!f),children:[!t&&r.jsx(K,{isExpanded:f}),r.jsx(J,{value:a,depth:0}),r.jsx(M,{value:a})]}),f&&!t&&r.jsx("div",{className:"ps-6",children:r.jsx(X,{value:a,depth:0})})]}):r.jsx("span",{className:"truncate",children:String(a)})},F=({value:t,depth:e=0})=>u(t)?r.jsx(X,{depth:e,value:t}):j(t)?r.jsx(S,{depth:e,value:t}):r.jsx("span",{className:"truncate",children:String(t)}),J=({value:t,depth:e=0})=>{const a=Array.isArray(t),f=G(t);return r.jsxs("div",{className:"inline-flex max-w-fit min-w-0 grow basis-0",children:[!w(t)&&r.jsx(P,{isShort:!0,isSecondary:!0,collection:t}),a?"[":"{",r.jsx("span",{className:"inline-flex max-w-fit min-w-0 shrink grow basis-0 overflow-hidden",children:f.map(([n,s],o)=>{let p=null;return u(s)?p=r.jsx(P,{collection:s}):j(s)?p=r.jsx(S,{truncate:!0,depth:e+1,value:s}):p=r.jsx(F,{depth:e+1,value:s}),r.jsxs(R.Fragment,{children:[(w(t)||t instanceof Map)&&r.jsx("span",{className:"text-token-text-secondary min-w-[2em] shrink truncate whitespace-pre",children:r.jsx(H,{value:t,propertyKey:n})}),p,o<f.length-1&&r.jsx("span",{className:"whitespace-pre",children:", "})]},$(n))})}),a?"]":"}"]})},X=({value:t,depth:e=0})=>{const[a,f]=R.useState(()=>new Set),n=G(t);return r.jsx("ol",{className:"flex flex-col ps-6 font-mono",children:n.map(([s,o])=>{const p=$(s),c=a.has(p),i=u(o),l=()=>{f(d=>{const h=new Set(d);return h.has(p)?h.delete(p):h.add(p),h})};return r.jsxs("li",{className:g("flex ps-1 whitespace-nowrap",i&&"flex-col",!i&&"group/row flex-wrap"),onClick:d=>d.stopPropagation(),children:[r.jsxs("span",{onClick:i?l:void 0,role:i?"button":void 0,className:g("group/row z-10 -ms-1 min-w-0 items-center gap-x-1",i?"flex":"inline-flex"),children:[i&&r.jsxs(r.Fragment,{children:[r.jsx(pt,{}),r.jsx(K,{shiftLeft:!0,isExpanded:c})]}),r.jsx("span",{className:g("font-bold",(w(t)||Array.isArray(t))&&"text-red-900 dark:text-blue-400"),children:r.jsx(H,{value:t,propertyKey:s})}),i&&!c&&r.jsx(J,{value:o,depth:e+1}),i&&c&&r.jsx(P,{isSecondary:!0,collection:o}),i&&r.jsx(M,{value:o})]}),(!i||c)&&r.jsx(F,{value:o,depth:e+1}),(typeof o=="string"||typeof o=="number")&&r.jsx(M,{value:o})]},p)})})},S=({value:t,truncate:e=!1})=>typeof t=="string"?r.jsxs("span",{className:g("dark:text-blue-75 text-red-500",e&&"max-w-fit min-w-[2em] shrink-0 grow basis-0 overflow-hidden text-ellipsis whitespace-nowrap",!e&&"break-words break-all whitespace-normal"),children:["'",t,"'"]}):r.jsx("span",{className:g("whitespace-nowrap",t==null?"text-token-text-secondary":"dark:text-brand-purple-600 text-blue-500"),children:String(t)}),pt=()=>r.jsx("span",{className:"absolute start-0 end-0 z-[-1] h-6 rounded-md group-hover/row:bg-gray-50 dark:group-hover/row:bg-gray-700"}),P=({collection:t,isSecondary:e=!1,isShort:a=!1})=>{let f=null;return Array.isArray(t)&&t.length>0?f=a?`(${t.length})`:`Array(${t.length})`:t instanceof Set?f=`Set(${t.size})`:t instanceof Map?f=`Map(${t.size})`:w(t)&&(f="{â€¦}"),f&&r.jsx("span",{className:g(e&&"text-token-text-secondary"),children:f})},H=({value:t,propertyKey:e})=>w(t)||Array.isArray(t)?`${et(e)}: `:t instanceof Map?r.jsxs("span",{className:"inline-flex items-center gap-1",children:[j(e)?r.jsx(S,{value:e,depth:0}):r.jsx("span",{className:"text-token-text-secondary",children:JSON.stringify(e)}),r.jsx(st,{className:"icon-sm text-token-text-secondary"})]}):null,K=({isExpanded:t,shiftLeft:e=!1})=>r.jsx("button",{className:g("flex h-5 shrink-0 items-center overflow-hidden",e&&"ms-[-16px]"),children:r.jsx(v,{className:g("icon-sm text-token-text-secondary transition-transform",t&&"rotate-90")})}),M=({value:t})=>{const e=tt(),a=()=>{rt(JSON.stringify(t),e)};return r.jsx("span",{className:g("text-token-text-secondary relative inline-block h-4 self-center opacity-0 transition-opacity","group-hover/row:opacity-100 group-hover/row:delay-500","hover:after:bg-token-main-surface-tertiary after:pointer-events-none after:absolute after:inset-[-4px] after:z-0 after:rounded-lg after:content-['']"),children:r.jsx(nt,{iconClassName:"icon-sm z-10",iconOnly:!0,onCopy:a})})};export{gt as C,mt as L,ct as a,yt as i};
//# sourceMappingURL=hs2mcew9gnq8d8k8.js.map
