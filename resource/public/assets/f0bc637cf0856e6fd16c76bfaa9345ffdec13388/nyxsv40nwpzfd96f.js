import{r as E,j as x}from"./m60bpb0x3x7rg8fj.js";import{mO as u,aC as l,g as R,T as L,pM as y}from"./lgw4q0e8zlqqfgug.js";import{ff as F,fg as c,ca as g,c9 as k}from"./ggjzadbnd3k1vu0k.js";function v(f,i){return I[i]}const I={inProgress:"Running tool",finished:"Finished running tool",error:"Error running tool"};function G({messages:f,isRequestActive:i,isLastMessageInTurn:C,clientThreadId:d}){const h=f.filter(s=>s.author.role===l.Assistant&&s.recipient&&u(s.recipient)),p=R(d),a=p?L.getConversationTurns(p).flatMap(s=>s.messages):[],e=a.findLastIndex(s=>s.author.role===l.Assistant&&s.recipient&&u(s.recipient)),r=e>=0?a[e]:void 0,o=r&&r.recipient,T=e>=0?a.slice(e+1).find(s=>s.author.role===l.Assistant&&(!s.recipient||!u(s.recipient))):void 0,S=T!=null&&y(T),m=e>=0&&a.slice(e+1).some(s=>s.author.role===l.Tool&&s.author.name===o),A=r?.id,n=F(s=>A?s.getToolState(d,A):void 0);let t=null;m||n?.status===c.Finished?t={key:"finished",status:g.Finished}:n?.status===c.Error?t={key:"error",status:g.Error}:(n?.status===c.Running||i&&C&&!n)&&(t={key:"inProgress",status:g.Running});const M=E.useMemo(()=>!o||!t?null:v(o,t.key),[o,t]);return h.length===0||!o||!h.some(s=>s.id===r?.id)||S||!t?null:x.jsx(k,{highlightedCommand:M,showWorkUserSetting:!1,status:t.status,children:null})}export{G as BrowserToolMessage};
//# sourceMappingURL=nyxsv40nwpzfd96f.js.map
