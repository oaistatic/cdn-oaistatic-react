const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/fxzpa6snawbw4ian.js","assets/m60bpb0x3x7rg8fj.js","assets/lgw4q0e8zlqqfgug.js","assets/root-otc54kct.css","assets/jozqsyj8lvw2y89i.js","assets/l0p6qq8f8it6pgl9.js","assets/ggjzadbnd3k1vu0k.js","assets/conversation-small-j0gcsxmz.css","assets/hkzcnlt7dmtlzav8.js","assets/glu06a3y5u0laqff.js"])))=>i.map(i=>d[i]);
import{b2 as ee,C as te,c2 as P,aZ as R,aq as Ke,e as Y,bb as Ve,hn as Le,bF as ke,S as ae,p as Z,B as T,R as U,aa as Ae,b_ as Ee,b$ as Pe,P as k,i6 as pe,dr as W,gd as he,z as $,cd as O,kM as ie,dK as ze,aH as xe,bH as De,gj as Xe,iE as Je,cs as Ze,gh as et,b8 as tt,dN as at,m7 as st}from"./lgw4q0e8zlqqfgug.js";import{r as x,f as I,j as e,M as i,J as re,d as A,q as Ue,u as X,p as nt,h as it,i as be,c as rt,a as ot,b as lt}from"./m60bpb0x3x7rg8fj.js";import{e as Oe,g as dt,f as Fe,a as ct,c as ut,d as gt,h as mt,i as pt}from"./lx0y091m5xst5og4.js";import{d as fe}from"./kh7rmh4dpsh5j6sg.js";import{pl as Re,eB as je,eJ as F,sv as ht,eK as Ge,eL as me,jN as oe,pm as xt,bK as ft,pn as jt,cD as vt,aY as yt,eG as bt,eM as St,da as Mt,cV as Se,aT as wt,i8 as Ct,sw as Bt,fr as We,cG as Nt,cW as _t,F as Tt,i0 as It,aN as Lt,fO as kt,sx as At,mw as Et,bE as Pt}from"./ggjzadbnd3k1vu0k.js";import{S as zt}from"./jqy1uu6573e00zh8.js";import{c as Dt}from"./iej0cupg2dqkmejt.js";import{T as Ut,a as Ot}from"./b2lwi6is3nazvxrr.js";import{u as Ft}from"./ha73j9iy5pkvdx6y.js";import{B as Rt}from"./jh8srhgrrwf9rrcc.js";import{A as J,f as se,b as ne,d as Me,e as Gt,c as Wt}from"./etw953p5af9bs5n2.js";import{u as qt,T as q,R as Yt,B as Qt,X as $t,Y as Ht,a as Kt,b as we,C as Ce,S as Be,M as Vt,d as Xt}from"./oqg6g1bpiwwhksn4.js";import{S as Jt}from"./opnqtrf44t0g14xb.js";import{c as Zt,E as ea}from"./hb68k3oakb3tiftg.js";import{L as ve}from"./nx5oq2rd1o5tuxqz.js";import"./hbir13mtq07o9x1a.js";import"./o53bheyqocotqvus.js";import"./l9bupap4fyh5egbo.js";import"./dgb06x9f8z6d0ar9.js";import"./gohr301ka7cpfe4s.js";import"./jobqnbdildqzowzf.js";import"./ls4akj6tri7bc2dz.js";import"./glu06a3y5u0laqff.js";import"./iayy5u2a26jybmdr.js";import"./n5yj38pa2aamrsfp.js";import"./rx5cs0ja7c7phupc.js";import"./dfbgvqz3f2t2gfhn.js";import"./hzuwclo1fy1q03ik.js";import"./nn6a4342otoakkr2.js";import"./h81zqbvh0a7amk0o.js";import"./jh57htegso1fdrwn.js";import"./lff9oru7r5vtmz06.js";import"./fnje4v6gzdtvboh3.js";import"./jozqsyj8lvw2y89i.js";import"./l0p6qq8f8it6pgl9.js";import"./fxr8k06ldp92zu6e.js";import"./ymw5i23lnc367dmr.js";import"./jtj7tm19s85de1gz.js";import"./evlyokzg1xrjbsou.js";import"./galyil7vygq0i5a6.js";import"./d5tpr8r44qr24e8u.js";import"./hp08qw6yu0x90xkd.js";import"./nbcw9m75c6j7so0w.js";import"./ijm2v97qh75qdidh.js";var z=(t=>(t.FLEXIBLE="month",t.ANNUAL="year",t))(z||{});const ta=Dt(z);function aa({isOpen:t,onClose:s,initialTeamBillingType:a,renewalDate:n,accountId:d,billingDetails:l}){const[o,r]=x.useState(a),[c,m]=x.useState(!1),[u,h]=x.useState(!1),p=I(),g=ee(),y=Re(d),j=async()=>{h(!0);try{await y.mutateAsync({accountId:d,updatedPriceInterval:o==="month"?"month":"year",updatedSeats:void 0}),h(!1);const B=o==="month"?"monthly":"annual",E=p.formatDate(n,{year:"numeric",month:"long",day:"numeric"});g.success(p.formatMessage({id:"teamBilling.successfullyUpdatedSubscriptionFrequency",defaultMessage:"Your plan will change to {updatedBillingFrequency} on {renewalDate}"},{updatedBillingFrequency:B,renewalDate:E}),{hasCloseButton:!0}),m(!1),s()}catch{g.warning(p.formatMessage({id:"teamBilling.errorUpdatingSubscription",defaultMessage:"There was a problem updating your subscription"}),{hasCloseButton:!0})}finally{h(!1)}},{flexibleBillingPlan:M,annualBillingPlan:b}=je(l.currency),S=o==="month"?M:b,w=()=>{m(!1),r(a),s()};return e.jsx(te,{testId:"modal-teams-change-billing-schedule",type:"success",isOpen:t,onClose:w,size:"custom",className:"max-w-xl",noPadding:!0,title:c?p.formatMessage({id:"teamBilling.changeBillingScheduleConfirmTitle",defaultMessage:"Confirm changes"}):p.formatMessage({id:"teamBilling.changeBillingScheduleTitle",defaultMessage:"Change billing schedule"}),showCloseButton:!0,children:c?e.jsx(na,{selectedPlan:o,initialTeamBillingType:a,renewalDate:n,handleUpdate:j,isUpdating:u,selectedBillingPlan:S,onClose:w}):e.jsx(sa,{setSelectedPlan:r,selectedPlan:o,initialTeamBillingType:a,setConfirmPage:m,renewalDate:n,flexibleBillingPlan:M,annualBillingPlan:b,onClose:w})})}function sa({selectedPlan:t,setSelectedPlan:s,initialTeamBillingType:a,setConfirmPage:n,renewalDate:d,flexibleBillingPlan:l,annualBillingPlan:o,onClose:r}){const c=I();return e.jsxs("div",{className:"flex flex-col p-6",children:[e.jsx("div",{className:"grid grid-flow-row grid-cols-2",children:e.jsxs(Ge,{className:"col-span-2 grid gap-4 md:col-span-2 md:grid-cols-2",defaultValue:t,onValueChange:m=>{ta(m)&&s(m)},children:[e.jsx(me,{billingType:"month",...l,selectedValue:t}),e.jsx(me,{billingType:"year",...o,selectedValue:t})]})}),e.jsx("span",{className:"text-token-text-secondary mt-5 text-sm",children:e.jsx(i,{...F.changeEffectDate,values:{date:e.jsx(re,{value:d,year:"numeric",month:"long",day:"numeric"})}})}),e.jsxs("div",{className:"mt-6 flex items-center justify-end gap-2",children:[e.jsx(P,{title:c.formatMessage(F.cancel),color:"secondary",onClick:()=>r()}),e.jsx(P,{title:c.formatMessage(F.continueToPricePreview),disabled:t===a,color:"primary",onClick:()=>n(!0)})]})]})}function na({initialTeamBillingType:t,selectedPlan:s,renewalDate:a,handleUpdate:n,isUpdating:d,selectedBillingPlan:l,onClose:o}){const r=I();return e.jsxs("div",{className:"p-4",children:[e.jsx("span",{className:"text-sm",children:e.jsx(i,{...F.confirmPageChangeEffectDate,values:{current_plan:t==="month"?"Flexible (monthly)":"Annual",new_plan:s==="month"?"Flexible (monthly)":"Annual",date:e.jsx(re,{value:a,year:"numeric",month:"long",day:"numeric"})}})}),e.jsxs("div",{className:"bg-token-main-surface-secondary mt-4 flex flex-col rounded-xl p-4",children:[e.jsx("span",{className:"font-semibold",children:e.jsx(i,{...l.name})}),e.jsx("span",{className:"text-sm",children:e.jsx(i,{...l.cost,values:{monthlyCost:l.monthlyCost,discountedMonthlyCost:l.discountedMonthlyCost,currencyCode:r.formatMessage(l.currencyCode),currencySign:r.formatMessage(l.currencySign),s:(...c)=>e.jsx(ht,{children:c})}})}),e.jsx("span",{className:"text-token-text-secondary text-sm",children:e.jsx(i,{...l.costStructure})})]}),e.jsxs("div",{className:"mt-4 flex justify-end gap-2",children:[e.jsx(P,{title:r.formatMessage(F.cancel),color:"secondary",onClick:o}),e.jsx(P,{title:r.formatMessage(F.confirmChange),color:"primary",onClick:n,loading:d})]})]})}const ia="https://q.surveyfeedbackresponse.com/jfe/form/SV_9vIX2bUyeLKgCZo";function ra({isOpen:t,onClose:s}){const a=I(),n=ee(),{data:d,isLoading:l}=oe(),o=R(),r=xt(o?.id),c=Ke(),m=Y(),[u,h]=x.useState(""),[p,g]=x.useState(!1),y=c?.email&&u.toLowerCase()==c.email.toLowerCase(),[j,M]=x.useState(!!(d&&!d.will_renew));if(!t||l||!o||!d)return null;const b=!j&&(o?.isWorkspaceAccount()??!1)&&(o?.isTeam()??!1)&&Ve(m,"4280292244").get("enabled",!1),S=async()=>{g(!0);try{await r.mutateAsync(o.id),M(!0),window.open(`${ia}?user_id=${c?.id}&account_id=${o.id}&plan_type=${d.plan_type}`,"_blank")}catch{n.warning(a.formatMessage(D.errorCancellingSubscription),{hasCloseButton:!0})}finally{g(!1)}};return e.jsx(te,{testId:"modal-cancel-team-plan",type:"success",onClose:s,showCloseButton:!0,isOpen:t,className:"",title:e.jsx("span",{className:"text-lg",children:e.jsx(i,{...D.cancelPlan})}),children:j?e.jsxs("div",{children:[e.jsx("h3",{className:"text-token-text-primary mb-2 text-base font-semibold",children:e.jsx(i,{...D.successfullyCanceled})}),d.active_until!=null&&e.jsx("p",{className:"text-token-text-primary text-sm",children:e.jsx(i,{...b?G.workspaceAccessEnds:H.retainUntil,values:{expiryDate:new Date(d.active_until)}})}),e.jsx("div",{className:"mt-6 flex w-full flex-row justify-end",children:e.jsx(P,{title:a.formatMessage(D.doneButton),color:"primary",onClick:s,disabled:p})})]}):e.jsxs("div",{children:[e.jsxs("div",{className:"flex flex-col items-center justify-center gap-4",children:[e.jsxs("div",{className:"flex w-full items-center gap-4",children:[e.jsx(ft,{src:o.data.profilePictureUrl,size:"large"}),e.jsxs("div",{className:"flex-col",children:[e.jsx("p",{className:"font-semibold",children:o.data.name}),e.jsx("p",{className:"text-token-text-secondary text-sm",children:e.jsx(i,{...D.membersCount,values:{count:d.seats_entitled}})})]})]}),e.jsxs("div",{className:"w-full",children:[e.jsx("h3",{className:"text-token-text-primary mb-2 text-base font-semibold",children:e.jsx(i,{...b?G.areYouSure:H.areYouSure})}),b?e.jsxs(e.Fragment,{children:[e.jsxs("ul",{className:"text-token-text-secondary list-disc ps-5 text-sm",children:[e.jsx("li",{className:"my-2",children:e.jsx(i,{...G.dataUnavailable})}),e.jsx("li",{className:"my-2",children:e.jsx(i,{...G.adminControlsUnavailable})}),e.jsx("li",{className:"my-2",children:e.jsx(i,{...G.dataPrivacyUnavailable})}),e.jsx("li",{className:"my-2",children:e.jsx(i,{...G.businessFeaturesUnavailable})})]}),d.active_until!=null&&e.jsx("p",{className:"text-token-text-secondary mt-4 text-sm",children:e.jsx(i,{...G.workspaceAccessEnds,values:{expiryDate:new Date(d.active_until)}})})]}):e.jsxs("ul",{className:"text-token-text-secondary list-disc ps-5 text-sm",children:[e.jsx("li",{className:"my-2",children:e.jsx(i,{...H.dataUnavailable})}),d.active_until!=null&&e.jsx("li",{className:"my-2",children:e.jsx(i,{...H.retainUntil,values:{expiryDate:new Date(d.active_until)}})}),e.jsx("li",{className:"my-2",children:e.jsx(i,{...H.retainEmailAccess})})]})]}),e.jsxs("div",{className:"w-full",children:[e.jsx("h3",{className:"text-token-text-primary mb-2 text-base font-semibold",children:e.jsx(i,{...D.enterEmailToConfirm})}),e.jsx(Le,{ariaLabel:a.formatMessage(D.enterEmailToConfirm),type:"text",name:"user-email",placeholder:"abcd@acme.com",onChange:w=>{h(w.target.value)}})]})]}),e.jsxs("div",{className:"mt-6 flex w-full flex-row justify-end",children:[e.jsx(P,{title:a.formatMessage(D.keepSubscriptionButton),onClick:s,disabled:p}),e.jsx(P,{title:a.formatMessage(D.cancelSubscriptionButton),onClick:S,disabled:!y,loading:p,color:"danger",className:"ms-2"})]})]})})}const D=A({cancelPlan:{id:"cancelTeamPlanModal.cancelPlan",defaultMessage:"Cancel subscription"},errorCancellingSubscription:{id:"cancelTeamPlanModal.errorCancellingSubscription",defaultMessage:"There was a problem cancelling your subscription."},doneButton:{id:"cancelTeamPlanModal.doneButton",defaultMessage:"Done"},keepSubscriptionButton:{id:"cancelTeamPlanModal.keepSubscriptionButton",defaultMessage:"Keep subscription"},cancelSubscriptionButton:{id:"cancelTeamPlanModal.cancelSubscriptionButton",defaultMessage:"Cancel subscription"},successfullyCanceled:{id:"cancelTeamPlanModal.successfullyCanceled",defaultMessage:"You have successfully canceled your subscription."},membersCount:{id:"cancelTeamPlanModal.membersCount",defaultMessage:"{count, plural, one {# member} other {# members}}"},enterEmailToConfirm:{id:"cancelTeamPlanModal.strongerCopy.enterEmailToConfirm",defaultMessage:"Enter your email address to confirm:"}}),H=A({dataUnavailable:{id:"cancelTeamPlanModal.dataUnavailable",defaultMessage:"All workspace data including chat history and settings will not be available."},areYouSure:{id:"cancelTeamPlanModal.areYouSure",defaultMessage:"Are you sure?"},retainUntil:{id:"cancelTeamPlanModal.retainUntil",defaultMessage:"You will retain access to the workspace until the end of your billing cycle on {expiryDate, date, long}."},retainEmailAccess:{id:"cancelTeamPlanModal.retainEmailAccess",defaultMessage:"You will still be able to use ChatGPT with the other workspaces associated with this email address."}}),G=A({dataUnavailable:{id:"cancelTeamPlanModal.strongerCopy.dataUnavailable",defaultMessage:"All workspace data, including chat history and settings"},adminControlsUnavailable:{id:"cancelTeamPlanModal.strongerCopy.adminControlsUnavailable",defaultMessage:"Essential admin controls, SAML SSO, and MFA"},dataPrivacyUnavailable:{id:"cancelTeamPlanModal.strongerCopy.dataPrivacyUnavailable",defaultMessage:"Data privacy (default-exclusion from training)"},businessFeaturesUnavailable:{id:"cancelTeamPlanModal.strongerCopy.businessFeaturesUnavailable",defaultMessage:"Unlimited ChatGPT + access to business features (analysis, Deep Research, and more)"},workspaceAccessEnds:{id:"cancelTeamPlanModal.strongerCopy.workspaceAccessEnds",defaultMessage:"Workspace access will end at the end of your billing cycle on {expiryDate, date, long}."},areYouSure:{id:"cancelTeamPlanModal.strongerCopy.areYouSure",defaultMessage:"Are you sure? Canceling means losing access to:"}}),oa=.25,qe="team_seats_promo";function Ye(t){const{data:s}=Ft(qe),a=s?.state==="eligible",n=x.useMemo(()=>t==null||!Number.isFinite(t)?null:Math.ceil(t*oa),[t]);return x.useMemo(()=>!a||n==null?{eligible:!1,seatThresholdGap:null}:{eligible:a,seatThresholdGap:n},[a,n])}const la=ke.p`text-base font-semibold mb-3 mt-3`,da=({isOpen:t,onClose:s,initialTeamBillingType:a,initialSeats:n,accountId:d,renewalDate:l,billingDetails:o,promoContext:r})=>{const c=I(),m=ee(),[u,h]=x.useState(n),[p,g]=x.useState(!1),[y,j]=x.useState(!1),{flexibleBillingPlan:M,annualBillingPlan:b}=je(o.currency),S=a===vt.FLEXIBLE?M:b,w=Re(d),B=async({promoCode:He}={})=>{j(!0);try{await w.mutateAsync({accountId:d,updatedPriceInterval:void 0,updatedSeats:u,updatedPromoCode:He}),j(!1),m.success(c.formatMessage({id:"teamBilling.successfullyUpdatedSubscription",defaultMessage:"Your subscription was updated successfully"}),{hasCloseButton:!0}),g(!1),s()}catch{m.warning(c.formatMessage({id:"teamBilling.errorUpdatingSubscription",defaultMessage:"There was a problem updating your subscription"}),{hasCloseButton:!0})}finally{j(!1)}},E=()=>{g(!1),h(n),s()},f=Math.max(0,u-n),N=r?.type==="seatsPromo"&&f>=r.seatThresholdGap;return e.jsx(te,{testId:"modal-teams-manage-seats",type:"success",isOpen:t,onClose:E,size:"custom",noPadding:!0,className:"max-w-2xl",showCloseButton:!0,title:p?c.formatMessage({id:"teamsManageSeatsModal.title",defaultMessage:"Manage seats"}):c.formatMessage({id:"teamsManageSeatsModalConfirmPage.title",defaultMessage:"Review"}),children:p?e.jsx(ua,{numSeats:u,initialSeats:n,handleUpdate:B,isUpdating:y,renewalDate:l,accountId:d,selectedPlanBillingInfo:S,onClose:E,promoQualified:N}):e.jsx(ca,{selectedPlan:a,selectedPlanBillingInfo:S,numSeats:u,initialSeats:n,setNumSeats:h,renewalDate:l,setConfirmPage:g,billingDetails:o,promoContext:r,promoQualified:N,handleUpdate:B,isUpdating:y})})};function ca({selectedPlan:t,selectedPlanBillingInfo:s,numSeats:a,initialSeats:n,setNumSeats:d,setConfirmPage:l,billingDetails:o,handleUpdate:r,isUpdating:c,renewalDate:m,promoContext:u,promoQualified:h}){const p=I(),g=yt(isNaN(a)?0:a,n,bt),y=Math.max(0,a-n),j=u?.type==="seatsPromo"?Math.max(u.seatThresholdGap-y,0):0,M=h&&u?.type==="seatsPromo"?Number((g*s.discountedMonthlyCost*.25).toFixed(2)):void 0,b=u?.type==="seatsPromo"&&u.seatThresholdGap>0,S=b&&j===0;return e.jsxs("div",{className:"grid grid-flow-row grid-cols-2",children:[e.jsxs("div",{className:"flex flex-col gap-4 p-5",children:[b&&e.jsx("div",{className:"rounded-lg border border-[#C5CEFF] bg-[#ECF0FF] px-4 py-3 text-sm text-[#262B72]",children:S?e.jsx(i,{..._.seatsPromoQualified,values:{seatCount:u.seatThresholdGap}}):e.jsx(i,{..._.seatsPromoReminder,values:{remainingSeats:j}})}),e.jsx(St,{numSeats:a,minSeats:n,setNumSeats:d}),e.jsx(Ge,{className:"col-span-2 grid md:col-span-1 md:grid-cols-1",defaultValue:t,children:e.jsx(me,{billingType:t,...s,selectedValue:t})})]}),e.jsxs("div",{className:"border-token-bg-tertiary bg-token-bg-secondary col-span-3 flex h-full flex-col overflow-hidden border-s p-6 md:col-span-1",children:[e.jsx(la,{children:e.jsx(i,{...F.summaryTitle})}),e.jsx(Rt,{numSeats:g,selectedPlan:t,billingDetails:o,totalLabel:F.allPlansTotal,billDate:e.jsx(re,{value:m,year:"numeric",month:"long",day:"numeric"}),extraDiscountAmount:M}),S?e.jsx(P,{title:p.formatMessage(_.addSeats),disabled:g===n,onClick:()=>r({promoCode:qe}),loading:c,className:"w-full rounded-xl",color:"primary"}):e.jsx(P,{title:p.formatMessage(_.continue),disabled:g===n,onClick:()=>l(!0),className:"w-full rounded-xl",color:"primary"})]})]})}function ua({numSeats:t,initialSeats:s,renewalDate:a,handleUpdate:n,isUpdating:d,accountId:l,selectedPlanBillingInfo:o,onClose:r,promoQualified:c}){const m=I(),{data:u,isError:h,isLoading:p}=jt(l,t);if(p)return e.jsx("div",{className:"flex items-center justify-center py-32",children:e.jsx(ae,{})});if(!(h||!u))return e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"font-semibold",children:e.jsx(i,{..._.additionalSeats,values:{additionalSeats:t-s}})}),e.jsx("span",{className:"font-semibold",children:e.jsx(i,{..._.additionalSeatsTotal,values:{currencySign:m.formatMessage(o.currencySign),totalCost:(u.total_amount/100).toFixed(2)}})})]}),e.jsx("span",{className:"text-token-text-secondary text-sm",children:e.jsx(i,{..._.proratedAmountMessage})}),e.jsx("span",{className:"bg-token-bg-secondary text-token-text-secondary mt-4 flex flex-col rounded-2xl p-4 text-sm",children:e.jsx(i,{..._.chargeMessage,values:{numSeats:t,date:e.jsx(re,{value:a,year:"numeric",month:"long",day:"numeric"})}})}),c&&e.jsx("div",{className:"mt-4 rounded-lg bg-[#E0FFE7] px-4 py-3 text-sm font-medium text-[#24622B]",children:e.jsx(i,{..._.seatsPromoSummaryDiscount})}),e.jsx("hr",{className:"mt-4"}),e.jsxs("div",{className:"mt-4 flex justify-between",children:[e.jsx("span",{className:"font-semibold",children:e.jsx(i,{..._.subtotal})}),e.jsx("span",{children:e.jsx(i,{..._.subtotalPrice,values:{currencySign:m.formatMessage(o.currencySign),totalCost:(u.amount_excluding_tax/100).toFixed(2)}})})]}),e.jsxs("div",{className:"mt-2 flex justify-between",children:[e.jsx("span",{className:"font-semibold",children:e.jsx(i,{..._.tax})}),e.jsx("span",{children:e.jsx(i,{..._.taxAmount,values:{currencySign:m.formatMessage(o.currencySign),tax:(u.tax_amount/100).toFixed(2)}})})]}),e.jsxs("div",{className:"mt-2 flex justify-between",children:[e.jsx("span",{className:"font-semibold",children:e.jsx(i,{..._.totalDueToday})}),e.jsx("span",{className:"font-semibold",children:e.jsx(i,{..._.totalDueTodayAmount,values:{currencySign:m.formatMessage(o.currencySign),totalCost:(u.total_amount/100).toFixed(2)}})})]}),e.jsx("hr",{className:"mt-4"}),e.jsxs("div",{className:"mt-6 flex justify-end gap-2",children:[e.jsx(P,{title:m.formatMessage(F.cancel),color:"secondary",onClick:r,disabled:d}),e.jsx(P,{title:m.formatMessage(_.addSeats),color:"primary",onClick:n,loading:d})]})]})}const _={continue:{id:"teamsManageSeatsModal.continue",defaultMessage:"Continue",description:"Continue button for manage seats modal"},addSeats:{id:"teamsManageSeatsModal.addSeats",defaultMessage:"Add seats",description:"Team manage seats modal add seats button"},tax:{id:"teamsManageSeatsModal.tax",defaultMessage:"Tax",description:"Tax label"},subtotal:{id:"teamsManageSeatsModal.subTotal",defaultMessage:"Subtotal",description:"Subtotal label"},proratedAmountMessage:{id:"teamsManageSeatsModal.proratedAmountMessage",defaultMessage:"Prorated amount until next billing cycle",description:"Informing user that they will be charged a prorated amount today"},chargeMessage:{id:"teamsManageSeatsModal.chargeMessage",defaultMessage:"You will be charged for {numSeats} total seats at your next renewal on {date}",description:"Number of additional seats being purchased"},additionalSeats:{id:"teamsManageSeatsModal.additionalSeats",defaultMessage:"{additionalSeats} additional {additionalSeats, plural, one {seat} other {seats}}",description:"Number of additional seats being purchased"},additionalSeatsTotal:{id:"teamsManageSeatsModal.additionalSeatsTotal",defaultMessage:"{currencySign}{totalCost}",description:"Summary total of selected plan"},subtotalPrice:{id:"teamsManageSeatsModal.subtotalPrice",defaultMessage:"{currencySign}{totalCost}",description:"Subtotal price for selected plan"},taxAmount:{id:"teamsManageSeatsModal.taxAmount",defaultMessage:"{currencySign}{tax}",description:"Tax amount"},totalDueToday:{id:"teamsManageSeatsModal.totalDueToday",defaultMessage:"Total due today",description:"Total due today label"},totalDueTodayAmount:{id:"teamsManageSeatsModal.totalDueTodayAmount",defaultMessage:"{currencySign}{totalCost}",description:"Total due today"},seatsPromoReminder:{id:"teamsManageSeatsModal.seatsPromoReminder",defaultMessage:"Add {remainingSeats, plural, one {# more seat} other {# more seats}} to get 25% off your plan for one month.",description:"Promo banner reminder while additional seats are still required"},seatsPromoQualified:{id:"teamsManageSeatsModal.seatsPromoQualified",defaultMessage:"You're all set! Purchasing {seatCount, plural, one {# seat} other {# seats}} gets you 25% off your plan for one month.",description:"Promo banner shown after the user selects enough seats"},seatsPromoSummaryDiscount:{id:"teamsManageSeatsModal.seatsPromoSummaryDiscount",defaultMessage:"A 25% discount will apply to your plan for one month.",description:"Summary callout shown once the promo threshold is met"}};function ga({numInUse:t,numAllocated:s,isTeam:a,subscriptionWillRenew:n,subscriptionBillingPeriod:d,accountId:l,subscriptionRenewalDate:o,billingDetails:r}){const c=Y(),{eligible:m,seatThresholdGap:u}=Ye(s),h=Z(c,"2170166050"),p=m&&h&&u>0,g=Z(c,"3954884439"),y=a&&n&&g&&p,[j,M]=x.useState(!1),[b,S]=x.useState(null),w=()=>{M(!1),S(null)},B=N=>{S(N),M(!0)},E=d==="monthly"?z.FLEXIBLE:z.ANNUAL,f=b==="seatsPromo"&&y?{type:"seatsPromo",seatThresholdGap:u}:void 0;return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-start text-base",children:e.jsx(i,{...ma.description,values:{num:`${t}/${s}`,bold:N=>e.jsx("span",{className:"font-medium",children:N},"bolded-num-in-use")}})}),a&&n&&g&&e.jsx("div",{className:"flex items-center gap-2",children:p?e.jsx(T,{color:"purple",onClick:()=>B("seatsPromo"),children:e.jsx(i,{id:"components.business.NumSeats.getSeatsPromoCta",defaultMessage:"Get discount"})}):e.jsx(T,{color:"secondary",onClick:()=>B("default"),children:e.jsx(i,{id:"components.business.NumSeats.manageSeats",defaultMessage:"Manage seats"})})})]}),j&&e.jsx(da,{isOpen:!0,onClose:w,initialTeamBillingType:E,initialSeats:s,accountId:l,renewalDate:o,billingDetails:r,promoContext:f})]})}const ma=A({description:{defaultMessage:"<bold>{num}</bold> seats in use",id:"components.business.NumSeats.description"}}),pa=()=>Ue({queryKey:["credit-pleas"],queryFn:async()=>{try{return await U.safeGet("/credits/pleas")}catch(t){Ae.addError("getCreditPleas: Error fetching credit pleas",{error:t})}}}),Ne="admin-credit-limit-alert-banner",ha=Ee(()=>Pe(()=>import("./fxzpa6snawbw4ian.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9])).then(t=>t.CreditPurchaseModal)),xa=()=>{const[t,s]=x.useState(!1),{data:a,isLoading:n,isError:d}=X(pa()),l=x.useMemo(()=>{const h=new Set;return a?.pleas?.forEach(p=>{h.add(p.user.id)}),h.size},[a]),o=x.useMemo(()=>{const h=a?.pleas?.map(g=>g.id);if(!h||h.length===0)return null;const p=[...h].sort();return btoa(p.join(","))},[a]),r=x.useMemo(()=>localStorage.getItem(Ne),[]),c=l>0&&!n&&!d&&o&&o!==r&&!t;x.useEffect(()=>{!c||!o||k.logEventWithStatsig("ChatGPT Credits: Admin Credit Limit Alert Banner Shown","chatgpt_credits_admin_credit_limit_alert_banner_shown",{numBlockedUsers:l,newEncodedIdSet:o})},[c,o,l]);const m=Y(),u=x.useCallback(()=>{o&&localStorage.setItem(Ne,o),s(!0),k.logEventWithStatsig("ChatGPT Credits: Admin Credit Limit Alert Banner Dismissed","chatgpt_credits_admin_credit_limit_alert_banner_dismissed",{numBlockedUsers:l,newEncodedIdSet:o})},[o,l]);return c?e.jsx(pe,{primaryCtaText:e.jsx(i,{...le.addCredits}),onPrimaryCtaClick:()=>W(m,ha),onDismiss:u,content:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(he,{}),e.jsxs("div",{className:"grow",children:[e.jsx("div",{className:"flex items-center gap-2 font-bold",children:e.jsx(i,{...le.licenseLimitWarning})}),e.jsx("span",{className:"text-token-text-secondary",children:e.jsx(i,{...le.licenseLimitWarningDetails,values:{numBlockedUsers:l}})})]})]})}):null},le=A({addCredits:{id:"organizationBillingInfo.addCredits",defaultMessage:"Add credits"},licenseLimitWarning:{id:"organizationBillingInfo.licenseLimitWarning",defaultMessage:"Some teammates are blocked"},licenseLimitWarningDetails:{id:"organizationBillingInfo.licenseLimitWarningDetails",defaultMessage:"{numBlockedUsers, plural, one {# user hit their limit and needs} other {# users hit their limits and need}} credits to continue. Add credits to unblock {numBlockedUsers, plural, one {them} other {them}}."}}),fa=!1;function K(t,{toastId:s="chatgpt.workspaceBilling.defaultErrorToastId",message:a}={}){return qt(async(...n)=>await t(...n),{toastId:s,message:a})}const de=5,ce=ke.div`loading-results-shimmer rounded-sm`;function ja({usageData:t,...s}){return e.jsxs("div",{className:"mt-6 w-full",children:[t.status==="success"&&e.jsx(va,{...s,usageData:t.data}),t.status==="pending"&&e.jsxs(e.Fragment,{children:[e.jsx(ce,{className:"h-[28px] w-[230px] opacity-50"}),e.jsx(ce,{className:"my-2 h-[20px] w-full"}),e.jsx(ce,{className:"mb-[4px] h-[20px] w-[350px] opacity-50"})]}),t.status==="error"&&e.jsx("div",{className:"h-[90px]",children:e.jsx(he,{className:"text-token-interactive-label-danger-secondary-default"})})]})}function va({usageData:t,denominator:s,isCurrentCycle:a}){const{total_usage:n,usage_detail:d,current_balance:l}=t,o=I(),[r,c]=x.useState(),m=Oe();let u=d,h=[];const p=o.formatMessage(V.otherBarLabel);u.length>de&&(h=u.slice(de-1),u=[...u.slice(0,de-1),{label:p,amount:h.reduce((b,{amount:S})=>b+S,0)}]);const g=o.formatMessage(V.currentBalanceBarLabel),y={...u.reduce((b,{label:S,amount:w})=>({...b,[S]:w}),{}),[g]:l},j=n+Math.max(l,0),M=[y];return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"text-token-text-secondary flex items-center gap-1",children:[e.jsxs("span",{className:"flex items-center gap-1 text-xl",children:[e.jsx("span",{className:$("font-medium",a&&n>0&&n>=s?"text-token-interactive-label-danger-secondary-default":"text-token-text-primary"),children:q.format(n)}),a&&e.jsxs(e.Fragment,{children:[e.jsx("span",{children:"/"}),e.jsx("span",{children:q.format(s)})]})]}),e.jsx("span",{children:a?e.jsx(i,{...V.creditsUsed,values:{percentage:(s===0?1:n/s).toLocaleString(void 0,{style:"percent"})}}):e.jsx(i,{...V.historicalCreditsUsed})})]}),a&&m&&e.jsxs("div",{className:"text-token-interactive-label-danger-secondary-default bg-token-bg-status-error flex items-center gap-1 rounded-md p-1 text-xs",children:[e.jsx(he,{className:"h-4 w-4"}),e.jsx(i,{...V.overageLimitReachedWarning})]})]}),j!==0&&e.jsx(Yt,{className:"relative z-1 my-2",width:"100%",height:20,children:e.jsxs(Qt,{data:M,layout:"vertical",margin:{top:0,right:0,left:0,bottom:0},children:[e.jsx($t,{type:"number",hide:!0,domain:[0,j]}),e.jsx(Ht,{type:"category",hide:!0}),e.jsx(Kt,{isAnimationActive:!1,content:e.jsx(ya,{hoveredSegment:r,totalUsage:n,barMaximum:j,additionalSeries:r===p?h:void 0}),cursor:!1}),u.map(({label:b},S)=>{const w=S===0,B=S===u.length-1&&l<=0;return e.jsx(we,{dataKey:b,stackId:"a",id:b,isAnimationActive:!1,onMouseOver:()=>c(b),onMouseOut:()=>c(void 0),radius:w?B?[4,4,4,4]:[4,0,0,4]:B?[0,4,4,0]:void 0,children:e.jsx(Ce,{fill:Be[S],opacity:r&&b!==r?.8:1,className:"transition-opacity duration-200 ease-in-out"})},b)}),l>0&&e.jsx(we,{dataKey:g,stackId:"a",isAnimationActive:!1,onMouseOver:()=>c(g),onMouseOut:()=>c(void 0),radius:[0,4,4,0],children:e.jsx(Ce,{fill:Vt,opacity:.15})})]})}),e.jsx("div",{className:"text-token-text-primary flex w-full flex-wrap items-center justify-start text-sm",children:u.map(({label:b},S)=>e.jsxs("div",{className:"me-6 mb-1 flex cursor-default items-center",title:b,children:[e.jsx("div",{className:"me-1 h-2 w-2 rounded-[1px]",style:{backgroundColor:Be[S]}}),e.jsx("span",{className:"me-1 max-w-32 overflow-hidden text-ellipsis whitespace-nowrap",children:b})]},b))})]})}const ya=({active:t,payload:s,hoveredSegment:a,barMaximum:n,additionalSeries:d})=>{if(!(t&&s&&a))return null;const l=({amount:r})=>e.jsxs("span",{children:[e.jsx("span",{className:"font-semibold",children:q.format(r)})," (",(r/n).toLocaleString(void 0,{style:"percent"}),")"]}),o=s[0].payload[a];return e.jsxs("div",{className:"border-token-border-heavy bg-token-bg-primary relative z-100 flex flex-col gap-1 rounded-lg border p-2 shadow-md",children:[e.jsxs("div",{children:[e.jsx("div",{children:a}),e.jsx("div",{children:e.jsx(l,{amount:o})})]}),d&&e.jsx("div",{className:"border-token-border-default mt-1 border-t pt-1",children:d.map(({label:r,amount:c})=>e.jsxs("div",{className:"flex items-center justify-between gap-2",children:[e.jsx("span",{children:r}),e.jsx(l,{amount:c})]},r))})]})},V=A({creditsUsed:{id:"organizationBillingInfo.creditUsageSettings.creditsUsed",defaultMessage:"credits used ({percentage})"},historicalCreditsUsed:{id:"organizationBillingInfo.creditUsageSettings.historicalCreditsUsed",defaultMessage:"credits used"},otherBarLabel:{id:"organizationBillingInfo.creditUsageSettings.otherBarLabel",defaultMessage:"Other"},currentBalanceBarLabel:{id:"organizationBillingInfo.creditUsageSettings.currentBalanceBarLabel",defaultMessage:"Remaining credits"},overageLimitReachedWarning:{id:"organizationBillingInfo.creditUsageSettings.overageLimitReachedWarning",defaultMessage:"Limit reached"}});function ba({cycle:t,mostRecentExportResult:s}){const a=I(),n=R(),[d,l]=x.useState(!1),o=!n?.id,r=async()=>{if(!o){k.logEventWithStatsig("ChatGPT Credits: Download Usage Report Clicked","chatgpt_credits_download_usage_report_clicked",{workspaceId:n.id,workspaceName:n.name,startDate:t.start.toISOString(),endDate:t.end.toISOString()}),l(!0);try{const c=await U.safeGet("/subscriptions/{workspace_id}/usage/export",{parameters:{path:{workspace_id:n.id},query:{start_date:t.start.toISOString(),end_date:t.end.toISOString()}}});Xt({data:c.csv_content??"No results for the given date range",mimeType:"text/csv",filename:a.formatMessage(ue.filename,{workspaceName:n.name??"Workspace",startDate:ie(t.start,"MMM d"),endDate:ie(t.end,"MMM d")})}),k.logEventWithStatsig("ChatGPT Credits: Download Usage Report Complete","chatgpt_credits_download_usage_report_complete",{workspaceId:n.id,workspaceName:n.name})}finally{l(!1)}}};return e.jsx(O.Item,{onClick:r,disabled:o||d,secondary:s&&e.jsx(i,{...ue.buttonDescription,values:{date:new Date(s)}}),label:e.jsx(i,{...ue.buttonText}),badge:d&&e.jsx(ae,{}),icon:Mt})}const ue=A({buttonText:{id:"organizationBillingInfo.creditUsageSettings.downloadUsageReportButton.buttonText",defaultMessage:"Download usage data"},buttonDescription:{id:"organizationBillingInfo.creditUsageSettings.downloadUsageReportButton.buttonDescription",defaultMessage:"Updated {date, date}"},filename:{id:"organizationBillingInfo.creditUsageSettings.downloadUsageReportButton.filename",defaultMessage:"{workspaceName} Credit Usage Report ({startDate} - {endDate}).csv"}});function Qe({value:t,name:s,onChange:a,className:n,placeholder:d,onPressEnter:l}){return e.jsx(Le,{inputClassName:"pe-14",className:$(n),ariaLabel:!1,placeholder:d,type:"number",name:s,value:t?.toString()??"",onChange:o=>{const r=o.target.valueAsNumber;a?.(Number.isNaN(r)?null:r)},onPressEnter:l,insideContainerChildren:e.jsx("div",{className:"absolute end-0 top-1/2 -translate-y-1/2",children:e.jsx(i,{...Sa.unitDisplay})})})}const Sa=A({unitDisplay:{id:"organizationBillingInfo.creditUsageSettings.unitDisplay",defaultMessage:"credits"}});function Ma({onClose:t,recipients:s,onSaveRecipients:a,thresholds:n,onSaveThresholds:d,isEnterprisey:l}){const o=R(),[r,c]=x.useState(),m=async g=>{await a(g),k.logEventWithStatsig("ChatGPT Credits: Save Additional Alert Recipients","chatgpt_credits_save_additional_alert_recipients",{workspaceId:o?.id,workspaceName:o?.name,recipientCount:g.length}),c(g)},[u,h]=x.useState(),p=async g=>{const y=g.slice().sort((j,M)=>j.credits-M.credits);await d(y),h(y)};return e.jsx(wa,{onClose:t,recipients:r??s,onSaveRecipients:m,thresholds:u??n,onSaveThresholds:p,isEnterprisey:l})}function wa({onClose:t,recipients:s,onSaveRecipients:a,thresholds:n,onSaveThresholds:d,isEnterprisey:l}){const o=I(),r=Y(),c=R(),m=c?.isTeam()??!1;return e.jsx(ye,{title:e.jsx(i,{...C.baseTitle}),primaryButton:e.jsx(T,{className:"min-w-[80px]",onClick:()=>W(r,({onClose:u})=>e.jsx(_e,{onClose:u,editingThreshold:void 0,onSaveThreshold:h=>d([...n,h])})),children:e.jsx(i,{...C.newAlertButton})}),secondaryButton:!m&&e.jsx(T,{color:"secondary",onClick:()=>W(r,({onClose:u})=>e.jsx(Ca,{onClose:u,initialRecipients:s,onSaveRecipients:a})),children:e.jsx(i,{...C.editRecipientsButton})}),onClose:t,footerIsSpacedBetween:!0,children:e.jsxs("div",{className:"min-h-[250px]",children:[e.jsx("div",{className:"text-token-text-secondary mb-3 text-sm",children:e.jsx(i,{...C.alertDescription})}),e.jsx(ge,{children:e.jsx(i,{...C.allCreditsUsedThreshold})}),l&&e.jsx(ge,{children:e.jsx(i,{...C.overageLimitReachedThreshold})}),n.map((u,h)=>e.jsxs(ge,{children:[e.jsx("span",{className:"w-0 grow",children:e.jsx(i,{...C.alertThresholdDescription,values:{thresholdString:q.format(u.credits),threshold:u.credits}})}),e.jsx(Se,{label:o.formatMessage(C.alertThresholdDeleteButtonLabel),onClick:async()=>{const p=n.slice();p.splice(h,1),k.logEventWithStatsig("ChatGPT Credits: Remove Alert Threshold","chatgpt_credits_remove_alert_threshold",{workspaceId:c?.id,workspaceName:c?.name,threshold:u.credits}),await d(p)},icon:e.jsx(wt,{})}),e.jsx(Se,{label:o.formatMessage(C.alertThresholdEditButtonLabel),onClick:()=>W(r,({onClose:p})=>e.jsx(_e,{onClose:p,editingThreshold:n[h],onSaveThreshold:async g=>{const y=n.slice();y.splice(h,1),await d([...y,g])}})),icon:e.jsx(Ct,{})})]},h))]})})}function ge({children:t}){return e.jsxs("div",{className:"border-token-border-default flex h-[54px] flex-row items-center justify-start gap-2 border-b text-sm font-medium",children:[e.jsx(Jt,{className:"bg-token-bg-secondary rounded-lg p-1"}),e.jsx("div",{className:"flex grow flex-row items-center gap-1",children:t})]})}function Ca({onClose:t,initialRecipients:s,onSaveRecipients:a}){const[n,d]=x.useState(()=>s.map(m=>Zt(m.value))),[l,o]=x.useState(!1),r=n.every(m=>m.isValid),c=async()=>{if(r)try{o(!0),await a(n.map(m=>({type:"email",value:m.value}))),t()}finally{o(!1)}};return e.jsxs(ye,{title:e.jsx(i,{...C.recipientsTitle}),primaryButton:e.jsx(T,{loading:l,onClick:c,disabled:!r,className:"min-w-[80px]",children:e.jsx(i,{...C.saveButton})}),secondaryButton:e.jsx(T,{color:"secondary",onClick:t,children:e.jsx(i,{...C.backButton})}),onClose:t,children:[e.jsx(pe,{type:"info",icon:e.jsx(ze,{className:"text-token-text-secondary icon-sm"}),content:e.jsx("div",{className:"text-token-text-secondary text-xs",children:e.jsx(i,{...C.recipientsHelpText})})}),e.jsx(ve,{className:"mt-4 mb-2 block font-medium",htmlFor:"add-member-emails",id:"add-emails-label",children:e.jsx(i,{...C.recipientsFieldLabel})}),e.jsx(ea,{value:n,onChange:d})]})}function _e({onClose:t,editingThreshold:s,onSaveThreshold:a}){const n=R(),[d,l]=x.useState(s?.credits??null),[o,r]=x.useState(!1),c=d!=null&&Number.isInteger(d),m=async()=>{if(c)try{r(!0),k.logEventWithStatsig("ChatGPT Credits: Add Alert Threshold","chatgpt_credits_add_alert_threshold",{workspaceId:n?.id,workspaceName:n?.name,threshold:d}),await a({type:"absolute",credits:d}),t()}finally{r(!1)}};return e.jsxs(ye,{title:e.jsx(i,{...C.thresholdTitle}),primaryButton:e.jsx(T,{className:"min-w-[80px]",loading:o,disabled:!c,onClick:m,children:e.jsx(i,{...C.saveButton})}),secondaryButton:e.jsx(T,{color:"secondary",onClick:t,children:e.jsx(i,{...C.backButton})}),onClose:t,children:[e.jsx(ve,{htmlFor:"new-threshold-field",className:"mt-4 mb-2 block font-medium",children:e.jsx(i,{...C.thresholdFieldLabel})}),e.jsx(Qe,{value:d,name:"new-threshold-field",onChange:l,onPressEnter:m})]})}function ye({title:t,primaryButton:s,secondaryButton:a,children:n,onClose:d,footerIsSpacedBetween:l}){return e.jsx(te,{testId:"modal-manage-alerts",isOpen:!0,onClose:d,type:"success",title:t,hideSeparator:!0,noPadding:!0,showCloseButton:!0,size:"large",footerClassName:"p-6 pt-0",primaryButton:s,secondaryButton:a,footerIsSpacedBetween:l,children:e.jsx("div",{className:"px-6 pb-6",children:n})})}const C=A({baseTitle:{id:"organizationBillingInfo.creditUsageSettings.manageAlertsModal.base.title",defaultMessage:"Manage alerts"},editRecipientsButton:{id:"organizationBillingInfo.creditUsageSettings.manageAlertsModal.base.editRecipientsButton",defaultMessage:"Edit recipients"},newAlertButton:{id:"organizationBillingInfo.creditUsageSettings.manageAlertsModal.base.newAlertButton",defaultMessage:"New alert"},alertDescription:{id:"organizationBillingInfo.creditUsageSettings.manageAlertsModal.base.alertDescription",defaultMessage:"Specify when you wish to receive email alerts. Alerts are sent to all workspace owners by default."},allCreditsUsedThreshold:{id:"organizationBillingInfo.creditUsageSettings.manageAlertsModal.base.allCreditsUsedThreshold",defaultMessage:"All credits used"},overageLimitReachedThreshold:{id:"organizationBillingInfo.creditUsageSettings.manageAlertsModal.base.overageLimitReachedThreshold",defaultMessage:"Overage limit reached"},alertThresholdDescription:{id:"organizationBillingInfo.creditUsageSettings.manageAlertsModal.base.alertThresholdDescription",defaultMessage:"{thresholdString} {threshold, plural, one {credit} other {credits}} remaining"},alertThresholdDeleteButtonLabel:{id:"organizationBillingInfo.creditUsageSettings.manageAlertsModal.base.alertThresholdDeleteButtonLabel",defaultMessage:"Delete"},alertThresholdEditButtonLabel:{id:"organizationBillingInfo.creditUsageSettings.manageAlertsModal.base.alertThresholdEditButtonLabel",defaultMessage:"Edit"},thresholdTitle:{id:"organizationBillingInfo.creditUsageSettings.manageAlertsModal.threshold.title",defaultMessage:"New usage alert"},thresholdFieldLabel:{id:"organizationBillingInfo.creditUsageSettings.manageAlertsModal.threshold.fieldLabel",defaultMessage:"Alert when credit balance hits"},saveButton:{id:"organizationBillingInfo.creditUsageSettings.manageAlertsModal.saveButton",defaultMessage:"Save"},backButton:{id:"organizationBillingInfo.creditUsageSettings.manageAlertsModal.backButton",defaultMessage:"Back"},recipientsTitle:{id:"organizationBillingInfo.creditUsageSettings.manageAlertsModal.recipients.title",defaultMessage:"Edit alert recipients"},recipientsHelpText:{id:"organizationBillingInfo.creditUsageSettings.manageAlertsModal.recipients.helpText",defaultMessage:"Email alerts are sent to workplace owners by default. Anyone can be added to receive alerts, but only owners can view or make changes on the billing page."},recipientsFieldLabel:{id:"organizationBillingInfo.creditUsageSettings.manageAlertsModal.recipients.fieldLabel",defaultMessage:"Also send alerts to:"}});function Ba({currentLimit:t,onClose:s,onSubmit:a,denominator:n}){const d=I(),[l,o]=x.useState(!1),[r,c]=x.useState(t),m=r!==t&&(r==null||Number.isInteger(r)&&r>=0),u=async()=>{if(m){o(!0);try{await a(r),s()}finally{o(!1)}}},h=(r??0)+n;return e.jsx(te,{testId:"modal-overage-limit",isOpen:!0,onClose:s,type:"success",title:e.jsx(i,{...Q.title}),hideSeparator:!0,noPadding:!0,showCloseButton:!0,size:"large",footerClassName:"p-6 pt-0",primaryButton:e.jsx(T,{className:"min-w-[80px]",loading:l,disabled:!m,onClick:u,children:e.jsx(i,{...Q.saveButton})}),secondaryButton:e.jsx(T,{onClick:()=>c(null),color:"secondary",disabled:r==null,children:e.jsx(i,{...Q.clearButton})}),children:e.jsxs("div",{className:"px-6 pb-6",children:[e.jsx("div",{className:"text-token-text-secondary text-sm",children:e.jsx(i,{...$e})}),e.jsx(ve,{htmlFor:"overage-limit-field",className:"mt-4 mb-2 block font-medium",children:e.jsx(i,{...Q.fieldLabel})}),e.jsx(Qe,{value:r,name:"overage-limit-field",onChange:c,onPressEnter:u,placeholder:d.formatMessage(Q.emptyFieldPlaceholder)}),e.jsx("div",{className:$("text-token-text-secondary pt-1 text-xs",r==null&&"invisible"),children:e.jsx(i,{...Q.helpText,values:{newTotalAllowed:h,newTotalAllowedString:q.format(h)}})})]})})}const Q=A({title:{id:"organizationBillingInfo.creditUsageSettings.overageLimitModal.title",defaultMessage:"Add overage limit"},fieldLabel:{id:"organizationBillingInfo.creditUsageSettings.overageLimitModal.fieldLabel",defaultMessage:"Overage limit"},emptyFieldPlaceholder:{id:"organizationBillingInfo.creditUsageSettings.overageLimitModal.emptyFieldPlaceholder",defaultMessage:"None"},helpText:{id:"organizationBillingInfo.creditUsageSettings.overageLimitModal.helpText",defaultMessage:"Advanced access will pause if your org exceeds {newTotalAllowedString} {newTotalAllowed, plural, one {credit} other {credits}} spent."},saveButton:{id:"organizationBillingInfo.creditUsageSettings.overageLimitModal.saveButton",defaultMessage:"Save"},clearButton:{id:"organizationBillingInfo.creditUsageSettings.overageLimitModal.clearButton",defaultMessage:"Clear"}}),$e=nt({id:"organizationBillingInfo.creditUsageSettings.overageLimitDescription",defaultMessage:"Your org can continue to use advanced features and models beyond your plan. Add an overage limit to control this amount."}),Na=Ee(()=>Pe(()=>import("./fxzpa6snawbw4ian.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9])).then(t=>t.CreditPurchaseModal)),Te="https://help.openai.com/en/articles/11487671 ",_a="https://help.openai.com/en/articles/11481834-chatgpt-rate-card";function Ta(){const t=Y(),s=I(),a=R(),n=xe(f=>f.currentWorkspace),d=n!=null?fe(n.role):void 0,l=["subscription-settings",a?.organizationId],o=X({queryKey:l,queryFn:K(()=>U.safeGet("/subscriptions/{organization_id}/settings",{parameters:{path:{organization_id:a?.organizationId}}})),enabled:a?.organizationId!=null}),r=it(),c=be({mutationFn:K(f=>U.safePost("/subscriptions/{organization_id}/settings/limit",{parameters:{path:{organization_id:a?.organizationId}},requestBody:{overage_limit:f==null?f:{type:"absolute",credits:f}}})),onSuccess:()=>{r.invalidateQueries({queryKey:l}),r.invalidateQueries({queryKey:dt(a?.organizationId)})}}),{mutateAsync:m}=be({mutationFn:K(({recipients:f,thresholds:N})=>U.safePost("/subscriptions/{organization_id}/settings/alerts",{parameters:{path:{organization_id:a?.organizationId}},requestBody:{alert_recipients:f,alert_thresholds:N}})),onSuccess:()=>{r.invalidateQueries({queryKey:l})}}),[u,h]=x.useState(0),p=u===0,g=Fe(u),y=a!=null&&a.id!=null&&a.organizationId!=null&&g!=null&&g!=="pending",j=X({queryKey:["organization-usage",a?.organizationId,g!=="pending"&&g?.start,g!=="pending"&&g?.end],queryFn:K(()=>{if(!y)throw new Error("Query not enabled");return U.safeGet("/subscriptions/{organization_id}/usage",{parameters:{path:{organization_id:a.organizationId},query:{start_date:g.start.toISOString(),end_date:g.end.toISOString()}}})}),enabled:y}),M=X({queryKey:["usage-export-data-freshness",a?.id],queryFn:K(()=>{if(!y)throw new Error("Query not enabled");return U.safeGet("/subscriptions/{workspace_id}/usage/export_data_freshness",{parameters:{path:{workspace_id:a.id}}})}),enabled:y}),b=Oe();if(x.useEffect(()=>{y&&k.logEventWithStatsig("ChatGPT Credits: Admin Section Shown","chatgpt_credits_admin_section_shown")},[y]),!y)return null;const S=o.isFetching||c.isPending?"loading":o.data?.overage_limit==null?"noLimit":"limitSet";let w=j.data?.current_balance??0;a?.isTeam()&&(w=Math.max(w,0));const B=(j.data?.total_usage??0)+w,E=p&&a?.isEnterprisey()&&!b&&j.data?.current_balance!=null&&j.data.current_balance<0;return e.jsxs(e.Fragment,{children:[E&&e.jsx(pe,{title:e.jsx(i,{...L.inOverageBannerTitle}),content:e.jsx(i,{...L.inOverageBannerContent,values:{link:f=>e.jsx(De,{openNewTab:!0,href:Te,children:f},Te)}}),icon:e.jsx(ze,{}),type:"info"}),e.jsxs(J,{className:"border-token-border-default gap-0 rounded-xl border p-6",children:[e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsx("div",{children:e.jsxs("div",{children:[e.jsx(se,{children:e.jsx(i,{...L.creditUsageSectionTitle})}),e.jsx(ne,{className:"text-token-text-secondary mt-1 text-xs",children:p?e.jsx(i,{...L.daysLeft,values:{days:Xe(g.end,new Date)}}):e.jsx(i,{...L.cycleDateSpan,values:{...g}})})]})}),e.jsxs("div",{className:"-me-2 -mt-2 flex items-center",children:[e.jsxs(O.Root,{children:[e.jsx(O.Trigger,{className:"px-2",children:e.jsx(Bt,{className:"icon-lg"})}),e.jsx(O.Portal,{children:e.jsxs(O.Content,{size:"small",align:"end",children:[(j.data?.total_usage??0)>0&&e.jsx(ba,{cycle:g,mostRecentExportResult:M.data?.most_recent_result}),e.jsx(Je,{icon:We,to:_a,target:"_blank",rel:"noopener noreferrer",onClick:()=>{k.logEventWithStatsig("ChatGPT Credits: Rate Card Link Clicked","chatgpt_credits_rate_card_link_clicked",{workspaceId:a.id,workspaceName:a.name})},children:e.jsx(i,{...L.rateCardLink})})]})})]}),e.jsxs("div",{className:$("items-center",{flex:g.period==="monthly",hidden:g.period!=="monthly"}),children:[e.jsx("div",{className:"bg-token-border-heavy me-2 h-full w-px",children:"Â "}),e.jsx(T,{className:"px-2",color:"ghost",onClick:()=>{h(f=>f-1),k.logEventWithStatsig("ChatGPT Credits: Usage Time Travel","chatgpt_credits_usage_time_travel",{workspaceId:a.id,workspaceName:a.name,direction:"back",cycleIndex:u-1})},disabled:u<-11,icon:Nt}),e.jsx(T,{className:"px-2",color:"ghost",onClick:()=>{h(f=>f+1),k.logEventWithStatsig("ChatGPT Credits: Usage Time Travel","chatgpt_credits_usage_time_travel",{workspaceId:a.id,workspaceName:a.name,direction:"forward",cycleIndex:u+1})},disabled:p,icon:_t})]})]})]}),e.jsx(ja,{usageData:j,denominator:B,isCurrentCycle:p}),a?.isEnterprisey()&&e.jsxs("div",{className:"border-token-border-default mt-6 border-t pt-6 text-sm",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("div",{className:"flex w-0 grow items-center gap-1",children:[e.jsx("span",{className:"font-medium",children:e.jsx(i,{...L.overageLimitLabel})}),e.jsx(Ze,{className:"flex items-center",label:e.jsx("span",{className:"text-token-bg-primary font-normal",children:e.jsx(i,{...$e})}),side:"top",customBackgroundColorClassName:"bg-token-main-surface-primary-inverse",children:e.jsx(Tt,{className:"icon-sm text-token-text-secondary inline"})})]}),S==="loading"&&e.jsx(ae,{}),e.jsx(et,{"aria-label":s.formatMessage(L.toggleOverageLimitLabel),checked:S==="limitSet",onCheckedChange:async f=>{k.logEventWithStatsig(f?"ChatGPT Credits: Overage Limit Set":"ChatGPT Credits: Overage Limit Cleared",f?"chatgpt_credits_overage_limit_set":"chatgpt_credits_overage_limit_cleared",{workspaceId:a.id,workspaceName:a.name}),await c.mutateAsync(f?0:null)}})]}),e.jsx("div",{className:$("transition-duration-300 overflow-hidden transition-[height] ease-in-out",S==="limitSet"?"h-[60px]":"h-0"),children:e.jsxs("div",{className:"flex items-center gap-2 pt-6",children:[e.jsx("div",{className:"w-0 grow",children:e.jsx(i,{...L.setOverageLimitAmount,values:{bold:f=>e.jsx("span",{className:"font-medium",children:f},"bolded-overage-limit-label"),credits:q.format(o.data?.overage_limit?.credits??0),total:q.format((o.data?.overage_limit?.credits??0)+B)}})}),e.jsx(T,{color:"secondary",className:"min-w-[80px]",disabled:S==="loading",onClick:()=>W(t,({onClose:f})=>e.jsx(Ba,{currentLimit:o.data?.overage_limit?.credits??null,onSubmit:async N=>{k.logEventWithStatsig(N==null?"ChatGPT Credits: Overage Limit Cleared":"ChatGPT Credits: Overage Limit Set",N==null?"chatgpt_credits_overage_limit_cleared":"chatgpt_credits_overage_limit_set",{workspaceId:a.id,workspaceName:a.name,newLimit:N}),await c.mutateAsync(N),f()},onClose:f,denominator:B})),children:e.jsx(i,{...L.setOverageLimitButton})})]})})]}),a?.isTeam()&&d&&e.jsx("div",{className:"border-token-border-default mt-6 flex items-center gap-2 border-t pt-6",children:e.jsxs("div",{className:"flex grow items-center justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx(se,{children:e.jsx(i,{id:"organizationBillingInfo.additionalCredits",defaultMessage:"Add more credits"})}),e.jsx(ne,{className:"text-token-text-secondary mt-1",children:e.jsx(i,{id:"organizationBillingInfo.additionalCreditsDescription",defaultMessage:"Give your team continued access after they hit their plan limits. Credits are valid for 12 months."})})]}),e.jsx(T,{color:"secondary",onClick:()=>W(t,Na),children:e.jsx(i,{id:"organizationBillingInfo.addCredits",defaultMessage:"Add credits"})})]})})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("div",{className:"w-0 grow",children:[e.jsx(se,{children:e.jsx(i,{...L.usageAlertLabel})}),e.jsx(ne,{className:"text-token-text-secondary mt-1",children:e.jsx(i,{...L.usageAlertDescription})})]}),e.jsx(T,{color:"secondary",className:"min-w-[80px]",onClick:()=>W(t,({onClose:f})=>e.jsx(Ma,{onClose:f,onSaveRecipients:async N=>{await m({recipients:N})},onSaveThresholds:async N=>{await m({thresholds:N})},recipients:o.data?.alert_recipients??[],thresholds:o.data?.alert_thresholds??[],isEnterprisey:a?.isEnterprisey()??!1})),children:e.jsx(i,{...L.usageAlertButton})})]})]})}const L=A({creditUsageSectionTitle:{id:"organizationBillingInfo.creditUsageSettings.creditUsageSectionTitle",defaultMessage:"Credit usage"},rateCardLink:{id:"organizationBillingInfo.creditUsageSettings.rateCardLink",defaultMessage:"View rate card"},daysLeft:{id:"organizationBillingInfo.creditUsageSettings.daysLeft",defaultMessage:"Next cycle in {days} {days, plural, one {day} other {days}}"},cycleDateSpan:{id:"organizationBillingInfo.creditUsageSettings.cycleDateSpan",defaultMessage:"{start, date, ::MMMdd} - {end, date, ::MMMdd}"},inOverageBannerTitle:{id:"organizationBillingInfo.creditUsageSettings.inOverageBannerTitle",defaultMessage:"Your org is using credits beyond your plan"},inOverageBannerContent:{id:"organizationBillingInfo.creditUsageSettings.inOverageBannerContent",defaultMessage:"Access to advanced features and models is still available. Youâll receive a separate invoice at the end of the month. <link>Learn more</link>"},overageLimitLabel:{id:"organizationBillingInfo.creditUsageSettings.overageLimitLabel",defaultMessage:"Set overage limit"},toggleOverageLimitLabel:{id:"organizationBillingInfo.creditUsageSettings.toggleOverageLimitLabel",defaultMessage:"Toggle overage limit"},setOverageLimitAmount:{id:"organizationBillingInfo.creditUsageSettings.setOverageLimitAmount",defaultMessage:"<bold>Overage limit:</bold> {credits} credits ({total} total)"},setOverageLimitButton:{id:"organizationBillingInfo.creditUsageSettings.setOverageLimitButton",defaultMessage:"Configure"},usageAlertLabel:{id:"organizationBillingInfo.creditUsageSettings.usageAlertLabel",defaultMessage:"Credit usage alerts"},usageAlertDescription:{id:"organizationBillingInfo.creditUsageSettings.usageAlertDescription",defaultMessage:"Send alerts to owners when credits are running low"},usageAlertButton:{id:"organizationBillingInfo.creditUsageSettings.usageAlertButton",defaultMessage:"Manage"}}),Ia=({params:t={},options:s,onError:a})=>Ue({queryKey:["organization-invoices",{...t,options:s}],queryFn:async()=>await U.safeGet("/invoices",{parameters:{query:{starting_after:s.startingAfter,ending_before:s.endingBefore,limit:s.limit,...t}}}).catch(n=>{throw a?.(n),n}),enabled:"account_id"in t||"organization_id"in t});function La(t){"use forget";const s=rt.c(13),a=R(),n=a?.id,d=a?.data.organizationId??void 0;let l;s[0]!==a?(l=a?.isEnterprisey(),s[0]=a,s[1]=l):l=s[1];const o=l,r=I(),c=ee();let m,u;if(s[2]!==n||s[3]!==r||s[4]!==t||s[5]!==d||s[6]!==o||s[7]!==c){const h=o?{organization_id:d}:{account_id:n};let p;s[10]!==r||s[11]!==c?(p=y=>{c.danger(r.formatMessage(Ie.invoicesLoadError,{error:y.message}),{toastId:"invoices",loggingTitle:Ie.invoicesLoadError.defaultMessage,loggingDescription:"Failed to load invoices"})},s[10]=r,s[11]=c,s[12]=p):p=s[12];const g=p;m=X,u=Ia({params:h,options:t,onError:g}),s[2]=n,s[3]=r,s[4]=t,s[5]=d,s[6]=o,s[7]=c,s[8]=m,s[9]=u}else m=s[8],u=s[9];return m(u)}const Ie=A({invoicesLoadError:{id:"organizationBillingInfo.invoicesLoadError.0",defaultMessage:"Failed to load invoices. Contact support@openai.com if error persists."}}),ka="https://help.openai.com/en/articles/8792536-manage-billing-on-the-chatgpt-team-subscription-plan",Aa=(t,s)=>{const a=t?.isEdu(),n=t?.isTeam(),d=t?.isEnterprisey(),l=t?.isResellerHosted(),o=s?.non_profit_org_discount_applied,r=s.active_until!=null;if(a)return r?v.activeEduLicense:l?v.resellerHostedEduLicense:v.pendingEduLicense;if(d)return r?v.activeEnterpriseLicense:l?v.resellerHostedEnterpriseLicense:v.pendingEnterpriseLicense;if(o)return r?v.activeTeamLicenseNonProfitOrg:v.pendingTeamLicense;if(n)return r?v.activeTeamLicense:v.pendingTeamLicense;throw Ae.addError("getWorkspaceLicenseSubtitle: No license found",{subscription:s,currentAccount:t}),new Error("No license for workspace account.")};function Ea(){const{data:t,isLoading:s,isError:a}=oe(),n=R(),d=xe(f=>f.currentWorkspace),l=d!=null?fe(d.role):void 0,o=Y(),r=Z(o,"2861925050"),c=Z(o,"2170166050"),{eligible:m,seatThresholdGap:u}=Ye(t?.seats_entitled);if(s)return e.jsx("div",{className:"flex min-h-screen items-center justify-center",children:e.jsx(ae,{})});if(a||!t||!n)return null;const h=t.active_until!=null,p=t?.seats_in_use>t?.seats_entitled,g=t.active_until?new Date(t.active_until):null,y=Aa(n,t),j=n?.isTeam(),M=t?.billing_period==="monthly"?z.FLEXIBLE:z.ANNUAL,b=je(t.billing_currency),{discountedMonthlyCost:S,currencySign:w}=M===z.FLEXIBLE?b.flexibleBillingPlan:b.annualBillingPlan,B=c&&m&&u>0,E=e.jsxs(J,{className:"border-token-border-default bg-token-bg-primary gap-0 rounded-xl border",children:[e.jsxs("div",{className:"z-10 flex flex-col gap-4 p-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs(se,{className:"flex items-center gap-2",children:[e.jsx(i,{...y}),j&&e.jsx("div",{className:"rounded-sm bg-[#E0FFE7] px-1.5 py-1 text-sm font-medium text-[#24622B]",children:e.jsx(i,{...M===z.FLEXIBLE?v.monthly:v.annual})})]}),g&&e.jsx(ne,{className:"text-token-text-secondary mt-1",children:n?.isEnterprisey()?e.jsx(i,{...v.licenseExpiry,values:{expiryDate:g}}):t.will_renew?e.jsx(i,{...v.renewalDate,values:{expiryDate:g}}):e.jsx(i,{...v.deactivateDate,values:{expiryDate:g}})})]}),l&&e.jsx(Pa,{})]}),j&&!t?.non_profit_org_discount_applied&&e.jsx("div",{className:"text-token-text-secondary h-[50px] text-sm",children:e.jsx(i,{...v.pricePerSeat,values:{symbol:e.jsx(i,{...w}),amount:S,currency:f=>e.jsx("span",{className:"align-top text-xl",children:f}),price:f=>e.jsx("span",{className:"text-token-text-primary ps-[1px] pe-1 align-bottom text-[42px] leading-none",children:f})}})})]}),e.jsx("hr",{}),h&&e.jsxs("div",{className:"p-6",children:[e.jsx(Ua,{isTeam:j,accountId:n.id}),j&&p&&e.jsx("span",{className:"text-token-text-secondary text-sm",children:e.jsx(i,{...v.teamsAutochargeMessage,values:{link:f=>e.jsx(De,{className:"ps-1",openNewTab:!0,href:ka,children:f})}})})]})]});return e.jsxs(e.Fragment,{children:[r&&j&&e.jsx(xa,{}),B?e.jsxs("div",{className:"rounded-xl bg-[#ECF0FF]",children:[e.jsx(Fa,{seatThresholdGap:u}),E]}):E,r&&e.jsx(Ta,{})]})}function Pa(){const[t,s]=x.useState(!1),a=I(),n=ee(),d=R(),{data:l}=oe(),[o,r]=x.useState(!1),c=function(){r(!o)},[m,u]=x.useState(!1),h=Y(),p=Z(h,"1318146997");if(!d||!d.isTeam()||!l)return;const g=async()=>{s(!0);try{const j=await U.safeGet("/payments/customer_portal",{parameters:{query:{account_id:d.getWorkspaceId()}},intercomEventOnError:"fetch-error:customer_portal:get"});location.href=j.url}catch{n.warning(a.formatMessage(v.stripeErrorWarning),{hasCloseButton:!0})}finally{s(!1)}},y=l?.billing_period==="monthly"?z.FLEXIBLE:z.ANNUAL;return e.jsxs(e.Fragment,{children:[e.jsxs(at,{size:"default",contentAlign:"end",sideOffset:4,triggerButton:e.jsx(T,{color:"secondary",children:e.jsxs("div",{className:"flex items-center justify-center gap-1",children:[e.jsx(i,{...v.manageLicenseBtn}),e.jsx(Pt,{className:"icon-sm"})]})}),children:[e.jsx(O.Item,{icon:mt,onClick:g,children:e.jsx(i,{...v.managePaymentMethod})}),l.will_renew&&p&&e.jsx(O.Item,{icon:At,onClick:()=>u(!0),children:e.jsx(i,{...v.manageBillingSchedule})}),l?.will_renew&&e.jsx(O.Separator,{}),l?.will_renew&&e.jsx(O.Item,{icon:Et,color:"danger",onClick:()=>{c()},children:e.jsx(i,{...v.cancelSubscriptionBtn})})]}),l.active_until!=null&&e.jsx(aa,{isOpen:m,onClose:()=>u(!1),initialTeamBillingType:y,renewalDate:new Date(l.active_until),accountId:d.id,billingDetails:{currency:l.billing_currency}}),e.jsx(ra,{isOpen:o,onClose:c})]})}function za({invoice:t}){const s=t?.status_transitions.paid_at!=null&&new Date(t.status_transitions.paid_at*1e3),a=t&&new Date(t.due_date*1e3),n=t&&new Date(t.created*1e3);return e.jsxs(Wt,{className:"items-center",children:[e.jsxs("div",{className:"flex grow flex-col gap-1",children:[e.jsx("span",{children:n?e.jsx(i,{...v.invoiceName,values:{createdDate:n}}):e.jsx(i,{...v.defaultInvoiceName})}),t?.paid&&s!=null?e.jsx("div",{className:"text-token-text-secondary text-xs",children:e.jsx(i,{...v.paidInvoice,values:{invoiceDate:s}})}):t&&e.jsx("div",{className:"text-xs text-green-600",children:e.jsx(i,{...v.upcomingInvoice,values:{invoiceDate:a}})})]}),e.jsx("a",{href:t?.hosted_invoice_url,className:$("mx-auto",t?.hosted_invoice_url===void 0&&"cursor-not-allowed opacity-20"),target:"_blank",rel:"noreferrer",children:e.jsx(We,{className:"icon-sm text-green-600"})})]})}function Da(){gt();const[t,s]=x.useState({limit:5}),{data:a,isError:n,isLoading:d}=La(t),l=t.startingAfter!=null||t.endingBefore!=null&&a?.has_more,o=t.endingBefore!=null||a?.has_more&&t.endingBefore==null;return d?e.jsx(J,{children:e.jsx("div",{className:"flex h-40 items-center justify-center",children:e.jsx(ae,{})})}):n||a==null?e.jsx(J,{children:e.jsx(Lt,{children:e.jsx(i,{...v.noInvoices})})}):e.jsxs(J,{children:[e.jsx(Gt,{children:a.data.map(r=>e.jsx(za,{invoice:r},r.id))}),e.jsxs("div",{className:"flex",children:[l&&e.jsx("button",{onClick:()=>{a&&s(r=>({...r,endingBefore:a.data[0].id,startingAfter:void 0}))},children:e.jsx(kt,{className:"icon-sm"})}),e.jsx("div",{className:"grow"}),o&&e.jsx("button",{onClick:()=>{a&&s(r=>({...r,startingAfter:a.data[a.data.length-1].id,endingBefore:void 0}))},children:e.jsx(tt,{className:"icon-sm"})})]})]})}function Ua({isTeam:t,accountId:s}){const{data:a,isLoading:n,isError:d}=oe();return d||!a||n||!a.billing_period||!a.active_until?null:e.jsx(ga,{numInUse:a.seats_in_use,numAllocated:a.seats_entitled,isTeam:t,subscriptionWillRenew:a.will_renew,subscriptionBillingPeriod:a.billing_period,subscriptionRenewalDate:new Date(a.active_until),accountId:s,billingDetails:{currency:a.billing_currency}})}const Oa=t=>t==="plan"||t==="invoices";function Fa({seatThresholdGap:t}){return e.jsx("div",{className:"flex flex-wrap items-center justify-between gap-3 px-6 py-4 text-[#3855EA]",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(zt,{}),e.jsx("span",{className:"text-sm font-medium",children:e.jsx(i,{...v.limitedTimeOfferBody,values:{seatThresholdGap:t}})})]})})}function Ra(){const t=xe(g=>g.currentWorkspace),s=I(),a=ot(),n=Fe(),d=t!=null?fe(t.role):void 0,l=x.useMemo(()=>[{key:"plan",label:s.formatMessage(v.planTabName),children:e.jsx(Me,{children:e.jsx(Ea,{})})},{key:"invoices",label:s.formatMessage(v.invoicesTabName),children:e.jsx(Me,{children:e.jsx(Da,{})})}],[s]),[o]=lt(),r=o.get("tab"),[c,m]=x.useState(r&&Oa(r)?r:l[0].key),u=g=>{m(g),a({pathname:window.location.pathname,search:new URLSearchParams({tab:g}).toString()})};if(!t?.organizationId)return null;const p=n!=null&&n!=="pending"&&n.start.getFullYear()!==n.end.getFullYear()?"MMM d, y":"MMM d";return e.jsxs(e.Fragment,{children:[e.jsx(It,{children:e.jsx("title",{children:s.formatMessage(v.adminBrowserPageTitle)})}),e.jsx(ct,{title:s.formatMessage(v.title),subtitle:n&&(n==="pending"?e.jsx("div",{className:"loading-results-shimmer h-[24px] w-[300px] rounded-sm"}):e.jsx(i,{...v.subtitle,values:{start:ie(n.start,p),end:ie(n.end,p)}})),tabsHeader:d&&e.jsx(Ut,{items:l,activeTab:c,onTabChange:u})}),e.jsx(ut,{children:e.jsx(Ot,{items:l,activeTab:c})})]})}const v=A({adminBrowserPageTitle:{id:"organizationBillingInfo.adminBrowserPageTitle",defaultMessage:"ChatGPT - Admin | Billing"},title:{id:"organizationBillingInfo.title.1",defaultMessage:"Billing"},limitedTimeOfferBody:{id:"organizationBillingInfo.limitedTimeOfferBody",defaultMessage:"Limited time offer: Purchase {seatThresholdGap} seats to get 25% off your plan for one month."},subtitle:{id:"organizationBillingInfo.subtitle",defaultMessage:"Current cycle: {start} - {end}"},activeEnterpriseLicense:{id:"organizationBillingInfo.activeEnterpriseLicense",defaultMessage:"Enterprise License"},pendingEnterpriseLicense:{id:"organizationBillingInfo.pendingEnterpriseLicense",defaultMessage:"Enterprise License (pending activation)"},resellerHostedEnterpriseLicense:{id:"organizationBillingInfo.resellerHostedEnterpriseLicense",defaultMessage:"Enterprise License"},activeEduLicense:{id:"organizationBillingInfo.activeEduLicense",defaultMessage:"Edu License"},pendingEduLicense:{id:"organizationBillingInfo.pendingEduLicense",defaultMessage:"Edu License (pending activation)"},resellerHostedEduLicense:{id:"organizationBillingInfo.resellerHostedEduLicense",defaultMessage:"Edu License"},activeTeamLicense:{id:"organizationBillingInfo.activeTeamLicense",defaultMessage:"Business Plan"},activeTeamLicenseNonProfitOrg:{id:"organizationBillingInfo.activeTeamLicenseNonProfitOrg",defaultMessage:"Business License (Non Profit Discount)"},pendingTeamLicense:{id:"organizationBillingInfo.pendingTeamLicense",defaultMessage:"Business Plan (pending activation)"},licenseExpiry:{id:"organizationBillingInfo.licenseExpiry",defaultMessage:"Active until {expiryDate, date, long}"},renewalDate:{id:"organizationBillingInfo.renewalDate",defaultMessage:"Renews on {expiryDate, date, long}"},deactivateDate:{id:"organizationBillingInfo.deactivateDate",defaultMessage:"Deactivates on {expiryDate, date, long}"},invoiceName:{id:"organizationBillingInfo.invoiceName",defaultMessage:"Invoice: {createdDate, date, long}"},defaultInvoiceName:{id:"organizationBillingInfo.defaultInvoiceName",defaultMessage:"Invoice"},paidInvoice:{id:"organizationBillingInfo.paidInvoice",defaultMessage:"Paid: {invoiceDate, date, long}"},upcomingInvoice:{id:"organizationBillingInfo.upcomingInvoice",defaultMessage:"Due: {invoiceDate, date, long}"},noInvoices:{id:"organizationBillingInfo.noInvoices",defaultMessage:"No invoices found"},manageSubscription:{id:"organizationBillingInfo.manageSubscription",defaultMessage:"Manage subscription"},cancelSubscriptionBtn:{id:"organizationBillingInfo.cancelSubscriptionBtn",defaultMessage:"Cancel subscription"},manageLicenseBtn:{id:"organizationBillingInfo.manageLicenseBtn",defaultMessage:"Manage plan"},managePaymentMethod:{id:"organizationBillingInfo.managePaymentMethod",defaultMessage:"Payment method"},manageBillingSchedule:{id:"organizationBillingInfo.manageSchedule",defaultMessage:"Billing schedule"},stripeErrorWarning:{id:"organizationBillingInfo.stripeErrorWarning",defaultMessage:"Error loading account information"},teamsAutochargeMessage:{id:"organizationBillingInfo.teamsAutochargeMessage",defaultMessage:"Your additional seats will be included on your next invoice. <link>Learn more</link>"},planTabName:{id:"organizationBillingInfo.planTabName",defaultMessage:"Plan"},invoicesTabName:{id:"organizationBillingInfo.invoicesTabName",defaultMessage:"Invoices"},pricePerSeat:{id:"organizationBillingInfo.pricePerSeat",defaultMessage:"<currency>{symbol}</currency><price>{amount}</price>/seat"},monthly:{id:"organizationBillingInfo.monthly",defaultMessage:"Monthly"},annual:{id:"organizationBillingInfo.annual",defaultMessage:"Annual"}}),As=st(function(){return pt(),e.jsx(Ra,{})});export{As as default};
//# sourceMappingURL=d6cvjmvnjoom45b5.js.map
