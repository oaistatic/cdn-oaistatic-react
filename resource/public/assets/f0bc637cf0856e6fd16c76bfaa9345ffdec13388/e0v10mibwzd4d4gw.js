import{e as S,b2 as g,R as y,p8 as E,al as w,ak as x,p9 as P,S as R,m7 as M}from"./lgw4q0e8zlqqfgug.js";import{c as h,P as q,b as C,r as _,a as T,f as I,h as j,i as A,d as Q,j as p}from"./m60bpb0x3x7rg8fj.js";import{a as v}from"./d71wc8yq330unren.js";function b(t,l){"use forget";const e=h.c(13),n=T(),o=g(),c=I(),r=j();let i;e[0]!==t?(i=async()=>{if(!t)throw new Error("Invalid amphora ID");return await y.safePost("/amphora/{amphora_id}/invite",{parameters:{path:{amphora_id:t}},requestBody:{choice:"accept"}})},e[0]=t,e[1]=i):i=e[1];let s;e[2]!==n||e[3]!==l||e[4]!==r?(s=async()=>{l?.onBeforeNavigate?.(),await r.invalidateQueries({queryKey:v.queryKey,exact:!1}),await r.invalidateQueries({queryKey:["amphoraInvite"]}),await r.prefetchQuery(v),l?.notificationId&&E(l.notificationId),l?.onAccepted?.();const f=w?.AmphoraControls??"AmphoraControls";n(x(f))},e[2]=n,e[3]=l,e[4]=r,e[5]=s):s=e[5];let a;e[6]!==c||e[7]!==o?(a=f=>{const m=f instanceof Error?f.message:String(f);o.danger(c.formatMessage(d.failedToAccept,{error:m}),{toastId:"amphora_accept_invite_failed"})},e[6]=c,e[7]=o,e[8]=a):a=e[8];let u;return e[9]!==i||e[10]!==s||e[11]!==a?(u={mutationFn:i,onSuccess:s,onError:a},e[9]=i,e[10]=s,e[11]=a,e[12]=u):u=e[12],A(u)}function F(t,l){"use forget";const e=h.c(14),n=g(),o=I(),c=j();let r;e[0]!==t?(r=async()=>{if(!t)throw new Error("Invalid amphora ID");return await y.safePost("/amphora/{amphora_id}/invite",{parameters:{path:{amphora_id:t}},requestBody:{choice:"reject"}})},e[0]=t,e[1]=r):r=e[1];let i;e[2]!==o||e[3]!==l||e[4]!==c||e[5]!==n?(i=async()=>{n.success(o.formatMessage(d.rejectedInvite)),await c.invalidateQueries({queryKey:["amphoraInvite"]})},e[2]=o,e[3]=l,e[4]=c,e[5]=n,e[6]=i):i=e[6];let s;e[7]!==o||e[8]!==n?(s=u=>{const f=u instanceof Error?u.message:String(u);n.danger(o.formatMessage(d.failedToReject,{error:f}),{toastId:"amphora_reject_invite_failed"})},e[7]=o,e[8]=n,e[9]=s):s=e[9];let a;return e[10]!==r||e[11]!==i||e[12]!==s?(a={mutationFn:r,onSuccess:i,onError:s},e[10]=r,e[11]=i,e[12]=s,e[13]=a):a=e[13],A(a)}function B(){"use forget";const t=h.c(9),{amphora_id:l}=q(),[e]=C(),n=S(),o=e.get("accept"),c=o==="true",r=o==="false";let i;t[0]!==n?(i={onAccepted:()=>P(n)},t[0]=n,t[1]=i):i=t[1];const s=b(l,i),a=F(l);let u,f;if(t[2]!==s||t[3]!==a||t[4]!==c||t[5]!==r?(u=()=>{if(c){!s.isPending&&!s.isSuccess&&!s.isError&&s.mutate();return}r&&!a.isPending&&!a.isSuccess&&!a.isError&&a.mutate()},f=[c,r,s,s.isPending,s.isSuccess,s.isError,a,a.isPending,a.isSuccess,a.isError],t[2]=s,t[3]=a,t[4]=c,t[5]=r,t[6]=u,t[7]=f):(u=t[6],f=t[7]),_.useEffect(u,f),c||r){let m;return t[8]===Symbol.for("react.memo_cache_sentinel")?(m=p.jsx("div",{className:"flex h-full w-full items-center justify-center p-8",children:p.jsx(R,{})}),t[8]=m):m=t[8],m}return null}const d=Q({failedToAccept:{id:"amphora.acceptInvite.error",defaultMessage:"Failed to accept invite: {error}"},rejectedInvite:{id:"amphora.rejectInvite.success",defaultMessage:"Invite rejected successfully."},failedToReject:{id:"amphora.rejectInvite.error",defaultMessage:"Failed to reject invite: {error}"}}),k=M(function(){return p.jsx(B,{})});export{k as default};
//# sourceMappingURL=e0v10mibwzd4d4gw.js.map
