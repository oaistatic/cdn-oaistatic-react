import{m7 as m,b2 as f,S as h,R as g,f0 as p,cu as i}from"./lgw4q0e8zlqqfgug.js";import{P as v,a as T,f as x,r as I,j as d,d as b}from"./m60bpb0x3x7rg8fj.js";import{e as C}from"./ggjzadbnd3k1vu0k.js";const R=m(function(){const{conversationId:e,messageId:s}=v(),t=T(),o=f(),c=x();return I.useEffect(()=>{let r=!1;async function u(){if(!e||!s){t("/",{replace:!0});return}try{const l=await g.safePost("/conversation/new_branch",{requestBody:{conversation_id:e,message_id:s}});if(r)return;const{conversation:n}=l,a=p();C(a,n),i.updateThreadFromServer(a,n,{branchingFromConversationId:e,branchingFromMessageId:s,modelId:n.default_model_slug}),i.retainThread(a),t(`/c/${a}`,{replace:!0})}catch{if(r)return;o.danger(c.formatMessage(_.errorToast)),t(`/c/${e??""}`)}}return u(),()=>{r=!0}},[e,s,t,o,c]),d.jsx("div",{className:"flex h-full items-center justify-center",children:d.jsx(h,{className:"text-token-text-tertiary"})})}),_=b({errorToast:{id:"BranchTurnActionButton.errorToast",defaultMessage:"Failed to branch conversation"}});export{R as default};
//# sourceMappingURL=ltphso0vbmlytfaq.js.map
