import{c as F,f as P,u as R,r as D,d as W,j as t,M as w}from"./m60bpb0x3x7rg8fj.js";import{o$ as z,aZ as H,e as K,c8 as Q,mc as $,p0 as y,aa as Y,X,am as L,C as Z,aN as G,a1 as J,P as V,aK as ee}from"./lgw4q0e8zlqqfgug.js";import{cu as te}from"./ggjzadbnd3k1vu0k.js";function se(e){switch(e){case y.SSOMismatch:return{title:a.cannotAccessWorkspace,description:a.ssoMismatchDescription};case y.RequireSSOLogin:return{title:a.cannotAccessWorkspace,description:a.requireSSODescription};case y.UnexpectedSSOLogin:return{title:a.cannotAccessWorkspace,description:a.unexpectedSSODescription}}}const oe=2e3;function le(){"use forget";const e=F.c(32),s=z(),o=H(),A=P(),N=K(),b=Q();let p;e[0]===Symbol.for("react.memo_cache_sentinel")?(p={...$(),select:ce},e[0]=p):p=e[0];const I=R(p),c=s?.errorCode,d=s!=null&&I.isFetched&&b==null&&!!o,[U,B]=D.useState(!1);let h,f;e[1]!==d?(h=()=>{d&&setTimeout(()=>{B(!0)},oe)},f=[d],e[1]=d,e[2]=h,e[3]=f):(h=e[2],f=e[3]),D.useEffect(h,f);const q=c===y.UnexpectedSSOLogin,m=d&&(q?U:!0),n=te();let g,S;if(e[4]!==n||e[5]!==c||e[6]!==m?(g=()=>{if(!c||!m)return;const v=n?.split("@")?.[1];Y.addError(`SSO Catch All Modal: ${c} for ${n??"unknown user"}`,{sso_error:c,email:n,email_hostname:v})},S=[c,m,n],e[4]=n,e[5]=c,e[6]=m,e[7]=g,e[8]=S):(g=e[7],S=e[8]),D.useEffect(g,S),!m)return null;let x;e[9]!==A||e[10]!==s.accountName||e[11]!==o?.name?(x=s?.accountName??o?.name??A.formatMessage(a.workspacePlaceholder),e[9]=A,e[10]=s.accountName,e[11]=o?.name,e[12]=x):x=e[12];const E=x;let M;e[13]!==N||e[14]!==o?(M=()=>{const v=o?.ssoConnectionName?{connection:o.ssoConnectionName}:void 0;X(N,{fallbackScreenHint:"login",additionalAuthParams:v})},e[13]=N,e[14]=o,e[15]=M):M=e[15];const j=M;let O;e[16]!==s.errorCode?(O=se(s.errorCode),e[16]=s.errorCode,e[17]=O):O=e[17];const{title:_,description:T}=O;let i;e[18]!==_?(i=t.jsx("div",{className:"flex flex-col",children:t.jsx("div",{className:"text-lg",children:t.jsx(w,{..._})})}),e[18]=_,e[19]=i):i=e[19];let r;e[20]!==E?(r=t.jsx(w,{...a.authenticateNotice,values:{workspaceName:E}}),e[20]=E,e[21]=r):r=e[21];let l;e[22]!==j||e[23]!==r?(l=t.jsx(L.Button,{onClick:j,color:"primary",children:r}),e[22]=j,e[23]=r,e[24]=l):l=e[24];let k;e[25]===Symbol.for("react.memo_cache_sentinel")?(k=t.jsx(L.Button,{onClick:ae,children:t.jsx(w,{id:"KlMYRb",defaultMessage:"Log out"})}),e[25]=k):k=e[25];let u;e[26]!==T?(u=t.jsx("div",{className:"flex flex-col space-y-4",children:t.jsx("div",{children:t.jsx(w,{...T})})}),e[26]=T,e[27]=u):u=e[27];let C;return e[28]!==l||e[29]!==u||e[30]!==i?(C=t.jsx(Z,{testId:"modal-sso-catch-all",isOpen:!0,onClose:J,type:"warning",size:"custom",className:"max-w-3xl",title:i,icon:G,primaryButton:l,secondaryButton:k,children:u}),e[28]=l,e[29]=u,e[30]=i,e[31]=C):C=e[31],C}function ae(){V.logLogOutButtonClicked({location:"sso_catch_all_modal"}),ee()}function ce(){return null}const a=W({authenticateNotice:{id:"zF1QJE",defaultMessage:"Authenticate to {workspaceName}"},workspacePlaceholder:{id:"IIY4N4",defaultMessage:"this workspace"},cannotAccessWorkspace:{id:"IlXHdd",defaultMessage:"Cannot Access This Workspace"},ssoMismatchDescription:{id:"xSuU9q",defaultMessage:"The SSO you logged in with does not match the SSO registered for this workspace. Try re-authenticating with that SSO."},unexpectedSSODescription:{id:"uSkRZx",defaultMessage:"This workspace doesn't have an SSO associated with it, but you're trying to log in with SSO. Try logging in with social authentication (i.e. Google) or with your password."},requireSSODescription:{id:"akKMy1",defaultMessage:"Your organization requires that you log in with SSO to access this workspace"}});export{le as default};
//# sourceMappingURL=ce7ho23qfugv9l5w.js.map
