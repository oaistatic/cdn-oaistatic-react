import{r as l,j as t}from"./m60bpb0x3x7rg8fj.js";import{aC as x,T as p,g as S,iI as _,v as g,N as A,gn as M}from"./lgw4q0e8zlqqfgug.js";import{S as j}from"./lqxrayj6ap3vzwmb.js";import{fC as v,fD as w,fh as E,fE as O,fF as C,fG as N,fH as T,fI as R}from"./ggjzadbnd3k1vu0k.js";import{u as b}from"./haixfva7lt2zsn6y.js";function P(o,s){const{automationId:n,automationTitle:e,automationMessage:c}=l.useMemo(()=>{const u=s.find(d=>d.author.role===x.Assistant),r=u?p.getParentPromptNode(S(o),u.id):null;let a=r?.message.metadata;a?.real_author_type||(a=s.find(h=>h.metadata?.real_author_type==="automation")?.metadata);const m=a?.real_author_type==="automation"?a?.real_author_id:null,i=a?.real_author_title;return{automationId:m,automationTitle:i,automationMessage:r?.message}},[o,s]),{automation:f}=b(n??"");return{automationId:n,automation:f,automationTitle:e,automationMessage:c}}function B({clientThreadId:o,messages:s}){const{automationId:n,automation:e,automationTitle:c}=P(o,s),u=v(o).isOdysseyMode||s.some(i=>i.metadata?.n7jupd_message),r=_(o)?.value,{isScheduledRun:a}=l.useContext(w),[y,m]=l.useState(!1);return l.useEffect(()=>{n&&g.count(A.JAWBONE,"jawbone_automation_source_header.open")},[n]),n?a?t.jsx("div",{className:"relative my-2 w-full",children:t.jsx(E,{automation:e,fullWidth:!0})}):u?r===M.REALTIME?null:t.jsx(O,{clientThreadId:o,children:t.jsx(C,{children:({isScheduled:i,isScheduledRun:d})=>i&&d&&t.jsx(N,{})})}):t.jsxs("div",{className:"text-token-text-secondary hover:text-token-text-primary mb-1 flex items-center gap-1.5 text-sm",children:[t.jsx(j,{className:"icon-sm"}),t.jsx("button",{onClick:()=>{m(!0)},children:e?.title??c}),y&&e&&t.jsx(T,{initialScheduleComponents:e.schedule_components,nextRunTimes:e.next_run_times,children:t.jsx(R,{item:e,source:"chat",onClose:()=>{m(!1)}})})]}):null}export{B as AutomationSourceHeader};
//# sourceMappingURL=lx144r3bof1f1kvh.js.map
