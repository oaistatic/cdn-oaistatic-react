import{r as p,f as R,j as e,q as W,d as N,u as D,h as L,i as _,M as P}from"./m60bpb0x3x7rg8fj.js";import{bZ as q,kC as V,kD as K,i8 as Y,aU as Z,iu as A,X as z,du as Q,bW as X}from"./ggjzadbnd3k1vu0k.js";import{S as $}from"./o5edhf9v3hg4igci.js";import{P as J,e as ee,H as te,hN as O,m as k,p as se,k as ae,gI as u,ix as oe,iy as ne,cs as ie,z as v,R as re,S as le,B,dO as ce,p2 as de,u as H,d as ue,C as fe,a1 as ge,am as xe}from"./lgw4q0e8zlqqfgug.js";import{H as he}from"./g4tl5lt9yqf20m4s.js";function je({disabledTools:t,onDisabledToolsChanged:s,inPersonalizationSettingsCleanupGate:n=!1}){p.useEffect(()=>{J.logEvent("User Context GPT-4 Capabilities Shown")},[]);const a=ee(),c=te(a)?.isEnterprisey()??!1,o=!O(k.BrowsingAvailable)&&c,d=!se(a,"934056609"),i=R(),h=x=>{const j=t.includes(x)?t.filter(w=>w!==x):[...t,x];s(j)},M=ae(),T=!O(k.Canvas)&&c;var C;M?.includes(k.SearchTool)&&!M.includes(k.SearchToolHoldout)?C=b({tool:u.BROWSER,label:i.formatMessage({id:"userContextModal.tools.web",defaultMessage:"Web search"}),disabledTooltipLabel:i.formatMessage({id:"4WldgK",defaultMessage:"Web search is disabled by your organization"}),description:i.formatMessage({id:"userContexModal.tools.webSearchTooltip",defaultMessage:"Let ChatGPT automatically search the web for answers."}),enabled:!t.includes(u.BROWSER)&&!o,handleToolClick:h,disabled:o,inPersonalizationSettingsCleanupGate:n,Icon:A}):C=b({tool:u.BROWSER,label:i.formatMessage({id:"userContextModal.tools.browse",defaultMessage:"Browsing"}),disabledTooltipLabel:i.formatMessage({id:"5SuA2c",defaultMessage:"Browsing is disabled by your organization"}),description:i.formatMessage({id:"userContexModal.tools.browserTooltip",defaultMessage:"Let ChatGPT browse the internet to find answers."}),enabled:!t.includes(u.BROWSER)&&!o,handleToolClick:h,disabled:o,inPersonalizationSettingsCleanupGate:n,Icon:A});const g=b({tool:u.PYTHON,label:i.formatMessage({id:"userContextModal.tools.codeInterpreter.1",defaultMessage:"Code"}),description:i.formatMessage({id:"userContextModal.tools.codeInterpreterTooltip",defaultMessage:"Let ChatGPT execute code using Code Interpreter."}),enabled:!t.includes(u.PYTHON),handleToolClick:h,Icon:K,inPersonalizationSettingsCleanupGate:n}),y=b({tool:u.CANMORE,label:i.formatMessage({id:"FW2C7Y",defaultMessage:"Canvas"}),description:i.formatMessage({id:"zPYZ4h",defaultMessage:"Collaborate with ChatGPT on text and code."}),enabled:!t.includes(u.CANMORE),handleToolClick:h,Icon:Y,inPersonalizationSettingsCleanupGate:n}),m=b({tool:u.ADVANCED_VOICE,label:i.formatMessage({id:"eHCnkb",defaultMessage:"Advanced voice"}),description:i.formatMessage({id:"OrvjWP",defaultMessage:"Have more natural conversations in voice mode."}),enabled:!t.includes(u.ADVANCED_VOICE),handleToolClick:h,Icon:$,inPersonalizationSettingsCleanupGate:n});return n?e.jsxs(e.Fragment,{children:[C,g,!T&&y,d&&m]}):e.jsx(q,{title:e.jsxs("div",{className:"flex items-center gap-1",children:[i.formatMessage({id:"userContextModal.gpt4CapabilitiesTitle",defaultMessage:"ChatGPT capabilities"}),e.jsx(V,{label:i.formatMessage({id:"userContextModal.tools.capabilitiesInfo.1",defaultMessage:"Choose which tools ChatGPT can use"}),side:"top"})]}),children:e.jsxs("ul",{className:"flex flex-wrap gap-3 pb-6","aria-label":i.formatMessage({id:"userContextModal.gpt4CapabilitiesToggle",defaultMessage:"Toggle ChatGPT capabilities"}),children:[C,g,!T&&y,d&&m]})})}function me({tool:t,title:s,tooltipLabel:n,Icon:a,onClick:r,checked:c,disabled:o,isNewCustomInstructionsUIEnabled:d=!1}){return e.jsx("li",{"aria-label":s,children:e.jsx(ie,{className:"block",label:n,side:"top",sideOffset:4,children:e.jsxs("button",{className:v("border-token-border-medium flex w-full items-center justify-between gap-2 rounded-lg border p-2 whitespace-nowrap",{"text-token-text-quaternary cursor-not-allowed":o}),"aria-expanded":c,tabIndex:-1,onClick:()=>r(t),disabled:o,children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(a,{className:"text-token-text-tertiary h-4 w-4"}),e.jsx("div",{className:v("text-sm",d?"text-muted font-medium":"font-semibold"),children:s})]}),e.jsx(Z,{id:t,onChange:()=>{},checked:c&&!o,disabled:o})]})})})}function b({tool:t,label:s,disabledTooltipLabel:n,description:a,enabled:r,handleToolClick:c,disabled:o,inPersonalizationSettingsCleanupGate:d,Icon:i}){return d?e.jsx(oe,{children:e.jsx(ne,{label:s,enabled:r,onChange:()=>c(t),toggleTooltip:o&&n,description:a,disabled:o})}):e.jsx(me,{title:s,tooltipLabel:o&&n?n:a,tool:t,onClick:c,Icon:i,checked:r,disabled:o,isNewCustomInstructionsUIEnabled:!0})}const pe=()=>W({queryKey:["traitPills"],queryFn:async()=>{try{const t=await re.safeGet("/user_system_message_trait_pills");return t?Array.isArray(t)?t:[]:[]}catch{return[...Me.map(s=>({key:s,label:s,description:E[s].defaultMessage||""})),...Ce.map(s=>({key:s,label:s,description:E[s].defaultMessage||""}))]}}}),Me=["Chatty","Witty","Opinionated","StraightShooting","GenZ","Encouraging","Skeptical","ForwardThinking"],Ce=["Poetic","Respectful","Humble","Professional","Corporate","Direct","Silly","Pragmatic","Chill","OutsideTheBox"],E=N({Chatty:{id:"userContextModal.chattySentence",defaultMessage:"Be talkative and conversational."},Witty:{id:"userContextModal.wittySentence",defaultMessage:"Use quick and clever humor when appropriate."},StraightShooting:{id:"userContextModal.straightShootingSentence",defaultMessage:"Tell it like it is; don't sugar-coat responses."},Encouraging:{id:"userContextModal.encouragingSentence",defaultMessage:"Use an encouraging tone."},GenZ:{id:"userContextModal.genZSentence",defaultMessage:"Talk like a member of Gen Z."},Skeptical:{id:"userContextModal.skepticalSentence",defaultMessage:"Adopt a skeptical, questioning approach."},ForwardThinking:{id:"userContextModal.forwardThinkingSentence",defaultMessage:"Take a forward-thinking view."},Poetic:{id:"userContextModal.poeticSentence",defaultMessage:"Use a poetic, lyrical tone."},Opinionated:{id:"userContextModal.opinionatedSentence",defaultMessage:"Readily share strong opinions."},Respectful:{id:"userContextModal.respectfulSentence",defaultMessage:"Always be respectful."},Humble:{id:"userContextModal.humbleSentence",defaultMessage:"Be humble when appropriate."},Professional:{id:"userContextModal.professionalSentence",defaultMessage:"Use a formal, professional tone."},Silly:{id:"userContextModal.sillySentence",defaultMessage:"Be playful and goofy."},Direct:{id:"userContextModal.directSentence",defaultMessage:"Get right to the point."},Pragmatic:{id:"userContextModal.pragmaticSentence",defaultMessage:"Be practical above all."},Corporate:{id:"userContextModal.corporateSentence",defaultMessage:"Respond with corporate jargon."},Chill:{id:"userContextModal.chillSentence",defaultMessage:"Keep it relaxed and easygoing."},OutsideTheBox:{id:"userContextModal.outsideTheBoxSentence",defaultMessage:"Be innovative and think outside the box."}});function ye(){return D({...pe(),select:t=>{const s=Math.ceil(t.length/2-1);return{firstSet:t.slice(0,s),secondSet:t.slice(s)}}})}function I(t,s,n){const a=t.length-2,r=t.filter(i=>!n.includes(i.key)),c=s.filter(i=>!n.includes(i.key)),o=Math.min(r.length,a),d=Math.max(0,a-r.length);return{visibleTraits:[...r.slice(0,o),...c.slice(0,d)],hiddenTraits:[...r.slice(o),...c.slice(d)]}}function we({onSelect:t,selectedTraits:s,setSelectedTraits:n,isNewTraitsUIEnabled:a=!1,disablePills:r=!1}){const c=R(),{data:o,isLoading:d}=ye(),[i,h]=p.useState(!0),[M,T]=p.useState(!1),[C,g]=p.useState([]),[y,m]=p.useState([]);if(p.useEffect(()=>{if(a&&o){const{visibleTraits:l,hiddenTraits:f}=I(o.firstSet,o.secondSet,[]);g(l),m(f)}},[a,o]),d)return e.jsx(le,{});if(!o)return null;let x=[];a?x=C:x=i?o.firstSet:o.secondSet;const j=l=>{if(!s.includes(l.key)&&(n(f=>[...f,l.key]),t(l.description),a&&!M&&(g(f=>f.filter(F=>F.key!==l.key)),y.length>0))){const[f,...F]=y;g(G=>[...G,f]),m(F)}},w=()=>{if(a){if(M){const{visibleTraits:l,hiddenTraits:f}=I(o.firstSet,o.secondSet,s);g(l),m(f)}else g([...o.firstSet,...o.secondSet]),m([]);T(l=>!l)}else n([]),h(l=>!l)};return e.jsxs("ul",{className:"flex flex-wrap gap-x-1 gap-y-2",children:[x.map(l=>s.includes(l.key)?null:e.jsx("li",{children:e.jsxs(B,{size:"small",color:"secondary",className:v("text-token-text-secondary text-xs font-normal",{"py-2 ps-2 pe-3":!a,"px-2.5 py-1":a}),onClick:()=>j(l),disabled:r,children:[!a&&e.jsx(z,{className:"icon-sm"}),l.label]})},l.label)),x.length>0&&!M&&y.length>0&&e.jsx("li",{children:e.jsx(B,{size:"small",color:"secondary","aria-label":c.formatMessage(X.traitsReset),className:v("text-token-text-secondary rounded-full",{"h-8.5 w-8.5":!a,"h-7 w-7":a}),onClick:w,disabled:r,children:a?e.jsx(ce,{className:"icon-sm"}):e.jsx(Q,{className:"icon-sm"})})})]})}function Fe({onSuccess:t,onError:s}){const n=L();return _({mutationFn:({userContext:a})=>de(a),onSettled:(a,r)=>{const c=["userContext"];a!==null&&!r?n.setQueryData(c,a):n.invalidateQueries({queryKey:c})},onSuccess:t,onError:s})}const U=ue.FirstTimeUsingUserContext;function Pe(){const{eligible:t}=H(U);return t}const Re=({onClose:t})=>{const s=R(),{markAsViewed:n}=H(U),a=p.useCallback(()=>{n(),t()},[n,t]);return e.jsxs(fe,{testId:"modal-user-context-first-time",isOpen:!0,onClose:ge,size:"custom",className:"max-w-xl",type:"success",title:s.formatMessage(S.title),primaryButton:e.jsx(xe.Button,{onClick:a,title:s.formatMessage(S.ok),color:"primary"}),children:[e.jsxs("div",{className:"mb-6 flex flex-col gap-3",children:[e.jsx("p",{children:e.jsx(P,{...S.body1})}),e.jsx("p",{children:e.jsx(P,{...S.body2})})]}),e.jsx("div",{className:"text-token-text-tertiary flex flex-col gap-3 text-sm",children:e.jsx("p",{children:e.jsx(P,{...S.legal1,values:{article:r=>e.jsx("a",{href:he,target:"_blank",className:"underline",rel:"noopener noreferrer",children:r})}})})})]})},S=N({title:{id:"UserContextFirstTimeModal.title",defaultMessage:"Introducing Custom Instructions"},body1:{id:"UserContextFirstTimeModal.body1",defaultMessage:"Customize your interactions with ChatGPT by providing specific details and guidelines for your chats."},body2:{id:"UserContextFirstTimeModal.body2",defaultMessage:"Whenever you edit your custom instructions, they'll take effect in all new chats you create. Existing chats won't be updated."},legal1:{id:"UserContextFirstTimeModal.legal1",defaultMessage:"Your instructions will be used to make our models better unless you've opted out and may be shared with any plugins you've enabled. Visit our <article>Help Center</article> to learn more."},ok:{id:"UserContextFirstTimeModal.ok",defaultMessage:"OK"}});export{je as G,we as T,Re as U,Fe as a,Pe as u};
//# sourceMappingURL=kxo4brqbh86yrfh4.js.map
