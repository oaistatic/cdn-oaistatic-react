import{f2 as R,fj as E,cP as g,fk as M,eK as F,ab as B,O as T,bl as O,o as N}from"./mwlpozqwnbys03vp.js";import{z as A,h as _,d as k,r as o,a as D,j as e}from"./cg166fqqcxkeiosv.js";import{t as y,a as m,u as H,s as K,C as b,b as L,g as j,T as Q,c as $,d as q}from"./d5k5wa3zyqlgc9bk.js";import{g as V,C as z}from"./eejnwg9biczpfc2f.js";import{T as G,C as W}from"./jimalhtrbg7rv6wn.js";import{C as w,T as J}from"./f6h3kyofrkhu3s3z.js";import{C as U}from"./gjup1pnw4u9rwx39.js";import"./j8x3nt0b4atg14yj.js";import"./gy64pge8qevmvg7e.js";import"./bk3oz68r6jpv53p0.js";import"./e1a7vwuqoah2oayi.js";import"./euxxc9e4zh86bdsx.js";import"./h9b0sydnyfwx9msy.js";import"./i7xkmczefffl02lb.js";import"./lreb9dbp4o4sdhlz.js";import"./mptd6395vqovl9h2.js";import"./e9twjvrfqdwmahlj.js";import"./ffqd4m2qodkr5sj8.js";import"./kb4dwh5v3nuso8nd.js";import"./gd3hm2r8fxvriszj.js";import"./fzrn137102spawew.js";import"./jy3dt8r0gwwixm3r.js";import"./f9ed4qokx92gm8gq.js";import"./lyxz8i5c4a3y7iew.js";import"./oxip50nz1ohggehf.js";import"./bcgu844kz5rwd68s.js";import"./k167qwis51wxn1ax.js";import"./bk8slwxjkdlmxjxm.js";import"./oyod5vgp8gzuy8hf.js";import"./mkaurxw37czmxs2e.js";import"./nbo9a5e09uaxkp2z.js";import"./dwgbagtcbp3llpgj.js";const Me=()=>(E(),null),Fe=R(function(){const a=A(),[s]=_(),u=k(),p=y(a.conversationId),i=m(s.get("readonly"),!1),c=m(s.get("isFullScreen"),!1),d=m(s.get("header"),!0),l=m(s.get("appPreview"),!1),n=g(()=>M()),C=g(()=>F()),P=m(s.get("hideBottomComposer"),!!i),r=y(a.canmoreId),t=p,f=H();o.useEffect(()=>{K({type:b.Textdoc,textdocId:r})},[r]),L(t,{kind:B.PrimaryAssistant});const h=D();if(o.useEffect(()=>(T.retainThread(t),()=>{setTimeout(()=>{h.invalidateQueries({queryKey:["conversation",t]})},0),T.releaseThread(t)}),[t,h]),o.useEffect(()=>{r||u("/")},[r,u]),o.useEffect(()=>{j().sendMessage({type:w.Loaded})},[r]),!r||f?.type!==b.Textdoc)return null;const I=()=>{j().sendMessage({type:w.Close})},S=i&&!d;return e.jsxs("div",{className:"h-full w-full overflow-hidden contain-content",children:[e.jsx("meta",{name:"viewport",content:"width=device-width, initial-scale=1, maximum-scale=1"}),e.jsx(U,{clientThreadId:t,children:e.jsx(Q,{clientThreadId:t,children:l?e.jsx(O,{children:e.jsx(X,{textdocId:f.textdocId})}):S?e.jsxs(e.Fragment,{children:[e.jsx(G,{disableScroll:!n,textdocId:f.textdocId}),e.jsx(W,{})]}):e.jsx(J,{isEmbedded:!0,isFullScreen:c,hideHeader:!d,hideBottomComposer:P,isReadonlyFromQueryParam:i,hideRenameButton:C,hideRunCode:!n,clientThreadId:t,focusedTextdoc:f,onClose:I},"textdocContent")})})]})}),X=({textdocId:x})=>{const a=o.useRef(null),s=$(x),[u,p]=o.useState(!1),i=s?.versions??[],c=N(i),d=o.useCallback(q(async l=>{const n=V(l.type,l.content);if(a.current&&(n==="react"||n==="html")){p(!0);const v=a.current.evalAsync({language:n,code:l.content});for await(const C of v)console.debug(C)}p(!1)},100),[]);return o.useEffect(()=>{c&&d(c)},[c,d]),e.jsx(z,{visuallyHidden:!u,ref:a,enableTransition:!0,title:""})};export{Me as clientLoader,Fe as default};
//# sourceMappingURL=bjr5khmdy9wtgtr0.js.map
