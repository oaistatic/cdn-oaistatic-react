const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/j67rucsg55ql25ck.js","assets/cg166fqqcxkeiosv.js","assets/d5k5wa3zyqlgc9bk.js","assets/mwlpozqwnbys03vp.js","assets/root-0muf4psh.css","assets/conversation-small-ga20ijz2.css","assets/e1m5yy2rip1joy56.js","assets/gjup1pnw4u9rwx39.js","assets/mptd6395vqovl9h2.js","assets/lreb9dbp4o4sdhlz.js","assets/kb4dwh5v3nuso8nd.js","assets/gnony0vwtktparkr.js","assets/kv6ufg5o3s8p0dme.js","assets/ehrl4h7p8z26p31l.js","assets/kov0p7sh15118kx7.js","assets/ghzr670qk954gg66.js","assets/nv12ia990lbzihgr.js","assets/n07bwe3ds8yx21kc.js","assets/luoyseoswdl38a9d.js"])))=>i.map(i=>d[i]);
import{bi as L,gk as F,aD as U,a5 as _,d as G,bl as W,df as D,bT as Q,h as V,gl as T,bm as X,bn as $,b4 as O,dT as Y,cP as q,c2 as Z,dY as J,u as K,bc as ee,H as se}from"./mwlpozqwnbys03vp.js";import{R as te,a as ae,r as a,j as e,M as E,c as ne}from"./cg166fqqcxkeiosv.js";import{eO as re,eP as ie,cy as oe,eQ as ce,eR as le,eS as d,eT as de,ag as ue,c_ as P,ao as me,a9 as fe,N as Se,eU as be,cw as xe,U as H,eV as ge,eW as ye,eX as he,eY as k,eZ as ve}from"./d5k5wa3zyqlgc9bk.js";import{D as z,G as pe,S as je}from"./e1m5yy2rip1joy56.js";import{u as Ce,H as Ie}from"./gsblme0rorv0prf4.js";import{N as Ne}from"./gjup1pnw4u9rwx39.js";const R=V({unableToLoadHistory:{id:"history.unableToLoad",defaultMessage:"Unable to load history"},retryButton:{id:"history.retryButton",defaultMessage:"Retry"}});function De({activeId:s,hideOverflowMenu:i}){const n=ae(),[o,c]=a.useState(!1),[r,u]=a.useState(0),f=F(),[p,S]=a.useState(!1),l=re(),b=ie(),{conversations:x,hasNextPage:j,fetchNextPage:I,isLoading:m,isFetchingNextPage:w,isError:N}=oe({}),g=a.useRef(null),B=a.useCallback(t=>{m||t==null||(g.current?.disconnect(),g.current=new IntersectionObserver(A=>{A[0].isIntersecting&&j&&I()}),g.current.observe(t))},[m,j,I]);a.useEffect(()=>()=>{g.current?.disconnect()},[]),a.useMemo(()=>{U.publish({kind:"refreshHistory",conversations:x})},[x]);const C=x;a.useEffect(()=>{const t=ce(le(),Date.now());f(()=>{u(r+1)},t+1e3)},[r,f]);const y=C.length===0;d.markStart("History",d.NS_SIDEBAR),_()?.data!=null&&!m&&d.markRendered("History",d.NS_SIDEBAR);const M=Ce(C,r),h=l!=null&&l.kind==="conversation"&&l.gizmoId!=null&&de(l.gizmoId),v=a.useRef(0);return e.jsxs(Ee,{$centered:m||N||y,onDragOver:t=>{t.preventDefault(),h&&S(!0)},onDrop:t=>{t.preventDefault(),h&&(v.current=0,S(!1),b({newGizmoId:null,conversation:l.conversation,previousGizmoId:l.gizmoId??null}))},onDragEnter:t=>{t.preventDefault(),h&&(v.current+=1)},onDragLeave:t=>{t.preventDefault(),h&&(v.current-=1,v.current===0&&S(!1))},className:G(p&&"opacity-50"),children:[y&&m&&e.jsx(W,{children:e.jsx(D,{className:"m-auto"})}),y&&N&&e.jsxs("div",{className:"p-3 text-center italic text-token-text-tertiary",children:[e.jsx(E,{...R.unableToLoadHistory}),!o&&e.jsx("div",{className:"mt-1",children:e.jsx(Q,{as:"button",color:"primary",size:"small",className:"m-auto mt-2",onClick:()=>{c(!0),ue(n)},children:e.jsx(E,{...R.retryButton})})})]}),!m&&!y&&e.jsx("div",{children:e.jsx(Ie,{activeId:s,bucketedItems:M,hasNextPage:j,items:C,infiniteScrollTriggerElementRef:B,hideOverflowMenu:i})}),w&&e.jsx("div",{className:"m-4 mb-5 flex justify-center",children:e.jsx(D,{})})]})}const Te=te.memo(De),Ee=L.div`flex flex-col gap-2 text-token-text-primary text-sm mt-5 first:mt-0
${({$centered:s})=>[s&&"h-full justify-center items-center empty:hidden"]}`;function He({currentGizmoId:s}){const i=P(),{data:{gizmos:n}={}}=me();let o=n;i&&(o=n?.filter(u=>!fe(u.resource))),d.markStart("GizmoSidebarList",d.NS_SIDEBAR),o!==void 0&&d.markRendered("GizmoSidebarList",d.NS_SIDEBAR);const c=T("2152104812","hide_gpts_if_none",!1),r=T("2152104812","hide_default_gpts",!1);return c&&n?.length===0?!r&&e.jsx(z,{isNewConversation:!0}):e.jsxs(e.Fragment,{children:[!r&&e.jsx(z,{isNewConversation:!0}),e.jsx(pe,{gizmo:o??[],currentGizmoId:s,maxToShowOnLoad:7})]})}const ke=X(()=>$(()=>import("./j67rucsg55ql25ck.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18])).then(s=>s.FannyPackAction));function ze({clientThreadId:s}){const i=K(s),n=_(),{isUnauthenticated:o}=O(),c=ee(s),r=se(),u=P(),[f,p]=a.useState(!1),S=a.useCallback(b=>b===k.Snorlax?f:!1,[f]),l=a.useCallback((b,x)=>{b===k.Snorlax&&p(x)},[]);return e.jsx(ve,{value:{isSidebarFlyoutOpen:S,onSidebarFlyoutOpenChange:l},children:e.jsxs("div",{className:"group/sidebar",children:[n&&e.jsx(He,{currentGizmoId:c}),null,u&&e.jsx(je,{currentGizmoId:c}),null,null,!o&&e.jsx(Te,{activeId:r?void 0:i})]})})}function Ae({clientThreadId:s}){const{isUnauthenticated:i}=O();return i?null:e.jsx(ze,{clientThreadId:s})}function Le({className:s,onNewThread:i}){const n=ne(),o=Y(),c=q(()=>navigator.windowControlsOverlay),{isFannyPackEnabled:r}=Se(),u=be();return e.jsxs("div",{className:G("flex",c?.visible&&c.getTitlebarAreaRect().left>0?"justify-end":"justify-between",s),children:[e.jsx(Z,{sideOffset:4,label:n.formatMessage({id:"e7SzX9",defaultMessage:"Close sidebar"}),className:"flex",side:"right",children:e.jsx(xe,{className:"no-draggable","aria-label":n.formatMessage({id:"e7SzX9",defaultMessage:"Close sidebar"}),onClick:()=>{J(o)?H.toggleNavSidebar():H.togglePopoverNavSidebar()},icon:u?ge:ye,mobileIcon:he,"data-testid":"close-sidebar-button"})}),e.jsxs("div",{className:"flex",children:[r&&e.jsx(ke,{}),e.jsx(Ne,{onClick:i,testId:"create-new-chat-button"})]})]})}export{Ae as C,He as G,Te as H,Le as S};
//# sourceMappingURL=n3iim2qmr2vkzcs3.js.map
