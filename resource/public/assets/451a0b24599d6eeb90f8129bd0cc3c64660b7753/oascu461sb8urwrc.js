import{cO as y,a4 as D,B as P,D as A,S as O,b8 as B,b9 as T,dy as f,N as x,fS as E,dD as I,eL as R,fT as U,h as _,f2 as L,a5 as Y}from"./mwlpozqwnbys03vp.js";import{r as m,c as z,j as e,M as t,d as H}from"./cg166fqqcxkeiosv.js";import{cd as F,cO as G,U as K,cP as Q,cQ as q,cR as J,cS as V,cT as g,bI as b,cU as j}from"./d5k5wa3zyqlgc9bk.js";function X(){const r=F(),{data:n}=y(),a=D(n),u=a!=null||n!=null,[c,o]=m.useState(!1),d=n?.accountItems,k=G(a?.id??""),w=a?.id,l=d?.find(i=>i.id===w),M=a?.isOwnerOfAccount()&&a.isTeam()&&!a.hasPaidSubscription(),W=a?.isOwnerOfAccount()&&a.isTeam()&&a.hasPaidSubscription(),p=d?.filter(i=>!i.isDeactivated()),v=z(),S=P();let h=R;a?h=a.mustGetSubscriptionBillingCurrency("DeactivatedWorkspaceModal"):(A.addError(new Error("Current account is undefined in DeactivatedWorkspaceModal")),O.logEvent("chatgpt_undefined_current_account"));const N=m.useCallback(()=>{o(!0),K.setPurchaseWorkspaceData({minimumSeats:Math.max(k,Q),billingDetails:{currency:h},existingAccount:l}),o(!1)},[k,l,h]),C=async()=>{o(!0);try{const i=await x.fetchCustomerPortalUrl();location.href=i.url,o(!1)}catch{o(!1),S.warning(v.formatMessage(s.unableToOpenStripeDashboard),{hasCloseButton:!0})}};return a==null||!l||!p?e.jsx(e.Fragment,{}):e.jsx(B,{type:"success",onClose:T,isOpen:u,title:e.jsx("span",{className:"text-lg",children:e.jsx(t,{...s.workspaceDeactivated})}),children:e.jsxs("div",{className:"flex flex-col items-center justify-center gap-4",children:[e.jsxs("div",{className:"flex w-full items-center gap-4",children:[e.jsx(q,{src:l.data.profilePictureUrl,size:"large"}),e.jsx("div",{className:"font-semibold",children:l.data.name})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"mb-2 text-base font-bold",children:e.jsx(t,{...s.workspaceDeactivated})}),e.jsxs("ul",{className:"list-disc pl-5",children:[e.jsx("li",{className:"mb-1",children:e.jsx(t,{...s.chatHistoryUnavailable})}),e.jsx("li",{children:e.jsx(t,{...s.otherWorkspacesAvailable})})]})]}),M&&e.jsxs("div",{className:"flex w-full flex-col",children:[e.jsx("p",{children:e.jsx(t,{...s.purchaseNewSubscription})}),e.jsx(f,{className:"m-auto mt-2 w-full",loading:c,onClick:N,children:e.jsx(t,{...s.purchaseNewSubscriptionButton})})]}),W&&e.jsxs("div",{className:"flex w-full flex-col",children:[e.jsx("p",{children:e.jsx(t,{...s.resolveOutstandingInvoice})}),e.jsx(f,{className:"m-auto mt-2 w-full",loading:c,onClick:C,children:e.jsx(t,{...s.manageSubscriptionButton})})]}),e.jsx(J,{}),e.jsx("div",{className:"w-full justify-center",children:p.length>0?e.jsxs(e.Fragment,{children:[e.jsx("h3",{className:"mb-2 text-base font-bold",children:e.jsx(t,{...s.selectWorkspace})}),e.jsx(V,{data:p})]}):e.jsxs("div",{className:"flex flex-col gap-6",children:[e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx("h3",{className:"text-base font-bold",children:e.jsx(t,{...s.createPersonalWorkspace})}),e.jsx(t,{...s.deactivatedWorkspaceReason})]}),e.jsxs("div",{className:"flex w-full items-center gap-4",children:[r&&r.picture&&e.jsx("img",{alt:"Profile",src:r.picture,width:g.workspaceMedium,height:g.workspaceMedium,className:"flex items-center justify-center rounded-sm"}),e.jsx("span",{className:"font-semibold",children:r&&e.jsx("span",{children:r.name})})]}),e.jsx("div",{className:"ml-auto",children:e.jsx(f,{title:v.formatMessage(s.createPersonalWorkspaceButton),loading:c,onClick:async()=>{o(!0),await x.upsertPersonalWorkspace(),E(U),I()},color:"primary",className:"ml-4"})})]})})]})})}const s=_({workspaceDeactivated:{id:"deactivatedWorkspaceModal.workspaceDeactivated",defaultMessage:"Your workspace has been deactivated"},workspaceDeactivatedDesc:{id:"deactivatedWorkspaceModal.workspaceDeactivatedDesc",defaultMessage:"Your workspace has been deactivated."},chatHistoryUnavailable:{id:"deactivatedWorkspaceModal.chatHistoryUnavailable",defaultMessage:"Your chat history and settings will not be available."},otherWorkspacesAvailable:{id:"deactivatedWorkspaceModal.otherWorkspacesAvailable",defaultMessage:"You will still be able to use ChatGPT with the other workspaces associated with this email address."},selectWorkspace:{id:"deactivatedWorkspaceModal.selectWorkspace",defaultMessage:"Select a workspace to continue"},createPersonalWorkspace:{id:"deactivatedWorkspaceModal.createPersonalWorkspace",defaultMessage:"Create a personal workspace to continue"},deactivatedWorkspaceReason:{id:"deactivatedWorkspaceModal.deactivatedWorkspaceReason",defaultMessage:"Because your workspace has been deactivated, you need to create a personal workspace to continue using ChatGPT."},profileAlt:{id:"deactivatedWorkspaceModal.profileAlt",defaultMessage:"Profile"},createPersonalWorkspaceButton:{id:"deactivatedWorkspaceModal.createPersonalWorkspaceButton",defaultMessage:"Create a personal workspace"},unableToOpenStripeDashboard:{id:"deactivatedWorkspaceModal.unableToOpenStripeDashboard",defaultMessage:"Unable to open Stripe dashboard"},purchaseNewSubscription:{id:"deactivatedWorkspaceModal.purchaseNewSubscription",defaultMessage:"You can reactivate your workspace by purchasing a new subscription."},purchaseNewSubscriptionButton:{id:"deactivatedWorkspaceModal.purchaseNewSubscriptionButton",defaultMessage:"Purchase subscription"},resolveOutstandingInvoice:{id:"deactivatedWorkspaceModal.resolveOutstandingInvoice",defaultMessage:"You can reactivate your workspace by resolving an outstanding invoice on your subscription."},manageSubscriptionButton:{id:"deactivatedWorkspaceModal.manageSubscriptionButton",defaultMessage:"Manage subscription"}}),ae=L(function(){const n=b(j.workspaces),a=Y(),u=b(j.workspaceId),c=n.find(d=>d.id===u),o=H();return m.useEffect(()=>{a?.data&&(!c||!c.deactivated)&&o("/")},[a,c,o]),a?.data&&(!c||!c.deactivated)?e.jsx("div",{}):e.jsx(X,{})});export{ae as default};
//# sourceMappingURL=oascu461sb8urwrc.js.map
