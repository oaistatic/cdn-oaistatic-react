const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/ab8okydope0n15mq.js","assets/cg166fqqcxkeiosv.js","assets/j4xe1fdohr6xk09p.js","assets/dze2l9y9kn6nwat0.js","assets/root-fk1yg8gm.css","assets/conversation-small-ga20ijz2.css","assets/e61g0qvb4nak98bl.js","assets/m4iicmyh3x1nme4j.js","assets/gzm2pyuieq14d2cd.js","assets/h83rc28v2vsm5nda.js","assets/b6ddr1xo1x0u3g1f.js","assets/fnzd64m6c6nr1y9q.js","assets/clkzaq2ue82unbic.js","assets/m5tfr0dtbetugou5.js","assets/huldggq89x8k42xn.js","assets/knox9y5o8wayzcvt.js","assets/np0nefb9sjl94rg5.js","assets/dpxkajyks047f85k.js","assets/ccv3rtil36nx9t8w.js"])))=>i.map(i=>d[i]);
import{bh as L,gk as F,aD as U,a5 as _,d as G,bk as W,dd as D,bT as Q,h as V,gl as E,bl as X,bm as $,b3 as O,dS as q,cN as Y,c1 as Z,dX as J,bP as K,bb as ee,H as se}from"./dze2l9y9kn6nwat0.js";import{R as te,a as ae,r as a,j as e,M as T,c as ne}from"./cg166fqqcxkeiosv.js";import{eO as re,eP as oe,cy as ie,eQ as ce,eR as le,eS as d,eT as de,ag as ue,c_ as P,ao as me,a9 as fe,N as Se,eU as be,cw as xe,U as k,eV as ge,eW as ye,eX as he,eY as H,eZ as ve}from"./j4xe1fdohr6xk09p.js";import{D as z,G as pe,S as je}from"./e61g0qvb4nak98bl.js";import{u as Ce,H as Ie}from"./casotq27oeh0snvn.js";import{N as Ne}from"./m4iicmyh3x1nme4j.js";const R=V({unableToLoadHistory:{id:"history.unableToLoad",defaultMessage:"Unable to load history"},retryButton:{id:"history.retryButton",defaultMessage:"Retry"}});function De({activeId:s,hideOverflowMenu:o}){const n=ae(),[i,c]=a.useState(!1),[r,u]=a.useState(0),f=F(),[p,S]=a.useState(!1),l=re(),b=oe(),{conversations:x,hasNextPage:j,fetchNextPage:I,isLoading:m,isFetchingNextPage:w,isError:N}=ie({}),g=a.useRef(null),B=a.useCallback(t=>{m||t==null||(g.current?.disconnect(),g.current=new IntersectionObserver(A=>{A[0].isIntersecting&&j&&I()}),g.current.observe(t))},[m,j,I]);a.useEffect(()=>()=>{g.current?.disconnect()},[]),a.useMemo(()=>{U.publish({kind:"refreshHistory",conversations:x})},[x]);const C=x;a.useEffect(()=>{const t=ce(le(),Date.now());f(()=>{u(r+1)},t+1e3)},[r,f]);const y=C.length===0;d.markStart("History",d.NS_SIDEBAR),_()?.data!=null&&!m&&d.markRendered("History",d.NS_SIDEBAR);const M=Ce(C,r),h=l!=null&&l.kind==="conversation"&&l.gizmoId!=null&&de(l.gizmoId),v=a.useRef(0);return e.jsxs(Te,{$centered:m||N||y,onDragOver:t=>{t.preventDefault(),h&&S(!0)},onDrop:t=>{t.preventDefault(),h&&(v.current=0,S(!1),b({newGizmoId:null,conversation:l.conversation,previousGizmoId:l.gizmoId??null}))},onDragEnter:t=>{t.preventDefault(),h&&(v.current+=1)},onDragLeave:t=>{t.preventDefault(),h&&(v.current-=1,v.current===0&&S(!1))},className:G(p&&"opacity-50"),children:[y&&m&&e.jsx(W,{children:e.jsx(D,{className:"m-auto"})}),y&&N&&e.jsxs("div",{className:"p-3 text-center italic text-token-text-tertiary",children:[e.jsx(T,{...R.unableToLoadHistory}),!i&&e.jsx("div",{className:"mt-1",children:e.jsx(Q,{as:"button",color:"primary",size:"small",className:"m-auto mt-2",onClick:()=>{c(!0),ue(n)},children:e.jsx(T,{...R.retryButton})})})]}),!m&&!y&&e.jsx("div",{children:e.jsx(Ie,{activeId:s,bucketedItems:M,hasNextPage:j,items:C,infiniteScrollTriggerElementRef:B,hideOverflowMenu:o})}),w&&e.jsx("div",{className:"m-4 mb-5 flex justify-center",children:e.jsx(D,{})})]})}const Ee=te.memo(De),Te=L.div`flex flex-col gap-2 text-token-text-primary text-sm mt-5 first:mt-0
${({$centered:s})=>[s&&"h-full justify-center items-center empty:hidden"]}`;function ke({currentGizmoId:s}){const o=P(),{data:{gizmos:n}={}}=me();let i=n;o&&(i=n?.filter(u=>!fe(u.resource))),d.markStart("GizmoSidebarList",d.NS_SIDEBAR),i!==void 0&&d.markRendered("GizmoSidebarList",d.NS_SIDEBAR);const c=E("2152104812","hide_gpts_if_none",!1),r=E("2152104812","hide_default_gpts",!1);return c&&n?.length===0?!r&&e.jsx(z,{isNewConversation:!0}):e.jsxs(e.Fragment,{children:[!r&&e.jsx(z,{isNewConversation:!0}),e.jsx(pe,{gizmo:i??[],currentGizmoId:s,maxToShowOnLoad:7})]})}const He=X(()=>$(()=>import("./ab8okydope0n15mq.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18])).then(s=>s.FannyPackAction));function ze({clientThreadId:s}){const o=K(s),n=_(),{isUnauthenticated:i}=O(),c=ee(s),r=se(),u=P(),[f,p]=a.useState(!1),S=a.useCallback(b=>b===H.Snorlax?f:!1,[f]),l=a.useCallback((b,x)=>{b===H.Snorlax&&p(x)},[]);return e.jsx(ve,{value:{isSidebarFlyoutOpen:S,onSidebarFlyoutOpenChange:l},children:e.jsxs("div",{className:"group/sidebar",children:[n&&e.jsx(ke,{currentGizmoId:c}),null,u&&e.jsx(je,{currentGizmoId:c}),null,null,!i&&e.jsx(Ee,{activeId:r?void 0:o})]})})}function Ae({clientThreadId:s}){const{isUnauthenticated:o}=O();return o?null:e.jsx(ze,{clientThreadId:s})}function Le({className:s,onNewThread:o}){const n=ne(),i=q(),c=Y(()=>navigator.windowControlsOverlay),{isFannyPackEnabled:r}=Se(),u=be();return e.jsxs("div",{className:G("flex",c?.visible&&c.getTitlebarAreaRect().left>0?"justify-end":"justify-between",s),children:[e.jsx(Z,{sideOffset:4,label:n.formatMessage({id:"e7SzX9",defaultMessage:"Close sidebar"}),className:"flex",side:"right",children:e.jsx(xe,{className:"no-draggable","aria-label":n.formatMessage({id:"e7SzX9",defaultMessage:"Close sidebar"}),onClick:()=>{J(i)?k.toggleNavSidebar():k.togglePopoverNavSidebar()},icon:u?ge:ye,mobileIcon:he,"data-testid":"close-sidebar-button"})}),e.jsxs("div",{className:"flex",children:[r&&e.jsx(He,{}),e.jsx(Ne,{onClick:o,testId:"create-new-chat-button"})]})]})}export{Ae as C,ke as G,Ee as H,Le as S};
//# sourceMappingURL=bgkjafzrp5aw6ah6.js.map
