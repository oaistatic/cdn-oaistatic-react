import{f2 as R,fj as E,cN as g,fk as M,eK as F,ab as B,O as T,bk as N,o as O}from"./dze2l9y9kn6nwat0.js";import{z as k,h as A,d as _,r as o,a as D,j as e}from"./cg166fqqcxkeiosv.js";import{t as y,a as m,u as H,s as K,C as b,b as L,g as j,T as Q,c as $,d as q}from"./j4xe1fdohr6xk09p.js";import{g as V,C as z}from"./ezm91fvy6t8yntsc.js";import{T as G,C as W}from"./gdjo2ai11w0vwlbz.js";import{C as w,T as J}from"./b9zbj2u4r9fch3mf.js";import{C as U}from"./m4iicmyh3x1nme4j.js";import"./g6yzyuzg2o1kdt74.js";import"./gy64pge8qevmvg7e.js";import"./bsl07ehiis3tpn40.js";import"./e1a7vwuqoah2oayi.js";import"./b8ehjiqbpws5o9du.js";import"./f55klt1ppf2qkvcm.js";import"./7ckqochw7zdn18vj.js";import"./h83rc28v2vsm5nda.js";import"./gzm2pyuieq14d2cd.js";import"./e9twjvrfqdwmahlj.js";import"./ffqd4m2qodkr5sj8.js";import"./b6ddr1xo1x0u3g1f.js";import"./du5a0w6afzr4tx64.js";import"./fzrn137102spawew.js";import"./jy3dt8r0gwwixm3r.js";import"./kxggiygl9l9wvt1i.js";import"./jky4nhpbj4n3xuh7.js";import"./cfvh96gbcjdpth1v.js";import"./m5vf38e63o5zwpil.js";import"./bol4u3fhxl3qevnk.js";import"./bk8slwxjkdlmxjxm.js";import"./oyod5vgp8gzuy8hf.js";import"./mkaurxw37czmxs2e.js";import"./hdilgwj6ud6odlt8.js";import"./dwgbagtcbp3llpgj.js";const Me=()=>(E(),null),Fe=R(function(){const a=k(),[s]=A(),u=_(),p=y(a.conversationId),i=m(s.get("readonly"),!1),c=m(s.get("isFullScreen"),!1),d=m(s.get("header"),!0),l=m(s.get("appPreview"),!1),n=g(()=>M()),C=g(()=>F()),I=m(s.get("hideBottomComposer"),!!i),r=y(a.canmoreId),t=p,f=H();o.useEffect(()=>{K({type:b.Textdoc,textdocId:r})},[r]),L(t,{kind:B.PrimaryAssistant});const h=D();if(o.useEffect(()=>(T.retainThread(t),()=>{setTimeout(()=>{h.invalidateQueries({queryKey:["conversation",t]})},0),T.releaseThread(t)}),[t,h]),o.useEffect(()=>{r||u("/")},[r,u]),o.useEffect(()=>{j().sendMessage({type:w.Loaded})},[r]),!r||f?.type!==b.Textdoc)return null;const P=()=>{j().sendMessage({type:w.Close})},S=i&&!d;return e.jsxs("div",{className:"h-full w-full overflow-hidden contain-content",children:[e.jsx("meta",{name:"viewport",content:"width=device-width, initial-scale=1, maximum-scale=1"}),e.jsx(U,{clientThreadId:t,children:e.jsx(Q,{clientThreadId:t,children:l?e.jsx(N,{children:e.jsx(X,{textdocId:f.textdocId})}):S?e.jsxs(e.Fragment,{children:[e.jsx(G,{disableScroll:!n,textdocId:f.textdocId}),e.jsx(W,{})]}):e.jsx(J,{isEmbedded:!0,isFullScreen:c,hideHeader:!d,hideBottomComposer:I,isReadonlyFromQueryParam:i,hideRenameButton:C,hideRunCode:!n,clientThreadId:t,focusedTextdoc:f,onClose:P},"textdocContent")})})]})}),X=({textdocId:x})=>{const a=o.useRef(null),s=$(x),[u,p]=o.useState(!1),i=s?.versions??[],c=O(i),d=o.useCallback(q(async l=>{const n=V(l.type,l.content);if(a.current&&(n==="react"||n==="html")){p(!0);const v=a.current.evalAsync({language:n,code:l.content});for await(const C of v)console.debug(C)}p(!1)},100),[]);return o.useEffect(()=>{c&&d(c)},[c,d]),e.jsx(z,{visuallyHidden:!u,ref:a,enableTransition:!0,title:""})};export{Me as clientLoader,Fe as default};
//# sourceMappingURL=k2gv01kcxiglv0wh.js.map
