const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/nr34t1ks2qgtzcfw.js","assets/cg166fqqcxkeiosv.js","assets/dze2l9y9kn6nwat0.js","assets/root-fk1yg8gm.css","assets/fsggdikugeugivk2.js","assets/gian1eu8l0rhyife.js","assets/j4xe1fdohr6xk09p.js","assets/conversation-small-ga20ijz2.css","assets/np0nefb9sjl94rg5.js","assets/dpxkajyks047f85k.js","assets/ccv3rtil36nx9t8w.js","assets/m5tfr0dtbetugou5.js","assets/gzm2pyuieq14d2cd.js","assets/m4iicmyh3x1nme4j.js","assets/h83rc28v2vsm5nda.js","assets/b6ddr1xo1x0u3g1f.js","assets/fnzd64m6c6nr1y9q.js","assets/clkzaq2ue82unbic.js","assets/huldggq89x8k42xn.js","assets/knox9y5o8wayzcvt.js"])))=>i.map(i=>d[i]);
import{j as e,L as Y,M as T,c as z,r as u,au as B,aw as ke,a as Oe,d as Ee}from"./cg166fqqcxkeiosv.js";import{fw as J,bl as ee,bm as se,bP as te,a5 as R,c1 as _,h as ne,dg as Le,d as C,bk as Me,dT as ae,dd as re,ai as Te,aA as ze,d3 as Fe,gs as _e,db as ie,e4 as Ae,aD as Re,ap as we,H as Pe,bb as De,b3 as oe,hb as N,as as Ge,at as Be,fT as He,c0 as ce}from"./dze2l9y9kn6nwat0.js";import{m6 as P,o as le,bR as A,h$ as Ue,m7 as V,cx as We,eO as de,eP as ue,jM as Ve,e2 as Ke,jE as Qe,gB as Xe,m8 as G,m9 as me,f6 as fe,ma as F,fz as Ze,mb as $e,mc as qe,fF as Ye,ab as Je,md as he,me as xe,eY as y,ah as Se,i0 as es,h_ as ss,mf as K,eS as j,mg as ts,mh as Q,mi as ns,mj as as,mk as rs,ml as is,mm as os,gu as cs,z as ge,mn as ls,fQ as ds,U as pe,gt as us,fA as ms,mo as fs,aG as hs,aF as xs,mp as Ss,mq as D,P as X,u as gs,dm as ps,mr as be,ms as bs,ao as vs,c_ as ve,a9 as js,mt as Is,cy as je,eT as ys,mu as Cs,gs as Ns,hN as ks,bs as Ie,kO as Os,mv as Es,N as Ls,mw as Ms,mx as Ts,eX as zs,my as Fs,eZ as _s,cX as As}from"./j4xe1fdohr6xk09p.js";import{u as H,h as Rs}from"./m4iicmyh3x1nme4j.js";import{H as ye}from"./fnzd64m6c6nr1y9q.js";import{U as ws,P as Ps}from"./huldggq89x8k42xn.js";import{i as Ds}from"./m5tfr0dtbetugou5.js";import{C as Gs}from"./knox9y5o8wayzcvt.js";function Bs({gizmoResource:s,serverThreadId:n,isOnProjectPage:t,conversations:r,hasNextPage:a=!1}){const i=r??[],d=i.findIndex(c=>c.id===n),l=i.slice(0,P);d!=null&&d>=P&&(l[P-1]=i[d]);const m=a||i.length>P,o=J().activeServerThreadIds;return e.jsxs("div",{className:"flex flex-col screen-arch:gap-0.5",children:[l.map(c=>e.jsx(ye,{className:"ml-7 pl-1",item:c,isActiveInMainWindow:c.id===n,isActive:o.has(c.id)},c.id)),m&&!t&&e.jsx(Y,{to:le(s),className:"group ml-7 flex h-9 items-center gap-2.5 rounded-lg pl-3 pr-2 text-sm tracking-condensed text-token-text-primary hover:bg-token-sidebar-surface-secondary",children:e.jsx("span",{className:"text-left",children:e.jsx(T,{...A.seeAllChats})})})]})}const Hs=ee(()=>se(()=>import("./nr34t1ks2qgtzcfw.js"),__vite__mapDeps([0,1,2,3,4])).then(s=>s.SnorlaxFolderAnimation),{loading:({color:s})=>e.jsx(Ce,{color:s})}),Us={open:{opacity:1,y:0,transition:{duration:.15,ease:"easeOut"}},closed:{opacity:0,y:-5,transition:{duration:.15,ease:"easeIn"}}};function Ws({color:s,folderState:n,gizmoId:t,sidebarSnorlaxFolderStore:r}){const a=z(),[i,d]=u.useState(!1);return e.jsx(_,{side:"top",sideOffset:4,delayDuration:600,label:n==="open"?a.formatMessage(A.hideChatsForProjectTooltip):a.formatMessage(A.showChatsForProjectTooltip),children:e.jsx("button",{onClick:l=>{l.preventDefault(),n==="open"?r.collapseProject(t):r.expandProject(t)},className:"-m-0.5 flex rounded-xl p-0.5 text-token-text-secondary hover:bg-token-sidebar-surface-tertiary",onMouseEnter:()=>{d(!0)},onMouseLeave:()=>{d(!1)},children:e.jsx("div",{className:"h-6 w-6",children:e.jsx("div",{className:"relative flex h-full items-center justify-center text-token-text-primary",children:e.jsx(Hs,{isOpen:n==="open",isHovered:i,color:s})})})})})}function Ce({color:s}){return e.jsx("div",{className:"flex h-6 w-6 shrink-0 items-center justify-center text-token-text-primary",children:e.jsx(Ue,{className:"h-3/4 w-3/4",style:{color:s}})})}function U({gizmo:s,historyDisabled:n,section:t,onClick:r,isActive:a,hideOverflowMenu:i=!1,elementRef:d}){const{clientThreadId:l}=H(),m=te(l),o=z(),[c,g]=u.useState(!1),[f,h]=u.useState(!1),v=s.gizmo.id,p=V.useStore(),x=V.useState(O=>V.selectFolderState(O,v)),I=R(),S=!!s.gizmo.tags?.includes(We.FirstParty),b=de(),k=ue(),{items:L=[],hasNextPage:M}=Ve(s.gizmo.id),E=Ke(v),Z=Qe(s);let W=!1;a&&E&&!(x==="open"&&m)&&(W=!0),u.useEffect(()=>{x!=="open"&&a&&m&&p.expandProject(v)},[a,m,p,v]);let w;if(s!=null)w=s.gizmo.display.name||Xe;else{if(I==null)return null;n?w=o.formatMessage(G.clearChat):w=he}const $=b!=null&&b.kind==="conversation"&&(b.gizmoId==null||b.gizmoId!=v);return e.jsxs(e.Fragment,{children:[e.jsx(B.div,{onMouseEnter:()=>{h(!0)},onMouseLeave:()=>{h(!1)},onDrop:O=>{O.preventDefault(),$&&(k({newGizmoId:v,conversation:b.conversation,previousGizmoId:b.gizmoId??null}),h(!1))},onDragOver:O=>{O.preventDefault(),$&&h(!0)},onDragLeave:()=>{h(!1)},children:e.jsx(me,{loggingGizmoId:s?.gizmo.id??"primary",href:le(s),onClick:r,showActiveIndicator:W,isHovered:f,icon:E&&L.length>0?e.jsx(Ws,{color:Z,folderState:x,gizmoId:v,sidebarSnorlaxFolderStore:p}):E?e.jsx(Ce,{color:Z}):e.jsx(fe,{isFirstParty:S,src:s?.gizmo.display.profile_picture_url,className:"h-6 w-6 shrink-0"}),isMenuOpen:c,label:w,rightIcon:t===F.Workspace&&e.jsx(_,{side:"right",label:o.formatMessage(q.workspaceRecommended,{workspace_name:I?.name??"Your Workspace"}),children:e.jsx(Ze,{className:"icon-md text-token-text-secondary",alt:o.formatMessage(q.workspaceRecommended,{workspace_name:I?.name??"Your Workspace"})})}),hoverRightIcon:e.jsxs("div",{className:"flex gap-2",children:[(f||c)&&!i&&(E?e.jsx("div",{className:"text-token-text-tertiary",onClick:O=>{O.preventDefault()},children:e.jsx($e,{gizmo:s,isOpen:c,setIsOpen:g})}):e.jsx("div",{className:"text-token-text-tertiary",onClick:O=>{O.preventDefault()},children:e.jsx(qe,{gizmo:s,isOpen:c,setIsOpen:g,section:t})})),!E&&!i&&e.jsx(_,{side:"right",label:o.formatMessage(n?G.clearChat:G.newChat),className:"flex items-center",children:e.jsx("button",{className:c?"text-token-text-tertiary":"invisible text-token-text-secondary hover:text-token-text-primary group-hover:visible",children:n?e.jsx(Ye,{className:"icon-md"}):e.jsx(Je,{className:"icon-md"})})})]}),elementRef:d})}),e.jsx(ke,{initial:!1,children:E&&x==="open"&&L.length>0&&e.jsx(B.div,{initial:"closed",animate:"open",exit:"closed",variants:Us,className:"overflow-hidden",children:e.jsx(Bs,{gizmoResource:s,serverThreadId:m,isOnProjectPage:W,conversations:L,hasNextPage:M})},"nested-conversations")})]})}const q=ne({workspaceRecommended:{id:"gizmo.workspaceRecommended",defaultMessage:"Recommended at {workspace_name}"}});function Vs({currentGizmoId:s,onClick:n}){const{isSidebarFlyoutOpen:t,onSidebarFlyoutOpenChange:r}=xe(),a=t(y.Snorlax);return e.jsx("div",{className:"group flex w-full items-center justify-start",children:e.jsx(Le,{onOpenChange:i=>r(y.Snorlax,i),side:"right",sideOffset:4,open:a,contentAlign:"end",triggerButton:e.jsxs("button",{className:C("flex flex-1 select-none items-center gap-2.5 rounded-lg px-2 py-1.5 text-sm tracking-condensed text-token-text-secondary ease-[var(--spring-bounce)] hover:bg-token-sidebar-surface-secondary focus:ring-0 screen-arch:py-[7px] screen-arch:text-body screen-arch:can-hover:hover:bg-token-main-surface-secondary motion-safe:active:scale-[98%] motion-safe:active:transition-transform",a&&"bg-token-main-surface-secondary"),onClick:n,children:[e.jsx("div",{className:"h-6 w-6",children:e.jsx("div",{className:"relative flex h-full items-center justify-center text-token-text-primary",children:e.jsx(Se,{className:"icon-md font-semibold text-token-sidebar-icon"})})}),e.jsx("span",{className:"text-left",children:e.jsx(T,{...A.seeMoreProjectItems})})]}),size:"auto",children:e.jsx("div",{className:"max-h-[50dvh] w-80 overflow-x-auto px-2 [scrollbar-gutter:stable]",children:e.jsx(Me,{children:e.jsx(es,{currentGizmoId:s,inSidebarFlyout:!0,customListItem:U})})})})})}function Ks({snorlaxes:s,currentGizmoId:n}){return e.jsx(e.Fragment,{children:s.map(t=>e.jsx(U,{gizmo:t.gizmo,isActive:t.gizmo.gizmo.id===n},t.gizmo.gizmo.id))})}function Ne({currentGizmoId:s,includeRevisedSidebarIa:n}){const t=z(),{snorlaxes:r,data:a,isLoading:i,isError:d,refetch:l,hasNextPage:m}=ss(),o=r.slice(0,K),c=u.useRef(!1),[g,f]=u.useState(!0),h=u.useCallback(function(E){E&&f(!1),l()},[l,f]),v=(r??[]).length===0,p=d||a===void 0&&!i&&c.current,I=ae()&&!p&&(a===void 0||i);j.markStart("SnorlaxSidebarList",j.NS_SIDEBAR),I||j.markRendered("SnorlaxSidebarList",j.NS_SIDEBAR),a===void 0&&!i&&!c.current&&(c.current=!0,h(!1));const b=r?.find(M=>M.gizmo.gizmo.id===s),k=o.some(M=>M.gizmo.gizmo.id===s),L=r&&(r?.length>(!s||k?K:K+1)||m);return e.jsxs(e.Fragment,{children:[p&&e.jsx(ts,{showRetry:g,refetch:h}),!p&&e.jsx(Q,{id:"snorlax-heading",condensed:n,footer:I&&e.jsx(re,{className:"ml-2 self-center"}),header:e.jsxs(e.Fragment,{children:[t.formatMessage(A.projectsHeading),!v&&e.jsx(ns,{})]}),isLastInGroup:!0,ulClassName:"screen-arch:mb-3",children:!i&&e.jsxs(e.Fragment,{children:[e.jsx(Ks,{snorlaxes:o,currentGizmoId:s}),b&&!k&&e.jsx(U,{gizmo:b.gizmo,isActive:!0}),L&&e.jsx(Vs,{currentGizmoId:s}),!i&&v&&e.jsx(as,{})]})})]})}const vt=Object.freeze(Object.defineProperty({__proto__:null,SnorlaxSidebarList:Ne},Symbol.toStringTag,{value:"Module"}));function Qs({isNewConversation:s}){const n=rs(),{value:t,isLoading:r}=Te("2113934735");return j.markStart("OperatorSidebarListItem",j.NS_SIDEBAR),!r&&!t?j.cancelRender("OperatorSidebarListItem",j.NS_SIDEBAR):t&&j.markRendered("OperatorSidebarListItem",j.NS_SIDEBAR),e.jsxs(e.Fragment,{children:[e.jsx(Xs,{isNewConversation:s}),t?e.jsx(is,{}):null,n?e.jsx(os,{}):null]})}const Xs=({isNewConversation:s})=>{const[n,t]=u.useState(!1),r=ae(),a=Oe(),i=Ee(),d=z(),l=R();let m;return l==null?null:(m=he,e.jsx("div",{className:C(r?"":"bg-token-sidebar-surface-primary","pt-0"),children:e.jsx(_,{side:"right",label:d.formatMessage(G.newChat),className:"flex w-full items-center",children:e.jsx(B.div,{className:"flex-1",whileTap:{scale:.98},onMouseEnter:()=>{t(!0)},onMouseLeave:()=>{t(!1)},children:e.jsx(me,{loggingGizmoId:"primary",href:"/",isHovered:n,onClick:o=>{ze(Fe(a))&&!s&&(o.preventDefault(),cs(i))},icon:e.jsx(fe,{isFirstParty:!0,className:"h-6 w-6"}),isMenuOpen:!1,label:m,hoverRightIcon:null})})})}))};function Zs(){const s=z(),n=ge(),t=s.formatMessage({id:"gizmo.exploreStoreEnabled",defaultMessage:"Explore GPTs"});return e.jsx(ls,{children:e.jsx(B.div,{whileTap:{scale:.98},children:e.jsx(Y,{to:ds(),onClick:()=>{n.activeSidebar==="popover-nav"&&pe.setActiveSidebar(!1)},children:e.jsx(us,{icon:ms,"data-testid":"explore-gpts-button",children:t})},"explore")})})}const $s=2;function qs({gizmos:s,maxToShowOnLoad:n=4,showAllSidebarItems:t}){const r=Ss(s,f=>f.flair.kind),a=[...(r[D.Workspace]?.map(({resource:f})=>({gizmo:f,section:F.Workspace}))??[]).slice(0,3),...r[D.FirstParty]?.map(({resource:f})=>({gizmo:f,section:F.Keep}))??[],...r[D.SidebarKeep]?.map(({resource:f})=>({gizmo:f,section:F.Keep}))??[]],i=r[D.Recent]??[],l=(t?i:i.slice(0,$s)).map(({resource:f})=>({gizmo:f,section:F.Recents})),m=a.length;let o=[];o=[...a,...l],t||(o.length>n&&m>n?o=o.slice(0,m):o.length>n&&(o=o.slice(0,n)));const g=s.length>o.length;return{listItems:o,itemsLeft:s.length-o.length,needsToCollapseItems:g,total:s.length}}function Ys({gizmo:s,currentGizmoId:n,maxToShowOnLoad:t,hideOverflowMenu:r=!1}){const a=ge(o=>!fs.isGptListCollapsed(o)),{listItems:i,needsToCollapseItems:d,itemsLeft:l}=qs({gizmos:s,maxToShowOnLoad:t,showAllSidebarItems:a});function m(o,c){return e.jsx(U,{gizmo:o,isActive:o.gizmo.id===n,section:c,hideOverflowMenu:r},o.gizmo.id)}return e.jsxs("div",{children:[i.map(({gizmo:o,section:c},g)=>e.jsxs(u.Fragment,{children:[g>1&&c!==i[g-1].section&&e.jsx("div",{className:"my-2 ml-2 h-px w-7 bg-token-border-light"}),m(o,c)]},g)),d?e.jsxs("button",{onClick:pe.toggleGptListCollapsed,className:"flex h-10 w-full items-center gap-2 rounded-lg px-2 text-sm text-token-text-primary hover:bg-token-sidebar-surface-secondary",children:[e.jsx("div",{className:"flex h-6 w-6 flex-shrink-0 items-center justify-center",children:e.jsx(Se,{className:"icon-md text-token-text-primary"})}),e.jsx("div",{className:"flex grow items-center gap-1",children:a?e.jsxs(e.Fragment,{children:[e.jsx(T,{id:"GizmoSidebarList.showLess",defaultMessage:"See less"}),e.jsx(hs,{className:"icon-xs"})]}):e.jsxs(e.Fragment,{children:[e.jsx(T,{id:"GizmoSidebarList.showMoreItems",defaultMessage:"{numMore} more",values:{numMore:l}}),e.jsx(xs,{className:"icon-xs"})]})})]}):null,e.jsx(Zs,{})]})}function jt(s){const{className:n}=s,{useStore:t,actions:r}=X(),{focusedObject:a}=H(),d=!gs()&&!!a,l=t(h=>h.isSidebarOpen)&&!d,m=t(h=>h.mode),o=_e(),c=ie(),g=Ae(),f=ps();return u.useEffect(()=>{c?r.closeSidebar():r.setSidebarMode(be.Pinned)},[c,r]),e.jsx(bs,{...s,isSidebarOpen:l,isExtendedInfoOpen:g,isCanvasOpen:f,sidebarMode:m,className:C(n,o?"screen-loaded":"")})}function Js(s){const{clientThreadId:n}=H(),t=u.useRef(s);t.current=s;const r=u.useRef(null);u.useEffect(()=>{const a=r.current;return r.current=n,()=>{n!==a&&t.current?.(n,a)}},[n])}function et({currentGizmoId:s}){const{data:{gizmos:n}={}}=vs();let t=n;return ve()&&(t=n?.filter(a=>!js(a.resource))),e.jsx(e.Fragment,{children:e.jsxs(Q,{id:"gizmos-heading",header:e.jsx("div",{className:"sticky top-[--sidebar-sticky-threshold] z-20",children:e.jsx(T,{id:"ZT2HVu",defaultMessage:"GPTs"})}),hideHeader:!0,isLastInGroup:!1,children:[e.jsx(Qs,{isNewConversation:!0}),e.jsx(Ys,{gizmo:t??[],currentGizmoId:s,maxToShowOnLoad:Is})]})})}const st=5;function tt({clientThreadId:s}){const n=ue(),t=de(),[r,a]=u.useState(!1),i=u.useRef(!1),{conversations:d,data:l,isLoading:m,isError:o,refetch:c}=je({recentConversationLimit:st}),[g,f]=u.useState(!0),h=u.useCallback(function(b){b===void 0&&f(!1),c({cancelRefetch:!0})},[c,f]),v=o||l===void 0&&!m&&i.current;l===void 0&&!m&&!i.current&&(i.current=!0,h(!0)),u.useMemo(()=>{Re.publish({kind:"refreshHistory",conversations:d})},[d]);const x=t!=null&&t.kind==="conversation"&&t.gizmoId!=null&&ys(t.gizmoId),I=u.useRef(0);return e.jsxs("div",{onDragOver:S=>{S.preventDefault(),x&&a(!0)},onDrop:S=>{S.preventDefault(),x&&(I.current=0,a(!1),n({newGizmoId:null,conversation:t.conversation,previousGizmoId:t.gizmoId??null}))},onDragEnter:S=>{S.preventDefault(),x&&(I.current+=1)},onDragLeave:S=>{S.preventDefault(),x&&(I.current-=1,I.current===0&&a(!1))},className:C(r&&"opacity-50"),children:[v&&e.jsx(Cs,{showRetry:g,refetch:h}),e.jsx(nt,{clientThreadId:s})]})}function nt({clientThreadId:s}){const n=R(),t=we("1358188185").layer.get("local-cache",!1),{conversations:r,buckets:a,isLoading:i,hasNextPage:d,fetchNextPage:l,isFetchingNextPage:m}=je({buckets:!0,recentConversationLimit:1}),o=i||m,c=r.length===0,g=Pe(),f=te(s),h=J().activeServerThreadIds,v=g?void 0:f,p=u.useRef(null),x=u.useCallback(S=>{i||S==null||(p.current?.disconnect(),p.current=new IntersectionObserver(b=>{b[0].isIntersecting&&d&&l()},{rootMargin:"0px 0px 350px 0px",threshold:.1}),p.current.observe(S))},[i,d,l]);u.useEffect(()=>()=>{p.current?.disconnect()},[]);const I=e.jsx(re,{className:"mt-2 self-center justify-self-center will-change-transform"});return j.markStart("ChatHistory"),o||j.markRendered("ChatHistory"),c?n==null&&t?null:e.jsx("div",{className:"flex justify-center",children:I}):e.jsxs(e.Fragment,{children:[a.map((S,b)=>e.jsx(Q,{id:`section-${S.key}`,footer:o&&b===a.length-1&&I,header:S.label,condensed:!0,children:S.items.map((k,L)=>e.jsx(ye,{item:k,isActiveInMainWindow:k.id===v,isActive:h.has(k.id),testId:`history-item-${L}`},k.id))},S.key)),!c&&d&&!m&&e.jsx("div",{className:"h-1","data-testid":"infinite-scroll-trigger",ref:x})]})}function at({clientThreadId:s}){R();const n=De(s),{isUnauthenticated:t}=oe(),r=ve(),a=!1;if(t)return null;const i=r&&e.jsx(Ne,{includeRevisedSidebarIa:!0,currentGizmoId:n}),d=a,l=e.jsx(tt,{clientThreadId:s}),m=e.jsx(et,{currentGizmoId:n});return e.jsxs("div",{className:C(N.screenContent,"group/sidebar"),children:[m,i,d,null,l]})}function rt(){const s=R(),n=s?.data==null,{isUnauthenticated:t}=oe(),{openSettings:r}=Ns(),[a]=u.useState(()=>{const l=Ge.getCookie(Be.Workspace);return typeof l=="string"&&l!==He}),[i,d]=u.useState(!0);return u.useEffect(()=>{d(!1)},[]),!s&&i||a&&n?null:t?e.jsx(ws,{}):e.jsx(Rs,{onClickSettings:()=>r()})}function it(){return e.jsx(ks,{className:C(N.screenTrailingBarContainer),children:e.jsxs(Ie,{name:"sidebar-footer-bar",className:"relative z-10 mb-[0.5px] grid-cols-[minmax(0,_1fr)] px-sidebar-inline pb-1.5 pt-2.5",type:"secondary",disableSizeTracking:!0,trailing:!0,style:{"--bar-gap":"6px"},children:[e.jsx(Os,{}),e.jsx(Ps,{}),e.jsx(rt,{})]})})}function ot(){return(Ds()?"⌘":"Ctrl")+" K"}function ct({children:s,sideOffset:n,className:t}){return j.markStart("FannyPackSearchTooltip",j.NS_SIDEBAR),j.markRendered("FannyPackSearchTooltip",j.NS_SIDEBAR),e.jsx(_,{sideOffset:n,className:t,label:e.jsxs("div",{children:[e.jsx(T,{id:"jmd8WH",defaultMessage:"Search chats"}),e.jsx("div",{className:"text-sm font-normal text-token-text-secondary",children:ot()})]}),children:s})}const lt=ee(()=>se(()=>import("./gian1eu8l0rhyife.js"),__vite__mapDeps([5,1,6,2,3,7,8,9,10,11,12,13,14,15,16,17,18,19])).then(s=>s.FannyPackIconButton));function dt({onNewThread:s}){const n=z(),t=u.useRef(null),r=ie(),{useStore:a,actions:i}=X(),d=a(p=>p.isSidebarOpen),{isSidebarFlyoutOpen:l}=xe(),m=l(y.Conversation),o=l(y.Gizmo),c=l(y.Snorlax),g=d&&!m&&!o&&!c,f=ce();function h(){f&&i.closeSidebar()}Es({checkElement:p=>p?.tagName==="NAV",enabled:g,onLightDismiss:h});const{isFannyPackEnabled:v}=Ls();return e.jsxs(e.Fragment,{children:[e.jsx(Ie,{type:"primary",className:C(N.screenHeader),name:"sidebar-header",children:e.jsxs("div",{className:"flex min-h-[var(--screen-thread-header-min-height,60px)] w-full flex-1 items-center justify-between px-[var(--sidebar-inline-padding)]",ref:t,children:[e.jsx("div",{className:"grid items-center gap-1",children:e.jsx(Ms,{className:C(N.closeSidebarAction),style:{viewTransitionName:"var(--vt_toggle_sidebar_opened)"},onClick:()=>{i.closeSidebar()},onEnterPress:()=>{i.closeSidebar()},icon:e.jsxs(e.Fragment,{children:[e.jsx(Ts,{className:C(N.sidebarIcon,"hidden @lg/screen-composer:inline-flex")}),e.jsx(zs,{className:C(N.sidebarIcon,"@xs/screen-composer:inline-flex @lg/screen-composer:hidden")})]}),label:n.formatMessage(ut.closeSidebar),tooltipSideOffset:4})}),e.jsxs("div",{className:"flex items-center",children:[v&&e.jsx(ct,{children:e.jsx(lt,{className:N.searchAction,icon:e.jsx(Fs,{className:N.sidebarIcon}),style:{viewTransitionName:"var(--vt_search_sidebar)"}})}),!r&&e.jsx(Gs,{location:"sidebar",onNewThread:s})]})]})}),e.jsx("div",{className:C(N.leadingBar,N.leadingBarScrollAnimation,"pointer-events-none absolute inset-0 h-full"),children:" "})]})}const ut=ne({closeSidebar:{id:"fM0vj3",defaultMessage:"Close Sidebar"}});function It(){const{clientThreadId:s,onNewThread:n}=H(),[t,r]=u.useState(!1),[a,i]=u.useState(!1),[d,l]=u.useState(!1),{actions:m,useStore:o}=X(),c=o(x=>x.isSidebarOpen),g=o(x=>x.mode),f=u.useCallback(x=>x===y.Conversation?t:x===y.Gizmo?a:x===y.Snorlax?d:!1,[t,a,d]),h=u.useCallback((x,I)=>{const S=b=>{x===y.Conversation?r(b):x===y.Gizmo?i(b):x===y.Snorlax&&l(b)};I?S(!0):setTimeout(()=>{S(!1)},100)},[]),v=u.useRef(null),p=ce();return Js(()=>{h(y.Conversation,!1),h(y.Gizmo,!1),h(y.Snorlax,!1),c&&(g===be.Floating||p)&&setTimeout(()=>{m.closeSidebar()},100)}),c&&j.trackNamespace(j.NS_SIDEBAR),e.jsx(_s,{value:{isSidebarFlyoutOpen:f,onSidebarFlyoutOpenChange:h},children:e.jsx(As,{anchor:"vertical",className:C(N.screen,"popover sidebar flex-1 border-r border-r-token-border-xlight"),name:"sidebar",leading:e.jsx(dt,{onNewThread:n}),ref:v,trackLeading:!0,trailing:e.jsx(it,{}),children:e.jsx(at,{clientThreadId:s})})})}export{jt as C,Qs as D,ct as F,Ys as G,Ne as S,It as a,vt as b,ot as g};
//# sourceMappingURL=e61g0qvb4nak98bl.js.map
