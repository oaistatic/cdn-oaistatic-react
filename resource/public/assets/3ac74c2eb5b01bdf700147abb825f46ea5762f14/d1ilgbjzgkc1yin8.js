import{r as l,c as j,j as e,au as k,aw as W,u as se,M as S}from"./cg166fqqcxkeiosv.js";import{Q as ne,dl as Q,S as y,P as b,a as _,b7 as oe,bT as M,fM as ae,C as ie,eY as re,ai as le,fN as ce,dj as de,aj as ue,Y as pe,q as ge,h as me,N as Y,r as fe}from"./dze2l9y9kn6nwat0.js";import{a as he}from"./jky4nhpbj4n3xuh7.js";import{u as xe}from"./h83rc28v2vsm5nda.js";import{cc as ye,cd as z,v as be,ce as G,cf as _e,a7 as we,cg as Se,ch as Me,ci as B,cj as ve,ck as ke,K as je,bD as Ee,cl as Ne,cm as Ce,cn as Te}from"./j4xe1fdohr6xk09p.js";import{a as Pe}from"./m4iicmyh3x1nme4j.js";import{C as Ue}from"./ej4nvw4ncvf14xr7.js";import{u as Ie}from"./gzm2pyuieq14d2cd.js";import"./b6ddr1xo1x0u3g1f.js";import"./nf2duydhbwllwb1z.js";import"./765apt28hvug1izo.js";import"./f55klt1ppf2qkvcm.js";import"./cfvh96gbcjdpth1v.js";import"./kxggiygl9l9wvt1i.js";import"./m5vf38e63o5zwpil.js";import"./knox9y5o8wayzcvt.js";import"./on5pusyq8qp7ddxm.js";function De(t,a){const{data:n,isLoading:r,isSuccess:d,isError:g}=se({queryKey:["onboardingSteps",t,a],queryFn:()=>Y.createOnboardingSteps(void 0,t,a)});return{steps:n?.steps??[],isLoading:r,isSuccess:d,isError:g}}function E({children:t,className:a}){return e.jsx(k.div,{className:a,initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{duration:.25},exit:{opacity:0,y:-10},children:t})}function Fe({isFirstStep:t,userName:a}){return e.jsx(E,{children:e.jsx("h1",{className:"mb-2 text-3xl font-medium leading-9 text-token-text-primary",children:e.jsx(S,{...t?i.preparingOnboardingExperience:i.allSetLetMeShowYouAroundWithoutName,values:{name:a,nextLine:n=>e.jsx("span",{className:"block",children:n})}})})})}function qe({setIsInWelcomePage:t}){const a=z();return l.useEffect(()=>{a&&setTimeout(()=>{t(!1)},2500)},[a,t]),a?e.jsx(E,{children:e.jsx("h1",{className:"mb-2 text-3xl font-medium leading-9 text-token-text-primary",children:e.jsx(S,{...i.imChaggptNiceToMeetYou})})}):null}function Le(t){const a=G(),n=j(),r=ie(),d=_e(t);let g=we(t);const p=Se(d,g),s=Me(d,g);return l.useCallback(async m=>{const o="text/plain",h=new Blob([m],{type:o}),x=new File([h],"My_File.txt",{type:o});return B.uploadFile(a,ve(x),x,ke.Retrieval,s,n,r,void 0,p?.attachments)},[a,n,r,s,p?.attachments])}function at({clientThreadId:t,setClientThreadId:a}){const[n,r]=l.useState(!0),{isOpen:d,setIsOpen:g,markAsViewed:p}=ye(),[s,m]=l.useState(0),[o,h]=l.useState(new Set(["usage_question"])),[x,v]=l.useState([]),[P,K]=l.useState(),[U,I]=l.useState(!1),{steps:f,isLoading:N,isError:C}=De(U?x:[],U?P:void 0),$=z(),D=Re({clientThreadId:t}),F=Le(t),{createNewThread:q}=be({clientThreadId:t,setClientThreadId:a}),L=ne(t,fe.hasUserMessage),{layer:V}=Q("109457"),J=V.get("keep_onboarding_after_dismiss",!1),O=j();l.useEffect(()=>{d&&(y.logEvent("chatgpt_onboarding_flow_shown"),b.logEvent(_.onboardingShown))},[d]),l.useEffect(()=>{C&&(p(),y.logEvent("chatgpt_onboarding_flow_error"),b.logEvent(_.onboardingError))},[C,p]),l.useEffect(()=>{if(!(N||!f[s])&&!o.has(f[s].step_type)){h(w=>new Set([...w,f[s].step_type]));const u=f[s].step_prompt;u&&(D({stepPrompt:u}),f[s].step_type==="file_upload"&&f[s].additional_info&&F(f[s].additional_info))}},[s,N,o,D,f,F]);const c=f[s];if(l.useEffect(()=>{const u=c?.step_type;(u==="usage_question"||u==="self_description")&&L&&(q(),h(w=>new Set(Array.from(w).filter(A=>A==="usage_question"||A==="self_description"))))},[c?.step_type,q,L]),l.useEffect(()=>{c?.step_type&&(y.logEvent("chatgpt_onboarding_step_shown",null,{step_type:c?.step_type,step_index:s.toString()}),b.logEvent(_.onboardingStepShown,{step_type:c?.step_type,step_index:s.toString()}))},[s,c?.step_type]),C)return null;const T=u=>{g(!1),s===f.length-1?(y.logEvent("chatgpt_onboarding_flow_finished"),b.logEvent(_.onboardingFinished)):(y.logEvent("chatgpt_onboarding_flow_dismissed",null,{step_type:c?.step_type,step_index:s.toString()}),b.logEvent(_.onboardingDismissed,{step_type:c?.step_type,step_index:s.toString()})),u&&!J&&p()},X=u=>{v(u),f.find(w=>w.step_type==="self_description")||I(!0),m(w=>w+1),y.logEvent("chatgpt_onboarding_usage_question_selected",null,{main_usages:u.join(", ")}),b.logEvent(_.onboardingUsageQuestionSelected,{main_usages:u.join(", ")})},Z=u=>{K(u),I(!0),m(w=>w+1),y.logEvent("chatgpt_onboarding_self_description_entered",null,{main_usages:x.join(", ")}),b.logEvent(_.onboardingSelfDescriptionEntered,{main_usages:x.join(", ")})},ee=()=>{y.logEvent("chatgpt_onboarding_usage_question_skipped",null,{step_type:c?.step_type,step_index:s.toString()}),b.logEvent(_.onboardingUsageQuestionSkipped,{step_type:c?.step_type,step_index:s.toString()}),m(u=>u+1)},te=()=>{y.logEvent("chatgpt_onboarding_go_back",null,{step_type:c?.step_type,step_index:s.toString()}),b.logEvent(_.onboardingGoBack,{step_type:c?.step_type,step_index:s.toString()}),m(u=>u-1)};return e.jsx(oe,{isOpen:d,onClose:()=>T(!1),type:"success",size:"fullscreen",noPadding:!0,className:"w-full",children:e.jsx(Pe,{clientThreadId:t,children:e.jsxs("div",{className:"flex h-full max-h-full flex-col bg-token-main-surface-primary",children:[e.jsxs("div",{className:"absolute left-0 top-0 z-10 flex w-full items-center justify-between bg-none px-4",style:{minHeight:"var(--screen-thread-header-min-height,60px)"},children:[f&&f.length>0&&e.jsx("div",{className:"absolute left-0 top-0 h-2 w-full",children:e.jsx(k.div,{className:"h-1.5 bg-token-main-surface-primary-inverse",initial:{width:"0%",opacity:0},animate:{width:`${(s+1)/f.length*100}%`,opacity:1},transition:{duration:.3}})}),s>0?e.jsx(M,{onClick:te,color:"ghost",className:"border-none",icon:ae}):e.jsx("div",{}),c?.step_type==="usage_question"||c?.step_type==="self_description"?e.jsx(M,{onClick:ee,color:"ghost",className:"border-none",children:O.formatMessage(i.skip)}):e.jsx(M,{onClick:()=>T(!0),color:"ghost",className:"border-none",children:O.formatMessage(i.close)})]}),e.jsx("div",{className:"flex flex-1 flex-col items-center justify-center overflow-hidden",children:e.jsx(W,{mode:"wait",children:n?e.jsx(qe,{setIsInWelcomePage:r},"welcome"):N?e.jsx(Fe,{isFirstStep:s<1,userName:$?.name},"loading"):c?.step_type==="usage_question"?e.jsx(Oe,{mainUsagesProp:x,onSelectMainUsages:X},"usage-question"):c?.step_type==="self_description"?e.jsx(Ae,{mainUsages:x,selfDescriptionProp:P,onEnterSelfDescription:Z},"self-description"):["dalle","file_upload","canvas","voice","ask_any_question"].includes(c?.step_type)?e.jsx(He,{step:c,gotoStep:m,stepIndex:s,totalSteps:f.length,endOnboarding:T,clientThreadId:t},"tools-onboarding"):null})})]})})})}function Oe({mainUsagesProp:t,onSelectMainUsages:a}){const[n,r]=l.useState(new Set(t)),[d,g]=l.useState(void 0),p=j(),s=()=>{const o=new Set(n);o.has("other")&&d&&(o.add(d),o.delete("other")),a(Array.from(o))},m=["school","work","personalTasks","funAndEntertainment","other"];return e.jsxs(E,{children:[e.jsxs("div",{children:[e.jsx("h1",{className:"mb-2 text-3xl font-medium leading-9 text-token-text-primary",children:e.jsx(S,{...i.tellMeWhyHere})}),e.jsx("p",{className:"mb-6 text-base text-token-text-secondary",children:e.jsx(S,{...i.suggestUsefulIdeas})})]}),e.jsxs("div",{className:"flex flex-col items-start justify-start gap-7 pl-2.5",children:[m.map(o=>e.jsx(je,{id:`main-usage-${o}`,checked:n.has(o),onChange:h=>r(x=>{const v=new Set(x);return h.target.checked?v.add(o):v.delete(o),v}),label:e.jsx("span",{className:"cursor-pointer",children:p.formatMessage(i[o])}),className:"!rounded-full"},o)),n.has("other")&&e.jsx(Ee,{ariaLabel:p.formatMessage(i.tellMeWhyHere),name:"other",placeholder:p.formatMessage(i.tellMeWhyHere),onChange:o=>g(o.target.value),maxLength:100,className:"ml-6 min-w-64 bg-token-main-surface-primary"})]}),e.jsx(M,{size:"medium",color:"primary",onClick:s,className:"mt-10",disabled:n.size===0,children:e.jsx(S,{...i.next})})]})}function Ae({mainUsages:t,selfDescriptionProp:a,onEnterSelfDescription:n}){const[r,d]=l.useState(a),g=j(),p=l.useMemo(()=>t.includes("school")?i.exampleSchoolSelfDescription:t.includes("work")?i.exampleWorkSelfDescription:t.includes("funAndEntertainment")?i.exampleFunAndEntertainmentSelfDescription:i.examplePersonalTasksSelfDescription,[t]),{layer:s}=Q("109457"),m=s.get("write_custom_instructions_in_onboarding",!1),o=async()=>{n(r),m&&r&&Y.createOrUpdateUserSystemMessage({aboutUserMessage:r,aboutModelMessage:"",disabledTools:[],enabled:!0}).catch(()=>{})};return e.jsxs(E,{className:"flex w-[640px] flex-col items-start",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"mb-4 text-3xl font-medium leading-9 text-token-text-primary",children:e.jsx(S,{...i.anythingElseYouWantMeToKnow})}),e.jsx("p",{className:"text-base text-token-text-secondary",children:e.jsx(S,{...m?i.selfDescriptionReasonSaveToCustomInstructions:i.selfDescriptionReason,values:{customInstructions:h=>e.jsx("a",{href:Ne,className:"underline",target:"_blank",rel:"noreferrer",children:h})}})})]}),e.jsx(Ce,{className:"!dark:bg-white/5 mt-10 rounded border border-token-border-light !bg-black/5 p-5 !text-base placeholder-token-text-tertiary",placeholder:g.formatMessage(p),rows:4,value:r,onChange:h=>d(h.target.value),autoFocus:!0}),e.jsx(M,{size:"medium",color:"primary",onClick:o,className:"mt-10",children:e.jsx(S,{...i.next})})]})}function He({step:t,gotoStep:a,stepIndex:n,totalSteps:r,endOnboarding:d,clientThreadId:g}){const p=re({clientThreadId:g}),s=G(),m=j(),o=l.useRef(null),h=n===r-1,x=()=>{n<r-1?(y.logEvent("chatgpt_onboarding_flow_next_clicked",null,{source_step_type:t?.step_type,source_step_index:n.toString()}),b.logEvent(_.onboardingNextClicked,{source_step_type:t?.step_type,source_step_index:n.toString()}),t?.step_type==="file_upload"&&B.reset(s),a(n+1)):d(!0),o.current&&o.current.scrollTo({top:o.current.scrollHeight,behavior:"smooth"})};return e.jsxs(E,{className:"flex h-full w-full flex-row px-8 md:px-12 lg:px-16 xl:px-24",children:[e.jsx("div",{className:"flex flex-1 flex-col items-center justify-center",children:e.jsxs(k.div,{className:"flex w-[90%] flex-1 flex-col items-start justify-center gap-2 md:w-[85%] lg:w-[80%]",initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{duration:.5},children:[e.jsxs(W,{mode:"wait",children:[e.jsx(k.h1,{className:"mb-2 text-3xl font-medium text-token-text-primary",initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{duration:.5},exit:{opacity:0,y:-10},children:t.title?t.title:H[t.step_type]?m.formatMessage(H[t.step_type]):null},`title-${n}`),e.jsx(k.p,{className:"mb-6 text-base text-token-text-secondary",initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{duration:.5},exit:{opacity:0,y:-10},children:t.subtitle?t.subtitle:R[t.step_type]?m.formatMessage(R[t.step_type]):null},`subtitle-${n}`)]}),e.jsx(M,{size:"large",color:"primary",onClick:x,disabled:p&&!h,children:e.jsx(S,{...h?i.tryChatGPT:i.next})})]})}),e.jsx("div",{className:"relative flex h-full min-w-[360px] flex-1 flex-col pb-16 pt-16",children:e.jsx("div",{className:"h-full w-full overflow-auto rounded-[30px] bg-token-main-surface-primary shadow-[0_0_50px] shadow-token-border-light",children:e.jsx(Ue,{hideHeader:!0,hideTools:!0,embedded:!0,ref:o})})})]})}const Re=({clientThreadId:t})=>{const a=xe({clientThreadId:t}),{value:n}=le("1988730211"),r=Ie();return l.useCallback(({stepPrompt:d})=>{const g=Array.from(r),{systemHints:p,extraStreamParams:s}=n?Te(g):{systemHints:g,extraStreamParams:{}};he(t),a({promptMessage:ce(d,void 0,{real_author:de.Onboarding}),extraStreamParams:s,completionMetadata:{conversationMode:ue(pe(ge(t)?.mode)),isOnboardingConversation:!0,systemHints:p}})},[t,r,n,a])},i=me({skip:{defaultMessage:"Skip",id:"chatgpt.new-onboarding.skip"},close:{defaultMessage:"Close",id:"chatgpt.new-onboarding.close"},submit:{defaultMessage:"Submit",id:"chatgpt.new-onboarding.submit"},next:{defaultMessage:"Next",id:"chatgpt.new-onboarding.next"},finish:{defaultMessage:"Finish",id:"chatgpt.new-onboarding.finish"},tellMeWhyHere:{defaultMessage:"Tell me about why you’re here.",id:"chatgpt.new-onboarding.tell-me-why-here"},suggestUsefulIdeas:{defaultMessage:"I’ll use this information to suggest ideas you might find useful.",id:"chatgpt.new-onboarding.suggest-useful-ideas"},school:{defaultMessage:"School",id:"chatgpt.new-onboarding.school"},work:{defaultMessage:"Work",id:"chatgpt.new-onboarding.work"},personalTasks:{defaultMessage:"Personal tasks",id:"chatgpt.new-onboarding.personal-tasks"},funAndEntertainment:{defaultMessage:"Fun and entertainment",id:"chatgpt.new-onboarding.fun-and-entertainment"},other:{defaultMessage:"Other",id:"chatgpt.new-onboarding.other"},imChaggptNiceToMeetYou:{defaultMessage:"👋 Hi, I’m ChatGPT. It’s nice to meet you!",id:"chatgpt.new-onboarding.im-chatgpt-nice-to-meet-you"},preparingOnboardingExperience:{defaultMessage:"Preparing your onboarding experience...",id:"chatgpt.new-onboarding.preparing-onboarding-experience"},oneLastQuestion:{defaultMessage:"One last question:",id:"chatgpt.new-onboarding.one-last-question-2"},anythingElseYouWantMeToKnow:{defaultMessage:"Is there anything else you’d like me to know?",id:"chatgpt.new-onboarding.anything-else-you-want-me-to-know-2"},oneQuestionAnythingElse:{defaultMessage:"One last question: Is there anything else you’d like me to know?",id:"chatgpt.new-onboarding.one-more-question"},selfDescriptionReason:{defaultMessage:"Details like your job, hobbies, or interests make my responses more relevant.",id:"chatgpt.new-onboarding.self-description-reason"},allSetLetMeShowYouAroundWithoutName:{defaultMessage:"All set!<nextLine></nextLine>Now, let me show you around...",id:"chatgpt.new-onboarding.all-set-let-me-show-you-around-without-name"},selfDescriptionReasonSaveToCustomInstructions:{defaultMessage:"Details like your job, hobbies, or interests make my responses more relevant. I’ll save this information as <customInstructions>Custom Instructions</customInstructions>, which you can update any time.",id:"chatgpt.new-onboarding.self-description-reason-save-to-custom-instructions"},exampleSchoolSelfDescription:{defaultMessage:"I'm a college student studying computer science, and I love to play the guitar.",id:"chatgpt.new-onboarding.example-school-self-description"},exampleWorkSelfDescription:{defaultMessage:"I'm a graphic designer based in Berlin, and I enjoy painting and attending art exhibitions.",id:"chatgpt.new-onboarding.example-work-self-description"},examplePersonalTasksSelfDescription:{defaultMessage:"I live in Sydney and love cooking new recipes and planning travel itineraries.",id:"chatgpt.new-onboarding.example-personal-tasks-self-description"},exampleFunAndEntertainmentSelfDescription:{defaultMessage:"I'm a music enthusiast based in Nashville, and I can talk for hours about guitar techniques and songwriting.",id:"chatgpt.new-onboarding.example-fun-and-entertainment-self-description"},tryChatGPT:{defaultMessage:"Try ChatGPT",id:"chatgpt.new-onboarding.try-chatgpt"}}),H={usage_question:i.tellMeWhyHere},R={usage_question:i.suggestUsefulIdeas};export{Fe as LoadingState,at as default};
//# sourceMappingURL=d1ilgbjzgkc1yin8.js.map
