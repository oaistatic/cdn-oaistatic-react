import{g as C,j as e,M as h,r as g,au as E}from"./cg166fqqcxkeiosv.js";import{gi as L,gj as T,q as x,bT as F,gk as b,F as A,gl as w,gm as z,cE as $,gn as P}from"./j4xe1fdohr6xk09p.js";import{y as G,bH as H,z as q,ao as V,dT as M,Q as j,d as _,c3 as O,P as v,a as y,bN as R,ep as U,eq as W}from"./dze2l9y9kn6nwat0.js";var B=H,D=G,Q=L,Y=q;function J(t,a){var s=Y(t)?B:Q;return s(t,D(a))}var K=J,X=T,Z=K;function I(t,a){return X(Z(t,a),1)}var tt=I;const et=C(tt);function ct({clientThreadId:t,turnIndex:a,messageId:s,scrollToHeader:i=x.Citations,shouldAnimateScroll:c,isInSidebar:o=!1}){const{value:r}=V("756982148"),[l,u]=st(t,s),n=M(),p=j(t,d=>R(U(d?.tree.getMessage(s)))),f={clientThreadId:t,messageId:s,turnIndex:a},S=et(p,d=>d.entries).toSorted((d,N)=>(N?.pub_date??0)-(d?.pub_date??0));return e.jsxs("div",{className:_("flex w-full flex-col bg-token-main-surface-primary",o?"mt-[calc(var(--threadFlyOut-leading-height,57px)*-1)]":"mt-0",!n||!o?"border-t border-token-border-light":""),children:[r&&u&&u.length>0&&e.jsx(m,{title:e.jsx(h,{id:"fYO0jL",defaultMessage:"Links"}),items:u,analyticsMetadata:{...f,linkType:"links"},scrollToHeader:i===x.Links,shouldAnimateScroll:c,messageId:s}),e.jsx(m,{title:e.jsx(h,{id:"dlVlo6",defaultMessage:"Citations"}),items:l,analyticsMetadata:{...f,linkType:"citation"},scrollToHeader:i===x.Citations,shouldAnimateScroll:c,messageId:s}),e.jsx(m,{title:e.jsx(h,{id:"Gz+4tE",defaultMessage:"More"}),items:S,analyticsMetadata:{...f,linkType:"search_result"},messageId:s,scrollToHeader:i===x.SearchResults,shouldAnimateScroll:c})]},`${a}-${t}`)}function m({title:t,items:a,analyticsMetadata:s,scrollToHeader:i,messageId:c,shouldAnimateScroll:o}){const r=g.useRef(null),l=M();return g.useEffect(()=>{r.current&&i&&(l?r.current.scrollIntoView({behavior:o?"smooth":"instant"}):setTimeout(()=>{r.current&&r.current.scrollIntoView({behavior:o?"smooth":"instant"})},300))},[i,o,l]),!a||a.length===0?null:e.jsxs("div",{ref:r,children:[e.jsx(k,{className:_("sticky top-0 z-[1] flex h-[calc(var(--screen-thread-header-min-height,60px)+1px)] items-center border-b border-token-border-sharp bg-token-main-surface-primary px-6 pt-4 font-medium text-token-text-primary",l?"pb-3.5 text-panel-title":"pb-4 text-sm"),children:t}),e.jsx("div",{className:"flex flex-col px-3 py-2",children:a.map((u,n)=>e.jsx(k,{index:n,children:e.jsx(at,{item:u,analyticsMetadata:{...s,groupIndex:n},messageId:c},n)},`${t}-${n}`))})]})}function k({children:t,index:a=0,className:s=""}){return e.jsx(E.div,{className:s,initial:{opacity:0},animate:{opacity:1},transition:{delay:(a+1)*.03+.2},children:t})}function at({item:t,analyticsMetadata:a,messageId:s}){const i=t.attribution??F(t.url,"short"),c=r=>"ref_id"in r&&"content_type"in r;return e.jsxs(nt,{analyticsMetadata:a,href:t.url,target:"_blank",rel:"noopener",className:"flex flex-col gap-0.5 rounded-xl px-3 py-2.5 hover:bg-token-main-surface-secondary",onMouseEnter:()=>{b.setHighlightBySource(s,t)},onMouseLeave:()=>{b.clearHighlights()},children:[e.jsxs("div",{className:"line-clamp-1 flex h-6 items-center gap-2 text-xs",children:[e.jsx(A,{url:t.url,className:"icon-sm rounded-full bg-token-main-surface-primary object-cover",size:32,minSize:20,fallback:e.jsx(w,{className:"icon-sm text-token-text-quaternary"})}),i,c(t)&&e.jsx(z,{searchResult:t,className:"inline h-4 w-4 text-token-text-tertiary"})]}),e.jsx("div",{className:"line-clamp-2 text-sm font-semibold",children:t.title}),(t.pub_date??t.snippet)&&e.jsxs("div",{className:"line-clamp-2 text-sm font-normal leading-snug text-token-text-secondary",children:[t.pub_date&&e.jsx($,{date:t.pub_date}),t.pub_date&&t.snippet&&" â€” ",t.snippet]})]})}const nt=g.forwardRef(function(a,s){const{analyticsMetadata:i,...c}=a,{groupIndex:o,linkType:r,...l}=i,u={...O(l),url:a.href,section_index:(o+1).toString(),link_type:"text",section:r,section_location:"sidebar"};return g.useEffect(()=>{v.logEventWithStatsig(y.linkAction,"link_action",{...u,action:"show"})},[]),e.jsx("a",{ref:s,...c,onClick:n=>{a.onClick?.(n),n.stopPropagation(),v.logEventWithStatsig(y.linkAction,"link_action",{...u,action:"click"})}})}),st=(t,a)=>j(t,s=>{const i=R(W(s?.tree.getMessage(a))),c=P(i);let o=[];const r=i.filter(n=>n.type==="navigation");r.length>0&&(o=r.flatMap(n=>n.domains.flatMap(p=>[{title:p.title,snippet:p.domain,url:p.url},...p.sub_domains.map(f=>({title:f.title,snippet:p.domain,url:f.url}))])));const l=i.filter(n=>n.type==="tldr").filter(n=>!n.used_as_navigation);l.length>0&&l.forEach(n=>{o.push({title:n.display_title,url:n.url})});const u=o.length>0?o:void 0;return[c,u]});export{k as AnimatedContainer,ct as SearchSources};
//# sourceMappingURL=oyddejb7gb5jhpgj.js.map
