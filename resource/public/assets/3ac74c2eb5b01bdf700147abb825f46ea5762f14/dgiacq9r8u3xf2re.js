import{f2 as A,ad as C,a5 as g,ai as R,dd as E,$ as y,a0 as O,N as L,eL as v,P as w,a as M}from"./dze2l9y9kn6nwat0.js";import{h as x,d as S,z as j,r as i,av as T,j as s}from"./cg166fqqcxkeiosv.js";import{A as b}from"./mykiy01bq61lzdt8.js";import{bB as N}from"./j4xe1fdohr6xk09p.js";import{C as o}from"./ct2h2b1j59gzocmb.js";import"./gognec9esf297jsz.js";import"./f3ajrzibyyk716uh.js";const P={pro:"chatgptpro",plus:"chatgptplusplan"},_=Object.keys(o),z={oiw216z:"sora_redirect",vza493q:"operator_redirect"};function D(r){r&&o[r]&&(window.location.href=o[r])}const $=A(function(){const[h]=x(),n=S(),u=C(),{plan:t}=j(),e=h.get("checkout_from"),l=i.useRef(!1),a=g(),p=i.useMemo(()=>a?.subscriptionAnalyticsParams,[a]),{value:c,isLoading:d}=R("1719651090");if(!t||!(t in P))throw T("/");return i.useEffect(()=>{if(!a||d||l.current)return;if(l.current=!0,e==="vza493q"){a.hasPaidSubscription()&&a.isPro()?window.location.href=o[e]:c||n("/");return}(async()=>{const m=e&&_.includes(e)?z[e]:"purchase_plan_redirect";try{e&&_.includes(e)&&y.setItem(O.CheckoutFrom,e);const f=await L.getCheckoutLink(u,"Sora",{plan_name:P[t],billing_details:{currency:v}});w.logEvent(M.accountPayPurchasePlanRedirect,{...p,plan:t,location:m}),window.location.href=f.url}catch{N(n,m)}})()},[n,u,t,e,p,d,c,a]),s.jsxs(s.Fragment,{children:[a&&e==="vza493q"&&c&&s.jsx(b,{currentAccount:a,variant:"operator",onClose:()=>D(e)}),s.jsx("div",{className:"flex h-full w-full items-center justify-center",children:s.jsx(E,{})})]})});export{$ as default};
//# sourceMappingURL=dgiacq9r8u3xf2re.js.map
