const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/eevmf58jykc3pk7h.js","assets/cg166fqqcxkeiosv.js","assets/dze2l9y9kn6nwat0.js","assets/root-fk1yg8gm.css","assets/j4xe1fdohr6xk09p.js","assets/conversation-small-ga20ijz2.css","assets/joa8jajuiu4xqpzn.js"])))=>i.map(i=>d[i]);
import{ci as Ee,aM as De,a$ as Ie,aR as R,aP as O,cm as Pe,aQ as L,b5 as Me,bh as oe,s as ke,d as $,bW as Re,C as se,bT as _e,ei as Te,c1 as Ae,S as Ne,P as Ve,a as Oe,c2 as Be,bl as Fe,bm as Le,eo as Ke,c7 as B,c8 as Z,M as He,bV as ze,es as Ue,D as We}from"./dze2l9y9kn6nwat0.js";import{r as u,j as t,c as K,au as re,M as V,a as Ge}from"./cg166fqqcxkeiosv.js";import{F as Xe}from"./fgvv8vlrbkjom4rs.js";import{ja as Ye,jb as ae,iI as ie,j9 as $e,dH as qe,j7 as ce,bJ as le,cp as F,dn as Qe,Q as Je,ae as Ze,af as ee,bO as et,i3 as tt,jc as nt,bP as ot,hB as st,jd as rt,je as at,cq as de}from"./j4xe1fdohr6xk09p.js";import{I as it,f as ct}from"./a18jwh9lzr2ddmbd.js";import{U as lt,R as dt,P as ut}from"./o3ts9y7n7vziy25l.js";import"./b92smcgf1zy1lpsm.js";import"./m1pg72zp46i5flxd.js";import"./huldggq89x8k42xn.js";import"./m4iicmyh3x1nme4j.js";import"./gzm2pyuieq14d2cd.js";import"./h83rc28v2vsm5nda.js";import"./b6ddr1xo1x0u3g1f.js";import"./m5tfr0dtbetugou5.js";import"./bgkjafzrp5aw6ah6.js";import"./e61g0qvb4nak98bl.js";import"./fnzd64m6c6nr1y9q.js";import"./clkzaq2ue82unbic.js";import"./knox9y5o8wayzcvt.js";import"./casotq27oeh0snvn.js";import"./nf2duydhbwllwb1z.js";import"./jky4nhpbj4n3xuh7.js";import"./765apt28hvug1izo.js";import"./f55klt1ppf2qkvcm.js";import"./cfvh96gbcjdpth1v.js";import"./kxggiygl9l9wvt1i.js";import"./m5vf38e63o5zwpil.js";import"./ej4nvw4ncvf14xr7.js";import"./on5pusyq8qp7ddxm.js";import"./mpt31eyc26i5miru.js";import"./csxhtnukvyyy22x8.js";import"./kb3phtht4s5rhb60.js";function mt(){const[e,n]=u.useState({undoStack:[],currentIndex:-1});function o(r){n(c=>({undoStack:[...c.undoStack.slice(0,c.currentIndex+1),r],currentIndex:c.currentIndex+1}))}function s(){n(r=>({undoStack:r.undoStack,currentIndex:Math.max(r.currentIndex-1,-1)}))}function i(){n(r=>({undoStack:r.undoStack,currentIndex:Math.min(r.currentIndex+1,r.undoStack.length-1)}))}function a(){n({undoStack:[],currentIndex:-1})}return{currentDrawnShape:e.undoStack.length>0?e.undoStack[e.currentIndex]:null,onNewDrawnShape:o,canUndoDrawing:e.currentIndex>=0,undoDrawing:s,canRedoDrawing:e.currentIndex<e.undoStack.length-1,redoDrawing:i,clearAllDrawings:a}}var ue=["PageUp","PageDown"],me=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],fe={"from-left":["Home","PageDown","ArrowDown","ArrowLeft"],"from-right":["Home","PageDown","ArrowDown","ArrowRight"],"from-bottom":["Home","PageDown","ArrowDown","ArrowLeft"],"from-top":["Home","PageDown","ArrowUp","ArrowLeft"]},_="Slider",[G,ft,gt]=Ee(_),[ge,bn]=De(_,[gt]),[pt,H]=ge(_),pe=u.forwardRef((e,n)=>{const{name:o,min:s=0,max:i=100,step:a=1,orientation:r="horizontal",disabled:c=!1,minStepsBetweenThumbs:d=0,defaultValue:m=[s],value:f,onValueChange:l=()=>{},onValueCommit:g=()=>{},inverted:p=!1,form:j,...x}=e,S=u.useRef(new Set),h=u.useRef(0),v=r==="horizontal"?ht:xt,[w=[],b]=Ie({prop:f,defaultProp:m,onChange:y=>{[...S.current][h.current]?.focus(),l(y)}}),I=u.useRef(w);function T(y){const P=jt(w,y);A(y,P)}function z(y){A(y,h.current)}function Ce(){const y=I.current[h.current];w[h.current]!==y&&g(w)}function A(y,P,{commit:U}={commit:!1}){const Q=Dt(a),W=It(Math.round((y-s)/a)*a+s,Q),N=ae(W,[s,i]);b((k=[])=>{const M=wt(k,N,P);if(Et(M,d*a)){h.current=M.indexOf(N);const J=String(M)!==String(k);return J&&U&&g(M),J?M:k}else return k})}return t.jsx(pt,{scope:e.__scopeSlider,name:o,disabled:c,min:s,max:i,valueIndexToChangeRef:h,thumbs:S.current,values:w,orientation:r,form:j,children:t.jsx(G.Provider,{scope:e.__scopeSlider,children:t.jsx(G.Slot,{scope:e.__scopeSlider,children:t.jsx(v,{"aria-disabled":c,"data-disabled":c?"":void 0,...x,ref:n,onPointerDown:R(x.onPointerDown,()=>{c||(I.current=w)}),min:s,max:i,inverted:p,onSlideStart:c?void 0:T,onSlideMove:c?void 0:z,onSlideEnd:c?void 0:Ce,onHomeKeyDown:()=>!c&&A(s,0,{commit:!0}),onEndKeyDown:()=>!c&&A(i,w.length-1,{commit:!0}),onStepKeyDown:({event:y,direction:P})=>{if(!c){const W=ue.includes(y.key)||y.shiftKey&&me.includes(y.key)?10:1,N=h.current,k=w[N],M=a*W*P;A(k+M,N,{commit:!0})}}})})})})});pe.displayName=_;var[he,xe]=ge(_,{startEdge:"left",endEdge:"right",size:"width",direction:1}),ht=u.forwardRef((e,n)=>{const{min:o,max:s,dir:i,inverted:a,onSlideStart:r,onSlideMove:c,onSlideEnd:d,onStepKeyDown:m,...f}=e,[l,g]=u.useState(null),p=O(n,v=>g(v)),j=u.useRef(),x=Pe(i),S=x==="ltr",h=S&&!a||!S&&a;function E(v){const w=j.current||l.getBoundingClientRect(),b=[0,w.width],T=q(b,h?[o,s]:[s,o]);return j.current=w,T(v-w.left)}return t.jsx(he,{scope:e.__scopeSlider,startEdge:h?"left":"right",endEdge:h?"right":"left",direction:h?1:-1,size:"width",children:t.jsx(Se,{dir:x,"data-orientation":"horizontal",...f,ref:p,style:{...f.style,"--radix-slider-thumb-transform":"translateX(-50%)"},onSlideStart:v=>{const w=E(v.clientX);r?.(w)},onSlideMove:v=>{const w=E(v.clientX);c?.(w)},onSlideEnd:()=>{j.current=void 0,d?.()},onStepKeyDown:v=>{const b=fe[h?"from-left":"from-right"].includes(v.key);m?.({event:v,direction:b?-1:1})}})})}),xt=u.forwardRef((e,n)=>{const{min:o,max:s,inverted:i,onSlideStart:a,onSlideMove:r,onSlideEnd:c,onStepKeyDown:d,...m}=e,f=u.useRef(null),l=O(n,f),g=u.useRef(),p=!i;function j(x){const S=g.current||f.current.getBoundingClientRect(),h=[0,S.height],v=q(h,p?[s,o]:[o,s]);return g.current=S,v(x-S.top)}return t.jsx(he,{scope:e.__scopeSlider,startEdge:p?"bottom":"top",endEdge:p?"top":"bottom",size:"height",direction:p?1:-1,children:t.jsx(Se,{"data-orientation":"vertical",...m,ref:l,style:{...m.style,"--radix-slider-thumb-transform":"translateY(50%)"},onSlideStart:x=>{const S=j(x.clientY);a?.(S)},onSlideMove:x=>{const S=j(x.clientY);r?.(S)},onSlideEnd:()=>{g.current=void 0,c?.()},onStepKeyDown:x=>{const h=fe[p?"from-bottom":"from-top"].includes(x.key);d?.({event:x,direction:h?-1:1})}})})}),Se=u.forwardRef((e,n)=>{const{__scopeSlider:o,onSlideStart:s,onSlideMove:i,onSlideEnd:a,onHomeKeyDown:r,onEndKeyDown:c,onStepKeyDown:d,...m}=e,f=H(_,o);return t.jsx(L.span,{...m,ref:n,onKeyDown:R(e.onKeyDown,l=>{l.key==="Home"?(r(l),l.preventDefault()):l.key==="End"?(c(l),l.preventDefault()):ue.concat(me).includes(l.key)&&(d(l),l.preventDefault())}),onPointerDown:R(e.onPointerDown,l=>{const g=l.target;g.setPointerCapture(l.pointerId),l.preventDefault(),f.thumbs.has(g)?g.focus():s(l)}),onPointerMove:R(e.onPointerMove,l=>{l.target.hasPointerCapture(l.pointerId)&&i(l)}),onPointerUp:R(e.onPointerUp,l=>{const g=l.target;g.hasPointerCapture(l.pointerId)&&(g.releasePointerCapture(l.pointerId),a(l))})})}),ve="SliderTrack",we=u.forwardRef((e,n)=>{const{__scopeSlider:o,...s}=e,i=H(ve,o);return t.jsx(L.span,{"data-disabled":i.disabled?"":void 0,"data-orientation":i.orientation,...s,ref:n})});we.displayName=ve;var X="SliderRange",be=u.forwardRef((e,n)=>{const{__scopeSlider:o,...s}=e,i=H(X,o),a=xe(X,o),r=u.useRef(null),c=O(n,r),d=i.values.length,m=i.values.map(g=>ye(g,i.min,i.max)),f=d>1?Math.min(...m):0,l=100-Math.max(...m);return t.jsx(L.span,{"data-orientation":i.orientation,"data-disabled":i.disabled?"":void 0,...s,ref:c,style:{...e.style,[a.startEdge]:f+"%",[a.endEdge]:l+"%"}})});be.displayName=X;var Y="SliderThumb",je=u.forwardRef((e,n)=>{const o=ft(e.__scopeSlider),[s,i]=u.useState(null),a=O(n,c=>i(c)),r=u.useMemo(()=>s?o().findIndex(c=>c.ref.current===s):-1,[o,s]);return t.jsx(St,{...e,ref:a,index:r})}),St=u.forwardRef((e,n)=>{const{__scopeSlider:o,index:s,name:i,...a}=e,r=H(Y,o),c=xe(Y,o),[d,m]=u.useState(null),f=O(n,E=>m(E)),l=d?r.form||!!d.closest("form"):!0,g=Me(d),p=r.values[s],j=p===void 0?0:ye(p,r.min,r.max),x=bt(s,r.values.length),S=g?.[c.size],h=S?yt(S,j,c.direction):0;return u.useEffect(()=>{if(d)return r.thumbs.add(d),()=>{r.thumbs.delete(d)}},[d,r.thumbs]),t.jsxs("span",{style:{transform:"var(--radix-slider-thumb-transform)",position:"absolute",[c.startEdge]:`calc(${j}% + ${h}px)`},children:[t.jsx(G.ItemSlot,{scope:e.__scopeSlider,children:t.jsx(L.span,{role:"slider","aria-label":e["aria-label"]||x,"aria-valuemin":r.min,"aria-valuenow":p,"aria-valuemax":r.max,"aria-orientation":r.orientation,"data-orientation":r.orientation,"data-disabled":r.disabled?"":void 0,tabIndex:r.disabled?void 0:0,...a,ref:f,style:p===void 0?{display:"none"}:e.style,onFocus:R(e.onFocus,()=>{r.valueIndexToChangeRef.current=s})})}),l&&t.jsx(vt,{name:i??(r.name?r.name+(r.values.length>1?"[]":""):void 0),form:r.form,value:p},s)]})});je.displayName=Y;var vt=e=>{const{value:n,...o}=e,s=u.useRef(null),i=Ye(n);return u.useEffect(()=>{const a=s.current,r=window.HTMLInputElement.prototype,d=Object.getOwnPropertyDescriptor(r,"value").set;if(i!==n&&d){const m=new Event("input",{bubbles:!0});d.call(a,n),a.dispatchEvent(m)}},[i,n]),t.jsx("input",{style:{display:"none"},...o,ref:s,defaultValue:n})};function wt(e=[],n,o){const s=[...e];return s[o]=n,s.sort((i,a)=>i-a)}function ye(e,n,o){const a=100/(o-n)*(e-n);return ae(a,[0,100])}function bt(e,n){return n>2?`Value ${e+1} of ${n}`:n===2?["Minimum","Maximum"][e]:void 0}function jt(e,n){if(e.length===1)return 0;const o=e.map(i=>Math.abs(i-n)),s=Math.min(...o);return o.indexOf(s)}function yt(e,n,o){const s=e/2,a=q([0,50],[0,s]);return(s-a(n)*o)*o}function Ct(e){return e.slice(0,-1).map((n,o)=>e[o+1]-n)}function Et(e,n){if(n>0){const o=Ct(e);return Math.min(...o)>=n}return!0}function q(e,n){return o=>{if(e[0]===e[1]||n[0]===n[1])return n[0];const s=(n[1]-n[0])/(e[1]-e[0]);return n[0]+s*(o-e[0])}}function Dt(e){return(String(e).split(".")[1]||"").length}function It(e,n){const o=Math.pow(10,n);return Math.round(e*o)/o}var Pt=pe,Mt=we,kt=be,Rt=je,C=(e=>(e[e.Default=0]="Default",e[e.Inpaint=1]="Inpaint",e))(C||{});function _t({imageAsset:e,mode:n,setMode:o,clientThreadId:s,messageId:i,cursorWidth:a,setCursorWidth:r,inpaintingDrawingState:c,isLoadingNewImage:d}){const m=ke(s),{canUndoDrawing:f,undoDrawing:l,canRedoDrawing:g,redoDrawing:p,clearAllDrawings:j}=c,x=K();return t.jsxs(re.div,{className:"flex h-16 w-full justify-between px-4",...ie,children:[t.jsx("div",{className:"flex items-center",children:n===C.Inpaint&&t.jsxs(t.Fragment,{children:[t.jsxs("div",{className:$("flex items-center gap-3",d&&"opacity-50"),children:[t.jsx(ne,{className:"h-[11px] w-[11px]"}),t.jsxs(Pt,{className:"relative flex w-[90px] items-center",min:32,max:240,step:.01,value:[a],onValueChange:S=>r(S[0]),disabled:d,children:[t.jsx(Mt,{className:"relative h-[2px] grow bg-token-text-quaternary",children:t.jsx(kt,{className:"absolute h-full bg-token-text-secondary"})}),t.jsx(Rt,{className:"block h-[11px] w-[11px] rounded-full bg-token-text-secondary"})]}),t.jsx(ne,{className:"h-6 w-6"})]}),t.jsx(te,{}),t.jsx(D,{disabled:!f||d,onClick:l,children:t.jsx(lt,{})}),t.jsx(D,{disabled:!g||d,onClick:p,children:t.jsx(dt,{})}),t.jsx(te,{}),t.jsx(D,{disabled:!f||d,onClick:j,children:t.jsx(V,{id:"imageEditorControls.clearSelectionButtonLabel",defaultMessage:"Clear selection"})})]})}),t.jsx("div",{className:"flex items-center",children:n===C.Inpaint?t.jsx(D,{onClick:()=>o(C.Default),disabled:d,children:t.jsx(V,{id:"imageEditorControls.cancelButtonLabel",defaultMessage:"Cancel"})}):t.jsxs(t.Fragment,{children:[t.jsx(At,{imageAsset:e,setMode:o,messageId:i,serverThreadId:m}),t.jsx(D,{tooltip:x.formatMessage({id:"imageEditorControls.downloadButtonTooltip",defaultMessage:"Save"}),onClick:()=>$e(e,m,i),children:t.jsx(qe,{})}),t.jsx(Tt,{prompt:ce(e),children:t.jsx(D,{tooltip:x.formatMessage({id:"imageEditorControls.promptButtonTooltip",defaultMessage:"Prompt"}),children:t.jsx(le,{})})}),t.jsx(D,{tooltip:x.formatMessage({id:"imageEditorControls.closeButtonTooltip",defaultMessage:"Close"}),onClick:F.close,children:t.jsx(Re,{className:"icon-lg"})})]})})]})}function Tt({prompt:e,children:n}){const[o,s]=u.useState(!1),i=K(),a=se();return t.jsx(Qe,{sideOffset:4,alignAgainstAnchor:"end",triggerButton:t.jsx("div",{className:"group",children:n}),className:"z-10",size:"none",children:t.jsxs("div",{className:"flex max-w-sm flex-col gap-3 p-4",children:[t.jsx("div",{className:"text-token-text-secondary",children:t.jsx(V,{id:"imageEditorControls.promptPopoverLabel",defaultMessage:"Prompt"})}),t.jsx("div",{children:e}),t.jsx("div",{children:t.jsx(_e,{color:"secondary",disabled:o,onClick:r=>{s(!0),Je(e,a,r),setTimeout(()=>s(!1),2e3)},icon:Te,children:o?i.formatMessage({id:"imageEditorControls.copiedButtonLabel",defaultMessage:"Copied!"}):i.formatMessage({id:"imageEditorControls.copyButtonLabel",defaultMessage:"Copy"})})})]})})}function D({children:e,tooltip:n,disabled:o,onClick:s}){const i=t.jsx("button",{className:$("rounded p-2 font-semibold hover:bg-token-main-surface-tertiary group-radix-state-open:bg-token-main-surface-tertiary",o?"text-token-text-quaternary":"text-token-text-secondary"),disabled:o,onClick:s,children:e});return n!=null?t.jsx(Ae,{label:n,sideOffset:4,children:i}):i}function At({imageAsset:e,setMode:n,messageId:o,serverThreadId:s,disabled:i}){const a=K(),r=Ze(ee.DalleEditingOnboarding),c=r.eligible&&!r.isLoading,d=t.jsx(D,{tooltip:c?void 0:a.formatMessage({id:"imageEditorControls.inpaintButtonTooltip",defaultMessage:"Select"}),onClick:()=>{n(C.Inpaint),Ne.logEvent("chatgpt_dalle_inpaint_click",null,{sourceOperation:e.metadata?.dalle?.edit_op??"none",hasParent:e.metadata?.dalle?.parent_gen_id!=null?"true":"false"}),Ve.logEvent(Oe.dalleImageClickInpaint,{conversationId:s,messageId:o,generationId:e.metadata?.dalle?.gen_id,fileId:et(e.asset_pointer),parentGenerationId:e.metadata?.dalle?.parent_gen_id,sourceOperation:e.metadata?.dalle?.edit_op})},disabled:i,children:t.jsx(ut,{})});return c?t.jsx(tt,{announcementKey:ee.DalleEditingOnboarding,show:!0,side:"bottom",sideOffset:0,title:a.formatMessage({id:"imageEditorNUX.title",defaultMessage:"Select area of the image to edit"}),description:a.formatMessage({id:"imageEditorNUX.description",defaultMessage:"Highlight the area and describe changes in chat."}),onDismiss:r.markAsViewed,children:t.jsx("div",{children:d})}):d}const te=oe.div`mx-3 w-[1px] h-6 bg-token-border-light`,ne=oe.div`rounded-full border-2 border-token-text-secondary`;function Nt({mode:e,imageIndex:n,allImages:o,onSwitchImage:s,isLoadingNewImage:i}){const a=n>0,r=u.useCallback(()=>{a&&s(o[n-1])},[a,o,n,s]),c=n<o.length-1,d=u.useCallback(()=>{c&&s(o[n+1])},[c,o,n,s]);return u.useEffect(()=>{function m(f){f.target instanceof HTMLTextAreaElement||e===C.Default&&(f.key==="ArrowLeft"?r():f.key==="ArrowRight"&&d())}return document.addEventListener("keydown",m),()=>{document.removeEventListener("keydown",m)}},[e,r,d]),t.jsx("div",{className:"flex h-16 w-full items-center justify-center gap-3 font-semibold text-token-text-secondary",children:e===C.Inpaint?!i&&t.jsxs("div",{className:"flex items-center gap-1.5",children:[t.jsx(V,{id:"imageEditor.selectArea",defaultMessage:"Select an area to edit"}),t.jsx("a",{href:"https://help.openai.com/en/articles/9055440",target:"_blank",rel:"noreferrer",children:t.jsx(le,{className:"icon-md"})})]}):o.length>1?t.jsxs(t.Fragment,{children:[t.jsx("button",{disabled:!a,className:"disabled:text-token-text-tertiary",onClick:r,children:t.jsx(nt,{className:"icon-lg"})}),t.jsx("div",{children:t.jsx(V,{id:"imageEditor.imageNumber",defaultMessage:"Image {num} of {numImages}",values:{num:n+1,numImages:o.length}})}),t.jsx("button",{disabled:!c,className:"disabled:text-token-text-tertiary",onClick:d,children:t.jsx(Be,{className:"icon-lg"})})]}):null})}const Vt=0,Ot=64;function Bt({imageAsset:e,children:n,containerDimensions:o,isLoadingNewImage:s}){return t.jsxs(re.div,{className:"absolute",style:Ft(e,o),...ie,children:[n,t.jsx("div",{className:$("absolute inset-0 flex items-center justify-center bg-token-main-surface-primary transition-opacity duration-1000",s?"pointer-events-auto opacity-60":"pointer-events-none opacity-0")})]})}function Ft(e,n){const{width:o,height:s}=e,{width:i,height:a}=n,r=i-2*Vt,c=a-2*Ot,d=o/s,m=r/c,f=d>m,l=f?r:c*d,g=f?r/d:c,p=(a-g)/2,j=(i-l)/2;return{top:p,left:j,width:l,height:g}}const Lt=Fe(()=>Le(()=>import("./eevmf58jykc3pk7h.js"),__vite__mapDeps([0,1,2,3,4,5,6])).then(e=>e.DynamicDrawingCanvas));function jn({clientThreadId:e,messageId:n,image:o,allImages:s}){const i=Ke(e),a=i?.messages[i.messages.length-1],r=a!=null&&[B.Dalle,B.t2uay3k].includes(Z(a.message))&&!ot(a.message),c=Ge();return u.useEffect(()=>{async function d(m,f){try{const l=await ct(c,m);F.setFocusedObject({type:de.Image,image:l[0],allImages:l,messageId:f})}catch(l){We.addError(new Error("Failed to load newly created images:",{cause:l}))}}if(a!=null&&[B.Dalle,B.t2uay3k].includes(Z(a.message))&&a.message.content.content_type===He.MultimodalText){const m=ze.getImageAssetPointers(a.message);d(m,a.message.id)}},[c,a]),t.jsx(Kt,{image:o,allImages:s,isLoadingNewImage:r,clientThreadId:e,messageId:n})}function Kt({image:e,allImages:n,isLoadingNewImage:o,clientThreadId:s,messageId:i}){const[a,r]=u.useState(C.Default),[c,d]=u.useState({width:window.innerWidth-Xe,height:window.innerHeight}),m=u.useRef(null),[f,l]=u.useState(136),g=mt(),{currentDrawnShape:p,onNewDrawnShape:j,clearAllDrawings:x}=g,S=u.useRef(null),h=K(),E=se(),{setTargetedContent:v}=st();u.useEffect(()=>{const b=new ResizeObserver(I=>{const{width:T,height:z}=I[0].contentRect;d({width:T,height:z})});return m.current&&b.observe(m.current),()=>{b.disconnect()}},[]),u.useEffect(()=>{function b(I){I.key==="Escape"&&(a===C.Inpaint?r(C.Default):F.close())}return document.addEventListener("keydown",b),()=>{document.removeEventListener("keydown",b)}},[a]),u.useEffect(()=>(p==null?v({type:"object",placeholderTextOverride:Ue({id:"imageEditor.transformationTextareaPlaceholder",defaultMessage:"Edit imageâ€¦"}),shouldPersistAcrossMessages:!0,isFocusedViewContent:!0,createNewCompletionParams:b=>rt(b,e)}):v({type:"object",label:h.formatMessage({id:"imageEditor.inpaintingTargetedContentLabel",defaultMessage:"Edit selection"}),isFocusedViewContent:!0,createNewCompletionParams:async b=>await at(b,e,S.current?.getImageData(),h,E),onCleared:()=>r(C.Default)}),()=>{v(void 0)}),[e,h,v,p,E]),u.useEffect(()=>{a!==C.Inpaint&&x()},[a]),u.useEffect(()=>{r(C.Default)},[e]);const w=n.findIndex(b=>b.asset_pointer===e.asset_pointer);return t.jsxs("div",{ref:m,className:"flex h-full w-full flex-col justify-between",children:[t.jsx(_t,{imageAsset:e,mode:a,setMode:r,clientThreadId:s,messageId:i,cursorWidth:f,setCursorWidth:l,inpaintingDrawingState:g,isLoadingNewImage:o}),t.jsx(Nt,{mode:a,imageIndex:w,allImages:n,onSwitchImage:b=>{F.setFocusedObject({type:de.Image,image:b,allImages:n,messageId:i})},isLoadingNewImage:o}),t.jsxs(Bt,{imageAsset:e,containerDimensions:c,isLoadingNewImage:o,children:[t.jsx(it,{className:"h-full w-full",alt:ce(e),src:e.url,width:e.width,height:e.height,fadeIn:!1}),a===C.Inpaint&&t.jsx("div",{className:"absolute inset-0",children:t.jsx(Lt,{drawingCanvasRef:S,color:"rgba(0, 122, 255, 0.5)",dashedOutlineColor:"rgba(255, 255, 255, 0.65)",cursorWidth:f,canvasWidth:e.width,canvasHeight:e.height,currentDrawnShape:p,onNewDrawnShape:j})})]})]})}export{jn as ImageEditor};
//# sourceMappingURL=lb9srbt9xarahmox.js.map
