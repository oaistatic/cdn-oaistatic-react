const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/m7zp5qna5ayfstmm.js","assets/n97h6so7iblif4c5.js","assets/cim4usely8ixso70.js","assets/root-c9lkqywj.css","assets/cjycjoc7kjd4l9wh.js","assets/gc0o4kf2vj2rpphe.js","assets/ivbsxyeeopn30y8l.js","assets/conversation-small-dhmr708a.css","assets/dfubku5ieeqjdkyl.js","assets/nfjj2lglkp0a5csq.js","assets/k5qf6pgck1wqkdil.js","assets/jdpqs7fyetm56n9m.js","assets/esngjg0db9tacnsj.js","assets/cnjeiucuaq36bpk4.js","assets/jalbfd8deaxp05ru.js","assets/kds0rrlel320n5ae.js","assets/euq7ybw4dhrsufo2.js","assets/bcnsse8l7ak9ome8.js"])))=>i.map(i=>d[i]);
import{a as D,d as y,eM as cs,D as oe,cQ as Ne,aD as I,aZ as _e,h3 as ke,cA as ds,a6 as L,P as se,k as Q,cm as $,bW as re,cy as us,lf as Re,aI as k,d$ as Oe,d8 as He,c7 as ne,i as hs,aM as ms,as as ps,i8 as Le,fs as ie,c as V,dX as gs,ac as De,ad as Fe,cp as xs,p as Ue,cT as ze,hO as Be,av as te,aY as fs,bM as Ge,ft as Ss,j as vs,U as Cs,oG as bs,oH as js,B as ys,c1 as ws,d3 as Ts,h as Ps,cl as Ms,c6 as Es,a4 as As,oI as Ns,d6 as _s,l as ks,oJ as Pe,a_ as Rs,cG as Os,h8 as Hs,i$ as Ls,d0 as Me,gI as Ds,R as Fs,mm as Us,eb as zs,hP as Bs,d7 as Gs,jA as Ws,iT as Vs,cH as qs,gF as Is}from"./cim4usely8ixso70.js";import{j as e,r as t,M as q,R as We,o as Qs}from"./n97h6so7iblif4c5.js";import{gG as le,gH as $s,gI as Ks,gJ as Ys,d1 as Ve,gK as Zs,gL as qe,gM as Xs,gN as Js,gO as eo,dr as Ie,dc as ce,gP as so,gQ as oo,gR as to,gS as ao,gT as ro,gU as no,fQ as io,gV as lo,gW as co,d7 as uo,gX as ho,c7 as mo,u as po,gY as go,gZ as xo,f8 as fo,g_ as So,g$ as vo,h0 as Co,h1 as bo,h2 as ae,h3 as jo,h4 as yo,h5 as wo,bZ as To,h6 as Po,h7 as Mo,h8 as Eo,d0 as Ao,d5 as No,h9 as _o,ha as ko,hb as Ro,hc as Oo,hd as Ho,dp as Lo,he as Do,hf as Fo,hg as Uo,hh as zo,hi as Bo,fD as Go,z as Wo,hj as Vo,hk as qo,hl as Io,hm as Qo,hn as $o,ho as Ko,hp as Yo,hq as Zo,hr as Xo,hs as Jo,ht as et,hu as st,hv as ot,hw as tt,hx as at,hy as rt,hz as nt,hA as it,hB as lt,hC as ct,hD as dt,hE as ut}from"./ivbsxyeeopn30y8l.js";import{F as ht}from"./dtltw5so60m9d99q.js";import{T as mt}from"./o9aygkglauyctw2w.js";import{S as pt,a as gt}from"./n8gf07a745v1aikq.js";import{supportsWebSideChatHeader as xt}from"./g86fwc5245pbdtof.js";import{C as ft}from"./k5qf6pgck1wqkdil.js";import"./hl263mv5vjd6fe09.js";function St(s){const{prefetchNavlink:n,clearPrefetchNavlink:l,clientThreadId:o,pageLoadSearchQuery:c}=s,p=D(),g=le(p),a=$s(o),v=Ks(),C=Ys(),{isOpen:x}=Ve(),f=C.store.useContentAreaDimensions(Zs.Header,d=>d?.height?d.height:void 0);let h=e.jsx(vt,{isNewScrollEnabled:g,...s});return qe()&&(h=e.jsx(eo,{clientThreadId:o,children:h})),h=e.jsx(Ie,{clientThreadId:o,children:h}),e.jsxs("div",{onCopy:a,className:y("@thread-xl/thread:pt-header-height flex flex-col text-sm",v&&"keyboard-open:pb-[calc(var(--composer-height,100px)+var(--screen-keyboard-height,0))]",f?null:!g&&(x?"max-sm:pb-25":"pb-25")),style:{paddingBottom:f},children:[c&&e.jsx("div",{children:e.jsx(Xs,{query:c})}),n?e.jsx(cs,{name:"prefetch-navlink",onError:d=>{oe.addError("Error with prefetch navlink",{error:d}),l()},children:e.jsx(t.Suspense,{fallback:null,children:e.jsx(Js,{clientThreadId:o,prefetchNavlink:n,clearPrefetchNavlink:l})})}):null,e.jsx(Ne,{children:h})]})}function vt({onRequestCompletion:s,clientThreadId:n,scrollContainerRef:l,isNewScrollEnabled:o}){const[c,p,g]=I(n,m=>[k.getConversationTurnIds(m),m?.conversationOrigin===Oe.APPLE,m?.scrollToMessageId]),a=_e(),v=ce(),C=ke(),x=so(),[f]=oo(),h=to(),[d]=ao(),u=ds(n);ro({isDynamicSharedThread:a,clientThreadId:n}),t.useEffect(()=>{a&&(L.logEvent("chatgpt_continue_conversation_page_loaded"),se.logEvent("Continue Conversation: Page Loaded"),L.logEvent("chatgpt_conversation_share_page_loaded"),se.logEvent("Share Public Chat: Shared Conversation Loaded"))},[a]);const E=t.useCallback(()=>{o||x({behavior:"smooth"})},[o,x]),A=Q($),[N,R]=t.useState(!1),T=(N||!1)&&!A,b=t.useRef(null),S=no(n),w=v&&!C;return e.jsxs(e.Fragment,{children:[w&&e.jsx(pt,{}),a&&e.jsxs(e.Fragment,{children:[e.jsx(io,{children:e.jsx("p",{className:"text-xs text-gray-500",children:e.jsx(q,{id:"threadLayout.sharedConversationCopyDisclaimer",defaultMessage:"This is a copy of a conversation between ChatGPT & Anonymous."})})}),e.jsx("div",{className:"text-token-text-primary mb-5 text-center text-xs font-semibold",children:e.jsx("button",{onClick:()=>{re.openModal(us.ReportConversation),L.logEvent("chatgpt_conversation_share_report_content_clicked",null,{location:"Static Shared Thread Page"}),se.logEvent("Share Public Chat: Report Content Clicked",{location:"Dynamic Shared Thread Page"})},children:e.jsx(q,{id:"thread.reportSharedConversation",defaultMessage:"Report conversation"})})})]}),c.map((m,P)=>e.jsx(lo,{isFinalTurn:P===c.length-1,turnIndex:P,clientThreadId:n,onRequestCompletion:s,currentModelId:u?.id??null,scrollToBottom:o?void 0:E,scrollToMessageId:o?void 0:g,dateHeaderType:S(P),hideUserActions:A},m)),!o&&e.jsxs(e.Fragment,{children:[l?.current&&e.jsx(Re,{setIsScrolledToEdge:m=>{R(m)},options:{root:l.current,threshold:0,rootMargin:"0%"}},"threadBottomEdgeScrollObserver"),e.jsx("div",{ref:b}),p&&f&&!d&&e.jsx(co,{className:y("translate-y-[10px] md:translate-y-[30px]"),onClick:()=>{L.logEvent("chatgpt_thread_scroll_to_top"),h({behavior:"smooth"})},children:e.jsx(uo,{className:"icon text-token-text-primary"})}),e.jsx(ho,{show:T,className:y("bottom-[calc(var(--composer-overlap-px)+--spacing(6))]"),onClick:()=>{L.logEvent("chatgpt_thread_scroll_to_bottom"),b.current?.scrollIntoView({behavior:"smooth",block:"end"})}})]})]})}const Ct=({clientThreadId:s})=>{const n=D(),l=He(u=>u.activeStageSidebar),o=ne(s),c=mo(hs.WorkspaceShareLinks),{isUnauthenticated:p}=ms(),g=ps(),a=Le(s),v=ie(a),C=V(n,"16480203"),x=po(),f=gs(),h=c&&o&&!p&&!g&&(!v||C)&&!x&&!f,d=!l;return e.jsx("div",{className:"flex items-center",id:"conversation-header-actions",children:e.jsx(ft,{showShareButton:h,showProfileDropdown:d,clientThreadId:s})})},bt=De(()=>Fe(()=>import("./m7zp5qna5ayfstmm.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13])).then(s=>s.GizmoUsingAsOwnerNotice)),Ee="text-lg",Ae="icon-sm";function jt({clientThreadId:s,transparentBackground:n,isEmptyState:l}){const[o,c]=t.useState(!1),p=D(),g=le(p),a=Le(s),v=ie(a),C=go(),{data:x}=xs(a),f=Ue(p),h=ze(),d=ke(),[u,E]=Q(j=>[Be(j),$(j)]),A=te(s),N=He(j=>j.isConversationScrolledFromTop),R=I(s,j=>k.hasUserMessage(j))||!A,T=ce(),b=T&&d,S=qe()&&R&&!T,w=!a&&!S&&!o,m=xo({clientThreadId:s})&&!b;t.useEffect(()=>{if(!E){c(!1);return}(async()=>{const j=await xt();c(j??!1)})()},[E]);const P=!fs(p)&&!R&&Ge(p,"1697094676").get("hide_dropdown",!1),F=e.jsx(Ie,{clientThreadId:s,children:e.jsx(Ct,{clientThreadId:s})}),U=u&&!S?{textClassName:Ee,chevronClassName:Ae}:{},K=S?e.jsx(yt,{clientThreadId:s,conversationActions:F,dropdownTextClassName:Ee,dropdownChevronClassName:Ae}):o?e.jsx(bo,{clientThreadId:s}):h&&(v||!a)?P?null:e.jsx(ae,{clientThreadId:s}):P?null:e.jsx(ae,{clientThreadId:s,...U});return e.jsxs(e.Fragment,{children:[e.jsxs(fo,{id:"page-header",className:y("pointer-events-none select-none [view-transition-name:var(--vt-page-header)] *:pointer-events-auto motion-safe:transition",!S&&!o&&"max-md:hidden",l&&"absolute start-0 end-0",v&&A&&"sharp-edge-on-scroll-start sticky top-0",w&&"@[84rem]/thread:absolute @[84rem]/thread:start-0 @[84rem]/thread:end-0 @[84rem]/thread:shadow-none!",w&&!T&&"@[84rem]/thread:bg-transparent",n&&!T&&!S&&!o&&"bg-transparent",!g&&N?"[box-shadow:var(--sharp-edge-top-shadow)]":"[box-shadow:var(--sharp-edge-top-shadow-placeholder)]",g&&"[box-shadow:var(--sharp-edge-top-shadow-placeholder)] group-data-scroll-from-top/thread:[box-shadow:var(--sharp-edge-top-shadow)]",N&&m&&"@[84rem]/thread:bg-token-main-surface-primary @[84rem]/thread:[box-shadow:var(--sharp-edge-top-shadow)]!"),children:[!o&&e.jsxs("div",{className:"absolute start-1/2 ltr:-translate-x-1/2 rtl:translate-x-1/2",children:[e.jsx(wt,{}),x!=null&&f?.isWorkspaceAccount()&&x.gizmo.tags?.includes(Ss.WorkspaceDisabled)&&e.jsx(bt,{gizmo:x}),e.jsx(So,{gizmoId:a,clientThreadId:s}),m?e.jsx(vo,{}):null,b&&e.jsx(gt,{})]}),e.jsx("div",{className:y("flex",S||o?"w-full":"items-center"),children:K}),!S&&!o&&e.jsx("div",{className:"flex items-center",children:F})]}),C&&e.jsx(Co,{})]})}function yt({clientThreadId:s,className:n,conversationActions:l,dropdownTextClassName:o,dropdownChevronClassName:c}){return e.jsxs("div",{className:y("grid w-full grid-cols-[minmax(max-content,1fr)_auto_minmax(0,1fr)] lg:grid-cols-[1fr_auto_1fr]",yo,n),children:[e.jsx("div",{className:"col-start-1 row-start-1 justify-self-start pe-2",children:e.jsx(ae,{clientThreadId:s,textClassName:o,chevronClassName:c})}),e.jsx("div",{className:"col-span-2 col-start-2 row-start-1 me-7 min-w-0 place-self-center [justify-self:end] lg:col-span-1 lg:me-0 lg:min-w-(--thread-content-max-width) lg:flex-1 lg:[justify-self:center]",children:e.jsx(jo,{textClassName:"text-base"})}),e.jsx("div",{className:"col-start-3 row-start-1 hidden items-center justify-self-end overflow-visible lg:flex",children:l})]})}function wt(){const{data:s,isSuccess:n}=vs(Cs.DeveloperMode);return!n||!s?null:e.jsxs(bs,{intent:js.warning,children:[e.jsx("div",{className:"me-2 inline-block flex-1 text-sm",children:e.jsx(q,{id:"tH5uVo",defaultMessage:"Developer mode is enabled"})}),e.jsx(ys,{as:"a",to:`#${ws(Ts.Connectors).hash}?scroll=developer-mode-settings`,color:"ghost",size:"small",className:"shrink-0 text-sm",children:e.jsx(q,{id:"GIWc2G",defaultMessage:"Settings"})})]})}const Tt=De(()=>Fe(()=>import("./jalbfd8deaxp05ru.js"),__vite__mapDeps([14,1,2,3,15,6,7,16,17])));function Pt({clientThreadId:s,isNewScrollEnabled:n,pageLoadSearchQuery:l,messagesVerticalAlign:o,footerRootContainerElementRef:c,threadRootRef:p,scrollContainerRef:g,hideHeader:a,children:v}){const[C]=Qs(),x=!!C.get("message"),[f,h]=Q(u=>[$(u),Be(u)]),d=I(s,u=>u?.conversationOrigin===Oe.APPLE);if(n)return e.jsx(ct,{allowScrollToEnd:!f,allowScrollToTop:!f&&d,clientThreadId:s,initScrolledToEnd:l==null&&!x,threadFooterRef:c,threadRootRef:p,children:v});{const u=e.jsx("div",{className:"relative h-full",children:e.jsxs("div",{className:y("flex h-full flex-col overflow-y-auto [scrollbar-gutter:stable_both-edges]",!h&&"@[84rem]/thread:pt-(--header-height)"),ref:g,children:[e.jsx(Re,{setIsScrolledToEdge:E=>{re.setIsConversationScrolledFromTop(E)},options:{root:g?.current}}),v]})});return l!=null?u:e.jsx(Ne,{children:e.jsxs(t.Suspense,{fallback:null,children:[e.jsx(dt,{}),u]})})}}const Mt=function({clientThreadId:s,getGizmosCompletionParams:n,hideDisclaimer:l,hideHeader:o,messagesVerticalAlign:c="top",renderEmptyState:p}){"use forget";const g=Ps(),a=D(),v=wo(),C=le(a),x=ze(),f=Ms(),{data:h}=Es({isGizmo:!!f}),d=As(s),[u,E,A,N,R,T,b]=I(s,r=>[r?.isLoading,k.getCurrentLeafId(r),k.hasUserMessage(r),k.getConversationTurns(r).length,k.isArchived(r),r?.modelId,r?k.getGizmoId(r):f]),S=ne(s),{prefetchSearchPromises:w}=To();t.useEffect(()=>Po(a),[a]);const[m]=t.useState(w?.query),[P,F]=t.useState(w?.navlink);t.useEffect(()=>{u||(te(s)?oe.addTiming("chatgpt.web.chatPage.renderNewConversation"):oe.addTiming("chatgpt.web.chatPage.renderExistingConversation"))},[s,u]);const{setTargetedContent:U}=Mo(),K=g?.includes(Ns),j=N>=2,Qe=t.useContext(_s),[Y,de]=Q(r=>[ks(r),$(r)]),ue=_e(),z=ce(),{isOpen:he}=Ve(),M=!!b,i=te(s)&&!j&&(Pe(d)||d?.kind===Rs.GizmoTest)&&!ue&&!z&&w==null&&(!Y||M),me=i&&!A&&w==null&&(!Y||M),$e=Os(h)?.id,O=T??$e??null,pe=!!T,Z=Hs.useStore();t.useEffect(()=>{if(O===Ls)return Z.setActiveSystemHint(Me,{locked:!0,analyticsMetadata:{clientThreadId:s}}),()=>{Z.setActiveSystemHint(null,{locked:!1,ifPrevSystemHint:Me,analyticsMetadata:{clientThreadId:s}})}},[O,Z,s]);const Ke=Ds(h?.models,O),B=Eo(s,d),ge=Ao();t.useEffect(()=>{ge||U(void 0)},[s,U,ge,E]),t.useEffect(()=>{re.setIsConversationScrolledFromTop(!1)},[s]),t.useEffect(()=>{const r=new URLSearchParams(window.location.search),Te=r.get("src");if(Te==="history_search"){r.delete("src");const W=r.toString(),ls=`${window.location.pathname}${W?`?${W}`:""}${window.location.hash}`;window.history.replaceState({},document.title,ls)}S&&Te==="history_search"&&Fs.safePatch("/conversation/{conversation_id}",{parameters:{path:{conversation_id:S}},requestBody:{touch:!0},intercomEventOnError:"fetch-error:conversation:edit"}).then(()=>{const W=Us(a);zs(W,b)})},[a,S,b]);const xe=No(s),fe=t.useCallback(r=>{xe(n?n(r):r)},[xe,n]),Se=_o(),Ye=Bs(),X=t.useRef(null);X.current=r=>{i&&!Ye&&!Y&&Ge(a,"3253785454").get("should_animate_composer",!1)?ko({className:ut["composer-slide"],update:()=>fe(r)}):fe(r)};const H=t.useCallback(r=>X.current?.(r),[X]);t.useEffect(()=>{Se.signalTransitionReady()},[Se,s]),Ro(s,H),Oo(i);const Ze=Ho({clientThreadId:s,handleRequestCompletion:H,prefetchSearchThreadIdPromise:w?.threadId})&&m==null,J=t.useRef(null);t.useEffect(()=>{z||(document.title=B??"ChatGPT")},[B,z]);const Xe=Gs(Qe),ee=Ue(a),Je=ee&&!ee.isTeam()&&!ee.isEnterprisey(),ve=!l&&!Xe&&!de&&!(i&&Je)&&Pe(d),es=Lo(s).isOdysseyMode,Ce=t.useRef(null),be=t.useRef(null),je=Do(r=>r.composerHeight),ye=!i&&!he,ss=Ws(),os=ie(b),_=M&&os,G=!_,ts=i,as=t.useCallback(()=>F(void 0),[]),{isSingleLine:we}=Vs(),rs=Fo();function ns(){return e.jsx(nt,{clientThreadId:s,scrollContainerRef:J})}function is(){return u||Ze?null:me?p??e.jsx(e.Fragment,{children:M?e.jsx(it,{clientThreadId:s,gizmoId:b,onRequestCompletion:H,currentModelId:O}):e.jsx(lt,{clientThreadId:s,currentModelId:O,isModelLoaded:pe})}):j||m!=null?e.jsx(Pt,{clientThreadId:s,isNewScrollEnabled:C,pageLoadSearchQuery:m,messagesVerticalAlign:c,footerRootContainerElementRef:be,threadRootRef:Ce,scrollContainerRef:J,hideHeader:o,children:e.jsx(St,{onRequestCompletion:H,clientThreadId:s,scrollContainerRef:J,pageLoadSearchQuery:m,prefetchNavlink:P,clearPrefetchNavlink:as},s)}):null}return e.jsx(Uo.Provider,{value:P?"user-query-with-navlink":m?"user-query":null,children:e.jsx(zo,{serverThreadId:S,children:e.jsx(Bo,{clientThreadId:s,children:e.jsxs(qs,{clientThreadId:s,children:[e.jsx(At,{clientThreadId:s,conversationTurnsLength:N}),K&&e.jsx(Tt,{}),!z&&e.jsx(Go,{children:B!=null&&e.jsx("title",{children:B})}),e.jsx(Is.Provider,{value:H,children:e.jsxs(Wo,{children:[e.jsx("div",{id:"thread",ref:Ce,className:y("group/thread @container/thread h-full w-full",C&&Ko.threadRoot),children:e.jsxs(ht,{noKeyboard:!0,clientThreadId:s,currentModelConfig:Ke,className:y("composer-parent flex h-full flex-col focus-visible:outline-0",!_&&"overflow-hidden"),children:[!o&&e.jsx(jt,{transparentBackground:i,clientThreadId:s,isEmptyState:me}),V(a,"1909635392")&&e.jsx(Vo,{clientThreadId:s}),e.jsxs("div",{className:y("relative flex basis-auto flex-col",ye&&"-mb-(--composer-overlap-px)",ye&&(we?"[--composer-overlap-px:28px]":"[--composer-overlap-px:55px]"),_||M||!i?"grow":"shrink",!i&&"overflow-hidden",i&&v&&"min-[510px]:min-h-[21svh]!",i&&!_&&!M&&"flex-col justify-end min-[510px]:min-h-[42svh] @max-[510px]/thread:grow @max-[510px]/thread:justify-center"),style:{"--composer-height":je?`${je}px`:void 0},children:[rs&&ns(),is(),!1]}),e.jsxs("div",{id:"thread-bottom-container",className:y("relative isolate z-10 w-full basis-auto has-data-has-thread-error:pt-2 has-data-has-thread-error:[box-shadow:var(--sharp-edge-bottom-shadow)] md:border-transparent md:pt-0 dark:border-white/20 md:dark:border-transparent",!i&&"content-fade",we&&"single-line",i&&"min-h-0",!ve&&!de&&!es&&"mb-4",M||_||!i?"":G&&i&&ss?"@lg/thread:grow":"lg:grow",G&&"flex flex-col"),ref:be,children:[R?e.jsx(qo,{clientThreadId:s}):e.jsxs(e.Fragment,{children:[(!i||G)&&!he&&e.jsxs(e.Fragment,{children:[e.jsx(mt,{isGizmoThread:M,isProjectThread:_,clientThreadId:s,isNewThread:i,currentModelId:O,onRequestCompletion:H,shouldUseUnifiedComposer:G,isModelLoaded:pe}),x&&i&&V(a,"537200474")&&e.jsx(Io,{clientThreadId:s})]}),ts&&e.jsx(Qo,{clientThreadId:s,isGizmoThread:M,isNewThread:i,isProjectThread:_})]}),ve?e.jsx("div",{className:"text-token-text-secondary relative mt-auto flex min-h-8 w-full items-center justify-center p-2 text-center text-xs md:px-[60px]",children:e.jsx($o,{clientThreadId:s})}):null]})]})}),e.jsx(Yo,{clientThreadId:s,isStaticSharedThread:!1,isDynamicSharedThread:ue}),e.jsx(Zo,{}),e.jsx(Xo,{conversationId:s}),e.jsx(Jo,{}),e.jsx(et,{})]})})]})})})})},zt=We.memo(Mt);function Et({clientThreadId:s,conversationTurnsLength:n}){const l=D(),o=ne(s),c=V(l,"733205176");return st(o,c),ot(),tt(),at(s),rt(n,s),null}const At=We.memo(Et);export{Ct as C,zt as M};
//# sourceMappingURL=guo5l9txshtco59p.js.map
