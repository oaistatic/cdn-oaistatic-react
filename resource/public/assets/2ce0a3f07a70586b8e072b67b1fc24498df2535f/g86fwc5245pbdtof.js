import{cE as _,on as we,oA as ae,mh as _e,oB as Ue}from"./cim4usely8ixso70.js";import{g2 as O,g3 as b,g4 as T,g5 as a,g6 as F,g7 as y,g8 as q,g9 as m,ga as M,gb as ze,gc as Te,gd as qe,ge}from"./ivbsxyeeopn30y8l.js";import"./n97h6so7iblif4c5.js";class K{static interfaceName="web.bridge.AgentHandler";static interfaceVersion=0}(e=>{let i;(t=>{t.VERSION_INFO=[{version:0,size:16}],t.CURRENT_VERSION=t.VERSION_INFO[t.VERSION_INFO.length-1];function s(E){return O.bytes(t.CURRENT_VERSION.size).add(O.forString(E.agentid))}t.measure=s;function f(E,V){E.setString(0,V.agentid)}t.encode=f;function N(E,V){return{agentid:b(E.getString(0))}}t.decode=N})(i=e.AgentHandler_TryOpenAgentViewer_Params||(e.AgentHandler_TryOpenAgentViewer_Params={}));let o;(t=>{t.VERSION_INFO=[{version:0,size:16}],t.CURRENT_VERSION=t.VERSION_INFO[t.VERSION_INFO.length-1];function s(E){return O.bytes(t.CURRENT_VERSION.size)}t.measure=s;function f(E,V){let w=0;V.response&&(w|=1),E.setU8(0,w)}t.encode=f;function N(E,V){return{response:(E.getU8(0)&1)!=0}}t.decode=N})(o=e.AgentHandler_TryOpenAgentViewer_ResponseParams||(e.AgentHandler_TryOpenAgentViewer_ResponseParams={}));let u;(t=>{t.VERSION_INFO=[{version:0,size:8}],t.CURRENT_VERSION=t.VERSION_INFO[t.VERSION_INFO.length-1];function s(E){return O.bytes(t.CURRENT_VERSION.size)}t.measure=s;function f(E,V){}t.encode=f;function N(E,V){return{}}t.decode=N})(u=e.AgentHandler_GetClientID_Params||(e.AgentHandler_GetClientID_Params={}));let n;(t=>{t.VERSION_INFO=[{version:0,size:16}],t.CURRENT_VERSION=t.VERSION_INFO[t.VERSION_INFO.length-1];function s(E){return O.bytes(t.CURRENT_VERSION.size).add(O.forString(E.clientid))}t.measure=s;function f(E,V){E.setString(0,V.clientid)}t.encode=f;function N(E,V){return{clientid:b(E.getString(0))}}t.decode=N})(n=e.AgentHandler_GetClientID_ResponseParams||(e.AgentHandler_GetClientID_ResponseParams={}));let c;(t=>{t.VERSION_INFO=[{version:0,size:16}],t.CURRENT_VERSION=t.VERSION_INFO[t.VERSION_INFO.length-1];function s(E){return O.bytes(t.CURRENT_VERSION.size).add(O.forString(E.agentid))}t.measure=s;function f(E,V){E.setString(0,V.agentid)}t.encode=f;function N(E,V){return{agentid:b(E.getString(0))}}t.decode=N})(c=e.AgentHandler_UserSentMessageInAgentConversation_Params||(e.AgentHandler_UserSentMessageInAgentConversation_Params={}));class R{constructor(s){this._endpoint=new T(s.endpointState,!0),this._version=0}static create(){const[s,f]=a.createChannel(e);return[new R(s),f]}static createToBrowser(){const[s,f]=this.create();return Mojo.bindInterface(e.interfaceName,f.pipe.rawHandle),s}async tryOpenAgentViewer(s){const f={agentid:s};return(await this._endpoint.sendAndAwaitResponse(F.encode(0,y.None,i,f))).decode(o).response}async getClientID(){const s={};return(await this._endpoint.sendAndAwaitResponse(F.encode(1,y.None,u,s))).decode(n).clientid}userSentMessageInAgentConversation(s){const f={agentid:s};this._endpoint.send(F.encode(2,y.None,c,f))}_endpoint;_version}e.Proxy=R;class d extends q{constructor(){super(e)}onDisconnect;bind(s,f){this.addReceiver(f,async(N,E)=>{switch(N.header.ordinal){case 0:{const V=N.decode(i),w=s.tryOpenAgentViewer(V.agentid),z=E.createResponder(o,0,N.header.requestID),B=await w;z({response:B});break}case 1:{N.decode(u);const V=s.getClientID(),w=E.createResponder(n,1,N.header.requestID),z=await V;w({clientid:z});break}case 2:{const V=N.decode(c);s.userSentMessageInAgentConversation(V.agentid);break}default:N.header.expectsResponse&&E.sendUnimplementedResponse(N.header.requestID,N.header.ordinal)}return Promise.resolve()},()=>{this.onDisconnect&&this.onDisconnect(s)})}createRemote(s){const[f,N]=a.createChannel(e);return this.bind(s,N),f}}e.Dispatcher=d})(K||(K={}));var Q;(e=>{e.VERSION_INFO=[{version:0,size:32}],e.CURRENT_VERSION=e.VERSION_INFO[e.VERSION_INFO.length-1];function i(n){return O.bytes(e.CURRENT_VERSION.size).add(O.forString(n.accessToken)).add(O.forString(n.idToken))}e.measure=i;function o(n,c){n.setString(0,c.accessToken),n.setString(8,c.idToken),n.setF64(16,c.expiresTimestampMsSince1970)}e.encode=o;function u(n,c){return{accessToken:b(n.getString(0)),idToken:b(n.getString(8)),expiresTimestampMsSince1970:b(n.getF64(16))}}e.decode=u})(Q||(Q={}));var C;(e=>{function i(u){if(u==="justLoggedInAccessToken")return 0;if(u==="reloadPageIfLoggedOut")return 1;if(u==="fullTokenToSessionConversion")return 2;throw new m}e.encode=i;function o(u){switch(u){case 0:return"justLoggedInAccessToken";case 1:return"reloadPageIfLoggedOut";case 2:return"fullTokenToSessionConversion";default:return"justLoggedInAccessToken"}}e.decode=o})(C||(C={}));class ee{static interfaceName="web.bridge.AuthHandler";static interfaceVersion=0}(e=>{let i;(c=>{c.VERSION_INFO=[{version:0,size:8}],c.CURRENT_VERSION=c.VERSION_INFO[c.VERSION_INFO.length-1];function R(s){return O.bytes(c.CURRENT_VERSION.size)}c.measure=R;function d(s,f){}c.encode=d;function t(s,f){return{}}c.decode=t})(i=e.AuthHandler_HandleMissingSessionAuth_Params||(e.AuthHandler_HandleMissingSessionAuth_Params={}));let o;(c=>{c.VERSION_INFO=[{version:0,size:8}],c.CURRENT_VERSION=c.VERSION_INFO[c.VERSION_INFO.length-1];function R(s){return O.bytes(c.CURRENT_VERSION.size)}c.measure=R;function d(s,f){}c.encode=d;function t(s,f){return{}}c.decode=t})(o=e.AuthHandler_RecordAvailableSessionAuth_Params||(e.AuthHandler_RecordAvailableSessionAuth_Params={}));class u{constructor(R){this._endpoint=new T(R.endpointState,!0),this._version=0}static create(){const[R,d]=a.createChannel(e);return[new u(R),d]}static createToBrowser(){const[R,d]=this.create();return Mojo.bindInterface(e.interfaceName,d.pipe.rawHandle),R}handleMissingSessionAuth(){const R={};this._endpoint.send(F.encode(0,y.None,i,R))}recordAvailableSessionAuth(){const R={};this._endpoint.send(F.encode(1,y.None,o,R))}_endpoint;_version}e.Proxy=u;class n extends q{constructor(){super(e)}onDisconnect;bind(R,d){this.addReceiver(d,async(t,s)=>{switch(t.header.ordinal){case 0:{t.decode(i),R.handleMissingSessionAuth();break}case 1:{t.decode(o),R.recordAvailableSessionAuth();break}default:t.header.expectsResponse&&s.sendUnimplementedResponse(t.header.requestID,t.header.ordinal)}return Promise.resolve()},()=>{this.onDisconnect&&this.onDisconnect(R)})}createRemote(R){const[d,t]=a.createChannel(e);return this.bind(R,t),d}}e.Dispatcher=n})(ee||(ee={}));class H{static interfaceName="web.bridge.AuthStateController";static interfaceVersion=0}(e=>{let i;(n=>{n.VERSION_INFO=[{version:0,size:24}],n.CURRENT_VERSION=n.VERSION_INFO[n.VERSION_INFO.length-1];function c(t){return O.bytes(n.CURRENT_VERSION.size).add(O.forObject(Q,t.authToken))}n.measure=c;function R(t,s){t.setObjectIndirect(Q,0,s.authToken),t.setEnumValue(C,8,s.behavior)}n.encode=R;function d(t,s){return{authToken:b(t.getObjectIndirect(Q,0)),behavior:b(t.getEnumValue(C,8))}}n.decode=d})(i=e.AuthStateController_RefreshSessionContext_Params||(e.AuthStateController_RefreshSessionContext_Params={}));class o{constructor(c){this._endpoint=new T(c.endpointState,!0),this._version=0}static create(){const[c,R]=a.createChannel(e);return[new o(c),R]}static createToBrowser(){const[c,R]=this.create();return Mojo.bindInterface(e.interfaceName,R.pipe.rawHandle),c}refreshSessionContext(c,R){const d={authToken:c,behavior:R};this._endpoint.send(F.encode(0,y.None,i,d))}_endpoint;_version}e.Proxy=o;class u extends q{constructor(){super(e)}onDisconnect;bind(c,R){this.addReceiver(R,async(d,t)=>{switch(d.header.ordinal){case 0:{const s=d.decode(i);c.refreshSessionContext(s.authToken,s.behavior);break}default:d.header.expectsResponse&&t.sendUnimplementedResponse(d.header.requestID,d.header.ordinal)}return Promise.resolve()},()=>{this.onDisconnect&&this.onDisconnect(c)})}createRemote(c){const[R,d]=a.createChannel(e);return this.bind(c,d),R}}e.Dispatcher=u})(H||(H={}));var X;(e=>{e.VERSION_INFO=[{version:0,size:32}],e.CURRENT_VERSION=e.VERSION_INFO[e.VERSION_INFO.length-1];function i(n){return O.bytes(e.CURRENT_VERSION.size).add(O.forString(n.conduitToken))}e.measure=i;function o(n,c){n.setEnumValue(ne,0,c.prepareState),n.setF64(8,c.lastPrepareTimestampMsSince1970),n.setString(16,c.conduitToken)}e.encode=o;function u(n,c){return{prepareState:b(n.getEnumValue(ne,0)),lastPrepareTimestampMsSince1970:b(n.getF64(8)),conduitToken:b(n.getString(16))}}e.decode=u})(X||(X={}));var Y;(e=>{e.VERSION_INFO=[{version:0,size:16}],e.CURRENT_VERSION=e.VERSION_INFO[e.VERSION_INFO.length-1];function i(n){return O.bytes(e.CURRENT_VERSION.size)}e.measure=i;function o(n,c){n.setEnumValue(ce,0,c.selectedTab)}e.encode=o;function u(n,c){return{selectedTab:b(n.getEnumValue(ce,0))}}e.decode=u})(Y||(Y={}));var Z;(e=>{e.VERSION_INFO=[{version:0,size:56}],e.CURRENT_VERSION=e.VERSION_INFO[e.VERSION_INFO.length-1];function i(n){return O.bytes(e.CURRENT_VERSION.size).add(O.forString(n.id)).add(O.forString(n.name)).add(O.forString(n.mimeType))}e.measure=i;function o(n,c){let R=0;n.setString(0,c.id),n.setI64(8,c.size),n.setString(16,c.name),n.setString(24,c.mimeType),c.width!==null&&c.width!==void 0&&(R|=1,n.setI32(36,c.width)),c.height!==null&&c.height!==void 0&&(R|=2,n.setI32(40,c.height)),c.fileTokenSize!==null&&c.fileTokenSize!==void 0&&(R|=4,n.setI32(44,c.fileTokenSize)),n.setU8(32,R)}e.encode=o;function u(n,c){const R=n.getU8(32),d=(R&1)!=0,t=(R&2)!=0,s=(R&4)!=0;return{id:b(n.getString(0)),size:b(n.getI64(8)),name:b(n.getString(16)),mimeType:b(n.getString(24)),...d?{width:b(n.getI32(36))}:{},...t?{height:b(n.getI32(40))}:{},...s?{fileTokenSize:b(n.getI32(44))}:{}}}e.decode=u})(Z||(Z={}));var v;(e=>{e.VERSION_INFO=[{version:0,size:40},{version:1,size:48},{version:2,size:56}],e.CURRENT_VERSION=e.VERSION_INFO[e.VERSION_INFO.length-1];function i(n){return O.bytes(e.CURRENT_VERSION.size).add(O.forString(n.id)).add(O.forString(n.url)).add(O.forString(n.title)).add(O.forString(n.base64favicon??null)).add(O.forString(n.selection??null))}e.measure=i;function o(n,c){let R=0;n.setString(0,c.id),n.setString(8,c.url),n.setString(16,c.title),n.setString(24,c.base64favicon??null),n.setString(32,c.selection??null),c.blocked!==null&&c.blocked!==void 0&&(R|=1,c.blocked&&(R|=2)),n.setU8(40,R)}e.encode=o;function u(n,c){const R=n.getString(24),d=c>=1?n.getString(32):null,t=c>=2?n.getU8(40):0,s=(t&1)!=0;return{id:b(n.getString(0)),url:b(n.getString(8)),title:b(n.getString(16)),...R!==null?{base64favicon:R}:{},...d!==null?{selection:d}:{},...s?{blocked:(t&2)!=0}:{}}}e.decode=u})(v||(v={}));var te;(e=>{function i(u){if(u==="mainPage")return 0;if(u==="sidebar")return 1;throw new m}e.encode=i;function o(u){switch(u){case 0:return"mainPage";case 1:return"sidebar";default:throw new m}}e.decode=o})(te||(te={}));var ne;(e=>{function i(u){if(u==="none")return 0;if(u==="sent")return 1;if(u==="success")return 2;if(u==="failure")return 3;throw new m}e.encode=i;function o(u){switch(u){case 0:return"none";case 1:return"sent";case 2:return"success";case 3:return"failure";default:return"none"}}e.decode=o})(ne||(ne={}));var ce;(e=>{function i(u){if(u==="answer")return 0;if(u==="web")return 1;if(u==="images")return 2;if(u==="videos")return 3;throw new m}e.encode=i;function o(u){switch(u){case 0:return"answer";case 1:return"web";case 2:return"images";case 3:return"videos";default:return"answer"}}e.decode=o})(ce||(ce={}));var se;(e=>{function i(u){if(u==="default_")return 0;if(u==="blue")return 1;if(u==="green")return 2;if(u==="yellow")return 3;if(u==="purple")return 4;if(u==="pink")return 5;if(u==="orange")return 6;if(u==="black")return 7;throw new m}e.encode=i;function o(u){switch(u){case 0:return"default_";case 1:return"blue";case 2:return"green";case 3:return"yellow";case 4:return"purple";case 5:return"pink";case 6:return"orange";case 7:return"black";default:return"default_"}}e.decode=o})(se||(se={}));var ie;(e=>{function i(u){if(u==="none")return 0;if(u==="startTakeoverFromAgent")return 1;if(u==="endTakeoverFromAgent")return 2;if(u==="stopAgent")return 3;throw new m}e.encode=i;function o(u){switch(u){case 0:return"none";case 1:return"startTakeoverFromAgent";case 2:return"endTakeoverFromAgent";case 3:return"stopAgent";default:return"none"}}e.decode=o})(ie||(ie={}));class P{static interfaceName="web.bridge.ConversationController";static interfaceVersion=2}(e=>{let i;(r=>{r.VERSION_INFO=[{version:0,size:16}],r.CURRENT_VERSION=r.VERSION_INFO[r.VERSION_INFO.length-1];function S(I){return O.bytes(r.CURRENT_VERSION.size)}r.measure=S;function g(I,h){I.setEnumValue(te,0,h.windowStyle)}r.encode=g;function p(I,h){return{windowStyle:b(I.getEnumValue(te,0))}}r.decode=p})(i=e.ConversationController_SetWindowStyle_Params||(e.ConversationController_SetWindowStyle_Params={}));let o;(r=>{r.VERSION_INFO=[{version:0,size:16}],r.CURRENT_VERSION=r.VERSION_INFO[r.VERSION_INFO.length-1];function S(I){return O.bytes(r.CURRENT_VERSION.size).add(O.forString(I.modelSlug))}r.measure=S;function g(I,h){I.setString(0,h.modelSlug)}r.encode=g;function p(I,h){return{modelSlug:b(I.getString(0))}}r.decode=p})(o=e.ConversationController_SetModel_Params||(e.ConversationController_SetModel_Params={}));let u;(r=>{r.VERSION_INFO=[{version:0,size:8}],r.CURRENT_VERSION=r.VERSION_INFO[r.VERSION_INFO.length-1];function S(I){return O.bytes(r.CURRENT_VERSION.size)}r.measure=S;function g(I,h){}r.encode=g;function p(I,h){return{}}r.decode=p})(u=e.ConversationController_NewConversation_Params||(e.ConversationController_NewConversation_Params={}));let n;(r=>{r.VERSION_INFO=[{version:0,size:16}],r.CURRENT_VERSION=r.VERSION_INFO[r.VERSION_INFO.length-1];function S(I){return O.bytes(r.CURRENT_VERSION.size).add(O.forString(I.remoteConversationId))}r.measure=S;function g(I,h){I.setString(0,h.remoteConversationId)}r.encode=g;function p(I,h){return{remoteConversationId:b(I.getString(0))}}r.decode=p})(n=e.ConversationController_LoadConversation_Params||(e.ConversationController_LoadConversation_Params={}));let c;(r=>{r.VERSION_INFO=[{version:0,size:32}],r.CURRENT_VERSION=r.VERSION_INFO[r.VERSION_INFO.length-1];function S(I){return O.bytes(r.CURRENT_VERSION.size).add(O.forString(I.prompt)).add(O.forStringArray(I.systemHints)).add(O.forString(I.modelSlug))}r.measure=S;function g(I,h){I.setString(0,h.prompt),I.setStringArray(8,h.systemHints),I.setString(16,h.modelSlug)}r.encode=g;function p(I,h){return{prompt:b(I.getString(0)),systemHints:b(M(I.getStringArray(8))),modelSlug:b(I.getString(16))}}r.decode=p})(c=e.ConversationController_RequestCompletion_Params||(e.ConversationController_RequestCompletion_Params={}));let R;(r=>{r.VERSION_INFO=[{version:0,size:24}],r.CURRENT_VERSION=r.VERSION_INFO[r.VERSION_INFO.length-1];function S(I){return O.bytes(r.CURRENT_VERSION.size).add(O.forString(I.userMessage??null)).add(O.forString(I.targetedReply??null))}r.measure=S;function g(I,h){I.setString(0,h.userMessage??null),I.setString(8,h.targetedReply??null)}r.encode=g;function p(I,h){const x=I.getString(0),J=I.getString(8);return{...x!==null?{userMessage:x}:{},...J!==null?{targetedReply:J}:{}}}r.decode=p})(R=e.ConversationController_PopulatePrompt_Params||(e.ConversationController_PopulatePrompt_Params={}));let d;(r=>{r.VERSION_INFO=[{version:0,size:32},{version:1,size:40},{version:2,size:48}],r.CURRENT_VERSION=r.VERSION_INFO[r.VERSION_INFO.length-1];function S(I){return O.bytes(r.CURRENT_VERSION.size).add(O.forString(I.url)).add(O.forString(I.title)).add(O.forString(I.base64favicon??null)).add(O.forString(I.selection??null))}r.measure=S;function g(I,h){let x=0;I.setString(0,h.url),I.setString(8,h.title),I.setString(16,h.base64favicon??null),I.setString(24,h.selection??null),h.blocked!==null&&h.blocked!==void 0&&(x|=1,h.blocked&&(x|=2)),I.setU8(32,x)}r.encode=g;function p(I,h){const x=I.getString(16),J=h>=1?I.getString(24):null,Ve=h>=2?I.getU8(32):0,ye=(Ve&1)!=0;return{url:b(I.getString(0)),title:b(I.getString(8)),...x!==null?{base64favicon:x}:{},...J!==null?{selection:J}:{},...ye?{blocked:(Ve&2)!=0}:{}}}r.decode=p})(d=e.ConversationController_UpdateContext_Params||(e.ConversationController_UpdateContext_Params={}));let t;(r=>{r.VERSION_INFO=[{version:0,size:16}],r.CURRENT_VERSION=r.VERSION_INFO[r.VERSION_INFO.length-1];function S(I){return O.bytes(r.CURRENT_VERSION.size).add(O.forObject(X,I.details))}r.measure=S;function g(I,h){I.setObjectIndirect(X,0,h.details)}r.encode=g;function p(I,h){return{details:b(I.getObjectIndirect(X,0))}}r.decode=p})(t=e.ConversationController_PrepareConversation_Params||(e.ConversationController_PrepareConversation_Params={}));let s;(r=>{r.VERSION_INFO=[{version:0,size:16}],r.CURRENT_VERSION=r.VERSION_INFO[r.VERSION_INFO.length-1];function S(I){return O.bytes(r.CURRENT_VERSION.size).add(O.forObject(Y,I.options))}r.measure=S;function g(I,h){I.setObjectIndirect(Y,0,h.options)}r.encode=g;function p(I,h){return{options:b(I.getObjectIndirect(Y,0))}}r.decode=p})(s=e.ConversationController_SetSuperWidgetOptions_Params||(e.ConversationController_SetSuperWidgetOptions_Params={}));let f;(r=>{r.VERSION_INFO=[{version:0,size:16}],r.CURRENT_VERSION=r.VERSION_INFO[r.VERSION_INFO.length-1];function S(I){return O.bytes(r.CURRENT_VERSION.size).add(O.forObjectArray(Z,I.attachments))}r.measure=S;function g(I,h){I.setObjectArray(Z,0,h.attachments)}r.encode=g;function p(I,h){return{attachments:b(M(I.getObjectArray(Z,0)))}}r.decode=p})(f=e.ConversationController_SetAttachments_Params||(e.ConversationController_SetAttachments_Params={}));let N;(r=>{r.VERSION_INFO=[{version:0,size:16}],r.CURRENT_VERSION=r.VERSION_INFO[r.VERSION_INFO.length-1];function S(I){return O.bytes(r.CURRENT_VERSION.size).add(O.forString(I.to))}r.measure=S;function g(I,h){I.setString(0,h.to)}r.encode=g;function p(I,h){return{to:b(I.getString(0))}}r.decode=p})(N=e.ConversationController_Navigate_Params||(e.ConversationController_Navigate_Params={}));let E;(r=>{r.VERSION_INFO=[{version:0,size:16}],r.CURRENT_VERSION=r.VERSION_INFO[r.VERSION_INFO.length-1];function S(I){return O.bytes(r.CURRENT_VERSION.size).add(O.forObject(D,I.whisperContent))}r.measure=S;function g(I,h){I.setObjectIndirect(D,0,h.whisperContent)}r.encode=g;function p(I,h){return{whisperContent:b(I.getObjectIndirect(D,0))}}r.decode=p})(E=e.ConversationController_SetWhisperContent_Params||(e.ConversationController_SetWhisperContent_Params={}));let V;(r=>{r.VERSION_INFO=[{version:0,size:16}],r.CURRENT_VERSION=r.VERSION_INFO[r.VERSION_INFO.length-1];function S(I){return O.bytes(r.CURRENT_VERSION.size).add(O.forObjectArray(v,I.tabs))}r.measure=S;function g(I,h){I.setObjectArray(v,0,h.tabs)}r.encode=g;function p(I,h){return{tabs:b(M(I.getObjectArray(v,0)))}}r.decode=p})(V=e.ConversationController_SetTabContext_Params||(e.ConversationController_SetTabContext_Params={}));let w;(r=>{r.VERSION_INFO=[{version:0,size:16}],r.CURRENT_VERSION=r.VERSION_INFO[r.VERSION_INFO.length-1];function S(I){return O.bytes(r.CURRENT_VERSION.size).add(O.forString(I.origin))}r.measure=S;function g(I,h){I.setString(0,h.origin)}r.encode=g;function p(I,h){return{origin:b(I.getString(0))}}r.decode=p})(w=e.ConversationController_SetPromptOrigin_Params||(e.ConversationController_SetPromptOrigin_Params={}));let z;(r=>{r.VERSION_INFO=[{version:0,size:8}],r.CURRENT_VERSION=r.VERSION_INFO[r.VERSION_INFO.length-1];function S(I){return O.bytes(r.CURRENT_VERSION.size)}r.measure=S;function g(I,h){}r.encode=g;function p(I,h){return{}}r.decode=p})(z=e.ConversationController_CloseNavigationSidebar_Params||(e.ConversationController_CloseNavigationSidebar_Params={}));let B;(r=>{r.VERSION_INFO=[{version:0,size:16}],r.CURRENT_VERSION=r.VERSION_INFO[r.VERSION_INFO.length-1];function S(I){return O.bytes(r.CURRENT_VERSION.size)}r.measure=S;function g(I,h){I.setEnumValue(se,0,h.theme)}r.encode=g;function p(I,h){return{theme:b(I.getEnumValue(se,0))}}r.decode=p})(B=e.ConversationController_SetChatTheme_Params||(e.ConversationController_SetChatTheme_Params={}));let Re;(r=>{r.VERSION_INFO=[{version:0,size:8}],r.CURRENT_VERSION=r.VERSION_INFO[r.VERSION_INFO.length-1];function S(I){return O.bytes(r.CURRENT_VERSION.size)}r.measure=S;function g(I,h){}r.encode=g;function p(I,h){return{}}r.decode=p})(Re=e.ConversationController_ShowSearch_Params||(e.ConversationController_ShowSearch_Params={}));let Ie;(r=>{r.VERSION_INFO=[{version:0,size:24}],r.CURRENT_VERSION=r.VERSION_INFO[r.VERSION_INFO.length-1];function S(I){return O.bytes(r.CURRENT_VERSION.size).add(O.forString(I.query)).add(O.forString(I.navlinksEvent))}r.measure=S;function g(I,h){I.setString(0,h.query),I.setString(8,h.navlinksEvent)}r.encode=g;function p(I,h){return{query:b(I.getString(0)),navlinksEvent:b(I.getString(8))}}r.decode=p})(Ie=e.ConversationController_PopulateNavlinks_Params||(e.ConversationController_PopulateNavlinks_Params={}));let Oe;(r=>{r.VERSION_INFO=[{version:0,size:16}],r.CURRENT_VERSION=r.VERSION_INFO[r.VERSION_INFO.length-1];function S(I){return O.bytes(r.CURRENT_VERSION.size)}r.measure=S;function g(I,h){I.setEnumValue(ie,0,h.request)}r.encode=g;function p(I,h){return{request:b(I.getEnumValue(ie,0))}}r.decode=p})(Oe=e.ConversationController_HandleAgentRequest_Params||(e.ConversationController_HandleAgentRequest_Params={}));class fe{constructor(S){this._endpoint=new T(S.endpointState,!0),this._version=2}static create(){const[S,g]=a.createChannel(e);return[new fe(S),g]}static createToBrowser(){const[S,g]=this.create();return Mojo.bindInterface(e.interfaceName,g.pipe.rawHandle),S}setWindowStyle(S){const g={windowStyle:S};this._endpoint.send(F.encode(0,y.None,i,g))}setModel(S){const g={modelSlug:S};this._endpoint.send(F.encode(1,y.None,o,g))}newConversation(){const S={};this._endpoint.send(F.encode(2,y.None,u,S))}loadConversation(S){const g={remoteConversationId:S};this._endpoint.send(F.encode(3,y.None,n,g))}requestCompletion(S,g,p){const I={prompt:S,systemHints:g,modelSlug:p};this._endpoint.send(F.encode(4,y.None,c,I))}populatePrompt(S,g){const p={userMessage:S,targetedReply:g};this._endpoint.send(F.encode(5,y.None,R,p))}updateContext(S,g,p,I,h){const x={url:S,title:g,base64favicon:p,selection:I,blocked:h};this._endpoint.send(F.encode(6,y.None,d,x))}prepareConversation(S){const g={details:S};this._endpoint.send(F.encode(7,y.None,t,g))}setSuperWidgetOptions(S){const g={options:S};this._endpoint.send(F.encode(8,y.None,s,g))}setAttachments(S){const g={attachments:S};this._endpoint.send(F.encode(9,y.None,f,g))}navigate(S){const g={to:S};this._endpoint.send(F.encode(10,y.None,N,g))}setWhisperContent(S){const g={whisperContent:S};this._endpoint.send(F.encode(11,y.None,E,g))}setTabContext(S){const g={tabs:S};this._endpoint.send(F.encode(12,y.None,V,g))}setPromptOrigin(S){const g={origin:S};this._endpoint.send(F.encode(13,y.None,w,g))}closeNavigationSidebar(){const S={};this._endpoint.send(F.encode(14,y.None,z,S))}setChatTheme(S){const g={theme:S};this._endpoint.send(F.encode(15,y.None,B,g))}showSearch(){const S={};this._endpoint.send(F.encode(16,y.None,Re,S))}populateNavlinks(S,g){const p={query:S,navlinksEvent:g};this._endpoint.send(F.encode(17,y.None,Ie,p))}handleAgentRequest(S){const g={request:S};this._endpoint.send(F.encode(18,y.None,Oe,g))}_endpoint;_version}e.Proxy=fe;class Fe extends q{constructor(){super(e)}onDisconnect;bind(S,g){this.addReceiver(g,async(p,I)=>{switch(p.header.ordinal){case 0:{const h=p.decode(i);S.setWindowStyle(h.windowStyle);break}case 1:{const h=p.decode(o);S.setModel(h.modelSlug);break}case 2:{p.decode(u),S.newConversation();break}case 3:{const h=p.decode(n);S.loadConversation(h.remoteConversationId);break}case 4:{const h=p.decode(c);S.requestCompletion(h.prompt,h.systemHints,h.modelSlug);break}case 5:{const h=p.decode(R);S.populatePrompt(h.userMessage,h.targetedReply);break}case 6:{const h=p.decode(d);S.updateContext(h.url,h.title,h.base64favicon,h.selection,h.blocked);break}case 7:{const h=p.decode(t);S.prepareConversation(h.details);break}case 8:{const h=p.decode(s);S.setSuperWidgetOptions(h.options);break}case 9:{const h=p.decode(f);S.setAttachments(h.attachments);break}case 10:{const h=p.decode(N);S.navigate(h.to);break}case 11:{const h=p.decode(E);S.setWhisperContent(h.whisperContent);break}case 12:{const h=p.decode(V);S.setTabContext(h.tabs);break}case 13:{const h=p.decode(w);S.setPromptOrigin(h.origin);break}case 14:{p.decode(z),S.closeNavigationSidebar();break}case 15:{const h=p.decode(B);S.setChatTheme(h.theme);break}case 16:{p.decode(Re),S.showSearch();break}case 17:{const h=p.decode(Ie);S.populateNavlinks(h.query,h.navlinksEvent);break}case 18:{const h=p.decode(Oe);S.handleAgentRequest(h.request);break}default:p.header.expectsResponse&&I.sendUnimplementedResponse(p.header.requestID,p.header.ordinal)}return Promise.resolve()},()=>{this.onDisconnect&&this.onDisconnect(S)})}createRemote(S){const[g,p]=a.createChannel(e);return this.bind(S,p),g}}e.Dispatcher=Fe})(P||(P={}));class pe{static interfaceName="web.bridge.GenericInterface";static interfaceVersion=0}(e=>{let i;(c=>{c.VERSION_INFO=[{version:0,size:16}],c.CURRENT_VERSION=c.VERSION_INFO[c.VERSION_INFO.length-1];function R(s){return O.bytes(c.CURRENT_VERSION.size).add(O.forString(s.request))}c.measure=R;function d(s,f){s.setString(0,f.request)}c.encode=d;function t(s,f){return{request:b(s.getString(0))}}c.decode=t})(i=e.GenericInterface_AcceptMessage_Params||(e.GenericInterface_AcceptMessage_Params={}));let o;(c=>{c.VERSION_INFO=[{version:0,size:16}],c.CURRENT_VERSION=c.VERSION_INFO[c.VERSION_INFO.length-1];function R(s){return O.bytes(c.CURRENT_VERSION.size).add(O.forString(s.response??null))}c.measure=R;function d(s,f){s.setString(0,f.response??null)}c.encode=d;function t(s,f){const N=s.getString(0);return{...N!==null?{response:N}:{}}}c.decode=t})(o=e.GenericInterface_AcceptMessage_ResponseParams||(e.GenericInterface_AcceptMessage_ResponseParams={}));class u{constructor(R){this._endpoint=new T(R.endpointState,!0),this._version=0}static create(){const[R,d]=a.createChannel(e);return[new u(R),d]}static createToBrowser(){const[R,d]=this.create();return Mojo.bindInterface(e.interfaceName,d.pipe.rawHandle),R}async acceptMessage(R){const d={request:R};return(await this._endpoint.sendAndAwaitResponse(F.encode(0,y.None,i,d))).decode(o).response}_endpoint;_version}e.Proxy=u;class n extends q{constructor(){super(e)}onDisconnect;bind(R,d){this.addReceiver(d,async(t,s)=>{switch(t.header.ordinal){case 0:{const f=t.decode(i),N=R.acceptMessage(f.request),E=s.createResponder(o,0,t.header.requestID),V=await N;E({response:V});break}default:t.header.expectsResponse&&s.sendUnimplementedResponse(t.header.requestID,t.header.ordinal)}return Promise.resolve()},()=>{this.onDisconnect&&this.onDisconnect(R)})}createRemote(R){const[d,t]=a.createChannel(e);return this.bind(R,t),d}}e.Dispatcher=n})(pe||(pe={}));class Ee{static interfaceName="web.bridge.LinkHandler";static interfaceVersion=0}(e=>{let i;(n=>{n.VERSION_INFO=[{version:0,size:24}],n.CURRENT_VERSION=n.VERSION_INFO[n.VERSION_INFO.length-1];function c(t){return O.bytes(n.CURRENT_VERSION.size).add(O.forString(t.url)).add(O.forString(t.target))}n.measure=c;function R(t,s){t.setString(0,s.url),t.setString(8,s.target)}n.encode=R;function d(t,s){return{url:b(t.getString(0)),target:b(t.getString(8))}}n.decode=d})(i=e.LinkHandler_HandleLink_Params||(e.LinkHandler_HandleLink_Params={}));class o{constructor(c){this._endpoint=new T(c.endpointState,!0),this._version=0}static create(){const[c,R]=a.createChannel(e);return[new o(c),R]}static createToBrowser(){const[c,R]=this.create();return Mojo.bindInterface(e.interfaceName,R.pipe.rawHandle),c}handleLink(c,R){const d={url:c,target:R};this._endpoint.send(F.encode(0,y.None,i,d))}_endpoint;_version}e.Proxy=o;class u extends q{constructor(){super(e)}onDisconnect;bind(c,R){this.addReceiver(R,async(d,t)=>{switch(d.header.ordinal){case 0:{const s=d.decode(i);c.handleLink(s.url,s.target);break}default:d.header.expectsResponse&&t.sendUnimplementedResponse(d.header.requestID,d.header.ordinal)}return Promise.resolve()},()=>{this.onDisconnect&&this.onDisconnect(c)})}createRemote(c){const[R,d]=a.createChannel(e);return this.bind(c,d),R}}e.Dispatcher=u})(Ee||(Ee={}));var l;(e=>{e.VERSION_INFO=[{version:0,size:24}],e.CURRENT_VERSION=e.VERSION_INFO[e.VERSION_INFO.length-1];function i(n){return O.bytes(e.CURRENT_VERSION.size).add(O.forString(n.author)).add(O.forString(n.message))}e.measure=i;function o(n,c){n.setString(0,c.author),n.setString(8,c.message)}e.encode=o;function u(n,c){return{author:b(n.getString(0)),message:b(n.getString(8))}}e.decode=u})(l||(l={}));class re{static interfaceName="web.bridge.LocalToolHandler";static interfaceVersion=0}(e=>{let i;(d=>{d.VERSION_INFO=[{version:0,size:24}],d.CURRENT_VERSION=d.VERSION_INFO[d.VERSION_INFO.length-1];function t(N){return O.bytes(d.CURRENT_VERSION.size).add(O.forString(N.toolname)).add(O.forString(N.args))}d.measure=t;function s(N,E){N.setString(0,E.toolname),N.setString(8,E.args)}d.encode=s;function f(N,E){return{toolname:b(N.getString(0)),args:b(N.getString(8))}}d.decode=f})(i=e.LocalToolHandler_CallLocalTool_Params||(e.LocalToolHandler_CallLocalTool_Params={}));let o;(d=>{d.VERSION_INFO=[{version:0,size:16}],d.CURRENT_VERSION=d.VERSION_INFO[d.VERSION_INFO.length-1];function t(N){return O.bytes(d.CURRENT_VERSION.size).add(O.forObjectArray(l,N.response))}d.measure=t;function s(N,E){N.setObjectArray(l,0,E.response)}d.encode=s;function f(N,E){return{response:b(M(N.getObjectArray(l,0)))}}d.decode=f})(o=e.LocalToolHandler_CallLocalTool_ResponseParams||(e.LocalToolHandler_CallLocalTool_ResponseParams={}));let u;(d=>{d.VERSION_INFO=[{version:0,size:8}],d.CURRENT_VERSION=d.VERSION_INFO[d.VERSION_INFO.length-1];function t(N){return O.bytes(d.CURRENT_VERSION.size)}d.measure=t;function s(N,E){}d.encode=s;function f(N,E){return{}}d.decode=f})(u=e.LocalToolHandler_GetToolNames_Params||(e.LocalToolHandler_GetToolNames_Params={}));let n;(d=>{d.VERSION_INFO=[{version:0,size:16}],d.CURRENT_VERSION=d.VERSION_INFO[d.VERSION_INFO.length-1];function t(N){return O.bytes(d.CURRENT_VERSION.size).add(O.forStringArray(N.toolnames))}d.measure=t;function s(N,E){N.setStringArray(0,E.toolnames)}d.encode=s;function f(N,E){return{toolnames:b(M(N.getStringArray(0)))}}d.decode=f})(n=e.LocalToolHandler_GetToolNames_ResponseParams||(e.LocalToolHandler_GetToolNames_ResponseParams={}));class c{constructor(t){this._endpoint=new T(t.endpointState,!0),this._version=0}static create(){const[t,s]=a.createChannel(e);return[new c(t),s]}static createToBrowser(){const[t,s]=this.create();return Mojo.bindInterface(e.interfaceName,s.pipe.rawHandle),t}async callLocalTool(t,s){const f={toolname:t,args:s};return(await this._endpoint.sendAndAwaitResponse(F.encode(0,y.None,i,f))).decode(o).response}async getToolNames(){const t={};return(await this._endpoint.sendAndAwaitResponse(F.encode(1,y.None,u,t))).decode(n).toolnames}_endpoint;_version}e.Proxy=c;class R extends q{constructor(){super(e)}onDisconnect;bind(t,s){this.addReceiver(s,async(f,N)=>{switch(f.header.ordinal){case 0:{const E=f.decode(i),V=t.callLocalTool(E.toolname,E.args),w=N.createResponder(o,0,f.header.requestID),z=await V;w({response:z});break}case 1:{f.decode(u);const E=t.getToolNames(),V=N.createResponder(n,1,f.header.requestID),w=await E;V({toolnames:w});break}default:f.header.expectsResponse&&N.sendUnimplementedResponse(f.header.requestID,f.header.ordinal)}return Promise.resolve()},()=>{this.onDisconnect&&this.onDisconnect(t)})}createRemote(t){const[s,f]=a.createChannel(e);return this.bind(t,f),s}}e.Dispatcher=R})(re||(re={}));var j;(e=>{e.VERSION_INFO=[{version:0,size:24}],e.CURRENT_VERSION=e.VERSION_INFO[e.VERSION_INFO.length-1];function i(n){return O.bytes(e.CURRENT_VERSION.size).add(O.forString(n.clientId)).add(O.forString(n.serverId??null))}e.measure=i;function o(n,c){n.setString(0,c.clientId),n.setString(8,c.serverId??null)}e.encode=o;function u(n,c){const R=n.getString(8);return{clientId:b(n.getString(0)),...R!==null?{serverId:R}:{}}}e.decode=u})(j||(j={}));var k;(e=>{e.VERSION_INFO=[{version:0,size:32}],e.CURRENT_VERSION=e.VERSION_INFO[e.VERSION_INFO.length-1];function i(n){return O.bytes(e.CURRENT_VERSION.size).add(O.forString(n.title??null))}e.measure=i;function o(n,c){let R=0;n.setString(0,c.title??null),c.updateTimestampMsSince1970!==null&&c.updateTimestampMsSince1970!==void 0&&(R|=1,n.setF64(16,c.updateTimestampMsSince1970)),c.status!==null&&c.status!==void 0&&(R|=2,n.setEnumValue(de,12,c.status)),n.setU8(8,R)}e.encode=o;function u(n,c){const R=n.getString(0),d=n.getU8(8),t=(d&1)!=0,s=(d&2)!=0;return{...R!==null?{title:R}:{},...t?{updateTimestampMsSince1970:b(n.getF64(16))}:{},...s?{status:b(n.getEnumValue(de,12))}:{}}}e.decode=u})(k||(k={}));var de;(e=>{function i(u){if(u==="none")return 0;if(u==="inProgress")return 1;if(u==="done")return 2;throw new m}e.encode=i;function o(u){switch(u){case 0:return"none";case 1:return"inProgress";case 2:return"done";default:return"none"}}e.decode=o})(de||(de={}));class be{static interfaceName="web.bridge.NavigationSidebarController";static interfaceVersion=0}(e=>{let i;(t=>{t.VERSION_INFO=[{version:0,size:16}],t.CURRENT_VERSION=t.VERSION_INFO[t.VERSION_INFO.length-1];function s(E){return O.bytes(t.CURRENT_VERSION.size)}t.measure=s;function f(E,V){let w=0;V.visible&&(w|=1),E.setU8(0,w)}t.encode=f;function N(E,V){return{visible:(E.getU8(0)&1)!=0}}t.decode=N})(i=e.NavigationSidebarController_SetSidebarVisibility_Params||(e.NavigationSidebarController_SetSidebarVisibility_Params={}));let o;(t=>{t.VERSION_INFO=[{version:0,size:8}],t.CURRENT_VERSION=t.VERSION_INFO[t.VERSION_INFO.length-1];function s(E){return O.bytes(t.CURRENT_VERSION.size)}t.measure=s;function f(E,V){}t.encode=f;function N(E,V){return{}}t.decode=N})(o=e.NavigationSidebarController_ToggleSidebarVisibility_Params||(e.NavigationSidebarController_ToggleSidebarVisibility_Params={}));let u;(t=>{t.VERSION_INFO=[{version:0,size:8}],t.CURRENT_VERSION=t.VERSION_INFO[t.VERSION_INFO.length-1];function s(E){return O.bytes(t.CURRENT_VERSION.size)}t.measure=s;function f(E,V){}t.encode=f;function N(E,V){return{}}t.decode=N})(u=e.NavigationSidebarController_NewConversation_Params||(e.NavigationSidebarController_NewConversation_Params={}));let n;(t=>{t.VERSION_INFO=[{version:0,size:24}],t.CURRENT_VERSION=t.VERSION_INFO[t.VERSION_INFO.length-1];function s(E){return O.bytes(t.CURRENT_VERSION.size).add(O.forObject(j,E.id)).add(O.forObject(k,E.data))}t.measure=s;function f(E,V){E.setObjectIndirect(j,0,V.id),E.setObjectIndirect(k,8,V.data)}t.encode=f;function N(E,V){return{id:b(E.getObjectIndirect(j,0)),data:b(E.getObjectIndirect(k,8))}}t.decode=N})(n=e.NavigationSidebarController_AddConversationHistoryItem_Params||(e.NavigationSidebarController_AddConversationHistoryItem_Params={}));let c;(t=>{t.VERSION_INFO=[{version:0,size:24}],t.CURRENT_VERSION=t.VERSION_INFO[t.VERSION_INFO.length-1];function s(E){return O.bytes(t.CURRENT_VERSION.size).add(O.forObject(j,E.id)).add(O.forObject(k,E.data))}t.measure=s;function f(E,V){E.setObjectIndirect(j,0,V.id),E.setObjectIndirect(k,8,V.data)}t.encode=f;function N(E,V){return{id:b(E.getObjectIndirect(j,0)),data:b(E.getObjectIndirect(k,8))}}t.decode=N})(c=e.NavigationSidebarController_UpdateConversationHistoryItem_Params||(e.NavigationSidebarController_UpdateConversationHistoryItem_Params={}));class R{constructor(s){this._endpoint=new T(s.endpointState,!0),this._version=0}static create(){const[s,f]=a.createChannel(e);return[new R(s),f]}static createToBrowser(){const[s,f]=this.create();return Mojo.bindInterface(e.interfaceName,f.pipe.rawHandle),s}setSidebarVisibility(s){const f={visible:s};this._endpoint.send(F.encode(0,y.None,i,f))}toggleSidebarVisibility(){const s={};this._endpoint.send(F.encode(1,y.None,o,s))}newConversation(){const s={};this._endpoint.send(F.encode(2,y.None,u,s))}addConversationHistoryItem(s,f){const N={id:s,data:f};this._endpoint.send(F.encode(3,y.None,n,N))}updateConversationHistoryItem(s,f){const N={id:s,data:f};this._endpoint.send(F.encode(4,y.None,c,N))}_endpoint;_version}e.Proxy=R;class d extends q{constructor(){super(e)}onDisconnect;bind(s,f){this.addReceiver(f,async(N,E)=>{switch(N.header.ordinal){case 0:{const V=N.decode(i);s.setSidebarVisibility(V.visible);break}case 1:{N.decode(o),s.toggleSidebarVisibility();break}case 2:{N.decode(u),s.newConversation();break}case 3:{const V=N.decode(n);s.addConversationHistoryItem(V.id,V.data);break}case 4:{const V=N.decode(c);s.updateConversationHistoryItem(V.id,V.data);break}default:N.header.expectsResponse&&E.sendUnimplementedResponse(N.header.requestID,N.header.ordinal)}return Promise.resolve()},()=>{this.onDisconnect&&this.onDisconnect(s)})}createRemote(s){const[f,N]=a.createChannel(e);return this.bind(s,N),f}}e.Dispatcher=d})(be||(be={}));var ue;(e=>{function i(u){if(u==="general")return 0;if(u==="personalization")return 1;if(u==="searchEngines")return 2;if(u==="dataControls")return 3;if(u==="modelTraining")return 4;if(u==="autofill")return 5;throw new m}e.encode=i;function o(u){switch(u){case 0:return"general";case 1:return"personalization";case 2:return"searchEngines";case 3:return"dataControls";case 4:return"modelTraining";case 5:return"autofill";default:return"general"}}e.decode=o})(ue||(ue={}));class he{static interfaceName="web.bridge.OpenSettingsController";static interfaceVersion=0}(e=>{let i;(n=>{n.VERSION_INFO=[{version:0,size:16}],n.CURRENT_VERSION=n.VERSION_INFO[n.VERSION_INFO.length-1];function c(t){return O.bytes(n.CURRENT_VERSION.size)}n.measure=c;function R(t,s){let f=0;s.tab!==null&&s.tab!==void 0&&(f|=1,t.setEnumValue(ue,4,s.tab)),t.setU8(0,f)}n.encode=R;function d(t,s){return{...(t.getU8(0)&1)!=0?{tab:b(t.getEnumValue(ue,4))}:{}}}n.decode=d})(i=e.OpenSettingsController_OpenSettings_Params||(e.OpenSettingsController_OpenSettings_Params={}));class o{constructor(c){this._endpoint=new T(c.endpointState,!0),this._version=0}static create(){const[c,R]=a.createChannel(e);return[new o(c),R]}static createToBrowser(){const[c,R]=this.create();return Mojo.bindInterface(e.interfaceName,R.pipe.rawHandle),c}openSettings(c){const R={tab:c};this._endpoint.send(F.encode(0,y.None,i,R))}_endpoint;_version}e.Proxy=o;class u extends q{constructor(){super(e)}onDisconnect;bind(c,R){this.addReceiver(R,async(d,t)=>{switch(d.header.ordinal){case 0:{const s=d.decode(i);c.openSettings(s.tab);break}default:d.header.expectsResponse&&t.sendUnimplementedResponse(d.header.requestID,d.header.ordinal)}return Promise.resolve()},()=>{this.onDisconnect&&this.onDisconnect(c)})}createRemote(c){const[R,d]=a.createChannel(e);return this.bind(c,d),R}}e.Dispatcher=u})(he||(he={}));var oe;(e=>{function i(u){if(u==="messageSent")return 0;throw new m}e.encode=i;function o(u){switch(u){case 0:return"messageSent";default:return"messageSent"}}e.decode=o})(oe||(oe={}));class Se{static interfaceName="web.bridge.ProductEventHandler";static interfaceVersion=0}(e=>{let i;(n=>{n.VERSION_INFO=[{version:0,size:16}],n.CURRENT_VERSION=n.VERSION_INFO[n.VERSION_INFO.length-1];function c(t){return O.bytes(n.CURRENT_VERSION.size)}n.measure=c;function R(t,s){t.setEnumValue(oe,0,s.eventName)}n.encode=R;function d(t,s){return{eventName:b(t.getEnumValue(oe,0))}}n.decode=d})(i=e.ProductEventHandler_TriggerProductEvent_Params||(e.ProductEventHandler_TriggerProductEvent_Params={}));class o{constructor(c){this._endpoint=new T(c.endpointState,!0),this._version=0}static create(){const[c,R]=a.createChannel(e);return[new o(c),R]}static createToBrowser(){const[c,R]=this.create();return Mojo.bindInterface(e.interfaceName,R.pipe.rawHandle),c}triggerProductEvent(c){const R={eventName:c};this._endpoint.send(F.encode(0,y.None,i,R))}_endpoint;_version}e.Proxy=o;class u extends q{constructor(){super(e)}onDisconnect;bind(c,R){this.addReceiver(R,async(d,t)=>{switch(d.header.ordinal){case 0:{const s=d.decode(i);c.triggerProductEvent(s.eventName);break}default:d.header.expectsResponse&&t.sendUnimplementedResponse(d.header.requestID,d.header.ordinal)}return Promise.resolve()},()=>{this.onDisconnect&&this.onDisconnect(c)})}createRemote(c){const[R,d]=a.createChannel(e);return this.bind(c,d),R}}e.Dispatcher=u})(Se||(Se={}));class ${static interfaceName="web.bridge.DesktopSidebarController";static interfaceVersion=0}(e=>{let i;(t=>{t.VERSION_INFO=[{version:0,size:8}],t.CURRENT_VERSION=t.VERSION_INFO[t.VERSION_INFO.length-1];function s(E){return O.bytes(t.CURRENT_VERSION.size)}t.measure=s;function f(E,V){}t.encode=f;function N(E,V){return{}}t.decode=N})(i=e.DesktopSidebarController_CloseSidebar_Params||(e.DesktopSidebarController_CloseSidebar_Params={}));let o;(t=>{t.VERSION_INFO=[{version:0,size:8}],t.CURRENT_VERSION=t.VERSION_INFO[t.VERSION_INFO.length-1];function s(E){return O.bytes(t.CURRENT_VERSION.size)}t.measure=s;function f(E,V){}t.encode=f;function N(E,V){return{}}t.decode=N})(o=e.DesktopSidebarController_CanHideHeader_Params||(e.DesktopSidebarController_CanHideHeader_Params={}));let u;(t=>{t.VERSION_INFO=[{version:0,size:16}],t.CURRENT_VERSION=t.VERSION_INFO[t.VERSION_INFO.length-1];function s(E){return O.bytes(t.CURRENT_VERSION.size)}t.measure=s;function f(E,V){let w=0;V.canHideHeader&&(w|=1),E.setU8(0,w)}t.encode=f;function N(E,V){return{canHideHeader:(E.getU8(0)&1)!=0}}t.decode=N})(u=e.DesktopSidebarController_CanHideHeader_ResponseParams||(e.DesktopSidebarController_CanHideHeader_ResponseParams={}));let n;(t=>{t.VERSION_INFO=[{version:0,size:8}],t.CURRENT_VERSION=t.VERSION_INFO[t.VERSION_INFO.length-1];function s(E){return O.bytes(t.CURRENT_VERSION.size)}t.measure=s;function f(E,V){}t.encode=f;function N(E,V){return{}}t.decode=N})(n=e.DesktopSidebarController_BecomeMainPage_Params||(e.DesktopSidebarController_BecomeMainPage_Params={}));let c;(t=>{t.VERSION_INFO=[{version:0,size:8}],t.CURRENT_VERSION=t.VERSION_INFO[t.VERSION_INFO.length-1];function s(E){return O.bytes(t.CURRENT_VERSION.size)}t.measure=s;function f(E,V){}t.encode=f;function N(E,V){return{}}t.decode=N})(c=e.DesktopSidebarController_OpenInNewTab_Params||(e.DesktopSidebarController_OpenInNewTab_Params={}));class R{constructor(s){this._endpoint=new T(s.endpointState,!0),this._version=0}static create(){const[s,f]=a.createChannel(e);return[new R(s),f]}static createToBrowser(){const[s,f]=this.create();return Mojo.bindInterface(e.interfaceName,f.pipe.rawHandle),s}closeSidebar(){const s={};this._endpoint.send(F.encode(0,y.None,i,s))}async canHideHeader(){const s={};return(await this._endpoint.sendAndAwaitResponse(F.encode(1,y.None,o,s))).decode(u).canHideHeader}becomeMainPage(){const s={};this._endpoint.send(F.encode(2,y.None,n,s))}openInNewTab(){const s={};this._endpoint.send(F.encode(3,y.None,c,s))}_endpoint;_version}e.Proxy=R;class d extends q{constructor(){super(e)}onDisconnect;bind(s,f){this.addReceiver(f,async(N,E)=>{switch(N.header.ordinal){case 0:{N.decode(i),s.closeSidebar();break}case 1:{N.decode(o);const V=s.canHideHeader(),w=E.createResponder(u,1,N.header.requestID),z=await V;w({canHideHeader:z});break}case 2:{N.decode(n),s.becomeMainPage();break}case 3:{N.decode(c),s.openInNewTab();break}default:N.header.expectsResponse&&E.sendUnimplementedResponse(N.header.requestID,N.header.ordinal)}return Promise.resolve()},()=>{this.onDisconnect&&this.onDisconnect(s)})}createRemote(s){const[f,N]=a.createChannel(e);return this.bind(s,N),f}}e.Dispatcher=d})($||($={}));var A;(e=>{e.VERSION_INFO=[{version:0,size:8}],e.CURRENT_VERSION=e.VERSION_INFO[e.VERSION_INFO.length-1];function i(n){return O.bytes(e.CURRENT_VERSION.size)}e.measure=i;function o(n,c){}e.encode=o;function u(n,c){return{}}e.decode=u})(A||(A={}));var L;(e=>{e.VERSION_INFO=[{version:0,size:48}],e.CURRENT_VERSION=e.VERSION_INFO[e.VERSION_INFO.length-1];function i(n){return O.bytes(e.CURRENT_VERSION.size).add(O.forString(n.id)).add(O.forString(n.fileid)).add(O.forString(n.name)).add(O.forString(n.mimetype))}e.measure=i;function o(n,c){n.setString(0,c.id),n.setString(8,c.fileid),n.setString(16,c.name),n.setU32(24,c.size),n.setString(32,c.mimetype)}e.encode=o;function u(n,c){return{id:b(n.getString(0)),fileid:b(n.getString(8)),name:b(n.getString(16)),size:b(n.getU32(24)),mimetype:b(n.getString(32))}}e.decode=u})(L||(L={}));var G;(e=>{e.VERSION_INFO=[{version:0,size:32}],e.CURRENT_VERSION=e.VERSION_INFO[e.VERSION_INFO.length-1];function i(n){return O.bytes(e.CURRENT_VERSION.size).add(O.forString(n.assetPointer))}e.measure=i;function o(n,c){n.setString(0,c.assetPointer),n.setU32(8,c.sizeBytes),n.setU32(12,c.width),n.setU32(16,c.height)}e.encode=o;function u(n,c){return{assetPointer:b(n.getString(0)),sizeBytes:b(n.getU32(8)),width:b(n.getU32(12)),height:b(n.getU32(16))}}e.decode=u})(G||(G={}));var D;(e=>{e.VERSION_INFO=[{version:0,size:32}],e.CURRENT_VERSION=e.VERSION_INFO[e.VERSION_INFO.length-1];function i(n){return O.bytes(e.CURRENT_VERSION.size).add(O.forString(n.content??null)).add(O.forObjectArray(L,n.files??null)).add(O.forObjectArray(G,n.imageAssetPointers??null))}e.measure=i;function o(n,c){n.setString(0,c.content??null),n.setObjectArray(L,8,c.files??null),n.setObjectArray(G,16,c.imageAssetPointers??null)}e.encode=o;function u(n,c){const R=n.getString(0),d=M(n.getObjectArray(L,8)),t=M(n.getObjectArray(G,16));return{...R!==null?{content:R}:{},...d!==null?{files:d}:{},...t!==null?{imageAssetPointers:t}:{}}}e.decode=u})(D||(D={}));var W;(e=>{e.VERSION_INFO=[{version:0,size:32}],e.CURRENT_VERSION=e.VERSION_INFO[e.VERSION_INFO.length-1];function i(n){return O.bytes(e.CURRENT_VERSION.size).add(O.forString(n.base64image)).add(O.forString(n.mimetype)).add(O.forString(n.filename))}e.measure=i;function o(n,c){n.setString(0,c.base64image),n.setString(8,c.mimetype),n.setString(16,c.filename)}e.encode=o;function u(n,c){return{base64image:b(n.getString(0)),mimetype:b(n.getString(8)),filename:b(n.getString(16))}}e.decode=u})(W||(W={}));class Ne{static interfaceName="web.bridge.WhisperContentProvider";static interfaceVersion=0}(e=>{let i;(d=>{d.VERSION_INFO=[{version:0,size:16}],d.CURRENT_VERSION=d.VERSION_INFO[d.VERSION_INFO.length-1];function t(N){return O.bytes(d.CURRENT_VERSION.size).add(O.forObject(A,N.options??null))}d.measure=t;function s(N,E){N.setObjectIndirect(A,0,E.options??null)}d.encode=s;function f(N,E){const V=N.getObjectIndirect(A,0);return{...V!==null?{options:V}:{}}}d.decode=f})(i=e.WhisperContentProvider_GetWhisperContent_Params||(e.WhisperContentProvider_GetWhisperContent_Params={}));let o;(d=>{d.VERSION_INFO=[{version:0,size:16}],d.CURRENT_VERSION=d.VERSION_INFO[d.VERSION_INFO.length-1];function t(N){return O.bytes(d.CURRENT_VERSION.size).add(O.forObject(D,N.content??null))}d.measure=t;function s(N,E){N.setObjectIndirect(D,0,E.content??null)}d.encode=s;function f(N,E){const V=N.getObjectIndirect(D,0);return{...V!==null?{content:V}:{}}}d.decode=f})(o=e.WhisperContentProvider_GetWhisperContent_ResponseParams||(e.WhisperContentProvider_GetWhisperContent_ResponseParams={}));let u;(d=>{d.VERSION_INFO=[{version:0,size:8}],d.CURRENT_VERSION=d.VERSION_INFO[d.VERSION_INFO.length-1];function t(N){return O.bytes(d.CURRENT_VERSION.size)}d.measure=t;function s(N,E){}d.encode=s;function f(N,E){return{}}d.decode=f})(u=e.WhisperContentProvider_GetTabScreenshot_Params||(e.WhisperContentProvider_GetTabScreenshot_Params={}));let n;(d=>{d.VERSION_INFO=[{version:0,size:16}],d.CURRENT_VERSION=d.VERSION_INFO[d.VERSION_INFO.length-1];function t(N){return O.bytes(d.CURRENT_VERSION.size).add(O.forObject(W,N.screenshot??null))}d.measure=t;function s(N,E){N.setObjectIndirect(W,0,E.screenshot??null)}d.encode=s;function f(N,E){const V=N.getObjectIndirect(W,0);return{...V!==null?{screenshot:V}:{}}}d.decode=f})(n=e.WhisperContentProvider_GetTabScreenshot_ResponseParams||(e.WhisperContentProvider_GetTabScreenshot_ResponseParams={}));class c{constructor(t){this._endpoint=new T(t.endpointState,!0),this._version=0}static create(){const[t,s]=a.createChannel(e);return[new c(t),s]}static createToBrowser(){const[t,s]=this.create();return Mojo.bindInterface(e.interfaceName,s.pipe.rawHandle),t}async getWhisperContent(t){const s={options:t};return(await this._endpoint.sendAndAwaitResponse(F.encode(0,y.None,i,s))).decode(o).content}async getTabScreenshot(){const t={};return(await this._endpoint.sendAndAwaitResponse(F.encode(1,y.None,u,t))).decode(n).screenshot}_endpoint;_version}e.Proxy=c;class R extends q{constructor(){super(e)}onDisconnect;bind(t,s){this.addReceiver(s,async(f,N)=>{switch(f.header.ordinal){case 0:{const E=f.decode(i),V=t.getWhisperContent(E.options),w=N.createResponder(o,0,f.header.requestID),z=await V;w({content:z});break}case 1:{f.decode(u);const E=t.getTabScreenshot(),V=N.createResponder(n,1,f.header.requestID),w=await E;V({screenshot:w});break}default:f.header.expectsResponse&&N.sendUnimplementedResponse(f.header.requestID,f.header.ordinal)}return Promise.resolve()},()=>{this.onDisconnect&&this.onDisconnect(t)})}createRemote(t){const[s,f]=a.createChannel(e);return this.bind(t,f),s}}e.Dispatcher=R})(Ne||(Ne={}));class xe{dispatcher;constructor(i){this.dispatcher=new H.Dispatcher,this.dispatcher.bind(this,i)}refreshSessionContext(i,o){_.authSessionContext={authToken:i,behavior:o},_.wantsAuthSessionContext$.set(!0)}}function me(e){return e==="none"||e==="sent"||e==="success"||e==="failure"}class je{prepareState;lastPrepareTimestamp;conduitToken;constructor(i,o,u){this.prepareState=me(i)?i:"none",this.lastPrepareTimestamp=o-performance.timeOrigin,this.conduitToken=u}}class ke{dispatcher;constructor(i){this.dispatcher=new P.Dispatcher,this.dispatcher.bind(this,i)}closeNavigationSidebar(){throw new Error("Method not implemented.")}setChatTheme(i){throw new Error("Method not implemented.")}showSearch(){throw new Error("Method not implemented.")}setWindowStyle(i){_.windowStyle$.set(i)}setModel(i){_.wantsModelSlug$.set(i)}newConversation(){_.wantsNewConversation$.set(!0),_.selectedConversationId$.set(void 0)}loadConversation(i){_.wantsNewConversation$.set(!1),_.selectedConversationId$.set(i)}requestCompletion(i,o,u){_.requestCompletion={prompt:i,systemHints:o,modelSlug:u},_.wantsRequestCompletion$.set(!0)}populatePrompt(i,o){_.populatePrompt={userMessage:i??null,targetedReply:o??null},_.wantsPopulatePrompt$.set(!0)}updateContext(i,o,u,n,c){_.context$.set({id:i,url:i,title:o,base64favicon:u,selection:n,blocked:c}),c||_.sidebarUrlTrayForcedOpen$.set(!1)}prepareConversation(i){_.prepareConversationDetails=new je(i.prepareState,i.lastPrepareTimestampMsSince1970,i.conduitToken??void 0)}setSuperWidgetOptions(i){ze.set(i.selectedTab)}setAttachments(i){_.attachments=i.map(o=>{const{id:u,name:n,size:c,mimeType:R,width:d,height:t,fileTokenSize:s}=o;return{...u&&{id:u},...n&&{name:n},...c&&{size:typeof c=="bigint"?Number(c):c},...R&&{mime_type:R},...d&&{width:d},...t&&{height:t},...s&&{file_token_size:s}}})}setWhisperContent(i){_.whisperContent=i}setTabContext(i){_.tabContext=i}setPromptOrigin(i){_.promptOrigin=i}navigate(i){we(i)}populateNavlinks(i,o){const u=JSON.parse(o);ae.getState().updateFromEvent(i,u)}handleAgentRequest(i){_.agentRequest=i,_.wantsHandleAgentRequest$.set(!0)}}const De=6e4;class Me{host;logger;lastMissingAuthTime=0;constructor(i,o){this.host=i,this.logger=o}async getAccountID(){return await this.host.getAccountID()}onMissingSessionAuth(){const i=Date.now();if(i-this.lastMissingAuthTime>De){this.lastMissingAuthTime=i;const[o,u]=ee.Proxy.create();this.bindReceiver(u),this.logger.notice("onMissingSessionAuth.invoked"),o.handleMissingSessionAuth()}}recordAvailableSessionAuth(){const[i,o]=ee.Proxy.create();this.bindReceiver(o),this.logger.notice("recordAvailableSessionAuth.invoked"),i.recordAvailableSessionAuth()}tryOpenAgentViewer(i){const[o,u]=K.Proxy.create();return this.bindReceiver(u),o.tryOpenAgentViewer(i)}userSentMessageInAgentConversation(i){const[o,u]=K.Proxy.create();this.bindReceiver(u),o.userSentMessageInAgentConversation(i)}getClientID(){const[i,o]=K.Proxy.create();return this.bindReceiver(o),i.getClientID()}becomeMainPage(){const[i,o]=$.Proxy.create();this.bindReceiver(o),i.becomeMainPage()}openInNewTab(){const[i,o]=$.Proxy.create();this.bindReceiver(o),i.openInNewTab()}closeSideChat(){const[i,o]=$.Proxy.create();this.bindReceiver(o),i.closeSidebar()}supportsWebSideChatHeader(){const[i,o]=$.Proxy.create();return this.bindReceiver(o),i.canHideHeader()}async getWhisperContent(){const[i,o]=Ne.Proxy.create();return this.bindReceiver(o),await i.getWhisperContent({})}async getTabScreenshot(){const[i,o]=Ne.Proxy.create();return this.bindReceiver(o),await i.getTabScreenshot()}receivedFirstToken(){this.host.receivedFirstToken("")}async callLocalTool(i,o){const[u,n]=re.Proxy.create();return this.bindReceiver(n),await u.callLocalTool(i,o)}bindReceiver(i){this.host.bindReceiver(i.interfaceType.interfaceName,i.pipe)}async getToolNames(){const[i,o]=re.Proxy.create();return this.bindReceiver(o),await i.getToolNames()}openSettings(i){const[o,u]=he.Proxy.create();this.bindReceiver(u),o.openSettings(i)}}class $e{proxy;constructor(i){this.proxy=i}handleLink(i,o){this.proxy.handleLink(i,o)}}class Be{proxy;constructor(i){this.proxy=i}triggerProductEvent(i){this.proxy.triggerProductEvent(i)}}class Je{dispatcher;host;logger;conversationControllers=[];authStateController=[];constructor(){this.logger=Ue.createLogger("web-bridge-host","info","http"),this.dispatcher=new Te.Dispatcher;const i=qe.Proxy.createToBrowser();this.host=new Me(i,this.logger),i.setFrontend(this.dispatcher.createRemote(this))}get linkHandler(){const[i,o]=Ee.Proxy.create();return this.host.bindReceiver(o),new $e(i)}get productEventHandler(){const[i,o]=Se.Proxy.create();return this.host.bindReceiver(o),new Be(i)}logConsoleMessage(i){this.logger.info(i)}sendMessage(i,o){return Promise.resolve(null)}bindReceiver(i,o){i===P.interfaceName?this.conversationControllers.push(new ke(new ge(P,o))):i===H.interfaceName&&this.authStateController.push(new xe(new ge(H,o)))}}let U;async function Ye(){U=new Je;const e=await U.host.getAccountID();U.logger.info(`Account ID: ${e}`)}function Ze(){return U?.host}function ve(){return U?.linkHandler}function le(){return U?.productEventHandler}async function Ae(){return U?(U.logger.debug("Getting whisper content"),await U.host.getWhisperContent()):null}async function Le(){return U?await U.host.getTabScreenshot():null}function Ge(){if(!U)return null;U.host.closeSideChat()}async function We(){try{return await _e,U?await U.host.supportsWebSideChatHeader():!1}catch{return!1}}export{Ge as closeSideChat,Ze as getHost,ve as getLinkHandler,le as getProductEventHandler,Ae as getSidebarWhisperContent,Le as getTabScreenshot,Ye as initHostConnection,We as supportsWebSideChatHeader};
//# sourceMappingURL=g86fwc5245pbdtof.js.map
