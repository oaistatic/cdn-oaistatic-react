import{r as u,j as e,M as g,b as A,d as T}from"./n97h6so7iblif4c5.js";import{nA as F,nB as L,at as O,kI as E,B as R,h as U,U as b,i as B,ik as h,a as N,c as P,j as X,n as H,ig as f,nT as W,il as z}from"./cim4usely8ixso70.js";import{cu as G,cv as J,S as o,cw as K,cx as Y,cy as $,cz as q,cA as Q,cB as Z}from"./ivbsxyeeopn30y8l.js";import{S as ee}from"./lnrdu7695dtoyi0c.js";function se({voice:s,voiceSpeed:n}){const[c,a]=u.useState(!1),t=F(),i=s.voice,d=s.preview_url,r=u.useRef({playPromise:null}).current,l=L(x=>x.isPlaying&&x.sourceUrl===d);u.useEffect(()=>{t&&t.setSpeed(n)},[t,n]);const p=O(),V=u.useCallback(async()=>{if(!t)return;const x={voice:i,source:d};E.previews.click(x);try{a(!0),t.changeSource(d),r.playPromise=t.play(),a(!1)}catch(D){E.previews.error(D,x),p.danger({defaultMessage:"Something went wrong playing preview",description:"Error message when message playing the preview fails"},{toastId:"voice_preview_player_play_error"})}},[t,d,i,r,p]),m=u.useCallback(()=>{t&&(r.playPromise?r.playPromise.then(()=>{t.stop(),r.playPromise=null}):t.stop())},[t,r]),k=u.useCallback(()=>{l?m():c||V()},[m,V,c,l]);return u.useEffect(()=>()=>{l&&m()},[s,l,m]),e.jsx(R,{onClick:k,color:"secondary",className:"flex flex-row flex-nowrap items-center gap-1 border-none font-normal",loading:c,icon:l?ee:G,children:l?e.jsx(g,{id:"yGpEMJ",defaultMessage:"Stop"}):e.jsx(g,{id:"JwYDVp",defaultMessage:"Play"})})}const j=.5,v=2,I=.1,_=Math.round((v-j)/I),te=Array.from({length:_+1},(s,n)=>n),C=2,S=8,w=(S-C)/2,ne=s=>{const n=Number(s);return isNaN(n)?1:n};function ae(){const s=N();return P(s,"174366048")}function ie(){const s=N();return P(s,"3302173089")}function pe(){const s=ae(),n=U(),c=ie(),{isLoading:a,value:t,setValue:i}=y(b.VoiceSpeed),d=ne(t);if(!s)return null;const r=n?.length&&!n?.includes(B.VideoScreenSharing);return e.jsxs(e.Fragment,{children:[J()&&e.jsx(h,{children:e.jsx(re,{})}),e.jsx(h,{children:e.jsx(oe,{voiceSpeed:d})}),c&&e.jsx(h,{children:e.jsx(ce,{voiceSpeed:d,setVoiceSpeed:i,isLoading:a})}),r&&e.jsx(h,{children:e.jsx(le,{})})]})}function y(s,n=!1){const{data:c,isLoading:a}=X(s)||{},t=H(n);return{isLoading:a,value:c,setValue:i=>{t.mutate({setting:s,value:i})}}}function oe({voiceSpeed:s}){const{isLoading:n,value:c,setValue:a}=y(b.VoiceName),t=K(),i=Y(),d=n?"":$(c,i),r=t.find(({voice:l})=>l===d);return e.jsx(e.Fragment,{children:e.jsx("div",{className:"flex flex-col flex-nowrap gap-2",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{children:e.jsx(g,{id:"speechSettings.content.voice",defaultMessage:"Voice"})}),e.jsxs("div",{className:"flex flex-row flex-nowrap items-center gap-1",children:[r?e.jsxs(e.Fragment,{children:[e.jsx(se,{voice:r,voiceSpeed:s}),e.jsx("div",{className:"h-4 border-s"})]}):null,e.jsxs(o.Root,{value:d,onValueChange:l=>a(l),disabled:n,children:[e.jsxs(o.Trigger,{children:[e.jsx(o.Value,{}),e.jsx(o.Icon,{})]}),e.jsx(o.Portal,{children:e.jsx(o.Content,{children:t.map(({voice:l,name:p})=>e.jsx(o.Item,{value:l,children:p},l))})})]})]})]})})})}function ce({voiceSpeed:s,setVoiceSpeed:n,isLoading:c}){const[a,t]=u.useState(s);return u.useEffect(()=>t(s),[s]),e.jsxs("div",{className:"flex w-full flex-col gap-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{children:e.jsx(g,{id:"speechSettings.content.voiceSpeed",defaultMessage:"Voice speed"})}),e.jsx("div",{className:"text-token-text-secondary tabular-nums",children:e.jsx(g,{id:"speechSettings.content.voiceSpeed.current",defaultMessage:"{value}x",values:{value:a.toFixed(1)}})})]}),e.jsx("div",{className:"w-full",children:e.jsx("div",{className:"flex items-center gap-3",children:e.jsxs(q,{className:"relative flex w-full items-center",min:j,max:v,step:I,value:[a],disabled:c,onValueChange:i=>t(i[0]),onValueCommit:i=>{const d=i[0],r=Math.min(v,Math.max(j,d));n(r.toString())},children:[e.jsxs(Q,{className:"relative h-[4px] grow rounded-full",children:[e.jsx("div",{className:"bg-token-text-tertiary/30 absolute top-0 bottom-0 rounded-full",style:{left:w,right:w}}),e.jsx("div",{className:"pointer-events-none absolute top-0 bottom-0",style:{left:S/2,right:S/2},children:te.map(i=>e.jsx("div",{className:"bg-token-text-secondary/30 absolute top-[-2px] bottom-[-2px] rounded",style:{width:C,left:`${i/_*100}%`,transform:"translateX(-50%)"}},i))})]}),e.jsx(Z,{className:"bg-token-bg-primary border-token-bg-secondary block h-[24px] cursor-pointer rounded-full border focus:outline-none",style:{width:S}})]})})})]})}function re(){const{isLoading:s,value:n,setValue:c}=y(b.VoiceMainLanguage);return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{children:e.jsx(g,{id:"speechSettings.content.language",defaultMessage:"Spoken language"})}),e.jsxs(o.Root,{value:s?"":n??f.Auto,onValueChange:a=>c(a),disabled:s,children:[e.jsxs(o.Trigger,{children:[e.jsx(o.Value,{}),e.jsx(o.Icon,{})]}),e.jsx(o.Portal,{children:e.jsxs(o.Content,{position:"popper",style:{maxHeight:"calc(var(--radix-select-content-available-height) - 5rem)"},children:[e.jsx(o.Item,{value:f.Auto,children:e.jsx(g,{id:"speechSettings.content.autoDetect",defaultMessage:"Auto-detect"})}),Object.entries(f).filter(([a,t])=>t!==f.Auto).map(([a,t])=>e.jsx(o.Item,{value:t,className:"capitalize",children:a},t))]})})]})]}),e.jsx(W,{children:e.jsx(g,{id:"speechSettings.content.autoDetectDescription",defaultMessage:"For best results, select the language you mainly speak. If it's not listed, it may still be supported via auto-detection."})})]})}function le(){const s=A();return e.jsx(z,{label:s.formatMessage(M.voiceAndScreenSharing),enabled:!1,onChange:()=>{},disabled:!0,description:s.formatMessage(M.voiceAndScreenSharingDescription)})}const M=T({voiceAndScreenSharing:{id:"9dnywk",defaultMessage:"Voice and screen sharing"},voiceAndScreenSharingDescription:{id:"wjwSas",defaultMessage:"Sharing your screen and video while in voice mode has been disabled by your workspace administrator."}});export{pe as S,y as u};
//# sourceMappingURL=budzbufhmgk4y6eq.js.map
