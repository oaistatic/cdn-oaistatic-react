import{l9 as I,e5 as g,gr as m,eK as R,iU as E,a_ as M,ax as T,ae as F,cH as B,cQ as H,ee as O,gl as _}from"./cim4usely8ixso70.js";import{O as A,o as D,a as N,r as s,h as Q,j as e}from"./n97h6so7iblif4c5.js";import{C as k}from"./bfek75jeyiiysrf0.js";import{r as K,u as L,s as $,C as y,a as q,g as j,T as G,b as U}from"./ivbsxyeeopn30y8l.js";import{T as V,C as W}from"./fshn6t6aiqhkifzj.js";import{g as z}from"./mrd3z2p5ccxe8mcf.js";import{C as b,T as J}from"./hxd4ri96xuxv35dx.js";import"./bcnsse8l7ak9ome8.js";import"./i8vgytiaizzymmdx.js";import"./fn23ljzmd7fz7cdu.js";import"./jy1u8exw8iz2slve.js";import"./hd79rgnyf5hfs3gj.js";import"./gy64pge8qevmvg7e.js";import"./lnrdu7695dtoyi0c.js";import"./ltncr5s1j4b4kz0c.js";import"./hl263mv5vjd6fe09.js";import"./grt0jtahkb4l594u.js";import"./d7iwo69sk89c6my3.js";import"./c4vbhkqdiicfwhk9.js";import"./mfrmh8iqcq7c5rho.js";import"./dv0x3wwg6vtgq24d.js";import"./hh6y2dm7afl4jnkn.js";import"./bk8slwxjkdlmxjxm.js";import"./0pr0i2ofpxcgwml5.js";import"./qt8c9lenu31o2obp.js";import"./k5qf6pgck1wqkdil.js";import"./jdpqs7fyetm56n9m.js";import"./nswfjkfs26me74ly.js";import"./os50xu2ctps3mt97.js";import"./cxo3s9z32l5kx9bi.js";const Re=()=>(K(),null),Ee=I(function(){const a=A(),[o]=D(),u=N(),p=g(a.conversationId),i=m(o.get("readonly"),!1),c=m(o.get("isFullScreen"),!1),d=m(o.get("header"),!0),l=m(o.get("appPreview"),!1),r=R(),C=E(),w=m(o.get("hideBottomComposer"),!!i),n=g(a.canmoreId),t=p,f=L();s.useEffect(()=>{$({type:y.Textdoc,textdocId:n})},[n]),q(t,{kind:M.PrimaryAssistant});const h=Q();if(s.useEffect(()=>(T.retainThread(t),()=>{setTimeout(()=>{h.invalidateQueries({queryKey:["conversation",t]})},0),T.releaseThread(t)}),[t,h]),s.useEffect(()=>{n||u("/")},[n,u]),s.useEffect(()=>{j().sendMessage({type:b.Loaded})},[n]),!n||f?.type!==y.Textdoc)return null;const P=()=>{j().sendMessage({type:b.Close})},S=i&&!d;return e.jsxs("div",{className:"h-full w-full overflow-hidden contain-content",children:[e.jsx("meta",{name:"viewport",content:"width=device-width, initial-scale=1, maximum-scale=1"}),e.jsx(F,{clientThreadId:t,children:e.jsx(B,{clientThreadId:t,children:e.jsx(G,{clientThreadId:t,children:l?e.jsx(H,{children:e.jsx(X,{textdocId:f.textdocId})}):S?e.jsxs(e.Fragment,{children:[e.jsx(V,{clientThreadId:t,disableScroll:!r,textdocId:f.textdocId}),e.jsx(W,{})]}):e.jsx(J,{isEmbedded:!0,hideRunCode:!r,isFullScreen:c,hideHeader:!d,hideBottomComposer:w,isReadonlyFromQueryParam:i,hideRenameButton:C,clientThreadId:t,focusedTextdoc:f,onClose:P},"textdocContent")})})})]})}),X=({textdocId:x})=>{const a=s.useRef(null),o=U(x),[u,p]=s.useState(!1),i=o?.versions??[],c=O(i),d=s.useCallback(_(async l=>{const r=z(l.type,l.content);if(a.current&&(r==="react"||r==="html")){p(!0);const v=a.current.evalAsync({language:r,code:l.content});for await(const C of v)console.debug(C)}p(!1)},100),[]);return s.useEffect(()=>{c&&d(c)},[c,d]),e.jsx(k,{id:x,visuallyHidden:!u,ref:a,enableTransition:!0,title:""})};export{Re as clientLoader,Ee as default};
//# sourceMappingURL=hfygj4zsnz2cc59m.js.map
