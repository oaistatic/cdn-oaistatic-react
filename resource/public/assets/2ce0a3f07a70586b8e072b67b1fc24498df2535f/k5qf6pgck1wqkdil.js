const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/ovs0mheou2rjgi9z.js","assets/cim4usely8ixso70.js","assets/n97h6so7iblif4c5.js","assets/root-c9lkqywj.css","assets/ivbsxyeeopn30y8l.js","assets/conversation-small-dhmr708a.css","assets/ok0v4utan8f8dzts.js","assets/fohx4vo3qyr0edh2.js","assets/d3y72ugnrmac5z1v.js","assets/dzjn1hzm825wa74f.js","assets/mfrmh8iqcq7c5rho.js"])))=>i.map(i=>d[i]);
import{b as k,r as B,d as ee,j as e,M as d,a as re}from"./n97h6so7iblif4c5.js";import{at as ie,a as C,cT as ce,j as le,U as de,b9 as me,bx as z,d as N,C as ue,cO as W,eO as X,cL as se,ao as U,h7 as q,P as F,fT as xe,ac as ge,ad as he,a$ as pe,b0 as fe,gf as je,o8 as be,c as H,cp as ye,nX as Me,o9 as Se,aF as K,u as ve,A as Q,B as E,h5 as Ne,c7 as ke,aE as te,aD as Ce,bu as Pe,av as we,k as Oe,l as Be,fs as Ee,h as _e,as as Te,aY as I,bW as ae,aO as Ae,aP as Le,oa as De,aS as R,ob as Fe,aM as Ie,oc as Ue,aI as Y}from"./cim4usely8ixso70.js";import{at as We,au as Z,aw as Ge,av as S,dO as ze,bA as He,ax as Re,cO as Ke,dP as Ve,F as Xe,dQ as qe,dR as ne,dl as Qe,af as Ye,k as Ze,cK as $e,dS as Je,bZ as es,dT as ss,dU as ts,dV as $,bp as V,dW as as,dX as ns,dY as os,dZ as J,d_ as rs,d$ as is,e0 as cs,e1 as ls,e2 as ds,e3 as ms,e4 as us,e5 as xs,e6 as gs}from"./ivbsxyeeopn30y8l.js";import{C as hs}from"./jdpqs7fyetm56n9m.js";const o=ee({newProject:{id:"HVBzlL",defaultMessage:"New project"},editProject:{id:"uKk/Eo",defaultMessage:"Edit project"},projectName:{id:"ie67/W",defaultMessage:"Project name"},projectNamePlaceholder:{id:"A4Fd7M",defaultMessage:"Copenhagen Trip"},projectGoalDescription:{id:"1nWZjj",defaultMessage:"Add a goal or description"},projectGoalDescriptionPlaceholder:{id:"qYMoOD",defaultMessage:"Plan activities and must-see spots for our trip"},optional:{id:"kRPUIe",defaultMessage:"(optional)"},moreOptions:{id:"oiqzyL",defaultMessage:"More options"},cancel:{id:"hHNj31",defaultMessage:"Cancel"},create:{id:"PoqmRT",defaultMessage:"Create project"},save:{id:"RT8KNi",defaultMessage:"Save"},nameTooLong:{id:"feWA6K",defaultMessage:"Project names cannot be longer than {length} characters."},descriptionTooLong:{id:"x0jC9F",defaultMessage:"Project descriptions cannot be longer than {length} characters."},memory:{id:"w7+gZm",defaultMessage:"Memory"},defaultMemory:{id:"AA7d3d",defaultMessage:"Default"},defaultMemoryDescription:{id:"XHfasG",defaultMessage:"Project can access memories from outside chats, and vice versa."},projectOnlyMemory:{id:"XToOAe",defaultMessage:"Project-only"},projectOnlyMemoryDescription:{id:"W99WlO",defaultMessage:"Project can only access its own memories. Its memories are hidden from outside chats."},immutableOptionMessage:{id:"FrohSq",defaultMessage:"Note that this setting can't be changed later."},errorMessage:{id:"1Keou8",defaultMessage:"Error"}});function ws({submitButtonTitle:a,onClose:s,onSuccess:r,gizmo:t}){const n=k(),u=ie(),i=We(),c=!t,v=C(),x=!ce(),{data:f}=le(de.Sunshine),[g,j]=B.useState(t?.gizmo.display.name??""),[l,p]=B.useState(t?.gizmo.memory_enabled??!0),[m,P]=B.useState(!1),[M,_]=B.useState(!1),w=[];g.length>Z&&w.push(n.formatMessage(o.nameTooLong,{length:Z}));const G=async()=>{try{const y={name:g,memoryEnabled:l},{id:O,resource:oe}=await i.mutateAsync({update:y,id:t?.gizmo.id??Re});r&&r(O??oe?.gizmo.id),s()}catch(y){const O=xe(y);u.warning(O??n.formatMessage(o.errorMessage),{duration:5,hasCloseButton:!0})}},T=c?n.formatMessage(o.create):n.formatMessage(o.save),h=x&&me(v).getLayer("3081064739").get("project-modal",!1),A=e.jsx(z.Button,{className:N(h&&"w-fit"),title:a??T,type:"submit",form:"project-modal-form",color:"primary",loading:i.isPending,disabled:!g.trim()||w.length>0}),L=e.jsx(z.Button,{className:N(h&&"w-fit"),title:n.formatMessage(o.cancel),color:"secondary",onClick:s,disabled:i.isPending}),D=e.jsxs("div",{className:"flex gap-2",children:[L,A]}),b=e.jsx("button",{type:"button",onClick:()=>P(!0),className:"text-token-text-primary font-small text-md",disabled:i.isPending,children:e.jsx(d,{...o.moreOptions})});return e.jsx(ue,{testId:"modal-new-project-enhanced",isOpen:!0,isBottomSheet:h,hideSeparator:!0,noPadding:!0,showCloseButton:!i.isPending,size:"custom",className:"max-w-xl",type:"success",primaryButton:h?D:void 0,secondaryButton:void 0,footerContent:!m&&f&&c&&h?b:null,footerClassName:h&&!m?"justify-between!":void 0,title:e.jsx("div",{className:"h-8 px-1 py-1",children:c?n.formatMessage(o.newProject):n.formatMessage(o.editProject)}),onClose:()=>{i.isPending||s()},children:e.jsxs("form",{id:"project-modal-form",onSubmit:y=>{y.preventDefault(),F.logEventWithStatsig("Projects: Create Submit Enhanced","chatgpt_web_projects_create_submit"),G()},children:[e.jsxs("div",{className:"flex-1 px-5 py-4",children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("span",{className:"text-token-text-primary text-md font-small mb-2 block",children:e.jsx(d,{...o.projectName})}),e.jsx("div",{className:"relative",children:e.jsx(hs.AutoFocusTarget,{timing:"present",children:e.jsx("input",{autoFocus:!h,className:"focus:ring-token-text-secondary border-token-border-medium focus:border-token-border-medium bg-token-main-surface-primary h-12 w-full resize-none overflow-y-auto rounded-xl border px-4 py-3 pe-12 text-base focus:ring-2",type:"text",name:"projectName",autoComplete:"off",placeholder:n.formatMessage(o.projectNamePlaceholder),value:g,onChange:y=>j(y.target.value)})})})]}),c&&e.jsxs("aside",{className:"dark:bg-token-main-surface-secondary mt-6 flex items-start rounded-xl bg-[#F9F9F9] p-3",children:[e.jsx("div",{className:"me-2 h-6 w-6",children:e.jsx("div",{className:"text-token-text-secondary relative flex h-full items-center justify-center",children:e.jsx(Ge,{className:"icon"})})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-token-text-secondary block text-xs font-medium",children:e.jsx(d,{...S.projectHelperBoxTitle})}),e.jsx("p",{className:"text-token-text-secondary text-xs",children:e.jsx(d,{...S.projectHelperBoxDescription})})]})]}),!c&&f&&e.jsx("div",{className:"mt-6",children:e.jsxs("div",{className:"flex flex-col items-start justify-between",children:[e.jsx("label",{className:"text-token-text-primary text-md font-small mb-1",children:e.jsx(d,{...o.memory})}),e.jsx("div",{className:"flex-1",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"text-token-text-primary font-sm text-sm",children:l?n.formatMessage(o.defaultMemory):n.formatMessage(o.projectOnlyMemory)}),e.jsx(W,{label:l?n.formatMessage(o.defaultMemoryDescription):n.formatMessage(o.projectOnlyMemoryDescription),children:e.jsx("div",{className:"text-token-text-secondary ms-2",children:e.jsx(X,{})})})]})})]})}),m&&f&&c&&e.jsx("div",{className:"mt-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-token-text-primary text-md font-small",children:e.jsx(d,{...o.memory})}),e.jsx("div",{className:"relative",children:e.jsxs(se,{alignOffset:-2,size:"small",modal:!0,triggerButton:e.jsxs(ze,{className:"min-w-content flex items-center justify-between",children:[e.jsx("span",{className:"text-token-text-primary font-small text-sm",children:l?n.formatMessage(o.defaultMemory):n.formatMessage(o.projectOnlyMemory)}),e.jsx(He,{className:"icon-md text-token-text-secondary flex-shrink-0"})]}),contentAlign:"end",testId:"memory-dropdown",children:[e.jsxs(U.Item,{disabled:i.isPending,onClick:()=>{p(!0),_(!0)},className:"hoverable flex items-start justify-between px-4 py-3",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"text-token-text-primary font-medium",children:e.jsx(d,{...o.defaultMemory})}),e.jsx("div",{className:"text-token-text-secondary mt-1 text-sm",children:e.jsx(d,{...o.defaultMemoryDescription})})]}),l&&e.jsx(q,{className:"icon text-token-text-primary ms-3 mt-1 flex-shrink-0"})]}),e.jsxs(U.Item,{disabled:i.isPending,onClick:()=>{p(!1),_(!0)},className:"hoverable flex items-start justify-between px-4 py-3",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"text-token-text-primary font-medium",children:e.jsx(d,{...o.projectOnlyMemory})}),e.jsx("div",{className:"text-token-text-secondary mt-1 text-sm",children:e.jsx(d,{...o.projectOnlyMemoryDescription})})]}),!l&&e.jsx(q,{className:"icon text-token-text-primary ms-3 mt-1 flex-shrink-0"})]})]})})]})}),M&&e.jsxs("div",{className:"bg-token-main-surface-secondary dark:bg-token-main-surface-secondary min-h-content mt-3 flex items-center gap-2 rounded-xl p-3",children:[e.jsx("div",{className:"text-token-text-secondary flex items-center justify-center",children:e.jsx(X,{className:"icon-md"})}),e.jsx("div",{className:"flex items-center",children:e.jsx("strong",{className:"text-token-text-secondary text-sm font-medium",children:e.jsx(d,{...o.immutableOptionMessage})})})]}),w.map((y,O)=>e.jsx("div",{className:"mb-4 text-sm text-red-500",children:y},O))]}),!h&&e.jsxs("div",{className:"flex items-center justify-between px-4 pb-4 sm:px-6 sm:pb-6",children:[e.jsx("div",{children:!m&&f&&c&&b}),e.jsx(z.Actions,{primaryButton:A,secondaryButton:L})]})]})})}const ps=ge(()=>he(()=>import("./ovs0mheou2rjgi9z.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10])).then(a=>a.ShareProjectModal));function fs({gizmoId:a,gizmo:s}){const r=C(),t=k(),{eligible:n,markAsViewed:u}=ve(Q.hasSeenSharedProjectsTooltip),i=(s?.gizmo.sharing.subjects.length??0)>0;return e.jsx(Qe,{announcementKey:Q.hasSeenSharedProjectsTooltip,show:n,side:"left",align:"center",className:"w-full",sideOffset:0,contentClassName:"z-100",childrenWrapperClassName:"w-full",theme:"bright",dismissOnOutsideClick:!0,badge:"new",description:t.formatMessage({id:"RBJoj/",defaultMessage:"You can now collaborate with others on your projects."}),onDismiss:u,children:e.jsx(E,{className:"mx-2",color:"secondary",icon:i?Ye:Ze,label:t.formatMessage(S.projectShareButton),disabled:!s,onClick:()=>{s&&K(r,({onClose:c})=>e.jsx(ps,{gizmo:$e(s),publishedGizmo:s,onClose:c},a))},children:t.formatMessage(S.projectShareButton)})})}function js({gizmoId:a}){const s=k(),r=re(),t=C(),{data:n}=pe(),u=fe(n),i=u?.isWorkspaceAccount()??!1,{data:c}=je(u?.getWorkspaceId()),x=c?.share_settings?.chat_share_setting!==be.NO_ONE,f=i&&x&&H(t,"773249106"),g=H(t,"2468746551"),j=i?f:g,{data:l}=ye(a),{canEdit:p}=Me(l),{canDelete:m}=Se(l);return e.jsxs(e.Fragment,{children:[j&&e.jsx(fs,{gizmoId:a,gizmo:l}),e.jsxs(se,{side:"top",contentAlign:"end",sideOffset:0,triggerButton:e.jsx(ne,{"aria-label":s.formatMessage(S.showProjectDetailsDropdown),className:"shrink-0"}),size:"auto",children:[p&&e.jsxs(U.Item,{onClick:()=>{K(t,Ve,{submitButtonTitle:s.formatMessage(S.projectSettingsSubmitButton),gizmo:l})},children:[e.jsx(Ke,{className:"icon-sm"}),e.jsx(d,{...H(t,"4283270305")?o.editProject:S.editProjectNameDropdownButton})]}),m&&e.jsxs(U.Item,{color:"danger",onClick:()=>{function P(M){M(),r("/",{replace:!0})}K(t,({onClose:M})=>e.jsx(qe,{gizmoId:a,onSuccess:()=>P(M),onError:void 0,onClose:M}))},children:[e.jsx(Xe,{className:"icon-sm"}),e.jsx(d,{...S.deleteProjectDropdownButton})]})]})]})}function Os({showShareButton:a,showProfileDropdown:s,clientThreadId:r}){const t=C(),n=Ne(t,r),u=ke(r),i=k(),c=te(t,"1547743984"),[v,x,f,g,j,l]=Ce(r,b=>[Y.hasUserMessage(b),Y.getGizmoId(b),gs(b),b?.title,b?.is_do_not_remember,b?.isStarred]),p=Pe(()=>n.asyncStatus$()?.value),m=B.useMemo(()=>Je({clientThreadId:r,gizmoId:x,conversationTitle:g,conversationAsyncStatus:p,isDoNotRemember:j,isStarred:l}),[r,x,g,p,j,l]),P=we(r),{prefetchSearchPromises:M}=es(),_=M!=null,w=Oe(Be),G=c.get("show_share_button_text",!1)&&!w,T=i.formatMessage({id:"GizmoInformation.shareChat",defaultMessage:"Share"}),h=()=>ae.openSharingModal(u),A=Ee(x),L=_e();Te();const D=!I(t);return e.jsxs(e.Fragment,{children:[I(t)?e.jsx(ss,{}):null,I(t)&&L?.includes("caterpillar")&&e.jsx(ts,{}),null,a&&u&&e.jsx(e.Fragment,{children:G?e.jsx(E,{onClick:h,icon:$,label:T,"data-testid":"share-chat-button",color:"ghost",className:"text-token-text-primary",style:{viewTransitionName:"var(--vt_share_chat_wide_button)"},children:T}):e.jsx(W,{label:i.formatMessage({id:"CPEfES",defaultMessage:"Share chat"}),children:e.jsx(V,{"data-testid":"share-chat-button",onClick:h,icon:$,style:{viewTransitionName:"var(--vt_share_chat_compact_button)"}})})}),e.jsxs("div",{className:"flex items-center",children:[!D&&!x&&P&&!_&&!v&&e.jsx(e.Fragment,{children:e.jsx(as,{clientThreadId:r})}),e.jsx(ns,{}),u!=null&&!D?e.jsx(os,{conversation:m,inMainScreen:!0,isActiveConversation:!0,inChatWindow:!0,children:e.jsx(ne,{"aria-label":i.formatMessage({id:"9Mk/E3",defaultMessage:"Open conversation options"}),"data-testid":"conversation-options-button"})}):x&&A?e.jsx(js,{gizmoId:x}):null,s&&e.jsx(bs,{clientThreadId:r})]})]})}const bs=({clientThreadId:a})=>{const s=C();return J.markStart("LoginOrProfileMenu"),J.markRendered("LoginOrProfileMenu"),e.jsxs(e.Fragment,{children:[!I(s)&&e.jsx(Ss,{}),e.jsx(rs,{clientThreadId:a})]})};function ys({onClick:a,className:s,testId:r}){const n=k().formatMessage({id:"OFyxqj",defaultMessage:"New chat"});return e.jsx(W,{label:n,className:N("flex",s),children:e.jsx(V,{onClick:u=>xs(u,a),icon:us,"aria-label":n,"data-testid":r,as:"link"})})}function Bs({clientThreadId:a,hideNewChat:s=!1}){const r=ms({clientThreadId:a,location:"Navigation actions"});return Ue()?e.jsxs("div",{className:"flex items-center",children:[e.jsx(Ms,{}),!s&&e.jsx(ys,{onClick:r})]}):null}function Ms(){const a=k(),s=Fe(),{isUnauthenticated:r}=Ie(),t=cs(ds,ls,!1,!0);return r||s?null:e.jsx(W,{label:a.formatMessage({id:"cElEQV",defaultMessage:"Open sidebar"}),className:"flex",children:e.jsx(V,{"aria-label":a.formatMessage({id:"pV/Etp",defaultMessage:"Open sidebar"}),onClick:()=>{ae.setSidebarOpen(!0)},icon:t})})}function Ss(){const a=C(),s=Ae(),r=is(),t=Le(vs.signUpCta),n=De(),i=te(a,"3637408529").get("is_desktop_primary_auth_button_on_right",!1),c="Chat header",v=()=>{R(a,{authType:"login",callback:m=>{F.logLogInButtonClicked({location:c,provider:m})}})},x=()=>{R(a,{authType:"signup",callback:m=>{F.logSignUpButtonClicked({location:c,provider:m})}})},f=()=>{R(a,{authType:"login_or_signup",callback:m=>{F.logLoginOrSignUpButtonClicked({location:c,provider:m})}})},g=e.jsx(E,{onClick:v,color:s?"primary":"secondary","data-testid":"login-button",className:N(!s&&"screen-arch:hidden md:screen-arch:flex"),children:e.jsx(d,{id:"B1SN7b",defaultMessage:"Log in"})},"login"),j=e.jsx(E,{color:s?"secondary":"primary",onClick:x,"data-testid":"signup-button",className:N(s&&"screen-arch:hidden md:screen-arch:flex"),children:e.jsx(d,{...t})},"signup"),l=e.jsx(E,{color:"primary",onClick:f,"data-testid":"login-or-signup-button",className:N(s&&"screen-arch:hidden md:screen-arch:flex"),children:e.jsx(d,{...n})},"signup"),p=r?[l]:s?[g,j]:[j,g];return e.jsx("div",{className:"flex items-center justify-center gap-2",children:i?p.reverse():p})}const vs=ee({signUpCta:{id:"P6cySK",defaultMessage:"Sign up"}});export{Os as C,ws as E,bs as L,Bs as N,Ms as a,ys as b,Ss as c};
//# sourceMappingURL=k5qf6pgck1wqkdil.js.map
