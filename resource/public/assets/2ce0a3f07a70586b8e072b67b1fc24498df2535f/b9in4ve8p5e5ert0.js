import{al as T,B as U,e7 as V,b7 as q,P as I,at as G,gk as J,D as v,l9 as Y}from"./cim4usely8ixso70.js";import{d as $,r as d,j as r,M as H,b as w,f as _,ap as K,a as O}from"./n97h6so7iblif4c5.js";import{u as X}from"./kfttpd1cc0u1rrbk.js";import{lH as Z,lI as ee,lJ as ae,bD as te,ci as se,lK as z,cd as C,lL as re,co as oe}from"./ivbsxyeeopn30y8l.js";import{u as ne}from"./nw77hv3bmgb5l1rn.js";import{a as le,b as ce}from"./ib76cquqlyjrlt71.js";import{C as D,S as P,s as N}from"./myobppozwv4wuhkc.js";import{u as ie,B as ue}from"./flvrd2fw13ytfkn1.js";import{S as me}from"./g2in2vnq3t76stbi.js";import"./lgwn8lf5xrondcxt.js";import"./iej0cupg2dqkmejt.js";const u=$({optionalField:{id:"UgRDQq",defaultMessage:"(optional)"},teamSignUpPageTitle:{id:"K298ru",defaultMessage:"Sign up for a team plan"},tellUsAboutWorkStepTitle:{id:"+lyykJ",defaultMessage:"Tell us about your work"},tellUsAboutWorkStepSubtitle:{id:"nJKe8n",defaultMessage:"We'll use these details to suggest ideas that might be useful in your role."},workspaceNameStepTitle:{id:"Q5n2G9",defaultMessage:"Set up your workspace"},workspaceNameStepSubtitle:{id:"1d+NmM",defaultMessage:"You'll use this secure space to manage and collaborate with your team."},workspaceNameLabel:{id:"J+JnvS",defaultMessage:"Workspace name"},workspaceNamePlaceholder:{id:"k8/Vt/",defaultMessage:"Enter your workspace name"},roleLabel:{id:"Hv0Hlm",defaultMessage:"Role"},rolePlaceholder:{id:"QG2HaS",defaultMessage:"Select your role"},workspaceDepartmentLabel:{id:"I0SBO1",defaultMessage:"Area of work"},workspaceDepartmentPlaceholder:{id:"bewF7V",defaultMessage:"Select your area of work"},workspaceCompanySizeLabel:{id:"GaC0Ny",defaultMessage:"Company size"},workspaceCompanySizePlaceholder:{id:"XogWLG",defaultMessage:"Select your company size"},seatsCountLabel:{id:"sNSlDl",defaultMessage:"Seats"},purchaseStepTitle:{id:"ie58/4",defaultMessage:"Set up your Team plan"},oneDollarPromoTitle:{id:"8QMwdw",defaultMessage:"Start your trial"},oneDollarPromoSubtitle:{id:"9R8YzM",defaultMessage:"Try ChatGPT Team for $1 for up to 5 seats. After the first month, it’s $30 per seat."},planTypeLabel:{id:"/+0+uT",defaultMessage:"Plan type"},annualPlanLabel:{id:"8U8uh8",defaultMessage:"Annually <span>({percent}% off)</span>"},monthlyPlanLabel:{id:"1zZUTb",defaultMessage:"Monthly"},planSummaryTitle:{id:"GUbMAI",defaultMessage:"Plan Summary"},allPlansTodayTotal:{id:"CNJp97",defaultMessage:"Today's total"},today:{id:"QM0nNf",defaultMessage:"Today"},fieldRequired:{id:"IHKkpE",defaultMessage:"{fieldName} is required"},continueButton:{id:"Jehtpt",defaultMessage:"Continue"}}),pe=e=>d.createElement("svg",{width:12,height:12,viewBox:"0 0 12 12",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg","data-rtl-flip":"",...e},d.createElement("path",{d:"M6.88374 1.94433C7.14187 1.77382 7.49338 1.80202 7.72065 2.02929C7.94792 2.25656 7.97612 2.60807 7.80561 2.8662L7.72065 2.9707L4.69136 5.99999L7.72065 9.02929L7.80561 9.13378C7.97612 9.39191 7.94792 9.74343 7.72065 9.9707C7.49338 10.198 7.14187 10.2262 6.88374 10.0557L6.77925 9.9707L3.27925 6.4707C3.01955 6.211 3.01955 5.78899 3.27925 5.52929L6.77925 2.02929L6.88374 1.94433Z"})),j=({content:e,onPrevious:n})=>r.jsxs("div",{className:"relative flex h-[100dvh] w-screen items-start justify-center pt-24 [@media(min-width:450px)]:pt-[15vh]",children:[n&&r.jsx("div",{className:"absolute start-4 top-4",children:r.jsx(U,{onClick:n,icon:pe,color:"ghost"})}),r.jsx("div",{className:"flex max-w-full flex-none items-center justify-center [@media(min-width:450px)]:w-[372px]",children:e})]}),L=({title:e,subTitle:n,children:a})=>r.jsxs("div",{className:"box-content flex w-full flex-col gap-6 px-4",children:[r.jsxs("div",{className:"flex flex-col gap-4 text-center",children:[r.jsx("div",{className:"text-3xl font-normal",children:e}),n&&r.jsx("div",{className:"text-token-text-secondary",children:n})]}),a]}),E=({onClick:e,disabled:n})=>{const[a,t]=d.useState(!1),i=w();return r.jsx(U,{size:"large",loading:a,disabled:n,onClick:async()=>{t(!0),await e(),t(!1)},children:i.formatMessage(u.continueButton)})},de=T.label`font-medium`,F=T.div`text-red-500 text-sm mb-2`,fe=T.input`rounded-full border border-token-border-default bg-token-bg-primary placeholder:text-token-text-tertiary px-5 py-3 focus:border-token-icon-accent focus:ring-token-icon-accent focus:ring-0`,B=e=>{switch(e.formType){case"input":return r.jsx(W,{...e});case"select":return r.jsx(ge,{...e})}return null},A=({children:e,required:n})=>r.jsxs(de,{children:[e,!n&&r.jsxs("span",{className:"text-token-text-secondary text-xs",children:[" ",r.jsx(H,{...u.optionalField})]})]}),W=({label:e,name:n,placeholder:a,value:t,onChange:i,required:o,error:p,...g})=>r.jsxs("div",{className:"flex flex-col gap-1.5",children:[r.jsx(A,{required:o,children:e}),r.jsx(fe,{name:n,placeholder:a,value:t,onChange:y=>i(y.target.value),required:o,...g}),p&&r.jsx(F,{children:p})]}),ge=({label:e,value:n,onChange:a,placeholder:t,error:i,options:o,required:p})=>r.jsxs("div",{className:"flex flex-col gap-1.5",children:[r.jsx(A,{required:p,children:e}),r.jsx(Z,{triggerClassName:"w-full flex justify-between rounded-full border border-token-border-default bg-token-bg-primary data-placeholder:text-token-text-tertiary px-5 py-3 text-md h-12",contentClassName:"max-h-80 w-full",options:o,value:n,onValueChange:a,placeholder:t}),i&&r.jsx(F,{children:i})]}),ye=({formData:e,onNext:n})=>{const a=w(),[t,i]=d.useState({role:e.role??"",department:e.department??""}),[o,p]=d.useState({}),g=(s,c)=>{i(h=>({...h,[s]:c})),p(h=>({...h,[s]:""}))},y=d.useMemo(()=>{const s=ee.map(c=>({label:a.formatMessage(c.displayValue),value:c.id}));return s.sort((c,h)=>c.label.localeCompare(h.label)),s},[a]),l=d.useMemo(()=>{const s=ae.map(c=>({label:a.formatMessage(c.displayValue),value:c.id}));return s.sort((c,h)=>c.label.localeCompare(h.label)),s},[a]),m=d.useMemo(()=>[{formType:"select",label:a.formatMessage(u.roleLabel),name:"role",placeholder:a.formatMessage(u.rolePlaceholder),value:t.role,onChange:s=>g("role",s),error:o.role,required:!0,options:l},{formType:"select",label:a.formatMessage(u.workspaceDepartmentLabel),name:"department",placeholder:a.formatMessage(u.workspaceDepartmentPlaceholder),value:t.department,onChange:s=>g("department",s),error:o.department,required:!0,options:y}],[y,o.department,o.role,t.department,t.role,a,l]),f=()=>{const s={};return m.forEach(c=>{c.required&&!t[c.name]&&(s[c.name]=a.formatMessage(u.fieldRequired,{fieldName:c.label}))}),p(s),Object.values(s).every(c=>!c)};return r.jsx(j,{content:r.jsxs(L,{title:a.formatMessage(u.tellUsAboutWorkStepTitle),subTitle:a.formatMessage(u.tellUsAboutWorkStepSubtitle),children:[r.jsx("div",{className:"flex flex-col gap-6",children:m.map(s=>d.createElement(B,{...s,key:s.name}))}),r.jsx(E,{onClick:async()=>{f()&&await n(t)}})]})})},he=({onNext:e,onPrevious:n,pendingWorkspace:a,initialBillingDetails:t,formData:i})=>{const o=w(),p=te(),{annualBillingPlan:g}=se(t.currency),y=Math.floor(100-g.discountedMonthlyCost/g.monthlyCost*100),{selectedPlan:l,setSelectedPlan:m,numSeats:f,setNumSeats:s,promoData:c,TEAM1DOLLAR_COUPON_IsEligible:h}=ie({initialSeats:i?.numSeats,initialPromoCoupon:new URLSearchParams(a?.query_params??"").get(z)??void 0}),M={priceInterval:l,billingDetails:t,numSeats:f,promoData:c};return r.jsx(j,{onPrevious:()=>n({...M}),content:r.jsxs(L,{title:h?o.formatMessage(u.oneDollarPromoTitle):o.formatMessage(u.purchaseStepTitle),subTitle:h?o.formatMessage(u.oneDollarPromoSubtitle):void 0,children:[r.jsxs("div",{className:"flex flex-col gap-6",children:[r.jsx(W,{formType:"input",value:f,onChange:k=>s(Math.max(p,Number(k))),className:"with-spinner",label:o.formatMessage(u.seatsCountLabel),name:"numSeats",type:"number",min:p,step:1,required:!0}),r.jsxs("div",{className:"flex flex-col gap-1.5",children:[r.jsx(A,{required:!0,children:o.formatMessage(u.planSummaryTitle)}),r.jsxs("div",{className:"border-token-border-default flex flex-col gap-6 rounded-3xl border p-5",children:[!(h&&l===C.FLEXIBLE)&&r.jsx(me,{ariaLabel:o.formatMessage(u.planTypeLabel),leftItem:{label:o.formatMessage(u.annualPlanLabel,{percent:y,span:k=>r.jsx("span",{className:"text-[#10A37F]",children:k})}),value:C.ANNUAL},rightItem:{label:o.formatMessage(u.monthlyPlanLabel),value:C.FLEXIBLE},value:l,onChange:m}),r.jsx(ue,{numSeats:f,selectedPlan:l,billingDetails:t,totalLabel:u.allPlansTodayTotal,billDate:o.formatMessage(u.today),promoData:c})]})]})]}),r.jsx(E,{onClick:()=>e({...M})})]})})},Se=({formData:e,onNext:n,onPrevious:a})=>{const t=w(),[i,o]=d.useState({workspaceName:e.workspaceName??"",companySize:e.companySize??""}),[p,g]=d.useState({}),y=(s,c)=>{o(h=>({...h,[s]:c})),g(h=>({...h,[s]:""}))},l=re.map(s=>({label:typeof s.displayValue=="string"?s.displayValue:t.formatMessage(s.displayValue),value:s.id})),m=d.useMemo(()=>[{formType:"input",label:t.formatMessage(u.workspaceNameLabel),name:"workspaceName",placeholder:t.formatMessage(u.workspaceNamePlaceholder),value:i.workspaceName,onChange:s=>y("workspaceName",s),error:p.workspaceName,required:!0,autoFocus:!0},{formType:"select",label:t.formatMessage(u.workspaceCompanySizeLabel),name:"companySize",placeholder:t.formatMessage(u.workspaceCompanySizePlaceholder),value:i.companySize,onChange:s=>y("companySize",s),error:p.companySize,required:!1,options:l}],[p.companySize,p.workspaceName,i.companySize,i.workspaceName,t,l]),f=()=>{const s={};return m.forEach(c=>{c.required&&!i[c.name]&&(s[c.name]=t.formatMessage(u.fieldRequired,{fieldName:c.label}))}),g(s),Object.values(s).every(c=>!c)};return r.jsx(j,{onPrevious:a?()=>a({...i}):void 0,content:r.jsxs(L,{title:t.formatMessage(u.workspaceNameStepTitle),subTitle:t.formatMessage(u.workspaceNameStepSubtitle),children:[r.jsx("div",{className:"flex flex-col gap-6",children:m.map(s=>d.createElement(B,{...s,key:s.name}))}),r.jsx(E,{disabled:!i.workspaceName,onClick:async()=>{f()&&await n({...i})}})]})})};var Q=(e=>(e.AboutWork="about-work",e.WorkspaceInfo="workspace-info",e.ConfigurePlan="configure-plan",e))(Q||{});const xe=V(Object.values(Q),void 0),be=({pendingWorkspace:e})=>{const n=w(),[a,t]=d.useState({workspaceName:e?.workspace_name??void 0,role:e?.role??void 0,department:e?.department??void 0,companySize:e?.company_size??void 0,numSeats:e?.seat_quantity??void 0});ne(new URLSearchParams(e?.query_params??"").get(z)??"");const i=we({data:a}),o=q(),p=_(),g=new URLSearchParams(p.search).get(D)??new URLSearchParams(e?.query_params??"").get(D)??void 0,y=K(),{country:l,userCountry:m}=le({initialCountryCode:g}),f=ce({country:l,currentAccount:o,location:"TeamDirectSignUpFlow"}),s=xe(e?.step_name),{step:c,nextStep:h,previousStep:M}=ke({initialStep:s&&x.includes(s)?s:void 0});d.useEffect(()=>{e||(()=>{N({step_name:e?.step_name??x[0],query_params:p.search,user_segment:"v1"})})()},[]),d.useEffect(()=>{const S=p.key;I.logEventWithStatsig("Account Pay: Team Direct Sign Up Flow","chatgpt_account_payment_team_direct_sign_up_flow",{...o?.subscriptionAnalyticsParams,referrer:document.referrer,initialTab:e?.step_name,currentTab:c,locationKey:S,navigationType:y,initialCountrySelectorCountry:g??l,selectedCountry:f.country??"",selectedCurrency:f.currency??"",userCountry:m??""})},[c]);const k=()=>{switch(c){case"about-work":return r.jsx(ye,{formData:a,onNext:async S=>{const b={...a,...S};t(b),await h(b)}});case"workspace-info":return r.jsx(Se,{formData:a,onNext:async S=>{const b={...a,...S};t(b),await h(b)}});case"configure-plan":return r.jsx(he,{formData:a,initialBillingDetails:f,onNext:async S=>{await i({...a,...S})},pendingWorkspace:e,onPrevious:S=>{const b={...a,...S};t(b),M(b)}});default:return null}};return r.jsxs(r.Fragment,{children:[r.jsx("title",{children:n.formatMessage(u.teamSignUpPageTitle)}),k()]})},we=({data:e})=>{const{prepareCheckoutSession:n,navigateToCheckout:a}=X(),t=G(),i=w(),o=q();return d.useCallback(async({priceInterval:g,billingDetails:y,numSeats:l,promoData:m})=>{try{I.logEvent("Account Pay: Payment Checkout Clicked",{planType:J.TEAM,...o?.subscriptionAnalyticsParams,referrer:document.referrer});const f=await n({plan_name:"chatgptteamplan",team_plan_data:{workspace_name:e.workspaceName??"",price_interval:g,seat_quantity:l},billing_details:y,promo_campaign:g===C.FLEXIBLE?m?.coupon:null,cancel_url:window.location.href});await a(f)}catch(f){v.addError(f),t.warning(i.formatMessage(oe.paymentErrorWarning),{hasCloseButton:!0})}},[o?.subscriptionAnalyticsParams,e.workspaceName,i,a,n,t])},R=(e,n)=>{const a=new URLSearchParams(window.location.search);Object.entries(e).forEach(([i,o])=>{a.set(i,o)});const t=`${window.location.pathname}?${a.toString()}`;n?n(t,{replace:!1}):window.history.replaceState(null,"",t)},x=["workspace-info","configure-plan"],ke=({initialStep:e})=>{const n=O(),a=_(),[t,i]=d.useState(()=>{const l=e??x[0];return R({[P]:l}),l}),o=d.useCallback(l=>{i(l),R({[P]:l},n)},[n]),p=d.useRef(null);d.useEffect(()=>{const m=new URLSearchParams(a.search).get(P);m!==p.current&&m&&x.includes(m)&&m!==t&&o(m),p.current=m},[a.search,o,t]);const g=async l=>{let m=t;const f=x.indexOf(t);f>=0&&f<x.length-1&&(m=x[f+1],o(m));try{await N({workspace_name:l.workspaceName,company_size:l.companySize,department:l.department,role:l.role,step_name:m,query_params:a.search,user_segment:"v1"})}catch(s){v.addError(s)}},y=d.useCallback(async l=>{let m=t;const f=x.indexOf(t);f>0&&(m=x[f-1],o(m));try{await N({workspace_name:l.workspaceName,company_size:l.companySize,department:l.department,role:l.role,step_name:m,query_params:a.search,user_segment:"v1"})}catch(s){v.addError(s)}},[a.search,o,t]);return{step:t,nextStep:g,previousStep:y}},De=Y(function({loaderData:n}){const a=_(),t=O();return d.useEffect(()=>{const i=n.pendingWorkspace?.query_params;if(!i)return;const o=new URLSearchParams(a.search),p=new URLSearchParams(i);let g=!1;for(const[y,l]of p)!o.get(y)&&y!==P&&(o.set(y,l),g=!0);g&&t(`${a.pathname}?${o.toString()}`,{replace:!0})},[n.pendingWorkspace?.query_params,a.pathname,a.search,t]),r.jsx(be,{pendingWorkspace:n.pendingWorkspace})});export{De as default};
//# sourceMappingURL=b9in4ve8p5e5ert0.js.map
