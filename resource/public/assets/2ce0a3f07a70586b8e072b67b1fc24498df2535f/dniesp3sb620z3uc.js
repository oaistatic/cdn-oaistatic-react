import{r as C,b as Z,j as s,M as I,v as ye,c as D,a as be,L as Se}from"./n97h6so7iblif4c5.js";import{al as Ce,c6 as Ie,ow as _e,at as ne,nJ as Te,nI as Fe,nX as W,nK as Pe,lc as Ne,gk as E,ox as we,P as Q,aa as Ee,i_ as Y,a8 as Me,oy as V,oz as ee,jZ as De,a9 as ke,bx as J,C as de,fT as ue,a as R,p as ze,B as Ae,aF as q,hA as Re,d as X,cp as Oe,d6 as Ue,d7 as Le,k as Ge,cm as Be,bu as $e,c as me,ap as He,gl as We,aD as Xe,eP as Ze,iF as Qe}from"./cim4usely8ixso70.js";import{at as oe,fE as qe,eY as Ke,fF as Ye,bO as ie,fG as Je,av as j,cO as Ve,eZ as et,fH as te,bU as tt,fI as st,fJ as nt,fK as ot,fL as rt,fM as it,fN as at,fO as lt,fP as ct,dP as pe,y as dt,x as ut,fQ as mt,fR as pt,fS as xe,fT as xt,fU as ft,fV as gt,fW as ht,dm as vt,fX as jt,aq as yt,fY as bt,fZ as St,f_ as ae,f$ as Ct,g0 as It,g1 as _t}from"./ivbsxyeeopn30y8l.js";import{g as Tt,D as se}from"./dtltw5so60m9d99q.js";import{u as Ft}from"./kgkkjgk15rr7n5rs.js";import{P as Pt}from"./o9aygkglauyctw2w.js";import"./dl6wm3f4iy2ldybm.js";import"./ib76cquqlyjrlt71.js";import"./g86fwc5245pbdtof.js";const fe=Ce.div`text-sm text-red-500`,Nt=5,wt=20,Et=40,Mt=i=>{switch(i){case E.FREE:return Nt;case E.GO:case E.PLUS:case E.EDUCATION:case E.QUORUM:case E.DEPRECATED_ENTERPRISE:case E.DEPRECATED_EDU:return wt;case E.PRO:case E.TEAM:case E.BUSINESS:return Et}};function ge({onClose:i,gizmo:e}){const t=Z(),[o,a]=C.useState(e?.gizmo?.instructions||""),n=oe(),r=ne(),d=[];o?.length>te&&d.push(t.formatMessage(j.instructionsTooLong,{length:te}));const c=l=>{a(l.target.value)},x=()=>{i()},p=async()=>{try{await n.mutateAsync({update:{instructions:o??""},id:e.gizmo.id}),i()}catch(l){const g=ue(l);r.danger(g??"Error",{duration:2,toastId:"custom_instructions_modal_save_error"})}},u=s.jsx(J.Button,{title:t.formatMessage(j.save),color:"primary",onClick:p,loading:n.isPending,disabled:d.length>0}),h=s.jsx(J.Button,{title:t.formatMessage(j.cancel),color:"secondary",onClick:x,disabled:n.isPending}),{canEdit:m}=W(e);return s.jsx(de,{testId:"modal-project-custom-instructions",className:"min-h-[50dvh] max-w-[820px]",isOpen:!0,showCloseButton:!n.isPending,hideSeparator:!0,noPadding:!0,size:"custom",type:"success",title:s.jsx("div",{className:"h-8",children:t.formatMessage(j.editCustomInstructionsTitle)}),onClose:()=>{n.isPending||i()},children:s.jsxs("div",{className:"flex h-full flex-col px-4 pt-0 pb-4",children:[s.jsx("div",{className:"text-sm font-medium",children:t.formatMessage(m?j.editCustomInstructionsSubtitle:j.readOnlyCustomInstructionsTitle)}),s.jsx("div",{className:"text-token-text-secondary text-sm",children:t.formatMessage(m?j.editCustomInstructionsDescription:j.readOnlyCustomInstructionsDescription)}),s.jsx("textarea",{autoFocus:!0,placeholder:t.formatMessage(j.projectInstructionsPlaceholder),className:"focus:ring-token-text-primary border-heavy mt-4 mb-1 min-h-24 w-full grow resize-none overflow-x-clip overflow-y-auto rounded-lg border bg-transparent px-3 py-2 focus:ring-2",name:"instructions",onChange:c,value:o,disabled:n.isPending||!m}),d.map(l=>s.jsx(fe,{className:"mt-1",children:l},l)),m&&s.jsx(J.Actions,{primaryButton:u,secondaryButton:h})]})})}function Dt({gizmoId:i,gizmoName:e,canEdit:t,gizmoEditorData:o,openFileDialog:a,pendingFiles:n,setVersion:r,pendingFileUpsertMutationsRef:d,currentModelConfig:c}){const x=o?.files??[],p=Array.from(n.current.values()).filter(l=>x.every(g=>g.file_id!==l.fileId)),u=p.filter(l=>c!=null&&V(c,l.file.type,l.file.name)===ee.CodeInterpreter),h=x.filter(l=>c!=null&&l.type!=null&&V(c,l.type,l.name)===ee.CodeInterpreter),m=[...u.map(l=>l.tempId),...h.map(l=>l.file_id)];return s.jsx(nt,{gizmoId:i,gizmoName:e,canEdit:t,pendingFiles:p,pendingFileUpsertMutationsRef:d,files:x,interpreterOnlyFileIds:m,onAddFiles:a,removePendingFile:l=>{n.current.delete(l),r(g=>g+1)}})}const kt=C.forwardRef(function({gizmo:e,accountPlanType:t,showInstructions:o=!0},a){const n=Mt(t),r=Z(),[d,c]=C.useState(!1),x=oe(),p=qe(e),u=Ke(p),{data:h}=Ie(),m=h?.models.get(_e)??(h&&Ye(h.models.values(),U=>U.tags.includes(we.GPT_4o))),l=ne(),[g,v]=C.useState(0),f=C.useRef(new Map),y=C.useRef([]),b=Te(m,void 0),S=U=>{U.some(({errors:L})=>L.length!==1||L[0]?.code!==ie.TooManyFiles)?l.danger(j.unknownError,{duration:2,toastId:"snorlax_handle_file_rejected"}):l.danger(r.formatMessage(j.dragTooManyFilesError,{maxFileLimit:n}),{duration:2,toastId:"snorlax_handle_file_rejected",loggingTitle:"drag_too_many_files_error"})},T=async U=>{Q.logEvent("Upload File",{client:"web",eventSource:"mouse",intent:"gizmo"});const L=p.id;U.length>0&&await Promise.all(U.map(G=>{const K=Ee(G);f.current.set(K,{tempId:K,gizmoId:L,file:G,status:Y.Uploading,progress:1,fileId:null,cdnUrl:null}),Me(K,G,r,l,{kind:ke.Gizmo,gizmoId:L},{onFileUploaded:async(w,A,$,B)=>{const z=f.current.get(w);z?.fileId&&z?.fileId&&(y.current.push({id:e.gizmo.id,mutationId:ye(),update:H=>{if(!z.fileId)return H;const je=[...H.files??[],{file_id:z.fileId,name:z.file.name,size:z.file.size,type:B?.mimeType??De(z.file),last_modified:z.file.lastModified,file_size_tokens:B?.fileTokenSize}];return{...H,files:je}},onSuccess:()=>{f.current.delete(w),v(H=>H+1)}}),st(e.gizmo.id)({gizmoId:e.gizmo.id,upsertProjectMutation:x,pendingFileUpsertMutationsRef:y}))},onFileCreated:(w,A,$)=>{f.current.set(w,{tempId:w,gizmoId:L,file:G,status:Y.Uploading,progress:1,...f.current.get(w),fileId:A,cdnUrl:$}),v(B=>B+1)},onFileUploadProgress:(w,A)=>{const $=f.current.get(w);$?.status===Y.Uploading&&f.current.set(w,{...$,progress:A>95?95:A}),v(B=>B+1)},onError:w=>{f.current.delete(w),v(A=>A+1)}},{usesRetrievalIndex:m!=null&&V(m,G.type,G.name)===ee.Retrieval})}))},_=Fe(b),P=Tt(_),N=f.current.size+p.files.length,{canEdit:k}=W(e),{open:M,getInputProps:O,getRootProps:F,isDragAccept:he,isDragReject:ve}=Ft({noClick:!0,noKeyboard:!0,noDragEventsBubbling:!0,onDropAccepted:T,onDropRejected:S,multiple:!0,maxSize:Pe,maxFiles:n-N,validator:()=>N>=n?{code:ie.TooManyFiles,message:"Too many files"}:null,..._});return C.useImperativeHandle(a,()=>({openFileDialog:M})),s.jsxs("div",{...F({className:"h-full px-4"}),children:[s.jsx("input",{...O()}),o&&s.jsxs(Je,{children:[s.jsx("button",{className:"w-full",onClick:()=>c(!0),children:s.jsx("div",{className:"border-token-border-default w-full rounded-lg border text-start text-sm",children:p?.instructions?.length?s.jsx("div",{className:"mx-4 my-3 line-clamp-4",children:p.instructions}):s.jsxs("div",{className:"text-token-text-secondary flex h-full w-full items-center px-4 py-3",children:[s.jsx("div",{className:"flex-1",children:s.jsx(I,{...j.addCustomInstructions})}),s.jsx(Ve,{className:"icon-sm"})]})})}),u.includes(et.GizmoInstructionsTooLong)?s.jsx(fe,{className:"mt-1",children:s.jsx(I,{...j.instructionsTooLong,values:{length:te}})}):null]}),d&&s.jsx(ge,{gizmo:e,onClose:()=>{c(!1)}}),s.jsx(Dt,{gizmoId:e.gizmo.id,gizmoName:e.gizmo.display.name,canEdit:k,gizmoEditorData:p,openFileDialog:M,pendingFiles:f,pendingFileUpsertMutationsRef:y,setVersion:v,currentModelConfig:m}),he&&s.jsxs(se,{children:[s.jsx(tt,{}),s.jsx("h3",{children:s.jsx(I,{...j.dragInstructions})}),s.jsx("h4",{className:"w-2/3 text-center",children:P.length>0?P.join(", "):s.jsx(I,{...j.dragAllAccepted})})]}),ve&&s.jsxs(se,{children:[s.jsx(Ne,{className:"icon-2xl"}),s.jsx("h3",{children:s.jsx(I,{...j.dragTooManyFiles})}),s.jsx("h4",{className:"w-2/3 text-center",children:s.jsx(I,{...j.dragTooManyFilesDescription,values:{maxFileLimit:n}})})]})]})});function zt({gizmo:i,onClose:e}){const t=C.useRef(null),o=C.useCallback(()=>{t.current?.openFileDialog()},[t]),a=R(),n=ze(a),{canEdit:r}=W(i);return s.jsx(s.Fragment,{children:s.jsx(de,{testId:"modal-project-files",className:"min-h-72 max-w-[820px]",isOpen:!0,showCloseButton:!0,hideSeparator:!0,noPadding:!0,size:"custom",type:"success",headerAccessory:r&&s.jsx(Ae,{color:"secondary",onClick:o,children:s.jsx(I,{...j.addFilesButtonLabel})}),title:s.jsx(I,{...j.projectFilesModalTitle}),onClose:()=>{e()},children:s.jsx("div",{className:"grid min-h-[50dvh] grow overflow-y-auto pt-0",children:n&&s.jsx(kt,{ref:t,gizmo:i,showInstructions:!1,accountPlanType:n.planType})})})})}function At({gizmo:i}){return s.jsx("div",{className:"mt-6 grid grid-cols-2 items-start",children:i?s.jsxs(s.Fragment,{children:[s.jsx(Rt,{gizmo:i,className:"rounded-[20px_0px_0px_20px] [border-width:1px_0.5px_1px_1px]"}),s.jsx(Ut,{gizmo:i,className:"rounded-[0px_20px_20px_0px] [border-width:1px_1px_1px_0.5px]"})]}):s.jsxs(s.Fragment,{children:[s.jsx(le,{}),s.jsx(le,{})]})})}const re=({className:i,header:e,context:t,contextClassName:o="",icon:a,onClick:n,disabled:r=!1})=>s.jsx("button",{onClick:n,disabled:r,className:X("group/snorlax-control-tile border-token-border-light bg-token-bg-primary hover:bg-token-bg-tertiary active:bg-token-bg-tertiary relative h-full rounded-2xl border disabled:pointer-events-none disabled:opacity-50",i),children:s.jsxs("div",{className:"relative mx-5 my-4 flex items-center justify-between gap-3 overflow-hidden",children:[s.jsxs("div",{className:"w-full grow text-start",children:[s.jsx("div",{className:"text-sm font-medium",children:e}),s.jsx("div",{className:X("text-token-text-secondary text-xs",o),children:t})]}),a]})}),le=()=>s.jsx(re,{disabled:!0,header:s.jsx("div",{className:"bg-token-bg-tertiary my-2 h-2 w-48 rounded-full"}),context:s.jsx("div",{className:"bg-token-bg-tertiary my-2 h-2 w-32 rounded-full contain-inline-size"})});function Rt({className:i,gizmo:e}){const{files:t}=e,o=!t.length,a=R(),n=()=>q(a,zt,{gizmo:e});let r,d,c;const{canEdit:x}=W(e);if(o)r=s.jsx(I,{...x?j.addFilesButtonLabel:j.viewFilesButtonLabel}),d=s.jsx(I,{...x?j.filesControlDescription:j.noFilesReadOnlyDescription}),c=null;else{const u=t.slice(0,3);r=s.jsx(I,{...j.projectFilesModalTitle}),d=s.jsx(I,{...j.filesCount,values:{count:t.length}}),c=s.jsx("div",{className:"relative flex h-10 w-20 shrink-0 items-center justify-center rounded-full max-sm:sr-only",children:u.toReversed().map((h,m)=>s.jsx(Ot,{file:h,index:m,gizmoId:e.gizmo.id},h.id))})}return s.jsx(re,{className:i,onClick:n,header:r,context:d,icon:c,disabled:o&&!x})}function Ot({file:i,index:e,gizmoId:t}){const o=i.name,n=Re(o)&&i.file_id!=null&&s.jsx(ot,{fileName:o,fileId:i.file_id,gizmoId:t,className:"[box-shadow:0px_4px_16px_0px_rgba(0,0,0,0.05)]"});return s.jsx("div",{className:"border-token-bg-primary group-hover/snorlax-control-tile:border-token-bg-tertiary absolute end-0 top-0 h-10 w-10 overflow-hidden rounded-xl border-2",style:{transform:`translateX(${e*-20}px)`},children:n||s.jsx(rt,{className:"h-9 w-9 shrink-0 [box-shadow:0px_4px_16px_0px_rgba(0,0,0,0.05)]",filename:i.name,contextConnectorInfo:void 0})})}function Ut({gizmo:i,className:e}){const{instructions:t}=i.gizmo,o=!t.length,a=R(),n=()=>q(a,ge,{gizmo:i});let r,d,c;const{canEdit:x}=W(i);return o?(r=s.jsx(I,{...x?j.customInstructionsTitle:j.customInstructionsReadOnlyTitle}),d=s.jsx(I,{...x?j.customInstructionsDescription:j.customInstructionsReadOnlyDescription})):(r=s.jsx(I,{...j.editCustomInstructionsTitle}),c="overflow-hidden text-ellipsis whitespace-nowrap",d=t),s.jsx(re,{className:e,onClick:n,header:r,context:d,contextClassName:c,disabled:o&&!x})}const Lt=()=>s.jsx("div",{className:"ms-1 mt-3 h-10",children:s.jsx("div",{className:"bg-token-tertiary my-[15px] h-[10px] w-48 rounded-full"})}),ce=new Map;function Gt(i){const e=ce.get(i);if(e)return e;const t=We(Bt,2e3,{trailing:!0});return ce.set(i,t),t}async function Bt({ctx:i,gizmoId:e,upsertProjectMutation:t,toaster:o}){const a=St(i),n=ae(a(),"theme",e);try{n!==void 0&&await t.mutateAsync({id:e,update:{theme:n??void 0}}),ae(a(),"theme",e)===n&&Ct(i,e,"theme")}catch(r){const d=ue(r);o.warning(d??"Error",{duration:2})}}function $t({ctx:i,gizmoId:e,theme:t,upsertProjectMutation:o,toaster:a}){jt(i,e,"theme",t),Gt(e)({ctx:i,gizmoId:e,upsertProjectMutation:o,toaster:a})}function Ht(i){"use forget";const e=D.c(22),{gizmo:t}=i,o=R();let a;e[0]!==o||e[1]!==t?(a=()=>gt(o,t),e[0]=o,e[1]=t,e[2]=a):a=e[2];const n=$e(a),r=oe(),[d,c]=C.useState(!1),x=ne();let p;e[3]!==o||e[4]!==n||e[5]!==t||e[6]!==x||e[7]!==r?(p=S=>{S!==n&&(Q.logEventWithStatsig("Projects: Theme Change","chatgpt_web_projects_theme_change",{theme:S??"default"}),$t({ctx:o,gizmoId:t.gizmo.id,theme:S,upsertProjectMutation:r,toaster:x}))},e[3]=o,e[4]=n,e[5]=t,e[6]=x,e[7]=r,e[8]=p):p=e[8];const u=p,h=(t?.gizmo?.sharing?.subjects?.length??0)>0;let m;e[9]!==o?(m=me(o,"773249106"),e[9]=o,e[10]=m):m=e[10];const l=m;let g;e[11]===Symbol.for("react.memo_cache_sentinel")?(g=S=>c(S),e[11]=g):g=e[11];const v=h&&l;let f;e[12]!==n||e[13]!==v?(f=s.jsx(xe,{currentTheme:n,isSharedProject:v}),e[12]=n,e[13]=v,e[14]=f):f=e[14];let y;e[15]!==n||e[16]!==u?(y=s.jsx(ht,{currentTheme:n,onSelect:u}),e[15]=n,e[16]=u,e[17]=y):y=e[17];let b;return e[18]!==d||e[19]!==f||e[20]!==y?(b=s.jsx(vt,{open:d,sideOffset:4,alignOffset:7,side:"bottom",alignAgainstAnchor:"start",size:"none",modal:!0,onOpenChange:g,triggerButton:f,children:y}),e[18]=d,e[19]=f,e[20]=y,e[21]=b):b=e[21],b}function Wt(i){"use forget";const e=D.c(4),{gizmo:t}=i,o=Z(),a=R();let n;return e[0]!==a||e[1]!==t||e[2]!==o?(n=s.jsx("div",{className:"mb-8 inline-flex w-full justify-center gap-2",children:t?s.jsxs("div",{className:"text-page-header mt-0.5 inline-block px-4",children:[t?s.jsx(Ht,{gizmo:t}):s.jsx(xe,{disabled:!0,currentTheme:null}),s.jsx("h1",{className:"contents",children:s.jsx("a",{href:"#edit-title",role:"button","aria-label":o.formatMessage({id:"edit-title",defaultMessage:"Edit the title of {projectName}"},{projectName:t.gizmo.display.name}),className:"text-page-header group hover:text-token-text-secondary relative ms-2 text-balance",onClick:r=>{r.preventDefault(),q(a,pe,{submitButtonTitle:o.formatMessage(j.projectSettingsSubmitButton),gizmo:t})},children:t.gizmo.display.name})})]}):s.jsx(Lt,{})}),e[0]=a,e[1]=t,e[2]=o,e[3]=n):n=e[3],n}function Xt(i){"use forget";const e=D.c(2),{children:t}=i;let o;return e[0]!==t?(o=s.jsx("div",{className:"group relative flex flex-col gap-1 p-3",children:s.jsx("div",{className:"flex items-center gap-4",children:t})}),e[0]=t,e[1]=o):o=e[1],o}const Zt=i=>{"use forget";const e=D.c(30),{conversation:t,gizmo:o}=i,a=Xe(t.id,Jt)??t.title,[n,r]=C.useState(!1);let d,c;e[0]!==t.id?(d=()=>Qe(It,{editTitleInMainScreen:P=>{const{serverThreadId:N}=P;N===t.id&&r(!0)}}),c=[t.id],e[0]=t.id,e[1]=d,e[2]=c):(d=e[1],c=e[2]),C.useEffect(d,c);const x=R(),p=(o?.gizmo?.sharing?.subjects?.length??0)>0;let u;e[3]!==x?(u=me(x,"773249106"),e[3]=x,e[4]=u):u=e[4];const h=u,{snippet:m,owner:l}=t;let g;e[5]!==p||e[6]!==h||e[7]!==l?(g=p&&h&&s.jsx(yt,{user:l.name?{name:l.name,picture:l?.avatar_url}:void 0}),e[5]=p,e[6]=h,e[7]=l,e[8]=g):g=e[8];let v;e[9]!==t||e[10]!==a||e[11]!==n?(v=n?s.jsx(bt,{conversationId:t.id,historyConversationResponse:t,onClose:()=>{r(!1)}}):s.jsx("div",{className:"text-sm font-medium",children:a}),e[9]=t,e[10]=a,e[11]=n,e[12]=v):v=e[12];let f;e[13]!==m?(f=m&&s.jsx("div",{className:"text-token-text-secondary truncate text-sm",children:m}),e[13]=m,e[14]=f):f=e[14];let y;e[15]!==v||e[16]!==f?(y=s.jsxs("div",{className:"grow overflow-hidden group-hover:me-5",children:[v,f]}),e[15]=v,e[16]=f,e[17]=y):y=e[17];let b;e[18]!==t||e[19]!==n?(b=!n&&s.jsx(Qt,{conversation:t}),e[18]=t,e[19]=n,e[20]=b):b=e[20];let S;e[21]!==g||e[22]!==y||e[23]!==b?(S=s.jsxs(Xt,{children:[g,y,b]}),e[21]=g,e[22]=y,e[23]=b,e[24]=S):S=e[24];const T=S;let _;return e[25]!==T||e[26]!==t.id||e[27]!==o||e[28]!==n?(_=n?T:s.jsx(Se,{to:Ze(t.id,o),draggable:!1,children:T}),e[25]=T,e[26]=t.id,e[27]=o,e[28]=n,e[29]=_):_=e[29],_},Qt=i=>{"use forget";const e=D.c(19),{conversation:t}=i,[o,a]=C.useState(!1),n=Z();let r;e[0]!==t.update_time||e[1]!==n?(r=t.update_time&&Intl.DateTimeFormat(n.locale,{month:"short",day:"numeric"}).format(new Date(t.update_time)),e[0]=t.update_time,e[1]=n,e[2]=r):r=e[2];const d=r;let c;e[3]!==d||e[4]!==o?(c=!!d&&s.jsx("span",{className:X("transition-opacity duration-100 ease-out",o?"opacity-0":"opacity-100 group-hover:opacity-0"),children:d}),e[3]=d,e[4]=o,e[5]=c):c=e[5];const x=o&&"pointer-events-auto translate-y-0 scale-100 opacity-100";let p;e[6]!==x?(p=X("absolute end-0 top-0 bottom-0 flex items-center gap-1.5 pe-2","transition-all duration-100 ease-out","pointer-events-none translate-y-0 scale-95 opacity-0","group-hover:pointer-events-auto group-hover:translate-y-0 group-hover:scale-100 group-hover:opacity-100",x),e[6]=x,e[7]=p):p=e[7];let u;e[8]!==t.id?(u=g=>{a(g),g&&Q.logEvent("Conversation History Item Open Menu",{conversationId:t.id})},e[8]=t.id,e[9]=u):u=e[9];let h;e[10]!==t||e[11]!==u?(h=s.jsx(_t,{conversation:t,onOpenChange:u,inMainScreen:!0,isActiveConversation:!1}),e[10]=t,e[11]=u,e[12]=h):h=e[12];let m;e[13]!==p||e[14]!==h?(m=s.jsx("div",{className:p,onClick:Vt,children:h}),e[13]=p,e[14]=h,e[15]=m):m=e[15];let l;return e[16]!==c||e[17]!==m?(l=s.jsxs("div",{className:"group text-token-text-tertiary relative flex items-center justify-between text-sm",children:[c,m]}),e[16]=c,e[17]=m,e[18]=l):l=e[18],l};function qt(i){"use forget";const e=D.c(19),{gizmo:t}=i;xt(t.gizmo.id);const{items:o,hasNextPage:a,fetchNextPage:n,isLoading:r,isFetching:d,isFetchingNextPage:c}=ft(t.gizmo.id),x=C.useRef(null);let p;e[0]!==a||e[1]!==d||e[2]!==r||e[3]!==n?(p=y=>{r||y==null||(x.current?.disconnect(),x.current=new IntersectionObserver(b=>{b[0].isIntersecting&&a&&!d&&n()}),x.current.observe(y))},e[0]=a,e[1]=d,e[2]=r,e[3]=n,e[4]=p):p=e[4];const u=p;let h,m;e[5]===Symbol.for("react.memo_cache_sentinel")?(h=()=>()=>{x.current?.disconnect()},m=[],e[5]=h,e[6]=m):(h=e[5],m=e[6]),C.useEffect(h,m);const l=o.length;let g;e[7]!==l||e[8]!==t||e[9]!==a||e[10]!==u||e[11]!==r||e[12]!==o?(g=(l||r)&&s.jsx(Kt,{gizmo:t,items:o??[],hasNextPage:a,infiniteScrollTriggerElementRef:u}),e[7]=l,e[8]=t,e[9]=a,e[10]=u,e[11]=r,e[12]=o,e[13]=g):g=e[13];let v;e[14]!==c?(v=c&&s.jsx("div",{className:"m-4 mb-5 flex justify-center",children:s.jsx(He,{})}),e[14]=c,e[15]=v):v=e[15];let f;return e[16]!==g||e[17]!==v?(f=s.jsxs("div",{className:"mt-8 mb-14 contain-inline-size",children:[g,v]}),e[16]=g,e[17]=v,e[18]=f):f=e[18],f}function Kt(i){"use forget";const e=D.c(12),{gizmo:t,items:o,hasNextPage:a,infiniteScrollTriggerElementRef:n}=i;let r;if(e[0]!==t||e[1]!==a||e[2]!==n||e[3]!==o){let c;e[5]!==t||e[6]!==a||e[7]!==n||e[8]!==o.length?(c=(x,p)=>{const u=a&&p===o.length-3?n:void 0;return s.jsx("li",{ref:u,className:"border-token-border-light border-t first:border-t-0 last:border-b-0",children:s.jsx("div",{className:"hover:bg-token-interactive-bg-tertiary-hover",children:s.jsx(Zt,{conversation:x,gizmo:t})})},x.id)},e[5]=t,e[6]=a,e[7]=n,e[8]=o.length,e[9]=c):c=e[9],r=o.map(c),e[0]=t,e[1]=a,e[2]=n,e[3]=o,e[4]=r}else r=e[4];let d;return e[10]!==r?(d=s.jsx("ol",{children:r}),e[10]=r,e[11]=d):d=e[11],d}function Yt(i,e){"use forget";const t=D.c(14),o=it(),a=R(),n=be(),r=at(),d=lt.useStore(),c=o?.kind==="conversation"&&o.gizmoId!==e;let x;t[0]!==n||t[1]!==d||t[2]!==r?(x=async function(g){const{conversation:v,newGizmoId:f,previousGizmoId:y}=g;d.expandProject(f),await r({newGizmoId:f,conversation:v,previousGizmoId:y}),n(`/g/${f}/project`)},t[0]=n,t[1]=d,t[2]=r,t[3]=x):x=t[3];const p=x;let u;t[4]!==p||t[5]!==c||t[6]!==a||t[7]!==o||t[8]!==e||t[9]!==i?(u=()=>{if(!c)return;const{conversation:l,gizmoId:g}=o;if(e)return p({conversation:l,newGizmoId:e,previousGizmoId:g});q(a,v=>{const{onClose:f}=v;return s.jsx(pe,{onClose:f,onSuccess:y=>{if(!y)return;const b=p({conversation:l,newGizmoId:y,previousGizmoId:g});return Q.logEventWithStatsig("Projects: Create Open","chatgpt_web_projects_create_open",{source:i}),b}})})},t[4]=p,t[5]=c,t[6]=a,t[7]=o,t[8]=e,t[9]=i,t[10]=u):u=t[10];const h=u;let m;return t[11]!==c||t[12]!==h?(m={canDropConversation:c,onDropConversation:h},t[11]=c,t[12]=h,t[13]=m):m=t[13],m}function ds(i){"use forget";const e=D.c(37),{clientThreadId:t,gizmoId:o,currentModelId:a,onRequestCompletion:n}=i,{data:r}=Oe(o),d=C.useContext(Ue),c=Le(d),x=Ge(Be),{onDropConversation:p,canDropConversation:u}=Yt(void 0,o),[h,m]=C.useState(!1);let l;e[0]!==u?(l=F=>{F.preventDefault(),u&&m(!0)},e[0]=u,e[1]=l):l=e[1];let g;e[2]!==u||e[3]!==p?(g=F=>{F.preventDefault(),u&&(m(!1),p())},e[2]=u,e[3]=p,e[4]=g):g=e[4];let v,f;e[5]!==u?(v=F=>{F.preventDefault(),u&&m(!0)},f=F=>{F.preventDefault(),u&&m(!1)},e[5]=u,e[6]=v,e[7]=f):(v=e[6],f=e[7]);const y=c?"last-standard":"none",b=x?"none":"standard";let S;e[8]!==r?(S=s.jsx(Wt,{gizmo:r}),e[8]=r,e[9]=S):S=e[9];let T;e[10]!==t||e[11]!==a||e[12]!==r||e[13]!==n?(T=r?s.jsx(Pt,{clientThreadId:t,isNewThread:!0,currentModelId:a,onContinueGenerating:F=>n(ut(F)),onRequestCompletion:async F=>n(await dt(F)),hideHeader:!0}):s.jsx("div",{className:"bg-token-tertiary h-24 w-full rounded-3xl"}),e[10]=t,e[11]=a,e[12]=r,e[13]=n,e[14]=T):T=e[14];let _,P;e[15]!==r?(P=s.jsx(At,{gizmo:r}),_=r&&s.jsx(qt,{gizmo:r}),e[15]=r,e[16]=_,e[17]=P):(_=e[16],P=e[17]);let N;e[18]!==r?.gizmo||e[19]!==h?(N=h&&s.jsxs(se,{children:[s.jsx(ct,{className:"h-12 w-12",style:{color:"#3C46FF"}}),s.jsx("h3",{className:"text-center",children:s.jsx(I,{...j.addConversationToNamedSnorlax,values:{projectName:r?.gizmo.display.name??"project"}})}),s.jsx("h4",{className:"text-center",children:s.jsx(I,{...j.moveConversation})})]}),e[18]=r?.gizmo,e[19]=h,e[20]=N):N=e[20];let k;e[21]!==_||e[22]!==N||e[23]!==S||e[24]!==T||e[25]!==P?(k=s.jsxs(mt,{className:"[width:min(90cqw,var(--thread-content-max-width))]",children:[S,T,P,_,N]}),e[21]=_,e[22]=N,e[23]=S,e[24]=T,e[25]=P,e[26]=k):k=e[26];let M;e[27]!==k||e[28]!==y||e[29]!==b?(M=s.jsx(pt,{verticalMargin:"none",verticalPadding:y,horizontalPadding:b,children:k}),e[27]=k,e[28]=y,e[29]=b,e[30]=M):M=e[30];let O;return e[31]!==l||e[32]!==M||e[33]!==g||e[34]!==v||e[35]!==f?(O=s.jsx("div",{onDragOver:l,onDrop:g,onDragEnter:v,onDragLeave:f,className:"flex max-h-full min-h-full flex-col pt-(--header-height)",children:M}),e[31]=l,e[32]=M,e[33]=g,e[34]=v,e[35]=f,e[36]=O):O=e[36],O}function Jt(i){return i?.title}function Vt(i){return i.preventDefault()}export{ds as SnorlaxSplashScreen,Yt as useProjectsDragDrop};
//# sourceMappingURL=dniesp3sb620z3uc.js.map
