import{j as e,h as C,l as h,d as O,M as p}from"./n97h6so7iblif4c5.js";import{eO as w,at as v,R as S,d as F,il as E,cO as R,a as q,p as M,na as P,gU as U,nb as B,dN as I,dO as Q}from"./cim4usely8ixso70.js";import{c as A}from"./hwthtm84lx2e2tl4.js";function b(){return e.jsx(w,{className:"icon-sm text-token-text-tertiary ms-1"})}function T({onChange:t,enabled:s,Icon:a,label:n,labelValues:d,description:o,onClickInfo:r,tooltip:i,tooltipValues:u,hasPadding:m=!0,className:x,disabled:c=!1,messageAfterTooltip:l=void 0}){return e.jsx(A,{className:F("justify-start",m?"py-6":"py-0",x),children:e.jsxs("div",{className:"flex flex-col gap-0.5",children:[e.jsxs("div",{className:"flex flex-row gap-4",children:[e.jsx(E,{label:"",disabled:c,enabled:s,onChange:t}),e.jsxs("p",{className:"text-md inline-flex items-center",children:[a&&e.jsx(a,{className:"icon me-1.5"}),n&&e.jsx(p,{...n,values:d}),i&&e.jsx(R,{interactive:!0,label:e.jsx(p,{...i,values:u}),side:"top",children:r?e.jsx("button",{className:"block h-full",onClick:r,children:e.jsx(b,{})}):e.jsx(b,{})}),l&&e.jsx("span",{className:"text-token-text-secondary ps-1 text-sm",children:e.jsx(p,{...l})})]})]}),o&&e.jsx("span",{className:"text-token-text-secondary ms-14 text-sm",children:e.jsx(p,{...o})})]})})}function z({workspaceId:t,Icon:s,label:a,description:n,onClickInfo:d,feature:o,value:r,tooltip:i,hasPadding:u=!0,className:m,disabled:x=!1,overrideDisplayValue:c=void 0,messageAfterTooltip:l=void 0}){const j=v(),_=C(),{variables:y,mutate:f}=h({mutationFn:({feature:g,enabled:N})=>S.safePost("/accounts/{account_id}/beta_features",{parameters:{path:{account_id:t}},requestBody:{feature:g,value:N}}),onSettled:()=>{_.invalidateQueries({queryKey:["workspace-settings",t]})},onError:()=>{j.danger(k.featureSettingsUpdateFailed,{toastId:"workspace_beta_feature_toggle_row"})}});return e.jsx(T,{onChange:g=>{f({feature:o,enabled:g})},enabled:c??y?.enabled??r,Icon:s,label:a,description:n,tooltip:i,hasPadding:u,className:m,disabled:x,messageAfterTooltip:l,onClickInfo:d})}function D({connectorId:t,workspaceId:s,Icon:a,label:n,tooltip:d,tooltipValues:o,messageAfterTooltip:r,description:i,labelValues:u,disabled:m}){const x=v(),c=C(),l=q(),j=M(l),{enabled:_,isLoading:y}=P(t,U.ADMIN_SETTING),{variables:f,mutate:g}=h({mutationFn:N=>S.safePost("/accounts/{account_id}/connectors/{connector_id}/workspace_permissions",{parameters:{path:{account_id:s,connector_id:t}},requestBody:{enabled:N}}),onSettled:()=>{c.invalidateQueries({queryKey:B(j?.normalizedAccountUserId)}),t===I[Q.GITHUB_CONNECTOR]&&!f&&c.invalidateQueries({queryKey:["workspace-settings",s]})},onError:()=>{x.danger(k.featureSettingsUpdateFailed,{toastId:"workspace_platform_connector_toggle_row"})}});return e.jsx(T,{onChange:g,enabled:f??!!_,Icon:a,label:n,labelValues:u,disabled:y||m,tooltip:d,tooltipValues:o,messageAfterTooltip:r,description:i})}const k=O({featureSettingsUpdateFailed:{id:"workspaceSettingsOld.featureSettingsUpdateFailed",defaultMessage:"Failed to update feature setting"}});export{z as B,b as S,D as W};
//# sourceMappingURL=fzqyx22j1ty1lzmv.js.map
