import{r as c,j as t}from"./n97h6so7iblif4c5.js";import{cD as x,aI as f,aJ as S,iu as _,s as A,N as M,ga as g}from"./cim4usely8ixso70.js";import{S as j}from"./kds0rrlel320n5ae.js";import{dp as v,dq as w,cX as O,dr as E,ds as N,dt as C,du as R,dv as T}from"./ivbsxyeeopn30y8l.js";import{u as b}from"./jx2hj56jr1whq2nv.js";function J(o,s){const{automationId:n,automationTitle:e,automationMessage:l}=c.useMemo(()=>{const i=s.find(d=>d.author.role===x.Assistant),r=i?f.getParentPromptNode(S(o),i.id):null;let a=r?.message.metadata;a?.real_author_type||(a=s.find(p=>p.metadata?.real_author_type==="automation")?.metadata);const m=a?.real_author_type==="automation"?a?.real_author_id:null,u=a?.real_author_title;return{automationId:m,automationTitle:u,automationMessage:r?.message}},[o,s]),{automation:y}=b(n??"");return{automationId:n,automation:y,automationTitle:e,automationMessage:l}}function q({clientThreadId:o,messages:s}){const{automationId:n,automation:e,automationTitle:l}=J(o,s),i=v(o).isOdysseyMode||s.some(u=>u.metadata?.n7jupd_message),r=_(o)?.value,{isScheduledRun:a}=c.useContext(w),[h,m]=c.useState(!1);return c.useEffect(()=>{n&&A.count(M.JAWBONE,"jawbone_automation_source_header.open")},[n]),n?a?t.jsx("div",{className:"relative my-2 w-full",children:t.jsx(O,{automation:e,fullWidth:!0})}):i?r===g.REALTIME?null:t.jsx(E,{clientThreadId:o,children:t.jsx(N,{children:({isScheduled:u,isScheduledRun:d})=>u&&d&&t.jsx(C,{})})}):t.jsxs("div",{className:"text-token-text-secondary hover:text-token-text-primary mb-1 flex items-center gap-1.5 text-sm",children:[t.jsx(j,{className:"icon-sm"}),t.jsx("button",{onClick:()=>{m(!0)},children:e?.title??l}),h&&e&&t.jsx(R,{initialScheduleComponents:e.schedule_components,nextRunTimes:e.next_run_times,children:t.jsx(T,{item:e,source:"chat",onClose:()=>{m(!1)}})})]}):null}export{q as AutomationSourceHeader};
//# sourceMappingURL=iz39hrv5lt4xhuea.js.map
