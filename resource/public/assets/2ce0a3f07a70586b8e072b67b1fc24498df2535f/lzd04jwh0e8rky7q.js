import{jb as v,l9 as F,at as L,aV as P,aU as E,b7 as O,a as k,aE as S,u5 as A,a6 as x,P as N}from"./cim4usely8ixso70.js";import{g as U}from"./lgwn8lf5xrondcxt.js";import{l$ as V,nB as q}from"./ivbsxyeeopn30y8l.js";import{a as z,o as D,N as K,b as H,h as Q,r as l,d as $}from"./n97h6so7iblif4c5.js";var j={};const T={oiw216z:`${j.VITE_OIW216Z_SERVICE_URL??"https://sora.com"}/subscription`,vza493q:v,students:V(!0)},X=F(function(){const o=z(),[n]=D(),p=K(),r=L(),i=H(),g=Q(),t=P.getItem(E.CheckoutFrom),a=O(),e=n.get("plan_type")??"plus",u=k(),m=S(u,"2494348560"),{anyConnectorEnabled:d,isLoading:f}=A(),w=l.useRef(e),c=p?.postCheckoutResult==="success",y=p?.postCheckoutResult==="payment_failed";return l.useEffect(()=>{c&&e==="plus"&&a!=null&&x.logEvent("chatgpt_plus_payment_success_page")},[e,a,c]),l.useEffect(()=>{if(f||a==null)return;if(y){const s=n.get("stripe_session_id"),C=n.get("processor_entity");o(s&&C?U(C,s):"/#pricing");const I=i.formatMessage(b.paymentFailedToastMessage);r.warning(I,{duration:5});return}const _=!d&&m.get("enable_ca_pro_onboarding_flow",!1)&&w.current==="pro",M="free",R=q(e);c&&N.logPaymentSuccess({plan_type:e});let h=!0;if(a.planType===M)g.invalidateQueries({queryKey:["account-status"]});else{if(t&&T[t])P.removeItem(E.CheckoutFrom),window.location.href=T[t],h=t!=="students";else if(_)window.location.href="/payments/success-ind";else{const s=S(u,"2239990662").get("redirect_to_home",!1);o(s?"/":"/#pricing")}if(h&&!_){const s=i.formatMessage(b.paymentConfirmationToastMessage,{planName:R});r.success(s,{duration:5})}}},[o,n,r,i,g,t,a,e,f,d,m,u,c,y]),null}),b=$({paymentConfirmationToastMessage:{id:"Payments.success.toast",defaultMessage:"You're now subscribed to ChatGPT {planName}"},paymentFailedToastMessage:{id:"Payments.success.paymentFailedToastMessage",defaultMessage:"Payment failed. Please try again."}});export{T as C,X as p};
//# sourceMappingURL=lzd04jwh0e8rky7q.js.map
