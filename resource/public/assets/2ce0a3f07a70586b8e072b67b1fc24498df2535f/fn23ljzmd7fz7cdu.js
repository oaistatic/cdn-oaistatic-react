import{r as D,j as e}from"./n97h6so7iblif4c5.js";import{lm as w,d as x,dj as Y,at as V,e5 as ss,fQ as es}from"./cim4usely8ixso70.js";import{dL as ts,Z as ns}from"./ivbsxyeeopn30y8l.js";const rs="{{.sandboxHost}}",os=`https://${rs}`,{origin:as}=new URL(os),ps=[as,"https://cdn.jsdelivr.net","https://cdn.tailwindcss.com","https://esm.sh","https://unpkg.com","https://pypi.org","https://files.pythonhosted.org"];var T="ABORT",_="CALL",v="REJECT",I="RESOLVE";function m(s,t){const d=i=>{const r=i.data;if(Array.isArray(r)&&r[0]===_){i.stopImmediatePropagation();const[c]=i.ports;if(!c)throw new Error("RPCCallMessage must contains a port.");t?async function(){const a=new AbortController;try{c.onmessage=({data:n})=>Array.isArray(n)&&n[0]===T&&a.abort(),c.postMessage([I,await t.call({signal:a.signal},...r.slice(1))])}catch(n){c.postMessage([v,n])}finally{c.close()}}():(c.postMessage([v,new Error("No function was registered on this RPC. This is probably calling a client which do not implement the function.")]),c.close())}};s.addEventListener("message",d),s.start();const l=i=>(...r)=>new Promise((c,a)=>{var n;const{port1:o,port2:h}=new MessageChannel;o.onmessage=p=>{const y=p.data;y[0]===I?c(y[1]):a(y[1]),o.close()},(n=i?.signal)==null||n.addEventListener("abort",()=>{o.postMessage([T]),o.close(),a(new Error("Aborted."))}),s.postMessage([_,...r],[h,...i.transfer||[]])}),f=l({});return f.withOptions=l,f}var B="GENERATOR_GENERATE";function G(s,t){const d=i=>{const r=i.data;if(Array.isArray(r)&&r[0]===B){if(i.stopImmediatePropagation(),!t)throw new Error("No function was registered on this RPC. This is probably calling a client which do not implement the function.");const[c,a,...n]=r,o=t(...n);m(a.next,o.next.bind(o)),m(a.return,h=>{var p;return((p=o.return)==null?void 0:p.call(o,h))||{done:!0}}),m(a.throw,h=>{var p;return((p=o.throw)==null?void 0:p.call(o,h))||Promise.reject(h)}),m(a.asyncDispose,async()=>{const h=Symbol.asyncDispose||Symbol.for("Symbol.asyncDispose"),p=Symbol.dispose||Symbol.for("Symbol.dispose");h in o?await o[h]():p in o&&o[p]()})}};s.addEventListener("message",d),s.start();const l=i=>{let r;return(...c)=>{var a;const{port1:n,port2:o}=new MessageChannel,{port1:h,port2:p}=new MessageChannel,{port1:y,port2:N}=new MessageChannel,{port1:M,port2:E}=new MessageChannel,u={signal:i.signal},A=()=>{n.close(),o.close(),h.close(),p.close(),y.close(),N.close(),M.close(),E.close()},H=m(n).withOptions(u),K=m(h).withOptions(u),Q=m(y).withOptions(u),Z=m(M).withOptions(u);let S=!1;const O=async g=>{if(r?.(),S)return{done:!0};const R=await g();return R.done&&(S=!0,A()),R},q=async g=>{r?.(),await g(),S=!0,A(),r=()=>{throw new Error("This generator has been disposed.")}},L={next:g=>O(()=>K(g)),return:g=>O(()=>Q(g)),throw:g=>O(()=>Z(g)),[Symbol.asyncDispose||Symbol.for("Symbol.asyncDispose")]:()=>q(()=>H()),[Symbol.asyncIterator]:()=>L};return s.postMessage([B,{asyncDispose:o,next:p,return:N,throw:E},...c],[...i.transfer||[],o,p,N,E]),(a=i.signal)==null||a.addEventListener("abort",()=>{r=()=>{throw new Error("This generator has been aborted.")},A()},{once:!0}),L}},f=l({});return f.withOptions=l,f}const hs=async(s,t,d=[])=>{const l=new Set(Object.keys(t).filter(a=>t[a]?.constructor?.name==="AsyncGeneratorFunction")),f={};for(const[a,n]of Object.entries(t)){const o=new MessageChannel;l.has(a)?G(o.port1,n):m(o.port1,n),f[a]=o.port2}const{ports:i,replyPort:r}=await new Promise(a=>{const n=o=>{o.data.type==="init"&&o.source&&o.source===s.contentWindow&&(window.removeEventListener("message",n),a(o.data))};window.addEventListener("message",n)});return r.postMessage(f,Object.values(f)),r.start(),Object.fromEntries(Object.entries(i).map(([a,n])=>[a,d.includes(a)?G(n):m(n)]))},b=s=>Array.isArray(s)||w(s)||s instanceof Map||s instanceof Set,j=s=>s==null||typeof s=="string"||typeof s=="number"||typeof s=="boolean",$=s=>w(s)?Object.entries(s):Array.from(s.entries()),z=s=>`${typeof s}:${typeof s=="object"?JSON.stringify(s):s}`,fs=({isPreview:s=!1,value:t})=>{const[d,l]=D.useState(!1);return j(t)?e.jsx(C,{value:t,depth:0}):b(t)?e.jsxs("span",{className:x("relative z-0 max-w-full font-mono text-sm leading-6",d&&"w-full flex-auto"),children:[e.jsxs("span",{role:"button",className:"group/row flex flex-wrap items-center gap-x-1 italic",onClick:()=>l(!d),children:[!s&&e.jsx(F,{isExpanded:d}),e.jsx(X,{value:t,depth:0}),e.jsx(k,{value:t})]}),d&&!s&&e.jsx("div",{className:"ps-6",children:e.jsx(U,{value:t,depth:0})})]}):e.jsx("span",{className:"truncate",children:String(t)})},J=({value:s,depth:t=0})=>b(s)?e.jsx(U,{depth:t,value:s}):j(s)?e.jsx(C,{depth:t,value:s}):e.jsx("span",{className:"truncate",children:String(s)}),X=({value:s,depth:t=0})=>{const d=Array.isArray(s),l=$(s);return e.jsxs("div",{className:"inline-flex max-w-fit min-w-0 grow basis-0",children:[!w(s)&&e.jsx(P,{isShort:!0,isSecondary:!0,collection:s}),d?"[":"{",e.jsx("span",{className:"inline-flex max-w-fit min-w-0 shrink grow basis-0 overflow-hidden",children:l.map(([f,i],r)=>{let c=null;return b(i)?c=e.jsx(P,{collection:i}):j(i)?c=e.jsx(C,{truncate:!0,depth:t+1,value:i}):c=e.jsx(J,{depth:t+1,value:i}),e.jsxs(D.Fragment,{children:[(w(s)||s instanceof Map)&&e.jsx("span",{className:"text-token-text-secondary min-w-[2em] shrink truncate whitespace-pre",children:e.jsx(W,{value:s,propertyKey:f})}),c,r<l.length-1&&e.jsx("span",{className:"whitespace-pre",children:", "})]},z(f))})}),d?"]":"}"]})},U=({value:s,depth:t=0})=>{const[d,l]=D.useState(()=>new Set),f=$(s);return e.jsx("ol",{className:"flex flex-col ps-6 font-mono",children:f.map(([i,r])=>{const c=z(i),a=d.has(c),n=b(r),o=()=>{l(h=>{const p=new Set(h);return p.has(c)?p.delete(c):p.add(c),p})};return e.jsxs("li",{className:x("flex ps-1 whitespace-nowrap",n&&"flex-col",!n&&"group/row flex-wrap"),onClick:h=>h.stopPropagation(),children:[e.jsxs("span",{onClick:n?o:void 0,role:n?"button":void 0,className:x("group/row z-10 -ms-1 min-w-0 items-center gap-x-1",n?"flex":"inline-flex"),children:[n&&e.jsxs(e.Fragment,{children:[e.jsx(is,{}),e.jsx(F,{shiftLeft:!0,isExpanded:a})]}),e.jsx("span",{className:x("font-bold",(w(s)||Array.isArray(s))&&"text-red-900 dark:text-blue-400"),children:e.jsx(W,{value:s,propertyKey:i})}),n&&!a&&e.jsx(X,{value:r,depth:t+1}),n&&a&&e.jsx(P,{isSecondary:!0,collection:r}),n&&e.jsx(k,{value:r})]}),(!n||a)&&e.jsx(J,{value:r,depth:t+1}),(typeof r=="string"||typeof r=="number")&&e.jsx(k,{value:r})]},c)})})},C=({value:s,truncate:t=!1})=>typeof s=="string"?e.jsxs("span",{className:x("dark:text-blue-75 text-red-500",t&&"max-w-fit min-w-[2em] shrink-0 grow basis-0 overflow-hidden text-ellipsis whitespace-nowrap",!t&&"break-words break-all whitespace-normal"),children:["'",s,"'"]}):e.jsx("span",{className:x("whitespace-nowrap",s==null?"text-token-text-secondary":"dark:text-brand-purple-600 text-blue-500"),children:String(s)}),is=()=>e.jsx("span",{className:"absolute start-0 end-0 z-[-1] h-6 rounded-md group-hover/row:bg-gray-50 dark:group-hover/row:bg-gray-700"}),P=({collection:s,isSecondary:t=!1,isShort:d=!1})=>{let l=null;return Array.isArray(s)&&s.length>0?l=d?`(${s.length})`:`Array(${s.length})`:s instanceof Set?l=`Set(${s.size})`:s instanceof Map?l=`Map(${s.size})`:w(s)&&(l="{â€¦}"),l&&e.jsx("span",{className:x(t&&"text-token-text-secondary"),children:l})},W=({value:s,propertyKey:t})=>w(s)||Array.isArray(s)?`${ss(t)}: `:s instanceof Map?e.jsxs("span",{className:"inline-flex items-center gap-1",children:[j(t)?e.jsx(C,{value:t,depth:0}):e.jsx("span",{className:"text-token-text-secondary",children:JSON.stringify(t)}),e.jsx(es,{className:"icon-sm text-token-text-secondary"})]}):null,F=({isExpanded:s,shiftLeft:t=!1})=>e.jsx("button",{className:x("flex h-5 shrink-0 items-center overflow-hidden",t&&"ms-[-16px]"),children:e.jsx(Y,{className:x("icon-sm text-token-text-secondary transition-transform",s&&"rotate-90")})}),k=({value:s})=>{const t=V(),d=()=>{ns(JSON.stringify(s),t)};return e.jsx("span",{className:x("text-token-text-secondary relative inline-block h-4 self-center opacity-0 transition-opacity","group-hover/row:opacity-100 group-hover/row:delay-500","hover:after:bg-token-main-surface-tertiary after:pointer-events-none after:absolute after:inset-[-4px] after:z-0 after:rounded-lg after:content-['']"),children:e.jsx(ts,{iconClassName:"icon-sm z-10",iconOnly:!0,onCopy:d})})};export{ps as C,os as L,fs as a,hs as i};
//# sourceMappingURL=fn23ljzmd7fz7cdu.js.map
