const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/jx17w9gk7w1zvxkl.js","assets/n97h6so7iblif4c5.js","assets/cim4usely8ixso70.js","assets/root-c9lkqywj.css","assets/gq0ojl3pt2hm8en1.js","assets/ivbsxyeeopn30y8l.js","assets/conversation-small-dhmr708a.css","assets/d3y72ugnrmac5z1v.js","assets/iomm34fcl9fukacb.js","assets/fohx4vo3qyr0edh2.js","assets/dzjn1hzm825wa74f.js","assets/mfrmh8iqcq7c5rho.js"])))=>i.map(i=>d[i]);
import{at as q,R as b,d as L,b7 as K,qh as le,b as je,ap as $,b2 as ne,cN as fe,bc as C,aq as ve,bb as Me,qy as be,C as Ne,bx as re,ao as p,cO as oe,bZ as I,B as F,gl as Q,oK as z,ac as ye,ad as Ce,a as Re,a6 as Ue,aF as ke,cL as _e,bW as Pe,l9 as we}from"./cim4usely8ixso70.js";import{u as V,b as j,h as W,l as D,d as N,j as e,a as ce,r as h,M as x,o as Ie}from"./n97h6so7iblif4c5.js";import{T as i}from"./iomm34fcl9fukacb.js";import{aq as de,ag as Se,e$ as qe,nr as H,lH as De,lh as J,ns as Z,cL as Te,hI as ie,hH as Y,F as Ae,h as Ee,bC as Fe,nt as Be,fD as Ve}from"./ivbsxyeeopn30y8l.js";import{m as me}from"./k98aewp56jav4507.js";import{G as We}from"./hmz7w1tf9ucyeco5.js";import{n as T}from"./jdpqs7fyetm56n9m.js";import{T as He,a as Oe}from"./hzad5cii6l7taj3p.js";import{a as Ge,c as $e,u as Le}from"./n4ohhvjbqfm5jmcl.js";import"./g1gh2pdal3y13b7m.js";import"./dniesp3sb620z3uc.js";import"./dtltw5so60m9d99q.js";import"./kgkkjgk15rr7n5rs.js";import"./o9aygkglauyctw2w.js";import"./dl6wm3f4iy2ldybm.js";import"./ib76cquqlyjrlt71.js";import"./g86fwc5245pbdtof.js";import"./k5qf6pgck1wqkdil.js";import"./dqol4xyk0imasmag.js";import"./gc0o4kf2vj2rpphe.js";import"./qt8c9lenu31o2obp.js";const _=25;function Ke(s,a,t){return V({queryKey:["workspace",s,"invites",a,t],queryFn:async()=>await b.safeGet("/accounts/{account_id}/invites",{parameters:{path:{account_id:s},query:{offset:a,limit:_,query:t}}})})}function Qe(s,a,t){return V({queryKey:["workspace",s,"invites","requests",a,t],queryFn:()=>b.safeGet("/accounts/{account_id}/invites",{parameters:{path:{account_id:s},query:{include_pending:!1,include_requests:!0,offset:a,limit:_,query:t}}})})}function ue(s){const a=j(),t=q(),n=W();return D({mutationFn:({inviteId:r,role:o,acceptRequest:c})=>b.safePatch("/accounts/{account_id}/invites/{invite_id}",{parameters:{path:{account_id:s,invite_id:r}},requestBody:{role:o,accept_request:c}}).catch(l=>{t.danger(a.formatMessage(y.updateInviteError,{error:l.message}),{loggingTitle:y.updateInviteError.defaultMessage,toastId:"invite",loggingDescription:"Unable to update invite from workspace"})}),onSuccess:()=>{n.invalidateQueries({queryKey:["workspace",s,"invites"]}),n.invalidateQueries({queryKey:["workspace",s,"invites","requests"]}),n.invalidateQueries({queryKey:["workspace",s]})}})}function ge(s){const a=j(),t=q(),n=W();return D({mutationFn:({email:r})=>b.safeDelete("/accounts/{account_id}/invites",{parameters:{path:{account_id:s}},requestBody:{email_address:r}}).catch(o=>{t.danger(a.formatMessage(y.deleteInviteError,{email:r,error:o.message}),{loggingTitle:y.deleteInviteError.defaultMessage,toastId:"invite",loggingDescription:"Unable to remove user from workspace"})}),onSuccess:()=>{n.invalidateQueries({queryKey:["workspace",s,"invites"]}),n.invalidateQueries({queryKey:["workspace",s,"invites","requests"]})}})}function ze(s){const a=j(),t=q(),n=W();return D({mutationFn:({role:r,email:o})=>b.safePost("/accounts/{account_id}/invites",{parameters:{path:{account_id:s}},requestBody:{email_addresses:[o],role:r,resend_emails:!0}}).then(({account_invites:c,errored_emails:l})=>{if(l.length>0)throw new Error(l[0].error);c.length>0&&t.success(a.formatMessage(y.resendInviteSuccess,{email:o}))}).catch(c=>{t.danger(a.formatMessage(y.resendInviteError,{email:o,error:c.message}),{loggingTitle:y.resendInviteError.defaultMessage,toastId:"invite",loggingDescription:"Unable to resend invite to user"})}),onSuccess:()=>{n.invalidateQueries({queryKey:["workspace",s,"invites"]}),n.invalidateQueries({queryKey:["workspace",s,"invites","requests"]})}})}const y=N({updateInviteError:{id:"WorkspaceInvites.updateInviteError",defaultMessage:"Unable to update invite from workspace: {error}"},deleteInviteError:{id:"WorkspaceInvites.deleteInviteError",defaultMessage:"Unable to remove user ({email}) from workspace: {error}"},resendInviteSuccess:{id:"WorkspaceInvites.resendInviteSuccess",defaultMessage:"Sent a new invite to {email}"},resendInviteError:{id:"WorkspaceInvites.resendInviteError",defaultMessage:"Unable to resend invite to ({email}) from workspace: {error}"}}),X=({userName:s,isScimManaged:a,dotted:t=!1})=>e.jsxs("div",{className:"relative me-3",children:[e.jsx(de,{user:{name:s,picture:null},size:"default",dotted:t}),a&&e.jsx("div",{className:"bg-token-bg-tertiary absolute -end-1 -bottom-1 rounded-full border-2 border-white p-0.25",children:e.jsx(Se,{width:10,height:10})})]}),Je=({children:s,ref:a,...t})=>e.jsx(T.Root,{license:"commercial",sheetRole:"dialog",...t,ref:a,children:s}),Ze=({children:s,ref:a,className:t,contentPlacement:n="left",...r})=>e.jsx(T.View,{className:L("z-1",t),contentPlacement:n,swipeOvershoot:!1,nativeEdgeSwipePrevention:!0,...r,ref:a,children:s}),Ye=({className:s,ref:a,...t})=>e.jsx(T.Backdrop,{className:s,...t,ref:a}),Xe=({children:s,ref:a,className:t,...n})=>e.jsx(T.Content,{className:L("bg-token-bg-primary box-border shadow-lg",t),...n,ref:a,children:s}),es=T.Portal,w={Root:Je,Portal:es,View:Ze,Backdrop:Ye,Content:Xe},ss=({workspaceId:s,userId:a})=>V({queryKey:[s,a,"user-roles"],queryFn:async()=>(await b.safeGet("/rbac/workspace/{workspace_id}/principals/{principal_id}/roles",{parameters:{query:{account_id:s},path:{workspace_id:s,principal_id:a}}})).roles}),as=({workspaceId:s,userId:a,enabled:t})=>V({enabled:t,queryKey:[s,a,"user-groups"],queryFn:async()=>(await b.safeGet("/accounts/{account_id}/users/{account_user_id}/groups",{parameters:{path:{account_id:s,account_user_id:a}}})).items}),ts=({workspaceId:s,user:a,onClose:t})=>{const n=j(),r=K(),o=ce(),c=le(),l=r?.isEnterprisey(),{data:m}=ss({workspaceId:s,userId:a.id}),d=h.useMemo(()=>m?.filter(u=>!u.predefined_role),[m]),{data:g}=as({workspaceId:s,userId:a.account_user_id,enabled:l});return e.jsx(w.Root,{presented:!0,defaultPresented:!0,onPresentedChange:t,children:e.jsx(w.Portal,{children:e.jsxs(w.View,{contentPlacement:"right",children:[e.jsx(w.Backdrop,{}),e.jsxs(w.Content,{style:{maxWidth:500},children:[e.jsxs("h1",{className:"flex items-center justify-between p-4",children:[e.jsx("div",{}),e.jsx(je,{onClick:t,iconSize:"lg",autoFocus:!0})]}),e.jsxs("div",{className:"flex flex-col gap-3 px-10 pt-4",children:[e.jsxs("div",{className:"flex flex-col items-center gap-3 text-center",children:[e.jsx(de,{user:{name:a.name??"",picture:null},size:"large"}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-heading-3",children:a.name}),e.jsx("div",{children:a.email})]})]}),e.jsx("hr",{className:"my-2.5"}),l&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx("div",{className:"text-caption-regular",children:n.formatMessage(A.groups)}),g==null&&e.jsx($,{}),g?.length===0&&e.jsx("div",{className:"text-token-text-tertiary text-sm italic",children:n.formatMessage(A.noGroups)}),g?.map(u=>e.jsx(ne,{className:"mx-0",as:"button",onClick:()=>o(`/admin/groups/${u.id}`),children:e.jsx("div",{className:"flex items-center justify-between gap-2 text-start",children:e.jsxs("div",{className:"flex flex-row items-center gap-3",children:[e.jsx("div",{children:e.jsx(We,{group:u})}),e.jsx("div",{children:u.name})]})})},u.id))]}),e.jsx("hr",{className:"my-2.5"})]}),c&&e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx("div",{className:"text-caption-regular",children:n.formatMessage(A.customRoles)}),d==null&&e.jsx($,{}),d?.length===0&&e.jsx("div",{className:"text-token-text-tertiary text-sm italic",children:n.formatMessage(A.noCustomRoles)}),d?.map(u=>e.jsx(ne,{className:"mx-0",as:"button",onClick:()=>o(`/admin/permissions/roles/${u.id}`),children:e.jsx("div",{className:"flex items-center justify-between gap-2 text-start",children:e.jsxs("div",{className:"flex flex-row items-center gap-3",children:[e.jsx("div",{children:u.predefined_role?e.jsx(qe,{className:"icon"}):e.jsx(fe,{className:"icon"})}),e.jsxs("div",{children:[e.jsx("div",{children:u.name}),e.jsx("div",{className:"text-token-text-tertiary text-sm",children:u.description})]})]})})},u.id))]})]})]})]})})})},A=N({removeUser:{id:"M6UqGh",defaultMessage:"Remove user"},customRoles:{id:"tt2Vcr",defaultMessage:"Custom roles"},noCustomRoles:{id:"esz0bm",defaultMessage:"No custom roles assigned"},groups:{id:"zWtMsq",defaultMessage:"Groups"},noGroups:{id:"VRtXNY",defaultMessage:"No groups assigned"}});function ee({currentRole:s,onUpdateUserRole:a,disabled:t=!1}){const n=H();return e.jsx(De,{disabled:t,defaultValue:s,onValueChange:r=>{a(r)},triggerClassName:"text-base",options:[{label:n[C.STANDARD],value:C.STANDARD},{label:n[C.ADMIN],value:C.ADMIN},{label:n[C.OWNER],value:C.OWNER}]})}const S=ve(()=>({confirmModalUserData:null})),B={openModalForUser:s=>{S.setState({confirmModalUserData:s})},closeModal:()=>{S.setState({confirmModalUserData:null})}};function ns({workspaceId:s,filterInputValue:a}){const[t,n]=h.useState(0),r=Me(),[o,c]=h.useState(),l=le(),m=r?.id,d=J(s),g=Z(s),u=d||g,v=os(),ae=cs(s),{data:O}=Te(s,t*ie,a),xe=h.useCallback(f=>{B.openModalForUser(f)},[]),he=h.useCallback(()=>{const f=S.getState().confirmModalUserData?.id;f!==void 0&&ae.mutate({userId:f}),B.closeModal(),c(void 0)},[ae]),pe=h.useCallback((f,G)=>{v.mutate({userId:f,value:G,workspaceId:s})},[v,s]);if(O===void 0)return e.jsx(se,{});const te=O.items,P=Math.ceil((O.total??0)/ie);return t>=P&&P!==0&&n(Math.max(P-1,0)),e.jsxs(e.Fragment,{children:[e.jsxs(i.Root,{fixed:!0,size:"normal",children:[e.jsxs("colgroup",{children:[e.jsx("col",{className:"w-[60%]"}),e.jsx("col",{className:"w-[20%]"}),e.jsx("col",{className:"w-[20%]"}),u&&e.jsx("col",{className:"w-16"})]}),e.jsxs(i.Header,{children:[e.jsx(i.HeaderCell,{children:e.jsx(x,{...M.name})}),e.jsx(i.HeaderCell,{children:e.jsx("span",{className:d?"ps-3":"",children:e.jsx(x,{...M.accountType})})}),e.jsx(i.HeaderCell,{children:e.jsx(x,{...M.dateAdded})}),u&&e.jsx(i.HeaderCell,{className:"w-16"})]}),e.jsxs(i.Body,{children:[te.map(f=>e.jsx(is,{isCurrentUser:m!==void 0&&f.id===m,user:f,currentUserHasAdminRights:u,isCurrentUserOwner:d,onRemoveUserClick:()=>xe({id:f.id,name:f.name??"",email:f.email??"",created_time:f.created_time}),onUpdateUserRole:pe,onClick:l?G=>c(G):void 0},f.id)),te.length===0&&e.jsx(i.Row,{className:"[&>td]:py-2",children:e.jsx(i.Cell,{children:e.jsx("div",{className:"text-token-text-tertiary",children:e.jsx(x,{...M.noResults})})})})]})]}),e.jsx("div",{className:"relative mt-4 mb-8 min-h-[20px]",children:P>1&&e.jsx("div",{className:"absolute start-1/2 top-1/2 flex -translate-x-1/2 -translate-y-1/2 justify-center",children:e.jsx(Y,{currentPage:t,onChangeIndex:n,length:P})})}),o&&e.jsx(ts,{workspaceId:s,user:o,onClose:()=>c(void 0)}),e.jsx(rs,{onDeleteConfirm:he})]})}function rs({onDeleteConfirm:s}){const a=j(),t=S(r=>r.confirmModalUserData!==null),n=S(r=>r.confirmModalUserData===null?{}:{userId:r.confirmModalUserData.id,email:r.confirmModalUserData.email,name:r.confirmModalUserData.name,dateAdded:be(r.confirmModalUserData.created_time)});return e.jsx(Ne,{testId:"modal-remove-member",isOpen:t,title:a.formatMessage(M.removeMemberModalTitle),onClose:()=>B.closeModal(),type:"success",primaryButton:e.jsx(re.Button,{title:a.formatMessage(M.removeMemberModalConfirm),color:"danger",onClick:s}),secondaryButton:e.jsx(re.Button,{title:a.formatMessage(M.removeMemberModalCancel),color:"secondary",onClick:()=>B.closeModal()}),children:e.jsxs("div",{className:"flex flex-col items-center gap-2",children:[n.name??n.email,e.jsx("div",{className:"text-token-text-tertiary",children:e.jsx(x,{...M.dateJoined,values:{dateAdded:a.formatDate(n.dateAdded,{year:"numeric",month:"long",day:"numeric"})}})})]})})}function is({user:s,currentUserHasAdminRights:a,isCurrentUserOwner:t,isCurrentUser:n,onRemoveUserClick:r,onUpdateUserRole:o,onClick:c}){const m=H()[s.role],d=j(),g=s.name??d.formatMessage(M.missingName);return e.jsxs(i.Row,{className:L("[&>td]:py-2"),onClick:c?()=>c?.(s):void 0,children:[e.jsxs(i.Cell,{children:[e.jsx("div",{className:"relative pe-3",children:e.jsx(X,{userName:g,isScimManaged:s.is_scim_managed})}),e.jsxs("div",{children:[e.jsxs("div",{children:[g,n&&e.jsx("span",{className:"ms-1",children:e.jsx(x,{...M.youSpecifier})})]}),e.jsx("div",{className:"text-body-small-regular text-token-text-secondary",children:s.email})]})]}),e.jsx(i.Cell,{children:t?e.jsx(ee,{currentRole:s.role,onUpdateUserRole:u=>{o(s.id,u)},disabled:n}):m}),e.jsx(i.Cell,{children:d.formatDate(s.created_time,{month:"short",day:"numeric",year:"numeric"})}),a&&e.jsx(i.Cell,{children:e.jsx(ls,{userId:s.id,onRemoveUserClick:r,disabled:n,isScimManaged:s.is_scim_managed})})]})}function ls({disabled:s,onRemoveUserClick:a,userId:t,isScimManaged:n}){const r=j();return s?null:n?e.jsx(p.Root,{children:e.jsx(p.Trigger,{disabled:!0,children:e.jsx(oe,{label:r.formatMessage(me.managedViaSCIMTooltip),className:"flex",side:"right",children:e.jsx(I,{className:"icon-sm"})})})}):e.jsxs(p.Root,{children:[e.jsx(p.Trigger,{className:"-my-2",children:e.jsx(I,{className:"icon-sm"})}),e.jsx(p.Portal,{children:e.jsx(p.Content,{size:"small",children:e.jsx(p.Item,{onClick:()=>{a(t)},icon:e.jsx(Ae,{className:"text-token-text-status-error"}),className:"text-token-text-status-error",children:e.jsx(x,{...M.removeMemberModalTitle})})})})]})}function os(){const s=q();return D({mutationFn:({userId:a,workspaceId:t,value:n})=>b.safePatch("/accounts/{account_id}/users/{user_id}",{parameters:{path:{account_id:t,user_id:a}},requestBody:{role:n}}).catch(r=>{s.danger(`Unable to update user (${a}) role: ${r.message}`,{toastId:"user_manager_table"})})})}function cs(s){const a=W(),t=q();return D({mutationFn:({userId:n})=>b.safeDelete("/accounts/{account_id}/users/{user_id}",{parameters:{path:{account_id:s,user_id:n}}}).catch(r=>{t.danger(`Unable to remove user (${n}) from workspace: ${r.message}`,{toastId:"user_manager_table"})}),onSuccess:()=>{a.invalidateQueries({queryKey:["workspace",s]})}})}function se(){return e.jsx("div",{className:"flex w-full items-center justify-center",children:e.jsx($,{})})}const M=N({name:{id:"UserManager.name",defaultMessage:"Name"},email:{id:"UserManager.email",defaultMessage:"Email"},accountType:{id:"UserManager.accountType",defaultMessage:"Account type"},dateAdded:{id:"UserManager.dateAdded",defaultMessage:"Date added"},role:{id:"UserManager.role",defaultMessage:"Role"},missingName:{id:"UserManager.missingName",defaultMessage:"No name provided"},youSpecifier:{id:"UserManager.youSpecifier",defaultMessage:"(You)"},removeUser:{id:"UserManager.removeUser",defaultMessage:"Remove user from workspace"},removeMemberModalTitle:{id:"UserManager.removeMemberModalTitle",defaultMessage:"Remove member"},removeMemberModalConfirm:{id:"UserManager.removeMemberModalConfirm",defaultMessage:"Delete"},removeMemberModalCancel:{id:"UserManager.removeMemberModalCancel",defaultMessage:"Cancel"},dateJoined:{id:"UserManager.dateJoined",defaultMessage:"Joined workspace on {dateAdded}"},inviteMemberButton:{id:"UserManager.inviteMemberButton",defaultMessage:"Invite member"},noResults:{id:"UserManager.noResults",defaultMessage:"No results"},leaveWorkspace:{id:"adminPage.leaveWorkspace",defaultMessage:"Leave workspace"}});function ds({workspaceId:s,filterInputValue:a}){const[t,n]=h.useState(0),{data:r}=Qe(s,t*_,a),o=J(s),c=Z(s),l=j(),m=o||c;if(r===void 0)return e.jsx(se,{});const d=r.items,g=Math.ceil((r.total??0)/_);return t>=g&&g!==0&&n(Math.max(g-1,0)),e.jsxs("div",{children:[e.jsxs(i.Root,{fixed:!0,size:"normal",children:[e.jsxs(i.Header,{children:[e.jsx(i.HeaderCell,{className:"bg-token-main-surface-primary",children:e.jsx(x,{...U.email})}),e.jsx(i.HeaderCell,{className:"bg-token-main-surface-primary w-28",children:e.jsx("span",{className:m?"ps-3":"",children:e.jsx(x,{...U.role})})}),m&&e.jsx(i.HeaderCell,{className:"bg-token-main-surface-primary w-40",children:l.formatMessage(U.actions)})]}),e.jsxs(i.Body,{children:[d.map(u=>e.jsx(ms,{workspaceId:s,invite:u,isCurrentUserOwner:o,currentUserHasAdminRights:m},u.id)),d.length===0&&e.jsx(i.Row,{children:e.jsx(i.Cell,{children:e.jsx("div",{className:"text-token-text-tertiary",children:e.jsx(x,{...U.noResults})})})})]})]}),g>1&&e.jsx("div",{className:"mt-2 flex justify-center",children:e.jsx(Y,{currentPage:t,onChangeIndex:n,length:g})})]})}function ms({workspaceId:s,invite:a,isCurrentUserOwner:t,currentUserHasAdminRights:n}){const r=H(),o=ue(s),c=ge(s),l=j();return e.jsxs(i.Row,{className:"[&>td]:py-2",disabled:o.isPending||c.isPending||c.isPending,children:[e.jsx(i.Cell,{children:e.jsxs("span",{className:"flex grow",children:[e.jsx(X,{userName:a.email_address??"",isScimManaged:a.is_scim_managed,dotted:!0}),e.jsx("span",{children:a.email_address})]})}),e.jsx(i.Cell,{children:t?e.jsx(ee,{currentRole:a.role,onUpdateUserRole:m=>{o.mutate({inviteId:a.id,role:m})}}):r[a.role]}),n&&e.jsx(e.Fragment,{children:e.jsx(i.Cell,{children:e.jsxs("div",{className:"flex gap-2",children:[e.jsx(F,{onClick:()=>o.mutate({inviteId:a.id,acceptRequest:!0}),children:l.formatMessage(U.accept)}),e.jsx(F,{color:"secondary",onClick:()=>c.mutate({email:a.email_address??""}),children:l.formatMessage(U.reject)})]})})})]})}const U=N({email:{id:"RequestInviteManager.email",defaultMessage:"Email"},role:{id:"RequestInviteManager.role",defaultMessage:"Role"},actions:{id:"RequestInviteManager.actions",defaultMessage:"Actions"},accept:{id:"RequestInviteManager.accept",defaultMessage:"Accept"},reject:{id:"RequestInviteManager.reject",defaultMessage:"Reject"},noResults:{id:"RequestInviteManager.noResults",defaultMessage:"No results"}}),us=({workspaceId:s})=>{const a=j(),[t,n]=h.useState(""),[r,o]=h.useState(""),c=h.useMemo(()=>Q(l=>o(l),300,{leading:!1,trailing:!0}),[]);return e.jsxs("div",{className:"mt-6",children:[e.jsx(z,{value:t,onChange:l=>{n(l.target.value),c(l.target.value)},placeholder:a.formatMessage(gs.searchRequestPlaceholder),className:"mb-4.5",inputClassName:"rounded-full! text-sm"}),e.jsx(ds,{workspaceId:s,filterInputValue:r})]})},gs=N({pendingRequests:{id:"admin.workspace.members.pendingRequests",defaultMessage:"Pending Requests"},searchRequestPlaceholder:{id:"admin.workspace.members.searchRequestPlaceholder",defaultMessage:"Search for requests"}});function xs({workspaceId:s,filterInputValue:a}){const[t,n]=h.useState(0),r=J(s),o=Z(s),c=r||o,{data:l}=Ke(s,t*_,a);if(l===void 0)return e.jsx(se,{});const m=l.items,d=Math.ceil((l.total??0)/_);return t>=d&&d!==0&&n(Math.max(d-1,0)),e.jsxs("div",{children:[e.jsxs(i.Root,{fixed:!0,size:"normal",children:[e.jsxs("colgroup",{children:[e.jsx("col",{className:"w-[60%]"}),e.jsx("col",{className:"w-[20%]"}),e.jsx("col",{className:"w-[20%]"}),c&&e.jsx("col",{className:"w-16"})]}),e.jsxs(i.Header,{children:[e.jsx(i.HeaderCell,{className:"bg-token-bg-primary",children:e.jsx(x,{...k.email})}),e.jsx(i.HeaderCell,{className:"bg-token-bg-primary",children:e.jsx(x,{...k.invitedDate})}),e.jsx(i.HeaderCell,{className:"bg-token-bg-primary w-28",children:e.jsx("span",{className:c?"ps-3":"",children:e.jsx(x,{...k.role})})}),c&&e.jsx(i.HeaderCell,{className:"bg-token-bg-primary w-16"})]}),e.jsxs(i.Body,{children:[m.map(g=>e.jsx(hs,{workspaceId:s,invite:g,isCurrentUserOwner:r,currentUserHasAdminRights:c},g.id)),m.length===0&&e.jsx(i.Row,{children:e.jsx(i.Cell,{children:e.jsx("div",{className:"text-token-text-tertiary",children:e.jsx(x,{...k.noResults})})})})]})]}),d>1&&e.jsx("div",{className:"mt-2 flex justify-center",children:e.jsx(Y,{currentPage:t,onChangeIndex:n,length:d})})]})}function hs({workspaceId:s,invite:a,isCurrentUserOwner:t,currentUserHasAdminRights:n}){const r=j(),o=H(),c=ue(s),l=ge(s),m=ze(s);return e.jsxs(i.Row,{className:"[&>td]:py-2",disabled:c.isPending||l.isPending||l.isSuccess||m.isPending,children:[e.jsx(i.Cell,{children:e.jsxs("span",{className:"flex grow",children:[e.jsx(X,{userName:a.email_address??"",isScimManaged:a.is_scim_managed,dotted:!0}),e.jsx("span",{children:a.email_address})]})}),e.jsx(i.Cell,{children:r.formatDate(a.created_time,{month:"short",day:"numeric",year:"numeric"})}),e.jsx(i.Cell,{children:t?e.jsx(ee,{currentRole:a.role,onUpdateUserRole:d=>{c.mutate({inviteId:a.id,role:d})}}):o[a.role]}),n&&e.jsx(e.Fragment,{children:e.jsx(i.Cell,{children:e.jsx(ps,{onDeleteUser:()=>{l.mutate({email:a.email_address??""})},onResendInvite:()=>{m.mutate({email:a.email_address??"",role:a.role??""})},disabled:a.is_scim_managed})})})]})}function ps({onDeleteUser:s,onResendInvite:a,disabled:t}){const n=j();return e.jsx(e.Fragment,{children:t?e.jsx(p.Root,{children:e.jsx(p.Trigger,{disabled:!0,children:e.jsx(oe,{label:n.formatMessage(me.managedViaSCIMTooltip),className:"flex",side:"right",children:e.jsx(I,{className:"icon-sm"})})})}):e.jsxs(p.Root,{children:[e.jsx(p.Trigger,{children:e.jsx(I,{className:"icon-sm"})}),e.jsx(p.Portal,{children:e.jsxs(p.Content,{children:[e.jsx(p.Item,{onClick:a,children:e.jsx(x,{...k.resendInvite})}),e.jsx(p.Item,{onClick:s,children:e.jsx(x,{...k.revokeInvite})})]})})]})})}const k=N({email:{id:"InviteManager.email",defaultMessage:"Email"},role:{id:"InviteManager.role",defaultMessage:"Role"},invitedDate:{id:"InviteManager.invitedDate",defaultMessage:"Date invited"},resendInvite:{id:"InviteManager.resendInvite",defaultMessage:"Resend invite"},revokeInvite:{id:"InviteManager.revokeInvite",defaultMessage:"Revoke invite"},noResults:{id:"InviteManager.noResults",defaultMessage:"No results"}}),js=({workspaceId:s})=>{const a=j(),[t,n]=h.useState(""),[r,o]=h.useState(""),c=h.useMemo(()=>Q(l=>o(l),300,{leading:!1,trailing:!0}),[]);return e.jsxs("div",{className:"mt-6",children:[e.jsx(z,{value:t,onChange:l=>{n(l.target.value),c(l.target.value)},placeholder:a.formatMessage(fs.searchInvitesPlaceholder),className:"mb-4.5",inputClassName:"rounded-full! text-sm"}),e.jsx(xs,{workspaceId:s,filterInputValue:r})]})},fs=N({searchInvitesPlaceholder:{id:"admin.workspace.members.searchInvitesPlaceholder",defaultMessage:"Search for invites"}}),vs=ye(()=>Ce(()=>import("./jx17w9gk7w1zvxkl.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11])));function Ms({workspaceId:s}){const a=j(),t=K(),[n,r]=h.useState(""),[o,c]=h.useState(""),l=h.useMemo(()=>Q(v=>c(v),300,{leading:!1,trailing:!0}),[]),m=Re();if(!t)return null;const d=t?.isTeam(),g=t.isAdminOfAccount(),u=t.isOwnerOfAccount();return e.jsxs("div",{className:"mt-6",children:[e.jsxs("div",{className:"mb-4.5 flex items-center justify-between",children:[e.jsx(z,{value:n,onChange:v=>{r(v.target.value),l(v.target.value)},placeholder:a.formatMessage(E.searchMembersPlaceholder),inputClassName:"rounded-full! text-sm"}),e.jsxs("div",{className:"flex items-center gap-2",children:[(g||u||d)&&e.jsx(F,{onClick:()=>{Ue.logEvent("chatgpt_invite_users_to_workspace",0,{action:"OpenAdminInviteModal",location:"workspace-admin-click",text:"InviteMember",step:"OpenModal"}),ke(m,({onClose:v})=>e.jsx(vs,{workspace:t,onClose:v}))},icon:Ee,children:e.jsx(x,{...E.inviteMemberButton})}),d?e.jsx(_e,{triggerButton:e.jsx(F,{color:"secondary",icon:I}),children:e.jsx(p.Item,{onClick:()=>{t&&Pe.setLeaveWorkspaceData(t)},children:e.jsx(x,{...E.leaveWorkspace})})}):null]})]}),e.jsx(ns,{workspaceId:s,filterInputValue:o}),e.jsx("p",{className:"text-token-text-secondary mt-4 text-sm",children:e.jsx(x,{...E.memberListUpdateDelayNote})})]})}const E=N({inviteMemberButton:{id:"InviteManager.inviteMemberButton",defaultMessage:"Invite member"},leaveWorkspace:{id:"WorkspaceMembers.leaveWorkspace",defaultMessage:"Leave workspace"},searchMembersPlaceholder:{id:"WorkspaceMembers.searchMembersPlaceholder",defaultMessage:"Filter by name"},memberListUpdateDelayNote:{id:"adminPage.memberListUpdateDelayNote",defaultMessage:"Note: Although new workspace members can access ChatGPT immediately, it may take up to 24 hours to show them in this list."}}),bs=s=>s==="members"||s==="invites"||s==="requests";function Ns({currentWorkspaceId:s}){const a=j(),t=K(),n=Fe(s)??"?",r=Be(t),o=h.useMemo(()=>[{key:"members",label:a.formatMessage(R.allMembers),children:e.jsx(Ms,{workspaceId:s})},{key:"invites",label:a.formatMessage(R.pendingInvites),children:e.jsx(js,{workspaceId:s})},{key:"requests",label:a.formatMessage(R.pendingRequests),children:e.jsx(us,{workspaceId:s})}],[s,a]),c=ce(),[l]=Ie(),m=l.get("tab"),[d,g]=h.useState(m&&bs(m)?m:o[0].key),u=v=>{g(v),c({pathname:window.location.pathname,search:new URLSearchParams({tab:v}).toString()})};return t?e.jsxs(e.Fragment,{children:[e.jsx(Ve,{children:e.jsx("title",{children:a.formatMessage(R.adminBrowserPageTitle)})}),e.jsx(Ge,{title:a.formatMessage(R.adminPageTitle),subtitle:e.jsx(x,{values:{totalMembers:n,planName:r},...R.totalMembers}),tabsHeader:e.jsx(He,{items:o,activeTab:d,onTabChange:u})}),e.jsx($e,{children:e.jsx(Oe,{items:o,activeTab:d})})]}):null}const R=N({adminBrowserPageTitle:{id:"adminPage.adminBrowserPageTitle",defaultMessage:"ChatGPT - Admin | Members"},adminPageTitle:{id:"adminPage.adminPageTitle.0",defaultMessage:"Members"},workspaceNotFound:{id:"adminPage.workspaceNotFound",defaultMessage:"Workspace not found"},totalMembers:{id:"adminPage.totalMembers",defaultMessage:"{planName} · {totalMembers} {totalMembers, plural, one {member} other {members}}"},backToChat:{id:"adminPage.backToChat",defaultMessage:"Back to chat"},allMembers:{id:"adminPage.allMembers",defaultMessage:"Users"},pendingInvites:{id:"adminPage.pendingInvites",defaultMessage:"Pending invites"},pendingRequests:{id:"adminPage.pendingRequests",defaultMessage:"Pending requests"}}),Gs=we(function(){const a=Le();return e.jsx(Ns,{...a})});export{Gs as default};
//# sourceMappingURL=itnxr00nj9ne87c2.js.map
