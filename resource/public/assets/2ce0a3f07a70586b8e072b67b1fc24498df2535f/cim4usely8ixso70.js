const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/hgbgzreq86ke9a01.js","assets/n97h6so7iblif4c5.js","assets/fblq6clalwfzs7tf.js","assets/kudn7rq9x8nnvrik.js","assets/jdpqs7fyetm56n9m.js","assets/ivbsxyeeopn30y8l.js","assets/conversation-small-dhmr708a.css","assets/mnzj7q6918q8g1iw.js","assets/ozplb2v7s86mfv04.js","assets/b5hv1ahf9kvqcabf.js","assets/eyntgdvptevgb3on.js","assets/ox1akcpm1f0j5d6a.js","assets/basyx65cczg0r3w4.js","assets/kfttpd1cc0u1rrbk.js","assets/lgwn8lf5xrondcxt.js","assets/hcy7z1fjyakwrbyg.js","assets/ib76cquqlyjrlt71.js","assets/mrkpoml1unmgvsy6.js","assets/krkitrtcjhkjzpyt.js","assets/npigzo2u99lls885.js","assets/lm2b5kirm3mb78eh.js","assets/0pr0i2ofpxcgwml5.js","assets/qt8c9lenu31o2obp.js","assets/lbil4jq546hervyf.js","assets/im4lacmmdnhx67y2.js","assets/g3mhotgl765argdp.js","assets/imgcbqb29wg9v4da.js","assets/g2in2vnq3t76stbi.js","assets/nw77hv3bmgb5l1rn.js","assets/lzd04jwh0e8rky7q.js","assets/okif86unggyka5vu.js","assets/enswwrwnkbo9c942.js","assets/flvrd2fw13ytfkn1.js","assets/iej0cupg2dqkmejt.js","assets/dl6wm3f4iy2ldybm.js","assets/c9lb4tlhkayt13ag.js","assets/3fiu99vb2mfqoefh.js","assets/ok0v4utan8f8dzts.js","assets/eo9i015vih87ul2f.js","assets/e0aapuuie63shkkq.js","assets/l8g2r5m56kldc1tp.js","assets/k2ecp10ubv67juaa.js","assets/l6ymubw2n3zpsirn.js","assets/i5vqih9igwxw3939.js","assets/n9mme9cj317etxuq.js","assets/kgkkjgk15rr7n5rs.js","assets/budzbufhmgk4y6eq.js","assets/lnrdu7695dtoyi0c.js","assets/iomm34fcl9fukacb.js","assets/gd60glsobyg4zz0h.js","assets/hxwpz3yyh9quqb0l.js","assets/bk8slwxjkdlmxjxm.js","assets/dmhc6m80kecp7ycu.js","assets/fr3lc6cgmy47l3cd.js"])))=>i.map(i=>d[i]);
import{J as XE,K as e9,N as cy,O as t9,r as m,k as ly,c as xe,j as p,P as Rs,Q as bn,S as xR,T as TR,U as uy,R as qe,i as dy,V as n9,n as Bt,g as Ot,v as dr,d as ze,h as Tn,l as gn,u as $e,q as ms,w as OR,y as ku,p as r9,W as kR,b as Ue,f as fr,L as Vf,B as AR,M as K,C as Lc,_ as ei,X as s9,Y as MR,a as Fr,Z as IR,m as i9,o as zf,t as fy,$ as NR,x as RR,a0 as PR,a1 as DR,a2 as LR,a3 as FR,a4 as o9,a5 as a9,a6 as c9,a7 as jR,a8 as UR,a9 as BR,aa as qR}from"./n97h6so7iblif4c5.js";class _a{static#e;#t;#r=new Map;#n=[];static get instance(){return _a.#e||(_a.#e=new _a),_a.#e}setLogger(t){if(this.#t)throw new Error("Logger already set");this.#t=t;for(const[n,r]of this.#r.entries())this.#t.addTiming(n,r);this.#r.clear();for(const{error:n,context:r}of this.#n)this.#t.addError(n,r);this.#n=[]}addTiming(t,n){this.#t?this.#t.addTiming(t,n):this.#r.set(t,n??Date.now())}addError(t,n){this.#t?this.#t.addError(t,n):(this.#n.push({error:t,context:n}),this.#n.length>10&&(console.warn("LazyLogger: too many errors"),this.#n.shift()))}}function GR(e){return function(){const n={params:t9(),loaderData:cy(),actionData:e9(),matches:ly()};return m.createElement(e,n)}}function HR(e){return function(){const n={params:t9(),loaderData:cy(),actionData:e9(),error:XE()};return m.createElement(e,n)}}function It(e){const t=Symbol(void 0);return n=>{if(!n)throw new Error("[SessionContext] Attempted to access session value without a session context.");const r=n;if(t in r){const s=r[t];if(s===IC)throw new Error("[SessionContext] Dependency cycle during session value initialization.");if(s instanceof Error)throw s;return s}try{r[t]=IC;const s=e(n);return r[t]=s,s}catch(s){const i=s instanceof Error?s:new Error("[SessionContext] Failed to initialize session value: "+s,{cause:s});throw r[t]=i,i}}}function VR(){const e=Symbol(void 0);return[r=>{if(!r)throw new Error("[SessionContext] Attempted to access session value without a session context.");const s=r;if(e in s)return s[e];throw new Error("[SessionContext] Attempted to access session value before initialization.")},(r,s)=>{const i=r;if(e in i)throw new Error("[SessionContext] Attempted to initialize session value more than once.");i[e]=s}]}const IC=Symbol();function Y(){"use forget";const e=m.useContext(l9);if(!e)throw new Error("[SessionContext] Attempted to access sessionContext outside of <SessionContextProvider>");return e}const l9=m.createContext(void 0);function u9(){return{}}const zR=e=>{"use forget";const t=xe.c(3),{sessionContext:n,children:r}=e;let s;return t[0]!==r||t[1]!==n?(s=p.jsx(l9,{value:n,children:r}),t[0]=r,t[1]=n,t[2]=s):s=t[2],s};var $R=(e=>(e.FreeSearchHoldout="fsh",e.AnonSearchHoldout="ash",e.NoAuthEnableFileUploads="naefu",e))($R||{});const[_n,WR]=VR();function KR(){const e=Y();return _n(e)}let YR=u9();function Xe(){return YR}let NC=!1;function ZR(e,t){NC||(NC=!0,WR(e,t))}class je extends Error{constructor(t,n,r,s){const i=typeof r.error=="string"&&r.error||typeof r.detail=="string"&&r.detail||r.detail?.message||r.detail?.description||r.detail?.error?.message||QR;super(i),this.url=t,this.status=n,this.json=r,this.requestId=s,this.detail=r.detail,this.jsonError=r.error}name="RequestError";detail;jsonError;static createWithErrorMessage(t,n,r,s){return new je(t,n==="client"?400:500,{error:r},s)}get code(){return this.detail?.code??this.jsonError?.code??this.jsonError?.error?.code??this.detail?.error?.code}isClientError(){return this.status>=400&&this.status<500}isServerError(){return this.status>=500}}class xt extends Error{name="UserFileError";code;extra;constructor(t,n,r){super(t),this.code=n,this.extra=r}}const JR="If this issue persists please contact us through our help center at help.openai.com.",hy="If this issue persists please contact us through our help center at [help.openai.com](https://help.openai.com/).",QR=`Something went wrong. ${JR}`,XR=`Something went wrong while generating the response. ${hy}`,Ua=`A network error occurred. Please check your connection and try again. ${hy}`,eP="Network connection lost. Attempting to reconnect…";function o1e(e){if(e instanceof je&&typeof e.message=="string"&&e.message)return e.message}var fd=(e=>(e.HistoryDisabledConversationNotFound="history_disabled_conversation_not_found",e.ModelCapExceeded="model_cap_exceeded",e.MissingLastCompletion="missing_last_completion",e.InterruptionServerError="interruption_server_error",e))(fd||{}),d9=(e=>(e.NetworkErrorWithReconnection="network_error_with_reconnection",e))(d9||{});function tP(e){return e instanceof Error?e:new Error(typeof e=="string"?e:"Something went wrong")}function nP(e){return e instanceof Error&&e.name==="AbortError"}function rP(e,t){return e instanceof Error&&Error.captureStackTrace?.(e,t),e}function jr(e,t="<unknown>"){if(e==null)throw rP(new Error(`${t}: unexpected nullish value: ${JSON.stringify(e)}`),jr);return e}const Au=(e,t,n={})=>{const r={level:e,message:String(t),...n};t instanceof Error&&(r.error=t),r.error instanceof Error&&(r.error=r.error.stack??String(r.error));try{console[e](r)}catch{Os.error({level:"error",message:"Error stringifying log object."+(typeof r.message=="string"?` Message: ${r.message}`:"")})}},Os={info:(...e)=>Au("info",...e),error:(...e)=>Au("error",...e),warn:(...e)=>Au("warn",...e),debug:(...e)=>Au("debug",...e)},sP="client-nb0qtYlZuy2tCMN5s5ncnuIBCJncjRViT0IzFm7GqST";let f9="development";f9="production";const iP=f9;var Gi={},zo={},Mu={},RC;function oP(){if(RC)return Mu;RC=1,Object.defineProperty(Mu,"__esModule",{value:!0});const e=Rs();let t=class{constructor(r){this._sdkKey=r,this._rawValues=null,this._values=null,this._source="Uninitialized",this._lcut=0,this._receivedAt=0,this._bootstrapMetadata=null,this._warnings=new Set}reset(){this._values=null,this._rawValues=null,this._source="Loading",this._lcut=0,this._receivedAt=0,this._bootstrapMetadata=null}finalize(){this._values||(this._source="NoValues")}getValues(){return this._rawValues?(0,e._typedJsonParse)(this._rawValues,"has_updates","EvaluationStoreValues"):null}setValues(r,s){var i;if(!r)return!1;const o=(0,e._typedJsonParse)(r.data,"has_updates","EvaluationResponse");return o==null?!1:(this._source=r.source,o?.has_updates!==!0||(this._rawValues=r.data,this._lcut=o.time,this._receivedAt=r.receivedAt,this._values=o,this._bootstrapMetadata=this._extractBootstrapMetadata(r.source,o),r.source&&o.user&&this._setWarningState(s,o),e.SDKFlags.setFlags(this._sdkKey,(i=o.sdk_flags)!==null&&i!==void 0?i:{})),!0)}getWarnings(){if(this._warnings.size!==0)return Array.from(this._warnings)}getGate(r){var s;return this._getDetailedStoreResult((s=this._values)===null||s===void 0?void 0:s.feature_gates,r)}getConfig(r){var s;return this._getDetailedStoreResult((s=this._values)===null||s===void 0?void 0:s.dynamic_configs,r)}getLayer(r){var s;return this._getDetailedStoreResult((s=this._values)===null||s===void 0?void 0:s.layer_configs,r)}getParamStore(r){var s;return this._getDetailedStoreResult((s=this._values)===null||s===void 0?void 0:s.param_stores,r)}getSource(){return this._source}getExposureMapping(){var r;return(r=this._values)===null||r===void 0?void 0:r.exposures}_extractBootstrapMetadata(r,s){if(r!=="Bootstrap")return null;const i={};return s.user&&(i.user=s.user),s.sdkInfo&&(i.generatorSDKInfo=s.sdkInfo),i.lcut=s.time,i}_getDetailedStoreResult(r,s){let i=null;return r&&(i=r[s]?r[s]:r[(0,e._DJB2)(s)]),{result:i,details:this._getDetails(i==null)}}_setWarningState(r,s){var i,o;const a=e.StableID.get(this._sdkKey);if(((i=r.customIDs)===null||i===void 0?void 0:i.stableID)!==a&&(!((o=r.customIDs)===null||o===void 0)&&o.stableID||a)){this._warnings.add("StableIDMismatch");return}if("user"in s){const c=s.user;(0,e._getFullUserHash)(r)!==(0,e._getFullUserHash)(c)&&this._warnings.add("PartialUserMatch")}}getCurrentSourceDetails(){if(this._source==="Uninitialized"||this._source==="NoValues")return{reason:this._source};const r={reason:this._source,lcut:this._lcut,receivedAt:this._receivedAt};return this._warnings.size>0&&(r.warnings=Array.from(this._warnings)),r}_getDetails(r){var s,i;const o=this.getCurrentSourceDetails();let a=o.reason;const c=(s=o.warnings)!==null&&s!==void 0?s:[];this._source==="Bootstrap"&&c.length>0&&(a=a+c[0]),a!=="Uninitialized"&&a!=="NoValues"&&(a=`${a}:${r?"Unrecognized":"Recognized"}`);const l=this._source==="Bootstrap"&&(i=this._bootstrapMetadata)!==null&&i!==void 0?i:void 0;return l&&(o.bootstrapMetadata=l),Object.assign(Object.assign({},o),{reason:a})}};return Mu.default=t,Mu}var $o={},Ec={},PC;function aP(){if(PC)return Ec;PC=1,Object.defineProperty(Ec,"__esModule",{value:!0}),Ec._resolveDeltasResponse=void 0;const e=Rs(),t=2;function n(o,a){const c=(0,e._typedJsonParse)(a,"checksum","DeltasEvaluationResponse");if(!c)return{hadBadDeltaChecksum:!0};const l=r(o,c),u=s(l),d=(0,e._DJB2Object)({feature_gates:u.feature_gates,dynamic_configs:u.dynamic_configs,layer_configs:u.layer_configs},t);return d===c.checksumV2?JSON.stringify(u):{hadBadDeltaChecksum:!0,badChecksum:d,badMergedConfigs:u,badFullResponse:c.deltas_full_response}}Ec._resolveDeltasResponse=n;function r(o,a){return Object.assign(Object.assign(Object.assign({},o),a),{feature_gates:Object.assign(Object.assign({},o.feature_gates),a.feature_gates),layer_configs:Object.assign(Object.assign({},o.layer_configs),a.layer_configs),dynamic_configs:Object.assign(Object.assign({},o.dynamic_configs),a.dynamic_configs)})}function s(o){const a=o;return i(o.deleted_gates,a.feature_gates),delete a.deleted_gates,i(o.deleted_configs,a.dynamic_configs),delete a.deleted_configs,i(o.deleted_layers,a.layer_configs),delete a.deleted_layers,a}function i(o,a){o?.forEach(c=>{delete a[c]})}return Ec}var DC;function h9(){if(DC)return $o;DC=1;var e=$o&&$o.__awaiter||function(s,i,o,a){function c(l){return l instanceof o?l:new o(function(u){u(l)})}return new(o||(o=Promise))(function(l,u){function d(g){try{h(a.next(g))}catch(_){u(_)}}function f(g){try{h(a.throw(g))}catch(_){u(_)}}function h(g){g.done?l(g.value):c(g.value).then(d,f)}h((a=a.apply(s,i||[])).next())})};Object.defineProperty($o,"__esModule",{value:!0});const t=Rs(),n=aP();class r extends t.NetworkCore{constructor(i,o){super(i,o);const a=i?.networkConfig;this._option=i,this._initializeUrlConfig=new t.UrlConfiguration(t.Endpoint._initialize,a?.initializeUrl,a?.api,a?.initializeFallbackUrls)}fetchEvaluations(i,o,a,c,l){var u,d,f,h,g,_;return e(this,void 0,void 0,function*(){const v=o?(0,t._typedJsonParse)(o,"has_updates","InitializeResponse"):null;let y={user:c,hash:(f=(d=(u=this._option)===null||u===void 0?void 0:u.networkConfig)===null||d===void 0?void 0:d.initializeHashAlgorithm)!==null&&f!==void 0?f:"djb2",deltasResponseRequested:!1,full_checksum:null};if(v?.has_updates){const C=v?.hash_used!==((_=(g=(h=this._option)===null||h===void 0?void 0:h.networkConfig)===null||g===void 0?void 0:g.initializeHashAlgorithm)!==null&&_!==void 0?_:"djb2");y=Object.assign(Object.assign({},y),{sinceTime:l&&!C?v.time:0,previousDerivedFields:"derived_fields"in v&&l?v.derived_fields:{},deltasResponseRequested:!0,full_checksum:v.full_checksum,partialUserMatchSinceTime:C?0:v.time})}return this._fetchEvaluations(i,v,y,a)})}_fetchEvaluations(i,o,a,c){var l,u;return e(this,void 0,void 0,function*(){const d=yield this.post({sdkKey:i,urlConfig:this._initializeUrlConfig,data:a,retries:2,isStatsigEncodable:!0,priority:c});if(d?.code===204)return'{"has_updates": false}';if(d?.code!==200)return(l=d?.body)!==null&&l!==void 0?l:null;if(o?.has_updates!==!0||((u=d.body)===null||u===void 0?void 0:u.includes('"is_delta":true'))!==!0||a.deltasResponseRequested!==!0)return d.body;const f=(0,n._resolveDeltasResponse)(o,d.body);return typeof f=="string"?f:this._fetchEvaluations(i,o,Object.assign(Object.assign(Object.assign({},a),f),{deltasResponseRequested:!1}),c)})}}return $o.default=r,$o}var xc={},LC;function cP(){if(LC)return xc;LC=1,Object.defineProperty(xc,"__esModule",{value:!0}),xc._makeParamStoreGetter=void 0;const e=Rs(),t={disableExposureLog:!0};function n(u){return u==null||u.disableExposureLog===!1}function r(u,d){return d!=null&&!(0,e._isTypeMatch)(u,d)}function s(u,d){return u.value}function i(u,d,f){return u.getFeatureGate(d.gate_name,n(f)?void 0:t).value?d.pass_value:d.fail_value}function o(u,d,f,h){const _=u.getDynamicConfig(d.config_name,n(h)?void 0:t).get(d.param_name);return r(_,f)?f:_}function a(u,d,f,h){const _=u.getExperiment(d.experiment_name,n(h)?void 0:t).get(d.param_name);return r(_,f)?f:_}function c(u,d,f,h){const _=u.getLayer(d.layer_name,n(h)?void 0:t).get(d.param_name);return r(_,f)?f:_}function l(u,d,f){return(h,g)=>{if(d==null)return g;const _=d[h];if(_==null||g!=null&&(0,e._typeOf)(g)!==_.param_type)return g;switch(_.ref_type){case"static":return s(_);case"gate":return i(u,_,f);case"dynamic_config":return o(u,_,g,f);case"experiment":return a(u,_,g,f);case"layer":return c(u,_,g,f);default:return g}}}return xc._makeParamStoreGetter=l,xc}var Hi={},FC;function lP(){if(FC)return Hi;FC=1;var e=Hi&&Hi.__awaiter||function(s,i,o,a){function c(l){return l instanceof o?l:new o(function(u){u(l)})}return new(o||(o=Promise))(function(l,u){function d(g){try{h(a.next(g))}catch(_){u(_)}}function f(g){try{h(a.throw(g))}catch(_){u(_)}}function h(g){g.done?l(g.value):c(g.value).then(d,f)}h((a=a.apply(s,i||[])).next())})};Object.defineProperty(Hi,"__esModule",{value:!0}),Hi.StatsigEvaluationsDataAdapter=void 0;const t=Rs(),n=h9();let r=class extends t.DataAdapterCore{constructor(){super("EvaluationsDataAdapter","evaluations"),this._network=null,this._options=null}attach(i,o,a){super.attach(i,o,a),a!==null&&a instanceof n.default?this._network=a:this._network=new n.default(o??{})}getDataAsync(i,o,a){return this._getDataAsyncImpl(i,(0,t._normalizeUser)(o,this._options),a)}prefetchData(i,o){return this._prefetchDataImpl(i,o)}setData(i){const o=(0,t._typedJsonParse)(i,"has_updates","data");o&&"user"in o?super.setData(i,o.user):t.Log.error("StatsigUser not found. You may be using an older server SDK version. Please upgrade your SDK or use setDataLegacy.")}setDataLegacy(i,o){super.setData(i,o)}_fetchFromNetwork(i,o,a,c){var l;return e(this,void 0,void 0,function*(){const u=yield(l=this._network)===null||l===void 0?void 0:l.fetchEvaluations(this._getSdkKey(),i,a?.priority,o,c);return u??null})}_getCacheKey(i){var o;const a=(0,t._getStorageKey)(this._getSdkKey(),i,(o=this._options)===null||o===void 0?void 0:o.customUserCacheKeyFunc);return`${t.DataAdapterCachePrefix}.${this._cacheSuffix}.${a}`}_isCachedResultValidFor204(i,o){return i.fullUserHash!=null&&i.fullUserHash===(0,t._getFullUserHash)(o)}};return Hi.StatsigEvaluationsDataAdapter=r,Hi}var jC;function uP(){if(jC)return zo;jC=1;var e=zo&&zo.__awaiter||function(a,c,l,u){function d(f){return f instanceof l?f:new l(function(h){h(f)})}return new(l||(l=Promise))(function(f,h){function g(y){try{v(u.next(y))}catch(C){h(C)}}function _(y){try{v(u.throw(y))}catch(C){h(C)}}function v(y){y.done?f(y.value):d(y.value).then(g,_)}v((u=u.apply(a,c||[])).next())})};Object.defineProperty(zo,"__esModule",{value:!0});const t=Rs(),n=oP(),r=h9(),s=cP(),i=lP();let o=class E_ extends t.StatsigClientBase{static instance(c){const l=(0,t._getStatsigGlobal)().instance(c);return l instanceof E_?l:(t.Log.warn((0,t._isServerEnv)()?"StatsigClient.instance is not supported in server environments":"Unable to find StatsigClient instance"),new E_(c??"",{}))}constructor(c,l,u=null){var d,f;t.SDKType._setClientType(c,"javascript-client");const h=new r.default(u,_=>{this.$emt(_)});super(c,(d=u?.dataAdapter)!==null&&d!==void 0?d:new i.StatsigEvaluationsDataAdapter,h,u),this.getFeatureGate=this._memoize(t.MemoPrefix._gate,this._getFeatureGateImpl.bind(this)),this.getDynamicConfig=this._memoize(t.MemoPrefix._dynamicConfig,this._getDynamicConfigImpl.bind(this)),this.getExperiment=this._memoize(t.MemoPrefix._experiment,this._getExperimentImpl.bind(this)),this.getLayer=this._memoize(t.MemoPrefix._layer,this._getLayerImpl.bind(this)),this.getParameterStore=this._memoize(t.MemoPrefix._paramStore,this._getParameterStoreImpl.bind(this)),this._store=new n.default(c),this._network=h,this._user=this._configureUser(l,u);const g=(f=u?.plugins)!==null&&f!==void 0?f:[];for(const _ of g)_.bind(this)}initializeSync(c){var l;return this.loadingStatus!=="Uninitialized"?(0,t.createUpdateDetails)(!0,this._store.getSource(),-1,null,null,["MultipleInitializations",...(l=this._store.getWarnings())!==null&&l!==void 0?l:[]]):(this._logger.start(),this.updateUserSync(this._user,c))}initializeAsync(c){return e(this,void 0,void 0,function*(){return this._initializePromise?this._initializePromise:(this._initializePromise=this._initializeAsyncImpl(c),this._initializePromise)})}updateUserSync(c,l){var u;const d=performance.now(),f=[...(u=this._store.getWarnings())!==null&&u!==void 0?u:[]];this._resetForUser(c);const h=this.dataAdapter.getDataSync(this._user);h==null&&f.push("NoCachedValues"),this._store.setValues(h,this._user),this._finalizeUpdate(h);const g=l?.disableBackgroundCacheRefresh;return g===!0||g==null&&h?.source==="Bootstrap"?(0,t.createUpdateDetails)(!0,this._store.getSource(),performance.now()-d,this._errorBoundary.getLastSeenErrorAndReset(),this._network.getLastUsedInitUrlAndReset(),f):(this._runPostUpdate(h??null,this._user),(0,t.createUpdateDetails)(!0,this._store.getSource(),performance.now()-d,this._errorBoundary.getLastSeenErrorAndReset(),this._network.getLastUsedInitUrlAndReset(),f))}updateUserAsync(c,l){return e(this,void 0,void 0,function*(){this._resetForUser(c);const u=this._user;t.Diagnostics._markInitOverallStart(this._sdkKey);let d=this.dataAdapter.getDataSync(u);if(this._store.setValues(d,this._user),this._setStatus("Loading",d),d=yield this.dataAdapter.getDataAsync(d,u,l),u!==this._user)return(0,t.createUpdateDetails)(!1,this._store.getSource(),-1,new Error("User changed during update"),this._network.getLastUsedInitUrlAndReset());let f=!1;d!=null&&(t.Diagnostics._markInitProcessStart(this._sdkKey),f=this._store.setValues(d,this._user),t.Diagnostics._markInitProcessEnd(this._sdkKey,{success:f})),this._finalizeUpdate(d),f||(this._errorBoundary.attachErrorIfNoneExists(t.UPDATE_DETAIL_ERROR_MESSAGES.NO_NETWORK_DATA),this.$emt({name:"initialization_failure"})),t.Diagnostics._markInitOverallEnd(this._sdkKey,f,this._store.getCurrentSourceDetails());const h=t.Diagnostics._enqueueDiagnosticsEvent(this._user,this._logger,this._sdkKey,this._options);return(0,t.createUpdateDetails)(f,this._store.getSource(),h,this._errorBoundary.getLastSeenErrorAndReset(),this._network.getLastUsedInitUrlAndReset(),this._store.getWarnings())})}getContext(){return{sdkKey:this._sdkKey,options:this._options,values:this._store.getValues(),user:JSON.parse(JSON.stringify(this._user)),errorBoundary:this._errorBoundary,session:t.StatsigSession.get(this._sdkKey),stableID:t.StableID.get(this._sdkKey)}}checkGate(c,l){return this.getFeatureGate(c,l).value}logEvent(c,l,u){const d=typeof c=="string"?{eventName:c,value:l,metadata:u}:c;this.$emt({name:"log_event_called",event:d}),this._logger.enqueue(Object.assign(Object.assign({},d),{user:this._user,time:Date.now()}))}_primeReadyRipcord(){this.$on("error",()=>{this.loadingStatus==="Loading"&&this._finalizeUpdate(null)})}_initializeAsyncImpl(c){return e(this,void 0,void 0,function*(){return t.Storage.isReady()||(yield t.Storage.isReadyResolver()),this._logger.start(),this.updateUserAsync(this._user,c)})}_finalizeUpdate(c){this._store.finalize(),this._setStatus("Ready",c)}_runPostUpdate(c,l){this.dataAdapter.getDataAsync(c,l,{priority:"low"}).catch(u=>{t.Log.error("An error occurred after update.",u)})}_resetForUser(c){this._logger.reset(),this._store.reset(),this._user=this._configureUser(c,this._options)}_configureUser(c,l){var u;const d=(0,t._normalizeUser)(c,l),f=(u=d.customIDs)===null||u===void 0?void 0:u.stableID;return f&&t.StableID.setOverride(f,this._sdkKey),d}_getFeatureGateImpl(c,l){var u,d;const{result:f,details:h}=this._store.getGate(c),g=(0,t._makeFeatureGate)(c,h,f),_=(d=(u=this.overrideAdapter)===null||u===void 0?void 0:u.getGateOverride)===null||d===void 0?void 0:d.call(u,g,this._user,l),v=_??g;return this._enqueueExposure(c,(0,t._createGateExposure)(this._user,v,this._store.getExposureMapping()),l),this.$emt({name:"gate_evaluation",gate:v}),v}_getDynamicConfigImpl(c,l){var u,d;const{result:f,details:h}=this._store.getConfig(c),g=(0,t._makeDynamicConfig)(c,h,f),_=(d=(u=this.overrideAdapter)===null||u===void 0?void 0:u.getDynamicConfigOverride)===null||d===void 0?void 0:d.call(u,g,this._user,l),v=_??g;return this._enqueueExposure(c,(0,t._createConfigExposure)(this._user,v,this._store.getExposureMapping()),l),this.$emt({name:"dynamic_config_evaluation",dynamicConfig:v}),v}_getExperimentImpl(c,l){var u,d,f,h;const{result:g,details:_}=this._store.getConfig(c),v=(0,t._makeExperiment)(c,_,g);v.__evaluation!=null&&(v.__evaluation.secondary_exposures=(0,t._mapExposures)((d=(u=v.__evaluation)===null||u===void 0?void 0:u.secondary_exposures)!==null&&d!==void 0?d:[],this._store.getExposureMapping()));const y=(h=(f=this.overrideAdapter)===null||f===void 0?void 0:f.getExperimentOverride)===null||h===void 0?void 0:h.call(f,v,this._user,l),C=y??v;return this._enqueueExposure(c,(0,t._createConfigExposure)(this._user,C,this._store.getExposureMapping()),l),this.$emt({name:"experiment_evaluation",experiment:C}),C}_getLayerImpl(c,l){var u,d,f;const{result:h,details:g}=this._store.getLayer(c),_=(0,t._makeLayer)(c,g,h),v=(d=(u=this.overrideAdapter)===null||u===void 0?void 0:u.getLayerOverride)===null||d===void 0?void 0:d.call(u,_,this._user,l);l?.disableExposureLog&&this._logger.incrementNonExposureCount(c);const y=(0,t._mergeOverride)(_,v,(f=v?.__value)!==null&&f!==void 0?f:_.__value,C=>{l?.disableExposureLog||this._enqueueExposure(c,(0,t._createLayerParameterExposure)(this._user,y,C,this._store.getExposureMapping()),l)});return this.$emt({name:"layer_evaluation",layer:y}),y}_getParameterStoreImpl(c,l){var u,d;const{result:f,details:h}=this._store.getParamStore(c);this._logger.incrementNonExposureCount(c);const g={name:c,details:h,__configuration:f,get:(0,s._makeParamStoreGetter)(this,f,l)},_=(d=(u=this.overrideAdapter)===null||u===void 0?void 0:u.getParamStoreOverride)===null||d===void 0?void 0:d.call(u,g,l);return _!=null&&(g.__configuration=_.config,g.details=_.details,g.get=(0,s._makeParamStoreGetter)(this,_.config,l)),g}};return zo.default=o,zo}var UC;function dP(){return UC||(UC=1,function(e){var t=Gi&&Gi.__createBinding||(Object.create?function(o,a,c,l){l===void 0&&(l=c);var u=Object.getOwnPropertyDescriptor(a,c);(!u||("get"in u?!a.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return a[c]}}),Object.defineProperty(o,l,u)}:function(o,a,c,l){l===void 0&&(l=c),o[l]=a[c]}),n=Gi&&Gi.__exportStar||function(o,a){for(var c in o)c!=="default"&&!Object.prototype.hasOwnProperty.call(a,c)&&t(a,o,c)};Object.defineProperty(e,"__esModule",{value:!0}),e.StatsigClient=void 0;const r=Rs(),s=uP();e.StatsigClient=s.default,n(Rs(),e);const i=Object.assign((0,r._getStatsigGlobal)(),{StatsigClient:s.default});e.default=i}(Gi)),Gi}var p9=dP(),Vi={},zi={},BC;function fP(){if(BC)return zi;BC=1;var e=zi&&zi.__awaiter||function(o,a,c,l){function u(d){return d instanceof c?d:new c(function(f){f(d)})}return new(c||(c=Promise))(function(d,f){function h(v){try{_(l.next(v))}catch(y){f(y)}}function g(v){try{_(l.throw(v))}catch(y){f(y)}}function _(v){v.done?d(v.value):u(v.value).then(h,g)}_((l=l.apply(o,a||[])).next())})};Object.defineProperty(zi,"__esModule",{value:!0}),zi.LocalOverrideAdapter=void 0;const t=Rs(),n="LocalOverride:Recognized";function r(){return{gate:{},dynamicConfig:{},experiment:{},layer:{}}}function s(o,a){return{gate:Object.assign({},o.gate,a.gate),dynamicConfig:Object.assign({},o.dynamicConfig,a.dynamicConfig),experiment:Object.assign({},o.experiment,a.experiment),layer:Object.assign({},o.layer,a.layer)}}let i=class{constructor(a){this._overrides=r(),this._sdkKey=a??null}_getLocalOverridesStorageKey(a){return`statsig.local-overrides.${(0,t._getStorageKey)(a)}`}loadFromStorage(){return e(this,void 0,void 0,function*(){if(this._sdkKey==null)return;t.Storage.isReady()||(yield t.Storage.isReadyResolver());const a=this._getLocalOverridesStorageKey(this._sdkKey),c=t.Storage.getItem(a),l=c?(0,t._typedJsonParse)(c,"gate","LocalOverrideAdapter overrides"):null,u=this._hasInMemoryOverrides();l&&(this._overrides=u?s(l,this._overrides):l),u&&this._saveOverridesToStorage()})}_saveOverridesToStorage(){if(this._sdkKey==null||!t.Storage.isReady())return;const a=this._getLocalOverridesStorageKey(this._sdkKey);t.Storage.setItem(a,JSON.stringify(this._overrides))}overrideGate(a,c){this._overrides.gate[a]=c,this._overrides.gate[(0,t._DJB2)(a)]=c,this._saveOverridesToStorage()}_warnIfStorageNotReady(){t.Storage.isReady()||t.Log.warn("Storage is not ready. Override removal may not persist.")}removeGateOverride(a){this._warnIfStorageNotReady(),delete this._overrides.gate[a],delete this._overrides.gate[(0,t._DJB2)(a)],this._saveOverridesToStorage()}getGateOverride(a,c){var l;const u=(l=this._overrides.gate[a.name])!==null&&l!==void 0?l:this._overrides.gate[(0,t._DJB2)(a.name)];return u==null?null:Object.assign(Object.assign({},a),{value:u,details:Object.assign(Object.assign({},a.details),{reason:n})})}overrideDynamicConfig(a,c){this._overrides.dynamicConfig[a]=c,this._overrides.dynamicConfig[(0,t._DJB2)(a)]=c,this._saveOverridesToStorage()}removeDynamicConfigOverride(a){this._warnIfStorageNotReady(),delete this._overrides.dynamicConfig[a],delete this._overrides.dynamicConfig[(0,t._DJB2)(a)],this._saveOverridesToStorage()}getDynamicConfigOverride(a,c){return this._getConfigOverride(a,this._overrides.dynamicConfig)}overrideExperiment(a,c){this._overrides.experiment[a]=c,this._overrides.experiment[(0,t._DJB2)(a)]=c,this._saveOverridesToStorage()}removeExperimentOverride(a){this._warnIfStorageNotReady(),delete this._overrides.experiment[a],delete this._overrides.experiment[(0,t._DJB2)(a)],this._saveOverridesToStorage()}getExperimentOverride(a,c){return this._getConfigOverride(a,this._overrides.experiment)}overrideLayer(a,c){this._overrides.layer[a]=c,this._overrides.layer[(0,t._DJB2)(a)]=c,this._saveOverridesToStorage()}removeLayerOverride(a){this._warnIfStorageNotReady(),delete this._overrides.layer[a],delete this._overrides.layer[(0,t._DJB2)(a)],this._saveOverridesToStorage()}getAllOverrides(){return JSON.parse(JSON.stringify(this._overrides))}removeAllOverrides(){this._warnIfStorageNotReady(),this._overrides=r(),this._saveOverridesToStorage()}getLayerOverride(a,c){var l;const u=(l=this._overrides.layer[a.name])!==null&&l!==void 0?l:this._overrides.layer[(0,t._DJB2)(a.name)];return u==null?null:Object.assign(Object.assign({},a),{__value:u,get:(0,t._makeTypedGet)(a.name,u),details:Object.assign(Object.assign({},a.details),{reason:n})})}_getConfigOverride(a,c){var l;const u=(l=c[a.name])!==null&&l!==void 0?l:c[(0,t._DJB2)(a.name)];return u==null?null:Object.assign(Object.assign({},a),{value:u,get:(0,t._makeTypedGet)(a.name,u),details:Object.assign(Object.assign({},a.details),{reason:n})})}_hasInMemoryOverrides(){return Object.keys(this._overrides.gate).length>0||Object.keys(this._overrides.dynamicConfig).length>0||Object.keys(this._overrides.experiment).length>0||Object.keys(this._overrides.layer).length>0}};return zi.LocalOverrideAdapter=i,zi}var qC;function hP(){return qC||(qC=1,function(e){var t=Vi&&Vi.__createBinding||(Object.create?function(r,s,i,o){o===void 0&&(o=i);var a=Object.getOwnPropertyDescriptor(s,i);(!a||("get"in a?!s.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return s[i]}}),Object.defineProperty(r,o,a)}:function(r,s,i,o){o===void 0&&(o=i),r[o]=s[i]}),n=Vi&&Vi.__exportStar||function(r,s){for(var i in r)i!=="default"&&!Object.prototype.hasOwnProperty.call(s,i)&&t(s,r,i)};Object.defineProperty(e,"__esModule",{value:!0}),n(fP(),e)}(Vi)),Vi}var pP=hP();function qd(e,t,n,r){return Zn(e).logEvent(t,n,r)}function we(e,t,n){return Zn(e).checkGate(t,n)}function zt(e,t,n){return Zn(e).getDynamicConfig(t,n)}function $f(e,t,n){return Zn(e).getExperiment(t,n)}function gt(e,t,n){return Zn(e).getLayer(t,n)}const mP=It(()=>new pP.LocalOverrideAdapter),gP=e=>{const t={};return typeof e?.custom?.auth_status=="string"&&(t.auth_status=e.custom.auth_status),typeof e?.locale=="string"&&(t.browser_locale=e.locale),t};class _P extends p9.StatsigClient{logEvent(t,n,r){const s={...gP(this.getContext().user),...typeof t=="string"?r:t.metadata};super.logEvent(typeof t=="string"?t:t.eventName,typeof t=="string"?n:t.value??void 0,s)}}const Zn=It(e=>{const t=_n(e),n=mP(e),r=new _P(sP,t.statsigPayload.user,{environment:{tier:iP},networkConfig:{api:window.location.origin+"/v1",preventAllNetworkTraffic:!1},loggingBufferMaxSize:100,disableLogging:!1,disableStorage:!1,overrideAdapter:n,logEventCompressionMode:p9.LogEventCompressionMode.Forced});return r.dataAdapter.setData(JSON.stringify(t.statsigPayload)),r.initializeSync(),r});function Tc(){return Zn(Xe())}const Fe={logEvent:(e,t,n)=>Tc().logEvent(e,t??void 0,n),checkGate:e=>Tc().checkGate(e),getUser:()=>Tc().getContext().user,getLayerValue(e){return Tc().getLayer(e.layerName,{disableExposureLog:!e.shouldLogExposure}).get(e.key)??e.defaultValue},checkGateWithExposureLoggingDisabled:e=>Tc().checkGate(e,{disableExposureLog:!0})};function cr(){return navigator.userAgent}function py(){return/iPad|iPhone|iPod/.test(cr())}function my(){return/Android/.test(cr())}function vP(){return py()&&cr().includes("CriOS")}function Wf(){return py()||my()||vP()}function GC(){return/^((?!chrome|android).)*safari/i.test(cr())}function u1e(){return my()&&cr().includes("Chrome")}function yP(){return cr().includes("Mac OS X")}function m9(){return py()||yP()}function d1e(){return cr().includes("Windows_NT")}function f1e(){return cr().includes("Chrome/")&&!/Android|iPhone|iPad/i.test(cr())}function h1e(){return cr().includes("Firefox")}function gy(){const e=cr();return/iPad/.test(e)||my()&&!/Mobile/.test(e)||/Tablet/.test(e)}function CP(){return Wf()&&!gy()}function g9(){return Wf()||gy()}function _y(){return!g9()}const bP=/^ChatGPT.+Macintosh;.+ Chrome\/([\d.]+) .*$/;function Ur(e){return e||(e=cr()),bP.test(e)}const SP=["Fetch is aborted","Load failed","Script error.","Failed to execute 'insertBefore' on 'Node'","ResizeObserver loop completed with undelivered notifications.","Object Not Found Matching Id","Object.hasOwn is not a function"],wP=100,HC=1e3,Iu=[];function VC(e,t){const n=e.findIndex(r=>r<=t);return n===-1?e.length:n}const EP=e=>{if(e.stack?.includes("-extension://")||e.source==="console"||SP.some(s=>e?.message?.includes(s))||e.type==="RequestError")return!0;const t=Date.now(),n=t-1e3*60;if(VC(Iu,n)>=wP)return!0;const r=t-1e3*60*60*24;return VC(Iu,r)>=HC?!0:(Iu.unshift(t),Iu.splice(HC),!1)};function _9(){return location.origin===window.location.origin||!1}function v9(){return Ur()?"mini-web":"chatgpt-web"}const zC=typeof window>"u"?void 0:window.DesktopHostGateway,Gt=zC?.getVersion()===1?zC:void 0,Kf=Gt!==void 0,y9=Kf||!1;function p1e(e){if(e===void 0)return;const t=/^ChatGPT\/([\d.]+) \(([^)]+)\) Electron\/([\d.]+) Chrome\/([\d.]+)$/,n=e.match(t);if(n)return n[1]}function xP(...e){try{return new URL(...e)}catch{return null}}function Xc(e){const t=new URL(e);return t.searchParams.has("q")&&t.searchParams.set("q","<redacted>"),t.toString()}const vy=window.location.host+"/ces",yy="https",TP={},OP=TP,C9=`${yy}://${vy}`,kP={disableClientPersistence:!0,integrations:{"Segment.io":{apiHost:`${vy}/v1`,host:C9,protocol:yy,deliveryStrategy:{...OP}}}},AP={writeKey:"oai",cdnURL:`${yy}://${vy}`};var Cy={},ht=(e=>(e[e.Required=0]="Required",e[e.SendIfAvailable=1]="SendIfAvailable",e[e.Anonymous=2]="Anonymous",e))(ht||{});const Ae=Cy.VITE_SHARED_API_URL??window.location.origin+"/backend-api",by=Cy.VITE_SHARED_ANON_API_URL??window.location.origin+"/backend-anon",hd=Cy.VITE_PUBLIC_API_URL??window.location.origin+"/public-api",MP="v4-2023-04-27",m1e={IT:"Italy",KR:"South Korea"},IP={AD:"Andorra",AI:"Anguilla",AT:"Austria",AW:"Aruba",AX:"Åland Islands",BG:"Bulgaria",BL:"Saint Barthélemy",BM:"Bermuda",BQ:"Caribbean Netherlands",BV:"Bouvet Island",CH:"Switzerland",CW:"Curaçao",CY:"Cyprus",CZ:"Czech Republic",DE:"Germany",DK:"Denmark",EE:"Estonia",ES:"Spain",FI:"Finland",FK:"Falkland Islands",FO:"Faroe Islands",FR:"France",GB:"United Kingdom",GF:"French Guiana",GG:"Guernsey",GI:"Gibraltar",GL:"Greenland",GP:"Guadeloupe",GR:"Greece",GS:"South Georgia and the South Sandwich Islands",HR:"Croatia",HU:"Hungary",IC:"Canary Islands",IE:"Ireland",IM:"Isle of Man",IO:"British Indian Ocean Territory",IS:"Iceland",IT:"Italy",JE:"Jersey",KY:"Cayman Islands",LI:"Liechtenstein",LT:"Lithuania",LU:"Luxembourg",LV:"Latvia",MC:"Monaco",ME:"Montenegro",MF:"Saint Martin",MQ:"Martinique",MS:"Montserrat",MT:"Malta",NC:"New Caledonia",NL:"Netherlands",NO:"Norway",PF:"French Polynesia",PL:"Poland",PM:"Saint Pierre and Miquelon",PN:"Pitcairn",PT:"Portugal",RE:"Reunion",SE:"Sweden",SH:"Saint Helena, Ascension and Tristan da Cunha",SI:"Slovenia",SJ:"Svalbard and Jan Mayen",SK:"Slovakia",SM:"San Marino",SX:"Sint Maarten",TC:"Turks and Caicos Islands",TF:"French Southern Territories",VG:"British Virgin Islands",WF:"Wallis and Futuna",YT:"Mayotte",ZA:"South Africa",ID:"Indonesia",BE:"Belgium",IN:"India",RO:"Romania",CA:"Canada",SG:"Singapore"},b9=[/^https:\/\/ab\.chatgpt\.com\//,e=>e.startsWith(C9),e=>{const t=[Ae,by],n=[/^\/sentinel\//];for(const r of t)if(e.startsWith(r)){const s=e.slice(r.length);return n.some(i=>i.test(s))}return!1}];class NP{#e=!1;#t=new Set;#r=new Set;#n=new Map;initialize(t){if(!this.#e){{const n=Kf?Gt?.getTelemetryConfig?.():void 0,r=n!==void 0?n.datadogService:v9(),s=Ur()?100:1;bn.init({applicationId:"fd6e06b8-4825-4fbb-8db4-2a243f92c4bc",clientToken:"pub1f79f8ac903a5872ae5f53026d20a77c",site:"datadoghq.com",service:r,env:"prod",version:"2ce0a3f07a70586b8e072b67b1fc24498df2535f",sessionSampleRate:s,sessionReplaySampleRate:0,trackUserInteractions:!1,trackResources:!0,trackLongTasks:!0,defaultPrivacyLevel:xR.MASK_USER_INPUT,beforeSend:i=>i.type==="error"&&EP(i.error)?!1:(i.view.url=Xc(i.view.url),i.type==="resource"&&(i.resource.url=Xc(i.resource.url)),i.type==="error"&&i.error.resource&&(i.error.resource.url=Xc(i.error.resource.url)),!0),allowedTracingUrls:[{match:i=>{const o=xP(i);if(o==null)return!1;const{hostname:a,pathname:c}=o;return!(!["openai.com",window.location.host].some(u=>a.endsWith(u))||a===window.location.host||c.startsWith("/ces/")||c.startsWith("/healthcheck"))},propagatorTypes:["datadog"]}],traceSampleRate:s,traceContextInjection:"sampled",excludedActivityUrls:b9,...t}),bn.setGlobalContextProperty("track","stable"),n!==void 0&&bn.setGlobalContextProperty("is_electron_desktop_app",!0),bn.setGlobalContextProperty("is_authenticated",!1)}this.#e=!0,_a.instance.setLogger(this)}}get viewId(){return bn.getInternalContext()?.view?.id}get sessionId(){return bn.getInternalContext()?.session_id}addAction(t,n){this.#e||(console.error("Should not call addAction before initialize"),this.initialize()),bn.addAction(t,n)}addError(t,n){if(console.error(t,n),this.#e||(console.error("Should not call addError before initialize"),this.initialize()),t instanceof je)return;const r=typeof t=="string"?new Error(t):t;bn.addError(r,n)}addTiming(t,n){const r=n??Date.now();this.#n.set(t,r),this.#e||(console.error("Should not call addTiming before initialize"),this.initialize()),performance.mark(t,{startTime:Math.max(0,r-performance.timeOrigin)}),bn.addTiming(t,n)}addFirstTiming(t,n){this.#t.has(t)||(this.#t.add(t),this.addTiming(t,n))}addDurationVital(t,n,r){bn.addDurationVital(t,{startTime:n,duration:r})}addFirstDurationVital(t,n,r){this.#r.has(t)||(this.#r.add(t),this.addDurationVital(t,n,r))}getTimings(){return this.#n}setUser(t,n){bn.setGlobalContextProperty("is_authenticated",!0);const r={id:t.id,account_plan_type:n?.planType??"none",workspace_id:n?.id};this.#e||(console.error("Should not call setUser before initialize"),this.initialize()),bn.setUser(r)}addFeatureFlagEvaluation(t,n){bn.addFeatureFlagEvaluation(t,n)}}const R=new NP,S9=58*60*1e3,RP=S9,x_={};function PP(e,t){x_[e]=t}function DP(e){return e!=null&&"__type"in e&&e.__type in x_?x_[e.__type](e):e}const w9=JSON.stringify,Ul=It(LP);function LP(e){let t=!0;return e&&(t=gt(e,"892702716").get("react_query_infinite_stale_time",!1),R.addFeatureFlagEvaluation("react_query_infinite",t)),new TR({defaultOptions:{queries:{gcTime:RP,staleTime:t?1/0:S9,retry:!1,retryOnMount:!1,refetchOnMount:!1,refetchOnWindowFocus:!1,refetchOnReconnect:!1,networkMode:"always",queryKeyHashFn:w9,throwOnError:(n,r)=>{if(!(n instanceof je||n instanceof xt))try{R.addError(n,{queryKey:r.queryKey.map(String).join(","),queryHash:r.queryHash})}catch(s){console.error(s)}return!1}},hydrate:{deserializeData:DP}}})}const E9=m.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;if(!E9)throw new Error("Missing react shared internals. Check version.");function Sy(){const e=E9?.H;return e!=null&&e.useState!==e.useReducer}function Me(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];throw new Error(typeof e=="number"?"[MobX] minified error nr: "+e+(n.length?" "+n.map(String).join(","):"")+". Find the full error at: https://github.com/mobxjs/mobx/blob/main/packages/mobx/src/errors.ts":"[MobX] "+e)}var FP={};function Yf(){return typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:FP}var x9=Object.assign,Gd=Object.getOwnPropertyDescriptor,is=Object.defineProperty,Bl=Object.prototype,T_=[];Object.freeze(T_);var wy={};Object.freeze(wy);var jP=typeof Proxy<"u",UP=Object.toString();function T9(){jP||Me("Proxy not available")}function O9(e){var t=!1;return function(){if(!t)return t=!0,e.apply(this,arguments)}}var va=function(){};function Wn(e){return typeof e=="function"}function mo(e){var t=typeof e;switch(t){case"string":case"symbol":case"number":return!0}return!1}function Zf(e){return e!==null&&typeof e=="object"}function Ps(e){if(!Zf(e))return!1;var t=Object.getPrototypeOf(e);if(t==null)return!0;var n=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;return typeof n=="function"&&n.toString()===UP}function k9(e){var t=e?.constructor;return t?t.name==="GeneratorFunction"||t.displayName==="GeneratorFunction":!1}function ql(e,t,n){is(e,t,{enumerable:!1,writable:!0,configurable:!0,value:n})}function A9(e,t,n){is(e,t,{enumerable:!1,writable:!1,configurable:!0,value:n})}function ki(e,t){var n="isMobX"+e;return t.prototype[n]=!0,function(r){return Zf(r)&&r[n]===!0}}function oc(e){return e!=null&&Object.prototype.toString.call(e)==="[object Map]"}function BP(e){var t=Object.getPrototypeOf(e),n=Object.getPrototypeOf(t),r=Object.getPrototypeOf(n);return r===null}function Ts(e){return e!=null&&Object.prototype.toString.call(e)==="[object Set]"}var M9=typeof Object.getOwnPropertySymbols<"u";function qP(e){var t=Object.keys(e);if(!M9)return t;var n=Object.getOwnPropertySymbols(e);return n.length?[].concat(t,n.filter(function(r){return Bl.propertyIsEnumerable.call(e,r)})):t}var Ba=typeof Reflect<"u"&&Reflect.ownKeys?Reflect.ownKeys:M9?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:Object.getOwnPropertyNames;function I9(e){return e===null?null:typeof e=="object"?""+e:e}function ks(e,t){return Bl.hasOwnProperty.call(e,t)}var GP=Object.getOwnPropertyDescriptors||function(t){var n={};return Ba(t).forEach(function(r){n[r]=Gd(t,r)}),n};function jn(e,t){return!!(e&t)}function Un(e,t,n){return n?e|=t:e&=~t,e}function $C(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function HP(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,zP(r.key),r)}}function ac(e,t,n){return t&&HP(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function ya(e,t){var n=typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=$P(e))||t){n&&(e=n);var r=0;return function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _i(){return _i=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},_i.apply(null,arguments)}function N9(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,O_(e,t)}function O_(e,t){return O_=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,r){return n.__proto__=r,n},O_(e,t)}function VP(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function zP(e){var t=VP(e,"string");return typeof t=="symbol"?t:t+""}function $P(e,t){if(e){if(typeof e=="string")return $C(e,t);var n={}.toString.call(e).slice(8,-1);return n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set"?Array.from(e):n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?$C(e,t):void 0}}var ns=Symbol("mobx-stored-annotations");function Ar(e){function t(n,r){if(Hl(r))return e.decorate_20223_(n,r);Gl(n,r,e)}return Object.assign(t,e)}function Gl(e,t,n){ks(e,ns)||ql(e,ns,_i({},e[ns])),tD(n)||(e[ns][t]=n)}function WP(e){return ks(e,ns)||ql(e,ns,_i({},e[ns])),e[ns]}function Hl(e){return typeof e=="object"&&typeof e.kind=="string"}var ae=Symbol("mobx administration"),Ai=function(){function e(n){n===void 0&&(n="Atom"),this.name_=void 0,this.flags_=0,this.observers_=new Set,this.lastAccessedBy_=0,this.lowestObserverState_=We.NOT_TRACKING_,this.onBOL=void 0,this.onBUOL=void 0,this.name_=n}var t=e.prototype;return t.onBO=function(){this.onBOL&&this.onBOL.forEach(function(r){return r()})},t.onBUO=function(){this.onBUOL&&this.onBUOL.forEach(function(r){return r()})},t.reportObserved=function(){return Z9(this)},t.reportChanged=function(){kn(),J9(this),An()},t.toString=function(){return this.name_},ac(e,[{key:"isBeingObserved",get:function(){return jn(this.flags_,e.isBeingObservedMask_)},set:function(r){this.flags_=Un(this.flags_,e.isBeingObservedMask_,r)}},{key:"isPendingUnobservation",get:function(){return jn(this.flags_,e.isPendingUnobservationMask_)},set:function(r){this.flags_=Un(this.flags_,e.isPendingUnobservationMask_,r)}},{key:"diffValue",get:function(){return jn(this.flags_,e.diffValueMask_)?1:0},set:function(r){this.flags_=Un(this.flags_,e.diffValueMask_,r===1)}}])}();Ai.isBeingObservedMask_=1;Ai.isPendingUnobservationMask_=2;Ai.diffValueMask_=4;var Ey=ki("Atom",Ai);function Jf(e,t,n){t===void 0&&(t=va),n===void 0&&(n=va);var r=new Ai(e);return t!==va&&i8(r,t),n!==va&&ky(r,n),r}function KP(e,t){return e===t}function YP(e,t){return Py(e,t)}function ZP(e,t){return Py(e,t,1)}function JP(e,t){return Object.is?Object.is(e,t):e===t?e!==0||1/e===1/t:e!==e&&t!==t}var go={identity:KP,structural:YP,default:JP,shallow:ZP};function _o(e,t,n){return oh(e)?e:Array.isArray(e)?Dt.array(e,{name:n}):Ps(e)?Dt.object(e,void 0,{name:n}):oc(e)?Dt.map(e,{name:n}):Ts(e)?Dt.set(e,{name:n}):typeof e=="function"&&!Ga(e)&&!Ha(e)?k9(e)?yo(e):qa(n,e):e}function QP(e,t,n){if(e==null||nn(e)||Pn(e)||sn(e)||Lt(e))return e;if(Array.isArray(e))return Dt.array(e,{name:n,deep:!1});if(Ps(e))return Dt.object(e,void 0,{name:n,deep:!1});if(oc(e))return Dt.map(e,{name:n,deep:!1});if(Ts(e))return Dt.set(e,{name:n,deep:!1})}function Qf(e){return e}function XP(e,t){return Py(e,t)?t:e}var R9="override",eD=Ar({annotationType_:R9,make_:nD,extend_:rD,decorate_20223_:sD});function tD(e){return e.annotationType_===R9}function nD(e,t){return 0}function rD(e,t,n,r){Me("'"+this.annotationType_+"' can only be used with 'makeObservable'")}function sD(e,t){console.warn("'"+this.annotationType_+"' cannot be used with decorators - this is a no-op")}function Vl(e,t){return{annotationType_:e,options_:t,make_:iD,extend_:oD,decorate_20223_:aD}}function iD(e,t,n,r){var s;if((s=this.options_)!=null&&s.bound)return this.extend_(e,t,n,!1)===null?0:1;if(r===e.target_)return this.extend_(e,t,n,!1)===null?0:2;if(Ga(n.value))return 1;var i=P9(e,this,t,n,!1);return is(r,t,i),2}function oD(e,t,n,r){var s=P9(e,this,t,n);return e.defineProperty_(t,s,r)}function aD(e,t){var n=t.kind,r=t.name,s=t.addInitializer,i=this,o=function(l){var u,d,f,h;return vi((u=(d=i.options_)==null?void 0:d.name)!=null?u:r.toString(),l,(f=(h=i.options_)==null?void 0:h.autoAction)!=null?f:!1)};if(n=="field")return function(c){var l,u=c;return Ga(u)||(u=o(u)),(l=i.options_)!=null&&l.bound&&(u=u.bind(this),u.isMobxAction=!0),u};if(n=="method"){var a;return Ga(e)||(e=o(e)),(a=this.options_)!=null&&a.bound&&s(function(){var c=this,l=c[r].bind(c);l.isMobxAction=!0,c[r]=l}),e}Me("Cannot apply '"+i.annotationType_+"' to '"+String(r)+"' (kind: "+n+"):"+(`
'`+i.annotationType_+"' can only be used on properties with a function value."))}function cD(e,t,n,r){t.annotationType_,r.value}function P9(e,t,n,r,s){var i,o,a,c,l,u,d;s===void 0&&(s=z.safeDescriptors),cD(e,t,n,r);var f=r.value;if((i=t.options_)!=null&&i.bound){var h;f=f.bind((h=e.proxy_)!=null?h:e.target_)}return{value:vi((o=(a=t.options_)==null?void 0:a.name)!=null?o:n.toString(),f,(c=(l=t.options_)==null?void 0:l.autoAction)!=null?c:!1,(u=t.options_)!=null&&u.bound?(d=e.proxy_)!=null?d:e.target_:void 0),configurable:s?e.isPlainObject_:!0,enumerable:!1,writable:!s}}function D9(e,t){return{annotationType_:e,options_:t,make_:lD,extend_:uD,decorate_20223_:dD}}function lD(e,t,n,r){var s;if(r===e.target_)return this.extend_(e,t,n,!1)===null?0:2;if((s=this.options_)!=null&&s.bound&&(!ks(e.target_,t)||!Ha(e.target_[t]))&&this.extend_(e,t,n,!1)===null)return 0;if(Ha(n.value))return 1;var i=L9(e,this,t,n,!1,!1);return is(r,t,i),2}function uD(e,t,n,r){var s,i=L9(e,this,t,n,(s=this.options_)==null?void 0:s.bound);return e.defineProperty_(t,i,r)}function dD(e,t){var n,r=t.name,s=t.addInitializer;return Ha(e)||(e=yo(e)),(n=this.options_)!=null&&n.bound&&s(function(){var i=this,o=i[r].bind(i);o.isMobXFlow=!0,i[r]=o}),e}function fD(e,t,n,r){t.annotationType_,r.value}function L9(e,t,n,r,s,i){i===void 0&&(i=z.safeDescriptors),fD(e,t,n,r);var o=r.value;if(Ha(o)||(o=yo(o)),s){var a;o=o.bind((a=e.proxy_)!=null?a:e.target_),o.isMobXFlow=!0}return{value:o,configurable:i?e.isPlainObject_:!0,enumerable:!1,writable:!i}}function xy(e,t){return{annotationType_:e,options_:t,make_:hD,extend_:pD,decorate_20223_:mD}}function hD(e,t,n){return this.extend_(e,t,n,!1)===null?0:1}function pD(e,t,n,r){return gD(e,this,t,n),e.defineComputedProperty_(t,_i({},this.options_,{get:n.get,set:n.set}),r)}function mD(e,t){var n=this,r=t.name,s=t.addInitializer;return s(function(){var i=Po(this)[ae],o=_i({},n.options_,{get:e,context:this});o.name||(o.name="ObservableObject."+r.toString()),i.values_.set(r,new Nr(o))}),function(){return this[ae].getObservablePropValue_(r)}}function gD(e,t,n,r){t.annotationType_,r.get}function Xf(e,t){return{annotationType_:e,options_:t,make_:_D,extend_:vD,decorate_20223_:yD}}function _D(e,t,n){return this.extend_(e,t,n,!1)===null?0:1}function vD(e,t,n,r){var s,i;return CD(e,this),e.defineObservableProperty_(t,n.value,(s=(i=this.options_)==null?void 0:i.enhancer)!=null?s:_o,r)}function yD(e,t){var n=this,r=t.kind,s=t.name,i=new WeakSet;function o(a,c){var l,u,d=Po(a)[ae],f=new di(c,(l=(u=n.options_)==null?void 0:u.enhancer)!=null?l:_o,"ObservableObject."+s.toString(),!1);d.values_.set(s,f),i.add(a)}if(r=="accessor")return{get:function(){return i.has(this)||o(this,e.get.call(this)),this[ae].getObservablePropValue_(s)},set:function(c){return i.has(this)||o(this,c),this[ae].setObservablePropValue_(s,c)},init:function(c){return i.has(this)||o(this,c),c}}}function CD(e,t,n,r){t.annotationType_}var bD="true",SD=F9();function F9(e){return{annotationType_:bD,options_:e,make_:wD,extend_:ED,decorate_20223_:xD}}function wD(e,t,n,r){var s,i;if(n.get)return cc.make_(e,t,n,r);if(n.set){var o=vi(t.toString(),n.set);return r===e.target_?e.defineProperty_(t,{configurable:z.safeDescriptors?e.isPlainObject_:!0,set:o})===null?0:2:(is(r,t,{configurable:!0,set:o}),2)}if(r!==e.target_&&typeof n.value=="function"){var a;if(k9(n.value)){var c,l=(c=this.options_)!=null&&c.autoBind?yo.bound:yo;return l.make_(e,t,n,r)}var u=(a=this.options_)!=null&&a.autoBind?qa.bound:qa;return u.make_(e,t,n,r)}var d=((s=this.options_)==null?void 0:s.deep)===!1?Dt.ref:Dt;if(typeof n.value=="function"&&(i=this.options_)!=null&&i.autoBind){var f;n.value=n.value.bind((f=e.proxy_)!=null?f:e.target_)}return d.make_(e,t,n,r)}function ED(e,t,n,r){var s,i;if(n.get)return cc.extend_(e,t,n,r);if(n.set)return e.defineProperty_(t,{configurable:z.safeDescriptors?e.isPlainObject_:!0,set:vi(t.toString(),n.set)},r);if(typeof n.value=="function"&&(s=this.options_)!=null&&s.autoBind){var o;n.value=n.value.bind((o=e.proxy_)!=null?o:e.target_)}var a=((i=this.options_)==null?void 0:i.deep)===!1?Dt.ref:Dt;return a.extend_(e,t,n,r)}function xD(e,t){Me("'"+this.annotationType_+"' cannot be used as a decorator")}var TD="observable",OD="observable.ref",kD="observable.shallow",AD="observable.struct",j9={deep:!0,name:void 0,defaultDecorator:void 0,proxy:!0};Object.freeze(j9);function Nu(e){return e||j9}var k_=Xf(TD),MD=Xf(OD,{enhancer:Qf}),ID=Xf(kD,{enhancer:QP}),ND=Xf(AD,{enhancer:XP}),U9=Ar(k_);function Ru(e){return e.deep===!0?_o:e.deep===!1?Qf:PD(e.defaultDecorator)}function RD(e){var t;return e?(t=e.defaultDecorator)!=null?t:F9(e):void 0}function PD(e){var t,n;return e&&(t=(n=e.options_)==null?void 0:n.enhancer)!=null?t:_o}function B9(e,t,n){if(Hl(t))return k_.decorate_20223_(e,t);if(mo(t)){Gl(e,t,k_);return}return oh(e)?e:Ps(e)?Dt.object(e,t,n):Array.isArray(e)?Dt.array(e,t):oc(e)?Dt.map(e,t):Ts(e)?Dt.set(e,t):typeof e=="object"&&e!==null?e:Dt.box(e,t)}x9(B9,U9);var DD={box:function(t,n){var r=Nu(n);return new di(t,Ru(r),r.name,!0,r.equals)},array:function(t,n){var r=Nu(n);return(z.useProxies===!1||r.proxy===!1?JL:qL)(t,Ru(r),r.name)},map:function(t,n){var r=Nu(n);return new Iy(t,Ru(r),r.name)},set:function(t,n){var r=Nu(n);return new Ny(t,Ru(r),r.name)},object:function(t,n,r){return Mi(function(){return Ay(z.useProxies===!1||r?.proxy===!1?Po({},r):FL({},r),t,n)})},ref:Ar(MD),shallow:Ar(ID),deep:U9,struct:Ar(ND)},Dt=x9(B9,DD),q9="computed",LD="computed.struct",A_=xy(q9),FD=xy(LD,{equals:go.structural}),cc=function(t,n){if(Hl(n))return A_.decorate_20223_(t,n);if(mo(n))return Gl(t,n,A_);if(Ps(t))return Ar(xy(q9,t));var r=Ps(n)?n:{};return r.get=t,r.name||(r.name=t.name||""),new Nr(r)};Object.assign(cc,A_);cc.struct=Ar(FD);var WC,KC,Hd=0,jD=1,UD=(WC=(KC=Gd(function(){},"name"))==null?void 0:KC.configurable)!=null?WC:!1,YC={value:"action",configurable:!0,writable:!1,enumerable:!1};function vi(e,t,n,r){n===void 0&&(n=!1);function s(){return G9(e,n,t,r||this,arguments)}return s.isMobxAction=!0,s.toString=function(){return t.toString()},UD&&(YC.value=e,is(s,"name",YC)),s}function G9(e,t,n,r,s){var i=H9(e,t);try{return n.apply(r,s)}catch(o){throw i.error_=o,o}finally{V9(i)}}function H9(e,t,n,r){var s=!1,i=0,o=z.trackingDerivation,a=!t||!o;kn();var c=z.allowStateChanges;a&&(Ro(),c=eh(!0));var l=rh(!0),u={runAsAction_:a,prevDerivation_:o,prevAllowStateChanges_:c,prevAllowStateReads_:l,notifySpy_:s,startTime_:i,actionId_:jD++,parentActionId_:Hd};return Hd=u.actionId_,u}function V9(e){Hd!==e.actionId_&&Me(30),Hd=e.parentActionId_,e.error_!==void 0&&(z.suppressReactionErrors=!0),th(e.prevAllowStateChanges_),xa(e.prevAllowStateReads_),An(),e.runAsAction_&&As(e.prevDerivation_),z.suppressReactionErrors=!1}function Ty(e,t){var n=eh(e);try{return t()}finally{th(n)}}function eh(e){var t=z.allowStateChanges;return z.allowStateChanges=e,t}function th(e){z.allowStateChanges=e}var di=function(e){function t(r,s,i,o,a){var c;return i===void 0&&(i="ObservableValue"),a===void 0&&(a=go.default),c=e.call(this,i)||this,c.enhancer=void 0,c.name_=void 0,c.equals=void 0,c.hasUnreportedChange_=!1,c.interceptors_=void 0,c.changeListeners_=void 0,c.value_=void 0,c.dehancer=void 0,c.enhancer=s,c.name_=i,c.equals=a,c.value_=s(r,void 0,i),c}N9(t,e);var n=t.prototype;return n.dehanceValue=function(s){return this.dehancer!==void 0?this.dehancer(s):s},n.set=function(s){this.value_,s=this.prepareNewValue_(s),s!==z.UNCHANGED&&this.setNewValue_(s)},n.prepareNewValue_=function(s){if(rr(this)){var i=sr(this,{object:this,type:as,newValue:s});if(!i)return z.UNCHANGED;s=i.newValue}return s=this.enhancer(s,this.value_,this.name_),this.equals(this.value_,s)?z.UNCHANGED:s},n.setNewValue_=function(s){var i=this.value_;this.value_=s,this.reportChanged(),Mr(this)&&Ir(this,{type:as,object:this,newValue:s,oldValue:i})},n.get=function(){return this.reportObserved(),this.dehanceValue(this.value_)},n.intercept_=function(s){return zl(this,s)},n.observe_=function(s,i){return i&&s({observableKind:"value",debugObjectName:this.name_,object:this,type:as,newValue:this.value_,oldValue:void 0}),$l(this,s)},n.raw=function(){return this.value_},n.toJSON=function(){return this.get()},n.toString=function(){return this.name_+"["+this.value_+"]"},n.valueOf=function(){return I9(this.get())},n[Symbol.toPrimitive]=function(){return this.valueOf()},t}(Ai),Oy=ki("ObservableValue",di),Nr=function(){function e(n){this.dependenciesState_=We.NOT_TRACKING_,this.observing_=[],this.newObserving_=null,this.observers_=new Set,this.runId_=0,this.lastAccessedBy_=0,this.lowestObserverState_=We.UP_TO_DATE_,this.unboundDepsCount_=0,this.value_=new zd(null),this.name_=void 0,this.triggeredBy_=void 0,this.flags_=0,this.derivation=void 0,this.setter_=void 0,this.isTracing_=Vd.NONE,this.scope_=void 0,this.equals_=void 0,this.requiresReaction_=void 0,this.keepAlive_=void 0,this.onBOL=void 0,this.onBUOL=void 0,n.get||Me(31),this.derivation=n.get,this.name_=n.name||"ComputedValue",n.set&&(this.setter_=vi("ComputedValue-setter",n.set)),this.equals_=n.equals||(n.compareStructural||n.struct?go.structural:go.default),this.scope_=n.context,this.requiresReaction_=n.requiresReaction,this.keepAlive_=!!n.keepAlive}var t=e.prototype;return t.onBecomeStale_=function(){ZD(this)},t.onBO=function(){this.onBOL&&this.onBOL.forEach(function(r){return r()})},t.onBUO=function(){this.onBUOL&&this.onBUOL.forEach(function(r){return r()})},t.get=function(){if(this.isComputing&&Me(32,this.name_,this.derivation),z.inBatch===0&&this.observers_.size===0&&!this.keepAlive_)M_(this)&&(this.warnAboutUntrackedRead_(),kn(),this.value_=this.computeValue_(!1),An());else if(Z9(this),M_(this)){var r=z.trackingContext;this.keepAlive_&&!r&&(z.trackingContext=this),this.trackAndCompute()&&YD(this),z.trackingContext=r}var s=this.value_;if(pd(s))throw s.cause;return s},t.set=function(r){if(this.setter_){this.isRunningSetter&&Me(33,this.name_),this.isRunningSetter=!0;try{this.setter_.call(this.scope_,r)}finally{this.isRunningSetter=!1}}else Me(34,this.name_)},t.trackAndCompute=function(){var r=this.value_,s=this.dependenciesState_===We.NOT_TRACKING_,i=this.computeValue_(!0),o=s||pd(r)||pd(i)||!this.equals_(r,i);return o&&(this.value_=i),o},t.computeValue_=function(r){this.isComputing=!0;var s=eh(!1),i;if(r)i=z9(this,this.derivation,this.scope_);else if(z.disableErrorBoundaries===!0)i=this.derivation.call(this.scope_);else try{i=this.derivation.call(this.scope_)}catch(o){i=new zd(o)}return th(s),this.isComputing=!1,i},t.suspend_=function(){this.keepAlive_||(I_(this),this.value_=void 0)},t.observe_=function(r,s){var i=this,o=!0,a=void 0;return sh(function(){var c=i.get();if(!o||s){var l=Ro();r({observableKind:"computed",debugObjectName:i.name_,type:as,object:i,newValue:c,oldValue:a}),As(l)}o=!1,a=c})},t.warnAboutUntrackedRead_=function(){},t.toString=function(){return this.name_+"["+this.derivation.toString()+"]"},t.valueOf=function(){return I9(this.get())},t[Symbol.toPrimitive]=function(){return this.valueOf()},ac(e,[{key:"isComputing",get:function(){return jn(this.flags_,e.isComputingMask_)},set:function(r){this.flags_=Un(this.flags_,e.isComputingMask_,r)}},{key:"isRunningSetter",get:function(){return jn(this.flags_,e.isRunningSetterMask_)},set:function(r){this.flags_=Un(this.flags_,e.isRunningSetterMask_,r)}},{key:"isBeingObserved",get:function(){return jn(this.flags_,e.isBeingObservedMask_)},set:function(r){this.flags_=Un(this.flags_,e.isBeingObservedMask_,r)}},{key:"isPendingUnobservation",get:function(){return jn(this.flags_,e.isPendingUnobservationMask_)},set:function(r){this.flags_=Un(this.flags_,e.isPendingUnobservationMask_,r)}},{key:"diffValue",get:function(){return jn(this.flags_,e.diffValueMask_)?1:0},set:function(r){this.flags_=Un(this.flags_,e.diffValueMask_,r===1)}}])}();Nr.isComputingMask_=1;Nr.isRunningSetterMask_=2;Nr.isBeingObservedMask_=4;Nr.isPendingUnobservationMask_=8;Nr.diffValueMask_=16;var vo=ki("ComputedValue",Nr),We;(function(e){e[e.NOT_TRACKING_=-1]="NOT_TRACKING_",e[e.UP_TO_DATE_=0]="UP_TO_DATE_",e[e.POSSIBLY_STALE_=1]="POSSIBLY_STALE_",e[e.STALE_=2]="STALE_"})(We||(We={}));var Vd;(function(e){e[e.NONE=0]="NONE",e[e.LOG=1]="LOG",e[e.BREAK=2]="BREAK"})(Vd||(Vd={}));var zd=function(t){this.cause=void 0,this.cause=t};function pd(e){return e instanceof zd}function M_(e){switch(e.dependenciesState_){case We.UP_TO_DATE_:return!1;case We.NOT_TRACKING_:case We.STALE_:return!0;case We.POSSIBLY_STALE_:{for(var t=rh(!0),n=Ro(),r=e.observing_,s=r.length,i=0;i<s;i++){var o=r[i];if(vo(o)){if(z.disableErrorBoundaries)o.get();else try{o.get()}catch{return As(n),xa(t),!0}if(e.dependenciesState_===We.STALE_)return As(n),xa(t),!0}}return $9(e),As(n),xa(t),!1}}}function BD(){return z.trackingDerivation!==null}function z9(e,t,n){var r=rh(!0);$9(e),e.newObserving_=new Array(e.runId_===0?100:e.observing_.length),e.unboundDepsCount_=0,e.runId_=++z.runId;var s=z.trackingDerivation;z.trackingDerivation=e,z.inBatch++;var i;if(z.disableErrorBoundaries===!0)i=t.call(n);else try{i=t.call(n)}catch(o){i=new zd(o)}return z.inBatch--,z.trackingDerivation=s,qD(e),xa(r),i}function qD(e){for(var t=e.observing_,n=e.observing_=e.newObserving_,r=We.UP_TO_DATE_,s=0,i=e.unboundDepsCount_,o=0;o<i;o++){var a=n[o];a.diffValue===0&&(a.diffValue=1,s!==o&&(n[s]=a),s++),a.dependenciesState_>r&&(r=a.dependenciesState_)}for(n.length=s,e.newObserving_=null,i=t.length;i--;){var c=t[i];c.diffValue===0&&K9(c,e),c.diffValue=0}for(;s--;){var l=n[s];l.diffValue===1&&(l.diffValue=0,KD(l,e))}r!==We.UP_TO_DATE_&&(e.dependenciesState_=r,e.onBecomeStale_())}function I_(e){var t=e.observing_;e.observing_=[];for(var n=t.length;n--;)K9(t[n],e);e.dependenciesState_=We.NOT_TRACKING_}function nh(e){var t=Ro();try{return e()}finally{As(t)}}function Ro(){var e=z.trackingDerivation;return z.trackingDerivation=null,e}function As(e){z.trackingDerivation=e}function rh(e){var t=z.allowStateReads;return z.allowStateReads=e,t}function xa(e){z.allowStateReads=e}function $9(e){if(e.dependenciesState_!==We.UP_TO_DATE_){e.dependenciesState_=We.UP_TO_DATE_;for(var t=e.observing_,n=t.length;n--;)t[n].lowestObserverState_=We.UP_TO_DATE_}}var GD=["mobxGuid","spyListeners","enforceActions","computedRequiresReaction","reactionRequiresObservable","observableRequiresReaction","allowStateReads","disableErrorBoundaries","runId","UNCHANGED","useProxies"],el=function(){this.version=6,this.UNCHANGED={},this.trackingDerivation=null,this.trackingContext=null,this.runId=0,this.mobxGuid=0,this.inBatch=0,this.pendingUnobservations=[],this.pendingReactions=[],this.isRunningReactions=!1,this.allowStateChanges=!1,this.allowStateReads=!0,this.enforceActions=!0,this.spyListeners=[],this.globalReactionErrorHandlers=[],this.computedRequiresReaction=!1,this.reactionRequiresObservable=!1,this.observableRequiresReaction=!1,this.disableErrorBoundaries=!1,this.suppressReactionErrors=!1,this.useProxies=!0,this.verifyProxies=!1,this.safeDescriptors=!0},md=!0,W9=!1,z=function(){var e=Yf();return e.__mobxInstanceCount>0&&!e.__mobxGlobals&&(md=!1),e.__mobxGlobals&&e.__mobxGlobals.version!==new el().version&&(md=!1),md?e.__mobxGlobals?(e.__mobxInstanceCount+=1,e.__mobxGlobals.UNCHANGED||(e.__mobxGlobals.UNCHANGED={}),e.__mobxGlobals):(e.__mobxInstanceCount=1,e.__mobxGlobals=new el):(setTimeout(function(){W9||Me(35)},1),new el)}();function HD(){if((z.pendingReactions.length||z.inBatch||z.isRunningReactions)&&Me(36),W9=!0,md){var e=Yf();--e.__mobxInstanceCount===0&&(e.__mobxGlobals=void 0),z=new el}}function VD(){return z}function zD(){var e=new el;for(var t in e)GD.indexOf(t)===-1&&(z[t]=e[t]);z.allowStateChanges=!z.enforceActions}function $D(e){return e.observers_&&e.observers_.size>0}function WD(e){return e.observers_}function KD(e,t){e.observers_.add(t),e.lowestObserverState_>t.dependenciesState_&&(e.lowestObserverState_=t.dependenciesState_)}function K9(e,t){e.observers_.delete(t),e.observers_.size===0&&Y9(e)}function Y9(e){e.isPendingUnobservation===!1&&(e.isPendingUnobservation=!0,z.pendingUnobservations.push(e))}function kn(){z.inBatch++}function An(){if(--z.inBatch===0){Q9();for(var e=z.pendingUnobservations,t=0;t<e.length;t++){var n=e[t];n.isPendingUnobservation=!1,n.observers_.size===0&&(n.isBeingObserved&&(n.isBeingObserved=!1,n.onBUO()),n instanceof Nr&&n.suspend_())}z.pendingUnobservations=[]}}function Z9(e){var t=z.trackingDerivation;return t!==null?(t.runId_!==e.lastAccessedBy_&&(e.lastAccessedBy_=t.runId_,t.newObserving_[t.unboundDepsCount_++]=e,!e.isBeingObserved&&z.trackingContext&&(e.isBeingObserved=!0,e.onBO())),e.isBeingObserved):(e.observers_.size===0&&z.inBatch>0&&Y9(e),!1)}function J9(e){e.lowestObserverState_!==We.STALE_&&(e.lowestObserverState_=We.STALE_,e.observers_.forEach(function(t){t.dependenciesState_===We.UP_TO_DATE_&&t.onBecomeStale_(),t.dependenciesState_=We.STALE_}))}function YD(e){e.lowestObserverState_!==We.STALE_&&(e.lowestObserverState_=We.STALE_,e.observers_.forEach(function(t){t.dependenciesState_===We.POSSIBLY_STALE_?t.dependenciesState_=We.STALE_:t.dependenciesState_===We.UP_TO_DATE_&&(e.lowestObserverState_=We.UP_TO_DATE_)}))}function ZD(e){e.lowestObserverState_===We.UP_TO_DATE_&&(e.lowestObserverState_=We.POSSIBLY_STALE_,e.observers_.forEach(function(t){t.dependenciesState_===We.UP_TO_DATE_&&(t.dependenciesState_=We.POSSIBLY_STALE_,t.onBecomeStale_())}))}var Rr=function(){function e(n,r,s,i){n===void 0&&(n="Reaction"),this.name_=void 0,this.onInvalidate_=void 0,this.errorHandler_=void 0,this.requiresObservable_=void 0,this.observing_=[],this.newObserving_=[],this.dependenciesState_=We.NOT_TRACKING_,this.runId_=0,this.unboundDepsCount_=0,this.flags_=0,this.isTracing_=Vd.NONE,this.name_=n,this.onInvalidate_=r,this.errorHandler_=s,this.requiresObservable_=i}var t=e.prototype;return t.onBecomeStale_=function(){this.schedule_()},t.schedule_=function(){this.isScheduled||(this.isScheduled=!0,z.pendingReactions.push(this),Q9())},t.runReaction_=function(){if(!this.isDisposed){kn(),this.isScheduled=!1;var r=z.trackingContext;if(z.trackingContext=this,M_(this)){this.isTrackPending=!0;try{this.onInvalidate_()}catch(s){this.reportExceptionInDerivation_(s)}}z.trackingContext=r,An()}},t.track=function(r){if(!this.isDisposed){kn(),this.isRunning=!0;var s=z.trackingContext;z.trackingContext=this;var i=z9(this,r,void 0);z.trackingContext=s,this.isRunning=!1,this.isTrackPending=!1,this.isDisposed&&I_(this),pd(i)&&this.reportExceptionInDerivation_(i.cause),An()}},t.reportExceptionInDerivation_=function(r){var s=this;if(this.errorHandler_){this.errorHandler_(r,this);return}if(z.disableErrorBoundaries)throw r;var i="[mobx] uncaught error in '"+this+"'";z.suppressReactionErrors||console.error(i,r),z.globalReactionErrorHandlers.forEach(function(o){return o(r,s)})},t.dispose=function(){this.isDisposed||(this.isDisposed=!0,this.isRunning||(kn(),I_(this),An()))},t.getDisposer_=function(r){var s=this,i=function o(){s.dispose(),r==null||r.removeEventListener==null||r.removeEventListener("abort",o)};return r==null||r.addEventListener==null||r.addEventListener("abort",i),i[ae]=this,i},t.toString=function(){return"Reaction["+this.name_+"]"},t.trace=function(r){},ac(e,[{key:"isDisposed",get:function(){return jn(this.flags_,e.isDisposedMask_)},set:function(r){this.flags_=Un(this.flags_,e.isDisposedMask_,r)}},{key:"isScheduled",get:function(){return jn(this.flags_,e.isScheduledMask_)},set:function(r){this.flags_=Un(this.flags_,e.isScheduledMask_,r)}},{key:"isTrackPending",get:function(){return jn(this.flags_,e.isTrackPendingMask_)},set:function(r){this.flags_=Un(this.flags_,e.isTrackPendingMask_,r)}},{key:"isRunning",get:function(){return jn(this.flags_,e.isRunningMask_)},set:function(r){this.flags_=Un(this.flags_,e.isRunningMask_,r)}},{key:"diffValue",get:function(){return jn(this.flags_,e.diffValueMask_)?1:0},set:function(r){this.flags_=Un(this.flags_,e.diffValueMask_,r===1)}}])}();Rr.isDisposedMask_=1;Rr.isScheduledMask_=2;Rr.isTrackPendingMask_=4;Rr.isRunningMask_=8;Rr.diffValueMask_=16;function JD(e){return z.globalReactionErrorHandlers.push(e),function(){var t=z.globalReactionErrorHandlers.indexOf(e);t>=0&&z.globalReactionErrorHandlers.splice(t,1)}}var QD=100,N_=function(t){return t()};function Q9(){z.inBatch>0||z.isRunningReactions||N_(XD)}function XD(){z.isRunningReactions=!0;for(var e=z.pendingReactions,t=0;e.length>0;){++t===QD&&(console.error("[mobx] cycle in reaction: "+e[0]),e.splice(0));for(var n=e.splice(0),r=0,s=n.length;r<s;r++)n[r].runReaction_()}z.isRunningReactions=!1}var $d=ki("Reaction",Rr);function eL(e){var t=N_;N_=function(r){return e(function(){return t(r)})}}function tl(){return!1}function X9(e){return console.warn("[mobx.spy] Is a no-op in production builds"),function(){}}var e8="action",tL="action.bound",t8="autoAction",nL="autoAction.bound",n8="<unnamed action>",R_=Vl(e8),rL=Vl(tL,{bound:!0}),P_=Vl(t8,{autoAction:!0}),sL=Vl(nL,{autoAction:!0,bound:!0});function r8(e){var t=function(r,s){if(Wn(r))return vi(r.name||n8,r,e);if(Wn(s))return vi(r,s,e);if(Hl(s))return(e?P_:R_).decorate_20223_(r,s);if(mo(s))return Gl(r,s,e?P_:R_);if(mo(r))return Ar(Vl(e?t8:e8,{name:r,autoAction:e}))};return t}var ri=r8(!1);Object.assign(ri,R_);var qa=r8(!0);Object.assign(qa,P_);ri.bound=Ar(rL);qa.bound=Ar(sL);function Wd(e){return G9(e.name||n8,!1,e,this,void 0)}function Ga(e){return Wn(e)&&e.isMobxAction===!0}function sh(e,t){var n,r,s,i;t===void 0&&(t=wy);var o=(n=(r=t)==null?void 0:r.name)!=null?n:"Autorun",a=!t.scheduler&&!t.delay,c;if(a)c=new Rr(o,function(){this.track(d)},t.onError,t.requiresObservable);else{var l=s8(t),u=!1;c=new Rr(o,function(){u||(u=!0,l(function(){u=!1,c.isDisposed||c.track(d)}))},t.onError,t.requiresObservable)}function d(){e(c)}return(s=t)!=null&&(s=s.signal)!=null&&s.aborted||c.schedule_(),c.getDisposer_((i=t)==null?void 0:i.signal)}var iL=function(t){return t()};function s8(e){return e.scheduler?e.scheduler:e.delay?function(t){return setTimeout(t,e.delay)}:iL}function oL(e,t,n){var r,s,i;n===void 0&&(n=wy);var o=(r=n.name)!=null?r:"Reaction",a=ri(o,n.onError?aL(n.onError,t):t),c=!n.scheduler&&!n.delay,l=s8(n),u=!0,d=!1,f,h=n.compareStructural?go.structural:n.equals||go.default,g=new Rr(o,function(){u||c?_():d||(d=!0,l(_))},n.onError,n.requiresObservable);function _(){if(d=!1,!g.isDisposed){var v=!1,y=f;g.track(function(){var C=Ty(!1,function(){return e(g)});v=u||!h(f,C),f=C}),(u&&n.fireImmediately||!u&&v)&&a(f,y,g),u=!1}}return(s=n)!=null&&(s=s.signal)!=null&&s.aborted||g.schedule_(),g.getDisposer_((i=n)==null?void 0:i.signal)}function aL(e,t){return function(){try{return t.apply(this,arguments)}catch(n){e.call(this,n)}}}var cL="onBO",lL="onBUO";function i8(e,t,n){return o8(cL,e,t,n)}function ky(e,t,n){return o8(lL,e,t,n)}function o8(e,t,n,r){var s=typeof r=="function"?Ds(t,n):Ds(t),i=Wn(r)?r:n,o=e+"L";return s[o]?s[o].add(i):s[o]=new Set([i]),function(){var a=s[o];a&&(a.delete(i),a.size===0&&delete s[o])}}var uL="never",Pu="always",dL="observed";function a8(e){e.isolateGlobalState===!0&&HD();var t=e.useProxies,n=e.enforceActions;if(t!==void 0&&(z.useProxies=t===Pu?!0:t===uL?!1:typeof Proxy<"u"),t==="ifavailable"&&(z.verifyProxies=!0),n!==void 0){var r=n===Pu?Pu:n===dL;z.enforceActions=r,z.allowStateChanges=!(r===!0||r===Pu)}["computedRequiresReaction","reactionRequiresObservable","observableRequiresReaction","disableErrorBoundaries","safeDescriptors"].forEach(function(s){s in e&&(z[s]=!!e[s])}),z.allowStateReads=!z.observableRequiresReaction,e.reactionScheduler&&eL(e.reactionScheduler)}function Ay(e,t,n,r){var s=GP(t);return Mi(function(){var i=Po(e,r)[ae];Ba(s).forEach(function(o){i.extend_(o,s[o],n&&o in n?n[o]:!0)})}),e}function c8(e,t){return l8(Ds(e,t))}function l8(e){var t={name:e.name_};return e.observing_&&e.observing_.length>0&&(t.dependencies=hL(e.observing_).map(l8)),t}function fL(e,t){return u8(Ds(e,t))}function u8(e){var t={name:e.name_};return $D(e)&&(t.observers=Array.from(WD(e)).map(u8)),t}function hL(e){return Array.from(new Set(e))}var pL=0;function ih(){this.message="FLOW_CANCELLED"}ih.prototype=Object.create(Error.prototype);function mL(e){return e instanceof ih}var gp=D9("flow"),gL=D9("flow.bound",{bound:!0}),yo=Object.assign(function(t,n){if(Hl(n))return gp.decorate_20223_(t,n);if(mo(n))return Gl(t,n,gp);var r=t,s=r.name||"<unnamed flow>",i=function(){var a=this,c=arguments,l=++pL,u=ri(s+" - runid: "+l+" - init",r).apply(a,c),d,f=void 0,h=new Promise(function(g,_){var v=0;d=_;function y(b){f=void 0;var S;try{S=ri(s+" - runid: "+l+" - yield "+v++,u.next).call(u,b)}catch(w){return _(w)}E(S)}function C(b){f=void 0;var S;try{S=ri(s+" - runid: "+l+" - yield "+v++,u.throw).call(u,b)}catch(w){return _(w)}E(S)}function E(b){if(Wn(b?.then)){b.then(E,_);return}return b.done?g(b.value):(f=Promise.resolve(b.value),f.then(y,C))}y(void 0)});return h.cancel=ri(s+" - runid: "+l+" - cancel",function(){try{f&&ZC(f);var g=u.return(void 0),_=Promise.resolve(g.value);_.then(va,va),ZC(_),d(new ih)}catch(v){d(v)}}),h};return i.isMobXFlow=!0,i},gp);yo.bound=Ar(gL);function ZC(e){Wn(e.cancel)&&e.cancel()}function _L(e){return e}function Ha(e){return e?.isMobXFlow===!0}function vL(e,t,n){var r;return sn(e)||Pn(e)||Oy(e)?r=Ls(e):nn(e)&&(r=Ls(e,t)),r.dehancer=typeof t=="function"?t:n,function(){r.dehancer=void 0}}function yL(e,t,n){return Wn(n)?bL(e,t,n):CL(e,t)}function CL(e,t){return Ls(e).intercept_(t)}function bL(e,t,n){return Ls(e,t).intercept_(n)}function d8(e,t){if(t===void 0)return vo(e);if(nn(e)===!1||!e[ae].values_.has(t))return!1;var n=Ds(e,t);return vo(n)}function SL(e){return d8(e)}function wL(e,t){return d8(e,t)}function f8(e,t){return e?t!==void 0?nn(e)?e[ae].values_.has(t):!1:nn(e)||!!e[ae]||Ey(e)||$d(e)||vo(e):!1}function oh(e){return f8(e)}function EL(e,t){return f8(e,t)}function gl(e){if(nn(e))return e[ae].keys_();if(sn(e)||Lt(e))return Array.from(e.keys());if(Pn(e))return e.map(function(t,n){return n});Me(5)}function xL(e){if(nn(e))return gl(e).map(function(t){return e[t]});if(sn(e))return gl(e).map(function(t){return e.get(t)});if(Lt(e))return Array.from(e.values());if(Pn(e))return e.slice();Me(6)}function TL(e){if(nn(e))return gl(e).map(function(t){return[t,e[t]]});if(sn(e))return gl(e).map(function(t){return[t,e.get(t)]});if(Lt(e))return Array.from(e.entries());if(Pn(e))return e.map(function(t,n){return[n,t]});Me(7)}function h8(e,t,n){if(arguments.length===2&&!Lt(e)){kn();var r=t;try{for(var s in r)h8(e,s,r[s])}finally{An()}return}nn(e)?e[ae].set_(t,n):sn(e)?e.set(t,n):Lt(e)?e.add(t):Pn(e)?(typeof t!="number"&&(t=parseInt(t,10)),t<0&&Me("Invalid index: '"+t+"'"),kn(),t>=e.length&&(e.length=t+1),e[t]=n,An()):Me(8)}function OL(e,t){nn(e)?e[ae].delete_(t):sn(e)||Lt(e)?e.delete(t):Pn(e)?(typeof t!="number"&&(t=parseInt(t,10)),e.splice(t,1)):Me(9)}function p8(e,t){if(nn(e))return e[ae].has_(t);if(sn(e))return e.has(t);if(Lt(e))return e.has(t);if(Pn(e))return t>=0&&t<e.length;Me(10)}function kL(e,t){if(p8(e,t)){if(nn(e))return e[ae].get_(t);if(sn(e))return e.get(t);if(Pn(e))return e[t];Me(11)}}function AL(e,t,n){if(nn(e))return e[ae].defineProperty_(t,n);Me(39)}function m8(e){if(nn(e))return e[ae].ownKeys_();Me(38)}function ML(e,t,n,r){return Wn(n)?NL(e,t,n,r):IL(e,t,n)}function IL(e,t,n){return Ls(e).observe_(t,n)}function NL(e,t,n,r){return Ls(e,t).observe_(n,r)}function Du(e,t,n){return e.set(t,n),n}function la(e,t){if(e==null||typeof e!="object"||e instanceof Date||!oh(e))return e;if(Oy(e)||vo(e))return la(e.get(),t);if(t.has(e))return t.get(e);if(Pn(e)){var n=Du(t,e,new Array(e.length));return e.forEach(function(o,a){n[a]=la(o,t)}),n}if(Lt(e)){var r=Du(t,e,new Set);return e.forEach(function(o){r.add(la(o,t))}),r}if(sn(e)){var s=Du(t,e,new Map);return e.forEach(function(o,a){s.set(a,la(o,t))}),s}else{var i=Du(t,e,{});return m8(e).forEach(function(o){Bl.propertyIsEnumerable.call(e,o)&&(i[o]=la(e[o],t))}),i}}function RL(e,t){return la(e,new Map)}function PL(){}function es(e,t){t===void 0&&(t=void 0),kn();try{return e.apply(t)}finally{An()}}function g8(e,t,n){return arguments.length===1||t&&typeof t=="object"?DL(e,t):_8(e,t,n||{})}function _8(e,t,n){var r;if(typeof n.timeout=="number"){var s=new Error("WHEN_TIMEOUT");r=setTimeout(function(){if(!o[ae].isDisposed)if(o(),n.onError)n.onError(s);else throw s},n.timeout)}n.name="When";var i=vi("When-effect",t),o=sh(function(a){var c=Ty(!1,e);c&&(a.dispose(),r&&clearTimeout(r),i())},n);return o}function DL(e,t){var n;if(t!=null&&(n=t.signal)!=null&&n.aborted)return Object.assign(Promise.reject(new Error("WHEN_ABORTED")),{cancel:function(){return null}});var r,s,i=new Promise(function(o,a){var c,l=_8(e,o,_i({},t,{onError:a}));r=function(){l(),a(new Error("WHEN_CANCELLED"))},s=function(){l(),a(new Error("WHEN_ABORTED"))},t==null||(c=t.signal)==null||c.addEventListener==null||c.addEventListener("abort",s)}).finally(function(){var o;return t==null||(o=t.signal)==null||o.removeEventListener==null?void 0:o.removeEventListener("abort",s)});return i.cancel=r,i}function Wo(e){return e[ae]}var LL={has:function(t,n){return Wo(t).has_(n)},get:function(t,n){return Wo(t).get_(n)},set:function(t,n,r){var s;return mo(n)?(s=Wo(t).set_(n,r,!0))!=null?s:!0:!1},deleteProperty:function(t,n){var r;return mo(n)?(r=Wo(t).delete_(n,!0))!=null?r:!0:!1},defineProperty:function(t,n,r){var s;return(s=Wo(t).defineProperty_(n,r))!=null?s:!0},ownKeys:function(t){return Wo(t).ownKeys_()},preventExtensions:function(t){Me(13)}};function FL(e,t){var n,r;return T9(),e=Po(e,t),(r=(n=e[ae]).proxy_)!=null?r:n.proxy_=new Proxy(e,LL)}function rr(e){return e.interceptors_!==void 0&&e.interceptors_.length>0}function zl(e,t){var n=e.interceptors_||(e.interceptors_=[]);return n.push(t),O9(function(){var r=n.indexOf(t);r!==-1&&n.splice(r,1)})}function sr(e,t){var n=Ro();try{for(var r=[].concat(e.interceptors_||[]),s=0,i=r.length;s<i&&(t=r[s](t),t&&!t.type&&Me(14),!!t);s++);return t}finally{As(n)}}function Mr(e){return e.changeListeners_!==void 0&&e.changeListeners_.length>0}function $l(e,t){var n=e.changeListeners_||(e.changeListeners_=[]);return n.push(t),O9(function(){var r=n.indexOf(t);r!==-1&&n.splice(r,1)})}function Ir(e,t){var n=Ro(),r=e.changeListeners_;if(r){r=r.slice();for(var s=0,i=r.length;s<i;s++)r[s](t);As(n)}}function v8(e,t,n){return Mi(function(){var r,s=Po(e,n)[ae];(r=t)!=null||(t=WP(e)),Ba(t).forEach(function(i){return s.make_(i,t[i])})}),e}var _p=Symbol("mobx-keys");function jL(e,t,n){return Ps(e)?Ay(e,e,t,n):(Mi(function(){var r=Po(e,n)[ae];if(!e[_p]){var s=Object.getPrototypeOf(e),i=new Set([].concat(Ba(e),Ba(s)));i.delete("constructor"),i.delete(ae),ql(s,_p,i)}e[_p].forEach(function(o){return r.make_(o,t&&o in t?t[o]:!0)})}),e)}var JC="splice",as="update",UL=1e4,BL={get:function(t,n){var r=t[ae];return n===ae?r:n==="length"?r.getArrayLength_():typeof n=="string"&&!isNaN(n)?r.get_(parseInt(n)):ks(Kd,n)?Kd[n]:t[n]},set:function(t,n,r){var s=t[ae];return n==="length"&&s.setArrayLength_(r),typeof n=="symbol"||isNaN(n)?t[n]=r:s.set_(parseInt(n),r),!0},preventExtensions:function(){Me(15)}},My=function(){function e(n,r,s,i){n===void 0&&(n="ObservableArray"),this.owned_=void 0,this.legacyMode_=void 0,this.atom_=void 0,this.values_=[],this.interceptors_=void 0,this.changeListeners_=void 0,this.enhancer_=void 0,this.dehancer=void 0,this.proxy_=void 0,this.lastKnownLength_=0,this.owned_=s,this.legacyMode_=i,this.atom_=new Ai(n),this.enhancer_=function(o,a){return r(o,a,"ObservableArray[..]")}}var t=e.prototype;return t.dehanceValue_=function(r){return this.dehancer!==void 0?this.dehancer(r):r},t.dehanceValues_=function(r){return this.dehancer!==void 0&&r.length>0?r.map(this.dehancer):r},t.intercept_=function(r){return zl(this,r)},t.observe_=function(r,s){return s===void 0&&(s=!1),s&&r({observableKind:"array",object:this.proxy_,debugObjectName:this.atom_.name_,type:"splice",index:0,added:this.values_.slice(),addedCount:this.values_.length,removed:[],removedCount:0}),$l(this,r)},t.getArrayLength_=function(){return this.atom_.reportObserved(),this.values_.length},t.setArrayLength_=function(r){(typeof r!="number"||isNaN(r)||r<0)&&Me("Out of range: "+r);var s=this.values_.length;if(r!==s)if(r>s){for(var i=new Array(r-s),o=0;o<r-s;o++)i[o]=void 0;this.spliceWithArray_(s,0,i)}else this.spliceWithArray_(r,s-r)},t.updateArrayLength_=function(r,s){r!==this.lastKnownLength_&&Me(16),this.lastKnownLength_+=s,this.legacyMode_&&s>0&&w8(r+s+1)},t.spliceWithArray_=function(r,s,i){var o=this;this.atom_;var a=this.values_.length;if(r===void 0?r=0:r>a?r=a:r<0&&(r=Math.max(0,a+r)),arguments.length===1?s=a-r:s==null?s=0:s=Math.max(0,Math.min(s,a-r)),i===void 0&&(i=T_),rr(this)){var c=sr(this,{object:this.proxy_,type:JC,index:r,removedCount:s,added:i});if(!c)return T_;s=c.removedCount,i=c.added}if(i=i.length===0?i:i.map(function(d){return o.enhancer_(d,void 0)}),this.legacyMode_){var l=i.length-s;this.updateArrayLength_(a,l)}var u=this.spliceItemsIntoValues_(r,s,i);return(s!==0||i.length!==0)&&this.notifyArraySplice_(r,i,u),this.dehanceValues_(u)},t.spliceItemsIntoValues_=function(r,s,i){if(i.length<UL){var o;return(o=this.values_).splice.apply(o,[r,s].concat(i))}else{var a=this.values_.slice(r,r+s),c=this.values_.slice(r+s);this.values_.length+=i.length-s;for(var l=0;l<i.length;l++)this.values_[r+l]=i[l];for(var u=0;u<c.length;u++)this.values_[r+i.length+u]=c[u];return a}},t.notifyArrayChildUpdate_=function(r,s,i){var o=!this.owned_&&tl(),a=Mr(this),c=a||o?{observableKind:"array",object:this.proxy_,type:as,debugObjectName:this.atom_.name_,index:r,newValue:s,oldValue:i}:null;this.atom_.reportChanged(),a&&Ir(this,c)},t.notifyArraySplice_=function(r,s,i){var o=!this.owned_&&tl(),a=Mr(this),c=a||o?{observableKind:"array",object:this.proxy_,debugObjectName:this.atom_.name_,type:JC,index:r,removed:i,added:s,removedCount:i.length,addedCount:s.length}:null;this.atom_.reportChanged(),a&&Ir(this,c)},t.get_=function(r){if(this.legacyMode_&&r>=this.values_.length){console.warn("[mobx] Out of bounds read: "+r);return}return this.atom_.reportObserved(),this.dehanceValue_(this.values_[r])},t.set_=function(r,s){var i=this.values_;if(this.legacyMode_&&r>i.length&&Me(17,r,i.length),r<i.length){this.atom_;var o=i[r];if(rr(this)){var a=sr(this,{type:as,object:this.proxy_,index:r,newValue:s});if(!a)return;s=a.newValue}s=this.enhancer_(s,o);var c=s!==o;c&&(i[r]=s,this.notifyArrayChildUpdate_(r,s,o))}else{for(var l=new Array(r+1-i.length),u=0;u<l.length-1;u++)l[u]=void 0;l[l.length-1]=s,this.spliceWithArray_(i.length,0,l)}},e}();function qL(e,t,n,r){return n===void 0&&(n="ObservableArray"),r===void 0&&(r=!1),T9(),Mi(function(){var s=new My(n,t,r,!1);A9(s.values_,ae,s);var i=new Proxy(s.values_,BL);return s.proxy_=i,e&&e.length&&s.spliceWithArray_(0,0,e),i})}var Kd={clear:function(){return this.splice(0)},replace:function(t){var n=this[ae];return n.spliceWithArray_(0,n.values_.length,t)},toJSON:function(){return this.slice()},splice:function(t,n){for(var r=arguments.length,s=new Array(r>2?r-2:0),i=2;i<r;i++)s[i-2]=arguments[i];var o=this[ae];switch(arguments.length){case 0:return[];case 1:return o.spliceWithArray_(t);case 2:return o.spliceWithArray_(t,n)}return o.spliceWithArray_(t,n,s)},spliceWithArray:function(t,n,r){return this[ae].spliceWithArray_(t,n,r)},push:function(){for(var t=this[ae],n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return t.spliceWithArray_(t.values_.length,0,r),t.values_.length},pop:function(){return this.splice(Math.max(this[ae].values_.length-1,0),1)[0]},shift:function(){return this.splice(0,1)[0]},unshift:function(){for(var t=this[ae],n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return t.spliceWithArray_(0,0,r),t.values_.length},reverse:function(){return z.trackingDerivation&&Me(37,"reverse"),this.replace(this.slice().reverse()),this},sort:function(){z.trackingDerivation&&Me(37,"sort");var t=this.slice();return t.sort.apply(t,arguments),this.replace(t),this},remove:function(t){var n=this[ae],r=n.dehanceValues_(n.values_).indexOf(t);return r>-1?(this.splice(r,1),!0):!1}};dt("at",Jn);dt("concat",Jn);dt("flat",Jn);dt("includes",Jn);dt("indexOf",Jn);dt("join",Jn);dt("lastIndexOf",Jn);dt("slice",Jn);dt("toString",Jn);dt("toLocaleString",Jn);dt("toSorted",Jn);dt("toSpliced",Jn);dt("with",Jn);dt("every",Br);dt("filter",Br);dt("find",Br);dt("findIndex",Br);dt("findLast",Br);dt("findLastIndex",Br);dt("flatMap",Br);dt("forEach",Br);dt("map",Br);dt("some",Br);dt("toReversed",Br);dt("reduce",y8);dt("reduceRight",y8);function dt(e,t){typeof Array.prototype[e]=="function"&&(Kd[e]=t(e))}function Jn(e){return function(){var t=this[ae];t.atom_.reportObserved();var n=t.dehanceValues_(t.values_);return n[e].apply(n,arguments)}}function Br(e){return function(t,n){var r=this,s=this[ae];s.atom_.reportObserved();var i=s.dehanceValues_(s.values_);return i[e](function(o,a){return t.call(n,o,a,r)})}}function y8(e){return function(){var t=this,n=this[ae];n.atom_.reportObserved();var r=n.dehanceValues_(n.values_),s=arguments[0];return arguments[0]=function(i,o,a){return s(i,o,a,t)},r[e].apply(r,arguments)}}var GL=ki("ObservableArrayAdministration",My);function Pn(e){return Zf(e)&&GL(e[ae])}var HL={},si="add",Yd="delete",Iy=function(){function e(n,r,s){var i=this;r===void 0&&(r=_o),s===void 0&&(s="ObservableMap"),this.enhancer_=void 0,this.name_=void 0,this[ae]=HL,this.data_=void 0,this.hasMap_=void 0,this.keysAtom_=void 0,this.interceptors_=void 0,this.changeListeners_=void 0,this.dehancer=void 0,this.enhancer_=r,this.name_=s,Wn(Map)||Me(18),Mi(function(){i.keysAtom_=Jf("ObservableMap.keys()"),i.data_=new Map,i.hasMap_=new Map,n&&i.merge(n)})}var t=e.prototype;return t.has_=function(r){return this.data_.has(r)},t.has=function(r){var s=this;if(!z.trackingDerivation)return this.has_(r);var i=this.hasMap_.get(r);if(!i){var o=i=new di(this.has_(r),Qf,"ObservableMap.key?",!1);this.hasMap_.set(r,o),ky(o,function(){return s.hasMap_.delete(r)})}return i.get()},t.set=function(r,s){var i=this.has_(r);if(rr(this)){var o=sr(this,{type:i?as:si,object:this,newValue:s,name:r});if(!o)return this;s=o.newValue}return i?this.updateValue_(r,s):this.addValue_(r,s),this},t.delete=function(r){var s=this;if(this.keysAtom_,rr(this)){var i=sr(this,{type:Yd,object:this,name:r});if(!i)return!1}if(this.has_(r)){var o=tl(),a=Mr(this),c=a||o?{observableKind:"map",debugObjectName:this.name_,type:Yd,object:this,oldValue:this.data_.get(r).value_,name:r}:null;return es(function(){var l;s.keysAtom_.reportChanged(),(l=s.hasMap_.get(r))==null||l.setNewValue_(!1);var u=s.data_.get(r);u.setNewValue_(void 0),s.data_.delete(r)}),a&&Ir(this,c),!0}return!1},t.updateValue_=function(r,s){var i=this.data_.get(r);if(s=i.prepareNewValue_(s),s!==z.UNCHANGED){var o=tl(),a=Mr(this),c=a||o?{observableKind:"map",debugObjectName:this.name_,type:as,object:this,oldValue:i.value_,name:r,newValue:s}:null;i.setNewValue_(s),a&&Ir(this,c)}},t.addValue_=function(r,s){var i=this;this.keysAtom_,es(function(){var l,u=new di(s,i.enhancer_,"ObservableMap.key",!1);i.data_.set(r,u),s=u.value_,(l=i.hasMap_.get(r))==null||l.setNewValue_(!0),i.keysAtom_.reportChanged()});var o=tl(),a=Mr(this),c=a||o?{observableKind:"map",debugObjectName:this.name_,type:si,object:this,name:r,newValue:s}:null;a&&Ir(this,c)},t.get=function(r){return this.has(r)?this.dehanceValue_(this.data_.get(r).get()):this.dehanceValue_(void 0)},t.dehanceValue_=function(r){return this.dehancer!==void 0?this.dehancer(r):r},t.keys=function(){return this.keysAtom_.reportObserved(),this.data_.keys()},t.values=function(){var r=this,s=this.keys();return QC({next:function(){var o=s.next(),a=o.done,c=o.value;return{done:a,value:a?void 0:r.get(c)}}})},t.entries=function(){var r=this,s=this.keys();return QC({next:function(){var o=s.next(),a=o.done,c=o.value;return{done:a,value:a?void 0:[c,r.get(c)]}}})},t[Symbol.iterator]=function(){return this.entries()},t.forEach=function(r,s){for(var i=ya(this),o;!(o=i()).done;){var a=o.value,c=a[0],l=a[1];r.call(s,l,c,this)}},t.merge=function(r){var s=this;return sn(r)&&(r=new Map(r)),es(function(){Ps(r)?qP(r).forEach(function(i){return s.set(i,r[i])}):Array.isArray(r)?r.forEach(function(i){var o=i[0],a=i[1];return s.set(o,a)}):oc(r)?(BP(r)||Me(19,r),r.forEach(function(i,o){return s.set(o,i)})):r!=null&&Me(20,r)}),this},t.clear=function(){var r=this;es(function(){nh(function(){for(var s=ya(r.keys()),i;!(i=s()).done;){var o=i.value;r.delete(o)}})})},t.replace=function(r){var s=this;return es(function(){for(var i=VL(r),o=new Map,a=!1,c=ya(s.data_.keys()),l;!(l=c()).done;){var u=l.value;if(!i.has(u)){var d=s.delete(u);if(d)a=!0;else{var f=s.data_.get(u);o.set(u,f)}}}for(var h=ya(i.entries()),g;!(g=h()).done;){var _=g.value,v=_[0],y=_[1],C=s.data_.has(v);if(s.set(v,y),s.data_.has(v)){var E=s.data_.get(v);o.set(v,E),C||(a=!0)}}if(!a)if(s.data_.size!==o.size)s.keysAtom_.reportChanged();else for(var b=s.data_.keys(),S=o.keys(),w=b.next(),x=S.next();!w.done;){if(w.value!==x.value){s.keysAtom_.reportChanged();break}w=b.next(),x=S.next()}s.data_=o}),this},t.toString=function(){return"[object ObservableMap]"},t.toJSON=function(){return Array.from(this)},t.observe_=function(r,s){return $l(this,r)},t.intercept_=function(r){return zl(this,r)},ac(e,[{key:"size",get:function(){return this.keysAtom_.reportObserved(),this.data_.size}},{key:Symbol.toStringTag,get:function(){return"Map"}}])}(),sn=ki("ObservableMap",Iy);function QC(e){return e[Symbol.toStringTag]="MapIterator",Dy(e)}function VL(e){if(oc(e)||sn(e))return e;if(Array.isArray(e))return new Map(e);if(Ps(e)){var t=new Map;for(var n in e)t.set(n,e[n]);return t}else return Me(21,e)}var zL={},Ny=function(){function e(n,r,s){var i=this;r===void 0&&(r=_o),s===void 0&&(s="ObservableSet"),this.name_=void 0,this[ae]=zL,this.data_=new Set,this.atom_=void 0,this.changeListeners_=void 0,this.interceptors_=void 0,this.dehancer=void 0,this.enhancer_=void 0,this.name_=s,Wn(Set)||Me(22),this.enhancer_=function(o,a){return r(o,a,s)},Mi(function(){i.atom_=Jf(i.name_),n&&i.replace(n)})}var t=e.prototype;return t.dehanceValue_=function(r){return this.dehancer!==void 0?this.dehancer(r):r},t.clear=function(){var r=this;es(function(){nh(function(){for(var s=ya(r.data_.values()),i;!(i=s()).done;){var o=i.value;r.delete(o)}})})},t.forEach=function(r,s){for(var i=ya(this),o;!(o=i()).done;){var a=o.value;r.call(s,a,a,this)}},t.add=function(r){var s=this;if(this.atom_,rr(this)){var i=sr(this,{type:si,object:this,newValue:r});if(!i)return this;r=i.newValue}if(!this.has(r)){es(function(){s.data_.add(s.enhancer_(r,void 0)),s.atom_.reportChanged()});var o=!1,a=Mr(this),c=a||o?{observableKind:"set",debugObjectName:this.name_,type:si,object:this,newValue:r}:null;a&&Ir(this,c)}return this},t.delete=function(r){var s=this;if(rr(this)){var i=sr(this,{type:Yd,object:this,oldValue:r});if(!i)return!1}if(this.has(r)){var o=!1,a=Mr(this),c=a||o?{observableKind:"set",debugObjectName:this.name_,type:Yd,object:this,oldValue:r}:null;return es(function(){s.atom_.reportChanged(),s.data_.delete(r)}),a&&Ir(this,c),!0}return!1},t.has=function(r){return this.atom_.reportObserved(),this.data_.has(this.dehanceValue_(r))},t.entries=function(){var r=this.values();return XC({next:function(){var i=r.next(),o=i.value,a=i.done;return a?{value:void 0,done:a}:{value:[o,o],done:a}}})},t.keys=function(){return this.values()},t.values=function(){this.atom_.reportObserved();var r=this,s=this.data_.values();return XC({next:function(){var o=s.next(),a=o.value,c=o.done;return c?{value:void 0,done:c}:{value:r.dehanceValue_(a),done:c}}})},t.intersection=function(r){if(Ts(r)&&!Lt(r))return r.intersection(this);var s=new Set(this);return s.intersection(r)},t.union=function(r){if(Ts(r)&&!Lt(r))return r.union(this);var s=new Set(this);return s.union(r)},t.difference=function(r){return new Set(this).difference(r)},t.symmetricDifference=function(r){if(Ts(r)&&!Lt(r))return r.symmetricDifference(this);var s=new Set(this);return s.symmetricDifference(r)},t.isSubsetOf=function(r){return new Set(this).isSubsetOf(r)},t.isSupersetOf=function(r){return new Set(this).isSupersetOf(r)},t.isDisjointFrom=function(r){if(Ts(r)&&!Lt(r))return r.isDisjointFrom(this);var s=new Set(this);return s.isDisjointFrom(r)},t.replace=function(r){var s=this;return Lt(r)&&(r=new Set(r)),es(function(){Array.isArray(r)?(s.clear(),r.forEach(function(i){return s.add(i)})):Ts(r)?(s.clear(),r.forEach(function(i){return s.add(i)})):r!=null&&Me("Cannot initialize set from "+r)}),this},t.observe_=function(r,s){return $l(this,r)},t.intercept_=function(r){return zl(this,r)},t.toJSON=function(){return Array.from(this)},t.toString=function(){return"[object ObservableSet]"},t[Symbol.iterator]=function(){return this.values()},ac(e,[{key:"size",get:function(){return this.atom_.reportObserved(),this.data_.size}},{key:Symbol.toStringTag,get:function(){return"Set"}}])}(),Lt=ki("ObservableSet",Ny);function XC(e){return e[Symbol.toStringTag]="SetIterator",Dy(e)}var eb=Object.create(null),tb="remove",C8=function(){function e(n,r,s,i){r===void 0&&(r=new Map),i===void 0&&(i=SD),this.target_=void 0,this.values_=void 0,this.name_=void 0,this.defaultAnnotation_=void 0,this.keysAtom_=void 0,this.changeListeners_=void 0,this.interceptors_=void 0,this.proxy_=void 0,this.isPlainObject_=void 0,this.appliedAnnotations_=void 0,this.pendingKeys_=void 0,this.target_=n,this.values_=r,this.name_=s,this.defaultAnnotation_=i,this.keysAtom_=new Ai("ObservableObject.keys"),this.isPlainObject_=Ps(this.target_)}var t=e.prototype;return t.getObservablePropValue_=function(r){return this.values_.get(r).get()},t.setObservablePropValue_=function(r,s){var i=this.values_.get(r);if(i instanceof Nr)return i.set(s),!0;if(rr(this)){var o=sr(this,{type:as,object:this.proxy_||this.target_,name:r,newValue:s});if(!o)return null;s=o.newValue}if(s=i.prepareNewValue_(s),s!==z.UNCHANGED){var a=Mr(this),c=!1,l=a||c?{type:as,observableKind:"object",debugObjectName:this.name_,object:this.proxy_||this.target_,oldValue:i.value_,name:r,newValue:s}:null;i.setNewValue_(s),a&&Ir(this,l)}return!0},t.get_=function(r){return z.trackingDerivation&&!ks(this.target_,r)&&this.has_(r),this.target_[r]},t.set_=function(r,s,i){return i===void 0&&(i=!1),ks(this.target_,r)?this.values_.has(r)?this.setObservablePropValue_(r,s):i?Reflect.set(this.target_,r,s):(this.target_[r]=s,!0):this.extend_(r,{value:s,enumerable:!0,writable:!0,configurable:!0},this.defaultAnnotation_,i)},t.has_=function(r){if(!z.trackingDerivation)return r in this.target_;this.pendingKeys_||(this.pendingKeys_=new Map);var s=this.pendingKeys_.get(r);return s||(s=new di(r in this.target_,Qf,"ObservableObject.key?",!1),this.pendingKeys_.set(r,s)),s.get()},t.make_=function(r,s){if(s===!0&&(s=this.defaultAnnotation_),s!==!1){if(!(r in this.target_)){var i;if((i=this.target_[ns])!=null&&i[r])return;Me(1,s.annotationType_,this.name_+"."+r.toString())}for(var o=this.target_;o&&o!==Bl;){var a=Gd(o,r);if(a){var c=s.make_(this,r,a,o);if(c===0)return;if(c===1)break}o=Object.getPrototypeOf(o)}rb(this,s,r)}},t.extend_=function(r,s,i,o){if(o===void 0&&(o=!1),i===!0&&(i=this.defaultAnnotation_),i===!1)return this.defineProperty_(r,s,o);var a=i.extend_(this,r,s,o);return a&&rb(this,i,r),a},t.defineProperty_=function(r,s,i){i===void 0&&(i=!1),this.keysAtom_;try{kn();var o=this.delete_(r);if(!o)return o;if(rr(this)){var a=sr(this,{object:this.proxy_||this.target_,name:r,type:si,newValue:s.value});if(!a)return null;var c=a.newValue;s.value!==c&&(s=_i({},s,{value:c}))}if(i){if(!Reflect.defineProperty(this.target_,r,s))return!1}else is(this.target_,r,s);this.notifyPropertyAddition_(r,s.value)}finally{An()}return!0},t.defineObservableProperty_=function(r,s,i,o){o===void 0&&(o=!1),this.keysAtom_;try{kn();var a=this.delete_(r);if(!a)return a;if(rr(this)){var c=sr(this,{object:this.proxy_||this.target_,name:r,type:si,newValue:s});if(!c)return null;s=c.newValue}var l=nb(r),u={configurable:z.safeDescriptors?this.isPlainObject_:!0,enumerable:!0,get:l.get,set:l.set};if(o){if(!Reflect.defineProperty(this.target_,r,u))return!1}else is(this.target_,r,u);var d=new di(s,i,"ObservableObject.key",!1);this.values_.set(r,d),this.notifyPropertyAddition_(r,d.value_)}finally{An()}return!0},t.defineComputedProperty_=function(r,s,i){i===void 0&&(i=!1),this.keysAtom_;try{kn();var o=this.delete_(r);if(!o)return o;if(rr(this)){var a=sr(this,{object:this.proxy_||this.target_,name:r,type:si,newValue:void 0});if(!a)return null}s.name||(s.name="ObservableObject.key"),s.context=this.proxy_||this.target_;var c=nb(r),l={configurable:z.safeDescriptors?this.isPlainObject_:!0,enumerable:!1,get:c.get,set:c.set};if(i){if(!Reflect.defineProperty(this.target_,r,l))return!1}else is(this.target_,r,l);this.values_.set(r,new Nr(s)),this.notifyPropertyAddition_(r,void 0)}finally{An()}return!0},t.delete_=function(r,s){if(s===void 0&&(s=!1),this.keysAtom_,!ks(this.target_,r))return!0;if(rr(this)){var i=sr(this,{object:this.proxy_||this.target_,name:r,type:tb});if(!i)return null}try{var o;kn();var a=Mr(this),c=!1,l=this.values_.get(r),u=void 0;if(!l&&(a||c)){var d;u=(d=Gd(this.target_,r))==null?void 0:d.value}if(s){if(!Reflect.deleteProperty(this.target_,r))return!1}else delete this.target_[r];if(l&&(this.values_.delete(r),l instanceof di&&(u=l.value_),J9(l)),this.keysAtom_.reportChanged(),(o=this.pendingKeys_)==null||(o=o.get(r))==null||o.set(r in this.target_),a||c){var f={type:tb,observableKind:"object",object:this.proxy_||this.target_,debugObjectName:this.name_,oldValue:u,name:r};a&&Ir(this,f)}}finally{An()}return!0},t.observe_=function(r,s){return $l(this,r)},t.intercept_=function(r){return zl(this,r)},t.notifyPropertyAddition_=function(r,s){var i,o=Mr(this),a=!1;if(o||a){var c=o||a?{type:si,observableKind:"object",debugObjectName:this.name_,object:this.proxy_||this.target_,name:r,newValue:s}:null;o&&Ir(this,c)}(i=this.pendingKeys_)==null||(i=i.get(r))==null||i.set(!0),this.keysAtom_.reportChanged()},t.ownKeys_=function(){return this.keysAtom_.reportObserved(),Ba(this.target_)},t.keys_=function(){return this.keysAtom_.reportObserved(),Object.keys(this.target_)},e}();function Po(e,t){var n;if(ks(e,ae))return e;var r=(n=t?.name)!=null?n:"ObservableObject",s=new C8(e,new Map,String(r),RD(t));return ql(e,ae,s),e}var $L=ki("ObservableObjectAdministration",C8);function nb(e){return eb[e]||(eb[e]={get:function(){return this[ae].getObservablePropValue_(e)},set:function(n){return this[ae].setObservablePropValue_(e,n)}})}function nn(e){return Zf(e)?$L(e[ae]):!1}function rb(e,t,n){var r;(r=e.target_[ns])==null||delete r[n]}var WL=S8(0),KL=function(){var e=!1,t={};return Object.defineProperty(t,"0",{set:function(){e=!0}}),Object.create(t)[0]=1,e===!1}(),vp=0,b8=function(){};function YL(e,t){Object.setPrototypeOf?Object.setPrototypeOf(e.prototype,t):e.prototype.__proto__!==void 0?e.prototype.__proto__=t:e.prototype=t}YL(b8,Array.prototype);var Ry=function(e){function t(r,s,i,o){var a;return i===void 0&&(i="ObservableArray"),o===void 0&&(o=!1),a=e.call(this)||this,Mi(function(){var c=new My(i,s,o,!0);c.proxy_=a,A9(a,ae,c),r&&r.length&&a.spliceWithArray(0,0,r),KL&&Object.defineProperty(a,"0",WL)}),a}N9(t,e);var n=t.prototype;return n.concat=function(){this[ae].atom_.reportObserved();for(var s=arguments.length,i=new Array(s),o=0;o<s;o++)i[o]=arguments[o];return Array.prototype.concat.apply(this.slice(),i.map(function(a){return Pn(a)?a.slice():a}))},n[Symbol.iterator]=function(){var r=this,s=0;return Dy({next:function(){return s<r.length?{value:r[s++],done:!1}:{done:!0,value:void 0}}})},ac(t,[{key:"length",get:function(){return this[ae].getArrayLength_()},set:function(s){this[ae].setArrayLength_(s)}},{key:Symbol.toStringTag,get:function(){return"Array"}}])}(b8);Object.entries(Kd).forEach(function(e){var t=e[0],n=e[1];t!=="concat"&&ql(Ry.prototype,t,n)});function S8(e){return{enumerable:!1,configurable:!0,get:function(){return this[ae].get_(e)},set:function(n){this[ae].set_(e,n)}}}function ZL(e){is(Ry.prototype,""+e,S8(e))}function w8(e){if(e>vp){for(var t=vp;t<e+100;t++)ZL(t);vp=e}}w8(1e3);function JL(e,t,n){return new Ry(e,t,n)}function Ds(e,t){if(typeof e=="object"&&e!==null){if(Pn(e))return t!==void 0&&Me(23),e[ae].atom_;if(Lt(e))return e.atom_;if(sn(e)){if(t===void 0)return e.keysAtom_;var n=e.data_.get(t)||e.hasMap_.get(t);return n||Me(25,t,Zd(e)),n}if(nn(e)){if(!t)return Me(26);var r=e[ae].values_.get(t);return r||Me(27,t,Zd(e)),r}if(Ey(e)||vo(e)||$d(e))return e}else if(Wn(e)&&$d(e[ae]))return e[ae];Me(28)}function Ls(e,t){if(e||Me(29),t!==void 0)return Ls(Ds(e,t));if(Ey(e)||vo(e)||$d(e)||sn(e)||Lt(e))return e;if(e[ae])return e[ae];Me(24,e)}function Zd(e,t){var n;if(t!==void 0)n=Ds(e,t);else{if(Ga(e))return e.name;nn(e)||sn(e)||Lt(e)?n=Ls(e):n=Ds(e)}return n.name_}function Mi(e){var t=Ro(),n=eh(!0);kn();try{return e()}finally{An(),th(n),As(t)}}var sb=Bl.toString;function Py(e,t,n){return n===void 0&&(n=-1),D_(e,t,n)}function D_(e,t,n,r,s){if(e===t)return e!==0||1/e===1/t;if(e==null||t==null)return!1;if(e!==e)return t!==t;var i=typeof e;if(i!=="function"&&i!=="object"&&typeof t!="object")return!1;var o=sb.call(e);if(o!==sb.call(t))return!1;switch(o){case"[object RegExp]":case"[object String]":return""+e==""+t;case"[object Number]":return+e!=+e?+t!=+t:+e==0?1/+e===1/t:+e==+t;case"[object Date]":case"[object Boolean]":return+e==+t;case"[object Symbol]":return typeof Symbol<"u"&&Symbol.valueOf.call(e)===Symbol.valueOf.call(t);case"[object Map]":case"[object Set]":n>=0&&n++;break}e=ib(e),t=ib(t);var a=o==="[object Array]";if(!a){if(typeof e!="object"||typeof t!="object")return!1;var c=e.constructor,l=t.constructor;if(c!==l&&!(Wn(c)&&c instanceof c&&Wn(l)&&l instanceof l)&&"constructor"in e&&"constructor"in t)return!1}if(n===0)return!1;n<0&&(n=-1),r=r||[],s=s||[];for(var u=r.length;u--;)if(r[u]===e)return s[u]===t;if(r.push(e),s.push(t),a){if(u=e.length,u!==t.length)return!1;for(;u--;)if(!D_(e[u],t[u],n-1,r,s))return!1}else{var d=Object.keys(e),f=d.length;if(Object.keys(t).length!==f)return!1;for(var h=0;h<f;h++){var g=d[h];if(!(ks(t,g)&&D_(e[g],t[g],n-1,r,s)))return!1}}return r.pop(),s.pop(),!0}function ib(e){return Pn(e)?e.slice():oc(e)||sn(e)||Ts(e)||Lt(e)?Array.from(e.entries()):e}var ob,QL=((ob=Yf().Iterator)==null?void 0:ob.prototype)||{};function Dy(e){return e[Symbol.iterator]=XL,Object.assign(Object.create(QL),e)}function XL(){return this}["Symbol","Map","Set"].forEach(function(e){var t=Yf();typeof t[e]>"u"&&Me("MobX requires global '"+e+"' to be available or polyfilled")});typeof __MOBX_DEVTOOLS_GLOBAL_HOOK__=="object"&&__MOBX_DEVTOOLS_GLOBAL_HOOK__.injectMobx({spy:X9,extras:{getDebugName:Zd},$mobx:ae});const g1e=Object.freeze(Object.defineProperty({__proto__:null,$mobx:ae,FlowCancellationError:ih,ObservableMap:Iy,ObservableSet:Ny,Reaction:Rr,_allowStateChanges:Ty,_allowStateChangesInsideComputed:Wd,_allowStateReadsEnd:xa,_allowStateReadsStart:rh,_autoAction:qa,_endAction:V9,_getAdministration:Ls,_getGlobalState:VD,_interceptReads:vL,_isComputingDerivation:BD,_resetGlobalState:zD,_startAction:H9,action:ri,autorun:sh,comparer:go,computed:cc,configure:a8,createAtom:Jf,defineProperty:AL,entries:TL,extendObservable:Ay,flow:yo,flowResult:_L,get:kL,getAtom:Ds,getDebugName:Zd,getDependencyTree:c8,getObserverTree:fL,has:p8,intercept:yL,isAction:Ga,isBoxedObservable:Oy,isComputed:SL,isComputedProp:wL,isFlow:Ha,isFlowCancellationError:mL,isObservable:oh,isObservableArray:Pn,isObservableMap:sn,isObservableObject:nn,isObservableProp:EL,isObservableSet:Lt,keys:gl,makeAutoObservable:jL,makeObservable:v8,observable:Dt,observe:ML,onBecomeObserved:i8,onBecomeUnobserved:ky,onReactionError:JD,override:eD,ownKeys:m8,reaction:oL,remove:OL,runInAction:Wd,set:h8,spy:X9,toJS:RL,trace:PL,transaction:es,untracked:nh,values:xL,when:g8},Symbol.toStringTag,{value:"Module"}));if(!m.useState)throw new Error("mobx-react-lite requires React with Hooks support");if(!v8)throw new Error("mobx-react-lite@3 requires mobx at least version 6 to be available");function eF(e){e()}function tF(e){e||(e=eF),a8({reactionScheduler:e})}function nF(e){return c8(e)}var rF=1e4,sF=1e4,iF=function(){function e(t){var n=this;Object.defineProperty(this,"finalize",{enumerable:!0,configurable:!0,writable:!0,value:t}),Object.defineProperty(this,"registrations",{enumerable:!0,configurable:!0,writable:!0,value:new Map}),Object.defineProperty(this,"sweepTimeout",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"sweep",{enumerable:!0,configurable:!0,writable:!0,value:function(r){r===void 0&&(r=rF),clearTimeout(n.sweepTimeout),n.sweepTimeout=void 0;var s=Date.now();n.registrations.forEach(function(i,o){s-i.registeredAt>=r&&(n.finalize(i.value),n.registrations.delete(o))}),n.registrations.size>0&&n.scheduleSweep()}}),Object.defineProperty(this,"finalizeAllImmediately",{enumerable:!0,configurable:!0,writable:!0,value:function(){n.sweep(0)}})}return Object.defineProperty(e.prototype,"register",{enumerable:!1,configurable:!0,writable:!0,value:function(t,n,r){this.registrations.set(r,{value:n,registeredAt:Date.now()}),this.scheduleSweep()}}),Object.defineProperty(e.prototype,"unregister",{enumerable:!1,configurable:!0,writable:!0,value:function(t){this.registrations.delete(t)}}),Object.defineProperty(e.prototype,"scheduleSweep",{enumerable:!1,configurable:!0,writable:!0,value:function(){this.sweepTimeout===void 0&&(this.sweepTimeout=setTimeout(this.sweep,sF))}}),e}(),oF=typeof FinalizationRegistry<"u"?FinalizationRegistry:iF,L_=new oF(function(e){var t;(t=e.reaction)===null||t===void 0||t.dispose(),e.reaction=null}),yp={exports:{}},Cp={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ab;function aF(){if(ab)return Cp;ab=1;var e=uy();function t(d,f){return d===f&&(d!==0||1/d===1/f)||d!==d&&f!==f}var n=typeof Object.is=="function"?Object.is:t,r=e.useState,s=e.useEffect,i=e.useLayoutEffect,o=e.useDebugValue;function a(d,f){var h=f(),g=r({inst:{value:h,getSnapshot:f}}),_=g[0].inst,v=g[1];return i(function(){_.value=h,_.getSnapshot=f,c(_)&&v({inst:_})},[d,h,f]),s(function(){return c(_)&&v({inst:_}),d(function(){c(_)&&v({inst:_})})},[d]),o(h),h}function c(d){var f=d.getSnapshot;d=d.value;try{var h=f();return!n(d,h)}catch{return!0}}function l(d,f){return f()}var u=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?l:a;return Cp.useSyncExternalStore=e.useSyncExternalStore!==void 0?e.useSyncExternalStore:u,Cp}var cb;function cF(){return cb||(cb=1,yp.exports=aF()),yp.exports}var lF=cF();function lb(e){e.reaction=new Rr("observer".concat(e.name),function(){var t;e.stateVersion=Symbol(),(t=e.onStoreChange)===null||t===void 0||t.call(e)})}function uF(e,t){t===void 0&&(t="observed");var n=qe.useRef(null);if(!n.current){var r={reaction:null,onStoreChange:null,stateVersion:Symbol(),name:t,subscribe:function(a){return L_.unregister(r),r.onStoreChange=a,r.reaction||(lb(r),r.stateVersion=Symbol()),function(){var c;r.onStoreChange=null,(c=r.reaction)===null||c===void 0||c.dispose(),r.reaction=null}},getSnapshot:function(){return r.stateVersion}};n.current=r}var s=n.current;s.reaction||(lb(s),L_.register(n,s,s)),qe.useDebugValue(s.reaction,nF),lF.useSyncExternalStore(s.subscribe,s.getSnapshot,s.getSnapshot);var i,o;if(s.reaction.track(function(){try{i=e()}catch(a){o=a}}),o)throw o;return i}var bp,Sp,E8=typeof Symbol=="function"&&Symbol.for;Sp=(bp=Object.getOwnPropertyDescriptor(function(){},"name"))===null||bp===void 0?void 0:bp.configurable;E8?Symbol.for("react.forward_ref"):typeof m.forwardRef=="function"&&m.forwardRef(function(e){return null}).$$typeof;E8?Symbol.for("react.memo"):typeof m.memo=="function"&&m.memo(function(e){return null}).$$typeof;var wp;tF(dy.unstable_batchedUpdates);wp=L_.finalizeAllImmediately;function dF(e,t){return t===void 0&&(t="observed"),uF(e,t)}function nt(e,t){return gF(Dt.box(e,{deep:!1,equals:t?.equals}))}function Ii(e){return dF(()=>Wl(e))}function Ly(e,t){const n=cc(()=>Wl(e),t);return ah(()=>n.get())}function fF(e){if(Sy())throw new Error("[signal] Cannot run effect directly within React component");let t;const n=sh(()=>{t?.(),t=Wl(e)});return()=>{n(),t?.()}}function Ep(e){return nh(()=>Wl(e))}function hF(e){return g8(()=>Wl(e))}function pF(e){return Wd(e)}function F_(e,t,n,r){let s;const i=Jf(e,()=>{let o=n();s=t(()=>{x8();const a=n();o!==a&&(o=a,i.reportChanged())})},()=>{s?.()});return ah(()=>(i.reportObserved(),n()))}function xp(e){return ah(()=>e)}function ah(e){return()=>(_F(),e())}function mF(e){x8(),Wd(()=>{this._observable.set(typeof e=="function"?e(this._observable.get()):e)})}function gF(e){const t=ah(()=>e.get());return t._observable=e,t.set=mF,t}let Jd=0;function Wl(e){try{return Jd++,e()}finally{Jd--}}function _F(){!Jd&&Sy()&&j_(new Error("[signal] Must read signal with useObserve() or untracked() within React component"))}function x8(){Jd&&j_(new Error("[signal] Cannot update signal value directly within useObserve(), computed() or effect()")),Sy()&&j_(new Error("[signal] Cannot update signal value directly within React component"))}function j_(e){R.addError(e)}function ch(e,t){const n=Ul(e),r=t,s=new n9(n,{...r,notifyOnChangeProps:["data","isLoading","error"]}),i=n.defaultQueryOptions(r);return F_(t.queryKey.join(":"),o=>{let a=!1;const c=s.subscribe(()=>{a&&o()});return a=!0,c},()=>{const{data:o,isLoading:a,error:c}=s.getOptimisticResult(i);return{data:o,isLoading:a,error:c}})}const lh=m.createContext({cspScriptNonce:void 0,windowStyle:void 0});function _1e(e){return e.windowStyle==="chatbar_view"}class vF{windowStyle$=nt(void 0);wantsModelSlug$=nt(void 0);selectedConversationId$=nt(void 0);wantsNewConversation$=nt(!1);prepareConversationDetails;attachments;whisperContent;tabContext;requestCompletion;wantsRequestCompletion$=nt(!1);populatePrompt;wantsPopulatePrompt$=nt(!1);context$=nt(void 0);promptOrigin=void 0;authSessionContext=void 0;wantsAuthSessionContext$=nt(!1);agentRequest;wantsHandleAgentRequest$=nt(!1);sidebarUrlTrayOpen$=nt(!0);sidebarUrlTrayForcedOpen$=nt(!1)}const Ms=new vF,U_="new_page_view",B_="sidebar_view",yF={name:"ref",value:"mini"},CF={name:"ref",value:"mini-sidebar"};let _l;function T8(e){_l=e}function v1e(){T8(B_)}function y1e(){T8(U_)}function O8(e){return Fy(e)||k8(e)}function Fy(e){return _l?_l===U_:e.windowStyle===U_}function k8(e){return _l?_l===B_:e.windowStyle===B_}function C1e(e){const t="gpt-5";if(e?.has(t))return t;const n="gpt-4o";if(e?.has(n))return n}function b1e(e){return Fy(e)}function A8(e){Ii(Ms.windowStyle$);const t=m.useContext(lh);return e(t)}class bF extends TypeError{constructor(t,n){let r;const{message:s,explanation:i,...o}=t,{path:a}=t,c=a.length===0?s:`At path: ${a.join(".")} -- ${s}`;super(i??c),i!=null&&(this.cause=c),Object.assign(this,o),this.name=this.constructor.name,this.failures=()=>r??(r=[t,...n()])}}function SF(e){return uh(e)&&typeof e[Symbol.iterator]=="function"}function uh(e){return typeof e=="object"&&e!=null}function ub(e){return uh(e)&&!Array.isArray(e)}function jy(e){return typeof e=="symbol"?e.toString():typeof e=="string"?JSON.stringify(e):`${e}`}function wF(e){const{done:t,value:n}=e.next();return t?void 0:n}function EF(e,t,n,r){if(e===!0)return;e===!1?e={}:typeof e=="string"&&(e={message:e});const{path:s,branch:i}=t,{type:o}=n,{refinement:a,message:c=`Expected a value of type \`${o}\`${a?` with refinement \`${a}\``:""}, but received: \`${jy(r)}\``}=e;return{value:r,type:o,refinement:a,key:s[s.length-1],path:s,branch:i,...e,message:c}}function*db(e,t,n,r){SF(e)||(e=[e]);for(const s of e){const i=EF(s,t,n,r);i&&(yield i)}}function*M8(e,t,n={}){const{path:r=[],branch:s=[e],coerce:i=!1,mask:o=!1}=n,a={path:r,branch:s,mask:o};i&&(e=t.coercer(e,a));let c="valid";for(const l of t.validator(e,a))l.explanation=n.message,c="not_valid",yield[l,void 0];for(let[l,u,d]of t.entries(e,a)){const f=M8(u,d,{path:l===void 0?r:[...r,l],branch:l===void 0?s:[...s,u],coerce:i,mask:o,message:n.message});for(const h of f)h[0]?(c=h[0].refinement!=null?"not_refined":"not_valid",yield[h[0],void 0]):i&&(u=h[1],l===void 0?e=u:e instanceof Map?e.set(l,u):e instanceof Set?e.add(u):uh(e)&&(u!==void 0||l in e)&&(e[l]=u))}if(c!=="not_valid")for(const l of t.refiner(e,a))l.explanation=n.message,c="not_refined",yield[l,void 0];c==="valid"&&(yield[void 0,e])}class I8{constructor(t){const{type:n,schema:r,validator:s,refiner:i,coercer:o=c=>c,entries:a=function*(){}}=t;this.type=n,this.schema=r,this.entries=a,this.coercer=o,s?this.validator=(c,l)=>{const u=s(c,l);return db(u,l,this,c)}:this.validator=()=>[],i?this.refiner=(c,l)=>{const u=i(c,l);return db(u,l,this,c)}:this.refiner=()=>[]}assert(t,n){return xF(t,this,n)}create(t,n){return TF(t,this,n)}is(t){return kF(t,this)}mask(t,n){return OF(t,this,n)}validate(t,n={}){return Kl(t,this,n)}}function xF(e,t,n){const r=Kl(e,t,{message:n});if(r[0])throw r[0]}function TF(e,t,n){const r=Kl(e,t,{coerce:!0,message:n});if(r[0])throw r[0];return r[1]}function OF(e,t,n){const r=Kl(e,t,{coerce:!0,mask:!0,message:n});if(r[0])throw r[0];return r[1]}function kF(e,t){return!Kl(e,t)[0]}function Kl(e,t,n={}){const r=M8(e,t,n),s=wF(r);return s[0]?[new bF(s[0],function*(){for(const o of r)o[0]&&(yield o[0])}),void 0]:[void 0,s[1]]}function N8(e,t){return new I8({type:e,schema:null,validator:t})}function AF(){return N8("never",()=>!1)}function MF(e){const t=e?Object.keys(e):[],n=AF();return new I8({type:"object",schema:e||null,*entries(r){if(e&&uh(r)){const s=new Set(Object.keys(r));for(const i of t)s.delete(i),yield[i,r[i],e[i]];for(const i of s)yield[i,r[i],n]}},validator(r){return ub(r)||`Expected an object, but received: ${jy(r)}`},coercer(r,s){if(!ub(r))return r;const i={...r};if(s.mask&&e)for(const o in i)e[o]===void 0&&delete i[o];return i}})}function fb(){return N8("string",e=>typeof e=="string"||`Expected a string, but received: ${jy(e)}`)}var dh=(e=>(e.Sunshine="sunshine",e.TrainingAllowed="training_allowed",e.ShowExpandedCodeView="show_expanded_code_view",e.VoiceName="voice_name",e.VoiceMainLanguage="voice_main_language",e.MemoryInSearch="memory_in_search",e.VoiceTrainingAllowed="voice_training_allowed",e.VideoTrainingAllowed="video_training_allowed",e.Moonshine="moonshine",e.CodexTrainingAllowed="codex_training_allowed_v2",e.ModelStickyForNewChats="model_sticky_for_new_chats",e.ShowLegacyModels="show_legacy_models",e.HiveReferencedInInternalKnowledge="hive_referenced_in_internal_knowledge",e.DeveloperMode="developer_mode",e.Gift="gift",e.ChatTheme="chat_theme",e.VoiceSpeed="voice_speed",e))(dh||{}),Ys=(e=>(e.DEEP_RESEARCH="deep_research",e.WORKSPACE_GPT_CUSTOM_ACTIONS="workspace_gpt_custom_actions",e.APP_PAIRING="app_pairing",e.BROWSING="browsing",e.CANVAS="canvas",e.CANVAS_CODE_EXECUTION="canvas_code_execution",e.CANVAS_CODE_NETWORK_ACCESS="canvas_code_network_access",e.DALLE="dalle",e.MEMORY="sunshine",e.LEGACY_MODELS="legacy_models",e.CONTEXT_CONNECTOR_CONFLUENCE="context_connector_confluence",e.CONTEXT_CONNECTOR_GDRIVE="context_connector_gdrive",e.CONTEXT_CONNECTOR_JIRA="context_connector_java",e.CONTEXT_CONNECTOR_NOTION="context_connector_notion",e.CONTEXT_CONNECTOR_O365_PERSONAL="context_connector_o365_personal",e.CONTEXT_CONNECTOR_O365_BUSINESS="context_connector_o365_business",e.CONTEXT_CONNECTOR_SLACK="context_connector_slack",e.CONTEXT_CONNECTOR_GITHUB="context_connector_github",e.CLIENT_APPLICATION_APPLE="client_application_apple",e.CLIENT_APPLICATION_APPLE_MDM_REQUIRED="client_application_apple_mdm_required",e.MEMORY_IN_SEARCH="memory_in_search_2",e.VIDEO_SCREEN_SHARING="video_screen_sharing",e.HIVE="hive",e.HIVE_KNOWLEDGE_RETRIEVAL="hive_knowledge_retrieval",e.ALLOW_CODEX_ACCESS="wham_access",e.CODEX_AGENT_NETWORK_ACCESS="codex_agent_network_access",e))(Ys||{}),IF=(e=>(e.FREE="chatgptfreeplan",e.GO="chatgptgoplan",e.PLUS="chatgptplusplan",e.PRO="chatgptpro",e.PRO_FREE="chatgptprofreeplan",e.PLUS_FREE="chatgptplusfreeplan",e.TEAM="chatgptteamplan",e.BUSINESS_SEAT_USAGE="chatgptbusiness_seat_usage",e.BUSINESS_FLAT="chatgptbusiness_flat",e.EDUCATION_FLAT="chatgpteducation_flat",e.QUORUM="chatgptquorumplan",e.DEPRECATED_ENTERPRISE="chatgptenterpriseplan",e.DEPRECATED_EDU="chatgpteduplan",e))(IF||{}),Re=(e=>(e.FREE="free",e.GO="go",e.PLUS="plus",e.PRO="pro",e.TEAM="team",e.BUSINESS="business",e.EDUCATION="education",e.QUORUM="quorum",e.DEPRECATED_ENTERPRISE="enterprise",e.DEPRECATED_EDU="edu",e))(Re||{}),NF=(e=>(e.ANYONE="anyone",e.NO_ONE="no_one",e.WORKSPACE_ONLY="workspace_only",e))(NF||{});const S1e={ALLOW_ALL:"allow_all",ALLOW_SPECIFIC:"allow_specific",ALLOW_NONE:"allow_none"};var RF=(e=>(e.GPT_SHARE_SETTINGS="gpt_share_setting",e.CHAT_SHARE_SETTINGS="chat_share_setting",e))(RF||{}),PF=(e=>(e.WORKSPACE="workspace",e.THIRD_PARTY="third_party",e.UNASSIGNED="unassigned",e))(PF||{}),to=(e=>(e.CodeInterpreter="code_interpreter",e.Multimodal="multimodal",e.Retrieval="retrieval",e.ContextConnector="context_connector",e))(to||{}),DF=(e=>(e.FREE="free",e.PLUS="plus",e))(DF||{}),Jr=(e=>(e.TOOL_USE="tool_use",e.IMAGE="image",e.ATTACHMENT="attachment",e.AUDIO="audio",e.TARGETED_REPLY="targeted_reply",e.CANVAS_SUPPORTED="canvas_supported",e.TOOL_SEARCH="tool_search",e.CUSTOM_INSTRUCTIONS="custom_instructions",e.GIZMO_PROJECT="gizmo_project",e))(Jr||{}),LF=(e=>(e.SHORT_LABEL="short_label",e.TITLE="title",e))(LF||{}),Bn=(e=>(e[e.DEPRECATED_PENDING=1]="DEPRECATED_PENDING",e[e.DEPRECATED_FINISHED=2]="DEPRECATED_FINISHED",e[e.STREAMING=3]="STREAMING",e[e.UNREAD=4]="UNREAD",e[e.REALTIME=5]="REALTIME",e))(Bn||{}),ws=(e=>(e[e.CLIENT=1]="CLIENT",e[e.SERVER=2]="SERVER",e))(ws||{}),Rn=(e=>(e.PERSONAL="personal",e.WORKSPACE="workspace",e))(Rn||{}),nl=(e=>(e.OWNER="account-owner",e.ADMIN="account-admin",e.STANDARD="standard-user",e))(nl||{}),FF=(e=>(e.VERIFIED="verified",e.PENDING="pending",e.EXPIRED="expired",e))(FF||{}),jF=(e=>(e.PERCENTAGE="percentage",e.FIXED="fixed",e))(jF||{}),qt=(e=>(e.AceUpload="ace_upload",e.MyFiles="my_files",e.Multimodal="multimodal",e.ProfilePicture="profile_picture",e.Gizmo="agent",e.DalleAgent="dalle_agent",e.Codex="codex",e))(qt||{}),Tr=(e=>(e.Initial="initial",e.FileCreated="file_created",e.FileUploaded="file_uploaded",e.FileProcessed="file_processed",e.RetrievalIndexCreated="retrieval_index_created",e))(Tr||{}),vl=(e=>(e.Success="success",e.Retry="retry",e.Error="error",e))(vl||{}),Ta=(e=>(e.Success="success",e.Failed="failed",e.Processing="processing",e.Skipped="skipped",e))(Ta||{}),J=(e=>(e.GDRIVE="gdrive",e.O365="o365",e.O365_PERSONAL="o365_personal",e.O365_BUSINESS="o365_business",e.CONFLUENCE="confluence",e.JIRA="java",e.NOTION_OPEN_CONNECTOR="notion_open_connector",e.SLACK_OPEN_CONNECTOR="slack_open_connector",e))(J||{});const M={GDRIVE_ACTION_CONNECTOR:"gdrive_action_connector",GITHUB_CONNECTOR:"github_connector",LINEAR_CONNECTOR:"linear_connector",DROPBOX_CONNECTOR:"dropbox_connector",SHAREPOINT_CONNECTOR:"sharepoint_connector",GCAL_CONNECTOR:"google_calendar_connector",GMAIL_CONNECTOR:"gmail_connector",GOOGLE_CONTACTS_CONNECTOR:"google_contacts_connector",TEAMS_CONNECTOR:"teams_connector",OUTLOOK_CALENDAR_CONNECTOR:"outlook_calendar_connector",OUTLOOK_EMAIL_CONNECTOR:"outlook_email_connector",BOX_CONNECTOR:"box_connector",INTERCOM_CONNECTOR:"intercom_connector",NOTION_CONNECTOR:"notion_connector",HUBSPOT_CONNECTOR:"hubspot_connector",CANVA_CONNECTOR:"canva_connector",SLACK_CONNECTOR:"slack_connector",UAE_PASS_CONNECTOR:"uae_pass_connector"};var Yl=(e=>(e.MCP_CONNECTOR="mcp_connector",e))(Yl||{}),R8=(e=>(e.GDRIVE_SYNC_CONNECTOR="gdrive_sync_connector",e.SLACK_SYNC_CONNECTOR="slack_sync_connector",e))(R8||{}),UF=(e=>(e.GCAL_CONNECTOR="gcal_action_connector",e.GMAIL_CONNECTOR="gmail_action_connector",e.GOOGLE_CONTACTS_CONNECTOR="google_contacts_action_connector",e))(UF||{}),BF=(e=>(e.PAGE="page",e))(BF||{}),qF=(e=>(e.PAGE="page",e.DATABASE="database",e))(qF||{}),GF=(e=>(e.MESSAGE="message",e))(GF||{}),HF=(e=>(e.PYTHON="python",e.RETRIEVAL="retrieval",e.BROWSER="browser",e.CANVAS="canvas",e.FUNCTION="function",e.DALLE="dalle",e.API="api",e.PARALLEL_BROWSE="parallel_browse",e.MEMORY="memory",e.CONTEXT_CONNECTOR="context_connector",e.JIT_PLUGIN="plugins_prototype",e.IMAGE_GEN="image_gen",e))(HF||{}),VF=(e=>(e.Gizmo="gizmo",e.ShareableConversation="share_link",e.Conversation="conversation",e.Post="post",e.CommerceProduct="commerce_product",e))(VF||{}),zF=(e=>(e.UserName="user_name",e.UserEmail="user_email",e.EntityName="entity_name",e.EntityUrl="entity_url",e.SampleLongerInput="sample_longer_input",e.SampleUrl="sample_url_input",e.SampleIntInput="sample_int_input",e))(zF||{});const w1e={shouldnt_have_created:Bt({id:"ImageGenFeedback.ShouldNotHaveCreated",defaultMessage:"Shouldn't have created an image"}),dont_like_style:Bt({id:"ImageGenFeedback.DontLikeStyle",defaultMessage:"Don't like the style"}),didnt_fully_follow_instructions:Bt({id:"ImageGenFeedback.DidntFollowInstructions",defaultMessage:"Didn't fully follow instructions"}),low_quality_or_distorted:Bt({id:"ImageGenFeedback.LowQualityOrDistorted",defaultMessage:"Low quality or distorted"}),odd_cropping:Bt({id:"ImageGenFeedback.OddCropping",defaultMessage:"Odd cropping"}),inaccurate_editing:Bt({id:"ImageGenFeedback.InaccurateEditing",defaultMessage:"Inaccurate editing"}),inaccurate_text_rendering:Bt({id:"ImageGenFeedback.InaccurateTextRendering",defaultMessage:"Inaccurate text rendering"}),unsafe_or_problematic:Bt({id:"ImageGenFeedback.UnsafeOrProblematic",defaultMessage:"Unsafe or problematic"}),biased:Bt({id:"ImageGenFeedback.Biased",defaultMessage:"Biased"}),other:Bt({id:"ImageGenFeedback.Other",defaultMessage:"Other"})};var $F=(e=>(e.AUDIO_ISSUES="audio_issues",e.RESPONSE_QUALITY="response_quality",e.INTERRUPTIONS="interruptions",e.TRANSCRIPTION_ISSUES="transcription_issues",e.INAUDIBLE_ISSUES="inaudible_issues",e.OTHER="other",e))($F||{});const E1e={audio_issues:Bt({id:"VoiceFeedback.AudioIssues",defaultMessage:"Audio issues"}),response_quality:Bt({id:"VoiceFeedback.ResponseQuality",defaultMessage:"I didn't like the responses"}),interruptions:Bt({id:"VoiceFeedback.Interruptions",defaultMessage:"It interrupted me"}),transcription_issues:Bt({id:"VoiceFeedback.TranscriptionIssues",defaultMessage:"It misheard me"}),inaudible_issues:Bt({id:"VoiceFeedback.InaudibleIssues",defaultMessage:"It couldn't hear me"}),other:Bt({id:"VoiceFeedback.Other",defaultMessage:"Other"})};var WF=(e=>(e.THUMBS_UP="thumbs_up",e.THUMBS_DOWN="thumbs_down",e))(WF||{}),KF=(e=>(e.Auto="auto",e.Arabic="ar",e.Bosnian="bs",e.Bulgarian="bg",e.Catalan="ca",e.Chinese="zh",e.Croatian="hr",e.Czech="cs",e.Danish="da",e.Dutch="nl",e.English="en",e.Finnish="fi",e.French="fr",e.Galician="gl",e.German="de",e.Greek="el",e.Hindi="hi",e.Hungarian="hu",e.Indonesian="id",e.Italian="it",e.Japanese="ja",e.Korean="ko",e.Macedonian="mk",e.Malay="ms",e.Norwegian="no",e.Polish="pl",e.Portuguese="pt",e.Romanian="ro",e.Russian="ru",e.Slovak="sk",e.Spanish="es",e.Tagalog="tl",e.Tamil="ta",e.Thai="th",e.Turkish="tr",e.Swedish="sv",e.Ukrainian="uk",e.Vietnamese="vi",e))(KF||{});const x1e=["new_chat","switch_to_standard","ok","upgrade_to_plus","upgrade_to_pro"],Tp="account_switch",Op="error",T1e=MF({email:fb(),token:fb()});var YF=(e=>(e.InvalidProof="invalid_proof",e.ExternalAccountAlreadyLinked="external_account_already_linked",e.InternalAccountAlreadyLinked="account_already_linked",e.UnsupportedPlatform="unsupported_platform",e.UnsupportedPlanType="unsupported_plan_type",e.SessionExpired="user_session_expired",e))(YF||{});function O1e(e){if(typeof e!="object"||e==null)return!1;const t=Object.getPrototypeOf(e);return t==null||t===Object.prototype}function k1e(e){return e!=null}const ZF=(e,t)=>e.includes(t),JF=(e,t,n=[])=>{if(e==null)return n;const r=Array.isArray(e)?e:[e];return t?r.map(t):r},A1e=(e,t=[])=>n=>JF(n,e,t),QF=(e,t=void 0)=>typeof e!="object"||e==null||Array.isArray(e)?t:e,XF=(e,t)=>{const n=QF(e),r={};for(const s in t)r[s]=t[s](n?.[s]);return r},M1e=e=>t=>XF(t,e),I1e=(e,t="")=>typeof e=="object"||e==null?t:String(e),N1e=(e,t=0)=>{if(typeof e=="object"||e==null)return t;const n=Number(e);return isNaN(n)?t:n},R1e=(e,t=!1)=>{if(typeof e=="boolean")return e;if(typeof e=="number"){if(e===0)return!1;if(e===1)return!0}if(typeof e=="string"){const n=e.toLowerCase();if(n==="false")return!1;if(n==="true")return!0}return t},P8=(e,t,n=t[0])=>ZF(t,e)?e:n,P1e=(e,t=e[0])=>n=>P8(n,e,t),D1e=e=>t=>t===void 0?void 0:e(t),ej="OAI-Language",Uy="OAI-Client-Version",By="OAI-Device-Id",mn="OAI-Product-Sku",tj={},hb=e=>{let t;const n=new Set,r=(u,d)=>{const f=typeof u=="function"?u(t):u;if(!Object.is(f,t)){const h=t;t=d??(typeof f!="object"||f===null)?f:Object.assign({},t,f),n.forEach(g=>g(t,h))}},s=()=>t,c={setState:r,getState:s,getInitialState:()=>l,subscribe:u=>(n.add(u),()=>n.delete(u)),destroy:()=>{(tj?"production":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),n.clear()}},l=t=e(r,s,c);return c},qr=e=>e?hb(e):hb;var kp={exports:{}},Ap={},Mp={exports:{}},Ip={};/**
 * @license React
 * use-sync-external-store-shim.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var pb;function nj(){if(pb)return Ip;pb=1;var e=uy();function t(d,f){return d===f&&(d!==0||1/d===1/f)||d!==d&&f!==f}var n=typeof Object.is=="function"?Object.is:t,r=e.useState,s=e.useEffect,i=e.useLayoutEffect,o=e.useDebugValue;function a(d,f){var h=f(),g=r({inst:{value:h,getSnapshot:f}}),_=g[0].inst,v=g[1];return i(function(){_.value=h,_.getSnapshot=f,c(_)&&v({inst:_})},[d,h,f]),s(function(){return c(_)&&v({inst:_}),d(function(){c(_)&&v({inst:_})})},[d]),o(h),h}function c(d){var f=d.getSnapshot;d=d.value;try{var h=f();return!n(d,h)}catch{return!0}}function l(d,f){return f()}var u=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?l:a;return Ip.useSyncExternalStore=e.useSyncExternalStore!==void 0?e.useSyncExternalStore:u,Ip}var mb;function rj(){return mb||(mb=1,Mp.exports=nj()),Mp.exports}/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var gb;function sj(){if(gb)return Ap;gb=1;var e=uy(),t=rj();function n(l,u){return l===u&&(l!==0||1/l===1/u)||l!==l&&u!==u}var r=typeof Object.is=="function"?Object.is:n,s=t.useSyncExternalStore,i=e.useRef,o=e.useEffect,a=e.useMemo,c=e.useDebugValue;return Ap.useSyncExternalStoreWithSelector=function(l,u,d,f,h){var g=i(null);if(g.current===null){var _={hasValue:!1,value:null};g.current=_}else _=g.current;g=a(function(){function y(w){if(!C){if(C=!0,E=w,w=f(w),h!==void 0&&_.hasValue){var x=_.value;if(h(x,w))return b=x}return b=w}if(x=b,r(E,w))return x;var T=f(w);return h!==void 0&&h(x,T)?x:(E=w,b=T)}var C=!1,E,b,S=d===void 0?null:d;return[function(){return y(u())},S===null?void 0:function(){return y(S())}]},[u,d,f,h]);var v=s(l,g[0],g[1]);return o(function(){_.hasValue=!0,_.value=v},[v]),c(v),v},Ap}var _b;function ij(){return _b||(_b=1,kp.exports=sj()),kp.exports}var oj=ij();const D8=Ot(oj),L8={},{useDebugValue:aj}=qe,{useSyncExternalStoreWithSelector:cj}=D8;let vb=!1;const lj=e=>e;function Do(e,t=lj,n){(L8?"production":void 0)!=="production"&&n&&!vb&&(console.warn("[DEPRECATED] Use `createWithEqualityFn` instead of `create` or use `useStoreWithEqualityFn` instead of `useStore`. They can be imported from 'zustand/traditional'. https://github.com/pmndrs/zustand/discussions/1937"),vb=!0);const r=cj(e.subscribe,e.getState,e.getServerState||e.getInitialState,t,n);return aj(r),r}const yb=e=>{(L8?"production":void 0)!=="production"&&typeof e!="function"&&console.warn("[DEPRECATED] Passing a vanilla store will be unsupported in a future version. Instead use `import { useStore } from 'zustand'`.");const t=typeof e=="function"?qr(e):e,n=(r,s)=>Do(t,r,s);return Object.assign(n,t),n},vt=e=>e?yb(e):yb,uj="2ce0a3f07a70586b8e072b67b1fc24498df2535f",dj="prod",fj="",hj="",Zl=`${dj}-${uj}${fj}${hj}`;var $i={},Lu={};/*!
 * cookie
 * Copyright(c) 2012-2014 Roman Shtylman
 * Copyright(c) 2015 Douglas Christopher Wilson
 * MIT Licensed
 */var Cb;function pj(){if(Cb)return Lu;Cb=1,Lu.parse=r,Lu.serialize=s;var e=decodeURIComponent,t=encodeURIComponent,n=/^[\u0009\u0020-\u007e\u0080-\u00ff]+$/;function r(o,a){if(typeof o!="string")throw new TypeError("argument str must be a string");for(var c={},l=a||{},u=o.split(";"),d=l.decode||e,f=0;f<u.length;f++){var h=u[f],g=h.indexOf("=");if(!(g<0)){var _=h.substring(0,g).trim();if(c[_]==null){var v=h.substring(g+1,h.length).trim();v[0]==='"'&&(v=v.slice(1,-1)),c[_]=i(v,d)}}}return c}function s(o,a,c){var l=c||{},u=l.encode||t;if(typeof u!="function")throw new TypeError("option encode is invalid");if(!n.test(o))throw new TypeError("argument name is invalid");var d=u(a);if(d&&!n.test(d))throw new TypeError("argument val is invalid");var f=o+"="+d;if(l.maxAge!=null){var h=l.maxAge-0;if(isNaN(h)||!isFinite(h))throw new TypeError("option maxAge is invalid");f+="; Max-Age="+Math.floor(h)}if(l.domain){if(!n.test(l.domain))throw new TypeError("option domain is invalid");f+="; Domain="+l.domain}if(l.path){if(!n.test(l.path))throw new TypeError("option path is invalid");f+="; Path="+l.path}if(l.expires){if(typeof l.expires.toUTCString!="function")throw new TypeError("option expires is invalid");f+="; Expires="+l.expires.toUTCString()}if(l.httpOnly&&(f+="; HttpOnly"),l.secure&&(f+="; Secure"),l.sameSite){var g=typeof l.sameSite=="string"?l.sameSite.toLowerCase():l.sameSite;switch(g){case!0:f+="; SameSite=Strict";break;case"lax":f+="; SameSite=Lax";break;case"strict":f+="; SameSite=Strict";break;case"none":f+="; SameSite=None";break;default:throw new TypeError("option sameSite is invalid")}}return f}function i(o,a){try{return a(o)}catch{return o}}return Lu}var bb;function mj(){return bb||(bb=1,function(e){var t=$i&&$i.__assign||function(){return t=Object.assign||function(v){for(var y,C=1,E=arguments.length;C<E;C++){y=arguments[C];for(var b in y)Object.prototype.hasOwnProperty.call(y,b)&&(v[b]=y[b])}return v},t.apply(this,arguments)},n=$i&&$i.__rest||function(v,y){var C={};for(var E in v)Object.prototype.hasOwnProperty.call(v,E)&&y.indexOf(E)<0&&(C[E]=v[E]);if(v!=null&&typeof Object.getOwnPropertySymbols=="function")for(var b=0,E=Object.getOwnPropertySymbols(v);b<E.length;b++)y.indexOf(E[b])<0&&Object.prototype.propertyIsEnumerable.call(v,E[b])&&(C[E[b]]=v[E[b]]);return C};Object.defineProperty(e,"__esModule",{value:!0}),e.checkCookies=e.hasCookie=e.removeCookies=e.deleteCookie=e.setCookies=e.setCookie=e.getCookie=e.getCookies=void 0;var r=pj(),s=function(){return typeof window<"u"},i=function(v){if(v==="true")return!0;if(v==="false")return!1;if(v!=="undefined")return v==="null"?null:v},o=function(v){v===void 0&&(v="");try{var y=JSON.stringify(v);return/^[\{\[]/.test(y)?y:v}catch{return v}},a=function(v){return v&&v.replace(/(%[0-9A-Z]{2})+/g,decodeURIComponent)},c=function(v){var y;if(v&&(y=v.req),!s())return y&&y.cookies?y.cookies:y&&y.headers&&y.headers.cookie?(0,r.parse)(y.headers.cookie):{};for(var C={},E=document.cookie?document.cookie.split("; "):[],b=0,S=E.length;b<S;b++){var w=E[b].split("="),x=w.slice(1).join("="),T=w[0];C[T]=x}return C};e.getCookies=c;var l=function(v,y){var C=(0,e.getCookies)(y),E=C[v];if(E!==void 0)return i(a(E))};e.getCookie=l;var u=function(v,y,C){var E,b,S;if(C){var w=C.req,x=C.res,T=n(C,["req","res"]);b=w,S=x,E=T}var O=(0,r.serialize)(v,o(y),t({path:"/"},E));if(s())document.cookie=O;else if(S&&b){var A=S.getHeader("Set-Cookie");if(Array.isArray(A)||(A=A?[String(A)]:[]),S.setHeader("Set-Cookie",A.concat(O)),b&&b.cookies){var k=b.cookies;y===""?delete k[v]:k[v]=o(y)}if(b&&b.headers&&b.headers.cookie){var k=(0,r.parse)(b.headers.cookie);y===""?delete k[v]:k[v]=o(y),b.headers.cookie=Object.entries(k).reduce(function(N,j){return N.concat("".concat(j[0],"=").concat(j[1],";"))},"")}}};e.setCookie=u;var d=function(v,y,C){return console.warn("[WARN]: setCookies was deprecated. It will be deleted in the new version. Use setCookie instead."),(0,e.setCookie)(v,y,C)};e.setCookies=d;var f=function(v,y){return(0,e.setCookie)(v,"",t(t({},y),{maxAge:-1}))};e.deleteCookie=f;var h=function(v,y){return console.warn("[WARN]: removeCookies was deprecated. It will be deleted in the new version. Use deleteCookie instead."),(0,e.deleteCookie)(v,y)};e.removeCookies=h;var g=function(v,y){if(!v)return!1;var C=(0,e.getCookies)(y);return C.hasOwnProperty(v)};e.hasCookie=g;var _=function(v,y){return console.warn("[WARN]: checkCookies was deprecated. It will be deleted in the new version. Use hasCookie instead."),(0,e.hasCookie)(v,y)};e.checkCookies=_}($i)),$i}var Fu=mj(),ie=(e=>(e.AgeVerification="oai-av-seen",e.AllowNonessential="oai-allow-ne",e.CookieBannerShownPath="oai-cbs",e.CookieBannerIgnored="oai-cbi",e.LastVoiceInteraction="oai-lvi",e.DeviceId="oai-did",e.WaId="oai-wid",e.IpOverride="oai-ip-country",e.GeohashOverride="oai-geohash-override",e.IpCityOverride="oai-ip-city",e.ShowPaymentModal="ui-show-payment-modal",e.TempEnableUnauthedCompliance="temp-oai-compliance",e.Workspace="_account",e.WorkspaceResidencyRegion="_account_residency_region",e.LastLocation="oai-ll",e.HideLoggedOutBanner="hide-logged-out-banner",e.HasLoggedInBefore="oai-hlib",e.PunchOutInfoToken="oai-poit",e.PunchOutRequireLoginInfo="oai-porli",e.SharedConversationId="oai-sh-c-i",e.AuthSessionLoggingId="oai-asli",e.PunchOutRequireAnonToAuthedToken="oai-po-ra2a",e.PunchOutAnonToAuthedEnabled="oai-po-a2a",e.DowngradeAccountEnabled="oai-downgrade-account-enabled",e.SegmentUserId="ajs_user_id",e.SegmentUserTraits="ajs_user_traits",e.HasClickedOnTryItFirstLink="oai-tif-20240402",e.IntercomDeviceIdProd="intercom-device-id-dgkjq2bp",e.IntercomDeviceIdDev="intercom-device-id-izw1u7l7",e.DomainMigrationSourceCompleted="oai-dm-src-c-240329",e.DomainMigrationTargetCompleted="oai-dm-tgt-c-240329",e.SignupRedirectUrl="signup_redirect_url",e.DesktopResultsTab="sonic_desktop_results_tab",e.NavigationState="oai-nav-state",e.PreferredLocale="oai-locale",e.ThreadSidebarState="oai-thread-sidebar",e.InternalSearchSettings="oai-internal-search-settings",e.LastUsedModel="oai-last-model",e.LastUsedEffortMode="oai-last-effort-mode",e.IsSpecificModel="oai-is-specific-model",e.ModelStickyForNewChats="oai-model-sticky-for-new-chats",e.GreetingName="oai-gn",e.headlineMessage="oai-hm",e.ConsentAnalytics="oai_consent_analytics",e.ConsentMarketing="oai_consent_marketing",e.Gclid="gclid",e.Fbclid="fbclid",e.Rdtcid="rdt_cid",e.Tiktokclid="ttclid",e.LastSelectedGithubRepo="oai-last-selected-github-repo",e.ShowInternalModels="oai-show-internal-models",e.SidebarSections="oai-sidebar-sections",e))(ie||{});const gj=["gclid","fbclid","rdt_cid","ttclid"],_j=["ajs_user_id","ajs_user_traits"],vj={sameSite:"lax"},Np=".chatgpt.com",F8=window!==window.top,yj=e=>e&&e.replace(/(%[0-9A-Z]{2})+/g,decodeURIComponent);class j8{allowAnalyticsCookies=!1;allowMarketingCookies=!1;constructor(){F8||(this.synchronizeWithLocalStorage(),setInterval(()=>this.synchronizeWithLocalStorage(),6e4))}setAllowAnalyticsCookies_CLIENT_ONLY(t){this.allowAnalyticsCookies=t,t===!1&&this.clearAnalyticsCookies()}setAllowMarketingCookies_CLIENT_ONLY(t){this.allowMarketingCookies=t,t===!1&&this.clearMarketingCookies()}clearAnalyticsCookies(){for(const t of _j)this.deleteCookie(t)}clearMarketingCookies(){for(const t of gj)this.deleteCookie(t)}synchronizeWithLocalStorage(){[ie.Workspace,ie.WorkspaceResidencyRegion,ie.DeviceId].forEach(n=>{const r=Fu.getCookie(n);r!=null?localStorage.setItem(n,JSON.stringify(r)):localStorage.removeItem(n)})}_getCookie(t){const n=Fu.getCookies()[t];return n===void 0?void 0:yj(n)}getCookie(t){return this._getCookie(t)}getBooleanCookie(t){const n=this._getCookie(t);return n==null?void 0:n==="true"}getAnalyticsCookie(t){if(this.allowAnalyticsCookies)return this._getCookie(t);this.deleteCookie(t)}getMarketingCookie(t){if(this.allowMarketingCookies)return this._getCookie(t);this.deleteCookie(t)}_setCookie(t,n,r){Fu.setCookie(t,n,{...vj,...r})}setCookie(t,n,r){this._setCookie(t,n,r)}setBooleanCookie(t,n,r){this._setCookie(t,n!=null?n?"true":"false":void 0,r)}setAnalyticsCookie(t,n,r){this.allowAnalyticsCookies?this._setCookie(t,n,r):this.deleteCookie(t)}setMarketingCookie(t,n,r){this.allowMarketingCookies?this._setCookie(t,n,r):this.deleteCookie(t)}deleteCookie(t){const n={};Fu.deleteCookie(t,n)}}class Cj extends j8{getCookie(t){const n=localStorage.getItem(t);return typeof n=="string"?JSON.parse(n):n}setCookie(){}setAnalyticsCookie(){}setMarketingCookie(){}deleteCookie(){}setAllowAnalyticsCookies_CLIENT_ONLY(){}setAllowMarketingCookies_CLIENT_ONLY(){}}const de=F8?new Cj:new j8,bj=60*60*24*30*12,Sj=()=>dr(),wj=e=>typeof e=="string"&&e.length>0,Ej=e=>{const t={maxAge:bj};return e.endsWith("openai.com")?t.domain=".openai.com":e.endsWith(window.location.host)&&(t.domain=".chatgpt.com"),t};function xj(){return window.location.hostname??void 0}function Ni(e=xj()){const t=de.getCookie(ie.DeviceId);if(wj(t))return t;const n=Sj(),r=Ej(e);return de.setCookie(ie.DeviceId,n,r),n}function L1e(){window.location.href=window.location.origin+"/auth/logout"}const Tj="auth_session_logging_id";var qy=(e=>(e.OpenAI="openai",e.OpenAIDev="openai-dev",e.Mocked="mocked",e.OpenAISidetron="openai-sidetron",e.OpenAISidetronDev="openai-sidetron-dev",e))(qy||{}),Oj=(e=>(e[e.Auth0=1]="Auth0",e[e.WorkOS=2]="WorkOS",e))(Oj||{});const U8=It(e=>{const t=_n(e),n=t.authStatus==="logged_in"?t.session:null;return qr(()=>({session:n}))});function Ft(e){return _n(e).authStatus==="logged_in"}function Jl(e){return U8(e).getState().session}function fh(e){return Jl(e)?.accessToken}async function kj(e){try{const t=Date.now(),n=new URL("/api/auth/session",location.origin);n.searchParams.set("refresh","true");for(const[c,l]of Object.entries(e))n.searchParams.set(c,l);const r=Ni();R.addAction(`Refreshing access token due to ${e.reason} error.`,{...e,url:location.origin+(e.path??""),deviceId:r});const s=await fetch(n,{headers:{[By]:r,[Uy]:Zl}}),i=await s.json(),a=(Date.now()-t)/1e3;if(s.status!==200&&R.addAction("fetchSession.statusNon200",{status:s.status,reqDuration:a}),Object.keys(i).length)return i.accessToken==null&&i.error==null&&R.addAction("missing_access_token_error",{error:`Missing access token for User: ${i.user?.id} (${i.accessToken})`}),i.error==="RefreshAccessTokenError"&&window._oaiHandleSessionExpired?.("page load",i.error),i.error&&R.addAction("fetchSession.error",{error:i.error}),i}catch{}return null}function lc(){const e=Y();return{session:Jl(e),isLoading:!1}}function B8(e){return!e||!e.email?!1:e.email.endsWith("@openai.com")}var fn=(e=>(e.LoggedOut="logged_out",e.LoggedIn="logged_in",e))(fn||{});const F1e="https://api.openai.com/mfa",Aj=It(()=>({pending:null}));function q8(e,t){const n=U8(e),r=n.getState().session;r&&n.setState({session:{...r,accessToken:t}})}function G8(e,t){const n=Aj(e);return n.pending||(n.pending=(async()=>{try{const r=await kj(t);r?.accessToken&&q8(e,r.accessToken)}finally{n.pending=null}})()),n.pending}var Mj={};const Ij=window.location.origin+"/backend/se",j1e=Mj.VITE_VZA493Q_SERVICE_URL??"https://operator.chatgpt.com"??"https://operator.chatgpt.com",fi="personal",H8=60*60*24*90,ii=ze({signUpButtonText:{id:"Kiuf8K",defaultMessage:"Sign up"},logInButtonText:{id:"Yx8BXg",defaultMessage:"Log in"},cancelButtonText:{id:"DR1Cxg",defaultMessage:"Cancel"},continueButtonText:{id:"bT1n8o",defaultMessage:"Continue"},gotItButtonText:{id:"Eomb3Y",defaultMessage:"Got it"},stayLoggedOut:{id:"JpuO4U",defaultMessage:"Stay logged out"},somethingWentWrong:{id:"SJ1B8J",defaultMessage:"Something went wrong. Please try again later"},getPlus:{id:"nPUS9f",defaultMessage:"Get Plus"},getPro:{id:"MC/MAr",defaultMessage:"Get Pro"},tryPlus:{id:"lhUk0N",defaultMessage:"Try Plus"},tryGo:{id:"OkPnQG",defaultMessage:"Try Go"},upgradeToPlus:{id:"LIJKv1",defaultMessage:"Upgrade to Plus"},upgradeToPro:{id:"U92S4K",defaultMessage:"Upgrade to Pro"},upgradeToGo:{id:"xbeQTB",defaultMessage:"Upgrade to Go"},joinGo:{id:"w4EEKa",defaultMessage:"Join Go"},joinPlus:{id:"HmtUzT",defaultMessage:"Join Plus"},joinPro:{id:"Ehp9lH",defaultMessage:"Join Pro"},unlockGo:{id:"C3xzfi",defaultMessage:"Unlock Go"},unlockPlus:{id:"W3hk8e",defaultMessage:"Unlock Plus"},unlockPro:{id:"TXstaY",defaultMessage:"Unlock Pro"},longCtaPlus:{id:"kp6hSg",defaultMessage:"Get better, faster answers"},longCtaPro:{id:"SEKq+P",defaultMessage:"Unlock all of ChatGPT"},upgradeYourPlan:{id:"aWGaHN",defaultMessage:"Upgrade your plan"},upgrade:{id:"0CZNA2",defaultMessage:"Upgrade"}});var Nj=(e=>(e.APPLE="apple",e))(Nj||{});const Rj="gpt-4o",U1e=Rj;var Gy=(e=>(e.GPT_3_5="gpt3.5",e.GPT_4="gpt4",e.GPT_4o="gpt4o",e.HIDDEN="hidden",e))(Gy||{});const Hy="WEB:",B1e=`${Hy}:DUMMY`;var Oa=(e=>(e.Next="next",e.Variant="variant",e.Continue="continue",e))(Oa||{}),fe=(e=>(e.Root="root",e.User="user",e.Assistant="assistant",e.System="system",e.Critic="critic",e.Tool="tool",e.Developer="developer",e))(fe||{}),St=(e=>(e.PrimaryAssistant="primary_assistant",e.GizmoInteraction="gizmo_interaction",e.GizmoMagicCreate="gizmo_magic_create",e.GizmoTest="gizmo_test",e.FlyingCircusCustomization="flying_circus_customization",e))(St||{});const Wt={Web:"web",Cloud:"cloud",GitHub:"github",GoogleDrive:"google_drive",GoogleCalendar:"google_calendar",Gmail:"gmail",GoogleContacts:"google_contacts",Dropbox:"dropbox",Linear:"linear",Sharepoint:"sharepoint",Teams:"teams",OutlookEmail:"outlook_email",OutlookCalendar:"outlook_calendar",Box:"box",Intercom:"intercom",Hubspot:"hubspot",Canva:"canva",Notion:"notion",Slack:"slack"};var Pj=(e=>(e.None="none",e.OAuth="oauth",e.ServiceHTTP="service_http",e))(Pj||{}),Fc=(e=>(e.CONVERSATION="conversation",e.REGENERATE="regenerate",e))(Fc||{}),Xn=(e=>(e.UNSUPPORTED_ATTACHMENT="unsupported_attachment",e.UNSUPPORTED_AUDIO="unsupported_audio",e.UNSUPPORTED_IMAGE="unsupported_image",e.UNSUPPORTED_TOOL_USE="unsupported_tool_use",e.UNSUPPORTED_GIZMO="unsupported_gizmo",e.UNSUPPORTED_CUSTOM_INSTRUCTIONS="unsupported_custom_instructions",e.UNSUPPORTED_TEMPORARY_CHAT="unsupported_temporary_chat",e.UNSUPPORTED_CANVAS="unsupported_canvas",e))(Xn||{}),Vy=(e=>(e.RATE_LIMIT="rate_limit",e))(Vy||{}),Ee=(e=>(e.Text="text",e.MultimodalText="multimodal_text",e.StructuredThoughts="thoughts",e.ReasoningRecap="reasoning_recap",e.TetherBrowsingCode="tether_browsing_code",e.Code="code",e.ExecutionOutput="execution_output",e.SystemError="system_error",e.SystemMessage="system_message",e.SystemContent="system_content",e.DeveloperContent="developer_content",e.TetherBrowsingDisplay="tether_browsing_display",e.TetherQuote="tether_quote",e.UserEditableContext="user_editable_context",e.ModelEditableContext="model_editable_context",e.SonicWebpage="sonic_webpage",e.ComputerOutput="computer_output",e.Error="error",e.SuperWidget="super_widget",e))(Ee||{}),Qt=(e=>(e.Audio="audio",e.AudioAssetPointer="audio_asset_pointer",e.ImageAssetPointer="image_asset_pointer",e.Image="image",e.AudioTranscription="audio_transcription",e.RealTimeUserAudioVideoAssetPointer="real_time_user_audio_video_asset_pointer",e.SimpleImageAssetPointer="simple_image_asset_pointer",e.ArbitraryAssetPointer="arbitrary_asset_pointer",e))(Qt||{}),yl=(e=>(e.Picker="Picker",e.Link="Link",e))(yl||{}),cs=(e=>(e.SEND="send",e.GIZMO_TAG="gizmo_tag",e.FILE_UPLOAD="file_upload",e.REASON="reason",e.DEEP_RESEARCH="deep_research",e.IMAGE_GEN="image_gen",e.WHAM="wham",e.ODYSSEY="odyssey",e))(cs||{}),Dj=(e=>(e.AUTHENTICATE="authenticate",e.AUTHENTICATE_SECONDARY="authenticate_secondary",e.NEW_CHAT="new_chat",e.FREE_USER_O3_MINI_HIGH="free_user_o3_mini_high",e.PAID_USER_O3_MINI_HIGH="paid_user_o3_mini_high",e.DEEP_RESEARCH_IN_CONTEXT_UPSELL="deep_research_in_context_upsell",e.TRY_CODEX="try_codex",e.TRY_TATERTOT="try_tatertot",e.NOTIFY_ADMIN_FOR_CREDITS="notify_admin_for_credits",e.ADD_CREDITS="add_credits",e.UPGRADE_TO_GO="upgrade_to_go",e.GET_PLUS="get_plus",e.GET_PRO="get_pro",e))(Dj||{}),zy=(e=>(e.DEEP_RESEARCH="deep_research",e.ODYSSEY="odyssey",e))(zy||{}),Lj=(e=>(e.VIEW="view",e.CLICK="click",e.DISMISS="dismiss",e))(Lj||{}),Fj=(e=>(e.FILE_UPLOAD="file_upload",e.AUTHENTICATE_LOGIN="authenticate_login",e.AUTHENTICATE_SIGNUP="authenticate_signup",e.GET_PLUS="get_plus",e.GET_PRO="get_pro",e.AGENT="agent",e.DISMISS="dismiss",e.GET_GO="get_go",e.GET_TEAM="get_team",e))(Fj||{}),V8=(e=>(e.SystemHint="systemHint",e))(V8||{});function q1e(e){return"start_index"in e?{startIndex:e.start_index,endIndex:e.end_index,symbol:e.symbol}:e}var jj=(e=>(e.InstantQuery="instant_query",e.ComposerSearch="composer_search",e.UrlSearch="url_search",e))(jj||{}),Uj=(e=>(e.RiskyDomainNotWatching="risky_domain_not_watching",e.UserInterrupted="user_interrupted",e.MaliciousInstructionDetected="malicious_instruction_detected",e.ModerationBlocked="moderation_blocked",e.Unknown="unknown",e))(Uj||{}),Bj=(e=>(e.ToolWeb="tool:web",e.Onboarding="onboarding",e.AppPairing="tool:app-pairing",e.IPL="campaign:ipl",e))(Bj||{}),z8=(e=>(e.Search="search",e.Canvas="canvas",e.ImageGen="image_gen_tool_enabled",e))(z8||{}),$8=(e=>(e.Search="search",e.Click="click",e.MultiClick="mclick",e.Lookup="lookup",e.OpenUrl="open_url",e.Open="open",e.Quote="quote",e.QuoteFull="quote_full",e.QuoteLines="quote_lines",e.Back="back",e.Scroll="scroll",e.Spinner="spinner",e))($8||{}),qj=(e=>(e.Bing="bing",e.Fortis="fortis",e))(qj||{}),Gj=(e=>(e.Starting="starting",e.Running="running",e.Done="done",e.Timeout="timeout",e.Error="error",e.Cancelled="cancelled",e))(Gj||{}),q_=(e=>(e.AUTO="auto",e))(q_||{}),Hj=(e=>(e.AUTO="auto",e.ON="reasoning",e.OFF="none",e.PRO="pro",e))(Hj||{});const Co="agent",Vj="~oai~s1~";function zj(e){let t=2166136261;for(let n=0,r=e.length;n<r;n++){const s=e.charCodeAt(n);t=Math.imul(t^s&255,16777619),t=Math.imul(t^s&65280,16777619)}return t>>>0}function Mn(e,t){if(typeof e!="number")throw new Error(`Unexpected: ${e}`);return t!=null&&e===$j(t)}const Sb={};function $j(e){return Sb[e]??(Sb[e]=zj(Vj+e))}const G1e="n7jupd",W8="-0dy553y",Wj=1338619165;function K8(e){return Mn(Wj,e+W8)}const Kj=3675352570;function H1e(e){return Mn(Kj,e+W8)}var Yj=(e=>(e[e.Setup=0]="Setup",e[e.Random=1]="Random",e[e.Animation=2]="Animation",e[e.Done=3]="Done",e[e.Thinking=4]="Thinking",e))(Yj||{});const X={Search:"search",Think:"reason",Research:"research",Canvas:"canvas",Picture:"picture",PictureV2:"picture_v2",Video:"video",ContextualAnswers:"contextual_answers",Slurm:"slurm",Moonshine:"moonshine",Tatertot:"tatertot",Agent:"agent"};function Zj(e){return Object.values(X).includes(e)}function Jj(e){return Zj(e)?e:Xj[e]}const Qj="study",Xj={connectors:X.Slurm,image:X.PictureV2,think:X.Think,[Qj]:X.Tatertot};var Y8=Symbol.for("immer-nothing"),wb=Symbol.for("immer-draftable"),Je=Symbol.for("immer-state");function ir(e,...t){throw new Error(`[Immer] minified error nr: ${e}. Full error at: https://bit.ly/3cXEKWf`)}var Va=Object.getPrototypeOf;function za(e){return!!e&&!!e[Je]}function Fs(e){return e?Z8(e)||Array.isArray(e)||!!e[wb]||!!e.constructor?.[wb]||ph(e)||mh(e):!1}var eU=Object.prototype.constructor.toString();function Z8(e){if(!e||typeof e!="object")return!1;const t=Va(e);if(t===null)return!0;const n=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;return n===Object?!0:typeof n=="function"&&Function.toString.call(n)===eU}function $a(e,t){hh(e)===0?Object.entries(e).forEach(([n,r])=>{t(n,r,e)}):e.forEach((n,r)=>t(r,n,e))}function hh(e){const t=e[Je];return t?t.type_:Array.isArray(e)?1:ph(e)?2:mh(e)?3:0}function G_(e,t){return hh(e)===2?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function J8(e,t,n){const r=hh(e);r===2?e.set(t,n):r===3?e.add(n):e[t]=n}function tU(e,t){return e===t?e!==0||1/e===1/t:e!==e&&t!==t}function ph(e){return e instanceof Map}function mh(e){return e instanceof Set}function Ut(e){return e.copy_||e.base_}function H_(e,t){if(ph(e))return new Map(e);if(mh(e))return new Set(e);if(Array.isArray(e))return Array.prototype.slice.call(e);if(!t&&Z8(e))return Va(e)?{...e}:Object.assign(Object.create(null),e);const n=Object.getOwnPropertyDescriptors(e);delete n[Je];let r=Reflect.ownKeys(n);for(let s=0;s<r.length;s++){const i=r[s],o=n[i];o.writable===!1&&(o.writable=!0,o.configurable=!0),(o.get||o.set)&&(n[i]={configurable:!0,writable:!0,enumerable:o.enumerable,value:e[i]})}return Object.create(Va(e),n)}function $y(e,t=!1){return gh(e)||za(e)||!Fs(e)||(hh(e)>1&&(e.set=e.add=e.clear=e.delete=nU),Object.freeze(e),t&&$a(e,(n,r)=>$y(r,!0))),e}function nU(){ir(2)}function gh(e){return Object.isFrozen(e)}var V_={};function bo(e){const t=V_[e];return t||ir(0,e),t}function rU(e,t){V_[e]||(V_[e]=t)}var Cl;function Qd(){return Cl}function sU(e,t){return{drafts_:[],parent_:e,immer_:t,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function Eb(e,t){t&&(bo("Patches"),e.patches_=[],e.inversePatches_=[],e.patchListener_=t)}function z_(e){$_(e),e.drafts_.forEach(iU),e.drafts_=null}function $_(e){e===Cl&&(Cl=e.parent_)}function xb(e){return Cl=sU(Cl,e)}function iU(e){const t=e[Je];t.type_===0||t.type_===1?t.revoke_():t.revoked_=!0}function Tb(e,t){t.unfinalizedDrafts_=t.drafts_.length;const n=t.drafts_[0];return e!==void 0&&e!==n?(n[Je].modified_&&(z_(t),ir(4)),Fs(e)&&(e=Xd(t,e),t.parent_||ef(t,e)),t.patches_&&bo("Patches").generateReplacementPatches_(n[Je].base_,e,t.patches_,t.inversePatches_)):e=Xd(t,n,[]),z_(t),t.patches_&&t.patchListener_(t.patches_,t.inversePatches_),e!==Y8?e:void 0}function Xd(e,t,n){if(gh(t))return t;const r=t[Je];if(!r)return $a(t,(s,i)=>Ob(e,r,t,s,i,n)),t;if(r.scope_!==e)return t;if(!r.modified_)return ef(e,r.base_,!0),r.base_;if(!r.finalized_){r.finalized_=!0,r.scope_.unfinalizedDrafts_--;const s=r.copy_;let i=s,o=!1;r.type_===3&&(i=new Set(s),s.clear(),o=!0),$a(i,(a,c)=>Ob(e,r,s,a,c,n,o)),ef(e,s,!1),n&&e.patches_&&bo("Patches").generatePatches_(r,n,e.patches_,e.inversePatches_)}return r.copy_}function Ob(e,t,n,r,s,i,o){if(za(s)){const a=i&&t&&t.type_!==3&&!G_(t.assigned_,r)?i.concat(r):void 0,c=Xd(e,s,a);if(J8(n,r,c),za(c))e.canAutoFreeze_=!1;else return}else o&&n.add(s);if(Fs(s)&&!gh(s)){if(!e.immer_.autoFreeze_&&e.unfinalizedDrafts_<1)return;Xd(e,s),(!t||!t.scope_.parent_)&&ef(e,s)}}function ef(e,t,n=!1){!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&$y(t,n)}function oU(e,t){const n=Array.isArray(e),r={type_:n?1:0,scope_:t?t.scope_:Qd(),modified_:!1,finalized_:!1,assigned_:{},parent_:t,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1};let s=r,i=Wy;n&&(s=[r],i=bl);const{revoke:o,proxy:a}=Proxy.revocable(s,i);return r.draft_=a,r.revoke_=o,a}var Wy={get(e,t){if(t===Je)return e;const n=Ut(e);if(!G_(n,t))return aU(e,n,t);const r=n[t];return e.finalized_||!Fs(r)?r:r===Rp(e.base_,t)?(Pp(e),e.copy_[t]=Sl(r,e)):r},has(e,t){return t in Ut(e)},ownKeys(e){return Reflect.ownKeys(Ut(e))},set(e,t,n){const r=Q8(Ut(e),t);if(r?.set)return r.set.call(e.draft_,n),!0;if(!e.modified_){const s=Rp(Ut(e),t),i=s?.[Je];if(i&&i.base_===n)return e.copy_[t]=n,e.assigned_[t]=!1,!0;if(tU(n,s)&&(n!==void 0||G_(e.base_,t)))return!0;Pp(e),Es(e)}return e.copy_[t]===n&&(n!==void 0||t in e.copy_)||Number.isNaN(n)&&Number.isNaN(e.copy_[t])||(e.copy_[t]=n,e.assigned_[t]=!0),!0},deleteProperty(e,t){return Rp(e.base_,t)!==void 0||t in e.base_?(e.assigned_[t]=!1,Pp(e),Es(e)):delete e.assigned_[t],e.copy_&&delete e.copy_[t],!0},getOwnPropertyDescriptor(e,t){const n=Ut(e),r=Reflect.getOwnPropertyDescriptor(n,t);return r&&{writable:!0,configurable:e.type_!==1||t!=="length",enumerable:r.enumerable,value:n[t]}},defineProperty(){ir(11)},getPrototypeOf(e){return Va(e.base_)},setPrototypeOf(){ir(12)}},bl={};$a(Wy,(e,t)=>{bl[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}});bl.deleteProperty=function(e,t){return bl.set.call(this,e,t,void 0)};bl.set=function(e,t,n){return Wy.set.call(this,e[0],t,n,e[0])};function Rp(e,t){const n=e[Je];return(n?Ut(n):e)[t]}function aU(e,t,n){const r=Q8(t,n);return r?"value"in r?r.value:r.get?.call(e.draft_):void 0}function Q8(e,t){if(!(t in e))return;let n=Va(e);for(;n;){const r=Object.getOwnPropertyDescriptor(n,t);if(r)return r;n=Va(n)}}function Es(e){e.modified_||(e.modified_=!0,e.parent_&&Es(e.parent_))}function Pp(e){e.copy_||(e.copy_=H_(e.base_,e.scope_.immer_.useStrictShallowCopy_))}var cU=class{constructor(e){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.produce=(t,n,r)=>{if(typeof t=="function"&&typeof n!="function"){const i=n;n=t;const o=this;return function(c=i,...l){return o.produce(c,u=>n.call(this,u,...l))}}typeof n!="function"&&ir(6),r!==void 0&&typeof r!="function"&&ir(7);let s;if(Fs(t)){const i=xb(this),o=Sl(t,void 0);let a=!0;try{s=n(o),a=!1}finally{a?z_(i):$_(i)}return Eb(i,r),Tb(s,i)}else if(!t||typeof t!="object"){if(s=n(t),s===void 0&&(s=t),s===Y8&&(s=void 0),this.autoFreeze_&&$y(s,!0),r){const i=[],o=[];bo("Patches").generateReplacementPatches_(t,s,i,o),r(i,o)}return s}else ir(1,t)},this.produceWithPatches=(t,n)=>{if(typeof t=="function")return(o,...a)=>this.produceWithPatches(o,c=>t(c,...a));let r,s;return[this.produce(t,n,(o,a)=>{r=o,s=a}),r,s]},typeof e?.autoFreeze=="boolean"&&this.setAutoFreeze(e.autoFreeze),typeof e?.useStrictShallowCopy=="boolean"&&this.setUseStrictShallowCopy(e.useStrictShallowCopy)}createDraft(e){Fs(e)||ir(8),za(e)&&(e=lU(e));const t=xb(this),n=Sl(e,void 0);return n[Je].isManual_=!0,$_(t),n}finishDraft(e,t){const n=e&&e[Je];(!n||!n.isManual_)&&ir(9);const{scope_:r}=n;return Eb(r,t),Tb(void 0,r)}setAutoFreeze(e){this.autoFreeze_=e}setUseStrictShallowCopy(e){this.useStrictShallowCopy_=e}applyPatches(e,t){let n;for(n=t.length-1;n>=0;n--){const s=t[n];if(s.path.length===0&&s.op==="replace"){e=s.value;break}}n>-1&&(t=t.slice(n+1));const r=bo("Patches").applyPatches_;return za(e)?r(e,t):this.produce(e,s=>r(s,t))}};function Sl(e,t){const n=ph(e)?bo("MapSet").proxyMap_(e,t):mh(e)?bo("MapSet").proxySet_(e,t):oU(e,t);return(t?t.scope_:Qd()).drafts_.push(n),n}function lU(e){return za(e)||ir(10,e),X8(e)}function X8(e){if(!Fs(e)||gh(e))return e;const t=e[Je];let n;if(t){if(!t.modified_)return t.base_;t.finalized_=!0,n=H_(e,t.scope_.immer_.useStrictShallowCopy_)}else n=H_(e,!0);return $a(n,(r,s)=>{J8(n,r,X8(s))}),t&&(t.finalized_=!1),n}function uU(){class e extends Map{constructor(c,l){super(),this[Je]={type_:2,parent_:l,scope_:l?l.scope_:Qd(),modified_:!1,finalized_:!1,copy_:void 0,assigned_:void 0,base_:c,draft_:this,isManual_:!1,revoked_:!1}}get size(){return Ut(this[Je]).size}has(c){return Ut(this[Je]).has(c)}set(c,l){const u=this[Je];return o(u),(!Ut(u).has(c)||Ut(u).get(c)!==l)&&(n(u),Es(u),u.assigned_.set(c,!0),u.copy_.set(c,l),u.assigned_.set(c,!0)),this}delete(c){if(!this.has(c))return!1;const l=this[Je];return o(l),n(l),Es(l),l.base_.has(c)?l.assigned_.set(c,!1):l.assigned_.delete(c),l.copy_.delete(c),!0}clear(){const c=this[Je];o(c),Ut(c).size&&(n(c),Es(c),c.assigned_=new Map,$a(c.base_,l=>{c.assigned_.set(l,!1)}),c.copy_.clear())}forEach(c,l){const u=this[Je];Ut(u).forEach((d,f,h)=>{c.call(l,this.get(f),f,this)})}get(c){const l=this[Je];o(l);const u=Ut(l).get(c);if(l.finalized_||!Fs(u)||u!==l.base_.get(c))return u;const d=Sl(u,l);return n(l),l.copy_.set(c,d),d}keys(){return Ut(this[Je]).keys()}values(){const c=this.keys();return{[Symbol.iterator]:()=>this.values(),next:()=>{const l=c.next();return l.done?l:{done:!1,value:this.get(l.value)}}}}entries(){const c=this.keys();return{[Symbol.iterator]:()=>this.entries(),next:()=>{const l=c.next();if(l.done)return l;const u=this.get(l.value);return{done:!1,value:[l.value,u]}}}}[Symbol.iterator](){return this.entries()}}function t(a,c){return new e(a,c)}function n(a){a.copy_||(a.assigned_=new Map,a.copy_=new Map(a.base_))}class r extends Set{constructor(c,l){super(),this[Je]={type_:3,parent_:l,scope_:l?l.scope_:Qd(),modified_:!1,finalized_:!1,copy_:void 0,base_:c,draft_:this,drafts_:new Map,revoked_:!1,isManual_:!1}}get size(){return Ut(this[Je]).size}has(c){const l=this[Je];return o(l),l.copy_?!!(l.copy_.has(c)||l.drafts_.has(c)&&l.copy_.has(l.drafts_.get(c))):l.base_.has(c)}add(c){const l=this[Je];return o(l),this.has(c)||(i(l),Es(l),l.copy_.add(c)),this}delete(c){if(!this.has(c))return!1;const l=this[Je];return o(l),i(l),Es(l),l.copy_.delete(c)||(l.drafts_.has(c)?l.copy_.delete(l.drafts_.get(c)):!1)}clear(){const c=this[Je];o(c),Ut(c).size&&(i(c),Es(c),c.copy_.clear())}values(){const c=this[Je];return o(c),i(c),c.copy_.values()}entries(){const c=this[Je];return o(c),i(c),c.copy_.entries()}keys(){return this.values()}[Symbol.iterator](){return this.values()}forEach(c,l){const u=this.values();let d=u.next();for(;!d.done;)c.call(l,d.value,d.value,this),d=u.next()}}function s(a,c){return new r(a,c)}function i(a){a.copy_||(a.copy_=new Set,a.base_.forEach(c=>{if(Fs(c)){const l=Sl(c,a);a.drafts_.set(c,l),a.copy_.add(l)}else a.copy_.add(c)}))}function o(a){a.revoked_&&ir(3,JSON.stringify(Ut(a)))}rU("MapSet",{proxyMap_:t,proxySet_:s})}var Kn=new cU,Sr=Kn.produce;Kn.produceWithPatches.bind(Kn);Kn.setAutoFreeze.bind(Kn);Kn.setUseStrictShallowCopy.bind(Kn);Kn.applyPatches.bind(Kn);Kn.createDraft.bind(Kn);Kn.finishDraft.bind(Kn);const dU=e=>(t,n,r)=>(r.setState=(s,i,...o)=>{const a=typeof s=="function"?Sr(s):s;return t(a,i,...o)},e(r.setState,n,r)),Ri=dU,fU={bannerInfo:null,modelLimits:[],blockedFeatures:[],isInitialLoad:!0,limitsProgress:[]},Is=vt(Ri(()=>({...fU}))),Ky={[X.Research]:cs.DEEP_RESEARCH,[X.PictureV2]:cs.IMAGE_GEN,[X.Think]:cs.REASON};Ky[Co]=cs.ODYSSEY;const V1e=e=>K8(e)?cs.ODYSSEY:Ky[e]??null,z1e=e=>{for(const[t,n]of Object.entries(Ky))if(n===e)return t;return null},hU={[X.Research]:zy.DEEP_RESEARCH};function pU(e){return K8(e)?zy.ODYSSEY:hU[e]??null}function yi(e){return new Date(e.resets_after)>new Date}const mU=e=>{const t=(e.model_limits?.filter(yi)??[]).map(r=>r.model_slug),n=new Set(Is.getState().modelLimits.filter(yi).map(r=>r.model_slug));return t.length!==n.size||!t.every(r=>n.has(r))},ex={updateDetails:({banner_info:e,model_limits:t,blocked_features:n,limits_progress:r})=>{Is.setState(s=>{const i=Xe();gt(i,"3886886465").get("should_overwrite_banner_info",!1)?s.bannerInfo=e:s.bannerInfo??=e,s.isInitialLoad=!1,s.blockedFeatures=s.blockedFeatures.concat(n).filter(yi),s.modelLimits=s.modelLimits.concat(t??[]).filter(yi),s.limitsProgress=r??[]})},dismissBanner:()=>{Is.setState(e=>{e.bannerInfo=null})},reset:()=>{Is.setState(e=>{e.blockedFeatures=[],e.bannerInfo=null})}};function $1e(){return Is(({bannerInfo:e})=>{const{resets_after:t}=e??{};return!e||t!=null&&!yi({resets_after:t})?null:e})}function _h(e){return Is(({blockedFeatures:t})=>{if(!e)return null;const n=t.find(({name:r})=>r===e);return n&&yi(n)?n:null})}function gU(){return _h(cs.SEND)}function W1e(){return!!gU()}function K1e(){return _h(cs.FILE_UPLOAD)}function Y1e(){return _h(cs.GIZMO_TAG)}function Z1e(){return _h(cs.DEEP_RESEARCH)}function _U(){return Is(({modelLimits:t})=>t).filter(yi)}function J1e(e){return Is(({limitsProgress:n})=>n).filter(n=>e({...n,bySystemHint:r=>n.feature_name===pU(r)}))[0]}function Q1e(){return Is(({blockedFeatures:t})=>t).filter(yi)}const vU=vt(()=>null),yU=vt(()=>null),CU=vt(()=>null);var tx=(e=>(e.UnexpectedSSOLogin="unexpected_sso_login",e.SSOMismatch="sso_mismatch",e.RequireSSOLogin="require_sso_login",e))(tx||{});const bU=Object.freeze(new Set(Object.values(tx)));function SU(e){return e?bU.has(e):!1}const wU=vt(()=>null),EU="modulepreload",xU=function(e){return"{{.assetPrefix}}/"+e},kb={},$=function(t,n,r){let s=Promise.resolve();if(n&&n.length>0){let o=function(l){return Promise.all(l.map(u=>Promise.resolve(u).then(d=>({status:"fulfilled",value:d}),d=>({status:"rejected",reason:d}))))};document.getElementsByTagName("link");const a=document.querySelector("meta[property=csp-nonce]"),c=a?.nonce||a?.getAttribute("nonce");s=o(n.map(l=>{if(l=xU(l),l in kb)return;kb[l]=!0;const u=l.endsWith(".css"),d=u?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${l}"]${d}`))return;const f=document.createElement("link");if(f.rel=u?"stylesheet":EU,u||(f.as="script"),f.crossOrigin="",f.href=l,c&&f.setAttribute("nonce",c),document.head.appendChild(f),u)return new Promise((h,g)=>{f.addEventListener("load",h),f.addEventListener("error",()=>g(new Error(`Unable to preload CSS for ${l}`)))})}))}function i(o){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=o,window.dispatchEvent(a),!a.defaultPrevented)throw o}return s.then(o=>{for(const a of o||[])a.status==="rejected"&&i(a.reason);return t().catch(i)})},Ab=(e,t,n)=>{const r=e[t];return r?typeof r=="function"?r():Promise.resolve(r):new Promise((s,i)=>{(typeof queueMicrotask=="function"?queueMicrotask:setTimeout)(i.bind(null,new Error("Unknown variable dynamic import: "+t+(t.split("/").length!==n?". Note that variables only represent file names one level deep.":""))))})},nx=()=>{},TU=()=>nx;function OU(e,t=nx){return m.useSyncExternalStore(TU,e,t)}const vh="en-US",X1e=["am","ar","bg-BG","bn-BD","bs-BA","ca-ES","cs-CZ","da-DK","de-DE","el-GR","en-US","es-419","es-ES","et-EE","fi-FI","fr-CA","fr-FR","gu-IN","hi-IN","hr-HR","hu-HU","hy-AM","id-ID","is-IS","it-IT","ja-JP","ka-GE","kk","kn-IN","ko-KR","lt","lv-LV","mk-MK","ml","mn","mr-IN","ms-MY","my-MM","nb-NO","nl-NL","pa","pl-PL","pt-BR","pt-PT","ro-RO","ru-RU","sk-SK","sl-SI","so-SO","sq-AL","sr-RS","sv-SE","sw-TZ","ta-IN","te-IN","th-TH","tl","tr-TR","uk-UA","ur","vi-VN","zh-CN","zh-HK","zh-TW"],kU=["es-419","fr-FR","zh-TW"],e0e={am:"አማርኛ",ar:"العربية","bg-BG":"български","bn-BD":"বাংলা","bs-BA":"bosanski","ca-ES":"català","cs-CZ":"čeština","da-DK":"dansk","de-DE":"Deutsch","el-GR":"Ελληνικά","en-US":"English (US)","es-419":"español (Latinoamérica)","es-ES":"español (España)","et-EE":"eesti","fi-FI":"suomi","fr-CA":"français (Canada)","fr-FR":"français (France)","gu-IN":"ગુજરાતી","hi-IN":"हिन्दी","hr-HR":"hrvatski","hu-HU":"magyar","hy-AM":"հայերեն","id-ID":"Indonesia","is-IS":"íslenska","it-IT":"italiano","ja-JP":"日本語","ka-GE":"ქართული",kk:"қазақ тілі","kn-IN":"ಕನ್ನಡ","ko-KR":"한국어",lt:"lietuvių","lv-LV":"latviešu","mk-MK":"македонски",ml:"മലയാളം",mn:"монгол","mr-IN":"मराठी","ms-MY":"Bahasa Melayu","my-MM":"မြန်မာ","nb-NO":"norsk bokmål","nl-NL":"Nederlands",pa:"ਪੰਜਾਬੀ","pl-PL":"polski","pt-BR":"português (Brasil)","pt-PT":"português (Portugal)","ro-RO":"română","ru-RU":"русский","sk-SK":"slovenčina","sl-SI":"slovenščina","so-SO":"Soomaali","sq-AL":"shqip","sr-RS":"српски","sv-SE":"svenska","sw-TZ":"Kiswahili","ta-IN":"தமிழ்","te-IN":"తెలుగు","th-TH":"ไทย",tl:"Tagalog","tr-TR":"Türkçe","uk-UA":"українська",ur:"اردو","vi-VN":"Tiếng Việt","zh-CN":"简体中文","zh-HK":"繁體中文（香港）","zh-TW":"繁體中文（台灣）"};function AU(){return Array.from(new Set(Object.values(jc)))}const jc={am:"am",ar:"ar",bg:"bg-BG","bg-bg":"bg-BG",bn:"bn-BD","bn-bd":"bn-BD",bs:"bs-BA","bs-ba":"bs-BA",ca:"ca-ES","ca-es":"ca-ES",cs:"cs-CZ","cs-cz":"cs-CZ",da:"da-DK","da-dk":"da-DK",de:"de-DE","de-de":"de-DE",el:"el-GR","el-gr":"el-GR",en:"en-US","en-us":"en-US",es:"es-ES","es-es":"es-ES","es-419":"es-419","es-ar":"es-419","es-bo":"es-419","es-br":"es-419","es-bz":"es-419","es-cl":"es-419","es-co":"es-419","es-cr":"es-419","es-cu":"es-419","es-do":"es-419","es-ec":"es-419","es-gt":"es-419","es-hn":"es-419","es-jp":"es-419","es-mx":"es-419","es-ni":"es-419","es-pa":"es-419","es-pe":"es-419","es-pr":"es-419","es-py":"es-419","es-sv":"es-419","es-us":"es-419","es-uy":"es-419","es-ve":"es-419",et:"et-EE","et-ee":"et-EE",fi:"fi-FI","fi-fi":"fi-FI",fr:"fr-FR","fr-ca":"fr-CA","fr-fr":"fr-FR",gu:"gu-IN","gu-in":"gu-IN",hi:"hi-IN","hi-in":"hi-IN",hr:"hr-HR","hr-hr":"hr-HR",hu:"hu-HU","hu-hu":"hu-HU",hy:"hy-AM","hy-am":"hy-AM",id:"id-ID","id-id":"id-ID",is:"is-IS","is-is":"is-IS",it:"it-IT","it-it":"it-IT",ja:"ja-JP","ja-jp":"ja-JP",ka:"ka-GE","ka-ge":"ka-GE",kk:"kk",kn:"kn-IN","kn-in":"kn-IN",ko:"ko-KR","ko-kr":"ko-KR",lt:"lt",lv:"lv-LV","lv-lv":"lv-LV",mk:"mk-MK","mk-mk":"mk-MK",ml:"ml",mn:"mn",mr:"mr-IN","mr-in":"mr-IN",ms:"ms-MY","ms-my":"ms-MY",my:"my-MM","my-mm":"my-MM",nb:"nb-NO","nb-no":"nb-NO",nl:"nl-NL","nl-nl":"nl-NL",pa:"pa",pl:"pl-PL","pl-pl":"pl-PL",pt:"pt-BR","pt-br":"pt-BR","pt-pt":"pt-PT","pt-ao":"pt-PT","pt-ch":"pt-PT","pt-cv":"pt-PT","pt-fr":"pt-PT","pt-gq":"pt-PT","pt-gw":"pt-PT","pt-lu":"pt-PT","pt-mo":"pt-PT","pt-mz":"pt-PT","pt-st":"pt-PT","pt-tl":"pt-PT",ro:"ro-RO","ro-ro":"ro-RO",ru:"ru-RU","ru-ru":"ru-RU",sk:"sk-SK","sk-sk":"sk-SK",sl:"sl-SI","sl-si":"sl-SI",so:"so-SO","so-so":"so-SO",sq:"sq-AL","sq-al":"sq-AL",sr:"sr-RS","sr-rs":"sr-RS",sv:"sv-SE","sv-se":"sv-SE",sw:"sw-TZ","sw-tz":"sw-TZ",ta:"ta-IN","ta-in":"ta-IN",te:"te-IN","te-in":"te-IN",th:"th-TH","th-th":"th-TH",tl:"tl",tr:"tr-TR","tr-tr":"tr-TR",uk:"uk-UA","uk-ua":"uk-UA",ur:"ur",vi:"vi-VN","vi-vn":"vi-VN",zh:"zh-CN","zh-cn":"zh-CN","zh-hans":"zh-CN","zh-hans-cn":"zh-CN","zh-tw":"zh-TW","zh-hant":"zh-TW","zh-hant-tw":"zh-TW","zh-hk":"zh-HK","zh-hant-hk":"zh-HK"},rx=new Set(["ar"]);function sx(e){const t=e.replace("_","-").toLowerCase();if(t in jc)return jc[t];const n=t.split("-");for(let r=n.length-1;r>=1;r--){const s=n.slice(0,r).join("-");if(s in jc)return jc[s]}return null}const rl={};function ix(e){return kU.includes(e)}async function MU(e,t){return e===vh?rl:(await(ix(e)&&t?Ab(Object.assign({"./locales-mt/es-419.json":()=>$(()=>import("./ivlhfjo6i8ff9b96.js"),[]),"./locales-mt/fr-FR.json":()=>$(()=>import("./eflrysbb0lt99kvq.js"),[]),"./locales-mt/zh-TW.json":()=>$(()=>import("./mul7l68srkjv1jk3.js"),[])}),`./locales-mt/${e}.json`,3):Ab(Object.assign({"./locales/am.json":()=>$(()=>import("./b6cgg059esw60uzw.js"),[]),"./locales/ar.json":()=>$(()=>import("./8t19uud1f2gh9cc7.js"),[]),"./locales/bg-BG.json":()=>$(()=>import("./ksn7clnuxb1kjb9u.js"),[]),"./locales/bn-BD.json":()=>$(()=>import("./obzcbxystd8d4sx5.js"),[]),"./locales/bs-BA.json":()=>$(()=>import("./owuqcd0xzir5i0b2.js"),[]),"./locales/ca-ES.json":()=>$(()=>import("./fkpk6a2dbroh1kf7.js"),[]),"./locales/cs-CZ.json":()=>$(()=>import("./g75axlax8auemn97.js"),[]),"./locales/da-DK.json":()=>$(()=>import("./nim3rf4fo302tbf6.js"),[]),"./locales/de-DE.json":()=>$(()=>import("./lxvda3jwtdjjlctv.js"),[]),"./locales/el-GR.json":()=>$(()=>import("./ckpb21l2jako3mq2.js"),[]),"./locales/es-419.json":()=>$(()=>import("./e78dn2ruo4274tjb.js"),[]),"./locales/es-ES.json":()=>$(()=>import("./mmijckg8rhqf5kl7.js"),[]),"./locales/et-EE.json":()=>$(()=>import("./ggvlbg1z18ymuzjs.js"),[]),"./locales/fi-FI.json":()=>$(()=>import("./jay6821s6wyaqk4x.js"),[]),"./locales/fr-CA.json":()=>$(()=>import("./nx2h7rux9n0sfrlw.js"),[]),"./locales/fr-FR.json":()=>$(()=>import("./ch65ej0thiwbsnfg.js"),[]),"./locales/gu-IN.json":()=>$(()=>import("./ijlva13i41trmflb.js"),[]),"./locales/he-IL.json":()=>$(()=>import("./h0pte8pfxhise50n.js"),[]),"./locales/hi-IN.json":()=>$(()=>import("./ikgmjgastx8y10la.js"),[]),"./locales/hr-HR.json":()=>$(()=>import("./otw6hyhrd5n9ypkg.js"),[]),"./locales/hu-HU.json":()=>$(()=>import("./jn70pvnaibbbiy4c.js"),[]),"./locales/hy-AM.json":()=>$(()=>import("./ktogfzpkp9dup5hh.js"),[]),"./locales/id-ID.json":()=>$(()=>import("./efbzmt3r3i5o5m6i.js"),[]),"./locales/is-IS.json":()=>$(()=>import("./j8ir21irf0fyu5f1.js"),[]),"./locales/it-IT.json":()=>$(()=>import("./bxaugymsolio5gpu.js"),[]),"./locales/ja-JP.json":()=>$(()=>import("./kpkao05j7i9w4y91.js"),[]),"./locales/ka-GE.json":()=>$(()=>import("./nbztis938wt0sw22.js"),[]),"./locales/kk.json":()=>$(()=>import("./hluv81altpawkgd8.js"),[]),"./locales/kn-IN.json":()=>$(()=>import("./edkt19bv972hvcfr.js"),[]),"./locales/ko-KR.json":()=>$(()=>import("./c474m7ez2fs6snfq.js"),[]),"./locales/lt.json":()=>$(()=>import("./nha7p79izie8a124.js"),[]),"./locales/lv-LV.json":()=>$(()=>import("./csw2mn6tlg1zn7d5.js"),[]),"./locales/mk-MK.json":()=>$(()=>import("./nmtf50v71fykihxz.js"),[]),"./locales/ml.json":()=>$(()=>import("./l2b3wlwhphr31laf.js"),[]),"./locales/mn.json":()=>$(()=>import("./dkn1ta32vnvsvboi.js"),[]),"./locales/mr-IN.json":()=>$(()=>import("./nwvbae3e9th6b0z2.js"),[]),"./locales/ms-MY.json":()=>$(()=>import("./pjeij84hhlgj3h2z.js"),[]),"./locales/my-MM.json":()=>$(()=>import("./mfx6htkha0ussa5u.js"),[]),"./locales/nb-NO.json":()=>$(()=>import("./e46mhynp8akjk1b0.js"),[]),"./locales/nl-NL.json":()=>$(()=>import("./x0msg4ivxon8ud3s.js"),[]),"./locales/pa.json":()=>$(()=>import("./id3q972n3om6bm1l.js"),[]),"./locales/pl-PL.json":()=>$(()=>import("./lxrpuphkk2cj9cdl.js"),[]),"./locales/pt-BR.json":()=>$(()=>import("./lycsnwzuhfx6bp3h.js"),[]),"./locales/pt-PT.json":()=>$(()=>import("./nrjv9wa336bqjsf8.js"),[]),"./locales/ro-RO.json":()=>$(()=>import("./efwfjanyrxfnn438.js"),[]),"./locales/ru-RU.json":()=>$(()=>import("./bfaz8lnjvrfujdu4.js"),[]),"./locales/sk-SK.json":()=>$(()=>import("./g0hm7fy10bv81lkg.js"),[]),"./locales/sl-SI.json":()=>$(()=>import("./ihn9sq3nrwxp6kiz.js"),[]),"./locales/so-SO.json":()=>$(()=>import("./dpksj2o3w57zl37v.js"),[]),"./locales/sq-AL.json":()=>$(()=>import("./f3uxr5xwsyxrajwy.js"),[]),"./locales/sr-RS.json":()=>$(()=>import("./fxoux993vvaurnv8.js"),[]),"./locales/sv-SE.json":()=>$(()=>import("./b4dgmmq4wku8tkjc.js"),[]),"./locales/sw-TZ.json":()=>$(()=>import("./fnhcjgtpklqh2b4y.js"),[]),"./locales/ta-IN.json":()=>$(()=>import("./frxbjpazyf6td2e8.js"),[]),"./locales/te-IN.json":()=>$(()=>import("./fuh2v40e3iibqzwf.js"),[]),"./locales/th-TH.json":()=>$(()=>import("./jpivmgetobbtdhpn.js"),[]),"./locales/tl.json":()=>$(()=>import("./l80lvnblderipqmq.js"),[]),"./locales/tr-TR.json":()=>$(()=>import("./htcwl1pnxgfat1ha.js"),[]),"./locales/uk-UA.json":()=>$(()=>import("./k4eb1q3pr2dzmygo.js"),[]),"./locales/ur.json":()=>$(()=>import("./n9jo91736zi4reu8.js"),[]),"./locales/vi-VN.json":()=>$(()=>import("./h9tl2c5ys6sx1qv2.js"),[]),"./locales/zh-CN.json":()=>$(()=>import("./jba3fh5chephbboq.js"),[]),"./locales/zh-HK.json":()=>$(()=>import("./g2wxm1k4exeeb8q3.js"),[]),"./locales/zh-TW.json":()=>$(()=>import("./j0sz4oqr36nbdh8l.js"),[])}),`./locales/${e}.json`,3))).default}const IU=365*24*60*60,t0e=e=>{e==null?de.deleteCookie(ie.PreferredLocale):de.setCookie(ie.PreferredLocale,e,{maxAge:IU}),window.location.reload()},n0e=()=>{const e=de.getCookie(ie.PreferredLocale);return e!=null?sx(e):null},Wr=window.localStorage;var Qe=(e=>(e.Theme="theme",e.NextAuth="nextauth.message",e.IsNoAuthChatTrainingEnabled="oai/apps/isNoAuthChatTrainingEnabled",e.IsNavigationCollapsed="UiState.isNavigationCollapsed.1",e.IsHistoryCollapsed="UiState.isOnlyShowingRecents.1",e.ChatThreadFlyoutState="UiState.chatThreadFlyoutState",e.IsGptListCollapsed="UiState.isGptListCollapsed",e.LastUsedModel="oai/apps/lastModelUsed",e.EnabledPlugins="oai/enabledPluginIds",e.HasSeenNewChatModal="oai/apps/hasSeenNewChatModal",e.HasSeenMeetChatGptModal="oai/apps/hasSeenMeetChatGptModal",e.HasSignedUpForPlusUpgradeWaitlistV1="oai/apps/HasSignedUpForPlusUpgradeWaitlist",e.HasSignedUpForPlusUpgradeWaitlistV2="oai/apps/HasSignedUpForPlusUpgradeWaitlistV2",e.HasSignedUpForTeamUpgradeWaitlistV1="oai/apps/HasSignedUpForTeamUpgradeWaitlist",e.HasSignedUpForTeamUpgradeWaitlistV2="oai/apps/HasSignedUpForTeamUpgradeWaitlistV2",e.HasDismissedUpgradeInviteModal="oai/apps/hasDismissedUpgradeInviteModal",e.GizmoEditorTab="oai/apps/gizmoEditorTab",e.GizmoDiscoveryLocale="oai/apps/gizmoDiscoveryLocale",e.NoAuthRateLimitState="oai/apps/noAuthRateLimitState",e.RestoreMessageAfterOauthRedirect="oai/apps/restoreMessageAfterOauthRedirect",e.HasSeenAdaInteractiveChart="oai/apps/hasSeenAdaInteractiveChart",e.HasSeenAdaInteractiveTable="oai/apps/hasSeenAdaInteractiveTable",e.SearchSettings="oai/apps/searchSettings",e.NoAuthBannerDisclaimerClientThreadId="oai/apps/noAuthBannerDisclaimerClientThreadId",e.NoAuthHasAcceptedFooterDisclaimer="oai/apps/noAuthHasAcceptedFooterDisclaimer",e.NoAuthUserMessageCount="oai/apps/noAuthUserMessageCount",e.HasSeenNoAuthImagegenNux="oai/apps/hasSeenNoAuthImagegenNux",e.LoggedInUserMessageCount="oai/apps/loggedInUserMessageCount",e.NoAuthHasDismissedSoftRateLimitModal="oai/apps/noAuthHasDismissedSoftRateLimitModal",e.NoAuthHasSeenGpt4oModal="oai/apps/noAuthHasSeenGpt4oModal",e.MemoryFullBannerDismissed="oai/apps/memoryFullBannerDismissed",e.IndepthFeedbackDismissedAt="oai/apps/indepthFeedbackDismissedAt",e.AdvancedVoiceOnMobileAnnouncementCount="oai/apps/oai/apps/hasSeenAdvancedVoiceOnMobile/2024-09-26",e.CheckoutFrom="oai/apps/checkout_from",e.HasConfirmedCanvasCodeExecution="oai/apps/hasConfirmedCanvasCodeExecution",e.CODE_EXECUTION_DOMAIN_ALLOW_LIST="oai/apps/codeExecutionDomainAllowlistWithTTL",e.TasksHasSeenProjectDisclaimerBanner="oai/apps/tasksHasSeenProjectDisclaimerBanner",e.ExpandSummarizedCoT="oai/apps/ExpandSummarizedCoT",e.PromoCode="oai/apps/promoCode",e.LastPageLoadDate="oai/apps/lastPageLoadDate",e.NoAuthMadlibsModalState="oai/apps/noAuthMadlibsModalState",e.d2dee219="oai/apps/d2dee219",e.ReferralCode="oai/apps/referralCode",e.LastFeedLoad="oai/apps/2dc5214a",e.VoiceLastUsed="oai/apps/voiceLastUsed",e.ChatTheme="oai/apps/chatTheme",e.ConversationDrafts="oai/apps/conversationDrafts",e.DebugSettings="oai/apps/debugSettings",e.LastEnvironment="oai/apps/l1239dk1/a3f4b29d",e.PromptDraft="oai/apps/l1239dk1/c7e2d18f",e.ProposedTasks="oai/apps/l1239dk1/8fa94c1e",e.ReactQueryDevtoolsVisible="oai/apps/l1239dk1/3e2d18f",e.WhamForcedRateLimitRemaining="oai/apps/l1239dk1/49292001",e.WhamChangelogClickedDate="oai/apps/l1239dk1/4b7d9e2f",e.WhamRepoDownloadDurations="oai/apps/l1239dk1/9182cd99",e.WhamBestOfN="oai/apps/l1239dk1/109b6e28",e.WhamImageSnapshot="oai/apps/l1239dk1/4kdf92l2",e.WhamShowFullDiff="oai/apps/l1239dk1/7a8d45ff",e.SegmentUserId="ajs_user_id",e.SegmentUserTraits="ajs_user_traits",e.MessageFollowupsStoreState="oai/apps/messageFollowupsStoreState",e.JumpToShade="jump-to-shade",e.HasManuallyClosedLanguageUpsellBanner="oai/apps/hasManuallyClosedLanguageUpsellBanner",e.PluginsAuthRedirect="oai/apps/plugins/authRedirect",e.SelectedSources="oai/apps/connectors/selectedSources",e.SelectedGithubRepos="oai/apps/connectors/selectedGithubRepos",e.ConnectorOAuthFlowType="oai/apps/connectors/oauthFlowType",e.SubscriptionFailedBanner="oai/apps/subscriptionFailedBanner",e.HasDismissedTeamsNoAuthUpsell="oai/apps/hasDismissedTeamsNoAuthUpsell",e.FinchAdminNotified="oai/apps/finchAdminNotified",e.GetTeamPillDismissed="oai/apps/getTeamPillDismissed",e.CARecommendedPromptsUpsell="oai/apps/caRecommendedPromptsUpsell",e.ChinookStartupInfo="oai/apps/chinookStartupInfo",e.ModelSlugStatsOverride="oai/apps/modelSlugStatsOverride",e.ShortcutLinks="oai/apps/shortcutLinks",e.O3MiniHighInContextUpsellBanner="oai/apps/o3MiniHighInContextUpsellBanner",e.TatertotInContextUpsellBannerV2="oai/apps/tatertotInContextUpsellBannerV2",e.ImageGenProgressUpsellV2="oai/apps/imageGenProgressUpsellV2",e.NoAuthHasDismissedBurritoUpsellModal="oai/apps/noAuthHasDismissedBurritoUpsellModal",e.HasDismissedMobileAppUpsellBanner="oai/apps/hasDismissedMobileAppUpsellBanner",e.HasDismissedMoodengUpsellBanner="oai/apps/hasDismissedMoodengUpsellBanner",e.LastSeenPlusUpsellBannerAt="oai/apps/lastSeenPlusUpsellBannerAt",e))(Qe||{});class _t{static setItem(t,n,r){if(!Wr)return;const s=gd(t,r);Wr.setItem(s,JSON.stringify(n))}static getItem(t,n){if(!Wr)return null;try{const r=gd(t,n),s=Wr.getItem(r);return typeof s=="string"?JSON.parse(s):s}catch{return null}}static removeItem(t,n){if(Wr){const r=gd(t,n);return Wr.removeItem(r)}}static DANGER_SECRET_FOLDERS_ONLY_setItem(t,n){if(!Wr){console.warn(`You cannot set localStorage server-side (${t})`);return}Wr.setItem(t,JSON.stringify(n))}static DANGER_SECRET_FOLDERS_ONLY_getItem(t){if(!Wr)return console.warn(`You cannot get localStorage server-side (${t})`),null;const n=Wr.getItem(t);return typeof n=="string"?JSON.parse(n):n}}function gd(e,t){const n=[e];return t!==void 0&&(t.userId!=null&&n.push(t.userId),t.workspaceId!=null&&n.push(t.workspaceId)),n.join("/")}const Mb=100,wl=vt()(Ri(()=>_t.getItem(Qe.ConversationDrafts)??{drafts:[],userId:null})),Yy=e=>{wl.setState(e),_t.setItem(Qe.ConversationDrafts,e)},Zy=e=>e??"null_thread",r0e=(e,t,n)=>{const r=Zy(e);let i=wl.getState().userId===n?wl.getState().drafts:[];const o=i.findIndex(c=>c.id===r),a={id:r,content:t,timestamp:Date.now()};o!==-1?i[o]=a:i.push(a),i.length>Mb&&(i=i.sort((c,l)=>l.timestamp-c.timestamp).slice(0,Mb)),Yy({drafts:i,userId:n})},NU=e=>{const t=Zy(e);return wl.getState().drafts.find(n=>n.id===t)},s0e=e=>{const t=Zy(e),n=wl.getState().drafts.filter(r=>r.id!==t);Yy({drafts:n,userId:null})},RU=()=>{Yy({drafts:[],userId:null})};function PU(e,t,n){if(n)return t??void 0;if(!e)return;const r=e.trim();if(!r)return;const s=r.split(/\s+/);if(s.length===0)return;const i=s[0];return i.indexOf("@")!==-1||/^\d+$/.test(i)?void 0:i.replace(/[^a-zA-ZÀ-ž]+/g,"")}function i0e(e,t,n){const r=PU(t?.name,t?.first_name,n);let s="";e&&("object"in e&&e.object==="user_system_message_detail"?s=e.name_user_message:s=e.nameUserMessage??"");const i=s.trim();return(e?.enabled??!0)&&i?i:r}function DU(){de.deleteCookie(ie.GreetingName)}const Ca="@@",Jy=[],tf=new Map;function Ko(e,t,n,r){if(tf.has(e)||e==="Ref")throw new Error(`Already registered pickler ${e}`);const s={key:e,test:t,pickle:n,unpickle:r};tf.set(e,s),Jy.push(s)}function ox(){const e=[],t=new Map;return function(n,r){for(;e.length&&e[e.length-1][0]!==this;){const i=e.pop()[1];typeof i=="object"&&i!=null&&t.set(i,t.size)}const s=this[n];if(typeof s=="object"&&s!=null){const i=t.get(s);if(i!=null)return{[Ca]:"Ref","":i}}for(const i of Jy)if(i.test(s)){const o={[Ca]:i.key,"":i.pickle(s)};return e.push([o,s]),o}if(typeof r=="object"&&r!=null){if(Ca in r)throw new Error(`Unexpected ${Ca} property`);e.push([r,s])}return r}}function LU(){const e=[];return function(t,n){if(typeof n!="object"||n==null)return n;if(Ca in n){const{[Ca]:r,"":s}=n;if(r==="Ref")return e[s];const i=tf.get(r);if(!i)throw Error(`Unknown pickle key ${r}`);if(n=i.unpickle(s),typeof n!="object"||n==null)return n}return e.push(n),n}}function FU(){Jy.length=0,tf.clear(),Ko("Map",e=>e instanceof Map,e=>[...e.entries()],e=>new Map(e)),Ko("Set",e=>e instanceof Set,e=>[...e.keys()],e=>new Set(e)),Ko("Date",e=>e instanceof Date,e=>e.toISOString(),e=>new Date(e)),Ko("RegExp",e=>e instanceof RegExp,e=>[e.source,e.flags],([e,t])=>new RegExp(e,t)),Ko("Number",e=>typeof e=="number"&&(Object.is(e,-0)||!isFinite(e)||isNaN(e)),e=>Object.is(e,-0)?"-0":String(e),e=>Number(e)),Ko("BigInt",e=>typeof e=="bigint",e=>String(e),e=>BigInt(e))}FU();function jU(e){if(e==null)return null;const t=_n(Xe());return t.authStatus!==fn.LoggedIn?null:{workspaceId:e,userId:t.user.id}}function ax(e,t){const n=jU(e);return n==null?null:`cache/${n.userId}/${n.workspaceId}/${t}`}const UU=1e3*60*60*24;function BU(e,t,n){const r=ax(e,t);if(r==null)return;const s=localStorage.getItem(r);if(s!=null)try{const{value:i,timestamp:o,version:a,used:c}=JSON.parse(s,LU());if(a!==n||Date.now()-o>UU){localStorage.removeItem(r);return}return{localStorageKey:r,value:i,version:a,used:typeof c=="number"?c:0}}catch{return}}const Dp={};function qU(e,t,n){if(e==null)return;if(t in Dp)return Dp[t];const r=BU(e,t,n);if(R.addAction(`localStorageCache.${t}`,{cacheVersion:n,wasPresent:r!=null}),Dp[t]=r?.value,r!=null)return r.used+1>=4?localStorage.removeItem(r.localStorageKey):localStorage.setItem(r.localStorageKey,JSON.stringify({timestamp:Date.now(),value:r.value,version:r.version,used:r.used+1},ox())),r.value}function GU(e,t,n,r){const s=ax(e,t);s!=null&&localStorage.setItem(s,JSON.stringify({value:n,timestamp:Date.now(),version:r},ox()))}function cx(){for(const e of Object.keys(localStorage))e.startsWith("cache/")&&localStorage.removeItem(e)}const HU="session",lx="refresh";let W_;typeof window<"u"&&window.BroadcastChannel!==void 0&&(W_=new window.BroadcastChannel(HU),W_.onmessage=e=>{e.data===lx&&(document.hidden?window.addEventListener("visibilitychange",()=>{document.hidden||(window.location.href="/")}):setTimeout(()=>{window.location.href="/"},300))});function VU(){W_?.postMessage(lx)}function zU(){VU(),cx(),RU(),DU(),de.deleteCookie(ie.LastUsedModel)}function Qy(e){zU(),window.location.href=e??"/?refresh_account=true"}const $U="dgkjq2bp",WU=$U;function ux(){return $(()=>import("./hgbgzreq86ke9a01.js").then(e=>e.i),__vite__mapDeps([0,1]))}function KU(e,t,n){if(e.id){const r={app_id:WU,user_id:e.id,name:e.name,email:e.email,user_hash:n,hide_default_launcher:!0,is_chatgpt_user:!0,chatgpt_plan_type:t?.planType};ux().then(s=>s?.boot(r))}}function Xy(e,t){ux().then(n=>n?.trackEvent(e,t))}class yh extends Error{name="ClientRequestMismatchedAuthError"}function dx(e,t="fetch"){e.url.includes("/aip");const n=e.detail,r=n?.conversation_detail_metadata;if(r&&ex.updateDetails(r),e.code==="request_account_access"&&CU.setState({accountName:n?.account_name,ownerEmail:n?.owner_email,userEmail:n?.user_email,accountId:n?.account_id,hasActiveRequest:n?.has_active_request,workspacePlanType:n?.workspace_plan_type}),e.code==="all_accounts_blocked"&&yU.setState({userEmail:n?.user_email}),SU(e.code)&&wU.setState({accountName:n?.account_name,errorCode:e.code}),e.code==="trigger_account_transfer"){vU.setState({destinationWorkspaceId:n?.workspace_id,destinationWorkspaceName:n?.workspace_name,destinationWorkspaceProfilePictureUrl:n?.workspace_profile_picture_url,destinationWorkspacePlanType:n?.workspace_plan_type});return}if(e.code==="deactivated_workspace"){window.location.href.includes("/workspace/deactivated")||(window.location.href="/workspace/deactivated");return}if((e.code==="expired_session_key"||e.code==="token_expired"||e.code==="token_invalidated"||e.jsonError?.error?.code==="token_invalidated")&&(R.addAction("Token expired",{url:e.url,error:n}),typeof window<"u"&&window._oaiHandleSessionExpired?.(t,JSON.stringify(n))),e.code==="invalid_account_id_header"&&typeof de.getCookie(ie.Workspace)=="string"){de.deleteCookie(ie.Workspace),Qy();return}}function fx(e){R.addAction("RequestError",{url:e.url,message:e.message,status:e.status,json:e.json,requestId:e.requestId,deviceId:Ni()})}function YU(e,t){return e.replace(/\{([^}]+)\}/g,(n,r)=>t[r].toString())}function ZU(e){if(!e)return"";const t=new URLSearchParams;for(const[r,s]of Object.entries(e))if(Array.isArray(s))for(const i of s)t.append(r,i.toString());else s!=null&&t.append(r,s.toString());const n=t.toString();return n.length===0?"":`?${n}`}function JU(){return _n(Xe()).locale??vh}function Ch(){return{[ej]:JU(),[By]:Ni(),[Uy]:Zl}}function bh(e={}){const t=e.accessToken??QU(),n=Ch();if(t==null){if(e.isAuthOptional===!0)return n;throw new yh("No access token when trying to use AuthHeader")}n.Authorization=`Bearer ${t}`;const r=de.getCookie(ie.Workspace);return typeof r=="string"&&r!==fi&&(n["ChatGPT-Account-ID"]=encodeURIComponent(r)),n}function QU(){return fh(Xe())}function hx({method:e,body:t,authOption:n,accessToken:r,additionalHeaders:s}){return{method:e?.toUpperCase(),body:t,credentials:"include",headers:{...n===ht.Anonymous?Ch():bh({isAuthOptional:n===ht.SendIfAvailable,accessToken:r}),...t!=null&&!(t instanceof FormData||t instanceof File)?{"Content-Type":"application/json"}:null,...t!=null&&t instanceof File?{"Content-Type":"application/octet-stream"}:null,...s}}}function XU(e){return(t,n)=>{const r=(s,i)=>{if(s>=e.length)return n(i);const o=e[s];return o(i,a=>r(s+1,a))};return r(0,t)}}function px(e,t){const n=XU(e);return r=>n(r,t)}async function mx(e,t){let n=await t(e.clone());if(n.status===401){const s=await n.clone().json(),i=n.headers.get("X-Request-Id")??void 0;if(new je(e.url,n.status,s,i).code==="token_expired"){const a=Ni();await G8(jr(Xe()),{reason:"token_expired",method:e.method??"GET",path:new URL(e.url,location.origin).pathname});const c=bh(),l=e.clone();for(const[u,d]of Object.entries(c))l.headers.set(u,d);n=await t(l),n.status===200?R.addAction("Request succeeded after refresh.",{url:e.url,deviceId:a}):R.addAction("Request failed after refresh.",{url:e.url,deviceId:a})}}return n}async function gx(e,t){let n;try{n=await t(e)}catch(r){throw r instanceof Error?je.createWithErrorMessage(e.url,"server",r.message):r}if(n.status>=400){const r=await n.text();let s;try{s=JSON.parse(r)}catch{s={detail:{code:"not_json_response",text:r?.substring(0,1e3)}}}const i=n.headers.get("X-Request-Id")??void 0,o=new je(e.url,n.status,s,i);throw dx(o),fx(o),o}return n}class e2{#e;constructor(t){const{baseUrl:n}=t;this.#e=typeof n=="string"?()=>n:n}baseUrl(t){return this.#e(t)}#t=px([gx,mx],fetch);async fetch(t,n={}){try{const r=await this.#t(t);return n.skipJsonTransform?r:r.status===204?{}:r.json()}catch(r){throw n.intercomEventOnError&&Xy(n.intercomEventOnError,{url:t.url}),r}}request(t,n,r){const s=r?.parameters&&"query"in r.parameters?r.parameters.query:void 0,i=r?.parameters&&"path"in r.parameters&&r.parameters.path?r.parameters.path:{},o=YU(n,i),a=ZU(s),c=hx({...r,method:t,body:r&&"requestBody"in r?r.requestBody instanceof File?r.requestBody:JSON.stringify(r.requestBody):void 0}),l=`${this.baseUrl(c)}${o}${a}`,u=new globalThis.Request(l,c);return this.fetch(u,r)}safeGet(t,...n){return this.request("get",t,n[0])}safePost(t,...n){return this.request("post",t,n[0])}safeDelete(t,...n){return this.request("delete",t,n[0])}safePatch(t,...n){return this.request("patch",t,n[0])}async*streamedJsonPost(t,n){n.skipJsonTransform=!0;const r=await this.request("post",t,n);if(!r.body)return;const s=r.body.getReader(),i=new TextDecoder;let o="";for(;;){const{value:a,done:c}=await s.read();a&&(o+=i.decode(a,{stream:!0}));let l;for(;(l=o.indexOf(`
`))!==-1;){const u=o.slice(0,l).trim();if(o=o.slice(l+1),u.length!==0)try{yield JSON.parse(u)}catch{o=u+`
`+o;break}}if(c){const u=o.trim();u&&(yield JSON.parse(u));return}}}}function eB(e,t){const n={[Ae]:by};if(t.headers.Authorization)return e;for(const[r,s]of Object.entries(n))if(e.startsWith(r))return e.replace(r,s);return e}class tB{#e=px([gx,mx],fetch);async fetch(t,n={}){n.params&&(t+="?"+new URLSearchParams(n.params).toString());try{const r=hx(n),s=await this.#e(new globalThis.Request(eB(t,r),r));return n.skipJsonTransform?s:s.status===204?{}:s.json()}catch(r){throw n.intercomEventOnError&&Xy(n.intercomEventOnError,{url:t}),r}}get(t,n={}){return this.fetch(t,n)}post(t,n,r={}){return this.fetch(t,{...r,method:"post",body:n instanceof FormData?n:JSON.stringify(n)})}async*streamedJsonPost(t,n,r={}){const i=(await this.fetch(t,{...r,method:"post",body:JSON.stringify(n),skipJsonTransform:!0})).body;if(!i)return;const o=i.getReader(),a=new TextDecoder;let c=!1,l="";for(;!c;){const u=await o.read();if(c=u.done,c&&u.value==null)break;const d=l+a.decode(u.value,{stream:!0});l="";const f=d.split(`
`).filter(h=>!!h.trim());for(let h=0;h<f.length;h++)try{yield JSON.parse(f[h])}catch{l=f[h];break}}l.length>0&&(yield JSON.parse(l))}}const H=new e2({baseUrl(e){return!!e.headers.Authorization?Ae:by}}),nB=new e2({baseUrl:hd});new e2({baseUrl:Ij});const Ne=new tB;function _x(){return ms({queryKey:["userSettings"],queryFn:()=>H.safeGet("/settings/user",{authOption:ht.SendIfAvailable})})}const rB=It(e=>ch(e,_x()));function vx(e){const{session:t}=lc(),n=t!=null;return $e({..._x(),enabled:n,select:e})}function sB(e){return vx(t=>t.settings[e])}function iB(e=!1){const t=Tn();return gn({mutationFn:({setting:n,value:r})=>H.safePatch("/settings/account_user_setting",{parameters:{query:{feature:n,value:r.toString()}}}),onMutate:async({setting:n,value:r})=>{if(e){await t.cancelQueries({queryKey:["userSettings"]});const s=t.getQueryData(["userSettings"]);return t.setQueryData(["userSettings"],i=>({...i,settings:{...i.settings,[n]:r}})),{previousValue:s}}},onError:(n,r,s)=>{e&&s!==void 0&&t.setQueryData(["userSettings"],s.previousValue)},onSuccess:()=>{t.invalidateQueries({queryKey:["userSettings"]})}})}function Sh(e,t){return $e({queryKey:["workspace-settings",e],queryFn:e?()=>H.safeGet("/accounts/{account_id}/settings",{parameters:{path:{account_id:e}}}):OR,select:n=>n&&t?t(n):n})}const yx=["AD","AE","AF","AG","AL","AM","AO","AR","AT","AU","AZ","BA","BB","BD","BE","BF","BG","BH","BI","BJ","BN","BO","BR","BS","BT","BW","BZ","CA","CD","CF","CG","CH","CI","CL","CM","CO","CR","CV","CY","CZ","DE","DJ","DK","DM","DO","DZ","EC","EE","EG","ER","ES","ET","FI","FJ","FM","FR","GA","GB","GD","GE","GF","GH","GM","GN","GP","GQ","GR","GT","GW","GY","HN","HR","HT","HU","ID","IE","IL","IN","IQ","IS","IT","JM","JO","JP","KE","KG","KH","KI","KM","KN","KR","KW","KZ","LA","LB","LC","LI","LK","LR","LS","LT","LU","LV","LY","MA","MC","MD","ME","MF","MG","MH","MK","ML","MM","MN","MQ","MR","MT","MU","MV","MW","MX","MY","MZ","NA","NE","NG","NI","NL","NO","NP","NR","NZ","OM","PA","PE","PG","PH","PK","PL","PR","PS","PT","PW","PY","QA","RE","RO","RS","RW","SA","SB","SC","SD","SE","SG","SI","SK","SL","SM","SN","SO","SR","SS","ST","SV","SZ","TD","TG","TH","TJ","TL","TM","TN","TO","TR","TT","TV","TW","TZ","UA","UG","US","UY","UZ","VA","VC","VN","VU","WS","XK","YE","YT","ZA","ZM","ZW"],oB=new Set(["AT","BE","BG","HR","CY","CZ","DK","EE","FI","FR","DE","GF","GP","GR","HU","IS","IE","IT","LV","LI","LT","LU","MF","MQ","MT","NL","NO","PL","PT","RE","RO","SK","SI","ES","SE","YT"]),aB=new Set(["GF","GP","MF","MQ","RE","YT"]),ju="US",cB="GB",lB="CH",uB="IN",dB={AL:"Albania",DZ:"Algeria",AF:"Afghanistan",AD:"Andorra",AO:"Angola",AG:"Antigua & Barbuda",AR:"Argentina",AM:"Armenia",AU:"Australia",AT:"Austria",AZ:"Azerbaijan",BS:"Bahamas",BH:"Bahrain",BD:"Bangladesh",BB:"Barbados",BE:"Belgium",BZ:"Belize",BJ:"Benin",BT:"Bhutan",BO:"Bolivia",BA:"Bosnia & Herzegovina",BW:"Botswana",BR:"Brazil",BN:"Brunei",BG:"Bulgaria",BF:"Burkina Faso",BI:"Burundi",CV:"Cape Verde",KH:"Cambodia",CM:"Cameroon",CA:"Canada",CF:"Central African Republic",TD:"Chad",CL:"Chile",CO:"Colombia",KM:"Comoros",CG:"Congo - Brazzaville",CD:"Congo - Kinshasa",CR:"Costa Rica",CI:"Côte d’Ivoire",HR:"Croatia",CY:"Cyprus",CZ:"Czechia",DK:"Denmark",DJ:"Djibouti",DM:"Dominica",DO:"Dominican Republic",EC:"Ecuador",EG:"Egypt",SV:"El Salvador",GQ:"Equatorial Guinea",ER:"Eritrea",EE:"Estonia",SZ:"Eswatini",ET:"Ethiopia",FJ:"Fiji",FI:"Finland",FR:"France",GF:"French Guiana",GA:"Gabon",GM:"Gambia",GE:"Georgia",DE:"Germany",GH:"Ghana",GR:"Greece",GD:"Grenada",GP:"Guadeloupe",GT:"Guatemala",GN:"Guinea",GW:"Guinea-Bissau",GY:"Guyana",HT:"Haiti",VA:"Vatican City",HN:"Honduras",HU:"Hungary",IS:"Iceland",IN:"India",ID:"Indonesia",IQ:"Iraq",IE:"Ireland",IL:"Israel",IT:"Italy",JM:"Jamaica",JP:"Japan",JO:"Jordan",KZ:"Kazakhstan",KE:"Kenya",KI:"Kiribati",KW:"Kuwait",KG:"Kyrgyzstan",LA:"Laos",LV:"Latvia",LB:"Lebanon",LS:"Lesotho",LR:"Liberia",LY:"Libya",LI:"Liechtenstein",LT:"Lithuania",LU:"Luxembourg",MG:"Madagascar",MW:"Malawi",MY:"Malaysia",MV:"Maldives",ML:"Mali",MT:"Malta",MH:"Marshall Islands",MQ:"Martinique",MR:"Mauritania",MU:"Mauritius",YT:"Mayotte",MX:"Mexico",FM:"Micronesia",MD:"Moldova",MC:"Monaco",MN:"Mongolia",ME:"Montenegro",MA:"Morocco",MZ:"Mozambique",MM:"Myanmar (Burma)",NA:"Namibia",NR:"Nauru",NP:"Nepal",NL:"Netherlands",NZ:"New Zealand",NI:"Nicaragua",NE:"Niger",NG:"Nigeria",MK:"North Macedonia",NO:"Norway",OM:"Oman",PK:"Pakistan",PW:"Palau",PS:"Palestine",PA:"Panama",PG:"Papua New Guinea",PY:"Paraguay",PE:"Peru",PH:"Philippines",PL:"Poland",PR:"Puerto Rico",PT:"Portugal",QA:"Qatar",RE:"Réunion",RO:"Romania",RW:"Rwanda",KN:"St. Kitts & Nevis",LC:"St. Lucia",VC:"St. Vincent & Grenadines",MF:"Saint Martin",WS:"Samoa",SM:"San Marino",ST:"São Tomé & Príncipe",SA:"Saudi Arabia",SN:"Senegal",RS:"Serbia",SC:"Seychelles",SL:"Sierra Leone",SG:"Singapore",SK:"Slovakia",SI:"Slovenia",SB:"Solomon Islands",SO:"Somalia",ZA:"South Africa",KR:"South Korea",SS:"South Sudan",ES:"Spain",LK:"Sri Lanka",SR:"Suriname",SE:"Sweden",CH:"Switzerland",SD:"Sudan",TW:"Taiwan",TJ:"Tajikistan",TZ:"Tanzania",TH:"Thailand",TL:"Timor-Leste",TG:"Togo",TO:"Tonga",TT:"Trinidad & Tobago",TN:"Tunisia",TR:"Türkiye",TM:"Turkmenistan",TV:"Tuvalu",UG:"Uganda",UA:"Ukraine",AE:"United Arab Emirates",GB:"United Kingdom",US:"United States",UY:"Uruguay",UZ:"Uzbekistan",VU:"Vanuatu",VN:"Vietnam",XK:"Kosovo",YE:"Yemen",ZM:"Zambia",ZW:"Zimbabwe"};function fB(e){return yx.includes(e)}function o0e({country:e,shouldUseDefaultCountryCode:t}){return t?(R.addAction(`Force using ${ju}`,{user_country:e}),ju):e==null||!fB(e)?(R.addError(`User country is null or unrecognized - will use ${ju}`,{user_country:e}),ju):e}function hB(e){try{const t=new Intl.DisplayNames([e],{type:"region"});return n=>t.of(n)??""}catch(t){return R.addError("Failed to create country display name formatter, will fallback to en_US locale display name",{cause:t}),n=>dB[n]??""}}function pB(){const e=Y(),t=_n(e);return m.useMemo(()=>hB(t.locale),[t.locale])}function a0e(){const e=pB();return m.useMemo(()=>[...yx].sort((n,r)=>{const s=e(n),i=e(r);return s.localeCompare(i)}),[e])}function mB(e){return oB.has(e)}function c0e(e){return e==null?(R.addError(new Error("nullish_country_for_vat_collection_exclusion_check"),{country:e}),!1):aB.has(e)}const l0e=["USD","GBP","EUR","INR"],Cx="USD",gB="GBP",Ib="EUR",_B="INR";function u0e(e,t=[]){return mB(e)||e===lB?Ib:e===cB?gB:t.includes(e)&&e===uB?_B:Cx}const Ci=ze({dollarSign:{id:"currencyCodes.dollarSign",defaultMessage:"$"},dollarCode:{id:"currencyCodes.dollarCode",defaultMessage:"USD"},poundSign:{id:"currencyCodes.poundSign",defaultMessage:"£"},poundCode:{id:"currencyCodes.poundCode",defaultMessage:"GBP"},euroSign:{id:"currencyCodes.euroSign",defaultMessage:"€"},euroCode:{id:"currencyCodes.euroCode",defaultMessage:"EUR"},inrSign:{id:"currencyCodes.inrSign",defaultMessage:"₹"},inrCode:{id:"currencyCodes.inrCode",defaultMessage:"INR"}}),d0e={sign:Ci.dollarSign,code:Ci.dollarCode},f0e={sign:Ci.poundSign,code:Ci.poundCode},h0e={sign:Ci.euroSign,code:Ci.euroCode},p0e={sign:Ci.inrSign,code:Ci.inrCode};function wh(e){return e===Re.EDUCATION||e===Re.DEPRECATED_EDU}function vB(e){return e===Re.QUORUM}function t2(e){return e===Re.BUSINESS||e===Re.DEPRECATED_ENTERPRISE||wh(e)||vB(e)}var Lp,Nb;function yB(){if(Nb)return Lp;Nb=1;function e(){this.__data__=[],this.size=0}return Lp=e,Lp}var Fp,Rb;function n2(){if(Rb)return Fp;Rb=1;function e(t,n){return t===n||t!==t&&n!==n}return Fp=e,Fp}var jp,Pb;function Eh(){if(Pb)return jp;Pb=1;var e=n2();function t(n,r){for(var s=n.length;s--;)if(e(n[s][0],r))return s;return-1}return jp=t,jp}var Up,Db;function CB(){if(Db)return Up;Db=1;var e=Eh(),t=Array.prototype,n=t.splice;function r(s){var i=this.__data__,o=e(i,s);if(o<0)return!1;var a=i.length-1;return o==a?i.pop():n.call(i,o,1),--this.size,!0}return Up=r,Up}var Bp,Lb;function bB(){if(Lb)return Bp;Lb=1;var e=Eh();function t(n){var r=this.__data__,s=e(r,n);return s<0?void 0:r[s][1]}return Bp=t,Bp}var qp,Fb;function SB(){if(Fb)return qp;Fb=1;var e=Eh();function t(n){return e(this.__data__,n)>-1}return qp=t,qp}var Gp,jb;function wB(){if(jb)return Gp;jb=1;var e=Eh();function t(n,r){var s=this.__data__,i=e(s,n);return i<0?(++this.size,s.push([n,r])):s[i][1]=r,this}return Gp=t,Gp}var Hp,Ub;function xh(){if(Ub)return Hp;Ub=1;var e=yB(),t=CB(),n=bB(),r=SB(),s=wB();function i(o){var a=-1,c=o==null?0:o.length;for(this.clear();++a<c;){var l=o[a];this.set(l[0],l[1])}}return i.prototype.clear=e,i.prototype.delete=t,i.prototype.get=n,i.prototype.has=r,i.prototype.set=s,Hp=i,Hp}var Vp,Bb;function EB(){if(Bb)return Vp;Bb=1;var e=xh();function t(){this.__data__=new e,this.size=0}return Vp=t,Vp}var zp,qb;function xB(){if(qb)return zp;qb=1;function e(t){var n=this.__data__,r=n.delete(t);return this.size=n.size,r}return zp=e,zp}var $p,Gb;function TB(){if(Gb)return $p;Gb=1;function e(t){return this.__data__.get(t)}return $p=e,$p}var Wp,Hb;function OB(){if(Hb)return Wp;Hb=1;function e(t){return this.__data__.has(t)}return Wp=e,Wp}var Kp,Vb;function bx(){if(Vb)return Kp;Vb=1;var e=typeof ku=="object"&&ku&&ku.Object===Object&&ku;return Kp=e,Kp}var Yp,zb;function Gr(){if(zb)return Yp;zb=1;var e=bx(),t=typeof self=="object"&&self&&self.Object===Object&&self,n=e||t||Function("return this")();return Yp=n,Yp}var Zp,$b;function uc(){if($b)return Zp;$b=1;var e=Gr(),t=e.Symbol;return Zp=t,Zp}var Jp,Wb;function kB(){if(Wb)return Jp;Wb=1;var e=uc(),t=Object.prototype,n=t.hasOwnProperty,r=t.toString,s=e?e.toStringTag:void 0;function i(o){var a=n.call(o,s),c=o[s];try{o[s]=void 0;var l=!0}catch{}var u=r.call(o);return l&&(a?o[s]=c:delete o[s]),u}return Jp=i,Jp}var Qp,Kb;function AB(){if(Kb)return Qp;Kb=1;var e=Object.prototype,t=e.toString;function n(r){return t.call(r)}return Qp=n,Qp}var Xp,Yb;function dc(){if(Yb)return Xp;Yb=1;var e=uc(),t=kB(),n=AB(),r="[object Null]",s="[object Undefined]",i=e?e.toStringTag:void 0;function o(a){return a==null?a===void 0?s:r:i&&i in Object(a)?t(a):n(a)}return Xp=o,Xp}var em,Zb;function qs(){if(Zb)return em;Zb=1;function e(t){var n=typeof t;return t!=null&&(n=="object"||n=="function")}return em=e,em}var tm,Jb;function Sx(){if(Jb)return tm;Jb=1;var e=dc(),t=qs(),n="[object AsyncFunction]",r="[object Function]",s="[object GeneratorFunction]",i="[object Proxy]";function o(a){if(!t(a))return!1;var c=e(a);return c==r||c==s||c==n||c==i}return tm=o,tm}var nm,Qb;function MB(){if(Qb)return nm;Qb=1;var e=Gr(),t=e["__core-js_shared__"];return nm=t,nm}var rm,Xb;function IB(){if(Xb)return rm;Xb=1;var e=MB(),t=function(){var r=/[^.]+$/.exec(e&&e.keys&&e.keys.IE_PROTO||"");return r?"Symbol(src)_1."+r:""}();function n(r){return!!t&&t in r}return rm=n,rm}var sm,e5;function wx(){if(e5)return sm;e5=1;var e=Function.prototype,t=e.toString;function n(r){if(r!=null){try{return t.call(r)}catch{}try{return r+""}catch{}}return""}return sm=n,sm}var im,t5;function NB(){if(t5)return im;t5=1;var e=Sx(),t=IB(),n=qs(),r=wx(),s=/[\\^$.*+?()[\]{}|]/g,i=/^\[object .+?Constructor\]$/,o=Function.prototype,a=Object.prototype,c=o.toString,l=a.hasOwnProperty,u=RegExp("^"+c.call(l).replace(s,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function d(f){if(!n(f)||t(f))return!1;var h=e(f)?u:i;return h.test(r(f))}return im=d,im}var om,n5;function RB(){if(n5)return om;n5=1;function e(t,n){return t?.[n]}return om=e,om}var am,r5;function Lo(){if(r5)return am;r5=1;var e=NB(),t=RB();function n(r,s){var i=t(r,s);return e(i)?i:void 0}return am=n,am}var cm,s5;function r2(){if(s5)return cm;s5=1;var e=Lo(),t=Gr(),n=e(t,"Map");return cm=n,cm}var lm,i5;function Th(){if(i5)return lm;i5=1;var e=Lo(),t=e(Object,"create");return lm=t,lm}var um,o5;function PB(){if(o5)return um;o5=1;var e=Th();function t(){this.__data__=e?e(null):{},this.size=0}return um=t,um}var dm,a5;function DB(){if(a5)return dm;a5=1;function e(t){var n=this.has(t)&&delete this.__data__[t];return this.size-=n?1:0,n}return dm=e,dm}var fm,c5;function LB(){if(c5)return fm;c5=1;var e=Th(),t="__lodash_hash_undefined__",n=Object.prototype,r=n.hasOwnProperty;function s(i){var o=this.__data__;if(e){var a=o[i];return a===t?void 0:a}return r.call(o,i)?o[i]:void 0}return fm=s,fm}var hm,l5;function FB(){if(l5)return hm;l5=1;var e=Th(),t=Object.prototype,n=t.hasOwnProperty;function r(s){var i=this.__data__;return e?i[s]!==void 0:n.call(i,s)}return hm=r,hm}var pm,u5;function jB(){if(u5)return pm;u5=1;var e=Th(),t="__lodash_hash_undefined__";function n(r,s){var i=this.__data__;return this.size+=this.has(r)?0:1,i[r]=e&&s===void 0?t:s,this}return pm=n,pm}var mm,d5;function UB(){if(d5)return mm;d5=1;var e=PB(),t=DB(),n=LB(),r=FB(),s=jB();function i(o){var a=-1,c=o==null?0:o.length;for(this.clear();++a<c;){var l=o[a];this.set(l[0],l[1])}}return i.prototype.clear=e,i.prototype.delete=t,i.prototype.get=n,i.prototype.has=r,i.prototype.set=s,mm=i,mm}var gm,f5;function BB(){if(f5)return gm;f5=1;var e=UB(),t=xh(),n=r2();function r(){this.size=0,this.__data__={hash:new e,map:new(n||t),string:new e}}return gm=r,gm}var _m,h5;function qB(){if(h5)return _m;h5=1;function e(t){var n=typeof t;return n=="string"||n=="number"||n=="symbol"||n=="boolean"?t!=="__proto__":t===null}return _m=e,_m}var vm,p5;function Oh(){if(p5)return vm;p5=1;var e=qB();function t(n,r){var s=n.__data__;return e(r)?s[typeof r=="string"?"string":"hash"]:s.map}return vm=t,vm}var ym,m5;function GB(){if(m5)return ym;m5=1;var e=Oh();function t(n){var r=e(this,n).delete(n);return this.size-=r?1:0,r}return ym=t,ym}var Cm,g5;function HB(){if(g5)return Cm;g5=1;var e=Oh();function t(n){return e(this,n).get(n)}return Cm=t,Cm}var bm,_5;function VB(){if(_5)return bm;_5=1;var e=Oh();function t(n){return e(this,n).has(n)}return bm=t,bm}var Sm,v5;function zB(){if(v5)return Sm;v5=1;var e=Oh();function t(n,r){var s=e(this,n),i=s.size;return s.set(n,r),this.size+=s.size==i?0:1,this}return Sm=t,Sm}var wm,y5;function s2(){if(y5)return wm;y5=1;var e=BB(),t=GB(),n=HB(),r=VB(),s=zB();function i(o){var a=-1,c=o==null?0:o.length;for(this.clear();++a<c;){var l=o[a];this.set(l[0],l[1])}}return i.prototype.clear=e,i.prototype.delete=t,i.prototype.get=n,i.prototype.has=r,i.prototype.set=s,wm=i,wm}var Em,C5;function $B(){if(C5)return Em;C5=1;var e=xh(),t=r2(),n=s2(),r=200;function s(i,o){var a=this.__data__;if(a instanceof e){var c=a.__data__;if(!t||c.length<r-1)return c.push([i,o]),this.size=++a.size,this;a=this.__data__=new n(c)}return a.set(i,o),this.size=a.size,this}return Em=s,Em}var xm,b5;function i2(){if(b5)return xm;b5=1;var e=xh(),t=EB(),n=xB(),r=TB(),s=OB(),i=$B();function o(a){var c=this.__data__=new e(a);this.size=c.size}return o.prototype.clear=t,o.prototype.delete=n,o.prototype.get=r,o.prototype.has=s,o.prototype.set=i,xm=o,xm}var Tm,S5;function WB(){if(S5)return Tm;S5=1;var e="__lodash_hash_undefined__";function t(n){return this.__data__.set(n,e),this}return Tm=t,Tm}var Om,w5;function KB(){if(w5)return Om;w5=1;function e(t){return this.__data__.has(t)}return Om=e,Om}var km,E5;function Ex(){if(E5)return km;E5=1;var e=s2(),t=WB(),n=KB();function r(s){var i=-1,o=s==null?0:s.length;for(this.__data__=new e;++i<o;)this.add(s[i])}return r.prototype.add=r.prototype.push=t,r.prototype.has=n,km=r,km}var Am,x5;function YB(){if(x5)return Am;x5=1;function e(t,n){for(var r=-1,s=t==null?0:t.length;++r<s;)if(n(t[r],r,t))return!0;return!1}return Am=e,Am}var Mm,T5;function xx(){if(T5)return Mm;T5=1;function e(t,n){return t.has(n)}return Mm=e,Mm}var Im,O5;function Tx(){if(O5)return Im;O5=1;var e=Ex(),t=YB(),n=xx(),r=1,s=2;function i(o,a,c,l,u,d){var f=c&r,h=o.length,g=a.length;if(h!=g&&!(f&&g>h))return!1;var _=d.get(o),v=d.get(a);if(_&&v)return _==a&&v==o;var y=-1,C=!0,E=c&s?new e:void 0;for(d.set(o,a),d.set(a,o);++y<h;){var b=o[y],S=a[y];if(l)var w=f?l(S,b,y,a,o,d):l(b,S,y,o,a,d);if(w!==void 0){if(w)continue;C=!1;break}if(E){if(!t(a,function(x,T){if(!n(E,T)&&(b===x||u(b,x,c,l,d)))return E.push(T)})){C=!1;break}}else if(!(b===S||u(b,S,c,l,d))){C=!1;break}}return d.delete(o),d.delete(a),C}return Im=i,Im}var Nm,k5;function Ox(){if(k5)return Nm;k5=1;var e=Gr(),t=e.Uint8Array;return Nm=t,Nm}var Rm,A5;function ZB(){if(A5)return Rm;A5=1;function e(t){var n=-1,r=Array(t.size);return t.forEach(function(s,i){r[++n]=[i,s]}),r}return Rm=e,Rm}var Pm,M5;function o2(){if(M5)return Pm;M5=1;function e(t){var n=-1,r=Array(t.size);return t.forEach(function(s){r[++n]=s}),r}return Pm=e,Pm}var Dm,I5;function JB(){if(I5)return Dm;I5=1;var e=uc(),t=Ox(),n=n2(),r=Tx(),s=ZB(),i=o2(),o=1,a=2,c="[object Boolean]",l="[object Date]",u="[object Error]",d="[object Map]",f="[object Number]",h="[object RegExp]",g="[object Set]",_="[object String]",v="[object Symbol]",y="[object ArrayBuffer]",C="[object DataView]",E=e?e.prototype:void 0,b=E?E.valueOf:void 0;function S(w,x,T,O,A,k,I){switch(T){case C:if(w.byteLength!=x.byteLength||w.byteOffset!=x.byteOffset)return!1;w=w.buffer,x=x.buffer;case y:return!(w.byteLength!=x.byteLength||!k(new t(w),new t(x)));case c:case l:case f:return n(+w,+x);case u:return w.name==x.name&&w.message==x.message;case h:case _:return w==x+"";case d:var N=s;case g:var j=O&o;if(N||(N=i),w.size!=x.size&&!j)return!1;var q=I.get(w);if(q)return q==x;O|=a,I.set(w,x);var D=r(N(w),N(x),O,A,k,I);return I.delete(w),D;case v:if(b)return b.call(w)==b.call(x)}return!1}return Dm=S,Dm}var Lm,N5;function a2(){if(N5)return Lm;N5=1;function e(t,n){for(var r=-1,s=n.length,i=t.length;++r<s;)t[i+r]=n[r];return t}return Lm=e,Lm}var Fm,R5;function hr(){if(R5)return Fm;R5=1;var e=Array.isArray;return Fm=e,Fm}var jm,P5;function kx(){if(P5)return jm;P5=1;var e=a2(),t=hr();function n(r,s,i){var o=s(r);return t(r)?o:e(o,i(r))}return jm=n,jm}var Um,D5;function QB(){if(D5)return Um;D5=1;function e(t,n){for(var r=-1,s=t==null?0:t.length,i=0,o=[];++r<s;){var a=t[r];n(a,r,t)&&(o[i++]=a)}return o}return Um=e,Um}var Bm,L5;function Ax(){if(L5)return Bm;L5=1;function e(){return[]}return Bm=e,Bm}var qm,F5;function c2(){if(F5)return qm;F5=1;var e=QB(),t=Ax(),n=Object.prototype,r=n.propertyIsEnumerable,s=Object.getOwnPropertySymbols,i=s?function(o){return o==null?[]:(o=Object(o),e(s(o),function(a){return r.call(o,a)}))}:t;return qm=i,qm}var Gm,j5;function XB(){if(j5)return Gm;j5=1;function e(t,n){for(var r=-1,s=Array(t);++r<t;)s[r]=n(r);return s}return Gm=e,Gm}var Hm,U5;function Pi(){if(U5)return Hm;U5=1;function e(t){return t!=null&&typeof t=="object"}return Hm=e,Hm}var Vm,B5;function eq(){if(B5)return Vm;B5=1;var e=dc(),t=Pi(),n="[object Arguments]";function r(s){return t(s)&&e(s)==n}return Vm=r,Vm}var zm,q5;function l2(){if(q5)return zm;q5=1;var e=eq(),t=Pi(),n=Object.prototype,r=n.hasOwnProperty,s=n.propertyIsEnumerable,i=e(function(){return arguments}())?e:function(o){return t(o)&&r.call(o,"callee")&&!s.call(o,"callee")};return zm=i,zm}var Uc={exports:{}},$m,G5;function tq(){if(G5)return $m;G5=1;function e(){return!1}return $m=e,$m}Uc.exports;var H5;function u2(){return H5||(H5=1,function(e,t){var n=Gr(),r=tq(),s=t&&!t.nodeType&&t,i=s&&!0&&e&&!e.nodeType&&e,o=i&&i.exports===s,a=o?n.Buffer:void 0,c=a?a.isBuffer:void 0,l=c||r;e.exports=l}(Uc,Uc.exports)),Uc.exports}var Wm,V5;function d2(){if(V5)return Wm;V5=1;var e=9007199254740991,t=/^(?:0|[1-9]\d*)$/;function n(r,s){var i=typeof r;return s=s??e,!!s&&(i=="number"||i!="symbol"&&t.test(r))&&r>-1&&r%1==0&&r<s}return Wm=n,Wm}var Km,z5;function f2(){if(z5)return Km;z5=1;var e=9007199254740991;function t(n){return typeof n=="number"&&n>-1&&n%1==0&&n<=e}return Km=t,Km}var Ym,$5;function nq(){if($5)return Ym;$5=1;var e=dc(),t=f2(),n=Pi(),r="[object Arguments]",s="[object Array]",i="[object Boolean]",o="[object Date]",a="[object Error]",c="[object Function]",l="[object Map]",u="[object Number]",d="[object Object]",f="[object RegExp]",h="[object Set]",g="[object String]",_="[object WeakMap]",v="[object ArrayBuffer]",y="[object DataView]",C="[object Float32Array]",E="[object Float64Array]",b="[object Int8Array]",S="[object Int16Array]",w="[object Int32Array]",x="[object Uint8Array]",T="[object Uint8ClampedArray]",O="[object Uint16Array]",A="[object Uint32Array]",k={};k[C]=k[E]=k[b]=k[S]=k[w]=k[x]=k[T]=k[O]=k[A]=!0,k[r]=k[s]=k[v]=k[i]=k[y]=k[o]=k[a]=k[c]=k[l]=k[u]=k[d]=k[f]=k[h]=k[g]=k[_]=!1;function I(N){return n(N)&&t(N.length)&&!!k[e(N)]}return Ym=I,Ym}var Zm,W5;function h2(){if(W5)return Zm;W5=1;function e(t){return function(n){return t(n)}}return Zm=e,Zm}var Bc={exports:{}};Bc.exports;var K5;function p2(){return K5||(K5=1,function(e,t){var n=bx(),r=t&&!t.nodeType&&t,s=r&&!0&&e&&!e.nodeType&&e,i=s&&s.exports===r,o=i&&n.process,a=function(){try{var c=s&&s.require&&s.require("util").types;return c||o&&o.binding&&o.binding("util")}catch{}}();e.exports=a}(Bc,Bc.exports)),Bc.exports}var Jm,Y5;function Mx(){if(Y5)return Jm;Y5=1;var e=nq(),t=h2(),n=p2(),r=n&&n.isTypedArray,s=r?t(r):e;return Jm=s,Jm}var Qm,Z5;function Ix(){if(Z5)return Qm;Z5=1;var e=XB(),t=l2(),n=hr(),r=u2(),s=d2(),i=Mx(),o=Object.prototype,a=o.hasOwnProperty;function c(l,u){var d=n(l),f=!d&&t(l),h=!d&&!f&&r(l),g=!d&&!f&&!h&&i(l),_=d||f||h||g,v=_?e(l.length,String):[],y=v.length;for(var C in l)(u||a.call(l,C))&&!(_&&(C=="length"||h&&(C=="offset"||C=="parent")||g&&(C=="buffer"||C=="byteLength"||C=="byteOffset")||s(C,y)))&&v.push(C);return v}return Qm=c,Qm}var Xm,J5;function m2(){if(J5)return Xm;J5=1;var e=Object.prototype;function t(n){var r=n&&n.constructor,s=typeof r=="function"&&r.prototype||e;return n===s}return Xm=t,Xm}var eg,Q5;function Nx(){if(Q5)return eg;Q5=1;function e(t,n){return function(r){return t(n(r))}}return eg=e,eg}var tg,X5;function rq(){if(X5)return tg;X5=1;var e=Nx(),t=e(Object.keys,Object);return tg=t,tg}var ng,e6;function sq(){if(e6)return ng;e6=1;var e=m2(),t=rq(),n=Object.prototype,r=n.hasOwnProperty;function s(i){if(!e(i))return t(i);var o=[];for(var a in Object(i))r.call(i,a)&&a!="constructor"&&o.push(a);return o}return ng=s,ng}var rg,t6;function kh(){if(t6)return rg;t6=1;var e=Sx(),t=f2();function n(r){return r!=null&&t(r.length)&&!e(r)}return rg=n,rg}var sg,n6;function fc(){if(n6)return sg;n6=1;var e=Ix(),t=sq(),n=kh();function r(s){return n(s)?e(s):t(s)}return sg=r,sg}var ig,r6;function Rx(){if(r6)return ig;r6=1;var e=kx(),t=c2(),n=fc();function r(s){return e(s,n,t)}return ig=r,ig}var og,s6;function iq(){if(s6)return og;s6=1;var e=Rx(),t=1,n=Object.prototype,r=n.hasOwnProperty;function s(i,o,a,c,l,u){var d=a&t,f=e(i),h=f.length,g=e(o),_=g.length;if(h!=_&&!d)return!1;for(var v=h;v--;){var y=f[v];if(!(d?y in o:r.call(o,y)))return!1}var C=u.get(i),E=u.get(o);if(C&&E)return C==o&&E==i;var b=!0;u.set(i,o),u.set(o,i);for(var S=d;++v<h;){y=f[v];var w=i[y],x=o[y];if(c)var T=d?c(x,w,y,o,i,u):c(w,x,y,i,o,u);if(!(T===void 0?w===x||l(w,x,a,c,u):T)){b=!1;break}S||(S=y=="constructor")}if(b&&!S){var O=i.constructor,A=o.constructor;O!=A&&"constructor"in i&&"constructor"in o&&!(typeof O=="function"&&O instanceof O&&typeof A=="function"&&A instanceof A)&&(b=!1)}return u.delete(i),u.delete(o),b}return og=s,og}var ag,i6;function oq(){if(i6)return ag;i6=1;var e=Lo(),t=Gr(),n=e(t,"DataView");return ag=n,ag}var cg,o6;function aq(){if(o6)return cg;o6=1;var e=Lo(),t=Gr(),n=e(t,"Promise");return cg=n,cg}var lg,a6;function Px(){if(a6)return lg;a6=1;var e=Lo(),t=Gr(),n=e(t,"Set");return lg=n,lg}var ug,c6;function cq(){if(c6)return ug;c6=1;var e=Lo(),t=Gr(),n=e(t,"WeakMap");return ug=n,ug}var dg,l6;function Ah(){if(l6)return dg;l6=1;var e=oq(),t=r2(),n=aq(),r=Px(),s=cq(),i=dc(),o=wx(),a="[object Map]",c="[object Object]",l="[object Promise]",u="[object Set]",d="[object WeakMap]",f="[object DataView]",h=o(e),g=o(t),_=o(n),v=o(r),y=o(s),C=i;return(e&&C(new e(new ArrayBuffer(1)))!=f||t&&C(new t)!=a||n&&C(n.resolve())!=l||r&&C(new r)!=u||s&&C(new s)!=d)&&(C=function(E){var b=i(E),S=b==c?E.constructor:void 0,w=S?o(S):"";if(w)switch(w){case h:return f;case g:return a;case _:return l;case v:return u;case y:return d}return b}),dg=C,dg}var fg,u6;function lq(){if(u6)return fg;u6=1;var e=i2(),t=Tx(),n=JB(),r=iq(),s=Ah(),i=hr(),o=u2(),a=Mx(),c=1,l="[object Arguments]",u="[object Array]",d="[object Object]",f=Object.prototype,h=f.hasOwnProperty;function g(_,v,y,C,E,b){var S=i(_),w=i(v),x=S?u:s(_),T=w?u:s(v);x=x==l?d:x,T=T==l?d:T;var O=x==d,A=T==d,k=x==T;if(k&&o(_)){if(!o(v))return!1;S=!0,O=!1}if(k&&!O)return b||(b=new e),S||a(_)?t(_,v,y,C,E,b):n(_,v,x,y,C,E,b);if(!(y&c)){var I=O&&h.call(_,"__wrapped__"),N=A&&h.call(v,"__wrapped__");if(I||N){var j=I?_.value():_,q=N?v.value():v;return b||(b=new e),E(j,q,y,C,b)}}return k?(b||(b=new e),r(_,v,y,C,E,b)):!1}return fg=g,fg}var hg,d6;function g2(){if(d6)return hg;d6=1;var e=lq(),t=Pi();function n(r,s,i,o,a){return r===s?!0:r==null||s==null||!t(r)&&!t(s)?r!==r&&s!==s:e(r,s,i,o,n,a)}return hg=n,hg}var pg,f6;function uq(){if(f6)return pg;f6=1;var e=g2();function t(n,r){return e(n,r)}return pg=t,pg}var dq=uq();const fq=Ot(dq);function Dx(e){return e!==Re.FREE}const Lx=["system-hints"];function m0e(e){return e.getQueryData(Lx)}function Fx(e,t){return $e({queryKey:Lx,queryFn:async()=>{const n=await H.safeGet("/system_hints",{authOption:ht.SendIfAvailable});return R.addFirstTiming("load.systemHints"),n.system_hints.map(({name:r,description:s,action_label:i,short_label:o,logo:a,system_hint:c,aliases:l=[],required_features:u=[],required_models:d=[],required_conversation_modes:f=[],composer_bar_button_info:h,suggested_prompt:g,allow_in_temporary_chat:_,persist_between_messages:v,regex_matches:y,is_auto:C,category:E,requires_opt_in:b})=>({name:r,description:s,actionLabel:i??void 0,shortLabel:o??void 0,logo:a,systemHint:c,aliases:l,requiredFeatures:u,requiredModels:d,requiredConversationModes:f,composerBarButtonInfo:h?{announcementKey:h.announcement_key,disabledText:h.disabled_text,nuxTitle:h.nux_title,nuxDescription:h.nux_description,tooltipText:h.tooltip_text,rateLimitReachedText:h.rate_limit_reached_text??void 0}:void 0,suggestedPrompt:g?{theme:g.theme,title:g.title,subtitle:g.subtitle,sortOrder:g.sort_order,badge:g.badge??void 0}:void 0,allowInTemporaryChat:_,persistBetweenMessages:!!v,regexMatches:y??void 0,isAuto:C,category:E,requiresOptIn:!!b}))},select:t,staleTime:1/0,enabled:e??!0})}const hq="ext-oai-did",g0e="ext-login-allow-phone",_0e="ext-whatsapp-al-flow";function pq(e){return{[hq]:e}}const mq=qy.OpenAISidetron;function gq(e){if(_n(e).isElectron)return mq}function _q(e,t){const n=gq(e);return n??qy.OpenAI}function Wa(e,{authType:t="signup",callbackUrl:n="/",additionalAuthParams:r={},callback:s,shouldOpenPaymentModalOnAuth:i=!1}={}){const o=_q(e,new URL(window.location.href).searchParams);t!=="login_or_signup"&&gt(e,"1803944755").get("enable_unified_login_or_signup_start_page_at_chatgpt_web",!1)&&(t="login_or_signup"),i&&de.setBooleanCookie(ie.ShowPaymentModal,!0,{maxAge:6*60*60});const a=dr();de.setCookie(ie.AuthSessionLoggingId,a),s?.(o),r9.signIn(o,{callbackUrl:n},{prompt:"login",screen_hint:t,...pq(Ni()),[Tj]:a,...r})}const vq=Re.FREE,yq=nl.OWNER,Cq="AccountState";PP(Cq,e=>({...e,accountItems:e.accountItems.map(t=>new nf(t.data))}));function jx(e){return Date.parse(e)/1e3}function qc(e){if(e==null)return;const t=jx(e);if(!isNaN(t))return t}class nf{constructor(t){this.data=t}get id(){return this.data.id}get residencyRegion(){return this.data.residencyRegion}get computeResidency(){return this.data.computeResidency}get isHipaaCompliantWorkspace(){return this.data.isHipaaCompliantWorkspace??!1}get structure(){return this.data.structure}get workspaceType(){return this.data.workspaceType}get eligibleForReactivation(){return this.data.eligibleForReactivation}get organizationId(){return this.data.organizationId}get name(){return this.data.name}get features(){return this.data.features}isEqual(t){return fq(this.data,t.data)}get planType(){return this.data.subscriptionStatus.planType}get canAccessWithCurrentSession(){return this.data.canAccessWithCurrentSession}get ssoConnectionName(){return this.data.ssoConnectionName}get isDelinquent(){return this.data.subscriptionStatus.isDelinquent}get gracePeriodId(){return this.data.subscriptionStatus.gracePeriodId}get accountUserId(){return this.data.accountUserId}get normalizedAccountUserId(){return this.isPersonalAccount()?this.authUserId:this.data.accountUserId}get authUserId(){return this.data.accountUserId?.split("__")[0]}get subscriptionAnalyticsParams(){const{subscriptionStatus:t}=this.data;return{currentPlanType:t.planType,subscriptionStatus:{billingPeriod:t.billingPeriod,hasPaidSubscription:t.hasPaidSubscription,subscriptionPlan:t.subscriptionPlan,subscriptionExpiresAt:t.subscriptionExpiresAt,wasPaidCustomer:t.wasPaidCustomer}}}isResellerHosted(){return this.data.subscriptionStatus.isResellerHosted}isEnterprisey(){return t2(this.data.subscriptionStatus.planType)}isRBACEnabled(){return this.isEnterprisey()}isWorkspacePlan(){return this.isEnterprisey()||this.isTeam()}isPro(){return this.data.subscriptionStatus.planType===Re.PRO}isEdu(){return wh(this.data.subscriptionStatus.planType)}isTeam(){return this.data.subscriptionStatus.planType===Re.TEAM}isGo(){return this.data.subscriptionStatus.planType===Re.GO}isPlus(){return this.data.subscriptionStatus.planType===Re.PLUS}isFree(){return this.data.subscriptionStatus.planType===Re.FREE}isCBP(){return this.data.subscriptionStatus.planType===Re.BUSINESS||this.data.subscriptionStatus.planType===Re.EDUCATION}isWorkspaceAccount(){return this.data.structure===Rn.WORKSPACE}getWorkspaceId(){if(this.isWorkspaceAccount())return this.id}getDaysUntilPlanRenews(){const t=this.data.subscriptionStatus.subscriptionRenewsAt;if(t==null)return null;const n=Math.floor(Date.now()/1e3);return Math.ceil((t-n)/(60*60*24))}getDaysUntilPlanDiscountExpires(){const t=qc(this.data.subscriptionStatus.discount?.discount_expires_at);if(t==null)return null;const n=Math.floor(Date.now()/1e3);return Math.ceil((t-n)/(60*60*24))}isPersonalAccount(){return this.data.structure===Rn.PERSONAL}hasPaidSubscription(){return this.data.subscriptionStatus.hasPaidSubscription}isActiveSubscriptionGratis(){return this.data.subscriptionStatus.isActiveSubscriptionGratis}getSubscriptionBillingCurrency(){return this.data.subscriptionStatus.billingCurrency}mustGetSubscriptionBillingCurrency(t){const n=this.getSubscriptionBillingCurrency();return n!==void 0?(R.addAction("chatgpt_present_subscription_billing_currency",{subscriptionBillingCurrency:n,callLocation:t}),qd(Xe(),"chatgpt_present_subscription_billing_currency",void 0,{subscriptionBillingCurrency:n,callLocation:t}),n):(R.addError(new Error("chatgpt_missing_subscription_billing_currency"),{callLocation:t}),qd(Xe(),"chatgpt_missing_subscription_billing_currency",void 0,{callLocation:t}),Cx)}willRenewSubscription(){return this.data.subscriptionStatus.lastActiveSubscription.will_renew}willPlanChange(){return!!this.data.subscriptionStatus.scheduledPlanChange}getDaysUntilPlanChanges(){const t=this.data.subscriptionStatus.scheduledPlanChange?.changesAt;if(t==null)return null;const n=Math.floor(Date.now()/1e3);return Math.ceil((t-n)/(60*60*24))}getNextPlanType(){return this.data.subscriptionStatus.scheduledPlanChange?.planType??null}getLastActiveSubscription(){return this.data.subscriptionStatus.lastActiveSubscription}isDeactivated(){return this.data.deactivated}canInviteMembers(){return this.isTeam()||this.isEnterprisey()&&(this.isOwnerOfAccount()||this.isAdminOfAccount())}isOwnerOfAccount(){return this.data.role===nl.OWNER}isAdminOfAccount(){return this.data.role===nl.ADMIN}isStandardUserOfAccount(){return this.data.role===nl.STANDARD}hasPaidFeatures(){return this.hasPaidSubscription()||this.isEnterprisey()}hasCustomerObject(){return this.data.subscriptionStatus.hasCustomerObject}getProcessorEntity(){return this.data.subscriptionStatus.processorEntity}wasPaidCustomer(){return!this.data.subscriptionStatus.hasPaidSubscription&&this.data.subscriptionStatus.wasPaidCustomer}isOrWasPaidCustomer(){return this.data.subscriptionStatus.hasPaidSubscription||this.data.subscriptionStatus.wasPaidCustomer}isEligibleForCancellationPromotion(){return this.data.subscriptionStatus.isEligibleForCancellationPromotion}}class _2{constructor(t){this.data=t}static fromLightAccount(t,n){return new _2({lightAccount:t,authUserId:n})}get id(){return this.data.lightAccount.id}get authUserId(){return this.data.authUserId}get structure(){return this.data.lightAccount.structure}get planType(){return this.data.lightAccount.planType}get isDelinquent(){return this.data.lightAccount.isDelinquent}get gracePeriodId(){return this.data.lightAccount.gracePeriodId}get accountUserId(){return this.data.authUserId?this.data.authUserId+"__"+this.data.lightAccount.id:void 0}get normalizedAccountUserId(){return this.isPersonalAccount()?this.data.authUserId:this.accountUserId}isEnterprisey(){return t2(this.planType)}isRBACEnabled(){return this.isEnterprisey()}isWorkspacePlan(){return this.isEnterprisey()||this.isTeam()}isGo(){return this.planType===Re.GO}isPro(){return this.planType===Re.PRO}isEdu(){return wh(this.planType)}isTeam(){return this.planType===Re.TEAM}isBusiness(){return this.planType===Re.BUSINESS}isPlus(){return this.planType===Re.PLUS}isFree(){return this.planType===Re.FREE}isCBP(){return this.planType===Re.BUSINESS||this.planType===Re.EDUCATION}hasPaidSubscription(){return Dx(this.planType)}hasPaidFeatures(){return this.hasPaidSubscription()||this.isEnterprisey()}isWorkspaceAccount(){return this.structure===Rn.WORKSPACE}getWorkspaceId(){if(this.isWorkspaceAccount())return this.id}isPersonalAccount(){return this.structure===Rn.PERSONAL}hasPlusFeatures(){return this.planType!==Re.FREE}}function bq(e){return e.account_ordering.map(t=>{const n=e.accounts[t];return new nf({id:n.account.account_id,residencyRegion:n.account.account_residency_region,computeResidency:n.account.account_compute_residency,accountUserId:n.account.account_user_id,name:n.account.name??null,profilePictureId:n.account.profile_picture_id,profilePictureUrl:n.account.profile_picture_url,structure:n.account.structure,workspaceType:n.account.workspace_type,role:n.account.account_user_role??yq,organizationId:n.account.organization_id,deactivated:n.account.is_deactivated,eligibleForReactivation:n.account.eligible_for_reactivation,ekmConfig:n.account.ekm_config,isHipaaCompliantWorkspace:n.account.is_hipaa_compliant_workspace,subscriptionStatus:{billingPeriod:n.entitlement.billing_period,hasPaidSubscription:n.entitlement.has_active_subscription||!1,isActiveSubscriptionGratis:n.entitlement.is_active_subscription_gratis||!1,billingCurrency:n.entitlement.billing_currency,subscriptionPlan:n.entitlement.subscription_plan,planType:n.account.plan_type??vq,subscriptionRenewsAt:qc(n.entitlement.renews_at),subscriptionExpiresAt:qc(n.entitlement.expires_at),scheduledPlanChange:n.entitlement.scheduled_plan_change?{changesAt:jx(n.entitlement.scheduled_plan_change.changes_at),planType:n.entitlement.scheduled_plan_change.plan_type}:void 0,wasPaidCustomer:n.account.has_previously_paid_subscription??!1,hasCustomerObject:n.account.processor?.a001.has_customer_object??!1,processorEntity:n.account.processor?.a001.processor_entity,lastActiveSubscription:n.last_active_subscription,isResellerHosted:n.account.reseller_hosted_account??!1,discount:n.entitlement.discount,isEligibleForCancellationPromotion:n.entitlement.is_eligible_for_cp??!1,isDelinquent:n.entitlement.is_delinquent,becameDelinquentAt:qc(n.entitlement.became_delinquent_timestamp),gracePeriodEndAt:qc(n.entitlement.grace_period_end_timestamp),gracePeriodId:n.entitlement.grace_period_id},features:[...n.features].sort(),canAccessWithCurrentSession:n.can_access_with_session!==!1,ssoConnectionName:n.sso_connection_name??null})})}function Sq(e,t){const n=e.filter(s=>s.canAccessWithCurrentSession);if(typeof t=="string"){const s=n.find(i=>i.id===t);if(s!==void 0)return s;if(t===fi){const i=n.find(o=>o.structure===Rn.PERSONAL);if(i!==void 0)return i}}if(n.length===1||!n.some(s=>s.structure===Rn.WORKSPACE))return n[0]}function wq(e,t){if(e){if(e.structure===Rn.WORKSPACE)return e.id;if(t.some(r=>r.structure===Rn.WORKSPACE))return fi}}async function Eq(){const e=await H.safeGet("/accounts/check/{version}",{parameters:{path:{version:MP},query:{timezone_offset_min:new Date().getTimezoneOffset().toString()}},intercomEventOnError:"fetch-error:accounts:get",authOption:ht.SendIfAvailable}),t=de.getCookie(ie.Workspace)??void 0,n=bq(e),r=Sq(n,t);return{accountItems:n,currentAccountId:r?.id}}function xq(e,t){return e instanceof nf&&t instanceof nf&&e.isEqual(t)?e:kR(e,t)}function js(){return ms({queryKey:["account-status"],queryFn:Eq,structuralSharing:xq,staleTime:1/0})}function Mh(e){return e?.accountItems.find(t=>t.id===e.currentAccountId)??null}function Tq(e){const t=e.getQueryData(js().queryKey);return Mh(t)}function K_(e){e!=null?de.setCookie(ie.Workspace,e,{maxAge:H8}):de.deleteCookie(ie.Workspace)}function Oq(e){de.setCookie(ie.WorkspaceResidencyRegion,e,{maxAge:H8})}function Ux(e,t){const n=de.getCookie(ie.Workspace);return e.structure===Rn.WORKSPACE?(K_(e.id),Oq(e.residencyRegion)):e.structure===Rn.PERSONAL&&t&&K_(fi),de.deleteCookie(ie.DowngradeAccountEnabled),{accountCookieChanged:(n??fi)!==(de.getCookie(ie.Workspace)??fi)}}function v0e(e,t,n=!0){const r=e.getQueryData(js().queryKey);if(r==null)return{updatedAccount:!1};const s=r.accountItems.find(i=>i.id===t);return s==null?{updatedAccount:!1}:(Ux(s,n),e.setQueryData(js().queryKey,{...r,currentAccountId:t}),{updatedAccount:!0})}function y0e(e,t,n,r,s,i=!0){const o=e.getQueryData(js().queryKey);if(o==null)return{willRedirect:!1,updatedAccount:!1};const a=o.accountItems.find(l=>l.id===t);if(a==null)return{willRedirect:!1,updatedAccount:!1};const{accountCookieChanged:c}=Ux(a,i);if(!a.canAccessWithCurrentSession){const l=a.ssoConnectionName?{connection:a.ssoConnectionName}:void 0,u=r.formatMessage(h6.workspacePlaceholder),d=a.data.name||u;return s.info(r.formatMessage(h6.authenticateNotice,{workspaceName:d})),Wa(n,{authType:"login",additionalAuthParams:l}),{willRedirect:!0,updatedAccount:!0}}return c?Qy():e.setQueryData(js().queryKey,{...o,currentAccountId:t}),{willRedirect:!1,updatedAccount:!0}}function kq(){return $e(js())}function on(){return $e({...js(),select:Mh}).data??null}const Nt=It(e=>{const t=Jl(e),n=t?.user?.id,r=t?.account??null;return r?_2.fromLightAccount(r,n):null});function Aq(){return on()?.isHipaaCompliantWorkspace??!1}function Mq(e){return we(e,"875954897")}function Bx(){return on()?.features}function C0e(e){return Bx()?.includes(e)??!1}function b0e(){const e=on(),t=Sh(e?.getWorkspaceId()),n=t.isLoading?null:t.data?.allow_third_party_gpts==="allow_specific";return e?.isOwnerOfAccount()&&n}function Iq(e){return e.accountItems.some(t=>t.hasPaidFeatures())}function S0e(e){"use forget";const t=xe.c(7),n=Y(),r=on();let s;t[0]!==r?(s=r?.isRBACEnabled(),t[0]=r,t[1]=s):s=t[1];const i=s,o=Aq();let a;t[2]!==n?(a=Mq(n),t[2]=n,t[3]=a):a=t[3];const l=Fx((o&&a||!o)&&i);if(!i)return!0;let u;return t[4]!==e||t[5]!==l.data?(u=l.data!=null&&l.data.some(d=>d.systemHint===e),t[4]=e,t[5]=l.data,t[6]=u):u=t[6],u}const h6=ze({authenticateNotice:{id:"zALe8U",defaultMessage:"You need to authenticate to access {workspaceName}. Redirecting..."},workspacePlaceholder:{id:"IIY4N4",defaultMessage:"this workspace"}}),Nq=["default","blue","green","yellow","pink","orange"],Rq=["purple"],Pq=["black"],Dq=e=>{const t=Nt(e)?.planType,n=t===Re.PLUS,r=t===Re.PRO,s=t===Re.TEAM||t===Re.BUSINESS,o=!(t===Re.EDUCATION)&&(n||r||s);return[...Nq,...o?Rq:[],...r?Pq:[]]};function qx(e){return gt(e,"1187049270").get("themes_enabled",!1)}const Gx=It(e=>vt(()=>_t.getItem(Qe.ChatTheme,{userId:Nt(e)?.normalizedAccountUserId})??"default")),Hx=(e,t)=>{Gx(e).setState(t),_t.setItem(Qe.ChatTheme,t,{userId:Nt(e)?.normalizedAccountUserId})};function Lq(){const e=Y();return Gx(e)()}function w0e(){const e=Y(),t=qx(e),n=Lq(),r=iB();return t?{isLoading:!1,value:n,setValue:s=>{r.mutate({setting:dh.ChatTheme,value:s}),Hx(e,s)}}:{isLoading:!1,value:"default",setValue:()=>{}}}const Fq=({cspScriptNonce:e})=>{const t=Y();if(!qx(t))return null;const n=gd(Qe.ChatTheme,{userId:Nt(t)?.normalizedAccountUserId});return p.jsx("script",{nonce:e,suppressHydrationWarning:!0,children:`!function(){try{const t=localStorage.getItem(${JSON.stringify(n)});document.documentElement.dataset.chatTheme="string"==typeof t?JSON.parse(t):void 0}catch(e){}}();`})};function jq(e){const t=Dq(e),n=Ly(()=>{const s=rB(e)().data?.settings[dh.ChatTheme]??_t.getItem(Qe.ChatTheme,{userId:Nt(e)?.normalizedAccountUserId});return P8(s,t,"default")});return fF(()=>{const r=n();document.documentElement.dataset.chatTheme=r,Hx(e,r)})}function Ql(){return OU(()=>!0,()=>!1)}function Vx(){return Ql()?window:null}var Uq=(e=>(e.Small="small",e.Medium="medium",e.Large="large",e.XLarge="xlarge",e))(Uq||{});const Ih={small:640,medium:768,large:1024,xlarge:1280};function Bq(e,t){const n=Vx(),r=m.useRef(null),s=m.useCallback(i=>{if(n==null)return()=>{};const o=n.matchMedia(e),a=new AbortController;return o.addEventListener("change",c=>{const l=c.matches,u=l!==r.current?.result;r.current={win:n,query:e,result:l},u&&i()},{signal:a.signal}),()=>{a.abort()}},[e,n]);return m.useSyncExternalStore(s,()=>{const i=jr(n);if(r.current?.win!==i||r.current?.query!==e){const o=i.matchMedia(e).matches;r.current={win:i,query:e,result:o}}return r.current.result},t)}function qq(e,t){return window.matchMedia(e).matches}function Fo(e,t){return[()=>Bq(e,t),()=>qq(e)]}const[E0e]=Fo("(prefers-reduced-motion: reduce)",()=>!1),[x0e,T0e]=Fo(`(min-width: ${Ih.small}px)`,()=>!CP()),[zx,Gq]=Fo(`(min-width: ${Ih.medium}px)`,()=>gy()||_y()),[O0e,k0e]=Fo(`(min-width: ${Ih.large}px)`,_y),[A0e]=Fo(`(min-width: ${Ih.xlarge}px)`,()=>!1),[M0e,$x]=Fo("(pointer: coarse)",g9),[Hq,I0e]=Fo("(hover: hover)",_y);function N0e(){return!zx()}function R0e(){return Ql()?typeof CSS<"u"&&CSS.supports("container-type: inline-size"):!0}function Vq(){const e={composer:{autofocusDisabled$:nt(Wf()||GC()),reset:()=>{e.composer.autofocusDisabled$.set($x()||GC())}},projects:{createOrUpdateProject$:nt(void 0),moveConversationToProject$:nt(void 0),renamingProjectId$:nt(void 0),reset:()=>{e.projects.renamingProjectId$.set(void 0)}}};return e}const zq=It(Vq),$q="{{.assetPrefix}}/assets/chatgpt-share-og-u7j5uyao.webp",Wq={src:$q},Kq="{{.assetPrefix}}/assets/favicon-180x180-od45eci6.webp",Yq={src:Kq},Zq="data:image/x-icon;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAVfSURBVHgB5VuLUeMwEJWZKyBUgK8Cch2khHRwpgJCBQkVJFSQpAKggtBBuAocKiBUsKcX24wtZHlXlpIwvJkdYyLJ2q/WKzlRkUFEqb6MNF1rSksalNc6dpr25fWfpldQkiQ79d2gmR5pmmvKqT+2mpYYU50z9AQHmqaBmG5DrimjwqrOAzXG3+l4yMtnpuqU0BO4PTLjNkFk6tiA5DVt6HyQ07GsgU6v9TZgThMVE1RE9nPHVMUAFUvRd8GSy1fCaaQH3OrLUH0vIIn609WoUwClNDMVCPv9Xu12u88rkKbp4TocDtVgMFABsdJCuFG+oGKt7Y3NZkOTyYQ0o4RhXYQ24/GYVqsVvb8HibVz5QMqor03MPnZbEZao51MuyjLMsrznHpCtjpQsc57iT8U44EFAV5SxQV55vMwda6Zj0ajA1Mg/K39n9UPruGJDZf5jDywWCxaJw5rQAyAgLr8mhMvYGGemHQxD9PPSQhMqE1jy+WSfIG+bYJAoPQIkugwcAlgSkK0MT+dTkNFcZrP59aYAtfxwCyY9m3MQ2Pb7ZZCAwHQZg1wFyHsVkBC34ev2pgPsGS1AhZlC5aIP0LMbALIub1t2ojNfAWbEOAewmfnJvMiZ8LSZWohhtm3AcyaMcEjHozqAlhye+HhtoB3bDw+Pn6ZB9xSgEVdAGz1mdqH6Z8K0HoPK8jr0Z/Xw6J91zqP37BSxIoNtkAstIIUAhhzW4MhrvbrSyTahcoJTJhWIMwSswslKHQ8Pz837nU21tr25eXl82+89z88PKgY0PGnca/fFZQAQ1jAI1dcZuR1RX5kb6rfUsUCLMucl8DantgBEMyaDHXBXK8RQGPAdAOsEExs4QKsGhRKWA3bGXZ7jraCxj3Ms+4aoVCV1Cq8vb0pJgYQQMppWdXvPnsyandaM1/ixP39vQoNUwCmslxdL5QnuMVLWEG9LSwgtBVcXV017k1lueAtAAlMYQk0FB3RBQCTr2sE5upaPn3w8fHRuJeU1iGAHafh5eVl456jRTBursvmuh0CPvGp6vpLFcdSOnF9fd24f3197exzc9Pck9DL4IEaM9CTv7u76xwPAdWMJ/UxXHN1YN8rEXIlHGbaDLIlQrZXayUshkoSNANPcAH2ommu/WZqXMd6vW7c397eflmuDioQBERbW1hO/f+wEE6OUnUXlcLMGqDr9RO1OsWoFkFb3L0EjgUJs82x6HXYTIeVw9zgHhACytcckwRzLmqDKTxBGnzofrADEtQDzbw7Vn7PgWmRwuLM9tMR9A27rBqgCBEEtrqgcBNmWReAqJZkWkHMgodkDtIhGuGQBG5gswL4+rFg25ARaj9XJjCuZIR6lK/IY5dGDBvzHnEoswkAFQ6RHZtm6DkZNtq24qSbItR2VoCEVgC/t63hoXeJMJZN2J7Pmak2kIcVtG1aqjJ17SMI12kT/M9jNyqnrpMiuoHYkcFk2wkPCAduIZksxnMds+lhYZnJb9IihI0qPnIQAW91eqe29Xe8CyBPB6GKU73ZIZfHOz3yelSLXBUdvBXqbM/nON0uSZLfrJbU45CU61RHH4I1oNTuCdkhqVIIvda0UIIA4wFOm/gdoiZBiuwSBJIkybE5tEXUh8YDZJgzF4+co7IrffmrAgD+DT9H3R5+D6p8GVfEhSpGBDoyu9Z+n7ka/PjD0qyqcDnQWn0frDnMi0HCTPFEWKiYoGJ1+JmfzNSE4HWiNCI2dIpP6KgoqOZ0OhxP6w4hwBpmRxbEe/nMoJ+X9EIpiNgWkZ8d4zZQUWNckeD4XQfTyEhHKgJYiVAfUBGchiVVn9B3fT6P3SpsFr7E/nz+P3T08cw43Z8wAAAAAElFTkSuQmCC",Jq="data:image/svg+xml,%3csvg%20width='64'%20height='64'%20viewBox='0%200%2064%2064'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%20%3e%3crect%20width='64'%20height='64'%20rx='32'%20fill='white'%20/%3e%3cpath%20d='M34.2043%2037.0916H41.6359'%20stroke='black'%20stroke-width='3.42172'%20stroke-linecap='round'%20/%3e%3cpath%20d='M32.089%2053.6889C28.2099%2053.6889%2024.6248%2052.7289%2021.3334%2050.809C18.0421%2048.8499%2015.4169%2046.2247%2013.4578%2042.9334C11.5378%2039.642%2010.5779%2036.0569%2010.5779%2032.1778C10.5779%2028.2987%2011.5378%2024.7136%2013.4578%2021.4222C15.4169%2018.1309%2018.0421%2015.5253%2021.3334%2013.6054C24.6248%2011.6462%2028.2099%2010.6667%2032.089%2010.6667C35.968%2010.6667%2039.5532%2011.6462%2042.8445%2013.6054C46.1359%2015.5253%2048.7415%2018.1309%2050.6614%2021.4222C52.6205%2024.7136%2053.6001%2028.2987%2053.6001%2032.1778C53.6001%2036.0569%2052.6205%2039.642%2050.6614%2042.9334C48.7415%2046.2247%2046.1359%2048.8499%2042.8445%2050.809C39.5532%2052.7289%2035.968%2053.6889%2032.089%2053.6889ZM32.089%2049.6923C35.2628%2049.6923%2038.1818%2048.9087%2040.8462%2047.3414C43.5498%2045.7741%2045.6853%2043.6582%2047.2526%2040.9938C48.8199%2038.2902%2049.6035%2035.3516%2049.6035%2032.1778C49.6035%2029.004%2048.8199%2026.0849%2047.2526%2023.4205C45.6853%2020.717%2043.5498%2018.5815%2040.8462%2017.0142C38.1818%2015.4469%2035.2628%2014.6633%2032.089%2014.6633C28.9152%2014.6633%2025.9765%2015.4469%2023.273%2017.0142C20.6086%2018.5815%2018.4927%2020.717%2016.9254%2023.4205C15.3581%2026.0849%2014.5745%2029.004%2014.5745%2032.1778C14.5745%2035.3516%2015.3581%2038.2902%2016.9254%2040.9938C18.4927%2043.6582%2020.6086%2045.7741%2023.273%2047.3414C25.9765%2048.9087%2028.9152%2049.6923%2032.089%2049.6923ZM24.2133%2039.7008C23.6648%2039.7008%2023.1946%2039.5049%2022.8028%2039.1131C22.411%2038.7212%2022.215%2038.2511%2022.215%2037.7025C22.215%2037.3499%2022.313%2037.0364%2022.5089%2036.7621L25.2713%2032.0602L22.6265%2027.5935C22.3522%2027.1625%2022.215%2026.7706%2022.215%2026.418C22.215%2025.9086%2022.411%2025.458%2022.8028%2025.0662C23.1946%2024.6744%2023.6648%2024.4785%2024.2133%2024.4785C24.9186%2024.4785%2025.4672%2024.7919%2025.859%2025.4188L29.0328%2030.8848C29.2679%2031.2766%2029.3854%2031.6684%2029.3854%2032.0602C29.3854%2032.4521%2029.2679%2032.8439%2029.0328%2033.2357L25.859%2038.7017C25.4672%2039.3678%2024.9186%2039.7008%2024.2133%2039.7008ZM34.2048%2039.1131C33.6563%2039.1131%2033.1861%2038.9172%2032.7943%2038.5253C32.4025%2038.1335%2032.2065%2037.6633%2032.2065%2037.1148C32.2065%2036.6054%2032.4025%2036.1548%2032.7943%2035.763C33.1861%2035.3712%2033.6563%2035.1752%2034.2048%2035.1752H41.7279C42.2372%2035.1752%2042.6878%2035.3712%2043.0796%2035.763C43.4715%2036.1548%2043.6674%2036.6054%2043.6674%2037.1148C43.6674%2037.6633%2043.4715%2038.1335%2043.0796%2038.5253C42.6878%2038.9172%2042.2372%2039.1131%2041.7279%2039.1131H34.2048Z'%20fill='black'%20/%3e%3c/svg%3e",Qq="{{.assetPrefix}}/assets/favicon-eex17e9e.ico",Xq="{{.assetPrefix}}/assets/favicon-l4nq08hd.svg",eG=Object.prototype.toString;function tG(e,t){try{return e instanceof t}catch{return!1}}function nG(e){switch(eG.call(e)){case"[object Error]":case"[object Exception]":case"[object DOMException]":return!0;default:return tG(e,Error)}}const p6={componentStack:null,error:null};function rG(e,t){const n=new WeakMap;function r(s,i){if(!n.has(s)){if(s.cause)return n.set(s,!0),r(s.cause,i);s.cause=i}}r(e,t)}const sG=["The node to be removed is not a child of this node","The object can not be found here."];function iG(e){return sG.some(t=>e.message?.includes(t))}let Wx=class extends m.Component{state;constructor(t){super(t),this.state=p6}componentDidCatch(t,{componentStack:n}){if(nG(t)){const r=new Error(t.message);r.name=`React ErrorBoundary ${r.name}`,r.stack=n??"",rG(t,r)}if(!iG(t)&&(this.props.logRequestErrors===!0||!(t instanceof je))){const r=new Error(t.message);r.name="ReactRenderingError",r.stack=n??"",r.cause=t,R.addError(r,{error_boundary:this.props.name})}cx(),this.props.onError&&this.props.onError(t,n??""),this.setState({error:t,componentStack:n})}resetErrorBoundary=()=>{const{onReset:t}=this.props,{error:n,componentStack:r}=this.state;t&&t(n,r??""),this.setState(p6)};render(){const{fallback:t,children:n}=this.props,r=this.state;if(r.error){let s;return typeof t=="function"?s=t({error:r.error,componentStack:r.componentStack??"",resetError:this.resetErrorBoundary}):s=t,m.isValidElement(s)?s:null}return typeof n=="function"?n():n}};function Kx(e){var t,n,r="";if(typeof e=="string"||typeof e=="number")r+=e;else if(typeof e=="object")if(Array.isArray(e)){var s=e.length;for(t=0;t<s;t++)e[t]&&(n=Kx(e[t]))&&(r&&(r+=" "),r+=n)}else for(n in e)e[n]&&(r&&(r+=" "),r+=n);return r}function ne(){for(var e,t,n=0,r="",s=arguments.length;n<s;n++)(e=arguments[n])&&(t=Kx(e))&&(r&&(r+=" "),r+=t);return r}function oG(e){if(typeof document>"u")throw new Error("not supported in SSR");const t=document.createElement("template");return t.innerHTML=e,t.innerHTML}function aG(e){return`data:image/svg+xml;utf8,${encodeURIComponent(e)}`}const D0e=({svgString:e,...t})=>{const n=m.useMemo(()=>oG(e),[e]);return n?p.jsx("img",{src:aG(n),...t}):null},L0e=({svgString:e,className:t,color:n})=>p.jsx(Wx,{name:"StringToSVG",fallback:p.jsx("div",{className:t}),children:p.jsx("div",{className:ne("[&_svg]:h-full [&_svg]:w-full",t),dangerouslySetInnerHTML:{__html:e},style:{color:n}})}),Yo=ze({description:{id:"meta.description",defaultMessage:"ChatGPT helps you get answers, find inspiration and be more productive. It is free to use and easy to try. Just ask and ChatGPT can help with writing, learning, brainstorming and more."},keywords:{id:"meta.keywords",defaultMessage:"ai chat,ai,chap gpt,chat gbt,chat gpt 3,chat gpt login,chat gpt website,chat gpt,chat gtp,chat openai,chat,chatai,chatbot gpt,chatg,chatgpt login,chatgpt,gpt chat,open ai,openai chat,openai chatgpt,openai"},ogDescription:{id:"meta.ogDescription",defaultMessage:"A conversational AI system that listens, learns, and challenges"}}),cG=[{property:"og:title",content:"ChatGPT"},{property:"og:image",content:Wq.src}];function Zo(e,t){const n=new URL(e,window.location.origin);return t&&n.searchParams.set("locale",t),n.toString()}function lG(){const e=Ue(),t=Y(),n=Zn(t).checkGate("3125419433"),r=fr();return n?p.jsxs(p.Fragment,{children:[p.jsx("meta",{name:"description",content:e.formatMessage(Yo.description)}),p.jsx("meta",{name:"keyword",content:e.formatMessage(Yo.keywords)}),p.jsx("meta",{property:"og:description",content:e.formatMessage(Yo.ogDescription)}),p.jsx("meta",{property:"og:url",content:Zo("/",_n(t).locale)}),AU().map(s=>p.jsx("link",{rel:"alternate",hrefLang:s,href:Zo(r.pathname,s)},s)),p.jsx("link",{rel:"alternate",hrefLang:"x-default",href:Zo(r.pathname)}),p.jsx("link",{rel:"canonical",href:Zo(r.pathname)})]}):p.jsxs(p.Fragment,{children:[p.jsx("meta",{name:"description",content:Yo.description.defaultMessage}),p.jsx("meta",{name:"keyword",content:Yo.keywords.defaultMessage}),p.jsx("meta",{property:"og:description",content:Yo.ogDescription.defaultMessage}),p.jsx("meta",{property:"og:url",content:Zo("/")}),p.jsx("link",{rel:"canonical",href:Zo("/")})]})}function uG(){"use forget";const e=xe.c(6),t=Y();let n;e[0]!==t?(n=gt(t,"3927927759").get("enable_mobile_app_upsell_banner",!1),e[0]=t,e[1]=n):n=e[1];const r=n;let s;e[2]!==r?(s=r&&p.jsx("link",{rel:"manifest",href:"/manifest.json"}),e[2]=r,e[3]=s):s=e[3];let i;return e[4]!==s?(i=p.jsx(p.Fragment,{children:s}),e[4]=s,e[5]=i):i=e[5],i}function dG(){"use forget";const e=xe.c(12),t=Y(),{pathname:n}=fr(),r=!n.startsWith("/share")&&!n.startsWith("/s")&&!n.startsWith("/canvas/shared");let s;e[0]!==t?(s=gt(t,"3927927759").get("enable_mobile_app_upsell_banner",!1),e[0]=t,e[1]=s):s=e[1];const i=s;let o,a;e[2]===Symbol.for("react.memo_cache_sentinel")?(o=p.jsx("link",{rel:"preconnect",href:"{{.assetPrefix}}"}),a=p.jsx("link",{rel:"preconnect",href:window.location.origin}),e[2]=o,e[3]=a):(o=e[2],a=e[3]);let c;e[4]!==r?(c=r&&p.jsx("meta",{name:"robots",content:"index, follow"}),e[4]=r,e[5]=c):c=e[5];let l;e[6]===Symbol.for("react.memo_cache_sentinel")?(l=p.jsx("meta",{httpEquiv:"Content-Type",content:"text/html; charset=utf-8"}),e[6]=l):l=e[6];let u;e[7]!==i?(u=i&&p.jsx("meta",{name:"apple-itunes-app",content:"app-id=6448311069"}),e[7]=i,e[8]=u):u=e[8];let d;return e[9]!==c||e[10]!==u?(d=p.jsxs(p.Fragment,{children:[o,a,c,l,u]}),e[9]=c,e[10]=u,e[11]=d):d=e[11],d}function m6({href:e}){return p.jsxs(p.Fragment,{children:[p.jsx("link",{rel:"icon",href:e,type:"image/svg+xml"}),p.jsx("link",{rel:"icon",href:e,type:"image/svg+xml",media:"(prefers-color-scheme: dark)"})]})}function fG(){"use forget";const e=xe.c(5),{pathname:t}=fr();let n;e[0]!==t?(n=t.startsWith("/codex")?p.jsxs(p.Fragment,{children:[p.jsx("link",{rel:"icon",href:Zq,sizes:"32x32"}),p.jsx(m6,{href:Jq})]}):p.jsxs(p.Fragment,{children:[p.jsx("link",{rel:"icon",href:Qq,sizes:"32x32"}),p.jsx(m6,{href:Xq})]}),e[0]=t,e[1]=n):n=e[1];let r;e[2]===Symbol.for("react.memo_cache_sentinel")?(r=p.jsx("link",{rel:"apple-touch-icon",sizes:"180x180",href:Yq.src}),e[2]=r):r=e[2];let s;return e[3]!==n?(s=p.jsxs(p.Fragment,{children:[n,r]}),e[3]=n,e[4]=s):s=e[4],s}const Y_=e=>e;var Ka=(e=>(e.ContentOrTos="content_or_tos",e.ContentPolicy="content_policy",e.BioSafetyContentPolicy="bio_safety_content_policy",e.ModelIncompatibility="model_incompatibility",e.ContentRegurgitation="content_regurgitation",e))(Ka||{});const Yx={errType:"warning",errCode:"content_policy"},hG={errType:"danger",errCode:"model_incompatibility"},pG={err:"Contents may violate our content policy",errType:"danger",errCode:"content_policy"},Zx={err:"Contents may violate our content policy",errType:"danger",errCode:"content_policy",shouldDisableConversation:!0},mG={errType:"danger",errCode:"bio_safety_content_policy",canRetry:!1},gG={errType:"danger",errCode:"bio_safety_content_policy",canRetry:!1,shouldDisableConversation:!0},Jx=(e,t)=>!e.length||t?null:{disclaimers:e},Qx=({isSafetyLimited:e,shouldDisableConversation:t,isModelIncompatibility:n})=>e?t?gG:mG:t?Zx:n?hG:pG;class _G{isMultimodalTextMessage(t){return t.content.content_type===Ee.MultimodalText}isPartAssetPointer(t){return typeof t!="string"&&(t.content_type===Qt.ImageAssetPointer||t.content_type===Qt.AudioAssetPointer)}isBase64ImagePart(t){return typeof t!="string"&&t.content_type===Qt.Image}isPartRealTimeUserAudioVideoAssetPointer(t){return typeof t!="string"&&t.content_type===Qt.RealTimeUserAudioVideoAssetPointer}isPartAudioTranscription(t){return typeof t!="string"&&t.content_type===Qt.AudioTranscription}getAudio(t){return this.isMultimodalTextMessage(t)?t.content.parts.filter(n=>typeof n!="string"&&n.content_type===Qt.Audio):[]}getAssetPointers(t){return this.isMultimodalTextMessage(t)?t.content.parts.filter(n=>this.isPartAssetPointer(n)):[]}getImageAssetPointers(t){return this.isMultimodalTextMessage(t)?this.getImageAssetPointersFromParts(t.content.parts):[]}getImageAssetPointersFromParts(t){return t.filter(n=>this.isPartAssetPointer(n)&&n.content_type===Qt.ImageAssetPointer)}getFrameAssetPointers(t){return this.isMultimodalTextMessage(t)?t.content.parts.flatMap(n=>{if(typeof n!="string"&&n.content_type===Qt.RealTimeUserAudioVideoAssetPointer)return n.frames_asset_pointers}).filter(n=>!!n):[]}getAudioAssetPointers(t){return this.isMultimodalTextMessage(t)?t.content.parts.map(n=>{if(typeof n!="string")switch(n.content_type){case Qt.AudioAssetPointer:return n;case Qt.RealTimeUserAudioVideoAssetPointer:return n.audio_asset_pointer;default:return}}).filter(n=>!!n):[]}getVideoContainerAssetPointers(t){return this.isMultimodalTextMessage(t)?t.content.parts.flatMap(n=>typeof n!="string"&&n.content_type===Qt.RealTimeUserAudioVideoAssetPointer?n.video_container_asset_pointer:null).filter(n=>!!n):[]}getImageOperationFileIds(t){const n=t.metadata?.dalle?.from_client?.operation??t.metadata?.generation?.from_client?.operation;return n?.type==="inpainting"?{operation:"inpainting",originalFileId:n.original_file_id,maskFileId:n.mask_file_id}:n?.type==="transformation"?{operation:"transformation",originalFileId:n.original_file_id}:void 0}getPartsAsString(t,n=!0){return this.isMultimodalTextMessage(t)?t.content.parts.map(r=>{if(typeof r=="string")return r;if(this.isPartAudioTranscription(r))return r.text;if(n){if(this.isPartAssetPointer(r))return`[media pointer="${r.asset_pointer}"]`;if(this.isPartRealTimeUserAudioVideoAssetPointer(r)){const s=r.audio_asset_pointer?.asset_pointer;return s&&`[media pointer="${s}"]`}else if(this.isBase64ImagePart(r))return r.payload}else return!1}).filter(Boolean).join(`
`):""}}const v2=new _G,vG=["image_gen"];var ee=(e=>(e[e.no_render=0]="no_render",e[e.BrowseTool=1]="BrowseTool",e[e.Browsing=2]="Browsing",e[e.CanmoreTool=3]="CanmoreTool",e[e.Container=4]="Container",e[e.CodeInterpreter=5]="CodeInterpreter",e[e.CodeInterpreterTool=6]="CodeInterpreterTool",e[e.Dalle=7]="Dalle",e[e.DalleTool=8]="DalleTool",e[e.GizmoEditor=9]="GizmoEditor",e[e.JITPlugin=10]="JITPlugin",e[e.JITPluginTool=11]="JITPluginTool",e[e.JITPluginGoogleTool=12]="JITPluginGoogleTool",e[e.ImagePreloadTool=13]="ImagePreloadTool",e[e.ModelEditableContext=14]="ModelEditableContext",e[e.MultimodalText=15]="MultimodalText",e[e.ParallelBrowsing=16]="ParallelBrowsing",e[e.ParallelBrowsingTool=17]="ParallelBrowsingTool",e[e.RetrievalBrowsing=18]="RetrievalBrowsing",e[e.RetrievalBrowsingTool=19]="RetrievalBrowsingTool",e[e.SearchResultTool=20]="SearchResultTool",e[e.SearchGPTQuery=21]="SearchGPTQuery",e[e.System=22]="System",e[e.SystemContent=23]="SystemContent",e[e.DeveloperContent=24]="DeveloperContent",e[e.Text=25]="Text",e[e.StructuredThoughts=26]="StructuredThoughts",e[e.ReasoningRecap=27]="ReasoningRecap",e[e.UserEditableContext=28]="UserEditableContext",e[e.UserModelBio=29]="UserModelBio",e[e.UserModelBioTool=30]="UserModelBioTool",e[e.Unknown=31]="Unknown",e[e.de1d73e=32]="de1d73e",e[e.a8km123=33]="a8km123",e[e.f959b8c=34]="f959b8c",e[e.b1de6e2_c=35]="b1de6e2_c",e[e.b1de6e2_s=36]="b1de6e2_s",e[e.b1de6e2_d=37]="b1de6e2_d",e[e.b1de6e2_rm=38]="b1de6e2_rm",e[e.l1p9k3u=39]="l1p9k3u",e[e.l1239dk1=40]="l1239dk1",e[e.l1239dk2=41]="l1239dk2",e[e.kanzi=42]="kanzi",e[e.is_loading_message=43]="is_loading_message",e[e.b47u8ra0_t=44]="b47u8ra0_t",e[e.oiw209h=45]="oiw209h",e[e.oiw209h_c=46]="oiw209h_c",e[e.t2uay3k=47]="t2uay3k",e[e.t2uay3k_c=48]="t2uay3k_c",e[e.c12k321=49]="c12k321",e[e.Oboe=50]="Oboe",e[e.CoTSearchToolCall=51]="CoTSearchToolCall",e[e.CoTSearchToolResult=52]="CoTSearchToolResult",e[e.n7jupd_c=53]="n7jupd_c",e[e.n7jupd_r=54]="n7jupd_r",e[e.n7jupd_t=55]="n7jupd_t",e[e.n7jupd_m=56]="n7jupd_m",e[e.n7jupd_x=57]="n7jupd_x",e[e.n7jupd_i=58]="n7jupd_i",e[e.n7jupd_a=59]="n7jupd_a",e[e.n7jupd_n=60]="n7jupd_n",e[e.n7jupd_p=61]="n7jupd_p",e[e.n7jupd_image_gen=62]="n7jupd_image_gen",e[e.PIMBlock=63]="PIMBlock",e[e.Mochi=64]="Mochi",e[e.SuperWidget=65]="SuperWidget",e[e.Croquette=66]="Croquette",e[e.kaur1br5=67]="kaur1br5",e))(ee||{}),oo=(e=>(e.BROWSER="browser",e.CANMORE="canmore",e.MTBROWSER="mtbrowser",e.WIKI_BROWSER="wiki_browser",e.MYFILES_BROWSER="myfiles_browser",e.FILE_SEARCH="file_search",e.GDRIVE_BROWSER="gdrive_browser",e.BROWSING_TEAM="browsing_team",e.BIO="bio",e.PYTHON="python",e.DALLE="dalle",e.GIZMO_EDITOR="gizmo_editor",e.JIT_PLUGIN="jit_plugin",e.SEARCH_RESULT="search_result",e.SEARCH_RESULTS="search_results",e.A8KM123="a8km123",e.SEARCHGPT="web",e.SEARCH_COT="web.run",e.DE1D73E="de1d73e",e.L1P9K3U="l1p9k3u",e.L1239DK1="l1239dk1",e.KANZI="kanzi",e.KANZI_CREATE="kanzi.create",e.CONTAINER="container",e.COMPUTER="computer",e.OIW209H="oiw209h",e.T2UAY3K="t2uay3k",e.START_RESEARCH_TASK="research_kickoff_tool.start_research_task",e.CLARIFY_WITH_TEXT="research_kickoff_tool.clarify_with_text",e.ADVANCED_VOICE="advanced_voice",e.OBOE="oboe",e.IMAGE_GEN_HALLUCINATED="image_gen",e.n7jupd_m="n7jupd.metadata",e.IMAGEGEN_MAKE_IMAGE="imagegen.make_image",e.SUPER_WIDGET="super_widget",e))(oo||{});function g6(e){return e&&[4202148095,653746659,45870204,111655449].some(t=>Mn(t,e))}function yG(e){const n=Z_(e.author.name)?.namespace,r=["browser","container","computer"];return e.metadata?.n7jupd_message&&r.includes(n)&&e.content.content_type===Ee.Text}function CG(e,t){return e&&Mn(t,e.split(".")[0])}function us(e){if(e.metadata?.n7jupd_subtool&&(e.metadata.n7jupd_subtool.subtool?.includes("api_tool")||e.metadata.n7jupd_subtool.result_of_subtool?.includes("api_tool")))return 59;if(e.metadata?.is_pim_warning)return 63;if(e.metadata?.n7jupd_message&&e.content.content_type===Ee.StructuredThoughts)return 55;if(e.metadata?.is_auto_proceed_message)return 61;if(e.metadata?.is_takeover_ended_message)return 60;if(e.content.content_type===Ee.StructuredThoughts)return 26;if(e.content.content_type===Ee.ReasoningRecap)return 27;if(e.metadata?.b1de6e2_c)return 35;if(e.recipient==="l1p9k3u"||e.author.name==="l1p9k3u")return 39;if(e.metadata?.kanzi||e.recipient?.startsWith("kanzi")||e.author.name?.startsWith("kanzi"))return 42;if(e.author.name==="l1239dk1"||e.recipient==="l1239dk1")return 40;if(e.author.name?.startsWith("container"))return Mn(3061204740,e.author.name)&&e?.metadata?.n7jupd_message?6:4;if(e.author.role===fe.Assistant&&e.metadata?.async_task_id!=null&&e.metadata?.async_task_turn_id!=null)return 41;if(e.metadata?.b1de6e2_s||e.recipient==="research_kickoff_tool.start_research_task")return 36;if(e.metadata?.b1de6e2_d)return 37;if(e.metadata?.b1de6e2_rm)return 38;if(e.metadata?.is_loading_message)return 43;if(e.metadata?.b47u8ra0_t)return 44;if(e.metadata?.f959b8c)return 34;if(g6(e.author.name)||g6(e.recipient)||yG(e))return 0;const t="kaur1br5";if(e.recipient?.startsWith(t)||e.author.name?.startsWith(t))return 67;if(e.author.role===fe.Assistant&&CG(e.recipient,724319625))return 53;if(e.content.content_type===Ee.ComputerOutput)return 54;if(e.author.role===fe.Assistant){if(vG.some(r=>e.recipient?.startsWith(r)))return 31;const n=Z_(e.recipient);if(e.recipient==="browser"||e.recipient==="wiki_browser"||n?.namespace==="mtbrowser")return 2;if(e.recipient==="web"||e.recipient?.startsWith("web."))return 21;if(e.recipient==="web.run"&&(e?.metadata?.search_queries?.length??0)>0)return 51;if(e.recipient==="myfiles_browser"||e.recipient==="gdrive_browser"||n?.namespace==="file_search"||n?.namespace==="myfiles_browser")return 18;if(e.recipient==="browsing_team")return 16;if(e.recipient==="bio")return 29;if(e.recipient==="python")return 5;if(e?.metadata?.n7jupd_message&&(Mn(3179801956,e.recipient)||Mn(3061204740,e.recipient)))return 5;if(n?.namespace==="dalle"||e.recipient==="dalle")return 7;if(n?.namespace==="t2uay3k"||e.recipient==="t2uay3k")return 47;if(n?.namespace==="oiw209h"||e.recipient==="oiw209h")return 45;if(n?.namespace==="gizmo_editor")return 9;if(n?.namespace==="container")return 4;if(n?.namespace==="canmore")return 3;if(n?.namespace==="de1d73e")return 32;if(y6(n?.namespace)||v6(n?.namespace)||C6(n?.namespace))return 10;if(n!=null)return 31;if(e.content.content_type===Ee.ModelEditableContext)return 14}else if(e.author.role===fe.Tool){const n=Z_(e.author.name);if(e.author.name==="browser"||e.author.name==="wiki_browser"||n?.namespace==="mtbrowser")return 1;if(e.author.name==="myfiles_browser"||e.author.name==="gdrive_browser"||e.author.name==="file_search"||n?.namespace==="file_search"||n?.namespace==="myfiles_browser")return 19;if(e.author.name==="browsing_team")return 17;if(e.author.name==="web.run"&&(e?.metadata?.search_result_groups?.length??0)>0)return 52;if(e.author.name==="search_result"&&e.content.content_type===Ee.TetherQuote)return 20;if(e.author.name==="search_results"&&e.content.content_type===Ee.TetherBrowsingDisplay)return 13;if(e.author.name==="bio")return 30;if(e.author.name==="a8km123")return 33;if(e.author.name==="python")return 6;if(Mn(3179801956,e.author.name))return 6;if(n?.namespace==="dalle"||e.author.name==="dalle")return 8;if(n?.namespace==="t2uay3k"||e.author.name==="image_gen")return 48;if(e.metadata?.image_gen_async)return 47;if(n?.namespace==="gizmo_editor")return 9;if(n?.namespace==="canmore")return 3;if(y6(n?.namespace)||v6(n?.namespace))return 11;if(C6(n?.namespace))return 12;if(n?.namespace==="de1d73e")return 32;if(n?.namespace==="oiw209h")return 46;if(e.author.name?.startsWith("web."))return 22;if(e.author.name==="research_kickoff_tool.start_research_task")return 36;if(e.author.name==="research_kickoff_tool.clarify_with_text")return 0;if(e.author.name==="n7jupd.metadata")return 56;if(e.author.name==="imagegen.make_image")return 62;if(n?.namespace==="browser")return 57;if(e.author.name==="super_widget")return 65;if(n!=null||e.author.name==="plugin_service")return bG(e)}else{if(e.author.role===fe.System||e.author.role===fe.Developer)return e.metadata?.n7jupd_message?22:e.metadata?.rebase_system_message||e.content.content_type===Ee.SystemMessage||e.content.content_type===Ee.SystemContent?23:e.metadata?.rebase_developer_message||e.content.content_type===Ee.DeveloperContent?24:22;if(e.author.role===fe.User&&(e.content.content_type===Ee.UserEditableContext||e.metadata?.is_user_system_message))return 28}return e.content.content_type===Ee.Text||e.content.content_type===Ee.MultimodalText?25:31}function bG(e){return e.create_time&&e.create_time>17172e5?R.addError("[Unknown tool] Encountered a message with an unknown tool. Rendering as Unknown message type, which is not visible.",{message:e}):R.addError("[Unknown tool] Encountered a message with an unknown tool, which is most likely an old plugin. Rendering as Unknown message type, which may not appear as expected.",{message:e}),31}function SG(e){return e.metadata?.finish_details!=null}function y2(e){return e.content.content_type===Ee.Text?e.content.parts.some(t=>t.length>0):e.content.content_type===Ee.MultimodalText?v2.getPartsAsString(e).length>0:!1}function wG(e){return y2(e)?!0:"text"in e.content?e.content.text.length>0:"result"in e.content?e.content.result.length>0:!1}function EG(e){return e.metadata?.finish_details?.type==="stop"}function xG(e){return e?.metadata?.finish_details?.type==="max_tokens"}function F0e(e){return e.metadata?.finish_details?.type==="interrupted"}function TG(e){return e.metadata?.message_type==="continue"}function Z_(e){if(e==null||!e.includes("."))return null;const[t,n]=e.split(".");return{namespace:t,functionName:n}}function OG(e,t){return{id:dr(),author:{role:fe.System},content:{content_type:Ee.Text,parts:Array.isArray(e)?e:[e]},metadata:t}}function _6(e,t,n,r=dr()){return{id:r,author:{role:fe.Assistant},content:{content_type:Ee.Text,parts:Array.isArray(e)?e:[e]},metadata:t,clientMetadata:n}}function Nh(e,t,n){const r={role:fe.User};return n&&(r.metadata=n),{id:dr(),author:r,create_time:Date.now()/1e3,content:typeof e=="string"?{content_type:Ee.Text,parts:[e]}:e,metadata:t}}function j0e(e){return OG([`The user is referring to this in particular:
${e}`],{exclude_after_next_user_message:!0})}function U0e(e){return Nh(e,{is_visually_hidden_from_conversation:!0})}function B0e(e){return{id:dr(),author:{role:fe.System},content:e,metadata:{rebase_system_message:!0},recipient:"all"}}function v6(e){return e==="api_tool"||e==="ecosystem_demo"}function y6(e){if(!e)return!1;const t=e.split("__");return t.findIndex(n=>n==="jit_plugin")===t.length-1}function C6(e){return e==="gmail"||e==="gcal"||e==="gcontacts"}function b6(e){return e.author.role===fe.Assistant?e.metadata?.gizmo_id:void 0}function ua(e){return e.author.role===fe.User&&!e.metadata?.is_user_system_message}function kG(e){return e.metadata?.is_contextual_retry_user_message}function Xx(e){return ua(e)&&!kG(e)||e.author.metadata?.is_system_initiated_conversation===!0}function eT(e){return e.metadata?.reasoning_status!=null}function bi(e){const t=us(e);return t===22||t===23||t===24||t===29||t===30||t===14||t===28||t===31||!(t===47||t===48)&&!(t===60)&&e.metadata?.is_visually_hidden_from_conversation===!0}function tT(e){switch(us(e)){case 23:case 24:case 28:case 14:return!0;default:return!1}}function rf(e){if(bi(e))return!1;if((e.metadata?.attachments?.length??0)>0||e.clientMetadata?.errCode&&Object.values(Ka).some(t=>t===e.clientMetadata?.errCode))return!0;switch(us(e)){case 25:case 63:return y2(e);case 3:return wG(e);case 47:return!0;case 61:return!0;case 60:return!0;default:return!1}}function nT(e){return bi(e)?!1:us(e)===25&&y2(e)}function q0e(e){return bi(e)?!1:us(e)===48&&e.status==="finished_successfully"&&e.recipient==="all"}function AG(e){const t=e.recipient;return!!t&&(t.includes("image_gen")||t.includes("image_gen")||t.includes("t2uay3k"))}class MG{cacheK1=new WeakMap;get(t,n){return this.cacheK1.get(t)?.get(n)}set(t,n,r){let s=this.cacheK1.get(t);s||(s=new WeakMap,this.cacheK1.set(t,s)),s.set(n,r)}}var mg,S6;function IG(){if(S6)return mg;S6=1;function e(t){var n=t==null?0:t.length;return n?t[n-1]:void 0}return mg=e,mg}var NG=IG();const Ya=Ot(NG),RG="contentReference";function G0e(e){try{const n=new Intl.Segmenter("en-US",{granularity:"grapheme"}).segment(e),r=[];for(const s of n)r.push(s.segment);return r}catch{return e.split("")}}function PG(e){const t=[];for(let n=0;n<e.length;n++){const r=e.codePointAt(n);r!==void 0&&(t.push(r),r>65535&&n++)}return t}function w6(e){return String.fromCodePoint(...e)}function DG(e,t=[]){const n=Rh(t);return C2(n,e,{includeDirectives:!1})}function H0e(e,t=[]){const n=Rh(t);return C2(n,e,{includeDirectives:!0})}function V0e(e,t=[],n,r,s=!0,i){const o=Rh(t,r);let a=0,c=o.filter(({index:u,displayType:d})=>u!=null&&d).reduce((u,{index:d,newContentReference:f})=>((f.type==="grouped_webpages"||f.type==="grouped_webpages_v2"||f.type==="grouped_webpages_model_predicted_fallback")&&(f.items=f.items.map(h=>({...h,section_index:a++}))),u[d]=f,u),[]),l=C2(o,e);return s&&(l=LG(l)),c=FG(i,c),n&&(i?.length??0)===0&&({updatedText:l,updatedReferences:c}=jG(n,c,l)),{processedText:l,displayedContentReferences:c}}function Rh(e=[],t){return[...e.entries()].sort(([,s],[,i])=>s.start_idx-i.start_idx||s.end_idx-i.end_idx).reduce((s,[i,o])=>{let a,c;switch(o.type){case"invalid":case"hidden":a={...o,type:"hidden",invalid:o.type==="invalid"};break;case"image_v2":case"nav_list":case"tldr":case"optimistic_image_citation":case"sources_footnote":case"sports_standings":case"sports_schedule":case"navigation":case"checkout_confirmation":case"video":case"file_navlist":o.type==="tldr"&&o.used_as_navigation||o.type==="navigation"?a={...o,type:"hidden",invalid:!0}:(c="block",a={...o});break;case"file":case"python":case"container":case"title_citation":case"location_search":case"time":case"entity":case"product_entity":case"grouped_webpages":case"grouped_webpages_v2":case"grouped_webpages_model_predicted_fallback":case"attribution":case"image_inline":c="inline",a={...o};break;case"webpage":case"webpage_extended":c="inline",a={type:"grouped_webpages",matched_text:o.matched_text,start_idx:o.start_idx,end_idx:o.end_idx,alt:o.alt,refs:o.refs,prompt_text:o.prompt_text,items:[{...o}],safe_urls:o.safe_urls};break;case"calculator":case"stock":case"forecast":case"businesses_map":case"products":case"product_reviews":case"product_rationale":case"image_group":c="block",a={...o};break;default:a={...o,type:"hidden",invalid:!0},c="alt";break}return s.push({originalContentReference:o,newContentReference:a,index:i,displayType:c}),t&&s.push({originalContentReference:o,newContentReference:{type:"debug",matched_text:o.matched_text.replace(/(^【|】$)/g,""),...o.type==="webpage_extended"&&o.pub_date&&{pub_date:new Date(o.pub_date*1e3).toLocaleString()}},index:i}),s},[])}const J_="​",z0e="";function C2(e,t,n={includeDirectives:!0}){let r="",s=0;const i=PG(t);for(const o of e){const{originalContentReference:a,displayType:c,index:l}=o,{start_idx:u,end_idx:d}=a,f=i.slice(s,u);if(r+=w6(f),s=d,c)if(n.includeDirectives)switch(c){case"block":r+=`
`+Q_(l,"leaf")+`
`;break;case"inline":{r.endsWith("```")&&(r+=`
`),r.length!==0&&r[r.length-1].match(/[:\\]/)&&(r+=J_),/https?:\/\/[^\s]*$/.test(r)&&(r+=" "),r+=Q_(l,"inline");break}case"alt":r+=a.alt??"";break}else r+=a.alt??""}return r+=w6(i.slice(s)),r}function Q_(e,t){return`${t==="leaf"?"::":":"}${RG}[oaicite:${e}]{index=${e}}`}function LG(e){let t=e;t=t.replace(/【[^】]*$/g,"");const n=t.match(/(\n|^):::/g);return n&&n.length%2===1&&(t+=`
:::`),t=t.replace(/^\d+$/,""),t}function FG(e,t){return t.map(r=>{if(r.type==="python"){const s=e?.find(i=>i.metadata?.python_citation?.citation_id===r.citation_id);return{...r,cited_message:s,highlighted_text:E6(s?.metadata?.python_citation?.annotated_text??"",r.starting_line,r.ending_line)}}else if(r.type==="container"){const s=e?.find(i=>i.metadata?.container_citation?.citation_id===r.citation_id);return{...r,cited_message:s,highlighted_text:E6(s?.metadata?.container_citation?.annotated_parts?.join(`
`)??"",r.starting_line,r.ending_line)}}return r})}function jG(e,t,n){const r=e.find(i=>us(i)===ee.CodeInterpreter),s=e.find(i=>us(i)===ee.CodeInterpreterTool);if(r!=null&&s!=null){const i=t.length;n.endsWith("```")&&(n+=`
`),n+=" "+J_+Q_(i,"inline")+J_,t.push({type:"code_execution",codeMessage:r,codeExecutionOutputMessage:s})}return{updatedText:n,updatedReferences:t}}function E6(e,t,n){const r=e.split(`
`),s=r.findIndex(c=>c.startsWith(`${t}:`)),i=r.findIndex(c=>c.startsWith(`${n}:`));return s===-1||i===-1||i<s?null:r.slice(s,i+1).map(c=>c.replace(/^L\d+:\s*/,"").trim()).join(`
`)}function Xl(e,t={shouldGetTextFromContentReferences:!1,shouldGetVisibleText:!1}){if(t.shouldGetVisibleText&&!nT(e))return"";switch(e.content.content_type){case Ee.Text:{const n=e.content.parts.join("");return t.shouldGetTextFromContentReferences&&e.metadata?.content_references?DG(n,e.metadata.content_references):n}case Ee.MultimodalText:return v2.getPartsAsString(e,!t.shouldGetVisibleText);case Ee.TetherBrowsingDisplay:return e.content.result;case Ee.TetherQuote:case Ee.TetherBrowsingCode:case Ee.Code:case Ee.ExecutionOutput:case Ee.SystemError:return e.content.text;case Ee.SystemMessage:case Ee.SystemContent:return e?.metadata?.__internal?.rendered_harmony_string??JSON.stringify(e.content,null,2);case Ee.UserEditableContext:return`${e.content.user_profile}
${e.content.user_instructions}`;case Ee.SonicWebpage:return`[${e.content.ref_id}] ${e.content.title} (${e.content.url})`;case Ee.StructuredThoughts:return e.content.thoughts.map(n=>`**${n.summary}**

${n.content}`).join(`

`);case Ee.ReasoningRecap:return e.content.content;default:return""}}var gg,x6;function UG(){if(x6)return gg;x6=1;var e=i2(),t=g2(),n=1,r=2;function s(i,o,a,c){var l=a.length,u=l,d=!c;if(i==null)return!u;for(i=Object(i);l--;){var f=a[l];if(d&&f[2]?f[1]!==i[f[0]]:!(f[0]in i))return!1}for(;++l<u;){f=a[l];var h=f[0],g=i[h],_=f[1];if(d&&f[2]){if(g===void 0&&!(h in i))return!1}else{var v=new e;if(c)var y=c(g,_,h,i,o,v);if(!(y===void 0?t(_,g,n|r,c,v):y))return!1}}return!0}return gg=s,gg}var _g,T6;function rT(){if(T6)return _g;T6=1;var e=qs();function t(n){return n===n&&!e(n)}return _g=t,_g}var vg,O6;function BG(){if(O6)return vg;O6=1;var e=rT(),t=fc();function n(r){for(var s=t(r),i=s.length;i--;){var o=s[i],a=r[o];s[i]=[o,a,e(a)]}return s}return vg=n,vg}var yg,k6;function sT(){if(k6)return yg;k6=1;function e(t,n){return function(r){return r==null?!1:r[t]===n&&(n!==void 0||t in Object(r))}}return yg=e,yg}var Cg,A6;function qG(){if(A6)return Cg;A6=1;var e=UG(),t=BG(),n=sT();function r(s){var i=t(s);return i.length==1&&i[0][2]?n(i[0][0],i[0][1]):function(o){return o===s||e(o,s,i)}}return Cg=r,Cg}var bg,M6;function Ph(){if(M6)return bg;M6=1;var e=dc(),t=Pi(),n="[object Symbol]";function r(s){return typeof s=="symbol"||t(s)&&e(s)==n}return bg=r,bg}var Sg,I6;function b2(){if(I6)return Sg;I6=1;var e=hr(),t=Ph(),n=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,r=/^\w*$/;function s(i,o){if(e(i))return!1;var a=typeof i;return a=="number"||a=="symbol"||a=="boolean"||i==null||t(i)?!0:r.test(i)||!n.test(i)||o!=null&&i in Object(o)}return Sg=s,Sg}var wg,N6;function GG(){if(N6)return wg;N6=1;var e=s2(),t="Expected a function";function n(r,s){if(typeof r!="function"||s!=null&&typeof s!="function")throw new TypeError(t);var i=function(){var o=arguments,a=s?s.apply(this,o):o[0],c=i.cache;if(c.has(a))return c.get(a);var l=r.apply(this,o);return i.cache=c.set(a,l)||c,l};return i.cache=new(n.Cache||e),i}return n.Cache=e,wg=n,wg}var Eg,R6;function HG(){if(R6)return Eg;R6=1;var e=GG(),t=500;function n(r){var s=e(r,function(o){return i.size===t&&i.clear(),o}),i=s.cache;return s}return Eg=n,Eg}var xg,P6;function VG(){if(P6)return xg;P6=1;var e=HG(),t=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,n=/\\(\\)?/g,r=e(function(s){var i=[];return s.charCodeAt(0)===46&&i.push(""),s.replace(t,function(o,a,c,l){i.push(c?l.replace(n,"$1"):a||o)}),i});return xg=r,xg}var Tg,D6;function iT(){if(D6)return Tg;D6=1;function e(t,n){for(var r=-1,s=t==null?0:t.length,i=Array(s);++r<s;)i[r]=n(t[r],r,t);return i}return Tg=e,Tg}var Og,L6;function zG(){if(L6)return Og;L6=1;var e=uc(),t=iT(),n=hr(),r=Ph(),s=e?e.prototype:void 0,i=s?s.toString:void 0;function o(a){if(typeof a=="string")return a;if(n(a))return t(a,o)+"";if(r(a))return i?i.call(a):"";var c=a+"";return c=="0"&&1/a==-1/0?"-0":c}return Og=o,Og}var kg,F6;function $G(){if(F6)return kg;F6=1;var e=zG();function t(n){return n==null?"":e(n)}return kg=t,kg}var Ag,j6;function Dh(){if(j6)return Ag;j6=1;var e=hr(),t=b2(),n=VG(),r=$G();function s(i,o){return e(i)?i:t(i,o)?[i]:n(r(i))}return Ag=s,Ag}var Mg,U6;function eu(){if(U6)return Mg;U6=1;var e=Ph();function t(n){if(typeof n=="string"||e(n))return n;var r=n+"";return r=="0"&&1/n==-1/0?"-0":r}return Mg=t,Mg}var Ig,B6;function S2(){if(B6)return Ig;B6=1;var e=Dh(),t=eu();function n(r,s){s=e(s,r);for(var i=0,o=s.length;r!=null&&i<o;)r=r[t(s[i++])];return i&&i==o?r:void 0}return Ig=n,Ig}var Ng,q6;function WG(){if(q6)return Ng;q6=1;var e=S2();function t(n,r,s){var i=n==null?void 0:e(n,r);return i===void 0?s:i}return Ng=t,Ng}var Rg,G6;function KG(){if(G6)return Rg;G6=1;function e(t,n){return t!=null&&n in Object(t)}return Rg=e,Rg}var Pg,H6;function YG(){if(H6)return Pg;H6=1;var e=Dh(),t=l2(),n=hr(),r=d2(),s=f2(),i=eu();function o(a,c,l){c=e(c,a);for(var u=-1,d=c.length,f=!1;++u<d;){var h=i(c[u]);if(!(f=a!=null&&l(a,h)))break;a=a[h]}return f||++u!=d?f:(d=a==null?0:a.length,!!d&&s(d)&&r(h,d)&&(n(a)||t(a)))}return Pg=o,Pg}var Dg,V6;function oT(){if(V6)return Dg;V6=1;var e=KG(),t=YG();function n(r,s){return r!=null&&t(r,s,e)}return Dg=n,Dg}var Lg,z6;function ZG(){if(z6)return Lg;z6=1;var e=g2(),t=WG(),n=oT(),r=b2(),s=rT(),i=sT(),o=eu(),a=1,c=2;function l(u,d){return r(u)&&s(d)?i(o(u),d):function(f){var h=t(f,u);return h===void 0&&h===d?n(f,u):e(d,h,a|c)}}return Lg=l,Lg}var Fg,$6;function w2(){if($6)return Fg;$6=1;function e(t){return t}return Fg=e,Fg}var jg,W6;function JG(){if(W6)return jg;W6=1;function e(t){return function(n){return n?.[t]}}return jg=e,jg}var Ug,K6;function QG(){if(K6)return Ug;K6=1;var e=S2();function t(n){return function(r){return e(r,n)}}return Ug=t,Ug}var Bg,Y6;function XG(){if(Y6)return Bg;Y6=1;var e=JG(),t=QG(),n=b2(),r=eu();function s(i){return n(i)?e(r(i)):t(i)}return Bg=s,Bg}var qg,Z6;function tu(){if(Z6)return qg;Z6=1;var e=qG(),t=ZG(),n=w2(),r=hr(),s=XG();function i(o){return typeof o=="function"?o:o==null?n:typeof o=="object"?r(o)?t(o[0],o[1]):e(o):s(o)}return qg=i,qg}var Gg,J6;function eH(){if(J6)return Gg;J6=1;var e=tu(),t=kh(),n=fc();function r(s){return function(i,o,a){var c=Object(i);if(!t(i)){var l=e(o,3);i=n(i),o=function(d){return l(c[d],d,c)}}var u=s(i,o,a);return u>-1?c[l?i[u]:u]:void 0}}return Gg=r,Gg}var Hg,Q6;function aT(){if(Q6)return Hg;Q6=1;function e(t,n,r,s){for(var i=t.length,o=r+(s?1:-1);s?o--:++o<i;)if(n(t[o],o,t))return o;return-1}return Hg=e,Hg}var Vg,X6;function tH(){if(X6)return Vg;X6=1;var e=/\s/;function t(n){for(var r=n.length;r--&&e.test(n.charAt(r)););return r}return Vg=t,Vg}var zg,e4;function nH(){if(e4)return zg;e4=1;var e=tH(),t=/^\s+/;function n(r){return r&&r.slice(0,e(r)+1).replace(t,"")}return zg=n,zg}var $g,t4;function cT(){if(t4)return $g;t4=1;var e=nH(),t=qs(),n=Ph(),r=NaN,s=/^[-+]0x[0-9a-f]+$/i,i=/^0b[01]+$/i,o=/^0o[0-7]+$/i,a=parseInt;function c(l){if(typeof l=="number")return l;if(n(l))return r;if(t(l)){var u=typeof l.valueOf=="function"?l.valueOf():l;l=t(u)?u+"":u}if(typeof l!="string")return l===0?l:+l;l=e(l);var d=i.test(l);return d||o.test(l)?a(l.slice(2),d?2:8):s.test(l)?r:+l}return $g=c,$g}var Wg,n4;function rH(){if(n4)return Wg;n4=1;var e=cT(),t=1/0,n=17976931348623157e292;function r(s){if(!s)return s===0?s:0;if(s=e(s),s===t||s===-1/0){var i=s<0?-1:1;return i*n}return s===s?s:0}return Wg=r,Wg}var Kg,r4;function sH(){if(r4)return Kg;r4=1;var e=rH();function t(n){var r=e(n),s=r%1;return r===r?s?r-s:r:0}return Kg=t,Kg}var Yg,s4;function iH(){if(s4)return Yg;s4=1;var e=aT(),t=tu(),n=sH(),r=Math.max,s=Math.min;function i(o,a,c){var l=o==null?0:o.length;if(!l)return-1;var u=l-1;return c!==void 0&&(u=n(c),u=c<0?r(l+u,0):s(u,l-1)),e(o,t(a,3),u,!0)}return Yg=i,Yg}var Zg,i4;function oH(){if(i4)return Zg;i4=1;var e=eH(),t=iH(),n=e(t);return Zg=n,Zg}var aH=oH();const _d=Ot(aH),Jg=-1;var cH=(e=>(e[e.Text=0]="Text",e[e.MultiText=1]="MultiText",e[e.StructuredThoughts=2]="StructuredThoughts",e[e.ReasoningRecap=3]="ReasoningRecap",e[e.Browsing=4]="Browsing",e[e.CodeInterpreter=5]="CodeInterpreter",e[e.JITPlugin=6]="JITPlugin",e[e.RetrievalBrowsing=7]="RetrievalBrowsing",e[e.ParallelBrowsing=8]="ParallelBrowsing",e[e.Dalle=9]="Dalle",e[e.Canmore=10]="Canmore",e[e.Container=11]="Container",e[e.GizmoEditor=12]="GizmoEditor",e[e.SearchResult=13]="SearchResult",e[e.Debug=14]="Debug",e[e.SearchGPTQuery=15]="SearchGPTQuery",e[e.l1p9k3u=16]="l1p9k3u",e[e.a8km123=17]="a8km123",e[e.f959b8c=18]="f959b8c",e[e.b1de6e2_c=19]="b1de6e2_c",e[e.b1de6e2_s=20]="b1de6e2_s",e[e.b1de6e2_d=21]="b1de6e2_d",e[e.b1de6e2_rm=22]="b1de6e2_rm",e[e.kanzi=23]="kanzi",e[e.is_loading_message=24]="is_loading_message",e[e.b47u8ra0_t=25]="b47u8ra0_t",e[e.de1d73e=26]="de1d73e",e[e.oiw209h=27]="oiw209h",e[e.c12k321=28]="c12k321",e[e.t2uay3k=29]="t2uay3k",e[e.Oboe=30]="Oboe",e[e.CoTSearchTool=31]="CoTSearchTool",e[e.n7jupd=32]="n7jupd",e[e.n7jupd_x=33]="n7jupd_x",e[e.n7jupd_i=34]="n7jupd_i",e[e.n7jupd_a=35]="n7jupd_a",e[e.n7jupd_n=36]="n7jupd_n",e[e.n7jupd_p=37]="n7jupd_p",e[e.n7jupd_image_gen=38]="n7jupd_image_gen",e[e.PIMBlock=39]="PIMBlock",e[e.Mochi=40]="Mochi",e[e.SuperWidget=41]="SuperWidget",e[e.Croquette=42]="Croquette",e[e.kaur1br5=43]="kaur1br5",e))(cH||{});const lH={[ee.StructuredThoughts]:2,[ee.ReasoningRecap]:3,[ee.Browsing]:4,[ee.BrowseTool]:4,[ee.SearchGPTQuery]:15,[ee.RetrievalBrowsing]:7,[ee.RetrievalBrowsingTool]:7,[ee.ParallelBrowsing]:8,[ee.ParallelBrowsingTool]:8,[ee.JITPlugin]:6,[ee.JITPluginTool]:6,[ee.JITPluginGoogleTool]:6,[ee.Dalle]:9,[ee.DalleTool]:9,[ee.t2uay3k]:29,[ee.t2uay3k_c]:29,[ee.oiw209h]:27,[ee.oiw209h_c]:27,[ee.kanzi]:23,[ee.Container]:11,[ee.CodeInterpreter]:5,[ee.CodeInterpreterTool]:5,[ee.a8km123]:17,[ee.f959b8c]:18,[ee.b1de6e2_c]:19,[ee.b1de6e2_s]:20,[ee.b1de6e2_d]:21,[ee.b1de6e2_rm]:22,[ee.l1p9k3u]:16,[ee.is_loading_message]:24,[ee.b47u8ra0_t]:25,[ee.de1d73e]:26,[ee.GizmoEditor]:12,[ee.SearchResultTool]:13,[ee.ImagePreloadTool]:13,[ee.CanmoreTool]:10,[ee.c12k321]:28,[ee.CoTSearchToolCall]:31,[ee.CoTSearchToolResult]:31,[ee.n7jupd_c]:32,[ee.n7jupd_r]:32,[ee.n7jupd_t]:32,[ee.n7jupd_m]:32,[ee.n7jupd_x]:33,[ee.n7jupd_i]:32,[ee.n7jupd_a]:35,[ee.n7jupd_n]:36,[ee.n7jupd_p]:37,[ee.kaur1br5]:43,[ee.PIMBlock]:39,[ee.Mochi]:40,[ee.SuperWidget]:41,[ee.Croquette]:42,[ee.n7jupd_image_gen]:38};function uH(e){switch(e){case ee.JITPlugin:case ee.Dalle:case ee.t2uay3k:case ee.oiw209h:case ee.CoTSearchToolCall:case ee.CodeInterpreter:case ee.PIMBlock:return!0;default:return!1}}function dH(e,t,n){return!e||e.type!==t||uH(us(n))||e.type===11&&!n.author.name?.startsWith(oo.CONTAINER)?!1:e.type===t}function o4(e,t){return Sr(e,n=>{if(eT(t)){let a;const c=t.metadata?.reasoning_group_id;c?a=_d(n,u=>u.type===Jg&&u.reasoningGroupId===c):a=Ya(n);let l;a?.type===Jg?l=a:(l={type:Jg,groups:[],reasoningGroupId:c},n.push(l)),n=l.groups}const r=us(t),s=lH[r],i=Ya(n),o=i?.type!==14?i:_d(n,a=>a.type!==14);r===ee.Text&&(o?.type===1||o?.type===0)&&Xl(t)!=null&&(TG(t)||xG(o.messages[o.messages.length-1]))?(o.type=1,o.messages.push(t)):s===17&&n.some(a=>a.type===17)?_d(n,c=>c.type===17).messages.push(t):dH(o,s,t)?o.messages.push(t):n.push({type:s??(bi(t)?14:0),messages:[t]})})}const a4=new MG,fH=Object.freeze([]);function lT(e,t,n=!1){const r=e.getNodeByIdOrMessageId(t),s=r.id!==e.rootId?lT(e,r.parentId,n):fH,i=r.message,o=a4.get(s,i);if(o)return o;const a=hH(s,i,n);return a4.set(s,i,a),a}function hH(e,t,n=!1){const r=[...e],s=Ya(r),i=Xx(t);if(s&&pH(s,t)){const o=[...s.messages,t],a=o4(s.messageGroups,t),c=s.role===fe.System?c4(t,n):s.role,l=b6(t)??s.gizmoId;let u=s.authorId,d=s.modelSlug;r[r.length-1]={...s,messages:o,messageGroups:a,role:c,isPrompt:s.isPrompt||i,gizmoId:l,authorId:u,modelSlug:d}}else{const o=t.clientMetadata?.requestId,a=c4(t,n),c=a===fe.Assistant&&o&&o!==s?.id?o:t.id;r.push({id:c,role:a,messages:[t],messageGroups:o4([],t),isPrompt:i,gizmoId:b6(t)})}return r}function c4(e,t){return tT(e)?fe.System:e.author.role===fe.Tool?fe.Assistant:e.author.role===fe.Developer&&!t?fe.System:e.author.role}function pH(e,t,n){return t.metadata?.is_indepth_feedback?!1:Ya(e.messages)?.metadata?.reasoning_status&&t.metadata?.reasoning_status||e.role===t.author.role?!0:e.role===fe.User&&t.recipient==="bio"?!1:tT(t)?e.role===fe.Root||e.role===fe.System:bi(t)||(e.role===fe.System||e.role===fe.Developer)&&!e.isPrompt?!0:t.author.role===fe.Tool?e.role===fe.Assistant:!1}function E2(){const e=fr();return _H(e.pathname)}function mH(e){const n=new URL(`http://example.com${e}`).pathname.match(/(?:\/gizmo)?\/g\/([^/]+)/);if(n)return n[1]}function gH(e){const t=e.split("-");return t.length>1&&t[0]==="g"?t?.[1]==="p"?`g-p-${t[2]}`:`g-${t[1]}`:t[0]}function _H(e){const t=mH(e);if(t)return gH(t)}function nu(){"use forget";const e=xe.c(2),t=Y(),n=!Ft(t);let r;return e[0]!==n?(r={isUnauthenticated:n,isLoading:!1},e[0]=n,e[1]=r):r=e[1],r}function vH(){de.deleteCookie(ie.SegmentUserId),de.deleteCookie(ie.SegmentUserTraits),_t.removeItem(Qe.SegmentUserId),_t.removeItem(Qe.SegmentUserTraits)}const X_=()=>({hash:window.location.hash,path:window.location.pathname,search:window.location.search,url:window.location.href});var x2=(e=>(e.WINDOW_VISIBILITY_STATE_CHANGED="WINDOW_VISIBILITY_STATE_CHANGED",e.WINDOW_FOCUS_CHANGED="WINDOW_FOCUS_CHANGED",e))(x2||{}),Si=(e=>(e.LOGIN_CHANGED="LOGIN_CHANGED",e.LOGOUT="LOGOUT",e.QUIT="QUIT",e.SET_COMPANION_WINDOW_VISIBILITY="SET_COMPANION_WINDOW_VISIBILITY",e.SET_WEB_RELEASE_PROPERTIES="WEB_RELEASE_PROPERTIES",e.ERROR_THROWN="ERROR_THROWN",e.ZOOM="ZOOM",e.DESKTOP_SETTING_CHANGED="DESKTOP_SETTING_CHANGED",e.HOTKEY_RECORDING_STATE="HOTKEY_RECORDING_STATE",e.ADD_BREADCRUMB="ADD_BREADCRUMB",e))(Si||{}),Lh=(e=>(e.ZOOM_IN="ZOOM_IN",e.ZOOM_OUT="ZOOM_OUT",e.ZOOM_RESET="ZOOM_RESET",e))(Lh||{}),uT=(e=>(e.MICROPHONE="MICROPHONE",e))(uT||{});function $0e(){Gt?.publish(Si.ZOOM,{command:Lh.ZOOM_IN})}function W0e(){Gt?.publish(Si.ZOOM,{command:Lh.ZOOM_OUT})}function K0e(){Gt?.publish(Si.ZOOM,{command:Lh.ZOOM_RESET})}function l4(e){if(Kf){const t=Date.now();Gt?.publish(Si.ADD_BREADCRUMB,{message:e,epochTimestamp:t})}}function dT(){return de.getCookie(ie.PunchOutInfoToken)}function Y0e(){return dT()!=null}class yH{analytics;appName;appVersion;deviceId;browserLocale;options;settings;user;constructor({appName:t,appVersion:n,deviceId:r,browserLocale:s,options:i,settings:o}){this.analytics=new Promise(a=>{$(()=>import("./fblq6clalwfzs7tf.js").then(c=>c.v),__vite__mapDeps([2,1])).then(c=>{if(!c){R.addAction("ClientEventsServiceLogger.segmentImport.failed",{appName:t,appVersion:n});return}const l=new c.AnalyticsBrowser;l.addSourceMiddleware(CH(this)),a([l])})}),this.appName=t,this.appVersion=n,this.deviceId=r,this.browserLocale=s,this.options=i,this.settings=o}async initialize({user:t}){const n={appName:this.appName,appVersion:this.appVersion};R.addAction("ClientEventsServiceLogger.initialize.start",n),t&&this.identify(t);const[r]=await this.analytics;r.load(this.settings,this.options).catch(()=>{R.addAction("ClientEventsServiceLogger.initialize.failed",n)}),r.ready(()=>{R.addAction("ClientEventsServiceLogger.initialize.success",n)})}async track(t,n){const[r]=await this.analytics;r.track(t,n,{page:X_()}),l4(`Web Client Event: ${t} with data: ${JSON.stringify(n)}`)}async trackPageView(){const t=X_(),[n]=await this.analytics;n.page(void 0,t,{page:t}),l4(`Web Client Page View: ${t.path}`)}async identify(t){this.user=t;const[n]=await this.analytics;n.identify(t.userId,t.traits)}buildEnvelope(t,n){const r=this.getExtraContext(),s=t.$type;return{eventName:(s.split(".").pop()??"structured_event").replace(/([a-z0-9])([A-Z])/g,"$1_$2").replace(/([A-Z])([A-Z][a-z])/g,"$1_$2").toLowerCase(),eventClass:"chatgpt_web",eventId:dr(),eventCreatedAt:new Date().toISOString(),eventType:"client",userParams:{userId:this.user?.userId??"",authStatus:String(r.auth_status??""),planType:String(r.user_traits?.plan_type??""),workspaceId:String(r.user_traits?.workspace_id??"")},deviceParams:{deviceId:this.deviceId,locale:this.browserLocale,appEnvironment:String(r.app_name??""),appVersion:this.appVersion},eventParams:{"@type":`openai.buf.dev/openai/protobuf-analytics-events/${s}`,...n}}}trackStructuredEvent(t,n){const r=this.buildEnvelope(t,n);this.track("__protobuf_structured_event__",r)}getExtraContext(){return{app_name:this.appName,app_version:this.appVersion,browser_locale:this.browserLocale,device_id:this.deviceId,auth_status:this.user?fn.LoggedIn:fn.LoggedOut,user_traits:this.user?.traits,punch_out_info_token:dT()}}}function CH(e){return({payload:t,next:n})=>{t.obj.context={...t.obj.context,...e.getExtraContext()},n(t)}}const bH=Ni(),SH=navigator.language,ev="2ce0a3f07a70586b8e072b67b1fc24498df2535f",Oc=new yH({appName:"chatgpt",appVersion:ev,deviceId:bH,browserLocale:SH,options:kP,settings:AP});function wH(e){const t={};return Object.entries(e).forEach(([n,r])=>{(typeof r=="number"||typeof r=="string"||typeof r=="boolean")&&(t[n]=String(r))}),t}const P={initialize({userInfo:e}={}){const t=e?.currentAccount?.structure===Rn.WORKSPACE?e.currentAccount.id:null,n=e?{userId:e.sessionUser.id,traits:{plan_type:e.currentAccount?.planType??null,workspace_id:t,workspace_type:e.currentAccount?.workspaceType??null}}:null;Oc.initialize({user:n})},logEvent(e,t){Oc.track(e,{...t,origin:"chat",app_version:ev})},logEventWithStatsig(e,t,n){this.logValueEventWithStatsig({segmentEventName:e,statsigEventName:t,data:n})},logValueEventWithStatsig({segmentEventName:e,value:t,statsigEventName:n,data:r}){const s={...t!=null?{value:t}:{},...r,origin:"chat",app_version:ev};Oc.track(e,s);const i=wH(s);Fe.logEvent(n,t??null,i)},logPageView(){Oc.trackPageView()},logStructuredEvent(e,t){Oc.trackStructuredEvent(e,t)},logNewChatButtonClicked({location:e,gizmo_id:t}){this.logEvent("New Chat Button Clicked",{location:e,gizmo_id:t}),Fe.logEvent("chatgpt_new_chat_button_clicked",null,{location:e})},logAuthErrorResponse(e){this.logEvent("Auth: Error",{error_code:e}),Fe.logEvent("chatgpt_auth_error",e)},logNoAuthAttachButtonClicked(e){this.logEvent("No Auth Attach Button Clicked",e),Fe.logEvent("chatgpt_web_no_auth_attach_button_clicked",null,e)},logNoAuthVoiceButtonClicked(e){this.logEvent("No Auth Voice Button Clicked",e),Fe.logEvent("chatgpt_web_no_auth_voice_button_clicked",null,e)},logLogInButtonClicked(e){this.logEvent("Auth: Login",e),Fe.logEvent("chatgpt_auth_log_in",null,e)},logSignUpButtonClicked(e){this.logEvent("Auth: Signup",e),Fe.logEvent("chatgpt_auth_sign_up",null,e)},logLoginOrSignUpButtonClicked(e){this.logEvent("Auth: Login or Signup",e),Fe.logEvent("chatgpt_auth_log_in_or_sign_up",null,e)},logLogOutButtonClicked(e){this.logEvent("Auth: Logout",e),Fe.logEvent("chatgpt_auth_log_out",null,e)},logRateLimitBannerShown(e){let t,n;switch(e.type){case"account_sharing_degrade":t="Account Sharing Degrade: Show Info",n="chatgpt_account_sharing_degrade_banner_shown";break;case"tatertot-in-context-upsell":case"o3-mini-high-in-context-upsell-free":case"o3-mini-high-in-context-upsell-plus":case"deep-research-in-context-upsell":case"deep-research-in-context-upsell-free":case"codex-in-context-upsell":case"codex-in-context-upsell-plus":t="In-Context Upsell Banner: Show Info",n="chatgpt_in_context_upsell_banner_shown";break;default:t="Rate Limit: Show Info",n="chatgpt_rate_limit_banner_shown";break}this.logEvent(t,e);const{call_to_action:r,...s}=e,i=s;r?.forEach((o,a)=>{i[`call_to_action.${a}`]=o}),Fe.logEvent(n,null,{...i,is_new_conversation:e.is_new_conversation.toString(),is_hard_block:e.is_hard_block.toString()})},logRateLimitGetPlusButtonClicked(e){this.logEvent("Rate Limit: Click Upsell",e),Fe.logEvent("chatgpt_rate_limit_get_plus_button_clicked",null,{...e,is_new_conversation:e.is_new_conversation?e.is_new_conversation.toString():"",is_hard_block:e.is_hard_block.toString()})},logRateLimitUpgradePlanButtonClicked(e){this.logEvent("Rate Limit: Click Upsell",e),Fe.logEvent("chatgpt_rate_limit_upgrade_plan_button_clicked",null,{...e,is_new_conversation:e.is_new_conversation.toString(),is_hard_block:e.is_hard_block.toString()})},logPopoverHover(e){this.logEvent("Popover Hover",e),Fe.logEvent("chatgpt_popover_hover",null,e)},logUpsellGetPlusButtonClicked(e){this.logEventWithStatsig("Upsell: Get Plus Clicked","chatgpt_upsell_get_plus_button_clicked",e)},logToggleShowRecents({isOnlyShowingRecents:e}){this.logEvent("Toggle Show Recents",{isOnlyShowingRecents:e}),Fe.logEvent("chatgpt_toggle_show_recents",null,{isOnlyShowingRecents:String(e)})},logToggleShowGptList({isCollapsed:e}){this.logEvent("Toggle Show GPT List",{isCollapsed:e})},logToggleDesktopNavCollapsed({isDesktopNavCollapsed:e,action:t}){this.logEvent("Toggle Desktop Nav Collapsed",{isDesktopNavCollapsed:e}),Fe.logEvent("chatgpt_toggle_desktop_nav_collapsed",null,{isDesktopNavCollapsed:String(e),action:t})},logTogglePlanManagementModal({isOpen:e}){const t="chatgpt_toggle_plan_management_modal";this.logEvent("Toggle Plan Management Modal",{isOpen:e}),Fe.logEvent(t,null,{isOpen:String(e)})},logPaymentSuccess(e){this.logEvent("Subscription: Payment Success Page",e),Fe.logEvent("chatgpt_plan_payment_success_page",null,e)},logNetworkError(e){this.logEvent("chatgpt_web_network_error",e),Fe.logEvent("chatgpt_web_network_error",null,e)},logFailedToFetchError(e){this.logEvent("chatgpt_web_failed_to_fetch",e),Fe.logEvent("chatgpt_web_failed_to_fetch",null,e)}},fT=Qe.IsNoAuthChatTrainingEnabled,oi=qr(()=>{let e=null;return typeof window<"u"&&(e=AH()??null),{isNoAuthChatTrainingEnabled:e,isTemporaryChatEnabled:!1,isAnonModeEnabled:!1}}),T2=e=>Do(oi,e);function EH(){const e=xH(),t=TH(),{isUnauthenticated:n}=nu();return!!(e||n&&!t)}function hT(e){return pT()||!Ft(e)&&!OH(e)}function xH(){return T2(e=>e.isTemporaryChatEnabled)}function pT(){return oi.getState().isTemporaryChatEnabled}function mT(e){return we(e,"1656345175")}function TH(){const e=Y(),t=T2(n=>n.isNoAuthChatTrainingEnabled);return t??mT(e)}function OH(e){const t=oi.getState().isNoAuthChatTrainingEnabled;return t??mT(e)}function Z0e(){return T2(e=>e.isAnonModeEnabled)}function kH(){return oi.getState().isAnonModeEnabled}const u4={setIsTemporaryChatEnabled(e){oi.setState({isTemporaryChatEnabled:e}),e&&P.logEvent("Enable Temporary Chat")},setIsAnonModeEnabled(e){oi.setState({isAnonModeEnabled:e})},toggleIsTemporaryChatEnabled(){u4.setIsTemporaryChatEnabled(!oi.getState().isTemporaryChatEnabled)},disableTemporaryChat(){u4.setIsTemporaryChatEnabled(!1)},setIsNoAuthChatTrainingEnabled(e){oi.setState({isNoAuthChatTrainingEnabled:e}),_t.setItem(fT,e)}};function AH(){const e=_t.getItem(fT);return e==="true"||e===!0?!0:e==="false"||e===!1?!1:void 0}const tv={},MH=["added","updated","removed"];let d4=!1;function IH(e){d4||(d4=!0,e.getQueryCache().subscribe(t=>{const n=t.query.queryHash;if(t.query.state.status==="success"&&n in tv&&MH.includes(t.type)){const{cacheKey:r,cacheVersion:s}=tv[n];GU(Tq(e)?.id??null,r,t.query.state.data,s)}}))}function NH(e,t,n,r){IH(e),tv[w9(t)]={cacheKey:n,cacheVersion:r}}function O2(e,t,n){const r=Ql(),s=Y(),i=Nt(s),o=Tn();if(r)return NH(o,n,e,t),()=>{const a=qU(i?.id??null,e,t);if(a!=null)return a}}const Fh=e=>["models",{IIM:e?.IIM??!1,isGizmo:e?.isGizmo??!1}],RH=()=>["gizmo-models"],PH="models",DH=1;function gT(e){const t=$e(nv(e));return EH()&&t.data?{...t,data:VH(t.data)}:t}function _T({isGizmo:e}){const t=O2(PH,DH,Fh());return gT({IIM:!1,isGizmo:e,placeholderData:t})}function LH({isGizmo:e}){const{session:t}=lc(),n=t?.user,r=n&&B8(n);return gT({IIM:!0,isGizmo:e,enabled:r})}const nv=e=>ms({retry:5,enabled:e?.enabled??!0,queryKey:Fh(e),queryFn:async()=>{const t=e?.IIM??!1,n=jr(await H.safeGet("/models",{authOption:ht.SendIfAvailable,parameters:{query:{iim:t,is_gizmo:e?.isGizmo??!1}}}));return BH(n)},placeholderData:e?.placeholderData});function k2({isGizmo:e=!1}={}){const{data:t,isLoading:n}=_T({isGizmo:e}),{data:r,isLoading:s}=LH({isGizmo:e});return{modelsData:r??t,externalModelsLoading:n,fullModelsLoading:s||n}}function FH({enabled:e=!0}={}){const{data:t,isLoading:n}=$e(ms({retry:5,enabled:e,queryKey:RH(),queryFn:async()=>{const r=jr(await H.safeGet("/models/gpts",{authOption:ht.SendIfAvailable}));return qH(r)}}));return{gizmoModelsData:t,gizmoModelsLoading:n}}function jH({isGizmo:e=!1}={}){return _T({isGizmo:e})}function UH(e){return e.getQueryData(Fh())}function BH(e){return{categories:e.categories.concat().reverse().map(GH),groups:e.internal_groups?.map(HH)??[],defaultModelSlug:e.default_model_slug??null,modelPickerVersion:e.model_picker_version,models:new Map(e.models.map(t=>[t.slug,vT(t)])),title:e.title}}function qH(e){return{editor:e.editor,model_override:e.model_override}}function vT(e){return{id:e.slug,maxTokens:e.max_tokens,title:e.title,description:e.description,tags:e.tags,enabledTools:e.enabled_tools,product_features:e.product_features,enableInfer:e.enable_infer,enableInferOptOut:e.enable_infer_opt_out,reasoningType:e.reasoning_type}}function GH({default_model:e,tagline:t,color:n,human_category_name:r,category:s,human_category_short_name:i,human_category_shorter_name:o,subscription_level:a,short_explainer:c,subcategory:l,render_header_type:u,title:d,is_beta:f,is_alpha:h,model_badge:g,supported_features:_,supported_models:v,disabled_by_admin:y,date_updated:C,action_pill_short_name:E,slash_command_enabled:b,...S}){return{color:n,tagline:t,defaultModel:e,label:r,shortLabel:i,description:c,shorterLabel:o??i,subscriptionLevel:a,categoryId:s,subcategory:l,renderHeaderType:u,isBeta:f,isAlpha:h,modelBadge:g,title:d,supportedFeatures:_,supportedModels:v??[],dateUpdated:C,actionPillShortName:E,slashCommandEnabled:b,disabledByAdmin:y??!1,...S}}function HH({group:e,human_group_name:t,human_group_short_name:n,model_ids:r}){return{group:e,label:t,shortLabel:n,modelIds:r}}const f4=new WeakMap;function VH(e){let t=f4.get(e);if(!t){const n=new Map([...e.models.entries()].filter(([,r])=>r.tags.includes("history_off_approved")));t={models:n,defaultModelSlug:e.defaultModelSlug,categories:e.categories.filter(r=>n.has(r.defaultModel)),groups:e.groups.map(r=>({...r,modelIds:r.modelIds.filter(s=>n.has(s))})).filter(r=>r.modelIds.length>0)},f4.set(e,t)}return t}const A2=It(()=>qr(()=>({modals:[],nextKey:1})));function M2(e,t,n){A2(e).setState(r=>{const s=r.modals.find(i=>i.ModalComponent===t);return s?{modals:[...r.modals.filter(i=>i.ModalComponent!==t),{key:s.key,ModalComponent:t,props:n}]}:{modals:[...r.modals,{key:r.nextKey,ModalComponent:t,props:n}],nextKey:r.nextKey+1}})}function zH(e,t){A2(e).setState(n=>({modals:n.modals.filter(r=>r.ModalComponent!==t)}))}const $H=m.memo(function({modal:{ModalComponent:t,props:n}}){const r=Y();return p.jsx(t,{...n,onClose:()=>{n?.onClose?.(),zH(r,t)}})});function WH(){const e=Y(),t=A2(e),n=Do(t,r=>r.modals);return p.jsx(p.Fragment,{children:n.map(r=>p.jsx($H,{modal:r},r.key))})}const yT=e=>m.createElement("svg",{width:16,height:16,viewBox:"0 0 16 16",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg","data-rtl-flip":"",...e},m.createElement("path",{d:"M6.02925 3.02929C6.25652 2.80202 6.60803 2.77382 6.86616 2.94433L6.97065 3.02929L11.4707 7.52929C11.7304 7.78899 11.7304 8.211 11.4707 8.4707L6.97065 12.9707C6.71095 13.2304 6.28895 13.2304 6.02925 12.9707C5.76955 12.711 5.76955 12.289 6.02925 12.0293L10.0585 7.99999L6.02925 3.9707L5.94429 3.8662C5.77378 3.60807 5.80198 3.25656 6.02925 3.02929Z"})),KH=e=>m.createElement("svg",{width:16,height:16,viewBox:"0 0 16 16",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",...e},m.createElement("path",{d:"M8 9.93359C8.40501 9.93359 8.7334 10.262 8.7334 10.667C8.73322 11.0718 8.4049 11.4004 8 11.4004C7.59524 11.4002 7.26678 11.0718 7.2666 10.667C7.2666 10.2621 7.59512 9.93375 8 9.93359Z"}),m.createElement("path",{d:"M8 4.66699C9.00983 4.66699 9.71143 5.3376 9.91113 6.12598C10.1119 6.91849 9.80668 7.84168 8.89453 8.29785C8.75494 8.36765 8.66699 8.51093 8.66699 8.66699C8.66681 9.03503 8.36808 9.33301 8 9.33301C7.63194 9.33299 7.33319 9.03502 7.33301 8.66699C7.33301 8.00598 7.70668 7.40116 8.29785 7.10547C8.60101 6.95389 8.6789 6.69288 8.61816 6.45312C8.55627 6.20931 8.35206 6 8 6C7.74846 6.00001 7.52816 6.13905 7.41406 6.34766C7.23735 6.67059 6.83275 6.78894 6.50977 6.6123C6.18684 6.43568 6.0677 6.03099 6.24414 5.70801C6.58269 5.08904 7.24177 4.667 8 4.66699Z"}),m.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M8 1.33301C11.6819 1.33301 14.667 4.3181 14.667 8C14.667 11.6819 11.6819 14.667 8 14.667C4.3181 14.667 1.33301 11.6819 1.33301 8C1.33301 4.3181 4.3181 1.33301 8 1.33301ZM8 2.66699C5.05448 2.66699 2.66699 5.05448 2.66699 8C2.66699 10.9455 5.05448 13.333 8 13.333C10.9455 13.333 13.333 10.9455 13.333 8C13.333 5.05448 10.9455 2.66699 8 2.66699Z"})),YH=e=>m.createElement("svg",{width:16,height:16,viewBox:"0 0 16 16",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg","data-rtl-flip":"",...e},m.createElement("path",{d:"M11.3349 10.3301V5.60547L4.47065 12.4707C4.21095 12.7304 3.78895 12.7304 3.52925 12.4707C3.26955 12.211 3.26955 11.789 3.52925 11.5293L10.3945 4.66504H5.66011C5.29284 4.66504 4.99507 4.36727 4.99507 4C4.99507 3.63273 5.29284 3.33496 5.66011 3.33496H11.9999L12.1337 3.34863C12.4369 3.41057 12.665 3.67857 12.665 4V10.3301C12.6649 10.6973 12.3672 10.9951 11.9999 10.9951C11.6327 10.9951 11.335 10.6973 11.3349 10.3301ZM11.333 4.66699L11.3349 4.66797L11.332 4.66504H11.331L11.333 4.66699Z"}));function Er(e){return e?"":void 0}function CT(e,t){return e.getAttribute(t)!=null}function J0e(e,t,n){e&&n!==CT(e,t)&&(n?e.setAttribute(t,""):e.removeAttribute(t))}function ZH(){return m9()?8:1}function bT(e){return(e.ctrlKey?1:0)|(e.altKey?2:0)|(e.shiftKey?4:0)|(e.metaKey?8:0)}function JH(e){return!jh(e)&&!bT(e)}function jh(e){const t="nativeEvent"in e?e.nativeEvent:e;return t.isComposing||t.keyCode===229}function QH(e){const{key:t,currentTarget:n}=e,r=n instanceof HTMLInputElement;return JH(e)&&(t==="Tab"||t==="ArrowDown"||t==="ArrowUp"||t==="ArrowLeft"&&(!r||n.selectionStart===0||n.selectionEnd===0)||t==="ArrowRight"&&(!r||n.selectionEnd===n.selectionStart&&n.selectionStart===n.value.length))}const Di=e=>{"use forget";const t=xe.c(113);let n,r,s,i,o,a,c,l,u,d,f,h,g,_,v,y,C,E,b,S,w;t[0]!==e?({as:i,icon:r,trailing:s,highlightTrailing:n,showHighlightTrailing:g,trailingColor:_,label:d,badge:o,secondary:h,className:c,color:l,size:v,active:y,highlighted:C,hasManagedFocus:E,subMenu:b,fillContainer:S,children:a,iconOnly:w,iconAriaLabel:u,...f}=e,t[0]=e,t[1]=n,t[2]=r,t[3]=s,t[4]=i,t[5]=o,t[6]=a,t[7]=c,t[8]=l,t[9]=u,t[10]=d,t[11]=f,t[12]=h,t[13]=g,t[14]=_,t[15]=v,t[16]=y,t[17]=C,t[18]=E,t[19]=b,t[20]=S,t[21]=w):(n=t[1],r=t[2],s=t[3],i=t[4],o=t[5],a=t[6],c=t[7],l=t[8],u=t[9],d=t[10],f=t[11],h=t[12],g=t[13],_=t[14],v=t[15],y=t[16],C=t[17],E=t[18],b=t[19],S=t[20],w=t[21]);const x=g===void 0?!1:g,T=_===void 0?"tertiary":_,O=v===void 0?"default":v,A=y===void 0?!1:y,k=C===void 0?!1:C,I=E===void 0?!1:E,N=b===void 0?!1:b,j=S===void 0?!1:S,q=w===void 0?!1:w;let D;if(m.isValidElement(a)&&!d&&!o)D=a;else{let te;t[22]!==d?(te=d&&p.jsx(eV,{children:d}),t[22]=d,t[23]=te):te=t[23];let re;t[24]!==o?(re=o&&p.jsx(I2,{children:o}),t[24]=o,t[25]=re):re=t[25];let _e;t[26]!==a||t[27]!==te||t[28]!==re?(_e=p.jsxs("div",{className:"flex min-w-0 grow items-center gap-2.5 group-data-no-contents-gap:gap-0",children:[te,a,re]}),t[26]=a,t[27]=te,t[28]=re,t[29]=_e):_e=t[29],D=_e}if(h){let te;t[30]!==h?(te=p.jsx("div",{className:"not-group-data-disabled:text-token-text-tertiary leading-dense mb-0.5 text-xs",children:h}),t[30]=h,t[31]=te):te=t[31];let re;t[32]!==D||t[33]!==te?(re=p.jsxs("div",{className:"min-w-0",children:[D,te]}),t[32]=D,t[33]=te,t[34]=re):re=t[34],D=re}if(r){const te=O==="large"?"icon-lg":"icon";let re;t[35]!==te?(re=ne("flex items-center justify-center group-disabled:opacity-50 group-data-disabled:opacity-50",te),t[35]=te,t[36]=re):re=t[36];let _e;t[37]!==r||t[38]!==u||t[39]!==q?(_e=typeof r!="function"?r:p.jsx(r,{className:"icon","aria-hidden":q?"false":"true","aria-label":q?u:void 0}),t[37]=r,t[38]=u,t[39]=q,t[40]=_e):_e=t[40];let Se;t[41]!==re||t[42]!==_e?(Se=p.jsx("div",{className:re,children:_e}),t[41]=re,t[42]=_e,t[43]=Se):Se=t[43];const Le=!q&&D;let ut;t[44]!==Se||t[45]!==Le?(ut=p.jsxs(p.Fragment,{children:[Se,Le]}),t[44]=Se,t[45]=Le,t[46]=ut):ut=t[46],D=ut}let U;if(s){const te=T==="tertiary"&&"text-token-text-tertiary";let re;t[47]!==te?(re=ne("trailing",te),t[47]=te,t[48]=re):re=t[48];const _e=n?-1:void 0;let Se;t[49]!==s?(Se=typeof s!="function"?s:p.jsx(s,{className:"icon","aria-hidden":"true"}),t[49]=s,t[50]=Se):Se=t[50];let Le;t[51]!==re||t[52]!==_e||t[53]!==Se?(Le=p.jsx("div",{className:re,tabIndex:_e,children:Se}),t[51]=re,t[52]=_e,t[53]=Se,t[54]=Le):Le=t[54],U=Le}if(n){const te=T==="tertiary"&&"text-token-text-tertiary";let re;t[55]!==te?(re=ne("trailing highlight",te),t[55]=te,t[56]=re):re=t[56];let _e;t[57]!==n?(_e=typeof n!="function"?n:p.jsx(n,{className:"icon","aria-hidden":"true"}),t[57]=n,t[58]=_e):_e=t[58];let Se;t[59]!==re||t[60]!==_e?(Se=p.jsx("div",{className:re,children:_e}),t[59]=re,t[60]=_e,t[61]=Se):Se=t[61];const Le=Se;let ut;t[62]!==Le||t[63]!==U?(ut=U?p.jsxs("div",{className:"trailing-pair",children:[Le,U]}):Le,t[62]=Le,t[63]=U,t[64]=ut):ut=t[64],U=ut}if(N){let te;t[65]===Symbol.for("react.memo_cache_sentinel")?(te=p.jsx(yT,{className:"icon-sm -me-0.25"}),t[65]=te):te=t[65];const re=te;let _e;t[66]!==U?(_e=U?p.jsxs("div",{className:"flex items-center gap-1 self-stretch",children:[U,re]}):re,t[66]=U,t[67]=_e):_e=t[67],U=_e}if(U&&!q){if(r){const re=O==="large"?"gap-2":"gap-1.5";let _e;t[68]!==re?(_e=ne("flex min-w-0 items-center",re),t[68]=re,t[69]=_e):_e=t[69];let Se;t[70]!==D||t[71]!==_e?(Se=p.jsx("div",{className:_e,children:D}),t[70]=D,t[71]=_e,t[72]=Se):Se=t[72],D=Se}let te;t[73]!==D||t[74]!==U?(te=p.jsxs(p.Fragment,{children:[D,U]}),t[73]=D,t[74]=U,t[75]=te):te=t[75],D=te}const G=i,F=m.useRef(null),le=m.useRef(!1);let me,ge;t[76]!==k?(me=()=>{if(le.current){le.current=!1;return}k&&requestAnimationFrame(()=>{F.current?.scrollIntoView({block:"nearest"})})},ge=[k],t[76]=k,t[77]=me,t[78]=ge):(me=t[77],ge=t[78]),m.useEffect(me,ge);const ke=f.disabled?-1:0,Pe=f.disabled??!1;let ve;t[79]!==Pe?(ve=Er(Pe),t[79]=Pe,t[80]=ve):ve=t[80];let he;t[81]!==A?(he=Er(A),t[81]=A,t[82]=he):he=t[82];let L;t[83]!==k?(L=Er(k),t[83]=k,t[84]=L):L=t[84];let ue;t[85]!==N?(ue=Er(N),t[85]=N,t[86]=ue):ue=t[86];let Ie;t[87]!==j?(Ie=Er(j),t[87]=j,t[88]=Ie):Ie=t[88];let it;t[89]!==x?(it=Er(x),t[89]=x,t[90]=it):it=t[90];const tt=O==="large"?"large":void 0,oe=l!=="default"?l:void 0,ye=!I&&"hoverable",ot=r&&!U&&(O==="large"?"gap-2":"gap-1.5"),be=O==="large"&&q&&"p-2";let at;t[91]!==c||t[92]!==ye||t[93]!==ot||t[94]!==be?(at=ne("group __menu-item",ye,ot,be,c),t[91]=c,t[92]=ye,t[93]=ot,t[94]=be,t[95]=at):at=t[95];let Te;t[96]!==f?(Te=te=>{le.current=!0,f.onPointerMoveCapture?.(te)},t[96]=f,t[97]=Te):Te=t[97];let Ke;return t[98]!==G||t[99]!==D||t[100]!==f||t[101]!==ke||t[102]!==ve||t[103]!==he||t[104]!==L||t[105]!==ue||t[106]!==Ie||t[107]!==it||t[108]!==tt||t[109]!==oe||t[110]!==at||t[111]!==Te?(Ke=p.jsx(G,{ref:F,tabIndex:ke,"data-disabled":ve,"data-active":he,"data-highlighted":L,"data-has-submenu":ue,"data-fill":Ie,"data-revealed":it,"data-size":tt,"data-color":oe,className:at,...f,onPointerMoveCapture:Te,children:D}),t[98]=G,t[99]=D,t[100]=f,t[101]=ke,t[102]=ve,t[103]=he,t[104]=L,t[105]=ue,t[106]=Ie,t[107]=it,t[108]=tt,t[109]=oe,t[110]=at,t[111]=Te,t[112]=Ke):Ke=t[112],Ke},XH=({external:e,...t})=>p.jsx(Di,{as:Vf,...e?{highlightTrailing:p.jsx(YH,{className:"icon-sm"}),target:"_blank",rel:"noopener noreferrer"}:null,...t}),eV=m.memo(function({children:t}){return p.jsx("div",{className:"truncate",ref:n=>{n?.textContent&&n.scrollWidth>n.clientWidth&&(n.title=n.textContent)},children:t})}),I2=({children:e})=>p.jsx("span",{className:"__menu-item-badge",children:e}),Q0e=({disabled:e,icon:t,children:n,className:r,...s})=>p.jsx("button",{disabled:e,tabIndex:e?void 0:0,"data-trailing-button":Er(!0),className:ne("__menu-item-trailing-btn",r),...s,onClick:i=>{i.preventDefault(),i.stopPropagation(),s.onClick?.(i)},onDoubleClick:i=>{i.preventDefault(),i.stopPropagation(),s.onDoubleClick?.(i)},children:p.jsx("div",{children:t?p.jsx(t,{className:"icon","aria-hidden":"true"}):n})}),tV=({as:e,className:t,...n})=>{const r=e;return p.jsx(r,{className:ne("__menu-label",t),...n})};function nV({size:e="long"}){const t=e==="long"?220:120,[n]=m.useState(()=>.75+.25*Math.random());return p.jsx(Di,{as:"div",disabled:!0,children:p.jsx("div",{className:"loading-results-shimmer h-4 rounded-sm",style:{width:Math.round(n*t)}})})}const rV=e=>{"use forget";const t=xe.c(44);let n,r,s,i,o,a,c,l,u,d;t[0]!==e?({holdFocus:l,selectAllOnFocus:u,submitIcon:n,onClick:s,onFocus:i,onKeyDownCapture:o,onSubmit:a,border:d,className:r,...c}=e,t[0]=e,t[1]=n,t[2]=r,t[3]=s,t[4]=i,t[5]=o,t[6]=a,t[7]=c,t[8]=l,t[9]=u,t[10]=d):(n=t[1],r=t[2],s=t[3],i=t[4],o=t[5],a=t[6],c=t[7],l=t[8],u=t[9],d=t[10]);const f=l===void 0?!1:l,h=u===void 0?!0:u,g=d===void 0?!0:d,_=Ue();let v;t[11]!==r?(v=ne("text-token-text-primary bg-token-bg-primary data-border:border-token-border-default m-[-1px] w-full min-w-[200px] rounded-[10px] border-transparent px-2.5 py-2 text-sm focus:ring-0 focus:ring-offset-0 focus:outline-hidden disabled:opacity-50 data-border:border-1 data-submit-icon:ps-2.5 data-submit-icon:pe-9 dark:bg-transparent",r),t[11]=r,t[12]=v):v=t[12];let y;t[13]!==f?(y=Er(f),t[13]=f,t[14]=y):y=t[14];let C;t[15]!==g?(C=Er(g),t[15]=g,t[16]=C):C=t[16];const E=!!n;let b;t[17]!==E?(b=Er(E),t[17]=E,t[18]=b):b=t[18];let S;t[19]!==s?(S=I=>{s?.(I),I.preventDefault()},t[19]=s,t[20]=S):S=t[20];let w;t[21]!==i||t[22]!==h?(w=I=>{i?.(I),h&&I.currentTarget.select()},t[21]=i,t[22]=h,t[23]=w):w=t[23];let x;t[24]!==o||t[25]!==a?(x=I=>{o?.(I);const{key:N}=I;QH(I)||(I.stopPropagation(),N==="Enter"&&a?.(I))},t[24]=o,t[25]=a,t[26]=x):x=t[26];let T;t[27]!==c||t[28]!==w||t[29]!==x||t[30]!==v||t[31]!==y||t[32]!==C||t[33]!==b||t[34]!==S?(T=p.jsx("input",{type:"text",className:v,"data-hold-focus":y,"data-border":C,"data-submit-icon":b,autoComplete:"off",onClick:S,onFocus:w,onKeyDownCapture:x,...c}),t[27]=c,t[28]=w,t[29]=x,t[30]=v,t[31]=y,t[32]=C,t[33]=b,t[34]=S,t[35]=T):T=t[35];const O=T;let A;t[36]!==n||t[37]!==_||t[38]!==a||t[39]!==c?.value?(A=n&&p.jsx("div",{className:"absolute end-2.5 top-1/2 flex -translate-y-1/2 items-center justify-center",children:p.jsx("button",{className:"icon composer-submit-btn size-5",disabled:c?.value?.toString().trim()==="",onClick:a,"aria-label":_.formatMessage({defaultMessage:"Submit",id:"aria.submit"}),"data-in-menu":Er(!0),children:p.jsx(n,{className:"icon-xs"})})}),t[36]=n,t[37]=_,t[38]=a,t[39]=c?.value,t[40]=A):A=t[40];let k;return t[41]!==O||t[42]!==A?(k=p.jsxs("div",{className:"relative mx-1.5 mb-1 w-[calc(100%---spacing(3))]",children:[A,O]}),t[41]=O,t[42]=A,t[43]=k):k=t[43],k};function Ce(e,t,{checkForDefaultPrevented:n=!0}={}){return function(s){if(e?.(s),n===!1||!s.defaultPrevented)return t?.(s)}}function sV(e,t){typeof e=="function"?e(t):e!=null&&(e.current=t)}function Uh(...e){return t=>e.forEach(n=>sV(n,t))}function Mt(...e){return m.useCallback(Uh(...e),e)}function iV(e,t){const n=m.createContext(t),r=i=>{const{children:o,...a}=i,c=m.useMemo(()=>a,Object.values(a));return p.jsx(n.Provider,{value:c,children:o})};r.displayName=e+"Provider";function s(i){const o=m.useContext(n);if(o)return o;if(t!==void 0)return t;throw new Error(`\`${i}\` must be used within \`${e}\``)}return[r,s]}function hc(e,t=[]){let n=[];function r(i,o){const a=m.createContext(o),c=n.length;n=[...n,o];const l=d=>{const{scope:f,children:h,...g}=d,_=f?.[e]?.[c]||a,v=m.useMemo(()=>g,Object.values(g));return p.jsx(_.Provider,{value:v,children:h})};l.displayName=i+"Provider";function u(d,f){const h=f?.[e]?.[c]||a,g=m.useContext(h);if(g)return g;if(o!==void 0)return o;throw new Error(`\`${d}\` must be used within \`${i}\``)}return[l,u]}const s=()=>{const i=n.map(o=>m.createContext(o));return function(a){const c=a?.[e]||i;return m.useMemo(()=>({[`__scope${e}`]:{...a,[e]:c}}),[a,c])}};return s.scopeName=e,[r,oV(s,...t)]}function oV(...e){const t=e[0];if(e.length===1)return t;const n=()=>{const r=e.map(s=>({useScope:s(),scopeName:s.scopeName}));return function(i){const o=r.reduce((a,{useScope:c,scopeName:l})=>{const d=c(i)[`__scope${l}`];return{...a,...d}},{});return m.useMemo(()=>({[`__scope${t.scopeName}`]:o}),[o])}};return n.scopeName=t.scopeName,n}function lr(e){const t=m.useRef(e);return m.useEffect(()=>{t.current=e}),m.useMemo(()=>(...n)=>t.current?.(...n),[])}function jo({prop:e,defaultProp:t,onChange:n=()=>{}}){const[r,s]=aV({defaultProp:t,onChange:n}),i=e!==void 0,o=i?e:r,a=lr(n),c=m.useCallback(l=>{if(i){const d=typeof l=="function"?l(e):l;d!==e&&a(d)}else s(l)},[i,e,s,a]);return[o,c]}function aV({defaultProp:e,onChange:t}){const n=m.useState(e),[r]=n,s=m.useRef(r),i=lr(t);return m.useEffect(()=>{s.current!==r&&(i(r),s.current=r)},[r,s,i]),n}function cV(e){const t=m.useRef({value:e,previous:e});return m.useMemo(()=>(t.current.value!==e&&(t.current.previous=t.current.value,t.current.value=e),t.current.previous),[e])}var So=globalThis?.document?m.useLayoutEffect:()=>{};function ST(e){const[t,n]=m.useState(void 0);return So(()=>{if(e){n({width:e.offsetWidth,height:e.offsetHeight});const r=new ResizeObserver(s=>{if(!Array.isArray(s)||!s.length)return;const i=s[0];let o,a;if("borderBoxSize"in i){const c=i.borderBoxSize,l=Array.isArray(c)?c[0]:c;o=l.inlineSize,a=l.blockSize}else o=e.offsetWidth,a=e.offsetHeight;n({width:o,height:a})});return r.observe(e,{box:"border-box"}),()=>r.unobserve(e)}else n(void 0)},[e]),t}var Za=m.forwardRef((e,t)=>{const{children:n,...r}=e,s=m.Children.toArray(n),i=s.find(lV);if(i){const o=i.props.children,a=s.map(c=>c===i?m.Children.count(o)>1?m.Children.only(null):m.isValidElement(o)?o.props.children:null:c);return p.jsx(rv,{...r,ref:t,children:m.isValidElement(o)?m.cloneElement(o,void 0,a):null})}return p.jsx(rv,{...r,ref:t,children:n})});Za.displayName="Slot";var rv=m.forwardRef((e,t)=>{const{children:n,...r}=e;if(m.isValidElement(n)){const s=dV(n);return m.cloneElement(n,{...uV(r,n.props),ref:t?Uh(t,s):s})}return m.Children.count(n)>1?m.Children.only(null):null});rv.displayName="SlotClone";var wT=({children:e})=>p.jsx(p.Fragment,{children:e});function lV(e){return m.isValidElement(e)&&e.type===wT}function uV(e,t){const n={...t};for(const r in t){const s=e[r],i=t[r];/^on[A-Z]/.test(r)?s&&i?n[r]=(...a)=>{i(...a),s(...a)}:s&&(n[r]=s):r==="style"?n[r]={...s,...i}:r==="className"&&(n[r]=[s,i].filter(Boolean).join(" "))}return{...e,...n}}function dV(e){let t=Object.getOwnPropertyDescriptor(e.props,"ref")?.get,n=t&&"isReactWarning"in t&&t.isReactWarning;return n?e.ref:(t=Object.getOwnPropertyDescriptor(e,"ref")?.get,n=t&&"isReactWarning"in t&&t.isReactWarning,n?e.props.ref:e.props.ref||e.ref)}var fV=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"],st=fV.reduce((e,t)=>{const n=m.forwardRef((r,s)=>{const{asChild:i,...o}=r,a=i?Za:t;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),p.jsx(a,{...o,ref:s})});return n.displayName=`Primitive.${t}`,{...e,[t]:n}},{});function ET(e,t){e&&dy.flushSync(()=>e.dispatchEvent(t))}var N2="Switch",[hV,X0e]=hc(N2),[pV,mV]=hV(N2),xT=m.forwardRef((e,t)=>{const{__scopeSwitch:n,name:r,checked:s,defaultChecked:i,required:o,disabled:a,value:c="on",onCheckedChange:l,form:u,...d}=e,[f,h]=m.useState(null),g=Mt(t,E=>h(E)),_=m.useRef(!1),v=f?u||!!f.closest("form"):!0,[y=!1,C]=jo({prop:s,defaultProp:i,onChange:l});return p.jsxs(pV,{scope:n,checked:y,disabled:a,children:[p.jsx(st.button,{type:"button",role:"switch","aria-checked":y,"aria-required":o,"data-state":kT(y),"data-disabled":a?"":void 0,disabled:a,value:c,...d,ref:g,onClick:Ce(e.onClick,E=>{C(b=>!b),v&&(_.current=E.isPropagationStopped(),_.current||E.stopPropagation())})}),v&&p.jsx(gV,{control:f,bubbles:!_.current,name:r,value:c,checked:y,required:o,disabled:a,form:u,style:{transform:"translateX(-100%)"}})]})});xT.displayName=N2;var TT="SwitchThumb",OT=m.forwardRef((e,t)=>{const{__scopeSwitch:n,...r}=e,s=mV(TT,n);return p.jsx(st.span,{"data-state":kT(s.checked),"data-disabled":s.disabled?"":void 0,...r,ref:t})});OT.displayName=TT;var gV=e=>{const{control:t,checked:n,bubbles:r=!0,...s}=e,i=m.useRef(null),o=cV(n),a=ST(t);return m.useEffect(()=>{const c=i.current,l=window.HTMLInputElement.prototype,d=Object.getOwnPropertyDescriptor(l,"checked").set;if(o!==n&&d){const f=new Event("click",{bubbles:r});d.call(c,n),c.dispatchEvent(f)}},[o,n,r]),p.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:n,...s,tabIndex:-1,ref:i,style:{...e.style,...a,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})};function kT(e){return e?"checked":"unchecked"}var _V=xT,vV=OT;const AT=({size:e,className:t,withinLabel:n,...r})=>p.jsx(_V,{className:ne("radix-state-checked:bg-blue-400 focus-visible:ring-token-text-primary relative box-content aspect-7/4 shrink-0 rounded-full bg-gray-200 p-[2px] focus-visible:ring-2 focus-visible:ring-offset-2 focus-visible:outline-hidden disabled:opacity-50 dark:bg-gray-600",e==="small"?"h-3":"h-4",t),...r,children:p.jsx(vV,{className:"radix-state-checked:translate-x-[calc(var(--dir,1)*100%*(7/4-1))] flex aspect-square h-full items-center justify-center rounded-full bg-white transition-transform duration-100 rtl:[--dir:-1]"})});function R2(e,t=[]){let n=[];function r(i,o){const a=m.createContext(o),c=n.length;n=[...n,o];function l(d){const{scope:f,children:h,...g}=d,_=f?.[e][c]||a,v=m.useMemo(()=>g,Object.values(g));return p.jsx(_.Provider,{value:v,children:h})}function u(d,f){const h=f?.[e][c]||a,g=m.useContext(h);if(g)return g;if(o!==void 0)return o;throw new Error(`\`${d}\` must be used within \`${i}\``)}return l.displayName=i+"Provider",[l,u]}const s=()=>{const i=n.map(o=>m.createContext(o));return function(a){const c=a?.[e]||i;return m.useMemo(()=>({[`__scope${e}`]:{...a,[e]:c}}),[a,c])}};return s.scopeName=e,[r,yV(s,...t)]}function yV(...e){const t=e[0];if(e.length===1)return t;const n=()=>{const r=e.map(s=>({useScope:s(),scopeName:s.scopeName}));return function(i){const o=r.reduce((a,{useScope:c,scopeName:l})=>{const d=c(i)[`__scope${l}`];return{...a,...d}},{});return m.useMemo(()=>({[`__scope${t.scopeName}`]:o}),[o])}};return n.scopeName=t.scopeName,n}function MT(e){const t=e+"CollectionProvider",[n,r]=R2(t),[s,i]=n(t,{collectionRef:{current:null},itemMap:new Map}),o=h=>{const{scope:g,children:_}=h,v=qe.useRef(null),y=qe.useRef(new Map).current;return p.jsx(s,{scope:g,itemMap:y,collectionRef:v,children:_})};o.displayName=t;const a=e+"CollectionSlot",c=qe.forwardRef((h,g)=>{const{scope:_,children:v}=h,y=i(a,_),C=Mt(g,y.collectionRef);return p.jsx(Za,{ref:C,children:v})});c.displayName=a;const l=e+"CollectionItemSlot",u="data-radix-collection-item",d=qe.forwardRef((h,g)=>{const{scope:_,children:v,...y}=h,C=qe.useRef(null),E=Mt(g,C),b=i(l,_);return qe.useEffect(()=>(b.itemMap.set(C,{ref:C,...y}),()=>void b.itemMap.delete(C))),p.jsx(Za,{[u]:"",ref:E,children:v})});d.displayName=l;function f(h){const g=i(e+"CollectionConsumer",h);return qe.useCallback(()=>{const v=g.collectionRef.current;if(!v)return[];const y=Array.from(v.querySelectorAll(`[${u}]`));return Array.from(g.itemMap.values()).sort((b,S)=>y.indexOf(b.ref.current)-y.indexOf(S.ref.current))},[g.collectionRef,g.itemMap])}return[{Provider:o,Slot:c,ItemSlot:d},f,r]}var CV=AR.useId||(()=>{}),bV=0;function ls(e){const[t,n]=m.useState(CV());return So(()=>{n(r=>r??String(bV++))},[e]),e||(t?`radix-${t}`:"")}var IT=m.createContext(void 0),SV=e=>{const{dir:t,children:n}=e;return p.jsx(IT.Provider,{value:t,children:n})};function P2(e){const t=m.useContext(IT);return e||t||"ltr"}var Qg="rovingFocusGroup.onEntryFocus",wV={bubbles:!1,cancelable:!0},Bh="RovingFocusGroup",[sv,NT,EV]=MT(Bh),[xV,qh]=R2(Bh,[EV]),[TV,OV]=xV(Bh),RT=m.forwardRef((e,t)=>p.jsx(sv.Provider,{scope:e.__scopeRovingFocusGroup,children:p.jsx(sv.Slot,{scope:e.__scopeRovingFocusGroup,children:p.jsx(kV,{...e,ref:t})})}));RT.displayName=Bh;var kV=m.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:n,orientation:r,loop:s=!1,dir:i,currentTabStopId:o,defaultCurrentTabStopId:a,onCurrentTabStopIdChange:c,onEntryFocus:l,preventScrollOnEntryFocus:u=!1,...d}=e,f=m.useRef(null),h=Mt(t,f),g=P2(i),[_=null,v]=jo({prop:o,defaultProp:a,onChange:c}),[y,C]=m.useState(!1),E=lr(l),b=NT(n),S=m.useRef(!1),[w,x]=m.useState(0);return m.useEffect(()=>{const T=f.current;if(T)return T.addEventListener(Qg,E),()=>T.removeEventListener(Qg,E)},[E]),p.jsx(TV,{scope:n,orientation:r,dir:g,loop:s,currentTabStopId:_,onItemFocus:m.useCallback(T=>v(T),[v]),onItemShiftTab:m.useCallback(()=>C(!0),[]),onFocusableItemAdd:m.useCallback(()=>x(T=>T+1),[]),onFocusableItemRemove:m.useCallback(()=>x(T=>T-1),[]),children:p.jsx(st.div,{tabIndex:y||w===0?-1:0,"data-orientation":r,...d,ref:h,style:{outline:"none",...e.style},onMouseDown:Ce(e.onMouseDown,()=>{S.current=!0}),onFocus:Ce(e.onFocus,T=>{const O=!S.current;if(T.target===T.currentTarget&&O&&!y){const A=new CustomEvent(Qg,wV);if(T.currentTarget.dispatchEvent(A),!A.defaultPrevented){const k=b().filter(D=>D.focusable),I=k.find(D=>D.active),N=k.find(D=>D.id===_),q=[I,N,...k].filter(Boolean).map(D=>D.ref.current);LT(q,u)}}S.current=!1}),onBlur:Ce(e.onBlur,()=>C(!1))})})}),PT="RovingFocusGroupItem",DT=m.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:n,focusable:r=!0,active:s=!1,tabStopId:i,...o}=e,a=ls(),c=i||a,l=OV(PT,n),u=l.currentTabStopId===c,d=NT(n),{onFocusableItemAdd:f,onFocusableItemRemove:h}=l;return m.useEffect(()=>{if(r)return f(),()=>h()},[r,f,h]),p.jsx(sv.ItemSlot,{scope:n,id:c,focusable:r,active:s,children:p.jsx(st.span,{tabIndex:u?0:-1,"data-orientation":l.orientation,...o,ref:t,onMouseDown:Ce(e.onMouseDown,g=>{r?l.onItemFocus(c):g.preventDefault()}),onFocus:Ce(e.onFocus,()=>l.onItemFocus(c)),onKeyDown:Ce(e.onKeyDown,g=>{if(g.key==="Tab"&&g.shiftKey){l.onItemShiftTab();return}if(g.target!==g.currentTarget)return;const _=IV(g,l.orientation,l.dir);if(_!==void 0){if(g.metaKey||g.ctrlKey||g.altKey||g.shiftKey)return;g.preventDefault();let y=d().filter(C=>C.focusable).map(C=>C.ref.current);if(_==="last")y.reverse();else if(_==="prev"||_==="next"){_==="prev"&&y.reverse();const C=y.indexOf(g.currentTarget);y=l.loop?NV(y,C+1):y.slice(C+1)}setTimeout(()=>LT(y))}})})})});DT.displayName=PT;var AV={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function MV(e,t){return t!=="rtl"?e:e==="ArrowLeft"?"ArrowRight":e==="ArrowRight"?"ArrowLeft":e}function IV(e,t,n){const r=MV(e.key,n);if(!(t==="vertical"&&["ArrowLeft","ArrowRight"].includes(r))&&!(t==="horizontal"&&["ArrowUp","ArrowDown"].includes(r)))return AV[r]}function LT(e,t=!1){const n=document.activeElement;for(const r of e)if(r===n||(r.focus({preventScroll:t}),document.activeElement!==n))return}function NV(e,t){return e.map((n,r)=>e[(t+r)%e.length])}var FT=RT,jT=DT;function RV(e,t){return m.useReducer((n,r)=>t[n][r]??n,e)}var Hr=e=>{const{present:t,children:n}=e,r=PV(t),s=typeof n=="function"?n({present:r.isPresent}):m.Children.only(n),i=Mt(r.ref,DV(s));return typeof n=="function"||r.isPresent?m.cloneElement(s,{ref:i}):null};Hr.displayName="Presence";function PV(e){const[t,n]=m.useState(),r=m.useRef({}),s=m.useRef(e),i=m.useRef("none"),o=e?"mounted":"unmounted",[a,c]=RV(o,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return m.useEffect(()=>{const l=Uu(r.current);i.current=a==="mounted"?l:"none"},[a]),So(()=>{const l=r.current,u=s.current;if(u!==e){const f=i.current,h=Uu(l);e?c("MOUNT"):h==="none"||l?.display==="none"?c("UNMOUNT"):c(u&&f!==h?"ANIMATION_OUT":"UNMOUNT"),s.current=e}},[e,c]),So(()=>{if(t){let l;const u=t.ownerDocument.defaultView??window,d=h=>{const _=Uu(r.current).includes(h.animationName);if(h.target===t&&_&&(c("ANIMATION_END"),!s.current)){const v=t.style.animationFillMode;t.style.animationFillMode="forwards",l=u.setTimeout(()=>{t.style.animationFillMode==="forwards"&&(t.style.animationFillMode=v)})}},f=h=>{h.target===t&&(i.current=Uu(r.current))};return t.addEventListener("animationstart",f),t.addEventListener("animationcancel",d),t.addEventListener("animationend",d),()=>{u.clearTimeout(l),t.removeEventListener("animationstart",f),t.removeEventListener("animationcancel",d),t.removeEventListener("animationend",d)}}else c("ANIMATION_END")},[t,c]),{isPresent:["mounted","unmountSuspended"].includes(a),ref:m.useCallback(l=>{l&&(r.current=getComputedStyle(l)),n(l)},[])}}function Uu(e){return e?.animationName||"none"}function DV(e){let t=Object.getOwnPropertyDescriptor(e.props,"ref")?.get,n=t&&"isReactWarning"in t&&t.isReactWarning;return n?e.ref:(t=Object.getOwnPropertyDescriptor(e,"ref")?.get,n=t&&"isReactWarning"in t&&t.isReactWarning,n?e.props.ref:e.props.ref||e.ref)}var D2="Tabs",[LV,e_e]=hc(D2,[qh]),UT=qh(),[FV,L2]=LV(D2),BT=m.forwardRef((e,t)=>{const{__scopeTabs:n,value:r,onValueChange:s,defaultValue:i,orientation:o="horizontal",dir:a,activationMode:c="automatic",...l}=e,u=P2(a),[d,f]=jo({prop:r,onChange:s,defaultProp:i});return p.jsx(FV,{scope:n,baseId:ls(),value:d,onValueChange:f,orientation:o,dir:u,activationMode:c,children:p.jsx(st.div,{dir:u,"data-orientation":o,...l,ref:t})})});BT.displayName=D2;var qT="TabsList",GT=m.forwardRef((e,t)=>{const{__scopeTabs:n,loop:r=!0,...s}=e,i=L2(qT,n),o=UT(n);return p.jsx(FT,{asChild:!0,...o,orientation:i.orientation,dir:i.dir,loop:r,children:p.jsx(st.div,{role:"tablist","aria-orientation":i.orientation,...s,ref:t})})});GT.displayName=qT;var HT="TabsTrigger",VT=m.forwardRef((e,t)=>{const{__scopeTabs:n,value:r,disabled:s=!1,...i}=e,o=L2(HT,n),a=UT(n),c=WT(o.baseId,r),l=KT(o.baseId,r),u=r===o.value;return p.jsx(jT,{asChild:!0,...a,focusable:!s,active:u,children:p.jsx(st.button,{type:"button",role:"tab","aria-selected":u,"aria-controls":l,"data-state":u?"active":"inactive","data-disabled":s?"":void 0,disabled:s,id:c,...i,ref:t,onMouseDown:Ce(e.onMouseDown,d=>{!s&&d.button===0&&d.ctrlKey===!1?o.onValueChange(r):d.preventDefault()}),onKeyDown:Ce(e.onKeyDown,d=>{[" ","Enter"].includes(d.key)&&o.onValueChange(r)}),onFocus:Ce(e.onFocus,()=>{const d=o.activationMode!=="manual";!u&&!s&&d&&o.onValueChange(r)})})})});VT.displayName=HT;var zT="TabsContent",$T=m.forwardRef((e,t)=>{const{__scopeTabs:n,value:r,forceMount:s,children:i,...o}=e,a=L2(zT,n),c=WT(a.baseId,r),l=KT(a.baseId,r),u=r===a.value,d=m.useRef(u);return m.useEffect(()=>{const f=requestAnimationFrame(()=>d.current=!1);return()=>cancelAnimationFrame(f)},[]),p.jsx(Hr,{present:s||u,children:({present:f})=>p.jsx(st.div,{"data-state":u?"active":"inactive","data-orientation":a.orientation,role:"tabpanel","aria-labelledby":c,hidden:!f,id:l,tabIndex:0,...o,ref:t,style:{...e.style,animationDuration:d.current?"0s":void 0},children:f&&i})})});$T.displayName=zT;function WT(e,t){return`${e}-trigger-${t}`}function KT(e,t){return`${e}-content-${t}`}var t_e=BT,n_e=GT,jV=VT,UV=$T;function BV(){for(var e=0,t,n,r="";e<arguments.length;)(t=arguments[e++])&&(n=YT(t))&&(r&&(r+=" "),r+=n);return r}function YT(e){if(typeof e=="string")return e;for(var t,n="",r=0;r<e.length;r++)e[r]&&(t=YT(e[r]))&&(n&&(n+=" "),n+=t);return n}function iv(){return iv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},iv.apply(this,arguments)}function qV(e){if(e<1)return{get:function(){},set:function(){}};var t=0,n=new Map,r=new Map;function s(i,o){n.set(i,o),t++,t>e&&(t=0,r=n,n=new Map)}return{get:function(o){var a=n.get(o);if(a!==void 0)return a;if((a=r.get(o))!==void 0)return s(o,a),a},set:function(o,a){n.has(o)?n.set(o,a):s(o,a)}}}var F2="-";function GV(e){var t=VV(e);function n(s){var i=s.split(F2);return i[0]===""&&i.length!==1&&i.shift(),ZT(i,t)||HV(s)}function r(s){return e.conflictingClassGroups[s]||[]}return{getClassGroupId:n,getConflictingClassGroupIds:r}}function ZT(e,t){var n;if(e.length===0)return t.classGroupId;var r=e[0],s=t.nextPart.get(r),i=s?ZT(e.slice(1),s):void 0;if(i)return i;if(t.validators.length!==0){var o=e.join(F2);return(n=t.validators.find(function(a){var c=a.validator;return c(o)}))==null?void 0:n.classGroupId}}var h4=/^\[(.+)\]$/;function HV(e){if(h4.test(e)){var t=h4.exec(e)[1],n=t?.substring(0,t.indexOf(":"));if(n)return"arbitrary.."+n}}function VV(e){var t=e.theme,n=e.prefix,r={nextPart:new Map,validators:[]},s=$V(Object.entries(e.classGroups),n);return s.forEach(function(i){var o=i[0],a=i[1];ov(a,r,o,t)}),r}function ov(e,t,n,r){e.forEach(function(s){if(typeof s=="string"){var i=s===""?t:p4(t,s);i.classGroupId=n;return}if(typeof s=="function"){if(zV(s)){ov(s(r),t,n,r);return}t.validators.push({validator:s,classGroupId:n});return}Object.entries(s).forEach(function(o){var a=o[0],c=o[1];ov(c,p4(t,a),n,r)})})}function p4(e,t){var n=e;return t.split(F2).forEach(function(r){n.nextPart.has(r)||n.nextPart.set(r,{nextPart:new Map,validators:[]}),n=n.nextPart.get(r)}),n}function zV(e){return e.isThemeGetter}function $V(e,t){return t?e.map(function(n){var r=n[0],s=n[1],i=s.map(function(o){return typeof o=="string"?t+o:typeof o=="object"?Object.fromEntries(Object.entries(o).map(function(a){var c=a[0],l=a[1];return[t+c,l]})):o});return[r,i]}):e}var JT="!";function WV(e){var t=e.separator||":";return function(r){for(var s=0,i=[],o=0,a=0;a<r.length;a++){var c=r[a];s===0&&c===t[0]&&(t.length===1||r.slice(a,a+t.length)===t)&&(i.push(r.slice(o,a)),o=a+t.length),c==="["?s++:c==="]"&&s--}var l=i.length===0?r:r.substring(o),u=l.startsWith(JT),d=u?l.substring(1):l;return{modifiers:i,hasImportantModifier:u,baseClassName:d}}}function KV(e){if(e.length<=1)return e;var t=[],n=[];return e.forEach(function(r){var s=r[0]==="[";s?(t.push.apply(t,n.sort().concat([r])),n=[]):n.push(r)}),t.push.apply(t,n.sort()),t}function YV(e){return iv({cache:qV(e.cacheSize),splitModifiers:WV(e)},GV(e))}var ZV=/\s+/;function JV(e,t){var n=t.splitModifiers,r=t.getClassGroupId,s=t.getConflictingClassGroupIds,i=new Set;return e.trim().split(ZV).map(function(o){var a=n(o),c=a.modifiers,l=a.hasImportantModifier,u=a.baseClassName,d=r(u);if(!d)return{isTailwindClass:!1,originalClassName:o};var f=KV(c).join(":"),h=l?f+JT:f;return{isTailwindClass:!0,modifierId:h,classGroupId:d,originalClassName:o}}).reverse().filter(function(o){if(!o.isTailwindClass)return!0;var a=o.modifierId,c=o.classGroupId,l=a+c;return i.has(l)?!1:(i.add(l),s(c).forEach(function(u){return i.add(a+u)}),!0)}).reverse().map(function(o){return o.originalClassName}).join(" ")}function QV(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r,s,i,o=a;function a(l){var u=t[0],d=t.slice(1),f=d.reduce(function(h,g){return g(h)},u());return r=YV(f),s=r.cache.get,i=r.cache.set,o=c,c(l)}function c(l){var u=s(l);if(u)return u;var d=JV(l,r);return i(l,d),d}return function(){return o(BV.apply(null,arguments))}}function pt(e){var t=function(r){return r[e]||[]};return t.isThemeGetter=!0,t}var Li=/^\[(.+)\]$/,XV=/^\d+\/\d+$/,ez=new Set(["px","full","screen"]),tz=/^(\d+)?(xs|sm|md|lg|xl)$/,nz=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh)/,rz=/^-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/;function _r(e){return!Number.isNaN(Number(e))||ez.has(e)||XV.test(e)||Ki(e)}function Ki(e){var t,n=(t=Li.exec(e))==null?void 0:t[1];return n?n.startsWith("length:")||nz.test(n):!1}function sz(e){var t,n=(t=Li.exec(e))==null?void 0:t[1];return n?n.startsWith("size:"):!1}function iz(e){var t,n=(t=Li.exec(e))==null?void 0:t[1];return n?n.startsWith("position:"):!1}function oz(e){var t,n=(t=Li.exec(e))==null?void 0:t[1];return n?n.startsWith("url(")||n.startsWith("url:"):!1}function m4(e){var t,n=(t=Li.exec(e))==null?void 0:t[1];return n?!Number.isNaN(Number(n))||n.startsWith("number:"):!1}function Cn(e){var t,n=(t=Li.exec(e))==null?void 0:t[1];return n?Number.isInteger(Number(n)):Number.isInteger(Number(e))}function Kt(e){return Li.test(e)}function kc(){return!0}function $s(e){return tz.test(e)}function az(e){var t,n=(t=Li.exec(e))==null?void 0:t[1];return n?rz.test(n):!1}function cz(){var e=pt("colors"),t=pt("spacing"),n=pt("blur"),r=pt("brightness"),s=pt("borderColor"),i=pt("borderRadius"),o=pt("borderSpacing"),a=pt("borderWidth"),c=pt("contrast"),l=pt("grayscale"),u=pt("hueRotate"),d=pt("invert"),f=pt("gap"),h=pt("gradientColorStops"),g=pt("inset"),_=pt("margin"),v=pt("opacity"),y=pt("padding"),C=pt("saturate"),E=pt("scale"),b=pt("sepia"),S=pt("skew"),w=pt("space"),x=pt("translate"),T=function(){return["auto","contain","none"]},O=function(){return["auto","hidden","clip","visible","scroll"]},A=function(){return["auto",t]},k=function(){return["",_r]},I=function(){return["auto",Cn]},N=function(){return["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"]},j=function(){return["solid","dashed","dotted","double","none"]},q=function(){return["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity","plus-lighter"]},D=function(){return["start","end","center","between","around","evenly"]},U=function(){return["","0",Kt]},G=function(){return["auto","avoid","all","avoid-page","page","left","right","column"]};return{cacheSize:500,theme:{colors:[kc],spacing:[_r],blur:["none","",$s,Ki],brightness:[Cn],borderColor:[e],borderRadius:["none","","full",$s,Ki],borderSpacing:[t],borderWidth:k(),contrast:[Cn],grayscale:U(),hueRotate:[Cn],invert:U(),gap:[t],gradientColorStops:[e],inset:A(),margin:A(),opacity:[Cn],padding:[t],saturate:[Cn],scale:[Cn],sepia:U(),skew:[Cn,Kt],space:[t],translate:[t]},classGroups:{aspect:[{aspect:["auto","square","video",Kt]}],container:["container"],columns:[{columns:[$s]}],"break-after":[{"break-after":G()}],"break-before":[{"break-before":G()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none"]}],clear:[{clear:["left","right","both","none"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[].concat(N(),[Kt])}],overflow:[{overflow:O()}],"overflow-x":[{"overflow-x":O()}],"overflow-y":[{"overflow-y":O()}],overscroll:[{overscroll:T()}],"overscroll-x":[{"overscroll-x":T()}],"overscroll-y":[{"overscroll-y":T()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[g]}],"inset-x":[{"inset-x":[g]}],"inset-y":[{"inset-y":[g]}],top:[{top:[g]}],right:[{right:[g]}],bottom:[{bottom:[g]}],left:[{left:[g]}],visibility:["visible","invisible","collapse"],z:[{z:[Cn]}],basis:[{basis:[t]}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",Kt]}],grow:[{grow:U()}],shrink:[{shrink:U()}],order:[{order:["first","last","none",Cn]}],"grid-cols":[{"grid-cols":[kc]}],"col-start-end":[{col:["auto",{span:[Cn]}]}],"col-start":[{"col-start":I()}],"col-end":[{"col-end":I()}],"grid-rows":[{"grid-rows":[kc]}],"row-start-end":[{row:["auto",{span:[Cn]}]}],"row-start":[{"row-start":I()}],"row-end":[{"row-end":I()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",Kt]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",Kt]}],gap:[{gap:[f]}],"gap-x":[{"gap-x":[f]}],"gap-y":[{"gap-y":[f]}],"justify-content":[{justify:D()}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:[].concat(D(),["baseline"])}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[].concat(D(),["baseline","stretch"])}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[y]}],px:[{px:[y]}],py:[{py:[y]}],pt:[{pt:[y]}],pr:[{pr:[y]}],pb:[{pb:[y]}],pl:[{pl:[y]}],m:[{m:[_]}],mx:[{mx:[_]}],my:[{my:[_]}],mt:[{mt:[_]}],mr:[{mr:[_]}],mb:[{mb:[_]}],ml:[{ml:[_]}],"space-x":[{"space-x":[w]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[w]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit",t]}],"min-w":[{"min-w":["min","max","fit",_r]}],"max-w":[{"max-w":["0","none","full","min","max","fit","prose",{screen:[$s]},$s,Ki]}],h:[{h:[t,"auto","min","max","fit"]}],"min-h":[{"min-h":["min","max","fit",_r]}],"max-h":[{"max-h":[t,"min","max","fit"]}],"font-size":[{text:["base",$s,Ki]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",m4]}],"font-family":[{font:[kc]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractons"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",Ki]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",_r]}],"list-style-type":[{list:["none","disc","decimal",Kt]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[e]}],"placeholder-opacity":[{"placeholder-opacity":[v]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[e]}],"text-opacity":[{"text-opacity":[v]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[].concat(j(),["wavy"])}],"text-decoration-thickness":[{decoration:["auto","from-font",_r]}],"underline-offset":[{"underline-offset":["auto",_r]}],"text-decoration-color":[{decoration:[e]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],indent:[{indent:[t]}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",Ki]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap"]}],break:[{break:["normal","words","all","keep"]}],content:[{content:["none",Kt]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[v]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[].concat(N(),[iz])}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",sz]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},oz]}],"bg-color":[{bg:[e]}],"gradient-from":[{from:[h]}],"gradient-via":[{via:[h]}],"gradient-to":[{to:[h]}],rounded:[{rounded:[i]}],"rounded-t":[{"rounded-t":[i]}],"rounded-r":[{"rounded-r":[i]}],"rounded-b":[{"rounded-b":[i]}],"rounded-l":[{"rounded-l":[i]}],"rounded-tl":[{"rounded-tl":[i]}],"rounded-tr":[{"rounded-tr":[i]}],"rounded-br":[{"rounded-br":[i]}],"rounded-bl":[{"rounded-bl":[i]}],"border-w":[{border:[a]}],"border-w-x":[{"border-x":[a]}],"border-w-y":[{"border-y":[a]}],"border-w-t":[{"border-t":[a]}],"border-w-r":[{"border-r":[a]}],"border-w-b":[{"border-b":[a]}],"border-w-l":[{"border-l":[a]}],"border-opacity":[{"border-opacity":[v]}],"border-style":[{border:[].concat(j(),["hidden"])}],"divide-x":[{"divide-x":[a]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[a]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[v]}],"divide-style":[{divide:j()}],"border-color":[{border:[s]}],"border-color-x":[{"border-x":[s]}],"border-color-y":[{"border-y":[s]}],"border-color-t":[{"border-t":[s]}],"border-color-r":[{"border-r":[s]}],"border-color-b":[{"border-b":[s]}],"border-color-l":[{"border-l":[s]}],"divide-color":[{divide:[s]}],"outline-style":[{outline:[""].concat(j())}],"outline-offset":[{"outline-offset":[_r]}],"outline-w":[{outline:[_r]}],"outline-color":[{outline:[e]}],"ring-w":[{ring:k()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[e]}],"ring-opacity":[{"ring-opacity":[v]}],"ring-offset-w":[{"ring-offset":[_r]}],"ring-offset-color":[{"ring-offset":[e]}],shadow:[{shadow:["","inner","none",$s,az]}],"shadow-color":[{shadow:[kc]}],opacity:[{opacity:[v]}],"mix-blend":[{"mix-blend":q()}],"bg-blend":[{"bg-blend":q()}],filter:[{filter:["","none"]}],blur:[{blur:[n]}],brightness:[{brightness:[r]}],contrast:[{contrast:[c]}],"drop-shadow":[{"drop-shadow":["","none",$s,Kt]}],grayscale:[{grayscale:[l]}],"hue-rotate":[{"hue-rotate":[u]}],invert:[{invert:[d]}],saturate:[{saturate:[C]}],sepia:[{sepia:[b]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[n]}],"backdrop-brightness":[{"backdrop-brightness":[r]}],"backdrop-contrast":[{"backdrop-contrast":[c]}],"backdrop-grayscale":[{"backdrop-grayscale":[l]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[u]}],"backdrop-invert":[{"backdrop-invert":[d]}],"backdrop-opacity":[{"backdrop-opacity":[v]}],"backdrop-saturate":[{"backdrop-saturate":[C]}],"backdrop-sepia":[{"backdrop-sepia":[b]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[o]}],"border-spacing-x":[{"border-spacing-x":[o]}],"border-spacing-y":[{"border-spacing-y":[o]}],"table-layout":[{table:["auto","fixed"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",Kt]}],duration:[{duration:[Cn]}],ease:[{ease:["linear","in","out","in-out",Kt]}],delay:[{delay:[Cn]}],animate:[{animate:["none","spin","ping","pulse","bounce",Kt]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[E]}],"scale-x":[{"scale-x":[E]}],"scale-y":[{"scale-y":[E]}],rotate:[{rotate:[Cn,Kt]}],"translate-x":[{"translate-x":[x]}],"translate-y":[{"translate-y":[x]}],"skew-x":[{"skew-x":[S]}],"skew-y":[{"skew-y":[S]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",Kt]}],accent:[{accent:["auto",e]}],appearance:["appearance-none"],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",Kt]}],"caret-color":[{caret:[e]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":[t]}],"scroll-mx":[{"scroll-mx":[t]}],"scroll-my":[{"scroll-my":[t]}],"scroll-mt":[{"scroll-mt":[t]}],"scroll-mr":[{"scroll-mr":[t]}],"scroll-mb":[{"scroll-mb":[t]}],"scroll-ml":[{"scroll-ml":[t]}],"scroll-p":[{"scroll-p":[t]}],"scroll-px":[{"scroll-px":[t]}],"scroll-py":[{"scroll-py":[t]}],"scroll-pt":[{"scroll-pt":[t]}],"scroll-pr":[{"scroll-pr":[t]}],"scroll-pb":[{"scroll-pb":[t]}],"scroll-pl":[{"scroll-pl":[t]}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","pinch-zoom","manipulation",{pan:["x","left","right","y","up","down"]}]}],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",Kt]}],fill:[{fill:[e,"none"]}],"stroke-w":[{stroke:[_r,m4]}],stroke:[{stroke:[e,"none"]}],sr:["sr-only","not-sr-only"]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],"col-start-end":["col-start","col-end"],"row-start-end":["row-start","row-end"],gap:["gap-x","gap-y"],p:["px","py","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],rounded:["rounded-t","rounded-r","rounded-b","rounded-l","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"]}}}var lz=QV(cz),uz=["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","marker","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"],dz=uz,QT=Symbol("isTwElement?"),fz=(e,t)=>e.reduce((n,r,s)=>n.concat(r||[],t[s]||[]),[]),hz=(e,t="")=>{let n=e.join(" ").trim().replace(/\n/g," ").replace(/\s{2,}/g," ").split(" ").filter(s=>s!==","),r=t?t.split(" "):[];return lz(...n.concat(r).filter(s=>s!==" "))},pz=([e])=>e.charAt(0)!=="$",Xg=e=>e[QT]===!0,XT=e=>(t,...n)=>{let r=(s=[])=>{let i=qe.forwardRef((o,a)=>{let{$as:c=e,style:l={},...u}=o,d=Xg(e)?e:c,f=s?s.reduce((g,_)=>Object.assign(g,typeof _=="function"?_(o):_),{}):{},h=Xg(d)?u:Object.fromEntries(Object.entries(u).filter(pz));return qe.createElement(d,{...h,style:{...f,...l},ref:a,className:hz(fz(t,n.map(g=>g({...u,$as:c}))),u.className),...Xg(e)?{$as:c}:{}})});return i[QT]=!0,typeof e!="string"?i.displayName=e.displayName||e.name||"tw.Component":i.displayName="tw."+e,i.withStyle=o=>r(s.concat(o)),i};return r()},mz=dz.reduce((e,t)=>({...e,[t]:XT(t)}),{}),gz=Object.assign(XT,mz),Fi=gz;function g4(){return p.jsx("div",{className:"border-token-text-quartenary text-token-text-secondary dark:border-token-border-heavy dark:text-token-text-tertiary items-center rounded-full border px-1 py-0.5 text-[8px] leading-3 font-semibold uppercase",children:p.jsx(K,{id:"PoPvGE",defaultMessage:"Alpha"})})}var eO={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},_4=qe.createContext&&qe.createContext(eO),_z=["attr","size","title"];function vz(e,t){if(e==null)return{};var n=yz(e,t),r,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)r=i[s],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function yz(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}function sf(){return sf=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},sf.apply(this,arguments)}function v4(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,r)}return n}function of(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?v4(Object(n),!0).forEach(function(r){Cz(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):v4(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Cz(e,t,n){return t=bz(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function bz(e){var t=Sz(e,"string");return typeof t=="symbol"?t:t+""}function Sz(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function tO(e){return e&&e.map((t,n)=>qe.createElement(t.tag,of({key:n},t.attr),tO(t.child)))}function wz(e){return t=>qe.createElement(Ez,sf({attr:of({},e.attr)},t),tO(e.child))}function Ez(e){var t=n=>{var{attr:r,size:s,title:i}=e,o=vz(e,_z),a=s||n.size||"1em",c;return n.className&&(c=n.className),e.className&&(c=(c?c+" ":"")+e.className),qe.createElement("svg",sf({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},n.attr,r,o,{className:c,style:of(of({color:e.color||n.color},n.style),e.style),height:a,width:a,xmlns:"http://www.w3.org/2000/svg"}),i&&qe.createElement("title",null,i),e.children)};return _4!==void 0?qe.createElement(_4.Consumer,null,n=>t(n)):t(eO)}function xz(e){return wz({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"12",y1:"2",x2:"12",y2:"6"},child:[]},{tag:"line",attr:{x1:"12",y1:"18",x2:"12",y2:"22"},child:[]},{tag:"line",attr:{x1:"4.93",y1:"4.93",x2:"7.76",y2:"7.76"},child:[]},{tag:"line",attr:{x1:"16.24",y1:"16.24",x2:"19.07",y2:"19.07"},child:[]},{tag:"line",attr:{x1:"2",y1:"12",x2:"6",y2:"12"},child:[]},{tag:"line",attr:{x1:"18",y1:"12",x2:"22",y2:"12"},child:[]},{tag:"line",attr:{x1:"4.93",y1:"19.07",x2:"7.76",y2:"16.24"},child:[]},{tag:"line",attr:{x1:"16.24",y1:"7.76",x2:"19.07",y2:"4.93"},child:[]}]})(e)}const Tz=Fi(xz)`animate-spin text-center`;function El({className:e}){return p.jsx(Tz,{className:e})}function r_e({className:e}){return p.jsx("div",{className:"flex h-full w-full items-center justify-center",children:p.jsx(El,{className:e})})}function Ct({children:e,onClick:t,className:n,contentWrapperClassName:r,color:s="primary",label:i,disabled:o=!1,visuallyDisabled:a=!1,loading:c=!1,size:l="medium",fullWidth:u=!1,contentsFullWidth:d=!1,icon:f,style:h,...g}){const _=a||o||c,v=c||o,y=ne(_&&"opacity-50",v&&"cursor-not-allowed","btn relative",s==="primary"&&"btn-primary",s==="primary-inverse"&&"btn-primary-inverse",s==="green"&&"btn-green",s==="purple"&&"btn-purple",s==="secondary"&&"btn-secondary",s==="danger"&&"btn-danger",s==="danger-outline"&&"btn-danger-outline",s==="blue"&&"btn-blue",s==="ghost"&&"btn-ghost",l==="small"&&"btn-small",l==="large"&&"btn-large",u&&"w-full",n),C=f?p.jsxs("div",{className:ne("flex w-full","items-center justify-center",r,{"gap-1.5":l==="medium"||l==="large","gap-1":l==="small"}),children:[c?p.jsx(El,{className:ne(e?"-ms-0.5":"-mx-1",l==="small"&&"icon-sm",(l==="medium"||l==="large")&&"icon")}):p.jsx(f,{"aria-label":"",className:ne(e?"-ms-0.5":"-mx-1",l==="small"&&"icon-sm",(l==="medium"||l==="large")&&"icon")}),e]}):p.jsxs("div",{className:ne("flex items-center justify-center",r,d&&"w-full"),children:[e,c&&p.jsx(El,{className:ne(l==="small"&&"icon-sm ms-1",(l==="medium"||l==="large")&&"icon ms-1.5")})]});switch(g.as){case"link":case"a":{const{openNewTab:E,...b}=g;return p.jsx(Vf,{...b,"aria-label":i,to:g.to??"/",target:E===!0?"_blank":"_self",onClick:t,className:y,style:h,children:C})}default:return p.jsx("button",{className:y,ref:g.ref,"aria-label":i,onClick:t,disabled:v,...g,style:h,children:C})}}Ct.displayName="Button";const nO=e=>m.createElement("svg",{width:20,height:20,viewBox:"0 0 20 20",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",...e},m.createElement("path",{d:"M14.2548 4.75488C14.5282 4.48152 14.9717 4.48152 15.2451 4.75488C15.5184 5.02825 15.5184 5.47175 15.2451 5.74512L10.9902 10L15.2451 14.2549L15.3349 14.3652C15.514 14.6369 15.4841 15.006 15.2451 15.2451C15.006 15.4842 14.6368 15.5141 14.3652 15.335L14.2548 15.2451L9.99995 10.9902L5.74506 15.2451C5.4717 15.5185 5.0282 15.5185 4.75483 15.2451C4.48146 14.9718 4.48146 14.5282 4.75483 14.2549L9.00971 10L4.75483 5.74512L4.66499 5.63477C4.48589 5.3631 4.51575 4.99396 4.75483 4.75488C4.99391 4.51581 5.36305 4.48594 5.63471 4.66504L5.74506 4.75488L9.99995 9.00977L14.2548 4.75488Z"}));function y4(e,t){if(typeof e=="function")return e(t);e!=null&&(e.current=t)}function rO(...e){return t=>{let n=!1;const r=e.map(s=>{const i=y4(s,t);return!n&&typeof i=="function"&&(n=!0),i});if(n)return()=>{for(let s=0;s<r.length;s++){const i=r[s];typeof i=="function"?i():y4(e[s],null)}}}}function s_e(...e){return m.useCallback(rO(...e),e)}function Oz(e){const t=kz(e),n=m.forwardRef((r,s)=>{const{children:i,...o}=r,a=m.Children.toArray(i),c=a.find(Mz);if(c){const l=c.props.children,u=a.map(d=>d===c?m.Children.count(l)>1?m.Children.only(null):m.isValidElement(l)?l.props.children:null:d);return p.jsx(t,{...o,ref:s,children:m.isValidElement(l)?m.cloneElement(l,void 0,u):null})}return p.jsx(t,{...o,ref:s,children:i})});return n.displayName=`${e}.Slot`,n}var sO=Oz("Slot");function kz(e){const t=m.forwardRef((n,r)=>{const{children:s,...i}=n;if(m.isValidElement(s)){const o=Nz(s),a=Iz(i,s.props);return s.type!==m.Fragment&&(a.ref=r?rO(r,o):o),m.cloneElement(s,a)}return m.Children.count(s)>1?m.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}var Az=Symbol("radix.slottable");function Mz(e){return m.isValidElement(e)&&typeof e.type=="function"&&"__radixId"in e.type&&e.type.__radixId===Az}function Iz(e,t){const n={...t};for(const r in t){const s=e[r],i=t[r];/^on[A-Z]/.test(r)?s&&i?n[r]=(...a)=>{const c=i(...a);return s(...a),c}:s&&(n[r]=s):r==="style"?n[r]={...s,...i}:r==="className"&&(n[r]=[s,i].filter(Boolean).join(" "))}return{...e,...n}}function Nz(e){let t=Object.getOwnPropertyDescriptor(e.props,"ref")?.get,n=t&&"isReactWarning"in t&&t.isReactWarning;return n?e.ref:(t=Object.getOwnPropertyDescriptor(e,"ref")?.get,n=t&&"isReactWarning"in t&&t.isReactWarning,n?e.props.ref:e.props.ref||e.ref)}function Rz(e,t=globalThis?.document){const n=lr(e);m.useEffect(()=>{const r=s=>{s.key==="Escape"&&n(s)};return t.addEventListener("keydown",r,{capture:!0}),()=>t.removeEventListener("keydown",r,{capture:!0})},[n,t])}var Pz="DismissableLayer",av="dismissableLayer.update",Dz="dismissableLayer.pointerDownOutside",Lz="dismissableLayer.focusOutside",C4,iO=m.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),ru=m.forwardRef((e,t)=>{const{disableOutsidePointerEvents:n=!1,onEscapeKeyDown:r,onPointerDownOutside:s,onFocusOutside:i,onInteractOutside:o,onDismiss:a,...c}=e,l=m.useContext(iO),[u,d]=m.useState(null),f=u?.ownerDocument??globalThis?.document,[,h]=m.useState({}),g=Mt(t,x=>d(x)),_=Array.from(l.layers),[v]=[...l.layersWithOutsidePointerEventsDisabled].slice(-1),y=_.indexOf(v),C=u?_.indexOf(u):-1,E=l.layersWithOutsidePointerEventsDisabled.size>0,b=C>=y,S=jz(x=>{const T=x.target,O=[...l.branches].some(A=>A.contains(T));!b||O||(s?.(x),o?.(x),x.defaultPrevented||a?.())},f),w=Uz(x=>{const T=x.target;[...l.branches].some(A=>A.contains(T))||(i?.(x),o?.(x),x.defaultPrevented||a?.())},f);return Rz(x=>{C===l.layers.size-1&&(r?.(x),!x.defaultPrevented&&a&&(x.preventDefault(),a()))},f),m.useEffect(()=>{if(u)return n&&(l.layersWithOutsidePointerEventsDisabled.size===0&&(C4=f.body.style.pointerEvents,f.body.style.pointerEvents="none"),l.layersWithOutsidePointerEventsDisabled.add(u)),l.layers.add(u),b4(),()=>{n&&l.layersWithOutsidePointerEventsDisabled.size===1&&(f.body.style.pointerEvents=C4)}},[u,f,n,l]),m.useEffect(()=>()=>{u&&(l.layers.delete(u),l.layersWithOutsidePointerEventsDisabled.delete(u),b4())},[u,l]),m.useEffect(()=>{const x=()=>h({});return document.addEventListener(av,x),()=>document.removeEventListener(av,x)},[]),p.jsx(st.div,{...c,ref:g,style:{pointerEvents:E?b?"auto":"none":void 0,...e.style},onFocusCapture:Ce(e.onFocusCapture,w.onFocusCapture),onBlurCapture:Ce(e.onBlurCapture,w.onBlurCapture),onPointerDownCapture:Ce(e.onPointerDownCapture,S.onPointerDownCapture)})});ru.displayName=Pz;var Fz="DismissableLayerBranch",oO=m.forwardRef((e,t)=>{const n=m.useContext(iO),r=m.useRef(null),s=Mt(t,r);return m.useEffect(()=>{const i=r.current;if(i)return n.branches.add(i),()=>{n.branches.delete(i)}},[n.branches]),p.jsx(st.div,{...e,ref:s})});oO.displayName=Fz;function jz(e,t=globalThis?.document){const n=lr(e),r=m.useRef(!1),s=m.useRef(()=>{});return m.useEffect(()=>{const i=a=>{if(a.target&&!r.current){let c=function(){aO(Dz,n,l,{discrete:!0})};const l={originalEvent:a};a.pointerType==="touch"?(t.removeEventListener("click",s.current),s.current=c,t.addEventListener("click",s.current,{once:!0})):c()}else t.removeEventListener("click",s.current);r.current=!1},o=window.setTimeout(()=>{t.addEventListener("pointerdown",i)},0);return()=>{window.clearTimeout(o),t.removeEventListener("pointerdown",i),t.removeEventListener("click",s.current)}},[t,n]),{onPointerDownCapture:()=>r.current=!0}}function Uz(e,t=globalThis?.document){const n=lr(e),r=m.useRef(!1);return m.useEffect(()=>{const s=i=>{i.target&&!r.current&&aO(Lz,n,{originalEvent:i},{discrete:!1})};return t.addEventListener("focusin",s),()=>t.removeEventListener("focusin",s)},[t,n]),{onFocusCapture:()=>r.current=!0,onBlurCapture:()=>r.current=!1}}function b4(){const e=new CustomEvent(av);document.dispatchEvent(e)}function aO(e,t,n,{discrete:r}){const s=n.originalEvent.target,i=new CustomEvent(e,{bubbles:!1,cancelable:!0,detail:n});t&&s.addEventListener(e,t,{once:!0}),r?ET(s,i):s.dispatchEvent(i)}var i_e=ru,o_e=oO;const Bz=["top","right","bottom","left"],wi=Math.min,Fn=Math.max,af=Math.round,Bu=Math.floor,Ei=e=>({x:e,y:e}),qz={left:"right",right:"left",bottom:"top",top:"bottom"},Gz={start:"end",end:"start"};function cv(e,t,n){return Fn(e,wi(t,n))}function Us(e,t){return typeof e=="function"?e(t):e}function Bs(e){return e.split("-")[0]}function pc(e){return e.split("-")[1]}function j2(e){return e==="x"?"y":"x"}function U2(e){return e==="y"?"height":"width"}function mc(e){return["top","bottom"].includes(Bs(e))?"y":"x"}function B2(e){return j2(mc(e))}function Hz(e,t,n){n===void 0&&(n=!1);const r=pc(e),s=B2(e),i=U2(s);let o=s==="x"?r===(n?"end":"start")?"right":"left":r==="start"?"bottom":"top";return t.reference[i]>t.floating[i]&&(o=cf(o)),[o,cf(o)]}function Vz(e){const t=cf(e);return[lv(e),t,lv(t)]}function lv(e){return e.replace(/start|end/g,t=>Gz[t])}function zz(e,t,n){const r=["left","right"],s=["right","left"],i=["top","bottom"],o=["bottom","top"];switch(e){case"top":case"bottom":return n?t?s:r:t?r:s;case"left":case"right":return t?i:o;default:return[]}}function $z(e,t,n,r){const s=pc(e);let i=zz(Bs(e),n==="start",r);return s&&(i=i.map(o=>o+"-"+s),t&&(i=i.concat(i.map(lv)))),i}function cf(e){return e.replace(/left|right|bottom|top/g,t=>qz[t])}function Wz(e){return{top:0,right:0,bottom:0,left:0,...e}}function cO(e){return typeof e!="number"?Wz(e):{top:e,right:e,bottom:e,left:e}}function lf(e){const{x:t,y:n,width:r,height:s}=e;return{width:r,height:s,top:n,left:t,right:t+r,bottom:n+s,x:t,y:n}}function S4(e,t,n){let{reference:r,floating:s}=e;const i=mc(t),o=B2(t),a=U2(o),c=Bs(t),l=i==="y",u=r.x+r.width/2-s.width/2,d=r.y+r.height/2-s.height/2,f=r[a]/2-s[a]/2;let h;switch(c){case"top":h={x:u,y:r.y-s.height};break;case"bottom":h={x:u,y:r.y+r.height};break;case"right":h={x:r.x+r.width,y:d};break;case"left":h={x:r.x-s.width,y:d};break;default:h={x:r.x,y:r.y}}switch(pc(t)){case"start":h[o]-=f*(n&&l?-1:1);break;case"end":h[o]+=f*(n&&l?-1:1);break}return h}const Kz=async(e,t,n)=>{const{placement:r="bottom",strategy:s="absolute",middleware:i=[],platform:o}=n,a=i.filter(Boolean),c=await(o.isRTL==null?void 0:o.isRTL(t));let l=await o.getElementRects({reference:e,floating:t,strategy:s}),{x:u,y:d}=S4(l,r,c),f=r,h={},g=0;for(let _=0;_<a.length;_++){const{name:v,fn:y}=a[_],{x:C,y:E,data:b,reset:S}=await y({x:u,y:d,initialPlacement:r,placement:f,strategy:s,middlewareData:h,rects:l,platform:o,elements:{reference:e,floating:t}});u=C??u,d=E??d,h={...h,[v]:{...h[v],...b}},S&&g<=50&&(g++,typeof S=="object"&&(S.placement&&(f=S.placement),S.rects&&(l=S.rects===!0?await o.getElementRects({reference:e,floating:t,strategy:s}):S.rects),{x:u,y:d}=S4(l,f,c)),_=-1)}return{x:u,y:d,placement:f,strategy:s,middlewareData:h}};async function xl(e,t){var n;t===void 0&&(t={});const{x:r,y:s,platform:i,rects:o,elements:a,strategy:c}=e,{boundary:l="clippingAncestors",rootBoundary:u="viewport",elementContext:d="floating",altBoundary:f=!1,padding:h=0}=Us(t,e),g=cO(h),v=a[f?d==="floating"?"reference":"floating":d],y=lf(await i.getClippingRect({element:(n=await(i.isElement==null?void 0:i.isElement(v)))==null||n?v:v.contextElement||await(i.getDocumentElement==null?void 0:i.getDocumentElement(a.floating)),boundary:l,rootBoundary:u,strategy:c})),C=d==="floating"?{...o.floating,x:r,y:s}:o.reference,E=await(i.getOffsetParent==null?void 0:i.getOffsetParent(a.floating)),b=await(i.isElement==null?void 0:i.isElement(E))?await(i.getScale==null?void 0:i.getScale(E))||{x:1,y:1}:{x:1,y:1},S=lf(i.convertOffsetParentRelativeRectToViewportRelativeRect?await i.convertOffsetParentRelativeRectToViewportRelativeRect({elements:a,rect:C,offsetParent:E,strategy:c}):C);return{top:(y.top-S.top+g.top)/b.y,bottom:(S.bottom-y.bottom+g.bottom)/b.y,left:(y.left-S.left+g.left)/b.x,right:(S.right-y.right+g.right)/b.x}}const Yz=e=>({name:"arrow",options:e,async fn(t){const{x:n,y:r,placement:s,rects:i,platform:o,elements:a,middlewareData:c}=t,{element:l,padding:u=0}=Us(e,t)||{};if(l==null)return{};const d=cO(u),f={x:n,y:r},h=B2(s),g=U2(h),_=await o.getDimensions(l),v=h==="y",y=v?"top":"left",C=v?"bottom":"right",E=v?"clientHeight":"clientWidth",b=i.reference[g]+i.reference[h]-f[h]-i.floating[g],S=f[h]-i.reference[h],w=await(o.getOffsetParent==null?void 0:o.getOffsetParent(l));let x=w?w[E]:0;(!x||!await(o.isElement==null?void 0:o.isElement(w)))&&(x=a.floating[E]||i.floating[g]);const T=b/2-S/2,O=x/2-_[g]/2-1,A=wi(d[y],O),k=wi(d[C],O),I=A,N=x-_[g]-k,j=x/2-_[g]/2+T,q=cv(I,j,N),D=!c.arrow&&pc(s)!=null&&j!==q&&i.reference[g]/2-(j<I?A:k)-_[g]/2<0,U=D?j<I?j-I:j-N:0;return{[h]:f[h]+U,data:{[h]:q,centerOffset:j-q-U,...D&&{alignmentOffset:U}},reset:D}}}),Zz=function(e){return e===void 0&&(e={}),{name:"flip",options:e,async fn(t){var n,r;const{placement:s,middlewareData:i,rects:o,initialPlacement:a,platform:c,elements:l}=t,{mainAxis:u=!0,crossAxis:d=!0,fallbackPlacements:f,fallbackStrategy:h="bestFit",fallbackAxisSideDirection:g="none",flipAlignment:_=!0,...v}=Us(e,t);if((n=i.arrow)!=null&&n.alignmentOffset)return{};const y=Bs(s),C=Bs(a)===a,E=await(c.isRTL==null?void 0:c.isRTL(l.floating)),b=f||(C||!_?[cf(a)]:Vz(a));!f&&g!=="none"&&b.push(...$z(a,_,g,E));const S=[a,...b],w=await xl(t,v),x=[];let T=((r=i.flip)==null?void 0:r.overflows)||[];if(u&&x.push(w[y]),d){const I=Hz(s,o,E);x.push(w[I[0]],w[I[1]])}if(T=[...T,{placement:s,overflows:x}],!x.every(I=>I<=0)){var O,A;const I=(((O=i.flip)==null?void 0:O.index)||0)+1,N=S[I];if(N)return{data:{index:I,overflows:T},reset:{placement:N}};let j=(A=T.filter(q=>q.overflows[0]<=0).sort((q,D)=>q.overflows[1]-D.overflows[1])[0])==null?void 0:A.placement;if(!j)switch(h){case"bestFit":{var k;const q=(k=T.map(D=>[D.placement,D.overflows.filter(U=>U>0).reduce((U,G)=>U+G,0)]).sort((D,U)=>D[1]-U[1])[0])==null?void 0:k[0];q&&(j=q);break}case"initialPlacement":j=a;break}if(s!==j)return{reset:{placement:j}}}return{}}}};function w4(e,t){return{top:e.top-t.height,right:e.right-t.width,bottom:e.bottom-t.height,left:e.left-t.width}}function E4(e){return Bz.some(t=>e[t]>=0)}const Jz=function(e){return e===void 0&&(e={}),{name:"hide",options:e,async fn(t){const{rects:n}=t,{strategy:r="referenceHidden",...s}=Us(e,t);switch(r){case"referenceHidden":{const i=await xl(t,{...s,elementContext:"reference"}),o=w4(i,n.reference);return{data:{referenceHiddenOffsets:o,referenceHidden:E4(o)}}}case"escaped":{const i=await xl(t,{...s,altBoundary:!0}),o=w4(i,n.floating);return{data:{escapedOffsets:o,escaped:E4(o)}}}default:return{}}}}};async function Qz(e,t){const{placement:n,platform:r,elements:s}=e,i=await(r.isRTL==null?void 0:r.isRTL(s.floating)),o=Bs(n),a=pc(n),c=mc(n)==="y",l=["left","top"].includes(o)?-1:1,u=i&&c?-1:1,d=Us(t,e);let{mainAxis:f,crossAxis:h,alignmentAxis:g}=typeof d=="number"?{mainAxis:d,crossAxis:0,alignmentAxis:null}:{mainAxis:0,crossAxis:0,alignmentAxis:null,...d};return a&&typeof g=="number"&&(h=a==="end"?g*-1:g),c?{x:h*u,y:f*l}:{x:f*l,y:h*u}}const Xz=function(e){return e===void 0&&(e=0),{name:"offset",options:e,async fn(t){var n,r;const{x:s,y:i,placement:o,middlewareData:a}=t,c=await Qz(t,e);return o===((n=a.offset)==null?void 0:n.placement)&&(r=a.arrow)!=null&&r.alignmentOffset?{}:{x:s+c.x,y:i+c.y,data:{...c,placement:o}}}}},e$=function(e){return e===void 0&&(e={}),{name:"shift",options:e,async fn(t){const{x:n,y:r,placement:s}=t,{mainAxis:i=!0,crossAxis:o=!1,limiter:a={fn:v=>{let{x:y,y:C}=v;return{x:y,y:C}}},...c}=Us(e,t),l={x:n,y:r},u=await xl(t,c),d=mc(Bs(s)),f=j2(d);let h=l[f],g=l[d];if(i){const v=f==="y"?"top":"left",y=f==="y"?"bottom":"right",C=h+u[v],E=h-u[y];h=cv(C,h,E)}if(o){const v=d==="y"?"top":"left",y=d==="y"?"bottom":"right",C=g+u[v],E=g-u[y];g=cv(C,g,E)}const _=a.fn({...t,[f]:h,[d]:g});return{..._,data:{x:_.x-n,y:_.y-r}}}}},t$=function(e){return e===void 0&&(e={}),{options:e,fn(t){const{x:n,y:r,placement:s,rects:i,middlewareData:o}=t,{offset:a=0,mainAxis:c=!0,crossAxis:l=!0}=Us(e,t),u={x:n,y:r},d=mc(s),f=j2(d);let h=u[f],g=u[d];const _=Us(a,t),v=typeof _=="number"?{mainAxis:_,crossAxis:0}:{mainAxis:0,crossAxis:0,..._};if(c){const E=f==="y"?"height":"width",b=i.reference[f]-i.floating[E]+v.mainAxis,S=i.reference[f]+i.reference[E]-v.mainAxis;h<b?h=b:h>S&&(h=S)}if(l){var y,C;const E=f==="y"?"width":"height",b=["top","left"].includes(Bs(s)),S=i.reference[d]-i.floating[E]+(b&&((y=o.offset)==null?void 0:y[d])||0)+(b?0:v.crossAxis),w=i.reference[d]+i.reference[E]+(b?0:((C=o.offset)==null?void 0:C[d])||0)-(b?v.crossAxis:0);g<S?g=S:g>w&&(g=w)}return{[f]:h,[d]:g}}}},n$=function(e){return e===void 0&&(e={}),{name:"size",options:e,async fn(t){const{placement:n,rects:r,platform:s,elements:i}=t,{apply:o=()=>{},...a}=Us(e,t),c=await xl(t,a),l=Bs(n),u=pc(n),d=mc(n)==="y",{width:f,height:h}=r.floating;let g,_;l==="top"||l==="bottom"?(g=l,_=u===(await(s.isRTL==null?void 0:s.isRTL(i.floating))?"start":"end")?"left":"right"):(_=l,g=u==="end"?"top":"bottom");const v=h-c[g],y=f-c[_],C=!t.middlewareData.shift;let E=v,b=y;if(d){const w=f-c.left-c.right;b=u||C?wi(y,w):w}else{const w=h-c.top-c.bottom;E=u||C?wi(v,w):w}if(C&&!u){const w=Fn(c.left,0),x=Fn(c.right,0),T=Fn(c.top,0),O=Fn(c.bottom,0);d?b=f-2*(w!==0||x!==0?w+x:Fn(c.left,c.right)):E=h-2*(T!==0||O!==0?T+O:Fn(c.top,c.bottom))}await o({...t,availableWidth:b,availableHeight:E});const S=await s.getDimensions(i.floating);return f!==S.width||h!==S.height?{reset:{rects:!0}}:{}}}};function Gh(){return typeof window<"u"}function gc(e){return lO(e)?(e.nodeName||"").toLowerCase():"#document"}function Gn(e){var t;return(e==null||(t=e.ownerDocument)==null?void 0:t.defaultView)||window}function gs(e){var t;return(t=(lO(e)?e.ownerDocument:e.document)||window.document)==null?void 0:t.documentElement}function lO(e){return Gh()?e instanceof Node||e instanceof Gn(e).Node:!1}function Pr(e){return Gh()?e instanceof Element||e instanceof Gn(e).Element:!1}function ds(e){return Gh()?e instanceof HTMLElement||e instanceof Gn(e).HTMLElement:!1}function x4(e){return!Gh()||typeof ShadowRoot>"u"?!1:e instanceof ShadowRoot||e instanceof Gn(e).ShadowRoot}function su(e){const{overflow:t,overflowX:n,overflowY:r,display:s}=Dr(e);return/auto|scroll|overlay|hidden|clip/.test(t+r+n)&&!["inline","contents"].includes(s)}function r$(e){return["table","td","th"].includes(gc(e))}function Hh(e){return[":popover-open",":modal"].some(t=>{try{return e.matches(t)}catch{return!1}})}function q2(e){const t=G2(),n=Pr(e)?Dr(e):e;return n.transform!=="none"||n.perspective!=="none"||(n.containerType?n.containerType!=="normal":!1)||!t&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!t&&(n.filter?n.filter!=="none":!1)||["transform","perspective","filter"].some(r=>(n.willChange||"").includes(r))||["paint","layout","strict","content"].some(r=>(n.contain||"").includes(r))}function s$(e){let t=xi(e);for(;ds(t)&&!Ja(t);){if(q2(t))return t;if(Hh(t))return null;t=xi(t)}return null}function G2(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function Ja(e){return["html","body","#document"].includes(gc(e))}function Dr(e){return Gn(e).getComputedStyle(e)}function Vh(e){return Pr(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.scrollX,scrollTop:e.scrollY}}function xi(e){if(gc(e)==="html")return e;const t=e.assignedSlot||e.parentNode||x4(e)&&e.host||gs(e);return x4(t)?t.host:t}function uO(e){const t=xi(e);return Ja(t)?e.ownerDocument?e.ownerDocument.body:e.body:ds(t)&&su(t)?t:uO(t)}function Tl(e,t,n){var r;t===void 0&&(t=[]),n===void 0&&(n=!0);const s=uO(e),i=s===((r=e.ownerDocument)==null?void 0:r.body),o=Gn(s);if(i){const a=uv(o);return t.concat(o,o.visualViewport||[],su(s)?s:[],a&&n?Tl(a):[])}return t.concat(s,Tl(s,[],n))}function uv(e){return e.parent&&Object.getPrototypeOf(e.parent)?e.frameElement:null}function dO(e){const t=Dr(e);let n=parseFloat(t.width)||0,r=parseFloat(t.height)||0;const s=ds(e),i=s?e.offsetWidth:n,o=s?e.offsetHeight:r,a=af(n)!==i||af(r)!==o;return a&&(n=i,r=o),{width:n,height:r,$:a}}function H2(e){return Pr(e)?e:e.contextElement}function ka(e){const t=H2(e);if(!ds(t))return Ei(1);const n=t.getBoundingClientRect(),{width:r,height:s,$:i}=dO(t);let o=(i?af(n.width):n.width)/r,a=(i?af(n.height):n.height)/s;return(!o||!Number.isFinite(o))&&(o=1),(!a||!Number.isFinite(a))&&(a=1),{x:o,y:a}}const i$=Ei(0);function fO(e){const t=Gn(e);return!G2()||!t.visualViewport?i$:{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}}function o$(e,t,n){return t===void 0&&(t=!1),!n||t&&n!==Gn(e)?!1:t}function wo(e,t,n,r){t===void 0&&(t=!1),n===void 0&&(n=!1);const s=e.getBoundingClientRect(),i=H2(e);let o=Ei(1);t&&(r?Pr(r)&&(o=ka(r)):o=ka(e));const a=o$(i,n,r)?fO(i):Ei(0);let c=(s.left+a.x)/o.x,l=(s.top+a.y)/o.y,u=s.width/o.x,d=s.height/o.y;if(i){const f=Gn(i),h=r&&Pr(r)?Gn(r):r;let g=f,_=uv(g);for(;_&&r&&h!==g;){const v=ka(_),y=_.getBoundingClientRect(),C=Dr(_),E=y.left+(_.clientLeft+parseFloat(C.paddingLeft))*v.x,b=y.top+(_.clientTop+parseFloat(C.paddingTop))*v.y;c*=v.x,l*=v.y,u*=v.x,d*=v.y,c+=E,l+=b,g=Gn(_),_=uv(g)}}return lf({width:u,height:d,x:c,y:l})}function a$(e){let{elements:t,rect:n,offsetParent:r,strategy:s}=e;const i=s==="fixed",o=gs(r),a=t?Hh(t.floating):!1;if(r===o||a&&i)return n;let c={scrollLeft:0,scrollTop:0},l=Ei(1);const u=Ei(0),d=ds(r);if((d||!d&&!i)&&((gc(r)!=="body"||su(o))&&(c=Vh(r)),ds(r))){const f=wo(r);l=ka(r),u.x=f.x+r.clientLeft,u.y=f.y+r.clientTop}return{width:n.width*l.x,height:n.height*l.y,x:n.x*l.x-c.scrollLeft*l.x+u.x,y:n.y*l.y-c.scrollTop*l.y+u.y}}function c$(e){return Array.from(e.getClientRects())}function dv(e,t){const n=Vh(e).scrollLeft;return t?t.left+n:wo(gs(e)).left+n}function l$(e){const t=gs(e),n=Vh(e),r=e.ownerDocument.body,s=Fn(t.scrollWidth,t.clientWidth,r.scrollWidth,r.clientWidth),i=Fn(t.scrollHeight,t.clientHeight,r.scrollHeight,r.clientHeight);let o=-n.scrollLeft+dv(e);const a=-n.scrollTop;return Dr(r).direction==="rtl"&&(o+=Fn(t.clientWidth,r.clientWidth)-s),{width:s,height:i,x:o,y:a}}function u$(e,t){const n=Gn(e),r=gs(e),s=n.visualViewport;let i=r.clientWidth,o=r.clientHeight,a=0,c=0;if(s){i=s.width,o=s.height;const l=G2();(!l||l&&t==="fixed")&&(a=s.offsetLeft,c=s.offsetTop)}return{width:i,height:o,x:a,y:c}}function d$(e,t){const n=wo(e,!0,t==="fixed"),r=n.top+e.clientTop,s=n.left+e.clientLeft,i=ds(e)?ka(e):Ei(1),o=e.clientWidth*i.x,a=e.clientHeight*i.y,c=s*i.x,l=r*i.y;return{width:o,height:a,x:c,y:l}}function T4(e,t,n){let r;if(t==="viewport")r=u$(e,n);else if(t==="document")r=l$(gs(e));else if(Pr(t))r=d$(t,n);else{const s=fO(e);r={...t,x:t.x-s.x,y:t.y-s.y}}return lf(r)}function hO(e,t){const n=xi(e);return n===t||!Pr(n)||Ja(n)?!1:Dr(n).position==="fixed"||hO(n,t)}function f$(e,t){const n=t.get(e);if(n)return n;let r=Tl(e,[],!1).filter(a=>Pr(a)&&gc(a)!=="body"),s=null;const i=Dr(e).position==="fixed";let o=i?xi(e):e;for(;Pr(o)&&!Ja(o);){const a=Dr(o),c=q2(o);!c&&a.position==="fixed"&&(s=null),(i?!c&&!s:!c&&a.position==="static"&&!!s&&["absolute","fixed"].includes(s.position)||su(o)&&!c&&hO(e,o))?r=r.filter(u=>u!==o):s=a,o=xi(o)}return t.set(e,r),r}function h$(e){let{element:t,boundary:n,rootBoundary:r,strategy:s}=e;const o=[...n==="clippingAncestors"?Hh(t)?[]:f$(t,this._c):[].concat(n),r],a=o[0],c=o.reduce((l,u)=>{const d=T4(t,u,s);return l.top=Fn(d.top,l.top),l.right=wi(d.right,l.right),l.bottom=wi(d.bottom,l.bottom),l.left=Fn(d.left,l.left),l},T4(t,a,s));return{width:c.right-c.left,height:c.bottom-c.top,x:c.left,y:c.top}}function p$(e){const{width:t,height:n}=dO(e);return{width:t,height:n}}function m$(e,t,n){const r=ds(t),s=gs(t),i=n==="fixed",o=wo(e,!0,i,t);let a={scrollLeft:0,scrollTop:0};const c=Ei(0);if(r||!r&&!i)if((gc(t)!=="body"||su(s))&&(a=Vh(t)),r){const h=wo(t,!0,i,t);c.x=h.x+t.clientLeft,c.y=h.y+t.clientTop}else s&&(c.x=dv(s));let l=0,u=0;if(s&&!r&&!i){const h=s.getBoundingClientRect();u=h.top+a.scrollTop,l=h.left+a.scrollLeft-dv(s,h)}const d=o.left+a.scrollLeft-c.x-l,f=o.top+a.scrollTop-c.y-u;return{x:d,y:f,width:o.width,height:o.height}}function e1(e){return Dr(e).position==="static"}function O4(e,t){if(!ds(e)||Dr(e).position==="fixed")return null;if(t)return t(e);let n=e.offsetParent;return gs(e)===n&&(n=n.ownerDocument.body),n}function pO(e,t){const n=Gn(e);if(Hh(e))return n;if(!ds(e)){let s=xi(e);for(;s&&!Ja(s);){if(Pr(s)&&!e1(s))return s;s=xi(s)}return n}let r=O4(e,t);for(;r&&r$(r)&&e1(r);)r=O4(r,t);return r&&Ja(r)&&e1(r)&&!q2(r)?n:r||s$(e)||n}const g$=async function(e){const t=this.getOffsetParent||pO,n=this.getDimensions,r=await n(e.floating);return{reference:m$(e.reference,await t(e.floating),e.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function _$(e){return Dr(e).direction==="rtl"}const v$={convertOffsetParentRelativeRectToViewportRelativeRect:a$,getDocumentElement:gs,getClippingRect:h$,getOffsetParent:pO,getElementRects:g$,getClientRects:c$,getDimensions:p$,getScale:ka,isElement:Pr,isRTL:_$};function y$(e,t){let n=null,r;const s=gs(e);function i(){var a;clearTimeout(r),(a=n)==null||a.disconnect(),n=null}function o(a,c){a===void 0&&(a=!1),c===void 0&&(c=1),i();const{left:l,top:u,width:d,height:f}=e.getBoundingClientRect();if(a||t(),!d||!f)return;const h=Bu(u),g=Bu(s.clientWidth-(l+d)),_=Bu(s.clientHeight-(u+f)),v=Bu(l),C={rootMargin:-h+"px "+-g+"px "+-_+"px "+-v+"px",threshold:Fn(0,wi(1,c))||1};let E=!0;function b(S){const w=S[0].intersectionRatio;if(w!==c){if(!E)return o();w?o(!1,w):r=setTimeout(()=>{o(!1,1e-7)},1e3)}E=!1}try{n=new IntersectionObserver(b,{...C,root:s.ownerDocument})}catch{n=new IntersectionObserver(b,C)}n.observe(e)}return o(!0),i}function C$(e,t,n,r){r===void 0&&(r={});const{ancestorScroll:s=!0,ancestorResize:i=!0,elementResize:o=typeof ResizeObserver=="function",layoutShift:a=typeof IntersectionObserver=="function",animationFrame:c=!1}=r,l=H2(e),u=s||i?[...l?Tl(l):[],...Tl(t)]:[];u.forEach(y=>{s&&y.addEventListener("scroll",n,{passive:!0}),i&&y.addEventListener("resize",n)});const d=l&&a?y$(l,n):null;let f=-1,h=null;o&&(h=new ResizeObserver(y=>{let[C]=y;C&&C.target===l&&h&&(h.unobserve(t),cancelAnimationFrame(f),f=requestAnimationFrame(()=>{var E;(E=h)==null||E.observe(t)})),n()}),l&&!c&&h.observe(l),h.observe(t));let g,_=c?wo(e):null;c&&v();function v(){const y=wo(e);_&&(y.x!==_.x||y.y!==_.y||y.width!==_.width||y.height!==_.height)&&n(),_=y,g=requestAnimationFrame(v)}return n(),()=>{var y;u.forEach(C=>{s&&C.removeEventListener("scroll",n),i&&C.removeEventListener("resize",n)}),d?.(),(y=h)==null||y.disconnect(),h=null,c&&cancelAnimationFrame(g)}}const b$=Xz,S$=e$,w$=Zz,E$=n$,x$=Jz,k4=Yz,T$=t$,O$=(e,t,n)=>{const r=new Map,s={platform:v$,...n},i={...s.platform,_c:r};return Kz(e,t,{...s,platform:i})};var vd=typeof document<"u"?m.useLayoutEffect:m.useEffect;function uf(e,t){if(e===t)return!0;if(typeof e!=typeof t)return!1;if(typeof e=="function"&&e.toString()===t.toString())return!0;let n,r,s;if(e&&t&&typeof e=="object"){if(Array.isArray(e)){if(n=e.length,n!==t.length)return!1;for(r=n;r--!==0;)if(!uf(e[r],t[r]))return!1;return!0}if(s=Object.keys(e),n=s.length,n!==Object.keys(t).length)return!1;for(r=n;r--!==0;)if(!{}.hasOwnProperty.call(t,s[r]))return!1;for(r=n;r--!==0;){const i=s[r];if(!(i==="_owner"&&e.$$typeof)&&!uf(e[i],t[i]))return!1}return!0}return e!==e&&t!==t}function mO(e){return typeof window>"u"?1:(e.ownerDocument.defaultView||window).devicePixelRatio||1}function A4(e,t){const n=mO(e);return Math.round(t*n)/n}function t1(e){const t=m.useRef(e);return vd(()=>{t.current=e}),t}function k$(e){e===void 0&&(e={});const{placement:t="bottom",strategy:n="absolute",middleware:r=[],platform:s,elements:{reference:i,floating:o}={},transform:a=!0,whileElementsMounted:c,open:l}=e,[u,d]=m.useState({x:0,y:0,strategy:n,placement:t,middlewareData:{},isPositioned:!1}),[f,h]=m.useState(r);uf(f,r)||h(r);const[g,_]=m.useState(null),[v,y]=m.useState(null),C=m.useCallback(G=>{G!==w.current&&(w.current=G,_(G))},[]),E=m.useCallback(G=>{G!==x.current&&(x.current=G,y(G))},[]),b=i||g,S=o||v,w=m.useRef(null),x=m.useRef(null),T=m.useRef(u),O=c!=null,A=t1(c),k=t1(s),I=t1(l),N=m.useCallback(()=>{if(!w.current||!x.current)return;const G={placement:t,strategy:n,middleware:f};k.current&&(G.platform=k.current),O$(w.current,x.current,G).then(F=>{const le={...F,isPositioned:I.current!==!1};j.current&&!uf(T.current,le)&&(T.current=le,dy.flushSync(()=>{d(le)}))})},[f,t,n,k,I]);vd(()=>{l===!1&&T.current.isPositioned&&(T.current.isPositioned=!1,d(G=>({...G,isPositioned:!1})))},[l]);const j=m.useRef(!1);vd(()=>(j.current=!0,()=>{j.current=!1}),[]),vd(()=>{if(b&&(w.current=b),S&&(x.current=S),b&&S){if(A.current)return A.current(b,S,N);N()}},[b,S,N,A,O]);const q=m.useMemo(()=>({reference:w,floating:x,setReference:C,setFloating:E}),[C,E]),D=m.useMemo(()=>({reference:b,floating:S}),[b,S]),U=m.useMemo(()=>{const G={position:n,left:0,top:0};if(!D.floating)return G;const F=A4(D.floating,u.x),le=A4(D.floating,u.y);return a?{...G,transform:"translate("+F+"px, "+le+"px)",...mO(D.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:F,top:le}},[n,a,D.floating,u.x,u.y]);return m.useMemo(()=>({...u,update:N,refs:q,elements:D,floatingStyles:U}),[u,N,q,D,U])}const A$=e=>{function t(n){return{}.hasOwnProperty.call(n,"current")}return{name:"arrow",options:e,fn(n){const{element:r,padding:s}=typeof e=="function"?e(n):e;return r&&t(r)?r.current!=null?k4({element:r.current,padding:s}).fn(n):{}:r?k4({element:r,padding:s}).fn(n):{}}}},M$=(e,t)=>({...b$(e),options:[e,t]}),I$=(e,t)=>({...S$(e),options:[e,t]}),N$=(e,t)=>({...T$(e),options:[e,t]}),R$=(e,t)=>({...w$(e),options:[e,t]}),P$=(e,t)=>({...E$(e),options:[e,t]}),D$=(e,t)=>({...x$(e),options:[e,t]}),L$=(e,t)=>({...A$(e),options:[e,t]});var F$="Arrow",gO=m.forwardRef((e,t)=>{const{children:n,width:r=10,height:s=5,...i}=e;return p.jsx(st.svg,{...i,ref:t,width:r,height:s,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:e.asChild?n:p.jsx("polygon",{points:"0,0 30,0 15,10"})})});gO.displayName=F$;var j$=gO,V2="Popper",[_O,zh]=R2(V2),[U$,vO]=_O(V2),yO=e=>{const{__scopePopper:t,children:n}=e,[r,s]=m.useState(null);return p.jsx(U$,{scope:t,anchor:r,onAnchorChange:s,children:n})};yO.displayName=V2;var CO="PopperAnchor",bO=m.forwardRef((e,t)=>{const{__scopePopper:n,virtualRef:r,...s}=e,i=vO(CO,n),o=m.useRef(null),a=Mt(t,o);return m.useEffect(()=>{i.onAnchorChange(r?.current||o.current)}),r?null:p.jsx(st.div,{...s,ref:a})});bO.displayName=CO;var z2="PopperContent",[B$,q$]=_O(z2),SO=m.forwardRef((e,t)=>{const{__scopePopper:n,side:r="bottom",sideOffset:s=0,align:i="center",alignOffset:o=0,arrowPadding:a=0,avoidCollisions:c=!0,collisionBoundary:l=[],collisionPadding:u=0,sticky:d="partial",hideWhenDetached:f=!1,updatePositionStrategy:h="optimized",onPlaced:g,..._}=e,v=vO(z2,n),[y,C]=m.useState(null),E=Mt(t,L=>C(L)),[b,S]=m.useState(null),w=ST(b),x=w?.width??0,T=w?.height??0,O=r+(i!=="center"?"-"+i:""),A=typeof u=="number"?u:{top:0,right:0,bottom:0,left:0,...u},k=Array.isArray(l)?l:[l],I=k.length>0,N={padding:A,boundary:k.filter(H$),altBoundary:I},{refs:j,floatingStyles:q,placement:D,isPositioned:U,middlewareData:G}=k$({strategy:"fixed",placement:O,whileElementsMounted:(...L)=>C$(...L,{animationFrame:h==="always"}),elements:{reference:v.anchor},middleware:[M$({mainAxis:s+T,alignmentAxis:o}),c&&I$({mainAxis:!0,crossAxis:!1,limiter:d==="partial"?N$():void 0,...N}),c&&R$({...N}),P$({...N,apply:({elements:L,rects:ue,availableWidth:Ie,availableHeight:it})=>{const{width:tt,height:oe}=ue.reference,ye=L.floating.style;ye.setProperty("--radix-popper-available-width",`${Ie}px`),ye.setProperty("--radix-popper-available-height",`${it}px`),ye.setProperty("--radix-popper-anchor-width",`${tt}px`),ye.setProperty("--radix-popper-anchor-height",`${oe}px`)}}),b&&L$({element:b,padding:a}),V$({arrowWidth:x,arrowHeight:T}),f&&D$({strategy:"referenceHidden",...N})]}),[F,le]=xO(D),me=lr(g);So(()=>{U&&me?.()},[U,me]);const ge=G.arrow?.x,ke=G.arrow?.y,Pe=G.arrow?.centerOffset!==0,[ve,he]=m.useState();return So(()=>{y&&he(window.getComputedStyle(y).zIndex)},[y]),p.jsx("div",{ref:j.setFloating,"data-radix-popper-content-wrapper":"",style:{...q,transform:U?q.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:ve,"--radix-popper-transform-origin":[G.transformOrigin?.x,G.transformOrigin?.y].join(" "),...G.hide?.referenceHidden&&{visibility:"hidden",pointerEvents:"none"}},dir:e.dir,children:p.jsx(B$,{scope:n,placedSide:F,onArrowChange:S,arrowX:ge,arrowY:ke,shouldHideArrow:Pe,children:p.jsx(st.div,{"data-side":F,"data-align":le,..._,ref:E,style:{..._.style,animation:U?void 0:"none"}})})})});SO.displayName=z2;var wO="PopperArrow",G$={top:"bottom",right:"left",bottom:"top",left:"right"},EO=m.forwardRef(function(t,n){const{__scopePopper:r,...s}=t,i=q$(wO,r),o=G$[i.placedSide];return p.jsx("span",{ref:i.onArrowChange,style:{position:"absolute",left:i.arrowX,top:i.arrowY,[o]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[i.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[i.placedSide],visibility:i.shouldHideArrow?"hidden":void 0},children:p.jsx(j$,{...s,ref:n,style:{...s.style,display:"block"}})})});EO.displayName=wO;function H$(e){return e!==null}var V$=e=>({name:"transformOrigin",options:e,fn(t){const{placement:n,rects:r,middlewareData:s}=t,o=s.arrow?.centerOffset!==0,a=o?0:e.arrowWidth,c=o?0:e.arrowHeight,[l,u]=xO(n),d={start:"0%",center:"50%",end:"100%"}[u],f=(s.arrow?.x??0)+a/2,h=(s.arrow?.y??0)+c/2;let g="",_="";return l==="bottom"?(g=o?d:`${f}px`,_=`${-c}px`):l==="top"?(g=o?d:`${f}px`,_=`${r.floating.height+c}px`):l==="right"?(g=`${-c}px`,_=o?d:`${h}px`):l==="left"&&(g=`${r.floating.width+c}px`,_=o?d:`${h}px`),{data:{x:g,y:_}}}});function xO(e){const[t,n="center"]=e.split("-");return[t,n]}var $2=yO,TO=bO,OO=SO,kO=EO,z$="Portal",iu=m.forwardRef((e,t)=>{const{container:n,...r}=e,[s,i]=m.useState(!1);So(()=>i(!0),[]);const o=n||s&&globalThis?.document?.body;return o?Lc.createPortal(p.jsx(st.div,{...r,ref:t}),o):null});iu.displayName=z$;var a_e=iu,$$="VisuallyHidden",W2=m.forwardRef((e,t)=>p.jsx(st.span,{...e,ref:t,style:{position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal",...e.style}}));W2.displayName=$$;var W$=W2,[$h,c_e]=hc("Tooltip",[zh]),Wh=zh(),AO="TooltipProvider",K$=700,fv="tooltip.open",[Y$,K2]=$h(AO),MO=e=>{const{__scopeTooltip:t,delayDuration:n=K$,skipDelayDuration:r=300,disableHoverableContent:s=!1,children:i}=e,[o,a]=m.useState(!0),c=m.useRef(!1),l=m.useRef(0);return m.useEffect(()=>{const u=l.current;return()=>window.clearTimeout(u)},[]),p.jsx(Y$,{scope:t,isOpenDelayed:o,delayDuration:n,onOpen:m.useCallback(()=>{window.clearTimeout(l.current),a(!1)},[]),onClose:m.useCallback(()=>{window.clearTimeout(l.current),l.current=window.setTimeout(()=>a(!0),r)},[r]),isPointerInTransitRef:c,onPointerInTransitChange:m.useCallback(u=>{c.current=u},[]),disableHoverableContent:s,children:i})};MO.displayName=AO;var Kh="Tooltip",[Z$,ou]=$h(Kh),IO=e=>{const{__scopeTooltip:t,children:n,open:r,defaultOpen:s=!1,onOpenChange:i,disableHoverableContent:o,delayDuration:a}=e,c=K2(Kh,e.__scopeTooltip),l=Wh(t),[u,d]=m.useState(null),f=ls(),h=m.useRef(0),g=o??c.disableHoverableContent,_=a??c.delayDuration,v=m.useRef(!1),[y=!1,C]=jo({prop:r,defaultProp:s,onChange:x=>{x?(c.onOpen(),document.dispatchEvent(new CustomEvent(fv))):c.onClose(),i?.(x)}}),E=m.useMemo(()=>y?v.current?"delayed-open":"instant-open":"closed",[y]),b=m.useCallback(()=>{window.clearTimeout(h.current),h.current=0,v.current=!1,C(!0)},[C]),S=m.useCallback(()=>{window.clearTimeout(h.current),h.current=0,C(!1)},[C]),w=m.useCallback(()=>{window.clearTimeout(h.current),h.current=window.setTimeout(()=>{v.current=!0,C(!0),h.current=0},_)},[_,C]);return m.useEffect(()=>()=>{h.current&&(window.clearTimeout(h.current),h.current=0)},[]),p.jsx($2,{...l,children:p.jsx(Z$,{scope:t,contentId:f,open:y,stateAttribute:E,trigger:u,onTriggerChange:d,onTriggerEnter:m.useCallback(()=>{c.isOpenDelayed?w():b()},[c.isOpenDelayed,w,b]),onTriggerLeave:m.useCallback(()=>{g?S():(window.clearTimeout(h.current),h.current=0)},[S,g]),onOpen:b,onClose:S,disableHoverableContent:g,children:n})})};IO.displayName=Kh;var hv="TooltipTrigger",NO=m.forwardRef((e,t)=>{const{__scopeTooltip:n,...r}=e,s=ou(hv,n),i=K2(hv,n),o=Wh(n),a=m.useRef(null),c=Mt(t,a,s.onTriggerChange),l=m.useRef(!1),u=m.useRef(!1),d=m.useCallback(()=>l.current=!1,[]);return m.useEffect(()=>()=>document.removeEventListener("pointerup",d),[d]),p.jsx(TO,{asChild:!0,...o,children:p.jsx(st.button,{"aria-describedby":s.open?s.contentId:void 0,"data-state":s.stateAttribute,...r,ref:c,onPointerMove:Ce(e.onPointerMove,f=>{f.pointerType!=="touch"&&!u.current&&!i.isPointerInTransitRef.current&&(s.onTriggerEnter(),u.current=!0)}),onPointerLeave:Ce(e.onPointerLeave,()=>{s.onTriggerLeave(),u.current=!1}),onPointerDown:Ce(e.onPointerDown,()=>{l.current=!0,document.addEventListener("pointerup",d,{once:!0})}),onFocus:Ce(e.onFocus,()=>{l.current||s.onOpen()}),onBlur:Ce(e.onBlur,s.onClose),onClick:Ce(e.onClick,s.onClose)})})});NO.displayName=hv;var Y2="TooltipPortal",[J$,Q$]=$h(Y2,{forceMount:void 0}),RO=e=>{const{__scopeTooltip:t,forceMount:n,children:r,container:s}=e,i=ou(Y2,t);return p.jsx(J$,{scope:t,forceMount:n,children:p.jsx(Hr,{present:n||i.open,children:p.jsx(iu,{asChild:!0,container:s,children:r})})})};RO.displayName=Y2;var Qa="TooltipContent",PO=m.forwardRef((e,t)=>{const n=Q$(Qa,e.__scopeTooltip),{forceMount:r=n.forceMount,side:s="top",...i}=e,o=ou(Qa,e.__scopeTooltip);return p.jsx(Hr,{present:r||o.open,children:o.disableHoverableContent?p.jsx(DO,{side:s,...i,ref:t}):p.jsx(X$,{side:s,...i,ref:t})})}),X$=m.forwardRef((e,t)=>{const n=ou(Qa,e.__scopeTooltip),r=K2(Qa,e.__scopeTooltip),s=m.useRef(null),i=Mt(t,s),[o,a]=m.useState(null),{trigger:c,onClose:l}=n,u=s.current,{onPointerInTransitChange:d}=r,f=m.useCallback(()=>{a(null),d(!1)},[d]),h=m.useCallback((g,_)=>{const v=g.currentTarget,y={x:g.clientX,y:g.clientY},C=nW(y,v.getBoundingClientRect()),E=rW(y,C),b=sW(_.getBoundingClientRect()),S=oW([...E,...b]);a(S),d(!0)},[d]);return m.useEffect(()=>()=>f(),[f]),m.useEffect(()=>{if(c&&u){const g=v=>h(v,u),_=v=>h(v,c);return c.addEventListener("pointerleave",g),u.addEventListener("pointerleave",_),()=>{c.removeEventListener("pointerleave",g),u.removeEventListener("pointerleave",_)}}},[c,u,h,f]),m.useEffect(()=>{if(o){const g=_=>{const v=_.target,y={x:_.clientX,y:_.clientY},C=c?.contains(v)||u?.contains(v),E=!iW(y,o);C?f():E&&(f(),l())};return document.addEventListener("pointermove",g),()=>document.removeEventListener("pointermove",g)}},[c,u,o,l,f]),p.jsx(DO,{...e,ref:i})}),[eW,tW]=$h(Kh,{isInside:!1}),DO=m.forwardRef((e,t)=>{const{__scopeTooltip:n,children:r,"aria-label":s,onEscapeKeyDown:i,onPointerDownOutside:o,...a}=e,c=ou(Qa,n),l=Wh(n),{onClose:u}=c;return m.useEffect(()=>(document.addEventListener(fv,u),()=>document.removeEventListener(fv,u)),[u]),m.useEffect(()=>{if(c.trigger){const d=f=>{f.target?.contains(c.trigger)&&u()};return window.addEventListener("scroll",d,{capture:!0}),()=>window.removeEventListener("scroll",d,{capture:!0})}},[c.trigger,u]),p.jsx(ru,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:i,onPointerDownOutside:o,onFocusOutside:d=>d.preventDefault(),onDismiss:u,children:p.jsxs(OO,{"data-state":c.stateAttribute,...l,...a,ref:t,style:{...a.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[p.jsx(wT,{children:r}),p.jsx(eW,{scope:n,isInside:!0,children:p.jsx(W$,{id:c.contentId,role:"tooltip",children:s||r})})]})})});PO.displayName=Qa;var LO="TooltipArrow",FO=m.forwardRef((e,t)=>{const{__scopeTooltip:n,...r}=e,s=Wh(n);return tW(LO,n).isInside?null:p.jsx(kO,{...s,...r,ref:t})});FO.displayName=LO;function nW(e,t){const n=Math.abs(t.top-e.y),r=Math.abs(t.bottom-e.y),s=Math.abs(t.right-e.x),i=Math.abs(t.left-e.x);switch(Math.min(n,r,s,i)){case i:return"left";case s:return"right";case n:return"top";case r:return"bottom";default:throw new Error("unreachable")}}function rW(e,t,n=5){const r=[];switch(t){case"top":r.push({x:e.x-n,y:e.y+n},{x:e.x+n,y:e.y+n});break;case"bottom":r.push({x:e.x-n,y:e.y-n},{x:e.x+n,y:e.y-n});break;case"left":r.push({x:e.x+n,y:e.y-n},{x:e.x+n,y:e.y+n});break;case"right":r.push({x:e.x-n,y:e.y-n},{x:e.x-n,y:e.y+n});break}return r}function sW(e){const{top:t,right:n,bottom:r,left:s}=e;return[{x:s,y:t},{x:n,y:t},{x:n,y:r},{x:s,y:r}]}function iW(e,t){const{x:n,y:r}=e;let s=!1;for(let i=0,o=t.length-1;i<t.length;o=i++){const a=t[i].x,c=t[i].y,l=t[o].x,u=t[o].y;c>r!=u>r&&n<(l-a)*(r-c)/(u-c)+a&&(s=!s)}return s}function oW(e){const t=e.slice();return t.sort((n,r)=>n.x<r.x?-1:n.x>r.x?1:n.y<r.y?-1:n.y>r.y?1:0),aW(t)}function aW(e){if(e.length<=1)return e.slice();const t=[];for(let r=0;r<e.length;r++){const s=e[r];for(;t.length>=2;){const i=t[t.length-1],o=t[t.length-2];if((i.x-o.x)*(s.y-o.y)>=(i.y-o.y)*(s.x-o.x))t.pop();else break}t.push(s)}t.pop();const n=[];for(let r=e.length-1;r>=0;r--){const s=e[r];for(;n.length>=2;){const i=n[n.length-1],o=n[n.length-2];if((i.x-o.x)*(s.y-o.y)>=(i.y-o.y)*(s.x-o.x))n.pop();else break}n.push(s)}return n.pop(),t.length===1&&n.length===1&&t[0].x===n[0].x&&t[0].y===n[0].y?t:t.concat(n)}var cW=MO,lW=IO,uW=NO,dW=RO,fW=PO,hW=FO;function jO(e,t){const n=m.useLayoutEffect;n(e,t)}const pW=()=>document?.body??null,UO=m.createContext(pW);function l_e(e){"use forget";const t=xe.c(17),{children:n,className:r,open:s,onClose:i,closedBy:o}=e,a=m.useRef(null);let c;t[0]===Symbol.for("react.memo_cache_sentinel")?(c=()=>a.current,t[0]=c):c=t[0];const l=c;let u,d;t[1]!==s?(u=()=>{const E=a.current;if(!(!s||!E))return s==="modal"?E.showModal():E.show(),()=>{E.close()}},d=[s],t[1]=s,t[2]=u,t[3]=d):(u=t[2],d=t[3]),m.useEffect(u,d);let f;t[4]!==i?(f=E=>{E.target===E.currentTarget&&i?.()},t[4]=i,t[5]=f):f=t[5];const h=f;let g;t[6]!==o||t[7]!==i?(g=E=>{o&&["any","closerequest"].includes(o)&&E.key==="Escape"&&i?.()},t[6]=o,t[7]=i,t[8]=g):g=t[8];const _=g,v=s===!0;let y;t[9]!==n?(y=p.jsx(UO,{value:l,children:n}),t[9]=n,t[10]=y):y=t[10];let C;return t[11]!==r||t[12]!==h||t[13]!==_||t[14]!==v||t[15]!==y?(C=p.jsx("dialog",{className:r,open:v,ref:a,onClick:h,onKeyUp:_,children:y}),t[11]=r,t[12]=h,t[13]=_,t[14]=v,t[15]=y,t[16]=C):C=t[16],C}function BO(){"use forget";const e=xe.c(7),[t,n]=m.useState(null),r=m.use(UO);let s;e[0]!==r?(s=r(),e[0]=r,e[1]=s):s=e[1];const i=s;let o,a;e[2]!==i?(o=()=>{n(i)},a=[i],e[2]=i,e[3]=o,e[4]=a):(o=e[3],a=e[4]),jO(o,a);let c;return e[5]!==t?(c=t!=null?{container:t}:{},e[5]=t,e[6]=c):c=e[6],c}const Yn=e=>{"use forget";const t=xe.c(69),{ariaLive:n,triggerAs:r,disabled:s,label:i,secondaryLabel:o,contentClassName:a,customPaddingClassName:c,customBorderClassName:l,customBackgroundColorClassName:u,theme:d,cornerRadius:f,side:h,sideOffset:g,align:_,alignOffset:v,withArrow:y,wide:C,interactive:E,usePortal:b,className:S,children:w,delayDuration:x,closeOnOutsideClick:T,open:O,onOpenChange:A,onDismissClick:k,isLeftArrow:I,labelTextAlign:N,ignoreTriggerOnOutsideClick:j,labelOrientation:q,defaultOpen:D,labelClassName:U}=e,G=r===void 0?"span":r,F=d===void 0?"default":d,le=f===void 0?"lg":f,me=h===void 0?"bottom":h,ge=g===void 0?8:g,ke=_===void 0?"center":_,Pe=v===void 0?0:v,ve=y===void 0?!1:y,he=C===void 0?!1:C,L=E===void 0?!1:E,ue=b===void 0?!0:b,Ie=x===void 0?0:x,it=T===void 0?!0:T,tt=I===void 0?!1:I,oe=N===void 0?"center":N,ye=j===void 0?!1:j,ot=q===void 0?"vertical":q,be=D===void 0?!1:D,at=Ue(),Te=m.useRef(null);if(s){let Qn;return t[0]!==w?(Qn=p.jsx(p.Fragment,{children:w}),t[0]=w,t[1]=Qn):Qn=t[1],Qn}if(!i){let Qn;return t[2]!==G||t[3]!==w||t[4]!==S?(Qn=G?p.jsx(G,{className:S,children:w}):w,t[2]=G,t[3]=w,t[4]=S,t[5]=Qn):Qn=t[5],Qn}let Ke;e:switch(F){case"white":{Ke="light bg-white";break e}case"primary":{Ke="bg-token-main-surface-primary";break e}case"default":Ke="dark bg-black"}u!=null&&(Ke=u);const te=oe==="left"?"text-start":"text-center";let re;t[6]!==it||t[7]!==ye?(re=it?ye?Qn=>{Te.current?.contains(Qn.target)&&Qn.preventDefault()}:void 0:SW,t[6]=it,t[7]=ye,t[8]=re):re=t[8];const _e=c??"px-2 py-1",Se=F==="white"&&"shadow-xs",Le=`rounded-${le}`,ut=!ve&&"overflow-hidden",an=he?"max-w-sm":"max-w-xs";let cn;t[9]!==Ke||t[10]!==a||t[11]!==l||t[12]!==_e||t[13]!==Se||t[14]!==Le||t[15]!==ut||t[16]!==an?(cn=ne("relative z-50 transition-opacity select-none",_e,Se,Le,ut,l,Ke,an,a),t[9]=Ke,t[10]=a,t[11]=l,t[12]=_e,t[13]=Se,t[14]=Le,t[15]=ut,t[16]=an,t[17]=cn):cn=t[17];const $t=ot==="horizontal"?"flex gap-2":void 0;let ct;t[18]!==U||t[19]!==te?(ct=ne("text-token-text-primary text-xs font-semibold whitespace-pre-wrap",te,U),t[18]=U,t[19]=te,t[20]=ct):ct=t[20];let yt;t[21]!==i||t[22]!==ct?(yt=p.jsx("div",{className:ct,children:i}),t[21]=i,t[22]=ct,t[23]=yt):yt=t[23];let kt;t[24]!==o||t[25]!==te?(kt=o&&p.jsx("div",{className:ne("text-token-text-tertiary text-xs font-medium whitespace-pre-wrap",te),children:o}),t[24]=o,t[25]=te,t[26]=kt):kt=t[26];let Pt;t[27]!==Ke||t[28]!==tt||t[29]!==ve?(Pt=ve&&p.jsx(hW,{asChild:!0,children:tt?p.jsx(_W,{className:Ke}):p.jsx(gW,{className:Ke})}),t[27]=Ke,t[28]=tt,t[29]=ve,t[30]=Pt):Pt=t[30];let jt;t[31]!==$t||t[32]!==yt||t[33]!==kt||t[34]!==Pt?(jt=p.jsxs("div",{className:$t,children:[yt,kt,Pt]}),t[31]=$t,t[32]=yt,t[33]=kt,t[34]=Pt,t[35]=jt):jt=t[35];let Ge;t[36]!==at||t[37]!==k?(Ge=k&&p.jsx(nO,{role:"button","aria-label":at.formatMessage(vW.dismissTooltip),tabIndex:0,className:"icon -me-1 cursor-pointer text-gray-400",onClick:k}),t[36]=at,t[37]=k,t[38]=Ge):Ge=t[38];let wt;t[39]!==jt||t[40]!==Ge?(wt=p.jsxs("div",{className:"flex items-center gap-1",children:[jt,Ge]}),t[39]=jt,t[40]=Ge,t[41]=wt):wt=t[41];let pr;t[42]!==ke||t[43]!==Pe||t[44]!==n||t[45]!==me||t[46]!==ge||t[47]!==re||t[48]!==cn||t[49]!==wt?(pr=p.jsx(fW,{collisionPadding:8,onPointerDownOutside:re,"aria-live":n,side:me,sideOffset:ge,alignOffset:Pe,align:ke,className:cn,children:wt}),t[42]=ke,t[43]=Pe,t[44]=n,t[45]=me,t[46]=ge,t[47]=re,t[48]=cn,t[49]=wt,t[50]=pr):pr=t[50];const mr=pr,$r=!L,zs=ye?wW:void 0;let gr;t[51]!==G||t[52]!==w||t[53]!==S?(gr=G?p.jsx(yW,{as:G,className:S,children:w}):w,t[51]=G,t[52]=w,t[53]=S,t[54]=gr):gr=t[54];let Ho;t[55]!==zs||t[56]!==gr?(Ho=p.jsx(uW,{asChild:!0,ref:Te,onClick:zs,children:gr}),t[55]=zs,t[56]=gr,t[57]=Ho):Ho=t[57];let Vo;t[58]!==mr||t[59]!==ue?(Vo=ue?p.jsx(mW,{children:p.jsx(M4,{children:mr})}):p.jsx(M4,{children:mr}),t[58]=mr,t[59]=ue,t[60]=Vo):Vo=t[60];let Ou;return t[61]!==be||t[62]!==Ie||t[63]!==A||t[64]!==O||t[65]!==$r||t[66]!==Ho||t[67]!==Vo?(Ou=p.jsxs(lW,{delayDuration:Ie,disableHoverableContent:$r,defaultOpen:be,open:O,onOpenChange:A,children:[Ho,Vo]}),t[61]=be,t[62]=Ie,t[63]=A,t[64]=O,t[65]=$r,t[66]=Ho,t[67]=Vo,t[68]=Ou):Ou=t[68],Ou};function mW(e){"use forget";const t=xe.c(3),{children:n}=e,r=BO();let s;return t[0]!==n||t[1]!==r?(s=p.jsx(dW,{...r,children:n}),t[0]=n,t[1]=r,t[2]=s):s=t[2],s}const gW=Fi.div`relative top-[-4px] h-2 w-2 rotate-45 transform shadow-xs dark:border-e dark:border-b border-white/10`,_W=Fi.div`relative top-[-4px] end-[-135px] h-2 w-2 rotate-45 transform shadow-xs dark:border-e dark:border-b border-white/10`,vW=ze({dismissTooltip:{id:"Tooltip.dismissTooltip",defaultMessage:"Close Tooltip"}}),yW=e=>{"use forget";const t=xe.c(15);let n,r,s;if(t[0]!==e?({as:n,children:r,...s}=e,t[0]=e,t[1]=n,t[2]=r,t[3]=s):(n=t[1],r=t[2],s=t[3]),!m.isValidElement(r)){let c;return t[4]!==n||t[5]!==r||t[6]!==s?(c=p.jsx(n,{...s,children:r}),t[4]=n,t[5]=r,t[6]=s,t[7]=c):c=t[7],c}const i=s["aria-describedby"];let o;t[8]!==r||t[9]!==i?(o=p.jsx(sO,{"aria-describedby":i,children:r}),t[8]=r,t[9]=i,t[10]=o):o=t[10];let a;return t[11]!==n||t[12]!==s||t[13]!==o?(a=p.jsx(n,{...s,onFocusCapture:s.onFocus,children:o}),t[11]=n,t[12]=s,t[13]=o,t[14]=a):a=t[14],a},df=m.createContext(!1),M4=e=>{"use forget";const t=xe.c(5),{children:n}=e,s=m.use(df)&&"sr-only!";let i;t[0]!==s?(i=ne(s),t[0]=s,t[1]=i):i=t[1];let o;return t[2]!==n||t[3]!==i?(o=p.jsx(sO,{className:i,children:n}),t[2]=n,t[3]=i,t[4]=o):o=t[4],o},CW=({children:e})=>p.jsx(df.Provider,{value:!1,children:e}),bW=e=>{"use forget";const t=xe.c(6),{children:n}=e,r=m.use(df),[s,i]=m.useState(!1);let o;t[0]!==r||t[1]!==n?(o=r?n:m.cloneElement(n,{onOpenChange:d=>{i(d),n.props.onOpenChange?.(d)}}),t[0]=r,t[1]=n,t[2]=o):o=t[2];const a=o,c=n.props.open??s,l=r===!0||c;let u;return t[3]!==a||t[4]!==l?(u=p.jsx(df.Provider,{value:l,children:a}),t[3]=a,t[4]=l,t[5]=u):u=t[5],u};function SW(e){return e.preventDefault()}function wW(e){e.preventDefault()}var au=(e=>(e.General="General",e.Notifications="Notifications",e.Personalization="Personalization",e.Connectors="Connectors",e.DataControls="DataControls",e.Schedules="Schedules",e.Orders="Orders",e.Security="Security",e.Account="Account",e.Internal="Internal",e))(au||{});function EW(e){return e.startsWith("#settings")}function u_e(e){if(!EW(e))return null;const t=e.split("?")[0].split("/")[1];if(Object.values(au).includes(t))return t;switch(t){case"Subscription":case"BuilderProfile":case"Referrals":return"Account";case"ConnectorSettings":return"Connectors";case"SecureSignIn":return"Security";case"Record":return"Personalization"}return"General"}function d_e(e){return{hash:e&&e!=="General"?`settings/${e}`:"settings"}}const f_e=e=>p.jsx(Di,{as:jV,fillContainer:!0,...e});function h_e({value:e,children:t}){return p.jsx(UV,{className:"text-token-text-primary relative flex max-h-[calc(100vh-150px)] w-full flex-col overflow-y-auto px-4 text-sm md:min-h-[380px]",value:e,children:t})}const xW=({title:e,description:t,learnMoreHref:n,children:r,noBorder:s=!1})=>{let i;return e&&(i=p.jsx("div",{className:"truncate select-none",children:e}),n&&(i=p.jsxs("div",{className:"touch:justify-between flex items-center gap-2",children:[i,p.jsx(Yn,{label:p.jsx(K,{id:"WbGW2C",defaultMessage:"Learn more"}),contentClassName:"touch:hidden",side:"right",triggerAs:null,children:p.jsxs("a",{href:n,target:"_blank",rel:"noopener noreferrer",className:"text-token-text-tertiary not-touch:mt-0.5 flex shrink-0 items-center gap-1 text-sm",children:[p.jsx("span",{className:"not-touch:hidden",children:p.jsx(K,{id:"WbGW2C",defaultMessage:"Learn more"})}),p.jsx(KH,{className:"icon-sm"})]})})]})),i=p.jsxs("h3",{className:ne("min-h-header-height justify-center py-3 text-lg font-normal",!s&&"border-token-border-default border-b"),children:[i,t&&p.jsx("div",{className:"text-token-text-tertiary mt-0.5 text-xs",children:t})]})),p.jsxs("section",{className:"relative mb-4 not-has-[>div]:hidden",children:[i,r]})};function TW({children:e}){return p.jsx("div",{className:"border-token-border-light flex min-h-15 items-center border-b py-2 last-of-type:border-none",children:p.jsx("div",{className:"w-full",children:e})})}const pv=Fi.div`text-xs text-token-text-tertiary pe-15 my-1`;function p_e({label:e,disabled:t,enabled:n,onChange:r,description:s,toggleTooltip:i,isLoading:o=!1,testId:a,compactDescription:c=!1,centerToggleVertically:l=!1,showAlphaPill:u=!1,ariaLabel:d}){const f=p.jsx(AT,{disabled:t,checked:n,onCheckedChange:r,"aria-label":d??e,size:"normal","data-testid":a}),h=i?p.jsx(Yn,{label:i,side:"top",children:f}):f;return l?p.jsxs("div",{className:"flex justify-between gap-2",children:[p.jsxs("div",{className:"flex flex-col",children:[p.jsxs("div",{className:"flex items-center gap-2",children:[e,u&&p.jsx(g4,{})]}),s!=null&&p.jsx(pv,{className:c?"mt-0.5":void 0,children:s})]}),p.jsx("div",{className:"flex items-center",children:o?p.jsx(El,{}):h})]}):p.jsxs(p.Fragment,{children:[p.jsxs("div",{className:"flex items-center justify-between gap-2",children:[p.jsxs("div",{className:"flex items-center gap-2",children:[e,u&&p.jsx(g4,{})]}),o?p.jsx(El,{}):h]}),s!=null&&p.jsx(pv,{className:c?"mt-0.5":void 0,children:s})]})}function m_e({color:e="secondary",disabled:t,label:n,buttonLabel:r,onClick:s,description:i,testId:o}){const a=i?"items-start":"items-center";return p.jsxs("div",{className:ne("flex",a,"justify-between"),children:[p.jsxs("div",{children:[p.jsx("div",{children:n}),i!=null&&p.jsx(pv,{children:i})]}),p.jsx(Ct,{className:"shrink-0",color:e,disabled:!!t,onClick:s,"data-testid":o,children:r})]})}function g_e({onClick:e,label:t,stateLabel:n,testId:r}){return p.jsx("button",{className:"w-full",onClick:e,"data-testid":r,children:p.jsxs("div",{className:"flex items-center justify-between",children:[p.jsx("div",{children:t}),p.jsxs("div",{className:"text-token-text-secondary flex min-h-[38px] items-center",children:[n&&p.jsx("div",{className:"me-1 flex items-center",children:n}),p.jsx(yT,{className:"icon-sm"})]})]})})}function __e(e){return H.safeDelete("/aip/connectors/{connector_id}",{parameters:{path:{connector_id:e}}})}var n1="focusScope.autoFocusOnMount",r1="focusScope.autoFocusOnUnmount",I4={bubbles:!1,cancelable:!0},OW="FocusScope",Z2=m.forwardRef((e,t)=>{const{loop:n=!1,trapped:r=!1,onMountAutoFocus:s,onUnmountAutoFocus:i,...o}=e,[a,c]=m.useState(null),l=lr(s),u=lr(i),d=m.useRef(null),f=Mt(t,_=>c(_)),h=m.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;m.useEffect(()=>{if(r){let _=function(E){if(h.paused||!a)return;const b=E.target;a.contains(b)?d.current=b:Zs(d.current,{select:!0})},v=function(E){if(h.paused||!a)return;const b=E.relatedTarget;b!==null&&(a.contains(b)||Zs(d.current,{select:!0}))},y=function(E){if(document.activeElement===document.body)for(const S of E)S.removedNodes.length>0&&Zs(a)};document.addEventListener("focusin",_),document.addEventListener("focusout",v);const C=new MutationObserver(y);return a&&C.observe(a,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",_),document.removeEventListener("focusout",v),C.disconnect()}}},[r,a,h.paused]),m.useEffect(()=>{if(a){R4.add(h);const _=document.activeElement;if(!a.contains(_)){const y=new CustomEvent(n1,I4);a.addEventListener(n1,l),a.dispatchEvent(y),y.defaultPrevented||(kW(RW(qO(a)),{select:!0}),document.activeElement===_&&Zs(a))}return()=>{a.removeEventListener(n1,l),setTimeout(()=>{const y=new CustomEvent(r1,I4);a.addEventListener(r1,u),a.dispatchEvent(y),y.defaultPrevented||Zs(_??document.body,{select:!0}),a.removeEventListener(r1,u),R4.remove(h)},0)}}},[a,l,u,h]);const g=m.useCallback(_=>{if(!n&&!r||h.paused)return;const v=_.key==="Tab"&&!_.altKey&&!_.ctrlKey&&!_.metaKey,y=document.activeElement;if(v&&y){const C=_.currentTarget,[E,b]=AW(C);E&&b?!_.shiftKey&&y===b?(_.preventDefault(),n&&Zs(E,{select:!0})):_.shiftKey&&y===E&&(_.preventDefault(),n&&Zs(b,{select:!0})):y===C&&_.preventDefault()}},[n,r,h.paused]);return p.jsx(st.div,{tabIndex:-1,...o,ref:f,onKeyDown:g})});Z2.displayName=OW;function kW(e,{select:t=!1}={}){const n=document.activeElement;for(const r of e)if(Zs(r,{select:t}),document.activeElement!==n)return}function AW(e){const t=qO(e),n=N4(t,e),r=N4(t.reverse(),e);return[n,r]}function qO(e){const t=[],n=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const s=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||s?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)t.push(n.currentNode);return t}function N4(e,t){for(const n of e)if(!MW(n,{upTo:t}))return n}function MW(e,{upTo:t}){if(getComputedStyle(e).visibility==="hidden")return!0;for(;e;){if(t!==void 0&&e===t)return!1;if(getComputedStyle(e).display==="none")return!0;e=e.parentElement}return!1}function IW(e){return e instanceof HTMLInputElement&&"select"in e}function Zs(e,{select:t=!1}={}){if(e&&e.focus){const n=document.activeElement;e.focus({preventScroll:!0}),e!==n&&IW(e)&&t&&e.select()}}var R4=NW();function NW(){let e=[];return{add(t){const n=e[0];t!==n&&n?.pause(),e=P4(e,t),e.unshift(t)},remove(t){e=P4(e,t),e[0]?.resume()}}}function P4(e,t){const n=[...e],r=n.indexOf(t);return r!==-1&&n.splice(r,1),n}function RW(e){return e.filter(t=>t.tagName!=="A")}var s1=0;function GO(){m.useEffect(()=>{const e=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",e[0]??D4()),document.body.insertAdjacentElement("beforeend",e[1]??D4()),s1++,()=>{s1===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(t=>t.remove()),s1--}},[])}function D4(){const e=document.createElement("span");return e.setAttribute("data-radix-focus-guard",""),e.tabIndex=0,e.style.outline="none",e.style.opacity="0",e.style.position="fixed",e.style.pointerEvents="none",e}var yd="right-scroll-bar-position",Cd="width-before-scroll-bar",PW="with-scroll-bars-hidden",DW="--removed-body-scroll-bar-size";function i1(e,t){return typeof e=="function"?e(t):e&&(e.current=t),e}function LW(e,t){var n=m.useState(function(){return{value:e,callback:t,facade:{get current(){return n.value},set current(r){var s=n.value;s!==r&&(n.value=r,n.callback(r,s))}}}})[0];return n.callback=t,n.facade}var L4=new WeakMap;function FW(e,t){var n=LW(null,function(r){return e.forEach(function(s){return i1(s,r)})});return m.useLayoutEffect(function(){var r=L4.get(n);if(r){var s=new Set(r),i=new Set(e),o=n.current;s.forEach(function(a){i.has(a)||i1(a,null)}),i.forEach(function(a){s.has(a)||i1(a,o)})}L4.set(n,e)},[e]),n}function jW(e){return e}function UW(e,t){t===void 0&&(t=jW);var n=[],r=!1,s={read:function(){if(r)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return n.length?n[n.length-1]:e},useMedium:function(i){var o=t(i,r);return n.push(o),function(){n=n.filter(function(a){return a!==o})}},assignSyncMedium:function(i){for(r=!0;n.length;){var o=n;n=[],o.forEach(i)}n={push:function(a){return i(a)},filter:function(){return n}}},assignMedium:function(i){r=!0;var o=[];if(n.length){var a=n;n=[],a.forEach(i),o=n}var c=function(){var u=o;o=[],u.forEach(i)},l=function(){return Promise.resolve().then(c)};l(),n={push:function(u){o.push(u),l()},filter:function(u){return o=o.filter(u),n}}}};return s}function BW(e){e===void 0&&(e={});var t=UW(null);return t.options=ei({async:!0,ssr:!1},e),t}var HO=function(e){var t=e.sideCar,n=s9(e,["sideCar"]);if(!t)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var r=t.read();if(!r)throw new Error("Sidecar medium not found");return m.createElement(r,ei({},n))};HO.isSideCarExport=!0;function qW(e,t){return e.useMedium(t),HO}var VO=BW(),o1=function(){},Yh=m.forwardRef(function(e,t){var n=m.useRef(null),r=m.useState({onScrollCapture:o1,onWheelCapture:o1,onTouchMoveCapture:o1}),s=r[0],i=r[1],o=e.forwardProps,a=e.children,c=e.className,l=e.removeScrollBar,u=e.enabled,d=e.shards,f=e.sideCar,h=e.noIsolation,g=e.inert,_=e.allowPinchZoom,v=e.as,y=v===void 0?"div":v,C=e.gapMode,E=s9(e,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noIsolation","inert","allowPinchZoom","as","gapMode"]),b=f,S=FW([n,t]),w=ei(ei({},E),s);return m.createElement(m.Fragment,null,u&&m.createElement(b,{sideCar:VO,removeScrollBar:l,shards:d,noIsolation:h,inert:g,setCallbacks:i,allowPinchZoom:!!_,lockRef:n,gapMode:C}),o?m.cloneElement(m.Children.only(a),ei(ei({},w),{ref:S})):m.createElement(y,ei({},w,{className:c,ref:S}),a))});Yh.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};Yh.classNames={fullWidth:Cd,zeroRight:yd};var GW=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function HW(){if(!document)return null;var e=document.createElement("style");e.type="text/css";var t=GW();return t&&e.setAttribute("nonce",t),e}function VW(e,t){e.styleSheet?e.styleSheet.cssText=t:e.appendChild(document.createTextNode(t))}function zW(e){var t=document.head||document.getElementsByTagName("head")[0];t.appendChild(e)}var $W=function(){var e=0,t=null;return{add:function(n){e==0&&(t=HW())&&(VW(t,n),zW(t)),e++},remove:function(){e--,!e&&t&&(t.parentNode&&t.parentNode.removeChild(t),t=null)}}},WW=function(){var e=$W();return function(t,n){m.useEffect(function(){return e.add(t),function(){e.remove()}},[t&&n])}},zO=function(){var e=WW(),t=function(n){var r=n.styles,s=n.dynamic;return e(r,s),null};return t},KW={left:0,top:0,right:0,gap:0},a1=function(e){return parseInt(e||"",10)||0},YW=function(e){var t=window.getComputedStyle(document.body),n=t[e==="padding"?"paddingLeft":"marginLeft"],r=t[e==="padding"?"paddingTop":"marginTop"],s=t[e==="padding"?"paddingRight":"marginRight"];return[a1(n),a1(r),a1(s)]},ZW=function(e){if(e===void 0&&(e="margin"),typeof window>"u")return KW;var t=YW(e),n=document.documentElement.clientWidth,r=window.innerWidth;return{left:t[0],top:t[1],right:t[2],gap:Math.max(0,r-n+t[2]-t[0])}},JW=zO(),Aa="data-scroll-locked",QW=function(e,t,n,r){var s=e.left,i=e.top,o=e.right,a=e.gap;return n===void 0&&(n="margin"),`
  .`.concat(PW,` {
   overflow: hidden `).concat(r,`;
   padding-right: `).concat(a,"px ").concat(r,`;
  }
  body[`).concat(Aa,`] {
    overflow: hidden `).concat(r,`;
    overscroll-behavior: contain;
    `).concat([t&&"position: relative ".concat(r,";"),n==="margin"&&`
    padding-left: `.concat(s,`px;
    padding-top: `).concat(i,`px;
    padding-right: `).concat(o,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(a,"px ").concat(r,`;
    `),n==="padding"&&"padding-right: ".concat(a,"px ").concat(r,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(yd,` {
    right: `).concat(a,"px ").concat(r,`;
  }
  
  .`).concat(Cd,` {
    margin-right: `).concat(a,"px ").concat(r,`;
  }
  
  .`).concat(yd," .").concat(yd,` {
    right: 0 `).concat(r,`;
  }
  
  .`).concat(Cd," .").concat(Cd,` {
    margin-right: 0 `).concat(r,`;
  }
  
  body[`).concat(Aa,`] {
    `).concat(DW,": ").concat(a,`px;
  }
`)},F4=function(){var e=parseInt(document.body.getAttribute(Aa)||"0",10);return isFinite(e)?e:0},XW=function(){m.useEffect(function(){return document.body.setAttribute(Aa,(F4()+1).toString()),function(){var e=F4()-1;e<=0?document.body.removeAttribute(Aa):document.body.setAttribute(Aa,e.toString())}},[])},eK=function(e){var t=e.noRelative,n=e.noImportant,r=e.gapMode,s=r===void 0?"margin":r;XW();var i=m.useMemo(function(){return ZW(s)},[s]);return m.createElement(JW,{styles:QW(i,!t,s,n?"":"!important")})},mv=!1;if(typeof window<"u")try{var qu=Object.defineProperty({},"passive",{get:function(){return mv=!0,!0}});window.addEventListener("test",qu,qu),window.removeEventListener("test",qu,qu)}catch{mv=!1}var Jo=mv?{passive:!1}:!1,tK=function(e){return e.tagName==="TEXTAREA"},$O=function(e,t){if(!(e instanceof Element))return!1;var n=window.getComputedStyle(e);return n[t]!=="hidden"&&!(n.overflowY===n.overflowX&&!tK(e)&&n[t]==="visible")},nK=function(e){return $O(e,"overflowY")},rK=function(e){return $O(e,"overflowX")},j4=function(e,t){var n=t.ownerDocument,r=t;do{typeof ShadowRoot<"u"&&r instanceof ShadowRoot&&(r=r.host);var s=WO(e,r);if(s){var i=KO(e,r),o=i[1],a=i[2];if(o>a)return!0}r=r.parentNode}while(r&&r!==n.body);return!1},sK=function(e){var t=e.scrollTop,n=e.scrollHeight,r=e.clientHeight;return[t,n,r]},iK=function(e){var t=e.scrollLeft,n=e.scrollWidth,r=e.clientWidth;return[t,n,r]},WO=function(e,t){return e==="v"?nK(t):rK(t)},KO=function(e,t){return e==="v"?sK(t):iK(t)},oK=function(e,t){return e==="h"&&t==="rtl"?-1:1},aK=function(e,t,n,r,s){var i=oK(e,window.getComputedStyle(t).direction),o=i*r,a=n.target,c=t.contains(a),l=!1,u=o>0,d=0,f=0;do{var h=KO(e,a),g=h[0],_=h[1],v=h[2],y=_-v-i*g;(g||y)&&WO(e,a)&&(d+=y,f+=g),a instanceof ShadowRoot?a=a.host:a=a.parentNode}while(!c&&a!==document.body||c&&(t.contains(a)||t===a));return(u&&Math.abs(d)<1||!u&&Math.abs(f)<1)&&(l=!0),l},Gu=function(e){return"changedTouches"in e?[e.changedTouches[0].clientX,e.changedTouches[0].clientY]:[0,0]},U4=function(e){return[e.deltaX,e.deltaY]},B4=function(e){return e&&"current"in e?e.current:e},cK=function(e,t){return e[0]===t[0]&&e[1]===t[1]},lK=function(e){return`
  .block-interactivity-`.concat(e,` {pointer-events: none;}
  .allow-interactivity-`).concat(e,` {pointer-events: all;}
`)},uK=0,Qo=[];function dK(e){var t=m.useRef([]),n=m.useRef([0,0]),r=m.useRef(),s=m.useState(uK++)[0],i=m.useState(zO)[0],o=m.useRef(e);m.useEffect(function(){o.current=e},[e]),m.useEffect(function(){if(e.inert){document.body.classList.add("block-interactivity-".concat(s));var _=MR([e.lockRef.current],(e.shards||[]).map(B4),!0).filter(Boolean);return _.forEach(function(v){return v.classList.add("allow-interactivity-".concat(s))}),function(){document.body.classList.remove("block-interactivity-".concat(s)),_.forEach(function(v){return v.classList.remove("allow-interactivity-".concat(s))})}}},[e.inert,e.lockRef.current,e.shards]);var a=m.useCallback(function(_,v){if("touches"in _&&_.touches.length===2||_.type==="wheel"&&_.ctrlKey)return!o.current.allowPinchZoom;var y=Gu(_),C=n.current,E="deltaX"in _?_.deltaX:C[0]-y[0],b="deltaY"in _?_.deltaY:C[1]-y[1],S,w=_.target,x=Math.abs(E)>Math.abs(b)?"h":"v";if("touches"in _&&x==="h"&&w.type==="range")return!1;var T=j4(x,w);if(!T)return!0;if(T?S=x:(S=x==="v"?"h":"v",T=j4(x,w)),!T)return!1;if(!r.current&&"changedTouches"in _&&(E||b)&&(r.current=S),!S)return!0;var O=r.current||S;return aK(O,v,_,O==="h"?E:b)},[]),c=m.useCallback(function(_){var v=_;if(!(!Qo.length||Qo[Qo.length-1]!==i)){var y="deltaY"in v?U4(v):Gu(v),C=t.current.filter(function(S){return S.name===v.type&&(S.target===v.target||v.target===S.shadowParent)&&cK(S.delta,y)})[0];if(C&&C.should){v.cancelable&&v.preventDefault();return}if(!C){var E=(o.current.shards||[]).map(B4).filter(Boolean).filter(function(S){return S.contains(v.target)}),b=E.length>0?a(v,E[0]):!o.current.noIsolation;b&&v.cancelable&&v.preventDefault()}}},[]),l=m.useCallback(function(_,v,y,C){var E={name:_,delta:v,target:y,should:C,shadowParent:fK(y)};t.current.push(E),setTimeout(function(){t.current=t.current.filter(function(b){return b!==E})},1)},[]),u=m.useCallback(function(_){n.current=Gu(_),r.current=void 0},[]),d=m.useCallback(function(_){l(_.type,U4(_),_.target,a(_,e.lockRef.current))},[]),f=m.useCallback(function(_){l(_.type,Gu(_),_.target,a(_,e.lockRef.current))},[]);m.useEffect(function(){return Qo.push(i),e.setCallbacks({onScrollCapture:d,onWheelCapture:d,onTouchMoveCapture:f}),document.addEventListener("wheel",c,Jo),document.addEventListener("touchmove",c,Jo),document.addEventListener("touchstart",u,Jo),function(){Qo=Qo.filter(function(_){return _!==i}),document.removeEventListener("wheel",c,Jo),document.removeEventListener("touchmove",c,Jo),document.removeEventListener("touchstart",u,Jo)}},[]);var h=e.removeScrollBar,g=e.inert;return m.createElement(m.Fragment,null,g?m.createElement(i,{styles:lK(s)}):null,h?m.createElement(eK,{gapMode:e.gapMode}):null)}function fK(e){for(var t=null;e!==null;)e instanceof ShadowRoot&&(t=e.host,e=e.host),e=e.parentNode;return t}const hK=qW(VO,dK);var J2=m.forwardRef(function(e,t){return m.createElement(Yh,ei({},e,{ref:t,sideCar:hK}))});J2.classNames=Yh.classNames;var pK=function(e){if(typeof document>"u")return null;var t=Array.isArray(e)?e[0]:e;return t.ownerDocument.body},Xo=new WeakMap,Hu=new WeakMap,Vu={},c1=0,YO=function(e){return e&&(e.host||YO(e.parentNode))},mK=function(e,t){return t.map(function(n){if(e.contains(n))return n;var r=YO(n);return r&&e.contains(r)?r:(console.error("aria-hidden",n,"in not contained inside",e,". Doing nothing"),null)}).filter(function(n){return!!n})},gK=function(e,t,n,r){var s=mK(t,Array.isArray(e)?e:[e]);Vu[n]||(Vu[n]=new WeakMap);var i=Vu[n],o=[],a=new Set,c=new Set(s),l=function(d){!d||a.has(d)||(a.add(d),l(d.parentNode))};s.forEach(l);var u=function(d){!d||c.has(d)||Array.prototype.forEach.call(d.children,function(f){if(a.has(f))u(f);else{var h=f.getAttribute(r),g=h!==null&&h!=="false",_=(Xo.get(f)||0)+1,v=(i.get(f)||0)+1;Xo.set(f,_),i.set(f,v),o.push(f),_===1&&g&&Hu.set(f,!0),v===1&&f.setAttribute(n,"true"),g||f.setAttribute(r,"true")}})};return u(t),a.clear(),c1++,function(){o.forEach(function(d){var f=Xo.get(d)-1,h=i.get(d)-1;Xo.set(d,f),i.set(d,h),f||(Hu.has(d)||d.removeAttribute(r),Hu.delete(d)),h||d.removeAttribute(n)}),c1--,c1||(Xo=new WeakMap,Xo=new WeakMap,Hu=new WeakMap,Vu={})}},_K=function(e,t,n){n===void 0&&(n="data-aria-hidden");var r=Array.from(Array.isArray(e)?e:[e]),s=pK(e);return s?(r.push.apply(r,Array.from(s.querySelectorAll("[aria-live]"))),gK(r,s,n,"aria-hidden")):function(){return null}},Q2="Dialog",[ZO,vK]=hc(Q2),[yK,Vr]=ZO(Q2),X2=e=>{const{__scopeDialog:t,children:n,open:r,defaultOpen:s,onOpenChange:i,modal:o=!0}=e,a=m.useRef(null),c=m.useRef(null),[l=!1,u]=jo({prop:r,defaultProp:s,onChange:i});return p.jsx(yK,{scope:t,triggerRef:a,contentRef:c,contentId:ls(),titleId:ls(),descriptionId:ls(),open:l,onOpenChange:u,onOpenToggle:m.useCallback(()=>u(d=>!d),[u]),modal:o,children:n})};X2.displayName=Q2;var JO="DialogTrigger",e3=m.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,s=Vr(JO,n),i=Mt(t,s.triggerRef);return p.jsx(st.button,{type:"button","aria-haspopup":"dialog","aria-expanded":s.open,"aria-controls":s.contentId,"data-state":l3(s.open),...r,ref:i,onClick:Ce(e.onClick,s.onOpenToggle)})});e3.displayName=JO;var t3="DialogPortal",[CK,QO]=ZO(t3,{forceMount:void 0}),n3=e=>{const{__scopeDialog:t,forceMount:n,children:r,container:s}=e,i=Vr(t3,t);return p.jsx(CK,{scope:t,forceMount:n,children:m.Children.map(r,o=>p.jsx(Hr,{present:n||i.open,children:p.jsx(iu,{asChild:!0,container:s,children:o})}))})};n3.displayName=t3;var ff="DialogOverlay",r3=m.forwardRef((e,t)=>{const n=QO(ff,e.__scopeDialog),{forceMount:r=n.forceMount,...s}=e,i=Vr(ff,e.__scopeDialog);return i.modal?p.jsx(Hr,{present:r||i.open,children:p.jsx(bK,{...s,ref:t})}):null});r3.displayName=ff;var bK=m.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,s=Vr(ff,n);return p.jsx(J2,{as:Za,allowPinchZoom:!0,shards:[s.contentRef],children:p.jsx(st.div,{"data-state":l3(s.open),...r,ref:t,style:{pointerEvents:"auto",...r.style}})})}),Eo="DialogContent",s3=m.forwardRef((e,t)=>{const n=QO(Eo,e.__scopeDialog),{forceMount:r=n.forceMount,...s}=e,i=Vr(Eo,e.__scopeDialog);return p.jsx(Hr,{present:r||i.open,children:i.modal?p.jsx(SK,{...s,ref:t}):p.jsx(wK,{...s,ref:t})})});s3.displayName=Eo;var SK=m.forwardRef((e,t)=>{const n=Vr(Eo,e.__scopeDialog),r=m.useRef(null),s=Mt(t,n.contentRef,r);return m.useEffect(()=>{const i=r.current;if(i)return _K(i)},[]),p.jsx(XO,{...e,ref:s,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:Ce(e.onCloseAutoFocus,i=>{i.preventDefault(),n.triggerRef.current?.focus()}),onPointerDownOutside:Ce(e.onPointerDownOutside,i=>{const o=i.detail.originalEvent,a=o.button===0&&o.ctrlKey===!0;(o.button===2||a)&&i.preventDefault()}),onFocusOutside:Ce(e.onFocusOutside,i=>i.preventDefault())})}),wK=m.forwardRef((e,t)=>{const n=Vr(Eo,e.__scopeDialog),r=m.useRef(!1),s=m.useRef(!1);return p.jsx(XO,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:i=>{e.onCloseAutoFocus?.(i),i.defaultPrevented||(r.current||n.triggerRef.current?.focus(),i.preventDefault()),r.current=!1,s.current=!1},onInteractOutside:i=>{e.onInteractOutside?.(i),i.defaultPrevented||(r.current=!0,i.detail.originalEvent.type==="pointerdown"&&(s.current=!0));const o=i.target;n.triggerRef.current?.contains(o)&&i.preventDefault(),i.detail.originalEvent.type==="focusin"&&s.current&&i.preventDefault()}})}),XO=m.forwardRef((e,t)=>{const{__scopeDialog:n,trapFocus:r,onOpenAutoFocus:s,onCloseAutoFocus:i,...o}=e,a=Vr(Eo,n),c=m.useRef(null),l=Mt(t,c);return GO(),p.jsxs(p.Fragment,{children:[p.jsx(Z2,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:s,onUnmountAutoFocus:i,children:p.jsx(ru,{role:"dialog",id:a.contentId,"aria-describedby":a.descriptionId,"aria-labelledby":a.titleId,"data-state":l3(a.open),...o,ref:l,onDismiss:()=>a.onOpenChange(!1)})}),p.jsxs(p.Fragment,{children:[p.jsx(xK,{titleId:a.titleId}),p.jsx(OK,{contentRef:c,descriptionId:a.descriptionId})]})]})}),i3="DialogTitle",o3=m.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,s=Vr(i3,n);return p.jsx(st.h2,{id:s.titleId,...r,ref:t})});o3.displayName=i3;var ek="DialogDescription",a3=m.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,s=Vr(ek,n);return p.jsx(st.p,{id:s.descriptionId,...r,ref:t})});a3.displayName=ek;var tk="DialogClose",c3=m.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,s=Vr(tk,n);return p.jsx(st.button,{type:"button",...r,ref:t,onClick:Ce(e.onClick,()=>s.onOpenChange(!1))})});c3.displayName=tk;function l3(e){return e?"open":"closed"}var nk="DialogTitleWarning",[EK,rk]=iV(nk,{contentName:Eo,titleName:i3,docsSlug:"dialog"}),xK=({titleId:e})=>{const t=rk(nk),n=`\`${t.contentName}\` requires a \`${t.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${t.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${t.docsSlug}`;return m.useEffect(()=>{e&&(document.getElementById(e)||console.error(n))},[n,e]),null},TK="DialogDescriptionWarning",OK=({contentRef:e,descriptionId:t})=>{const r=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${rk(TK).contentName}}.`;return m.useEffect(()=>{const s=e.current?.getAttribute("aria-describedby");t&&s&&(document.getElementById(t)||console.warn(r))},[r,e,t]),null},sk=X2,kK=e3,ik=n3,ok=r3,ak=s3,ck=o3,lk=a3,uk=c3;const v_e=Object.freeze(Object.defineProperty({__proto__:null,Close:uk,Content:ak,Description:lk,Dialog:X2,DialogClose:c3,DialogContent:s3,DialogDescription:a3,DialogOverlay:r3,DialogPortal:n3,DialogTitle:o3,DialogTrigger:e3,Overlay:ok,Portal:ik,Root:sk,Title:ck,Trigger:kK,WarningProvider:EK,createDialogScope:vK},Symbol.toStringTag,{value:"Module"}));function sl(e){"use forget";const t=xe.c(9);let n,r,s,i;t[0]!==e?({color:s,title:i,children:r,...n}=e,t[0]=e,t[1]=n,t[2]=r,t[3]=s,t[4]=i):(n=t[1],r=t[2],s=t[3],i=t[4]);const o=s===void 0?"secondary":s,a=i??r;let c;return t[5]!==n||t[6]!==o||t[7]!==a?(c=p.jsx(Ct,{as:"button",color:o,...n,children:a}),t[5]=n,t[6]=o,t[7]=a,t[8]=c):c=t[8],c}function AK(e){"use forget";const t=xe.c(16),{isOpen:n,onClose:r,children:s,shouldIgnoreClickOutside:i,className:o,testId:a}=e,c=i===void 0?!1:i;let l;t[0]!==r||t[1]!==c?(l=_=>{c||_===!1&&r(!1)},t[0]=r,t[1]=c,t[2]=l):l=t[2];const u=Vx()?.document.body;let d;t[3]!==o?(d=ne("absolute inset-0",o),t[3]=o,t[4]=d):d=t[4];let f;t[5]!==s||t[6]!==d||t[7]!==a?(f=p.jsx("div",{className:d,"data-testid":a,"data-ignore-for-page-load":!0,children:s}),t[5]=s,t[6]=d,t[7]=a,t[8]=f):f=t[8];let h;t[9]!==u||t[10]!==f?(h=p.jsx(ik,{container:u,children:f}),t[9]=u,t[10]=f,t[11]=h):h=t[11];let g;return t[12]!==n||t[13]!==l||t[14]!==h?(g=p.jsx(sk,{open:n,onOpenChange:l,children:h}),t[12]=n,t[13]=l,t[14]=h,t[15]=g):g=t[15],g}function MK(e){"use forget";const t=xe.c(6),{className:n,children:r,showBackground:s}=e,o=(s===void 0?!0:s)&&"before:starting:backdrop-blur-0 before:absolute before:inset-0 before:bg-gray-200/50 before:backdrop-blur-[1px] before:transition before:duration-250 dark:before:bg-black/50 before:starting:opacity-0";let a;t[0]!==n||t[1]!==o?(a=ne("fixed inset-0 z-50",o,n),t[0]=n,t[1]=o,t[2]=a):a=t[2];let c;return t[3]!==r||t[4]!==a?(c=p.jsx(ok,{className:a,children:r}),t[3]=r,t[4]=a,t[5]=c):c=t[5],c}function IK(e){"use forget";const t=xe.c(17),{className:n,children:r,position:s,size:i,removePopoverStyling:o,shadow:a,onEscapeKeyDown:c}=e,l=s===void 0?"center":s,u=o===void 0?!1:o,d=a===void 0?"normal":a,f=i!=="fullscreen"&&"grid grid-cols-[10px_1fr_10px]",h=i!=="fullscreen"&&l==="center"&&"grid-rows-[minmax(10px,1fr)_auto_minmax(10px,1fr)] md:grid-rows-[minmax(20px,0.8fr)_auto_minmax(20px,1fr)]",g=i!=="fullscreen"&&l==="bottom"&&"grid-rows-[minmax(10px,1fr)_auto_10px] md:grid-rows-[minmax(20px,1fr)_auto_20px]",_=i!=="fullscreen"&&l==="top"&&"grid-rows-[10px_auto_minmax(10px,1fr)] md:grid-rows-[20px_auto_minmax(20px,1fr)]";let v;t[0]!==f||t[1]!==h||t[2]!==g||t[3]!==_?(v=ne("z-50 h-full w-full overflow-y-auto",f,h,g,_),t[0]=f,t[1]=h,t[2]=g,t[3]=_,t[4]=v):v=t[4];const y=!u&&"popover",C=i!=="fullscreen"&&"rounded-2xl",E=d==="normal"&&"shadow-long";let b;t[5]!==n||t[6]!==C||t[7]!==E||t[8]!==y?(b=ne(y,"bg-token-main-surface-primary relative start-1/2 col-auto col-start-2 row-auto row-start-2 h-full w-full text-start ltr:-translate-x-1/2 rtl:translate-x-1/2",C,E,n),t[5]=n,t[6]=C,t[7]=E,t[8]=y,t[9]=b):b=t[9];let S;t[10]!==r||t[11]!==c||t[12]!==b?(S=p.jsx(ak,{onEscapeKeyDown:c,className:b,children:r}),t[10]=r,t[11]=c,t[12]=b,t[13]=S):S=t[13];let w;return t[14]!==S||t[15]!==v?(w=p.jsx("div",{className:v,children:S}),t[14]=S,t[15]=v,t[16]=w):w=t[16],w}function NK(e){"use forget";const t=xe.c(16),{title:n,description:r,icon:s}=e;let i;t[0]!==n?(i=n&&p.jsx(ck,{className:"text-token-text-primary text-lg font-normal",children:n}),t[0]=n,t[1]=i):i=t[1];let o;t[2]!==r?(o=r&&p.jsx(lk,{asChild:!0,children:p.jsx("div",{className:"text-token-text-tertiary ms-0.5 mt-0.5 text-xs",children:r})}),t[2]=r,t[3]=o):o=t[3];let a;t[4]!==i||t[5]!==o?(a=p.jsxs("div",{className:"flex max-w-full min-w-0 grow flex-col",children:[i,o]}),t[4]=i,t[5]=o,t[6]=a):a=t[6];const c=a;if(!s)return c;const l=!r&&"items-center";let u;t[7]!==l?(u=ne("flex max-w-full min-w-0 gap-1.5",l),t[7]=l,t[8]=u):u=t[8];let d;t[9]!==s||t[10]!==r?(d=typeof s!="function"?s:p.jsx(s,{className:ne("icon",r&&"mt-1"),"aria-label":""}),t[9]=s,t[10]=r,t[11]=d):d=t[11];let f;return t[12]!==c||t[13]!==u||t[14]!==d?(f=p.jsxs("div",{className:u,children:[d,c]}),t[12]=c,t[13]=u,t[14]=d,t[15]=f):f=t[15],f}function RK(e){"use forget";const t=xe.c(23),{title:n,accessory:r,description:s,hasSeparator:i,icon:o,closeButton:a,textCenter:c,visuallyHiddenHeader:l,className:u,closeButtonSide:d}=e,f=i===void 0?!1:i,h=l===void 0?!1:l,g=d===void 0?"right":d;if(!n)return null;let _;t[0]!==a?(_=a&&p.jsx(uk,{asChild:!0,children:a}),t[0]=a,t[1]=_):_=t[1];const v=_,y=c&&"flex-1 justify-center text-center";let C;t[2]!==y?(C=ne("flex max-w-full items-center",y),t[2]=y,t[3]=C):C=t[3];const E=g==="left"&&v;let b;t[4]!==s||t[5]!==o||t[6]!==n?(b=p.jsx(NK,{title:n,description:s,icon:o}),t[4]=s,t[5]=o,t[6]=n,t[7]=b):b=t[7];let S;t[8]!==C||t[9]!==E||t[10]!==b?(S=p.jsxs("div",{className:C,children:[E,b]}),t[8]=C,t[9]=E,t[10]=b,t[11]=S):S=t[11];const w=g==="right"&&v;let x;t[12]!==r||t[13]!==w?(x=p.jsxs("div",{className:"flex h-[max-content] items-center gap-2",children:[r,w]}),t[12]=r,t[13]=w,t[14]=x):x=t[14];let T;t[15]!==u||t[16]!==f||t[17]!==x||t[18]!==S?(T=p.jsxs(DK,{hasSeparator:f,className:u,children:[S,x]}),t[15]=u,t[16]=f,t[17]=x,t[18]=S,t[19]=T):T=t[19];const O=T;let A;return t[20]!==O||t[21]!==h?(A=h?p.jsx(W2,{children:O}):O,t[20]=O,t[21]=h,t[22]=A):A=t[22],A}function PK(e){"use forget";const t=xe.c(9),{primaryButton:n,secondaryButton:r,isSpacedBetween:s,modalHasContent:i,textCenter:o,className:a}=e,c=s===void 0?!1:s,l=i===void 0?!0:i,u=o===void 0?!1:o,d=a===void 0?"":a;if(n==null&&r==null)return null;const f=u&&"justify-center",h=c&&"justify-between",g=l&&"mt-5 sm:mt-4";let _;t[0]!==d||t[1]!==f||t[2]!==h||t[3]!==g?(_=ne("flex flex-col gap-3 sm:flex-row-reverse",f,h,g,d),t[0]=d,t[1]=f,t[2]=h,t[3]=g,t[4]=_):_=t[4];let v;return t[5]!==n||t[6]!==r||t[7]!==_?(v=p.jsxs("div",{className:_,children:[n,r]}),t[5]=n,t[6]=r,t[7]=_,t[8]=v):v=t[8],v}const DK=({hasSeparator:e,className:t,children:n})=>p.jsx("header",{className:ne("min-h-header-height flex justify-between py-2.5 ps-4 pe-2 select-none",e&&"border-token-border-light border-b",t),children:n}),ba={Root:AK,Overlay:MK,Content:IK,Header:RK,Actions:PK,Button:sl},u3=({onClick:e,bg:t="transparent",className:n,iconSize:r="md",ref:s,...i})=>{const o=Ue();return p.jsx("button",{"data-testid":"close-button",ref:s,onClick:e,className:ne("hover:bg-token-main-surface-secondary focus-visible:ring-token-text-quaternary dark:hover:bg-token-main-surface-tertiary flex h-8 w-8 items-center justify-center rounded-full focus-visible:ring-2 focus-visible:ring-offset-1 focus-visible:ring-offset-transparent focus-visible:outline-hidden",t==="transparent"?"bg-transparent":"bg-token-main-surface-primary",n),"aria-label":o.formatMessage({id:"Px7S/2",defaultMessage:"Close"}),...i,children:p.jsx(nO,{className:r==="lg"?"icon-lg":"icon"})})};u3.displayName="CloseButton";function LK(){return null}function Zh(e,t){const n=async()=>{try{const c=await e();return"default"in c?c:{default:c}}catch(c){return R.addAction("Failed importing dynamic component",{error:c}),{default:t?.fallback??LK}}},r=m.lazy(n),s=t?.loading;function i(c){const[l]=m.useState(()=>a);return Ql()?l?p.jsx(l,{...c}):p.jsx(m.Suspense,{fallback:s==null?null:p.jsx(s,{...c}),children:p.jsx(r,{...c})}):s!=null?p.jsx(s,{...c}):null}let o,a;return i.prefetch=()=>(o||(o=n().then(c=>{a=c.default})),o),i}const FK=Zh(()=>$(()=>import("./kudn7rq9x8nnvrik.js"),__vite__mapDeps([3,1,4,5,6])).then(e=>e.ContentModalSheet),{fallback:()=>null});function ji(e){"use forget";const t=xe.c(64),{children:n,rootClassName:r,textCenter:s,className:i,description:o,icon:a,isBottomSheet:c,isOpen:l,onClose:u,onCloseComplete:d,primaryButton:f,secondaryButton:h,footerContent:g,size:_,title:v,headerAccessory:y,type:C,noPadding:E,hasSeparator:b,hideSeparator:S,showCloseButton:w,shouldIgnoreClickOutside:x,closeButton:T,isScrollable:O,allowVerticalContentToOverflow:A,position:k,removePopoverStyling:I,showOverlayBackground:N,shadow:j,visuallyHiddenHeader:q,headerClassName:D,contentClassName:U,footerClassName:G,footerIsSpacedBetween:F,onEscapeKeyDown:le,testId:me,contentRef:ge}=e,ke=l===void 0?!1:l,Pe=_===void 0?"normal":_,ve=E===void 0?!1:E,he=b===void 0?!1:b,L=S===void 0?!0:S,ue=w===void 0?!1:w,Ie=x===void 0?!1:x,it=O===void 0?!0:O,tt=A===void 0?!1:A,oe=k===void 0?"center":k,ye=I===void 0?!1:I,ot=N===void 0?!0:N,be=j===void 0?"normal":j,at=q===void 0?!1:q,Te=!!v&&!at,Ke=!!n,te=he||!L;if(c){let gr;return t[0]!==e?(gr=p.jsx(FK,{...e}),t[0]=e,t[1]=gr):gr=t[1],gr}let re;t[2]!==d||t[3]!==u?(re=()=>{u(!0),d?.()},t[2]=d,t[3]=u,t[4]=re):re=t[4];const _e=s&&"text-center",Se=Pe==="normal",Le=Pe==="large",ut=Pe==="xlarge",an=Pe==="fullscreen",cn=!tt;let $t;t[5]!==i||t[6]!==_e||t[7]!==Se||t[8]!==Le||t[9]!==ut||t[10]!==an||t[11]!==cn?($t=ne("flex flex-col focus:outline-hidden",_e,{"max-w-md":Se,"max-w-lg":Le,"max-w-xl":ut,"h-full w-full":an,"overflow-hidden":cn},i),t[5]=i,t[6]=_e,t[7]=Se,t[8]=Le,t[9]=ut,t[10]=an,t[11]=cn,t[12]=$t):$t=t[12];let ct;t[13]!==T||t[14]!==u||t[15]!==ue?(ct=ue&&(T??p.jsx(u3,{onClick:()=>u(!0)})),t[13]=T,t[14]=u,t[15]=ue,t[16]=ct):ct=t[16];let yt;t[17]!==o||t[18]!==y||t[19]!==D||t[20]!==a||t[21]!==te||t[22]!==ct||t[23]!==s||t[24]!==v||t[25]!==C||t[26]!==at?(yt=p.jsx(ba.Header,{icon:a,title:v,accessory:y,type:C,textCenter:s,closeButton:ct,description:o,hasSeparator:te,visuallyHiddenHeader:at,className:D}),t[17]=o,t[18]=y,t[19]=D,t[20]=a,t[21]=te,t[22]=ct,t[23]=s,t[24]=v,t[25]=C,t[26]=at,t[27]=yt):yt=t[27];const kt=tt?"overflow-y-visible":it?"overflow-y-auto":"overflow-y-hidden",Pt=Pe!=="fullscreen"&&!ve,jt=!te&&Te&&!ve;let Ge;t[28]!==U||t[29]!==kt||t[30]!==Pt||t[31]!==jt?(Ge=ne("grow",kt,{"p-4":Pt,"pt-1":jt},U),t[28]=U,t[29]=kt,t[30]=Pt,t[31]=jt,t[32]=Ge):Ge=t[32];let wt;t[33]!==G||t[34]!==g||t[35]!==F||t[36]!==Ke||t[37]!==f||t[38]!==h?(wt=p.jsx(jK,{primaryButton:f,secondaryButton:h,footerContent:g,modalHasContent:Ke,className:G,isSpacedBetween:F}),t[33]=G,t[34]=g,t[35]=F,t[36]=Ke,t[37]=f,t[38]=h,t[39]=wt):wt=t[39];let pr;t[40]!==n||t[41]!==ge||t[42]!==Ge||t[43]!==wt?(pr=p.jsxs("div",{className:Ge,ref:ge,children:[n,wt]}),t[40]=n,t[41]=ge,t[42]=Ge,t[43]=wt,t[44]=pr):pr=t[44];let mr;t[45]!==le||t[46]!==oe||t[47]!==ye||t[48]!==be||t[49]!==Pe||t[50]!==$t||t[51]!==yt||t[52]!==pr?(mr=p.jsxs(ba.Content,{size:Pe,position:oe,className:$t,removePopoverStyling:ye,shadow:be,onEscapeKeyDown:le,children:[yt,pr]}),t[45]=le,t[46]=oe,t[47]=ye,t[48]=be,t[49]=Pe,t[50]=$t,t[51]=yt,t[52]=pr,t[53]=mr):mr=t[53];let $r;t[54]!==ot||t[55]!==mr?($r=p.jsx(ba.Overlay,{showBackground:ot,children:mr}),t[54]=ot,t[55]=mr,t[56]=$r):$r=t[56];let zs;return t[57]!==ke||t[58]!==r||t[59]!==Ie||t[60]!==re||t[61]!==$r||t[62]!==me?(zs=p.jsx(ba.Root,{isOpen:ke,onClose:re,shouldIgnoreClickOutside:Ie,className:r,testId:me,children:$r}),t[57]=ke,t[58]=r,t[59]=Ie,t[60]=re,t[61]=$r,t[62]=me,t[63]=zs):zs=t[63],zs}function jK(e){"use forget";const t=xe.c(13),{primaryButton:n,secondaryButton:r,footerContent:s,textCenter:i,className:o,isSpacedBetween:a,modalHasContent:c}=e,l=n!=null||r!=null;if(!(l||s))return null;let u;t[0]!==o?(u=ne("flex w-full flex-row items-center justify-end text-sm select-none",o),t[0]=o,t[1]=u):u=t[1];let d;t[2]!==l||t[3]!==a||t[4]!==c||t[5]!==n||t[6]!==r||t[7]!==i?(d=l?p.jsx("div",{className:ne(a?"grow":"flex-0"),children:p.jsx(ba.Actions,{className:"flex w-full flex-row-reverse",textCenter:i,primaryButton:n,secondaryButton:r,modalHasContent:c,isSpacedBetween:a})}):null,t[2]=l,t[3]=a,t[4]=c,t[5]=n,t[6]=r,t[7]=i,t[8]=d):d=t[8];let f;return t[9]!==s||t[10]!==u||t[11]!==d?(f=p.jsxs("div",{className:u,children:[s,d]}),t[9]=s,t[10]=u,t[11]=d,t[12]=f):f=t[12],f}function UK(e){"use forget";const t=xe.c(108);let n,r,s,i,o,a,c,l,u,d,f,h,g,_,v,y,C,E,b,S,w,x,T,O,A,k,I,N,j,q,D,U;t[0]!==e?({name:_,placeholder:T,type:D,role:A,list:h,ariaLabel:r,displayName:u,onChange:y,onFocus:C,onBlur:v,value:U,saveOnBlur:k,icon:n,iconPosition:N,onInputIconClick:E,className:a,inputClassName:d,containerInputClassName:c,autoComplete:i,autoCapitalize:s,spellCheck:I,autoFocus:o,onPressEnter:w,onPaste:S,disabled:l,maxLength:g,color:j,onKeyDown:b,suppressFocus:q,ref:O,insideContainerChildren:f,...x}=e,t[0]=e,t[1]=n,t[2]=r,t[3]=s,t[4]=i,t[5]=o,t[6]=a,t[7]=c,t[8]=l,t[9]=u,t[10]=d,t[11]=f,t[12]=h,t[13]=g,t[14]=_,t[15]=v,t[16]=y,t[17]=C,t[18]=E,t[19]=b,t[20]=S,t[21]=w,t[22]=x,t[23]=T,t[24]=O,t[25]=A,t[26]=k,t[27]=I,t[28]=N,t[29]=j,t[30]=q,t[31]=D,t[32]=U):(n=t[1],r=t[2],s=t[3],i=t[4],o=t[5],a=t[6],c=t[7],l=t[8],u=t[9],d=t[10],f=t[11],h=t[12],g=t[13],_=t[14],v=t[15],y=t[16],C=t[17],E=t[18],b=t[19],S=t[20],w=t[21],x=t[22],T=t[23],O=t[24],A=t[25],k=t[26],I=t[27],N=t[28],j=t[29],q=t[30],D=t[31],U=t[32]);const G=N===void 0?"right":N,F=j===void 0?"tertiary":j,le=q===void 0?!1:q,[me,ge]=m.useState(U);let ke;t[33]!==v||t[34]!==k?(ke=Ge=>{v?.(Ge),k&&ge(Ge.target.value)},t[33]=v,t[34]=k,t[35]=ke):ke=t[35];const Pe=ke;let ve;t[36]!==y||t[37]!==k?(ve=Ge=>{y?.(Ge),k&&ge(Ge.target.value)},t[36]=y,t[37]=k,t[38]=ve):ve=t[38];const he=ve;let L;t[39]!==me||t[40]!==b||t[41]!==w?(L=Ge=>{b?.(Ge),!Ge.nativeEvent.isComposing&&Ge.key==="Enter"&&w&&(Ge.preventDefault(),w(me,Ge))},t[39]=me,t[40]=b,t[41]=w,t[42]=L):L=t[42];const ue=L;let Ie,it;t[43]!==U?(Ie=()=>{ge(U)},it=[U],t[43]=U,t[44]=Ie,t[45]=it):(Ie=t[44],it=t[45]),m.useEffect(Ie,it);let tt;t[46]!==k||t[47]!==U?(tt=k?{}:{value:U},t[46]=k,t[47]=U,t[48]=tt):tt=t[48];let oe;t[49]!==me||t[50]!==k?(oe=k?{value:me}:{},t[49]=me,t[50]=k,t[51]=oe):oe=t[51];let ye;t[52]!==oe||t[53]!==tt?(ye={...tt,...oe},t[52]=oe,t[53]=tt,t[54]=ye):ye=t[54];const ot=ye,be=F==="neutral"&&(le?"-main-surface-tertiary hover:bg-token-main-surface-tertiary border-transparent px-3 py-2":"focus-within:bg-token-main-surface-tertiary hover:bg-token-main-surface-tertiary border-transparent px-3 py-2 focus-within:border-green-500 focus-within:ring-1 focus-within:ring-transparent"),at=F==="tertiary"&&(le?"border-token-border-medium px-3 py-2":"border-token-border-medium focus-within:border-token-border-xheavy focus-within:ring-token-text-secondary px-3 py-2 focus-within:ring-1"),Te=F==="search"&&(le?"border-token-border-medium bg-token-main-surface-primary dark:border-token-border-medium rounded-xl p-4":"border-token-border-medium bg-token-main-surface-primary focus-within:border-token-border-xheavy dark:border-token-border-medium dark:focus-within:border-token-border-xheavy rounded-xl p-4 focus-within:ring-0 dark:focus-within:ring-0"),Ke=F==="quaternary"&&(le?"border-token-main-surface-quaternary text-token-text-quaternary px-3 py-2":"border-token-main-surface-quaternary text-token-text-quaternary focus-within:border-token-border-xheavy focus-within:ring-token-text-secondary px-3 py-2 focus-within:ring-1");let te;t[55]!==a||t[56]!==be||t[57]!==at||t[58]!==Te||t[59]!==Ke?(te=ne("rounded-md border shadow-none",be,at,Te,Ke,a),t[55]=a,t[56]=be,t[57]=at,t[58]=Te,t[59]=Ke,t[60]=te):te=t[60];let re;t[61]!==u||t[62]!==_?(re=p.jsx("label",{htmlFor:_,className:"text-token-text-primary block text-xs font-semibold",children:u}),t[61]=u,t[62]=_,t[63]=re):re=t[63];const _e=u&&"mt-1";let Se;t[64]!==c||t[65]!==_e?(Se=ne(_e,"relative",c),t[64]=c,t[65]=_e,t[66]=Se):Se=t[66];const Le=r||void 0,ut=n!=null&&G==="right"&&"pe-6",an=n!=null&&G==="left"&&"ps-6",cn=F==="neutral"||F==="search"?"bg-transparent":"bg-token-main-surface-primary text-token-text-primary",$t=F==="quaternary"?"placeholder:text-token-text-quaternary":"placeholder-gray-500";let ct;t[67]!==d||t[68]!==ut||t[69]!==an||t[70]!==cn||t[71]!==$t?(ct=ne("block w-full border-0 p-0 shadow-none outline-hidden focus-within:shadow-none focus-within:ring-0 focus-within:outline-hidden focus:border-none focus:ring-0 sm:text-sm",ut,an,cn,$t,d),t[67]=d,t[68]=ut,t[69]=an,t[70]=cn,t[71]=$t,t[72]=ct):ct=t[72];let yt;t[73]!==ot||t[74]!==s||t[75]!==i||t[76]!==o||t[77]!==l||t[78]!==Pe||t[79]!==he||t[80]!==ue||t[81]!==h||t[82]!==g||t[83]!==_||t[84]!==C||t[85]!==S||t[86]!==x||t[87]!==T||t[88]!==O||t[89]!==A||t[90]!==I||t[91]!==Le||t[92]!==ct||t[93]!==D?(yt=p.jsx("input",{...x,ref:O,type:D,name:_,id:_,list:h,role:A,"aria-label":Le,onPaste:S,className:ct,placeholder:T,onBlur:Pe,onFocus:C,onChange:he,onKeyDown:ue,autoComplete:i,spellCheck:I,autoCapitalize:s,autoFocus:o,disabled:l,maxLength:g,...ot}),t[73]=ot,t[74]=s,t[75]=i,t[76]=o,t[77]=l,t[78]=Pe,t[79]=he,t[80]=ue,t[81]=h,t[82]=g,t[83]=_,t[84]=C,t[85]=S,t[86]=x,t[87]=T,t[88]=O,t[89]=A,t[90]=I,t[91]=Le,t[92]=ct,t[93]=D,t[94]=yt):yt=t[94];let kt;t[95]!==n||t[96]!==G||t[97]!==E?(kt=n!=null&&p.jsx("button",{className:ne("absolute top-1/2 -translate-y-1/2",{"end-0":G==="right","start-0":G==="left"}),onClick:E,children:p.jsx(n,{className:"icon-sm"})}),t[95]=n,t[96]=G,t[97]=E,t[98]=kt):kt=t[98];let Pt;t[99]!==f||t[100]!==Se||t[101]!==yt||t[102]!==kt?(Pt=p.jsxs("div",{className:Se,children:[yt,kt,f]}),t[99]=f,t[100]=Se,t[101]=yt,t[102]=kt,t[103]=Pt):Pt=t[103];let jt;return t[104]!==te||t[105]!==re||t[106]!==Pt?(jt=p.jsxs("div",{className:te,children:[re,Pt]}),t[104]=te,t[105]=re,t[106]=Pt,t[107]=jt):jt=t[107],jt}function dk(e){return p.jsxs("div",{className:"relative w-full",children:[p.jsx(UK,{...e,className:ne(e.className,e.error&&"border-red-500!")}),p.jsx("p",{className:"mt-1 flex items-center text-xs text-red-500",children:e.error})]})}var BK={};async function fk(e){return H.safePost("/accounts/add_email/begin",{requestBody:{email:e,auth0_client_id:BK.AUTH0_CLIENT_ID},authOption:ht.Required})}const Hn=ze({sendEmailFailure:{id:"emailVerify.sendEmailFailure",defaultMessage:"Could not send email verification code, please try again later."},sendEmailFailureInvalidEmail:{id:"emailVerify.invalidEmail",defaultMessage:'The email address "{email}" is not formatted correctly.'},sendEmailFailureInvalidEmailEmpty:{id:"emailVerify.invalidEmailEmpty",defaultMessage:"Please enter a valid email address to continue."},sendEmailFailureRateLimited:{id:"emailVerify.sendEmailFailure.rateLimited",defaultMessage:"You've sent too many requests. Please try again later."},verifyOtpFailure:{id:"emailVerify.verifyOtpFailure",defaultMessage:"Something went wrong, please try again later."},verifyOtpFailureInvalidOtp:{id:"emailVerify.verifyOtpFailure.invalidOtp",defaultMessage:"The code you entered is invalid. Please try again."},verifyOtpFailureInvalidFormat:{id:"emailVerify.verifyOtpFailure.invalidFormat",defaultMessage:"The code you entered is formatted incorrectly."},verifyOtpFailureEmailAlreadyLinked:{id:"emailVerify.verifyOtpFailure.emailAlreadyLinked",defaultMessage:'{branch, select, email {"{emailValue}"} other {Your email}} is already linked to another account.'},verifyOtpFailureRateLimited:{id:"emailVerify.verifyOtpFailure.rateLimited",defaultMessage:"You've sent too many requests. Please try again later."},verifyOtpSuccess:{id:"emailVerify.verifyOtpSuccess",defaultMessage:"Email confirmed."}});class q4 extends Error{constructor(t){super(t),this.name="EmailValidationError"}}const qK=(e,t)=>t.trim()===""?e.formatMessage(Hn.sendEmailFailureInvalidEmailEmpty):/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|.(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(t)?null:e.formatMessage(Hn.sendEmailFailureInvalidEmail,{email:t}),hk=(e,t,n)=>{switch(n.status){case 429:throw new Error(e.formatMessage(Hn.sendEmailFailureRateLimited));case 403:throw new Error(e.formatMessage(Hn.verifyOtpFailureEmailAlreadyLinked,{branch:t?"email":"other",emailValue:t}));default:return}};function GK(e){const t=Ue(),[n,r]=m.useState(null),s=gn({mutationFn:async i=>{try{const o=qK(t,i);if(o)throw new q4(o);return await fk(i)}catch(o){throw o instanceof q4?o:(o instanceof je&&hk(t,i,o),new Error(t.formatMessage(Hn.sendEmailFailure)))}},onSuccess:()=>{e.setStep("verifyOtp")},onError:i=>{r(i.message),P.logEventWithStatsig("Email Verify Enter Email Step - Error Sending Verification Email","chatgpt_email_verify_enter_email_step_error",{error:i.message})}});return m.useEffect(()=>{P.logEventWithStatsig("Email Verify Enter Email Step - Shown","chatgpt_email_verify_enter_email_step_shown")},[]),p.jsx("form",{onSubmit:i=>{i.preventDefault(),s.mutate(e.email),P.logEventWithStatsig("Email Verify Enter Email Step - Attempted Continue","chatgpt_email_verify_enter_email_step_continue")},noValidate:!0,children:p.jsxs("div",{className:"flex w-full flex-col items-center gap-3",children:[p.jsx("p",{className:"text-3xl font-semibold",children:e.title?e.title:p.jsx(K,{id:"emailVerify.enterEmailTitle",defaultMessage:"Add your email"})}),e.description&&p.jsx("p",{className:"text-token-text-primary text-center text-base",children:e.description}),p.jsx(dk,{ariaLabel:t.formatMessage({id:"emailVerify.emailAddress",defaultMessage:"Email Address"}),placeholder:t.formatMessage({id:"emailVerify.emailAddressPlaceholder",defaultMessage:"Email Address"}),name:"email",type:"email",className:"mt-6 w-full",value:e.email,onChange:i=>{r(null),e.onEmailChange?.(i.target.value),P.logEventWithStatsig("Email Verify Enter Email Step - Typed","chatgpt_email_verify_enter_email_step_type")},autoFocus:!0,autoComplete:"email",error:n??void 0}),p.jsx(Ct,{className:"w-full rounded-md",color:"green",type:"submit",loading:s.isPending,disabled:s.isPending,children:p.jsx(K,{id:"emailVerify.continue",defaultMessage:"Continue"})}),e.cancelFlowButton]})})}function HK(e){"use forget";const{children:t,fallback:n}=e,r=n===void 0?null:n;return Ql()?t:r}const G4=e=>m.createElement("svg",{width:20,height:20,viewBox:"0 0 20 20",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",...e},m.createElement("path",{d:"M12.498 6.90887C12.7094 6.60867 13.1245 6.53642 13.4248 6.74774C13.7249 6.95913 13.7971 7.37424 13.5859 7.6745L9.62695 13.2995C9.51084 13.4644 9.32628 13.5681 9.125 13.5807C8.94863 13.5918 8.77583 13.5319 8.64453 13.4167L8.59082 13.364L6.50781 11.072L6.42773 10.9645C6.26956 10.6986 6.31486 10.3488 6.55273 10.1325C6.79045 9.91663 7.14198 9.9053 7.3916 10.0876L7.49219 10.1774L9.0166 11.8542L12.498 6.90887Z"}),m.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M10.3333 2.08496C14.7046 2.08496 18.2483 5.62867 18.2483 10C18.2483 14.3713 14.7046 17.915 10.3333 17.915C5.96192 17.915 2.41821 14.3713 2.41821 10C2.41821 5.62867 5.96192 2.08496 10.3333 2.08496ZM10.3333 3.41504C6.69646 3.41504 3.74829 6.3632 3.74829 10C3.74829 13.6368 6.69646 16.585 10.3333 16.585C13.97 16.585 16.9182 13.6368 16.9182 10C16.9182 6.3632 13.97 3.41504 10.3333 3.41504Z"})),Xa=e=>m.createElement("svg",{width:20,height:20,viewBox:"0 0 20 20",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",...e},m.createElement("path",{d:"M10.0002 12.189C10.5523 12.1891 11 12.6369 11.0002 13.189C11.0002 13.7412 10.5524 14.1889 10.0002 14.189C9.44791 14.189 9.00019 13.7413 9.00019 13.189C9.00035 12.6368 9.44801 12.189 10.0002 12.189Z"}),m.createElement("path",{d:"M10.0002 7.02394C10.3673 7.02405 10.6651 7.32191 10.6652 7.68898V10.356C10.6651 10.723 10.3673 11.0209 10.0002 11.021C9.63303 11.021 9.33532 10.7231 9.33515 10.356V7.68898C9.33531 7.32184 9.63302 7.02394 10.0002 7.02394Z"}),m.createElement("path",{d:"M7.76484 3.14894C8.89036 1.56557 11.3015 1.61886 12.341 3.30812L18.6125 13.4995C19.7387 15.3305 18.4214 17.6879 16.2717 17.688H3.72871C1.57877 17.688 0.261434 15.3306 1.38789 13.4995L7.65937 3.30812L7.76484 3.14894ZM11.2082 4.00441C10.689 3.1609 9.50658 3.10813 8.90449 3.84621L8.79219 4.00441L2.5207 14.1958C1.93937 15.1408 2.61919 16.3579 3.72871 16.3579H16.2717C17.381 16.3578 18.0608 15.1407 17.4797 14.1958L11.2082 4.00441Z"})),y_e="https://help.openai.com/en/collections/3943089-billing",C_e="https://openai.com/chatgpt/enterprise",b_e="https://help.openai.com/en/articles/7905690-how-do-i-cancel-my-apple-subscription-for-chatgpt-plus-in-the-chatgpt-ios-app",S_e="https://help.openai.com/en/articles/8258076-how-to-cancel-my-plus-subscription-in-the-chatgpt-android-app",w_e="https://help.openai.com/en/articles/7864572-what-is-the-chatgpt-model-selector",E_e="https://help.openai.com/en/articles/11989085-chatgpt-go",pk="pricing",mk="team-pricing",x_e="plus-pricing",VK="team-pricing-direct",gk="account-payment-modal-open-from-location",T_e={MOBILE_IOS:"chatgpt_mobile_ios",MOBILE_ANDROID:"chatgpt_mobile_android"};function O_e(e){return e.hash.split("#")[1]===pk}function k_e(e){return e.hash.split("#")[1]===mk}function A_e(e){return e.hash.split("#")[1]===VK}function d3(e,t){e({hash:pk,search:window.location.search},{state:{[gk]:t}})}function M_e(e){e({hash:""})}function zK(e){switch(gt(e,"2788179050").get("plus_upsell_cta_copy","get_plus")){case"upgrade_to_plan":return ii.upgradeToPlus;case"upgrade_your_plan":return ii.upgradeYourPlan;case"upgrade":return ii.upgrade;case"get_plus":default:return ii.getPlus}}function I_e(e){switch(gt(e,"2788179050").get("pro_upsell_cta_copy","get_pro")){case"upgrade_to_plan":return ii.upgradeToPro;case"upgrade_your_plan":return ii.upgradeYourPlan;case"upgrade":return ii.upgrade;case"get_pro":default:return ii.getPro}}function $K(e){return we(e,"3600660324")}function H4(){return H4=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},H4.apply(null,arguments)}function WK(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}function gv(e,t){return gv=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,r){return n.__proto__=r,n},gv(e,t)}function KK(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,gv(e,t)}var l1={exports:{}},u1,V4;function YK(){if(V4)return u1;V4=1;var e="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return u1=e,u1}var d1,z4;function ZK(){if(z4)return d1;z4=1;var e=YK();function t(){}function n(){}return n.resetWarningCache=t,d1=function(){function r(o,a,c,l,u,d){if(d!==e){var f=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw f.name="Invariant Violation",f}}r.isRequired=r;function s(){return r}var i={array:r,bigint:r,bool:r,func:r,number:r,object:r,string:r,symbol:r,any:r,arrayOf:s,element:r,elementType:r,instanceOf:s,node:r,objectOf:s,oneOf:s,oneOfType:s,shape:s,exact:s,checkPropTypes:n,resetWarningCache:t};return i.PropTypes=i,i},d1}var $4;function JK(){return $4||($4=1,l1.exports=ZK()()),l1.exports}var QK=JK();const N_e=Ot(QK),W4={disabled:!1},_k=qe.createContext(null);var XK=function(t){return t.scrollTop},Gc="unmounted",Yi="exited",Zi="entering",da="entered",_v="exiting",Gs=function(e){KK(t,e);function t(r,s){var i;i=e.call(this,r,s)||this;var o=s,a=o&&!o.isMounting?r.enter:r.appear,c;return i.appearStatus=null,r.in?a?(c=Yi,i.appearStatus=Zi):c=da:r.unmountOnExit||r.mountOnEnter?c=Gc:c=Yi,i.state={status:c},i.nextCallback=null,i}t.getDerivedStateFromProps=function(s,i){var o=s.in;return o&&i.status===Gc?{status:Yi}:null};var n=t.prototype;return n.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},n.componentDidUpdate=function(s){var i=null;if(s!==this.props){var o=this.state.status;this.props.in?o!==Zi&&o!==da&&(i=Zi):(o===Zi||o===da)&&(i=_v)}this.updateStatus(!1,i)},n.componentWillUnmount=function(){this.cancelNextCallback()},n.getTimeouts=function(){var s=this.props.timeout,i,o,a;return i=o=a=s,s!=null&&typeof s!="number"&&(i=s.exit,o=s.enter,a=s.appear!==void 0?s.appear:o),{exit:i,enter:o,appear:a}},n.updateStatus=function(s,i){if(s===void 0&&(s=!1),i!==null)if(this.cancelNextCallback(),i===Zi){if(this.props.unmountOnExit||this.props.mountOnEnter){var o=this.props.nodeRef?this.props.nodeRef.current:Lc.findDOMNode(this);o&&XK(o)}this.performEnter(s)}else this.performExit();else this.props.unmountOnExit&&this.state.status===Yi&&this.setState({status:Gc})},n.performEnter=function(s){var i=this,o=this.props.enter,a=this.context?this.context.isMounting:s,c=this.props.nodeRef?[a]:[Lc.findDOMNode(this),a],l=c[0],u=c[1],d=this.getTimeouts(),f=a?d.appear:d.enter;if(!s&&!o||W4.disabled){this.safeSetState({status:da},function(){i.props.onEntered(l)});return}this.props.onEnter(l,u),this.safeSetState({status:Zi},function(){i.props.onEntering(l,u),i.onTransitionEnd(f,function(){i.safeSetState({status:da},function(){i.props.onEntered(l,u)})})})},n.performExit=function(){var s=this,i=this.props.exit,o=this.getTimeouts(),a=this.props.nodeRef?void 0:Lc.findDOMNode(this);if(!i||W4.disabled){this.safeSetState({status:Yi},function(){s.props.onExited(a)});return}this.props.onExit(a),this.safeSetState({status:_v},function(){s.props.onExiting(a),s.onTransitionEnd(o.exit,function(){s.safeSetState({status:Yi},function(){s.props.onExited(a)})})})},n.cancelNextCallback=function(){this.nextCallback!==null&&(this.nextCallback.cancel(),this.nextCallback=null)},n.safeSetState=function(s,i){i=this.setNextCallback(i),this.setState(s,i)},n.setNextCallback=function(s){var i=this,o=!0;return this.nextCallback=function(a){o&&(o=!1,i.nextCallback=null,s(a))},this.nextCallback.cancel=function(){o=!1},this.nextCallback},n.onTransitionEnd=function(s,i){this.setNextCallback(i);var o=this.props.nodeRef?this.props.nodeRef.current:Lc.findDOMNode(this),a=s==null&&!this.props.addEndListener;if(!o||a){setTimeout(this.nextCallback,0);return}if(this.props.addEndListener){var c=this.props.nodeRef?[this.nextCallback]:[o,this.nextCallback],l=c[0],u=c[1];this.props.addEndListener(l,u)}s!=null&&setTimeout(this.nextCallback,s)},n.render=function(){var s=this.state.status;if(s===Gc)return null;var i=this.props,o=i.children;i.in,i.mountOnEnter,i.unmountOnExit,i.appear,i.enter,i.exit,i.timeout,i.addEndListener,i.onEnter,i.onEntering,i.onEntered,i.onExit,i.onExiting,i.onExited,i.nodeRef;var a=WK(i,["children","in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","addEndListener","onEnter","onEntering","onEntered","onExit","onExiting","onExited","nodeRef"]);return qe.createElement(_k.Provider,{value:null},typeof o=="function"?o(s,a):qe.cloneElement(qe.Children.only(o),a))},t}(qe.Component);Gs.contextType=_k;Gs.propTypes={};function ea(){}Gs.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:ea,onEntering:ea,onEntered:ea,onExit:ea,onExiting:ea,onExited:ea};Gs.UNMOUNTED=Gc;Gs.EXITED=Yi;Gs.ENTERING=Zi;Gs.ENTERED=da;Gs.EXITING=_v;function R_e(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}const eY=e=>m.createElement("svg",{width:16,height:16,viewBox:"0 0 16 16",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",...e},m.createElement("path",{d:"M11.1152 3.91503C11.3868 3.73594 11.756 3.7658 11.9951 4.00488C12.2341 4.24395 12.264 4.61309 12.0849 4.88476L11.9951 4.99511L8.99018 7.99999L11.9951 11.0049L12.0849 11.1152C12.264 11.3869 12.2341 11.756 11.9951 11.9951C11.756 12.2342 11.3868 12.2641 11.1152 12.085L11.0048 11.9951L7.99995 8.99023L4.99506 11.9951C4.7217 12.2685 4.2782 12.2685 4.00483 11.9951C3.73146 11.7217 3.73146 11.2782 4.00483 11.0049L7.00971 7.99999L4.00483 4.99511L3.91499 4.88476C3.73589 4.61309 3.76575 4.24395 4.00483 4.00488C4.24391 3.7658 4.61305 3.73594 4.88471 3.91503L4.99506 4.00488L7.99995 7.00976L11.0048 4.00488L11.1152 3.91503Z"}));var Et=(e=>(e.info="info",e.neutral="neutral",e.success="success",e.successNeutral="successNeutral",e.warning="warning",e.danger="danger",e))(Et||{});const tY=ze({closeButtonLabel:{id:"Alert.closeButtonLabel",defaultMessage:"Close"}}),nY=qe.memo(function(t){const n=Ue(),{className:r,intent:s="info",fullWidth:i,children:o,icon:a,onRemove:c,testId:l}=t,u=ne({"px-3 py-2 rounded-lg inline-flex flex-row border pointer-events-auto gap-2":!0,flex:i,"popover shadow-lg bg-token-main-surface-primary text-token-text-secondary dark:border-black/20":s===Et.neutral||s===Et.info,"border-green-600 bg-green-600 text-white":s===Et.success,"border-orange-500 text-white bg-orange-500":s===Et.warning,"border-red-500 text-white bg-red-500":s===Et.danger,"bg-black text-white border-black dark:bg-white dark:text-black dark:border-white":s===Et.successNeutral},r);return p.jsxs("div",{className:u,role:"alert","data-testid":l,children:[a!=null&&p.jsx("div",{className:"mt-1 shrink-0 grow-0",children:p.jsx(a,{className:"icon-sm"})}),p.jsx("div",{className:"flex-1 justify-center gap-2",children:typeof o=="string"?p.jsx("div",{className:"font-semibold",children:o}):o}),c?p.jsx("div",{className:"flex shrink-0 grow-0",children:p.jsx("button",{onClick:c,"aria-label":n.formatMessage(tY.closeButtonLabel),className:"hover:opacity-80",children:p.jsx(eY,{className:"icon-sm"})})}):null]})}),rY={liveRegionAssertive:"",liveRegionPolite:""},zu=vt()(()=>({...rY}));let f1,h1;const sY={setLiveRegionAssertive:e=>{window.clearTimeout(f1),zu.setState({liveRegionAssertive:e}),f1=window.setTimeout(()=>{zu.setState({liveRegionAssertive:""}),f1=void 0},5e3)},setLiveRegionPolite:e=>{window.clearTimeout(h1),zu.setState({liveRegionPolite:e}),h1=window.setTimeout(()=>{zu.setState({liveRegionPolite:""}),h1=void 0},5e3)}};var f3=(e=>(e.file_upload_rate_limit_upsell_plus="file_upload_rate_limit_upsell_plus",e))(f3||{});const K4=e=>Object.hasOwnProperty.call(e,"id");let iY=0;class oY{intl;constructor(t){this.intl=t}toasts=[];listeners=new Set;subscribe=t=>(this.listeners.add(t),()=>this.listeners.delete(t));toastsChanged(){this.listeners.forEach(t=>t())}announceToScreenReader(t,n){let r,s;try{switch(n.intent){case Et.success:s={defaultMessage:"Success",description:"Prefix for success toast announcements",id:"toast.success"};break;case Et.warning:s={defaultMessage:"Warning",description:"Prefix for warning toast announcements",id:"toast.warning"};break;case Et.danger:s={defaultMessage:"Error",description:"Prefix for error toast announcements",id:"toast.error"};break;default:s=void 0}s?r=this.intl.formatMessage({id:"SieQiR",defaultMessage:"{prefix}: {message}"},{prefix:this.intl.formatMessage(s),message:t}):r=this.intl.formatMessage({id:"opr5Yt",defaultMessage:"{message}"},{message:t}),sY.setLiveRegionPolite(r)}catch(i){R.addError(i)}}notify(t,n){if(K4(n))for(const s of this.toasts)String(s.id).startsWith(n.id)&&this.closeToast(s.id);const r=this.createToastInstance(t,n);return this.announceToScreenReader(t,n),this.toasts=[r,...this.toasts],this.toastsChanged(),r}createToastInstance(t,n){const r=++iY,s=K4(n)?`${n.id}-${r}`:r;return{id:s,title:t,description:n.description,hasCloseButton:!!n.hasCloseButton,duration:typeof n.duration=="number"?n.duration:5,close:()=>this.closeToast(s),onRemove:n.onRemove,intent:n.intent??Et.info,isShown:!0,testId:n.testId,action:n.action}}getToasts(){return this.toasts}closeToast(t){this.toasts=this.toasts.map(n=>n.id===t?{...n,isShown:!1}:n),this.toastsChanged()}removeToast(t){this.toasts.find(n=>n.id===t)?.onRemove?.(),this.toasts=this.toasts.filter(n=>n.id!==t),this.toastsChanged()}closeAll(){this.toasts.forEach(t=>t.close())}info(t,n){return this.notify(t,{...n,intent:Et.info})}success(t,n){return this.notify(t,{...n,intent:Et.success})}successNeutral(t,n){return this.notify(t,{...n,intent:Et.successNeutral})}warning(t,n){return this.notify(t,{...n,intent:Et.warning})}danger(t,n){let r="",s="",i="";return typeof t=="string"?(r=t,s=t):(r=this.intl.formatMessage(t),s=String(t.defaultMessage??""),i=String(t.description??"")),P.logEvent("error_toast_shown",{category:n?.toastId??"unknown",title:n?.loggingTitle??s,description:n?.loggingDescription??i}),this.notify(r,{...n,intent:Et.danger})}}const aY={[Et.success]:G4,[Et.successNeutral]:G4,[Et.warning]:Xa,[Et.danger]:Xa},cY=({zIndex:e,action:t,duration:n,onRemove:r,intent:s=Et.info,title:i,description:o,hasCloseButton:a,isShown:c=!0,testId:l})=>{const u=Y(),[d,f]=m.useState(0),h=Fr(),g=Nt(u),[_,v]=m.useState(c),y=m.useRef(null),C=m.useRef(null),E=m.useCallback(()=>{r?.(),S(),v(!1)},[r]),b=m.useCallback(()=>{n&&(C.current=setTimeout(()=>{E()},n*1e3))},[E,n]);m.useEffect(()=>(b(),()=>{S()}),[_,b]);const S=()=>{C.current&&(clearTimeout(C.current),C.current=null)},w=()=>{S()},x=()=>{b()},T=k=>{if(k===null)return;const{height:I}=k.getBoundingClientRect();f(I)},O=gt(u,"1916748563"),A=t&&t===f3.file_upload_rate_limit_upsell_plus&&O.get("is_upgrade_link_shown",!1);return p.jsx(Gs,{appear:!0,unmountOnExit:!0,timeout:240,in:_,onExited:r,nodeRef:y,children:k=>p.jsx("div",{ref:y,"data-state":k,className:"toast-root",onMouseEnter:w,onMouseLeave:x,style:{height:d,zIndex:e,marginBottom:_?0:-d},children:p.jsx("div",{ref:T,className:"w-full p-1 text-center md:w-auto md:text-justify",children:p.jsx(nY,{icon:aY[s]??void 0,intent:s,onRemove:a?()=>E():void 0,testId:l,children:A?p.jsxs("div",{className:"flex w-full items-center gap-3",children:[p.jsx("div",{className:"flex-1 text-start text-sm whitespace-pre-wrap",children:i}),p.jsx(Ct,{onClick:I=>{I.preventDefault(),d3(h,"Plus upsell toast"),P.logRateLimitGetPlusButtonClicked({location:"toast",type:"upsell_plus",plan_type:g?.planType??"unknown",is_hard_block:!1,hard_block_reason:""})},color:"secondary",size:"small",className:"shrink-0",children:p.jsx(K,{...zK(u)})})]}):p.jsxs(p.Fragment,{children:[p.jsx("div",{className:ne("text-start whitespace-pre-wrap",{"font-semibold":o!=null&&o!==""}),children:i}),o&&p.jsx("div",{children:o})]})})})})})},vk=m.createContext(null),{Provider:lY}=vk;function Rt(){"use forget";return m.useContext(vk)}function uY(){"use forget";const e=xe.c(4),t=Rt();let n;e[0]!==t?(n=s=>t.subscribe(s),e[0]=t,e[1]=n):n=e[1];let r;return e[2]!==t.toasts?(r=()=>t.toasts,e[2]=t.toasts,e[3]=r):r=e[3],m.useSyncExternalStore(n,r,dY)}function dY(){return[]}function fY(){"use forget";const e=xe.c(10),t=uY(),n=Rt();let r,s,i;if(e[0]!==n||e[1]!==t){i=Symbol.for("react.early_return_sentinel");e:{const a=t.filter(hY);if(a.length===0){i=null;break e}r="pointer-events-none fixed inset-0 z-60 mx-auto my-2 flex max-w-[560px] flex-col items-stretch justify-start md:pb-5";let c;e[5]!==n?(c=l=>{const{id:u,...d}=l;return p.jsx(cY,{...d,onRemove:()=>n.removeToast(u)},u)},e[5]=n,e[6]=c):c=e[6],s=a.map(c)}e[0]=n,e[1]=t,e[2]=r,e[3]=s,e[4]=i}else r=e[2],s=e[3],i=e[4];if(i!==Symbol.for("react.early_return_sentinel"))return i;let o;return e[7]!==r||e[8]!==s?(o=p.jsx("span",{className:r,children:s}),e[7]=r,e[8]=s,e[9]=o):o=e[9],o}function hY(e){return e.isShown!==!1}function pY(e){"use forget";const t=xe.c(6),{children:n}=e,r=Ue();let s;t[0]!==r?(s=()=>new oY(r),t[0]=r,t[1]=s):s=t[1];const[i]=m.useState(s);let o;t[2]===Symbol.for("react.memo_cache_sentinel")?(o=p.jsx(HK,{children:p.jsx(fY,{})}),t[2]=o):o=t[2];let a;return t[3]!==n||t[4]!==i?(a=p.jsxs(lY,{value:i,children:[n,o]}),t[3]=n,t[4]=i,t[5]=a):a=t[5],a}class Y4 extends Error{constructor(t){super(t),this.name="OtpValidationError"}}const mY=(e,t)=>{if(t.length!==6)return e.formatMessage(Hn.verifyOtpFailureInvalidFormat);try{parseInt(t)}catch{return e.formatMessage(Hn.verifyOtpFailureInvalidFormat)}return null},gY=(e,t,n)=>{switch(n.status){case 403:throw new Error(e.formatMessage(Hn.verifyOtpFailureEmailAlreadyLinked,{branch:t?"email":"other",emailValue:t}));case 429:throw new Error(e.formatMessage(Hn.verifyOtpFailureRateLimited));case 401:case 422:throw new Error(e.formatMessage(Hn.verifyOtpFailureInvalidOtp));default:return}};function _Y(e){const t=Y(),n=Ue(),r=Rt(),[s,i]=m.useState(null),o=e.showChangeEmailButton??!0,a=m.useCallback(u=>{const d=u.target.value.trim();if(typeof d=="string"){if(d.match(/\D/)){u.preventDefault();return}e.onOtpChange?.(d.substring(0,6))}},[e]),c=gn({mutationFn:async()=>{try{return e.onResendOtp?await e.onResendOtp():await fk(e.email??"")}catch(u){throw u instanceof je&&hk(n,e.email??"",u),new Error(n.formatMessage(Hn.sendEmailFailure))}},onSuccess:()=>{e.setStep("verifyOtp")},onError:u=>{i(u.message),P.logEventWithStatsig("Email Verify Verify OTP Step - Error Resending OTP","chatgpt_email_verify_verify_otp_step_resend_error",{error:u.message})}}),l=gn({mutationFn:async u=>{try{const d=mY(n,u.code);if(d)throw new Y4(d);if(e.onVerifyOtp)return await e.onVerifyOtp(u.code,u.email);await H.safePost("/accounts/add_email/verify",{requestBody:u}),await G8(t,{reason:"verify_otp"})}catch(d){throw d instanceof Y4?d:(d instanceof je&&gY(n,e.email,d),new Error(n.formatMessage(Hn.verifyOtpFailure)))}},onSuccess:()=>{r.success(n.formatMessage(Hn.verifyOtpSuccess)),e.onVerified?.()},onError:u=>{i(u.message),P.logEventWithStatsig("Email Verify Verify OTP Step - Error Verifying OTP","chatgpt_email_verify_verify_otp_step_error",{error:u.message})}});return m.useEffect(()=>{P.logEventWithStatsig("Email Verify Verify OTP Step - Shown","chatgpt_email_verify_verify_otp_step_shown")},[]),p.jsxs("div",{className:"flex w-full flex-col items-center gap-3",children:[p.jsx("p",{className:"text-3xl font-semibold",children:p.jsx(K,{id:"verifyOtp.title",defaultMessage:"Check your email"})}),p.jsxs("p",{className:"text-center",children:[p.jsx("span",{className:"text-token-text-primary text-base",children:p.jsx(K,{id:"verifyOtp.description",defaultMessage:"Enter the verification code we just sent to"})}),e.email&&p.jsx("br",{}),p.jsx("span",{className:`text-token-text-primary text-base leading-snug ${e.email&&"font-semibold"}`,children:p.jsx(K,{id:"verifyOtp.email",defaultMessage:"{branch, select, email {{emailValue}} other { your email.}}",values:{branch:e.email?"email":"other",emailValue:e.email}})})]}),p.jsxs("form",{onSubmit:u=>{u.preventDefault(),l.mutate({code:e.otp,email:e.email??""}),P.logEventWithStatsig("Email Verify Verify OTP Step - Attempted Continue","chatgpt_email_verify_verify_otp_step_continue")},className:"flex w-full flex-col items-center gap-3",children:[p.jsx(dk,{error:s??void 0,ariaLabel:n.formatMessage({id:"emailVerify.otpAriaLabel",defaultMessage:"OTP"}),value:e.otp,onChange:u=>{i(null),a(u),P.logEventWithStatsig("Email Verify Verify OTP Step - Typed","chatgpt_email_verify_verify_otp_step_type")},name:"otp",type:"text",placeholder:"XXXXXX",className:"mt-6 w-full",autoComplete:"off",autoFocus:!0}),p.jsx(Ct,{className:"w-full rounded-md",color:"green",type:"submit",loading:l.isPending,disabled:l.isPending,children:p.jsx(K,{id:"verifyOtp.continue",defaultMessage:"Continue"})}),e.cancelFlowButton]}),p.jsxs("div",{className:"mt-6 flex w-full flex-col items-center gap-3",children:[p.jsx("p",{className:"text-token-text-primary text-sm",children:p.jsx(K,{id:"verifyOtp.resendMessage",defaultMessage:"Didn't receive the code?"})}),p.jsx(Ct,{className:"w-full rounded-md",color:"secondary",onClick:()=>{c.mutate(),P.logEventWithStatsig("Email Verify Verify OTP Step - Resend","chatgpt_email_verify_verify_otp_step_resend")},loading:c.isPending,disabled:c.isPending,children:p.jsx(K,{id:"verifyOtp.resend",defaultMessage:"Resend code"})}),o&&p.jsx(Ct,{className:"w-full rounded-md",color:"secondary",onClick:()=>{e.setStep("enterEmail"),P.logEventWithStatsig("Email Verify Verify OTP Step - Back to Enter Email Step","chatgpt_email_verify_verify_otp_step_change_email")},children:p.jsx(K,{id:"verifyOtp.changeEmail",defaultMessage:"Change email"})})]})]})}function vY(e){const[t,n]=m.useState(e.initialStep??"enterEmail"),[r,s]=m.useState(""),[i,o]=m.useState(""),a=e.email?{email:e.email,onEmailChange:e.onEmailChange}:{email:r,onEmailChange:s},c=e.otp?{otp:e.otp,onOtpChange:e.onOtpChange}:{otp:i,onOtpChange:o};return t==="enterEmail"?p.jsx(GK,{title:e.enterEmailTitle,description:e.enterEmailDescription,cancelFlowButton:e.cancelFlowButton,step:t,setStep:n,...a}):p.jsx(_Y,{email:a.email,onVerified:e.onVerified,cancelFlowButton:e.cancelFlowButton,step:t,setStep:n,showChangeEmailButton:e.showChangeEmailButton,onResendOtp:e.onResendOtp,onVerifyOtp:e.onVerifyOtp,...c})}function yY({onVerify:e,onClose:t,onResendOtp:n}){const{session:r}=lc(),[s,i]=m.useState("");return p.jsx(ji,{testId:"modal-connector-email-verify",isOpen:!0,onClose:t,type:"success",className:"max-w-sm",children:p.jsx(vY,{initialStep:"verifyOtp",email:r?.user?.email,otp:s,onOtpChange:i,onVerified:t,onResendOtp:n,onVerifyOtp:async(o,a)=>{await e(o)},showChangeEmailButton:!1,cancelFlowButton:p.jsx(Ct,{className:"w-full rounded-md",color:"secondary",onClick:t,children:p.jsx(K,{id:"ConnectorEmailVerifyModal.cancel",defaultMessage:"Cancel"})})})})}const bd=new BroadcastChannel("plugin_oauth_channel"),P_e=e=>{bd.postMessage(e)},vv={gdrive_sync_connector:"gdrive_sync_connector",slack_sync_connector:"slack_sync_connector",github_sync_connector:"github_sync_connector",notion_sync_connector:"notion_sync_connector",sharepoint_sync_connector:"sharepoint_sync_connector"},Vn={[M.GDRIVE_ACTION_CONNECTOR]:"connector_5f3c8c41a1e54ad7a76272c89e2554fa",[M.GITHUB_CONNECTOR]:"connector_76869538009648d5b282a4bb21c3d157",[M.LINEAR_CONNECTOR]:"connector_686fad9b54914a35b75be6d06a0f6f31",[M.DROPBOX_CONNECTOR]:"connector_14e85e16800b4e53bc6246019a83a307",[M.HUBSPOT_CONNECTOR]:"connector_2a3c0c472f6f4238b47d41acfb317307",[M.SHAREPOINT_CONNECTOR]:"connector_1e4f6a44acf14e3ca1d96672f8c945bc",[M.GCAL_CONNECTOR]:"connector_947e0d954944416db111db556030eea6",[M.GMAIL_CONNECTOR]:"connector_2128aebfecb84f64a069897515042a44",[M.GOOGLE_CONTACTS_CONNECTOR]:"connector_c0f748249d6a42aea4b00fd375570ded",[M.TEAMS_CONNECTOR]:"connector_246af0940da3457da0e751171dc1ce60",[M.OUTLOOK_EMAIL_CONNECTOR]:"connector_4aaab2856305417b993eca9a216aaf6e",[M.OUTLOOK_CALENDAR_CONNECTOR]:"connector_e6a7394682e24467ac68c60696f275a4",[M.BOX_CONNECTOR]:"connector_2fc94c70cbb74b7caa6d07bf7231202e",[M.INTERCOM_CONNECTOR]:"connector_25f8569426254c019971d2481ddda775",[M.NOTION_CONNECTOR]:"connector_37316be7febe4224b3d31465bae4dbd7",[M.CANVA_CONNECTOR]:"connector_ef718304ffe64e31947b71887e3d51fa",[M.SLACK_CONNECTOR]:"connector_0f9c9d4592e54d0a9a12b3f44a1e2010"},cu={connector_5f3c8c41a1e54ad7a76272c89e2554fa:M.GDRIVE_ACTION_CONNECTOR,connector_76869538009648d5b282a4bb21c3d157:M.GITHUB_CONNECTOR,connector_686fad9b54914a35b75be6d06a0f6f31:M.LINEAR_CONNECTOR,connector_14e85e16800b4e53bc6246019a83a307:M.DROPBOX_CONNECTOR,connector_2a3c0c472f6f4238b47d41acfb317307:M.HUBSPOT_CONNECTOR,connector_1e4f6a44acf14e3ca1d96672f8c945bc:M.SHAREPOINT_CONNECTOR,connector_947e0d954944416db111db556030eea6:M.GCAL_CONNECTOR,connector_2128aebfecb84f64a069897515042a44:M.GMAIL_CONNECTOR,connector_c0f748249d6a42aea4b00fd375570ded:M.GOOGLE_CONTACTS_CONNECTOR,connector_246af0940da3457da0e751171dc1ce60:M.TEAMS_CONNECTOR,connector_4aaab2856305417b993eca9a216aaf6e:M.OUTLOOK_EMAIL_CONNECTOR,connector_e6a7394682e24467ac68c60696f275a4:M.OUTLOOK_CALENDAR_CONNECTOR,connector_2fc94c70cbb74b7caa6d07bf7231202e:M.BOX_CONNECTOR,connector_25f8569426254c019971d2481ddda775:M.INTERCOM_CONNECTOR,connector_37316be7febe4224b3d31465bae4dbd7:M.NOTION_CONNECTOR,connector_ef718304ffe64e31947b71887e3d51fa:M.CANVA_CONNECTOR,connector_6887fff96c948190aa97fd69c3041dea:M.UAE_PASS_CONNECTOR,connector_0f9c9d4592e54d0a9a12b3f44a1e2010:M.SLACK_CONNECTOR};function CY(e){return Object.keys(cu).includes(e)}function D_e(e){return!(e==="web"||e==="cloud"||e in Vn||e in vv)}function yk(e){return typeof window<"u"?`${window.location.origin}/connector_platform_oauth_redirect`:""}const bY="https://github.com/apps/chatgpt-connector/installations/select_target",SY="https://github.com/apps/chatgpt-codex-connector/installations/select_target";function wY(){const e=Y();return we(e,"2477508640")?SY:bY}const EY={[M.GITHUB_CONNECTOR]:"github-connector",[M.GDRIVE_ACTION_CONNECTOR]:"gdrive-connector",[M.LINEAR_CONNECTOR]:"linear-connector",[M.DROPBOX_CONNECTOR]:"dropbox-connector",[M.HUBSPOT_CONNECTOR]:"hubspot-connector",[M.SHAREPOINT_CONNECTOR]:"sharepoint-connector",[M.GCAL_CONNECTOR]:"gcal-connector",[M.GMAIL_CONNECTOR]:"gmail-connector",[M.GOOGLE_CONTACTS_CONNECTOR]:"google-contacts-connector",[M.TEAMS_CONNECTOR]:"teams-connector",[M.OUTLOOK_EMAIL_CONNECTOR]:"outlook-email-connector",[M.OUTLOOK_CALENDAR_CONNECTOR]:"outlook-calendar-connector",[M.BOX_CONNECTOR]:"box-connector",[M.INTERCOM_CONNECTOR]:"intercom-connector",[M.NOTION_CONNECTOR]:"notion-connector",[M.CANVA_CONNECTOR]:"canva-connector",[M.SLACK_CONNECTOR]:"slack-connector"},L_e=({openPopup:e,connectorType:t,customRedirectUrl:n,onError:r,toaster:s,intl:i,productSku:o})=>{const a={connectorId:Vn[t],name:t,actionNames:null,oauthClientId:null,oauthClientScopes:null},c=n??`#settings/${au.Connectors}?scroll=${EY[t]}`;Ck({redirectUri:yk(),connectorPlatformParams:a,redirectTo:c,onError:r,openPopup:e,toaster:s,intl:i,productSku:o})},F_e={[M.GITHUB_CONNECTOR]:Wt.GitHub,[M.GDRIVE_ACTION_CONNECTOR]:Wt.GoogleDrive,[M.DROPBOX_CONNECTOR]:Wt.Dropbox,[M.LINEAR_CONNECTOR]:Wt.Linear,[M.SHAREPOINT_CONNECTOR]:Wt.Sharepoint,[M.TEAMS_CONNECTOR]:Wt.Teams,[M.OUTLOOK_EMAIL_CONNECTOR]:Wt.OutlookEmail,[M.OUTLOOK_CALENDAR_CONNECTOR]:Wt.OutlookCalendar,[M.BOX_CONNECTOR]:Wt.Box,[M.INTERCOM_CONNECTOR]:Wt.Intercom,[M.GCAL_CONNECTOR]:Wt.GoogleCalendar,[M.GMAIL_CONNECTOR]:Wt.Gmail,[M.GOOGLE_CONTACTS_CONNECTOR]:Wt.GoogleContacts,[M.HUBSPOT_CONNECTOR]:Wt.Hubspot,[M.CANVA_CONNECTOR]:Wt.Canva,[M.NOTION_CONNECTOR]:Wt.Notion,[M.SLACK_CONNECTOR]:Wt.Slack},xY=e=>[...Object.values(M),...Object.values(R8)].includes(e)?e:null,j_e=e=>e.map(t=>xY(t)).filter(t=>t!=null);async function Ck({redirectUri:e,connectorPlatformParams:t,redirectTo:n,onError:r,openPopup:s=!1,toaster:i,intl:o,productSku:a}){P.logEventWithStatsig("Connector OAuth Connect","chatgpt_connectors_oauth_connect_initiated",{event:"start",type:t.connectorId});try{const c={connector_id:t.connectorId,oauth_client_id:t.oauthClientId,name:t.name,action_names:t.actionNames,requested_scopes:t.oauthClientScopes,callback_url:e,post_auth_url:n};let l=await H.safePost("/aip/connectors/links/oauth",{requestBody:c,additionalHeaders:a?{[mn]:a}:void 0});l.email_challenge_sent&&await new Promise((f,h)=>{M2(Xe(),({onClose:g})=>qe.createElement(yY,{onClose:()=>{g(),h(null)},onVerify:async _=>{l=await H.safePost("/aip/connectors/links/oauth",{requestBody:{...c,otp_code:_},additionalHeaders:a?{[mn]:a}:void 0}),g(),f()},onResendOtp:async()=>{await H.safePost("/aip/connectors/links/oauth",{requestBody:c,additionalHeaders:a?{[mn]:a}:void 0})}}))});let u=null;CY(t.connectorId)&&cu[t.connectorId]===M.HUBSPOT_CONNECTOR?u=l.redirect_url+"&utm_source=chatgpt":u=l.redirect_url;let d=null;if(s&&(d=window.open("about:blank","_blank")),!d)window.location.href=u;else if(d)return d.location.href=u,new Promise(f=>{const h=g=>{const{error:_,errorDesc:v,errorType:y,connectorId:C,success:E,linkId:b}=g.data;if(g.origin===window.location.origin&&!(C&&t.connectorId!==C)){if(E)P.logEventWithStatsig("Connector OAuth Connect","chatgpt_connectors_oauth_connect_success",{success:!0,type:t.connectorId}),i?.success(o.formatMessage(p1.createLinkSuccess,{connectorName:t.name})),f({success:!0,linkId:b,message:""});else{P.logEventWithStatsig("Connector OAuth Connect","chatgpt_connectors_oauth_connect_error",{success:!1,type:t.connectorId,errorType:y}),y!=="oauth_failed_scope_mismatch"&&i?.danger(o.formatMessage(p1.createLinkError,{connectorName:t.name}),{toastId:"connector_oauth_connect",loggingTitle:p1.createLinkError.defaultMessage,loggingDescription:"Failed to link connector"});const S=`${_}${v?`: ${v}`:""}`;f({errorType:y,success:E,message:S})}bd.removeEventListener("message",h,!1)}};bd.addEventListener("message",h,!1),d.addEventListener("beforeunload",()=>{bd.removeEventListener("message",h,!1)})})}catch(c){if(r)r(c);else throw c}}const U_e={box:M.BOX_CONNECTOR,dropbox:M.DROPBOX_CONNECTOR,github:M.GITHUB_CONNECTOR,gmail:M.GMAIL_CONNECTOR,"google drive":M.GDRIVE_ACTION_CONNECTOR,"google calendar":M.GCAL_CONNECTOR,outlook:M.OUTLOOK_EMAIL_CONNECTOR,"outlook email":M.OUTLOOK_EMAIL_CONNECTOR,"outlook calendar":M.OUTLOOK_CALENDAR_CONNECTOR,sharepoint:M.SHAREPOINT_CONNECTOR,linear:M.LINEAR_CONNECTOR,teams:M.TEAMS_CONNECTOR,intercom:M.INTERCOM_CONNECTOR,hubspot:M.HUBSPOT_CONNECTOR,notion:M.NOTION_CONNECTOR,canva:M.CANVA_CONNECTOR,slack:M.SLACK_CONNECTOR},p1=ze({createLinkSuccess:{id:"KVbj6o",defaultMessage:"{connectorName} is now connected."},createLinkError:{id:"Y6p1d0",defaultMessage:"There was a problem connecting {connectorName}. Try again later."}});function $u(e){switch(e){case M.GOOGLE_CONTACTS_CONNECTOR:return"gcontacts";case M.GMAIL_CONNECTOR:return"gmail";case M.GCAL_CONNECTOR:return"gcal";default:return null}}function TY(e){switch(e){case"gmail":return M.GMAIL_CONNECTOR;case"gcal":return M.GCAL_CONNECTOR;case"gcontacts":return M.GOOGLE_CONTACTS_CONNECTOR;default:return null}}const OY=[X.Slurm,X.Research,Co],kY=e=>{const t=new Map([[void 0,new Set(Object.keys(vv))],[X.Slurm,new Set(Object.keys(vv))],[X.Research,new Set(["web"])],[Co,new Set(["web"])]]);try{const n=AY(e);n&&n.forEach((r,s)=>{OY.includes(s)&&t.set(s,new Set(r))})}catch{}return t},bk="v1.1",Sk=e=>{const t=_t.getItem(Qe.SelectedSources,e);if(!t)return{};try{const{version:n,data:r}=JSON.parse(t);if(n!==bk)return _t.removeItem(Qe.SelectedSources),{};const s=new Map([...r.selected_sources].map(([o,a])=>[o,new Set(a)])),i=new Map((r.selected_mcp_sources??[]).map(([o,a])=>[o,new Set(a)]));return{selectedSources:s,selectedMCPSources:i}}catch{return{}}},AY=e=>Sk(e).selectedSources,MY=e=>Sk(e).selectedMCPSources,IY=e=>MY(e)??new Map,B_e=({selectedSourcesMap:e,selectedMCPSourcesMap:t,scope:n})=>{if(!e&&!t){_t.removeItem(Qe.SelectedSources);return}const r={selected_sources:[...e??new Map].map(([i,o])=>[i,[...o]]),selected_mcp_sources:[...t??new Map].map(([i,o])=>[i,[...o]])},s={version:bk,data:r};_t.setItem(Qe.SelectedSources,JSON.stringify(s),n)},NY="placeholder-";class Or{#e;rootId;constructor(t){const n={};let r;for(const s of t)n[s.id]=s,!r&&s.message.author.role===fe.Root&&(r=s.id);if(!r)throw new Error("Missing root node");this.#e=n,this.rootId=r}static emptyTree(){return new Or([Or.createRootNode("client-created-root")])}static createNode(t,n,r=[],s){const i=s??t.id;if(i===n)throw new Error(`createNode: parent.id and node.id cannot be the same: ${i}`);return{id:i,parentId:n,children:r,message:t}}static createRootNode(t){const n={id:t,author:{role:fe.Root},content:{content_type:Ee.Text,parts:[]}};return Or.createNode(n,"")}messageIdToNodeId(t){return this.messageIdToExistingNodeId(t)??t}messageIdToExistingNodeId(t){if(this.#e[t]!=null)return t;for(const n of Object.values(this.#e))if(n.message?.id===t)return wk(n.id,n.message.id),n.id}containsNodeOrMessageId(t){return this.messageIdToExistingNodeId(t)!=null}getNodeByIdOrMessageId(t){const n=this.getNodeIfExists(t);if(n)return n;throw P.logEvent("chatgpt_conversation_tree__node_not_found",{rootId:this.rootId,nodeOrMessageId:t}),new Error(`getNodeByIdOrMessageId - no node found by id: ${t}`)}getNodeIfExists(t){const n=this.messageIdToExistingNodeId(t);if(n)return this.#e[n]}findNode(t,n,r=this.rootId){const s=this.getNodeIfExists(r);let i=this.getNodeIfExists(n);for(;s&&i&&i!==s;){if(t(i))return i;i=this.getNodeIfExists(i.parentId)}}findFirst(t){let n=this.getNodeByIdOrMessageId(this.rootId);for(;n&&n.children.length===1;)if(n=this.getNodeByIdOrMessageId(n.children[0]),t(n))return n}findFirstFromLeaf(t,n){let r,s=this.getNodeByIdOrMessageId(n);for(;s;)t(s)&&(r=s),s=this.getNodeIfExists(s.parentId);return r}getLeafFromNode(t){let n=this.getNodeByIdOrMessageId(t);for(;n.children.length>0;)n=this.getNodeByIdOrMessageId(n.children[0]);return n}getParent(t){const n=this.getNodeByIdOrMessageId(t).parentId;return this.getNodeByIdOrMessageId(n)}getBranchFromLeaf(t){let n=[],r=this.getNodeByIdOrMessageId(t);for(;r!=null;){if(n.includes(r)){R.addError(`Infinite loop detected in getBranchFromLeaf. Branch already contains node ${r?.id}. Parent id: ${r?.parentId}.`,{branch:n});break}if(n.push(r),r.message.author.role===fe.Root)break;r=this.getNodeByIdOrMessageId(r.parentId)}return n=n.reverse(),n}addMessageNode(t,n){const r=this.messageIdToNodeId(n.id),s=this.getNodeByIdOrMessageId(t),i=Or.createNode(n,s.id,[],r);return this.#e=Sr(this.#e,o=>{o[i.id]=i;const a=o[i.parentId];a.children.includes(i.id)||a.children.push(i.id)}),i.id}prependNode(t,n){const r=this.messageIdToNodeId(n.id),s=this.getNodeByIdOrMessageId(t),i=Or.createNode(n,s.parentId,[s.id],r);this.#e=Sr(this.#e,o=>{o[i.id]=i;const a=o[i.parentId];a.children=a.children.filter(l=>l!==s.id),a.children.includes(i.id)||a.children.push(i.id);const c=o[s.id];c.parentId=i.id})}deleteNode(t){const n=this.getNodeByIdOrMessageId(t);this.#e=Sr(this.#e,r=>{const s=n.parentId,i=n.children;for(const a of i){const c=r[this.messageIdToNodeId(a)];c.parentId=s}const o=r[this.messageIdToNodeId(s)];if(o==null){console.warn(`Cannot deleteNode with nodeId: ${t} - parent not found. Either this is root or in an orphaned branch`);return}o.children=o.children.flatMap(a=>this.messageIdToNodeId(a)===this.messageIdToNodeId(n.id)?i:[a]),delete r[n.id]})}clearNodeMessageParts(t){this.#e=Sr(this.#e,n=>{const r=n[this.messageIdToNodeId(t)];r&&r.message&&"parts"in r.message.content&&(r.message.content.parts=[])})}updateNodeMetadata(t,n){this.#e=Sr(this.#e,r=>{const s=r[this.messageIdToNodeId(t)];s&&(s.message.clientMetadata={...s?.message.clientMetadata,...n})})}updateNodeMessage(t,n){this.#e=Sr(this.#e,r=>{const s=r[this.messageIdToNodeId(t)];if(s){const i=s.message.clientMetadata;s.message=i?{...n,clientMetadata:i}:n}})}updateNodeMessageMetadata(t,n){this.#e=Sr(this.#e,r=>{const s=r[this.messageIdToNodeId(t)];s&&(s.message.metadata={...s.message.metadata,...n})})}prettyPrint(t=this.rootId,n=0){const r=this.getNodeByIdOrMessageId(t),s=Xl(r.message);let i=`${"	".repeat(n)}->${t} - ${s.replaceAll(`
`,"\\n")}
`;const o=r.children.map(a=>this.getNodeByIdOrMessageId(a));for(const a of o)i+=this.prettyPrint(a.id,n+1);return i}}const Z4=new Set;function wk(e,t,n){const r=new Error(`Found TreeNode where message.id ${t} != node.id ${e}`);console.warn(r),Z4.has(e)||(Z4.add(e),n?R.addAction("tree_node_id_mismatch_api",{nodeId:e,messageId:t,conversationId:n}):R.addAction("tree_node_id_mismatch_client",{nodeId:e,messageId:t}))}function RY(e,t){const n=new Set,r=new Set,s=new Set,i=new Map;return(e.moderation_results??[]).forEach(a=>{i.set(a.message_id,a),a.blocked?r.add(a.message_id):a.flagged&&n.add(a.message_id),a.disclaimers?.length&&!a.blocked&&s.add(a.message_id)}),{nodes:Object.values(e.mapping).map(({id:a,parent:c,children:l,message:u})=>{if(!c)return Or.createRootNode(a);if(!u)throw new Error(`Missing message for node ${a}`);a!==u.id&&wk(a,u.id,t);const d={},f=i.get(u.id);let h=!1;if(r.has(u.id)){const _=f?.should_disable_conversation??!1,v=f?.blocked??!1,y=f?.metadata?.safety_limited??!1;Object.assign(d,{isSafetyLimited:y}),Object.assign(d,Qx({isSafetyLimited:y,shouldDisableConversation:_,isModelIncompatibility:v})),h=!0}else n.has(u.id)&&Object.assign(d,Yx);if(s.has(u.id)&&u.author.role!==fe.User){const _=i.get(u.id);_?.disclaimers?.length&&Object.assign(d,Jx(_.disclaimers,h))}const g={...u,clientMetadata:d};return Or.createNode(g,c,l,a)},{}),initialCurrentLeafId:e.current_node}}var Wu={exports:{}},J4;function PY(){if(J4)return Wu.exports;J4=1;var e=typeof Reflect=="object"?Reflect:null,t=e&&typeof e.apply=="function"?e.apply:function(S,w,x){return Function.prototype.apply.call(S,w,x)},n;e&&typeof e.ownKeys=="function"?n=e.ownKeys:Object.getOwnPropertySymbols?n=function(S){return Object.getOwnPropertyNames(S).concat(Object.getOwnPropertySymbols(S))}:n=function(S){return Object.getOwnPropertyNames(S)};function r(b){console&&console.warn&&console.warn(b)}var s=Number.isNaN||function(S){return S!==S};function i(){i.init.call(this)}Wu.exports=i,Wu.exports.once=y,i.EventEmitter=i,i.prototype._events=void 0,i.prototype._eventsCount=0,i.prototype._maxListeners=void 0;var o=10;function a(b){if(typeof b!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof b)}Object.defineProperty(i,"defaultMaxListeners",{enumerable:!0,get:function(){return o},set:function(b){if(typeof b!="number"||b<0||s(b))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+b+".");o=b}}),i.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},i.prototype.setMaxListeners=function(S){if(typeof S!="number"||S<0||s(S))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+S+".");return this._maxListeners=S,this};function c(b){return b._maxListeners===void 0?i.defaultMaxListeners:b._maxListeners}i.prototype.getMaxListeners=function(){return c(this)},i.prototype.emit=function(S){for(var w=[],x=1;x<arguments.length;x++)w.push(arguments[x]);var T=S==="error",O=this._events;if(O!==void 0)T=T&&O.error===void 0;else if(!T)return!1;if(T){var A;if(w.length>0&&(A=w[0]),A instanceof Error)throw A;var k=new Error("Unhandled error."+(A?" ("+A.message+")":""));throw k.context=A,k}var I=O[S];if(I===void 0)return!1;if(typeof I=="function")t(I,this,w);else for(var N=I.length,j=g(I,N),x=0;x<N;++x)t(j[x],this,w);return!0};function l(b,S,w,x){var T,O,A;if(a(w),O=b._events,O===void 0?(O=b._events=Object.create(null),b._eventsCount=0):(O.newListener!==void 0&&(b.emit("newListener",S,w.listener?w.listener:w),O=b._events),A=O[S]),A===void 0)A=O[S]=w,++b._eventsCount;else if(typeof A=="function"?A=O[S]=x?[w,A]:[A,w]:x?A.unshift(w):A.push(w),T=c(b),T>0&&A.length>T&&!A.warned){A.warned=!0;var k=new Error("Possible EventEmitter memory leak detected. "+A.length+" "+String(S)+" listeners added. Use emitter.setMaxListeners() to increase limit");k.name="MaxListenersExceededWarning",k.emitter=b,k.type=S,k.count=A.length,r(k)}return b}i.prototype.addListener=function(S,w){return l(this,S,w,!1)},i.prototype.on=i.prototype.addListener,i.prototype.prependListener=function(S,w){return l(this,S,w,!0)};function u(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function d(b,S,w){var x={fired:!1,wrapFn:void 0,target:b,type:S,listener:w},T=u.bind(x);return T.listener=w,x.wrapFn=T,T}i.prototype.once=function(S,w){return a(w),this.on(S,d(this,S,w)),this},i.prototype.prependOnceListener=function(S,w){return a(w),this.prependListener(S,d(this,S,w)),this},i.prototype.removeListener=function(S,w){var x,T,O,A,k;if(a(w),T=this._events,T===void 0)return this;if(x=T[S],x===void 0)return this;if(x===w||x.listener===w)--this._eventsCount===0?this._events=Object.create(null):(delete T[S],T.removeListener&&this.emit("removeListener",S,x.listener||w));else if(typeof x!="function"){for(O=-1,A=x.length-1;A>=0;A--)if(x[A]===w||x[A].listener===w){k=x[A].listener,O=A;break}if(O<0)return this;O===0?x.shift():_(x,O),x.length===1&&(T[S]=x[0]),T.removeListener!==void 0&&this.emit("removeListener",S,k||w)}return this},i.prototype.off=i.prototype.removeListener,i.prototype.removeAllListeners=function(S){var w,x,T;if(x=this._events,x===void 0)return this;if(x.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):x[S]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete x[S]),this;if(arguments.length===0){var O=Object.keys(x),A;for(T=0;T<O.length;++T)A=O[T],A!=="removeListener"&&this.removeAllListeners(A);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(w=x[S],typeof w=="function")this.removeListener(S,w);else if(w!==void 0)for(T=w.length-1;T>=0;T--)this.removeListener(S,w[T]);return this};function f(b,S,w){var x=b._events;if(x===void 0)return[];var T=x[S];return T===void 0?[]:typeof T=="function"?w?[T.listener||T]:[T]:w?v(T):g(T,T.length)}i.prototype.listeners=function(S){return f(this,S,!0)},i.prototype.rawListeners=function(S){return f(this,S,!1)},i.listenerCount=function(b,S){return typeof b.listenerCount=="function"?b.listenerCount(S):h.call(b,S)},i.prototype.listenerCount=h;function h(b){var S=this._events;if(S!==void 0){var w=S[b];if(typeof w=="function")return 1;if(w!==void 0)return w.length}return 0}i.prototype.eventNames=function(){return this._eventsCount>0?n(this._events):[]};function g(b,S){for(var w=new Array(S),x=0;x<S;++x)w[x]=b[x];return w}function _(b,S){for(;S+1<b.length;S++)b[S]=b[S+1];b.pop()}function v(b){for(var S=new Array(b.length),w=0;w<S.length;++w)S[w]=b[w].listener||b[w];return S}function y(b,S){return new Promise(function(w,x){function T(A){b.removeListener(S,O),x(A)}function O(){typeof b.removeListener=="function"&&b.removeListener("error",T),w([].slice.call(arguments))}E(b,S,O,{once:!0}),S!=="error"&&C(b,T,{once:!0})})}function C(b,S,w){typeof b.on=="function"&&E(b,"error",S,w)}function E(b,S,w,x){if(typeof b.on=="function")x.once?b.once(S,w):b.on(S,w);else if(typeof b.addEventListener=="function")b.addEventListener(S,function T(O){x.once&&b.removeEventListener(S,T),w(O)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof b)}return Wu.exports}var DY=PY();const LY=Ot(DY);class h3{emitter=new LY;constructor(){this.emitter.setMaxListeners(1e3)}on(t,n){return this.emitter.on(t,n),()=>this.emitter.off(t,n)}off(t,n){this.emitter.off(t,n)}publish(t){this.emitter.emit(t.kind,t),this.emitter.emit("anyEvent",t)}}const Ma=new h3;var m1,Q4;function FY(){if(Q4)return m1;Q4=1;function e(t){for(var n=-1,r=t==null?0:t.length,s=0,i=[];++n<r;){var o=t[n];o&&(i[s++]=o)}return i}return m1=e,m1}var jY=FY();const Ek=Ot(jY),UY={},BY=e=>(t,n,r)=>{const s=r.subscribe;return r.subscribe=(o,a,c)=>{let l=o;if(a){const u=c?.equalityFn||Object.is;let d=o(r.getState());l=f=>{const h=o(f);if(!u(d,h)){const g=d;a(d=h,g)}},c?.fireImmediately&&a(d,d)}return s(l)},e(t,n,r)},qY=BY;function GY(e,t){let n;try{n=e()}catch{return}return{getItem:s=>{var i;const o=c=>c===null?null:JSON.parse(c,void 0),a=(i=n.getItem(s))!=null?i:null;return a instanceof Promise?a.then(o):o(a)},setItem:(s,i)=>n.setItem(s,JSON.stringify(i,void 0)),removeItem:s=>n.removeItem(s)}}const Ol=e=>t=>{try{const n=e(t);return n instanceof Promise?n:{then(r){return Ol(r)(n)},catch(r){return this}}}catch(n){return{then(r){return this},catch(r){return Ol(r)(n)}}}},HY=(e,t)=>(n,r,s)=>{let i={getStorage:()=>localStorage,serialize:JSON.stringify,deserialize:JSON.parse,partialize:v=>v,version:0,merge:(v,y)=>({...y,...v}),...t},o=!1;const a=new Set,c=new Set;let l;try{l=i.getStorage()}catch{}if(!l)return e((...v)=>{console.warn(`[zustand persist middleware] Unable to update item '${i.name}', the given storage is currently unavailable.`),n(...v)},r,s);const u=Ol(i.serialize),d=()=>{const v=i.partialize({...r()});let y;const C=u({state:v,version:i.version}).then(E=>l.setItem(i.name,E)).catch(E=>{y=E});if(y)throw y;return C},f=s.setState;s.setState=(v,y)=>{f(v,y),d()};const h=e((...v)=>{n(...v),d()},r,s);let g;const _=()=>{var v;if(!l)return;o=!1,a.forEach(C=>C(r()));const y=((v=i.onRehydrateStorage)==null?void 0:v.call(i,r()))||void 0;return Ol(l.getItem.bind(l))(i.name).then(C=>{if(C)return i.deserialize(C)}).then(C=>{if(C)if(typeof C.version=="number"&&C.version!==i.version){if(i.migrate)return i.migrate(C.state,C.version);console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return C.state}).then(C=>{var E;return g=i.merge(C,(E=r())!=null?E:h),n(g,!0),d()}).then(()=>{y?.(g,void 0),o=!0,c.forEach(C=>C(g))}).catch(C=>{y?.(void 0,C)})};return s.persist={setOptions:v=>{i={...i,...v},v.getStorage&&(l=v.getStorage())},clearStorage:()=>{l?.removeItem(i.name)},getOptions:()=>i,rehydrate:()=>_(),hasHydrated:()=>o,onHydrate:v=>(a.add(v),()=>{a.delete(v)}),onFinishHydration:v=>(c.add(v),()=>{c.delete(v)})},_(),g||h},VY=(e,t)=>(n,r,s)=>{let i={storage:GY(()=>localStorage),partialize:_=>_,version:0,merge:(_,v)=>({...v,..._}),...t},o=!1;const a=new Set,c=new Set;let l=i.storage;if(!l)return e((..._)=>{console.warn(`[zustand persist middleware] Unable to update item '${i.name}', the given storage is currently unavailable.`),n(..._)},r,s);const u=()=>{const _=i.partialize({...r()});return l.setItem(i.name,{state:_,version:i.version})},d=s.setState;s.setState=(_,v)=>{d(_,v),u()};const f=e((..._)=>{n(..._),u()},r,s);s.getInitialState=()=>f;let h;const g=()=>{var _,v;if(!l)return;o=!1,a.forEach(C=>{var E;return C((E=r())!=null?E:f)});const y=((v=i.onRehydrateStorage)==null?void 0:v.call(i,(_=r())!=null?_:f))||void 0;return Ol(l.getItem.bind(l))(i.name).then(C=>{if(C)if(typeof C.version=="number"&&C.version!==i.version){if(i.migrate)return i.migrate(C.state,C.version);console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return C.state}).then(C=>{var E;return h=i.merge(C,(E=r())!=null?E:f),n(h,!0),u()}).then(()=>{y?.(h,void 0),h=r(),o=!0,c.forEach(C=>C(h))}).catch(C=>{y?.(void 0,C)})};return s.persist={setOptions:_=>{i={...i,..._},_.storage&&(l=_.storage)},clearStorage:()=>{l?.removeItem(i.name)},getOptions:()=>i,rehydrate:()=>g(),hasHydrated:()=>o,onHydrate:_=>(a.add(_),()=>{a.delete(_)}),onFinishHydration:_=>(c.add(_),()=>{c.delete(_)})},i.skipHydration||g(),h||f},zY=(e,t)=>"getStorage"in t||"serialize"in t||"deserialize"in t?((UY?"production":void 0)!=="production"&&console.warn("[DEPRECATED] `getStorage`, `serialize` and `deserialize` options are deprecated. Use `storage` option instead."),HY(e,t)):VY(e,t),xk=zY;function Tk(e,t){if(Object.is(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;if(e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;for(const[r,s]of e)if(!Object.is(s,t.get(r)))return!1;return!0}if(e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;for(const r of e)if(!t.has(r))return!1;return!0}const n=Object.keys(e);if(n.length!==Object.keys(t).length)return!1;for(const r of n)if(!Object.prototype.hasOwnProperty.call(t,r)||!Object.is(e[r],t[r]))return!1;return!0}function Ok(e,t){return e.findNode(n=>kk(n,t),t)?.children??WY}function $Y(e,t){return Ok(e,t).find(n=>n===t||n===e.findNode(r=>r.id===n||kk(r,t),t)?.id)}function kk(e,t){return e.id!==t&&(e.children.length>1||!bi(e.message))}const WY=Object.freeze([]);function q_e(){return`${Hy}${dr()}`}let KY=0;function YY(){return KY++}function lu(e){return e.startsWith(Hy)}const Ak=()=>Or.emptyTree(),ZY=Object.freeze({});var p3=(e=>(e.NewChat="NewChat",e.Server="Server",e.User="User",e.Generated="Generated",e.Unknown="Unknown",e))(p3||{});const g1={};function JY(e){return e}const QY=JY,uu=vt(QY(Ri(()=>({threads:{},clientNewThreadIdToServerIdMapping:{},threadRetainCounts:{}})))),er=uu.getState,Ji=uu.setState;function ur(e,t=er()){return lu(e)?t.clientNewThreadIdToServerIdMapping[e]:e}function G_e(e,t=er()){return Object.entries(t.clientNewThreadIdToServerIdMapping).find(([r,s])=>s===e)?.[0]??e}const XY=e=>uu(t=>e?ur(e,t):void 0);function H_e(e,t=er()){for(const[n,r]of Object.entries(t.clientNewThreadIdToServerIdMapping))if(r===e)return n}function yv(e,t=er()){return t.clientNewThreadIdToServerIdMapping[e]??e}function Ht(e,t=er()){const n=yv(e,t);return t.threads[n]}function eZ(e,t){const n=m.useRef(void 0);return m.useMemo(()=>[],[t.clientThreadId]),r=>{const s=e(r);return Tk(n.current,s)||(n.current=s),n.current}}function Hs(e,t,n){return uu(eZ(r=>t(e&&Ht(e,r)),{disablePerfDetector:n?.disablePerfDetector===!0,clientThreadId:e}))}function lt(e,t){Ji(n=>{const r=Ht(e,n);r&&t(r)})}const Z={getGizmoId:e=>e?.mode.kind===St.GizmoInteraction||e?.mode.kind===St.GizmoTest?e.mode.gizmo_id:void 0,getTree:e=>e?.tree??Ak(),getBranch:(e,t=Z.getCurrentLeafId(e))=>e?.tree.getBranchFromLeaf(t)??[],getThreadTitleSource:e=>e?.titleSource??"Unknown",getThreadCreateTime:e=>e?.createTime,getIsNewConversation:e=>Z.getCurrentLeafId(e)===Z.getTree(e).rootId,getCurrentLeafId:e=>e?.currentLeafId??Z.getTree(e).rootId,getCurrentNode:e=>Z.getNode(e,Z.getCurrentLeafId(e)),getNode:(e,t)=>Z.getTree(e).getNodeByIdOrMessageId(t),getParentNode:(e,t)=>Z.getTree(e).getParent(t),getParentPromptNode:(e,t=Z.getCurrentLeafId(e))=>Z.findNode(e,n=>Xx(n.message),t),getAsyncTurns:e=>e?.asyncTurns??ZY,isThreadUrlSafe:(e,t)=>e?.safeUrls.includes(t)??!1,getTurnContentReferences:(e,t)=>Ek(Z.getConversationTurnAtIndex(e,t).messages.flatMap(rZ)??[]),isArchived:e=>e?.isArchived??!1,isStarred:e=>e?.isStarred??!1,getUpdateTime:e=>e?.update_time??(e?.createTime?e.createTime.getTime()/1e3:null),hasUserMessage:e=>Z.findNode(e,t=>ua(t.message))!=null,lastUserMessage:e=>Z.findNode(e,t=>ua(t.message))?.message??null,firstUserMessage:e=>Z.findFirstFromLeaf(e,t=>ua(t.message))?.message??null,isLastActorMessage:(e,t)=>Z.getTree(e).findNode(n=>n.message.author.role===fe.Assistant||n.message.author.role===fe.User||n.message.author.role===fe.Tool&&n.message.author.name===oo.A8KM123,Z.getCurrentLeafId(e),t)==null,findNode:(e,t,n=Z.getCurrentLeafId(e))=>Z.getTree(e).findNode(t,n),findFirstFromLeaf(e,t,n=Z.getCurrentLeafId(e)){return Z.getTree(e).findFirstFromLeaf(t,n)},isMessageTurnEnded:(e,t=Z.getCurrentLeafId(e))=>e?.tree.getNodeByIdOrMessageId(t).message.end_turn??!1,getConversationTurns:(e,t=Z.getCurrentLeafId(e))=>lT(Z.getTree(e),t,!1),getConversationTurnIds:e=>tZ(Z.getConversationTurns(e)),getConversationTurnAtIndex:(e,t,n=Z.getCurrentLeafId(e))=>{const r=Z.getConversationTurns(e,n);if(t>=r.length)throw new Error(`Turn index ${t} out of bounds`);return r[t]},getConversationLastTurn:(e,t=Z.getCurrentLeafId(e))=>Ya(Z.getConversationTurns(e,t)),hasUserContextPrompt:e=>Z.getTree(e).findFirst(t=>t.message.metadata?.is_user_system_message!=null)!=null||e?.sharedConversationMetadata?.hasUserEditableContextFlag!=null,hasModelEditableContext:e=>Z.findNode(e,t=>t.message.content.content_type==="model_editable_context")!=null,hasRecentPIMWarning:e=>{const t=e?.tree.getBranchFromLeaf(e.currentLeafId);if(!t)return!1;for(let n=t.length-1;n>=0;n--){if(t[n].message.author.role===fe.User)return!1;if(t[n].message.metadata?.is_pim_warning)return!0}return!1},getRequestId:(e,t=Z.getCurrentLeafId(e))=>Z.findNode(e,n=>n.message.clientMetadata?.requestId!=null,t)?.message.clientMetadata?.requestId,getLastMessageSystemHints:e=>Z.findNode(e,n=>ua(n.message))?.message.metadata?.system_hints??[],getVariantIds:(e,t=Z.getCurrentLeafId(e))=>Ok(Z.getTree(e),t),getCurrentVariantId:(e,t=Z.getCurrentLeafId(e))=>$Y(Z.getTree(e),t),getIsDoNotRemember:e=>e?.is_do_not_remember??!1,getSuperWidgetMessages:(e,t)=>(t!=null?Z.getConversationTurnAtIndex(e,t).messages:Z.getConversationTurns(e).flatMap(r=>r.messages)).filter(r=>r.content.content_type==="super_widget"),getUserMessages:e=>Z.getConversationTurns(e).flatMap(t=>t.messages).filter(ua),isReasoningResponseMessage:(e,t)=>{const n=Z.getParentNode(e,t)?.message;return n!=null&&eT(n)},isUsingPromptTemplate:e=>e?.isUsingPromptTemplate??!1};let X4=0,eS,tS=[];function tZ(e){const t=e.length,n=Ya(e)?.id;return(X4!==t||eS!==n)&&(X4=t,eS=n,tS=e.map(r=>r.id)),tS}const tr={updateTree(e,t){const n=t(e.tree,Z.getCurrentLeafId(e));e._treeVersion++,n&&(e.currentLeafId=n)},setCurrentBranch(e,t){tr.updateTree(e,n=>n.getLeafFromNode(t).id)},appendMessage(e,t){tr.updateTree(e,(n,r)=>n.addMessageNode(r,t))}},hf={initThread:({clientThreadId:e,conversationMode:t,modelId:n=null,userId:r=void 0,accountId:s=void 0})=>{const i=yv(e);er().threads[i]==null&&Ji(o=>{const a=Or.emptyTree();o.threads[i]={createTime:new Date,isArchived:!1,isStarred:!1,mode:Y_(t),modelId:n,tree:a,_treeVersion:0,title:null,conduitToken:null,prepareState:null,lastPrepareTimestamp:null,titleSource:"NewChat",currentLeafId:a.rootId,safeUrls:[],selectedSources:kY({userId:r,workspaceId:s}),selectedMCPSources:IY({userId:r,workspaceId:s}),startedWithMcp:void 0,hasRemovedWebSource:!1,hasModifiedSources:!1,isLoading:!lu(i),docsReferencedByURL:{},conversationOrigin:null,selectedGithubRepos:new Map,hasModifiedGithubRepos:!1,disabledToolIds:null,is_do_not_remember:!1,prepareRequestBlocked:!1,lastCompletionFinishedTimestamp:null,interruptionInProgress:!1,asyncTurns:{},isUsingPromptTemplate:!1}})},setServerIdForNewThread:(e,t)=>{er().clientNewThreadIdToServerIdMapping[e]===void 0&&Ji(n=>{n.threads[t]=n.threads[e],delete n.threads[e],n.clientNewThreadIdToServerIdMapping[e]=t})},updateThreadFromServer:(e,t,n={})=>{const r=yv(e),{skipIfExisting:s,continuingFromSharedConversationId:i}=n;if(s&&er().threads[r]?.isLoading===!1)return;const o=RY(t,r),a=new Or(o.nodes),c=o.initialCurrentLeafId??a.rootId,l="has_user_editable_context"in t?{hasUserEditableContextFlag:t.has_user_editable_context,authorName:t.author_name,model:"model"in t&&t.model!=null?vT(t.model):void 0}:void 0;let u;{const d=a.getBranchFromLeaf(c);for(const f of d){const h=f.message;if(h.author.role!==fe.User)continue;u=(h.metadata?.selected_mcp_sources??[]).length>0;break}}Ji(d=>{const f=d.threads[r];d.threads[r]={createTime:"create_time"in t?new Date(t.create_time*1e3):void 0,isArchived:t.is_archived??!1,isStarred:t.is_starred??!1,is_do_not_remember:t.is_do_not_remember??!1,selectedSources:f?.selectedSources,selectedMCPSources:f?.selectedMCPSources,startedWithMcp:f?.startedWithMcp??u,mentionedSources:f?.mentionedSources,selectedGithubRepos:f?.selectedGithubRepos??new Map,hasModifiedGithubRepos:f?.hasModifiedGithubRepos??!1,modelId:f?.modelId??null,conduitToken:null,prepareState:null,lastPrepareTimestamp:null,mode:t.gizmo_id!=null?{kind:St.GizmoInteraction,gizmo_id:t.gizmo_id}:{kind:St.PrimaryAssistant},sharedConversationMetadata:Y_(l),title:t.title??null,titleSource:"Server",tree:a,_treeVersion:0,currentLeafId:c,isLoading:!1,continuingFromSharedConversationId:i,continuingFromSharedPostId:n?.continuingFromSharedPostId,forkFromSharedPost:n?.forkFromSharedPost,continuingSharedConversationLastMessageId:i!=null?c:void 0,safeUrls:t.safe_urls??[],hasRemovedWebSource:f?.hasRemovedWebSource??!1,hasModifiedSources:f?.hasModifiedSources??!1,docsReferencedByURL:f?.docsReferencedByURL??{},conversationOrigin:f?.conversationOrigin??t.conversation_origin??null,disabledToolIds:t.disabled_tool_ids??[],update_time:t.update_time??null,scrollToMessageId:f?.scrollToMessageId,prepareRequestBlocked:f?.prepareRequestBlocked??!1,lastCompletionFinishedTimestamp:f?.lastCompletionFinishedTimestamp??null,interruptionInProgress:!1,asyncTurns:{},isUsingPromptTemplate:f?.isUsingPromptTemplate??!1}}),Ma.publish({kind:"createConversation",clientThreadId:e})},deleteThread:e=>{Ji(t=>{delete t.threads[e],delete t.clientNewThreadIdToServerIdMapping[e]})},retainThread:e=>{Ji(t=>{t.threadRetainCounts[e]=(t.threadRetainCounts[e]??0)+1}),clearTimeout(g1[e])},releaseThread:e=>{er().threads[e]!=null&&(Ji(n=>{n.threadRetainCounts[e]=Math.max((n.threadRetainCounts[e]??0)-1,0)}),!(er().threadRetainCounts[e]>0)&&(clearTimeout(g1[e]),g1[e]=setTimeout(()=>{er().threads[e]!=null&&(er().threadRetainCounts[e]>0||hf.deleteThread(e))},3e4)))},resetThread:e=>{lt(e,t=>{t.tree=Ak(),t.currentLeafId=t.tree.rootId})}},nZ=e=>{const t=E2();return Hs(e,n=>n?Z.getGizmoId(n):t)};function V_e({clientThreadId:e}){return Hs(e,t=>{if(!t)return!1;const n=t.tree.getBranchFromLeaf(t.currentLeafId);return n?n.some(r=>r.message.clientMetadata?.errCode===Ka.ContentPolicy&&r.message.clientMetadata.shouldDisableConversation):!1})}function z_e({clientThreadId:e}){return Hs(e,t=>{if(!t)return!1;const n=t.tree.getBranchFromLeaf(t.currentLeafId);return n?n.some(r=>r.message.clientMetadata?.errCode===Ka.ContentPolicy&&r.message.clientMetadata.isSafetyLimited):!1})}const $_e=e=>e?.metadata?.search_result_groups??[],rZ=e=>e?.metadata?.content_references??[],sZ=qr(()=>({}));function iZ(){const e=Y(),t=A8(O8),n=gt(e,"790459319"),r=Do(sZ),s=r.isSingleLine??(t?!0:n.get("single-line",!1)),i=r.isToolsInPlusMenu??(s||t?!0:n.get("tools-in-plus-menu",!1)),o=r.showConnectedApps??n.get("show-connected-apps",!1),a=r.fontSize??n.get("font-size","base"),c=r.hasAddFileSlashCommand??n.get("has-add-file-slash-command",!1),l=r.supportsCollapsedMoreMenu??n.get("collapsed-more-menu",!1),u=r.attachfileRateLimitMessageVariant??n.get("attachfile-rate-limit-message-variant","title_and_description"),d=r.attachfileRateLimitMessageShowIcon??n.get("attachfile-rate-limit-message-show-icon",!0),f=r.fullyCollapsedToolMenu??n.get("fully-collapsed-tool-menu",!1),h=r.showSlashHint??n.get("show-slash-hint",!1);return{isSingleLine:s,isToolsInPlusMenu:i,showConnectedApps:o,fontSize:a,hasAddFileSlashCommand:c,supportsCollapsedMoreMenu:l,attachfileRateLimitMessageVariant:u,attachfileRateLimitMessageShowIcon:d,fullyCollapsedToolMenu:f,showSlashHint:h}}function Jt(e){this.content=e}Jt.prototype={constructor:Jt,find:function(e){for(var t=0;t<this.content.length;t+=2)if(this.content[t]===e)return t;return-1},get:function(e){var t=this.find(e);return t==-1?void 0:this.content[t+1]},update:function(e,t,n){var r=n&&n!=e?this.remove(n):this,s=r.find(e),i=r.content.slice();return s==-1?i.push(n||e,t):(i[s+1]=t,n&&(i[s]=n)),new Jt(i)},remove:function(e){var t=this.find(e);if(t==-1)return this;var n=this.content.slice();return n.splice(t,2),new Jt(n)},addToStart:function(e,t){return new Jt([e,t].concat(this.remove(e).content))},addToEnd:function(e,t){var n=this.remove(e).content.slice();return n.push(e,t),new Jt(n)},addBefore:function(e,t,n){var r=this.remove(t),s=r.content.slice(),i=r.find(e);return s.splice(i==-1?s.length:i,0,t,n),new Jt(s)},forEach:function(e){for(var t=0;t<this.content.length;t+=2)e(this.content[t],this.content[t+1])},prepend:function(e){return e=Jt.from(e),e.size?new Jt(e.content.concat(this.subtract(e).content)):this},append:function(e){return e=Jt.from(e),e.size?new Jt(this.subtract(e).content.concat(e.content)):this},subtract:function(e){var t=this;e=Jt.from(e);for(var n=0;n<e.content.length;n+=2)t=t.remove(e.content[n]);return t},toObject:function(){var e={};return this.forEach(function(t,n){e[t]=n}),e},get size(){return this.content.length>>1}};Jt.from=function(e){if(e instanceof Jt)return e;var t=[];if(e)for(var n in e)t.push(n,e[n]);return new Jt(t)};function Mk(e,t,n){for(let r=0;;r++){if(r==e.childCount||r==t.childCount)return e.childCount==t.childCount?null:n;let s=e.child(r),i=t.child(r);if(s==i){n+=s.nodeSize;continue}if(!s.sameMarkup(i))return n;if(s.isText&&s.text!=i.text){for(let o=0;s.text[o]==i.text[o];o++)n++;return n}if(s.content.size||i.content.size){let o=Mk(s.content,i.content,n+1);if(o!=null)return o}n+=s.nodeSize}}function Ik(e,t,n,r){for(let s=e.childCount,i=t.childCount;;){if(s==0||i==0)return s==i?null:{a:n,b:r};let o=e.child(--s),a=t.child(--i),c=o.nodeSize;if(o==a){n-=c,r-=c;continue}if(!o.sameMarkup(a))return{a:n,b:r};if(o.isText&&o.text!=a.text){let l=0,u=Math.min(o.text.length,a.text.length);for(;l<u&&o.text[o.text.length-l-1]==a.text[a.text.length-l-1];)l++,n--,r--;return{a:n,b:r}}if(o.content.size||a.content.size){let l=Ik(o.content,a.content,n-1,r-1);if(l)return l}n-=c,r-=c}}class W{constructor(t,n){if(this.content=t,this.size=n||0,n==null)for(let r=0;r<t.length;r++)this.size+=t[r].nodeSize}nodesBetween(t,n,r,s=0,i){for(let o=0,a=0;a<n;o++){let c=this.content[o],l=a+c.nodeSize;if(l>t&&r(c,s+a,i||null,o)!==!1&&c.content.size){let u=a+1;c.nodesBetween(Math.max(0,t-u),Math.min(c.content.size,n-u),r,s+u)}a=l}}descendants(t){this.nodesBetween(0,this.size,t)}textBetween(t,n,r,s){let i="",o=!0;return this.nodesBetween(t,n,(a,c)=>{let l=a.isText?a.text.slice(Math.max(t,c)-c,n-c):a.isLeaf?s?typeof s=="function"?s(a):s:a.type.spec.leafText?a.type.spec.leafText(a):"":"";a.isBlock&&(a.isLeaf&&l||a.isTextblock)&&r&&(o?o=!1:i+=r),i+=l},0),i}append(t){if(!t.size)return this;if(!this.size)return t;let n=this.lastChild,r=t.firstChild,s=this.content.slice(),i=0;for(n.isText&&n.sameMarkup(r)&&(s[s.length-1]=n.withText(n.text+r.text),i=1);i<t.content.length;i++)s.push(t.content[i]);return new W(s,this.size+t.size)}cut(t,n=this.size){if(t==0&&n==this.size)return this;let r=[],s=0;if(n>t)for(let i=0,o=0;o<n;i++){let a=this.content[i],c=o+a.nodeSize;c>t&&((o<t||c>n)&&(a.isText?a=a.cut(Math.max(0,t-o),Math.min(a.text.length,n-o)):a=a.cut(Math.max(0,t-o-1),Math.min(a.content.size,n-o-1))),r.push(a),s+=a.nodeSize),o=c}return new W(r,s)}cutByIndex(t,n){return t==n?W.empty:t==0&&n==this.content.length?this:new W(this.content.slice(t,n))}replaceChild(t,n){let r=this.content[t];if(r==n)return this;let s=this.content.slice(),i=this.size+n.nodeSize-r.nodeSize;return s[t]=n,new W(s,i)}addToStart(t){return new W([t].concat(this.content),this.size+t.nodeSize)}addToEnd(t){return new W(this.content.concat(t),this.size+t.nodeSize)}eq(t){if(this.content.length!=t.content.length)return!1;for(let n=0;n<this.content.length;n++)if(!this.content[n].eq(t.content[n]))return!1;return!0}get firstChild(){return this.content.length?this.content[0]:null}get lastChild(){return this.content.length?this.content[this.content.length-1]:null}get childCount(){return this.content.length}child(t){let n=this.content[t];if(!n)throw new RangeError("Index "+t+" out of range for "+this);return n}maybeChild(t){return this.content[t]||null}forEach(t){for(let n=0,r=0;n<this.content.length;n++){let s=this.content[n];t(s,r,n),r+=s.nodeSize}}findDiffStart(t,n=0){return Mk(this,t,n)}findDiffEnd(t,n=this.size,r=t.size){return Ik(this,t,n,r)}findIndex(t,n=-1){if(t==0)return Ku(0,t);if(t==this.size)return Ku(this.content.length,t);if(t>this.size||t<0)throw new RangeError(`Position ${t} outside of fragment (${this})`);for(let r=0,s=0;;r++){let i=this.child(r),o=s+i.nodeSize;if(o>=t)return o==t||n>0?Ku(r+1,o):Ku(r,s);s=o}}toString(){return"<"+this.toStringInner()+">"}toStringInner(){return this.content.join(", ")}toJSON(){return this.content.length?this.content.map(t=>t.toJSON()):null}static fromJSON(t,n){if(!n)return W.empty;if(!Array.isArray(n))throw new RangeError("Invalid input for Fragment.fromJSON");return new W(n.map(t.nodeFromJSON))}static fromArray(t){if(!t.length)return W.empty;let n,r=0;for(let s=0;s<t.length;s++){let i=t[s];r+=i.nodeSize,s&&i.isText&&t[s-1].sameMarkup(i)?(n||(n=t.slice(0,s)),n[n.length-1]=i.withText(n[n.length-1].text+i.text)):n&&n.push(i)}return new W(n||t,r)}static from(t){if(!t)return W.empty;if(t instanceof W)return t;if(Array.isArray(t))return this.fromArray(t);if(t.attrs)return new W([t],t.nodeSize);throw new RangeError("Can not convert "+t+" to a Fragment"+(t.nodesBetween?" (looks like multiple versions of prosemirror-model were loaded)":""))}}W.empty=new W([],0);const _1={index:0,offset:0};function Ku(e,t){return _1.index=e,_1.offset=t,_1}function pf(e,t){if(e===t)return!0;if(!(e&&typeof e=="object")||!(t&&typeof t=="object"))return!1;let n=Array.isArray(e);if(Array.isArray(t)!=n)return!1;if(n){if(e.length!=t.length)return!1;for(let r=0;r<e.length;r++)if(!pf(e[r],t[r]))return!1}else{for(let r in e)if(!(r in t)||!pf(e[r],t[r]))return!1;for(let r in t)if(!(r in e))return!1}return!0}class Ze{constructor(t,n){this.type=t,this.attrs=n}addToSet(t){let n,r=!1;for(let s=0;s<t.length;s++){let i=t[s];if(this.eq(i))return t;if(this.type.excludes(i.type))n||(n=t.slice(0,s));else{if(i.type.excludes(this.type))return t;!r&&i.type.rank>this.type.rank&&(n||(n=t.slice(0,s)),n.push(this),r=!0),n&&n.push(i)}}return n||(n=t.slice()),r||n.push(this),n}removeFromSet(t){for(let n=0;n<t.length;n++)if(this.eq(t[n]))return t.slice(0,n).concat(t.slice(n+1));return t}isInSet(t){for(let n=0;n<t.length;n++)if(this.eq(t[n]))return!0;return!1}eq(t){return this==t||this.type==t.type&&pf(this.attrs,t.attrs)}toJSON(){let t={type:this.type.name};for(let n in this.attrs){t.attrs=this.attrs;break}return t}static fromJSON(t,n){if(!n)throw new RangeError("Invalid input for Mark.fromJSON");let r=t.marks[n.type];if(!r)throw new RangeError(`There is no mark type ${n.type} in this schema`);let s=r.create(n.attrs);return r.checkAttrs(s.attrs),s}static sameSet(t,n){if(t==n)return!0;if(t.length!=n.length)return!1;for(let r=0;r<t.length;r++)if(!t[r].eq(n[r]))return!1;return!0}static setFrom(t){if(!t||Array.isArray(t)&&t.length==0)return Ze.none;if(t instanceof Ze)return[t];let n=t.slice();return n.sort((r,s)=>r.type.rank-s.type.rank),n}}Ze.none=[];class mf extends Error{}class Q{constructor(t,n,r){this.content=t,this.openStart=n,this.openEnd=r}get size(){return this.content.size-this.openStart-this.openEnd}insertAt(t,n){let r=Rk(this.content,t+this.openStart,n);return r&&new Q(r,this.openStart,this.openEnd)}removeBetween(t,n){return new Q(Nk(this.content,t+this.openStart,n+this.openStart),this.openStart,this.openEnd)}eq(t){return this.content.eq(t.content)&&this.openStart==t.openStart&&this.openEnd==t.openEnd}toString(){return this.content+"("+this.openStart+","+this.openEnd+")"}toJSON(){if(!this.content.size)return null;let t={content:this.content.toJSON()};return this.openStart>0&&(t.openStart=this.openStart),this.openEnd>0&&(t.openEnd=this.openEnd),t}static fromJSON(t,n){if(!n)return Q.empty;let r=n.openStart||0,s=n.openEnd||0;if(typeof r!="number"||typeof s!="number")throw new RangeError("Invalid input for Slice.fromJSON");return new Q(W.fromJSON(t,n.content),r,s)}static maxOpen(t,n=!0){let r=0,s=0;for(let i=t.firstChild;i&&!i.isLeaf&&(n||!i.type.spec.isolating);i=i.firstChild)r++;for(let i=t.lastChild;i&&!i.isLeaf&&(n||!i.type.spec.isolating);i=i.lastChild)s++;return new Q(t,r,s)}}Q.empty=new Q(W.empty,0,0);function Nk(e,t,n){let{index:r,offset:s}=e.findIndex(t),i=e.maybeChild(r),{index:o,offset:a}=e.findIndex(n);if(s==t||i.isText){if(a!=n&&!e.child(o).isText)throw new RangeError("Removing non-flat range");return e.cut(0,t).append(e.cut(n))}if(r!=o)throw new RangeError("Removing non-flat range");return e.replaceChild(r,i.copy(Nk(i.content,t-s-1,n-s-1)))}function Rk(e,t,n,r){let{index:s,offset:i}=e.findIndex(t),o=e.maybeChild(s);if(i==t||o.isText)return e.cut(0,t).append(n).append(e.cut(t));let a=Rk(o.content,t-i-1,n);return a&&e.replaceChild(s,o.copy(a))}function oZ(e,t,n){if(n.openStart>e.depth)throw new mf("Inserted content deeper than insertion position");if(e.depth-n.openStart!=t.depth-n.openEnd)throw new mf("Inconsistent open depths");return Pk(e,t,n,0)}function Pk(e,t,n,r){let s=e.index(r),i=e.node(r);if(s==t.index(r)&&r<e.depth-n.openStart){let o=Pk(e,t,n,r+1);return i.copy(i.content.replaceChild(s,o))}else if(n.content.size)if(!n.openStart&&!n.openEnd&&e.depth==r&&t.depth==r){let o=e.parent,a=o.content;return co(o,a.cut(0,e.parentOffset).append(n.content).append(a.cut(t.parentOffset)))}else{let{start:o,end:a}=aZ(n,e);return co(i,Lk(e,o,a,t,r))}else return co(i,gf(e,t,r))}function Dk(e,t){if(!t.type.compatibleContent(e.type))throw new mf("Cannot join "+t.type.name+" onto "+e.type.name)}function Cv(e,t,n){let r=e.node(n);return Dk(r,t.node(n)),r}function ao(e,t){let n=t.length-1;n>=0&&e.isText&&e.sameMarkup(t[n])?t[n]=e.withText(t[n].text+e.text):t.push(e)}function il(e,t,n,r){let s=(t||e).node(n),i=0,o=t?t.index(n):s.childCount;e&&(i=e.index(n),e.depth>n?i++:e.textOffset&&(ao(e.nodeAfter,r),i++));for(let a=i;a<o;a++)ao(s.child(a),r);t&&t.depth==n&&t.textOffset&&ao(t.nodeBefore,r)}function co(e,t){return e.type.checkContent(t),e.copy(t)}function Lk(e,t,n,r,s){let i=e.depth>s&&Cv(e,t,s+1),o=r.depth>s&&Cv(n,r,s+1),a=[];return il(null,e,s,a),i&&o&&t.index(s)==n.index(s)?(Dk(i,o),ao(co(i,Lk(e,t,n,r,s+1)),a)):(i&&ao(co(i,gf(e,t,s+1)),a),il(t,n,s,a),o&&ao(co(o,gf(n,r,s+1)),a)),il(r,null,s,a),new W(a)}function gf(e,t,n){let r=[];if(il(null,e,n,r),e.depth>n){let s=Cv(e,t,n+1);ao(co(s,gf(e,t,n+1)),r)}return il(t,null,n,r),new W(r)}function aZ(e,t){let n=t.depth-e.openStart,s=t.node(n).copy(e.content);for(let i=n-1;i>=0;i--)s=t.node(i).copy(W.from(s));return{start:s.resolveNoCache(e.openStart+n),end:s.resolveNoCache(s.content.size-e.openEnd-n)}}class kl{constructor(t,n,r){this.pos=t,this.path=n,this.parentOffset=r,this.depth=n.length/3-1}resolveDepth(t){return t==null?this.depth:t<0?this.depth+t:t}get parent(){return this.node(this.depth)}get doc(){return this.node(0)}node(t){return this.path[this.resolveDepth(t)*3]}index(t){return this.path[this.resolveDepth(t)*3+1]}indexAfter(t){return t=this.resolveDepth(t),this.index(t)+(t==this.depth&&!this.textOffset?0:1)}start(t){return t=this.resolveDepth(t),t==0?0:this.path[t*3-1]+1}end(t){return t=this.resolveDepth(t),this.start(t)+this.node(t).content.size}before(t){if(t=this.resolveDepth(t),!t)throw new RangeError("There is no position before the top-level node");return t==this.depth+1?this.pos:this.path[t*3-1]}after(t){if(t=this.resolveDepth(t),!t)throw new RangeError("There is no position after the top-level node");return t==this.depth+1?this.pos:this.path[t*3-1]+this.path[t*3].nodeSize}get textOffset(){return this.pos-this.path[this.path.length-1]}get nodeAfter(){let t=this.parent,n=this.index(this.depth);if(n==t.childCount)return null;let r=this.pos-this.path[this.path.length-1],s=t.child(n);return r?t.child(n).cut(r):s}get nodeBefore(){let t=this.index(this.depth),n=this.pos-this.path[this.path.length-1];return n?this.parent.child(t).cut(0,n):t==0?null:this.parent.child(t-1)}posAtIndex(t,n){n=this.resolveDepth(n);let r=this.path[n*3],s=n==0?0:this.path[n*3-1]+1;for(let i=0;i<t;i++)s+=r.child(i).nodeSize;return s}marks(){let t=this.parent,n=this.index();if(t.content.size==0)return Ze.none;if(this.textOffset)return t.child(n).marks;let r=t.maybeChild(n-1),s=t.maybeChild(n);if(!r){let a=r;r=s,s=a}let i=r.marks;for(var o=0;o<i.length;o++)i[o].type.spec.inclusive===!1&&(!s||!i[o].isInSet(s.marks))&&(i=i[o--].removeFromSet(i));return i}marksAcross(t){let n=this.parent.maybeChild(this.index());if(!n||!n.isInline)return null;let r=n.marks,s=t.parent.maybeChild(t.index());for(var i=0;i<r.length;i++)r[i].type.spec.inclusive===!1&&(!s||!r[i].isInSet(s.marks))&&(r=r[i--].removeFromSet(r));return r}sharedDepth(t){for(let n=this.depth;n>0;n--)if(this.start(n)<=t&&this.end(n)>=t)return n;return 0}blockRange(t=this,n){if(t.pos<this.pos)return t.blockRange(this);for(let r=this.depth-(this.parent.inlineContent||this.pos==t.pos?1:0);r>=0;r--)if(t.pos<=this.end(r)&&(!n||n(this.node(r))))return new uZ(this,t,r);return null}sameParent(t){return this.pos-this.parentOffset==t.pos-t.parentOffset}max(t){return t.pos>this.pos?t:this}min(t){return t.pos<this.pos?t:this}toString(){let t="";for(let n=1;n<=this.depth;n++)t+=(t?"/":"")+this.node(n).type.name+"_"+this.index(n-1);return t+":"+this.parentOffset}static resolve(t,n){if(!(n>=0&&n<=t.content.size))throw new RangeError("Position "+n+" out of range");let r=[],s=0,i=n;for(let o=t;;){let{index:a,offset:c}=o.content.findIndex(i),l=i-c;if(r.push(o,a,s+c),!l||(o=o.child(a),o.isText))break;i=l-1,s+=c+1}return new kl(n,r,i)}static resolveCached(t,n){let r=nS.get(t);if(r)for(let i=0;i<r.elts.length;i++){let o=r.elts[i];if(o.pos==n)return o}else nS.set(t,r=new cZ);let s=r.elts[r.i]=kl.resolve(t,n);return r.i=(r.i+1)%lZ,s}}class cZ{constructor(){this.elts=[],this.i=0}}const lZ=12,nS=new WeakMap;class uZ{constructor(t,n,r){this.$from=t,this.$to=n,this.depth=r}get start(){return this.$from.before(this.depth+1)}get end(){return this.$to.after(this.depth+1)}get parent(){return this.$from.node(this.depth)}get startIndex(){return this.$from.index(this.depth)}get endIndex(){return this.$to.indexAfter(this.depth)}}const dZ=Object.create(null);let lo=class bv{constructor(t,n,r,s=Ze.none){this.type=t,this.attrs=n,this.marks=s,this.content=r||W.empty}get nodeSize(){return this.isLeaf?1:2+this.content.size}get childCount(){return this.content.childCount}child(t){return this.content.child(t)}maybeChild(t){return this.content.maybeChild(t)}forEach(t){this.content.forEach(t)}nodesBetween(t,n,r,s=0){this.content.nodesBetween(t,n,r,s,this)}descendants(t){this.nodesBetween(0,this.content.size,t)}get textContent(){return this.isLeaf&&this.type.spec.leafText?this.type.spec.leafText(this):this.textBetween(0,this.content.size,"")}textBetween(t,n,r,s){return this.content.textBetween(t,n,r,s)}get firstChild(){return this.content.firstChild}get lastChild(){return this.content.lastChild}eq(t){return this==t||this.sameMarkup(t)&&this.content.eq(t.content)}sameMarkup(t){return this.hasMarkup(t.type,t.attrs,t.marks)}hasMarkup(t,n,r){return this.type==t&&pf(this.attrs,n||t.defaultAttrs||dZ)&&Ze.sameSet(this.marks,r||Ze.none)}copy(t=null){return t==this.content?this:new bv(this.type,this.attrs,t,this.marks)}mark(t){return t==this.marks?this:new bv(this.type,this.attrs,this.content,t)}cut(t,n=this.content.size){return t==0&&n==this.content.size?this:this.copy(this.content.cut(t,n))}slice(t,n=this.content.size,r=!1){if(t==n)return Q.empty;let s=this.resolve(t),i=this.resolve(n),o=r?0:s.sharedDepth(n),a=s.start(o),l=s.node(o).content.cut(s.pos-a,i.pos-a);return new Q(l,s.depth-o,i.depth-o)}replace(t,n,r){return oZ(this.resolve(t),this.resolve(n),r)}nodeAt(t){for(let n=this;;){let{index:r,offset:s}=n.content.findIndex(t);if(n=n.maybeChild(r),!n)return null;if(s==t||n.isText)return n;t-=s+1}}childAfter(t){let{index:n,offset:r}=this.content.findIndex(t);return{node:this.content.maybeChild(n),index:n,offset:r}}childBefore(t){if(t==0)return{node:null,index:0,offset:0};let{index:n,offset:r}=this.content.findIndex(t);if(r<t)return{node:this.content.child(n),index:n,offset:r};let s=this.content.child(n-1);return{node:s,index:n-1,offset:r-s.nodeSize}}resolve(t){return kl.resolveCached(this,t)}resolveNoCache(t){return kl.resolve(this,t)}rangeHasMark(t,n,r){let s=!1;return n>t&&this.nodesBetween(t,n,i=>(r.isInSet(i.marks)&&(s=!0),!s)),s}get isBlock(){return this.type.isBlock}get isTextblock(){return this.type.isTextblock}get inlineContent(){return this.type.inlineContent}get isInline(){return this.type.isInline}get isText(){return this.type.isText}get isLeaf(){return this.type.isLeaf}get isAtom(){return this.type.isAtom}toString(){if(this.type.spec.toDebugString)return this.type.spec.toDebugString(this);let t=this.type.name;return this.content.size&&(t+="("+this.content.toStringInner()+")"),Fk(this.marks,t)}contentMatchAt(t){let n=this.type.contentMatch.matchFragment(this.content,0,t);if(!n)throw new Error("Called contentMatchAt on a node with invalid content");return n}canReplace(t,n,r=W.empty,s=0,i=r.childCount){let o=this.contentMatchAt(t).matchFragment(r,s,i),a=o&&o.matchFragment(this.content,n);if(!a||!a.validEnd)return!1;for(let c=s;c<i;c++)if(!this.type.allowsMarks(r.child(c).marks))return!1;return!0}canReplaceWith(t,n,r,s){if(s&&!this.type.allowsMarks(s))return!1;let i=this.contentMatchAt(t).matchType(r),o=i&&i.matchFragment(this.content,n);return o?o.validEnd:!1}canAppend(t){return t.content.size?this.canReplace(this.childCount,this.childCount,t.content):this.type.compatibleContent(t.type)}check(){this.type.checkContent(this.content),this.type.checkAttrs(this.attrs);let t=Ze.none;for(let n=0;n<this.marks.length;n++){let r=this.marks[n];r.type.checkAttrs(r.attrs),t=r.addToSet(t)}if(!Ze.sameSet(t,this.marks))throw new RangeError(`Invalid collection of marks for node ${this.type.name}: ${this.marks.map(n=>n.type.name)}`);this.content.forEach(n=>n.check())}toJSON(){let t={type:this.type.name};for(let n in this.attrs){t.attrs=this.attrs;break}return this.content.size&&(t.content=this.content.toJSON()),this.marks.length&&(t.marks=this.marks.map(n=>n.toJSON())),t}static fromJSON(t,n){if(!n)throw new RangeError("Invalid input for Node.fromJSON");let r;if(n.marks){if(!Array.isArray(n.marks))throw new RangeError("Invalid mark data for Node.fromJSON");r=n.marks.map(t.markFromJSON)}if(n.type=="text"){if(typeof n.text!="string")throw new RangeError("Invalid text node in JSON");return t.text(n.text,r)}let s=W.fromJSON(t,n.content),i=t.nodeType(n.type).create(n.attrs,s,r);return i.type.checkAttrs(i.attrs),i}};lo.prototype.text=void 0;class _f extends lo{constructor(t,n,r,s){if(super(t,n,null,s),!r)throw new RangeError("Empty text nodes are not allowed");this.text=r}toString(){return this.type.spec.toDebugString?this.type.spec.toDebugString(this):Fk(this.marks,JSON.stringify(this.text))}get textContent(){return this.text}textBetween(t,n){return this.text.slice(t,n)}get nodeSize(){return this.text.length}mark(t){return t==this.marks?this:new _f(this.type,this.attrs,this.text,t)}withText(t){return t==this.text?this:new _f(this.type,this.attrs,t,this.marks)}cut(t=0,n=this.text.length){return t==0&&n==this.text.length?this:this.withText(this.text.slice(t,n))}eq(t){return this.sameMarkup(t)&&this.text==t.text}toJSON(){let t=super.toJSON();return t.text=this.text,t}}function Fk(e,t){for(let n=e.length-1;n>=0;n--)t=e[n].type.name+"("+t+")";return t}class xo{constructor(t){this.validEnd=t,this.next=[],this.wrapCache=[]}static parse(t,n){let r=new fZ(t,n);if(r.next==null)return xo.empty;let s=jk(r);r.next&&r.err("Unexpected trailing text");let i=yZ(vZ(s));return CZ(i,r),i}matchType(t){for(let n=0;n<this.next.length;n++)if(this.next[n].type==t)return this.next[n].next;return null}matchFragment(t,n=0,r=t.childCount){let s=this;for(let i=n;s&&i<r;i++)s=s.matchType(t.child(i).type);return s}get inlineContent(){return this.next.length!=0&&this.next[0].type.isInline}get defaultType(){for(let t=0;t<this.next.length;t++){let{type:n}=this.next[t];if(!(n.isText||n.hasRequiredAttrs()))return n}return null}compatible(t){for(let n=0;n<this.next.length;n++)for(let r=0;r<t.next.length;r++)if(this.next[n].type==t.next[r].type)return!0;return!1}fillBefore(t,n=!1,r=0){let s=[this];function i(o,a){let c=o.matchFragment(t,r);if(c&&(!n||c.validEnd))return W.from(a.map(l=>l.createAndFill()));for(let l=0;l<o.next.length;l++){let{type:u,next:d}=o.next[l];if(!(u.isText||u.hasRequiredAttrs())&&s.indexOf(d)==-1){s.push(d);let f=i(d,a.concat(u));if(f)return f}}return null}return i(this,[])}findWrapping(t){for(let r=0;r<this.wrapCache.length;r+=2)if(this.wrapCache[r]==t)return this.wrapCache[r+1];let n=this.computeWrapping(t);return this.wrapCache.push(t,n),n}computeWrapping(t){let n=Object.create(null),r=[{match:this,type:null,via:null}];for(;r.length;){let s=r.shift(),i=s.match;if(i.matchType(t)){let o=[];for(let a=s;a.type;a=a.via)o.push(a.type);return o.reverse()}for(let o=0;o<i.next.length;o++){let{type:a,next:c}=i.next[o];!a.isLeaf&&!a.hasRequiredAttrs()&&!(a.name in n)&&(!s.type||c.validEnd)&&(r.push({match:a.contentMatch,type:a,via:s}),n[a.name]=!0)}}return null}get edgeCount(){return this.next.length}edge(t){if(t>=this.next.length)throw new RangeError(`There's no ${t}th edge in this content match`);return this.next[t]}toString(){let t=[];function n(r){t.push(r);for(let s=0;s<r.next.length;s++)t.indexOf(r.next[s].next)==-1&&n(r.next[s].next)}return n(this),t.map((r,s)=>{let i=s+(r.validEnd?"*":" ")+" ";for(let o=0;o<r.next.length;o++)i+=(o?", ":"")+r.next[o].type.name+"->"+t.indexOf(r.next[o].next);return i}).join(`
`)}}xo.empty=new xo(!0);class fZ{constructor(t,n){this.string=t,this.nodeTypes=n,this.inline=null,this.pos=0,this.tokens=t.split(/\s*(?=\b|\W|$)/),this.tokens[this.tokens.length-1]==""&&this.tokens.pop(),this.tokens[0]==""&&this.tokens.shift()}get next(){return this.tokens[this.pos]}eat(t){return this.next==t&&(this.pos++||!0)}err(t){throw new SyntaxError(t+" (in content expression '"+this.string+"')")}}function jk(e){let t=[];do t.push(hZ(e));while(e.eat("|"));return t.length==1?t[0]:{type:"choice",exprs:t}}function hZ(e){let t=[];do t.push(pZ(e));while(e.next&&e.next!=")"&&e.next!="|");return t.length==1?t[0]:{type:"seq",exprs:t}}function pZ(e){let t=_Z(e);for(;;)if(e.eat("+"))t={type:"plus",expr:t};else if(e.eat("*"))t={type:"star",expr:t};else if(e.eat("?"))t={type:"opt",expr:t};else if(e.eat("{"))t=mZ(e,t);else break;return t}function rS(e){/\D/.test(e.next)&&e.err("Expected number, got '"+e.next+"'");let t=Number(e.next);return e.pos++,t}function mZ(e,t){let n=rS(e),r=n;return e.eat(",")&&(e.next!="}"?r=rS(e):r=-1),e.eat("}")||e.err("Unclosed braced range"),{type:"range",min:n,max:r,expr:t}}function gZ(e,t){let n=e.nodeTypes,r=n[t];if(r)return[r];let s=[];for(let i in n){let o=n[i];o.groups.indexOf(t)>-1&&s.push(o)}return s.length==0&&e.err("No node type or group '"+t+"' found"),s}function _Z(e){if(e.eat("(")){let t=jk(e);return e.eat(")")||e.err("Missing closing paren"),t}else if(/\W/.test(e.next))e.err("Unexpected token '"+e.next+"'");else{let t=gZ(e,e.next).map(n=>(e.inline==null?e.inline=n.isInline:e.inline!=n.isInline&&e.err("Mixing inline and block content"),{type:"name",value:n}));return e.pos++,t.length==1?t[0]:{type:"choice",exprs:t}}}function vZ(e){let t=[[]];return s(i(e,0),n()),t;function n(){return t.push([])-1}function r(o,a,c){let l={term:c,to:a};return t[o].push(l),l}function s(o,a){o.forEach(c=>c.to=a)}function i(o,a){if(o.type=="choice")return o.exprs.reduce((c,l)=>c.concat(i(l,a)),[]);if(o.type=="seq")for(let c=0;;c++){let l=i(o.exprs[c],a);if(c==o.exprs.length-1)return l;s(l,a=n())}else if(o.type=="star"){let c=n();return r(a,c),s(i(o.expr,c),c),[r(c)]}else if(o.type=="plus"){let c=n();return s(i(o.expr,a),c),s(i(o.expr,c),c),[r(c)]}else{if(o.type=="opt")return[r(a)].concat(i(o.expr,a));if(o.type=="range"){let c=a;for(let l=0;l<o.min;l++){let u=n();s(i(o.expr,c),u),c=u}if(o.max==-1)s(i(o.expr,c),c);else for(let l=o.min;l<o.max;l++){let u=n();r(c,u),s(i(o.expr,c),u),c=u}return[r(c)]}else{if(o.type=="name")return[r(a,void 0,o.value)];throw new Error("Unknown expr type")}}}}function Uk(e,t){return t-e}function sS(e,t){let n=[];return r(t),n.sort(Uk);function r(s){let i=e[s];if(i.length==1&&!i[0].term)return r(i[0].to);n.push(s);for(let o=0;o<i.length;o++){let{term:a,to:c}=i[o];!a&&n.indexOf(c)==-1&&r(c)}}}function yZ(e){let t=Object.create(null);return n(sS(e,0));function n(r){let s=[];r.forEach(o=>{e[o].forEach(({term:a,to:c})=>{if(!a)return;let l;for(let u=0;u<s.length;u++)s[u][0]==a&&(l=s[u][1]);sS(e,c).forEach(u=>{l||s.push([a,l=[]]),l.indexOf(u)==-1&&l.push(u)})})});let i=t[r.join(",")]=new xo(r.indexOf(e.length-1)>-1);for(let o=0;o<s.length;o++){let a=s[o][1].sort(Uk);i.next.push({type:s[o][0],next:t[a.join(",")]||n(a)})}return i}}function CZ(e,t){for(let n=0,r=[e];n<r.length;n++){let s=r[n],i=!s.validEnd,o=[];for(let a=0;a<s.next.length;a++){let{type:c,next:l}=s.next[a];o.push(c.name),i&&!(c.isText||c.hasRequiredAttrs())&&(i=!1),r.indexOf(l)==-1&&r.push(l)}i&&t.err("Only non-generatable nodes ("+o.join(", ")+") in a required position (see https://prosemirror.net/docs/guide/#generatable)")}}function Bk(e){let t=Object.create(null);for(let n in e){let r=e[n];if(!r.hasDefault)return null;t[n]=r.default}return t}function qk(e,t){let n=Object.create(null);for(let r in e){let s=t&&t[r];if(s===void 0){let i=e[r];if(i.hasDefault)s=i.default;else throw new RangeError("No value supplied for attribute "+r)}n[r]=s}return n}function Gk(e,t,n,r){for(let s in t)if(!(s in e))throw new RangeError(`Unsupported attribute ${s} for ${n} of type ${s}`);for(let s in e){let i=e[s];i.validate&&i.validate(t[s])}}function Hk(e,t){let n=Object.create(null);if(t)for(let r in t)n[r]=new SZ(e,r,t[r]);return n}let iS=class Vk{constructor(t,n,r){this.name=t,this.schema=n,this.spec=r,this.markSet=null,this.groups=r.group?r.group.split(" "):[],this.attrs=Hk(t,r.attrs),this.defaultAttrs=Bk(this.attrs),this.contentMatch=null,this.inlineContent=null,this.isBlock=!(r.inline||t=="text"),this.isText=t=="text"}get isInline(){return!this.isBlock}get isTextblock(){return this.isBlock&&this.inlineContent}get isLeaf(){return this.contentMatch==xo.empty}get isAtom(){return this.isLeaf||!!this.spec.atom}get whitespace(){return this.spec.whitespace||(this.spec.code?"pre":"normal")}hasRequiredAttrs(){for(let t in this.attrs)if(this.attrs[t].isRequired)return!0;return!1}compatibleContent(t){return this==t||this.contentMatch.compatible(t.contentMatch)}computeAttrs(t){return!t&&this.defaultAttrs?this.defaultAttrs:qk(this.attrs,t)}create(t=null,n,r){if(this.isText)throw new Error("NodeType.create can't construct text nodes");return new lo(this,this.computeAttrs(t),W.from(n),Ze.setFrom(r))}createChecked(t=null,n,r){return n=W.from(n),this.checkContent(n),new lo(this,this.computeAttrs(t),n,Ze.setFrom(r))}createAndFill(t=null,n,r){if(t=this.computeAttrs(t),n=W.from(n),n.size){let o=this.contentMatch.fillBefore(n);if(!o)return null;n=o.append(n)}let s=this.contentMatch.matchFragment(n),i=s&&s.fillBefore(W.empty,!0);return i?new lo(this,t,n.append(i),Ze.setFrom(r)):null}validContent(t){let n=this.contentMatch.matchFragment(t);if(!n||!n.validEnd)return!1;for(let r=0;r<t.childCount;r++)if(!this.allowsMarks(t.child(r).marks))return!1;return!0}checkContent(t){if(!this.validContent(t))throw new RangeError(`Invalid content for node ${this.name}: ${t.toString().slice(0,50)}`)}checkAttrs(t){Gk(this.attrs,t,"node",this.name)}allowsMarkType(t){return this.markSet==null||this.markSet.indexOf(t)>-1}allowsMarks(t){if(this.markSet==null)return!0;for(let n=0;n<t.length;n++)if(!this.allowsMarkType(t[n].type))return!1;return!0}allowedMarks(t){if(this.markSet==null)return t;let n;for(let r=0;r<t.length;r++)this.allowsMarkType(t[r].type)?n&&n.push(t[r]):n||(n=t.slice(0,r));return n?n.length?n:Ze.none:t}static compile(t,n){let r=Object.create(null);t.forEach((i,o)=>r[i]=new Vk(i,n,o));let s=n.spec.topNode||"doc";if(!r[s])throw new RangeError("Schema is missing its top node type ('"+s+"')");if(!r.text)throw new RangeError("Every schema needs a 'text' type");for(let i in r.text.attrs)throw new RangeError("The text node type should not have attributes");return r}};function bZ(e,t,n){let r=n.split("|");return s=>{let i=s===null?"null":typeof s;if(r.indexOf(i)<0)throw new RangeError(`Expected value of type ${r} for attribute ${t} on type ${e}, got ${i}`)}}class SZ{constructor(t,n,r){this.hasDefault=Object.prototype.hasOwnProperty.call(r,"default"),this.default=r.default,this.validate=typeof r.validate=="string"?bZ(t,n,r.validate):r.validate}get isRequired(){return!this.hasDefault}}class Jh{constructor(t,n,r,s){this.name=t,this.rank=n,this.schema=r,this.spec=s,this.attrs=Hk(t,s.attrs),this.excluded=null;let i=Bk(this.attrs);this.instance=i?new Ze(this,i):null}create(t=null){return!t&&this.instance?this.instance:new Ze(this,qk(this.attrs,t))}static compile(t,n){let r=Object.create(null),s=0;return t.forEach((i,o)=>r[i]=new Jh(i,s++,n,o)),r}removeFromSet(t){for(var n=0;n<t.length;n++)t[n].type==this&&(t=t.slice(0,n).concat(t.slice(n+1)),n--);return t}isInSet(t){for(let n=0;n<t.length;n++)if(t[n].type==this)return t[n]}checkAttrs(t){Gk(this.attrs,t,"mark",this.name)}excludes(t){return this.excluded.indexOf(t)>-1}}class wZ{constructor(t){this.linebreakReplacement=null,this.cached=Object.create(null);let n=this.spec={};for(let s in t)n[s]=t[s];n.nodes=Jt.from(t.nodes),n.marks=Jt.from(t.marks||{}),this.nodes=iS.compile(this.spec.nodes,this),this.marks=Jh.compile(this.spec.marks,this);let r=Object.create(null);for(let s in this.nodes){if(s in this.marks)throw new RangeError(s+" can not be both a node and a mark");let i=this.nodes[s],o=i.spec.content||"",a=i.spec.marks;if(i.contentMatch=r[o]||(r[o]=xo.parse(o,this.nodes)),i.inlineContent=i.contentMatch.inlineContent,i.spec.linebreakReplacement){if(this.linebreakReplacement)throw new RangeError("Multiple linebreak nodes defined");if(!i.isInline||!i.isLeaf)throw new RangeError("Linebreak replacement nodes must be inline leaf nodes");this.linebreakReplacement=i}i.markSet=a=="_"?null:a?oS(this,a.split(" ")):a==""||!i.inlineContent?[]:null}for(let s in this.marks){let i=this.marks[s],o=i.spec.excludes;i.excluded=o==null?[i]:o==""?[]:oS(this,o.split(" "))}this.nodeFromJSON=this.nodeFromJSON.bind(this),this.markFromJSON=this.markFromJSON.bind(this),this.topNodeType=this.nodes[this.spec.topNode||"doc"],this.cached.wrappings=Object.create(null)}node(t,n=null,r,s){if(typeof t=="string")t=this.nodeType(t);else if(t instanceof iS){if(t.schema!=this)throw new RangeError("Node type from different schema used ("+t.name+")")}else throw new RangeError("Invalid node type: "+t);return t.createChecked(n,r,s)}text(t,n){let r=this.nodes.text;return new _f(r,r.defaultAttrs,t,Ze.setFrom(n))}mark(t,n){return typeof t=="string"&&(t=this.marks[t]),t.create(n)}nodeFromJSON(t){return lo.fromJSON(this,t)}markFromJSON(t){return Ze.fromJSON(this,t)}nodeType(t){let n=this.nodes[t];if(!n)throw new RangeError("Unknown node type: "+t);return n}}function oS(e,t){let n=[];for(let r=0;r<t.length;r++){let s=t[r],i=e.marks[s],o=i;if(i)n.push(i);else for(let a in e.marks){let c=e.marks[a];(s=="_"||c.spec.group&&c.spec.group.split(" ").indexOf(s)>-1)&&n.push(o=c)}if(!o)throw new SyntaxError("Unknown mark type: '"+t[r]+"'")}return n}function EZ(e){return e.tag!=null}function xZ(e){return e.style!=null}class Al{constructor(t,n){this.schema=t,this.rules=n,this.tags=[],this.styles=[];let r=this.matchedStyles=[];n.forEach(s=>{if(EZ(s))this.tags.push(s);else if(xZ(s)){let i=/[^=]*/.exec(s.style)[0];r.indexOf(i)<0&&r.push(i),this.styles.push(s)}}),this.normalizeLists=!this.tags.some(s=>{if(!/^(ul|ol)\b/.test(s.tag)||!s.node)return!1;let i=t.nodes[s.node];return i.contentMatch.matchType(i)})}parse(t,n={}){let r=new cS(this,n,!1);return r.addAll(t,n.from,n.to),r.finish()}parseSlice(t,n={}){let r=new cS(this,n,!0);return r.addAll(t,n.from,n.to),Q.maxOpen(r.finish())}matchTag(t,n,r){for(let s=r?this.tags.indexOf(r)+1:0;s<this.tags.length;s++){let i=this.tags[s];if(kZ(t,i.tag)&&(i.namespace===void 0||t.namespaceURI==i.namespace)&&(!i.context||n.matchesContext(i.context))){if(i.getAttrs){let o=i.getAttrs(t);if(o===!1)continue;i.attrs=o||void 0}return i}}}matchStyle(t,n,r,s){for(let i=s?this.styles.indexOf(s)+1:0;i<this.styles.length;i++){let o=this.styles[i],a=o.style;if(!(a.indexOf(t)!=0||o.context&&!r.matchesContext(o.context)||a.length>t.length&&(a.charCodeAt(t.length)!=61||a.slice(t.length+1)!=n))){if(o.getAttrs){let c=o.getAttrs(n);if(c===!1)continue;o.attrs=c||void 0}return o}}}static schemaRules(t){let n=[];function r(s){let i=s.priority==null?50:s.priority,o=0;for(;o<n.length;o++){let a=n[o];if((a.priority==null?50:a.priority)<i)break}n.splice(o,0,s)}for(let s in t.marks){let i=t.marks[s].spec.parseDOM;i&&i.forEach(o=>{r(o=lS(o)),o.mark||o.ignore||o.clearMark||(o.mark=s)})}for(let s in t.nodes){let i=t.nodes[s].spec.parseDOM;i&&i.forEach(o=>{r(o=lS(o)),o.node||o.ignore||o.mark||(o.node=s)})}return n}static fromSchema(t){return t.cached.domParser||(t.cached.domParser=new Al(t,Al.schemaRules(t)))}}const zk={address:!0,article:!0,aside:!0,blockquote:!0,canvas:!0,dd:!0,div:!0,dl:!0,fieldset:!0,figcaption:!0,figure:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,li:!0,noscript:!0,ol:!0,output:!0,p:!0,pre:!0,section:!0,table:!0,tfoot:!0,ul:!0},TZ={head:!0,noscript:!0,object:!0,script:!0,style:!0,title:!0},$k={ol:!0,ul:!0},vf=1,yf=2,Sd=4;function aS(e,t,n){return t!=null?(t?vf:0)|(t==="full"?yf:0):e&&e.whitespace=="pre"?vf|yf:n&-5}class Yu{constructor(t,n,r,s,i,o,a){this.type=t,this.attrs=n,this.marks=r,this.pendingMarks=s,this.solid=i,this.options=a,this.content=[],this.activeMarks=Ze.none,this.stashMarks=[],this.match=o||(a&Sd?null:t.contentMatch)}findWrapping(t){if(!this.match){if(!this.type)return[];let n=this.type.contentMatch.fillBefore(W.from(t));if(n)this.match=this.type.contentMatch.matchFragment(n);else{let r=this.type.contentMatch,s;return(s=r.findWrapping(t.type))?(this.match=r,s):null}}return this.match.findWrapping(t.type)}finish(t){if(!(this.options&vf)){let r=this.content[this.content.length-1],s;if(r&&r.isText&&(s=/[ \t\r\n\u000c]+$/.exec(r.text))){let i=r;r.text.length==s[0].length?this.content.pop():this.content[this.content.length-1]=i.withText(i.text.slice(0,i.text.length-s[0].length))}}let n=W.from(this.content);return!t&&this.match&&(n=n.append(this.match.fillBefore(W.empty,!0))),this.type?this.type.create(this.attrs,n,this.marks):n}popFromStashMark(t){for(let n=this.stashMarks.length-1;n>=0;n--)if(t.eq(this.stashMarks[n]))return this.stashMarks.splice(n,1)[0]}applyPending(t){for(let n=0,r=this.pendingMarks;n<r.length;n++){let s=r[n];(this.type?this.type.allowsMarkType(s.type):AZ(s.type,t))&&!s.isInSet(this.activeMarks)&&(this.activeMarks=s.addToSet(this.activeMarks),this.pendingMarks=s.removeFromSet(this.pendingMarks))}}inlineContext(t){return this.type?this.type.inlineContent:this.content.length?this.content[0].isInline:t.parentNode&&!zk.hasOwnProperty(t.parentNode.nodeName.toLowerCase())}}class cS{constructor(t,n,r){this.parser=t,this.options=n,this.isOpen=r,this.open=0;let s=n.topNode,i,o=aS(null,n.preserveWhitespace,0)|(r?Sd:0);s?i=new Yu(s.type,s.attrs,Ze.none,Ze.none,!0,n.topMatch||s.type.contentMatch,o):r?i=new Yu(null,null,Ze.none,Ze.none,!0,null,o):i=new Yu(t.schema.topNodeType,null,Ze.none,Ze.none,!0,null,o),this.nodes=[i],this.find=n.findPositions,this.needsBlock=!1}get top(){return this.nodes[this.open]}addDOM(t){t.nodeType==3?this.addTextNode(t):t.nodeType==1&&this.addElement(t)}withStyleRules(t,n){let r=t.style;if(!r||!r.length)return n();let s=this.readStyles(t.style);if(!s)return;let[i,o]=s,a=this.top;for(let c=0;c<o.length;c++)this.removePendingMark(o[c],a);for(let c=0;c<i.length;c++)this.addPendingMark(i[c]);n();for(let c=0;c<i.length;c++)this.removePendingMark(i[c],a);for(let c=0;c<o.length;c++)this.addPendingMark(o[c])}addTextNode(t){let n=t.nodeValue,r=this.top;if(r.options&yf||r.inlineContext(t)||/[^ \t\r\n\u000c]/.test(n)){if(r.options&vf)r.options&yf?n=n.replace(/\r\n?/g,`
`):n=n.replace(/\r?\n|\r/g," ");else if(n=n.replace(/[ \t\r\n\u000c]+/g," "),/^[ \t\r\n\u000c]/.test(n)&&this.open==this.nodes.length-1){let s=r.content[r.content.length-1],i=t.previousSibling;(!s||i&&i.nodeName=="BR"||s.isText&&/[ \t\r\n\u000c]$/.test(s.text))&&(n=n.slice(1))}n&&this.insertNode(this.parser.schema.text(n)),this.findInText(t)}else this.findInside(t)}addElement(t,n){let r=t.nodeName.toLowerCase(),s;$k.hasOwnProperty(r)&&this.parser.normalizeLists&&OZ(t);let i=this.options.ruleFromNode&&this.options.ruleFromNode(t)||(s=this.parser.matchTag(t,this,n));if(i?i.ignore:TZ.hasOwnProperty(r))this.findInside(t),this.ignoreFallback(t);else if(!i||i.skip||i.closeParent){i&&i.closeParent?this.open=Math.max(0,this.open-1):i&&i.skip.nodeType&&(t=i.skip);let o,a=this.top,c=this.needsBlock;if(zk.hasOwnProperty(r))a.content.length&&a.content[0].isInline&&this.open&&(this.open--,a=this.top),o=!0,a.type||(this.needsBlock=!0);else if(!t.firstChild){this.leafFallback(t);return}i&&i.skip?this.addAll(t):this.withStyleRules(t,()=>this.addAll(t)),o&&this.sync(a),this.needsBlock=c}else this.withStyleRules(t,()=>{this.addElementByRule(t,i,i.consuming===!1?s:void 0)})}leafFallback(t){t.nodeName=="BR"&&this.top.type&&this.top.type.inlineContent&&this.addTextNode(t.ownerDocument.createTextNode(`
`))}ignoreFallback(t){t.nodeName=="BR"&&(!this.top.type||!this.top.type.inlineContent)&&this.findPlace(this.parser.schema.text("-"))}readStyles(t){let n=Ze.none,r=Ze.none;if(t.length)for(let s=0;s<this.parser.matchedStyles.length;s++){let i=this.parser.matchedStyles[s],o=t.getPropertyValue(i);if(o)for(let a=void 0;;){let c=this.parser.matchStyle(i,o,this,a);if(!c)break;if(c.ignore)return null;if(c.clearMark?this.top.pendingMarks.concat(this.top.activeMarks).forEach(l=>{c.clearMark(l)&&(r=l.addToSet(r))}):n=this.parser.schema.marks[c.mark].create(c.attrs).addToSet(n),c.consuming===!1)a=c;else break}}return[n,r]}addElementByRule(t,n,r){let s,i,o;n.node?(i=this.parser.schema.nodes[n.node],i.isLeaf?this.insertNode(i.create(n.attrs))||this.leafFallback(t):s=this.enter(i,n.attrs||null,n.preserveWhitespace)):(o=this.parser.schema.marks[n.mark].create(n.attrs),this.addPendingMark(o));let a=this.top;if(i&&i.isLeaf)this.findInside(t);else if(r)this.addElement(t,r);else if(n.getContent)this.findInside(t),n.getContent(t,this.parser.schema).forEach(c=>this.insertNode(c));else{let c=t;typeof n.contentElement=="string"?c=t.querySelector(n.contentElement):typeof n.contentElement=="function"?c=n.contentElement(t):n.contentElement&&(c=n.contentElement),this.findAround(t,c,!0),this.addAll(c)}s&&this.sync(a)&&this.open--,o&&this.removePendingMark(o,a)}addAll(t,n,r){let s=n||0;for(let i=n?t.childNodes[n]:t.firstChild,o=r==null?null:t.childNodes[r];i!=o;i=i.nextSibling,++s)this.findAtPoint(t,s),this.addDOM(i);this.findAtPoint(t,s)}findPlace(t){let n,r;for(let s=this.open;s>=0;s--){let i=this.nodes[s],o=i.findWrapping(t);if(o&&(!n||n.length>o.length)&&(n=o,r=i,!o.length)||i.solid)break}if(!n)return!1;this.sync(r);for(let s=0;s<n.length;s++)this.enterInner(n[s],null,!1);return!0}insertNode(t){if(t.isInline&&this.needsBlock&&!this.top.type){let n=this.textblockFromContext();n&&this.enterInner(n)}if(this.findPlace(t)){this.closeExtra();let n=this.top;n.applyPending(t.type),n.match&&(n.match=n.match.matchType(t.type));let r=n.activeMarks;for(let s=0;s<t.marks.length;s++)(!n.type||n.type.allowsMarkType(t.marks[s].type))&&(r=t.marks[s].addToSet(r));return n.content.push(t.mark(r)),!0}return!1}enter(t,n,r){let s=this.findPlace(t.create(n));return s&&this.enterInner(t,n,!0,r),s}enterInner(t,n=null,r=!1,s){this.closeExtra();let i=this.top;i.applyPending(t),i.match=i.match&&i.match.matchType(t);let o=aS(t,s,i.options);i.options&Sd&&i.content.length==0&&(o|=Sd),this.nodes.push(new Yu(t,n,i.activeMarks,i.pendingMarks,r,null,o)),this.open++}closeExtra(t=!1){let n=this.nodes.length-1;if(n>this.open){for(;n>this.open;n--)this.nodes[n-1].content.push(this.nodes[n].finish(t));this.nodes.length=this.open+1}}finish(){return this.open=0,this.closeExtra(this.isOpen),this.nodes[0].finish(this.isOpen||this.options.topOpen)}sync(t){for(let n=this.open;n>=0;n--)if(this.nodes[n]==t)return this.open=n,!0;return!1}get currentPos(){this.closeExtra();let t=0;for(let n=this.open;n>=0;n--){let r=this.nodes[n].content;for(let s=r.length-1;s>=0;s--)t+=r[s].nodeSize;n&&t++}return t}findAtPoint(t,n){if(this.find)for(let r=0;r<this.find.length;r++)this.find[r].node==t&&this.find[r].offset==n&&(this.find[r].pos=this.currentPos)}findInside(t){if(this.find)for(let n=0;n<this.find.length;n++)this.find[n].pos==null&&t.nodeType==1&&t.contains(this.find[n].node)&&(this.find[n].pos=this.currentPos)}findAround(t,n,r){if(t!=n&&this.find)for(let s=0;s<this.find.length;s++)this.find[s].pos==null&&t.nodeType==1&&t.contains(this.find[s].node)&&n.compareDocumentPosition(this.find[s].node)&(r?2:4)&&(this.find[s].pos=this.currentPos)}findInText(t){if(this.find)for(let n=0;n<this.find.length;n++)this.find[n].node==t&&(this.find[n].pos=this.currentPos-(t.nodeValue.length-this.find[n].offset))}matchesContext(t){if(t.indexOf("|")>-1)return t.split(/\s*\|\s*/).some(this.matchesContext,this);let n=t.split("/"),r=this.options.context,s=!this.isOpen&&(!r||r.parent.type==this.nodes[0].type),i=-(r?r.depth+1:0)+(s?0:1),o=(a,c)=>{for(;a>=0;a--){let l=n[a];if(l==""){if(a==n.length-1||a==0)continue;for(;c>=i;c--)if(o(a-1,c))return!0;return!1}else{let u=c>0||c==0&&s?this.nodes[c].type:r&&c>=i?r.node(c-i).type:null;if(!u||u.name!=l&&u.groups.indexOf(l)==-1)return!1;c--}}return!0};return o(n.length-1,this.open)}textblockFromContext(){let t=this.options.context;if(t)for(let n=t.depth;n>=0;n--){let r=t.node(n).contentMatchAt(t.indexAfter(n)).defaultType;if(r&&r.isTextblock&&r.defaultAttrs)return r}for(let n in this.parser.schema.nodes){let r=this.parser.schema.nodes[n];if(r.isTextblock&&r.defaultAttrs)return r}}addPendingMark(t){let n=MZ(t,this.top.pendingMarks);n&&this.top.stashMarks.push(n),this.top.pendingMarks=t.addToSet(this.top.pendingMarks)}removePendingMark(t,n){for(let r=this.open;r>=0;r--){let s=this.nodes[r];if(s.pendingMarks.lastIndexOf(t)>-1)s.pendingMarks=t.removeFromSet(s.pendingMarks);else{s.activeMarks=t.removeFromSet(s.activeMarks);let o=s.popFromStashMark(t);o&&s.type&&s.type.allowsMarkType(o.type)&&(s.activeMarks=o.addToSet(s.activeMarks))}if(s==n)break}}}function OZ(e){for(let t=e.firstChild,n=null;t;t=t.nextSibling){let r=t.nodeType==1?t.nodeName.toLowerCase():null;r&&$k.hasOwnProperty(r)&&n?(n.appendChild(t),t=n):r=="li"?n=t:r&&(n=null)}}function kZ(e,t){return(e.matches||e.msMatchesSelector||e.webkitMatchesSelector||e.mozMatchesSelector).call(e,t)}function lS(e){let t={};for(let n in e)t[n]=e[n];return t}function AZ(e,t){let n=t.schema.nodes;for(let r in n){let s=n[r];if(!s.allowsMarkType(e))continue;let i=[],o=a=>{i.push(a);for(let c=0;c<a.edgeCount;c++){let{type:l,next:u}=a.edge(c);if(l==t||i.indexOf(u)<0&&o(u))return!0}};if(o(s.contentMatch))return!0}}function MZ(e,t){for(let n=0;n<t.length;n++)if(e.eq(t[n]))return t[n]}class _c{constructor(t,n){this.nodes=t,this.marks=n}serializeFragment(t,n={},r){r||(r=v1(n).createDocumentFragment());let s=r,i=[];return t.forEach(o=>{if(i.length||o.marks.length){let a=0,c=0;for(;a<i.length&&c<o.marks.length;){let l=o.marks[c];if(!this.marks[l.type.name]){c++;continue}if(!l.eq(i[a][0])||l.type.spec.spanning===!1)break;a++,c++}for(;a<i.length;)s=i.pop()[1];for(;c<o.marks.length;){let l=o.marks[c++],u=this.serializeMark(l,o.isInline,n);u&&(i.push([l,s]),s.appendChild(u.dom),s=u.contentDOM||u.dom)}}s.appendChild(this.serializeNodeInner(o,n))}),r}serializeNodeInner(t,n){let{dom:r,contentDOM:s}=wd(v1(n),this.nodes[t.type.name](t),null,t.attrs);if(s){if(t.isLeaf)throw new RangeError("Content hole not allowed in a leaf node spec");this.serializeFragment(t.content,n,s)}return r}serializeNode(t,n={}){let r=this.serializeNodeInner(t,n);for(let s=t.marks.length-1;s>=0;s--){let i=this.serializeMark(t.marks[s],t.isInline,n);i&&((i.contentDOM||i.dom).appendChild(r),r=i.dom)}return r}serializeMark(t,n,r={}){let s=this.marks[t.type.name];return s&&wd(v1(r),s(t,n),null,t.attrs)}static renderSpec(t,n,r=null,s){return wd(t,n,r,s)}static fromSchema(t){return t.cached.domSerializer||(t.cached.domSerializer=new _c(this.nodesFromSchema(t),this.marksFromSchema(t)))}static nodesFromSchema(t){let n=uS(t.nodes);return n.text||(n.text=r=>r.text),n}static marksFromSchema(t){return uS(t.marks)}}function uS(e){let t={};for(let n in e){let r=e[n].spec.toDOM;r&&(t[n]=r)}return t}function v1(e){return e.document||window.document}const dS=new WeakMap;function IZ(e){let t=dS.get(e);return t===void 0&&dS.set(e,t=NZ(e)),t}function NZ(e){let t=null;function n(r){if(r&&typeof r=="object")if(Array.isArray(r))if(typeof r[0]=="string")t||(t=[]),t.push(r);else for(let s=0;s<r.length;s++)n(r[s]);else for(let s in r)n(r[s])}return n(e),t}function wd(e,t,n,r){if(typeof t=="string")return{dom:e.createTextNode(t)};if(t.nodeType!=null)return{dom:t};if(t.dom&&t.dom.nodeType!=null)return t;let s=t[0],i;if(typeof s!="string")throw new RangeError("Invalid array passed to renderSpec");if(r&&(i=IZ(r))&&i.indexOf(t)>-1)throw new RangeError("Using an array from an attribute object as a DOM spec. This may be an attempted cross site scripting attack.");let o=s.indexOf(" ");o>0&&(n=s.slice(0,o),s=s.slice(o+1));let a,c=n?e.createElementNS(n,s):e.createElement(s),l=t[1],u=1;if(l&&typeof l=="object"&&l.nodeType==null&&!Array.isArray(l)){u=2;for(let d in l)if(l[d]!=null){let f=d.indexOf(" ");f>0?c.setAttributeNS(d.slice(0,f),d.slice(f+1),l[d]):c.setAttribute(d,l[d])}}for(let d=u;d<t.length;d++){let f=t[d];if(f===0){if(d<t.length-1||d>u)throw new RangeError("Content hole must be the only child of its parent node");return{dom:c,contentDOM:c}}else{let{dom:h,contentDOM:g}=wd(e,f,n,r);if(c.appendChild(h),g){if(a)throw new RangeError("Multiple content holes");a=g}}}return{dom:c,contentDOM:a}}const Wk=65535,Kk=Math.pow(2,16);function RZ(e,t){return e+t*Kk}function fS(e){return e&Wk}function PZ(e){return(e-(e&Wk))/Kk}const Yk=1,Zk=2,Ed=4,Jk=8;class Sv{constructor(t,n,r){this.pos=t,this.delInfo=n,this.recover=r}get deleted(){return(this.delInfo&Jk)>0}get deletedBefore(){return(this.delInfo&(Yk|Ed))>0}get deletedAfter(){return(this.delInfo&(Zk|Ed))>0}get deletedAcross(){return(this.delInfo&Ed)>0}}class qn{constructor(t,n=!1){if(this.ranges=t,this.inverted=n,!t.length&&qn.empty)return qn.empty}recover(t){let n=0,r=fS(t);if(!this.inverted)for(let s=0;s<r;s++)n+=this.ranges[s*3+2]-this.ranges[s*3+1];return this.ranges[r*3]+n+PZ(t)}mapResult(t,n=1){return this._map(t,n,!1)}map(t,n=1){return this._map(t,n,!0)}_map(t,n,r){let s=0,i=this.inverted?2:1,o=this.inverted?1:2;for(let a=0;a<this.ranges.length;a+=3){let c=this.ranges[a]-(this.inverted?s:0);if(c>t)break;let l=this.ranges[a+i],u=this.ranges[a+o],d=c+l;if(t<=d){let f=l?t==c?-1:t==d?1:n:n,h=c+s+(f<0?0:u);if(r)return h;let g=t==(n<0?c:d)?null:RZ(a/3,t-c),_=t==c?Zk:t==d?Yk:Ed;return(n<0?t!=c:t!=d)&&(_|=Jk),new Sv(h,_,g)}s+=u-l}return r?t+s:new Sv(t+s,0,null)}touches(t,n){let r=0,s=fS(n),i=this.inverted?2:1,o=this.inverted?1:2;for(let a=0;a<this.ranges.length;a+=3){let c=this.ranges[a]-(this.inverted?r:0);if(c>t)break;let l=this.ranges[a+i],u=c+l;if(t<=u&&a==s*3)return!0;r+=this.ranges[a+o]-l}return!1}forEach(t){let n=this.inverted?2:1,r=this.inverted?1:2;for(let s=0,i=0;s<this.ranges.length;s+=3){let o=this.ranges[s],a=o-(this.inverted?i:0),c=o+(this.inverted?0:i),l=this.ranges[s+n],u=this.ranges[s+r];t(a,a+l,c,c+u),i+=u-l}}invert(){return new qn(this.ranges,!this.inverted)}toString(){return(this.inverted?"-":"")+JSON.stringify(this.ranges)}static offset(t){return t==0?qn.empty:new qn(t<0?[0,-t,0]:[0,0,t])}}qn.empty=new qn([]);class Ia{constructor(t=[],n,r=0,s=t.length){this.maps=t,this.mirror=n,this.from=r,this.to=s}slice(t=0,n=this.maps.length){return new Ia(this.maps,this.mirror,t,n)}copy(){return new Ia(this.maps.slice(),this.mirror&&this.mirror.slice(),this.from,this.to)}appendMap(t,n){this.to=this.maps.push(t),n!=null&&this.setMirror(this.maps.length-1,n)}appendMapping(t){for(let n=0,r=this.maps.length;n<t.maps.length;n++){let s=t.getMirror(n);this.appendMap(t.maps[n],s!=null&&s<n?r+s:void 0)}}getMirror(t){if(this.mirror){for(let n=0;n<this.mirror.length;n++)if(this.mirror[n]==t)return this.mirror[n+(n%2?-1:1)]}}setMirror(t,n){this.mirror||(this.mirror=[]),this.mirror.push(t,n)}appendMappingInverted(t){for(let n=t.maps.length-1,r=this.maps.length+t.maps.length;n>=0;n--){let s=t.getMirror(n);this.appendMap(t.maps[n].invert(),s!=null&&s>n?r-s-1:void 0)}}invert(){let t=new Ia;return t.appendMappingInverted(this),t}map(t,n=1){if(this.mirror)return this._map(t,n,!0);for(let r=this.from;r<this.to;r++)t=this.maps[r].map(t,n);return t}mapResult(t,n=1){return this._map(t,n,!1)}_map(t,n,r){let s=0;for(let i=this.from;i<this.to;i++){let o=this.maps[i],a=o.mapResult(t,n);if(a.recover!=null){let c=this.getMirror(i);if(c!=null&&c>i&&c<this.to){i=c,t=this.maps[c].recover(a.recover);continue}}s|=a.delInfo,t=a.pos}return r?t:new Sv(t,s,null)}}const y1=Object.create(null);class vn{getMap(){return qn.empty}merge(t){return null}static fromJSON(t,n){if(!n||!n.stepType)throw new RangeError("Invalid input for Step.fromJSON");let r=y1[n.stepType];if(!r)throw new RangeError(`No step type ${n.stepType} defined`);return r.fromJSON(t,n)}static jsonID(t,n){if(t in y1)throw new RangeError("Duplicate use of step JSON ID "+t);return y1[t]=n,n.prototype.jsonID=t,n}}class At{constructor(t,n){this.doc=t,this.failed=n}static ok(t){return new At(t,null)}static fail(t){return new At(null,t)}static fromReplace(t,n,r,s){try{return At.ok(t.replace(n,r,s))}catch(i){if(i instanceof mf)return At.fail(i.message);throw i}}}function m3(e,t,n){let r=[];for(let s=0;s<e.childCount;s++){let i=e.child(s);i.content.size&&(i=i.copy(m3(i.content,t,i))),i.isInline&&(i=t(i,n,s)),r.push(i)}return W.fromArray(r)}class ai extends vn{constructor(t,n,r){super(),this.from=t,this.to=n,this.mark=r}apply(t){let n=t.slice(this.from,this.to),r=t.resolve(this.from),s=r.node(r.sharedDepth(this.to)),i=new Q(m3(n.content,(o,a)=>!o.isAtom||!a.type.allowsMarkType(this.mark.type)?o:o.mark(this.mark.addToSet(o.marks)),s),n.openStart,n.openEnd);return At.fromReplace(t,this.from,this.to,i)}invert(){return new rs(this.from,this.to,this.mark)}map(t){let n=t.mapResult(this.from,1),r=t.mapResult(this.to,-1);return n.deleted&&r.deleted||n.pos>=r.pos?null:new ai(n.pos,r.pos,this.mark)}merge(t){return t instanceof ai&&t.mark.eq(this.mark)&&this.from<=t.to&&this.to>=t.from?new ai(Math.min(this.from,t.from),Math.max(this.to,t.to),this.mark):null}toJSON(){return{stepType:"addMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(t,n){if(typeof n.from!="number"||typeof n.to!="number")throw new RangeError("Invalid input for AddMarkStep.fromJSON");return new ai(n.from,n.to,t.markFromJSON(n.mark))}}vn.jsonID("addMark",ai);class rs extends vn{constructor(t,n,r){super(),this.from=t,this.to=n,this.mark=r}apply(t){let n=t.slice(this.from,this.to),r=new Q(m3(n.content,s=>s.mark(this.mark.removeFromSet(s.marks)),t),n.openStart,n.openEnd);return At.fromReplace(t,this.from,this.to,r)}invert(){return new ai(this.from,this.to,this.mark)}map(t){let n=t.mapResult(this.from,1),r=t.mapResult(this.to,-1);return n.deleted&&r.deleted||n.pos>=r.pos?null:new rs(n.pos,r.pos,this.mark)}merge(t){return t instanceof rs&&t.mark.eq(this.mark)&&this.from<=t.to&&this.to>=t.from?new rs(Math.min(this.from,t.from),Math.max(this.to,t.to),this.mark):null}toJSON(){return{stepType:"removeMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(t,n){if(typeof n.from!="number"||typeof n.to!="number")throw new RangeError("Invalid input for RemoveMarkStep.fromJSON");return new rs(n.from,n.to,t.markFromJSON(n.mark))}}vn.jsonID("removeMark",rs);class ci extends vn{constructor(t,n){super(),this.pos=t,this.mark=n}apply(t){let n=t.nodeAt(this.pos);if(!n)return At.fail("No node at mark step's position");let r=n.type.create(n.attrs,null,this.mark.addToSet(n.marks));return At.fromReplace(t,this.pos,this.pos+1,new Q(W.from(r),0,n.isLeaf?0:1))}invert(t){let n=t.nodeAt(this.pos);if(n){let r=this.mark.addToSet(n.marks);if(r.length==n.marks.length){for(let s=0;s<n.marks.length;s++)if(!n.marks[s].isInSet(r))return new ci(this.pos,n.marks[s]);return new ci(this.pos,this.mark)}}return new ec(this.pos,this.mark)}map(t){let n=t.mapResult(this.pos,1);return n.deletedAfter?null:new ci(n.pos,this.mark)}toJSON(){return{stepType:"addNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(t,n){if(typeof n.pos!="number")throw new RangeError("Invalid input for AddNodeMarkStep.fromJSON");return new ci(n.pos,t.markFromJSON(n.mark))}}vn.jsonID("addNodeMark",ci);class ec extends vn{constructor(t,n){super(),this.pos=t,this.mark=n}apply(t){let n=t.nodeAt(this.pos);if(!n)return At.fail("No node at mark step's position");let r=n.type.create(n.attrs,null,this.mark.removeFromSet(n.marks));return At.fromReplace(t,this.pos,this.pos+1,new Q(W.from(r),0,n.isLeaf?0:1))}invert(t){let n=t.nodeAt(this.pos);return!n||!this.mark.isInSet(n.marks)?this:new ci(this.pos,this.mark)}map(t){let n=t.mapResult(this.pos,1);return n.deletedAfter?null:new ec(n.pos,this.mark)}toJSON(){return{stepType:"removeNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(t,n){if(typeof n.pos!="number")throw new RangeError("Invalid input for RemoveNodeMarkStep.fromJSON");return new ec(n.pos,t.markFromJSON(n.mark))}}vn.jsonID("removeNodeMark",ec);class un extends vn{constructor(t,n,r,s=!1){super(),this.from=t,this.to=n,this.slice=r,this.structure=s}apply(t){return this.structure&&wv(t,this.from,this.to)?At.fail("Structure replace would overwrite content"):At.fromReplace(t,this.from,this.to,this.slice)}getMap(){return new qn([this.from,this.to-this.from,this.slice.size])}invert(t){return new un(this.from,this.from+this.slice.size,t.slice(this.from,this.to))}map(t){let n=t.mapResult(this.from,1),r=t.mapResult(this.to,-1);return n.deletedAcross&&r.deletedAcross?null:new un(n.pos,Math.max(n.pos,r.pos),this.slice)}merge(t){if(!(t instanceof un)||t.structure||this.structure)return null;if(this.from+this.slice.size==t.from&&!this.slice.openEnd&&!t.slice.openStart){let n=this.slice.size+t.slice.size==0?Q.empty:new Q(this.slice.content.append(t.slice.content),this.slice.openStart,t.slice.openEnd);return new un(this.from,this.to+(t.to-t.from),n,this.structure)}else if(t.to==this.from&&!this.slice.openStart&&!t.slice.openEnd){let n=this.slice.size+t.slice.size==0?Q.empty:new Q(t.slice.content.append(this.slice.content),t.slice.openStart,this.slice.openEnd);return new un(t.from,this.to,n,this.structure)}else return null}toJSON(){let t={stepType:"replace",from:this.from,to:this.to};return this.slice.size&&(t.slice=this.slice.toJSON()),this.structure&&(t.structure=!0),t}static fromJSON(t,n){if(typeof n.from!="number"||typeof n.to!="number")throw new RangeError("Invalid input for ReplaceStep.fromJSON");return new un(n.from,n.to,Q.fromJSON(t,n.slice),!!n.structure)}}vn.jsonID("replace",un);class zn extends vn{constructor(t,n,r,s,i,o,a=!1){super(),this.from=t,this.to=n,this.gapFrom=r,this.gapTo=s,this.slice=i,this.insert=o,this.structure=a}apply(t){if(this.structure&&(wv(t,this.from,this.gapFrom)||wv(t,this.gapTo,this.to)))return At.fail("Structure gap-replace would overwrite content");let n=t.slice(this.gapFrom,this.gapTo);if(n.openStart||n.openEnd)return At.fail("Gap is not a flat range");let r=this.slice.insertAt(this.insert,n.content);return r?At.fromReplace(t,this.from,this.to,r):At.fail("Content does not fit in gap")}getMap(){return new qn([this.from,this.gapFrom-this.from,this.insert,this.gapTo,this.to-this.gapTo,this.slice.size-this.insert])}invert(t){let n=this.gapTo-this.gapFrom;return new zn(this.from,this.from+this.slice.size+n,this.from+this.insert,this.from+this.insert+n,t.slice(this.from,this.to).removeBetween(this.gapFrom-this.from,this.gapTo-this.from),this.gapFrom-this.from,this.structure)}map(t){let n=t.mapResult(this.from,1),r=t.mapResult(this.to,-1),s=this.from==this.gapFrom?n.pos:t.map(this.gapFrom,-1),i=this.to==this.gapTo?r.pos:t.map(this.gapTo,1);return n.deletedAcross&&r.deletedAcross||s<n.pos||i>r.pos?null:new zn(n.pos,r.pos,s,i,this.slice,this.insert,this.structure)}toJSON(){let t={stepType:"replaceAround",from:this.from,to:this.to,gapFrom:this.gapFrom,gapTo:this.gapTo,insert:this.insert};return this.slice.size&&(t.slice=this.slice.toJSON()),this.structure&&(t.structure=!0),t}static fromJSON(t,n){if(typeof n.from!="number"||typeof n.to!="number"||typeof n.gapFrom!="number"||typeof n.gapTo!="number"||typeof n.insert!="number")throw new RangeError("Invalid input for ReplaceAroundStep.fromJSON");return new zn(n.from,n.to,n.gapFrom,n.gapTo,Q.fromJSON(t,n.slice),n.insert,!!n.structure)}}vn.jsonID("replaceAround",zn);function wv(e,t,n){let r=e.resolve(t),s=n-t,i=r.depth;for(;s>0&&i>0&&r.indexAfter(i)==r.node(i).childCount;)i--,s--;if(s>0){let o=r.node(i).maybeChild(r.indexAfter(i));for(;s>0;){if(!o||o.isLeaf)return!0;o=o.firstChild,s--}}return!1}function DZ(e,t,n,r){let s=[],i=[],o,a;e.doc.nodesBetween(t,n,(c,l,u)=>{if(!c.isInline)return;let d=c.marks;if(!r.isInSet(d)&&u.type.allowsMarkType(r.type)){let f=Math.max(l,t),h=Math.min(l+c.nodeSize,n),g=r.addToSet(d);for(let _=0;_<d.length;_++)d[_].isInSet(g)||(o&&o.to==f&&o.mark.eq(d[_])?o.to=h:s.push(o=new rs(f,h,d[_])));a&&a.to==f?a.to=h:i.push(a=new ai(f,h,r))}}),s.forEach(c=>e.step(c)),i.forEach(c=>e.step(c))}function LZ(e,t,n,r){let s=[],i=0;e.doc.nodesBetween(t,n,(o,a)=>{if(!o.isInline)return;i++;let c=null;if(r instanceof Jh){let l=o.marks,u;for(;u=r.isInSet(l);)(c||(c=[])).push(u),l=u.removeFromSet(l)}else r?r.isInSet(o.marks)&&(c=[r]):c=o.marks;if(c&&c.length){let l=Math.min(a+o.nodeSize,n);for(let u=0;u<c.length;u++){let d=c[u],f;for(let h=0;h<s.length;h++){let g=s[h];g.step==i-1&&d.eq(s[h].style)&&(f=g)}f?(f.to=l,f.step=i):s.push({style:d,from:Math.max(a,t),to:l,step:i})}}}),s.forEach(o=>e.step(new rs(o.from,o.to,o.style)))}function Qk(e,t,n,r=n.contentMatch,s=!0){let i=e.doc.nodeAt(t),o=[],a=t+1;for(let c=0;c<i.childCount;c++){let l=i.child(c),u=a+l.nodeSize,d=r.matchType(l.type);if(!d)o.push(new un(a,u,Q.empty));else{r=d;for(let f=0;f<l.marks.length;f++)n.allowsMarkType(l.marks[f].type)||e.step(new rs(a,u,l.marks[f]));if(s&&l.isText&&n.whitespace!="pre"){let f,h=/\r?\n|\r/g,g;for(;f=h.exec(l.text);)g||(g=new Q(W.from(n.schema.text(" ",n.allowedMarks(l.marks))),0,0)),o.push(new un(a+f.index,a+f.index+f[0].length,g))}}a=u}if(!r.validEnd){let c=r.fillBefore(W.empty,!0);e.replace(a,a,new Q(c,0,0))}for(let c=o.length-1;c>=0;c--)e.step(o[c])}function FZ(e,t,n){return(t==0||e.canReplace(t,e.childCount))&&(n==e.childCount||e.canReplace(0,n))}function g3(e){let n=e.parent.content.cutByIndex(e.startIndex,e.endIndex);for(let r=e.depth;;--r){let s=e.$from.node(r),i=e.$from.index(r),o=e.$to.indexAfter(r);if(r<e.depth&&s.canReplace(i,o,n))return r;if(r==0||s.type.spec.isolating||!FZ(s,i,o))break}return null}function jZ(e,t,n){let{$from:r,$to:s,depth:i}=t,o=r.before(i+1),a=s.after(i+1),c=o,l=a,u=W.empty,d=0;for(let g=i,_=!1;g>n;g--)_||r.index(g)>0?(_=!0,u=W.from(r.node(g).copy(u)),d++):c--;let f=W.empty,h=0;for(let g=i,_=!1;g>n;g--)_||s.after(g+1)<s.end(g)?(_=!0,f=W.from(s.node(g).copy(f)),h++):l++;e.step(new zn(c,l,o,a,new Q(u.append(f),d,h),u.size-d,!0))}function UZ(e,t,n=null,r=e){let s=BZ(e,t),i=s&&qZ(r,t);return i?s.map(hS).concat({type:t,attrs:n}).concat(i.map(hS)):null}function hS(e){return{type:e,attrs:null}}function BZ(e,t){let{parent:n,startIndex:r,endIndex:s}=e,i=n.contentMatchAt(r).findWrapping(t);if(!i)return null;let o=i.length?i[0]:t;return n.canReplaceWith(r,s,o)?i:null}function qZ(e,t){let{parent:n,startIndex:r,endIndex:s}=e,i=n.child(r),o=t.contentMatch.findWrapping(i.type);if(!o)return null;let c=(o.length?o[o.length-1]:t).contentMatch;for(let l=r;c&&l<s;l++)c=c.matchType(n.child(l).type);return!c||!c.validEnd?null:o}function GZ(e,t,n){let r=W.empty;for(let o=n.length-1;o>=0;o--){if(r.size){let a=n[o].type.contentMatch.matchFragment(r);if(!a||!a.validEnd)throw new RangeError("Wrapper type given to Transform.wrap does not form valid content of its parent wrapper")}r=W.from(n[o].type.create(n[o].attrs,r))}let s=t.start,i=t.end;e.step(new zn(s,i,s,i,new Q(r,0,0),n.length,!0))}function HZ(e,t,n,r,s){if(!r.isTextblock)throw new RangeError("Type given to setBlockType should be a textblock");let i=e.steps.length;e.doc.nodesBetween(t,n,(o,a)=>{if(o.isTextblock&&!o.hasMarkup(r,s)&&$Z(e.doc,e.mapping.slice(i).map(a),r)){let c=null;if(r.schema.linebreakReplacement){let f=r.whitespace=="pre",h=!!r.contentMatch.matchType(r.schema.linebreakReplacement);f&&!h?c=!1:!f&&h&&(c=!0)}c===!1&&zZ(e,o,a,i),Qk(e,e.mapping.slice(i).map(a,1),r,void 0,c===null);let l=e.mapping.slice(i),u=l.map(a,1),d=l.map(a+o.nodeSize,1);return e.step(new zn(u,d,u+1,d-1,new Q(W.from(r.create(s,null,o.marks)),0,0),1,!0)),c===!0&&VZ(e,o,a,i),!1}})}function VZ(e,t,n,r){t.forEach((s,i)=>{if(s.isText){let o,a=/\r?\n|\r/g;for(;o=a.exec(s.text);){let c=e.mapping.slice(r).map(n+1+i+o.index);e.replaceWith(c,c+1,t.type.schema.linebreakReplacement.create())}}})}function zZ(e,t,n,r){t.forEach((s,i)=>{if(s.type==s.type.schema.linebreakReplacement){let o=e.mapping.slice(r).map(n+1+i);e.replaceWith(o,o+1,t.type.schema.text(`
`))}})}function $Z(e,t,n){let r=e.resolve(t),s=r.index();return r.parent.canReplaceWith(s,s+1,n)}function WZ(e,t,n,r,s){let i=e.doc.nodeAt(t);if(!i)throw new RangeError("No node at given position");n||(n=i.type);let o=n.create(r,null,s||i.marks);if(i.isLeaf)return e.replaceWith(t,t+i.nodeSize,o);if(!n.validContent(i.content))throw new RangeError("Invalid content for node type "+n.name);e.step(new zn(t,t+i.nodeSize,t+1,t+i.nodeSize-1,new Q(W.from(o),0,0),1,!0))}function xd(e,t,n=1,r){let s=e.resolve(t),i=s.depth-n,o=r&&r[r.length-1]||s.parent;if(i<0||s.parent.type.spec.isolating||!s.parent.canReplace(s.index(),s.parent.childCount)||!o.type.validContent(s.parent.content.cutByIndex(s.index(),s.parent.childCount)))return!1;for(let l=s.depth-1,u=n-2;l>i;l--,u--){let d=s.node(l),f=s.index(l);if(d.type.spec.isolating)return!1;let h=d.content.cutByIndex(f,d.childCount),g=r&&r[u+1];g&&(h=h.replaceChild(0,g.type.create(g.attrs)));let _=r&&r[u]||d;if(!d.canReplace(f+1,d.childCount)||!_.type.validContent(h))return!1}let a=s.indexAfter(i),c=r&&r[0];return s.node(i).canReplaceWith(a,a,c?c.type:s.node(i+1).type)}function KZ(e,t,n=1,r){let s=e.doc.resolve(t),i=W.empty,o=W.empty;for(let a=s.depth,c=s.depth-n,l=n-1;a>c;a--,l--){i=W.from(s.node(a).copy(i));let u=r&&r[l];o=W.from(u?u.type.create(u.attrs,o):s.node(a).copy(o))}e.step(new un(t,t,new Q(i.append(o),n,n),!0))}function Xk(e,t){let n=e.resolve(t),r=n.index();return YZ(n.nodeBefore,n.nodeAfter)&&n.parent.canReplace(r,r+1)}function YZ(e,t){return!!(e&&t&&!e.isLeaf&&e.canAppend(t))}function ZZ(e,t,n){let r=new un(t-n,t+n,Q.empty,!0);e.step(r)}function JZ(e,t,n){let r=e.resolve(t);if(r.parent.canReplaceWith(r.index(),r.index(),n))return t;if(r.parentOffset==0)for(let s=r.depth-1;s>=0;s--){let i=r.index(s);if(r.node(s).canReplaceWith(i,i,n))return r.before(s+1);if(i>0)return null}if(r.parentOffset==r.parent.content.size)for(let s=r.depth-1;s>=0;s--){let i=r.indexAfter(s);if(r.node(s).canReplaceWith(i,i,n))return r.after(s+1);if(i<r.node(s).childCount)return null}return null}function QZ(e,t,n){let r=e.resolve(t);if(!n.content.size)return t;let s=n.content;for(let i=0;i<n.openStart;i++)s=s.firstChild.content;for(let i=1;i<=(n.openStart==0&&n.size?2:1);i++)for(let o=r.depth;o>=0;o--){let a=o==r.depth?0:r.pos<=(r.start(o+1)+r.end(o+1))/2?-1:1,c=r.index(o)+(a>0?1:0),l=r.node(o),u=!1;if(i==1)u=l.canReplace(c,c,s);else{let d=l.contentMatchAt(c).findWrapping(s.firstChild.type);u=d&&l.canReplaceWith(c,c,d[0])}if(u)return a==0?r.pos:a<0?r.before(o+1):r.after(o+1)}return null}function _3(e,t,n=t,r=Q.empty){if(t==n&&!r.size)return null;let s=e.resolve(t),i=e.resolve(n);return eA(s,i,r)?new un(t,n,r):new XZ(s,i,r).fit()}function eA(e,t,n){return!n.openStart&&!n.openEnd&&e.start()==t.start()&&e.parent.canReplace(e.index(),t.index(),n.content)}class XZ{constructor(t,n,r){this.$from=t,this.$to=n,this.unplaced=r,this.frontier=[],this.placed=W.empty;for(let s=0;s<=t.depth;s++){let i=t.node(s);this.frontier.push({type:i.type,match:i.contentMatchAt(t.indexAfter(s))})}for(let s=t.depth;s>0;s--)this.placed=W.from(t.node(s).copy(this.placed))}get depth(){return this.frontier.length-1}fit(){for(;this.unplaced.size;){let l=this.findFittable();l?this.placeNodes(l):this.openMore()||this.dropNode()}let t=this.mustMoveInline(),n=this.placed.size-this.depth-this.$from.depth,r=this.$from,s=this.close(t<0?this.$to:r.doc.resolve(t));if(!s)return null;let i=this.placed,o=r.depth,a=s.depth;for(;o&&a&&i.childCount==1;)i=i.firstChild.content,o--,a--;let c=new Q(i,o,a);return t>-1?new zn(r.pos,t,this.$to.pos,this.$to.end(),c,n):c.size||r.pos!=this.$to.pos?new un(r.pos,s.pos,c):null}findFittable(){let t=this.unplaced.openStart;for(let n=this.unplaced.content,r=0,s=this.unplaced.openEnd;r<t;r++){let i=n.firstChild;if(n.childCount>1&&(s=0),i.type.spec.isolating&&s<=r){t=r;break}n=i.content}for(let n=1;n<=2;n++)for(let r=n==1?t:this.unplaced.openStart;r>=0;r--){let s,i=null;r?(i=C1(this.unplaced.content,r-1).firstChild,s=i.content):s=this.unplaced.content;let o=s.firstChild;for(let a=this.depth;a>=0;a--){let{type:c,match:l}=this.frontier[a],u,d=null;if(n==1&&(o?l.matchType(o.type)||(d=l.fillBefore(W.from(o),!1)):i&&c.compatibleContent(i.type)))return{sliceDepth:r,frontierDepth:a,parent:i,inject:d};if(n==2&&o&&(u=l.findWrapping(o.type)))return{sliceDepth:r,frontierDepth:a,parent:i,wrap:u};if(i&&l.matchType(i.type))break}}}openMore(){let{content:t,openStart:n,openEnd:r}=this.unplaced,s=C1(t,n);return!s.childCount||s.firstChild.isLeaf?!1:(this.unplaced=new Q(t,n+1,Math.max(r,s.size+n>=t.size-r?n+1:0)),!0)}dropNode(){let{content:t,openStart:n,openEnd:r}=this.unplaced,s=C1(t,n);if(s.childCount<=1&&n>0){let i=t.size-n<=n+s.size;this.unplaced=new Q(Hc(t,n-1,1),n-1,i?n-1:r)}else this.unplaced=new Q(Hc(t,n,1),n,r)}placeNodes({sliceDepth:t,frontierDepth:n,parent:r,inject:s,wrap:i}){for(;this.depth>n;)this.closeFrontierNode();if(i)for(let _=0;_<i.length;_++)this.openFrontierNode(i[_]);let o=this.unplaced,a=r?r.content:o.content,c=o.openStart-t,l=0,u=[],{match:d,type:f}=this.frontier[n];if(s){for(let _=0;_<s.childCount;_++)u.push(s.child(_));d=d.matchFragment(s)}let h=a.size+t-(o.content.size-o.openEnd);for(;l<a.childCount;){let _=a.child(l),v=d.matchType(_.type);if(!v)break;l++,(l>1||c==0||_.content.size)&&(d=v,u.push(tA(_.mark(f.allowedMarks(_.marks)),l==1?c:0,l==a.childCount?h:-1)))}let g=l==a.childCount;g||(h=-1),this.placed=Vc(this.placed,n,W.from(u)),this.frontier[n].match=d,g&&h<0&&r&&r.type==this.frontier[this.depth].type&&this.frontier.length>1&&this.closeFrontierNode();for(let _=0,v=a;_<h;_++){let y=v.lastChild;this.frontier.push({type:y.type,match:y.contentMatchAt(y.childCount)}),v=y.content}this.unplaced=g?t==0?Q.empty:new Q(Hc(o.content,t-1,1),t-1,h<0?o.openEnd:t-1):new Q(Hc(o.content,t,l),o.openStart,o.openEnd)}mustMoveInline(){if(!this.$to.parent.isTextblock)return-1;let t=this.frontier[this.depth],n;if(!t.type.isTextblock||!b1(this.$to,this.$to.depth,t.type,t.match,!1)||this.$to.depth==this.depth&&(n=this.findCloseLevel(this.$to))&&n.depth==this.depth)return-1;let{depth:r}=this.$to,s=this.$to.after(r);for(;r>1&&s==this.$to.end(--r);)++s;return s}findCloseLevel(t){e:for(let n=Math.min(this.depth,t.depth);n>=0;n--){let{match:r,type:s}=this.frontier[n],i=n<t.depth&&t.end(n+1)==t.pos+(t.depth-(n+1)),o=b1(t,n,s,r,i);if(o){for(let a=n-1;a>=0;a--){let{match:c,type:l}=this.frontier[a],u=b1(t,a,l,c,!0);if(!u||u.childCount)continue e}return{depth:n,fit:o,move:i?t.doc.resolve(t.after(n+1)):t}}}}close(t){let n=this.findCloseLevel(t);if(!n)return null;for(;this.depth>n.depth;)this.closeFrontierNode();n.fit.childCount&&(this.placed=Vc(this.placed,n.depth,n.fit)),t=n.move;for(let r=n.depth+1;r<=t.depth;r++){let s=t.node(r),i=s.type.contentMatch.fillBefore(s.content,!0,t.index(r));this.openFrontierNode(s.type,s.attrs,i)}return t}openFrontierNode(t,n=null,r){let s=this.frontier[this.depth];s.match=s.match.matchType(t),this.placed=Vc(this.placed,this.depth,W.from(t.create(n,r))),this.frontier.push({type:t,match:t.contentMatch})}closeFrontierNode(){let n=this.frontier.pop().match.fillBefore(W.empty,!0);n.childCount&&(this.placed=Vc(this.placed,this.frontier.length,n))}}function Hc(e,t,n){return t==0?e.cutByIndex(n,e.childCount):e.replaceChild(0,e.firstChild.copy(Hc(e.firstChild.content,t-1,n)))}function Vc(e,t,n){return t==0?e.append(n):e.replaceChild(e.childCount-1,e.lastChild.copy(Vc(e.lastChild.content,t-1,n)))}function C1(e,t){for(let n=0;n<t;n++)e=e.firstChild.content;return e}function tA(e,t,n){if(t<=0)return e;let r=e.content;return t>1&&(r=r.replaceChild(0,tA(r.firstChild,t-1,r.childCount==1?n-1:0))),t>0&&(r=e.type.contentMatch.fillBefore(r).append(r),n<=0&&(r=r.append(e.type.contentMatch.matchFragment(r).fillBefore(W.empty,!0)))),e.copy(r)}function b1(e,t,n,r,s){let i=e.node(t),o=s?e.indexAfter(t):e.index(t);if(o==i.childCount&&!n.compatibleContent(i.type))return null;let a=r.fillBefore(i.content,!0,o);return a&&!eJ(n,i.content,o)?a:null}function eJ(e,t,n){for(let r=n;r<t.childCount;r++)if(!e.allowsMarks(t.child(r).marks))return!0;return!1}function tJ(e){return e.spec.defining||e.spec.definingForContent}function nJ(e,t,n,r){if(!r.size)return e.deleteRange(t,n);let s=e.doc.resolve(t),i=e.doc.resolve(n);if(eA(s,i,r))return e.step(new un(t,n,r));let o=rA(s,e.doc.resolve(n));o[o.length-1]==0&&o.pop();let a=-(s.depth+1);o.unshift(a);for(let f=s.depth,h=s.pos-1;f>0;f--,h--){let g=s.node(f).type.spec;if(g.defining||g.definingAsContext||g.isolating)break;o.indexOf(f)>-1?a=f:s.before(f)==h&&o.splice(1,0,-f)}let c=o.indexOf(a),l=[],u=r.openStart;for(let f=r.content,h=0;;h++){let g=f.firstChild;if(l.push(g),h==r.openStart)break;f=g.content}for(let f=u-1;f>=0;f--){let h=l[f],g=tJ(h.type);if(g&&!h.sameMarkup(s.node(Math.abs(a)-1)))u=f;else if(g||!h.type.isTextblock)break}for(let f=r.openStart;f>=0;f--){let h=(f+u+1)%(r.openStart+1),g=l[h];if(g)for(let _=0;_<o.length;_++){let v=o[(_+c)%o.length],y=!0;v<0&&(y=!1,v=-v);let C=s.node(v-1),E=s.index(v-1);if(C.canReplaceWith(E,E,g.type,g.marks))return e.replace(s.before(v),y?i.after(v):n,new Q(nA(r.content,0,r.openStart,h),h,r.openEnd))}}let d=e.steps.length;for(let f=o.length-1;f>=0&&(e.replace(t,n,r),!(e.steps.length>d));f--){let h=o[f];h<0||(t=s.before(h),n=i.after(h))}}function nA(e,t,n,r,s){if(t<n){let i=e.firstChild;e=e.replaceChild(0,i.copy(nA(i.content,t+1,n,r,i)))}if(t>r){let i=s.contentMatchAt(0),o=i.fillBefore(e).append(e);e=o.append(i.matchFragment(o).fillBefore(W.empty,!0))}return e}function rJ(e,t,n,r){if(!r.isInline&&t==n&&e.doc.resolve(t).parent.content.size){let s=JZ(e.doc,t,r.type);s!=null&&(t=n=s)}e.replaceRange(t,n,new Q(W.from(r),0,0))}function sJ(e,t,n){let r=e.doc.resolve(t),s=e.doc.resolve(n),i=rA(r,s);for(let o=0;o<i.length;o++){let a=i[o],c=o==i.length-1;if(c&&a==0||r.node(a).type.contentMatch.validEnd)return e.delete(r.start(a),s.end(a));if(a>0&&(c||r.node(a-1).canReplace(r.index(a-1),s.indexAfter(a-1))))return e.delete(r.before(a),s.after(a))}for(let o=1;o<=r.depth&&o<=s.depth;o++)if(t-r.start(o)==r.depth-o&&n>r.end(o)&&s.end(o)-n!=s.depth-o)return e.delete(r.before(o),n);e.delete(t,n)}function rA(e,t){let n=[],r=Math.min(e.depth,t.depth);for(let s=r;s>=0;s--){let i=e.start(s);if(i<e.pos-(e.depth-s)||t.end(s)>t.pos+(t.depth-s)||e.node(s).type.spec.isolating||t.node(s).type.spec.isolating)break;(i==t.start(s)||s==e.depth&&s==t.depth&&e.parent.inlineContent&&t.parent.inlineContent&&s&&t.start(s-1)==i-1)&&n.push(s)}return n}class Na extends vn{constructor(t,n,r){super(),this.pos=t,this.attr=n,this.value=r}apply(t){let n=t.nodeAt(this.pos);if(!n)return At.fail("No node at attribute step's position");let r=Object.create(null);for(let i in n.attrs)r[i]=n.attrs[i];r[this.attr]=this.value;let s=n.type.create(r,null,n.marks);return At.fromReplace(t,this.pos,this.pos+1,new Q(W.from(s),0,n.isLeaf?0:1))}getMap(){return qn.empty}invert(t){return new Na(this.pos,this.attr,t.nodeAt(this.pos).attrs[this.attr])}map(t){let n=t.mapResult(this.pos,1);return n.deletedAfter?null:new Na(n.pos,this.attr,this.value)}toJSON(){return{stepType:"attr",pos:this.pos,attr:this.attr,value:this.value}}static fromJSON(t,n){if(typeof n.pos!="number"||typeof n.attr!="string")throw new RangeError("Invalid input for AttrStep.fromJSON");return new Na(n.pos,n.attr,n.value)}}vn.jsonID("attr",Na);class Ml extends vn{constructor(t,n){super(),this.attr=t,this.value=n}apply(t){let n=Object.create(null);for(let s in t.attrs)n[s]=t.attrs[s];n[this.attr]=this.value;let r=t.type.create(n,t.content,t.marks);return At.ok(r)}getMap(){return qn.empty}invert(t){return new Ml(this.attr,t.attrs[this.attr])}map(t){return this}toJSON(){return{stepType:"docAttr",attr:this.attr,value:this.value}}static fromJSON(t,n){if(typeof n.attr!="string")throw new RangeError("Invalid input for DocAttrStep.fromJSON");return new Ml(n.attr,n.value)}}vn.jsonID("docAttr",Ml);let tc=class extends Error{};tc=function e(t){let n=Error.call(this,t);return n.__proto__=e.prototype,n};tc.prototype=Object.create(Error.prototype);tc.prototype.constructor=tc;tc.prototype.name="TransformError";class iJ{constructor(t){this.doc=t,this.steps=[],this.docs=[],this.mapping=new Ia}get before(){return this.docs.length?this.docs[0]:this.doc}step(t){let n=this.maybeStep(t);if(n.failed)throw new tc(n.failed);return this}maybeStep(t){let n=t.apply(this.doc);return n.failed||this.addStep(t,n.doc),n}get docChanged(){return this.steps.length>0}addStep(t,n){this.docs.push(this.doc),this.steps.push(t),this.mapping.appendMap(t.getMap()),this.doc=n}replace(t,n=t,r=Q.empty){let s=_3(this.doc,t,n,r);return s&&this.step(s),this}replaceWith(t,n,r){return this.replace(t,n,new Q(W.from(r),0,0))}delete(t,n){return this.replace(t,n,Q.empty)}insert(t,n){return this.replaceWith(t,t,n)}replaceRange(t,n,r){return nJ(this,t,n,r),this}replaceRangeWith(t,n,r){return rJ(this,t,n,r),this}deleteRange(t,n){return sJ(this,t,n),this}lift(t,n){return jZ(this,t,n),this}join(t,n=1){return ZZ(this,t,n),this}wrap(t,n){return GZ(this,t,n),this}setBlockType(t,n=t,r,s=null){return HZ(this,t,n,r,s),this}setNodeMarkup(t,n,r=null,s){return WZ(this,t,n,r,s),this}setNodeAttribute(t,n,r){return this.step(new Na(t,n,r)),this}setDocAttribute(t,n){return this.step(new Ml(t,n)),this}addNodeMark(t,n){return this.step(new ci(t,n)),this}removeNodeMark(t,n){if(!(n instanceof Ze)){let r=this.doc.nodeAt(t);if(!r)throw new RangeError("No node at position "+t);if(n=n.isInSet(r.marks),!n)return this}return this.step(new ec(t,n)),this}split(t,n=1,r){return KZ(this,t,n,r),this}addMark(t,n,r){return DZ(this,t,n,r),this}removeMark(t,n,r){return LZ(this,t,n,r),this}clearIncompatible(t,n,r){return Qk(this,t,n,r),this}}const S1=Object.create(null);class He{constructor(t,n,r){this.$anchor=t,this.$head=n,this.ranges=r||[new oJ(t.min(n),t.max(n))]}get anchor(){return this.$anchor.pos}get head(){return this.$head.pos}get from(){return this.$from.pos}get to(){return this.$to.pos}get $from(){return this.ranges[0].$from}get $to(){return this.ranges[0].$to}get empty(){let t=this.ranges;for(let n=0;n<t.length;n++)if(t[n].$from.pos!=t[n].$to.pos)return!1;return!0}content(){return this.$from.doc.slice(this.from,this.to,!0)}replace(t,n=Q.empty){let r=n.content.lastChild,s=null;for(let a=0;a<n.openEnd;a++)s=r,r=r.lastChild;let i=t.steps.length,o=this.ranges;for(let a=0;a<o.length;a++){let{$from:c,$to:l}=o[a],u=t.mapping.slice(i);t.replaceRange(u.map(c.pos),u.map(l.pos),a?Q.empty:n),a==0&&gS(t,i,(r?r.isInline:s&&s.isTextblock)?-1:1)}}replaceWith(t,n){let r=t.steps.length,s=this.ranges;for(let i=0;i<s.length;i++){let{$from:o,$to:a}=s[i],c=t.mapping.slice(r),l=c.map(o.pos),u=c.map(a.pos);i?t.deleteRange(l,u):(t.replaceRangeWith(l,u,n),gS(t,r,n.isInline?-1:1))}}static findFrom(t,n,r=!1){let s=t.parent.inlineContent?new Ve(t):fa(t.node(0),t.parent,t.pos,t.index(),n,r);if(s)return s;for(let i=t.depth-1;i>=0;i--){let o=n<0?fa(t.node(0),t.node(i),t.before(i+1),t.index(i),n,r):fa(t.node(0),t.node(i),t.after(i+1),t.index(i)+1,n,r);if(o)return o}return null}static near(t,n=1){return this.findFrom(t,n)||this.findFrom(t,-n)||new $n(t.node(0))}static atStart(t){return fa(t,t,0,0,1)||new $n(t)}static atEnd(t){return fa(t,t,t.content.size,t.childCount,-1)||new $n(t)}static fromJSON(t,n){if(!n||!n.type)throw new RangeError("Invalid input for Selection.fromJSON");let r=S1[n.type];if(!r)throw new RangeError(`No selection type ${n.type} defined`);return r.fromJSON(t,n)}static jsonID(t,n){if(t in S1)throw new RangeError("Duplicate use of selection JSON ID "+t);return S1[t]=n,n.prototype.jsonID=t,n}getBookmark(){return Ve.between(this.$anchor,this.$head).getBookmark()}}He.prototype.visible=!0;class oJ{constructor(t,n){this.$from=t,this.$to=n}}let pS=!1;function mS(e){!pS&&!e.parent.inlineContent&&(pS=!0,console.warn("TextSelection endpoint not pointing into a node with inline content ("+e.parent.type.name+")"))}class Ve extends He{constructor(t,n=t){mS(t),mS(n),super(t,n)}get $cursor(){return this.$anchor.pos==this.$head.pos?this.$head:null}map(t,n){let r=t.resolve(n.map(this.head));if(!r.parent.inlineContent)return He.near(r);let s=t.resolve(n.map(this.anchor));return new Ve(s.parent.inlineContent?s:r,r)}replace(t,n=Q.empty){if(super.replace(t,n),n==Q.empty){let r=this.$from.marksAcross(this.$to);r&&t.ensureMarks(r)}}eq(t){return t instanceof Ve&&t.anchor==this.anchor&&t.head==this.head}getBookmark(){return new Qh(this.anchor,this.head)}toJSON(){return{type:"text",anchor:this.anchor,head:this.head}}static fromJSON(t,n){if(typeof n.anchor!="number"||typeof n.head!="number")throw new RangeError("Invalid input for TextSelection.fromJSON");return new Ve(t.resolve(n.anchor),t.resolve(n.head))}static create(t,n,r=n){let s=t.resolve(n);return new this(s,r==n?s:t.resolve(r))}static between(t,n,r){let s=t.pos-n.pos;if((!r||s)&&(r=s>=0?1:-1),!n.parent.inlineContent){let i=He.findFrom(n,r,!0)||He.findFrom(n,-r,!0);if(i)n=i.$head;else return He.near(n,r)}return t.parent.inlineContent||(s==0?t=n:(t=(He.findFrom(t,-r,!0)||He.findFrom(t,r,!0)).$anchor,t.pos<n.pos!=s<0&&(t=n))),new Ve(t,n)}}He.jsonID("text",Ve);class Qh{constructor(t,n){this.anchor=t,this.head=n}map(t){return new Qh(t.map(this.anchor),t.map(this.head))}resolve(t){return Ve.between(t.resolve(this.anchor),t.resolve(this.head))}}class Oe extends He{constructor(t){let n=t.nodeAfter,r=t.node(0).resolve(t.pos+n.nodeSize);super(t,r),this.node=n}map(t,n){let{deleted:r,pos:s}=n.mapResult(this.anchor),i=t.resolve(s);return r?He.near(i):new Oe(i)}content(){return new Q(W.from(this.node),0,0)}eq(t){return t instanceof Oe&&t.anchor==this.anchor}toJSON(){return{type:"node",anchor:this.anchor}}getBookmark(){return new v3(this.anchor)}static fromJSON(t,n){if(typeof n.anchor!="number")throw new RangeError("Invalid input for NodeSelection.fromJSON");return new Oe(t.resolve(n.anchor))}static create(t,n){return new Oe(t.resolve(n))}static isSelectable(t){return!t.isText&&t.type.spec.selectable!==!1}}Oe.prototype.visible=!1;He.jsonID("node",Oe);class v3{constructor(t){this.anchor=t}map(t){let{deleted:n,pos:r}=t.mapResult(this.anchor);return n?new Qh(r,r):new v3(r)}resolve(t){let n=t.resolve(this.anchor),r=n.nodeAfter;return r&&Oe.isSelectable(r)?new Oe(n):He.near(n)}}class $n extends He{constructor(t){super(t.resolve(0),t.resolve(t.content.size))}replace(t,n=Q.empty){if(n==Q.empty){t.delete(0,t.doc.content.size);let r=He.atStart(t.doc);r.eq(t.selection)||t.setSelection(r)}else super.replace(t,n)}toJSON(){return{type:"all"}}static fromJSON(t){return new $n(t)}map(t){return new $n(t)}eq(t){return t instanceof $n}getBookmark(){return aJ}}He.jsonID("all",$n);const aJ={map(){return this},resolve(e){return new $n(e)}};function fa(e,t,n,r,s,i=!1){if(t.inlineContent)return Ve.create(e,n);for(let o=r-(s>0?0:1);s>0?o<t.childCount:o>=0;o+=s){let a=t.child(o);if(a.isAtom){if(!i&&Oe.isSelectable(a))return Oe.create(e,n-(s<0?a.nodeSize:0))}else{let c=fa(e,a,n+s,s<0?a.childCount:0,s,i);if(c)return c}n+=a.nodeSize*s}return null}function gS(e,t,n){let r=e.steps.length-1;if(r<t)return;let s=e.steps[r];if(!(s instanceof un||s instanceof zn))return;let i=e.mapping.maps[r],o;i.forEach((a,c,l,u)=>{o==null&&(o=u)}),e.setSelection(He.near(e.doc.resolve(o),n))}const _S=1,vS=2,yS=4;class cJ extends iJ{constructor(t){super(t.doc),this.curSelectionFor=0,this.updated=0,this.meta=Object.create(null),this.time=Date.now(),this.curSelection=t.selection,this.storedMarks=t.storedMarks}get selection(){return this.curSelectionFor<this.steps.length&&(this.curSelection=this.curSelection.map(this.doc,this.mapping.slice(this.curSelectionFor)),this.curSelectionFor=this.steps.length),this.curSelection}setSelection(t){if(t.$from.doc!=this.doc)throw new RangeError("Selection passed to setSelection must point at the current document");return this.curSelection=t,this.curSelectionFor=this.steps.length,this.updated=(this.updated|_S)&-3,this.storedMarks=null,this}get selectionSet(){return(this.updated&_S)>0}setStoredMarks(t){return this.storedMarks=t,this.updated|=vS,this}ensureMarks(t){return Ze.sameSet(this.storedMarks||this.selection.$from.marks(),t)||this.setStoredMarks(t),this}addStoredMark(t){return this.ensureMarks(t.addToSet(this.storedMarks||this.selection.$head.marks()))}removeStoredMark(t){return this.ensureMarks(t.removeFromSet(this.storedMarks||this.selection.$head.marks()))}get storedMarksSet(){return(this.updated&vS)>0}addStep(t,n){super.addStep(t,n),this.updated=this.updated&-3,this.storedMarks=null}setTime(t){return this.time=t,this}replaceSelection(t){return this.selection.replace(this,t),this}replaceSelectionWith(t,n=!0){let r=this.selection;return n&&(t=t.mark(this.storedMarks||(r.empty?r.$from.marks():r.$from.marksAcross(r.$to)||Ze.none))),r.replaceWith(this,t),this}deleteSelection(){return this.selection.replace(this),this}insertText(t,n,r){let s=this.doc.type.schema;if(n==null)return t?this.replaceSelectionWith(s.text(t),!0):this.deleteSelection();{if(r==null&&(r=n),r=r??n,!t)return this.deleteRange(n,r);let i=this.storedMarks;if(!i){let o=this.doc.resolve(n);i=r==n?o.marks():o.marksAcross(this.doc.resolve(r))}return this.replaceRangeWith(n,r,s.text(t,i)),this.selection.empty||this.setSelection(He.near(this.selection.$to)),this}}setMeta(t,n){return this.meta[typeof t=="string"?t:t.key]=n,this}getMeta(t){return this.meta[typeof t=="string"?t:t.key]}get isGeneric(){for(let t in this.meta)return!1;return!0}scrollIntoView(){return this.updated|=yS,this}get scrolledIntoView(){return(this.updated&yS)>0}}function CS(e,t){return!t||!e?e:e.bind(t)}class zc{constructor(t,n,r){this.name=t,this.init=CS(n.init,r),this.apply=CS(n.apply,r)}}const lJ=[new zc("doc",{init(e){return e.doc||e.schema.topNodeType.createAndFill()},apply(e){return e.doc}}),new zc("selection",{init(e,t){return e.selection||He.atStart(t.doc)},apply(e){return e.selection}}),new zc("storedMarks",{init(e){return e.storedMarks||null},apply(e,t,n,r){return r.selection.$cursor?e.storedMarks:null}}),new zc("scrollToSelection",{init(){return 0},apply(e,t){return e.scrolledIntoView?t+1:t}})];class w1{constructor(t,n){this.schema=t,this.plugins=[],this.pluginsByKey=Object.create(null),this.fields=lJ.slice(),n&&n.forEach(r=>{if(this.pluginsByKey[r.key])throw new RangeError("Adding different instances of a keyed plugin ("+r.key+")");this.plugins.push(r),this.pluginsByKey[r.key]=r,r.spec.state&&this.fields.push(new zc(r.key,r.spec.state,r))})}}class Sa{constructor(t){this.config=t}get schema(){return this.config.schema}get plugins(){return this.config.plugins}apply(t){return this.applyTransaction(t).state}filterTransaction(t,n=-1){for(let r=0;r<this.config.plugins.length;r++)if(r!=n){let s=this.config.plugins[r];if(s.spec.filterTransaction&&!s.spec.filterTransaction.call(s,t,this))return!1}return!0}applyTransaction(t){if(!this.filterTransaction(t))return{state:this,transactions:[]};let n=[t],r=this.applyInner(t),s=null;for(;;){let i=!1;for(let o=0;o<this.config.plugins.length;o++){let a=this.config.plugins[o];if(a.spec.appendTransaction){let c=s?s[o].n:0,l=s?s[o].state:this,u=c<n.length&&a.spec.appendTransaction.call(a,c?n.slice(c):n,l,r);if(u&&r.filterTransaction(u,o)){if(u.setMeta("appendedTransaction",t),!s){s=[];for(let d=0;d<this.config.plugins.length;d++)s.push(d<o?{state:r,n:n.length}:{state:this,n:0})}n.push(u),r=r.applyInner(u),i=!0}s&&(s[o]={state:r,n:n.length})}}if(!i)return{state:r,transactions:n}}}applyInner(t){if(!t.before.eq(this.doc))throw new RangeError("Applying a mismatched transaction");let n=new Sa(this.config),r=this.config.fields;for(let s=0;s<r.length;s++){let i=r[s];n[i.name]=i.apply(t,this[i.name],this,n)}return n}get tr(){return new cJ(this)}static create(t){let n=new w1(t.doc?t.doc.type.schema:t.schema,t.plugins),r=new Sa(n);for(let s=0;s<n.fields.length;s++)r[n.fields[s].name]=n.fields[s].init(t,r);return r}reconfigure(t){let n=new w1(this.schema,t.plugins),r=n.fields,s=new Sa(n);for(let i=0;i<r.length;i++){let o=r[i].name;s[o]=this.hasOwnProperty(o)?this[o]:r[i].init(t,s)}return s}toJSON(t){let n={doc:this.doc.toJSON(),selection:this.selection.toJSON()};if(this.storedMarks&&(n.storedMarks=this.storedMarks.map(r=>r.toJSON())),t&&typeof t=="object")for(let r in t){if(r=="doc"||r=="selection")throw new RangeError("The JSON fields `doc` and `selection` are reserved");let s=t[r],i=s.spec.state;i&&i.toJSON&&(n[r]=i.toJSON.call(s,this[s.key]))}return n}static fromJSON(t,n,r){if(!n)throw new RangeError("Invalid input for EditorState.fromJSON");if(!t.schema)throw new RangeError("Required config field 'schema' missing");let s=new w1(t.schema,t.plugins),i=new Sa(s);return s.fields.forEach(o=>{if(o.name=="doc")i.doc=lo.fromJSON(t.schema,n.doc);else if(o.name=="selection")i.selection=He.fromJSON(i.doc,n.selection);else if(o.name=="storedMarks")n.storedMarks&&(i.storedMarks=n.storedMarks.map(t.schema.markFromJSON));else{if(r)for(let a in r){let c=r[a],l=c.spec.state;if(c.key==o.name&&l&&l.fromJSON&&Object.prototype.hasOwnProperty.call(n,a)){i[o.name]=l.fromJSON.call(c,t,n[a],i);return}}i[o.name]=o.init(t,i)}}),i}}function sA(e,t,n){for(let r in e){let s=e[r];s instanceof Function?s=s.bind(t):r=="handleDOMEvents"&&(s=sA(s,t,{})),n[r]=s}return n}class _s{constructor(t){this.spec=t,this.props={},t.props&&sA(t.props,this,this.props),this.key=t.key?t.key.key:iA("plugin")}getState(t){return t[this.key]}}const E1=Object.create(null);function iA(e){return e in E1?e+"$"+ ++E1[e]:(E1[e]=0,e+"$")}class Vs{constructor(t="key"){this.key=iA(t)}get(t){return t.config.pluginsByKey[this.key]}getState(t){return t[this.key]}}const oA=new Vs("transactionEventPlugin"),Ev="prosemirrorDispatchTransaction";function bS(e,t){const{eventTarget:n}=oA.getState(e.state);return n.addEventListener(Ev,t),()=>{n.removeEventListener(Ev,t)}}function uJ(e){return new _s({key:oA,state:{init(){return{eventTarget:e}},apply(t,n){return n}}})}const Td=new Vs("customKeymapPlugin");function dJ(e,t){e.dispatch(e.state.tr.setMeta(Td,{handlers:t}))}function fJ(e={handlers:{}}){return new _s({key:Td,state:{init(){return{...e}},apply(t,n){const r=t.getMeta(Td);return r?{...n,...r}:n}},props:{handleKeyDown(t,n){if(jh(n))return!1;const s=Td.getState(t.state).handlers[n.key];return s?s(n):!1}}})}const hJ=(e,t,n,r)=>{if(e.value){const s=t.marks.startend?.create(n)??null;return t.text(e.value,s?[s,...r??[]]:r)}return null},aA=new Vs("contentReference"),W_e=e=>{const t=Rh(e).map(({newContentReference:n})=>n);return new _s({key:aA,state:{init:(n,{doc:r})=>({displayedContentReferences:t}),apply:(n,r)=>r},props:{}})},cA=(e,t)=>e.selection.empty?!1:(t&&t(e.tr.deleteSelection().scrollIntoView()),!0);function pJ(e,t){let{$cursor:n}=e.selection;return!n||(t?!t.endOfTextblock("backward",e):n.parentOffset>0)?null:n}const y3=(e,t,n)=>{let r=pJ(e,n);if(!r)return!1;let s=lA(r);if(!s){let o=r.blockRange(),a=o&&g3(o);return a==null?!1:(t&&t(e.tr.lift(o,a).scrollIntoView()),!0)}let i=s.nodeBefore;if(!i.type.spec.isolating&&pA(e,s,t))return!0;if(r.parent.content.size==0&&(nc(i,"end")||Oe.isSelectable(i))){let o=_3(e.doc,r.before(),r.after(),Q.empty);if(o&&o.slice.size<o.to-o.from){if(t){let a=e.tr.step(o);a.setSelection(nc(i,"end")?He.findFrom(a.doc.resolve(a.mapping.map(s.pos,-1)),-1):Oe.create(a.doc,s.pos-i.nodeSize)),t(a.scrollIntoView())}return!0}}return i.isAtom&&s.depth==r.depth-1?(t&&t(e.tr.delete(s.pos-i.nodeSize,s.pos).scrollIntoView()),!0):!1};function nc(e,t,n=!1){for(let r=e;r;r=t=="start"?r.firstChild:r.lastChild){if(r.isTextblock)return!0;if(n&&r.childCount!=1)return!1}return!1}const mJ=(e,t,n)=>{let{$head:r,empty:s}=e.selection,i=r;if(!s)return!1;if(r.parent.isTextblock){if(n?!n.endOfTextblock("backward",e):r.parentOffset>0)return!1;i=lA(r)}let o=i&&i.nodeBefore;return!o||!Oe.isSelectable(o)?!1:(t&&t(e.tr.setSelection(Oe.create(e.doc,i.pos-o.nodeSize)).scrollIntoView()),!0)};function lA(e){if(!e.parent.type.spec.isolating)for(let t=e.depth-1;t>=0;t--){if(e.index(t)>0)return e.doc.resolve(e.before(t+1));if(e.node(t).type.spec.isolating)break}return null}function gJ(e,t){let{$cursor:n}=e.selection;return!n||(t?!t.endOfTextblock("forward",e):n.parentOffset<n.parent.content.size)?null:n}const _J=(e,t,n)=>{let r=gJ(e,n);if(!r)return!1;let s=uA(r);if(!s)return!1;let i=s.nodeAfter;if(pA(e,s,t))return!0;if(r.parent.content.size==0&&(nc(i,"start")||Oe.isSelectable(i))){let o=_3(e.doc,r.before(),r.after(),Q.empty);if(o&&o.slice.size<o.to-o.from){if(t){let a=e.tr.step(o);a.setSelection(nc(i,"start")?He.findFrom(a.doc.resolve(a.mapping.map(s.pos)),1):Oe.create(a.doc,a.mapping.map(s.pos))),t(a.scrollIntoView())}return!0}}return i.isAtom&&s.depth==r.depth-1?(t&&t(e.tr.delete(s.pos,s.pos+i.nodeSize).scrollIntoView()),!0):!1},vJ=(e,t,n)=>{let{$head:r,empty:s}=e.selection,i=r;if(!s)return!1;if(r.parent.isTextblock){if(n?!n.endOfTextblock("forward",e):r.parentOffset<r.parent.content.size)return!1;i=uA(r)}let o=i&&i.nodeAfter;return!o||!Oe.isSelectable(o)?!1:(t&&t(e.tr.setSelection(Oe.create(e.doc,i.pos)).scrollIntoView()),!0)};function uA(e){if(!e.parent.type.spec.isolating)for(let t=e.depth-1;t>=0;t--){let n=e.node(t);if(e.index(t)+1<n.childCount)return e.doc.resolve(e.after(t+1));if(n.type.spec.isolating)break}return null}const yJ=(e,t)=>{let{$head:n,$anchor:r}=e.selection;return!n.parent.type.spec.code||!n.sameParent(r)?!1:(t&&t(e.tr.insertText(`
`).scrollIntoView()),!0)};function C3(e){for(let t=0;t<e.edgeCount;t++){let{type:n}=e.edge(t);if(n.isTextblock&&!n.hasRequiredAttrs())return n}return null}const CJ=(e,t)=>{let{$head:n,$anchor:r}=e.selection;if(!n.parent.type.spec.code||!n.sameParent(r))return!1;let s=n.node(-1),i=n.indexAfter(-1),o=C3(s.contentMatchAt(i));if(!o||!s.canReplaceWith(i,i,o))return!1;if(t){let a=n.after(),c=e.tr.replaceWith(a,a,o.createAndFill());c.setSelection(He.near(c.doc.resolve(a),1)),t(c.scrollIntoView())}return!0},dA=(e,t)=>{let n=e.selection,{$from:r,$to:s}=n;if(n instanceof $n||r.parent.inlineContent||s.parent.inlineContent)return!1;let i=C3(s.parent.contentMatchAt(s.indexAfter()));if(!i||!i.isTextblock)return!1;if(t){let o=(!r.parentOffset&&s.index()<s.parent.childCount?r:s).pos,a=e.tr.insert(o,i.createAndFill());a.setSelection(Ve.create(a.doc,o+1)),t(a.scrollIntoView())}return!0},fA=(e,t)=>{let{$cursor:n}=e.selection;if(!n||n.parent.content.size)return!1;if(n.depth>1&&n.after()!=n.end(-1)){let i=n.before();if(xd(e.doc,i))return t&&t(e.tr.split(i).scrollIntoView()),!0}let r=n.blockRange(),s=r&&g3(r);return s==null?!1:(t&&t(e.tr.lift(r,s).scrollIntoView()),!0)};function bJ(e){return(t,n)=>{let{$from:r,$to:s}=t.selection;if(t.selection instanceof Oe&&t.selection.node.isBlock)return!r.parentOffset||!xd(t.doc,r.pos)?!1:(n&&n(t.tr.split(r.pos).scrollIntoView()),!0);if(!r.parent.isBlock)return!1;if(n){let i=s.parentOffset==s.parent.content.size,o=t.tr;(t.selection instanceof Ve||t.selection instanceof $n)&&o.deleteSelection();let a=r.depth==0?null:C3(r.node(-1).contentMatchAt(r.indexAfter(-1))),c=i&&a?[{type:a}]:void 0,l=xd(o.doc,o.mapping.map(r.pos),1,c);if(!c&&!l&&xd(o.doc,o.mapping.map(r.pos),1,a?[{type:a}]:void 0)&&(a&&(c=[{type:a}]),l=!0),l&&(o.split(o.mapping.map(r.pos),1,c),!i&&!r.parentOffset&&r.parent.type!=a)){let u=o.mapping.map(r.before()),d=o.doc.resolve(u);a&&r.node(-1).canReplaceWith(d.index(),d.index()+1,a)&&o.setNodeMarkup(o.mapping.map(r.before()),a)}n(o.scrollIntoView())}return!0}}const hA=bJ(),SJ=(e,t)=>(t&&t(e.tr.setSelection(new $n(e.doc))),!0);function wJ(e,t,n){let r=t.nodeBefore,s=t.nodeAfter,i=t.index();return!r||!s||!r.type.compatibleContent(s.type)?!1:!r.content.size&&t.parent.canReplace(i-1,i)?(n&&n(e.tr.delete(t.pos-r.nodeSize,t.pos).scrollIntoView()),!0):!t.parent.canReplace(i,i+1)||!(s.isTextblock||Xk(e.doc,t.pos))?!1:(n&&n(e.tr.clearIncompatible(t.pos,r.type,r.contentMatchAt(r.childCount)).join(t.pos).scrollIntoView()),!0)}function pA(e,t,n){let r=t.nodeBefore,s=t.nodeAfter,i,o;if(r.type.spec.isolating||s.type.spec.isolating)return!1;if(wJ(e,t,n))return!0;let a=t.parent.canReplace(t.index(),t.index()+1);if(a&&(i=(o=r.contentMatchAt(r.childCount)).findWrapping(s.type))&&o.matchType(i[0]||s.type).validEnd){if(n){let d=t.pos+s.nodeSize,f=W.empty;for(let _=i.length-1;_>=0;_--)f=W.from(i[_].create(null,f));f=W.from(r.copy(f));let h=e.tr.step(new zn(t.pos-1,d,t.pos,d,new Q(f,1,0),i.length,!0)),g=d+2*i.length;Xk(h.doc,g)&&h.join(g),n(h.scrollIntoView())}return!0}let c=He.findFrom(t,1),l=c&&c.$from.blockRange(c.$to),u=l&&g3(l);if(u!=null&&u>=t.depth)return n&&n(e.tr.lift(l,u).scrollIntoView()),!0;if(a&&nc(s,"start",!0)&&nc(r,"end")){let d=r,f=[];for(;f.push(d),!d.isTextblock;)d=d.lastChild;let h=s,g=1;for(;!h.isTextblock;h=h.firstChild)g++;if(d.canReplace(d.childCount,d.childCount,h.content)){if(n){let _=W.empty;for(let y=f.length-1;y>=0;y--)_=W.from(f[y].copy(_));let v=e.tr.step(new zn(t.pos-f.length,t.pos+s.nodeSize,t.pos+g,t.pos+s.nodeSize-g,new Q(_,f.length,0),0,!0));n(v.scrollIntoView())}return!0}}return!1}function mA(e){return function(t,n){let r=t.selection,s=e<0?r.$from:r.$to,i=s.depth;for(;s.node(i).isInline;){if(!i)return!1;i--}return s.node(i).isTextblock?(n&&n(t.tr.setSelection(Ve.create(t.doc,e<0?s.start(i):s.end(i)))),!0):!1}}const EJ=mA(-1),xJ=mA(1);function K_e(e,t=null){return function(n,r){let{$from:s,$to:i}=n.selection,o=s.blockRange(i),a=o&&UZ(o,e,t);return a?(r&&r(n.tr.wrap(o,a).scrollIntoView()),!0):!1}}function Y_e(e,t=null){return function(n,r){let s=!1;for(let i=0;i<n.selection.ranges.length&&!s;i++){let{$from:{pos:o},$to:{pos:a}}=n.selection.ranges[i];n.doc.nodesBetween(o,a,(c,l)=>{if(s)return!1;if(!(!c.isTextblock||c.hasMarkup(e,t)))if(c.type==e)s=!0;else{let u=n.doc.resolve(l),d=u.index();s=u.parent.canReplaceWith(d,d+1,e)}})}if(!s)return!1;if(r){let i=n.tr;for(let o=0;o<n.selection.ranges.length;o++){let{$from:{pos:a},$to:{pos:c}}=n.selection.ranges[o];i.setBlockType(a,c,e,t)}r(i.scrollIntoView())}return!0}}function TJ(e,t,n){for(let r=0;r<t.length;r++){let{$from:s,$to:i}=t[r],o=s.depth==0?e.inlineContent&&e.type.allowsMarkType(n):!1;if(e.nodesBetween(s.pos,i.pos,a=>{if(o)return!1;o=a.inlineContent&&a.type.allowsMarkType(n)}),o)return!0}return!1}function Z_e(e,t=null){return function(n,r){let{empty:s,$cursor:i,ranges:o}=n.selection;if(s&&!i||!TJ(n.doc,o,e))return!1;if(r)if(i)e.isInSet(n.storedMarks||i.marks())?r(n.tr.removeStoredMark(e)):r(n.tr.addStoredMark(e.create(t)));else{let a=!1,c=n.tr;for(let l=0;!a&&l<o.length;l++){let{$from:u,$to:d}=o[l];a=n.doc.rangeHasMark(u.pos,d.pos,e)}for(let l=0;l<o.length;l++){let{$from:u,$to:d}=o[l];if(a)c.removeMark(u.pos,d.pos,e);else{let f=u.pos,h=d.pos,g=u.nodeAfter,_=d.nodeBefore,v=g&&g.isText?/^\s*/.exec(g.text)[0].length:0,y=_&&_.isText?/\s*$/.exec(_.text)[0].length:0;f+v<h&&(f+=v,h-=y),c.addMark(f,h,e.create(t))}}r(c.scrollIntoView())}return!0}}function Xh(...e){return function(t,n,r){for(let s=0;s<e.length;s++)if(e[s](t,n,r))return!0;return!1}}let x1=Xh(cA,y3,mJ),SS=Xh(cA,_J,vJ);const xs={Enter:Xh(yJ,dA,fA,hA),"Mod-Enter":CJ,Backspace:x1,"Mod-Backspace":x1,"Shift-Backspace":x1,Delete:SS,"Mod-Delete":SS,"Mod-a":SJ},gA={"Ctrl-h":xs.Backspace,"Alt-Backspace":xs["Mod-Backspace"],"Ctrl-d":xs.Delete,"Ctrl-Alt-Backspace":xs["Mod-Delete"],"Alt-Delete":xs["Mod-Delete"],"Alt-d":xs["Mod-Delete"],"Ctrl-a":EJ,"Ctrl-e":xJ};for(let e in xs)gA[e]=xs[e];const OJ=typeof navigator<"u"?/Mac|iP(hone|[oa]d)/.test(navigator.platform):typeof os<"u"&&os.platform?os.platform()=="darwin":!1,wS=OJ?gA:xs;function _A(e){let t="",n=!1;const r=[];function s(i){if(n=!1,i.type.name==="paragraph")return i.descendants(o=>s(o)),t+=`
`,n=!0,!1;if(i.type.name==="command_token"){const o=i.textContent;return r.push({symbol:V8.SystemHint,startIndex:t.length,endIndex:t.length+o.length}),t+=o,!1}else i.isText&&i.text!==void 0&&(t+=i.text)}return e.descendants(i=>s(i)),n&&t.endsWith(`
`)&&(t=t.slice(0,-1)),{content:t,metadata:{custom_symbol_offsets:r}}}function kJ(e){return _A(e.state.doc)}const b3=Xh(dA,fA,hA);async function vA(e,t,n=!1,r=!0){if(n){MJ(e,t);return}const{schema:s}=e.state,i=t.split(`
`);if(r&&e.dispatch(e.state.tr.deleteSelection()),e.dispatch(e.state.tr.insertText(i[0])),i.length>1){b3(e.state,e.dispatch);const o=i.slice(1),a=W.fromArray(o.map(l=>s.nodes.paragraph.create(null,l===""?null:s.text(l)))),c=new Q(a,0,0);e.dispatch(e.state.tr.replaceSelection(c)),y3(e.state,e.dispatch,e)}}const AJ=/oaicite:(\d+)/g;async function MJ(e,t){const{schema:n}=e.state,r=t.split(`
`);e.dispatch(e.state.tr.deleteSelection());const{tr:s}=e.state,{$from:i}=s.selection;i.parent.isTextblock||(s.insert(i.pos,n.nodes.paragraph.create()),e.dispatch(s),e.focus());const{selection:o}=e.state,{$from:a}=o,c=r[0],l=ES(c,n,e),u=W.fromArray(l);let d=u;a.parent.type.validContent(u)||(d=n.nodes.paragraph.create(null,u));const f=new Q(W.from(d),0,0);if(e.dispatch(e.state.tr.replaceSelection(f)),r.length>1){b3(e.state,e.dispatch);const g=r.slice(1).map(y=>{const C=ES(y,n,e);return n.nodes.paragraph.create(null,C)}),_=W.fromArray(g),v=new Q(_,0,0);e.dispatch(e.state.tr.replaceSelection(v)),y3(e.state,e.dispatch,e)}}function ES(e,t,n){const r=[];let s=0,i;if(!!!aA.get(n.state))return[t.text(e)];for(;(i=AJ.exec(e))!==null;){if(i.index>s){const l=e.slice(s,i.index);r.push(t.text(l))}const a=i[1],c=IJ(a,t);r.push(c),s=i.index+i[0].length}if(s<e.length){const a=e.slice(s);r.push(t.text(a))}return r}function IJ(e,t){const n=hJ({value:"oaicite:"+e},t);if(n==null)throw new Error("Failed to create text node for content reference");const r={index:e,displayLayout:"inline"},s=W.fromArray([n]);return t.nodes.contentReference.create(r,s)}const J_e=e=>Zn(e).checkGate("223382091");var T1,xS;function NJ(){if(xS)return T1;xS=1;function e(t,n){for(var r=-1,s=t==null?0:t.length;++r<s&&n(t[r],r,t)!==!1;);return t}return T1=e,T1}var O1,TS;function yA(){if(TS)return O1;TS=1;var e=Lo(),t=function(){try{var n=e(Object,"defineProperty");return n({},"",{}),n}catch{}}();return O1=t,O1}var k1,OS;function S3(){if(OS)return k1;OS=1;var e=yA();function t(n,r,s){r=="__proto__"&&e?e(n,r,{configurable:!0,enumerable:!0,value:s,writable:!0}):n[r]=s}return k1=t,k1}var A1,kS;function w3(){if(kS)return A1;kS=1;var e=S3(),t=n2(),n=Object.prototype,r=n.hasOwnProperty;function s(i,o,a){var c=i[o];(!(r.call(i,o)&&t(c,a))||a===void 0&&!(o in i))&&e(i,o,a)}return A1=s,A1}var M1,AS;function ep(){if(AS)return M1;AS=1;var e=w3(),t=S3();function n(r,s,i,o){var a=!i;i||(i={});for(var c=-1,l=s.length;++c<l;){var u=s[c],d=o?o(i[u],r[u],u,i,r):void 0;d===void 0&&(d=r[u]),a?t(i,u,d):e(i,u,d)}return i}return M1=n,M1}var I1,MS;function RJ(){if(MS)return I1;MS=1;var e=ep(),t=fc();function n(r,s){return r&&e(s,t(s),r)}return I1=n,I1}var N1,IS;function PJ(){if(IS)return N1;IS=1;function e(t){var n=[];if(t!=null)for(var r in Object(t))n.push(r);return n}return N1=e,N1}var R1,NS;function DJ(){if(NS)return R1;NS=1;var e=qs(),t=m2(),n=PJ(),r=Object.prototype,s=r.hasOwnProperty;function i(o){if(!e(o))return n(o);var a=t(o),c=[];for(var l in o)l=="constructor"&&(a||!s.call(o,l))||c.push(l);return c}return R1=i,R1}var P1,RS;function E3(){if(RS)return P1;RS=1;var e=Ix(),t=DJ(),n=kh();function r(s){return n(s)?e(s,!0):t(s)}return P1=r,P1}var D1,PS;function LJ(){if(PS)return D1;PS=1;var e=ep(),t=E3();function n(r,s){return r&&e(s,t(s),r)}return D1=n,D1}var $c={exports:{}};$c.exports;var DS;function FJ(){return DS||(DS=1,function(e,t){var n=Gr(),r=t&&!t.nodeType&&t,s=r&&!0&&e&&!e.nodeType&&e,i=s&&s.exports===r,o=i?n.Buffer:void 0,a=o?o.allocUnsafe:void 0;function c(l,u){if(u)return l.slice();var d=l.length,f=a?a(d):new l.constructor(d);return l.copy(f),f}e.exports=c}($c,$c.exports)),$c.exports}var L1,LS;function jJ(){if(LS)return L1;LS=1;function e(t,n){var r=-1,s=t.length;for(n||(n=Array(s));++r<s;)n[r]=t[r];return n}return L1=e,L1}var F1,FS;function UJ(){if(FS)return F1;FS=1;var e=ep(),t=c2();function n(r,s){return e(r,t(r),s)}return F1=n,F1}var j1,jS;function CA(){if(jS)return j1;jS=1;var e=Nx(),t=e(Object.getPrototypeOf,Object);return j1=t,j1}var U1,US;function bA(){if(US)return U1;US=1;var e=a2(),t=CA(),n=c2(),r=Ax(),s=Object.getOwnPropertySymbols,i=s?function(o){for(var a=[];o;)e(a,n(o)),o=t(o);return a}:r;return U1=i,U1}var B1,BS;function BJ(){if(BS)return B1;BS=1;var e=ep(),t=bA();function n(r,s){return e(r,t(r),s)}return B1=n,B1}var q1,qS;function SA(){if(qS)return q1;qS=1;var e=kx(),t=bA(),n=E3();function r(s){return e(s,n,t)}return q1=r,q1}var G1,GS;function qJ(){if(GS)return G1;GS=1;var e=Object.prototype,t=e.hasOwnProperty;function n(r){var s=r.length,i=new r.constructor(s);return s&&typeof r[0]=="string"&&t.call(r,"index")&&(i.index=r.index,i.input=r.input),i}return G1=n,G1}var H1,HS;function x3(){if(HS)return H1;HS=1;var e=Ox();function t(n){var r=new n.constructor(n.byteLength);return new e(r).set(new e(n)),r}return H1=t,H1}var V1,VS;function GJ(){if(VS)return V1;VS=1;var e=x3();function t(n,r){var s=r?e(n.buffer):n.buffer;return new n.constructor(s,n.byteOffset,n.byteLength)}return V1=t,V1}var z1,zS;function HJ(){if(zS)return z1;zS=1;var e=/\w*$/;function t(n){var r=new n.constructor(n.source,e.exec(n));return r.lastIndex=n.lastIndex,r}return z1=t,z1}var $1,$S;function VJ(){if($S)return $1;$S=1;var e=uc(),t=e?e.prototype:void 0,n=t?t.valueOf:void 0;function r(s){return n?Object(n.call(s)):{}}return $1=r,$1}var W1,WS;function zJ(){if(WS)return W1;WS=1;var e=x3();function t(n,r){var s=r?e(n.buffer):n.buffer;return new n.constructor(s,n.byteOffset,n.length)}return W1=t,W1}var K1,KS;function $J(){if(KS)return K1;KS=1;var e=x3(),t=GJ(),n=HJ(),r=VJ(),s=zJ(),i="[object Boolean]",o="[object Date]",a="[object Map]",c="[object Number]",l="[object RegExp]",u="[object Set]",d="[object String]",f="[object Symbol]",h="[object ArrayBuffer]",g="[object DataView]",_="[object Float32Array]",v="[object Float64Array]",y="[object Int8Array]",C="[object Int16Array]",E="[object Int32Array]",b="[object Uint8Array]",S="[object Uint8ClampedArray]",w="[object Uint16Array]",x="[object Uint32Array]";function T(O,A,k){var I=O.constructor;switch(A){case h:return e(O);case i:case o:return new I(+O);case g:return t(O,k);case _:case v:case y:case C:case E:case b:case S:case w:case x:return s(O,k);case a:return new I;case c:case d:return new I(O);case l:return n(O);case u:return new I;case f:return r(O)}}return K1=T,K1}var Y1,YS;function WJ(){if(YS)return Y1;YS=1;var e=qs(),t=Object.create,n=function(){function r(){}return function(s){if(!e(s))return{};if(t)return t(s);r.prototype=s;var i=new r;return r.prototype=void 0,i}}();return Y1=n,Y1}var Z1,ZS;function KJ(){if(ZS)return Z1;ZS=1;var e=WJ(),t=CA(),n=m2();function r(s){return typeof s.constructor=="function"&&!n(s)?e(t(s)):{}}return Z1=r,Z1}var J1,JS;function YJ(){if(JS)return J1;JS=1;var e=Ah(),t=Pi(),n="[object Map]";function r(s){return t(s)&&e(s)==n}return J1=r,J1}var Q1,QS;function ZJ(){if(QS)return Q1;QS=1;var e=YJ(),t=h2(),n=p2(),r=n&&n.isMap,s=r?t(r):e;return Q1=s,Q1}var X1,XS;function JJ(){if(XS)return X1;XS=1;var e=Ah(),t=Pi(),n="[object Set]";function r(s){return t(s)&&e(s)==n}return X1=r,X1}var e0,ew;function QJ(){if(ew)return e0;ew=1;var e=JJ(),t=h2(),n=p2(),r=n&&n.isSet,s=r?t(r):e;return e0=s,e0}var t0,tw;function XJ(){if(tw)return t0;tw=1;var e=i2(),t=NJ(),n=w3(),r=RJ(),s=LJ(),i=FJ(),o=jJ(),a=UJ(),c=BJ(),l=Rx(),u=SA(),d=Ah(),f=qJ(),h=$J(),g=KJ(),_=hr(),v=u2(),y=ZJ(),C=qs(),E=QJ(),b=fc(),S=E3(),w=1,x=2,T=4,O="[object Arguments]",A="[object Array]",k="[object Boolean]",I="[object Date]",N="[object Error]",j="[object Function]",q="[object GeneratorFunction]",D="[object Map]",U="[object Number]",G="[object Object]",F="[object RegExp]",le="[object Set]",me="[object String]",ge="[object Symbol]",ke="[object WeakMap]",Pe="[object ArrayBuffer]",ve="[object DataView]",he="[object Float32Array]",L="[object Float64Array]",ue="[object Int8Array]",Ie="[object Int16Array]",it="[object Int32Array]",tt="[object Uint8Array]",oe="[object Uint8ClampedArray]",ye="[object Uint16Array]",ot="[object Uint32Array]",be={};be[O]=be[A]=be[Pe]=be[ve]=be[k]=be[I]=be[he]=be[L]=be[ue]=be[Ie]=be[it]=be[D]=be[U]=be[G]=be[F]=be[le]=be[me]=be[ge]=be[tt]=be[oe]=be[ye]=be[ot]=!0,be[N]=be[j]=be[ke]=!1;function at(Te,Ke,te,re,_e,Se){var Le,ut=Ke&w,an=Ke&x,cn=Ke&T;if(te&&(Le=_e?te(Te,re,_e,Se):te(Te)),Le!==void 0)return Le;if(!C(Te))return Te;var $t=_(Te);if($t){if(Le=f(Te),!ut)return o(Te,Le)}else{var ct=d(Te),yt=ct==j||ct==q;if(v(Te))return i(Te,ut);if(ct==G||ct==O||yt&&!_e){if(Le=an||yt?{}:g(Te),!ut)return an?c(Te,s(Le,Te)):a(Te,r(Le,Te))}else{if(!be[ct])return _e?Te:{};Le=h(Te,ct,ut)}}Se||(Se=new e);var kt=Se.get(Te);if(kt)return kt;Se.set(Te,Le),E(Te)?Te.forEach(function(Ge){Le.add(at(Ge,Ke,te,Ge,Te,Se))}):y(Te)&&Te.forEach(function(Ge,wt){Le.set(wt,at(Ge,Ke,te,wt,Te,Se))});var Pt=cn?an?u:l:an?S:b,jt=$t?void 0:Pt(Te);return t(jt||Te,function(Ge,wt){jt&&(wt=Ge,Ge=Te[wt]),n(Le,wt,at(Ge,Ke,te,wt,Te,Se))}),Le}return t0=at,t0}var n0,nw;function eQ(){if(nw)return n0;nw=1;var e=XJ(),t=1,n=4;function r(s){return e(s,t|n)}return n0=r,n0}var tQ=eQ();const nQ=Ot(tQ),wA=e=>{const t=zt(e,"463092697")?.value,n=nQ(t);let r=n?.enabledConnectors??[];return we(e,"3881721129")||(r=r.filter(i=>i!==M.GITHUB_CONNECTOR)),n&&(n.enabledConnectors=r),n},T3=()=>{const e=Y();return m.useMemo(()=>wA(e),[e])},en=function(e){for(var t=0;;t++)if(e=e.previousSibling,!e)return t},Il=function(e){let t=e.assignedSlot||e.parentNode;return t&&t.nodeType==11?t.host:t};let xv=null;const bs=function(e,t,n){let r=xv||(xv=document.createRange());return r.setEnd(e,n??e.nodeValue.length),r.setStart(e,t||0),r},rQ=function(){xv=null},To=function(e,t,n,r){return n&&(rw(e,t,n,r,-1)||rw(e,t,n,r,1))},sQ=/^(img|br|input|textarea|hr)$/i;function rw(e,t,n,r,s){for(;;){if(e==n&&t==r)return!0;if(t==(s<0?0:ts(e))){let i=e.parentNode;if(!i||i.nodeType!=1||du(e)||sQ.test(e.nodeName)||e.contentEditable=="false")return!1;t=en(e)+(s<0?0:1),e=i}else if(e.nodeType==1){if(e=e.childNodes[t+(s<0?-1:0)],e.contentEditable=="false")return!1;t=s<0?ts(e):0}else return!1}}function ts(e){return e.nodeType==3?e.nodeValue.length:e.childNodes.length}function iQ(e,t){for(;;){if(e.nodeType==3&&t)return e;if(e.nodeType==1&&t>0){if(e.contentEditable=="false")return null;e=e.childNodes[t-1],t=ts(e)}else if(e.parentNode&&!du(e))t=en(e),e=e.parentNode;else return null}}function oQ(e,t){for(;;){if(e.nodeType==3&&t<e.nodeValue.length)return e;if(e.nodeType==1&&t<e.childNodes.length){if(e.contentEditable=="false")return null;e=e.childNodes[t],t=0}else if(e.parentNode&&!du(e))t=en(e)+1,e=e.parentNode;else return null}}function aQ(e,t,n){for(let r=t==0,s=t==ts(e);r||s;){if(e==n)return!0;let i=en(e);if(e=e.parentNode,!e)return!1;r=r&&i==0,s=s&&i==ts(e)}}function du(e){let t;for(let n=e;n&&!(t=n.pmViewDesc);n=n.parentNode);return t&&t.node&&t.node.isBlock&&(t.dom==e||t.contentDOM==e)}const tp=function(e){return e.focusNode&&To(e.focusNode,e.focusOffset,e.anchorNode,e.anchorOffset)};function eo(e,t){let n=document.createEvent("Event");return n.initEvent("keydown",!0,!0),n.keyCode=e,n.key=n.code=t,n}function cQ(e){let t=e.activeElement;for(;t&&t.shadowRoot;)t=t.shadowRoot.activeElement;return t}function lQ(e,t,n){if(e.caretPositionFromPoint)try{let r=e.caretPositionFromPoint(t,n);if(r)return{node:r.offsetNode,offset:r.offset}}catch{}if(e.caretRangeFromPoint){let r=e.caretRangeFromPoint(t,n);if(r)return{node:r.startContainer,offset:r.startOffset}}}const fs=typeof navigator<"u"?navigator:null,sw=typeof document<"u"?document:null,Ui=fs&&fs.userAgent||"",Tv=/Edge\/(\d+)/.exec(Ui),EA=/MSIE \d/.exec(Ui),Ov=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(Ui),Nn=!!(EA||Ov||Tv),hi=EA?document.documentMode:Ov?+Ov[1]:Tv?+Tv[1]:0,Lr=!Nn&&/gecko\/(\d+)/i.test(Ui);Lr&&+(/Firefox\/(\d+)/.exec(Ui)||[0,0])[1];const kv=!Nn&&/Chrome\/(\d+)/.exec(Ui),hn=!!kv,xA=kv?+kv[1]:0,wn=!Nn&&!!fs&&/Apple Computer/.test(fs.vendor),rc=wn&&(/Mobile\/\w+/.test(Ui)||!!fs&&fs.maxTouchPoints>2),nr=rc||(fs?/Mac/.test(fs.platform):!1),uQ=fs?/Win/.test(fs.platform):!1,xr=/Android \d/.test(Ui),fu=!!sw&&"webkitFontSmoothing"in sw.documentElement.style,dQ=fu?+(/\bAppleWebKit\/(\d+)/.exec(navigator.userAgent)||[0,0])[1]:0;function fQ(e){let t=e.defaultView&&e.defaultView.visualViewport;return t?{left:0,right:t.width,top:0,bottom:t.height}:{left:0,right:e.documentElement.clientWidth,top:0,bottom:e.documentElement.clientHeight}}function vs(e,t){return typeof e=="number"?e:e[t]}function hQ(e){let t=e.getBoundingClientRect(),n=t.width/e.offsetWidth||1,r=t.height/e.offsetHeight||1;return{left:t.left,right:t.left+e.clientWidth*n,top:t.top,bottom:t.top+e.clientHeight*r}}function iw(e,t,n){let r=e.someProp("scrollThreshold")||0,s=e.someProp("scrollMargin")||5,i=e.dom.ownerDocument;for(let o=n||e.dom;o;o=Il(o)){if(o.nodeType!=1)continue;let a=o,c=a==i.body,l=c?fQ(i):hQ(a),u=0,d=0;if(t.top<l.top+vs(r,"top")?d=-(l.top-t.top+vs(s,"top")):t.bottom>l.bottom-vs(r,"bottom")&&(d=t.bottom-t.top>l.bottom-l.top?t.top+vs(s,"top")-l.top:t.bottom-l.bottom+vs(s,"bottom")),t.left<l.left+vs(r,"left")?u=-(l.left-t.left+vs(s,"left")):t.right>l.right-vs(r,"right")&&(u=t.right-l.right+vs(s,"right")),u||d)if(c)i.defaultView.scrollBy(u,d);else{let f=a.scrollLeft,h=a.scrollTop;d&&(a.scrollTop+=d),u&&(a.scrollLeft+=u);let g=a.scrollLeft-f,_=a.scrollTop-h;t={left:t.left-g,top:t.top-_,right:t.right-g,bottom:t.bottom-_}}if(c||/^(fixed|sticky)$/.test(getComputedStyle(o).position))break}}function pQ(e){let t=e.dom.getBoundingClientRect(),n=Math.max(0,t.top),r,s;for(let i=(t.left+t.right)/2,o=n+1;o<Math.min(innerHeight,t.bottom);o+=5){let a=e.root.elementFromPoint(i,o);if(!a||a==e.dom||!e.dom.contains(a))continue;let c=a.getBoundingClientRect();if(c.top>=n-20){r=a,s=c.top;break}}return{refDOM:r,refTop:s,stack:TA(e.dom)}}function TA(e){let t=[],n=e.ownerDocument;for(let r=e;r&&(t.push({dom:r,top:r.scrollTop,left:r.scrollLeft}),e!=n);r=Il(r));return t}function mQ({refDOM:e,refTop:t,stack:n}){let r=e?e.getBoundingClientRect().top:0;OA(n,r==0?0:r-t)}function OA(e,t){for(let n=0;n<e.length;n++){let{dom:r,top:s,left:i}=e[n];r.scrollTop!=s+t&&(r.scrollTop=s+t),r.scrollLeft!=i&&(r.scrollLeft=i)}}let ta=null;function gQ(e){if(e.setActive)return e.setActive();if(ta)return e.focus(ta);let t=TA(e);e.focus(ta==null?{get preventScroll(){return ta={preventScroll:!0},!0}}:void 0),ta||(ta=!1,OA(t,0))}function kA(e,t){let n,r=2e8,s,i=0,o=t.top,a=t.top,c,l;for(let u=e.firstChild,d=0;u;u=u.nextSibling,d++){let f;if(u.nodeType==1)f=u.getClientRects();else if(u.nodeType==3)f=bs(u).getClientRects();else continue;for(let h=0;h<f.length;h++){let g=f[h];if(g.top<=o&&g.bottom>=a){o=Math.max(g.bottom,o),a=Math.min(g.top,a);let _=g.left>t.left?g.left-t.left:g.right<t.left?t.left-g.right:0;if(_<r){n=u,r=_,s=_&&n.nodeType==3?{left:g.right<t.left?g.right:g.left,top:t.top}:t,u.nodeType==1&&_&&(i=d+(t.left>=(g.left+g.right)/2?1:0));continue}}else g.top>t.top&&!c&&g.left<=t.left&&g.right>=t.left&&(c=u,l={left:Math.max(g.left,Math.min(g.right,t.left)),top:g.top});!n&&(t.left>=g.right&&t.top>=g.top||t.left>=g.left&&t.top>=g.bottom)&&(i=d+1)}}return!n&&c&&(n=c,s=l,r=0),n&&n.nodeType==3?_Q(n,s):!n||r&&n.nodeType==1?{node:e,offset:i}:kA(n,s)}function _Q(e,t){let n=e.nodeValue.length,r=document.createRange();for(let s=0;s<n;s++){r.setEnd(e,s+1),r.setStart(e,s);let i=Js(r,1);if(i.top!=i.bottom&&O3(t,i))return{node:e,offset:s+(t.left>=(i.left+i.right)/2?1:0)}}return{node:e,offset:0}}function O3(e,t){return e.left>=t.left-1&&e.left<=t.right+1&&e.top>=t.top-1&&e.top<=t.bottom+1}function vQ(e,t){let n=e.parentNode;return n&&/^li$/i.test(n.nodeName)&&t.left<e.getBoundingClientRect().left?n:e}function yQ(e,t,n){let{node:r,offset:s}=kA(t,n),i=-1;if(r.nodeType==1&&!r.firstChild){let o=r.getBoundingClientRect();i=o.left!=o.right&&n.left>(o.left+o.right)/2?1:-1}return e.docView.posFromDOM(r,s,i)}function CQ(e,t,n,r){let s=-1;for(let i=t,o=!1;i!=e.dom;){let a=e.docView.nearestDesc(i,!0);if(!a)return null;if(a.dom.nodeType==1&&(a.node.isBlock&&a.parent||!a.contentDOM)){let c=a.dom.getBoundingClientRect();if(a.node.isBlock&&a.parent&&(!o&&c.left>r.left||c.top>r.top?s=a.posBefore:(!o&&c.right<r.left||c.bottom<r.top)&&(s=a.posAfter),o=!0),!a.contentDOM&&s<0&&!a.node.isText)return(a.node.isBlock?r.top<(c.top+c.bottom)/2:r.left<(c.left+c.right)/2)?a.posBefore:a.posAfter}i=a.dom.parentNode}return s>-1?s:e.docView.posFromDOM(t,n,-1)}function AA(e,t,n){let r=e.childNodes.length;if(r&&n.top<n.bottom)for(let s=Math.max(0,Math.min(r-1,Math.floor(r*(t.top-n.top)/(n.bottom-n.top))-2)),i=s;;){let o=e.childNodes[i];if(o.nodeType==1){let a=o.getClientRects();for(let c=0;c<a.length;c++){let l=a[c];if(O3(t,l))return AA(o,t,l)}}if((i=(i+1)%r)==s)break}return e}function bQ(e,t){let n=e.dom.ownerDocument,r,s=0,i=lQ(n,t.left,t.top);i&&({node:r,offset:s}=i);let o=(e.root.elementFromPoint?e.root:n).elementFromPoint(t.left,t.top),a;if(!o||!e.dom.contains(o.nodeType!=1?o.parentNode:o)){let l=e.dom.getBoundingClientRect();if(!O3(t,l)||(o=AA(e.dom,t,l),!o))return null}if(wn)for(let l=o;r&&l;l=Il(l))l.draggable&&(r=void 0);if(o=vQ(o,t),r){if(Lr&&r.nodeType==1&&(s=Math.min(s,r.childNodes.length),s<r.childNodes.length)){let u=r.childNodes[s],d;u.nodeName=="IMG"&&(d=u.getBoundingClientRect()).right<=t.left&&d.bottom>t.top&&s++}let l;fu&&s&&r.nodeType==1&&(l=r.childNodes[s-1]).nodeType==1&&l.contentEditable=="false"&&l.getBoundingClientRect().top>=t.top&&s--,r==e.dom&&s==r.childNodes.length-1&&r.lastChild.nodeType==1&&t.top>r.lastChild.getBoundingClientRect().bottom?a=e.state.doc.content.size:(s==0||r.nodeType!=1||r.childNodes[s-1].nodeName!="BR")&&(a=CQ(e,r,s,t))}a==null&&(a=yQ(e,o,t));let c=e.docView.nearestDesc(o,!0);return{pos:a,inside:c?c.posAtStart-c.border:-1}}function ow(e){return e.top<e.bottom||e.left<e.right}function Js(e,t){let n=e.getClientRects();if(n.length){let r=n[t<0?0:n.length-1];if(ow(r))return r}return Array.prototype.find.call(n,ow)||e.getBoundingClientRect()}const SQ=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/;function MA(e,t,n){let{node:r,offset:s,atom:i}=e.docView.domFromPos(t,n<0?-1:1),o=fu||Lr;if(r.nodeType==3)if(o&&(SQ.test(r.nodeValue)||(n<0?!s:s==r.nodeValue.length))){let c=Js(bs(r,s,s),n);if(Lr&&s&&/\s/.test(r.nodeValue[s-1])&&s<r.nodeValue.length){let l=Js(bs(r,s-1,s-1),-1);if(l.top==c.top){let u=Js(bs(r,s,s+1),-1);if(u.top!=c.top)return Ac(u,u.left<l.left)}}return c}else{let c=s,l=s,u=n<0?1:-1;return n<0&&!s?(l++,u=-1):n>=0&&s==r.nodeValue.length?(c--,u=1):n<0?c--:l++,Ac(Js(bs(r,c,l),u),u<0)}if(!e.state.doc.resolve(t-(i||0)).parent.inlineContent){if(i==null&&s&&(n<0||s==ts(r))){let c=r.childNodes[s-1];if(c.nodeType==1)return r0(c.getBoundingClientRect(),!1)}if(i==null&&s<ts(r)){let c=r.childNodes[s];if(c.nodeType==1)return r0(c.getBoundingClientRect(),!0)}return r0(r.getBoundingClientRect(),n>=0)}if(i==null&&s&&(n<0||s==ts(r))){let c=r.childNodes[s-1],l=c.nodeType==3?bs(c,ts(c)-(o?0:1)):c.nodeType==1&&(c.nodeName!="BR"||!c.nextSibling)?c:null;if(l)return Ac(Js(l,1),!1)}if(i==null&&s<ts(r)){let c=r.childNodes[s];for(;c.pmViewDesc&&c.pmViewDesc.ignoreForCoords;)c=c.nextSibling;let l=c?c.nodeType==3?bs(c,0,o?0:1):c.nodeType==1?c:null:null;if(l)return Ac(Js(l,-1),!0)}return Ac(Js(r.nodeType==3?bs(r):r,-n),n>=0)}function Ac(e,t){if(e.width==0)return e;let n=t?e.left:e.right;return{top:e.top,bottom:e.bottom,left:n,right:n}}function r0(e,t){if(e.height==0)return e;let n=t?e.top:e.bottom;return{top:n,bottom:n,left:e.left,right:e.right}}function IA(e,t,n){let r=e.state,s=e.root.activeElement;r!=t&&e.updateState(t),s!=e.dom&&e.focus();try{return n()}finally{r!=t&&e.updateState(r),s!=e.dom&&s&&s.focus()}}function wQ(e,t,n){let r=t.selection,s=n=="up"?r.$from:r.$to;return IA(e,t,()=>{let{node:i}=e.docView.domFromPos(s.pos,n=="up"?-1:1);for(;;){let a=e.docView.nearestDesc(i,!0);if(!a)break;if(a.node.isBlock){i=a.contentDOM||a.dom;break}i=a.dom.parentNode}let o=MA(e,s.pos,1);for(let a=i.firstChild;a;a=a.nextSibling){let c;if(a.nodeType==1)c=a.getClientRects();else if(a.nodeType==3)c=bs(a,0,a.nodeValue.length).getClientRects();else continue;for(let l=0;l<c.length;l++){let u=c[l];if(u.bottom>u.top+1&&(n=="up"?o.top-u.top>(u.bottom-o.top)*2:u.bottom-o.bottom>(o.bottom-u.top)*2))return!1}}return!0})}const EQ=/[\u0590-\u08ac]/;function xQ(e,t,n){let{$head:r}=t.selection;if(!r.parent.isTextblock)return!1;let s=r.parentOffset,i=!s,o=s==r.parent.content.size,a=e.domSelection();return!EQ.test(r.parent.textContent)||!a.modify?n=="left"||n=="backward"?i:o:IA(e,t,()=>{let{focusNode:c,focusOffset:l,anchorNode:u,anchorOffset:d}=e.domSelectionRange(),f=a.caretBidiLevel;a.modify("move",n,"character");let h=r.depth?e.docView.domAfterPos(r.before()):e.dom,{focusNode:g,focusOffset:_}=e.domSelectionRange(),v=g&&!h.contains(g.nodeType==1?g:g.parentNode)||c==g&&l==_;try{a.collapse(u,d),c&&(c!=u||l!=d)&&a.extend&&a.extend(c,l)}catch{}return f!=null&&(a.caretBidiLevel=f),v})}let aw=null,cw=null,lw=!1;function TQ(e,t,n){return aw==t&&cw==n?lw:(aw=t,cw=n,lw=n=="up"||n=="down"?wQ(e,t,n):xQ(e,t,n))}const or=0,uw=1,no=2,hs=3;class hu{constructor(t,n,r,s){this.parent=t,this.children=n,this.dom=r,this.contentDOM=s,this.dirty=or,r.pmViewDesc=this}matchesWidget(t){return!1}matchesMark(t){return!1}matchesNode(t,n,r){return!1}matchesHack(t){return!1}parseRule(){return null}stopEvent(t){return!1}get size(){let t=0;for(let n=0;n<this.children.length;n++)t+=this.children[n].size;return t}get border(){return 0}destroy(){this.parent=void 0,this.dom.pmViewDesc==this&&(this.dom.pmViewDesc=void 0);for(let t=0;t<this.children.length;t++)this.children[t].destroy()}posBeforeChild(t){for(let n=0,r=this.posAtStart;;n++){let s=this.children[n];if(s==t)return r;r+=s.size}}get posBefore(){return this.parent.posBeforeChild(this)}get posAtStart(){return this.parent?this.parent.posBeforeChild(this)+this.border:0}get posAfter(){return this.posBefore+this.size}get posAtEnd(){return this.posAtStart+this.size-2*this.border}localPosFromDOM(t,n,r){if(this.contentDOM&&this.contentDOM.contains(t.nodeType==1?t:t.parentNode))if(r<0){let i,o;if(t==this.contentDOM)i=t.childNodes[n-1];else{for(;t.parentNode!=this.contentDOM;)t=t.parentNode;i=t.previousSibling}for(;i&&!((o=i.pmViewDesc)&&o.parent==this);)i=i.previousSibling;return i?this.posBeforeChild(o)+o.size:this.posAtStart}else{let i,o;if(t==this.contentDOM)i=t.childNodes[n];else{for(;t.parentNode!=this.contentDOM;)t=t.parentNode;i=t.nextSibling}for(;i&&!((o=i.pmViewDesc)&&o.parent==this);)i=i.nextSibling;return i?this.posBeforeChild(o):this.posAtEnd}let s;if(t==this.dom&&this.contentDOM)s=n>en(this.contentDOM);else if(this.contentDOM&&this.contentDOM!=this.dom&&this.dom.contains(this.contentDOM))s=t.compareDocumentPosition(this.contentDOM)&2;else if(this.dom.firstChild){if(n==0)for(let i=t;;i=i.parentNode){if(i==this.dom){s=!1;break}if(i.previousSibling)break}if(s==null&&n==t.childNodes.length)for(let i=t;;i=i.parentNode){if(i==this.dom){s=!0;break}if(i.nextSibling)break}}return s??r>0?this.posAtEnd:this.posAtStart}nearestDesc(t,n=!1){for(let r=!0,s=t;s;s=s.parentNode){let i=this.getDesc(s),o;if(i&&(!n||i.node))if(r&&(o=i.nodeDOM)&&!(o.nodeType==1?o.contains(t.nodeType==1?t:t.parentNode):o==t))r=!1;else return i}}getDesc(t){let n=t.pmViewDesc;for(let r=n;r;r=r.parent)if(r==this)return n}posFromDOM(t,n,r){for(let s=t;s;s=s.parentNode){let i=this.getDesc(s);if(i)return i.localPosFromDOM(t,n,r)}return-1}descAt(t){for(let n=0,r=0;n<this.children.length;n++){let s=this.children[n],i=r+s.size;if(r==t&&i!=r){for(;!s.border&&s.children.length;)s=s.children[0];return s}if(t<i)return s.descAt(t-r-s.border);r=i}}domFromPos(t,n){if(!this.contentDOM)return{node:this.dom,offset:0,atom:t+1};let r=0,s=0;for(let i=0;r<this.children.length;r++){let o=this.children[r],a=i+o.size;if(a>t||o instanceof RA){s=t-i;break}i=a}if(s)return this.children[r].domFromPos(s-this.children[r].border,n);for(let i;r&&!(i=this.children[r-1]).size&&i instanceof NA&&i.side>=0;r--);if(n<=0){let i,o=!0;for(;i=r?this.children[r-1]:null,!(!i||i.dom.parentNode==this.contentDOM);r--,o=!1);return i&&n&&o&&!i.border&&!i.domAtom?i.domFromPos(i.size,n):{node:this.contentDOM,offset:i?en(i.dom)+1:0}}else{let i,o=!0;for(;i=r<this.children.length?this.children[r]:null,!(!i||i.dom.parentNode==this.contentDOM);r++,o=!1);return i&&o&&!i.border&&!i.domAtom?i.domFromPos(0,n):{node:this.contentDOM,offset:i?en(i.dom):this.contentDOM.childNodes.length}}}parseRange(t,n,r=0){if(this.children.length==0)return{node:this.contentDOM,from:t,to:n,fromOffset:0,toOffset:this.contentDOM.childNodes.length};let s=-1,i=-1;for(let o=r,a=0;;a++){let c=this.children[a],l=o+c.size;if(s==-1&&t<=l){let u=o+c.border;if(t>=u&&n<=l-c.border&&c.node&&c.contentDOM&&this.contentDOM.contains(c.contentDOM))return c.parseRange(t,n,u);t=o;for(let d=a;d>0;d--){let f=this.children[d-1];if(f.size&&f.dom.parentNode==this.contentDOM&&!f.emptyChildAt(1)){s=en(f.dom)+1;break}t-=f.size}s==-1&&(s=0)}if(s>-1&&(l>n||a==this.children.length-1)){n=l;for(let u=a+1;u<this.children.length;u++){let d=this.children[u];if(d.size&&d.dom.parentNode==this.contentDOM&&!d.emptyChildAt(-1)){i=en(d.dom);break}n+=d.size}i==-1&&(i=this.contentDOM.childNodes.length);break}o=l}return{node:this.contentDOM,from:t,to:n,fromOffset:s,toOffset:i}}emptyChildAt(t){if(this.border||!this.contentDOM||!this.children.length)return!1;let n=this.children[t<0?0:this.children.length-1];return n.size==0||n.emptyChildAt(t)}domAfterPos(t){let{node:n,offset:r}=this.domFromPos(t,0);if(n.nodeType!=1||r==n.childNodes.length)throw new RangeError("No node after pos "+t);return n.childNodes[r]}setSelection(t,n,r,s=!1){let i=Math.min(t,n),o=Math.max(t,n);for(let f=0,h=0;f<this.children.length;f++){let g=this.children[f],_=h+g.size;if(i>h&&o<_)return g.setSelection(t-h-g.border,n-h-g.border,r,s);h=_}let a=this.domFromPos(t,t?-1:1),c=n==t?a:this.domFromPos(n,n?-1:1),l=r.getSelection(),u=!1;if((Lr||wn)&&t==n){let{node:f,offset:h}=a;if(f.nodeType==3){if(u=!!(h&&f.nodeValue[h-1]==`
`),u&&h==f.nodeValue.length)for(let g=f,_;g;g=g.parentNode){if(_=g.nextSibling){_.nodeName=="BR"&&(a=c={node:_.parentNode,offset:en(_)+1});break}let v=g.pmViewDesc;if(v&&v.node&&v.node.isBlock)break}}else{let g=f.childNodes[h-1];u=g&&(g.nodeName=="BR"||g.contentEditable=="false")}}if(Lr&&l.focusNode&&l.focusNode!=c.node&&l.focusNode.nodeType==1){let f=l.focusNode.childNodes[l.focusOffset];f&&f.contentEditable=="false"&&(s=!0)}if(!(s||u&&wn)&&To(a.node,a.offset,l.anchorNode,l.anchorOffset)&&To(c.node,c.offset,l.focusNode,l.focusOffset))return;let d=!1;if((l.extend||t==n)&&!u){l.collapse(a.node,a.offset);try{t!=n&&l.extend(c.node,c.offset),d=!0}catch{}}if(!d){if(t>n){let h=a;a=c,c=h}let f=document.createRange();f.setEnd(c.node,c.offset),f.setStart(a.node,a.offset),l.removeAllRanges(),l.addRange(f)}}ignoreMutation(t){return!this.contentDOM&&t.type!="selection"}get contentLost(){return this.contentDOM&&this.contentDOM!=this.dom&&!this.dom.contains(this.contentDOM)}markDirty(t,n){for(let r=0,s=0;s<this.children.length;s++){let i=this.children[s],o=r+i.size;if(r==o?t<=o&&n>=r:t<o&&n>r){let a=r+i.border,c=o-i.border;if(t>=a&&n<=c){this.dirty=t==r||n==o?no:uw,t==a&&n==c&&(i.contentLost||i.dom.parentNode!=this.contentDOM)?i.dirty=hs:i.markDirty(t-a,n-a);return}else i.dirty=i.dom==i.contentDOM&&i.dom.parentNode==this.contentDOM&&!i.children.length?no:hs}r=o}this.dirty=no}markParentsDirty(){let t=1;for(let n=this.parent;n;n=n.parent,t++){let r=t==1?no:uw;n.dirty<r&&(n.dirty=r)}}get domAtom(){return!1}get ignoreForCoords(){return!1}isText(t){return!1}}class NA extends hu{constructor(t,n,r,s){let i,o=n.type.toDOM;if(typeof o=="function"&&(o=o(r,()=>{if(!i)return s;if(i.parent)return i.parent.posBeforeChild(i)})),!n.type.spec.raw){if(o.nodeType!=1){let a=document.createElement("span");a.appendChild(o),o=a}o.contentEditable="false",o.classList.add("ProseMirror-widget")}super(t,[],o,null),this.widget=n,this.widget=n,i=this}matchesWidget(t){return this.dirty==or&&t.type.eq(this.widget.type)}parseRule(){return{ignore:!0}}stopEvent(t){let n=this.widget.spec.stopEvent;return n?n(t):!1}ignoreMutation(t){return t.type!="selection"||this.widget.spec.ignoreSelection}destroy(){this.widget.type.destroy(this.dom),super.destroy()}get domAtom(){return!0}get side(){return this.widget.type.side}}class OQ extends hu{constructor(t,n,r,s){super(t,[],n,null),this.textDOM=r,this.text=s}get size(){return this.text.length}localPosFromDOM(t,n){return t!=this.textDOM?this.posAtStart+(n?this.size:0):this.posAtStart+n}domFromPos(t){return{node:this.textDOM,offset:t}}ignoreMutation(t){return t.type==="characterData"&&t.target.nodeValue==t.oldValue}}class Oo extends hu{constructor(t,n,r,s){super(t,[],r,s),this.mark=n}static create(t,n,r,s){let i=s.nodeViews[n.type.name],o=i&&i(n,s,r);return(!o||!o.dom)&&(o=_c.renderSpec(document,n.type.spec.toDOM(n,r),null,n.attrs)),new Oo(t,n,o.dom,o.contentDOM||o.dom)}parseRule(){return this.dirty&hs||this.mark.type.spec.reparseInView?null:{mark:this.mark.type.name,attrs:this.mark.attrs,contentElement:this.contentDOM}}matchesMark(t){return this.dirty!=hs&&this.mark.eq(t)}markDirty(t,n){if(super.markDirty(t,n),this.dirty!=or){let r=this.parent;for(;!r.node;)r=r.parent;r.dirty<this.dirty&&(r.dirty=this.dirty),this.dirty=or}}slice(t,n,r){let s=Oo.create(this.parent,this.mark,!0,r),i=this.children,o=this.size;n<o&&(i=Iv(i,n,o,r)),t>0&&(i=Iv(i,0,t,r));for(let a=0;a<i.length;a++)i[a].parent=s;return s.children=i,s}}class pi extends hu{constructor(t,n,r,s,i,o,a,c,l){super(t,[],i,o),this.node=n,this.outerDeco=r,this.innerDeco=s,this.nodeDOM=a}static create(t,n,r,s,i,o){let a=i.nodeViews[n.type.name],c,l=a&&a(n,i,()=>{if(!c)return o;if(c.parent)return c.parent.posBeforeChild(c)},r,s),u=l&&l.dom,d=l&&l.contentDOM;if(n.isText){if(!u)u=document.createTextNode(n.text);else if(u.nodeType!=3)throw new RangeError("Text must be rendered as a DOM text node")}else u||({dom:u,contentDOM:d}=_c.renderSpec(document,n.type.spec.toDOM(n),null,n.attrs));!d&&!n.isText&&u.nodeName!="BR"&&(u.hasAttribute("contenteditable")||(u.contentEditable="false"),n.type.spec.draggable&&(u.draggable=!0));let f=u;return u=LA(u,r,n),l?c=new kQ(t,n,r,s,u,d||null,f,l,i,o+1):n.isText?new np(t,n,r,s,u,f,i):new pi(t,n,r,s,u,d||null,f,i,o+1)}parseRule(){if(this.node.type.spec.reparseInView)return null;let t={node:this.node.type.name,attrs:this.node.attrs};if(this.node.type.whitespace=="pre"&&(t.preserveWhitespace="full"),!this.contentDOM)t.getContent=()=>this.node.content;else if(!this.contentLost)t.contentElement=this.contentDOM;else{for(let n=this.children.length-1;n>=0;n--){let r=this.children[n];if(this.dom.contains(r.dom.parentNode)){t.contentElement=r.dom.parentNode;break}}t.contentElement||(t.getContent=()=>W.empty)}return t}matchesNode(t,n,r){return this.dirty==or&&t.eq(this.node)&&Mv(n,this.outerDeco)&&r.eq(this.innerDeco)}get size(){return this.node.nodeSize}get border(){return this.node.isLeaf?0:1}updateChildren(t,n){let r=this.node.inlineContent,s=n,i=t.composing?this.localCompositionInfo(t,n):null,o=i&&i.pos>-1?i:null,a=i&&i.pos<0,c=new MQ(this,o&&o.node,t);RQ(this.node,this.innerDeco,(l,u,d)=>{l.spec.marks?c.syncToMarks(l.spec.marks,r,t):l.type.side>=0&&!d&&c.syncToMarks(u==this.node.childCount?Ze.none:this.node.child(u).marks,r,t),c.placeWidget(l,t,s)},(l,u,d,f)=>{c.syncToMarks(l.marks,r,t);let h;c.findNodeMatch(l,u,d,f)||a&&t.state.selection.from>s&&t.state.selection.to<s+l.nodeSize&&(h=c.findIndexWithChild(i.node))>-1&&c.updateNodeAt(l,u,d,h,t)||c.updateNextNode(l,u,d,t,f,s)||c.addNode(l,u,d,t,s),s+=l.nodeSize}),c.syncToMarks([],r,t),this.node.isTextblock&&c.addTextblockHacks(),c.destroyRest(),(c.changed||this.dirty==no)&&(o&&this.protectLocalComposition(t,o),PA(this.contentDOM,this.children,t),rc&&PQ(this.dom))}localCompositionInfo(t,n){let{from:r,to:s}=t.state.selection;if(!(t.state.selection instanceof Ve)||r<n||s>n+this.node.content.size)return null;let i=t.input.compositionNode;if(!i||!this.dom.contains(i.parentNode))return null;if(this.node.inlineContent){let o=i.nodeValue,a=DQ(this.node.content,o,r-n,s-n);return a<0?null:{node:i,pos:a,text:o}}else return{node:i,pos:-1,text:""}}protectLocalComposition(t,{node:n,pos:r,text:s}){if(this.getDesc(n))return;let i=n;for(;i.parentNode!=this.contentDOM;i=i.parentNode){for(;i.previousSibling;)i.parentNode.removeChild(i.previousSibling);for(;i.nextSibling;)i.parentNode.removeChild(i.nextSibling);i.pmViewDesc&&(i.pmViewDesc=void 0)}let o=new OQ(this,i,n,s);t.input.compositionNodes.push(o),this.children=Iv(this.children,r,r+s.length,t,o)}update(t,n,r,s){return this.dirty==hs||!t.sameMarkup(this.node)?!1:(this.updateInner(t,n,r,s),!0)}updateInner(t,n,r,s){this.updateOuterDeco(n),this.node=t,this.innerDeco=r,this.contentDOM&&this.updateChildren(s,this.posAtStart),this.dirty=or}updateOuterDeco(t){if(Mv(t,this.outerDeco))return;let n=this.nodeDOM.nodeType!=1,r=this.dom;this.dom=DA(this.dom,this.nodeDOM,Av(this.outerDeco,this.node,n),Av(t,this.node,n)),this.dom!=r&&(r.pmViewDesc=void 0,this.dom.pmViewDesc=this),this.outerDeco=t}selectNode(){this.nodeDOM.nodeType==1&&this.nodeDOM.classList.add("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&(this.dom.draggable=!0)}deselectNode(){this.nodeDOM.nodeType==1&&(this.nodeDOM.classList.remove("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&this.dom.removeAttribute("draggable"))}get domAtom(){return this.node.isAtom}}function dw(e,t,n,r,s){LA(r,t,e);let i=new pi(void 0,e,t,n,r,r,r,s,0);return i.contentDOM&&i.updateChildren(s,0),i}class np extends pi{constructor(t,n,r,s,i,o,a){super(t,n,r,s,i,null,o,a,0)}parseRule(){let t=this.nodeDOM.parentNode;for(;t&&t!=this.dom&&!t.pmIsDeco;)t=t.parentNode;return{skip:t||!0}}update(t,n,r,s){return this.dirty==hs||this.dirty!=or&&!this.inParent()||!t.sameMarkup(this.node)?!1:(this.updateOuterDeco(n),(this.dirty!=or||t.text!=this.node.text)&&t.text!=this.nodeDOM.nodeValue&&(this.nodeDOM.nodeValue=t.text,s.trackWrites==this.nodeDOM&&(s.trackWrites=null)),this.node=t,this.dirty=or,!0)}inParent(){let t=this.parent.contentDOM;for(let n=this.nodeDOM;n;n=n.parentNode)if(n==t)return!0;return!1}domFromPos(t){return{node:this.nodeDOM,offset:t}}localPosFromDOM(t,n,r){return t==this.nodeDOM?this.posAtStart+Math.min(n,this.node.text.length):super.localPosFromDOM(t,n,r)}ignoreMutation(t){return t.type!="characterData"&&t.type!="selection"}slice(t,n,r){let s=this.node.cut(t,n),i=document.createTextNode(s.text);return new np(this.parent,s,this.outerDeco,this.innerDeco,i,i,r)}markDirty(t,n){super.markDirty(t,n),this.dom!=this.nodeDOM&&(t==0||n==this.nodeDOM.nodeValue.length)&&(this.dirty=hs)}get domAtom(){return!1}isText(t){return this.node.text==t}}class RA extends hu{parseRule(){return{ignore:!0}}matchesHack(t){return this.dirty==or&&this.dom.nodeName==t}get domAtom(){return!0}get ignoreForCoords(){return this.dom.nodeName=="IMG"}}class kQ extends pi{constructor(t,n,r,s,i,o,a,c,l,u){super(t,n,r,s,i,o,a,l,u),this.spec=c}update(t,n,r,s){if(this.dirty==hs)return!1;if(this.spec.update){let i=this.spec.update(t,n,r);return i&&this.updateInner(t,n,r,s),i}else return!this.contentDOM&&!t.isLeaf?!1:super.update(t,n,r,s)}selectNode(){this.spec.selectNode?this.spec.selectNode():super.selectNode()}deselectNode(){this.spec.deselectNode?this.spec.deselectNode():super.deselectNode()}setSelection(t,n,r,s){this.spec.setSelection?this.spec.setSelection(t,n,r):super.setSelection(t,n,r,s)}destroy(){this.spec.destroy&&this.spec.destroy(),super.destroy()}stopEvent(t){return this.spec.stopEvent?this.spec.stopEvent(t):!1}ignoreMutation(t){return this.spec.ignoreMutation?this.spec.ignoreMutation(t):super.ignoreMutation(t)}}function PA(e,t,n){let r=e.firstChild,s=!1;for(let i=0;i<t.length;i++){let o=t[i],a=o.dom;if(a.parentNode==e){for(;a!=r;)r=fw(r),s=!0;r=r.nextSibling}else s=!0,e.insertBefore(a,r);if(o instanceof Oo){let c=r?r.previousSibling:e.lastChild;PA(o.contentDOM,o.children,n),r=c?c.nextSibling:e.firstChild}}for(;r;)r=fw(r),s=!0;s&&n.trackWrites==e&&(n.trackWrites=null)}const ol=function(e){e&&(this.nodeName=e)};ol.prototype=Object.create(null);const ro=[new ol];function Av(e,t,n){if(e.length==0)return ro;let r=n?ro[0]:new ol,s=[r];for(let i=0;i<e.length;i++){let o=e[i].type.attrs;if(o){o.nodeName&&s.push(r=new ol(o.nodeName));for(let a in o){let c=o[a];c!=null&&(n&&s.length==1&&s.push(r=new ol(t.isInline?"span":"div")),a=="class"?r.class=(r.class?r.class+" ":"")+c:a=="style"?r.style=(r.style?r.style+";":"")+c:a!="nodeName"&&(r[a]=c))}}}return s}function DA(e,t,n,r){if(n==ro&&r==ro)return t;let s=t;for(let i=0;i<r.length;i++){let o=r[i],a=n[i];if(i){let c;a&&a.nodeName==o.nodeName&&s!=e&&(c=s.parentNode)&&c.nodeName.toLowerCase()==o.nodeName||(c=document.createElement(o.nodeName),c.pmIsDeco=!0,c.appendChild(s),a=ro[0]),s=c}AQ(s,a||ro[0],o)}return s}function AQ(e,t,n){for(let r in t)r!="class"&&r!="style"&&r!="nodeName"&&!(r in n)&&e.removeAttribute(r);for(let r in n)r!="class"&&r!="style"&&r!="nodeName"&&n[r]!=t[r]&&e.setAttribute(r,n[r]);if(t.class!=n.class){let r=t.class?t.class.split(" ").filter(Boolean):[],s=n.class?n.class.split(" ").filter(Boolean):[];for(let i=0;i<r.length;i++)s.indexOf(r[i])==-1&&e.classList.remove(r[i]);for(let i=0;i<s.length;i++)r.indexOf(s[i])==-1&&e.classList.add(s[i]);e.classList.length==0&&e.removeAttribute("class")}if(t.style!=n.style){if(t.style){let r=/\s*([\w\-\xa1-\uffff]+)\s*:(?:"(?:\\.|[^"])*"|'(?:\\.|[^'])*'|\(.*?\)|[^;])*/g,s;for(;s=r.exec(t.style);)e.style.removeProperty(s[1])}n.style&&(e.style.cssText+=n.style)}}function LA(e,t,n){return DA(e,e,ro,Av(t,n,e.nodeType!=1))}function Mv(e,t){if(e.length!=t.length)return!1;for(let n=0;n<e.length;n++)if(!e[n].type.eq(t[n].type))return!1;return!0}function fw(e){let t=e.nextSibling;return e.parentNode.removeChild(e),t}class MQ{constructor(t,n,r){this.lock=n,this.view=r,this.index=0,this.stack=[],this.changed=!1,this.top=t,this.preMatch=IQ(t.node.content,t)}destroyBetween(t,n){if(t!=n){for(let r=t;r<n;r++)this.top.children[r].destroy();this.top.children.splice(t,n-t),this.changed=!0}}destroyRest(){this.destroyBetween(this.index,this.top.children.length)}syncToMarks(t,n,r){let s=0,i=this.stack.length>>1,o=Math.min(i,t.length);for(;s<o&&(s==i-1?this.top:this.stack[s+1<<1]).matchesMark(t[s])&&t[s].type.spec.spanning!==!1;)s++;for(;s<i;)this.destroyRest(),this.top.dirty=or,this.index=this.stack.pop(),this.top=this.stack.pop(),i--;for(;i<t.length;){this.stack.push(this.top,this.index+1);let a=-1;for(let c=this.index;c<Math.min(this.index+3,this.top.children.length);c++){let l=this.top.children[c];if(l.matchesMark(t[i])&&!this.isLocked(l.dom)){a=c;break}}if(a>-1)a>this.index&&(this.changed=!0,this.destroyBetween(this.index,a)),this.top=this.top.children[this.index];else{let c=Oo.create(this.top,t[i],n,r);this.top.children.splice(this.index,0,c),this.top=c,this.changed=!0}this.index=0,i++}}findNodeMatch(t,n,r,s){let i=-1,o;if(s>=this.preMatch.index&&(o=this.preMatch.matches[s-this.preMatch.index]).parent==this.top&&o.matchesNode(t,n,r))i=this.top.children.indexOf(o,this.index);else for(let a=this.index,c=Math.min(this.top.children.length,a+5);a<c;a++){let l=this.top.children[a];if(l.matchesNode(t,n,r)&&!this.preMatch.matched.has(l)){i=a;break}}return i<0?!1:(this.destroyBetween(this.index,i),this.index++,!0)}updateNodeAt(t,n,r,s,i){let o=this.top.children[s];return o.dirty==hs&&o.dom==o.contentDOM&&(o.dirty=no),o.update(t,n,r,i)?(this.destroyBetween(this.index,s),this.index++,!0):!1}findIndexWithChild(t){for(;;){let n=t.parentNode;if(!n)return-1;if(n==this.top.contentDOM){let r=t.pmViewDesc;if(r){for(let s=this.index;s<this.top.children.length;s++)if(this.top.children[s]==r)return s}return-1}t=n}}updateNextNode(t,n,r,s,i,o){for(let a=this.index;a<this.top.children.length;a++){let c=this.top.children[a];if(c instanceof pi){let l=this.preMatch.matched.get(c);if(l!=null&&l!=i)return!1;let u=c.dom,d,f=this.isLocked(u)&&!(t.isText&&c.node&&c.node.isText&&c.nodeDOM.nodeValue==t.text&&c.dirty!=hs&&Mv(n,c.outerDeco));if(!f&&c.update(t,n,r,s))return this.destroyBetween(this.index,a),c.dom!=u&&(this.changed=!0),this.index++,!0;if(!f&&(d=this.recreateWrapper(c,t,n,r,s,o)))return this.top.children[this.index]=d,d.contentDOM&&(d.dirty=no,d.updateChildren(s,o+1),d.dirty=or),this.changed=!0,this.index++,!0;break}}return!1}recreateWrapper(t,n,r,s,i,o){if(t.dirty||n.isAtom||!t.children.length||!t.node.content.eq(n.content))return null;let a=pi.create(this.top,n,r,s,i,o);if(a.contentDOM){a.children=t.children,t.children=[];for(let c of a.children)c.parent=a}return t.destroy(),a}addNode(t,n,r,s,i){let o=pi.create(this.top,t,n,r,s,i);o.contentDOM&&o.updateChildren(s,i+1),this.top.children.splice(this.index++,0,o),this.changed=!0}placeWidget(t,n,r){let s=this.index<this.top.children.length?this.top.children[this.index]:null;if(s&&s.matchesWidget(t)&&(t==s.widget||!s.widget.type.toDOM.parentNode))this.index++;else{let i=new NA(this.top,t,n,r);this.top.children.splice(this.index++,0,i),this.changed=!0}}addTextblockHacks(){let t=this.top.children[this.index-1],n=this.top;for(;t instanceof Oo;)n=t,t=n.children[n.children.length-1];(!t||!(t instanceof np)||/\n$/.test(t.node.text)||this.view.requiresGeckoHackNode&&/\s$/.test(t.node.text))&&((wn||hn)&&t&&t.dom.contentEditable=="false"&&this.addHackNode("IMG",n),this.addHackNode("BR",this.top))}addHackNode(t,n){if(n==this.top&&this.index<n.children.length&&n.children[this.index].matchesHack(t))this.index++;else{let r=document.createElement(t);t=="IMG"&&(r.className="ProseMirror-separator",r.alt=""),t=="BR"&&(r.className="ProseMirror-trailingBreak");let s=new RA(this.top,[],r,null);n!=this.top?n.children.push(s):n.children.splice(this.index++,0,s),this.changed=!0}}isLocked(t){return this.lock&&(t==this.lock||t.nodeType==1&&t.contains(this.lock.parentNode))}}function IQ(e,t){let n=t,r=n.children.length,s=e.childCount,i=new Map,o=[];e:for(;s>0;){let a;for(;;)if(r){let l=n.children[r-1];if(l instanceof Oo)n=l,r=l.children.length;else{a=l,r--;break}}else{if(n==t)break e;r=n.parent.children.indexOf(n),n=n.parent}let c=a.node;if(c){if(c!=e.child(s-1))break;--s,i.set(a,s),o.push(a)}}return{index:s,matched:i,matches:o.reverse()}}function NQ(e,t){return e.type.side-t.type.side}function RQ(e,t,n,r){let s=t.locals(e),i=0;if(s.length==0){for(let l=0;l<e.childCount;l++){let u=e.child(l);r(u,s,t.forChild(i,u),l),i+=u.nodeSize}return}let o=0,a=[],c=null;for(let l=0;;){let u,d;for(;o<s.length&&s[o].to==i;){let v=s[o++];v.widget&&(u?(d||(d=[u])).push(v):u=v)}if(u)if(d){d.sort(NQ);for(let v=0;v<d.length;v++)n(d[v],l,!!c)}else n(u,l,!!c);let f,h;if(c)h=-1,f=c,c=null;else if(l<e.childCount)h=l,f=e.child(l++);else break;for(let v=0;v<a.length;v++)a[v].to<=i&&a.splice(v--,1);for(;o<s.length&&s[o].from<=i&&s[o].to>i;)a.push(s[o++]);let g=i+f.nodeSize;if(f.isText){let v=g;o<s.length&&s[o].from<v&&(v=s[o].from);for(let y=0;y<a.length;y++)a[y].to<v&&(v=a[y].to);v<g&&(c=f.cut(v-i),f=f.cut(0,v-i),g=v,h=-1)}else for(;o<s.length&&s[o].to<g;)o++;let _=f.isInline&&!f.isLeaf?a.filter(v=>!v.inline):a.slice();r(f,_,t.forChild(i,f),h),i=g}}function PQ(e){if(e.nodeName=="UL"||e.nodeName=="OL"){let t=e.style.cssText;e.style.cssText=t+"; list-style: square !important",window.getComputedStyle(e).listStyle,e.style.cssText=t}}function DQ(e,t,n,r){for(let s=0,i=0;s<e.childCount&&i<=r;){let o=e.child(s++),a=i;if(i+=o.nodeSize,!o.isText)continue;let c=o.text;for(;s<e.childCount;){let l=e.child(s++);if(i+=l.nodeSize,!l.isText)break;c+=l.text}if(i>=n){if(i>=r&&c.slice(r-t.length-a,r-a)==t)return r-t.length;let l=a<r?c.lastIndexOf(t,r-a-1):-1;if(l>=0&&l+t.length+a>=n)return a+l;if(n==r&&c.length>=r+t.length-a&&c.slice(r-a,r-a+t.length)==t)return r}}return-1}function Iv(e,t,n,r,s){let i=[];for(let o=0,a=0;o<e.length;o++){let c=e[o],l=a,u=a+=c.size;l>=n||u<=t?i.push(c):(l<t&&i.push(c.slice(0,t-l,r)),s&&(i.push(s),s=void 0),u>n&&i.push(c.slice(n-l,c.size,r)))}return i}function k3(e,t=null){let n=e.domSelectionRange(),r=e.state.doc;if(!n.focusNode)return null;let s=e.docView.nearestDesc(n.focusNode),i=s&&s.size==0,o=e.docView.posFromDOM(n.focusNode,n.focusOffset,1);if(o<0)return null;let a=r.resolve(o),c,l;if(tp(n)){for(c=a;s&&!s.node;)s=s.parent;let u=s.node;if(s&&u.isAtom&&Oe.isSelectable(u)&&s.parent&&!(u.isInline&&aQ(n.focusNode,n.focusOffset,s.dom))){let d=s.posBefore;l=new Oe(o==d?a:r.resolve(d))}}else{let u=e.docView.posFromDOM(n.anchorNode,n.anchorOffset,1);if(u<0)return null;c=r.resolve(u)}if(!l){let u=t=="pointer"||e.state.selection.head<a.pos&&!i?1:-1;l=A3(e,c,a,u)}return l}function FA(e){return e.editable?e.hasFocus():UA(e)&&document.activeElement&&document.activeElement.contains(e.dom)}function Ns(e,t=!1){let n=e.state.selection;if(jA(e,n),!!FA(e)){if(!t&&e.input.mouseDown&&e.input.mouseDown.allowDefault&&hn){let r=e.domSelectionRange(),s=e.domObserver.currentSelection;if(r.anchorNode&&s.anchorNode&&To(r.anchorNode,r.anchorOffset,s.anchorNode,s.anchorOffset)){e.input.mouseDown.delayedSelectionSync=!0,e.domObserver.setCurSelection();return}}if(e.domObserver.disconnectSelection(),e.cursorWrapper)FQ(e);else{let{anchor:r,head:s}=n,i,o;hw&&!(n instanceof Ve)&&(n.$from.parent.inlineContent||(i=pw(e,n.from)),!n.empty&&!n.$from.parent.inlineContent&&(o=pw(e,n.to))),e.docView.setSelection(r,s,e.root,t),hw&&(i&&mw(i),o&&mw(o)),n.visible?e.dom.classList.remove("ProseMirror-hideselection"):(e.dom.classList.add("ProseMirror-hideselection"),"onselectionchange"in document&&LQ(e))}e.domObserver.setCurSelection(),e.domObserver.connectSelection()}}const hw=wn||hn&&xA<63;function pw(e,t){let{node:n,offset:r}=e.docView.domFromPos(t,0),s=r<n.childNodes.length?n.childNodes[r]:null,i=r?n.childNodes[r-1]:null;if(wn&&s&&s.contentEditable=="false")return s0(s);if((!s||s.contentEditable=="false")&&(!i||i.contentEditable=="false")){if(s)return s0(s);if(i)return s0(i)}}function s0(e){return e.contentEditable="true",wn&&e.draggable&&(e.draggable=!1,e.wasDraggable=!0),e}function mw(e){e.contentEditable="false",e.wasDraggable&&(e.draggable=!0,e.wasDraggable=null)}function LQ(e){let t=e.dom.ownerDocument;t.removeEventListener("selectionchange",e.input.hideSelectionGuard);let n=e.domSelectionRange(),r=n.anchorNode,s=n.anchorOffset;t.addEventListener("selectionchange",e.input.hideSelectionGuard=()=>{(n.anchorNode!=r||n.anchorOffset!=s)&&(t.removeEventListener("selectionchange",e.input.hideSelectionGuard),setTimeout(()=>{(!FA(e)||e.state.selection.visible)&&e.dom.classList.remove("ProseMirror-hideselection")},20))})}function FQ(e){let t=e.domSelection(),n=document.createRange(),r=e.cursorWrapper.dom,s=r.nodeName=="IMG";s?n.setEnd(r.parentNode,en(r)+1):n.setEnd(r,0),n.collapse(!1),t.removeAllRanges(),t.addRange(n),!s&&!e.state.selection.visible&&Nn&&hi<=11&&(r.disabled=!0,r.disabled=!1)}function jA(e,t){if(t instanceof Oe){let n=e.docView.descAt(t.from);n!=e.lastSelectedViewDesc&&(gw(e),n&&n.selectNode(),e.lastSelectedViewDesc=n)}else gw(e)}function gw(e){e.lastSelectedViewDesc&&(e.lastSelectedViewDesc.parent&&e.lastSelectedViewDesc.deselectNode(),e.lastSelectedViewDesc=void 0)}function A3(e,t,n,r){return e.someProp("createSelectionBetween",s=>s(e,t,n))||Ve.between(t,n,r)}function _w(e){return e.editable&&!e.hasFocus()?!1:UA(e)}function UA(e){let t=e.domSelectionRange();if(!t.anchorNode)return!1;try{return e.dom.contains(t.anchorNode.nodeType==3?t.anchorNode.parentNode:t.anchorNode)&&(e.editable||e.dom.contains(t.focusNode.nodeType==3?t.focusNode.parentNode:t.focusNode))}catch{return!1}}function jQ(e){let t=e.docView.domFromPos(e.state.selection.anchor,0),n=e.domSelectionRange();return To(t.node,t.offset,n.anchorNode,n.anchorOffset)}function Nv(e,t){let{$anchor:n,$head:r}=e.selection,s=t>0?n.max(r):n.min(r),i=s.parent.inlineContent?s.depth?e.doc.resolve(t>0?s.after():s.before()):null:s;return i&&He.findFrom(i,t)}function Qs(e,t){return e.dispatch(e.state.tr.setSelection(t).scrollIntoView()),!0}function vw(e,t,n){let r=e.state.selection;if(r instanceof Ve)if(n.indexOf("s")>-1){let{$head:s}=r,i=s.textOffset?null:t<0?s.nodeBefore:s.nodeAfter;if(!i||i.isText||!i.isLeaf)return!1;let o=e.state.doc.resolve(s.pos+i.nodeSize*(t<0?-1:1));return Qs(e,new Ve(r.$anchor,o))}else if(r.empty){if(e.endOfTextblock(t>0?"forward":"backward")){let s=Nv(e.state,t);return s&&s instanceof Oe?Qs(e,s):!1}else if(!(nr&&n.indexOf("m")>-1)){let s=r.$head,i=s.textOffset?null:t<0?s.nodeBefore:s.nodeAfter,o;if(!i||i.isText)return!1;let a=t<0?s.pos-i.nodeSize:s.pos;return i.isAtom||(o=e.docView.descAt(a))&&!o.contentDOM?Oe.isSelectable(i)?Qs(e,new Oe(t<0?e.state.doc.resolve(s.pos-i.nodeSize):s)):fu?Qs(e,new Ve(e.state.doc.resolve(t<0?a:a+i.nodeSize))):!1:!1}}else return!1;else{if(r instanceof Oe&&r.node.isInline)return Qs(e,new Ve(t>0?r.$to:r.$from));{let s=Nv(e.state,t);return s?Qs(e,s):!1}}}function Cf(e){return e.nodeType==3?e.nodeValue.length:e.childNodes.length}function al(e,t){let n=e.pmViewDesc;return n&&n.size==0&&(t<0||e.nextSibling||e.nodeName!="BR")}function na(e,t){return t<0?UQ(e):BQ(e)}function UQ(e){let t=e.domSelectionRange(),n=t.focusNode,r=t.focusOffset;if(!n)return;let s,i,o=!1;for(Lr&&n.nodeType==1&&r<Cf(n)&&al(n.childNodes[r],-1)&&(o=!0);;)if(r>0){if(n.nodeType!=1)break;{let a=n.childNodes[r-1];if(al(a,-1))s=n,i=--r;else if(a.nodeType==3)n=a,r=n.nodeValue.length;else break}}else{if(BA(n))break;{let a=n.previousSibling;for(;a&&al(a,-1);)s=n.parentNode,i=en(a),a=a.previousSibling;if(a)n=a,r=Cf(n);else{if(n=n.parentNode,n==e.dom)break;r=0}}}o?Rv(e,n,r):s&&Rv(e,s,i)}function BQ(e){let t=e.domSelectionRange(),n=t.focusNode,r=t.focusOffset;if(!n)return;let s=Cf(n),i,o;for(;;)if(r<s){if(n.nodeType!=1)break;let a=n.childNodes[r];if(al(a,1))i=n,o=++r;else break}else{if(BA(n))break;{let a=n.nextSibling;for(;a&&al(a,1);)i=a.parentNode,o=en(a)+1,a=a.nextSibling;if(a)n=a,r=0,s=Cf(n);else{if(n=n.parentNode,n==e.dom)break;r=s=0}}}i&&Rv(e,i,o)}function BA(e){let t=e.pmViewDesc;return t&&t.node&&t.node.isBlock}function qQ(e,t){for(;e&&t==e.childNodes.length&&!du(e);)t=en(e)+1,e=e.parentNode;for(;e&&t<e.childNodes.length;){let n=e.childNodes[t];if(n.nodeType==3)return n;if(n.nodeType==1&&n.contentEditable=="false")break;e=n,t=0}}function GQ(e,t){for(;e&&!t&&!du(e);)t=en(e),e=e.parentNode;for(;e&&t;){let n=e.childNodes[t-1];if(n.nodeType==3)return n;if(n.nodeType==1&&n.contentEditable=="false")break;e=n,t=e.childNodes.length}}function Rv(e,t,n){if(t.nodeType!=3){let i,o;(o=qQ(t,n))?(t=o,n=0):(i=GQ(t,n))&&(t=i,n=i.nodeValue.length)}let r=e.domSelection();if(tp(r)){let i=document.createRange();i.setEnd(t,n),i.setStart(t,n),r.removeAllRanges(),r.addRange(i)}else r.extend&&r.extend(t,n);e.domObserver.setCurSelection();let{state:s}=e;setTimeout(()=>{e.state==s&&Ns(e)},50)}function yw(e,t){let n=e.state.doc.resolve(t);if(!(hn||uQ)&&n.parent.inlineContent){let s=e.coordsAtPos(t);if(t>n.start()){let i=e.coordsAtPos(t-1),o=(i.top+i.bottom)/2;if(o>s.top&&o<s.bottom&&Math.abs(i.left-s.left)>1)return i.left<s.left?"ltr":"rtl"}if(t<n.end()){let i=e.coordsAtPos(t+1),o=(i.top+i.bottom)/2;if(o>s.top&&o<s.bottom&&Math.abs(i.left-s.left)>1)return i.left>s.left?"ltr":"rtl"}}return getComputedStyle(e.dom).direction=="rtl"?"rtl":"ltr"}function Cw(e,t,n){let r=e.state.selection;if(r instanceof Ve&&!r.empty||n.indexOf("s")>-1||nr&&n.indexOf("m")>-1)return!1;let{$from:s,$to:i}=r;if(!s.parent.inlineContent||e.endOfTextblock(t<0?"up":"down")){let o=Nv(e.state,t);if(o&&o instanceof Oe)return Qs(e,o)}if(!s.parent.inlineContent){let o=t<0?s:i,a=r instanceof $n?He.near(o,t):He.findFrom(o,t);return a?Qs(e,a):!1}return!1}function bw(e,t){if(!(e.state.selection instanceof Ve))return!0;let{$head:n,$anchor:r,empty:s}=e.state.selection;if(!n.sameParent(r))return!0;if(!s)return!1;if(e.endOfTextblock(t>0?"forward":"backward"))return!0;let i=!n.textOffset&&(t<0?n.nodeBefore:n.nodeAfter);if(i&&!i.isText){let o=e.state.tr;return t<0?o.delete(n.pos-i.nodeSize,n.pos):o.delete(n.pos,n.pos+i.nodeSize),e.dispatch(o),!0}return!1}function Sw(e,t,n){e.domObserver.stop(),t.contentEditable=n,e.domObserver.start()}function HQ(e){if(!wn||e.state.selection.$head.parentOffset>0)return!1;let{focusNode:t,focusOffset:n}=e.domSelectionRange();if(t&&t.nodeType==1&&n==0&&t.firstChild&&t.firstChild.contentEditable=="false"){let r=t.firstChild;Sw(e,r,"true"),setTimeout(()=>Sw(e,r,"false"),20)}return!1}function VQ(e){let t="";return e.ctrlKey&&(t+="c"),e.metaKey&&(t+="m"),e.altKey&&(t+="a"),e.shiftKey&&(t+="s"),t}function zQ(e,t){let n=t.keyCode,r=VQ(t);if(n==8||nr&&n==72&&r=="c")return bw(e,-1)||na(e,-1);if(n==46&&!t.shiftKey||nr&&n==68&&r=="c")return bw(e,1)||na(e,1);if(n==13||n==27)return!0;if(n==37||nr&&n==66&&r=="c"){let s=n==37?yw(e,e.state.selection.from)=="ltr"?-1:1:-1;return vw(e,s,r)||na(e,s)}else if(n==39||nr&&n==70&&r=="c"){let s=n==39?yw(e,e.state.selection.from)=="ltr"?1:-1:1;return vw(e,s,r)||na(e,s)}else{if(n==38||nr&&n==80&&r=="c")return Cw(e,-1,r)||na(e,-1);if(n==40||nr&&n==78&&r=="c")return HQ(e)||Cw(e,1,r)||na(e,1);if(r==(nr?"m":"c")&&(n==66||n==73||n==89||n==90))return!0}return!1}function qA(e,t){e.someProp("transformCopied",h=>{t=h(t,e)});let n=[],{content:r,openStart:s,openEnd:i}=t;for(;s>1&&i>1&&r.childCount==1&&r.firstChild.childCount==1;){s--,i--;let h=r.firstChild;n.push(h.type.name,h.attrs!=h.type.defaultAttrs?h.attrs:null),r=h.content}let o=e.someProp("clipboardSerializer")||_c.fromSchema(e.state.schema),a=WA(),c=a.createElement("div");c.appendChild(o.serializeFragment(r,{document:a}));let l=c.firstChild,u,d=0;for(;l&&l.nodeType==1&&(u=$A[l.nodeName.toLowerCase()]);){for(let h=u.length-1;h>=0;h--){let g=a.createElement(u[h]);for(;c.firstChild;)g.appendChild(c.firstChild);c.appendChild(g),d++}l=c.firstChild}l&&l.nodeType==1&&l.setAttribute("data-pm-slice",`${s} ${i}${d?` -${d}`:""} ${JSON.stringify(n)}`);let f=e.someProp("clipboardTextSerializer",h=>h(t,e))||t.content.textBetween(0,t.content.size,`

`);return{dom:c,text:f,slice:t}}function GA(e,t,n,r,s){let i=s.parent.type.spec.code,o,a;if(!n&&!t)return null;let c=t&&(r||i||!n);if(c){if(e.someProp("transformPastedText",f=>{t=f(t,i||r,e)}),i)return t?new Q(W.from(e.state.schema.text(t.replace(/\r\n?/g,`
`))),0,0):Q.empty;let d=e.someProp("clipboardTextParser",f=>f(t,s,r,e));if(d)a=d;else{let f=s.marks(),{schema:h}=e.state,g=_c.fromSchema(h);o=document.createElement("div"),t.split(/(?:\r\n?|\n)+/).forEach(_=>{let v=o.appendChild(document.createElement("p"));_&&v.appendChild(g.serializeNode(h.text(_,f)))})}}else e.someProp("transformPastedHTML",d=>{n=d(n,e)}),o=KQ(n),fu&&YQ(o);let l=o&&o.querySelector("[data-pm-slice]"),u=l&&/^(\d+) (\d+)(?: -(\d+))? (.*)/.exec(l.getAttribute("data-pm-slice")||"");if(u&&u[3])for(let d=+u[3];d>0;d--){let f=o.firstChild;for(;f&&f.nodeType!=1;)f=f.nextSibling;if(!f)break;o=f}if(a||(a=(e.someProp("clipboardParser")||e.someProp("domParser")||Al.fromSchema(e.state.schema)).parseSlice(o,{preserveWhitespace:!!(c||u),context:s,ruleFromNode(f){return f.nodeName=="BR"&&!f.nextSibling&&f.parentNode&&!$Q.test(f.parentNode.nodeName)?{ignore:!0}:null}})),u)a=ZQ(ww(a,+u[1],+u[2]),u[4]);else if(a=Q.maxOpen(WQ(a.content,s),!0),a.openStart||a.openEnd){let d=0,f=0;for(let h=a.content.firstChild;d<a.openStart&&!h.type.spec.isolating;d++,h=h.firstChild);for(let h=a.content.lastChild;f<a.openEnd&&!h.type.spec.isolating;f++,h=h.lastChild);a=ww(a,d,f)}return e.someProp("transformPasted",d=>{a=d(a,e)}),a}const $Q=/^(a|abbr|acronym|b|cite|code|del|em|i|ins|kbd|label|output|q|ruby|s|samp|span|strong|sub|sup|time|u|tt|var)$/i;function WQ(e,t){if(e.childCount<2)return e;for(let n=t.depth;n>=0;n--){let s=t.node(n).contentMatchAt(t.index(n)),i,o=[];if(e.forEach(a=>{if(!o)return;let c=s.findWrapping(a.type),l;if(!c)return o=null;if(l=o.length&&i.length&&VA(c,i,a,o[o.length-1],0))o[o.length-1]=l;else{o.length&&(o[o.length-1]=zA(o[o.length-1],i.length));let u=HA(a,c);o.push(u),s=s.matchType(u.type),i=c}}),o)return W.from(o)}return e}function HA(e,t,n=0){for(let r=t.length-1;r>=n;r--)e=t[r].create(null,W.from(e));return e}function VA(e,t,n,r,s){if(s<e.length&&s<t.length&&e[s]==t[s]){let i=VA(e,t,n,r.lastChild,s+1);if(i)return r.copy(r.content.replaceChild(r.childCount-1,i));if(r.contentMatchAt(r.childCount).matchType(s==e.length-1?n.type:e[s+1]))return r.copy(r.content.append(W.from(HA(n,e,s+1))))}}function zA(e,t){if(t==0)return e;let n=e.content.replaceChild(e.childCount-1,zA(e.lastChild,t-1)),r=e.contentMatchAt(e.childCount).fillBefore(W.empty,!0);return e.copy(n.append(r))}function Pv(e,t,n,r,s,i){let o=t<0?e.firstChild:e.lastChild,a=o.content;return e.childCount>1&&(i=0),s<r-1&&(a=Pv(a,t,n,r,s+1,i)),s>=n&&(a=t<0?o.contentMatchAt(0).fillBefore(a,i<=s).append(a):a.append(o.contentMatchAt(o.childCount).fillBefore(W.empty,!0))),e.replaceChild(t<0?0:e.childCount-1,o.copy(a))}function ww(e,t,n){return t<e.openStart&&(e=new Q(Pv(e.content,-1,t,e.openStart,0,e.openEnd),t,e.openEnd)),n<e.openEnd&&(e=new Q(Pv(e.content,1,n,e.openEnd,0,0),e.openStart,n)),e}const $A={thead:["table"],tbody:["table"],tfoot:["table"],caption:["table"],colgroup:["table"],col:["table","colgroup"],tr:["table","tbody"],td:["table","tbody","tr"],th:["table","tbody","tr"]};let Ew=null;function WA(){return Ew||(Ew=document.implementation.createHTMLDocument("title"))}function KQ(e){let t=/^(\s*<meta [^>]*>)*/.exec(e);t&&(e=e.slice(t[0].length));let n=WA().createElement("div"),r=/<([a-z][^>\s]+)/i.exec(e),s;if((s=r&&$A[r[1].toLowerCase()])&&(e=s.map(i=>"<"+i+">").join("")+e+s.map(i=>"</"+i+">").reverse().join("")),n.innerHTML=e,s)for(let i=0;i<s.length;i++)n=n.querySelector(s[i])||n;return n}function YQ(e){let t=e.querySelectorAll(hn?"span:not([class]):not([style])":"span.Apple-converted-space");for(let n=0;n<t.length;n++){let r=t[n];r.childNodes.length==1&&r.textContent==" "&&r.parentNode&&r.parentNode.replaceChild(e.ownerDocument.createTextNode(" "),r)}}function ZQ(e,t){if(!e.size)return e;let n=e.content.firstChild.type.schema,r;try{r=JSON.parse(t)}catch{return e}let{content:s,openStart:i,openEnd:o}=e;for(let a=r.length-2;a>=0;a-=2){let c=n.nodes[r[a]];if(!c||c.hasRequiredAttrs())break;s=W.from(c.create(r[a+1],s)),i++,o++}return new Q(s,i,o)}const En={},xn={},JQ={touchstart:!0,touchmove:!0};class QQ{constructor(){this.shiftKey=!1,this.mouseDown=null,this.lastKeyCode=null,this.lastKeyCodeTime=0,this.lastClick={time:0,x:0,y:0,type:""},this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastIOSEnter=0,this.lastIOSEnterFallbackTimeout=-1,this.lastFocus=0,this.lastTouch=0,this.lastAndroidDelete=0,this.composing=!1,this.compositionNode=null,this.composingTimeout=-1,this.compositionNodes=[],this.compositionEndedAt=-2e8,this.compositionID=1,this.compositionPendingChanges=0,this.domChangeCount=0,this.eventHandlers=Object.create(null),this.hideSelectionGuard=null}}function XQ(e){for(let t in En){let n=En[t];e.dom.addEventListener(t,e.input.eventHandlers[t]=r=>{tX(e,r)&&!M3(e,r)&&(e.editable||!(r.type in xn))&&n(e,r)},JQ[t]?{passive:!0}:void 0)}wn&&e.dom.addEventListener("input",()=>null),Dv(e)}function li(e,t){e.input.lastSelectionOrigin=t,e.input.lastSelectionTime=Date.now()}function eX(e){e.domObserver.stop();for(let t in e.input.eventHandlers)e.dom.removeEventListener(t,e.input.eventHandlers[t]);clearTimeout(e.input.composingTimeout),clearTimeout(e.input.lastIOSEnterFallbackTimeout)}function Dv(e){e.someProp("handleDOMEvents",t=>{for(let n in t)e.input.eventHandlers[n]||e.dom.addEventListener(n,e.input.eventHandlers[n]=r=>M3(e,r))})}function M3(e,t){return e.someProp("handleDOMEvents",n=>{let r=n[t.type];return r?r(e,t)||t.defaultPrevented:!1})}function tX(e,t){if(!t.bubbles)return!0;if(t.defaultPrevented)return!1;for(let n=t.target;n!=e.dom;n=n.parentNode)if(!n||n.nodeType==11||n.pmViewDesc&&n.pmViewDesc.stopEvent(t))return!1;return!0}function nX(e,t){!M3(e,t)&&En[t.type]&&(e.editable||!(t.type in xn))&&En[t.type](e,t)}xn.keydown=(e,t)=>{let n=t;if(e.input.shiftKey=n.keyCode==16||n.shiftKey,!YA(e,n)&&(e.input.lastKeyCode=n.keyCode,e.input.lastKeyCodeTime=Date.now(),!(xr&&hn&&n.keyCode==13)))if(n.keyCode!=229&&e.domObserver.forceFlush(),rc&&n.keyCode==13&&!n.ctrlKey&&!n.altKey&&!n.metaKey){let r=Date.now();e.input.lastIOSEnter=r,e.input.lastIOSEnterFallbackTimeout=setTimeout(()=>{e.input.lastIOSEnter==r&&(e.someProp("handleKeyDown",s=>s(e,eo(13,"Enter"))),e.input.lastIOSEnter=0)},200)}else e.someProp("handleKeyDown",r=>r(e,n))||zQ(e,n)?n.preventDefault():li(e,"key")};xn.keyup=(e,t)=>{t.keyCode==16&&(e.input.shiftKey=!1)};xn.keypress=(e,t)=>{let n=t;if(YA(e,n)||!n.charCode||n.ctrlKey&&!n.altKey||nr&&n.metaKey)return;if(e.someProp("handleKeyPress",s=>s(e,n))){n.preventDefault();return}let r=e.state.selection;if(!(r instanceof Ve)||!r.$from.sameParent(r.$to)){let s=String.fromCharCode(n.charCode);!/[\r\n]/.test(s)&&!e.someProp("handleTextInput",i=>i(e,r.$from.pos,r.$to.pos,s))&&e.dispatch(e.state.tr.insertText(s).scrollIntoView()),n.preventDefault()}};function rp(e){return{left:e.clientX,top:e.clientY}}function rX(e,t){let n=t.x-e.clientX,r=t.y-e.clientY;return n*n+r*r<100}function I3(e,t,n,r,s){if(r==-1)return!1;let i=e.state.doc.resolve(r);for(let o=i.depth+1;o>0;o--)if(e.someProp(t,a=>o>i.depth?a(e,n,i.nodeAfter,i.before(o),s,!0):a(e,n,i.node(o),i.before(o),s,!1)))return!0;return!1}function Ra(e,t,n){e.focused||e.focus();let r=e.state.tr.setSelection(t);r.setMeta("pointer",!0),e.dispatch(r)}function sX(e,t){if(t==-1)return!1;let n=e.state.doc.resolve(t),r=n.nodeAfter;return r&&r.isAtom&&Oe.isSelectable(r)?(Ra(e,new Oe(n)),!0):!1}function iX(e,t){if(t==-1)return!1;let n=e.state.selection,r,s;n instanceof Oe&&(r=n.node);let i=e.state.doc.resolve(t);for(let o=i.depth+1;o>0;o--){let a=o>i.depth?i.nodeAfter:i.node(o);if(Oe.isSelectable(a)){r&&n.$from.depth>0&&o>=n.$from.depth&&i.before(n.$from.depth+1)==n.$from.pos?s=i.before(n.$from.depth):s=i.before(o);break}}return s!=null?(Ra(e,Oe.create(e.state.doc,s)),!0):!1}function oX(e,t,n,r,s){return I3(e,"handleClickOn",t,n,r)||e.someProp("handleClick",i=>i(e,t,r))||(s?iX(e,n):sX(e,n))}function aX(e,t,n,r){return I3(e,"handleDoubleClickOn",t,n,r)||e.someProp("handleDoubleClick",s=>s(e,t,r))}function cX(e,t,n,r){return I3(e,"handleTripleClickOn",t,n,r)||e.someProp("handleTripleClick",s=>s(e,t,r))||lX(e,n,r)}function lX(e,t,n){if(n.button!=0)return!1;let r=e.state.doc;if(t==-1)return r.inlineContent?(Ra(e,Ve.create(r,0,r.content.size)),!0):!1;let s=r.resolve(t);for(let i=s.depth+1;i>0;i--){let o=i>s.depth?s.nodeAfter:s.node(i),a=s.before(i);if(o.inlineContent)Ra(e,Ve.create(r,a+1,a+1+o.content.size));else if(Oe.isSelectable(o))Ra(e,Oe.create(r,a));else continue;return!0}}function N3(e){return bf(e)}const KA=nr?"metaKey":"ctrlKey";En.mousedown=(e,t)=>{let n=t;e.input.shiftKey=n.shiftKey;let r=N3(e),s=Date.now(),i="singleClick";s-e.input.lastClick.time<500&&rX(n,e.input.lastClick)&&!n[KA]&&(e.input.lastClick.type=="singleClick"?i="doubleClick":e.input.lastClick.type=="doubleClick"&&(i="tripleClick")),e.input.lastClick={time:s,x:n.clientX,y:n.clientY,type:i};let o=e.posAtCoords(rp(n));o&&(i=="singleClick"?(e.input.mouseDown&&e.input.mouseDown.done(),e.input.mouseDown=new uX(e,o,n,!!r)):(i=="doubleClick"?aX:cX)(e,o.pos,o.inside,n)?n.preventDefault():li(e,"pointer"))};class uX{constructor(t,n,r,s){this.view=t,this.pos=n,this.event=r,this.flushed=s,this.delayedSelectionSync=!1,this.mightDrag=null,this.startDoc=t.state.doc,this.selectNode=!!r[KA],this.allowDefault=r.shiftKey;let i,o;if(n.inside>-1)i=t.state.doc.nodeAt(n.inside),o=n.inside;else{let u=t.state.doc.resolve(n.pos);i=u.parent,o=u.depth?u.before():0}const a=s?null:r.target,c=a?t.docView.nearestDesc(a,!0):null;this.target=c&&c.dom.nodeType==1?c.dom:null;let{selection:l}=t.state;(r.button==0&&i.type.spec.draggable&&i.type.spec.selectable!==!1||l instanceof Oe&&l.from<=o&&l.to>o)&&(this.mightDrag={node:i,pos:o,addAttr:!!(this.target&&!this.target.draggable),setUneditable:!!(this.target&&Lr&&!this.target.hasAttribute("contentEditable"))}),this.target&&this.mightDrag&&(this.mightDrag.addAttr||this.mightDrag.setUneditable)&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&(this.target.draggable=!0),this.mightDrag.setUneditable&&setTimeout(()=>{this.view.input.mouseDown==this&&this.target.setAttribute("contentEditable","false")},20),this.view.domObserver.start()),t.root.addEventListener("mouseup",this.up=this.up.bind(this)),t.root.addEventListener("mousemove",this.move=this.move.bind(this)),li(t,"pointer")}done(){this.view.root.removeEventListener("mouseup",this.up),this.view.root.removeEventListener("mousemove",this.move),this.mightDrag&&this.target&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&this.target.removeAttribute("draggable"),this.mightDrag.setUneditable&&this.target.removeAttribute("contentEditable"),this.view.domObserver.start()),this.delayedSelectionSync&&setTimeout(()=>Ns(this.view)),this.view.input.mouseDown=null}up(t){if(this.done(),!this.view.dom.contains(t.target))return;let n=this.pos;this.view.state.doc!=this.startDoc&&(n=this.view.posAtCoords(rp(t))),this.updateAllowDefault(t),this.allowDefault||!n?li(this.view,"pointer"):oX(this.view,n.pos,n.inside,t,this.selectNode)?t.preventDefault():t.button==0&&(this.flushed||wn&&this.mightDrag&&!this.mightDrag.node.isAtom||hn&&!this.view.state.selection.visible&&Math.min(Math.abs(n.pos-this.view.state.selection.from),Math.abs(n.pos-this.view.state.selection.to))<=2)?(Ra(this.view,He.near(this.view.state.doc.resolve(n.pos))),t.preventDefault()):li(this.view,"pointer")}move(t){this.updateAllowDefault(t),li(this.view,"pointer"),t.buttons==0&&this.done()}updateAllowDefault(t){!this.allowDefault&&(Math.abs(this.event.x-t.clientX)>4||Math.abs(this.event.y-t.clientY)>4)&&(this.allowDefault=!0)}}En.touchstart=e=>{e.input.lastTouch=Date.now(),N3(e),li(e,"pointer")};En.touchmove=e=>{e.input.lastTouch=Date.now(),li(e,"pointer")};En.contextmenu=e=>N3(e);function YA(e,t){return e.composing?!0:wn&&Math.abs(t.timeStamp-e.input.compositionEndedAt)<500?(e.input.compositionEndedAt=-2e8,!0):!1}const dX=xr?5e3:-1;xn.compositionstart=xn.compositionupdate=e=>{if(!e.composing){e.domObserver.flush();let{state:t}=e,n=t.selection.$from;if(t.selection.empty&&(t.storedMarks||!n.textOffset&&n.parentOffset&&n.nodeBefore.marks.some(r=>r.type.spec.inclusive===!1)))e.markCursor=e.state.storedMarks||n.marks(),bf(e,!0),e.markCursor=null;else if(bf(e),Lr&&t.selection.empty&&n.parentOffset&&!n.textOffset&&n.nodeBefore.marks.length){let r=e.domSelectionRange();for(let s=r.focusNode,i=r.focusOffset;s&&s.nodeType==1&&i!=0;){let o=i<0?s.lastChild:s.childNodes[i-1];if(!o)break;if(o.nodeType==3){e.domSelection().collapse(o,o.nodeValue.length);break}else s=o,i=-1}}e.input.composing=!0}ZA(e,dX)};xn.compositionend=(e,t)=>{e.composing&&(e.input.composing=!1,e.input.compositionEndedAt=t.timeStamp,e.input.compositionPendingChanges=e.domObserver.pendingRecords().length?e.input.compositionID:0,e.input.compositionNode=null,e.input.compositionPendingChanges&&Promise.resolve().then(()=>e.domObserver.flush()),e.input.compositionID++,ZA(e,20))};function ZA(e,t){clearTimeout(e.input.composingTimeout),t>-1&&(e.input.composingTimeout=setTimeout(()=>bf(e),t))}function JA(e){for(e.composing&&(e.input.composing=!1,e.input.compositionEndedAt=hX());e.input.compositionNodes.length>0;)e.input.compositionNodes.pop().markParentsDirty()}function fX(e){let t=e.domSelectionRange();if(!t.focusNode)return null;let n=iQ(t.focusNode,t.focusOffset),r=oQ(t.focusNode,t.focusOffset);if(n&&r&&n!=r){let s=r.pmViewDesc,i=e.domObserver.lastChangedTextNode;if(n==i||r==i)return i;if(!s||!s.isText(r.nodeValue))return r;if(e.input.compositionNode==r){let o=n.pmViewDesc;if(!(!o||!o.isText(n.nodeValue)))return r}}return n||r}function hX(){let e=document.createEvent("Event");return e.initEvent("event",!0,!0),e.timeStamp}function bf(e,t=!1){if(!(xr&&e.domObserver.flushingSoon>=0)){if(e.domObserver.forceFlush(),JA(e),t||e.docView&&e.docView.dirty){let n=k3(e);return n&&!n.eq(e.state.selection)?e.dispatch(e.state.tr.setSelection(n)):e.updateState(e.state),!0}return!1}}function pX(e,t){if(!e.dom.parentNode)return;let n=e.dom.parentNode.appendChild(document.createElement("div"));n.appendChild(t),n.style.cssText="position: fixed; left: -10000px; top: 10px";let r=getSelection(),s=document.createRange();s.selectNodeContents(t),e.dom.blur(),r.removeAllRanges(),r.addRange(s),setTimeout(()=>{n.parentNode&&n.parentNode.removeChild(n),e.focus()},50)}const Nl=Nn&&hi<15||rc&&dQ<604;En.copy=xn.cut=(e,t)=>{let n=t,r=e.state.selection,s=n.type=="cut";if(r.empty)return;let i=Nl?null:n.clipboardData,o=r.content(),{dom:a,text:c}=qA(e,o);i?(n.preventDefault(),i.clearData(),i.setData("text/html",a.innerHTML),i.setData("text/plain",c)):pX(e,a),s&&e.dispatch(e.state.tr.deleteSelection().scrollIntoView().setMeta("uiEvent","cut"))};function mX(e){return e.openStart==0&&e.openEnd==0&&e.content.childCount==1?e.content.firstChild:null}function gX(e,t){if(!e.dom.parentNode)return;let n=e.input.shiftKey||e.state.selection.$from.parent.type.spec.code,r=e.dom.parentNode.appendChild(document.createElement(n?"textarea":"div"));n||(r.contentEditable="true"),r.style.cssText="position: fixed; left: -10000px; top: 10px",r.focus();let s=e.input.shiftKey&&e.input.lastKeyCode!=45;setTimeout(()=>{e.focus(),r.parentNode&&r.parentNode.removeChild(r),n?Rl(e,r.value,null,s,t):Rl(e,r.textContent,r.innerHTML,s,t)},50)}function Rl(e,t,n,r,s){let i=GA(e,t,n,r,e.state.selection.$from);if(e.someProp("handlePaste",c=>c(e,s,i||Q.empty)))return!0;if(!i)return!1;let o=mX(i),a=o?e.state.tr.replaceSelectionWith(o,r):e.state.tr.replaceSelection(i);return e.dispatch(a.scrollIntoView().setMeta("paste",!0).setMeta("uiEvent","paste")),!0}function QA(e){let t=e.getData("text/plain")||e.getData("Text");if(t)return t;let n=e.getData("text/uri-list");return n?n.replace(/\r?\n/g," "):""}xn.paste=(e,t)=>{let n=t;if(e.composing&&!xr)return;let r=Nl?null:n.clipboardData,s=e.input.shiftKey&&e.input.lastKeyCode!=45;r&&Rl(e,QA(r),r.getData("text/html"),s,n)?n.preventDefault():gX(e,n)};class XA{constructor(t,n,r){this.slice=t,this.move=n,this.node=r}}const eM=nr?"altKey":"ctrlKey";En.dragstart=(e,t)=>{let n=t,r=e.input.mouseDown;if(r&&r.done(),!n.dataTransfer)return;let s=e.state.selection,i=s.empty?null:e.posAtCoords(rp(n)),o;if(!(i&&i.pos>=s.from&&i.pos<=(s instanceof Oe?s.to-1:s.to))){if(r&&r.mightDrag)o=Oe.create(e.state.doc,r.mightDrag.pos);else if(n.target&&n.target.nodeType==1){let d=e.docView.nearestDesc(n.target,!0);d&&d.node.type.spec.draggable&&d!=e.docView&&(o=Oe.create(e.state.doc,d.posBefore))}}let a=(o||e.state.selection).content(),{dom:c,text:l,slice:u}=qA(e,a);(!n.dataTransfer.files.length||!hn||xA>120)&&n.dataTransfer.clearData(),n.dataTransfer.setData(Nl?"Text":"text/html",c.innerHTML),n.dataTransfer.effectAllowed="copyMove",Nl||n.dataTransfer.setData("text/plain",l),e.dragging=new XA(u,!n[eM],o)};En.dragend=e=>{let t=e.dragging;window.setTimeout(()=>{e.dragging==t&&(e.dragging=null)},50)};xn.dragover=xn.dragenter=(e,t)=>t.preventDefault();xn.drop=(e,t)=>{let n=t,r=e.dragging;if(e.dragging=null,!n.dataTransfer)return;let s=e.posAtCoords(rp(n));if(!s)return;let i=e.state.doc.resolve(s.pos),o=r&&r.slice;o?e.someProp("transformPasted",g=>{o=g(o,e)}):o=GA(e,QA(n.dataTransfer),Nl?null:n.dataTransfer.getData("text/html"),!1,i);let a=!!(r&&!n[eM]);if(e.someProp("handleDrop",g=>g(e,n,o||Q.empty,a))){n.preventDefault();return}if(!o)return;n.preventDefault();let c=o?QZ(e.state.doc,i.pos,o):i.pos;c==null&&(c=i.pos);let l=e.state.tr;if(a){let{node:g}=r;g?g.replace(l):l.deleteSelection()}let u=l.mapping.map(c),d=o.openStart==0&&o.openEnd==0&&o.content.childCount==1,f=l.doc;if(d?l.replaceRangeWith(u,u,o.content.firstChild):l.replaceRange(u,u,o),l.doc.eq(f))return;let h=l.doc.resolve(u);if(d&&Oe.isSelectable(o.content.firstChild)&&h.nodeAfter&&h.nodeAfter.sameMarkup(o.content.firstChild))l.setSelection(new Oe(h));else{let g=l.mapping.map(c);l.mapping.maps[l.mapping.maps.length-1].forEach((_,v,y,C)=>g=C),l.setSelection(A3(e,h,l.doc.resolve(g)))}e.focus(),e.dispatch(l.setMeta("uiEvent","drop"))};En.focus=e=>{e.input.lastFocus=Date.now(),e.focused||(e.domObserver.stop(),e.dom.classList.add("ProseMirror-focused"),e.domObserver.start(),e.focused=!0,setTimeout(()=>{e.docView&&e.hasFocus()&&!e.domObserver.currentSelection.eq(e.domSelectionRange())&&Ns(e)},20))};En.blur=(e,t)=>{let n=t;e.focused&&(e.domObserver.stop(),e.dom.classList.remove("ProseMirror-focused"),e.domObserver.start(),n.relatedTarget&&e.dom.contains(n.relatedTarget)&&e.domObserver.currentSelection.clear(),e.focused=!1)};En.beforeinput=(e,t)=>{if(hn&&xr&&t.inputType=="deleteContentBackward"){e.domObserver.flushSoon();let{domChangeCount:r}=e.input;setTimeout(()=>{if(e.input.domChangeCount!=r||(e.dom.blur(),e.focus(),e.someProp("handleKeyDown",i=>i(e,eo(8,"Backspace")))))return;let{$cursor:s}=e.state.selection;s&&s.pos>0&&e.dispatch(e.state.tr.delete(s.pos-1,s.pos).scrollIntoView())},50)}};for(let e in xn)En[e]=xn[e];function Pl(e,t){if(e==t)return!0;for(let n in e)if(e[n]!==t[n])return!1;for(let n in t)if(!(n in e))return!1;return!0}class Sf{constructor(t,n){this.toDOM=t,this.spec=n||uo,this.side=this.spec.side||0}map(t,n,r,s){let{pos:i,deleted:o}=t.mapResult(n.from+s,this.side<0?-1:1);return o?null:new In(i-r,i-r,this)}valid(){return!0}eq(t){return this==t||t instanceof Sf&&(this.spec.key&&this.spec.key==t.spec.key||this.toDOM==t.toDOM&&Pl(this.spec,t.spec))}destroy(t){this.spec.destroy&&this.spec.destroy(t)}}class mi{constructor(t,n){this.attrs=t,this.spec=n||uo}map(t,n,r,s){let i=t.map(n.from+s,this.spec.inclusiveStart?-1:1)-r,o=t.map(n.to+s,this.spec.inclusiveEnd?1:-1)-r;return i>=o?null:new In(i,o,this)}valid(t,n){return n.from<n.to}eq(t){return this==t||t instanceof mi&&Pl(this.attrs,t.attrs)&&Pl(this.spec,t.spec)}static is(t){return t.type instanceof mi}destroy(){}}class R3{constructor(t,n){this.attrs=t,this.spec=n||uo}map(t,n,r,s){let i=t.mapResult(n.from+s,1);if(i.deleted)return null;let o=t.mapResult(n.to+s,-1);return o.deleted||o.pos<=i.pos?null:new In(i.pos-r,o.pos-r,this)}valid(t,n){let{index:r,offset:s}=t.content.findIndex(n.from),i;return s==n.from&&!(i=t.child(r)).isText&&s+i.nodeSize==n.to}eq(t){return this==t||t instanceof R3&&Pl(this.attrs,t.attrs)&&Pl(this.spec,t.spec)}destroy(){}}class In{constructor(t,n,r){this.from=t,this.to=n,this.type=r}copy(t,n){return new In(t,n,this.type)}eq(t,n=0){return this.type.eq(t.type)&&this.from+n==t.from&&this.to+n==t.to}map(t,n,r){return this.type.map(t,this,n,r)}static widget(t,n,r){return new In(t,t,new Sf(n,r))}static inline(t,n,r,s){return new In(t,n,new mi(r,s))}static node(t,n,r,s){return new In(t,n,new R3(r,s))}get spec(){return this.type.spec}get inline(){return this.type instanceof mi}get widget(){return this.type instanceof Sf}}const ha=[],uo={};class mt{constructor(t,n){this.local=t.length?t:ha,this.children=n.length?n:ha}static create(t,n){return n.length?wf(n,t,0,uo):ln}find(t,n,r){let s=[];return this.findInner(t??0,n??1e9,s,0,r),s}findInner(t,n,r,s,i){for(let o=0;o<this.local.length;o++){let a=this.local[o];a.from<=n&&a.to>=t&&(!i||i(a.spec))&&r.push(a.copy(a.from+s,a.to+s))}for(let o=0;o<this.children.length;o+=3)if(this.children[o]<n&&this.children[o+1]>t){let a=this.children[o]+1;this.children[o+2].findInner(t-a,n-a,r,s+a,i)}}map(t,n,r){return this==ln||t.maps.length==0?this:this.mapInner(t,n,0,0,r||uo)}mapInner(t,n,r,s,i){let o;for(let a=0;a<this.local.length;a++){let c=this.local[a].map(t,r,s);c&&c.type.valid(n,c)?(o||(o=[])).push(c):i.onRemove&&i.onRemove(this.local[a].spec)}return this.children.length?_X(this.children,o||[],t,n,r,s,i):o?new mt(o.sort(fo),ha):ln}add(t,n){return n.length?this==ln?mt.create(t,n):this.addInner(t,n,0):this}addInner(t,n,r){let s,i=0;t.forEach((a,c)=>{let l=c+r,u;if(u=nM(n,a,l)){for(s||(s=this.children.slice());i<s.length&&s[i]<c;)i+=3;s[i]==c?s[i+2]=s[i+2].addInner(a,u,l+1):s.splice(i,0,c,c+a.nodeSize,wf(u,a,l+1,uo)),i+=3}});let o=tM(i?rM(n):n,-r);for(let a=0;a<o.length;a++)o[a].type.valid(t,o[a])||o.splice(a--,1);return new mt(o.length?this.local.concat(o).sort(fo):this.local,s||this.children)}remove(t){return t.length==0||this==ln?this:this.removeInner(t,0)}removeInner(t,n){let r=this.children,s=this.local;for(let i=0;i<r.length;i+=3){let o,a=r[i]+n,c=r[i+1]+n;for(let u=0,d;u<t.length;u++)(d=t[u])&&d.from>a&&d.to<c&&(t[u]=null,(o||(o=[])).push(d));if(!o)continue;r==this.children&&(r=this.children.slice());let l=r[i+2].removeInner(o,a+1);l!=ln?r[i+2]=l:(r.splice(i,3),i-=3)}if(s.length){for(let i=0,o;i<t.length;i++)if(o=t[i])for(let a=0;a<s.length;a++)s[a].eq(o,n)&&(s==this.local&&(s=this.local.slice()),s.splice(a--,1))}return r==this.children&&s==this.local?this:s.length||r.length?new mt(s,r):ln}forChild(t,n){if(this==ln)return this;if(n.isLeaf)return mt.empty;let r,s;for(let a=0;a<this.children.length;a+=3)if(this.children[a]>=t){this.children[a]==t&&(r=this.children[a+2]);break}let i=t+1,o=i+n.content.size;for(let a=0;a<this.local.length;a++){let c=this.local[a];if(c.from<o&&c.to>i&&c.type instanceof mi){let l=Math.max(i,c.from)-i,u=Math.min(o,c.to)-i;l<u&&(s||(s=[])).push(c.copy(l,u))}}if(s){let a=new mt(s.sort(fo),ha);return r?new ti([a,r]):a}return r||ln}eq(t){if(this==t)return!0;if(!(t instanceof mt)||this.local.length!=t.local.length||this.children.length!=t.children.length)return!1;for(let n=0;n<this.local.length;n++)if(!this.local[n].eq(t.local[n]))return!1;for(let n=0;n<this.children.length;n+=3)if(this.children[n]!=t.children[n]||this.children[n+1]!=t.children[n+1]||!this.children[n+2].eq(t.children[n+2]))return!1;return!0}locals(t){return P3(this.localsInner(t))}localsInner(t){if(this==ln)return ha;if(t.inlineContent||!this.local.some(mi.is))return this.local;let n=[];for(let r=0;r<this.local.length;r++)this.local[r].type instanceof mi||n.push(this.local[r]);return n}}mt.empty=new mt([],[]);mt.removeOverlap=P3;const ln=mt.empty;class ti{constructor(t){this.members=t}map(t,n){const r=this.members.map(s=>s.map(t,n,uo));return ti.from(r)}forChild(t,n){if(n.isLeaf)return mt.empty;let r=[];for(let s=0;s<this.members.length;s++){let i=this.members[s].forChild(t,n);i!=ln&&(i instanceof ti?r=r.concat(i.members):r.push(i))}return ti.from(r)}eq(t){if(!(t instanceof ti)||t.members.length!=this.members.length)return!1;for(let n=0;n<this.members.length;n++)if(!this.members[n].eq(t.members[n]))return!1;return!0}locals(t){let n,r=!0;for(let s=0;s<this.members.length;s++){let i=this.members[s].localsInner(t);if(i.length)if(!n)n=i;else{r&&(n=n.slice(),r=!1);for(let o=0;o<i.length;o++)n.push(i[o])}}return n?P3(r?n:n.sort(fo)):ha}static from(t){switch(t.length){case 0:return ln;case 1:return t[0];default:return new ti(t.every(n=>n instanceof mt)?t:t.reduce((n,r)=>n.concat(r instanceof mt?r:r.members),[]))}}}function _X(e,t,n,r,s,i,o){let a=e.slice();for(let l=0,u=i;l<n.maps.length;l++){let d=0;n.maps[l].forEach((f,h,g,_)=>{let v=_-g-(h-f);for(let y=0;y<a.length;y+=3){let C=a[y+1];if(C<0||f>C+u-d)continue;let E=a[y]+u-d;h>=E?a[y+1]=f<=E?-2:-1:f>=u&&v&&(a[y]+=v,a[y+1]+=v)}d+=v}),u=n.maps[l].map(u,-1)}let c=!1;for(let l=0;l<a.length;l+=3)if(a[l+1]<0){if(a[l+1]==-2){c=!0,a[l+1]=-1;continue}let u=n.map(e[l]+i),d=u-s;if(d<0||d>=r.content.size){c=!0;continue}let f=n.map(e[l+1]+i,-1),h=f-s,{index:g,offset:_}=r.content.findIndex(d),v=r.maybeChild(g);if(v&&_==d&&_+v.nodeSize==h){let y=a[l+2].mapInner(n,v,u+1,e[l]+i+1,o);y!=ln?(a[l]=d,a[l+1]=h,a[l+2]=y):(a[l+1]=-2,c=!0)}else c=!0}if(c){let l=vX(a,e,t,n,s,i,o),u=wf(l,r,0,o);t=u.local;for(let d=0;d<a.length;d+=3)a[d+1]<0&&(a.splice(d,3),d-=3);for(let d=0,f=0;d<u.children.length;d+=3){let h=u.children[d];for(;f<a.length&&a[f]<h;)f+=3;a.splice(f,0,u.children[d],u.children[d+1],u.children[d+2])}}return new mt(t.sort(fo),a)}function tM(e,t){if(!t||!e.length)return e;let n=[];for(let r=0;r<e.length;r++){let s=e[r];n.push(new In(s.from+t,s.to+t,s.type))}return n}function vX(e,t,n,r,s,i,o){function a(c,l){for(let u=0;u<c.local.length;u++){let d=c.local[u].map(r,s,l);d?n.push(d):o.onRemove&&o.onRemove(c.local[u].spec)}for(let u=0;u<c.children.length;u+=3)a(c.children[u+2],c.children[u]+l+1)}for(let c=0;c<e.length;c+=3)e[c+1]==-1&&a(e[c+2],t[c]+i+1);return n}function nM(e,t,n){if(t.isLeaf)return null;let r=n+t.nodeSize,s=null;for(let i=0,o;i<e.length;i++)(o=e[i])&&o.from>n&&o.to<r&&((s||(s=[])).push(o),e[i]=null);return s}function rM(e){let t=[];for(let n=0;n<e.length;n++)e[n]!=null&&t.push(e[n]);return t}function wf(e,t,n,r){let s=[],i=!1;t.forEach((a,c)=>{let l=nM(e,a,c+n);if(l){i=!0;let u=wf(l,a,n+c+1,r);u!=ln&&s.push(c,c+a.nodeSize,u)}});let o=tM(i?rM(e):e,-n).sort(fo);for(let a=0;a<o.length;a++)o[a].type.valid(t,o[a])||(r.onRemove&&r.onRemove(o[a].spec),o.splice(a--,1));return o.length||s.length?new mt(o,s):ln}function fo(e,t){return e.from-t.from||e.to-t.to}function P3(e){let t=e;for(let n=0;n<t.length-1;n++){let r=t[n];if(r.from!=r.to)for(let s=n+1;s<t.length;s++){let i=t[s];if(i.from==r.from){i.to!=r.to&&(t==e&&(t=e.slice()),t[s]=i.copy(i.from,r.to),xw(t,s+1,i.copy(r.to,i.to)));continue}else{i.from<r.to&&(t==e&&(t=e.slice()),t[n]=r.copy(r.from,i.from),xw(t,s,r.copy(i.from,r.to)));break}}}return t}function xw(e,t,n){for(;t<e.length&&fo(n,e[t])>0;)t++;e.splice(t,0,n)}function i0(e){let t=[];return e.someProp("decorations",n=>{let r=n(e.state);r&&r!=ln&&t.push(r)}),e.cursorWrapper&&t.push(mt.create(e.state.doc,[e.cursorWrapper.deco])),ti.from(t)}const yX={childList:!0,characterData:!0,characterDataOldValue:!0,attributes:!0,attributeOldValue:!0,subtree:!0},CX=Nn&&hi<=11;class bX{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}set(t){this.anchorNode=t.anchorNode,this.anchorOffset=t.anchorOffset,this.focusNode=t.focusNode,this.focusOffset=t.focusOffset}clear(){this.anchorNode=this.focusNode=null}eq(t){return t.anchorNode==this.anchorNode&&t.anchorOffset==this.anchorOffset&&t.focusNode==this.focusNode&&t.focusOffset==this.focusOffset}}class SX{constructor(t,n){this.view=t,this.handleDOMChange=n,this.queue=[],this.flushingSoon=-1,this.observer=null,this.currentSelection=new bX,this.onCharData=null,this.suppressingSelectionUpdates=!1,this.lastChangedTextNode=null,this.observer=window.MutationObserver&&new window.MutationObserver(r=>{for(let s=0;s<r.length;s++)this.queue.push(r[s]);Nn&&hi<=11&&r.some(s=>s.type=="childList"&&s.removedNodes.length||s.type=="characterData"&&s.oldValue.length>s.target.nodeValue.length)?this.flushSoon():this.flush()}),CX&&(this.onCharData=r=>{this.queue.push({target:r.target,type:"characterData",oldValue:r.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this)}flushSoon(){this.flushingSoon<0&&(this.flushingSoon=window.setTimeout(()=>{this.flushingSoon=-1,this.flush()},20))}forceFlush(){this.flushingSoon>-1&&(window.clearTimeout(this.flushingSoon),this.flushingSoon=-1,this.flush())}start(){this.observer&&(this.observer.takeRecords(),this.observer.observe(this.view.dom,yX)),this.onCharData&&this.view.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.connectSelection()}stop(){if(this.observer){let t=this.observer.takeRecords();if(t.length){for(let n=0;n<t.length;n++)this.queue.push(t[n]);window.setTimeout(()=>this.flush(),20)}this.observer.disconnect()}this.onCharData&&this.view.dom.removeEventListener("DOMCharacterDataModified",this.onCharData),this.disconnectSelection()}connectSelection(){this.view.dom.ownerDocument.addEventListener("selectionchange",this.onSelectionChange)}disconnectSelection(){this.view.dom.ownerDocument.removeEventListener("selectionchange",this.onSelectionChange)}suppressSelectionUpdates(){this.suppressingSelectionUpdates=!0,setTimeout(()=>this.suppressingSelectionUpdates=!1,50)}onSelectionChange(){if(_w(this.view)){if(this.suppressingSelectionUpdates)return Ns(this.view);if(Nn&&hi<=11&&!this.view.state.selection.empty){let t=this.view.domSelectionRange();if(t.focusNode&&To(t.focusNode,t.focusOffset,t.anchorNode,t.anchorOffset))return this.flushSoon()}this.flush()}}setCurSelection(){this.currentSelection.set(this.view.domSelectionRange())}ignoreSelectionChange(t){if(!t.focusNode)return!0;let n=new Set,r;for(let i=t.focusNode;i;i=Il(i))n.add(i);for(let i=t.anchorNode;i;i=Il(i))if(n.has(i)){r=i;break}let s=r&&this.view.docView.nearestDesc(r);if(s&&s.ignoreMutation({type:"selection",target:r.nodeType==3?r.parentNode:r}))return this.setCurSelection(),!0}pendingRecords(){if(this.observer)for(let t of this.observer.takeRecords())this.queue.push(t);return this.queue}flush(){let{view:t}=this;if(!t.docView||this.flushingSoon>-1)return;let n=this.pendingRecords();n.length&&(this.queue=[]);let r=t.domSelectionRange(),s=!this.suppressingSelectionUpdates&&!this.currentSelection.eq(r)&&_w(t)&&!this.ignoreSelectionChange(r),i=-1,o=-1,a=!1,c=[];if(t.editable)for(let u=0;u<n.length;u++){let d=this.registerMutation(n[u],c);d&&(i=i<0?d.from:Math.min(d.from,i),o=o<0?d.to:Math.max(d.to,o),d.typeOver&&(a=!0))}if(Lr&&c.length){let u=c.filter(d=>d.nodeName=="BR");if(u.length==2){let[d,f]=u;d.parentNode&&d.parentNode.parentNode==f.parentNode?f.remove():d.remove()}else{let{focusNode:d}=this.currentSelection;for(let f of u){let h=f.parentNode;h&&h.nodeName=="LI"&&(!d||xX(t,d)!=h)&&f.remove()}}}let l=null;i<0&&s&&t.input.lastFocus>Date.now()-200&&Math.max(t.input.lastTouch,t.input.lastClick.time)<Date.now()-300&&tp(r)&&(l=k3(t))&&l.eq(He.near(t.state.doc.resolve(0),1))?(t.input.lastFocus=0,Ns(t),this.currentSelection.set(r),t.scrollToSelection()):(i>-1||s)&&(i>-1&&(t.docView.markDirty(i,o),wX(t)),this.handleDOMChange(i,o,a,c),t.docView&&t.docView.dirty?t.updateState(t.state):this.currentSelection.eq(r)||Ns(t),this.currentSelection.set(r))}registerMutation(t,n){if(n.indexOf(t.target)>-1)return null;let r=this.view.docView.nearestDesc(t.target);if(t.type=="attributes"&&(r==this.view.docView||t.attributeName=="contenteditable"||t.attributeName=="style"&&!t.oldValue&&!t.target.getAttribute("style"))||!r||r.ignoreMutation(t))return null;if(t.type=="childList"){for(let u=0;u<t.addedNodes.length;u++){let d=t.addedNodes[u];n.push(d),d.nodeType==3&&(this.lastChangedTextNode=d)}if(r.contentDOM&&r.contentDOM!=r.dom&&!r.contentDOM.contains(t.target))return{from:r.posBefore,to:r.posAfter};let s=t.previousSibling,i=t.nextSibling;if(Nn&&hi<=11&&t.addedNodes.length)for(let u=0;u<t.addedNodes.length;u++){let{previousSibling:d,nextSibling:f}=t.addedNodes[u];(!d||Array.prototype.indexOf.call(t.addedNodes,d)<0)&&(s=d),(!f||Array.prototype.indexOf.call(t.addedNodes,f)<0)&&(i=f)}let o=s&&s.parentNode==t.target?en(s)+1:0,a=r.localPosFromDOM(t.target,o,-1),c=i&&i.parentNode==t.target?en(i):t.target.childNodes.length,l=r.localPosFromDOM(t.target,c,1);return{from:a,to:l}}else return t.type=="attributes"?{from:r.posAtStart-r.border,to:r.posAtEnd+r.border}:(this.lastChangedTextNode=t.target,{from:r.posAtStart,to:r.posAtEnd,typeOver:t.target.nodeValue==t.oldValue})}}let Tw=new WeakMap,Ow=!1;function wX(e){if(!Tw.has(e)&&(Tw.set(e,null),["normal","nowrap","pre-line"].indexOf(getComputedStyle(e.dom).whiteSpace)!==-1)){if(e.requiresGeckoHackNode=Lr,Ow)return;console.warn("ProseMirror expects the CSS white-space property to be set, preferably to 'pre-wrap'. It is recommended to load style/prosemirror.css from the prosemirror-view package."),Ow=!0}}function kw(e,t){let n=t.startContainer,r=t.startOffset,s=t.endContainer,i=t.endOffset,o=e.domAtPos(e.state.selection.anchor);return To(o.node,o.offset,s,i)&&([n,r,s,i]=[s,i,n,r]),{anchorNode:n,anchorOffset:r,focusNode:s,focusOffset:i}}function EX(e,t){if(t.getComposedRanges){let s=t.getComposedRanges(e.root)[0];if(s)return kw(e,s)}let n;function r(s){s.preventDefault(),s.stopImmediatePropagation(),n=s.getTargetRanges()[0]}return e.dom.addEventListener("beforeinput",r,!0),document.execCommand("indent"),e.dom.removeEventListener("beforeinput",r,!0),n?kw(e,n):null}function xX(e,t){for(let n=t.parentNode;n&&n!=e.dom;n=n.parentNode){let r=e.docView.nearestDesc(n,!0);if(r&&r.node.isBlock)return n}return null}function TX(e,t,n){let{node:r,fromOffset:s,toOffset:i,from:o,to:a}=e.docView.parseRange(t,n),c=e.domSelectionRange(),l,u=c.anchorNode;if(u&&e.dom.contains(u.nodeType==1?u:u.parentNode)&&(l=[{node:u,offset:c.anchorOffset}],tp(c)||l.push({node:c.focusNode,offset:c.focusOffset})),hn&&e.input.lastKeyCode===8)for(let v=i;v>s;v--){let y=r.childNodes[v-1],C=y.pmViewDesc;if(y.nodeName=="BR"&&!C){i=v;break}if(!C||C.size)break}let d=e.state.doc,f=e.someProp("domParser")||Al.fromSchema(e.state.schema),h=d.resolve(o),g=null,_=f.parse(r,{topNode:h.parent,topMatch:h.parent.contentMatchAt(h.index()),topOpen:!0,from:s,to:i,preserveWhitespace:h.parent.type.whitespace=="pre"?"full":!0,findPositions:l,ruleFromNode:OX,context:h});if(l&&l[0].pos!=null){let v=l[0].pos,y=l[1]&&l[1].pos;y==null&&(y=v),g={anchor:v+o,head:y+o}}return{doc:_,sel:g,from:o,to:a}}function OX(e){let t=e.pmViewDesc;if(t)return t.parseRule();if(e.nodeName=="BR"&&e.parentNode){if(wn&&/^(ul|ol)$/i.test(e.parentNode.nodeName)){let n=document.createElement("div");return n.appendChild(document.createElement("li")),{skip:n}}else if(e.parentNode.lastChild==e||wn&&/^(tr|table)$/i.test(e.parentNode.nodeName))return{ignore:!0}}else if(e.nodeName=="IMG"&&e.getAttribute("mark-placeholder"))return{ignore:!0};return null}const kX=/^(a|abbr|acronym|b|bd[io]|big|br|button|cite|code|data(list)?|del|dfn|em|i|ins|kbd|label|map|mark|meter|output|q|ruby|s|samp|small|span|strong|su[bp]|time|u|tt|var)$/i;function AX(e,t,n,r,s){let i=e.input.compositionPendingChanges||(e.composing?e.input.compositionID:0);if(e.input.compositionPendingChanges=0,t<0){let O=e.input.lastSelectionTime>Date.now()-50?e.input.lastSelectionOrigin:null,A=k3(e,O);if(A&&!e.state.selection.eq(A)){if(hn&&xr&&e.input.lastKeyCode===13&&Date.now()-100<e.input.lastKeyCodeTime&&e.someProp("handleKeyDown",I=>I(e,eo(13,"Enter"))))return;let k=e.state.tr.setSelection(A);O=="pointer"?k.setMeta("pointer",!0):O=="key"&&k.scrollIntoView(),i&&k.setMeta("composition",i),e.dispatch(k)}return}let o=e.state.doc.resolve(t),a=o.sharedDepth(n);t=o.before(a+1),n=e.state.doc.resolve(n).after(a+1);let c=e.state.selection,l=TX(e,t,n),u=e.state.doc,d=u.slice(l.from,l.to),f,h;e.input.lastKeyCode===8&&Date.now()-100<e.input.lastKeyCodeTime?(f=e.state.selection.to,h="end"):(f=e.state.selection.from,h="start"),e.input.lastKeyCode=null;let g=NX(d.content,l.doc.content,l.from,f,h);if((rc&&e.input.lastIOSEnter>Date.now()-225||xr)&&s.some(O=>O.nodeType==1&&!kX.test(O.nodeName))&&(!g||g.endA>=g.endB)&&e.someProp("handleKeyDown",O=>O(e,eo(13,"Enter")))){e.input.lastIOSEnter=0;return}if(!g)if(r&&c instanceof Ve&&!c.empty&&c.$head.sameParent(c.$anchor)&&!e.composing&&!(l.sel&&l.sel.anchor!=l.sel.head))g={start:c.from,endA:c.to,endB:c.to};else{if(l.sel){let O=Aw(e,e.state.doc,l.sel);if(O&&!O.eq(e.state.selection)){let A=e.state.tr.setSelection(O);i&&A.setMeta("composition",i),e.dispatch(A)}}return}e.input.domChangeCount++,e.state.selection.from<e.state.selection.to&&g.start==g.endB&&e.state.selection instanceof Ve&&(g.start>e.state.selection.from&&g.start<=e.state.selection.from+2&&e.state.selection.from>=l.from?g.start=e.state.selection.from:g.endA<e.state.selection.to&&g.endA>=e.state.selection.to-2&&e.state.selection.to<=l.to&&(g.endB+=e.state.selection.to-g.endA,g.endA=e.state.selection.to)),Nn&&hi<=11&&g.endB==g.start+1&&g.endA==g.start&&g.start>l.from&&l.doc.textBetween(g.start-l.from-1,g.start-l.from+1)=="  "&&(g.start--,g.endA--,g.endB--);let _=l.doc.resolveNoCache(g.start-l.from),v=l.doc.resolveNoCache(g.endB-l.from),y=u.resolve(g.start),C=_.sameParent(v)&&_.parent.inlineContent&&y.end()>=g.endA,E;if((rc&&e.input.lastIOSEnter>Date.now()-225&&(!C||s.some(O=>O.nodeName=="DIV"||O.nodeName=="P"))||!C&&_.pos<l.doc.content.size&&!_.sameParent(v)&&(E=He.findFrom(l.doc.resolve(_.pos+1),1,!0))&&E.head==v.pos)&&e.someProp("handleKeyDown",O=>O(e,eo(13,"Enter")))){e.input.lastIOSEnter=0;return}if(e.state.selection.anchor>g.start&&IX(u,g.start,g.endA,_,v)&&e.someProp("handleKeyDown",O=>O(e,eo(8,"Backspace")))){xr&&hn&&e.domObserver.suppressSelectionUpdates();return}hn&&xr&&g.endB==g.start&&(e.input.lastAndroidDelete=Date.now()),xr&&!C&&_.start()!=v.start()&&v.parentOffset==0&&_.depth==v.depth&&l.sel&&l.sel.anchor==l.sel.head&&l.sel.head==g.endA&&(g.endB-=2,v=l.doc.resolveNoCache(g.endB-l.from),setTimeout(()=>{e.someProp("handleKeyDown",function(O){return O(e,eo(13,"Enter"))})},20));let b=g.start,S=g.endA,w,x,T;if(C){if(_.pos==v.pos)Nn&&hi<=11&&_.parentOffset==0&&(e.domObserver.suppressSelectionUpdates(),setTimeout(()=>Ns(e),20)),w=e.state.tr.delete(b,S),x=u.resolve(g.start).marksAcross(u.resolve(g.endA));else if(g.endA==g.endB&&(T=MX(_.parent.content.cut(_.parentOffset,v.parentOffset),y.parent.content.cut(y.parentOffset,g.endA-y.start()))))w=e.state.tr,T.type=="add"?w.addMark(b,S,T.mark):w.removeMark(b,S,T.mark);else if(_.parent.child(_.index()).isText&&_.index()==v.index()-(v.textOffset?0:1)){let O=_.parent.textBetween(_.parentOffset,v.parentOffset);if(e.someProp("handleTextInput",A=>A(e,b,S,O)))return;w=e.state.tr.insertText(O,b,S)}}if(w||(w=e.state.tr.replace(b,S,l.doc.slice(g.start-l.from,g.endB-l.from))),l.sel){let O=Aw(e,w.doc,l.sel);O&&!(hn&&xr&&e.composing&&O.empty&&(g.start!=g.endB||e.input.lastAndroidDelete<Date.now()-100)&&(O.head==b||O.head==w.mapping.map(S)-1)||Nn&&O.empty&&O.head==b)&&w.setSelection(O)}x&&w.ensureMarks(x),i&&w.setMeta("composition",i),e.dispatch(w.scrollIntoView())}function Aw(e,t,n){return Math.max(n.anchor,n.head)>t.content.size?null:A3(e,t.resolve(n.anchor),t.resolve(n.head))}function MX(e,t){let n=e.firstChild.marks,r=t.firstChild.marks,s=n,i=r,o,a,c;for(let u=0;u<r.length;u++)s=r[u].removeFromSet(s);for(let u=0;u<n.length;u++)i=n[u].removeFromSet(i);if(s.length==1&&i.length==0)a=s[0],o="add",c=u=>u.mark(a.addToSet(u.marks));else if(s.length==0&&i.length==1)a=i[0],o="remove",c=u=>u.mark(a.removeFromSet(u.marks));else return null;let l=[];for(let u=0;u<t.childCount;u++)l.push(c(t.child(u)));if(W.from(l).eq(e))return{mark:a,type:o}}function IX(e,t,n,r,s){if(n-t<=s.pos-r.pos||o0(r,!0,!1)<s.pos)return!1;let i=e.resolve(t);if(!r.parent.isTextblock){let a=i.nodeAfter;return a!=null&&n==t+a.nodeSize}if(i.parentOffset<i.parent.content.size||!i.parent.isTextblock)return!1;let o=e.resolve(o0(i,!0,!0));return!o.parent.isTextblock||o.pos>n||o0(o,!0,!1)<n?!1:r.parent.content.cut(r.parentOffset).eq(o.parent.content)}function o0(e,t,n){let r=e.depth,s=t?e.end():e.pos;for(;r>0&&(t||e.indexAfter(r)==e.node(r).childCount);)r--,s++,t=!1;if(n){let i=e.node(r).maybeChild(e.indexAfter(r));for(;i&&!i.isLeaf;)i=i.firstChild,s++}return s}function NX(e,t,n,r,s){let i=e.findDiffStart(t,n);if(i==null)return null;let{a:o,b:a}=e.findDiffEnd(t,n+e.size,n+t.size);if(s=="end"){let c=Math.max(0,i-Math.min(o,a));r-=o+c-i}if(o<i&&e.size<t.size){let c=r<=i&&r>=o?i-r:0;i-=c,i&&i<t.size&&Mw(t.textBetween(i-1,i+1))&&(i+=c?1:-1),a=i+(a-o),o=i}else if(a<i){let c=r<=i&&r>=a?i-r:0;i-=c,i&&i<e.size&&Mw(e.textBetween(i-1,i+1))&&(i+=c?1:-1),o=i+(o-a),a=i}return{start:i,endA:o,endB:a}}function Mw(e){if(e.length!=2)return!1;let t=e.charCodeAt(0),n=e.charCodeAt(1);return t>=56320&&t<=57343&&n>=55296&&n<=56319}class RX{constructor(t,n){this._root=null,this.focused=!1,this.trackWrites=null,this.mounted=!1,this.markCursor=null,this.cursorWrapper=null,this.lastSelectedViewDesc=void 0,this.input=new QQ,this.prevDirectPlugins=[],this.pluginViews=[],this.requiresGeckoHackNode=!1,this.dragging=null,this._props=n,this.state=n.state,this.directPlugins=n.plugins||[],this.directPlugins.forEach(Dw),this.dispatch=this.dispatch.bind(this),this.dom=t&&t.mount||document.createElement("div"),t&&(t.appendChild?t.appendChild(this.dom):typeof t=="function"?t(this.dom):t.mount&&(this.mounted=!0)),this.editable=Rw(this),Nw(this),this.nodeViews=Pw(this),this.docView=dw(this.state.doc,Iw(this),i0(this),this.dom,this),this.domObserver=new SX(this,(r,s,i,o)=>AX(this,r,s,i,o)),this.domObserver.start(),XQ(this),this.updatePluginViews()}get composing(){return this.input.composing}get props(){if(this._props.state!=this.state){let t=this._props;this._props={};for(let n in t)this._props[n]=t[n];this._props.state=this.state}return this._props}update(t){t.handleDOMEvents!=this._props.handleDOMEvents&&Dv(this);let n=this._props;this._props=t,t.plugins&&(t.plugins.forEach(Dw),this.directPlugins=t.plugins),this.updateStateInner(t.state,n)}setProps(t){let n={};for(let r in this._props)n[r]=this._props[r];n.state=this.state;for(let r in t)n[r]=t[r];this.update(n)}updateState(t){this.updateStateInner(t,this._props)}updateStateInner(t,n){var r;let s=this.state,i=!1,o=!1;t.storedMarks&&this.composing&&(JA(this),o=!0),this.state=t;let a=s.plugins!=t.plugins||this._props.plugins!=n.plugins;if(a||this._props.plugins!=n.plugins||this._props.nodeViews!=n.nodeViews){let h=Pw(this);DX(h,this.nodeViews)&&(this.nodeViews=h,i=!0)}(a||n.handleDOMEvents!=this._props.handleDOMEvents)&&Dv(this),this.editable=Rw(this),Nw(this);let c=i0(this),l=Iw(this),u=s.plugins!=t.plugins&&!s.doc.eq(t.doc)?"reset":t.scrollToSelection>s.scrollToSelection?"to selection":"preserve",d=i||!this.docView.matchesNode(t.doc,l,c);(d||!t.selection.eq(s.selection))&&(o=!0);let f=u=="preserve"&&o&&this.dom.style.overflowAnchor==null&&pQ(this);if(o){this.domObserver.stop();let h=d&&(Nn||hn)&&!this.composing&&!s.selection.empty&&!t.selection.empty&&PX(s.selection,t.selection);if(d){let g=hn?this.trackWrites=this.domSelectionRange().focusNode:null;this.composing&&(this.input.compositionNode=fX(this)),(i||!this.docView.update(t.doc,l,c,this))&&(this.docView.updateOuterDeco(l),this.docView.destroy(),this.docView=dw(t.doc,l,c,this.dom,this)),g&&!this.trackWrites&&(h=!0)}h||!(this.input.mouseDown&&this.domObserver.currentSelection.eq(this.domSelectionRange())&&jQ(this))?Ns(this,h):(jA(this,t.selection),this.domObserver.setCurSelection()),this.domObserver.start()}this.updatePluginViews(s),!((r=this.dragging)===null||r===void 0)&&r.node&&!s.doc.eq(t.doc)&&this.updateDraggedNode(this.dragging,s),u=="reset"?this.dom.scrollTop=0:u=="to selection"?this.scrollToSelection():f&&mQ(f)}scrollToSelection(){let t=this.domSelectionRange().focusNode;if(!this.someProp("handleScrollToSelection",n=>n(this)))if(this.state.selection instanceof Oe){let n=this.docView.domAfterPos(this.state.selection.from);n.nodeType==1&&iw(this,n.getBoundingClientRect(),t)}else iw(this,this.coordsAtPos(this.state.selection.head,1),t)}destroyPluginViews(){let t;for(;t=this.pluginViews.pop();)t.destroy&&t.destroy()}updatePluginViews(t){if(!t||t.plugins!=this.state.plugins||this.directPlugins!=this.prevDirectPlugins){this.prevDirectPlugins=this.directPlugins,this.destroyPluginViews();for(let n=0;n<this.directPlugins.length;n++){let r=this.directPlugins[n];r.spec.view&&this.pluginViews.push(r.spec.view(this))}for(let n=0;n<this.state.plugins.length;n++){let r=this.state.plugins[n];r.spec.view&&this.pluginViews.push(r.spec.view(this))}}else for(let n=0;n<this.pluginViews.length;n++){let r=this.pluginViews[n];r.update&&r.update(this,t)}}updateDraggedNode(t,n){let r=t.node,s=-1;if(this.state.doc.nodeAt(r.from)==r.node)s=r.from;else{let i=r.from+(this.state.doc.content.size-n.doc.content.size);(i>0&&this.state.doc.nodeAt(i))==r.node&&(s=i)}this.dragging=new XA(t.slice,t.move,s<0?void 0:Oe.create(this.state.doc,s))}someProp(t,n){let r=this._props&&this._props[t],s;if(r!=null&&(s=n?n(r):r))return s;for(let o=0;o<this.directPlugins.length;o++){let a=this.directPlugins[o].props[t];if(a!=null&&(s=n?n(a):a))return s}let i=this.state.plugins;if(i)for(let o=0;o<i.length;o++){let a=i[o].props[t];if(a!=null&&(s=n?n(a):a))return s}}hasFocus(){if(Nn){let t=this.root.activeElement;if(t==this.dom)return!0;if(!t||!this.dom.contains(t))return!1;for(;t&&this.dom!=t&&this.dom.contains(t);){if(t.contentEditable=="false")return!1;t=t.parentElement}return!0}return this.root.activeElement==this.dom}focus(){this.domObserver.stop(),this.editable&&gQ(this.dom),Ns(this),this.domObserver.start()}get root(){let t=this._root;if(t==null){for(let n=this.dom.parentNode;n;n=n.parentNode)if(n.nodeType==9||n.nodeType==11&&n.host)return n.getSelection||(Object.getPrototypeOf(n).getSelection=()=>n.ownerDocument.getSelection()),this._root=n}return t||document}updateRoot(){this._root=null}posAtCoords(t){return bQ(this,t)}coordsAtPos(t,n=1){return MA(this,t,n)}domAtPos(t,n=0){return this.docView.domFromPos(t,n)}nodeDOM(t){let n=this.docView.descAt(t);return n?n.nodeDOM:null}posAtDOM(t,n,r=-1){let s=this.docView.posFromDOM(t,n,r);if(s==null)throw new RangeError("DOM position not inside the editor");return s}endOfTextblock(t,n){return TQ(this,n||this.state,t)}pasteHTML(t,n){return Rl(this,"",t,!1,n||new ClipboardEvent("paste"))}pasteText(t,n){return Rl(this,t,null,!0,n||new ClipboardEvent("paste"))}destroy(){this.docView&&(eX(this),this.destroyPluginViews(),this.mounted?(this.docView.update(this.state.doc,[],i0(this),this),this.dom.textContent=""):this.dom.parentNode&&this.dom.parentNode.removeChild(this.dom),this.docView.destroy(),this.docView=null,rQ())}get isDestroyed(){return this.docView==null}dispatchEvent(t){return nX(this,t)}dispatch(t){let n=this._props.dispatchTransaction;n?n.call(this,t):this.updateState(this.state.apply(t))}domSelectionRange(){let t=this.domSelection();return wn&&this.root.nodeType===11&&cQ(this.dom.ownerDocument)==this.dom&&EX(this,t)||t}domSelection(){return this.root.getSelection()}}function Iw(e){let t=Object.create(null);return t.class="ProseMirror",t.contenteditable=String(e.editable),e.someProp("attributes",n=>{if(typeof n=="function"&&(n=n(e.state)),n)for(let r in n)r=="class"?t.class+=" "+n[r]:r=="style"?t.style=(t.style?t.style+";":"")+n[r]:!t[r]&&r!="contenteditable"&&r!="nodeName"&&(t[r]=String(n[r]))}),t.translate||(t.translate="no"),[In.node(0,e.state.doc.content.size,t)]}function Nw(e){if(e.markCursor){let t=document.createElement("img");t.className="ProseMirror-separator",t.setAttribute("mark-placeholder","true"),t.setAttribute("alt",""),e.cursorWrapper={dom:t,deco:In.widget(e.state.selection.head,t,{raw:!0,marks:e.markCursor})}}else e.cursorWrapper=null}function Rw(e){return!e.someProp("editable",t=>t(e.state)===!1)}function PX(e,t){let n=Math.min(e.$anchor.sharedDepth(e.head),t.$anchor.sharedDepth(t.head));return e.$anchor.start(n)!=t.$anchor.start(n)}function Pw(e){let t=Object.create(null);function n(r){for(let s in r)Object.prototype.hasOwnProperty.call(t,s)||(t[s]=r[s])}return e.someProp("nodeViews",n),e.someProp("markViews",n),t}function DX(e,t){let n=0,r=0;for(let s in e){if(e[s]!=t[s])return!0;n++}for(let s in t)r++;return n!=r}function Dw(e){if(e.spec.state||e.spec.filterTransaction||e.spec.appendTransaction)throw new RangeError("Plugins passed directly to the view must not have a state component")}const LX=e=>e?{enabled:!!wA(e)?.softmentionEnabled}:{enabled:!1};function FX(){return{trackingKeywordsRegex:void 0,decorations:mt.empty,highlightedKeywords:new Set,matchedKeywords:new Set}}const sM=({tr:e,regex:t,prevHighlightedKeywords:n,prevMatchedKeywords:r})=>{const s=[],i=new Set,o=new Set;return t?(e.doc.descendants((a,c)=>{if(!a.isText||!a.text)return;const l=a.text;for(const u of l.matchAll(t)){if(i.add(u[1]),!n.has(u[1])&&r.has(u[1]))continue;o.add(u[1]);const d=c+u.index,f=d+u[0].length;s.push(In.inline(d,f,{class:"hint-pill"},{keyword:u[1]}))}}),{decorations:mt.create(e.doc,s),matchedKeywords:i,highlightedKeywords:o}):{decorations:mt.empty,matchedKeywords:i,highlightedKeywords:o}},jX=(e,t)=>{const{state:n,dispatch:r}=t,s=n.tr,i=gi.getState(n);if(i){const o=e.length>0?new RegExp(`\\b(${e.join("|")})\\b`,"gi"):void 0,{decorations:a,highlightedKeywords:c,matchedKeywords:l}=sM({tr:s,regex:o,prevHighlightedKeywords:i.highlightedKeywords,prevMatchedKeywords:i.matchedKeywords});s.setMeta(gi,{...i,trackingKeywordsRegex:o,decorations:a,highlightedKeywords:c,matchedKeywords:l})}r(s)},UX=(e,t)=>{if(e.length===0)return;const{state:n,dispatch:r}=t,s=n.tr,i=gi.getState(n);if(i){const o=i.decorations.remove(i.decorations.find(void 0,void 0,a=>a.keyword&&e.includes(a.keyword)));s.setMeta(gi,{...i,decorations:o,highlightedKeywords:new Set([...i.highlightedKeywords].filter(a=>!e.includes(a)))})}r(s)},gi=new Vs("keywordPlugin");function BX(){return new _s({key:gi,state:{init(){return FX()},apply(e,t){if(e.getMeta(gi))return{...t,...e.getMeta(gi)};if(!e.docChanged)return t;const{decorations:n,matchedKeywords:r,highlightedKeywords:s}=sM({tr:e,regex:t.trackingKeywordsRegex,prevHighlightedKeywords:t.highlightedKeywords,prevMatchedKeywords:t.matchedKeywords});return{...t,decorations:n,highlightedKeywords:s,matchedKeywords:r}}},props:{decorations(e){const t=this.getState(e);return t?t.decorations:mt.empty}}})}const so=new Vs("menuSelectorPlugin");function Lw(e){e.dispatch(e.state.tr.setMeta(so,{active:!1,onMenuAction:void 0}))}function Q_e(e,t){e.dispatch(e.state.tr.setMeta(so,{active:!0,onMenuAction:t}))}function qX(e={submitKeys:["Enter","Tab"],cancelKeys:["Escape"],checkStrictMatchKeys:[" "]}){return new _s({key:so,state:{init(){return{...e,active:!1}},apply(t,n){const r=t.getMeta(so);return r?{...n,...r}:n}},props:{handleKeyDown(t,n){const r=so.getState(t.state);if(!r.active)return!1;if(!n.isComposing)return r.submitKeys.includes(n.key)?(n.preventDefault(),n.stopPropagation(),n.stopImmediatePropagation(),Lw(t),r.onMenuAction?.("submit")??!0):r.cancelKeys.includes(n.key)?(n.preventDefault(),r.onMenuAction?.("cancel"),Lw(t),!0):n.key==="ArrowUp"?(n.preventDefault(),r.onMenuAction?.("up"),!0):n.key==="ArrowDown"?(n.preventDefault(),r.onMenuAction?.("down"),!0):r.checkStrictMatchKeys.includes(n.key)&&r.onMenuAction?.("checkMatch")?(n.preventDefault(),!0):!1},handleDOMEvents:{blur:t=>{so.getState(t.state).onMenuAction?.("cancel")}}}})}const Wc=new Vs("placeholderPlugin");function GX(e){return new _s({key:Wc,state:{init(){return{placeholder:e}},apply(t,n){return t.getMeta(Wc)?{placeholder:t.getMeta(Wc).placeholder}:n}},props:{decorations(t){const{doc:n}=t;if(n.childCount===1&&n.firstChild?.isTextblock&&n.firstChild.content.size===0){const s=[],{placeholder:i}=Wc.getState(t);return t.doc.descendants((o,a)=>{const c=In.node(a,a+o.nodeSize,{class:"placeholder","data-placeholder":i});s.push(c)}),mt.create(n,s)}}}})}const HX={isFocused:!1,autocompletions:[],controlsDisabled:!1,waveWidth:300,rateLimitBannerFeature:null,isExpanded:!0};class iM{eraseContent(){this.setText("")}getContentToSend(){return{content:this.getCurrentText()}}setIsExpanded(t){this.store.setState({isExpanded:t})}getComposerFocusTrackingRootProps(){return{}}registerKeyHandlers(t){}canShowAutocompletion(){return!0}setAutocompletions(t){this.store.setState({autocompletions:t})}setControlsDisabled(t){this.store.setState({controlsDisabled:t})}setWaveWidth(t){this.store.setState({waveWidth:t})}setWaveformData=t=>{this.store.setState({waveformData:t})};setRateLimitBannerFeature=t=>{this.store.setState({rateLimitBannerFeature:t})};onAutocompleteSelect=(t,n,r)=>{n.forEach(s=>{s.id===t.id&&(s.userInput=this.getCurrentText())}),this.store.setState({autocompletions:[n[r]]})};logPageMount(){R.addFirstTiming("chatgpt.web.chatPage.prompttextarea.modern.mounted")}useState(t){return m.useSyncExternalStore(n=>this.subscribe("input",n),()=>t(this),()=>t(this))}}class oM extends iM{constructor(t,n){super(),this.view=t,this.storeOverrides=n,this._store=qr(()=>({isFocused:!1,autocompletions:[],waveWidth:300,rateLimitBannerFeature:null,isExpanded:!0,...n})),this.subscribe("focus",()=>this._store.setState({isFocused:!0})),this.subscribe("blur",()=>this._store.setState({isFocused:!1}))}fileInputHandle=null;_store;get store(){return this._store}_usedDictation=!1;_dictationEdited=!1;_dictationAssetPointer=null;_dictationAssetTTL=null;get usedDictation(){return this._usedDictation}set usedDictation(t){this._usedDictation=t}get dictationEdited(){return this._dictationEdited}set dictationEdited(t){this._dictationEdited=t}get dictationAssetPointer(){return this._dictationAssetPointer}set dictationAssetPointer(t){this._dictationAssetPointer=t}get dictationAssetTTL(){return this._dictationAssetTTL}set dictationAssetTTL(t){this._dictationAssetTTL=t}get element(){return this.view.dom}get document(){return this.view.dom.ownerDocument}isEmpty(){const t=this.view.state.doc;if(t.childCount===0)return!0;if(t.childCount===1&&t.firstChild?.isTextblock){const n=t.firstChild.content;if(n.size===0)return!0;if(n.childCount===1&&n.firstChild?.isText)return/^\s*$/.test(n.firstChild.text??"")}return!1}isEmpty$=F_("composer-empty",t=>this.subscribe("change",t),()=>this.isEmpty());isFocused(){return this.view.hasFocus()}isFocused$=F_("composer-focused",t=>{const n=this.subscribe("focus",t),r=this.subscribe("blur",t);return()=>{r(),n()}},()=>this.isFocused());containsFocus$=Ly(()=>this.composerFocusDepth$()>0);composerFocusDepth$=nt(0);lastFocusedDestructor;onComposerRootFocus=t=>{this.lastFocusedDestructor?.(),this.composerFocusDepth$.set(i=>i+1);const n=()=>{this.lastFocusedDestructor?.(),setTimeout(()=>{this.composerFocusDepth$.set(i=>i-1)},120)},r=t.target;r.addEventListener("blur",n);const s=new MutationObserver(()=>{document.documentElement.contains(r)||n()});s.observe(document.documentElement,{childList:!0,subtree:!0}),this.lastFocusedDestructor=()=>{r.removeEventListener("blur",n),s.disconnect(),this.lastFocusedDestructor=void 0}};getComposerFocusTrackingRootProps(){return{onFocusCapture:this.onComposerRootFocus}}trimLeadingText(t){const r=this.view.state.tr;let s=0;return r.doc.descendants((i,o)=>{if(i.isText&&i.text){if(typeof t=="string"&&i.text.startsWith(t))s=t.length;else if(t instanceof RegExp){const a=i.text.match(t);a?.index===0&&(s=a[0].length)}if(s){const a=i.text.substring(s).trimStart();s=i.text.length-a.length,r.delete(o,o+s)}}return!i.isLeaf}),s>0?(this.view.dispatch(r),!0):!1}replaceAll(t,n){const s=this.view.state.tr,i=[];s.doc.descendants((o,a)=>{!o.isText||o.text===void 0||i.push({node:o,pos:a})}),i.reverse(),i.forEach(({node:o,pos:a})=>{!o.isText||o.text===void 0||o.text.includes(t)&&s.insertText(o.text.replaceAll(t,n),a,a+o.text.length)}),this.view.dispatch(s)}appendText(t){vA(this.view,t,!1,!1)}prependParagraph(t){this.view.dispatch(this.view.state.tr.setSelection(Ve.create(this.view.state.doc,0))),b3(this.view.state,this.view.dispatch),this.view.dispatch(this.view.state.tr.insertText(t,0))}delete(t,n){this.view.dispatch(this.view.state.tr.delete(t,n))}focus(){this.view.hasFocus()||(this.view.focus(),this.view.dispatch(this.view.state.tr.setSelection(Ve.atEnd(this.view.state.doc)).scrollIntoView()))}setText(t){const{tr:n,schema:r}=this.view.state,s=t?r.nodes.paragraph.create(null,r.text(t)):r.nodes.paragraph.create();this.view.dispatch(n.replaceWith(0,this.view.state.doc.content.size,s)),this.view.hasFocus()&&this.view.dispatch(this.view.state.tr.setSelection(Ve.atEnd(this.view.state.doc)))}getContentLength(){return this.view.state.doc.content.size}getCurrentText(){return this.view.state.doc.textContent}hasMultipleLines(){let t=0;return this.view.state.doc.descendants(n=>{n.isBlock&&t++}),t>1}getContentToSend(){return kJ(this.view)}resize(){}isReady(){return!!this.view.state.doc}setPlaceholder(t){this.view.dispatch(this.view.state.tr.setMeta(Wc,{placeholder:t}))}getSelectionStart(){return this.view.state.selection.ranges[0].$from.pos}setSelection(t,n){this.view.dispatch(this.view.state.tr.setSelection(Ve.create(this.view.state.doc,t,n))),this.view.focus()}isMenuSelectorActive(){return so.getState(this.view.state).active}registerKeyHandlers(t){dJ(this.view,t)}registerFileInput(t){this.fileInputHandle=t}openFileDialog(){this.fileInputHandle?.openFileDialog()}subscribe(t,n){if(t==="change"){const r=()=>{this.usedDictation&&(this._dictationEdited=!0),n(void 0)};return bS(this.view,r)}return this.view.dom?.addEventListener(t,n,{capture:!0}),()=>{this.view.dom?.removeEventListener(t,n,{capture:!0})}}useState(t){return m.useSyncExternalStore(n=>bS(this.view,n),()=>t(this),()=>t(this))}getKeywords(){return[...gi.getState(this.view.state)?.matchedKeywords??[]]}removeKeywordDecorations(t){t.length!==0&&UX(t,this.view)}resetTrackingKeywords(t){jX(t,this.view)}canShowAutocompletion(){return!this.isMenuSelectorActive()}}class X_e extends iM{constructor(t){super(),this.storeOverrides=t,this._store=qr(()=>({...HX,...t}))}setValue(){}_store;get store(){return this._store}_usedDictation=!1;_dictationEdited=!1;_dictationAssetPointer=null;_dictationAssetTTL=null;get usedDictation(){return this._usedDictation}set usedDictation(t){this._usedDictation=t}get dictationEdited(){return this._dictationEdited}set dictationEdited(t){this._dictationEdited=t}get dictationAssetPointer(){return this._dictationAssetPointer}set dictationAssetPointer(t){this._dictationAssetPointer=t}get dictationAssetTTL(){return this._dictationAssetTTL}set dictationAssetTTL(t){this._dictationAssetTTL=t}get element(){return null}get document(){}getKeywords(){return[]}removeKeywordDecorations(t){}resetTrackingKeywords(t){}isFocused(){return!1}isFocused$=xp(!1);containsFocus$=xp(!1);isEmpty(){return!0}isEmpty$=xp(!0);trimLeadingText(){return!1}registerFileInput(t){}openFileDialog(){}replaceAll(){}appendText(){}prependParagraph(){}delete(){}focus(){}setText(){}setPlaceholder(){}getContentLength(){return 0}getCurrentText(){return""}hasMultipleLines(){return!1}resize(){}isReady(){return!1}getSelectionStart(){return 0}subscribe(){return()=>{}}}const aM={shift:!1,ctrl:!1,meta:!1},Lv=vt(()=>aM),VX=Lv.getState;function zX(e,t){if(!e||!Nt(e))return!1;const r=$f(e,"4147197039").get("paste_threshold",0),s=r>0;return t===void 0||!s?s:VX().shift||t.length>=r}async function eve(e){const t=await $(()=>import("./mnzj7q6918q8g1iw.js"),__vite__mapDeps([7,1,8]));await new Promise(r=>setTimeout(r,0));const n=t.getFileTypeGuess(e);return await new Promise(r=>setTimeout(r,0)),n}var Ti={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},Ef={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},$X=typeof navigator<"u"&&/Mac/.test(navigator.platform),WX=typeof navigator<"u"&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent);for(var tn=0;tn<10;tn++)Ti[48+tn]=Ti[96+tn]=String(tn);for(var tn=1;tn<=24;tn++)Ti[tn+111]="F"+tn;for(var tn=65;tn<=90;tn++)Ti[tn]=String.fromCharCode(tn+32),Ef[tn]=String.fromCharCode(tn);for(var a0 in Ti)Ef.hasOwnProperty(a0)||(Ef[a0]=Ti[a0]);function KX(e){var t=$X&&e.metaKey&&e.shiftKey&&!e.ctrlKey&&!e.altKey||WX&&e.shiftKey&&e.key&&e.key.length==1||e.key=="Unidentified",n=!t&&e.key||(e.shiftKey?Ef:Ti)[e.keyCode]||e.key||"Unidentified";return n=="Esc"&&(n="Escape"),n=="Del"&&(n="Delete"),n=="Left"&&(n="ArrowLeft"),n=="Up"&&(n="ArrowUp"),n=="Right"&&(n="ArrowRight"),n=="Down"&&(n="ArrowDown"),n}const YX=typeof navigator<"u"?/Mac|iP(hone|[oa]d)/.test(navigator.platform):!1;function ZX(e){let t=e.split(/-(?!$)/),n=t[t.length-1];n=="Space"&&(n=" ");let r,s,i,o;for(let a=0;a<t.length-1;a++){let c=t[a];if(/^(cmd|meta|m)$/i.test(c))o=!0;else if(/^a(lt)?$/i.test(c))r=!0;else if(/^(c|ctrl|control)$/i.test(c))s=!0;else if(/^s(hift)?$/i.test(c))i=!0;else if(/^mod$/i.test(c))YX?o=!0:s=!0;else throw new Error("Unrecognized modifier name: "+c)}return r&&(n="Alt-"+n),s&&(n="Ctrl-"+n),o&&(n="Meta-"+n),i&&(n="Shift-"+n),n}function JX(e){let t=Object.create(null);for(let n in e)t[ZX(n)]=e[n];return t}function c0(e,t,n=!0){return t.altKey&&(e="Alt-"+e),t.ctrlKey&&(e="Ctrl-"+e),t.metaKey&&(e="Meta-"+e),n&&t.shiftKey&&(e="Shift-"+e),e}function QX(e){return new _s({props:{handleKeyDown:cM(e)}})}function cM(e){let t=JX(e);return function(n,r){let s=KX(r),i,o=t[c0(s,r)];if(o&&o(n.state,n.dispatch,n))return!0;if(s.length==1&&s!=" "){if(r.shiftKey){let a=t[c0(s,r,!1)];if(a&&a(n.state,n.dispatch,n))return!0}if((r.shiftKey||r.altKey||r.metaKey||s.charCodeAt(0)>127)&&(i=Ti[r.keyCode])&&i!=s){let a=t[c0(i,r)];if(a&&a(n.state,n.dispatch,n))return!0}}return!1}}class bt extends He{constructor(t){super(t,t)}map(t,n){let r=t.resolve(n.map(this.head));return bt.valid(r)?new bt(r):He.near(r)}content(){return Q.empty}eq(t){return t instanceof bt&&t.head==this.head}toJSON(){return{type:"gapcursor",pos:this.head}}static fromJSON(t,n){if(typeof n.pos!="number")throw new RangeError("Invalid input for GapCursor.fromJSON");return new bt(t.resolve(n.pos))}getBookmark(){return new D3(this.anchor)}static valid(t){let n=t.parent;if(n.isTextblock||!XX(t)||!eee(t))return!1;let r=n.type.spec.allowGapCursor;if(r!=null)return r;let s=n.contentMatchAt(t.index()).defaultType;return s&&s.isTextblock}static findGapCursorFrom(t,n,r=!1){e:for(;;){if(!r&&bt.valid(t))return t;let s=t.pos,i=null;for(let o=t.depth;;o--){let a=t.node(o);if(n>0?t.indexAfter(o)<a.childCount:t.index(o)>0){i=a.child(n>0?t.indexAfter(o):t.index(o)-1);break}else if(o==0)return null;s+=n;let c=t.doc.resolve(s);if(bt.valid(c))return c}for(;;){let o=n>0?i.firstChild:i.lastChild;if(!o){if(i.isAtom&&!i.isText&&!Oe.isSelectable(i)){t=t.doc.resolve(s+i.nodeSize*n),r=!1;continue e}break}i=o,s+=n;let a=t.doc.resolve(s);if(bt.valid(a))return a}return null}}}bt.prototype.visible=!1;bt.findFrom=bt.findGapCursorFrom;He.jsonID("gapcursor",bt);class D3{constructor(t){this.pos=t}map(t){return new D3(t.map(this.pos))}resolve(t){let n=t.resolve(this.pos);return bt.valid(n)?new bt(n):He.near(n)}}function XX(e){for(let t=e.depth;t>=0;t--){let n=e.index(t),r=e.node(t);if(n==0){if(r.type.spec.isolating)return!0;continue}for(let s=r.child(n-1);;s=s.lastChild){if(s.childCount==0&&!s.inlineContent||s.isAtom||s.type.spec.isolating)return!0;if(s.inlineContent)return!1}}return!0}function eee(e){for(let t=e.depth;t>=0;t--){let n=e.indexAfter(t),r=e.node(t);if(n==r.childCount){if(r.type.spec.isolating)return!0;continue}for(let s=r.child(n);;s=s.firstChild){if(s.childCount==0&&!s.inlineContent||s.isAtom||s.type.spec.isolating)return!0;if(s.inlineContent)return!1}}return!0}function tee(){return new _s({props:{decorations:iee,createSelectionBetween(e,t,n){return t.pos==n.pos&&bt.valid(n)?new bt(n):null},handleClick:ree,handleKeyDown:nee,handleDOMEvents:{beforeinput:see}}})}const nee=cM({ArrowLeft:Zu("horiz",-1),ArrowRight:Zu("horiz",1),ArrowUp:Zu("vert",-1),ArrowDown:Zu("vert",1)});function Zu(e,t){const n=e=="vert"?t>0?"down":"up":t>0?"right":"left";return function(r,s,i){let o=r.selection,a=t>0?o.$to:o.$from,c=o.empty;if(o instanceof Ve){if(!i.endOfTextblock(n)||a.depth==0)return!1;c=!1,a=r.doc.resolve(t>0?a.after():a.before())}let l=bt.findGapCursorFrom(a,t,c);return l?(s&&s(r.tr.setSelection(new bt(l))),!0):!1}}function ree(e,t,n){if(!e||!e.editable)return!1;let r=e.state.doc.resolve(t);if(!bt.valid(r))return!1;let s=e.posAtCoords({left:n.clientX,top:n.clientY});return s&&s.inside>-1&&Oe.isSelectable(e.state.doc.nodeAt(s.inside))?!1:(e.dispatch(e.state.tr.setSelection(new bt(r))),!0)}function see(e,t){if(t.inputType!="insertCompositionText"||!(e.state.selection instanceof bt))return!1;let{$from:n}=e.state.selection,r=n.parent.contentMatchAt(n.index()).findWrapping(e.state.schema.nodes.text);if(!r)return!1;let s=W.empty;for(let o=r.length-1;o>=0;o--)s=W.from(r[o].createAndFill(null,s));let i=e.state.tr.replace(n.pos,n.pos,new Q(s,0,0));return i.setSelection(Ve.near(i.doc.resolve(n.pos+1))),e.dispatch(i),!1}function iee(e){if(!(e.selection instanceof bt))return null;let t=document.createElement("div");return t.className="ProseMirror-gapcursor",mt.create(e.doc,[In.widget(e.selection.head,t,{key:"gapcursor"})])}var xf=200,Vt=function(){};Vt.prototype.append=function(t){return t.length?(t=Vt.from(t),!this.length&&t||t.length<xf&&this.leafAppend(t)||this.length<xf&&t.leafPrepend(this)||this.appendInner(t)):this};Vt.prototype.prepend=function(t){return t.length?Vt.from(t).append(this):this};Vt.prototype.appendInner=function(t){return new oee(this,t)};Vt.prototype.slice=function(t,n){return t===void 0&&(t=0),n===void 0&&(n=this.length),t>=n?Vt.empty:this.sliceInner(Math.max(0,t),Math.min(this.length,n))};Vt.prototype.get=function(t){if(!(t<0||t>=this.length))return this.getInner(t)};Vt.prototype.forEach=function(t,n,r){n===void 0&&(n=0),r===void 0&&(r=this.length),n<=r?this.forEachInner(t,n,r,0):this.forEachInvertedInner(t,n,r,0)};Vt.prototype.map=function(t,n,r){n===void 0&&(n=0),r===void 0&&(r=this.length);var s=[];return this.forEach(function(i,o){return s.push(t(i,o))},n,r),s};Vt.from=function(t){return t instanceof Vt?t:t&&t.length?new lM(t):Vt.empty};var lM=function(e){function t(r){e.call(this),this.values=r}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={length:{configurable:!0},depth:{configurable:!0}};return t.prototype.flatten=function(){return this.values},t.prototype.sliceInner=function(s,i){return s==0&&i==this.length?this:new t(this.values.slice(s,i))},t.prototype.getInner=function(s){return this.values[s]},t.prototype.forEachInner=function(s,i,o,a){for(var c=i;c<o;c++)if(s(this.values[c],a+c)===!1)return!1},t.prototype.forEachInvertedInner=function(s,i,o,a){for(var c=i-1;c>=o;c--)if(s(this.values[c],a+c)===!1)return!1},t.prototype.leafAppend=function(s){if(this.length+s.length<=xf)return new t(this.values.concat(s.flatten()))},t.prototype.leafPrepend=function(s){if(this.length+s.length<=xf)return new t(s.flatten().concat(this.values))},n.length.get=function(){return this.values.length},n.depth.get=function(){return 0},Object.defineProperties(t.prototype,n),t}(Vt);Vt.empty=new lM([]);var oee=function(e){function t(n,r){e.call(this),this.left=n,this.right=r,this.length=n.length+r.length,this.depth=Math.max(n.depth,r.depth)+1}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.flatten=function(){return this.left.flatten().concat(this.right.flatten())},t.prototype.getInner=function(r){return r<this.left.length?this.left.get(r):this.right.get(r-this.left.length)},t.prototype.forEachInner=function(r,s,i,o){var a=this.left.length;if(s<a&&this.left.forEachInner(r,s,Math.min(i,a),o)===!1||i>a&&this.right.forEachInner(r,Math.max(s-a,0),Math.min(this.length,i)-a,o+a)===!1)return!1},t.prototype.forEachInvertedInner=function(r,s,i,o){var a=this.left.length;if(s>a&&this.right.forEachInvertedInner(r,s-a,Math.max(i,a)-a,o+a)===!1||i<a&&this.left.forEachInvertedInner(r,Math.min(s,a),i,o)===!1)return!1},t.prototype.sliceInner=function(r,s){if(r==0&&s==this.length)return this;var i=this.left.length;return s<=i?this.left.slice(r,s):r>=i?this.right.slice(r-i,s-i):this.left.slice(r,i).append(this.right.slice(0,s-i))},t.prototype.leafAppend=function(r){var s=this.right.leafAppend(r);if(s)return new t(this.left,s)},t.prototype.leafPrepend=function(r){var s=this.left.leafPrepend(r);if(s)return new t(s,this.right)},t.prototype.appendInner=function(r){return this.left.depth>=Math.max(this.right.depth,r.depth)+1?new t(this.left,new t(this.right,r)):new t(this,r)},t}(Vt);const aee=500;class kr{constructor(t,n){this.items=t,this.eventCount=n}popEvent(t,n){if(this.eventCount==0)return null;let r=this.items.length;for(;;r--)if(this.items.get(r-1).selection){--r;break}let s,i;n&&(s=this.remapping(r,this.items.length),i=s.maps.length);let o=t.tr,a,c,l=[],u=[];return this.items.forEach((d,f)=>{if(!d.step){s||(s=this.remapping(r,f+1),i=s.maps.length),i--,u.push(d);return}if(s){u.push(new Qr(d.map));let h=d.step.map(s.slice(i)),g;h&&o.maybeStep(h).doc&&(g=o.mapping.maps[o.mapping.maps.length-1],l.push(new Qr(g,void 0,void 0,l.length+u.length))),i--,g&&s.appendMap(g,i)}else o.maybeStep(d.step);if(d.selection)return a=s?d.selection.map(s.slice(i)):d.selection,c=new kr(this.items.slice(0,r).append(u.reverse().concat(l)),this.eventCount-1),!1},this.items.length,0),{remaining:c,transform:o,selection:a}}addTransform(t,n,r,s){let i=[],o=this.eventCount,a=this.items,c=!s&&a.length?a.get(a.length-1):null;for(let u=0;u<t.steps.length;u++){let d=t.steps[u].invert(t.docs[u]),f=new Qr(t.mapping.maps[u],d,n),h;(h=c&&c.merge(f))&&(f=h,u?i.pop():a=a.slice(0,a.length-1)),i.push(f),n&&(o++,n=void 0),s||(c=f)}let l=o-r.depth;return l>lee&&(a=cee(a,l),o-=l),new kr(a.append(i),o)}remapping(t,n){let r=new Ia;return this.items.forEach((s,i)=>{let o=s.mirrorOffset!=null&&i-s.mirrorOffset>=t?r.maps.length-s.mirrorOffset:void 0;r.appendMap(s.map,o)},t,n),r}addMaps(t){return this.eventCount==0?this:new kr(this.items.append(t.map(n=>new Qr(n))),this.eventCount)}rebased(t,n){if(!this.eventCount)return this;let r=[],s=Math.max(0,this.items.length-n),i=t.mapping,o=t.steps.length,a=this.eventCount;this.items.forEach(f=>{f.selection&&a--},s);let c=n;this.items.forEach(f=>{let h=i.getMirror(--c);if(h==null)return;o=Math.min(o,h);let g=i.maps[h];if(f.step){let _=t.steps[h].invert(t.docs[h]),v=f.selection&&f.selection.map(i.slice(c+1,h));v&&a++,r.push(new Qr(g,_,v))}else r.push(new Qr(g))},s);let l=[];for(let f=n;f<o;f++)l.push(new Qr(i.maps[f]));let u=this.items.slice(0,s).append(l).append(r),d=new kr(u,a);return d.emptyItemCount()>aee&&(d=d.compress(this.items.length-r.length)),d}emptyItemCount(){let t=0;return this.items.forEach(n=>{n.step||t++}),t}compress(t=this.items.length){let n=this.remapping(0,t),r=n.maps.length,s=[],i=0;return this.items.forEach((o,a)=>{if(a>=t)s.push(o),o.selection&&i++;else if(o.step){let c=o.step.map(n.slice(r)),l=c&&c.getMap();if(r--,l&&n.appendMap(l,r),c){let u=o.selection&&o.selection.map(n.slice(r));u&&i++;let d=new Qr(l.invert(),c,u),f,h=s.length-1;(f=s.length&&s[h].merge(d))?s[h]=f:s.push(d)}}else o.map&&r--},this.items.length,0),new kr(Vt.from(s.reverse()),i)}}kr.empty=new kr(Vt.empty,0);function cee(e,t){let n;return e.forEach((r,s)=>{if(r.selection&&t--==0)return n=s,!1}),e.slice(n)}class Qr{constructor(t,n,r,s){this.map=t,this.step=n,this.selection=r,this.mirrorOffset=s}merge(t){if(this.step&&t.step&&!t.selection){let n=t.step.merge(this.step);if(n)return new Qr(n.getMap().invert(),n,this.selection)}}}class Xs{constructor(t,n,r,s,i){this.done=t,this.undone=n,this.prevRanges=r,this.prevTime=s,this.prevComposition=i}}const lee=20;function uee(e,t,n,r){let s=n.getMeta(ho),i;if(s)return s.historyState;n.getMeta(hee)&&(e=new Xs(e.done,e.undone,null,0,-1));let o=n.getMeta("appendedTransaction");if(n.steps.length==0)return e;if(o&&o.getMeta(ho))return o.getMeta(ho).redo?new Xs(e.done.addTransform(n,void 0,r,Od(t)),e.undone,Fw(n.mapping.maps),e.prevTime,e.prevComposition):new Xs(e.done,e.undone.addTransform(n,void 0,r,Od(t)),null,e.prevTime,e.prevComposition);if(n.getMeta("addToHistory")!==!1&&!(o&&o.getMeta("addToHistory")===!1)){let a=n.getMeta("composition"),c=e.prevTime==0||!o&&e.prevComposition!=a&&(e.prevTime<(n.time||0)-r.newGroupDelay||!dee(n,e.prevRanges)),l=o?l0(e.prevRanges,n.mapping):Fw(n.mapping.maps);return new Xs(e.done.addTransform(n,c?t.selection.getBookmark():void 0,r,Od(t)),kr.empty,l,n.time,a??e.prevComposition)}else return(i=n.getMeta("rebased"))?new Xs(e.done.rebased(n,i),e.undone.rebased(n,i),l0(e.prevRanges,n.mapping),e.prevTime,e.prevComposition):new Xs(e.done.addMaps(n.mapping.maps),e.undone.addMaps(n.mapping.maps),l0(e.prevRanges,n.mapping),e.prevTime,e.prevComposition)}function dee(e,t){if(!t)return!1;if(!e.docChanged)return!0;let n=!1;return e.mapping.maps[0].forEach((r,s)=>{for(let i=0;i<t.length;i+=2)r<=t[i+1]&&s>=t[i]&&(n=!0)}),n}function Fw(e){let t=[];for(let n=e.length-1;n>=0&&t.length==0;n--)e[n].forEach((r,s,i,o)=>t.push(i,o));return t}function l0(e,t){if(!e)return null;let n=[];for(let r=0;r<e.length;r+=2){let s=t.map(e[r],1),i=t.map(e[r+1],-1);s<=i&&n.push(s,i)}return n}function fee(e,t,n){let r=Od(t),s=ho.get(t).spec.config,i=(n?e.undone:e.done).popEvent(t,r);if(!i)return null;let o=i.selection.resolve(i.transform.doc),a=(n?e.done:e.undone).addTransform(i.transform,t.selection.getBookmark(),s,r),c=new Xs(n?a:i.remaining,n?i.remaining:a,null,0,-1);return i.transform.setSelection(o).setMeta(ho,{redo:n,historyState:c})}let u0=!1,jw=null;function Od(e){let t=e.plugins;if(jw!=t){u0=!1,jw=t;for(let n=0;n<t.length;n++)if(t[n].spec.historyPreserveItems){u0=!0;break}}return u0}const ho=new Vs("history"),hee=new Vs("closeHistory");function pee(e={}){return e={depth:e.depth||100,newGroupDelay:e.newGroupDelay||500},new _s({key:ho,state:{init(){return new Xs(kr.empty,kr.empty,null,0,-1)},apply(t,n,r){return uee(n,r,t,e)}},config:e,props:{handleDOMEvents:{beforeinput(t,n){let r=n.inputType,s=r=="historyUndo"?dM:r=="historyRedo"?Fv:null;return s?(n.preventDefault(),s(t.state,t.dispatch)):!1}}}})}function uM(e,t){return(n,r)=>{let s=ho.getState(n);if(!s||(e?s.undone:s.done).eventCount==0)return!1;if(r){let i=fee(s,n,e);i&&r(t?i.scrollIntoView():i)}return!0}}const dM=uM(!1,!0),Fv=uM(!0,!0),mee=["p",0],gee=["br"],_ee={paragraph:{content:"inline*",group:"block",parseDOM:[{tag:"p",preserveWhitespace:"full"}],toDOM(){return mee}},text:{group:"inline"},hard_break:{inline:!0,group:"inline",selectable:!1,parseDOM:[{tag:"br"}],toDOM(){return gee}},doc:{content:"block+"}},vee=new wZ({nodes:_ee,marks:{}});function yee(e,t){if(e.depth===0)return;const n=e.nodeBefore?.text?.match(/^(\/|@)([\w.\s-]*)$|\s(\/|@)([\w.\s-]+)$/);if(n){const r=n[1]??n[3],s=n[2]??n[4],i=e.pos-s.length-1,o=e.pos;return s.length>0&&t?void 0:{triggerSymbol:r,queryText:s,range:{from:i,to:o}}}}const Kc=new Vs("systemHintPlugin");function Cee(e,t){return e.setMeta(Kc,t),e}function tve(e){e.dispatch(Cee(e.state.tr,{...jv(),isDismissed:!0}))}function jv(){return{triggerSymbol:"",queryText:"",active:!1,range:void 0,isDismissed:!1}}function Uw(e){const{active:t,range:n,triggerSymbol:r,queryText:s,onHintMatch:i}=e;if(i)return i(!t||!n?void 0:{triggerSymbol:r,text:s,range:n})}function bee(){return new _s({key:Kc,state:{init(){return jv()},apply(e,t,n,r){const s=e.getMeta(Kc),i={...jv(),...t,...s},o=e.selection;if(o.from!==o.to||r.doc.eq(n.doc))return Uw(i),i;const a=o.$from,c=yee(a,t.isDismissed);return i.active=c!=null,c&&(i.triggerSymbol=c.triggerSymbol,i.queryText=c.queryText,i.range=c.range,i.isDismissed=!1),Uw(i),i}},view(){return{update(e,t){const n=Kc.getState(t),r=Kc.getState(e.state);if(n.active===r.active&&n.range?.from===r.range?.from)return;const s=r.range;!r.active||!s?r.setReferencePosition?.(null):r.setReferencePosition?.({getBoundingClientRect:()=>See(e.coordsAtPos(s.from))})}}}})}function See({left:e,right:t,top:n,bottom:r}){return new DOMRect(e,n,t-e,r-n)}function wee(e=null,t,n){const r=new EventTarget,s=LX(t).enabled,i=new RX(null,{state:Sa.create({schema:vee,plugins:[pee(),qX(),bee(),...s?[BX()]:[],fJ(),QX({...wS,"Shift-Enter":wS.Enter,"Mod-z":dM,"Mod-y":Fv,"Mod-Shift-z":Fv}),uJ(r),GX(""),tee()]}),dispatchTransaction(o){const a=i.state.apply(o);i.updateState(a),o.docChanged&&r.dispatchEvent(new Event(Ev))},handlePaste(o,a){const c=a.clipboardData?.getData("text/plain");return c===void 0?!1:(a.defaultPrevented||zX(t,c)||vA(o,c),!0)},clipboardTextSerializer(o){return _A(o.content).content}});return e!=null&&i.state.doc.textContent.trim().length===0&&i.dispatch(i.state.tr.insertText(e)),i}const Uv=m.createContext(null),nve=e=>{"use forget";const t=xe.c(10),{children:n,clientThreadId:r,ignoreParentComposerController:s,draftsEnabled:i,isDefaultCollapsed:o}=e,a=s===void 0?!1:s,c=i===void 0?!0:i,l=m.useContext(Uv),u=Y(),{isSingleLine:d}=iZ(),f=o!==void 0?!o:!d;let h,g;t[0]!==r||t[1]!==l||t[2]!==u||t[3]!==c||t[4]!==a||t[5]!==f?(g=l&&!a?l:new oM(wee(c&&r?NU(ur(r))?.content??null:null,u),{isExpanded:f}),t[0]=r,t[1]=l,t[2]=u,t[3]=c,t[4]=a,t[5]=f,t[6]=g):g=t[6],h=g;const _=h;let v;return t[7]!==n||t[8]!==_?(v=p.jsx(Uv.Provider,{value:_,children:n}),t[7]=n,t[8]=_,t[9]=v):v=t[9],v},Eee=()=>{"use forget";const e=xe.c(2),t=m.useContext(Uv);let n;return e[0]!==t?(n=jr(t),e[0]=t,e[1]=n):n=e[1],n};function xee(){const e=on();return e?.data.residencyRegion!==""&&e?.data.residencyRegion!=="no_constraint"}function Tee(){return on()?.data.residencyRegion}function vc(){const e=xee(),t=Tee(),n=Y(),r=zt(n,"3131667714").get("regions",[]);return e?r.includes(t):!0}function Oee(e){if(!e)return!1;const n=["gpt-4o-gdrive","gpt-4o-gdrive-1007-mclick","gpt-4o-gdrive-1124","gpt-4o-gdrive-1124-citation","gpt-4o-gdrive-0212","gpt-4o-gdrive-0314","o1_ca_0226","o3_mini_ca_0226"].includes(e.id),r=!!e.product_features.contextual_answers?.is_eligible_for_contextual_answers;return n||r}var L3=(e=>(e.DOGFOODING="dogfooding",e.ALPHA="alpha",e.SB_1B9A6CB4="sb_1b9a6cb4",e))(L3||{});function pu(){const e=Y(),t=vc(),n=zt(e,"1001765573");return t?n.get("ca_enabled",!1):!1}function kee(){const e=Y();return zt(e,"1001765573").get("onboarding_paused",!1)}function rve(){const e=vc(),t=Y(),n=zt(t,"1001765573");return e?{isEnabled:n.get("ca_enabled",!1),isComingSoon:n.get("ca_coming_soon",!1)}:{isEnabled:!1,isComingSoon:!1}}function sve(){const e=vc(),t=Y(),n=zt(t,"1001765573");return e?n.get("ca_enabled",!1)&&n.get("ca_sk_enabled",!1):!1}function ive(){const e=vc(),t=Y(),n=zt(t,"1001765573");if(!e)return!1;const r=we(t,"3881721129");return n.get("ca_enabled",!1)&&n.get("ca_github_sync_enabled",!1)&&r}function ove(){const e=vc(),t=Y(),n=zt(t,"1001765573");return e?n.get("ca_enabled",!1)&&n.get("ca_sharepoint_sync_enabled",!1):!1}function ave(){const e=Y();return zt(e,"1001765573").get("github_onboarding_paused",!1)}function cve(){const e=vc(),t=Y(),n=zt(t,"1001765573");return e?n.get("ca_personal_enabled",!1):!1}function Aee(e){return pu()&&Oee(e)}function lve(e,t){const n=Aee(e),r=Mee();return!n||!r?!1:r===L3.DOGFOODING?!!t:!0}function Mee(){const e=Y(),t=zt(e,"1001765573");if(!t.get("ca_enabled",!1))return null;const r=t.get("feedback_format",null);return r&&Object.values(L3).includes(r)?r:null}const uve=e=>Hs(e,t=>Z.getConversationTurns(t).some(n=>n.messages.some(Iee))),Iee=e=>!!(e.author.role===fe.Tool&&e.author.name==="file_search"&&e.metadata&&e.metadata.command===$8.Spinner&&e.metadata.retrieval_search_sources&&e.metadata.retrieval_search_sources.some(t=>t.product_type==="contextual_answers"||t.product_type==="slurm")),dve=()=>{const e=Y();return we(e,"4147309512")};class Oi{static async admin_list_knowledge_connectors(t){return await H.safeGet("/ca/v2/admin/list_knowledge_connectors",{parameters:{query:{account_id:t}}})}static async admin_list_connection_instances(t){return await H.safeGet("/ca/v2/admin/list_connection_instances",{parameters:{query:{account_id:t}}})}static async admin_get_connection_instance(t,n){return await H.safeGet("/ca/v2/admin/connection_instance/{connection_id}",{parameters:{query:{account_id:t},path:{connection_id:n}}})}static async admin_create_connection_instance(t,n,r){return r===""&&(r=null),await H.safePost("/ca/v2/admin/create_connection_instance",{requestBody:{connection_config:n,connection_name:r??null},parameters:{query:{account_id:t}}})}static async admin_request_connect_quickstart(t,n,r){return await H.safeGet("/ca/v2/admin/request_connect_quickstart",{parameters:{query:{account_id:t,connection_id:n,after_flow_redirect_to:r}}})}static async admin_connect_and_quickstart(t,n,r,s){return await H.safePost("/ca/v2/admin/connect_and_quickstart",{parameters:{query:{account_id:t}},requestBody:{plugin_id:n,code:r,state:s}})}static async admin_edit_name_connection_instance(t,n,r){return await H.safePost("/ca/v2/admin/connection_instance/{connection_id}/update_name",{requestBody:r,parameters:{path:{connection_id:n},query:{account_id:t}}})}static async admin_activate_connection_instance(t,n){return await H.safePost("/ca/v2/admin/connection_instance/{connection_id}/activate",{requestBody:{},parameters:{path:{connection_id:n},query:{account_id:t}}})}static async admin_delete_connection_instance(t,n){return await H.safeDelete("/ca/v2/admin/connection_instance/{connection_id}",{parameters:{query:{account_id:t},path:{connection_id:n}}})}static async admin_connection_allow_user(t,n,r){return await H.safePost("/ca/v2/admin/connection_instance/{connection_id}/allow_user",{parameters:{query:{account_id:t},path:{connection_id:n}},requestBody:{user_id:r}})}static async admin_connection_disallow_user(t,n,r){return await H.safePost("/ca/v2/admin/connection_instance/{connection_id}/disallow_user",{parameters:{query:{account_id:t},path:{connection_id:n}},requestBody:{user_id:r}})}static async admin_connection_get_access_policy(t,n){return await H.safeGet("/ca/v2/admin/connection_instance/{connection_id}/get_access_policy",{parameters:{query:{account_id:t},path:{connection_id:n}}})}static async admin_connection_update_access_policy(t,n,r){return await H.safePost("/ca/v2/admin/connection_instance/{connection_id}/update_access_policy",{parameters:{query:{account_id:t},path:{connection_id:n}},requestBody:{allow_all_in_workspace:r}})}static async admin_connection_update_credential(t,n,{admin_email:r,credential_id:s,new_service_credential_content:i}){return await H.safePost("/ca/v2/admin/connection_instance/{connection_id}/update_credential",{parameters:{query:{account_id:t},path:{connection_id:n}},requestBody:{admin_email:r,credential_id:s,new_service_credential_content:i}})}static async admin_connection_list_item_scopes(t,n,r,s=null){return await H.safeGet("/ca/v2/admin/connection_instance/{connection_id}/list_item_scopes",{parameters:{path:{connection_id:n},query:{page_token:s,account_id:t,object_type:r}}})}static async admin_connection_update_item_default_scope(t,n,r,s){return await H.safePost("/ca/v2/admin/connection_instance/{connection_id}/update_item_default_scope",{parameters:{path:{connection_id:n},query:{account_id:t}},requestBody:{object_type:r,default_selection:s}})}static async admin_connection_block_items(t,n,r,s){return await H.safePost("/ca/v2/admin/connection_instance/{connection_id}/block_items",{parameters:{path:{connection_id:n},query:{account_id:t}},requestBody:{object_type:r,object_handles:s}})}static async admin_connection_unblock_items(t,n,r,s){return await H.safePost("/ca/v2/admin/connection_instance/{connection_id}/unblock_items",{parameters:{path:{connection_id:n},query:{account_id:t}},requestBody:{object_type:r,object_handles:s}})}static async user_activate_workspace_connection_and_user({link_id:t,user_extension:n}){return await H.safePost("/ca/v2/user/activate_workspace_connection_and_user",{requestBody:n?{link_id:t,user_extension:n}:{link_id:t}})}static async user_connection_status(){return await H.safeGet("/ca/v2/user/connection_status",{})}static async user_connection_list_item_scopes(t,n,r=null){return await H.safeGet("/ca/v2/user/connection_instance/{connection_id}/list_item_scopes",{parameters:{path:{connection_id:t},query:{page_token:r,object_type:n}}})}static async user_connection_block_items(t,n,r){return await H.safePost("/ca/v2/user/connection_instance/{connection_id}/block_items",{parameters:{path:{connection_id:t}},requestBody:{object_type:n,object_handles:r}})}static async user_connection_unblock_items(t,n,r){return await H.safePost("/ca/v2/user/connection_instance/{connection_id}/unblock_items",{parameters:{path:{connection_id:t}},requestBody:{object_type:n,object_handles:r}})}static async user_connection_sync_configuration(t){return await H.safeGet("/ca/v2/user/connection_instance/{connection_id}/user_configuration",{parameters:{path:{connection_id:t}}})}static async user_connection_update_sync_configuration(t,n){return await H.safePost("/ca/v2/user/connection_instance/{synced_knowledge_store_id}/user_configuration",{parameters:{path:{synced_knowledge_store_id:t}},requestBody:{extension:n}})}static async user_request_connect(t,n,r){return await H.safeGet("/ca/v2/user/request_connect",{parameters:{query:{connection_id:t,after_flow_redirect_to:n,...r?{use_connectors_platform_flow:r}:{}}}})}static async user_request_connect_upgrade_to_sync({link_id:t,user_extension:n}){return await H.safePost("/ca/v2/user/upgrade_to_sync",{requestBody:{link_id:t,user_extension:n}})}static async user_connection_oauth_callback(t,n,r){return await H.safePost("/ca/v2/user/connect_and_activate",{requestBody:{plugin_id:t,code:n,state:r}})}static async user_delete_sync(t){return await H.safePost("/ca/v2/user/delete_synced",{requestBody:{link_id:t}})}static async user_disconnect(t){return await H.safePost("/ca/v2/user/disconnect",{requestBody:{connection_id:t}})}}const fve=({skip:e=!1}={})=>{const{connectionInstanceData:t,refetch:n,isLoading:r}=mu({skip:e});return{gDriveOAuthConnectionId:m.useMemo(()=>{const i=t?.connection_statuses;return i&&i.length===1&&i[0].user_connection_details.auth_status==="not_connected"&&i[0].user_connection_details.knowledge_connector_type==="google_drive_oauth"?i[0].user_connection_details.connection_instance_id:null},[t]),refetch:n,isLoading:r}},fM=({skip:e=!1}={})=>{const{connectionInstanceData:t}=mu({skip:e});return t?.connection_statuses.some(r=>["partially_activated","activated"].includes(r.user_connection_details.activation_status))},mu=({skip:e=!1}={})=>{const t=pu(),{data:n,isLoading:r,refetch:s}=$e({queryKey:["user_connection_status"],queryFn:Oi.user_connection_status,enabled:!e&&t,refetchInterval:i=>{const o=i.state.status==="success"&&i.state.data&&!i.state.data.connection_statuses.some(c=>c.user_connection_details.activation_status==="activating"||c.user_connection_details.activation_status==="partially_activated");return i.state.status==="success"&&i.state.data&&i.state.data.connection_statuses.some(c=>(c.user_connection_details.auth_status==="user_connected"||c.user_connection_details.auth_status==="admin_connected")&&!(c.user_connection_details.activation_status==="activating"||c.user_connection_details.activation_status==="partially_activated"||c.user_connection_details.activation_status==="activated"))?2*1e3:o?!1:30*1e3}});return{connectionInstanceData:n,isLoading:r,refetch:s}},hM=(e,t=!1)=>["fetchConnectorLinkData",e,t],Nee=e=>["fetchPlatformConnectorData",e];function Ree(){const e=Y();return we(e,"3999836663")}function gu(){const e=Y(),t=we(e,"3544641259"),n=!!zt(e,"463092697")?.value?.enabled,r=Ree();return t||n||r}var d0,Bw;function Pee(){if(Bw)return d0;Bw=1;function e(t,n,r,s){for(var i=-1,o=t==null?0:t.length;++i<o;){var a=t[i];n(s,a,r(a),t)}return s}return d0=e,d0}var f0,qw;function Dee(){if(qw)return f0;qw=1;function e(t){return function(n,r,s){for(var i=-1,o=Object(n),a=s(n),c=a.length;c--;){var l=a[t?c:++i];if(r(o[l],l,o)===!1)break}return n}}return f0=e,f0}var h0,Gw;function Lee(){if(Gw)return h0;Gw=1;var e=Dee(),t=e();return h0=t,h0}var p0,Hw;function Fee(){if(Hw)return p0;Hw=1;var e=Lee(),t=fc();function n(r,s){return r&&e(r,s,t)}return p0=n,p0}var m0,Vw;function jee(){if(Vw)return m0;Vw=1;var e=kh();function t(n,r){return function(s,i){if(s==null)return s;if(!e(s))return n(s,i);for(var o=s.length,a=r?o:-1,c=Object(s);(r?a--:++a<o)&&i(c[a],a,c)!==!1;);return s}}return m0=t,m0}var g0,zw;function Uee(){if(zw)return g0;zw=1;var e=Fee(),t=jee(),n=t(e);return g0=n,g0}var _0,$w;function Bee(){if($w)return _0;$w=1;var e=Uee();function t(n,r,s,i){return e(n,function(o,a,c){r(i,o,s(o),c)}),i}return _0=t,_0}var v0,Ww;function qee(){if(Ww)return v0;Ww=1;var e=Pee(),t=Bee(),n=tu(),r=hr();function s(i,o){return function(a,c){var l=r(a)?e:t,u=o?o():{};return l(a,i,n(c,2),u)}}return v0=s,v0}var y0,Kw;function Gee(){if(Kw)return y0;Kw=1;var e=S3(),t=qee(),n=Object.prototype,r=n.hasOwnProperty,s=t(function(i,o,a){r.call(i,a)?i[a].push(o):e(i,a,[o])});return y0=s,y0}var Hee=Gee();const pM=Ot(Hee),Vee=async(e,t=void 0)=>(await H.safePost("/aip/connectors/list_accessible",{requestBody:{principals:[{type:"USER",id:e}]},additionalHeaders:t?{[mn]:t}:void 0})).connectors,mM=async(e,t=!1,n=void 0)=>{const r=await H.safePost("/aip/connectors/links/list_accessible",{requestBody:{principals:[{type:"USER",id:e}],link_refresh_strategy:t?"BLOCKING":"NONE"},additionalHeaders:n?{[mn]:n}:void 0});return pM(r.links,({connector_id:s})=>s)};function ko({skip:e=!1,fetchValidLinksOnly:t=!1,productSku:n}={}){const r=Y(),s=Nt(r),i=gu(),{data:o,isLoading:a,isFetching:c,error:l,refetch:u}=$e({queryKey:hM(s?.normalizedAccountUserId,t),enabled:!e&&!!s&&i,queryFn:async()=>!s||!s.normalizedAccountUserId?{}:await mM(s.normalizedAccountUserId,t,n)});return{connectorLinks:m.useMemo(()=>o?new Map(Object.entries(o)):new Map,[o]),isLoading:a,isFetching:c,error:l,refetch:u}}function hve({skip:e=!1,productSku:t}={}){const n=gu(),r=Y(),s=Nt(r),i=Tn();m.useEffect(()=>{if(e||!s?.normalizedAccountUserId||!n)return;const o=s.normalizedAccountUserId;i.prefetchQuery({queryKey:Nee(o),queryFn:()=>Vee(o,t)}).catch(()=>{}),i.prefetchQuery({queryKey:hM(o,!1),queryFn:()=>mM(o,!1,t)}).catch(()=>{})},[e,s?.normalizedAccountUserId,i,n,t])}const zee=e=>["fetchPlatformConnectorData",e],$ee=async(e,t)=>(await H.safePost("/aip/connectors/list_accessible",{requestBody:{principals:[{type:"USER",id:e}]},additionalHeaders:t?{[mn]:t}:void 0})).connectors;function _u(e=!0,t=void 0){const n=gu(),r=Y(),s=Nt(r),{data:i,isLoading:o,isFetching:a,error:c,refetch:l}=$e({queryKey:zee(s?.normalizedAccountUserId),queryFn:async()=>!s||!s.normalizedAccountUserId?[]:await $ee(s.normalizedAccountUserId,t),enabled:!!s&&e&&n});return{platformConnectors:m.useMemo(()=>new Map(i?.map(d=>[d.id,d])),[i]),isLoading:o,isFetching:a,error:c,refetch:l}}function gM(e){const t=Rt();return $e({queryKey:["userContext"],queryFn:()=>H.safeGet("/user_system_messages").catch(n=>{throw t.danger({id:"userContextModal.getCustomInstructionsError",defaultMessage:"Failed to get your settings",description:"Error message when getting custom instructions fails"},{toastId:"user_context_modal_get_custom_instructions_error"}),n}),enabled:e,select:n=>{const{about_user_message:r,about_model_message:s,personality_type_selection:i,name_user_message:o,role_user_message:a,traits_model_message:c,other_user_message:l,disabled_tools:u,enabled:d,object:f,...h}=n;return{...h,aboutUserMessage:r??"",aboutModelMessage:s??"",personalityTypeMessage:i??"",nameUserMessage:o??"",roleUserMessage:a??"",traitsModelMessage:c??"",otherUserMessage:l??"",disabledTools:u??[],enabled:d??!0}}})}function Wee({aboutUserMessage:e,aboutModelMessage:t,personalityTypeMessage:n,nameUserMessage:r="",roleUserMessage:s="",traitsModelMessage:i="",otherUserMessage:o="",disabledTools:a,enabled:c,...l}){return H.safePost("/user_system_messages",{requestBody:{about_user_message:e,about_model_message:t,personality_type_selection:n,name_user_message:r,role_user_message:s,traits_model_message:i,other_user_message:o,disabled_tools:a,enabled:c,...l}})}const Kee=e=>m.createElement("svg",{width:24,height:24,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",...e},m.createElement("g",{clipPath:"url(#clip0_5707_424)"},m.createElement("path",{d:"M22 2H2V22H22V2Z",fill:"#0472F8"}),m.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M12.1302 13.5156C11.3673 13.5156 10.7134 12.8617 10.7134 12.0625C10.7134 11.2633 11.331 10.6094 12.1302 10.6094C12.893 10.6094 13.5469 11.2633 13.5469 12.0625C13.5469 12.8617 12.9294 13.5156 12.1302 13.5156ZM7.98887 13.5156C7.226 13.5156 6.57212 12.8617 6.57212 12.0625C6.57212 11.2633 7.18967 10.6094 7.98887 10.6094C8.75174 10.6094 9.40563 11.2633 9.40563 12.0625C9.40563 12.8617 8.78806 13.5156 7.98887 13.5156ZM17.4339 9.91917C17.6156 9.70121 17.9425 9.66489 18.1605 9.84652C18.3784 9.99183 18.4511 10.3188 18.2695 10.5367L16.9617 12.1715L18.2695 13.8062C18.4511 14.0241 18.3784 14.3148 18.1605 14.4964C17.9425 14.6417 17.6156 14.6054 17.4339 14.4237L16.3078 13.0433L15.1817 14.4237C15 14.6417 14.6731 14.678 14.4551 14.4964C14.2371 14.3511 14.1645 14.0241 14.3461 13.8062L15.6539 12.1715L14.3825 10.5004C14.2008 10.2824 14.2735 9.99183 14.4914 9.81019C14.7094 9.66489 15.0363 9.70121 15.218 9.88285L16.3441 11.2996L17.4339 9.91917ZM6.13619 7.59424C6.39048 7.59424 6.60845 7.8122 6.60845 8.06649V10.1371C7.00804 9.84652 7.48029 9.66489 8.02519 9.66489C8.93338 9.66489 9.69624 10.1735 10.0958 10.9727C10.4954 10.2098 11.2583 9.66489 12.1665 9.66489C13.4743 9.66489 14.4914 10.7547 14.4914 12.0988C14.4914 13.4429 13.4379 14.5327 12.1665 14.5327C11.2583 14.5327 10.4954 14.0241 10.0958 13.2249C9.69624 13.9878 8.93338 14.5327 8.02519 14.5327C6.75374 14.5327 5.70027 13.4792 5.70027 12.1351V8.06649C5.66394 7.8122 5.8819 7.59424 6.13619 7.59424Z",fill:"white"})),m.createElement("defs",null,m.createElement("clipPath",{id:"clip0_5707_424"},m.createElement("rect",{x:2,y:2,width:20,height:20,rx:2,fill:"white"})))),Yee=e=>m.createElement("svg",{width:24,height:24,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",...e},m.createElement("g",{clipPath:"url(#clip0_5904_434)"},m.createElement("path",{d:"M12 22C17.5228 22 22 17.5228 22 12C22 6.47715 17.5228 2 12 2C6.47715 2 2 6.47715 2 12C2 17.5228 6.47715 22 12 22Z",fill:"#7D2AE7"}),m.createElement("path",{d:"M12 22C17.5228 22 22 17.5228 22 12C22 6.47715 17.5228 2 12 2C6.47715 2 2 6.47715 2 12C2 17.5228 6.47715 22 12 22Z",fill:"url(#paint0_radial_5904_434)"}),m.createElement("path",{d:"M12 22C17.5228 22 22 17.5228 22 12C22 6.47715 17.5228 2 12 2C6.47715 2 2 6.47715 2 12C2 17.5228 6.47715 22 12 22Z",fill:"url(#paint1_radial_5904_434)"}),m.createElement("path",{d:"M12 22C17.5228 22 22 17.5228 22 12C22 6.47715 17.5228 2 12 2C6.47715 2 2 6.47715 2 12C2 17.5228 6.47715 22 12 22Z",fill:"url(#paint2_radial_5904_434)"}),m.createElement("path",{d:"M12 22C17.5228 22 22 17.5228 22 12C22 6.47715 17.5228 2 12 2C6.47715 2 2 6.47715 2 12C2 17.5228 6.47715 22 12 22Z",fill:"url(#paint3_radial_5904_434)"}),m.createElement("path",{d:"M16.3172 14.0514C16.2346 14.0514 16.162 14.1211 16.0864 14.2733C15.2329 16.0039 13.7588 17.2284 12.053 17.2284C10.0806 17.2284 8.85912 15.4479 8.85912 12.9881C8.85912 8.82143 11.1807 6.41235 13.2198 6.41235C14.1726 6.41235 14.7545 7.01114 14.7545 7.96403C14.7545 9.09497 14.112 9.69376 14.112 10.0926C14.112 10.2717 14.2234 10.3801 14.4442 10.3801C15.3315 10.3801 16.3728 9.36055 16.3728 7.92026C16.3728 6.52375 15.1574 5.49725 13.1183 5.49725C9.74837 5.49725 6.75342 8.62151 6.75342 12.9443C6.75342 16.2904 8.66418 18.5016 11.6124 18.5016C14.7416 18.5016 16.5509 15.3882 16.5509 14.3777C16.5509 14.1539 16.4365 14.0514 16.3172 14.0514Z",fill:"white"})),m.createElement("defs",null,m.createElement("radialGradient",{id:"paint0_radial_5904_434",cx:0,cy:0,r:1,gradientUnits:"userSpaceOnUse",gradientTransform:"translate(5.86316 19.7263) rotate(-49.4156) scale(15.4683)"},m.createElement("stop",{stopColor:"#6420FF"}),m.createElement("stop",{offset:1,stopColor:"#6420FF",stopOpacity:0})),m.createElement("radialGradient",{id:"paint1_radial_5904_434",cx:0,cy:0,r:1,gradientUnits:"userSpaceOnUse",gradientTransform:"translate(7.29474 4.27368) rotate(54.7035) scale(17.4434)"},m.createElement("stop",{stopColor:"#00C4CC"}),m.createElement("stop",{offset:1,stopColor:"#00C4CC",stopOpacity:0})),m.createElement("radialGradient",{id:"paint2_radial_5904_434",cx:0,cy:0,r:1,gradientUnits:"userSpaceOnUse",gradientTransform:"translate(5.86316 19.7263) rotate(-45.1954) scale(15.2811 7.02796)"},m.createElement("stop",{stopColor:"#6420FF"}),m.createElement("stop",{offset:1,stopColor:"#6420FF",stopOpacity:0})),m.createElement("radialGradient",{id:"paint3_radial_5904_434",cx:0,cy:0,r:1,gradientUnits:"userSpaceOnUse",gradientTransform:"translate(10.1789 4.69474) rotate(66.5198) scale(15.7459 26.3779)"},m.createElement("stop",{stopColor:"#00C4CC",stopOpacity:.725916}),m.createElement("stop",{offset:1e-4,stopColor:"#00C4CC"}),m.createElement("stop",{offset:1,stopColor:"#00C4CC",stopOpacity:0})),m.createElement("clipPath",{id:"clip0_5904_434"},m.createElement("rect",{width:20,height:20,fill:"white",transform:"translate(2 2)"})))),Zee=e=>m.createElement("svg",{width:24,height:24,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",...e},m.createElement("path",{d:"M6.62777 3.00696L1.25488 6.38196L6.62777 9.75695L12.0016 6.38196L17.3745 9.75695L22.7474 6.38196L17.3745 3.00696L12.0016 6.38196L6.62777 3.00696Z",fill:"#0061FE"}),m.createElement("path",{d:"M6.62777 16.507L1.25488 13.132L6.62777 9.75696L12.0016 13.132L6.62777 16.507Z",fill:"#0061FE"}),m.createElement("path",{d:"M12.0015 13.132L17.3744 9.75696L22.7473 13.132L17.3744 16.507L12.0015 13.132Z",fill:"#0061FE"}),m.createElement("path",{d:"M12.0013 21.007L6.62744 17.632L12.0013 14.257L17.3742 17.632L12.0013 21.007Z",fill:"#0061FE"})),Jee=e=>m.createElement("svg",{width:24,height:24,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",...e},m.createElement("path",{d:"M12 1.95068C17.525 1.95068 22 6.42568 22 11.9507C21.9995 14.0459 21.3419 16.0883 20.1198 17.7902C18.8977 19.4922 17.1727 20.768 15.1875 21.4382C14.6875 21.5382 14.5 21.2257 14.5 20.9632C14.5 20.6257 14.5125 19.5507 14.5125 18.2132C14.5125 17.2757 14.2 16.6757 13.8375 16.3632C16.0625 16.1132 18.4 15.2632 18.4 11.4257C18.4 10.3257 18.0125 9.43818 17.375 8.73818C17.475 8.48818 17.825 7.46318 17.275 6.08818C17.275 6.08818 16.4375 5.81318 14.525 7.11318C13.725 6.88818 12.875 6.77568 12.025 6.77568C11.175 6.77568 10.325 6.88818 9.525 7.11318C7.6125 5.82568 6.775 6.08818 6.775 6.08818C6.225 7.46318 6.575 8.48818 6.675 8.73818C6.0375 9.43818 5.65 10.3382 5.65 11.4257C5.65 15.2507 7.975 16.1132 10.2 16.3632C9.9125 16.6132 9.65 17.0507 9.5625 17.7007C8.9875 17.9632 7.55 18.3882 6.65 16.8757C6.4625 16.5757 5.9 15.8382 5.1125 15.8507C4.275 15.8632 4.775 16.3257 5.125 16.5132C5.55 16.7507 6.0375 17.6382 6.15 17.9257C6.35 18.4882 7 19.5632 9.5125 19.1007C9.5125 19.9382 9.525 20.7257 9.525 20.9632C9.525 21.2257 9.3375 21.5257 8.8375 21.4382C6.8458 20.7752 5.11342 19.502 3.88611 17.799C2.65881 16.096 1.9989 14.0498 2 11.9507C2 6.42568 6.475 1.95068 12 1.95068Z",fill:"currentColor"})),Qee=e=>m.createElement("svg",{width:24,height:24,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",...e},m.createElement("path",{d:"M6.27275 19.8771V11.7634L3.75642 9.46126L1.5 8.18381V18.4452C1.5 19.2375 2.14194 19.8771 2.93183 19.8771H6.27275Z",fill:"#4285F4"}),m.createElement("path",{d:"M17.7271 19.8771H21.068C21.8603 19.8771 22.4998 19.2351 22.4998 18.4452V8.18381L19.9441 9.64709L17.7271 11.7634V19.8771Z",fill:"#34A853"}),m.createElement("path",{d:"M6.27257 11.7635L5.93018 8.59314L6.27257 5.55887L11.9999 9.85434L17.7272 5.55887L18.1102 8.42932L17.7272 11.7635L11.9999 16.0589L6.27257 11.7635Z",fill:"#EA4335"}),m.createElement("path",{d:"M17.7271 5.55879V11.7634L22.4998 8.18381V6.2747C22.4998 4.504 20.4786 3.49457 19.0634 4.5565L17.7271 5.55879Z",fill:"#FBBC04"}),m.createElement("path",{d:"M1.5 8.18378L3.69507 9.83008L6.27275 11.7633V5.55876L4.93638 4.55647C3.51887 3.49454 1.5 4.50397 1.5 6.27467V8.18378Z",fill:"#C5221F"})),Xee=e=>m.createElement("svg",{width:24,height:24,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",...e},m.createElement("path",{d:"M16.7369 7.26321H7.26318V16.7369H16.7369V7.26321Z",fill:"white"}),m.createElement("path",{d:"M16.7367 21L20.9999 16.7369L18.8683 16.3732L16.7367 16.7369L16.3477 18.6866L16.7367 21Z",fill:"#EA4335"}),m.createElement("path",{d:"M3 16.7369V19.579C3 20.3641 3.63592 21 4.42105 21H7.26316L7.70087 18.8684L7.26316 16.7369L4.94057 16.3732L3 16.7369Z",fill:"#188038"}),m.createElement("path",{d:"M20.9999 7.26316V4.42105C20.9999 3.63592 20.364 3 19.5788 3H16.7367C16.4773 4.05721 16.3477 4.83523 16.3477 5.33408C16.3477 5.83291 16.4773 6.47593 16.7367 7.26316C17.6796 7.53315 18.3901 7.66815 18.8683 7.66815C19.3465 7.66815 20.057 7.53315 20.9999 7.26316Z",fill:"#1967D2"}),m.createElement("path",{d:"M21 7.26321H16.7368V16.7369H21V7.26321Z",fill:"#FBBC04"}),m.createElement("path",{d:"M16.7369 16.7368H7.26318V21H16.7369V16.7368Z",fill:"#34A853"}),m.createElement("path",{d:"M16.7368 2.99997H4.42105C3.63592 2.99997 3 3.63589 3 4.42102V16.7368H7.26316V7.26313H16.7368V2.99997Z",fill:"#4285F4"}),m.createElement("path",{d:"M9.20617 14.6124C8.8521 14.3732 8.60696 14.0239 8.47314 13.562L9.295 13.2233C9.3696 13.5075 9.49985 13.7278 9.68577 13.8841C9.87052 14.0404 10.0955 14.1174 10.3584 14.1174C10.6272 14.1174 10.8581 14.0357 11.0512 13.8723C11.2442 13.7089 11.3413 13.5004 11.3413 13.2482C11.3413 12.99 11.2395 12.7792 11.0358 12.6158C10.8321 12.4524 10.5763 12.3707 10.2708 12.3707H9.79591V11.5571H10.2222C10.4851 11.5571 10.7066 11.4861 10.8866 11.344C11.0666 11.2019 11.1566 11.0077 11.1566 10.7602C11.1566 10.5399 11.076 10.3646 10.915 10.2332C10.7539 10.1017 10.5502 10.0354 10.3027 10.0354C10.0612 10.0354 9.86933 10.0994 9.72723 10.2285C9.58522 10.3579 9.47844 10.5213 9.41696 10.7033L8.60341 10.3646C8.71117 10.0591 8.90894 9.7891 9.19906 9.55581C9.48921 9.32252 9.85985 9.20529 10.3099 9.20529C10.6426 9.20529 10.9422 9.26925 11.2075 9.39831C11.4727 9.5274 11.6812 9.70621 11.8316 9.93358C11.982 10.1621 12.0566 10.4179 12.0566 10.7021C12.0566 10.9923 11.9867 11.2374 11.847 11.4387C11.7072 11.64 11.5355 11.794 11.3318 11.9017V11.9503C11.5948 12.0587 11.8233 12.2368 11.9926 12.4654C12.1643 12.6964 12.2508 12.9723 12.2508 13.2944C12.2508 13.6165 12.1691 13.9042 12.0056 14.1565C11.8422 14.4087 11.616 14.6077 11.3295 14.7521C11.0417 14.8966 10.7184 14.97 10.3596 14.97C9.94394 14.9712 9.56025 14.8516 9.20617 14.6124ZM14.2545 10.534L13.3521 11.1865L12.9009 10.502L14.5197 9.33437H15.1402V14.8421H14.2545V10.534Z",fill:"#4285F4"})),ete=e=>m.createElement("svg",{width:24,height:24,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",...e},m.createElement("path",{d:"M9.48739 11.7436C5.94383 11.7436 3.07715 14.6102 3.07715 18.1538V20.8462C3.07715 21.4833 3.59383 22 4.23099 22H7.30791L10.3848 11.7436H9.48739Z",fill:"#86A9FF"}),m.createElement("path",{d:"M20.0001 15.9744C20.0001 13.6359 18.1077 11.7436 15.7693 11.7436H12.6924V22H15.7693C18.1078 22 20.0001 20.1077 20.0001 17.7692",fill:"#578CFF"}),m.createElement("path",{d:"M6.15381 15.9744C6.15381 13.6359 8.04613 11.7436 10.3846 11.7436H12.6922C15.0307 11.7436 16.923 13.6359 16.923 15.9744V17.7692C16.923 20.1077 15.0307 22 12.6922 22H7.30765C6.67049 22 6.15381 21.4833 6.15381 20.8462V15.9744Z",fill:"#0057CC"}),m.createElement("path",{d:"M11.5383 9.94872C13.7333 9.94872 15.5127 8.16934 15.5127 5.97436C15.5127 3.77938 13.7333 2 11.5383 2C9.34335 2 7.56396 3.77938 7.56396 5.97436C7.56396 8.16934 9.34335 9.94872 11.5383 9.94872Z",fill:"#0057CC"})),yc=e=>m.createElement("svg",{width:24,height:24,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",...e},m.createElement("path",{d:"M3.51105 18.4269L4.39307 19.9615C4.57634 20.2846 4.8398 20.5384 5.14908 20.723L8.29914 15.2307H1.99902C1.99902 15.5884 2.09066 15.9461 2.27394 16.2692L3.51105 18.4269Z",fill:"#0066DA"}),m.createElement("path",{d:"M11.999 8.76916L8.84897 3.27686C8.53969 3.46147 8.27623 3.71532 8.09295 4.03839L2.27394 14.1922C2.09403 14.5083 1.99926 14.8663 1.99902 15.2307H8.29914L11.999 8.76916Z",fill:"#00AC47"}),m.createElement("path",{d:"M18.8492 20.723C19.1585 20.5384 19.422 20.2846 19.6053 19.9615L19.9718 19.3269L21.7244 16.2692C21.9077 15.9461 21.9993 15.5884 21.9993 15.2307H15.6987L17.0394 17.8846L18.8492 20.723Z",fill:"#EA4335"}),m.createElement("path",{d:"M11.9982 8.76923L15.1483 3.27692C14.839 3.09231 14.4839 3 14.1173 3H9.87907C9.51252 3 9.15742 3.10385 8.84814 3.27692L11.9982 8.76923Z",fill:"#00832D"}),m.createElement("path",{d:"M15.6983 15.2307H8.29849L5.14844 20.723C5.45772 20.9076 5.81281 20.9999 6.17937 20.9999H17.8174C18.1839 20.9999 18.539 20.8961 18.8483 20.723L15.6983 15.2307Z",fill:"#2684FC"}),m.createElement("path",{d:"M18.8146 9.11532L15.9051 4.03839C15.7218 3.71532 15.4584 3.46147 15.1491 3.27686L11.999 8.76916L15.6989 15.2307H21.9876C21.9876 14.873 21.8959 14.5153 21.7127 14.1922L18.8146 9.11532Z",fill:"#FFBA00"})),tte=e=>m.createElement("svg",{width:24,height:24,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",...e},m.createElement("path",{d:"M16.888 8.14381V5.93591C17.1798 5.79955 17.4268 5.58312 17.6004 5.31182C17.7739 5.04053 17.8668 4.72552 17.8683 4.40346V4.35276C17.8683 3.41376 17.1071 2.65254 16.1681 2.65254H16.1174C15.6665 2.65254 15.234 2.83167 14.9152 3.15052C14.5963 3.46937 14.4172 3.90183 14.4172 4.35276V4.40346C14.4187 4.72552 14.5116 5.04053 14.6851 5.31182C14.8587 5.58312 15.1057 5.79955 15.3975 5.93591V8.14381C14.5589 8.27221 13.7692 8.61989 13.1082 9.15167L7.05292 4.43539C7.09611 4.27951 7.11865 4.11926 7.12116 3.95838C7.1219 3.57946 7.01024 3.20884 6.80032 2.89339C6.5904 2.57794 6.29164 2.33183 5.94183 2.1862C5.59202 2.04056 5.20688 2.00195 4.83512 2.07523C4.46335 2.14852 4.12168 2.33041 3.85331 2.59791C3.58494 2.8654 3.40193 3.20648 3.32743 3.578C3.25293 3.94952 3.29029 4.33478 3.43478 4.68507C3.57927 5.03535 3.82439 5.33492 4.13916 5.54587C4.45392 5.75682 4.82418 5.86968 5.20309 5.87018C5.53459 5.86862 5.85988 5.78012 6.14648 5.61352L12.1091 10.2534C11.5735 11.0626 11.294 12.0144 11.3072 12.9848C11.3204 13.9551 11.6256 14.899 12.183 15.6934L10.3695 17.5075C10.2229 17.4606 10.0701 17.4357 9.91624 17.4336C9.60521 17.4339 9.30123 17.5263 9.04273 17.6993C8.78422 17.8722 8.58278 18.1179 8.46386 18.4053C8.34495 18.6927 8.3139 19.0089 8.37464 19.314C8.43538 19.619 8.58519 19.8992 8.80512 20.1192C9.02505 20.3391 9.30524 20.4889 9.61028 20.5496C9.91532 20.6104 10.2315 20.5793 10.5189 20.4604C10.8063 20.3415 11.052 20.1401 11.225 19.8815C11.3979 19.623 11.4904 19.3191 11.4906 19.008C11.4886 18.8541 11.4637 18.7014 11.4168 18.5548L13.2109 16.7601C13.7959 17.2105 14.4763 17.521 15.1999 17.6678C15.9235 17.8147 16.6711 17.7939 17.3854 17.6072C18.0998 17.4205 18.7619 17.0727 19.3211 16.5906C19.8803 16.1085 20.3217 15.5047 20.6115 14.8256C20.9013 14.1465 21.0318 13.4101 20.9931 12.6728C20.9543 11.9355 20.7473 11.2168 20.3879 10.5718C20.0285 9.92689 19.5262 9.37275 18.9196 8.95189C18.3129 8.53103 17.618 8.25461 16.888 8.14381ZM16.1443 15.4054C15.8127 15.4145 15.4827 15.3571 15.1737 15.2365C14.8647 15.1159 14.583 14.9346 14.3452 14.7033C14.1075 14.472 13.9185 14.1954 13.7895 13.8899C13.6604 13.5843 13.594 13.256 13.594 12.9243C13.594 12.5926 13.6604 12.2642 13.7895 11.9587C13.9185 11.6531 14.1075 11.3765 14.3452 11.1452C14.583 10.9139 14.8647 10.7326 15.1737 10.612C15.4827 10.4914 15.8127 10.434 16.1443 10.4431C16.7869 10.4656 17.3958 10.7366 17.8426 11.1991C18.2893 11.6616 18.5392 12.2794 18.5395 12.9224C18.5399 13.5655 18.2906 14.1835 17.8443 14.6464C17.398 15.1094 16.7894 15.381 16.1468 15.4042",fill:"#FF7A59"})),nte=e=>m.createElement("svg",{width:24,height:24,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",...e},m.createElement("g",{clipPath:"url(#clip0_5645_167)"},m.createElement("path",{d:"M19.289 12.9098C19.289 13.0866 19.2193 13.2561 19.0953 13.381C18.9713 13.506 18.8032 13.5763 18.6278 13.5763C18.4525 13.5763 18.2843 13.506 18.1603 13.381C18.0363 13.2561 17.9667 13.0866 17.9667 12.9098V6.95655C17.9667 6.77982 18.0363 6.61032 18.1603 6.48536C18.2843 6.36038 18.4525 6.29017 18.6278 6.29017C18.8032 6.29017 18.9713 6.36038 19.0953 6.48536C19.2193 6.61032 19.289 6.77982 19.289 6.95655V12.9098ZM19.0595 17.0348C18.9721 17.1229 16.5134 19.1881 12.0057 19.1881C7.49817 19.1881 5.05587 17.1339 4.95206 17.0457C4.88664 16.9902 4.83275 16.9221 4.79348 16.8455C4.75422 16.7688 4.73035 16.6851 4.72324 16.5991C4.71614 16.5132 4.72594 16.4267 4.75207 16.3445C4.77821 16.2624 4.82018 16.1863 4.87557 16.1205C4.98967 15.9875 5.15135 15.9053 5.32535 15.8918C5.49935 15.8784 5.67155 15.935 5.8044 16.049C5.84266 16.0765 8.03908 17.8718 12.0003 17.8718C15.9616 17.8718 18.1743 16.0655 18.1962 16.049C18.3305 15.9359 18.5033 15.8802 18.6777 15.8936C18.8523 15.907 19.0147 15.9883 19.1305 16.1205C19.242 16.2517 19.2976 16.4218 19.2853 16.594C19.273 16.7662 19.1938 16.9266 19.065 17.0403L19.0595 17.0348ZM4.71712 6.95655C4.727 6.77926 4.80611 6.61311 4.93716 6.49444C5.0682 6.37577 5.24054 6.31421 5.41648 6.32322C5.57959 6.33256 5.73349 6.40243 5.84851 6.51938C5.96353 6.63633 6.03151 6.79207 6.03934 6.95655V12.8989C6.03934 13.0756 5.96969 13.245 5.84571 13.37C5.72173 13.495 5.55357 13.5652 5.37823 13.5652C5.20289 13.5652 5.03473 13.495 4.91075 13.37C4.78677 13.245 4.71712 13.0756 4.71712 12.8989V6.95655ZM8.03362 5.63482C8.0435 5.45752 8.12261 5.29138 8.25366 5.17271C8.38471 5.05403 8.55704 4.99248 8.73298 5.00149C8.89609 5.01083 9.05 5.0807 9.16501 5.19765C9.28002 5.3146 9.348 5.47033 9.35585 5.63482V14.4463C9.35585 14.6231 9.2862 14.7926 9.16221 14.9176C9.03823 15.0425 8.87007 15.1127 8.69474 15.1127C8.5194 15.1127 8.35124 15.0425 8.22726 14.9176C8.10327 14.7926 8.03362 14.6231 8.03362 14.4463V5.63482ZM11.3665 5.30438C11.3665 5.12765 11.4362 4.95816 11.5602 4.83319C11.6842 4.70822 11.8523 4.63801 12.0276 4.63801C12.203 4.63801 12.3711 4.70822 12.4951 4.83319C12.6191 4.95816 12.6888 5.12765 12.6888 5.30438V14.887C12.6888 15.0637 12.6191 15.2331 12.4951 15.3582C12.3711 15.4831 12.203 15.5533 12.0276 15.5533C11.8523 15.5533 11.6842 15.4831 11.5602 15.3582C11.4362 15.2331 11.3665 15.0637 11.3665 14.887V5.30438ZM14.6448 5.63482C14.6448 5.45809 14.7144 5.28859 14.8384 5.16362C14.9623 5.03865 15.1305 4.96844 15.3059 4.96844C15.4812 4.96844 15.6494 5.03865 15.7734 5.16362C15.8973 5.28859 15.967 5.45809 15.967 5.63482V14.4463C15.967 14.6231 15.8973 14.7926 15.7734 14.9176C15.6494 15.0425 15.4812 15.1127 15.3059 15.1127C15.1305 15.1127 14.9623 15.0425 14.8384 14.9176C14.7144 14.7926 14.6448 14.6231 14.6448 14.4463V5.63482ZM19.4693 2.00005H4.56414C4.23936 1.99788 3.91735 2.06029 3.61654 2.18373C3.31573 2.30716 3.04203 2.48919 2.81111 2.71939C2.58019 2.94959 2.39658 3.22343 2.27081 3.52526C2.14503 3.82708 2.07955 4.15094 2.07812 4.4783V19.3478C2.07955 19.6751 2.14503 19.999 2.27081 20.3009C2.39658 20.6026 2.58019 20.8765 2.81111 21.1067C3.04203 21.3369 3.31573 21.519 3.61654 21.6423C3.91735 21.7658 4.23936 21.8282 4.56414 21.826H19.4693C19.7936 21.8282 20.1151 21.766 20.4156 21.6429C20.7161 21.5198 20.9895 21.3383 21.2203 21.1086C21.4512 20.879 21.635 20.6058 21.761 20.3046C21.8871 20.0035 21.9531 19.6802 21.9553 19.3533V4.4783C21.9538 4.15141 21.8885 3.828 21.7631 3.52654C21.6376 3.22508 21.4545 2.95148 21.2242 2.72135C20.9939 2.49122 20.7208 2.30908 20.4206 2.18532C20.1204 2.06156 19.799 1.99861 19.4747 2.00005",fill:"currentColor"})),m.createElement("defs",null,m.createElement("clipPath",{id:"clip0_5645_167"},m.createElement("rect",{width:20,height:20,fill:"white",transform:"translate(2 2)"})))),rte=e=>m.createElement("svg",{width:24,height:24,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",...e},m.createElement("g",{clipPath:"url(#clip0_5645_169)"},m.createElement("path",{d:"M2.41207 13.8046C2.36757 13.6149 2.59357 13.4954 2.73135 13.6332L10.0338 20.9356C10.1716 21.0734 10.0521 21.2994 9.86243 21.2549C6.17729 20.3904 3.27655 17.4897 2.41207 13.8046ZM2.16737 10.8778C2.16384 10.9345 2.18514 10.9898 2.22528 11.0299L12.6371 21.4417C12.6772 21.4818 12.7325 21.5032 12.7892 21.4996C13.263 21.4701 13.7279 21.4076 14.1817 21.3144C14.3346 21.283 14.3877 21.0952 14.2773 20.9848L2.68218 9.3897C2.57181 9.27932 2.38395 9.33244 2.35255 9.48534C2.25936 9.93906 2.19688 10.404 2.16737 10.8778ZM3.00918 7.44108C2.97588 7.51584 2.99284 7.6032 3.05071 7.66108L16.0059 20.6163C16.0638 20.6742 16.1512 20.6911 16.2259 20.6578C16.5831 20.4987 16.9293 20.3193 17.263 20.121C17.3734 20.0554 17.3905 19.9037 17.2997 19.8129L3.85412 6.36734C3.76331 6.27652 3.61158 6.29356 3.54598 6.40398C3.34771 6.73766 3.16829 7.08386 3.00918 7.44108ZM4.69873 5.1148C4.62471 5.04078 4.62013 4.92206 4.68987 4.84398C6.52289 2.79186 9.18927 1.5 12.1574 1.5C17.6855 1.5 22.167 5.98146 22.167 11.5096C22.167 14.4777 20.8751 17.1441 18.823 18.9771C18.745 19.0469 18.6262 19.0423 18.5522 18.9683L4.69873 5.1148Z",fill:"#6777FF"})),m.createElement("defs",null,m.createElement("clipPath",{id:"clip0_5645_169"},m.createElement("rect",{width:20,height:20,fill:"white",transform:"translate(2.16699 1.5)"})))),ste=e=>m.createElement("svg",{"xmlns:dc":"http://purl.org/dc/elements/1.1/","xmlns:cc":"http://creativecommons.org/ns#","xmlns:rdf":"http://www.w3.org/1999/02/22-rdf-syntax-ns#","xmlns:svg":"http://www.w3.org/2000/svg",xmlns:"http://www.w3.org/2000/svg","xmlns:sodipodi":"http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd","xmlns:inkscape":"http://www.inkscape.org/namespaces/inkscape",width:"170mm",height:"173mm",viewBox:"0 0 170 173",id:"svg8","inkscape:version":"1.0.2 (e86c870879, 2021-01-15, custom)","sodipodi:docname":"cldrnw.svg",...e},m.createElement("defs",{id:"defs2"}),m.createElement("sodipodi:namedview",{id:"base",pagecolor:"#ffffff",bordercolor:"#666666",borderopacity:1,"inkscape:pageopacity":0,"inkscape:pageshadow":2,"inkscape:zoom":1,"inkscape:cx":446.39757,"inkscape:cy":364.37241,"inkscape:document-units":"mm","inkscape:current-layer":"layer2","inkscape:document-rotation":0,showgrid:"false","inkscape:window-width":1920,"inkscape:window-height":1017,"inkscape:window-x":1912,"inkscape:window-y":-8,"inkscape:window-maximized":1}),m.createElement("metadata",{id:"metadata5"},m.createElement("rdf:RDF",null,m.createElement("cc:Work",{"rdf:about":""},m.createElement("dc:format",null,"image/svg+xml"),m.createElement("dc:type",{"rdf:resource":"http://purl.org/dc/dcmitype/StillImage"}),m.createElement("dc:title",null)))),m.createElement("g",{"inkscape:groupmode":"layer",id:"layer2","inkscape:label":"Capa 2",style:{opacity:1}},m.createElement("path",{id:"rect862",style:{fill:"#1b64b6",fillOpacity:1,fillRule:"evenodd",strokeWidth:6.46864,strokeLinecap:"square",paintOrder:"markers fill stroke"},d:"M 7.9243621,0.40426573 H 162.081 c 4.29879,0 7.75955,3.45686397 7.75955,7.75081597 V 36.958129 c 0,4.293952 -3.46076,7.750816 -7.75955,7.750816 H 7.9243621 c -4.29883,0 -7.75961003,-3.456864 -7.75961003,-7.750816 V 8.1550817 c 0,-4.293952 3.46078003,-7.75081597 7.75961003,-7.75081597 z"}),m.createElement("rect",{style:{fill:"#2179d2",fillOpacity:1,fillRule:"evenodd",stroke:"none",strokeWidth:6.46499,strokeLinecap:"square",paintOrder:"markers fill stroke"},id:"rect865",width:53.482864,height:47.625,x:.21232992,y:30.049105,ry:0}),m.createElement("rect",{style:{fill:"#5edafe",fillOpacity:1,fillRule:"evenodd",strokeWidth:6.46499,strokeLinecap:"square",paintOrder:"markers fill stroke"},id:"rect865-6",width:53.483627,height:47.625,x:116.33598,y:30.049105,ry:0}),m.createElement("rect",{style:{fill:"#3ca8e8",fillOpacity:1,fillRule:"evenodd",strokeWidth:6.99654,strokeLinecap:"square",paintOrder:"markers fill stroke"},id:"rect865-5",width:62.640022,height:47.625,x:53.695198,y:30.049105,ry:0}),m.createElement("rect",{style:{fill:"#1b64b6",fillOpacity:1,fillRule:"evenodd",strokeWidth:6.46499,strokeLinecap:"square",paintOrder:"markers fill stroke"},id:"rect865-1",width:53.483627,height:47.625,x:.21232992,y:77.674103,ry:0}),m.createElement("rect",{style:{fill:"#3ca8e8",fillOpacity:1,fillRule:"evenodd",strokeWidth:6.46499,strokeLinecap:"square",paintOrder:"markers fill stroke"},id:"rect865-6-7",width:53.483627,height:47.625,x:116.33598,y:77.674103,ry:0}),m.createElement("rect",{style:{fill:"#2179d2",fillOpacity:1,fillRule:"evenodd",strokeWidth:6.99654,strokeLinecap:"square",paintOrder:"markers fill stroke"},id:"rect865-5-7",width:62.640022,height:47.625,x:53.695198,y:77.674103,ry:0}),m.createElement("rect",{style:{fill:"#154a8a",fillOpacity:1,fillRule:"evenodd",strokeWidth:6.46499,strokeLinecap:"square",paintOrder:"markers fill stroke"},id:"rect865-1-1",width:53.483627,height:47.625,x:.21232992,y:125.29911,ry:7.7508163}),m.createElement("rect",{style:{fill:"#1b64b6",fillOpacity:1,fillRule:"evenodd",strokeWidth:6.99654,strokeLinecap:"square",paintOrder:"markers fill stroke"},id:"rect865-5-7-8",width:62.639313,height:47.624989,x:53.695961,y:125.29911,ry:0}),m.createElement("rect",{style:{fill:"#2179d2",fillOpacity:1,fillRule:"evenodd",strokeWidth:6.46499,strokeLinecap:"square",paintOrder:"markers fill stroke"},id:"rect865-1-1-4",width:53.483627,height:47.625,x:116.33598,y:125.29911,ry:7.7508163}),m.createElement("path",{style:{fill:"#154a8a",fillOpacity:1,stroke:"none",strokeWidth:"0.264583px",strokeLinecap:"butt",strokeLinejoin:"miter",strokeOpacity:1},d:"m 0.21378207,125.2991 53.48140993,1e-5 0.003,47.62499 H 8.4247021 l -8.21573003,-8.21568 z",id:"path1012","sodipodi:nodetypes":"cccccc"}),m.createElement("path",{style:{fill:"#2179d2",fillOpacity:1,stroke:"none",strokeWidth:"0.264583px",strokeLinecap:"butt",strokeLinejoin:"miter",strokeOpacity:1},d:"m 169.82154,125.29911 h -53.48556 l 0.002,47.625 h 45.27325 l 8.21568,-8.21568 z",id:"path1012-9","sodipodi:nodetypes":"cccccc"}))),_M=e=>m.createElement("svg",{width:20,height:20,viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg",...e},m.createElement("path",{d:"M7.82373 7.35312L7.82391 7.35249L11.6726 9.65779L13.9659 8.6927C14.4319 8.49124 14.9344 8.38793 15.4421 8.38843C15.5267 8.38843 15.6103 8.39227 15.6935 8.39782C15.4178 7.32269 14.8357 6.35079 14.0181 5.60023C13.2004 4.84966 12.1823 4.35275 11.0876 4.16987C9.99283 3.98699 8.86853 4.12601 7.8513 4.57005C6.83408 5.01409 5.96772 5.74403 5.35751 6.67115C5.37712 6.67091 5.39643 6.66968 5.41608 6.66968C6.26666 6.66852 7.10061 6.90525 7.82373 7.35312Z",fill:"#0364B8"}),m.createElement("path",{d:"M7.82449 7.3525L7.82431 7.35313C7.10119 6.90526 6.26724 6.66853 5.41666 6.66968C5.39701 6.66968 5.37767 6.67091 5.35809 6.67116C4.52559 6.68147 3.71163 6.91843 3.00368 7.35659C2.29574 7.79475 1.72058 8.41754 1.34 9.15804C0.959422 9.89853 0.787821 10.7287 0.843637 11.5594C0.899452 12.3901 1.18057 13.1899 1.65679 13.8728L5.05075 12.4446L6.55948 11.8097L9.91879 10.396L11.6731 9.65779L7.82449 7.3525Z",fill:"#0078D4"}),m.createElement("path",{d:"M15.6938 8.39782C15.6106 8.39227 15.527 8.38843 15.4424 8.38843C14.9347 8.38793 14.4323 8.49163 13.9663 8.6931L11.6728 9.65779L12.3378 10.0561L14.5178 11.3619L15.4688 11.9316L18.7209 13.8795C19.0164 13.331 19.1695 12.717 19.1663 12.0939C19.163 11.4709 19.0035 10.8586 18.7023 10.3131C18.4011 9.76768 17.9678 9.30653 17.4422 8.97191C16.9166 8.63729 16.3154 8.4399 15.6938 8.39782Z",fill:"#1490DF"}),m.createElement("path",{d:"M15.4693 11.9315L14.5182 11.3618L12.3383 10.0561L11.6732 9.65771L9.9189 10.396L6.55959 11.8096L5.05086 12.4445L1.6569 13.8727C2.07866 14.4791 2.64091 14.9744 3.29564 15.3163C3.95037 15.6583 4.67813 15.8367 5.41676 15.8363H15.4428C16.115 15.8365 16.7748 15.6547 17.352 15.3101C17.9292 14.9656 18.4024 14.4712 18.7213 13.8794L15.4693 11.9315Z",fill:"#28A8EA"})),ite=e=>m.createElement("svg",{id:"Livello_1","xmlns:x":"http://ns.adobe.com/Extensibility/1.0/","xmlns:i":"http://ns.adobe.com/AdobeIllustrator/10.0/","xmlns:graph":"http://ns.adobe.com/Graphs/1.0/",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",x:"0px",y:"0px",viewBox:"0 0 1831.085 1703.335",enableBackground:"new 0 0 1831.085 1703.335",xmlSpace:"preserve",...e},m.createElement("path",{fill:"#0A2767",d:"M1831.083,894.25c0.1-14.318-7.298-27.644-19.503-35.131h-0.213l-0.767-0.426l-634.492-375.585  c-2.74-1.851-5.583-3.543-8.517-5.067c-24.498-12.639-53.599-12.639-78.098,0c-2.934,1.525-5.777,3.216-8.517,5.067L446.486,858.693  l-0.766,0.426c-19.392,12.059-25.337,37.556-13.278,56.948c3.553,5.714,8.447,10.474,14.257,13.868l634.492,375.585  c2.749,1.835,5.592,3.527,8.517,5.068c24.498,12.639,53.599,12.639,78.098,0c2.925-1.541,5.767-3.232,8.517-5.068l634.492-375.585  C1823.49,922.545,1831.228,908.923,1831.083,894.25z"}),m.createElement("path",{fill:"#0364B8",d:"M520.453,643.477h416.38v381.674h-416.38V643.477z M1745.917,255.5V80.908  c1-43.652-33.552-79.862-77.203-80.908H588.204C544.552,1.046,510,37.256,511,80.908V255.5l638.75,170.333L1745.917,255.5z"}),m.createElement("path",{fill:"#0078D4",d:"M511,255.5h425.833v383.25H511V255.5z"}),m.createElement("path",{fill:"#28A8EA",d:"M1362.667,255.5H936.833v383.25L1362.667,1022h383.25V638.75L1362.667,255.5z"}),m.createElement("path",{fill:"#0078D4",d:"M936.833,638.75h425.833V1022H936.833V638.75z"}),m.createElement("path",{fill:"#0364B8",d:"M936.833,1022h425.833v383.25H936.833V1022z"}),m.createElement("path",{fill:"#14447D",d:"M520.453,1025.151h416.38v346.969h-416.38V1025.151z"}),m.createElement("path",{fill:"#0078D4",d:"M1362.667,1022h383.25v383.25h-383.25V1022z"}),m.createElement("linearGradient",{id:"SVGID_1_",gradientUnits:"userSpaceOnUse",x1:1128.4584,y1:811.0833,x2:1128.4584,y2:1.9982,gradientTransform:"matrix(1 0 0 -1 0 1705.3334)"},m.createElement("stop",{offset:0,style:{stopColor:"#35b8f1"}}),m.createElement("stop",{offset:1,style:{stopColor:"#28a8ea"}})),m.createElement("path",{fill:"url(#SVGID_1_)",d:"M1811.58,927.593l-0.809,0.426l-634.492,356.848c-2.768,1.703-5.578,3.321-8.517,4.769  c-10.777,5.132-22.481,8.029-34.407,8.517l-34.663-20.27c-2.929-1.47-5.773-3.105-8.517-4.897L447.167,906.003h-0.298  l-21.036-11.753v722.384c0.328,48.196,39.653,87.006,87.849,86.7h1230.914c0.724,0,1.363-0.341,2.129-0.341  c10.18-0.651,20.216-2.745,29.808-6.217c4.145-1.756,8.146-3.835,11.966-6.217c2.853-1.618,7.75-5.152,7.75-5.152  c21.814-16.142,34.726-41.635,34.833-68.772V894.25C1831.068,908.067,1823.616,920.807,1811.58,927.593z"}),m.createElement("path",{opacity:.5,fill:"#0A2767",enableBackground:"new    ",d:"M1797.017,891.397v44.287l-663.448,456.791L446.699,906.301  c0-0.235-0.191-0.426-0.426-0.426l0,0l-63.023-37.899v-31.938l25.976-0.426l54.932,31.512l1.277,0.426l4.684,2.981  c0,0,645.563,368.346,647.267,369.197l24.698,14.478c2.129-0.852,4.258-1.703,6.813-2.555  c1.278-0.852,640.879-360.681,640.879-360.681L1797.017,891.397z"}),m.createElement("path",{fill:"#1490DF",d:"M1811.58,927.593l-0.809,0.468l-634.492,356.848c-2.768,1.703-5.578,3.321-8.517,4.769  c-24.641,12.038-53.457,12.038-78.098,0c-2.918-1.445-5.76-3.037-8.517-4.769L446.657,928.061l-0.766-0.468  c-12.25-6.642-19.93-19.409-20.057-33.343v722.384c0.305,48.188,39.616,87.004,87.803,86.7c0.001,0,0.002,0,0.004,0h1229.636  c48.188,0.307,87.5-38.509,87.807-86.696c0-0.001,0-0.002,0-0.004V894.25C1831.068,908.067,1823.616,920.807,1811.58,927.593z"}),m.createElement("path",{opacity:.1,enableBackground:"new    ",d:"M1185.52,1279.629l-9.496,5.323c-2.752,1.752-5.595,3.359-8.517,4.812  c-10.462,5.135-21.838,8.146-33.47,8.857l241.405,285.479l421.107,101.476c11.539-8.716,20.717-20.178,26.7-33.343L1185.52,1279.629  z"}),m.createElement("path",{opacity:.05,enableBackground:"new    ",d:"M1228.529,1255.442l-52.505,29.51c-2.752,1.752-5.595,3.359-8.517,4.812  c-10.462,5.135-21.838,8.146-33.47,8.857l113.101,311.838l549.538,74.989c21.649-16.254,34.394-41.743,34.407-68.815v-9.326  L1228.529,1255.442z"}),m.createElement("path",{fill:"#28A8EA",d:"M514.833,1703.333h1228.316c18.901,0.096,37.335-5.874,52.59-17.033l-697.089-408.331  c-2.929-1.47-5.773-3.105-8.517-4.897L447.125,906.088h-0.298l-20.993-11.838v719.914  C425.786,1663.364,465.632,1703.286,514.833,1703.333C514.832,1703.333,514.832,1703.333,514.833,1703.333z"}),m.createElement("path",{opacity:.1,enableBackground:"new    ",d:"M1022,418.722v908.303c-0.076,31.846-19.44,60.471-48.971,72.392  c-9.148,3.931-19,5.96-28.957,5.962H425.833V383.25H511v-42.583h433.073C987.092,340.83,1021.907,375.702,1022,418.722z"}),m.createElement("path",{opacity:.2,enableBackground:"new    ",d:"M979.417,461.305v908.302c0.107,10.287-2.074,20.469-6.388,29.808  c-11.826,29.149-40.083,48.273-71.54,48.417H425.833V383.25h475.656c12.356-0.124,24.533,2.958,35.344,8.943  C962.937,405.344,979.407,432.076,979.417,461.305z"}),m.createElement("path",{opacity:.2,enableBackground:"new    ",d:"M979.417,461.305v823.136c-0.208,43-34.928,77.853-77.927,78.225H425.833V383.25  h475.656c12.356-0.124,24.533,2.958,35.344,8.943C962.937,405.344,979.407,432.076,979.417,461.305z"}),m.createElement("path",{opacity:.2,enableBackground:"new    ",d:"M936.833,461.305v823.136c-0.046,43.067-34.861,78.015-77.927,78.225H425.833  V383.25h433.072c43.062,0.023,77.951,34.951,77.927,78.013C936.833,461.277,936.833,461.291,936.833,461.305z"}),m.createElement("linearGradient",{id:"SVGID_2_",gradientUnits:"userSpaceOnUse",x1:162.7469,y1:1383.0741,x2:774.0864,y2:324.2592,gradientTransform:"matrix(1 0 0 -1 0 1705.3334)"},m.createElement("stop",{offset:0,style:{stopColor:"#1784d9"}}),m.createElement("stop",{offset:.5,style:{stopColor:"#107ad5"}}),m.createElement("stop",{offset:1,style:{stopColor:"#0a63c9"}})),m.createElement("path",{fill:"url(#SVGID_2_)",d:"M78.055,383.25h780.723c43.109,0,78.055,34.947,78.055,78.055v780.723  c0,43.109-34.946,78.055-78.055,78.055H78.055c-43.109,0-78.055-34.947-78.055-78.055V461.305  C0,418.197,34.947,383.25,78.055,383.25z"}),m.createElement("path",{fill:"#FFFFFF",d:"M243.96,710.631c19.238-40.988,50.29-75.289,89.17-98.495c43.057-24.651,92.081-36.94,141.675-35.515  c45.965-0.997,91.321,10.655,131.114,33.683c37.414,22.312,67.547,55.004,86.742,94.109c20.904,43.09,31.322,90.512,30.405,138.396  c1.013,50.043-9.706,99.628-31.299,144.783c-19.652,40.503-50.741,74.36-89.425,97.388c-41.327,23.734-88.367,35.692-136.011,34.578  c-46.947,1.133-93.303-10.651-134.01-34.067c-37.738-22.341-68.249-55.07-87.892-94.28c-21.028-42.467-31.57-89.355-30.745-136.735  C212.808,804.859,223.158,755.686,243.96,710.631z M339.006,941.858c10.257,25.912,27.651,48.385,50.163,64.812  c22.93,16.026,50.387,24.294,78.353,23.591c29.783,1.178,59.14-7.372,83.634-24.358c22.227-16.375,39.164-38.909,48.715-64.812  c10.677-28.928,15.946-59.572,15.543-90.404c0.33-31.127-4.623-62.084-14.649-91.554c-8.855-26.607-25.246-50.069-47.182-67.537  c-23.88-17.79-53.158-26.813-82.91-25.55c-28.572-0.74-56.644,7.593-80.184,23.804c-22.893,16.496-40.617,39.168-51.1,65.365  c-23.255,60.049-23.376,126.595-0.341,186.728L339.006,941.858z"}),m.createElement("path",{fill:"#50D9FF",d:"M1362.667,255.5h383.25v383.25h-383.25V255.5z"})),ote=e=>m.createElement("svg",{width:24,height:24,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",...e},m.createElement("g",{clipPath:"url(#clip0_5645_179)"},m.createElement("path",{d:"M15.5719 9.75H20.57C21.0422 9.75 21.425 10.1328 21.425 10.605V15.1576C21.425 16.8931 20.0181 18.3 18.2827 18.3H18.2678C16.5323 18.3002 15.1253 16.8936 15.125 15.1581C15.125 15.1579 15.125 15.1578 15.125 15.1576V10.1969C15.125 9.95006 15.3251 9.75 15.5719 9.75Z",fill:"#5059C9"}),m.createElement("path",{d:"M18.9498 8.84999C20.0682 8.84999 20.9748 7.94336 20.9748 6.82499C20.9748 5.70661 20.0682 4.79999 18.9498 4.79999C17.8314 4.79999 16.9248 5.70661 16.9248 6.82499C16.9248 7.94336 17.8314 8.84999 18.9498 8.84999Z",fill:"#5059C9"}),m.createElement("path",{d:"M12.6501 8.85001C14.2655 8.85001 15.5751 7.54044 15.5751 5.925C15.5751 4.30957 14.2655 3 12.6501 3C11.0347 3 9.7251 4.30957 9.7251 5.925C9.7251 7.54044 11.0347 8.85001 12.6501 8.85001Z",fill:"#7B83EB"}),m.createElement("path",{d:"M16.5502 9.75H8.29988C7.8333 9.76155 7.46421 10.1488 7.47503 10.6154V15.8079C7.40988 18.6079 9.62511 20.9315 12.425 21C15.225 20.9315 17.4402 18.6079 17.375 15.8079V10.6154C17.3859 10.1488 17.0168 9.76155 16.5502 9.75Z",fill:"#7B83EB"}),m.createElement("path",{opacity:.1,d:"M12.8749 9.75V17.0265C12.8726 17.3602 12.6704 17.66 12.3619 17.787C12.2636 17.8286 12.158 17.85 12.0514 17.85H7.87085C7.81235 17.7015 7.75835 17.553 7.71334 17.4C7.55582 16.8836 7.47545 16.3469 7.47484 15.807V10.614C7.46402 10.1482 7.83251 9.76155 8.29834 9.75H12.8749Z",fill:"currentColor"}),m.createElement("path",{opacity:.2,d:"M12.4249 9.75V17.4765C12.4248 17.5832 12.4034 17.6888 12.3619 17.787C12.2348 18.0956 11.935 18.2978 11.6014 18.3H8.08235C8.00585 18.1515 7.93385 18.003 7.87085 17.85C7.80784 17.697 7.75835 17.553 7.71334 17.4C7.55582 16.8837 7.47545 16.3469 7.47484 15.807V10.614C7.46402 10.1482 7.83251 9.76155 8.29834 9.75H12.4249Z",fill:"currentColor"}),m.createElement("path",{opacity:.2,d:"M12.4248 9.75V16.5765C12.4214 17.0299 12.0547 17.3966 11.6013 17.4H7.71334C7.55582 16.8837 7.47545 16.3469 7.47484 15.807V10.614C7.46402 10.1482 7.83251 9.76155 8.29834 9.75H12.4248Z",fill:"currentColor"}),m.createElement("path",{opacity:.2,d:"M11.9748 9.75V16.5765C11.9714 17.0299 11.6047 17.3966 11.1513 17.4H7.71334C7.55582 16.8837 7.47545 16.3469 7.47484 15.807V10.614C7.46402 10.1482 7.83251 9.76155 8.29834 9.75H11.9748Z",fill:"currentColor"}),m.createElement("path",{opacity:.1,d:"M12.8747 7.4235V8.841C12.7982 8.84549 12.7262 8.85 12.6497 8.85C12.5732 8.85 12.5012 8.8455 12.4247 8.841C12.2728 8.83092 12.1221 8.80682 11.9747 8.769C11.0634 8.5532 10.3106 7.91412 9.94967 7.05C9.88757 6.90489 9.83936 6.75421 9.80566 6.60001H12.0512C12.5053 6.60173 12.8729 6.9694 12.8747 7.4235Z",fill:"currentColor"}),m.createElement("path",{opacity:.2,d:"M12.4252 7.87348V8.84098C12.2733 8.8309 12.1227 8.8068 11.9752 8.76899C11.0639 8.55318 10.3111 7.91411 9.9502 7.04999H11.6017C12.0558 7.05171 12.4235 7.41939 12.4252 7.87348Z",fill:"currentColor"}),m.createElement("path",{opacity:.2,d:"M12.4252 7.87348V8.84098C12.2733 8.8309 12.1227 8.8068 11.9752 8.76899C11.0639 8.55318 10.3111 7.91411 9.9502 7.04999H11.6017C12.0558 7.05171 12.4235 7.41939 12.4252 7.87348Z",fill:"currentColor"}),m.createElement("path",{opacity:.2,d:"M11.9752 7.87349V8.76899C11.0639 8.55318 10.3111 7.91411 9.9502 7.04999H11.1517C11.6058 7.05172 11.9735 7.4194 11.9752 7.87349Z",fill:"currentColor"}),m.createElement("path",{d:"M2.90004 7.04999H11.1503C11.6059 7.04999 11.9752 7.41929 11.9752 7.87483V16.1251C11.9752 16.5807 11.6059 16.95 11.1503 16.95H2.90004C2.44449 16.95 2.0752 16.5807 2.0752 16.1251V7.87483C2.0752 7.41929 2.4445 7.04999 2.90004 7.04999Z",fill:"url(#paint0_linear_5645_179)"}),m.createElement("path",{d:"M9.1956 10.1901H7.54635V14.6811H6.4956V10.1901H4.854V9.31891H9.1956V10.1901Z",fill:"white"})),m.createElement("defs",null,m.createElement("linearGradient",{id:"paint0_linear_5645_179",x1:3.79503,y1:6.40547,x2:10.2554,y2:17.5945,gradientUnits:"userSpaceOnUse"},m.createElement("stop",{stopColor:"#5A62C3"}),m.createElement("stop",{offset:.5,stopColor:"#4D55BD"}),m.createElement("stop",{offset:1,stopColor:"#3940AB"})),m.createElement("clipPath",{id:"clip0_5645_179"},m.createElement("rect",{width:19.35,height:18,fill:"white",transform:"translate(2.0752 3)"})))),F3=e=>m.createElement("svg",{width:24,height:24,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",...e},m.createElement("path",{d:"M6.1039 5.90972C6.68754 6.38386 6.90648 6.34768 8.00238 6.27457L18.3342 5.65418C18.5534 5.65418 18.3711 5.43557 18.2981 5.39924L16.5822 4.15879C16.2534 3.90354 15.8153 3.61122 14.9758 3.68434L4.9715 4.41403C4.60665 4.45021 4.53377 4.63262 4.67909 4.77886L6.1039 5.90972ZM6.72422 8.31752V19.1884C6.72422 19.7726 7.01618 19.9912 7.6733 19.955L19.028 19.298C19.6854 19.2619 19.7586 18.86 19.7586 18.3854V7.58753C19.7586 7.1137 19.5763 6.85816 19.1739 6.89464L7.30815 7.58753C6.87027 7.62433 6.72422 7.84337 6.72422 8.31752ZM17.9335 8.90066C18.0063 9.22933 17.9335 9.55768 17.6043 9.5946L17.0571 9.70361V17.7292C16.5822 17.9845 16.1441 18.1304 15.7791 18.1304C15.1947 18.1304 15.0484 17.9479 14.6107 17.401L11.0321 11.783V17.2186L12.1645 17.4741C12.1645 17.4741 12.1645 18.1304 11.2509 18.1304L8.73222 18.2765C8.65905 18.1304 8.73222 17.7659 8.98769 17.6929L9.64494 17.5108V10.324L8.73237 10.2509C8.6592 9.92222 8.84146 9.44837 9.35298 9.41159L12.0549 9.22946L15.7791 14.9205V9.88603L14.8296 9.77704C14.7567 9.37526 15.0484 9.08353 15.4135 9.04735L17.9335 8.90066ZM4.13151 3.4291L14.5376 2.66279C15.8155 2.55318 16.1443 2.6266 16.9475 3.21005L20.2692 5.54473C20.8173 5.9462 21 6.05551 21 6.49316V19.298C21 20.1005 20.7077 20.5751 19.6856 20.6477L7.60101 21.3775C6.83376 21.4141 6.4686 21.3047 6.0668 20.7937L3.6206 17.6199C3.18227 17.0357 3 16.5986 3 16.0873V4.70545C3 4.04918 3.29242 3.50177 4.13151 3.4291Z",fill:"currentColor"})),sp=e=>m.createElement("svg",{width:24,height:24,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",...e},m.createElement("path",{d:"M6.21613 14.6433C6.21613 15.8058 5.27738 16.7453 4.11588 16.7453C2.95437 16.7453 2.01562 15.8058 2.01562 14.6433C2.01562 13.4809 2.95437 12.5414 4.11588 12.5414H6.21613V14.6433ZM7.26625 14.6433C7.26625 13.4809 8.205 12.5414 9.3665 12.5414C10.528 12.5414 11.4668 13.4809 11.4668 14.6433V19.8982C11.4668 21.0606 10.528 22.0001 9.3665 22.0001C8.205 22.0001 7.26625 21.0606 7.26625 19.8982V14.6433Z",fill:"#E01E5A"}),m.createElement("path",{d:"M9.36679 6.20386C8.20529 6.20386 7.26654 5.26436 7.26654 4.10193C7.26654 2.9395 8.20529 2 9.36679 2C10.5283 2 11.467 2.9395 11.467 4.10193V6.20386H9.36679ZM9.36679 7.27074C10.5283 7.27074 11.467 8.21024 11.467 9.37267C11.467 10.5351 10.5283 11.4746 9.36679 11.4746H4.10025C2.93875 11.4746 2 10.5351 2 9.37267C2 8.21024 2.93875 7.27074 4.10025 7.27074H9.36679Z",fill:"#36C5F0"}),m.createElement("path",{d:"M17.7838 9.37267C17.7838 8.21024 18.7226 7.27074 19.8841 7.27074C21.0456 7.27074 21.9843 8.21024 21.9843 9.37267C21.9843 10.5351 21.0456 11.4746 19.8841 11.4746H17.7838V9.37267ZM16.7337 9.37267C16.7337 10.5351 15.795 11.4746 14.6335 11.4746C13.472 11.4746 12.5332 10.5351 12.5332 9.37267V4.10193C12.5332 2.9395 13.472 2 14.6335 2C15.795 2 16.7337 2.9395 16.7337 4.10193V9.37267Z",fill:"#2EB67D"}),m.createElement("path",{d:"M14.6335 17.7962C15.795 17.7962 16.7337 18.7357 16.7337 19.8982C16.7337 21.0606 15.795 22.0001 14.6335 22.0001C13.472 22.0001 12.5332 21.0606 12.5332 19.8982V17.7962H14.6335ZM14.6335 16.7453C13.472 16.7453 12.5332 15.8058 12.5332 14.6433C12.5332 13.4809 13.472 12.5414 14.6335 12.5414H19.9C21.0615 12.5414 22.0002 13.4809 22.0002 14.6433C22.0002 15.8058 21.0615 16.7453 19.9 16.7453H14.6335Z",fill:"#ECB22E"}));var rn=(e=>(e.CODEX="CODEX",e.PROMPT_TEXT_AREA="PROMPT_TEXT_AREA",e.CONNECTOR_SETTING="CONNECTOR_SETTING",e.ADMIN_SETTING="ADMIN_SETTING",e.SLURM="SLURM",e.DEEP_RESEARCH="DEEP_RESEARCH",e.JIT_PLUGIN="JIT_PLUGIN",e.N7JUPD="N7JUPD",e.SETTINGS="SETTINGS",e))(rn||{});const ate=ze({github:{id:"platformConnectors.github",defaultMessage:"GitHub"},hubspot:{id:"platformConnectors.hubspot",defaultMessage:"HubSpot"},googleDrive:{id:"platformConnectors.googleDrive",defaultMessage:"Google Drive"},gmail:{id:"platformConnectors.gmail",defaultMessage:"Gmail"},googleContacts:{id:"platformConnectors.googleContacts",defaultMessage:"Google Contacts"},gcal:{id:"platformConnectors.gcal",defaultMessage:"Google Calendar"},dropbox:{id:"platformConnectors.dropbox",defaultMessage:"Dropbox"},linear:{id:"platformConnectors.linear",defaultMessage:"Linear"},sharepoint:{id:"platformConnectors.sharepoint",defaultMessage:"SharePoint"},outlookEmail:{id:"GJeJu+",defaultMessage:"Outlook Email"},outlookCalendar:{id:"ZaCgzD",defaultMessage:"Outlook Calendar"},teams:{id:"1F0GKN",defaultMessage:"Teams"},box:{id:"l5cshA",defaultMessage:"Box"},intercom:{id:"IeKzI2",defaultMessage:"Intercom"},notion:{id:"ewTDRt",defaultMessage:"Notion"},canva:{id:"2oFmyl",defaultMessage:"Canva"},slack:{id:"Do199+",defaultMessage:"Slack"},disabledByAdmin:{id:"2+q1p8",defaultMessage:"Your admin has not enabled this connector."}}),cte={},Yt={...ate,...cte},pve={[M.GITHUB_CONNECTOR]:{title:Yt.github,icon:Jee},[M.GDRIVE_ACTION_CONNECTOR]:{title:Yt.googleDrive,icon:yc},[M.DROPBOX_CONNECTOR]:{title:Yt.dropbox,icon:Zee},[M.HUBSPOT_CONNECTOR]:{title:Yt.hubspot,icon:tte},[M.LINEAR_CONNECTOR]:{title:Yt.linear,icon:rte},[M.SHAREPOINT_CONNECTOR]:{title:Yt.sharepoint,icon:_M},[M.TEAMS_CONNECTOR]:{title:Yt.teams,icon:ote},[M.OUTLOOK_EMAIL_CONNECTOR]:{title:Yt.outlookEmail,icon:ite},[M.OUTLOOK_CALENDAR_CONNECTOR]:{title:Yt.outlookCalendar,icon:ste},[M.BOX_CONNECTOR]:{title:Yt.box,icon:Kee},[M.INTERCOM_CONNECTOR]:{title:Yt.intercom,icon:nte},[M.NOTION_CONNECTOR]:{title:Yt.notion,icon:F3},[M.GOOGLE_CONTACTS_CONNECTOR]:{title:Yt.googleContacts,icon:ete},[M.GCAL_CONNECTOR]:{title:Yt.gcal,icon:Xee},[M.GMAIL_CONNECTOR]:{title:Yt.gmail,icon:Qee},[M.CANVA_CONNECTOR]:{title:Yt.canva,icon:Yee},[M.SLACK_CONNECTOR]:{title:Yt.slack,icon:sp}},lte={github:M.GITHUB_CONNECTOR,google_drive:M.GDRIVE_ACTION_CONNECTOR,dropbox:M.DROPBOX_CONNECTOR,linear:M.LINEAR_CONNECTOR,hubspot:M.HUBSPOT_CONNECTOR,sharepoint:M.SHAREPOINT_CONNECTOR,google_calendar:M.GCAL_CONNECTOR,gmail:M.GMAIL_CONNECTOR,google_contacts:M.GOOGLE_CONTACTS_CONNECTOR,teams:M.TEAMS_CONNECTOR,outlook_email:M.OUTLOOK_EMAIL_CONNECTOR,outlook_calendar:M.OUTLOOK_CALENDAR_CONNECTOR,box:M.BOX_CONNECTOR,intercom:M.INTERCOM_CONNECTOR,notion:M.NOTION_CONNECTOR,canva:M.CANVA_CONNECTOR,slack:M.SLACK_CONNECTOR},ip=({enabled:e=!0,includeDisabledByAdmin:t=!1,productSku:n}={})=>{const{platformConnectors:r,isLoading:s}=_u(e,n);return{availableConnectors:m.useMemo(()=>{const o=Array.from(r.values()),a=o.filter(l=>l.connector_type!=="MCP").map(l=>({...l,type:cu[l.id]})),c=o.filter(l=>l.connector_type==="MCP").map(l=>({...l,type:Yl.MCP_CONNECTOR}));return[...a,...c].filter(l=>!!l.type&&(t||l.status!=="DISABLED_BY_ADMIN"))},[r,t]),isLoading:s}},ute=()=>{const e=Y(),t=zt(e,"3747383021"),n=we(e,"3544641259"),r=m.useMemo(()=>{const s=Object.entries(lte).reduce((o,[a,c])=>(t.get(a,!1)&&o.push(c),o),[]);return t.get("mcp",!1)?[...s,Yl.MCP_CONNECTOR]:s},[t]);return{enabled:n,availableConnectorsType:n?r:[]}},dte=()=>{const e=Y();return we(e,"733205176")},mve=()=>{const e=Y();return we(e,"3207737252")},vM=({getDisabledAutoConnectors:e=!1})=>{const t=Y(),n=zt(t,"463092697")?.value,{data:r,isLoading:s}=gM(e),i=n?.autoConnectors??[];if(s)return{allAutoConnectors:i,enabledAutoConnectors:[],disabledAutoConnectors:[],isLoading:!0};if(!e)return{allAutoConnectors:i,enabledAutoConnectors:[],disabledAutoConnectors:[],isLoading:!1};const{disabledTools:o=[]}=r??{},a=o.map(TY).filter(l=>l!=null);a.includes(M.GMAIL_CONNECTOR)&&a.includes(M.GCAL_CONNECTOR)&&a.push(M.GOOGLE_CONTACTS_CONNECTOR);const c=i.filter(l=>!a.includes(l));return{allAutoConnectors:i,enabledAutoConnectors:c,disabledAutoConnectors:a,isLoading:!1}},fte=()=>{const e=T3(),t=!!(e?.enabled??!1),n=e?.autoConnectors??[],r=e?.enabledConnectors??[];return{enabled:t,availableConnectorsType:t?r:[],autoConnectors:n}},hte=()=>({enabled:!0,availableConnectorsType:[]}),pte=({includeDisabledByAdmin:e}={})=>{const{enabled:t,availableConnectorsType:n}=ute(),{availableConnectors:r,isLoading:s}=ip({enabled:t,includeDisabledByAdmin:e,productSku:rn.DEEP_RESEARCH}),i=m.useMemo(()=>r.filter(o=>n.includes(o.type)),[n,r]);return t?{enabled:!0,availableConnectors:i,isLoading:s}:{enabled:!1,availableConnectors:[],isLoading:!1}},gve=({includeDisabledByAdmin:e}={})=>{const{enabled:t,availableConnectorsType:n}=hte(),{availableConnectors:r,isLoading:s}=ip({enabled:t,includeDisabledByAdmin:e,productSku:rn.CODEX});return r.some(i=>i.type===M.GITHUB_CONNECTOR)&&n.includes(M.GITHUB_CONNECTOR)?{enabled:!0,isLoading:s,availableConnectors:r.filter(i=>i.type===M.GITHUB_CONNECTOR)}:{enabled:!1,availableConnectors:[],isLoading:!1}},j3=({includeDisabledByAdmin:e,includeAutoConnectors:t,filterDisabledAutoConnectors:n}={})=>{const r=fte();let s=r.availableConnectorsType;const i=Y(),o=we(i,"2768222595"),{enabledAutoConnectors:a,allAutoConnectors:c,isLoading:l}=vM({getDisabledAutoConnectors:o&&(r.autoConnectors??[]).length>0&&n}),u=o?n?a:c:[],d=r.enabled;t&&(s=[...new Set([...s,...u])]);const{availableConnectors:f,isLoading:h}=ip({enabled:d,includeDisabledByAdmin:e,productSku:rn.SLURM}),g=m.useMemo(()=>s.flatMap(_=>_===Yl.MCP_CONNECTOR?f.filter(v=>v.type===_):[f.find(v=>v.type===_)]).filter(_=>!!_),[s,f]);return d?{enabled:!0,availableConnectors:g,isLoading:l||h}:{enabled:!1,availableConnectors:[],isLoading:!1}},_ve=()=>{const e=gu(),{availableConnectors:t,isLoading:n}=ip({enabled:e,includeDisabledByAdmin:!0,productSku:rn.SETTINGS});return{enabled:!!(t&&t.length>0),isLoading:n,availableConnectors:t??[]}},yM=e=>{"use forget";const t=xe.c(17),{availableConnectors:n,fetchValidLinksOnly:r,productSku:s}=e,i=r===void 0?!1:r;let o;t[0]!==i||t[1]!==s?(o={fetchValidLinksOnly:i,productSku:s},t[0]=i,t[1]=s,t[2]=o):o=t[2];const{connectorLinks:a,isLoading:c}=ko(o);let l;t[3]!==a?(l=new Set(Array.from(a.values()).flatMap(vte)),t[3]=a,t[4]=l):l=t[4];const u=l;let d;if(t[5]!==n||t[6]!==u){let _;t[8]!==u?(_=v=>v.type!==Yl.MCP_CONNECTOR&&u.has(v.type),t[8]=u,t[9]=_):_=t[9],d=new Set(n.filter(_).map(yte)),t[5]=n,t[6]=u,t[7]=d}else d=t[7];const f=d;let h;t[10]!==n||t[11]!==a?(h=new Map,a.forEach((_,v)=>{if(!n.some(C=>C.id===v))return;const y=cu[v];y&&_.forEach(C=>{h.set(C.id,y)})}),t[10]=n,t[11]=a,t[12]=h):h=t[12];let g;return t[13]!==f||t[14]!==c||t[15]!==h?(g={connectedTypes:f,isLoading:c,linkIdToConnectedType:h},t[13]=f,t[14]=c,t[15]=h,t[16]=g):g=t[16],g},mte=e=>{"use forget";const t=xe.c(7);let n;t[0]!==e?(n=e===void 0?{}:e,t[0]=e,t[1]=n):n=t[1];const{enabled:r,includeAutoConnectors:s}=n,i=r===void 0?!0:r,o=s===void 0?!1:s;let a;t[2]!==o?(a={includeAutoConnectors:o},t[2]=o,t[3]=a):a=t[3];const{enabled:c,availableConnectors:l}=j3(a),u=c&&i;let d;return t[4]!==l||t[5]!==u?(d={enabled:u,availableConnectors:l,productSku:rn.SLURM},t[4]=l,t[5]=u,t[6]=d):d=t[6],yM(d)},vve=e=>{"use forget";const t=xe.c(5);let n;t[0]!==e?(n=e===void 0?{}:e,t[0]=e,t[1]=n):n=t[1];const{enabled:r}=n,s=r===void 0?!0:r,{enabled:i,availableConnectors:o}=pte(),a=i&&s;let c;return t[2]!==o||t[3]!==a?(c={enabled:a,availableConnectors:o,fetchValidLinksOnly:!0,productSku:rn.DEEP_RESEARCH},t[2]=o,t[3]=a,t[4]=c):c=t[4],yM(c)},gte=()=>!!T3()?.enablePopupRedirect,yve=()=>{const{connectedTypes:e,isLoading:t}=mte(),n=fM();if(t)return{anyConnectorEnabled:!1,anyAccessConnectorEnabled:!1,anySyncConnectorEnabled:!1,isLoading:!0};const r=e.entries.length>0,s=n??!1;return{anyConnectorEnabled:r||s,anyAccessConnectorEnabled:r,anySyncConnectorEnabled:s,isLoading:!1}};function _te(e){return cu[e.connector_id]}function vte(e){return e.map(_te)}function yte(e){return e.type}function Cte(e,t,n){try{const r=JSON.parse(window.localStorage.getItem(e)??"");return n(r)?r:t}catch{return t}}function bte(e,t){window.localStorage.setItem(e,JSON.stringify(t))}const Yw=vt(e=>({data:{},setItem:(t,n)=>e(r=>({data:{...r.data,[t]:n}}))}));function Ste(e,t,n){const[r,s]=m.useState(!1),i=Yw(c=>c.data[e]),o=Yw(c=>c.setItem);return m.useEffect(()=>{if(!r){const c=Cte(e,t,n);o(e,c),s(!0)}},[r,e,t,n,o]),m.useEffect(()=>{r&&bte(e,i)},[e,i,r]),[i??t,c=>{o(e,c)}]}const wte=window.location.host+"/ces",Ete="https",xte=`${Ete}://${wte}`;function Zw(e){return Array.isArray(e)?e.reduce((t,n)=>(t[n.key]=n.value,t),{}):e}var dn=(e=>(e.DEFAULT="default",e.INTERNAL="internal",e.CODEX="Wham",e.JAWBONE="jawbone",e.MOONSHINE="moonshine",e.CUSTOMIZE_CHATGPT="customize_chatgpt",e.WEB_SANDBOX="web_sandbox",e.ECOSYSTEM="ecosystem",e.CANVAS="canvas",e.COT_SUMMARIZER="cot_summarizer",e.CLASSMATES="classmates",e.REFERRALS="referrals",e.STUDENTS="students",e.TEAMS="teams",e.WEBSOCKET="ws",e.TATERTOT="tatertot",e.ECOSYSTEM_DEMO="ecosystem_demo",e))(dn||{});class Jw{counterMap=new Map;histMap=new Map}class Tte{metrics=new Jw;postUrl=`${xte}/statsc/flush`;postInterval=3e4;maxPostErrors=10;isScheduled=!1;numMetricPostErrors=0;numLostMetrics=0;count(t,n,r={},s=1){r=Zw(r);const i=this.makeKey(t,n,r);var o=this.metrics.counterMap;const a=o.get(i);a?a.value+=s:o.set(i,{namespace:t,metric:n,tags:r,value:s}),this.scheduleIfNeeded()}hist(t,n,r={},s){r=Zw(r);const i=this.makeKey(t,n,r);var o=this.metrics.histMap;const a=o.get(i);a?a.values.push(s):o.set(i,{namespace:t,metric:n,tags:r,values:[s]}),this.scheduleIfNeeded()}makeKey(t,n,r){const s=Object.entries(r).map(([i,o])=>`${i}=${o}`).sort().join(",");return`${t}:${n}:${s}`}scheduleIfNeeded(){this.isScheduled||(this.isScheduled=!0,this.schedule())}schedule(){setTimeout(()=>{this.postMetrics()},this.postInterval)}hasPendingMetrics(){return this.metrics.counterMap.size>0||this.metrics.histMap.size>0||this.numMetricPostErrors>0}async postMetrics(){var t=this.metrics;this.metrics=new Jw;var n=t.counterMap.size+t.histMap.size,r=Array.from(t.counterMap.values());this.numMetricPostErrors>0&&(r.push({namespace:"internal",metric:"post_errors",tags:{},value:this.numMetricPostErrors}),r.push({namespace:"internal",metric:"lost_metrics",tags:{},value:this.numLostMetrics}));const s={counters:r,histograms:Array.from(t.histMap.values()),client_type:"web"},i=JSON.stringify(s);try{await Ne.post(this.postUrl,s,{authOption:ht.Anonymous}),this.numMetricPostErrors=0}catch(o){o instanceof je||R.addError(o,{json:i}),this.numMetricPostErrors++,this.numLostMetrics+=n,this.numMetricPostErrors>this.maxPostErrors&&(R.addAction(`Exceeded maximum number of post errors (${this.maxPostErrors}). Dropping ${this.numLostMetrics} metrics.`),this.numMetricPostErrors=0,this.numLostMetrics=0)}this.hasPendingMetrics()?this.schedule():this.isScheduled=!1}}const Sn=new Tte;function ft(e){if(e===null||e===!0||e===!1)return NaN;var t=Number(e);return isNaN(t)?t:t<0?Math.ceil(t):Math.floor(t)}function ce(e,t){if(t.length<e)throw new TypeError(e+" argument"+(e>1?"s":"")+" required, but only "+t.length+" present")}function kd(e){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?kd=function(n){return typeof n}:kd=function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},kd(e)}function pe(e){ce(1,arguments);var t=Object.prototype.toString.call(e);return e instanceof Date||kd(e)==="object"&&t==="[object Date]"?new Date(e.getTime()):typeof e=="number"||t==="[object Number]"?new Date(e):((typeof e=="string"||t==="[object String]")&&typeof console<"u"&&(console.warn("Starting with v2.0.0-beta.1 date-fns doesn't accept strings as date arguments. Please use `parseISO` to parse strings. See: https://github.com/date-fns/date-fns/blob/master/docs/upgradeGuide.md#string-arguments"),console.warn(new Error().stack)),new Date(NaN))}function op(e,t){ce(2,arguments);var n=pe(e),r=ft(t);return isNaN(r)?new Date(NaN):(r&&n.setDate(n.getDate()+r),n)}function CM(e,t){ce(2,arguments);var n=pe(e),r=ft(t);if(isNaN(r))return new Date(NaN);if(!r)return n;var s=n.getDate(),i=new Date(n.getTime());i.setMonth(n.getMonth()+r+1,0);var o=i.getDate();return s>=o?i:(n.setFullYear(i.getFullYear(),i.getMonth(),s),n)}function Ote(e,t){ce(2,arguments);var n=pe(e).getTime(),r=ft(t);return new Date(n+r)}var kte={};function Cc(){return kte}function Tf(e,t){var n,r,s,i,o,a,c,l;ce(1,arguments);var u=Cc(),d=ft((n=(r=(s=(i=t?.weekStartsOn)!==null&&i!==void 0?i:t==null||(o=t.locale)===null||o===void 0||(a=o.options)===null||a===void 0?void 0:a.weekStartsOn)!==null&&s!==void 0?s:u.weekStartsOn)!==null&&r!==void 0?r:(c=u.locale)===null||c===void 0||(l=c.options)===null||l===void 0?void 0:l.weekStartsOn)!==null&&n!==void 0?n:0);if(!(d>=0&&d<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var f=pe(e),h=f.getDay(),g=(h<d?7:0)+h-d;return f.setDate(f.getDate()-g),f.setHours(0,0,0,0),f}function Bv(e){var t=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return t.setUTCFullYear(e.getFullYear()),e.getTime()-t.getTime()}function Of(e){ce(1,arguments);var t=pe(e);return t.setHours(0,0,0,0),t}var Ate=864e5;function bM(e,t){ce(2,arguments);var n=Of(e),r=Of(t),s=n.getTime()-Bv(n),i=r.getTime()-Bv(r);return Math.round((s-i)/Ate)}function SM(e,t){ce(2,arguments);var n=ft(t),r=n*7;return op(e,r)}function Mte(e,t){ce(2,arguments);var n=ft(t);return CM(e,n*12)}function C0(e,t){ce(2,arguments);var n=pe(e),r=pe(t),s=n.getTime()-r.getTime();return s<0?-1:s>0?1:s}var U3=6e4,wM=36e5;function EM(e,t){ce(2,arguments);var n=Of(e),r=Of(t);return n.getTime()===r.getTime()}function Ad(e){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Ad=function(n){return typeof n}:Ad=function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},Ad(e)}function Ite(e){return ce(1,arguments),e instanceof Date||Ad(e)==="object"&&Object.prototype.toString.call(e)==="[object Date]"}function Nte(e){if(ce(1,arguments),!Ite(e)&&typeof e!="number")return!1;var t=pe(e);return!isNaN(Number(t))}function Rte(e,t){ce(2,arguments);var n=pe(e),r=pe(t),s=n.getFullYear()-r.getFullYear(),i=n.getMonth()-r.getMonth();return s*12+i}function Qw(e,t){var n=e.getFullYear()-t.getFullYear()||e.getMonth()-t.getMonth()||e.getDate()-t.getDate()||e.getHours()-t.getHours()||e.getMinutes()-t.getMinutes()||e.getSeconds()-t.getSeconds()||e.getMilliseconds()-t.getMilliseconds();return n<0?-1:n>0?1:n}function Cve(e,t){ce(2,arguments);var n=pe(e),r=pe(t),s=Qw(n,r),i=Math.abs(bM(n,r));n.setDate(n.getDate()-s*i);var o=+(Qw(n,r)===-s),a=s*(i-o);return a===0?0:a}function Pte(e,t){return ce(2,arguments),pe(e).getTime()-pe(t).getTime()}var Xw={ceil:Math.ceil,round:Math.round,floor:Math.floor,trunc:function(t){return t<0?Math.ceil(t):Math.floor(t)}},Dte="trunc";function Lte(e){return e?Xw[e]:Xw[Dte]}function bve(e,t,n){ce(2,arguments);var r=Pte(e,t)/U3;return Lte(void 0)(r)}function xM(e){ce(1,arguments);var t=pe(e);return t.setHours(23,59,59,999),t}function Fte(e){ce(1,arguments);var t=pe(e),n=t.getMonth();return t.setFullYear(t.getFullYear(),n+1,0),t.setHours(23,59,59,999),t}function jte(e){ce(1,arguments);var t=pe(e);return xM(t).getTime()===Fte(t).getTime()}function Sve(e,t){ce(2,arguments);var n=pe(e),r=pe(t),s=C0(n,r),i=Math.abs(Rte(n,r)),o;if(i<1)o=0;else{n.getMonth()===1&&n.getDate()>27&&n.setDate(30),n.setMonth(n.getMonth()-s*i);var a=C0(n,r)===-s;jte(pe(e))&&i===1&&C0(e,r)===1&&(a=!1),o=s*(i-Number(a))}return o===0?0:o}function wve(e,t){var n;ce(1,arguments);var r=e||{},s=pe(r.start),i=pe(r.end),o=i.getTime();if(!(s.getTime()<=o))throw new RangeError("Invalid interval");var a=[],c=s;c.setHours(0,0,0,0);var l=Number((n=void 0)!==null&&n!==void 0?n:1);if(l<1||isNaN(l))throw new RangeError("`options.step` must be a number greater than 1");for(;c.getTime()<=o;)a.push(pe(c)),c.setDate(c.getDate()+l),c.setHours(0,0,0,0);return a}function Eve(e,t){ce(1,arguments);var n=e||{},r=pe(n.start),s=pe(n.end),i=s.getTime();if(!(r.getTime()<=i))throw new RangeError("Invalid interval");var o=Tf(r,t),a=Tf(s,t);o.setHours(15),a.setHours(15),i=a.getTime();for(var c=[],l=o;l.getTime()<=i;)l.setHours(0),c.push(pe(l)),l=SM(l,1),l.setHours(15);return c}function xve(e){ce(1,arguments);var t=pe(e);return t.setDate(1),t.setHours(0,0,0,0),t}function Tve(e,t){var n,r,s,i,o,a;ce(1,arguments);var c=Cc(),l=ft((n=(r=(s=(i=void 0)!==null&&i!==void 0?i:void 0)!==null&&s!==void 0?s:c.weekStartsOn)!==null&&r!==void 0?r:(o=c.locale)===null||o===void 0||(a=o.options)===null||a===void 0?void 0:a.weekStartsOn)!==null&&n!==void 0?n:0);if(!(l>=0&&l<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var u=pe(e),d=u.getDay(),f=(d<l?-7:0)+6-(d-l);return u.setDate(u.getDate()+f),u.setHours(23,59,59,999),u}function Ove(){return xM(Date.now())}function Ute(e,t){ce(2,arguments);var n=ft(t);return Ote(e,-n)}var Bte=864e5;function qte(e){ce(1,arguments);var t=pe(e),n=t.getTime();t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0);var r=t.getTime(),s=n-r;return Math.floor(s/Bte)+1}function kf(e){ce(1,arguments);var t=1,n=pe(e),r=n.getUTCDay(),s=(r<t?7:0)+r-t;return n.setUTCDate(n.getUTCDate()-s),n.setUTCHours(0,0,0,0),n}function TM(e){ce(1,arguments);var t=pe(e),n=t.getUTCFullYear(),r=new Date(0);r.setUTCFullYear(n+1,0,4),r.setUTCHours(0,0,0,0);var s=kf(r),i=new Date(0);i.setUTCFullYear(n,0,4),i.setUTCHours(0,0,0,0);var o=kf(i);return t.getTime()>=s.getTime()?n+1:t.getTime()>=o.getTime()?n:n-1}function Gte(e){ce(1,arguments);var t=TM(e),n=new Date(0);n.setUTCFullYear(t,0,4),n.setUTCHours(0,0,0,0);var r=kf(n);return r}var Hte=6048e5;function Vte(e){ce(1,arguments);var t=pe(e),n=kf(t).getTime()-Gte(t).getTime();return Math.round(n/Hte)+1}function Af(e,t){var n,r,s,i,o,a,c,l;ce(1,arguments);var u=Cc(),d=ft((n=(r=(s=(i=t?.weekStartsOn)!==null&&i!==void 0?i:t==null||(o=t.locale)===null||o===void 0||(a=o.options)===null||a===void 0?void 0:a.weekStartsOn)!==null&&s!==void 0?s:u.weekStartsOn)!==null&&r!==void 0?r:(c=u.locale)===null||c===void 0||(l=c.options)===null||l===void 0?void 0:l.weekStartsOn)!==null&&n!==void 0?n:0);if(!(d>=0&&d<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var f=pe(e),h=f.getUTCDay(),g=(h<d?7:0)+h-d;return f.setUTCDate(f.getUTCDate()-g),f.setUTCHours(0,0,0,0),f}function OM(e,t){var n,r,s,i,o,a,c,l;ce(1,arguments);var u=pe(e),d=u.getUTCFullYear(),f=Cc(),h=ft((n=(r=(s=(i=t?.firstWeekContainsDate)!==null&&i!==void 0?i:t==null||(o=t.locale)===null||o===void 0||(a=o.options)===null||a===void 0?void 0:a.firstWeekContainsDate)!==null&&s!==void 0?s:f.firstWeekContainsDate)!==null&&r!==void 0?r:(c=f.locale)===null||c===void 0||(l=c.options)===null||l===void 0?void 0:l.firstWeekContainsDate)!==null&&n!==void 0?n:1);if(!(h>=1&&h<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var g=new Date(0);g.setUTCFullYear(d+1,0,h),g.setUTCHours(0,0,0,0);var _=Af(g,t),v=new Date(0);v.setUTCFullYear(d,0,h),v.setUTCHours(0,0,0,0);var y=Af(v,t);return u.getTime()>=_.getTime()?d+1:u.getTime()>=y.getTime()?d:d-1}function zte(e,t){var n,r,s,i,o,a,c,l;ce(1,arguments);var u=Cc(),d=ft((n=(r=(s=(i=t?.firstWeekContainsDate)!==null&&i!==void 0?i:t==null||(o=t.locale)===null||o===void 0||(a=o.options)===null||a===void 0?void 0:a.firstWeekContainsDate)!==null&&s!==void 0?s:u.firstWeekContainsDate)!==null&&r!==void 0?r:(c=u.locale)===null||c===void 0||(l=c.options)===null||l===void 0?void 0:l.firstWeekContainsDate)!==null&&n!==void 0?n:1),f=OM(e,t),h=new Date(0);h.setUTCFullYear(f,0,d),h.setUTCHours(0,0,0,0);var g=Af(h,t);return g}var $te=6048e5;function Wte(e,t){ce(1,arguments);var n=pe(e),r=Af(n,t).getTime()-zte(n,t).getTime();return Math.round(r/$te)+1}function et(e,t){for(var n=e<0?"-":"",r=Math.abs(e).toString();r.length<t;)r="0"+r;return n+r}var Ws={y:function(t,n){var r=t.getUTCFullYear(),s=r>0?r:1-r;return et(n==="yy"?s%100:s,n.length)},M:function(t,n){var r=t.getUTCMonth();return n==="M"?String(r+1):et(r+1,2)},d:function(t,n){return et(t.getUTCDate(),n.length)},a:function(t,n){var r=t.getUTCHours()/12>=1?"pm":"am";switch(n){case"a":case"aa":return r.toUpperCase();case"aaa":return r;case"aaaaa":return r[0];case"aaaa":default:return r==="am"?"a.m.":"p.m."}},h:function(t,n){return et(t.getUTCHours()%12||12,n.length)},H:function(t,n){return et(t.getUTCHours(),n.length)},m:function(t,n){return et(t.getUTCMinutes(),n.length)},s:function(t,n){return et(t.getUTCSeconds(),n.length)},S:function(t,n){var r=n.length,s=t.getUTCMilliseconds(),i=Math.floor(s*Math.pow(10,r-3));return et(i,n.length)}},ra={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},Kte={G:function(t,n,r){var s=t.getUTCFullYear()>0?1:0;switch(n){case"G":case"GG":case"GGG":return r.era(s,{width:"abbreviated"});case"GGGGG":return r.era(s,{width:"narrow"});case"GGGG":default:return r.era(s,{width:"wide"})}},y:function(t,n,r){if(n==="yo"){var s=t.getUTCFullYear(),i=s>0?s:1-s;return r.ordinalNumber(i,{unit:"year"})}return Ws.y(t,n)},Y:function(t,n,r,s){var i=OM(t,s),o=i>0?i:1-i;if(n==="YY"){var a=o%100;return et(a,2)}return n==="Yo"?r.ordinalNumber(o,{unit:"year"}):et(o,n.length)},R:function(t,n){var r=TM(t);return et(r,n.length)},u:function(t,n){var r=t.getUTCFullYear();return et(r,n.length)},Q:function(t,n,r){var s=Math.ceil((t.getUTCMonth()+1)/3);switch(n){case"Q":return String(s);case"QQ":return et(s,2);case"Qo":return r.ordinalNumber(s,{unit:"quarter"});case"QQQ":return r.quarter(s,{width:"abbreviated",context:"formatting"});case"QQQQQ":return r.quarter(s,{width:"narrow",context:"formatting"});case"QQQQ":default:return r.quarter(s,{width:"wide",context:"formatting"})}},q:function(t,n,r){var s=Math.ceil((t.getUTCMonth()+1)/3);switch(n){case"q":return String(s);case"qq":return et(s,2);case"qo":return r.ordinalNumber(s,{unit:"quarter"});case"qqq":return r.quarter(s,{width:"abbreviated",context:"standalone"});case"qqqqq":return r.quarter(s,{width:"narrow",context:"standalone"});case"qqqq":default:return r.quarter(s,{width:"wide",context:"standalone"})}},M:function(t,n,r){var s=t.getUTCMonth();switch(n){case"M":case"MM":return Ws.M(t,n);case"Mo":return r.ordinalNumber(s+1,{unit:"month"});case"MMM":return r.month(s,{width:"abbreviated",context:"formatting"});case"MMMMM":return r.month(s,{width:"narrow",context:"formatting"});case"MMMM":default:return r.month(s,{width:"wide",context:"formatting"})}},L:function(t,n,r){var s=t.getUTCMonth();switch(n){case"L":return String(s+1);case"LL":return et(s+1,2);case"Lo":return r.ordinalNumber(s+1,{unit:"month"});case"LLL":return r.month(s,{width:"abbreviated",context:"standalone"});case"LLLLL":return r.month(s,{width:"narrow",context:"standalone"});case"LLLL":default:return r.month(s,{width:"wide",context:"standalone"})}},w:function(t,n,r,s){var i=Wte(t,s);return n==="wo"?r.ordinalNumber(i,{unit:"week"}):et(i,n.length)},I:function(t,n,r){var s=Vte(t);return n==="Io"?r.ordinalNumber(s,{unit:"week"}):et(s,n.length)},d:function(t,n,r){return n==="do"?r.ordinalNumber(t.getUTCDate(),{unit:"date"}):Ws.d(t,n)},D:function(t,n,r){var s=qte(t);return n==="Do"?r.ordinalNumber(s,{unit:"dayOfYear"}):et(s,n.length)},E:function(t,n,r){var s=t.getUTCDay();switch(n){case"E":case"EE":case"EEE":return r.day(s,{width:"abbreviated",context:"formatting"});case"EEEEE":return r.day(s,{width:"narrow",context:"formatting"});case"EEEEEE":return r.day(s,{width:"short",context:"formatting"});case"EEEE":default:return r.day(s,{width:"wide",context:"formatting"})}},e:function(t,n,r,s){var i=t.getUTCDay(),o=(i-s.weekStartsOn+8)%7||7;switch(n){case"e":return String(o);case"ee":return et(o,2);case"eo":return r.ordinalNumber(o,{unit:"day"});case"eee":return r.day(i,{width:"abbreviated",context:"formatting"});case"eeeee":return r.day(i,{width:"narrow",context:"formatting"});case"eeeeee":return r.day(i,{width:"short",context:"formatting"});case"eeee":default:return r.day(i,{width:"wide",context:"formatting"})}},c:function(t,n,r,s){var i=t.getUTCDay(),o=(i-s.weekStartsOn+8)%7||7;switch(n){case"c":return String(o);case"cc":return et(o,n.length);case"co":return r.ordinalNumber(o,{unit:"day"});case"ccc":return r.day(i,{width:"abbreviated",context:"standalone"});case"ccccc":return r.day(i,{width:"narrow",context:"standalone"});case"cccccc":return r.day(i,{width:"short",context:"standalone"});case"cccc":default:return r.day(i,{width:"wide",context:"standalone"})}},i:function(t,n,r){var s=t.getUTCDay(),i=s===0?7:s;switch(n){case"i":return String(i);case"ii":return et(i,n.length);case"io":return r.ordinalNumber(i,{unit:"day"});case"iii":return r.day(s,{width:"abbreviated",context:"formatting"});case"iiiii":return r.day(s,{width:"narrow",context:"formatting"});case"iiiiii":return r.day(s,{width:"short",context:"formatting"});case"iiii":default:return r.day(s,{width:"wide",context:"formatting"})}},a:function(t,n,r){var s=t.getUTCHours(),i=s/12>=1?"pm":"am";switch(n){case"a":case"aa":return r.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"aaa":return r.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return r.dayPeriod(i,{width:"narrow",context:"formatting"});case"aaaa":default:return r.dayPeriod(i,{width:"wide",context:"formatting"})}},b:function(t,n,r){var s=t.getUTCHours(),i;switch(s===12?i=ra.noon:s===0?i=ra.midnight:i=s/12>=1?"pm":"am",n){case"b":case"bb":return r.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"bbb":return r.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return r.dayPeriod(i,{width:"narrow",context:"formatting"});case"bbbb":default:return r.dayPeriod(i,{width:"wide",context:"formatting"})}},B:function(t,n,r){var s=t.getUTCHours(),i;switch(s>=17?i=ra.evening:s>=12?i=ra.afternoon:s>=4?i=ra.morning:i=ra.night,n){case"B":case"BB":case"BBB":return r.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"BBBBB":return r.dayPeriod(i,{width:"narrow",context:"formatting"});case"BBBB":default:return r.dayPeriod(i,{width:"wide",context:"formatting"})}},h:function(t,n,r){if(n==="ho"){var s=t.getUTCHours()%12;return s===0&&(s=12),r.ordinalNumber(s,{unit:"hour"})}return Ws.h(t,n)},H:function(t,n,r){return n==="Ho"?r.ordinalNumber(t.getUTCHours(),{unit:"hour"}):Ws.H(t,n)},K:function(t,n,r){var s=t.getUTCHours()%12;return n==="Ko"?r.ordinalNumber(s,{unit:"hour"}):et(s,n.length)},k:function(t,n,r){var s=t.getUTCHours();return s===0&&(s=24),n==="ko"?r.ordinalNumber(s,{unit:"hour"}):et(s,n.length)},m:function(t,n,r){return n==="mo"?r.ordinalNumber(t.getUTCMinutes(),{unit:"minute"}):Ws.m(t,n)},s:function(t,n,r){return n==="so"?r.ordinalNumber(t.getUTCSeconds(),{unit:"second"}):Ws.s(t,n)},S:function(t,n){return Ws.S(t,n)},X:function(t,n,r,s){var i=s._originalDate||t,o=i.getTimezoneOffset();if(o===0)return"Z";switch(n){case"X":return t7(o);case"XXXX":case"XX":return Qi(o);case"XXXXX":case"XXX":default:return Qi(o,":")}},x:function(t,n,r,s){var i=s._originalDate||t,o=i.getTimezoneOffset();switch(n){case"x":return t7(o);case"xxxx":case"xx":return Qi(o);case"xxxxx":case"xxx":default:return Qi(o,":")}},O:function(t,n,r,s){var i=s._originalDate||t,o=i.getTimezoneOffset();switch(n){case"O":case"OO":case"OOO":return"GMT"+e7(o,":");case"OOOO":default:return"GMT"+Qi(o,":")}},z:function(t,n,r,s){var i=s._originalDate||t,o=i.getTimezoneOffset();switch(n){case"z":case"zz":case"zzz":return"GMT"+e7(o,":");case"zzzz":default:return"GMT"+Qi(o,":")}},t:function(t,n,r,s){var i=s._originalDate||t,o=Math.floor(i.getTime()/1e3);return et(o,n.length)},T:function(t,n,r,s){var i=s._originalDate||t,o=i.getTime();return et(o,n.length)}};function e7(e,t){var n=e>0?"-":"+",r=Math.abs(e),s=Math.floor(r/60),i=r%60;if(i===0)return n+String(s);var o=t;return n+String(s)+o+et(i,2)}function t7(e,t){if(e%60===0){var n=e>0?"-":"+";return n+et(Math.abs(e)/60,2)}return Qi(e,t)}function Qi(e,t){var n=t||"",r=e>0?"-":"+",s=Math.abs(e),i=et(Math.floor(s/60),2),o=et(s%60,2);return r+i+n+o}var n7=function(t,n){switch(t){case"P":return n.date({width:"short"});case"PP":return n.date({width:"medium"});case"PPP":return n.date({width:"long"});case"PPPP":default:return n.date({width:"full"})}},kM=function(t,n){switch(t){case"p":return n.time({width:"short"});case"pp":return n.time({width:"medium"});case"ppp":return n.time({width:"long"});case"pppp":default:return n.time({width:"full"})}},Yte=function(t,n){var r=t.match(/(P+)(p+)?/)||[],s=r[1],i=r[2];if(!i)return n7(t,n);var o;switch(s){case"P":o=n.dateTime({width:"short"});break;case"PP":o=n.dateTime({width:"medium"});break;case"PPP":o=n.dateTime({width:"long"});break;case"PPPP":default:o=n.dateTime({width:"full"});break}return o.replace("{{date}}",n7(s,n)).replace("{{time}}",kM(i,n))},Zte={p:kM,P:Yte},Jte=["D","DD"],Qte=["YY","YYYY"];function Xte(e){return Jte.indexOf(e)!==-1}function ene(e){return Qte.indexOf(e)!==-1}function r7(e,t,n){if(e==="YYYY")throw new RangeError("Use `yyyy` instead of `YYYY` (in `".concat(t,"`) for formatting years to the input `").concat(n,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if(e==="YY")throw new RangeError("Use `yy` instead of `YY` (in `".concat(t,"`) for formatting years to the input `").concat(n,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if(e==="D")throw new RangeError("Use `d` instead of `D` (in `".concat(t,"`) for formatting days of the month to the input `").concat(n,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if(e==="DD")throw new RangeError("Use `dd` instead of `DD` (in `".concat(t,"`) for formatting days of the month to the input `").concat(n,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"))}var tne={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},nne=function(t,n,r){var s,i=tne[t];return typeof i=="string"?s=i:n===1?s=i.one:s=i.other.replace("{{count}}",n.toString()),r!=null&&r.addSuffix?r.comparison&&r.comparison>0?"in "+s:s+" ago":s};function b0(e){return function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=t.width?String(t.width):e.defaultWidth,r=e.formats[n]||e.formats[e.defaultWidth];return r}}var rne={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},sne={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},ine={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},one={date:b0({formats:rne,defaultWidth:"full"}),time:b0({formats:sne,defaultWidth:"full"}),dateTime:b0({formats:ine,defaultWidth:"full"})},ane={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},cne=function(t,n,r,s){return ane[t]};function Mc(e){return function(t,n){var r=n!=null&&n.context?String(n.context):"standalone",s;if(r==="formatting"&&e.formattingValues){var i=e.defaultFormattingWidth||e.defaultWidth,o=n!=null&&n.width?String(n.width):i;s=e.formattingValues[o]||e.formattingValues[i]}else{var a=e.defaultWidth,c=n!=null&&n.width?String(n.width):e.defaultWidth;s=e.values[c]||e.values[a]}var l=e.argumentCallback?e.argumentCallback(t):t;return s[l]}}var lne={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},une={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},dne={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},fne={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},hne={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},pne={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},mne=function(t,n){var r=Number(t),s=r%100;if(s>20||s<10)switch(s%10){case 1:return r+"st";case 2:return r+"nd";case 3:return r+"rd"}return r+"th"},gne={ordinalNumber:mne,era:Mc({values:lne,defaultWidth:"wide"}),quarter:Mc({values:une,defaultWidth:"wide",argumentCallback:function(t){return t-1}}),month:Mc({values:dne,defaultWidth:"wide"}),day:Mc({values:fne,defaultWidth:"wide"}),dayPeriod:Mc({values:hne,defaultWidth:"wide",formattingValues:pne,defaultFormattingWidth:"wide"})};function Ic(e){return function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=n.width,s=r&&e.matchPatterns[r]||e.matchPatterns[e.defaultMatchWidth],i=t.match(s);if(!i)return null;var o=i[0],a=r&&e.parsePatterns[r]||e.parsePatterns[e.defaultParseWidth],c=Array.isArray(a)?vne(a,function(d){return d.test(o)}):_ne(a,function(d){return d.test(o)}),l;l=e.valueCallback?e.valueCallback(c):c,l=n.valueCallback?n.valueCallback(l):l;var u=t.slice(o.length);return{value:l,rest:u}}}function _ne(e,t){for(var n in e)if(e.hasOwnProperty(n)&&t(e[n]))return n}function vne(e,t){for(var n=0;n<e.length;n++)if(t(e[n]))return n}function yne(e){return function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=t.match(e.matchPattern);if(!r)return null;var s=r[0],i=t.match(e.parsePattern);if(!i)return null;var o=e.valueCallback?e.valueCallback(i[0]):i[0];o=n.valueCallback?n.valueCallback(o):o;var a=t.slice(s.length);return{value:o,rest:a}}}var Cne=/^(\d+)(th|st|nd|rd)?/i,bne=/\d+/i,Sne={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},wne={any:[/^b/i,/^(a|c)/i]},Ene={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},xne={any:[/1/i,/2/i,/3/i,/4/i]},Tne={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},One={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},kne={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},Ane={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},Mne={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},Ine={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},Nne={ordinalNumber:yne({matchPattern:Cne,parsePattern:bne,valueCallback:function(t){return parseInt(t,10)}}),era:Ic({matchPatterns:Sne,defaultMatchWidth:"wide",parsePatterns:wne,defaultParseWidth:"any"}),quarter:Ic({matchPatterns:Ene,defaultMatchWidth:"wide",parsePatterns:xne,defaultParseWidth:"any",valueCallback:function(t){return t+1}}),month:Ic({matchPatterns:Tne,defaultMatchWidth:"wide",parsePatterns:One,defaultParseWidth:"any"}),day:Ic({matchPatterns:kne,defaultMatchWidth:"wide",parsePatterns:Ane,defaultParseWidth:"any"}),dayPeriod:Ic({matchPatterns:Mne,defaultMatchWidth:"any",parsePatterns:Ine,defaultParseWidth:"any"})},Rne={code:"en-US",formatDistance:nne,formatLong:one,formatRelative:cne,localize:gne,match:Nne,options:{weekStartsOn:0,firstWeekContainsDate:1}},Pne=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,Dne=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,Lne=/^'([^]*?)'?$/,Fne=/''/g,jne=/[a-zA-Z]/;function kve(e,t,n){var r,s,i,o,a,c,l,u,d,f,h,g,_,v;ce(2,arguments);var y=String(t),C=Cc(),E=(r=(s=void 0)!==null&&s!==void 0?s:C.locale)!==null&&r!==void 0?r:Rne,b=ft((i=(o=(a=(c=void 0)!==null&&c!==void 0?c:void 0)!==null&&a!==void 0?a:C.firstWeekContainsDate)!==null&&o!==void 0?o:(l=C.locale)===null||l===void 0||(u=l.options)===null||u===void 0?void 0:u.firstWeekContainsDate)!==null&&i!==void 0?i:1);if(!(b>=1&&b<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var S=ft((d=(f=(h=(g=void 0)!==null&&g!==void 0?g:void 0)!==null&&h!==void 0?h:C.weekStartsOn)!==null&&f!==void 0?f:(_=C.locale)===null||_===void 0||(v=_.options)===null||v===void 0?void 0:v.weekStartsOn)!==null&&d!==void 0?d:0);if(!(S>=0&&S<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");if(!E.localize)throw new RangeError("locale must contain localize property");if(!E.formatLong)throw new RangeError("locale must contain formatLong property");var w=pe(e);if(!Nte(w))throw new RangeError("Invalid time value");var x=Bv(w),T=Ute(w,x),O={firstWeekContainsDate:b,weekStartsOn:S,locale:E,_originalDate:w},A=y.match(Dne).map(function(k){var I=k[0];if(I==="p"||I==="P"){var N=Zte[I];return N(k,E.formatLong)}return k}).join("").match(Pne).map(function(k){if(k==="''")return"'";var I=k[0];if(I==="'")return Une(k);var N=Kte[I];if(N)return ene(k)&&r7(k,t,String(e)),Xte(k)&&r7(k,t,String(e)),N(T,k,E.localize,O);if(I.match(jne))throw new RangeError("Format string contains an unescaped latin alphabet character `"+I+"`");return k}).join("");return A}function Une(e){var t=e.match(Lne);return t?t[1].replace(Fne,"'"):e}function Bne(e){ce(1,arguments);var t=ft(e);return pe(t*1e3)}function qne(e){ce(1,arguments);var t=pe(e),n=t.getFullYear(),r=t.getMonth(),s=new Date(0);return s.setFullYear(n,r+1,0),s.setHours(0,0,0,0),s.getDate()}function Gne(e){ce(1,arguments);var t=pe(e),n=t.getMonth();return n}function Hne(e){ce(1,arguments);var t=pe(e),n=t.getTime();return n}function Vne(e){return ce(1,arguments),Math.floor(Hne(e)/1e3)}function s7(e){return ce(1,arguments),pe(e).getFullYear()}function Ave(e,t,n){var r;ce(1,arguments);var s;return n=t,new Intl.DateTimeFormat((r=n)===null||r===void 0?void 0:r.locale,s).format(e)}function Mve(e,t){ce(2,arguments);var n=pe(e),r=pe(t);return n.getTime()>r.getTime()}function Ive(e,t){ce(2,arguments);var n=pe(e),r=pe(t);return n.getTime()<r.getTime()}function Nve(e,t){ce(2,arguments);var n=pe(e),r=pe(t);return n.getTime()===r.getTime()}function Rve(e,t,n){ce(2,arguments);var r=Tf(e,n),s=Tf(t,n);return r.getTime()===s.getTime()}function Pve(e,t){ce(2,arguments);var n=pe(e),r=pe(t);return n.getFullYear()===r.getFullYear()&&n.getMonth()===r.getMonth()}function zne(e,t){ce(2,arguments);var n=pe(e),r=pe(t);return n.getFullYear()===r.getFullYear()}function $ne(e){return ce(1,arguments),zne(e,Date.now())}function Wne(e){return ce(1,arguments),EM(e,Date.now())}function Kne(e){return ce(1,arguments),EM(e,op(Date.now(),1))}function Dve(e,t){ce(2,arguments);var n=ft(t);return op(e,-n)}function Lve(e,t){var n;ce(1,arguments);var r=ft((n=void 0)!==null&&n!==void 0?n:2);if(r!==2&&r!==1&&r!==0)throw new RangeError("additionalDigits must be 0, 1 or 2");if(!(typeof e=="string"||Object.prototype.toString.call(e)==="[object String]"))return new Date(NaN);var s=Qne(e),i;if(s.date){var o=Xne(s.date,r);i=ere(o.restDateString,o.year)}if(!i||isNaN(i.getTime()))return new Date(NaN);var a=i.getTime(),c=0,l;if(s.time&&(c=tre(s.time),isNaN(c)))return new Date(NaN);if(s.timezone){if(l=nre(s.timezone),isNaN(l))return new Date(NaN)}else{var u=new Date(a+c),d=new Date(0);return d.setFullYear(u.getUTCFullYear(),u.getUTCMonth(),u.getUTCDate()),d.setHours(u.getUTCHours(),u.getUTCMinutes(),u.getUTCSeconds(),u.getUTCMilliseconds()),d}return new Date(a+c+l)}var Ju={dateTimeDelimiter:/[T ]/,timeZoneDelimiter:/[Z ]/i,timezone:/([Z+-].*)$/},Yne=/^-?(?:(\d{3})|(\d{2})(?:-?(\d{2}))?|W(\d{2})(?:-?(\d{1}))?|)$/,Zne=/^(\d{2}(?:[.,]\d*)?)(?::?(\d{2}(?:[.,]\d*)?))?(?::?(\d{2}(?:[.,]\d*)?))?$/,Jne=/^([+-])(\d{2})(?::?(\d{2}))?$/;function Qne(e){var t={},n=e.split(Ju.dateTimeDelimiter),r;if(n.length>2)return t;if(/:/.test(n[0])?r=n[0]:(t.date=n[0],r=n[1],Ju.timeZoneDelimiter.test(t.date)&&(t.date=e.split(Ju.timeZoneDelimiter)[0],r=e.substr(t.date.length,e.length))),r){var s=Ju.timezone.exec(r);s?(t.time=r.replace(s[1],""),t.timezone=s[1]):t.time=r}return t}function Xne(e,t){var n=new RegExp("^(?:(\\d{4}|[+-]\\d{"+(4+t)+"})|(\\d{2}|[+-]\\d{"+(2+t)+"})$)"),r=e.match(n);if(!r)return{year:NaN,restDateString:""};var s=r[1]?parseInt(r[1]):null,i=r[2]?parseInt(r[2]):null;return{year:i===null?s:i*100,restDateString:e.slice((r[1]||r[2]).length)}}function ere(e,t){if(t===null)return new Date(NaN);var n=e.match(Yne);if(!n)return new Date(NaN);var r=!!n[4],s=Nc(n[1]),i=Nc(n[2])-1,o=Nc(n[3]),a=Nc(n[4]),c=Nc(n[5])-1;if(r)return are(t,a,c)?rre(t,a,c):new Date(NaN);var l=new Date(0);return!ire(t,i,o)||!ore(t,s)?new Date(NaN):(l.setUTCFullYear(t,i,Math.max(s,o)),l)}function Nc(e){return e?parseInt(e):1}function tre(e){var t=e.match(Zne);if(!t)return NaN;var n=S0(t[1]),r=S0(t[2]),s=S0(t[3]);return cre(n,r,s)?n*wM+r*U3+s*1e3:NaN}function S0(e){return e&&parseFloat(e.replace(",","."))||0}function nre(e){if(e==="Z")return 0;var t=e.match(Jne);if(!t)return 0;var n=t[1]==="+"?-1:1,r=parseInt(t[2]),s=t[3]&&parseInt(t[3])||0;return lre(r,s)?n*(r*wM+s*U3):NaN}function rre(e,t,n){var r=new Date(0);r.setUTCFullYear(e,0,4);var s=r.getUTCDay()||7,i=(t-1)*7+n+1-s;return r.setUTCDate(r.getUTCDate()+i),r}var sre=[31,null,31,30,31,30,31,31,30,31,30,31];function AM(e){return e%400===0||e%4===0&&e%100!==0}function ire(e,t,n){return t>=0&&t<=11&&n>=1&&n<=(sre[t]||(AM(e)?29:28))}function ore(e,t){return t>=1&&t<=(AM(e)?366:365)}function are(e,t,n){return t>=1&&t<=53&&n>=0&&n<=6}function cre(e,t,n){return e===24?t===0&&n===0:n>=0&&n<60&&t>=0&&t<60&&e>=0&&e<25}function lre(e,t){return t>=0&&t<=59}function ure(e,t){ce(2,arguments);var n=pe(e),r=ft(t),s=n.getFullYear(),i=n.getDate(),o=new Date(0);o.setFullYear(s,r,15),o.setHours(0,0,0,0);var a=qne(o);return n.setMonth(r,Math.min(i,a)),n}function Md(e){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Md=function(n){return typeof n}:Md=function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},Md(e)}function Fve(e,t){if(ce(2,arguments),Md(t)!=="object"||t===null)throw new RangeError("values parameter must be an object");var n=pe(e);return isNaN(n.getTime())?new Date(NaN):(t.year!=null&&n.setFullYear(t.year),t.month!=null&&(n=ure(n,t.month)),t.date!=null&&n.setDate(ft(t.date)),t.hours!=null&&n.setHours(ft(t.hours)),t.minutes!=null&&n.setMinutes(ft(t.minutes)),t.seconds!=null&&n.setSeconds(ft(t.seconds)),t.milliseconds!=null&&n.setMilliseconds(ft(t.milliseconds)),n)}function jve(e,t){ce(2,arguments);var n=ft(t);return CM(e,-n)}function Uve(e,t){ce(2,arguments);var n=ft(t);return SM(e,-n)}function Bve(e,t){ce(2,arguments);var n=ft(t);return Mte(e,-n)}const dre=3,fre=3;function hre(){const e=Y();return gt(e,"1092897457",{disableExposureLog:!0}).get("is_tatertot_enabled",!0)?we(e,"3240576626"):!1}function pre(e){return e?new Date>op(e,dre):!0}function qve(e){const[t,n]=Ste(Qe.TatertotInContextUpsellBannerV2,null,c=>c!=null&&typeof c=="object"&&typeof c.messageId=="string"&&typeof c.lastSeenAt=="number"&&typeof c.interacted=="boolean"&&typeof c.viewCount=="number"),r=we(Y(),"3240576626"),s=t?Bne(t.lastSeenAt):null,i=t?t.viewCount??0:0;return{canBeSeen:e!==""&&(!t||i<=fre&&(pre(s)||t.messageId===e&&t.interacted===!1))&&r,markSeen:c=>{const l={messageId:e,lastSeenAt:Vne(new Date),interacted:c,viewCount:(t?t.viewCount:0)+(c?0:1)};Sn.count(dn.TATERTOT,"tatertot_upsell_banner_shown"),n(l),localStorage.setItem(Qe.TatertotInContextUpsellBannerV2,JSON.stringify(l))}}}const mre="o4-mini",Pa=({chunk:e,href:t})=>p.jsx("a",{href:t,target:"_blank",className:"underline",rel:"noreferrer",children:e}),B=ze({modelsTitle:{id:"t+hUfA",defaultMessage:"Models"},modelsDescription:{id:"2oVkLw",defaultMessage:"Choose which models this role can access"},gpt5ThinkingDescription:{id:"RshEyQ",defaultMessage:"Our smartest, fastest, and most useful model."},gpt5ThinkingProDescription:{id:"NoVQ54",defaultMessage:"Extended reasoning for even more reliable and detailed answers."},legacyModelsDescription:{id:"83N6uo",defaultMessage:"Allow members to use legacy models. This is a global setting for the workspace."},gpt41Description:{id:"J2sMy+",defaultMessage:"Great for quick coding and analysis."},gpt45Description:{id:"KuckV0",defaultMessage:"Broader knowledge and better tone control—ideal for writing, coding and quick problem-solving."},gptO3ProDescription:{id:"sLUCz/",defaultMessage:"Best at reasoning."},gptO3Description:{id:"DWt4z/",defaultMessage:"Our most powerful engine for complex, multi-step analysis."},gptO4MiniDescription:{id:"kH5Wky",defaultMessage:"Fast, cost-efficient reasoning for code, math and visual tasks."},gptO4MiniHighDescription:{id:"ygGu2o",defaultMessage:"o4-mini with extra depth for more thorough technical answers."},toolsTitle:{id:"1Q0Lmk",defaultMessage:"Tools and capabilities"},imageGenTitle:{id:"iPlNq5",defaultMessage:"Image generation"},imageGenDescription:{id:"6NZOo3",defaultMessage:"Allows users create AI-generated images inside ChatGPT."},webSearchTitle:{id:"Qzwh18",defaultMessage:"Web search"},webSearchDescription:{id:"2MpcaO",defaultMessage:"Manage whether ChatGPT and GPTs created in this workspace can browse the internet. When enabled, it may send search queries and general location information to Bing, but this data is not linked to or associated with user accounts. This does not apply to third-party GPTs. <link>Learn more</link>"},webSearchDescriptionOfflineOnly:{id:"exxzV0",defaultMessage:"ChatGPT web search may send queries to third-party search providers based on your inputs to ChatGPT. You should ensure your use of ChatGPT search complies with your obligations under HIPAA."},codexTitle:{id:"Tpse/7",defaultMessage:"Allow members to use Codex"},codexDescription:{id:"jVlxKv",defaultMessage:"Manage whether members can use Codex."},codexAgentNetworkTitle:{id:"+0TP+Y",defaultMessage:"Allow Codex agent to access the internet"},codexAgentNetworkDescription:{id:"ObRZ8h",defaultMessage:"Allows environments to be created with agent internet access enabled."},disabledReasonGithub:{id:"HNofTP",defaultMessage:"Disabled because there's no active GitHub connector."},recordTitle:{id:"AXkmJg",defaultMessage:"Record"},recordDescription:{id:"l0y0CK",defaultMessage:"Manage whether users can use ChatGPT to record, transcribe, and summarize longform audio. Recordings will be used solely for transcription purposes and will not be stored by OpenAI. <link>Learn more</link>"},recordReferencePastTranscriptsTitle:{id:"ZsmGaz",defaultMessage:"Allow ChatGPT to reference past notes and transcripts"},recordReferencePastTranscriptsDescription:{id:"OlM3tz",defaultMessage:"Allow members to reference past notes and transcripts in ChatGPT Record."},deepResearchTitle:{id:"xd3kLo",defaultMessage:"Deep research"},deepResearchDescription:{id:"b5K/+B",defaultMessage:"Lets users run in-depth research with web-connected and multi-step reasoning tools."},advanceVoiceTitle:{id:"BBl2PG",defaultMessage:"Advanced voice capabilities"},advanceVoiceDescription:{id:"Tfn5Vm",defaultMessage:"Enables real-time voice interaction with AI, including speech recognition and lifelike responses."},gptSectionTitle:{id:"lDlJlK",defaultMessage:"GPTs"},gptSectionDescription:{id:"MMDdKL",defaultMessage:"Choose which GPT access this role has"},gptCrudTitle:{id:"ySiNVL",defaultMessage:"Create and manage GPTs"},gptCrudDescription:{id:"aCMqKu",defaultMessage:"Allow members to create and manage GPTs"},gptShareWorkspaceTitle:{id:"arwdQz",defaultMessage:"Publish GPTs to workspace"},gptShareWorkspaceDescription:{id:"O0HyJZ",defaultMessage:"Allow members to publish GPTs they own to the workspace GPT Store"},gptShareExternalTitle:{id:"zl4S+n",defaultMessage:"Publish GPTs externally"},gptShareExternalDescription:{id:"wXPceF",defaultMessage:"Controls ability to share with others outside the org (via email or link)"},gptAllowAllThirdPartyTitle:{id:"ZYlBcx",defaultMessage:"Allow all third party GPTs"},gptAllowAllThirdPartyDescription:{id:"NVpEpJ",defaultMessage:"If enabled, user will have access to all 3P GPTs"},gptAllowSpecificThirdPartyTitle:{id:"7oaevm",defaultMessage:"Allow owner-approved GPTs only"},gptAllowSpecificThirdPartyDescription:{id:"ubkAtB",defaultMessage:"If enabled, user will have access to approved 3P GPTs"},projectSectionTitle:{id:"muqJOY",defaultMessage:"Projects"},projectSectionDescription:{id:"oDGRtQ",defaultMessage:"Choose which project access this role has"},projectCrudTitle:{id:"PDOJ0T",defaultMessage:"Create and manage projects"},projectCrudDescription:{id:"MfPKqd",defaultMessage:"Allow members to create and manage projects"},sharingTitle:{id:"8DIoJe",defaultMessage:"Sharing"},memoryTitle:{id:"h6Ufv3",defaultMessage:"Memory"},memoryDescription:{id:"NpeSvG",defaultMessage:"Manage whether members can enable memory. This allows ChatGPT to become more helpful by remembering details and preferences across chats. <link>Learn more</link>"},canvasCodeExecutionTitle:{id:"sB8WQp",defaultMessage:"Canvas code execution"},canvasCodeExecutionDescription:{id:"kkkA1m",defaultMessage:"Allow members to run code snippets within the canvas."},canvasCodeNetworkAccessTitle:{id:"L5mfFJ",defaultMessage:"Canvas code network access"},canvasCodeNetworkAccessDescription:{id:"OF7Jbc",defaultMessage:"Allow members to execute code with network access within the canvas."},videoScreenSharingTitle:{id:"GSzhi0",defaultMessage:"Allow members to share their screen or video while using voice mode"},videoScreenSharingDescription:{id:"WZkcdj",defaultMessage:"Allow members to share their screen or video while using voice mode"},clientApplicationAppleTitle:{id:"CrNCVg",defaultMessage:"Beta: Apple Intelligence"},clientApplicationAppleDescription:{id:"wOWq2/",defaultMessage:"Manage whether members can link with Apple Intelligence."},canvasTitle:{id:"OuhDUU",defaultMessage:"Canvas"},searchTitle:{id:"rY8bdY",defaultMessage:"Search"},voiceTitle:{id:"e83f8K",defaultMessage:"Voice"},codex:{id:"aOXMaL",defaultMessage:"Codex"},recordAccessTitle:{id:"fso8vg",defaultMessage:"Allow members to use ChatGPT record."},appsTitle:{id:"DeAoJ2",defaultMessage:"Apps"},appsDescription:{id:"Po5yAH",defaultMessage:"Manage which apps this role can access"},shareChatWithWorkspaceTitle:{id:"kKfDOF",defaultMessage:"Members can share chats with workspace."},shareChatTitle:{id:"x8jgoP",defaultMessage:"Allow members to share a chat or canvas with..."},shareChatProjectTitle:{id:"LQ2EVd",defaultMessage:"Allow members to share a chat, canvas, or project with..."},memoryAccessTitle:{id:"EVIMwx",defaultMessage:"Allow members to use memory"},chatRetentionPolicyTitle:{id:"HOkfAn",defaultMessage:"Chat retention policy"},chatRetentionPolicyDescription:{id:"b5pfhv",defaultMessage:"Contact your account manager to change this setting."},githubConnectorDescription:{id:"bN9L7e",defaultMessage:"Codex requires the GitHub connector.{br}You can enable or disable it in <settingsLink>Connector Settings</settingsLink>"},workWithAppsTitle:{id:"GDQEgW",defaultMessage:"Allow work with apps"},workWithAppsDescription:{id:"tZymPd",defaultMessage:"Control whether users in this workspace can enable ChatGPT to work with apps. This allows ChatGPT to read and edit the content of specific apps on their desktop to provide better responses. <link>Learn more</link>"},appleIntelligenceTitle:{id:"b5tisR",defaultMessage:"Allow members to link Apple Intelligence"},appleIntelligenceDescription:{id:"b2Jsop",defaultMessage:"Manage whether members can link with Apple Intelligence."},appleIntelligenceMDMTitle:{id:"0wNa7q",defaultMessage:"Apple Intelligence MDM"},appleIntelligenceMDMDescription:{id:"ZgxOdq",defaultMessage:"Only allow linking this workspace with Apple Intelligence on MDM managed devices."},imageGenSectionTitle:{id:"fKZG6M",defaultMessage:"Images"},mdmSectionTitle:{id:"jh/ICj",defaultMessage:"MDM"},mdmDisableCopyPasteTitle:{id:"iby11U",defaultMessage:"Disable copy and paste"},mdmDisableFileUploadTitle:{id:"4Mdk8I",defaultMessage:"Disable file upload"},mdmDisableFileDownloadTitle:{id:"S75iuY",defaultMessage:"Disable file download"},mdmRequirePinUnlockTitle:{id:"DAUS4M",defaultMessage:"Require PIN unlock"},mdmRequireBiometricUnlockTitle:{id:"8rpAr5",defaultMessage:"Require biometric unlock"},agentModeTitle:{id:"t4P9Ws",defaultMessage:"Agent mode"},agentModeDescription:{id:"rE0L/V",defaultMessage:"Allow members to use agent mode. <link>Learn more</link>"},agentModeDisabledReason:{id:"/E6A5q",defaultMessage:"Agent mode is disabled because Web search is not enabled."}});var Uo=(e=>(e.GPT5ThinkingAccess="chatgpt.workspace.model.GPT-5-reasoning.access",e.GPT5ThinkingProAccess="chatgpt.workspace.model.GPT-5-pro.access",e.GPT41Access="chatgpt.workspace.model.GPT-4.1.access",e.GPT45Access="chatgpt.workspace.model.GPT-4.5.access",e.GPTO3Access="chatgpt.workspace.model.o3.access",e.GPTO3ProAccess="chatgpt.workspace.model.o3-pro.access",e.GPTO4MiniAccess="chatgpt.workspace.model.o4-mini.access",e.GPTO4MiniHighAccess="chatgpt.workspace.model.o4-mini-high.access",e.CrudGPT="chatgpt.workspace.gpt.crud",e.ShareWorkspaceGPT="chatgpt.workspace.gpt.share_workspace",e.ShareExternalGPT="chatgpt.workspace.gpt.share_external",e.AllowAllThirdPartyGPT="chatgpt.workspace.gpt.allow_all_third_party",e.AllowSpecificThirdPartyGPT="chatgpt.workspace.gpt.allow_specific_third_party",e.CrudProject="chatgpt.workspace.project.crud",e.ShareChatWithWorkspace="chatgpt.workspace.feature.share-chat-with-workspace.access",e.AllowCodexAccess="chatgpt.workspace.feature.allow-codex-access.access",e.CodexAgentNetworkAccess="chatgpt.workspace.feature.codex-agent-network-access.access",e.ImageGenAccess="chatgpt.workspace.feature.image-gen.access",e.SearchAccess="chatgpt.workspace.feature.search.access",e.DeepResearchAccess="chatgpt.workspace.feature.deep-research.access",e.VoiceAccess="chatgpt.workspace.feature.voice.access",e.HiveAccess="chatgpt.workspace.feature.hive.access",e.HiveKnowledgeRetrievalAccess="chatgpt.workspace.feature.hive-knowledge-retrieval.access",e.MemoryAccess="chatgpt.workspace.feature.memory.access",e.CanvasCodeExecutionAccess="chatgpt.workspace.feature.canvas-code-execution.access",e.CanvasCodeNetworkAccess="chatgpt.workspace.feature.canvas-code-network-access.access",e.VideoScreenSharingAccess="chatgpt.workspace.feature.video-screen-sharing.access",e.AppPairingAccess="chatgpt.workspace.feature.app-pairing.access",e.ClientApplicationAppleAccess="chatgpt.workspace.feature.client-application-apple.access",e.AgentModeAccess="chatgpt.workspace.feature.agent-mode.access",e))(Uo||{});const gre=({isRbacEnabled:e,isSharedProjectsEnabled:t,includeBetaSettingsAdvanced:n})=>({title:B.sharingTitle,entries:[...n&&e?[{rbac:!0,title:B.shareChatWithWorkspaceTitle,permissionName:"chatgpt.workspace.feature.share-chat-with-workspace.access"}]:[{rbac:!1,title:t?B.shareChatProjectTitle:B.shareChatTitle,settingName:"share_chat"}]]}),_re=({isQuorumM1:e=!1})=>({title:B.memoryTitle,availableForQuorum:e,entries:[{rbac:!1,title:B.memoryAccessTitle,description:B.memoryDescription,descriptionValues:{link:t=>p.jsx(Pa,{chunk:t,href:"https://help.openai.com/en/articles/8590148-memory-in-chatgpt-faq"})},settingName:"memory_access"},{rbac:!1,title:B.chatRetentionPolicyTitle,description:B.chatRetentionPolicyDescription,settingName:"rentention_policy"}]}),vre=({isRbacEnabled:e,includeBetaSettingsAdvanced:t,isQuorumM1:n})=>({title:B.canvasTitle,availableForQuorum:n,entries:e&&t?[{rbac:!0,title:B.canvasCodeExecutionTitle,description:B.canvasCodeExecutionDescription,permissionName:"chatgpt.workspace.feature.canvas-code-execution.access"},{rbac:!0,title:B.canvasCodeNetworkAccessTitle,description:B.canvasCodeNetworkAccessDescription,permissionName:"chatgpt.workspace.feature.canvas-code-network-access.access"}]:[{rbac:!1,title:B.canvasCodeExecutionTitle,description:B.canvasCodeExecutionDescription,settingName:"canvas_code_execution"},{rbac:!1,title:B.canvasCodeNetworkAccessTitle,description:B.canvasCodeNetworkAccessDescription,settingName:"canvas_code_network_access"}]}),yre=({isCBP:e,isRbacEnabled:t,showDeepResearchToggle:n,includeBetaSettings:r,includeFeatures:s,includeAgentMode:i,isQuorumM0:o,isQuorumM1:a,isSearchEnabled:c})=>({title:B.searchTitle,availableForQuorum:!0,entries:[...r&&t?[{rbac:!0,title:B.webSearchTitle,description:a||o?B.webSearchDescriptionOfflineOnly:B.webSearchDescription,descriptionValues:{link:l=>p.jsx(Pa,{chunk:l,href:"https://help.openai.com/en/articles/10093903-chatgpt-search-for-enterprise-and-edu"})},permissionName:"chatgpt.workspace.feature.search.access"}]:[{rbac:!1,title:B.webSearchTitle,description:a||o?B.webSearchDescriptionOfflineOnly:B.webSearchDescription,descriptionValues:{link:l=>p.jsx(Pa,{chunk:l,href:"https://help.openai.com/en/articles/10093903-chatgpt-search-for-enterprise-and-edu"})},settingName:"web_search"}],...n&&!o?s||!e?[{rbac:!0,title:B.deepResearchTitle,description:B.deepResearchDescription,permissionName:"chatgpt.workspace.feature.deep-research.access"}]:[]:[],...i?[{rbac:!0,title:B.agentModeTitle,description:B.agentModeDescription,descriptionValues:{link:l=>p.jsx(Pa,{chunk:l,href:"https://help.openai.com/en/articles/11752874-chatgpt-agent"})},permissionName:"chatgpt.workspace.feature.agent-mode.access",disabled:!c,disabledReason:c?void 0:B.agentModeDisabledReason}]:[]]}),Cre={title:B.imageGenSectionTitle,availableForQuorum:!0,entries:[{rbac:!0,title:B.imageGenTitle,description:B.imageGenDescription,permissionName:"chatgpt.workspace.feature.image-gen.access"}]},bre=({isRbacEnabled:e,includeFeatures:t,includeBetaSettingsAdvanced:n})=>({title:B.voiceTitle,availableForQuorum:!0,entries:[...t&&e?[{rbac:!0,title:B.advanceVoiceTitle,description:B.advanceVoiceDescription,permissionName:"chatgpt.workspace.feature.voice.access"}]:[],...n&&e?[{rbac:!0,title:B.videoScreenSharingTitle,description:B.videoScreenSharingDescription,permissionName:"chatgpt.workspace.feature.video-screen-sharing.access"}]:[{rbac:!1,title:B.videoScreenSharingTitle,description:B.videoScreenSharingDescription,settingName:"video_screen_sharing"}]]}),Sre=({isCBP:e,isRbacEnabled:t,showAgentInternetAccessToggle:n,includeFeatures:r,includeBetaSettings:s,githubConnectorEnabled:i,isQuorumM1:o})=>({title:B.codex,availableForQuorum:o,entries:[...!s||s&&(r||!e)?[{rbac:!0,title:"GitHub",description:B.githubConnectorDescription,descriptionValues:{br:p.jsx("br",{}),settingsLink:a=>p.jsx(Vf,{to:"/admin/ca",className:"underline",children:a})},permissionName:"codex_github_connector"}]:[],...s&&t?r||!e?[{rbac:!0,title:B.codexTitle,description:B.codexDescription,permissionName:"chatgpt.workspace.feature.allow-codex-access.access",disabled:!i,disabledReason:i?void 0:B.disabledReasonGithub}]:[]:[{rbac:!1,title:B.codexTitle,description:B.codexDescription,settingName:"codex_access"}],...n?s&&t?r||!e?[{rbac:!0,title:B.codexAgentNetworkTitle,description:B.codexAgentNetworkDescription,permissionName:"chatgpt.workspace.feature.codex-agent-network-access.access",disabled:!i,disabledReason:i?void 0:B.disabledReasonGithub}]:[]:[{rbac:!1,title:B.codexAgentNetworkTitle,description:B.codexAgentNetworkDescription,settingName:"codex_agent_network"}]:[]]}),wre=({isRbacEnabled:e,isInSupportedDrRegion:t,includeBetaSettings:n,isQuorumM1:r})=>({title:B.recordTitle,availableForEnterprise:!0,availableForQuorum:r,description:B.recordDescription,descriptionValues:{link:s=>p.jsx(Pa,{chunk:s,href:"https://help.openai.com/en/articles/11487532"})},entries:n&&e?[{rbac:!0,title:B.recordAccessTitle,permissionName:"chatgpt.workspace.feature.hive.access"},...t?[{rbac:!0,title:B.recordReferencePastTranscriptsTitle,description:B.recordReferencePastTranscriptsDescription,permissionName:"chatgpt.workspace.feature.hive-knowledge-retrieval.access"}]:[]]:[{rbac:!1,title:B.recordAccessTitle,settingName:"record_access"},...t?[{rbac:!1,title:B.recordReferencePastTranscriptsTitle,description:B.recordReferencePastTranscriptsDescription,settingName:"record_reference_past_transcripts"}]:[]]}),Ere=({isAppleIntelligenceToggleEnabled:e,isAppleIntelligenceMdmToggleEnabled:t,isQuorumM1:n})=>({title:B.appsTitle,availableForQuorum:n,entries:[{rbac:!1,title:B.workWithAppsTitle,description:B.workWithAppsDescription,descriptionValues:{link:r=>p.jsx(Pa,{chunk:r,href:"https://help.openai.com/en/articles/10119604-work-with-apps-on-macos"})},settingName:"apps_access"},...e?[{rbac:!1,title:B.appleIntelligenceTitle,description:B.appleIntelligenceDescription,settingName:"apple_intelligence_access"}]:[],...e&&t?[{rbac:!1,title:B.appleIntelligenceMDMTitle,description:B.appleIntelligenceMDMDescription,settingName:"apple_intelligence_mdm_access"}]:[]]}),xre=({isRbacEnabled:e,includeModels:t,includeGPT5AndLegacyModels:n,legacyModelsEnabled:r})=>({title:B.modelsTitle,availableForEnterprise:!0,availableForQuorum:!0,description:B.modelsDescription,entries:[...t&&e&&n?[{rbac:!0,title:"GPT-5-Thinking",description:B.gpt5ThinkingDescription,permissionName:"chatgpt.workspace.model.GPT-5-reasoning.access"},{rbac:!0,title:"GPT-5-Thinking-Pro",description:B.gpt5ThinkingProDescription,permissionName:"chatgpt.workspace.model.GPT-5-pro.access"}]:[],...n?[{rbac:!1,title:"Enable legacy models",description:B.legacyModelsDescription,settingName:"legacy_models"}]:[],...t&&e&&(!n||r)?[{rbac:!0,title:"GPT-4.1",description:B.gpt41Description,permissionName:"chatgpt.workspace.model.GPT-4.1.access"},{rbac:!0,title:"GPT-4.5",description:B.gpt45Description,permissionName:"chatgpt.workspace.model.GPT-4.5.access"},{rbac:!0,title:"o3",description:B.gptO3Description,permissionName:"chatgpt.workspace.model.o3.access"},{rbac:!0,title:"o3-pro",description:B.gptO3ProDescription,permissionName:"chatgpt.workspace.model.o3-pro.access"},{rbac:!0,title:"o4-mini",description:B.gptO4MiniDescription,permissionName:"chatgpt.workspace.model.o4-mini.access"},{rbac:!0,title:"o4-mini-high",description:B.gptO4MiniHighDescription,permissionName:"chatgpt.workspace.model.o4-mini-high.access"}]:[]]}),Tre=e=>({title:B.gptSectionTitle,availableForQuorum:e,description:B.gptSectionDescription,entries:[{rbac:!0,title:B.gptCrudTitle,description:B.gptCrudDescription,permissionName:"chatgpt.workspace.gpt.crud"},{rbac:!0,title:B.gptShareWorkspaceTitle,description:B.gptShareWorkspaceDescription,permissionName:"chatgpt.workspace.gpt.share_workspace"},{rbac:!0,disabledForQuorum:!0,title:B.gptShareExternalTitle,description:B.gptShareExternalDescription,permissionName:"chatgpt.workspace.gpt.share_external"},{rbac:!0,disabledForQuorum:!0,title:B.gptAllowAllThirdPartyTitle,description:B.gptAllowAllThirdPartyDescription,permissionName:"chatgpt.workspace.gpt.allow_all_third_party"},{rbac:!0,disabledForQuorum:!0,title:B.gptAllowSpecificThirdPartyTitle,description:B.gptAllowSpecificThirdPartyDescription,permissionName:"chatgpt.workspace.gpt.allow_specific_third_party"}]}),Ore=e=>({title:B.projectSectionTitle,availableForQuorum:e,description:B.projectSectionDescription,entries:[{rbac:!0,title:B.projectCrudTitle,description:B.projectCrudDescription,permissionName:"chatgpt.workspace.project.crud"}]}),kre={title:B.mdmSectionTitle,entries:[{rbac:!0,title:B.mdmDisableCopyPasteTitle,permissionName:"chatgpt.workspace.mdm.disable_copy_paste"},{rbac:!0,title:B.mdmDisableFileUploadTitle,permissionName:"chatgpt.workspace.mdm.disable_file_transfer.upload"},{rbac:!0,title:B.mdmDisableFileDownloadTitle,permissionName:"chatgpt.workspace.mdm.disable_file_transfer.download"},{rbac:!0,title:B.mdmRequirePinUnlockTitle,permissionName:"chatgpt.workspace.mdm.require_pin_unlock"},{rbac:!0,title:B.mdmRequireBiometricUnlockTitle,permissionName:"chatgpt.workspace.mdm.require_biometric_unlock"}]};function Gve({isCBP:e,isRbacEnabled:t,githubConnectorEnabled:n,isInSupportedDrRegion:r,includeFeatures:s,includeModels:i,isSharedProjectsEnabled:o,isCanvasEnabled:a,isSearchEnabled:c,isEnterprisey:l,showHiveToggle:u,showDeepResearchToggle:d,includeBetaSettings:f,includeBetaSettingsAdvanced:h,includeGizmoPermissions:g,showAgentInternetAccessToggle:_,isAppleIntelligenceToggleEnabled:v,isAppleIntelligenceMdmToggleEnabled:y,isMDMEnabled:C,includeAgentMode:E,isQuorumM0:b,isQuorumM1:S,legacyModelsEnabled:w,includeGPT5AndLegacyModels:x}){return[gre({isRbacEnabled:t,isSharedProjectsEnabled:o,includeBetaSettingsAdvanced:h}),_re({isQuorumM1:S}),...a?[vre({isRbacEnabled:t,includeBetaSettingsAdvanced:h,isQuorumM1:S})]:[],yre({isCBP:e,isRbacEnabled:t,showDeepResearchToggle:d,includeBetaSettings:f,includeFeatures:s,includeAgentMode:E,isQuorumM0:b,isQuorumM1:S,isSearchEnabled:c}),...s&&t?[Cre]:[],bre({isRbacEnabled:t,includeFeatures:s,includeBetaSettingsAdvanced:h}),...l?[Sre({isRbacEnabled:t,showAgentInternetAccessToggle:_,includeFeatures:s,includeBetaSettings:f,githubConnectorEnabled:n,isCBP:e,isQuorumM1:S})]:[],...u?[wre({isRbacEnabled:t,isInSupportedDrRegion:r,includeBetaSettings:f,isQuorumM1:S})]:[],Ere({isAppleIntelligenceToggleEnabled:v,isAppleIntelligenceMdmToggleEnabled:y,isQuorumM1:S}),...i||x?[xre({isRbacEnabled:t,includeModels:i,includeGPT5AndLegacyModels:x,legacyModelsEnabled:w})]:[],...t&&g?[Tre(S)]:[],...t&&g?[Ore(S)]:[],...t&&C?[kre]:[]]}const Hve=()=>{const e=Y();return we(e,"1355972088")},zr=()=>{const e=Y();return zt(e,"2826703856")},Vve=()=>zr().get("self_serve_page_enabled",!1),zve=()=>zr().get("models_display_in_rbac_page",!1),$ve=()=>zr().get("features_display_in_rbac_page",!1),Wve=()=>zr().get("beta_settings_display_in_rbac_page",!1),Kve=()=>zr().get("beta_settings_display_in_rbac_page_advanced",!1),Yve=()=>zr().get("gpt_settings_display_in_rbac_page",!1),Are=()=>zr().get("enable_gpt_fe_controls",!1),Mre=()=>zr().get("enable_project_fe_controls",!1),Zve=()=>zr().get("enable_combined_rbac_page",!1),Jve=()=>{const e=Y();return we(e,"1277555238")},Qve=()=>zr().get("enable_agent_mode",!1),Xve=()=>zr().get("enable_gpt5_and_legacy_models",!1),B3=e=>{const t=on(),n=t?.getWorkspaceId(),r=Mre(),{data:s,isLoading:i}=Sh(n);if(!t?.isWorkspaceAccount())return{hasWorkspacePermission:!0,isLoading:!1};const o=s?.permissions?.includes(e)??!1;return{hasWorkspacePermission:r?o:!0,isLoading:i}},eye=()=>{const{hasWorkspacePermission:e,isLoading:t}=B3(Uo.CrudProject);return{canCreate:e,isLoading:t}},tye=e=>{const{hasWorkspacePermission:t,isLoading:n}=B3(Uo.CrudProject);return{canEdit:(t&&e?.gizmo.current_user_permission?.can_write)??!1,isLoading:n}},nye=e=>{const{hasWorkspacePermission:t,isLoading:n}=B3(Uo.CrudProject);return{canDelete:(t&&e?.gizmo.current_user_permission?.can_delete)??!1,isLoading:n}};function Bi(e){return e.slice(0,4)==="g-p-"}function Ire(e){return e!=null&&!Bi(e)}function rye(e){return!Ire(e)}function MM(e){return Bi(e.gizmo.id)}function sye(e,t){return!(_t.getItem(Qe.TasksHasSeenProjectDisclaimerBanner)!=null)&&e===mre&&MM(t)&&t.files.length>0}const IM=It(()=>nt({}));var w0,i7;function Nre(){if(i7)return w0;i7=1;function e(t){return t!==t}return w0=e,w0}var E0,o7;function Rre(){if(o7)return E0;o7=1;function e(t,n,r){for(var s=r-1,i=t.length;++s<i;)if(t[s]===n)return s;return-1}return E0=e,E0}var x0,a7;function Pre(){if(a7)return x0;a7=1;var e=aT(),t=Nre(),n=Rre();function r(s,i,o){return i===i?n(s,i,o):e(s,t,o)}return x0=r,x0}var T0,c7;function Dre(){if(c7)return T0;c7=1;var e=Pre();function t(n,r){var s=n==null?0:n.length;return!!s&&e(n,r,0)>-1}return T0=t,T0}var O0,l7;function Lre(){if(l7)return O0;l7=1;function e(t,n,r){for(var s=-1,i=t==null?0:t.length;++s<i;)if(r(n,t[s]))return!0;return!1}return O0=e,O0}var k0,u7;function NM(){if(u7)return k0;u7=1;function e(){}return k0=e,k0}var A0,d7;function Fre(){if(d7)return A0;d7=1;var e=Px(),t=NM(),n=o2(),r=1/0,s=e&&1/n(new e([,-0]))[1]==r?function(i){return new e(i)}:t;return A0=s,A0}var M0,f7;function jre(){if(f7)return M0;f7=1;var e=Ex(),t=Dre(),n=Lre(),r=xx(),s=Fre(),i=o2(),o=200;function a(c,l,u){var d=-1,f=t,h=c.length,g=!0,_=[],v=_;if(u)g=!1,f=n;else if(h>=o){var y=l?null:s(c);if(y)return i(y);g=!1,f=r,v=new e}else v=l?[]:_;e:for(;++d<h;){var C=c[d],E=l?l(C):C;if(C=u||C!==0?C:0,g&&E===E){for(var b=v.length;b--;)if(v[b]===E)continue e;l&&v.push(E),_.push(C)}else f(v,E,u)||(v!==_&&v.push(E),_.push(C))}return _}return M0=a,M0}var I0,h7;function Ure(){if(h7)return I0;h7=1;var e=jre();function t(n){return n&&n.length?e(n):[]}return I0=t,I0}var Bre=Ure();const qre=Ot(Bre),Gre="hints",Hre="system_hints";function qv(e){const t=[Gre,Hre].flatMap(n=>e.getAll(n)).flatMap(n=>n.split(",")).flatMap(n=>{const r=Jj(n);return r?[r]:[]});return qre(t)}var Gv=(e=>(e.Hover="hover",e.Enable="enable",e.Disable="disable",e))(Gv||{});const Vre=new Map([[X.Search,{hover:["Composer Search Button Hovered","composer_search_button_hovered"],enable:["Composer Search Button Clicked","composer_search_button_clicked"],disable:["Composer Search Button Clicked","composer_search_button_clicked"]}],[X.Think,{hover:["Composer Think Button Hovered","composer_think_button_hovered"],enable:["Composer Think Button Enabled","composer_think_button_enabled"],disable:["Composer Think Button Disabled","composer_think_button_disabled"]}],[X.Research,{hover:["Composer Research Button Hovered","composer_research_button_hovered"],enable:["Composer Research Button Enabled","composer_research_button_enabled"],disable:["Composer Research Button Disabled","composer_research_button_disabled"]}],[X.PictureV2,{hover:["Composer Create Image Button Hovered","composer_create_image_button_hovered"],enable:["Composer Create Image Button Enabled","composer_create_image_button_enabled"],disable:["Composer Create Image Button Disabled","composer_create_image_button_disabled"]}],[X.Slurm,{hover:["Composer Slurm Button Hovered","composer_slurm_button_hovered"],enable:["Composer Slurm Button Enabled","composer_slurm_button_enabled"],disable:["Composer Slurm Button Disabled","composer_slurm_button_disabled"]}]]);function p7(e,t,n){const[r,s]=Vre.get(e)?.[t]??[];r&&s&&P.logEventWithStatsig(r,s,n)}const zre=e=>m.createElement("svg",{width:20,height:20,viewBox:"0 0 20 20",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",...e},m.createElement("path",{d:"M10.3227 1.62663C11.1514 1.62663 11.9182 2.066 12.3373 2.78092L13.1586 4.18131L13.2123 4.25065C13.2735 4.31105 13.3565 4.34658 13.4448 4.34733L15.06 4.36002L15.2143 4.36686C15.9825 4.4239 16.6774 4.85747 17.0649 5.53092L17.393 6.10221L17.4662 6.23795C17.7814 6.88041 17.7842 7.63306 17.4741 8.27799L17.4028 8.41373L16.6 9.83561C16.5426 9.93768 16.5425 10.0627 16.6 10.1647L17.4028 11.5856L17.4741 11.7223C17.7841 12.3673 17.7815 13.1199 17.4662 13.7624L17.393 13.8981L17.0649 14.4694C16.6774 15.1427 15.9824 15.5764 15.2143 15.6335L15.06 15.6393L13.4448 15.653C13.3565 15.6537 13.2736 15.6892 13.2123 15.7497L13.1586 15.818L12.3373 17.2194C11.9182 17.9342 11.1513 18.3737 10.3227 18.3737H9.6762C8.8995 18.3735 8.17705 17.9874 7.74456 17.3503L7.66253 17.2194L6.84124 15.818C6.79652 15.7418 6.72408 15.6876 6.64105 15.6647L6.55511 15.653L4.93987 15.6393C4.16288 15.633 3.44339 15.2413 3.01605 14.6003L2.93499 14.4694L2.60687 13.8981C2.19555 13.1831 2.1916 12.3039 2.5971 11.5856L3.39886 10.1647L3.43206 10.0846C3.44649 10.0293 3.44644 9.97102 3.43206 9.91569L3.39886 9.83561L2.5971 8.41373C2.19175 7.6955 2.19562 6.8171 2.60687 6.10221L2.93499 5.53092L3.01605 5.40006C3.44337 4.75894 4.1628 4.36636 4.93987 4.36002L6.55511 4.34733L6.64105 4.33561C6.72418 4.31275 6.79651 4.25762 6.84124 4.18131L7.66253 2.78092L7.74456 2.65006C8.17704 2.01277 8.89941 1.62678 9.6762 1.62663H10.3227ZM9.6762 2.9567C9.36439 2.95685 9.07299 3.10138 8.88421 3.34342L8.80999 3.45377L7.9887 4.85416C7.72933 5.29669 7.28288 5.59093 6.78265 5.6608L6.56585 5.67741L4.95062 5.6901C4.63868 5.69265 4.34845 5.84001 4.16155 6.08366L4.08733 6.19401L3.75921 6.7653C3.58227 7.073 3.5808 7.45131 3.7553 7.76041L4.55706 9.18131L4.65179 9.37663C4.81309 9.77605 4.81294 10.2232 4.65179 10.6227L4.55706 10.819L3.7553 12.2399C3.58083 12.549 3.5822 12.9273 3.75921 13.235L4.08733 13.8053L4.16155 13.9157C4.34844 14.1596 4.6385 14.3067 4.95062 14.3092L6.56585 14.3229L6.78265 14.3385C7.28292 14.4084 7.72931 14.7036 7.9887 15.1462L8.80999 16.5465L8.88421 16.6559C9.07298 16.8982 9.36422 17.0435 9.6762 17.0436H10.3227C10.6793 17.0436 11.0095 16.8542 11.1899 16.5465L12.0112 15.1462L12.1332 14.9655C12.4432 14.5668 12.9212 14.3271 13.434 14.3229L15.0492 14.3092L15.1811 14.2995C15.4854 14.2567 15.7569 14.076 15.9125 13.8053L16.2407 13.235L16.2983 13.1169C16.3983 12.8745 16.3999 12.6023 16.3022 12.359L16.2446 12.2399L15.4418 10.819C15.1551 10.311 15.1551 9.6893 15.4418 9.18131L16.2446 7.76041L16.3022 7.64127C16.4 7.39806 16.3982 7.12584 16.2983 6.88346L16.2407 6.7653L15.9125 6.19401C15.7568 5.92338 15.4855 5.74264 15.1811 5.69987L15.0492 5.6901L13.434 5.67741C12.9212 5.67322 12.4432 5.43341 12.1332 5.03483L12.0112 4.85416L11.1899 3.45377C11.0095 3.14604 10.6794 2.9567 10.3227 2.9567H9.6762ZM11.5854 9.99967C11.5852 9.12461 10.8755 8.41497 10.0004 8.41471C9.12516 8.41471 8.41466 9.12445 8.41448 9.99967C8.41448 10.875 9.12505 11.5846 10.0004 11.5846C10.8756 11.5844 11.5854 10.8749 11.5854 9.99967ZM12.9145 9.99967C12.9145 11.6094 11.6101 12.9145 10.0004 12.9147C8.39051 12.9147 7.08538 11.6096 7.08538 9.99967C7.08556 8.38991 8.39062 7.08463 10.0004 7.08463C11.61 7.08489 12.9143 8.39007 12.9145 9.99967Z"})),$re=({icon:e,title:t,description:n,statusIndicator:r,showGitHubConfigure:s})=>{const i=wY();return p.jsxs("div",{className:"flex w-full items-center justify-between gap-4",children:[p.jsxs("div",{className:"me-4 flex items-center gap-3 text-start text-sm",children:[e,n?p.jsxs("div",{className:"flex min-w-0 flex-1 flex-col",children:[t,p.jsx("div",{className:"text-token-text-secondary text-xs",children:n})]}):t]}),s&&p.jsx(Ct,{onClick:()=>{window.open(i,"_blank")},color:"secondary",size:"small",children:p.jsx(zre,{className:"icon-sm"})}),r]})};function iye(e,t){const n=m.useRef(e);m.useEffect(()=>{n.current=e},[e]),m.useEffect(()=>{function r(){n.current()}if(t!=null){const s=window.setInterval(r,t);return()=>clearInterval(s)}},[t])}var Id={exports:{}},Wre=Id.exports,m7;function Kre(){return m7||(m7=1,function(e){(function(t,n,r){function s(c){var l=this,u=a();l.next=function(){var d=2091639*l.s0+l.c*23283064365386963e-26;return l.s0=l.s1,l.s1=l.s2,l.s2=d-(l.c=d|0)},l.c=1,l.s0=u(" "),l.s1=u(" "),l.s2=u(" "),l.s0-=u(c),l.s0<0&&(l.s0+=1),l.s1-=u(c),l.s1<0&&(l.s1+=1),l.s2-=u(c),l.s2<0&&(l.s2+=1),u=null}function i(c,l){return l.c=c.c,l.s0=c.s0,l.s1=c.s1,l.s2=c.s2,l}function o(c,l){var u=new s(c),d=l&&l.state,f=u.next;return f.int32=function(){return u.next()*4294967296|0},f.double=function(){return f()+(f()*2097152|0)*11102230246251565e-32},f.quick=f,d&&(typeof d=="object"&&i(d,u),f.state=function(){return i(u,{})}),f}function a(){var c=4022871197,l=function(u){u=String(u);for(var d=0;d<u.length;d++){c+=u.charCodeAt(d);var f=.02519603282416938*c;c=f>>>0,f-=c,f*=c,c=f>>>0,f-=c,c+=f*4294967296}return(c>>>0)*23283064365386963e-26};return l}n&&n.exports?n.exports=o:this.alea=o})(Wre,e)}(Id)),Id.exports}var Nd={exports:{}},Yre=Nd.exports,g7;function Zre(){return g7||(g7=1,function(e){(function(t,n,r){function s(a){var c=this,l="";c.x=0,c.y=0,c.z=0,c.w=0,c.next=function(){var d=c.x^c.x<<11;return c.x=c.y,c.y=c.z,c.z=c.w,c.w^=c.w>>>19^d^d>>>8},a===(a|0)?c.x=a:l+=a;for(var u=0;u<l.length+64;u++)c.x^=l.charCodeAt(u)|0,c.next()}function i(a,c){return c.x=a.x,c.y=a.y,c.z=a.z,c.w=a.w,c}function o(a,c){var l=new s(a),u=c&&c.state,d=function(){return(l.next()>>>0)/4294967296};return d.double=function(){do var f=l.next()>>>11,h=(l.next()>>>0)/4294967296,g=(f+h)/(1<<21);while(g===0);return g},d.int32=l.next,d.quick=d,u&&(typeof u=="object"&&i(u,l),d.state=function(){return i(l,{})}),d}n&&n.exports?n.exports=o:this.xor128=o})(Yre,e)}(Nd)),Nd.exports}var Rd={exports:{}},Jre=Rd.exports,_7;function Qre(){return _7||(_7=1,function(e){(function(t,n,r){function s(a){var c=this,l="";c.next=function(){var d=c.x^c.x>>>2;return c.x=c.y,c.y=c.z,c.z=c.w,c.w=c.v,(c.d=c.d+362437|0)+(c.v=c.v^c.v<<4^(d^d<<1))|0},c.x=0,c.y=0,c.z=0,c.w=0,c.v=0,a===(a|0)?c.x=a:l+=a;for(var u=0;u<l.length+64;u++)c.x^=l.charCodeAt(u)|0,u==l.length&&(c.d=c.x<<10^c.x>>>4),c.next()}function i(a,c){return c.x=a.x,c.y=a.y,c.z=a.z,c.w=a.w,c.v=a.v,c.d=a.d,c}function o(a,c){var l=new s(a),u=c&&c.state,d=function(){return(l.next()>>>0)/4294967296};return d.double=function(){do var f=l.next()>>>11,h=(l.next()>>>0)/4294967296,g=(f+h)/(1<<21);while(g===0);return g},d.int32=l.next,d.quick=d,u&&(typeof u=="object"&&i(u,l),d.state=function(){return i(l,{})}),d}n&&n.exports?n.exports=o:this.xorwow=o})(Jre,e)}(Rd)),Rd.exports}var Pd={exports:{}},Xre=Pd.exports,v7;function ese(){return v7||(v7=1,function(e){(function(t,n,r){function s(a){var c=this;c.next=function(){var u=c.x,d=c.i,f,h;return f=u[d],f^=f>>>7,h=f^f<<24,f=u[d+1&7],h^=f^f>>>10,f=u[d+3&7],h^=f^f>>>3,f=u[d+4&7],h^=f^f<<7,f=u[d+7&7],f=f^f<<13,h^=f^f<<9,u[d]=h,c.i=d+1&7,h};function l(u,d){var f,h=[];if(d===(d|0))h[0]=d;else for(d=""+d,f=0;f<d.length;++f)h[f&7]=h[f&7]<<15^d.charCodeAt(f)+h[f+1&7]<<13;for(;h.length<8;)h.push(0);for(f=0;f<8&&h[f]===0;++f);for(f==8?h[7]=-1:h[f],u.x=h,u.i=0,f=256;f>0;--f)u.next()}l(c,a)}function i(a,c){return c.x=a.x.slice(),c.i=a.i,c}function o(a,c){a==null&&(a=+new Date);var l=new s(a),u=c&&c.state,d=function(){return(l.next()>>>0)/4294967296};return d.double=function(){do var f=l.next()>>>11,h=(l.next()>>>0)/4294967296,g=(f+h)/(1<<21);while(g===0);return g},d.int32=l.next,d.quick=d,u&&(u.x&&i(u,l),d.state=function(){return i(l,{})}),d}n&&n.exports?n.exports=o:this.xorshift7=o})(Xre,e)}(Pd)),Pd.exports}var Dd={exports:{}},tse=Dd.exports,y7;function nse(){return y7||(y7=1,function(e){(function(t,n,r){function s(a){var c=this;c.next=function(){var u=c.w,d=c.X,f=c.i,h,g;return c.w=u=u+1640531527|0,g=d[f+34&127],h=d[f=f+1&127],g^=g<<13,h^=h<<17,g^=g>>>15,h^=h>>>12,g=d[f]=g^h,c.i=f,g+(u^u>>>16)|0};function l(u,d){var f,h,g,_,v,y=[],C=128;for(d===(d|0)?(h=d,d=null):(d=d+"\0",h=0,C=Math.max(C,d.length)),g=0,_=-32;_<C;++_)d&&(h^=d.charCodeAt((_+32)%d.length)),_===0&&(v=h),h^=h<<10,h^=h>>>15,h^=h<<4,h^=h>>>13,_>=0&&(v=v+1640531527|0,f=y[_&127]^=h+v,g=f==0?g+1:0);for(g>=128&&(y[(d&&d.length||0)&127]=-1),g=127,_=4*128;_>0;--_)h=y[g+34&127],f=y[g=g+1&127],h^=h<<13,f^=f<<17,h^=h>>>15,f^=f>>>12,y[g]=h^f;u.w=v,u.X=y,u.i=g}l(c,a)}function i(a,c){return c.i=a.i,c.w=a.w,c.X=a.X.slice(),c}function o(a,c){a==null&&(a=+new Date);var l=new s(a),u=c&&c.state,d=function(){return(l.next()>>>0)/4294967296};return d.double=function(){do var f=l.next()>>>11,h=(l.next()>>>0)/4294967296,g=(f+h)/(1<<21);while(g===0);return g},d.int32=l.next,d.quick=d,u&&(u.X&&i(u,l),d.state=function(){return i(l,{})}),d}n&&n.exports?n.exports=o:this.xor4096=o})(tse,e)}(Dd)),Dd.exports}var Ld={exports:{}},rse=Ld.exports,C7;function sse(){return C7||(C7=1,function(e){(function(t,n,r){function s(a){var c=this,l="";c.next=function(){var d=c.b,f=c.c,h=c.d,g=c.a;return d=d<<25^d>>>7^f,f=f-h|0,h=h<<24^h>>>8^g,g=g-d|0,c.b=d=d<<20^d>>>12^f,c.c=f=f-h|0,c.d=h<<16^f>>>16^g,c.a=g-d|0},c.a=0,c.b=0,c.c=-1640531527,c.d=1367130551,a===Math.floor(a)?(c.a=a/4294967296|0,c.b=a|0):l+=a;for(var u=0;u<l.length+20;u++)c.b^=l.charCodeAt(u)|0,c.next()}function i(a,c){return c.a=a.a,c.b=a.b,c.c=a.c,c.d=a.d,c}function o(a,c){var l=new s(a),u=c&&c.state,d=function(){return(l.next()>>>0)/4294967296};return d.double=function(){do var f=l.next()>>>11,h=(l.next()>>>0)/4294967296,g=(f+h)/(1<<21);while(g===0);return g},d.int32=l.next,d.quick=d,u&&(typeof u=="object"&&i(u,l),d.state=function(){return i(l,{})}),d}n&&n.exports?n.exports=o:this.tychei=o})(rse,e)}(Ld)),Ld.exports}var Fd={exports:{}};const ise={},ose=Object.freeze(Object.defineProperty({__proto__:null,default:ise},Symbol.toStringTag,{value:"Module"})),ase=IR(ose);var cse=Fd.exports,b7;function lse(){return b7||(b7=1,function(e){(function(t,n,r){var s=256,i=6,o=52,a="random",c=r.pow(s,i),l=r.pow(2,o),u=l*2,d=s-1,f;function h(b,S,w){var x=[];S=S==!0?{entropy:!0}:S||{};var T=y(v(S.entropy?[b,E(n)]:b??C(),3),x),O=new g(x),A=function(){for(var k=O.g(i),I=c,N=0;k<l;)k=(k+N)*s,I*=s,N=O.g(1);for(;k>=u;)k/=2,I/=2,N>>>=1;return(k+N)/I};return A.int32=function(){return O.g(4)|0},A.quick=function(){return O.g(4)/4294967296},A.double=A,y(E(O.S),n),(S.pass||w||function(k,I,N,j){return j&&(j.S&&_(j,O),k.state=function(){return _(O,{})}),N?(r[a]=k,I):k})(A,T,"global"in S?S.global:this==r,S.state)}function g(b){var S,w=b.length,x=this,T=0,O=x.i=x.j=0,A=x.S=[];for(w||(b=[w++]);T<s;)A[T]=T++;for(T=0;T<s;T++)A[T]=A[O=d&O+b[T%w]+(S=A[T])],A[O]=S;(x.g=function(k){for(var I,N=0,j=x.i,q=x.j,D=x.S;k--;)I=D[j=d&j+1],N=N*s+D[d&(D[j]=D[q=d&q+I])+(D[q]=I)];return x.i=j,x.j=q,N})(s)}function _(b,S){return S.i=b.i,S.j=b.j,S.S=b.S.slice(),S}function v(b,S){var w=[],x=typeof b,T;if(S&&x=="object")for(T in b)try{w.push(v(b[T],S-1))}catch{}return w.length?w:x=="string"?b:b+"\0"}function y(b,S){for(var w=b+"",x,T=0;T<w.length;)S[d&T]=d&(x^=S[d&T]*19)+w.charCodeAt(T++);return E(S)}function C(){try{var b;return f&&(b=f.randomBytes)?b=b(s):(b=new Uint8Array(s),(t.crypto||t.msCrypto).getRandomValues(b)),E(b)}catch{var S=t.navigator,w=S&&S.plugins;return[+new Date,t,w,t.screen,E(n)]}}function E(b){return String.fromCharCode.apply(0,b)}if(y(r.random(),n),e.exports){e.exports=h;try{f=ase}catch{}}else r["seed"+a]=h})(typeof self<"u"?self:cse,[],Math)}(Fd)),Fd.exports}var N0,S7;function use(){if(S7)return N0;S7=1;var e=Kre(),t=Zre(),n=Qre(),r=ese(),s=nse(),i=sse(),o=lse();return o.alea=e,o.xor128=t,o.xorwow=n,o.xorshift7=r,o.xor4096=s,o.tychei=i,N0=o,N0}var dse=use();const fse=Ot(dse);function hse({lines:e=1,variance:t=0,size:n="base",width:r=50,widthVariance:s=50,className:i}){const[o]=m.useState(()=>RM(e,r,s,t));let a="";switch(n){case"sm":a="h-3 mb-2 mt-0.5";break;case"base":a="h-4 my-2";break;case"lg":a="h-5 my-2";break}return p.jsx(p.Fragment,{children:o.map((c,l)=>p.jsx("div",{className:ne("bg-token-sidebar-surface-secondary dark:bg-token-border-default relative w-full overflow-hidden rounded-md",a,i),style:{width:`${c}%`},children:p.jsx(i9.div,{className:"absolute start-0 top-0 h-full w-full rotate-45 bg-linear-to-r from-transparent via-black/20 to-transparent opacity-50 dark:via-white/5",animate:{x:["-100%","100%"],opacity:[1,0,1],transition:{repeat:1/0,repeatType:"loop",duration:1.5+l}}})},l))})}function oye({lines:e=1,indexOffset:t=0,variance:n=0,width:r=50,widthVariance:s=50,gapFrequency:i=0,scaleUpAnimation:o,className:a,heightSize:c}){const l=m.useMemo(()=>RM(e,r,s,n),[e,n,r,s]);return p.jsx(pse,{className:a,children:l.map((u,d)=>p.jsx(gse,{index:d+t,width:u,className:ne(i>0&&(d+1)%i===0&&"mb-snc-1"),heightSize:c,customAnimation:o?{initial:{scaleX:o.initialScaleX},animate:{scaleX:1},transition:{scaleX:{duration:o.duration,ease:"easeInOut",delay:d*.07}}}:void 0},d))})}const pse=Fi.div`flex flex-col items-start gap-2`,mse={sm:"h-3.5",md:"h-5",lg:"h-6"};function gse({index:e,width:t,className:n,customAnimation:r,heightSize:s="md"}){const{initial:i,animate:o,transition:a}=r??{initial:{},animate:{},transition:{}};return p.jsx(i9.div,{className:ne(mse[s],"bg-token-border-default origin-left rounded-md dark:bg-white/10",n),style:{width:`${t}%`},initial:{opacity:1,...i},animate:{opacity:[1,.4],...o},transition:{opacity:{repeat:1/0,repeatType:"reverse",duration:.85,ease:"easeInOut",delay:e*.07},...a}})}function RM(e,t,n,r){const s=fse([e,t,n,r].join("-"));return Array.from({length:e+s()*(r??0)},()=>t+s()*n)}const _se=e=>m.createElement("svg",{width:20,height:20,viewBox:"0 0 20 20",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",...e},m.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M10.667 2.08496C15.0382 2.08509 18.582 5.62875 18.582 10C18.582 14.3713 15.0382 17.9149 10.667 17.915C6.29566 17.915 2.75195 14.3713 2.75195 10C2.75195 5.62867 6.29566 2.08496 10.667 2.08496ZM13.7588 6.74805C13.4585 6.53673 13.0434 6.60897 12.832 6.90918L9.35059 11.8545L7.82617 10.1777L7.72559 10.0879C7.47599 9.90563 7.12443 9.91699 6.88672 10.1328C6.64884 10.3491 6.60354 10.6989 6.76172 10.9648L6.8418 11.0723L8.9248 13.3643L8.97852 13.417C9.10977 13.532 9.28278 13.592 9.45898 13.5811C9.66011 13.5683 9.84489 13.4646 9.96094 13.2998L13.9199 7.6748C14.131 7.37468 14.0586 6.95952 13.7588 6.74805Z"})),q3=e=>m.createElement("svg",{width:16,height:16,viewBox:"0 0 16 16",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",...e},m.createElement("path",{d:"M12.0961 2.91371C12.3297 2.68688 12.6984 2.64794 12.9779 2.83852C13.2571 3.02905 13.3554 3.38601 13.2299 3.68618L13.1615 3.81118L6.91152 12.9772C6.79412 13.1494 6.60631 13.2604 6.39882 13.2799C6.19137 13.2994 5.98565 13.226 5.83828 13.0788L2.08828 9.32875L1.99843 9.2184C1.81921 8.94677 1.84928 8.57767 2.08828 8.33852C2.3274 8.0994 2.69648 8.06947 2.96816 8.24868L3.07851 8.33852L6.23085 11.4909L12.0053 3.02211L12.0961 2.91371Z"})),vse=e=>m.createElement("svg",{width:20,height:20,viewBox:"0 0 20 20",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",...e},m.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M10 2.08496C14.3713 2.08496 17.915 5.62867 17.915 10C17.915 14.3713 14.3713 17.915 10 17.915C5.62867 17.915 2.08496 14.3713 2.08496 10C2.08496 5.62867 5.62867 2.08496 10 2.08496ZM10 3.41504C6.3632 3.41504 3.41504 6.3632 3.41504 10C3.41504 13.6368 6.3632 16.585 10 16.585C13.6368 16.585 16.585 13.6368 16.585 10C16.585 6.3632 13.6368 3.41504 10 3.41504Z"})),yse={threshold:1,rootMargin:"0%"};function Cse({target:e,onChange:t,options:n=yse}){if(!e)return;const r=new IntersectionObserver(i=>{const o=Array.isArray(r.thresholds)?r.thresholds:[r.thresholds];i.forEach(a=>{const c=a.isIntersecting&&o.some(l=>a.intersectionRatio>=l);t(c,a)})},n);function s(){r.disconnect()}return r.observe(e),s}function bse({setIsScrolledToEdge:e,className:t,options:n}){return p.jsx("div",{"aria-hidden":!0,"data-edge":!0,className:ne("pointer-events-none h-px w-px",t),ref:r=>Cse({target:r,onChange:s=>e(!s),options:n})})}const Sse=({isOpen:e,onClose:t})=>{const n=m.useRef(null),r=n.current?.ownerDocument.body??null;return m.useEffect(()=>{if(!r||!e)return;const s=i=>{(!i.relatedTarget||i.relatedTarget instanceof HTMLElement&&!r.contains(i.relatedTarget))&&t()};return r.addEventListener("blur",s,{capture:!0}),()=>r.removeEventListener("blur",s,{capture:!0})},[e,r]),{triggerRef:n,container:r}};var wse=function(e){if(typeof document>"u")return null;var t=Array.isArray(e)?e[0]:e;return t.ownerDocument.body},sa=new WeakMap,Qu=new WeakMap,Xu={},R0=0,PM=function(e){return e&&(e.host||PM(e.parentNode))},Ese=function(e,t){return t.map(function(n){if(e.contains(n))return n;var r=PM(n);return r&&e.contains(r)?r:(console.error("aria-hidden",n,"in not contained inside",e,". Doing nothing"),null)}).filter(function(n){return!!n})},xse=function(e,t,n,r){var s=Ese(t,Array.isArray(e)?e:[e]);Xu[n]||(Xu[n]=new WeakMap);var i=Xu[n],o=[],a=new Set,c=new Set(s),l=function(d){!d||a.has(d)||(a.add(d),l(d.parentNode))};s.forEach(l);var u=function(d){!d||c.has(d)||Array.prototype.forEach.call(d.children,function(f){if(a.has(f))u(f);else try{var h=f.getAttribute(r),g=h!==null&&h!=="false",_=(sa.get(f)||0)+1,v=(i.get(f)||0)+1;sa.set(f,_),i.set(f,v),o.push(f),_===1&&g&&Qu.set(f,!0),v===1&&f.setAttribute(n,"true"),g||f.setAttribute(r,"true")}catch(y){console.error("aria-hidden: cannot operate on ",f,y)}})};return u(t),a.clear(),R0++,function(){o.forEach(function(d){var f=sa.get(d)-1,h=i.get(d)-1;sa.set(d,f),i.set(d,h),f||(Qu.has(d)||d.removeAttribute(r),Qu.delete(d)),h||d.removeAttribute(n)}),R0--,R0||(sa=new WeakMap,sa=new WeakMap,Qu=new WeakMap,Xu={})}},Tse=function(e,t,n){n===void 0&&(n="data-aria-hidden");var r=Array.from(Array.isArray(e)?e:[e]),s=wse(e);return s?(r.push.apply(r,Array.from(s.querySelectorAll("[aria-live], script"))),xse(r,s,n,"aria-hidden")):function(){return null}},Hv=["Enter"," "],Ose=["ArrowDown","PageUp","Home"],DM=["ArrowUp","PageDown","End"],kse=[...Ose,...DM],Ase={ltr:[...Hv,"ArrowRight"],rtl:[...Hv,"ArrowLeft"]},Mse={ltr:["ArrowLeft"],rtl:["ArrowRight"]},vu="Menu",[Dl,Ise,Nse]=MT(vu),[Bo,LM]=hc(vu,[Nse,zh,qh]),yu=zh(),FM=qh(),[jM,qi]=Bo(vu),[Rse,Cu]=Bo(vu),UM=e=>{const{__scopeMenu:t,open:n=!1,children:r,dir:s,onOpenChange:i,modal:o=!0}=e,a=yu(t),[c,l]=m.useState(null),u=m.useRef(!1),d=lr(i),f=P2(s);return m.useEffect(()=>{const h=()=>{u.current=!0,document.addEventListener("pointerdown",g,{capture:!0,once:!0}),document.addEventListener("pointermove",g,{capture:!0,once:!0})},g=()=>u.current=!1;return document.addEventListener("keydown",h,{capture:!0}),()=>{document.removeEventListener("keydown",h,{capture:!0}),document.removeEventListener("pointerdown",g,{capture:!0}),document.removeEventListener("pointermove",g,{capture:!0})}},[]),p.jsx($2,{...a,children:p.jsx(jM,{scope:t,open:n,onOpenChange:d,content:c,onContentChange:l,children:p.jsx(Rse,{scope:t,onClose:m.useCallback(()=>d(!1),[d]),isUsingKeyboardRef:u,dir:f,modal:o,children:r})})})};UM.displayName=vu;var Pse="MenuAnchor",G3=m.forwardRef((e,t)=>{const{__scopeMenu:n,...r}=e,s=yu(n);return p.jsx(TO,{...s,...r,ref:t})});G3.displayName=Pse;var H3="MenuPortal",[Dse,BM]=Bo(H3,{forceMount:void 0}),qM=e=>{const{__scopeMenu:t,forceMount:n,children:r,container:s}=e,i=qi(H3,t);return p.jsx(Dse,{scope:t,forceMount:n,children:p.jsx(Hr,{present:n||i.open,children:p.jsx(iu,{asChild:!0,container:s,children:r})})})};qM.displayName=H3;var ar="MenuContent",[Lse,V3]=Bo(ar),GM=m.forwardRef((e,t)=>{const n=BM(ar,e.__scopeMenu),{forceMount:r=n.forceMount,...s}=e,i=qi(ar,e.__scopeMenu),o=Cu(ar,e.__scopeMenu);return p.jsx(Dl.Provider,{scope:e.__scopeMenu,children:p.jsx(Hr,{present:r||i.open,children:p.jsx(Dl.Slot,{scope:e.__scopeMenu,children:o.modal?p.jsx(Fse,{...s,ref:t}):p.jsx(jse,{...s,ref:t})})})})}),Fse=m.forwardRef((e,t)=>{const n=qi(ar,e.__scopeMenu),r=m.useRef(null),s=Mt(t,r);return m.useEffect(()=>{const i=r.current;if(i)return Tse(i)},[]),p.jsx(z3,{...e,ref:s,trapFocus:n.open,disableOutsidePointerEvents:n.open,disableOutsideScroll:!0,onFocusOutside:Ce(e.onFocusOutside,i=>i.preventDefault(),{checkForDefaultPrevented:!1}),onDismiss:()=>n.onOpenChange(!1)})}),jse=m.forwardRef((e,t)=>{const n=qi(ar,e.__scopeMenu);return p.jsx(z3,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,disableOutsideScroll:!1,onDismiss:()=>n.onOpenChange(!1)})}),z3=m.forwardRef((e,t)=>{const{__scopeMenu:n,loop:r=!1,trapFocus:s,onOpenAutoFocus:i,onCloseAutoFocus:o,disableOutsidePointerEvents:a,onEntryFocus:c,onEscapeKeyDown:l,onPointerDownOutside:u,onFocusOutside:d,onInteractOutside:f,onDismiss:h,disableOutsideScroll:g,..._}=e,v=qi(ar,n),y=Cu(ar,n),C=yu(n),E=FM(n),b=Ise(n),[S,w]=m.useState(null),x=m.useRef(null),T=Mt(t,x,v.onContentChange),O=m.useRef(0),A=m.useRef(""),k=m.useRef(0),I=m.useRef(null),N=m.useRef("right"),j=m.useRef(0),q=g?J2:m.Fragment,D=g?{as:Za,allowPinchZoom:!0}:void 0,U=F=>{const le=A.current+F,me=b().filter(L=>!L.disabled),ge=document.activeElement,ke=me.find(L=>L.ref.current===ge)?.textValue,Pe=me.map(L=>L.textValue),ve=Zse(Pe,le,ke),he=me.find(L=>L.textValue===ve)?.ref.current;(function L(ue){A.current=ue,window.clearTimeout(O.current),ue!==""&&(O.current=window.setTimeout(()=>L(""),1e3))})(le),he&&setTimeout(()=>he.focus())};m.useEffect(()=>()=>window.clearTimeout(O.current),[]),GO();const G=m.useCallback(F=>N.current===I.current?.side&&Qse(F,I.current?.area),[]);return p.jsx(Lse,{scope:n,searchRef:A,onItemEnter:m.useCallback(F=>{G(F)&&F.preventDefault()},[G]),onItemLeave:m.useCallback(F=>{G(F)||(x.current?.focus(),w(null))},[G]),onTriggerLeave:m.useCallback(F=>{G(F)&&F.preventDefault()},[G]),pointerGraceTimerRef:k,onPointerGraceIntentChange:m.useCallback(F=>{I.current=F},[]),children:p.jsx(q,{...D,children:p.jsx(Z2,{asChild:!0,trapped:s,onMountAutoFocus:Ce(i,F=>{F.preventDefault(),x.current?.focus({preventScroll:!0})}),onUnmountAutoFocus:o,children:p.jsx(ru,{asChild:!0,disableOutsidePointerEvents:a,onEscapeKeyDown:l,onPointerDownOutside:u,onFocusOutside:d,onInteractOutside:f,onDismiss:h,children:p.jsx(FT,{asChild:!0,...E,dir:y.dir,orientation:"vertical",loop:r,currentTabStopId:S,onCurrentTabStopIdChange:w,onEntryFocus:Ce(c,F=>{y.isUsingKeyboardRef.current||F.preventDefault()}),preventScrollOnEntryFocus:!0,children:p.jsx(OO,{role:"menu","aria-orientation":"vertical","data-state":iI(v.open),"data-radix-menu-content":"",dir:y.dir,...C,..._,ref:T,style:{outline:"none",..._.style},onKeyDown:Ce(_.onKeyDown,F=>{const me=F.target.closest("[data-radix-menu-content]")===F.currentTarget,ge=F.ctrlKey||F.altKey||F.metaKey,ke=F.key.length===1;me&&(F.key==="Tab"&&F.preventDefault(),!ge&&ke&&U(F.key));const Pe=x.current;if(F.target!==Pe||!kse.includes(F.key))return;F.preventDefault();const he=b().filter(L=>!L.disabled).map(L=>L.ref.current);DM.includes(F.key)&&he.reverse(),Kse(he)}),onBlur:Ce(e.onBlur,F=>{F.currentTarget.contains(F.target)||(window.clearTimeout(O.current),A.current="")}),onPointerMove:Ce(e.onPointerMove,Ll(F=>{const le=F.target,me=j.current!==F.clientX;if(F.currentTarget.contains(le)&&me){const ge=F.clientX>j.current?"right":"left";N.current=ge,j.current=F.clientX}}))})})})})})})});GM.displayName=ar;var Use="MenuGroup",$3=m.forwardRef((e,t)=>{const{__scopeMenu:n,...r}=e;return p.jsx(st.div,{role:"group",...r,ref:t})});$3.displayName=Use;var Bse="MenuLabel",HM=m.forwardRef((e,t)=>{const{__scopeMenu:n,...r}=e;return p.jsx(st.div,{...r,ref:t})});HM.displayName=Bse;var Mf="MenuItem",w7="menu.itemSelect",ap=m.forwardRef((e,t)=>{const{disabled:n=!1,onSelect:r,...s}=e,i=m.useRef(null),o=Cu(Mf,e.__scopeMenu),a=V3(Mf,e.__scopeMenu),c=Mt(t,i),l=m.useRef(!1),u=()=>{const d=i.current;if(!n&&d){const f=new CustomEvent(w7,{bubbles:!0,cancelable:!0});d.addEventListener(w7,h=>r?.(h),{once:!0}),ET(d,f),f.defaultPrevented?l.current=!1:o.onClose()}};return p.jsx(VM,{...s,ref:c,disabled:n,onClick:Ce(e.onClick,u),onPointerDown:d=>{e.onPointerDown?.(d),l.current=!0},onPointerUp:Ce(e.onPointerUp,d=>{l.current||d.currentTarget?.click()}),onKeyDown:Ce(e.onKeyDown,d=>{const f=a.searchRef.current!=="";n||f&&d.key===" "||Hv.includes(d.key)&&(d.currentTarget.click(),d.preventDefault())})})});ap.displayName=Mf;var VM=m.forwardRef((e,t)=>{const{__scopeMenu:n,disabled:r=!1,textValue:s,...i}=e,o=V3(Mf,n),a=FM(n),c=m.useRef(null),l=Mt(t,c),[u,d]=m.useState(!1),[f,h]=m.useState("");return m.useEffect(()=>{const g=c.current;g&&h((g.textContent??"").trim())},[i.children]),p.jsx(Dl.ItemSlot,{scope:n,disabled:r,textValue:s??f,children:p.jsx(jT,{asChild:!0,...a,focusable:!r,children:p.jsx(st.div,{role:"menuitem","data-highlighted":u?"":void 0,"aria-disabled":r||void 0,"data-disabled":r?"":void 0,...i,ref:l,onPointerMove:Ce(e.onPointerMove,Ll(g=>{r?o.onItemLeave(g):(o.onItemEnter(g),g.defaultPrevented||g.currentTarget.focus({preventScroll:!0}))})),onPointerLeave:Ce(e.onPointerLeave,Ll(g=>o.onItemLeave(g))),onFocus:Ce(e.onFocus,()=>d(!0)),onBlur:Ce(e.onBlur,()=>d(!1))})})})}),qse="MenuCheckboxItem",zM=m.forwardRef((e,t)=>{const{checked:n=!1,onCheckedChange:r,...s}=e;return p.jsx(ZM,{scope:e.__scopeMenu,checked:n,children:p.jsx(ap,{role:"menuitemcheckbox","aria-checked":If(n)?"mixed":n,...s,ref:t,"data-state":Y3(n),onSelect:Ce(s.onSelect,()=>r?.(If(n)?!0:!n),{checkForDefaultPrevented:!1})})})});zM.displayName=qse;var $M="MenuRadioGroup",[Gse,Hse]=Bo($M,{value:void 0,onValueChange:()=>{}}),WM=m.forwardRef((e,t)=>{const{value:n,onValueChange:r,...s}=e,i=lr(r);return p.jsx(Gse,{scope:e.__scopeMenu,value:n,onValueChange:i,children:p.jsx($3,{...s,ref:t})})});WM.displayName=$M;var KM="MenuRadioItem",YM=m.forwardRef((e,t)=>{const{value:n,...r}=e,s=Hse(KM,e.__scopeMenu),i=n===s.value;return p.jsx(ZM,{scope:e.__scopeMenu,checked:i,children:p.jsx(ap,{role:"menuitemradio","aria-checked":i,...r,ref:t,"data-state":Y3(i),onSelect:Ce(r.onSelect,()=>s.onValueChange?.(n),{checkForDefaultPrevented:!1})})})});YM.displayName=KM;var W3="MenuItemIndicator",[ZM,Vse]=Bo(W3,{checked:!1}),JM=m.forwardRef((e,t)=>{const{__scopeMenu:n,forceMount:r,...s}=e,i=Vse(W3,n);return p.jsx(Hr,{present:r||If(i.checked)||i.checked===!0,children:p.jsx(st.span,{...s,ref:t,"data-state":Y3(i.checked)})})});JM.displayName=W3;var zse="MenuSeparator",QM=m.forwardRef((e,t)=>{const{__scopeMenu:n,...r}=e;return p.jsx(st.div,{role:"separator","aria-orientation":"horizontal",...r,ref:t})});QM.displayName=zse;var $se="MenuArrow",XM=m.forwardRef((e,t)=>{const{__scopeMenu:n,...r}=e,s=yu(n);return p.jsx(kO,{...s,...r,ref:t})});XM.displayName=$se;var K3="MenuSub",[Wse,eI]=Bo(K3),tI=e=>{const{__scopeMenu:t,children:n,open:r=!1,onOpenChange:s}=e,i=qi(K3,t),o=yu(t),[a,c]=m.useState(null),[l,u]=m.useState(null),d=lr(s);return m.useEffect(()=>(i.open===!1&&d(!1),()=>d(!1)),[i.open,d]),p.jsx($2,{...o,children:p.jsx(jM,{scope:t,open:r,onOpenChange:d,content:l,onContentChange:u,children:p.jsx(Wse,{scope:t,contentId:ls(),triggerId:ls(),trigger:a,onTriggerChange:c,children:n})})})};tI.displayName=K3;var Yc="MenuSubTrigger",nI=m.forwardRef((e,t)=>{const n=qi(Yc,e.__scopeMenu),r=Cu(Yc,e.__scopeMenu),s=eI(Yc,e.__scopeMenu),i=V3(Yc,e.__scopeMenu),o=m.useRef(null),{pointerGraceTimerRef:a,onPointerGraceIntentChange:c}=i,l={__scopeMenu:e.__scopeMenu},u=m.useCallback(()=>{o.current&&window.clearTimeout(o.current),o.current=null},[]);return m.useEffect(()=>u,[u]),m.useEffect(()=>{const d=a.current;return()=>{window.clearTimeout(d),c(null)}},[a,c]),p.jsx(G3,{asChild:!0,...l,children:p.jsx(VM,{id:s.triggerId,"aria-haspopup":"menu","aria-expanded":n.open,"aria-controls":s.contentId,"data-state":iI(n.open),...e,ref:Uh(t,s.onTriggerChange),onClick:d=>{e.onClick?.(d),!(e.disabled||d.defaultPrevented)&&(d.currentTarget.focus(),n.open||n.onOpenChange(!0))},onPointerMove:Ce(e.onPointerMove,Ll(d=>{i.onItemEnter(d),!d.defaultPrevented&&!e.disabled&&!n.open&&!o.current&&(i.onPointerGraceIntentChange(null),o.current=window.setTimeout(()=>{n.onOpenChange(!0),u()},100))})),onPointerLeave:Ce(e.onPointerLeave,Ll(d=>{u();const f=n.content?.getBoundingClientRect();if(f){const h=n.content?.dataset.side,g=h==="right",_=g?-5:5,v=f[g?"left":"right"],y=f[g?"right":"left"];i.onPointerGraceIntentChange({area:[{x:d.clientX+_,y:d.clientY},{x:v,y:f.top},{x:y,y:f.top},{x:y,y:f.bottom},{x:v,y:f.bottom}],side:h}),window.clearTimeout(a.current),a.current=window.setTimeout(()=>i.onPointerGraceIntentChange(null),300)}else{if(i.onTriggerLeave(d),d.defaultPrevented)return;i.onPointerGraceIntentChange(null)}})),onKeyDown:Ce(e.onKeyDown,d=>{const f=i.searchRef.current!=="";e.disabled||f&&d.key===" "||Ase[r.dir].includes(d.key)&&(n.onOpenChange(!0),n.content?.focus(),d.preventDefault())})})})});nI.displayName=Yc;var rI="MenuSubContent",sI=m.forwardRef((e,t)=>{const n=BM(ar,e.__scopeMenu),{forceMount:r=n.forceMount,...s}=e,i=qi(ar,e.__scopeMenu),o=Cu(ar,e.__scopeMenu),a=eI(rI,e.__scopeMenu),c=m.useRef(null),l=Mt(t,c);return p.jsx(Dl.Provider,{scope:e.__scopeMenu,children:p.jsx(Hr,{present:r||i.open,children:p.jsx(Dl.Slot,{scope:e.__scopeMenu,children:p.jsx(z3,{id:a.contentId,"aria-labelledby":a.triggerId,align:"start",...s,ref:l,side:o.dir==="rtl"?"left":"right",disableOutsidePointerEvents:!1,disableOutsideScroll:!1,trapFocus:!1,onOpenAutoFocus:u=>{o.isUsingKeyboardRef.current&&c.current?.focus(),u.preventDefault()},onCloseAutoFocus:u=>u.preventDefault(),onFocusOutside:Ce(e.onFocusOutside,u=>{u.target!==a.trigger&&i.onOpenChange(!1)}),onEscapeKeyDown:Ce(e.onEscapeKeyDown,u=>{o.onClose(),u.preventDefault()}),onKeyDown:Ce(e.onKeyDown,u=>{const d=u.currentTarget.contains(u.target),f=Mse[o.dir].includes(u.key);d&&f&&(i.onOpenChange(!1),a.trigger?.focus(),u.preventDefault())})})})})})});sI.displayName=rI;function iI(e){return e?"open":"closed"}function If(e){return e==="indeterminate"}function Y3(e){return If(e)?"indeterminate":e?"checked":"unchecked"}function Kse(e){const t=document.activeElement;for(const n of e)if(n===t||(n.focus(),document.activeElement!==t))return}function Yse(e,t){return e.map((n,r)=>e[(t+r)%e.length])}function Zse(e,t,n){const s=t.length>1&&Array.from(t).every(l=>l===t[0])?t[0]:t,i=n?e.indexOf(n):-1;let o=Yse(e,Math.max(i,0));s.length===1&&(o=o.filter(l=>l!==n));const c=o.find(l=>l.toLowerCase().startsWith(s.toLowerCase()));return c!==n?c:void 0}function Jse(e,t){const{x:n,y:r}=e;let s=!1;for(let i=0,o=t.length-1;i<t.length;o=i++){const a=t[i].x,c=t[i].y,l=t[o].x,u=t[o].y;c>r!=u>r&&n<(l-a)*(r-c)/(u-c)+a&&(s=!s)}return s}function Qse(e,t){if(!t)return!1;const n={x:e.clientX,y:e.clientY};return Jse(n,t)}function Ll(e){return t=>t.pointerType==="mouse"?e(t):void 0}var Xse=UM,eie=G3,tie=qM,nie=GM,rie=$3,sie=HM,iie=ap,oie=zM,aie=WM,cie=YM,lie=JM,uie=QM,die=XM,fie=tI,hie=nI,pie=sI,Z3="DropdownMenu",[mie,aye]=hc(Z3,[LM]),yn=LM(),[gie,oI]=mie(Z3),aI=e=>{const{__scopeDropdownMenu:t,children:n,dir:r,open:s,defaultOpen:i,onOpenChange:o,modal:a=!0}=e,c=yn(t),l=m.useRef(null),[u=!1,d]=jo({prop:s,defaultProp:i,onChange:o});return p.jsx(gie,{scope:t,triggerId:ls(),triggerRef:l,contentId:ls(),open:u,onOpenChange:d,onOpenToggle:m.useCallback(()=>d(f=>!f),[d]),modal:a,children:p.jsx(Xse,{...c,open:u,onOpenChange:d,dir:r,modal:a,children:n})})};aI.displayName=Z3;var cI="DropdownMenuTrigger",lI=m.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,disabled:r=!1,...s}=e,i=oI(cI,n),o=yn(n);return p.jsx(eie,{asChild:!0,...o,children:p.jsx(st.button,{type:"button",id:i.triggerId,"aria-haspopup":"menu","aria-expanded":i.open,"aria-controls":i.open?i.contentId:void 0,"data-state":i.open?"open":"closed","data-disabled":r?"":void 0,disabled:r,...s,ref:Uh(t,i.triggerRef),onPointerDown:Ce(e.onPointerDown,a=>{!r&&a.button===0&&a.ctrlKey===!1&&(i.onOpenToggle(),i.open||a.preventDefault())}),onKeyDown:Ce(e.onKeyDown,a=>{r||(["Enter"," "].includes(a.key)&&i.onOpenToggle(),a.key==="ArrowDown"&&i.onOpenChange(!0),["Enter"," ","ArrowDown"].includes(a.key)&&a.preventDefault())})})})});lI.displayName=cI;var _ie="DropdownMenuPortal",uI=e=>{const{__scopeDropdownMenu:t,...n}=e,r=yn(t);return p.jsx(tie,{...r,...n})};uI.displayName=_ie;var dI="DropdownMenuContent",fI=m.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,s=oI(dI,n),i=yn(n),o=m.useRef(!1);return p.jsx(nie,{id:s.contentId,"aria-labelledby":s.triggerId,...i,...r,ref:t,onCloseAutoFocus:Ce(e.onCloseAutoFocus,a=>{o.current||s.triggerRef.current?.focus(),o.current=!1,a.preventDefault()}),onInteractOutside:Ce(e.onInteractOutside,a=>{const c=a.detail.originalEvent,l=c.button===0&&c.ctrlKey===!0,u=c.button===2||l;(!s.modal||u)&&(o.current=!0)}),style:{...e.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});fI.displayName=dI;var vie="DropdownMenuGroup",hI=m.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,s=yn(n);return p.jsx(rie,{...s,...r,ref:t})});hI.displayName=vie;var yie="DropdownMenuLabel",pI=m.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,s=yn(n);return p.jsx(sie,{...s,...r,ref:t})});pI.displayName=yie;var Cie="DropdownMenuItem",mI=m.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,s=yn(n);return p.jsx(iie,{...s,...r,ref:t})});mI.displayName=Cie;var bie="DropdownMenuCheckboxItem",gI=m.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,s=yn(n);return p.jsx(oie,{...s,...r,ref:t})});gI.displayName=bie;var Sie="DropdownMenuRadioGroup",_I=m.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,s=yn(n);return p.jsx(aie,{...s,...r,ref:t})});_I.displayName=Sie;var wie="DropdownMenuRadioItem",vI=m.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,s=yn(n);return p.jsx(cie,{...s,...r,ref:t})});vI.displayName=wie;var Eie="DropdownMenuItemIndicator",yI=m.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,s=yn(n);return p.jsx(lie,{...s,...r,ref:t})});yI.displayName=Eie;var xie="DropdownMenuSeparator",CI=m.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,s=yn(n);return p.jsx(uie,{...s,...r,ref:t})});CI.displayName=xie;var Tie="DropdownMenuArrow",Oie=m.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,s=yn(n);return p.jsx(die,{...s,...r,ref:t})});Oie.displayName=Tie;var kie=e=>{const{__scopeDropdownMenu:t,children:n,open:r,onOpenChange:s,defaultOpen:i}=e,o=yn(t),[a=!1,c]=jo({prop:r,defaultProp:i,onChange:s});return p.jsx(fie,{...o,open:a,onOpenChange:c,children:n})},Aie="DropdownMenuSubTrigger",bI=m.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,s=yn(n);return p.jsx(hie,{...s,...r,ref:t})});bI.displayName=Aie;var Mie="DropdownMenuSubContent",SI=m.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,s=yn(n);return p.jsx(pie,{...s,...r,ref:t,style:{...e.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});SI.displayName=Mie;var wI=aI,J3=lI,Iie=uI,Nie=fI,Rie=hI,Pie=pI,cp=mI,EI=gI,Die=_I,Lie=vI,Fie=yI,jie=CI,Uie=kie,Bie=bI,qie=SI;const Gie=Fi.button`
text-token-text-primary border border-transparent inline-flex h-9 items-center justify-center gap-1 rounded-lg bg-white px-3 text-sm dark:transparent dark:bg-transparent
leading-none outline-hidden cursor-pointer
hover:bg-token-main-surface-secondary dark:hover:bg-token-main-surface-secondary
focus-visible:bg-token-main-surface-secondary
radix-state-active:text-token-text-secondary
radix-disabled:cursor-auto radix-disabled:bg-transparent radix-disabled:text-token-text-tertiary dark:radix-disabled:bg-transparent
data-no-hover-bg:hover:bg-transparent dark:data-no-hover-bg:hover:bg-transparent
`,cye="z-50 max-w-xs rounded-2xl popover bg-token-main-surface-primary dark:bg-[#353535] shadow-long will-change-[opacity,transform] radix-side-bottom:animate-slideUpAndFade radix-side-left:animate-slideRightAndFade radix-side-right:animate-slideLeftAndFade radix-side-top:animate-slideDownAndFade py-1.5 select-none",xI=Fi.div`z-50 max-w-xs rounded-2xl popover bg-token-main-surface-primary dark:bg-[#353535] shadow-long will-change-[opacity,transform] radix-side-bottom:animate-slideUpAndFade radix-side-left:animate-slideRightAndFade radix-side-right:animate-slideLeftAndFade radix-side-top:animate-slideDownAndFade py-1.5 select-none`,lye=Fi.div`popover overflow-auto rounded-2xl dark:bg-[#353535] bg-clip-padding bg-token-main-surface-primary p-2 shadow-long`,TI=6,OI=qe.forwardRef(function({children:t,className:n,size:r="default",align:s,addBottomGradient:i=!1,...o},a){const[c,l]=m.useState(!1);return p.jsx(CW,{children:p.jsxs(xI,{ref:a,$as:Nie,sideOffset:4,align:s??"start",collisionPadding:TI,className:ne({"min-w-[min(280px,95vw)]":r==="default","min-w-[min(350px,95vw)]":r==="large","min-w-[min(125px,95vw)]":r==="small","min-w-[min(200px,95vw)]":r==="medium"},"max-h-[var(--radix-dropdown-menu-content-available-height)] overflow-y-auto select-none",n),...o,children:[t,i&&p.jsxs(p.Fragment,{children:[p.jsx(bse,{setIsScrolledToEdge:l},"dropdownBottomEdgeScrollObserver"),p.jsx("div",{className:"pointer-events-none absolute start-0 end-0 bottom-0 h-20 transition-opacity duration-100",style:{background:"linear-gradient(to bottom, rgba(255, 255, 255, 0), var(--main-surface-primary))",opacity:c?1:0}})]})]})})});function Hie({ref:e,...t}){return p.jsx(Gie,{$as:J3,ref:e,...t,onFocusCapture:n=>{n.stopPropagation(),t.onFocusCapture?.(n)}})}function Vie({ref:e,onClick:t,onFocusCapture:n,...r}){const s=m.useCallback(o=>{o.preventDefault(),t?.(o)},[t]),i=m.useCallback(o=>{o.stopPropagation(),n?.(o)},[n]);return p.jsx(J3,{ref:e,onClick:s,onFocusCapture:i,...r})}function kI({children:e}){const t=BO();return p.jsx(Iie,{...t,children:e})}function qo({onPointerMove:e,onPointerLeave:t,...n}){return{...n,onPointerMove:r=>{e?.(r),E7(r)},onPointerLeave:r=>{t?.(r),E7(r)}}}const E7=e=>{if(!e.defaultPrevented&&e.pointerType!=="touch"){const t=e.currentTarget.ownerDocument.activeElement;t&&CT(t,"data-hold-focus")&&e.preventDefault()}},zie=e=>p.jsx(Di,{as:cp,hasManagedFocus:!0,...qo(e)}),$ie=e=>p.jsx(cp,{asChild:!0,...qo({}),children:p.jsx(Di,{...e})});function Wie({className:e,noMargin:t,...n}){return p.jsx(jie,{className:ne("bg-token-border-default h-px",!t&&"mx-4 my-1",e),...n})}const Kie=({separator:e=!0,className:t,...n})=>p.jsx(Rie,{className:ne("empty:hidden [:not(:has(div:not([role=group])))]:hidden",e&&"before:bg-token-border-default before:mx-4 before:my-1 before:block before:h-px first:before:hidden [&:nth-child(1_of_:has(div:not([role=group])))]:before:hidden",t),...n}),Yie=e=>p.jsx(Di,{as:Lie,hasManagedFocus:!0,trailingColor:"primary",trailing:p.jsx(AI,{}),...qo(e)});function AI(){return p.jsxs(p.Fragment,{children:[p.jsx(Fie,{children:p.jsx(q3,{className:"icon-sm"})}),p.jsx("div",{className:"icon-sm group-radix-state-checked:hidden"})]})}const Zie=qe.forwardRef(function(t,n){const{className:r,...s}=t;return p.jsx(xI,{ref:n,$as:qie,className:ne("mt-2 max-h-[calc(100vh-300px)] min-w-[100px] overflow-auto",r),sideOffset:2,alignOffset:t.align==="end"?-6:-14,collisionPadding:TI,...s})}),Jie=e=>p.jsx(Di,{subMenu:!0,as:Bie,hasManagedFocus:!0,...qo(e)});function uye({triggerButton:e,children:t,size:n="default",open:r,onOpenChange:s,onCloseAutoFocus:i,contentAlign:o,side:a,sideOffset:c=0,alignOffset:l=0,contentClassName:u,testId:d,tooltip:f,contentRef:h,modal:g=!1}){const[_,v]=m.useState(r??!1),y=r!==void 0,C=Hq(),E=x=>{y||v(x),s?.(x)},{triggerRef:b}=Sse({isOpen:!!_||!!r,onClose:()=>E(!1)}),S=p.jsx(J3,{asChild:!0,ref:b,"data-testid":d?`${d}-button`:void 0,children:e}),w=f?p.jsx(Yn,{label:f,disabled:!C,triggerAs:null,children:S}):S;return p.jsxs(wI,{modal:g,open:r??_,onOpenChange:E,children:[w,p.jsx(kI,{children:p.jsx(OI,{ref:h,size:n,align:o,alignOffset:l,side:a,sideOffset:c,className:u,onCloseAutoFocus:i,children:t})})]})}function Qie(e){return p.jsx(tV,{as:Pie,...e})}function Xie(e){return p.jsx(bW,{children:p.jsx(wI,{...e})})}function eoe(e){const{children:t,...n}=e;return p.jsx(kI,{...n,children:t})}const toe=e=>p.jsx(Di,{as:EI,hasManagedFocus:!0,onSelect:t=>{t.preventDefault()},trailingColor:"primary",trailing:p.jsx(AT,{size:"small",disabled:e.disabled,checked:e.checked===!0,"aria-hidden":!0}),...qo(e)});function noe({checked:e,onCheckedChange:t,children:n,onClick:r,className:s,...i}){const o=a=>{a.preventDefault()};return p.jsx(EI,{checked:e,onCheckedChange:t,onSelect:o,onClick:r,className:ne(s,"mx-2 flex cursor-pointer items-center rounded-md p-3 text-sm","hover:bg-token-main-surface-secondary focus-visible:bg-token-main-surface-secondary","radix-disabled:pointer-events-none radix-disabled:opacity-50 focus-visible:outline-0","radix-state-open:bg-token-main-surface-secondary"),...i,children:p.jsxs("div",{className:"flex w-full flex-row items-center justify-between",children:[n,e?p.jsx(_se,{className:"icon-sm text-token-text-primary"}):p.jsx(vse,{className:"icon-sm text-token-text-tertiary"})]})})}function roe(e){return p.jsx(cp,{asChild:!0,...qo({}),children:p.jsx(XH,{...e})})}const soe=e=>p.jsx(cp,{asChild:!0,onSelect:t=>{t.preventDefault()},...qo({}),children:p.jsx(rV,{...e})}),Ye={Root:Xie,Trigger:Hie,BasicTrigger:Vie,Portal:eoe,Content:OI,Item:zie,ItemAs:$ie,Separator:Wie,Group:Kie,RadioGroup:Die,RadioItem:Yie,RadioItemCheck:AI,Sub:Uie,SubContent:Zie,SubMenuTrigger:Jie,Label:Qie,CheckboxItem:toe,MultiSelectCheckboxItem:noe,LinkItem:roe,InputItem:soe,Shimmer:nV},ioe=e=>m.createElement("svg",{width:20,height:20,viewBox:"0 0 20 20",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",...e},m.createElement("path",{d:"M15.498 8.50159C16.3254 8.50159 16.9959 9.17228 16.9961 9.99963C16.9961 10.8271 16.3256 11.4987 15.498 11.4987C14.6705 11.4987 14 10.8271 14 9.99963C14.0002 9.17228 14.6706 8.50159 15.498 8.50159Z"}),m.createElement("path",{d:"M4.49805 8.50159C5.32544 8.50159 5.99689 9.17228 5.99707 9.99963C5.99707 10.8271 5.32555 11.4987 4.49805 11.4987C3.67069 11.4985 3 10.827 3 9.99963C3.00018 9.17239 3.6708 8.50176 4.49805 8.50159Z"}),m.createElement("path",{d:"M10.0003 8.50159C10.8276 8.50176 11.4982 9.17239 11.4984 9.99963C11.4984 10.827 10.8277 11.4985 10.0003 11.4987C9.17283 11.4987 8.50131 10.8271 8.50131 9.99963C8.50149 9.17228 9.17294 8.50159 10.0003 8.50159Z"})),ooe=e=>m.createElement("svg",{width:20,height:20,viewBox:"0 0 20 20",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",...e},m.createElement("path",{d:"M15.2146 18.1227L15.2439 18.2546C15.2809 18.5616 15.0985 18.8629 14.7937 18.9645C14.4889 19.0661 14.1622 18.9345 14.0076 18.6667L13.9529 18.5436L13.1189 16.0436L13.7498 15.8337L14.3806 15.6227L15.2146 18.1227ZM4.5027 8.72526C4.7467 8.45076 5.16765 8.4256 5.44215 8.6696C5.71651 8.91359 5.74073 9.33361 5.49684 9.60807L4.70875 10.4958C3.51378 11.8401 3.57361 13.8831 4.84547 15.1549L4.96656 15.2702C6.24396 16.4291 8.20223 16.4494 9.50465 15.2917L10.3914 14.5026L10.5007 14.4245C10.7685 14.2694 11.1173 14.318 11.3308 14.5583C11.5746 14.8327 11.5495 15.2528 11.2752 15.4967L10.3875 16.2858C8.57532 17.8963 5.85141 17.8686 4.07399 16.2565L3.90504 16.0954C2.13524 14.3256 2.05179 11.4827 3.71461 9.61198L4.5027 8.72526ZM13.5398 15.2028C13.8881 15.0867 14.2643 15.2745 14.3806 15.6227L13.1189 16.0436C13.0028 15.6953 13.1915 15.319 13.5398 15.2028ZM15.2029 13.5397C15.3191 13.1914 15.6953 13.0028 16.0437 13.1188L18.5437 13.9528L18.6668 14.0075C18.9346 14.1621 19.0662 14.4888 18.9646 14.7936C18.863 15.0985 18.5617 15.2808 18.2547 15.2438L18.1228 15.2145L15.6228 14.3805C15.2746 14.2642 15.0868 13.888 15.2029 13.5397ZM9.79078 3.56315C11.6599 2.0583 14.3811 2.19057 16.0955 3.90495L16.2566 4.07389C17.8168 5.79411 17.893 8.40087 16.4363 10.2096L16.2859 10.3874L15.4968 11.2751L15.3982 11.3659C15.1506 11.5514 14.7987 11.5441 14.5584 11.3307C14.2839 11.0867 14.2587 10.6658 14.5027 10.3913L15.2918 9.50456L15.4002 9.37663C16.4472 8.07662 16.3919 6.20274 15.2703 4.96647L15.155 4.84538C13.9229 3.6132 11.967 3.51839 10.6238 4.60026L10.4959 4.70866L9.60816 5.49674C9.3337 5.74063 8.91368 5.71642 8.66969 5.44206C8.42569 5.16756 8.45085 4.7466 8.72535 4.5026L9.61207 3.71452L9.79078 3.56315ZM1.74586 4.75651L1.87672 4.78581L4.37672 5.61881L4.49977 5.67448C4.76767 5.82912 4.89925 6.15572 4.79762 6.46061C4.69588 6.76536 4.39471 6.94789 4.08766 6.91081L3.9568 6.88053L1.4568 6.04753L1.33375 5.99186C1.06603 5.83724 0.93447 5.51146 1.0359 5.20671C1.13755 4.90175 1.43868 4.71938 1.74586 4.75651ZM5.2068 1.03581C5.51155 0.934377 5.83733 1.06594 5.99195 1.33366L6.04762 1.45671L6.88063 3.95671L6.9109 4.08756C6.94798 4.39462 6.76546 4.69579 6.4607 4.79753C6.15582 4.89916 5.82921 4.76758 5.67457 4.49967L5.61891 4.37663L4.7859 1.87663L4.7566 1.74577C4.71947 1.43859 4.90184 1.13746 5.2068 1.03581Z"})),aoe=["https:","mailto:","tel:"],coe=e=>{if(e===void 0)return;let t;try{t=new URL(e,window.location.origin)}catch{return}if(aoe.includes(t.protocol))return t.href};function dye({href:e,target:t="_blank",children:n,...r}){return p.jsx("a",{href:coe(e),target:t,rel:"noopener",alt:e,...r,children:n})}function x7(e){"use forget";const t=xe.c(14);let n,r,s,i,o;t[0]!==e?({className:r,openNewTab:i,children:n,underline:o,...s}=e,t[0]=e,t[1]=n,t[2]=r,t[3]=s,t[4]=i,t[5]=o):(n=t[1],r=t[2],s=t[3],i=t[4],o=t[5]);const a=i===void 0?!1:i,l=(o===void 0?!0:o)&&"underline";let u;t[6]!==r||t[7]!==l?(u=ne("cursor-pointer font-normal",l,r),t[6]=r,t[7]=l,t[8]=u):u=t[8];const d=a?"_blank":"_self";let f;return t[9]!==n||t[10]!==s||t[11]!==u||t[12]!==d?(f=p.jsx("a",{rel:"noopener",className:u,target:d,...s,children:n}),t[9]=n,t[10]=s,t[11]=u,t[12]=d,t[13]=f):f=t[13],f}function lp({percentage:e,thickness:t=1/12,className:n,outerCircleClassName:r,sizeOverride:s,transitionDuration:i,transitionTimingFunction:o,onTransitionEnd:a}){const c=s??120,l=c*t,d=(c-l)/2-l-2;return p.jsxs("svg",{width:c,height:c,viewBox:`0 0 ${c} ${c}`,className:n,children:[p.jsxs("g",{style:{transformOrigin:"50% 50%",animation:"spin 1s linear infinite"},className:r,children:[p.jsx("path",{fill:"url(#b)",fillOpacity:".7",fillRule:"evenodd",d:`
        M${c} ${c/2}
        A${c/2} ${c/2} 0 1 0 0 ${c/2}
        A${c/2} ${c/2} 0 0 0 ${c} ${c/2}
        Z
        M${c*.1042} ${c/2}
        A${c*.3956} ${c*.3956} 0 1 0 ${c-c*.1042} ${c/2}
        A${c*.3956} ${c*.3956} 0 0 0 ${c*.1042} ${c/2}
        Z
      `,clipRule:"evenodd"}),p.jsx("defs",{children:p.jsxs("radialGradient",{id:"b",cx:"0",cy:"0",r:"1",gradientTransform:`matrix(${c/2-c*.0625} 0 0 ${c/2-c*.0625} ${c*.0625} ${c/2})`,gradientUnits:"userSpaceOnUse",children:[p.jsx("stop",{stopColor:"#0285FF"}),p.jsx("stop",{offset:"1",stopColor:"#0285FF",stopOpacity:".3"})]})})]}),p.jsx("path",{className:"origin-[50%_50%] transition-[stroke-dashoffset]",d:e===100?`M ${c/2} ${c/2}
         m 0 -${d}
         a ${d} ${d} 0 1 1 0 ${2*d}
         a ${d} ${d} 0 1 1 0 -${2*d}
         Z`:`M ${c/2} ${c/2}
         L ${c/2} ${c/2-d}
         A ${d} ${d} 0 ${e>50?1:0} 1
         ${c/2+d*Math.sin(2*Math.PI*e/100)}
         ${c/2-d*Math.cos(2*Math.PI*e/100)}
         Z`,fill:"currentColor",style:{transitionDuration:i,transitionTimingFunction:o},onTransitionEnd:a})]})}function Q3(){const e=Y();return _n(e).isElectron}function loe({children:e}){return p.jsx(Yn,{label:p.jsx(K,{id:"8yqd2N",defaultMessage:"Temporarily unavailable"}),children:e})}const uoe="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20width='107'%20height='106'%20fill='none'%3e%3cg%20clip-path='url(%23a)'%3e%3cg%20filter='url(%23b)'%3e%3cpath%20fill='%23fff'%20d='M81.81%2053c0-15.464-12.535-28-28-28-15.463%200-28%2012.536-28%2028s12.537%2028%2028%2028c15.465%200%2028-12.536%2028-28Z'%20/%3e%3cpath%20stroke='%23000'%20stroke-linejoin='bevel'%20stroke-opacity='.1'%20d='M81.81%2053c0-15.464-12.535-28-28-28-15.463%200-28%2012.536-28%2028s12.537%2028%2028%2028c15.465%200%2028-12.536%2028-28Z'%20/%3e%3c/g%3e%3cpath%20fill='%23000'%20d='M49.287%2048.12v-3.905c0-.263.075-.45.337-.601l7.246-4.205c.977-.563%202.216-.826%203.417-.826%204.58%200%207.471%203.53%207.471%207.321%200%20.3%200%20.714-.075%201.051l-7.584-4.43c-.375-.225-.788-.263-1.239%200l-9.573%205.594ZM66.03%2061.972V53.3c0-.488-.187-.825-.638-1.088l-9.611-5.594%203.379-1.953a.717.717%200%200%201%20.675%200l7.284%204.205c2.065%201.202%203.492%203.83%203.492%206.345%200%202.966-1.802%205.707-4.58%206.758Zm-18.734-7.471-3.342-1.99c-.262-.15-.338-.338-.338-.6v-8.373c0-4.092%203.117-7.171%207.36-7.171a7.23%207.23%200%200%201%204.504%201.577l-7.546%204.392c-.45.263-.638.601-.638%201.09v11.075Zm6.533%203.754-4.543-2.553v-5.406l4.543-2.553%204.505%202.553v5.406l-4.505%202.553Zm2.815%2011.376a7.23%207.23%200%200%201-4.505-1.577l7.546-4.392c.45-.263.639-.601.639-1.09V51.499l3.379%201.99c.262.15.337.338.337.6v8.373c0%204.093-3.153%207.171-7.396%207.171Zm-8.86-8.297L40.5%2057.13c-2.065-1.202-3.491-3.83-3.491-6.345%200-3.004%201.84-5.707%204.618-6.758v8.71c0%20.488.187.826.638%201.09l9.574%205.556-3.38%201.952a.718.718%200%200%201-.675%200Zm-.45%206.082c-4.318%200-7.472-3.229-7.472-7.246%200-.375.038-.75.075-1.089l7.546%204.355c.451.263.826.263%201.277%200l9.574-5.556v3.904c0%20.263-.075.451-.338.601l-7.246%204.205c-.976.563-2.215.826-3.417.826Zm9.31%204.243c4.506%200%208.26-3.23%209.086-7.51%204.205-1.05%206.908-4.955%206.908-8.935%200-2.628-1.126-5.143-3.191-6.983.188-.788.338-1.614.338-2.403%200-5.294-4.318-9.273-9.274-9.273a9.197%209.197%200%200%200-3.003.525c-1.69-1.69-3.98-2.74-6.533-2.74-4.505%200-8.26%203.228-9.086%207.508-4.205%201.052-6.908%204.956-6.908%208.936%200%202.628%201.127%205.144%203.191%206.983-.187.789-.337%201.615-.337%202.403%200%205.294%204.317%209.274%209.273%209.274a9.2%209.2%200%200%200%203.004-.526c1.69%201.69%203.98%202.74%206.532%202.74Z'%20/%3e%3c/g%3e%3cdefs%3e%3cclipPath%20id='a'%3e%3cpath%20fill='%23fff'%20d='M.81%200h106v106H.81z'%20/%3e%3c/clipPath%3e%3cfilter%20id='b'%20width='105'%20height='105'%20x='1.311'%20y='4.5'%20color-interpolation-filters='sRGB'%20filterUnits='userSpaceOnUse'%20%3e%3cfeFlood%20flood-opacity='0'%20result='BackgroundImageFix'%20/%3e%3cfeColorMatrix%20in='SourceAlpha'%20result='hardAlpha'%20values='0%200%200%200%200%200%200%200%200%200%200%200%200%200%200%200%200%200%20127%200'%20/%3e%3cfeOffset%20dy='4'%20/%3e%3cfeGaussianBlur%20stdDeviation='12'%20/%3e%3cfeComposite%20in2='hardAlpha'%20operator='out'%20/%3e%3cfeColorMatrix%20values='0%200%200%200%200%200%200%200%200%200%200%200%200%200%200%200%200%200%200.06%200'%20/%3e%3cfeBlend%20in2='BackgroundImageFix'%20result='effect1_dropShadow_1235_2762'%20/%3e%3cfeBlend%20in='SourceGraphic'%20in2='effect1_dropShadow_1235_2762'%20result='shape'%20/%3e%3c/filter%3e%3c/defs%3e%3c/svg%3e";function doe({children:e,className:t,style:n,...r}){return p.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",className:t,...r,style:n,children:e})}const fye=({className:e})=>p.jsx("svg",{width:"18",height:"18",viewBox:"0 0 18 18",fill:"none",className:e,xmlns:"http://www.w3.org/2000/svg",children:p.jsx("path",{d:"M15.75 12V5.99999C15.7497 5.73694 15.6803 5.4786 15.5487 5.25086C15.417 5.02312 15.2278 4.83401 15 4.70249L9.75 1.70249C9.52197 1.57084 9.26331 1.50153 9 1.50153C8.73669 1.50153 8.47803 1.57084 8.25 1.70249L3 4.70249C2.7722 4.83401 2.58299 5.02312 2.45135 5.25086C2.31971 5.4786 2.25027 5.73694 2.25 5.99999V12C2.25027 12.263 2.31971 12.5214 2.45135 12.7491C2.58299 12.9769 2.7722 13.166 3 13.2975L8.25 16.2975C8.47803 16.4291 8.73669 16.4985 9 16.4985C9.26331 16.4985 9.52197 16.4291 9.75 16.2975L15 13.2975C15.2278 13.166 15.417 12.9769 15.5487 12.7491C15.6803 12.5214 15.7497 12.263 15.75 12Z",fill:"currentColor",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})}),foe="ChatGPT",X3=({className:e})=>p.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:e,children:[p.jsx("text",{x:"-9999",y:"-9999",children:foe}),p.jsx("path",{d:"M9.20509 8.76511V6.50545C9.20509 6.31513 9.27649 6.17234 9.44293 6.0773L13.9861 3.46088C14.6046 3.10413 15.342 2.93769 16.103 2.93769C18.9573 2.93769 20.7651 5.14983 20.7651 7.50454C20.7651 7.67098 20.7651 7.86129 20.7412 8.05161L16.0316 5.2924C15.7462 5.12596 15.4607 5.12596 15.1753 5.2924L9.20509 8.76511ZM19.8135 17.5659V12.1664C19.8135 11.8333 19.6708 11.5955 19.3854 11.429L13.4152 7.95633L15.3656 6.83833C15.5321 6.74328 15.6749 6.74328 15.8413 6.83833L20.3845 9.45474C21.6928 10.216 22.5728 11.8333 22.5728 13.4031C22.5728 15.2108 21.5025 16.8758 19.8135 17.5657V17.5659ZM7.80173 12.8088L5.8513 11.6671C5.68486 11.5721 5.61346 11.4293 5.61346 11.239V6.00613C5.61346 3.46111 7.56389 1.53433 10.2042 1.53433C11.2033 1.53433 12.1307 1.86743 12.9159 2.46202L8.2301 5.17371C7.94475 5.34015 7.80195 5.57798 7.80195 5.91109V12.809L7.80173 12.8088ZM12 15.2349L9.20509 13.6651V10.3351L12 8.76534L14.7947 10.3351V13.6651L12 15.2349ZM13.7958 22.4659C12.7967 22.4659 11.8693 22.1328 11.0841 21.5382L15.7699 18.8265C16.0553 18.6601 16.198 18.4222 16.198 18.0891V11.1912L18.1723 12.3329C18.3388 12.4279 18.4102 12.5707 18.4102 12.761V17.9939C18.4102 20.5389 16.4359 22.4657 13.7958 22.4657V22.4659ZM8.15848 17.1617L3.61528 14.5452C2.30696 13.784 1.42701 12.1667 1.42701 10.5969C1.42701 8.76534 2.52115 7.12414 4.20987 6.43428V11.8574C4.20987 12.1905 4.35266 12.4284 4.63802 12.5948L10.5846 16.0436L8.63415 17.1617C8.46771 17.2567 8.32492 17.2567 8.15848 17.1617ZM7.897 21.0625C5.20919 21.0625 3.23488 19.0407 3.23488 16.5432C3.23488 16.3529 3.25875 16.1626 3.2824 15.9723L7.96817 18.6839C8.25352 18.8504 8.53911 18.8504 8.82446 18.6839L14.7947 15.2351V17.4948C14.7947 17.6851 14.7233 17.8279 14.5568 17.9229L10.0136 20.5393C9.39518 20.8961 8.6578 21.0625 7.89677 21.0625H7.897ZM13.7958 23.8929C16.6739 23.8929 19.0762 21.8474 19.6235 19.1357C22.2874 18.4459 24 15.9484 24 13.4034C24 11.7383 23.2865 10.121 22.002 8.95542C22.121 8.45588 22.1924 7.95633 22.1924 7.45702C22.1924 4.0557 19.4331 1.51045 16.2458 1.51045C15.6037 1.51045 14.9852 1.60549 14.3668 1.81968C13.2963 0.773071 11.8215 0.107086 10.2042 0.107086C7.32606 0.107086 4.92383 2.15256 4.37653 4.86425C1.7126 5.55411 0 8.05161 0 10.5966C0 12.2617 0.713506 13.879 1.99795 15.0446C1.87904 15.5441 1.80764 16.0436 1.80764 16.543C1.80764 19.9443 4.56685 22.4895 7.75421 22.4895C8.39632 22.4895 9.01478 22.3945 9.63324 22.1803C10.7035 23.2269 12.1783 23.8929 13.7958 23.8929Z",fill:"currentColor"})]});function hye({className:e}){const t=Ue();return p.jsx("img",{src:uoe,alt:t.formatMessage({id:"VJmCc9",defaultMessage:"ChatGPT logo"}),className:e})}const pye=e=>p.jsxs(doe,{viewBox:"0 0 36 36",fill:"none",...e,children:[p.jsx("circle",{cx:"18",cy:"18",r:"18",fill:"#3c46ff"}),p.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"m7.358 14.641 5.056-5.055A2 2 0 0 1 13.828 9h8.343a2 2 0 0 1 1.414.586l5.056 5.055a2 2 0 0 1 .055 2.771l-9.226 9.996a2 2 0 0 1-2.94 0l-9.227-9.996a2 2 0 0 1 .055-2.77Zm6.86-1.939-.426 1.281a2.07 2.07 0 0 1-1.31 1.31l-1.28.426a.296.296 0 0 0 0 .561l1.28.428a2.07 2.07 0 0 1 1.31 1.309l.427 1.28c.09.27.471.27.56 0l.428-1.28a2.07 2.07 0 0 1 1.309-1.31l1.281-.427a.296.296 0 0 0 0-.56l-1.281-.428a2.07 2.07 0 0 1-1.309-1.309l-.427-1.28a.296.296 0 0 0-.561 0z",fill:"#fff"})]}),mye=({className:e})=>p.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:e,children:[p.jsx("rect",{x:"2",y:"6",width:"5",height:"12",rx:"2",stroke:"currentColor",strokeWidth:"2"}),p.jsx("path",{d:"M2 12H1",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),p.jsx("path",{d:"M22 12H23",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),p.jsx("rect",{x:"17",y:"6",width:"5",height:"12",rx:"2",stroke:"currentColor",strokeWidth:"2"}),p.jsx("path",{d:"M7 12L12 12",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),p.jsx("path",{d:"M16 12H17",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),p.jsx("path",{d:"M9 3L15 21",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})]}),gye=({className:e})=>p.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"14",fill:"none",className:e,children:p.jsx("path",{fill:"currentColor",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",d:"M6.9 1.6 1.2 11a1.3 1.3 0 0 0 1.2 2h11.2a1.3 1.3 0 0 0 1.2-2L9 1.6a1.3 1.3 0 0 0-2.2 0Z"})}),hoe=()=>{const[e,t]=m.useState(!1),n=on();return!n?.data.profilePictureUrl||e?p.jsx("span",{className:"bg-tertiary rounded-xl border-[0.5px] p-2 shadow-sm",children:p.jsx(X3,{className:"h-8 w-8"})}):p.jsx("span",{className:"h-12 w-12 overflow-hidden rounded-xl border-[0.5px] bg-black shadow-sm",children:p.jsx("img",{src:n.data.profilePictureUrl,alt:n.data.name??"",onError:()=>t(!0)})})},poe=({title:e,connectorIcon:t,connectorDeveloper:n,onClose:r})=>p.jsxs(p.Fragment,{children:[p.jsx("div",{className:"flex justify-end pb-6",children:p.jsx(u3,{onClick:r})}),p.jsxs("div",{className:"flex flex-col items-center",children:[p.jsxs("div",{className:"flex items-center gap-2.5",children:[p.jsx(hoe,{}),p.jsxs("div",{className:"flex gap-1",children:[p.jsx("span",{className:"h-1.5 w-1.5 rounded-full bg-gray-200"}),p.jsx("span",{className:"h-1.5 w-1.5 rounded-full bg-gray-200"}),p.jsx("span",{className:"h-1.5 w-1.5 rounded-full bg-gray-200"})]}),t]}),p.jsx("div",{className:"pt-4 text-center text-2xl font-semibold",children:e}),n&&p.jsx("div",{className:"text-token-text-tertiary pt-1 text-sm",children:p.jsx(K,{...moe.developedBy,values:{developer:n}})})]})]}),moe=ze({developedBy:{id:"yPpO4G",defaultMessage:"Developed by {developer}"}}),goe=e=>m.createElement("svg",{width:20,height:20,viewBox:"0 0 20 20",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",...e},m.createElement("path",{d:"M9.99512 12.3145C10.4837 12.3145 10.8701 12.6847 10.8701 13.1572C10.87 13.6296 10.4836 14 9.99512 14C9.50661 14 9.12021 13.6296 9.12012 13.1572C9.12012 12.6848 9.50655 12.3145 9.99512 12.3145Z"}),m.createElement("path",{d:"M10.001 6C10.4785 6.00018 10.7792 6.29538 10.7793 6.78906C10.7793 6.83198 10.7788 6.89653 10.7734 6.9502L10.6934 10.666C10.6772 11.1222 10.4407 11.3906 9.99512 11.3906C9.54959 11.3906 9.31355 11.1222 9.30273 10.666L9.2168 6.9502C9.21679 6.89653 9.21094 6.83198 9.21094 6.78906C9.21102 6.29522 9.51782 6 10.001 6Z"}),m.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M10 2.08496C14.3713 2.08496 17.915 5.62867 17.915 10C17.915 14.3713 14.3713 17.915 10 17.915C5.62867 17.915 2.08496 14.3713 2.08496 10C2.08496 5.62867 5.62867 2.08496 10 2.08496ZM10 3.41504C6.3632 3.41504 3.41504 6.3632 3.41504 10C3.41504 13.6368 6.3632 16.585 10 16.585C13.6368 16.585 16.585 13.6368 16.585 10C16.585 6.3632 13.6368 3.41504 10 3.41504Z"})),_oe=e=>m.createElement("svg",{width:24,height:24,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",...e},m.createElement("path",{d:"M21.0461 12.2099C21.0461 11.5553 20.9874 10.9259 20.8783 10.3217H12.1846V13.8966H17.1524C16.9342 15.0462 16.2797 16.0197 15.2979 16.6742V18.9987H18.2937C20.0391 17.3875 21.0461 15.0211 21.0461 12.2099Z",fill:"#4285F4"}),m.createElement("path",{d:"M12.1844 21.2307C14.6767 21.2307 16.7662 20.4084 18.2935 18.9986L15.2977 16.6741C14.4753 17.2279 13.4264 17.5636 12.1844 17.5636C9.78441 17.5636 7.74525 15.944 7.01518 13.7622H3.94385V16.1454C5.46273 19.158 8.57602 21.2307 12.1844 21.2307Z",fill:"#34A853"}),m.createElement("path",{d:"M7.01516 13.7539C6.83054 13.2 6.72145 12.6126 6.72145 12C6.72145 11.3874 6.83054 10.8 7.01516 10.2462V7.86295H3.94382C3.31445 9.10491 2.95361 10.5063 2.95361 12C2.95361 13.4937 3.31445 14.8951 3.94382 16.1371L6.33544 14.2741L7.01516 13.7539Z",fill:"#FBBC05"}),m.createElement("path",{d:"M12.1844 6.44475C13.5439 6.44475 14.7522 6.91469 15.7173 7.82098L18.3606 5.17762C16.7578 3.68391 14.6767 2.76923 12.1844 2.76923C8.57602 2.76923 5.46273 4.84196 3.94385 7.86294L7.01518 10.2462C7.74525 8.06434 9.78441 6.44475 12.1844 6.44475Z",fill:"#EA4335"})),voe=e=>m.createElement("svg",{width:20,height:20,viewBox:"0 0 20 20",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",...e},m.createElement("path",{d:"M10 9.25C10.4142 9.25002 10.75 9.5858 10.75 10V13.333C10.75 13.7472 10.4142 14.083 10 14.083C9.58579 14.083 9.25 13.7472 9.25 13.333V10C9.25 9.58579 9.58579 9.25 10 9.25Z"}),m.createElement("path",{d:"M10 5.83301C10.5293 5.83303 10.958 6.26273 10.958 6.79199C10.9578 7.3211 10.5291 7.74998 10 7.75C9.47084 7.75 9.04217 7.32111 9.04199 6.79199C9.04199 6.26272 9.47073 5.83301 10 5.83301Z"}),m.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M10 2.08496C14.3713 2.08496 17.915 5.62867 17.915 10C17.915 14.3713 14.3713 17.915 10 17.915C5.62867 17.915 2.08496 14.3713 2.08496 10C2.08496 5.62867 5.62867 2.08496 10 2.08496ZM10 3.41504C6.3632 3.41504 3.41504 6.3632 3.41504 10C3.41504 13.6368 6.3632 16.585 10 16.585C13.6368 16.585 16.585 13.6368 16.585 10C16.585 6.3632 13.6368 3.41504 10 3.41504Z"})),eC=({footerContent:e,primaryButton:t,secondaryButton:n})=>!e&&!t&&!n?null:p.jsxs("div",{className:"border-token-border-default flex items-center justify-between border-t p-6",children:[p.jsxs("div",{children:[e," "]}),p.jsxs("div",{className:"flex gap-2",children:[n,t]})]}),yoe=e=>m.createElement("svg",{width:16,height:16,viewBox:"0 0 16 16",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg","data-rtl-flip":"",...e},m.createElement("path",{d:"M6.80073 3.27765C7.05872 3.10739 7.40946 3.13571 7.63667 3.36261C7.89637 3.62231 7.89637 4.04432 7.63667 4.30402L4.60542 7.33527H13L13.1337 7.34894C13.4368 7.4109 13.665 7.6789 13.665 8.00031C13.6648 8.32162 13.4368 8.58979 13.1337 8.65168L13 8.66535H4.6064L7.63667 11.6966L7.72163 11.8011C7.89202 12.0592 7.86389 12.4098 7.63667 12.637C7.40942 12.8641 7.05879 12.8924 6.80073 12.722L6.69624 12.637L2.52925 8.47003C2.26993 8.21036 2.26982 7.78921 2.52925 7.5296L6.69624 3.36261L6.80073 3.27765Z"})),Coe=e=>m.createElement("svg",{width:16,height:16,viewBox:"0 0 16 16",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg","data-rtl-flip":"",...e},m.createElement("path",{d:"M8.36328 3.36261C8.59049 3.13571 8.94123 3.10739 9.19922 3.27765L9.30371 3.36261L13.4707 7.5296L13.5557 7.6341C13.7259 7.89208 13.6976 8.24282 13.4707 8.47003L9.30371 12.637C9.04407 12.8967 8.62299 12.8966 8.36328 12.637C8.10358 12.3773 8.10358 11.9563 8.36328 11.6966L11.3936 8.66535H3C2.63284 8.66535 2.33514 8.36743 2.33496 8.00031C2.33496 7.63304 2.63273 7.33527 3 7.33527H11.3945L8.36328 4.30402L8.27832 4.19953C8.10759 3.94137 8.13592 3.58997 8.36328 3.36261Z"})),MI=()=>p.jsx(II,{ConnectorIcon:yc}),boe=()=>p.jsx(II,{ConnectorIcon:sp}),II=({ConnectorIcon:e})=>p.jsxs("div",{className:"flex items-center justify-center gap-4",children:[p.jsx(X3,{className:"h-12 w-12"}),p.jsxs("div",{className:"text-token-text-secondary",children:[p.jsx(yoe,{className:"icon-sm me-1.5"}),p.jsx(Coe,{className:"icon-sm ms-1.5"})]}),p.jsx(e,{width:48,height:48})]}),_ye=e=>{switch(e){case"google_drive_oauth":case"google_drive_dwd":return p.jsx(MI,{});case"slack":return p.jsx(boe,{});default:return null}},NI=new BroadcastChannel("oauth_channel"),vye=e=>{NI.postMessage(e)};async function RI({connectionId:e,connectorType:t,redirectTo:n,location:r,isReconnect:s,intl:i,isAdminQuickstartFlow:o=!1,accountId:a}){const c=window.open("about:blank","_blank");if(!c)throw new Error(i.formatMessage(ed.popupBlocked));if(o&&!a)throw new Error(i.formatMessage(ed.somethingWentWrong));const l=Xe(),u=we(l,"4153230103");let d;try{d=await(o?Oi.admin_request_connect_quickstart(a??"",e,n):Oi.user_request_connect(e,n,u))}catch{throw c.close(),new Error(i.formatMessage(ed.somethingWentWrong))}return P.logEventWithStatsig("Contextual Answers User OAuth Initiated","chatgpt_contextual_answers_user_oauth_initiated",{connectorType:t,location:r,isReconnect:s,isAdminQuickstartFlow:o}),c.location.href=d.oauth_flow_url,new Promise(f=>{const h=g=>{const{error:_,errorDesc:v,errorType:y,pluginId:C,success:E}=g.data;if(g.origin===window.location.origin&&!(d.plugin_id&&d.plugin_id!==C))if(E)P.logEventWithStatsig("Contextual Answers User OAuth Completed","chatgpt_contextual_answers_user_oauth_completed",{connectorType:t,isAdminQuickstartFlow:o}),f({success:!0,message:i.formatMessage(ed.connectedDriveSyncDesc)});else{P.logEventWithStatsig("Contextual Answers User OAuth Failed","chatgpt_contextual_answers_user_oauth_failed",{connectorType:t,errorType:y,isAdminQuickstartFlow:o});const b=`${_}${v?`: ${v}`:""}`;f({errorType:y,success:E,message:b})}};NI.addEventListener("message",h,!1),c.addEventListener("beforeunload",()=>{window.removeEventListener("message",h,!1)})})}const ed=ze({popupBlocked:{id:"67rWk2",defaultMessage:"Popup blocked. Please allow popups for this site."},connectedDriveSyncDesc:{id:"CACallback.connectedDriveSyncDesc.2",defaultMessage:"Google Drive is now connected and syncing."},somethingWentWrong:{id:"RvtOjD",defaultMessage:"Encountered an error connecting your account. Please try again later."}}),Soe=Zh(()=>$(()=>import("./b5hv1ahf9kvqcabf.js"),__vite__mapDeps([9,1,10,11,5,6])).then(e=>e.GoogleRedirectContent)),tC={type:"success",size:"custom",className:"max-w-xl",showCloseButton:!0,shouldIgnoreClickOutside:!0,hideSeparator:!0,noPadding:!0,title:p.jsx(MI,{})},woe=({onClose:e,isAdminFlow:t,isAdminQuickstartFlow:n=!1,connectionId:r,location:s,accountId:i,onSuccess:o,excludeModalWrapper:a=!1})=>{const c=T3()?.enabled??!1,l=!t&&c,[u,d]=m.useState(l?"cta":"disclaimer"),[f,h]=m.useState(),g=Ue(),_=m.useCallback(()=>{o?.(),e?.()},[e,o]),v={connectionId:r,connectorType:"google_drive_oauth",location:s,isAdminQuickstartFlow:n,accountId:i,onSuccess:_,onError:y=>{h(y),d("error")}};switch(u){case"disclaimer":return p.jsx(Eoe,{isOpen:!0,onClose:e,excludeModalWrapper:a,isAdminFlow:t,isAdminQuickstartFlow:n,secondaryButton:p.jsx(sl,{title:g.formatMessage(pa.cancel),color:"secondary",onClick:e}),primaryButton:p.jsx(sl,{color:"primary",onClick:()=>d("cta"),children:g.formatMessage(pa.continue)})});case"cta":return l?p.jsx(Toe,{onClose:e,isReconnect:!1,excludeModalWrapper:a,...v}):p.jsx(xoe,{isOpen:!0,onClose:e,excludeModalWrapper:a,secondaryButton:p.jsx(sl,{title:g.formatMessage(pa.back),color:"secondary",onClick:()=>d("disclaimer")}),primaryButton:p.jsx(T7,{label:g.formatMessage(pa.loginWithGoogle),...v})});case"error":return l?p.jsx(koe,{onClose:e,error:f,excludeModalWrapper:a,isReconnect:!0,...v}):p.jsx(Ooe,{isOpen:!0,onClose:e,error:f,excludeModalWrapper:a,primaryButton:p.jsx(T7,{label:g.formatMessage(pa.reconnect),isReconnect:!0,...v})})}};function Eoe({isOpen:e,onClose:t,excludeModalWrapper:n,secondaryButton:r,primaryButton:s,isAdminFlow:i,isAdminQuickstartFlow:o}){const a=p.jsxs(p.Fragment,{children:[p.jsxs("div",{className:"px-6 pt-4 pb-10",children:[p.jsx("div",{className:"text-xl font-medium",children:p.jsx(K,{id:"zjbSLP",defaultMessage:"Connect your organization’s Google Drive "})}),p.jsx("div",{className:"text-md text-token-text-secondary mt-3",children:o?p.jsx(K,{id:"YCbpE/",defaultMessage:"Linking ChatGPT to Google Drive gives you more tailored answers based on your organization's context. Once you connect, others in your org can too."}):p.jsx(K,{id:"+hD78k",defaultMessage:"{userText}Connecting ChatGPT to Google Drive helps you get more personalized, up-to-date answers—grounded in your organization’s content. ChatGPT semantically searches your Drive and only surfaces content you’re authorized to view.",values:{userText:!i&&p.jsx(K,{id:"kg6Qe+",defaultMessage:"Your admin has enabled internal knowledge for your workspace. "})}})}),p.jsx("div",{className:"mt-6 text-lg font-medium",children:p.jsx(K,{id:"x/LOXH",defaultMessage:"What to expect"})}),p.jsxs("ul",{className:"text-md text-token-text-secondary ms-6 mt-4",children:[p.jsx("li",{className:"mb-2 list-disc",children:p.jsx(K,{id:"iBETBV",defaultMessage:"Continuous sync: Your documents, spreadsheets, and presentations stay up to date in ChatGPT."})}),p.jsx("li",{className:"mb-2 list-disc",children:p.jsx(K,{id:"u/D1Mk",defaultMessage:"Privacy first: ChatGPT always respects your Google Drive permissions — it can only access what you can."})}),p.jsx("li",{className:"list-disc",children:p.jsx(K,{id:"uHiJ04",defaultMessage:"You’re in control: Disconnect anytime to instantly revoke access."})})]}),o&&p.jsxs("div",{className:"bg-token-main-surface-secondary text-token-text-primary mt-6 flex w-full flex-row items-center gap-4 rounded-xl p-4",children:[p.jsx(Xa,{className:"icon-lg"}),p.jsx("span",{className:"text-token-text-secondary text-sm",children:p.jsx(K,{id:"k5y2IZ",defaultMessage:"<b>Note</b>: Only users with the <i>same</i> Google Workspace domain can connect. Your email should look like <code>example.com</code> — personal accounts won’t work. Be sure you’re using the right one.",values:{b:c=>p.jsx("strong",{children:c}),i:c=>p.jsx("em",{children:c}),code:c=>p.jsx("code",{children:c})}})})]})]}),p.jsx(eC,{secondaryButton:r,primaryButton:s})]});return n?a:p.jsx(ji,{...tC,isOpen:e,onClose:t,testId:"modal-gdrive-disclaimer",children:a})}function xoe({isOpen:e,onClose:t,excludeModalWrapper:n,secondaryButton:r,primaryButton:s}){const i=p.jsxs(p.Fragment,{children:[p.jsxs("div",{className:"px-6 pt-4 pb-10",children:[p.jsx("div",{className:"mb-3 text-xl font-medium",children:p.jsx(K,{id:"X4Rl7H",defaultMessage:"Allow full access"})}),p.jsx("div",{children:p.jsx(K,{id:"laPpDC",defaultMessage:"<b>Important:</b> In the next step, make sure to keep all boxes checked. ChatGPT requires access to the full list of Google permissions.",values:{b:o=>p.jsx("strong",{children:o})}})})]}),p.jsx(eC,{secondaryButton:r,primaryButton:s})]});return n?i:p.jsx(ji,{...tC,isOpen:e,onClose:t,testId:"modal-gdrive-cta",children:i})}function Toe({onClose:e,excludeModalWrapper:t,...n}){const{loading:r,initiateOAuthFlow:s}=nC(n),i=p.jsx(Soe,{connectorIcon:p.jsx("div",{className:"rounded-xl border-[0.5px] bg-white p-2 shadow-sm",children:p.jsx(yc,{height:32,width:32})}),connectorName:"Google Drive",onClose:e,isConnecting:r,onContinue:()=>s()});return t?i:p.jsx(ji,{rootClassName:"z-100",testId:"modal-gdrive-cta-slurm",type:"success",isOpen:!0,onClose:e,size:"custom",className:"max-w-[400px]",children:i})}const PI=({intl:e,error:t})=>{let n,r;switch(t?.errorType){case"ca/oauth_api_access_error":{n=e.formatMessage({id:"LrBpzI",defaultMessage:"Permissions required"}),r=e.formatMessage({id:"E0lVhb",defaultMessage:"In order to sync your drive you must give ChatGPT the appropriate permissions. Please try again and select all the required checkboxes."});break}case"ca/oauth_missing_user_info_domain":{n=e.formatMessage({id:"CDqa2q",defaultMessage:"Cannot connect this account"}),r=e.formatMessage({id:"6Can6p",defaultMessage:"The Google account you are trying to connect does not belong to a Google Workspace domain. Google accounts that do not belong to a Google Workspace (such as personal Gmail accounts) are not eligible to connect to this specific feature at this time."});break}case"ca/oauth_has_existing_linked_openai_account":{n=e.formatMessage({id:"QSfIDZ",defaultMessage:"This Google account is already connected to a different ChatGPT account"}),r=e.formatMessage({id:"Z9Bj8k",defaultMessage:"The Google account you are trying to link is already connected to a different ChatGPT user for this Google Drive connection."});break}case"ca/oauth_connection_not_allowed":{n=e.formatMessage({id:"I3ekm6",defaultMessage:"Your ChatGPT account is not enabled for this connection"}),r=e.formatMessage({id:"0Vbazl",defaultMessage:"Your ChatGPT administrator has not enabled this connection for your account."});break}default:n=e.formatMessage({id:"ojfL45",defaultMessage:"Something went wrong"}),r=t?.message??e.formatMessage({id:"5MOzf8",defaultMessage:"We were unable to connect your Google account. Please check your settings and try again."})}return{title:n,body:r}};function Ooe({isOpen:e,onClose:t,excludeModalWrapper:n,primaryButton:r,error:s}){const i=Ue(),{title:o,body:a}=PI({intl:i,error:s}),c=p.jsxs(p.Fragment,{children:[p.jsxs("div",{className:"px-6 pt-4 pb-10",children:[p.jsxs("div",{className:"mb-3 flex items-center gap-2 text-xl font-medium",children:[p.jsx(goe,{className:"icon-lg"}),o]}),p.jsx("div",{children:a})]}),p.jsx(eC,{primaryButton:r})]});return n?c:p.jsx(ji,{...tC,isOpen:e,onClose:t,testId:"modal-gdrive-error",children:c})}function koe({onClose:e,error:t,excludeModalWrapper:n,...r}){const s=Ue(),{title:i,body:o}=PI({intl:s,error:t}),{loading:a,initiateOAuthFlow:c}=nC(r),l=p.jsxs(p.Fragment,{children:[p.jsx(poe,{onClose:e,connectorIcon:p.jsx("div",{className:"rounded-xl border-[0.5px] bg-white p-2 shadow-sm",children:p.jsx(yc,{height:32,width:32})}),title:i}),p.jsxs("div",{className:"border-token-border-default text-token-text-secondary mt-8 mb-6 flex items-center gap-4 rounded-xl border p-4 text-sm",children:[p.jsx(voe,{className:"icon-lg"}),o]}),p.jsx(Ct,{className:"w-full",size:"large",onClick:()=>c(),loading:a,children:s.formatMessage(pa.reconnect)})]});return n?l:p.jsx(ji,{testId:"modal-gdrive-error-slurm",rootClassName:"z-100",type:"success",isOpen:!0,onClose:e,size:"custom",className:"max-w-[400px]",children:l})}const nC=({connectorType:e,connectionId:t,location:n,isReconnect:r=!1,isAdminQuickstartFlow:s,accountId:i,onSuccess:o,onError:a})=>{const[c,l]=m.useState(!1),u=Ue(),d=Rt(),f=m.useCallback(async()=>{try{l(!0);const{message:h,errorType:g,success:_}=await RI({connectorType:e,connectionId:t,location:n,isReconnect:r,intl:u,isAdminQuickstartFlow:s,accountId:i});_?(d.success(h),o?.()):(d.danger(h,{toastId:"google_drive_oauth_flow",loggingTitle:"Failed to initiate OAuth flow",loggingDescription:h}),a?.({errorType:g,message:h}))}catch(h){a?.(),h instanceof Error&&d.danger(h.message,{toastId:"google_drive_oauth_flow",loggingTitle:"Failed to initiate OAuth flow",loggingDescription:h.message})}finally{l(!1)}},[e,t,n,r,u,s,i,d,o,a]);return{loading:c,initiateOAuthFlow:f}},T7=({label:e,...t})=>{const{loading:n,initiateOAuthFlow:r}=nC(t);return p.jsx(sl,{loading:n,onClick:r,color:"primary",children:p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx(_oe,{}),e]})})},pa=ze({back:{id:"RDaXnk",defaultMessage:"Back"},cancel:{id:"CfN1/v",defaultMessage:"Cancel"},continue:{id:"XGnWba",defaultMessage:"Continue"},loginWithGoogle:{id:"9ImAmL",defaultMessage:"Log in with Google"},reconnect:{id:"0qUCBD",defaultMessage:"Reconnect"},encounteredError:{id:"FNXFnS",defaultMessage:"Encountered an error connecting your account. Please try again later."}}),Aoe=({connectorType:e,connectionId:t,location:n,refetch:r,renderButton:s})=>{const i=Ue(),[o,a]=m.useState(!1),c=Rt(),l=Q3(),u=kee(),d=e==="google_drive_oauth",f=m.useCallback(async()=>{try{a(!0),await RI({connectorType:e,connectionId:t,location:n,intl:i})}catch(y){y instanceof Error?c.danger(y.message,{toastId:"ca_oauth_button"}):c.danger(i.formatMessage({id:"FNXFnS",defaultMessage:"Encountered an error connecting your account. Please try again later."}),{toastId:"ca_oauth_button",loggingTitle:"Encountered an error connecting your account.",loggingDescription:"Error message shown when a user tries to link their account but it fails."})}finally{a(!1),r?.()}},[t,e,i,n,r,c]),[h,g]=m.useState(!1),_=s({disabled:l||u,isLoading:o,onClick:()=>{d?g(!0):f()}}),v=_;return l?p.jsx(Yn,{label:i.formatMessage(Moe.gdriveTooltip),children:_}):u?p.jsx(loe,{children:_}):p.jsxs(p.Fragment,{children:[v,h&&p.jsx(woe,{isAdminFlow:!1,onClose:()=>g(!1),connectionId:t,location:n,onSuccess:r})]})},Moe=ze({gdriveTooltip:{id:"9DbE+w",defaultMessage:"Cannot connect, please use the web version instead"}}),Ioe=({givenDate:e,now:t,intl:n})=>{const r=Math.floor((t.getTime()-e.getTime())/1e3);if(r<60)return n.formatMessage({id:"DUWSt+",defaultMessage:"{seconds}s ago"},{seconds:r});if(r<3600){const s=Math.floor(r/60);return n.formatMessage({id:"ZyHv9I",defaultMessage:"{minutes}m ago"},{minutes:s})}else if(r<86400){const s=Math.floor(r/3600);return n.formatMessage({id:"2p4Gd3",defaultMessage:"{hours}h ago"},{hours:s})}else{const s=Math.floor(r/86400);return n.formatMessage({id:"KPjpqR",defaultMessage:"{days}d ago"},{days:s})}},DI=({startDate:e,now:t,scale:n})=>{const r=t.getTime()-e.getTime();if(r<=0)return 0;const s=r/n,i=Math.min(1,Math.log1p(s*9)/Math.log1p(10));return Math.round(i*100)},LI=(e=1e3)=>{const[t,n]=m.useState(new Date);return m.useEffect(()=>{const r=setInterval(()=>{n(new Date)},e);return()=>clearInterval(r)},[e]),t},Noe=({connection:e})=>{const t=Ue(),n=LI(),r=e.user_connection_details.initialized_at,s=r?DI({startDate:new Date(r),now:n,scale:1e3*60*60*3})/2:25;return p.jsx(Yn,{label:t.formatMessage({id:"69GKr/",defaultMessage:"Syncing may take 8 hours or longer"}),side:"right",children:p.jsxs("div",{className:"text-caption-regular text-token-text-tertiary flex items-center gap-2 grayscale",children:[p.jsx(lp,{sizeOverride:18,percentage:s}),p.jsx(K,{id:"fYaL40",defaultMessage:"Syncing"})]})})},Roe=({className:e,connection:t,ignoreLabel:n=!1})=>{const r=Ue(),s=LI(),i=t.user_connection_details.initialized_at,o=i?DI({startDate:new Date(i),now:s,scale:1e3*60*60*6})/2+50:75;return p.jsx(Yn,{label:r.formatMessage({id:"lsQnba",defaultMessage:"Last 30 days synced"}),secondaryLabel:r.formatMessage({id:"j+cskE",defaultMessage:"Full sync can take up to few days"}),side:"right",children:p.jsxs("div",{className:ne("text-caption-regular text-token-text-tertiary flex items-center gap-2",e),children:[p.jsx(lp,{sizeOverride:18,percentage:o,className:"text-blue-400"}),!n&&p.jsx(K,{id:"k4otrZ",defaultMessage:"Partially synced"})]})})},Poe=({connection:e,location:t,inactiveButtonOverride:n})=>{const[r,s]=m.useState(new Date);m.useEffect(()=>{const c=setInterval(()=>{s(new Date)},1e3);return()=>clearInterval(c)},[]);const{refetch:i}=mu({skip:!0}),o=Ue();switch(e.user_connection_details.activation_status){case"activated":{const c=e.user_connection_details.last_delta_sync_completed_at??e.user_connection_details.last_full_sync_completed_at;return c?p.jsx("div",{className:"text-body-small-regular",children:Ioe({now:r,givenDate:new Date(c),intl:o})}):p.jsxs("div",{className:"text-caption-regular text-token-text-tertiary flex items-center gap-2 grayscale",children:[p.jsx(q3,{className:"icon-sm"}),p.jsx(K,{id:"SWdiTP",defaultMessage:"Synced"})]})}case"activating":return p.jsx(Noe,{connection:e});case"partially_activated":return p.jsx(Roe,{connection:e});case"inactive":return n||p.jsx(Doe,{connection:e,refetch:i,location:t})}},O7="https://help.openai.com/en/articles/10929079-google-workspace-admin-managed-setup#h_856676fdde",FI=({displayName:e,connectorType:t})=>p.jsx(Yn,{withArrow:!0,interactive:!0,label:p.jsx(x7,{openNewTab:!0,underline:!1,href:O7,children:p.jsx(K,{id:"H0Humf",defaultMessage:"We were unable to connect your account to {connector_name}. Click to learn more.",values:{connector_name:t==="google_drive_dwd"?"Google Drive":e}})}),sideOffset:0,children:p.jsx(x7,{className:"hover:bg-token-interactive-bg-secondary-hover block rounded-full p-2",href:O7,openNewTab:!0,children:p.jsx(Xa,{className:"icon"})})}),yye=({connection:e})=>{switch(e.user_connection_details.auth_status){case"admin_connected":return p.jsx(K,{id:"Isczat",defaultMessage:"Connected"});case"admin_managed_disconnected":return p.jsx(FI,{displayName:e.connection_display_info.display_name,connectorType:e.user_connection_details.knowledge_connector_type});case"not_connected":return p.jsx(K,{id:"9ZiK24",defaultMessage:"Connect"});case"user_connected":return p.jsx(lp,{sizeOverride:18,percentage:0,className:"text-blue-400"})}},Doe=({connection:e,refetch:t,location:n})=>{const r=m.useMemo(()=>{switch(e.user_connection_details.auth_status){case"admin_connected":return p.jsx(Ct,{disabled:!0,size:"small",color:"ghost",children:p.jsx(K,{id:"Isczat",defaultMessage:"Connected"})});case"admin_managed_disconnected":return p.jsx(FI,{displayName:e.connection_display_info.display_name});case"not_connected":return p.jsx(Loe,{connection:e,location:n,refetch:t});case"user_connected":return p.jsx(lp,{sizeOverride:18,percentage:0,className:"text-blue-400"})}},[e,n,t]);return p.jsx(p.Fragment,{children:r})},Loe=({connection:e,location:t,refetch:n})=>{const r=({disabled:s,isLoading:i,onClick:o})=>p.jsx(Ct,{size:"small",disabled:s,loading:i,onClick:o,color:"secondary",children:p.jsx(K,{id:"9ZiK24",defaultMessage:"Connect"})});return p.jsx(Aoe,{connectorType:e.user_connection_details.knowledge_connector_type,connectionId:e.user_connection_details.connection_instance_id,location:t,refetch:n,renderButton:r})},Foe=["admin_connected","admin_managed_disconnected"];function joe({connection:e,refetch:t}){const n=Rt(),[r,s]=m.useState(!1);if(Foe.includes(e.user_connection_details.auth_status))return null;const i=async()=>{try{s(!0),await Oi.user_disconnect(e.user_connection_details.connection_instance_id),n.success("Successfully disconnected your account.")}catch{n.danger("Encountered an error disconnecting your account. Please try again later.",{toastId:"ca_disconnect_button"})}finally{s(!1),t?.()}};return p.jsxs(Ye.Root,{children:[p.jsx(Ye.BasicTrigger,{children:p.jsx("button",{type:"button",className:"text-token-text-secondary focus-visible:bg-token-surface-hover enabled:hover:bg-token-surface-hover disabled:text-token-text-quaternary h-8 rounded-lg px-2 focus-visible:outline-0",children:p.jsx(ioe,{className:"icon-sm"})})}),p.jsx(Ye.Portal,{children:p.jsx(Ye.Content,{size:"small",align:"end",children:p.jsx(Ye.Item,{disabled:r,onClick:i,icon:p.jsx(ooe,{}),color:"danger",children:p.jsx(K,{id:"iHFV22",defaultMessage:"Disconnect"})})})})]})}const rC=()=>{const e=pu();return $e({queryKey:["user_connection_status"],queryFn:Oi.user_connection_status,enabled:e})},Uoe=new Set(["gdrive_sync_connector","sharepoint_sync_connector","github_sync_connector"]);function Cye(){const e=Y(),t=we(e,"2509278897"),{data:n,isLoading:r,refetch:s}=rC(),i=m.useMemo(()=>t?n?.connection_statuses.filter(o=>!Uoe.has(o.user_connection_details.connection_type)):n?.connection_statuses,[n,t]);return m.useEffect(()=>{P.logEventWithStatsig("Contextual Answers User Settings Modal Shown","chatgpt_contextual_answers_user_settings_modal_shown")},[]),t&&!i?.length?null:p.jsx(xW,{description:p.jsx(K,{id:"yjIap+",defaultMessage:"These connectors are only available to a limited number of users."}),title:p.jsx(K,{id:"5C8Bnt",defaultMessage:"Beta connectors"}),children:p.jsx("div",{className:"border-b",children:r?p.jsx("div",{className:"p-2",children:p.jsx(hse,{lines:4})}):i?.length?p.jsx("div",{children:i.map(o=>p.jsx(TW,{children:p.jsx($re,{icon:p.jsx("img",{src:o.connection_display_info.icon_url??"",alt:o.connection_display_info.display_name,className:"icon-lg"}),title:o.connection_display_info.display_name,statusIndicator:p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx(Poe,{connection:o,location:"user_settings"}),o.user_connection_details?.activation_status!=="inactive"&&p.jsx(joe,{connection:o,refetch:s})]})})},o.user_connection_details.connection_instance_id))}):p.jsx("p",{className:"text-token-text-secondary my-2",children:p.jsx(K,{id:"nzXh59",defaultMessage:"No connections found."})})})})}const jI=e=>m.createElement("svg",{width:24,height:24,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",...e},m.createElement("path",{d:"M3.31302 16.7412C3.11928 17.0571 2.90169 17.4237 2.71689 17.7158C2.63737 17.8502 2.61375 18.0104 2.65109 18.162C2.68844 18.3136 2.78377 18.4445 2.91659 18.5266L6.79145 20.9111C6.85879 20.9527 6.93372 20.9804 7.01189 20.9928C7.09007 21.0051 7.1699 21.0017 7.24676 20.9828C7.32361 20.964 7.39593 20.93 7.45952 20.8829C7.5231 20.8358 7.57667 20.7765 7.6171 20.7084C7.77209 20.4491 7.9718 20.1123 8.18938 19.7516C9.72443 17.2181 11.2684 17.5281 14.0523 18.8574L17.8944 20.6846C17.9664 20.7189 18.0446 20.7383 18.1243 20.7419C18.204 20.7454 18.2836 20.7329 18.3583 20.7051C18.4331 20.6773 18.5015 20.6348 18.5596 20.5801C18.6176 20.5253 18.6641 20.4595 18.6962 20.3865L20.5413 16.2136C20.6039 16.0703 20.6078 15.9082 20.552 15.7621C20.4963 15.6161 20.3854 15.4977 20.2432 15.4327C19.4324 15.0511 17.8199 14.2911 16.3683 13.5906C11.1462 11.0541 6.708 11.218 3.31302 16.7412Z",fill:"#1868DB"}),m.createElement("path",{d:"M20.6871 7.27164C20.8808 6.95569 21.0984 6.58907 21.2832 6.29696C21.3627 6.16259 21.3864 6.00239 21.349 5.85079C21.3117 5.69919 21.2163 5.56829 21.0835 5.48622L17.2086 3.10169C17.1408 3.056 17.0643 3.02476 16.9839 3.00991C16.9034 2.99506 16.8208 2.99692 16.7411 3.01537C16.6615 3.03382 16.5864 3.06847 16.5207 3.11717C16.455 3.16586 16.4 3.22756 16.3592 3.29842C16.2042 3.55773 16.0045 3.89455 15.7869 4.25521C14.2518 6.78877 12.7078 6.47878 9.92391 5.14941L6.09376 3.3312C6.02173 3.29692 5.94356 3.27744 5.86387 3.27392C5.78419 3.2704 5.7046 3.28291 5.62984 3.3107C5.55507 3.3385 5.48664 3.38101 5.4286 3.43573C5.37057 3.49045 5.3241 3.55627 5.29196 3.62927L3.44693 7.8022C3.38427 7.94545 3.38041 8.10758 3.43616 8.25366C3.49192 8.39973 3.60283 8.51806 3.745 8.58313C4.55574 8.96466 6.16827 9.72473 7.61986 10.4252C12.8539 12.9587 17.2921 12.7888 20.6871 7.27164Z",fill:"#1868DB"})),UI=e=>m.createElement("svg",{width:24,height:24,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",...e},m.createElement("path",{d:"M20.248 3H11.5801C11.5801 4.03775 11.9923 5.03299 12.7261 5.76679C13.4599 6.50058 14.4552 6.91283 15.4929 6.91283H17.0896V8.45439C17.091 10.6134 18.8409 12.3633 20.9999 12.3647V3.75198C20.9999 3.33667 20.6633 3 20.248 3Z",fill:"#1868DB"}),m.createElement("path",{d:"M15.9594 7.31897H7.2915C7.29289 9.47801 9.04279 11.2279 11.2018 11.2293H12.7985V12.7759C12.8013 14.9349 14.5523 16.6837 16.7114 16.6837V8.07095C16.7114 7.65564 16.3747 7.31897 15.9594 7.31897Z",fill:"#1868DB"}),m.createElement("path",{d:"M11.6679 11.6353H3C3 13.7963 4.75183 15.5481 6.91283 15.5481H8.51455V17.0897C8.51593 19.2468 10.2628 20.9959 12.4199 21V12.3873C12.4199 11.972 12.0832 11.6353 11.6679 11.6353Z",fill:"#1868DB"})),Boe=e=>m.createElement("svg",{width:24,height:24,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",...e},m.createElement("path",{d:"M10.2176 2.46545L10.1154 2.52723C9.95295 2.62551 9.7999 2.73539 9.65708 2.85546L9.95168 2.64823H12.4521L12.9067 6.0902L10.6338 8.36303L8.36102 9.94282V11.7645C8.36102 13.0368 9.026 14.2166 10.1145 14.8755L12.5071 16.3238L7.45189 19.2727H6.4769L4.65967 18.1727C3.57121 17.5139 2.90625 16.334 2.90625 15.0617V8.93605C2.90625 7.66332 3.57164 6.48318 4.66065 5.82447L10.1154 2.525C10.1492 2.50455 10.1833 2.4847 10.2176 2.46545Z",fill:"url(#paint0_radial_376_5370)"}),m.createElement("path",{d:"M10.2176 2.46545L10.1154 2.52723C9.95295 2.62551 9.7999 2.73539 9.65708 2.85546L9.95168 2.64823H12.4521L12.9067 6.0902L10.6338 8.36303L8.36102 9.94282V11.7645C8.36102 13.0368 9.026 14.2166 10.1145 14.8755L12.5071 16.3238L7.45189 19.2727H6.4769L4.65967 18.1727C3.57121 17.5139 2.90625 16.334 2.90625 15.0617V8.93605C2.90625 7.66332 3.57164 6.48318 4.66065 5.82447L10.1154 2.525C10.1492 2.50455 10.1833 2.4847 10.2176 2.46545Z",fill:"url(#paint1_linear_376_5370)"}),m.createElement("path",{d:"M15.6331 9.72668V11.7633C15.6331 13.0356 14.9681 14.2154 13.8797 14.8743L8.4249 18.176C7.30903 18.8515 5.92066 18.8758 4.78516 18.2492L10.1135 21.4744C11.2711 22.1752 12.722 22.1752 13.8797 21.4744L19.3344 18.1726C20.4229 17.5138 21.0878 16.334 21.0878 15.0616V13.5905L20.6333 12.9086L15.6331 9.72668Z",fill:"url(#paint2_radial_376_5370)"}),m.createElement("path",{d:"M15.6331 9.72668V11.7633C15.6331 13.0356 14.9681 14.2154 13.8797 14.8743L8.4249 18.176C7.30903 18.8515 5.92066 18.8758 4.78516 18.2492L10.1135 21.4744C11.2711 22.1752 12.722 22.1752 13.8797 21.4744L19.3344 18.1726C20.4229 17.5138 21.0878 16.334 21.0878 15.0616V13.5905L20.6333 12.9086L15.6331 9.72668Z",fill:"url(#paint3_linear_376_5370)"}),m.createElement("path",{d:"M19.3347 5.82441L13.88 2.52494C12.7587 1.8467 11.3624 1.82569 10.2241 2.46191L10.1157 2.52746C9.02672 3.18618 8.36133 4.36629 8.36133 5.63904V9.95008L10.1157 8.88885C11.2729 8.18896 12.7228 8.18896 13.88 8.88885L19.3347 12.1883C20.3897 12.8265 21.0471 13.9539 21.0872 15.1808C21.0885 15.1412 21.0891 15.1015 21.0891 15.0617V8.93599C21.0891 7.66326 20.4237 6.48312 19.3347 5.82441Z",fill:"url(#paint4_radial_376_5370)"}),m.createElement("path",{d:"M19.3347 5.82441L13.88 2.52494C12.7587 1.8467 11.3624 1.82569 10.2241 2.46191L10.1157 2.52746C9.02672 3.18618 8.36133 4.36629 8.36133 5.63904V9.95008L10.1157 8.88885C11.2729 8.18896 12.7228 8.18896 13.88 8.88885L19.3347 12.1883C20.3897 12.8265 21.0471 13.9539 21.0872 15.1808C21.0885 15.1412 21.0891 15.1015 21.0891 15.0617V8.93599C21.0891 7.66326 20.4237 6.48312 19.3347 5.82441Z",fill:"url(#paint5_linear_376_5370)"}),m.createElement("defs",null,m.createElement("radialGradient",{id:"paint0_radial_376_5370",cx:0,cy:0,r:1,gradientUnits:"userSpaceOnUse",gradientTransform:"translate(9.00587 5.92579) rotate(110.528) scale(15.1669 26.4541)"},m.createElement("stop",{offset:.06441,stopColor:"#AE7FE2"}),m.createElement("stop",{offset:1,stopColor:"#0078D4"})),m.createElement("linearGradient",{id:"paint1_linear_376_5370",x1:9.04828,y1:18.3037,x2:6.88428,y2:14.5609,gradientUnits:"userSpaceOnUse"},m.createElement("stop",{stopColor:"#114A8B"}),m.createElement("stop",{offset:1,stopColor:"#0078D4",stopOpacity:0})),m.createElement("radialGradient",{id:"paint2_radial_376_5370",cx:0,cy:0,r:1,gradientUnits:"userSpaceOnUse",gradientTransform:"translate(5.82811 17.6139) rotate(-8.36717) scale(14.1144 9.32348)"},m.createElement("stop",{offset:.133928,stopColor:"#D59DFF"}),m.createElement("stop",{offset:1,stopColor:"#5E438F"})),m.createElement("linearGradient",{id:"paint3_linear_376_5370",x1:19.4317,y1:12.6254,x2:17.1128,y2:15.9504,gradientUnits:"userSpaceOnUse"},m.createElement("stop",{stopColor:"#493474"}),m.createElement("stop",{offset:1,stopColor:"#8C66BA",stopOpacity:0})),m.createElement("radialGradient",{id:"paint4_radial_376_5370",cx:0,cy:0,r:1,gradientUnits:"userSpaceOnUse",gradientTransform:"translate(19.7505 13.1378) rotate(-165.772) scale(11.329 19.0713)"},m.createElement("stop",{offset:.0584996,stopColor:"#50E6FF"}),m.createElement("stop",{offset:1,stopColor:"#436DCD"})),m.createElement("linearGradient",{id:"paint5_linear_376_5370",x1:8.80489,y1:2.47938,x2:12.2191,y2:2.47938,gradientUnits:"userSpaceOnUse"},m.createElement("stop",{stopColor:"#2D3F80"}),m.createElement("stop",{offset:1,stopColor:"#436DCD",stopOpacity:0})))),qoe=e=>m.createElement("svg",{width:24,height:24,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",...e},m.createElement("path",{d:"M4 4C4 2.89543 4.89543 2 6 2H14L20 8V20C20 21.1046 19.1046 22 18 22H6C4.89543 22 4 21.1046 4 20V4Z",fill:"#4285F4"}),m.createElement("path",{d:"M14 2L20 8H16C14.8954 8 14 7.10457 14 6V2Z",fill:"#1967D2"}),m.createElement("path",{d:"M8 13.75C8 13.6119 8.11193 13.5 8.25 13.5H15.75C15.8881 13.5 16 13.6119 16 13.75V14.75C16 14.8881 15.8881 15 15.75 15H8.25C8.11193 15 8 14.8881 8 14.75V13.75ZM8 16.75C8 16.6119 8.11193 16.5 8.25 16.5H13.75C13.8881 16.5 14 16.6119 14 16.75V17.75C14 17.8881 13.8881 18 13.75 18H8.25C8.11193 18 8 17.8881 8 17.75V16.75Z",fill:"white"}),m.createElement("path",{d:"M8 10.75C8 10.6119 8.11193 10.5 8.25 10.5H15.75C15.8881 10.5 16 10.6119 16 10.75V11.75C16 11.8881 15.8881 12 15.75 12H8.25C8.11193 12 8 11.8881 8 11.75V10.75Z",fill:"white"})),Goe=e=>m.createElement("svg",{width:24,height:24,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",...e},m.createElement("path",{d:"M4 4C4 2.89543 4.89543 2 6 2H14L20 8V20C20 21.1046 19.1046 22 18 22H6C4.89543 22 4 21.1046 4 20V4Z",fill:"#34A853"}),m.createElement("path",{d:"M14 2L20 8H16C14.8954 8 14 7.10457 14 6V2Z",fill:"#188038"}),m.createElement("path",{d:"M7.5 10.5C7.22386 10.5 7 10.7239 7 11V17.5C7 17.7761 7.22386 18 7.5 18H16.5C16.7761 18 17 17.7761 17 17.5V11C17 10.7239 16.7761 10.5 16.5 10.5H7.5ZM11.25 16.5L8.5 16.5V14.75L11.25 14.75V16.5ZM11.25 13.75H8.5V12H11.25V13.75ZM15.5 16.5H12.75V14.75L15.5 14.75V16.5ZM15.5 13.75H12.75V12H15.5V13.75Z",fill:"white"})),Hoe=e=>m.createElement("svg",{width:24,height:24,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",...e},m.createElement("path",{d:"M4 4C4 2.89543 4.89543 2 6 2H14L20 8V20C20 21.1046 19.1046 22 18 22H6C4.89543 22 4 21.1046 4 20V4Z",fill:"#F4B400"}),m.createElement("path",{d:"M14 2L20 8H16C14.8954 8 14 7.10457 14 6V2Z",fill:"#9D7607"}),m.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M7 11.25C7 10.8358 7.33579 10.5 7.75 10.5H16.25C16.6642 10.5 17 10.8358 17 11.25V17.25C17 17.6642 16.6642 18 16.25 18H7.75C7.33579 18 7 17.6642 7 17.25V11.25ZM8.5 12.5V16H15.5V12.5H8.5Z",fill:"white"})),Voe=e=>m.createElement("svg",{width:24,height:24,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",...e},m.createElement("path",{d:"M13.5574 11.5349L5.65039 10.1395V20.4498C5.65039 20.9206 6.03209 21.3023 6.50295 21.3023H20.1467C20.6175 21.3023 20.9992 20.9206 20.9992 20.4498V16.6512L13.5574 11.5349Z",fill:"#185C37"}),m.createElement("path",{d:"M13.5574 2.69763H6.50295C6.03209 2.69763 5.65039 3.07933 5.65039 3.55019V7.34879L13.5574 12L17.7434 13.3953L20.9992 12V7.34879L13.5574 2.69763Z",fill:"#21A366"}),m.createElement("path",{d:"M5.65039 7.34888H13.5574V12H5.65039V7.34888Z",fill:"#107C41"}),m.createElement("path",{opacity:.1,d:"M11.3095 6.41858H5.65039V18.0465H11.3095C11.7797 18.045 12.1605 17.6641 12.162 17.1939V7.27114C12.1605 6.80092 11.7797 6.42011 11.3095 6.41858Z",fill:"#282828"}),m.createElement("path",{opacity:.2,d:"M10.8443 6.88379H5.65039V18.5117H10.8443C11.3146 18.5102 11.6954 18.1294 11.6969 17.6591V7.73634C11.6954 7.26613 11.3146 6.88532 10.8443 6.88379Z",fill:"#282828"}),m.createElement("path",{opacity:.2,d:"M10.8443 6.88379H5.65039V17.5815H10.8443C11.3146 17.5799 11.6954 17.1991 11.6969 16.7289V7.73634C11.6954 7.26613 11.3146 6.88532 10.8443 6.88379Z",fill:"#282828"}),m.createElement("path",{opacity:.2,d:"M10.3792 6.88379H5.65039V17.5815H10.3792C10.8494 17.5799 11.2303 17.1991 11.2318 16.7289V7.73634C11.2303 7.26613 10.8494 6.88532 10.3792 6.88379Z",fill:"#282828"}),m.createElement("path",{d:"M1.85256 6.88379H10.38C10.8508 6.88379 11.2326 7.26549 11.2326 7.73635V16.2638C11.2326 16.7346 10.8508 17.1163 10.38 17.1163H1.85256C1.3817 17.1163 1 16.7346 1 16.2638V7.73635C1 7.26549 1.3817 6.88379 1.85256 6.88379Z",fill:"url(#paint0_linear_376_5372)"}),m.createElement("path",{d:"M3.63965 14.7712L5.43314 11.9921L3.78988 9.22839H5.11174L6.00848 10.9958C6.09128 11.1637 6.14802 11.2884 6.17872 11.3707H6.19035C6.24926 11.2368 6.31128 11.1067 6.37639 10.9805L7.335 9.22933H8.54848L6.86336 11.9768L8.59128 14.7712H7.30012L6.2643 12.8312C6.21551 12.7486 6.17411 12.6619 6.14059 12.5721H6.12524C6.09489 12.6601 6.05464 12.7444 6.00523 12.8233L4.93872 14.7712H3.63965Z",fill:"white"}),m.createElement("path",{d:"M20.1489 2.69763H13.5596V7.34879H21.0014V3.55019C21.0014 3.07933 20.6197 2.69763 20.1489 2.69763Z",fill:"#33C481"}),m.createElement("path",{d:"M13.5596 12H21.0014V16.6512H13.5596V12Z",fill:"#107C41"}),m.createElement("defs",null,m.createElement("linearGradient",{id:"paint0_linear_376_5372",x1:2.7776,y1:6.21762,x2:9.45496,y2:17.7825,gradientUnits:"userSpaceOnUse"},m.createElement("stop",{stopColor:"#18884F"}),m.createElement("stop",{offset:.5,stopColor:"#117E43"}),m.createElement("stop",{offset:1,stopColor:"#0B6631"})))),zoe=e=>m.createElement("svg",{width:24,height:24,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",...e},m.createElement("path",{d:"M13.0927 12.9302L11.6973 2.69763H11.5932C6.51931 2.71244 2.40983 6.82193 2.39502 11.8958V12L13.0927 12.9302Z",fill:"#ED6C47"}),m.createElement("path",{d:"M11.8019 2.69763H11.6978V12L16.3489 13.8604L21.0001 12V11.8958C20.9853 6.82193 16.8758 2.71244 11.8019 2.69763Z",fill:"#FF8F6B"}),m.createElement("path",{d:"M20.9997 12V12.1023C20.9851 17.1773 16.8746 21.2878 11.7997 21.3023H11.595C6.52004 21.2878 2.40958 17.1773 2.39502 12.1023V12H20.9997Z",fill:"#D35230"}),m.createElement("path",{opacity:.1,d:"M12.1625 7.26975V17.1953C12.1602 17.5402 11.9512 17.8501 11.6322 17.9814C11.5307 18.0243 11.4216 18.0465 11.3113 18.0465H4.59038C4.46015 17.8977 4.33457 17.7395 4.21829 17.5814C3.03331 16.0006 2.39349 14.0779 2.39503 12.1023V11.8977C2.39231 10.1157 2.9131 8.37221 3.8927 6.8837C3.99503 6.72556 4.102 6.56742 4.21829 6.41858H11.3113C11.7799 6.42213 12.1589 6.80114 12.1625 7.26975Z",fill:"#282828"}),m.createElement("path",{opacity:.2,d:"M11.6974 7.73496V17.6605C11.6973 17.7708 11.6752 17.8799 11.6322 17.9815C11.5009 18.3004 11.1911 18.5094 10.8462 18.5117H5.01364C4.86648 18.3623 4.72528 18.2071 4.59038 18.0466C4.46015 17.8977 4.33457 17.7396 4.21829 17.5815C3.03331 16.0007 2.39349 14.078 2.39503 12.1024V11.8977C2.39231 10.1158 2.9131 8.37231 3.8927 6.88379H10.8462C11.3148 6.88733 11.6938 7.26634 11.6974 7.73496Z",fill:"#282828"}),m.createElement("path",{opacity:.2,d:"M11.6974 7.73495V16.7303C11.6938 17.1989 11.3148 17.5779 10.8462 17.5815H4.21829C3.03331 16.0007 2.39349 14.078 2.39503 12.1024V11.8977C2.39231 10.1158 2.9131 8.37231 3.8927 6.88379H10.8462C11.3148 6.88732 11.6938 7.26633 11.6974 7.73495Z",fill:"#282828"}),m.createElement("path",{opacity:.2,d:"M11.2322 7.73495V16.7303C11.2287 17.1989 10.8497 17.5779 10.3811 17.5815H4.21829C3.03331 16.0007 2.39349 14.078 2.39503 12.1024V11.8977C2.39231 10.1158 2.9131 8.37231 3.8927 6.88379H10.3811C10.8497 6.88732 11.2287 7.26633 11.2322 7.73495Z",fill:"#282828"}),m.createElement("path",{d:"M1.85255 6.88379H10.38C10.8509 6.88379 11.2325 7.2655 11.2325 7.73634V16.2638C11.2325 16.7346 10.8508 17.1163 10.38 17.1163H1.85255C1.38171 17.1163 1 16.7346 1 16.2638V7.73634C1 7.2655 1.38171 6.88379 1.85255 6.88379Z",fill:"url(#paint0_linear_376_5382)"}),m.createElement("path",{d:"M6.20915 9.15766C6.76426 9.12021 7.31459 9.28145 7.76171 9.61255C8.13464 9.94549 8.3339 10.4313 8.30217 10.9302C8.30827 11.277 8.21585 11.6185 8.03567 11.9149C7.85325 12.2062 7.59043 12.4385 7.27892 12.5837C6.9228 12.7493 6.53344 12.8311 6.14077 12.8228H5.06217V14.8274H3.95752V9.15766H6.20915ZM5.06125 11.9567H6.01195C6.31334 11.9789 6.61239 11.8897 6.85242 11.706C7.05094 11.5156 7.155 11.247 7.1366 10.9726C7.1366 10.3477 6.7735 10.0353 6.0473 10.0353H5.06126V11.9567H5.06125Z",fill:"white"}),m.createElement("defs",null,m.createElement("linearGradient",{id:"paint0_linear_376_5382",x1:2.7776,y1:6.21762,x2:9.45496,y2:17.7825,gradientUnits:"userSpaceOnUse"},m.createElement("stop",{stopColor:"#CA4C28"}),m.createElement("stop",{offset:.5,stopColor:"#C5401E"}),m.createElement("stop",{offset:1,stopColor:"#B62F14"})))),$oe=e=>m.createElement("svg",{width:24,height:24,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",...e},m.createElement("path",{d:"M20.1467 2.69775H6.50295C6.03209 2.69775 5.65039 3.07946 5.65039 3.55031V7.34892L13.5574 9.6745L20.9992 7.34892V3.55031C20.9992 3.07946 20.6175 2.69775 20.1467 2.69775Z",fill:"#41A5EE"}),m.createElement("path",{d:"M20.9992 7.34888H5.65039V12L13.5574 13.3954L20.9992 12V7.34888Z",fill:"#2B7CD3"}),m.createElement("path",{d:"M5.65039 12.0001V16.6513L13.0923 17.5815L20.9992 16.6513V12.0001H5.65039Z",fill:"#185ABD"}),m.createElement("path",{d:"M6.50295 21.3024H20.1467C20.6175 21.3024 20.9992 20.9207 20.9992 20.4498V16.6512H5.65039V20.4498C5.65039 20.9207 6.03209 21.3024 6.50295 21.3024Z",fill:"#103F91"}),m.createElement("path",{opacity:.1,d:"M11.3095 6.4187H5.65039V18.0466H11.3095C11.7797 18.0451 12.1605 17.6643 12.162 17.194V7.27126C12.1605 6.80104 11.7797 6.42023 11.3095 6.4187Z",fill:"#282828"}),m.createElement("path",{opacity:.2,d:"M10.8443 6.88379H5.65039V18.5117H10.8443C11.3146 18.5102 11.6954 18.1294 11.6969 17.6591V7.73635C11.6954 7.26613 11.3146 6.88532 10.8443 6.88379Z",fill:"#282828"}),m.createElement("path",{opacity:.2,d:"M10.8443 6.88379H5.65039V17.5815H10.8443C11.3146 17.5799 11.6954 17.1991 11.6969 16.7289V7.73635C11.6954 7.26613 11.3146 6.88532 10.8443 6.88379Z",fill:"#282828"}),m.createElement("path",{opacity:.2,d:"M10.3792 6.88379H5.65039V17.5815H10.3792C10.8494 17.5799 11.2303 17.1991 11.2318 16.7289V7.73635C11.2303 7.26613 10.8494 6.88532 10.3792 6.88379Z",fill:"#282828"}),m.createElement("path",{d:"M1.85256 6.88379H10.38C10.8509 6.88379 11.2326 7.26549 11.2326 7.73635V16.2638C11.2326 16.7347 10.8509 17.1164 10.38 17.1164H1.85256C1.3817 17.1164 1 16.7347 1 16.2638V7.73635C1 7.26549 1.3817 6.88379 1.85256 6.88379Z",fill:"url(#paint0_linear_376_5387)"}),m.createElement("path",{d:"M4.49888 13.4224C4.51562 13.554 4.52679 13.6684 4.5319 13.7666H4.55143C4.55887 13.6736 4.57437 13.5615 4.59794 13.4303C4.62151 13.2991 4.64275 13.1883 4.66166 13.0978L5.55841 9.22891H6.71795L7.64818 13.0396C7.70223 13.2766 7.74092 13.5168 7.764 13.7587H7.77935C7.79669 13.5243 7.82901 13.2913 7.87609 13.061L8.61795 9.22705H9.6733L8.37004 14.7712H7.13702L6.2533 11.0996C6.22772 10.994 6.19842 10.8559 6.16632 10.6861C6.13423 10.5163 6.11423 10.3922 6.10632 10.314H6.09097C6.08074 10.4042 6.06073 10.5382 6.03097 10.7159C6.0012 10.8936 5.97732 11.025 5.95933 11.1103L5.12863 14.7703H3.87468L2.56445 9.2289H3.63887L4.44678 13.1056C4.46492 13.1852 4.48214 13.2912 4.49888 13.4224Z",fill:"white"}),m.createElement("defs",null,m.createElement("linearGradient",{id:"paint0_linear_376_5387",x1:2.7776,y1:6.21762,x2:9.45496,y2:17.7825,gradientUnits:"userSpaceOnUse"},m.createElement("stop",{stopColor:"#2368C4"}),m.createElement("stop",{offset:.5,stopColor:"#1A5DBE"}),m.createElement("stop",{offset:1,stopColor:"#1146AC"})))),bye=({className:e,contextConnector:t,extension:n})=>{const r=Ue(),s=Woe(t,n);return p.jsx("div",{className:`${e} dark:bg-token-main-surface-secondary flex items-center justify-center rounded-md border border-gray-100 bg-gray-50 dark:border-white/10`,children:p.jsx(s,{className:"w-[20px]","aria-label":r.formatMessage({id:"ccc.fileIcon",defaultMessage:"File icon for {contextConnector}"},{contextConnector:t})})})};function Woe(e,t){switch(e){case J.CONFLUENCE:return jI;case J.GDRIVE:switch(t){case"doc":case"docx":return qoe;case"xls":case"xlsx":return Goe;case"ppt":case"pptx":return Hoe;default:return yc}case J.JIRA:return UI;case J.NOTION_OPEN_CONNECTOR:return F3;case J.O365_BUSINESS:case J.O365_PERSONAL:case J.O365:switch(t){case"doc":case"docx":return $oe;case"xls":case"xlsx":return Voe;case"ppt":case"pptx":return zoe;default:return Boe}case J.SLACK_OPEN_CONNECTOR:return sp}}const Koe=e=>m.createElement("svg",{width:24,height:24,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",...e},m.createElement("g",{clipPath:"url(#clip0_5645_180)"},m.createElement("path",{d:"M12.2328 13.3571C15.3153 13.3571 17.8142 10.9267 17.8142 7.92857C17.8142 4.93045 15.3153 2.5 12.2328 2.5C9.15024 2.5 6.65137 4.93045 6.65137 7.92857C6.65137 10.9267 9.15024 13.3571 12.2328 13.3571Z",fill:"#036C70"}),m.createElement("path",{d:"M16.8834 17.8815C19.709 17.8815 21.9997 15.6536 21.9997 12.9053C21.9997 10.157 19.709 7.92911 16.8834 7.92911C14.0577 7.92911 11.7671 10.157 11.7671 12.9053C11.7671 15.6536 14.0577 17.8815 16.8834 17.8815Z",fill:"#1A9BA1"}),m.createElement("path",{d:"M12.93 21.4996C15.1135 21.4996 16.8835 19.778 16.8835 17.6543C16.8835 15.5307 15.1135 13.8091 12.93 13.8091C10.7466 13.8091 8.97656 15.5307 8.97656 17.6543C8.97656 19.778 10.7466 21.4996 12.93 21.4996Z",fill:"#37C6D0"}),m.createElement("path",{opacity:.1,d:"M13.1628 7.39878V17.0526C13.1605 17.388 12.9515 17.6894 12.6326 17.8171C12.5311 17.8589 12.4219 17.8804 12.3117 17.8804H8.98144C8.9768 17.8035 8.9768 17.7312 8.9768 17.6543C8.97525 17.5787 8.97835 17.5032 8.9861 17.4281C9.07123 15.982 9.98715 14.7061 11.3535 14.1302V13.2888C8.31257 12.8201 6.23802 10.0424 6.71991 7.0847C6.72326 7.06422 6.72671 7.04375 6.73029 7.0233C6.75344 6.87073 6.78607 6.71966 6.82797 6.57092H12.3117C12.781 6.57266 13.1611 6.94229 13.1628 7.39878Z",fill:"currentColor"}),m.createElement("path",{opacity:.2,d:"M11.8467 7.02365H6.73038C6.21354 9.97603 8.25531 12.7769 11.2908 13.2796C11.3827 13.2948 11.475 13.3078 11.5676 13.3185C10.1257 13.9835 9.07503 15.8722 8.98573 17.4284C8.97799 17.5036 8.97488 17.5791 8.97642 17.6546C8.97642 17.7315 8.97642 17.8039 8.98107 17.8808C8.98946 18.0329 9.00968 18.1841 9.04153 18.3332H11.8462C12.1911 18.3309 12.5009 18.1276 12.6322 17.8175C12.6752 17.7187 12.6973 17.6125 12.6973 17.5053V7.85151C12.6956 7.3952 12.3158 7.02564 11.8467 7.02365Z",fill:"currentColor"}),m.createElement("path",{opacity:.2,d:"M11.8466 7.02365H6.73034C6.21361 9.97631 8.25569 12.7773 11.2915 13.2799C11.3536 13.2902 11.4158 13.2995 11.4783 13.3077C10.0829 14.0206 9.07361 15.9048 8.98616 17.4284H11.8466C12.3152 17.425 12.6942 17.0563 12.6978 16.6006V7.85151C12.696 7.39502 12.316 7.02539 11.8466 7.02365Z",fill:"currentColor"}),m.createElement("path",{opacity:.2,d:"M11.3814 7.02365H6.73019C6.24226 9.81099 8.03799 12.4952 10.8558 13.1905C9.78883 14.3762 9.13442 15.8594 8.98601 17.4284H11.3814C11.8507 17.4267 12.2307 17.057 12.2325 16.6006V7.85151C12.2323 7.3944 11.8513 7.0239 11.3814 7.02365Z",fill:"currentColor"}),m.createElement("path",{d:"M2.85256 7.02365H11.38C11.8509 7.02365 12.2326 7.3949 12.2326 7.85287V16.1468C12.2326 16.6048 11.8509 16.976 11.38 16.976H2.85256C2.3817 16.976 2 16.6048 2 16.1468V7.85287C2 7.3949 2.3817 7.02365 2.85256 7.02365Z",fill:"url(#paint0_linear_5645_180)"}),m.createElement("path",{d:"M5.80776 11.8985C5.60797 11.7696 5.44108 11.598 5.31985 11.3968C5.20239 11.1865 5.14385 10.9499 5.15008 10.7106C5.13962 10.3866 5.25202 10.0702 5.46589 9.82165C5.69064 9.57277 5.98113 9.38847 6.30589 9.28874C6.67602 9.17025 7.0637 9.11186 7.45333 9.11593C7.96573 9.09772 8.47741 9.1674 8.96496 9.32177V10.3622C8.75312 10.2374 8.52238 10.1458 8.28124 10.0908C8.01958 10.0284 7.7511 9.99712 7.4817 9.99762C7.19761 9.98748 6.91534 10.0456 6.65984 10.1668C6.46259 10.2496 6.33467 10.4383 6.33426 10.6472C6.33346 10.774 6.38352 10.896 6.4738 10.9874C6.58043 11.0952 6.70656 11.1829 6.84589 11.2462C7.00093 11.3213 7.23349 11.4211 7.54357 11.5457C7.57771 11.5562 7.61099 11.5692 7.6431 11.5846C7.94828 11.7006 8.24269 11.8418 8.5231 12.0067C8.73546 12.134 8.91368 12.3086 9.04311 12.516C9.1758 12.7512 9.24011 13.0171 9.22915 13.2851C9.2443 13.6177 9.13968 13.945 8.93334 14.2107C8.72767 14.4549 8.45269 14.6349 8.14264 14.7282C7.77795 14.8394 7.39733 14.8931 7.01519 14.8874C6.67234 14.8889 6.32999 14.8617 5.99194 14.806C5.70651 14.7606 5.42796 14.6809 5.16264 14.5689V13.4719C5.41625 13.6481 5.69959 13.7798 5.99985 13.861C6.2991 13.9517 6.61017 14.0001 6.92357 14.0048C7.21363 14.0227 7.50318 13.9629 7.76078 13.832C7.94123 13.733 8.05098 13.5454 8.04637 13.3439C8.04757 13.2037 7.99055 13.069 7.88823 12.9702C7.76098 12.8487 7.61366 12.7489 7.45242 12.6748C7.26638 12.5843 6.99242 12.4651 6.63056 12.317C6.34269 12.2044 6.06706 12.0643 5.80776 11.8985Z",fill:"white"})),m.createElement("defs",null,m.createElement("linearGradient",{id:"paint0_linear_5645_180",x1:3.7776,y1:6.37572,x2:10.1808,y2:17.7779,gradientUnits:"userSpaceOnUse"},m.createElement("stop",{stopColor:"#058F92"}),m.createElement("stop",{offset:.5,stopColor:"#038489"}),m.createElement("stop",{offset:1,stopColor:"#026D71"})),m.createElement("clipPath",{id:"clip0_5645_180"},m.createElement("rect",{width:20,height:19,fill:"white",transform:"translate(2 2.5)"}))));function Sye(e){switch(e){case J.CONFLUENCE:return jI;case J.GDRIVE:return yc;case J.JIRA:return UI;case J.NOTION_OPEN_CONNECTOR:return F3;case J.O365_PERSONAL:case J.O365:return _M;case J.O365_BUSINESS:return Koe;case J.SLACK_OPEN_CONNECTOR:return sp}}var Rc={},k7;function Yoe(){if(k7)return Rc;k7=1,Object.defineProperty(Rc,"__esModule",{value:!0});function e(t,n){if(n)return t;throw new Error("Unhandled discriminated union member: "+JSON.stringify(t))}return Rc.assertNever=e,Rc.default=e,Rc}var Zoe=Yoe();const Joe=Ot(Zoe),Qoe=Bt({defaultMessage:"Microsoft OneDrive (personal)",id:"ContextConnector.OneDrivePersonal.name"}),Xoe=Bt({defaultMessage:"Microsoft OneDrive (work/school)",id:"ContextConnector.OneDriveBusiness.name"}),wye=ze({includesSharePoint:{id:"ContextConnectorPicker.o365BusinessIncludesSharePoint",defaultMessage:"Includes SharePoint"}});function Eye(e,t,n){switch(e){case J.CONFLUENCE:return"Confluence";case J.GDRIVE:return"Google Drive";case J.JIRA:return"Jira";case J.NOTION_OPEN_CONNECTOR:return"Notion";case J.O365:return n?"OneDrive":"Microsoft OneDrive";case J.O365_PERSONAL:return n?"OneDrive":t?.formatMessage(Qoe)??"Microsoft OneDrive (personal)";case J.O365_BUSINESS:return n?"Sharepoint":t?.formatMessage(Xoe)??"Microsoft OneDrive (work/school)";case J.SLACK_OPEN_CONNECTOR:return"Slack"}}function eae(e,t){switch(e){case J.CONFLUENCE:return"Confluence Page";case J.GDRIVE:switch(t){case"doc":case"docx":return"Google Docs";case"xls":case"xlsx":return"Google Sheets";case"ppt":case"pptx":return"Google Slides";default:return"Google Drive"}case J.JIRA:return"Jira Issue";case J.NOTION_OPEN_CONNECTOR:return"Notion Page";case J.O365:case J.O365_PERSONAL:case J.O365_BUSINESS:switch(t){case"doc":case"docx":return"Microsoft Word";case"xls":case"xlsx":return"Microsoft Excel";case"ppt":case"pptx":return"Microsoft PowerPoint";default:return"Microsoft OneDrive"}case J.SLACK_OPEN_CONNECTOR:return"Slack"}Joe(e)}function xye({contextConnector:e,extension:t}){return p.jsx(p.Fragment,{children:eae(e,t)})}const tae=It(e=>{const n=Jl(e)?.user,r=zt(e,"1967546325"),s=r.get("gdrivePicker",!1),i=r.get("o365Picker",!1),o=r.get("gdriveLink",!1),a=r.get("o365PersonalLink",!1),c=r.get("o365BusinessLink",!1),l=r.get("testCtor1Link",!1),u=r.get("testCtor2Link",!1),d=r.get("testCtor3Link",!1),f=r.get("oversmokeLink",!1),h=zt(e,"3747383021"),g=we(e,"3544641259")&&h.get("github",!1),_=r.get("gdrivePercentage",0),v=r.get("o365Percentage",0),y=r.get("testCtor1Percentage",0),C=r.get("testCtor2Percentage",0),E=r.get("testCtor3Percentage",0),b=r.get("oversmokePercentage",0),S=r.get("loadTestPercentage",0),w=r.get("showWorkspaceSettings",!1),x=n?nae(n.id):null;return{confluenceLinkStatus:vr(l,x,y),gdriveLinkStatus:vr(o,x,_),gdriveStatus:vr(s,x,_),jiraLinkStatus:vr(u,x,C),notionLinkStatus:vr(d,x,E),o365BusinessLinkStatus:vr(c,x,v),o365PersonalLinkStatus:vr(a,x,v),o365Status:vr(i,x,v),slackLinkStatus:vr(f,x,b),githubLinkStatus:vr(g,x,100),loadTest:vr(!0,x,S)==="true",showWorkspaceSettings:w}});function sC(){const e=Y();return tae(e)}function vr(e,t,n){return!e||t==null?"false":t<n?"true":"ifConnected"}function nae(e){const n=rae(e)%100;return Math.abs(n)}function rae(e){let t=0;for(let n=0;n<e.length;n++){const r=e.charCodeAt(n);t=(t<<5)-t+r,t|=0}return t}const sae=new Map;function Tye(){const{confluenceLinkStatus:e,gdriveLinkStatus:t,jiraLinkStatus:n,notionLinkStatus:r,o365BusinessLinkStatus:s,o365PersonalLinkStatus:i,slackLinkStatus:o}=sC();return iC(t,s,i,e,n,r,o)}function Oye(){const{gdriveStatus:e,o365Status:t}=sC();return iC(e,t,t)}function iae(){const{gdriveStatus:e,o365Status:t,confluenceLinkStatus:n,jiraLinkStatus:r,notionLinkStatus:s,slackLinkStatus:i,githubLinkStatus:o}=sC();return iC(e,t,t,o,n,r,s,i)}function iC(e,t,n,r=null,s=null,i=null,o=null,a=null){const c=Y(),u=Nt(c)?.getWorkspaceId(),d=[J.GDRIVE,J.O365_PERSONAL,J.O365_BUSINESS,...s==="true"||s==="ifConnected"?[J.CONFLUENCE]:[],...i==="true"||i==="ifConnected"?[J.JIRA]:[],...o==="true"||o==="ifConnected"?[J.NOTION_OPEN_CONNECTOR]:[],...a==="true"||a==="ifConnected"?[J.SLACK_OPEN_CONNECTOR]:[]],{connectors:f,isLoading:h,error:g,refetch:_}=oae(d),{data:v,isLoading:y,error:C,refetch:E}=Sh(u),b=!u||v?.beta_settings?.[Ys.CONTEXT_CONNECTOR_CONFLUENCE],S=!u||v?.beta_settings?.[Ys.CONTEXT_CONNECTOR_GDRIVE],w=!u||v?.beta_settings?.[Ys.CONTEXT_CONNECTOR_JIRA],x=!u||v?.beta_settings?.[Ys.CONTEXT_CONNECTOR_NOTION],T=!u||v?.beta_settings?.[Ys.CONTEXT_CONNECTOR_O365_PERSONAL],O=!u||v?.beta_settings?.[Ys.CONTEXT_CONNECTOR_O365_BUSINESS],A=!u||v?.beta_settings?.[Ys.CONTEXT_CONNECTOR_SLACK],k=f.get(J.CONFLUENCE),I=f.get(J.GDRIVE),N=f.get(J.JIRA),j=f.get(J.NOTION_OPEN_CONNECTOR),q=f.get(J.O365_PERSONAL),D=f.get(J.O365_BUSINESS),U=f.get(J.SLACK_OPEN_CONNECTOR),G=(ge,ke)=>ge==="true"||ge==="ifConnected"&&ke,F=m.useMemo(()=>{const ge=!!s&&G(s,!!k?.access_token),ke=!!I?.access_token,Pe=G(e,ke),ve=!!i&&G(i,!!N?.access_token),he=!!o&&G(o,!!j?.access_token),L=!!(q?.access_token??D?.access_token),ue=G(t,L),Ie=G(n,L),it=!!a&&G(a,!!U?.access_token),tt=[ge&&k&&b?[J.CONFLUENCE,k]:null,Pe&&I&&S?[J.GDRIVE,I]:null,ve&&N&&w?[J.JIRA,N]:null,he&&j&&x?[J.NOTION_OPEN_CONNECTOR,j]:null,Ie&&q&&T?[J.O365_PERSONAL,q]:null,ue&&D&&O?[J.O365_BUSINESS,D]:null,it&&U&&A?[J.SLACK_OPEN_CONNECTOR,U]:null];return new Map(Ek(tt))},[k,s,I,e,N,i,j,o,D,U,t,q,n,b,a,S,x,w,T,O,A]);let le=null,me=_;return g?(le=g,me=_):C&&(le=C,me=E),{connectorConfig:F,isLoading:h||y,error:le,refetch:me}}function oae(e){const{isUnauthenticated:t}=nu(),{data:n,isLoading:r,error:s,refetch:i}=$e({queryKey:["fetchConnectorData",e],queryFn:aae,refetchInterval:30*60*1e3,enabled:!t});return{connectors:m.useMemo(()=>!n||!n.length||s?sae:new Map(n.map(a=>[a.type,a])),[n,s]),isLoading:r,error:s,refetch:i}}async function aae({queryKey:e}){const[t,n]=e;let r=null;try{r=await H.safeGet("/connectors/check",{parameters:{query:{connector_names:n}}})}catch(i){throw R.addAction("Server Error while retrieving context connector entry",{cause:i}),i}return!r||!r.connectors?[]:r.connectors.map(i=>{const{type:o,...a}=i,c=o;if(a.access_token){if(c===J.O365_PERSONAL)return{type:c,...a,onedrive_endpoint_hint:{type:"personal",baseUrl:"https://onedrive.live.com",parsedUrl:"https://onedrive.live.com/picker"}};if(c===J.O365_BUSINESS){const l=a.onedrive_business_metadata?.base_url;if(l){const u=new URL(l);return{type:c,...a,onedrive_endpoint_hint:{type:"business",baseUrl:l,parsedUrl:`https://${u.hostname}/_layouts/15/FilePicker.aspx`}}}}}return{type:c,...a}})}const A7=10,kye=4,Vv={duration:20,hasCloseButton:!0},cae=512,Aye=cae*1024*1024,lae="application/vnd.google-apps.spreadsheet",uae="application/vnd.google-apps.presentation",dae="application/vnd.google-apps.document",fae=["xlsx","pptx","docx","page","issue"],hae={[lae]:"xlsx",[uae]:"pptx",[dae]:"docx"};function Mye(e){return e?hae[e.split(";")[0]]??null:null}function pae(e){return fae.includes(e)}function mae(e){return e&&pae(e)?e:null}var Xt=(e=>(e[e.None=0]="None",e[e.Multimodal=1]="Multimodal",e[e.Interpreter=2]="Interpreter",e[e.Retrieval=3]="Retrieval",e[e.ContextConnector=4]="ContextConnector",e[e.ProfilePicture=5]="ProfilePicture",e[e.Codex=6]="Codex",e))(Xt||{});function Iye(e){if(e)return{contextConnector:e.context_connector,sourceUrl:e.source_url,syntheticExtension:mae(e.synthetic_extension),type:e.type}}var ni=(e=>(e.Uploading="uploading",e.Ready="ready",e))(ni||{}),P0,M7;function gae(){if(M7)return P0;M7=1;var e=w3(),t=Dh(),n=d2(),r=qs(),s=eu();function i(o,a,c,l){if(!r(o))return o;a=t(a,o);for(var u=-1,d=a.length,f=d-1,h=o;h!=null&&++u<d;){var g=s(a[u]),_=c;if(g==="__proto__"||g==="constructor"||g==="prototype")return o;if(u!=f){var v=h[g];_=l?l(v,g,h):void 0,_===void 0&&(_=r(v)?v:n(a[u+1])?[]:{})}e(h,g,_),h=h[g]}return o}return P0=i,P0}var D0,I7;function BI(){if(I7)return D0;I7=1;var e=S2(),t=gae(),n=Dh();function r(s,i,o){for(var a=-1,c=i.length,l={};++a<c;){var u=i[a],d=e(s,u);o(d,u)&&t(l,n(u,s),d)}return l}return D0=r,D0}var L0,N7;function _ae(){if(N7)return L0;N7=1;var e=BI(),t=oT();function n(r,s){return e(r,s,function(i,o){return t(r,o)})}return L0=n,L0}var F0,R7;function vae(){if(R7)return F0;R7=1;var e=uc(),t=l2(),n=hr(),r=e?e.isConcatSpreadable:void 0;function s(i){return n(i)||t(i)||!!(r&&i&&i[r])}return F0=s,F0}var j0,P7;function yae(){if(P7)return j0;P7=1;var e=a2(),t=vae();function n(r,s,i,o,a){var c=-1,l=r.length;for(i||(i=t),a||(a=[]);++c<l;){var u=r[c];s>0&&i(u)?s>1?n(u,s-1,i,o,a):e(a,u):o||(a[a.length]=u)}return a}return j0=n,j0}var U0,D7;function Cae(){if(D7)return U0;D7=1;var e=yae();function t(n){var r=n==null?0:n.length;return r?e(n,1):[]}return U0=t,U0}var B0,L7;function bae(){if(L7)return B0;L7=1;function e(t,n,r){switch(r.length){case 0:return t.call(n);case 1:return t.call(n,r[0]);case 2:return t.call(n,r[0],r[1]);case 3:return t.call(n,r[0],r[1],r[2])}return t.apply(n,r)}return B0=e,B0}var q0,F7;function Sae(){if(F7)return q0;F7=1;var e=bae(),t=Math.max;function n(r,s,i){return s=t(s===void 0?r.length-1:s,0),function(){for(var o=arguments,a=-1,c=t(o.length-s,0),l=Array(c);++a<c;)l[a]=o[s+a];a=-1;for(var u=Array(s+1);++a<s;)u[a]=o[a];return u[s]=i(l),e(r,this,u)}}return q0=n,q0}var G0,j7;function wae(){if(j7)return G0;j7=1;function e(t){return function(){return t}}return G0=e,G0}var H0,U7;function Eae(){if(U7)return H0;U7=1;var e=wae(),t=yA(),n=w2(),r=t?function(s,i){return t(s,"toString",{configurable:!0,enumerable:!1,value:e(i),writable:!0})}:n;return H0=r,H0}var V0,B7;function xae(){if(B7)return V0;B7=1;var e=800,t=16,n=Date.now;function r(s){var i=0,o=0;return function(){var a=n(),c=t-(a-o);if(o=a,c>0){if(++i>=e)return arguments[0]}else i=0;return s.apply(void 0,arguments)}}return V0=r,V0}var z0,q7;function Tae(){if(q7)return z0;q7=1;var e=Eae(),t=xae(),n=t(e);return z0=n,z0}var $0,G7;function Oae(){if(G7)return $0;G7=1;var e=Cae(),t=Sae(),n=Tae();function r(s){return n(t(s,void 0,e),s+"")}return $0=r,$0}var W0,H7;function kae(){if(H7)return W0;H7=1;var e=_ae(),t=Oae(),n=t(function(r,s){return r==null?{}:e(r,s)});return W0=n,W0}var Aae=kae();const Mae=Ot(Aae),Nye=["none","delay","indexed"],Rye=["none","Adaptive","ChunkedCatchup","Punctuation"],Iae={label:"Auto",value:""},Nae="The user has opted in to provide additional feedback on the previous response. Encourage the user to share feedback that you can store in a memory to better meet their needs in future. Use no more than 3 turns. If at any point the user indicates no longer wanting to provide feedback, return to the original topic.",Rae={fConversationEndpoint:"default",tokenBufferType:null,wordFadeType:null,showCompletionPerfData:!0,forceParagen:!1,forceParagenModel:Iae,forceIndepthFeedback:!1,forceIndepthFeedbackPrompt:Nae,forceRateLimit:!1,recordRendering:!1,resetRateLimits:!1,showDebugConversationTurns:!1,rebaseSystemMessageContent:null,forceUseSearch:null,paragenStreamType:"none",paragenCotSummaryDisplay:"allow",showParagenMetadata:!0,forceShowConvoRating:!1,jsonViewerFilters:{},forceParallelSwitch:"auto",autoSwitcherTreatmentOverride:void 0,juiceScore:null,multimodalJuiceScore:null},qI=vt(xk(()=>Rae,{name:Qe.DebugSettings,partialize:e=>Mae(e,["fConversationEndpoint","showCompletionPerfData","jsonViewerFilters","recordRendering"])})),bu=()=>qI.getState(),Pye=e=>qI.setState(e);function Dye(e){return e.startsWith("file-service://")?e.replace("file-service://",""):e.startsWith("sediment://")?e.replace("sediment://",""):e}function Lye(e){return e.startsWith("file_")?"sediment://"+e:"file-service://"+e}function Fye(e){return e.startsWith("file-service://")}function zv(e,t,n){switch(t){case"file_zero_bytes":return e.formatMessage(Zt.fileZeroBytes,n);case"file_too_large":return e.formatMessage(Zt.fileTooLarge,n);case"over_user_quota":return e.formatMessage(Zt.overUserQuota,n);case"file_not_found":case"file_expired":return e.formatMessage(Zt.fileNotFound,n);case"file_timed_out":return e.formatMessage(Zt.fileTimedOut,n);case"ace_pod_expired":return e.formatMessage(Zt.codeInterpreterSessionTimeout,n);case"permission_error":return e.formatMessage(Zt.permissionError,n);case"default_upload_error":case"file_rejected":return e.formatMessage(Zt.defaultCreateEntryError,n);case"default_download_link_error":return e.formatMessage(Zt.defaultDownloadLinkError,n);case"file_empty":return e.formatMessage(Zt.fileEmpty,n);case"too_many_tokens":return e.formatMessage(Zt.fileTooManyTokens,n);case"file_encrypted":return e.formatMessage(Zt.fileEncrypted,n);case"file_corrupted":return e.formatMessage(Zt.fileCorrupted,n);case"failed_upload_to_blobstore":return e.formatMessage(Zt.failedUploadToBlobStore,n);case"internal_error":default:return e.formatMessage(Zt.unknownError)}}function jye(){const e=Ue();return m.useCallback((t,n)=>zv(e,t,n),[e])}const Uye=1e3*60*58;async function Pae(e,t,n=!1,r,s,i,o){const[,a,c]=/^(.*?)(\?.*)?$/.exec(e)??[],l=new URLSearchParams(c),u=a.replaceAll("#","*"),d=await H.safeGet("/files/download/{file_id}",{parameters:{path:{file_id:u},query:{gizmo_id:t,post_id:o,...Object.fromEntries(l.entries()),conversation_id:r,inline:s}},authOption:n?ht.Anonymous:void 0});if(d.status===vl.Success||d.status===vl.Retry)return d;throw new xt("Could not get file download link","error_code"in d?d.error_code:"unknown_error")}function Bye(){const{session:e}=lc(),{isUnauthenticated:t}=nu(),n=Rt();return async(r,s)=>{if(!t&&e==null)return n.danger(Zt.fileDownloadFailed,{toastId:"file_download_failed"}),!1;try{const i=await Pae(r,void 0,t);if(i.status!==vl.Success)throw new Error("File is not ready to download: "+JSON.stringify(i));const o=i.download_url,a=document.createElement("a");a.href=o,a.download=s,a.click(),window.open(o,"_blank")}catch{return n.danger(Zt.fileDownloadFailed,{toastId:"file_download_failed"}),!1}return!0}}function oC(e,t){return(t?.kind===St.GizmoInteraction||t?.kind===St.GizmoTest)&&!(t?.gizmo&&MM(t?.gizmo))?t.gizmo?.product_features:e?.product_features}function qye(e,t,n){const r=oC(e,t);return n===X.Research?Xt.Retrieval:r?.attachments?.type===to.CodeInterpreter?Xt.Interpreter:r?.attachments?.type===to.Multimodal?Xt.Multimodal:r?.attachments?.type===to.Retrieval?Xt.Retrieval:r?.attachments?.type===to.ContextConnector?Xt.ContextConnector:Xt.None}function GI(e){const t=e.split(".").pop()?.toLowerCase();return{md:"text/markdown",java:"text/x-java",py:"text/x-script.python",c:"text/x-c",cpp:"text/x-c++",h:"text/x-c++",php:"text/x-php",rb:"text/x-ruby",tex:"application/x-latext",ts:"text/x-typescript",cs:"text/x-csharp",go:"text/x-go",rs:"text/x-rust",scala:"application/x-scala",kt:"text/x-kotlin",swift:"text/x-swift",lua:"text/x-lua",r:"text/x-r",jl:"text/x-julia",pl:"text/x-perl",sh:"text/x-shellscript",m:"text/x-objectivec",mm:"text/x-objectivec++",erl:"text/x-erlang",ex:"text/x-elixir",exs:"text/x-elixir",hs:"text/x-haskell",clj:"text/x-clojure",groovy:"text/x-groovy",dart:"text/x-dart",bash:"text/x-shellscript",jsx:"text/jsx",tsx:"text/tsx",hbs:"text/x-handlebars",handlebars:"text/x-handlebars",mustache:"text/x-mustache",ejs:"text/x-ejs",j2:"text/x-jinja2",jinja:"text/x-jinja2",jinja2:"text/x-jinja2",liquid:"text/x-liquid",erb:"text/x-erb",twig:"text/x-twig",pug:"text/x-pug",jade:"text/x-jade",tmpl:"text/x-tmpl",json:"application/json",yml:"application/x-yaml",yaml:"application/x-yaml",toml:"application/toml",ini:"text/plain",properties:"text/plain",env:"text/plain",xml:"text/xml",conf:"text/plain",log:"text/plain",txt:"text/plain",astro:"text/x-astro"}[t??""]||""}function Dae(e){switch(e){case"application/vnd.google-apps.spreadsheet":return"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet";case"application/vnd.google-apps.document":case"application/vnd.google-apps.presentation":return"text/plain";default:return e}}function HI(e,t,n){const r=GI(e);return r&&(t=r),n&&(t=Dae(t)),t}function Lae(e,t,n,r,s){if(s==null)return e;const i=HI(t,n,r),{accepted_mime_types:o,can_accept_all_mime_types:a}=s;return o==null||o.length===0||!a||o.includes(i)?e:Xt.Interpreter}function Gye(e,t,n,r){const s=HI(n,t,r),i=e?.product_features?.attachments;if(i!=null)return i.accepted_mime_types?.includes(s)?i.type:i.image_mime_types?.includes(s)?to.Multimodal:to.CodeInterpreter}function Hye(e,t){const n=oC(e,t);return n?.attachments?.can_accept_all_mime_types?void 0:n?.attachments?.accepted_mime_types}function Vye(e,t){const n=oC(e,t),{attachments:r}=n??{};return r?.image_mime_types?r.image_mime_types:r?.type==="multimodal"?r.accepted_mime_types??Fae:[]}const Fae=["image/png","image/jpeg","image/gif","image/webp"],V7={"image/jpeg":[".jpg",".jpeg"],"image/svg+xml":[".svg"],"application/vnd.openxmlformats-officedocument.wordprocessingml.document":[".docx"],"application/vnd.openxmlformats-officedocument.presentationml.presentation":[".pptx"]};function jae(e){return e.reduce((t,n)=>(n in V7?t[n]=V7[n]:n.includes("/")&&(t[n]=[`.${n.split("/")[1]}`]),t),{})}function zye(e){return m.useMemo(()=>e===void 0?{}:{accept:jae(e)},[e])}function aC(e){return e.split(".").pop()?.toLowerCase()}function $ye(e){const t=aC(e);return t!=null&&["jpg","jpeg","png","gif","webp"].includes(t)}function Wye(e){const t=aC(e);return t!=null&&["xls","xlsx","csv"].includes(t)}function Kye(e){const t=aC(e);return t!=null&&["xls","xlsx"].includes(t)}function VI(e,t,n="fit"){return new Promise((r,s)=>{const i=new FileReader;i.onerror=o=>{R.addError(new Error("File reading has failed:",{cause:o})),s(new Error("Failed to read the file."))},i.onload=o=>{const a=new Image;a.onerror=c=>{R.addError(new Error("Image loading has failed:",{cause:c})),s(new Error("Failed to load the image."))},a.onload=()=>{const c=document.createElement("canvas");let l,u=0,d=0;switch(n){case"fill":l=t/Math.min(a.width,a.height);break;case"square":l=t/Math.min(a.width,a.height);break;case"fit":l=t/Math.max(a.width,a.height);break}const f=a.width*l,h=a.height*l;n==="square"?(c.width=t,c.height=t,u=(t-f)/2,d=(t-h)/2):(c.width=f,c.height=h);const g=c.getContext("2d");if(g==null){R.addError("Canvas context creation failed. Your environment might not fully support HTML5 canvas."),s(new Error("Failed to create canvas context."));return}g.drawImage(a,u,d,f,h);const _=e.type||"image/png";c.toBlob(v=>{v?r(new File([v],e.name,{type:_})):(R.addError("Blob creation failed. Blob is null."),s(new Error("Failed to create blob from image data.")))},_)},o.target==null?(R.addError("Event target is null. Failed to load image."),s("Failed to load image.")):a.src=o.target.result},i.readAsDataURL(e)})}function Yye(e,t){return VI(e,t,"square")}function Zye(e){const t=e.name.split("/")??[];return(t[t.length-1]??"").replace(/[-_]/g," ").split(".")[0]}function Uae(e,t){return t?e.slice(0,-t.length-1):e}function Jye(){const e=Y(),t=gt(e,"3278106051"),n=gt(e,"2356508715");return m.useMemo(()=>()=>!t.get("allow_receiver_see_user_uploaded_files")&&!n.get("allow_receiver_see_user_uploaded_files"),[t,n])}const Zt=ze({defaultCreateEntryError:{id:"fileUpload.defaultCreateEntryError",defaultMessage:"Unable to upload {fileName}"},defaultDownloadLinkError:{id:"fileUpload.defaultDownloadLinkError",defaultMessage:"Failed to get upload status for {fileName}"},unknownError:{id:"fileUpload.unknownError",defaultMessage:"Unknown error occurred"},fileZeroBytes:{id:"fileUpload.fileZeroBytes",defaultMessage:"File is empty"},fileTooLarge:{id:"fileUpload.fileTooLarge",defaultMessage:"File is too large"},overUserQuota:{id:"fileUpload.overUserQuota",defaultMessage:"User quota exceeded"},fileNotFound:{id:"fileUpload.fileNotFound",defaultMessage:"File not found"},fileTimedOut:{id:"fileUpload.fileTimedOut",defaultMessage:"File upload timed out. Please try again."},fileEmpty:{id:"fileUpload.fileEmpty",defaultMessage:"No text could be extracted from this file."},fileTooManyTokens:{id:"fileUpload.fileTooManyTokens",defaultMessage:"This file contains too much text content. Please try again with a smaller file."},fileEncrypted:{id:"fileUpload.fileEncrypted",defaultMessage:"This file is encrypted/requires a password to access. Please try again with an unencrypted file."},fileCorrupted:{id:"fileUpload.fileCorrupted",defaultMessage:"This file is corrupted. Please ensure the file is not corrupted and try again."},codeInterpreterSessionTimeout:{id:"fileUpload.codeInterpreterSessionTimeout",defaultMessage:"Code interpreter session expired"},permissionError:{id:"fileUpload.permissionError",defaultMessage:"Missing permission to access file"},fileDownloadFailed:{id:"filesModal.fileDownloadFailed",defaultMessage:"File download failed. Please try again."},failedUploadToBlobStore:{id:"fileUpload.failedUploadToBlobStore",defaultMessage:"Failed upload to files.oaiusercontent.com. Please ensure your network settings allow access to this site or contact your network administrator."}});let K0=null;async function Bae(){return K0||(K0=(await $(async()=>{const{default:e}=await import("./e8thlmiuh1tetfnu.js");return{default:e}},[])).default),K0}const td={duration:20,hasCloseButton:!0};function Qye(e){return JSON.stringify({file:e.name,modified:e.lastModified,currentTime:new Date().toString()})}function $v(e){return new Promise((t,n)=>{const r=new FileReader,s=new Image;r.onload=()=>{s.onload=()=>t(s),s.onerror=i=>n(i),s.src=r.result},r.readAsDataURL(e)})}async function qae(e,t,n,r,s){try{const i=await H.safePost("/files",{authOption:s?ht.Anonymous:void 0,requestBody:{file_name:e,file_size:t,use_case:n.kind,gizmo_id:n.kind===qt.Gizmo?n.gizmoId:void 0,timezone_offset_min:new Date().getTimezoneOffset(),reset_rate_limits:!!r}});if(i.status===vl.Error)throw P.logEvent("Create File Entry Error",{error_code:i.error_code,error_type_name:"FileServiceErrorResponse",error_msg:i.error_code,error_stack:""}),new xt("Could not create file",i.error_code);return i}catch(i){throw i instanceof xt||(i instanceof yh?P.logEvent("Create File Entry Error",{error_type_name:"ClientRequestMismatchedAuthError",error_msg:i.message,error_stack:i.stack}):i instanceof je?P.logEvent("Create File Entry Error",{error_type_name:i.detail?.type==="throttled"?"RequestThrottled":"RequestError",error_msg:i.message,error_stack:i.stack}):i instanceof Error?P.logEvent("Create File Entry Error",{error_type_name:i.name,error_msg:i.message,error_stack:i.stack}):P.logEvent("Create File Entry Error",{error_type_name:"UnknownError",error_msg:String(i),error_stack:""})),i}}function zI(e){const t=e.split("."),n=t[t.length-1];return n==="error"||n==="cancelled"||n==="failed"||n==="unknown"}async function Gae(e,t,n){try{const r=Ne.streamedJsonPost(`${Ae}/files/process_upload_stream`,e,{authOption:n?ht.Anonymous:void 0});let s;for await(const i of r){if(zI(i.event)){const o=`Error stream processing upload: indexing failed: ${i.event}`;throw new xt(o,i.event,i.extra)}i.progress!=null&&t?.(i.progress),i?.extra?.total_tokens!=null&&(s=i.extra.total_tokens)}return s?{fileTokenSize:s}:void 0}catch(r){throw r instanceof xt||r instanceof je&&r.isClientError()?r:new xt(`Error stream processing upload: ${r}`,"stream_process_error")}}async function $I(e,t,n,r,s,i,o){const a={ENTRY_CREATED:10,FILE_UPLOADED:60,FILE_PROCESSED:100};let c=Tr.Initial;P.logEvent("Upload File Initiated",{client:"web",useCase:s.kind,uploadEntry:"local"}),Fe.logEvent("chatgpt_file_upload_started",null,{client:"web",useCase:s.kind,uploadEntry:"local"});const l=o.usesRetrievalIndex??!1,u=l?performance.now():void 0,d=bu().resetRateLimits;try{const{file_id:f,upload_url:h}=await qae(t.name,t.size,s,!!d,o.isUnauthenticated);i.onFileCreated(e,f,h),c=Tr.FileCreated,i.onFileUploadProgress(e,a.ENTRY_CREATED);const g=s.kind===qt.Gizmo?s.gizmoId:void 0,_={client:"web",useCase:s.kind,uploadEntry:"local",fileId:f,fileSize:t.size};P.logEvent("Blob Store Upload Started",_);const v=C=>C.toLowerCase().includes("estuary");let y;if(v(h)){const{finalStatus:C}=await Wae({file:t,cdnUrl:h,fileId:f,fileName:t.name,useCaseType:s,shouldIndexForRetrieval:l,gizmoId:g,handlers:i,tempId:e,imageDimensions:o.imageDimensions,milestones:{entry:a.ENTRY_CREATED,uploaded:a.FILE_UPLOADED,processed:a.FILE_PROCESSED}});c=C}else{const C=await Kae(t,h,b=>{i.onFileUploadProgress(e,a.ENTRY_CREATED+(a.FILE_UPLOADED-a.ENTRY_CREATED)*b)});if(i.onFileUploadProgress(e,a.FILE_UPLOADED),C.status!==201)throw P.logEvent("Blob Store Upload Error",{..._,error_type_name:`HTTPStatus${C.status}`,error_msg:`HTTP status ${C.status}: ${C.statusText}`,error_stack:""}),new xt("File upload to blobstore failed","failed_upload_to_blobstore");P.logEvent("Blob Store Upload Completed",_),c=Tr.FileUploaded;const E={file_id:f,use_case:s.kind,gizmo_id:g,index_for_retrieval:l,file_name:t.name};y=await Gae(E,b=>{i.onFileUploadProgress(e,a.FILE_UPLOADED+(a.FILE_PROCESSED-a.FILE_UPLOADED)*b/100)},o.isUnauthenticated),c=Tr.FileProcessed,i.onFileUploaded(e,f,o.imageDimensions,y),l&&(c=Tr.RetrievalIndexCreated)}u!=null&&Ft(Xe())&&H.safePost("/lat/retrieval",{requestBody:{e2e_latency_ms:performance.now()-u,type:"file"}})}catch(f){WI(n,r,t.name,f);let h="NotInstanceOfError";f instanceof je?h=`${f.name}_${f.status}`:(f instanceof Error||f instanceof xt)&&(h=f.name),i.onError(e,"error",h,s,c)}}async function Xye(e,t,n,r,s,i){const{width:o,height:a}=await $v(t);return $I(e,t,n,r,{kind:s},i,{imageDimensions:{width:o,height:a}})}async function Hae(e,t){const n=await H.safeGet("/files/{file_id}",{parameters:{path:{file_id:e},query:t!=null?{gizmo_id:t}:void 0}});return{name:n.name,status:n.metadata?.retrieval?.status??Ta.Processing,error_code:n.metadata?.retrieval?.error_code,file_size_tokens:n.file_size_tokens}}async function Vae(e,t){const n=Date.now()+6e4,r=i=>new Promise(o=>setTimeout(o,i));let s=0;for(;Date.now()<n;){const i=await Hae(e,t);if(i.status===Ta.Success||i.status===Ta.Skipped)return i;if(i.status===Ta.Failed)throw new xt("Context extraction failed",i.error_code);s++,await r(Math.min(1e3,100*s))}throw new xt("Retrieval indexing timed out")}function zae(e){if(e.code==="file.indexing.error"){const t=e.extra?.file_parse_error_code;return typeof t=="string"?t:"file.indexing.error"}return e.code??"internal_error"}function WI(e,t,n,r){if(r instanceof xt&&r.code!=null){const s=zv(e,zae(r));t.danger(s,{...td,toastId:"file_upload_error",loggingTitle:s,loggingDescription:s})}else if(r instanceof je&&r.detail?.type==="throttled"){const s=r.message,i="file-upload-rate-limit";(t.getToasts?.()??[]).some(a=>String(a.id).startsWith(i)&&a.isShown!==!1)||t.info(s,{...td,id:i,action:f3.file_upload_rate_limit_upsell_plus})}else if(r instanceof yh){const s=e.formatMessage(Wv.noAuthFileUpload);t.info(s,td)}else{const s=zv(e,"default_upload_error",{fileName:n});t.danger(s,{...td,toastId:"file_upload_error",loggingTitle:s,loggingDescription:s})}}const Wv=ze({retrievalSkippedFile:{id:"useFilePickerState.retrievalSkippedFile",defaultMessage:'Unable to extract text from "{fileName}"'},noAuthFileUpload:{id:"useFilePickerState.noAuthFileUpload",defaultMessage:"Log in to analyze files and images for free."}});async function $ae(e){const{file:t,destinationUrl:n,fileId:r,fileName:s,useCaseType:i,shouldIndexForRetrieval:o,gizmoId:a,onOverallProgress:c,onUploadComplete:l,milestones:u}=e,d=new FormData;d.append("file",t);const h=new URL(n,window.location.origin).searchParams.get("upload_url")??n;d.append("upload_url",h),d.append("file_id",r),d.append("file_name",s),d.append("use_case",i.kind),d.append("index_for_retrieval",String(!!o)),a&&d.append("gizmo_id",a);const g=fh(Xe()),_=Ni(),v={[By]:_,[Uy]:Zl};g&&(v.Authorization=`Bearer ${g}`);const y=de.getCookie(ie.Workspace);typeof y=="string"&&y.trim().length>0&&y.trim()!==fi&&(v["ChatGPT-Account-ID"]=encodeURIComponent(y.trim()));let C=!1;const E=U=>{c(u.entry+(u.uploaded-u.entry)*U)},b=U=>{c(u.uploaded+(u.processed-u.uploaded)*(U/100))},S=1e4,w=120,x=96;let T,O=0,A=!1,k=0,I=0;function N(U){return 1-Math.pow(1-U,3)}function j(){if(!A)return;const U=performance.now()-O,G=Math.min(1,U/S),F=x*N(G),le=Math.max(I,Math.min(x,F),k);if(le>I&&(I=le,b(le)),k>=100){D();return}T=window.setTimeout(j,le>=x&&k===0?w*4:w)}function q(){A||(A=!0,O=performance.now(),j())}function D(U=!1){A=!1,T!==void 0&&(window.clearTimeout(T),T=void 0),U&&(I=100,b(100))}return await new Promise((U,G)=>{const F=new XMLHttpRequest;F.open("POST",n,!0),F.withCredentials=!0;for(const[he,L]of Object.entries(v))F.setRequestHeader(he,L);let le="",me,ge=!1;function ke(he){if(!ge){ge=!0;try{F.abort()}catch{}G(he instanceof xt?he:new xt(`Error stream processing upload: ${String(he)}`,"stream_process_error"))}}function Pe(he){for(;;){const L=le.indexOf(`
`);if(L===-1)break;const ue=le.slice(0,L).trim();if(le=le.slice(L+1),!!ue)try{const Ie=JSON.parse(ue);if(zI(Ie.event)){D(),ke(new xt(`Error stream processing upload: indexing failed: ${Ie.event}`,Ie.event,Ie.extra));return}Ie.progress!=null&&(k=Ie.progress,k>I&&(I=k,b(k)),k>=100&&D(!0)),Ie.event==="file.processing.metadata"&&(k=100,D(!0)),Ie?.extra?.total_tokens!=null&&(me=Ie.extra.total_tokens)}catch{if(!he){le=ue+`
`+le;break}}}}F.upload.onprogress=he=>{if(!he.lengthComputable)return;const L=he.loaded/he.total;E(L),L===1&&!C&&(C=!0,l(),q())};let ve=0;F.onreadystatechange=()=>{if(F.readyState===XMLHttpRequest.LOADING||F.readyState===XMLHttpRequest.DONE){const he=F.responseText.substring(ve);ve=F.responseText.length,le+=he,Pe(F.readyState===XMLHttpRequest.DONE)}if(F.readyState===XMLHttpRequest.DONE){if(F.status>=400){D(),ke(new xt("File upload to blobstore failed","failed_upload_to_blobstore"));return}D(I<100),U(me?{fileTokenSize:me}:{})}};try{F.send(d)}catch(he){ke(he)}})}async function Wae(e){const{file:t,cdnUrl:n,fileId:r,fileName:s,useCaseType:i,shouldIndexForRetrieval:o,gizmoId:a,handlers:c,tempId:l,imageDimensions:u,milestones:d}=e,f=await $ae({file:t,destinationUrl:n,fileId:r,fileName:s,useCaseType:i,shouldIndexForRetrieval:o,gizmoId:a,onOverallProgress:g=>{c.onFileUploadProgress(l,g)},onUploadComplete:()=>{c.onFileUploadProgress(l,d.uploaded)},milestones:d});let h=Tr.FileProcessed;return c.onFileUploaded(l,r,u,f),o&&(h=Tr.RetrievalIndexCreated),{finalStatus:h,metadata:f}}async function Kae(e,t,n,r){const s=await Bae();return await s.request({method:"put",url:t,data:e,headers:{"x-ms-blob-type":"BlockBlob","x-ms-version":"2020-04-08","Content-Type":e.type},onUploadProgress:i=>{i.progress!==void 0&&n&&n(i.progress)}}).catch(function(i){let o={...r};throw s&&i instanceof s.AxiosError&&i.response?.status?o={...o,error_type_name:`AxiosHTTPError${i.response.status}`,error_msg:i.message,error_stack:i.stack}:i instanceof Error&&(o={...o,error_type_name:i.name,error_msg:i.message,error_stack:i.stack}),P.logEvent("Blob Store Upload Error",o),new xt("File upload to blobstore failed","failed_upload_to_blobstore")})}const KI={files:[],connectorFileData:{}},YI=m.createContext(null);function e2e({children:e,initialState:t=KI}){const[n]=m.useState(()=>qr(()=>t));return p.jsx(YI.Provider,{value:n,children:e})}function ZI(){const e=m.useContext(YI);if(e==null)throw new Error("useFilePickerState must be used inside a FilePickerContext");return e}function t2e(e){const t=ZI();return Do(t,e)}const n2e={hasUploadInProgress:({files:e})=>e.some(t=>t.status===ni.Uploading),getReadyFiles:({files:e})=>e.filter(t=>t.status===ni.Ready)},Y0=2048;async function z7(e){let t=e,{width:n,height:r}=await $v(t);if(n>Y0||r>Y0)try{const s=await VI(t,Y0),i=await $v(s);n=i.width,r=i.height,t=s}catch(s){R.addError(new Error("Error resizing image:",{cause:s}))}return{file:t,width:n,height:r}}async function Yae(e,t,n,r,s,i,o,a,c){const l=performance.now();P.logEvent("Upload File Initiated",{client:"web",useCase:r.kind,contextConnector:i.contextConnector,fileSourceType:i.type}),Fe.logEvent("chatgpt_file_upload_started",null,{client:"web",useCase:r.kind,contextConnector:i.contextConnector,fileSourceType:i.type});let u=Tr.Initial;const d=QI(e);try{const f=await H.safePost("/connectors/upload/{connector_name}",{parameters:{path:{connector_name:i.contextConnector}},requestBody:{id:t,upload_use_case:r.kind,mime_type:n.type,name:n.name,gizmo_id:o,drive_id:i.o365DriveId,manifest:i.manifest}});switch(r.kind===qt.Gizmo&&(r={...r,kind:s.includes(JI(n))?qt.Multimodal:qt.MyFiles}),f.type){case"error":throw Zae(f.error);case"file":{switch(d.onFileCreated(t,f.file.id,"",i.contextConnector),u=Tr.FileProcessed,r.kind){case qt.MyFiles:{d.onFileUploadProgress(t,90);const h=await Vae(f.file.file_id,o);h?.status===Ta.Skipped&&c.danger(a.formatMessage(Wv.retrievalSkippedFile,{fileName:h.name}),{...Vv,toastId:"retrieval_index_skipped",loggingTitle:Wv.retrievalSkippedFile.defaultMessage,loggingDescription:"Retrieval index skipped"}),d.onFileUploaded(t,f.file.file_id,void 0,{fileTokenSize:h.file_size_tokens,mimeType:f.file.mime_type}),u=Tr.RetrievalIndexCreated;break}case qt.Multimodal:{d.onFileUploaded(t,f.file.file_id,{width:512,height:512},{mimeType:f.file.mime_type});break}case qt.AceUpload:{d.onFileUploaded(t,f.file.file_id,void 0,{mimeType:f.file.mime_type});break}case qt.DalleAgent:case qt.Gizmo:case qt.ProfilePicture:default:throw new xt(`Use case not supported by cloud doc: ${r.kind}`)}break}case"folder":throw new xt("Folder type not supported")}Ft(Xe())&&H.safePost("/lat/retrieval",{requestBody:{e2e_latency_ms:performance.now()-l,type:i.contextConnector}})}catch(f){R.addError(new Error(`Failed to upload connected file by ${i.contextConnector}`,{cause:f}));const h=Uae(n.name,i?.syntheticExtension);WI(a,c,h,f);let g="NotInstanceOfError";f instanceof je?g=`${f.name}_${f.status}`:(f instanceof Error||f instanceof xt)&&(g=f.name),d.onError(t,"error","connector_upload_"+g,{kind:qt.MyFiles},u)}}function JI(e){return e.type||GI(e.name)}function Zae({status_code:e,error_code:t,error_message:n}){if(e&&e<500){let r="internal_error";return t?r=t:e===404?r="file_not_found":e===403?r="permission_error":e===413&&(r="file_too_large"),new xt(n,r)}else return je.createWithErrorMessage("/connectors/upload","server",n)}const ui={reset:e=>{e.setState(KI)},restoreFiles:(e,t)=>{e.setState({files:t})},uploadFile:async(e,t,n,r,s,i,o,a={},c,l)=>{const{gizmoId:u,isUnauthenticated:d}=a,f=e.getState().files,h=Lae(r,n.name,n.type,l?.contextConnector,c),g={tempId:t,gizmoId:a.gizmoId,status:ni.Uploading,file:n,progress:1,fileId:null,cdnUrl:null,contextConnectorInfo:l,contextConnector:l?.contextConnector};if(f.length===A7)P.logEvent("Uploaded Max Files Error"),o.danger(i.formatMessage(nd.maxUploadsAtATime,{maxUploads:A7,fileName:n.name}),{...Vv,toastId:"max_uploads_at_a_time",loggingTitle:nd.maxUploadsAtATime.defaultMessage,loggingDescription:"Max uploads at a time"});else if(f.some(_=>_.tempId===t))P.logEvent("Uploaded Duplicate File Error"),o.danger(i.formatMessage(nd.duplicateFileAttached,{fileName:n.name.length>20?n.name.slice(0,19)+"…":n.name}),{...Vv,toastId:"duplicate_file_attached",loggingTitle:nd.duplicateFileAttached.defaultMessage,loggingDescription:"Duplicate file attached"});else{e.setState(({files:y})=>({files:[...y,g]}));let _;const v={isUnauthenticated:d};if(s.includes(n.type)){if(_={kind:qt.Multimodal},!l){const y=await z7(n);n=y.file,v.imageDimensions={width:y.width,height:y.height}}}else if(["video/mp4","video/quicktime"].includes(n.type)&&s.includes("image/png")&&we(Xe(),"3681682292"))_={kind:"multimodal_video"};else if(h===Xt.Codex){_={kind:qt.Codex};const y=await z7(n);n=y.file,v.imageDimensions={width:y.width,height:y.height}}else switch(h){case Xt.Multimodal:throw new Error(`Multimodal file upload not supported mime type, ${n.type}
Supported mime types: `+s.join(", "));case Xt.Interpreter:_={kind:qt.AceUpload};break;case Xt.Retrieval:_={kind:qt.MyFiles},v.usesRetrievalIndex=!0;break;case Xt.ProfilePicture:throw new Error("cannot upload profile picture via uploadFile");case Xt.ContextConnector:case Xt.None:return}u!=null&&(_={kind:qt.Gizmo,gizmoId:u}),a.skipUpload||(l?await Yae(e,t,n,_,s,l,a.gizmoId,i,o):await $I(t,n,i,o,_,QI(e),v))}},createFileCompleted:(e,t,n,r,s)=>{const i=e.getState().files,o=i.findIndex(c=>c.tempId===t),a=i[o];if(o>=0&&a.status===ni.Uploading){const c=[...i];c.splice(o,1,{...a,progress:10,fileId:n,cdnUrl:r,contextConnector:s}),e.setState({files:c})}},updateProgress:(e,t,n)=>{const r=e.getState().files,s=r.findIndex(o=>o.tempId===t),i=r[s];if(s>=0&&i.status===ni.Uploading){const o=[...r];o.splice(s,1,{...i,progress:n}),e.setState({files:o})}},uploadCompleted:(e,t,n,r,s,i)=>{const o=e.getState().files,a=o.findIndex(c=>c.tempId===t);if(a>=0&&o[a].status===ni.Uploading&&o[a].fileId!=null){const c=o[a],l=[...o],u={...c,tempId:t,status:ni.Ready,progress:100,fileSpec:{name:c.file.name,id:c.fileId,size:c.file.size,contextConnectorInfo:c.contextConnectorInfo,mimeType:s?.mimeType??JI(c.file),...r||{},...s||{}}};l.splice(a,1,u);const d={...e.getState().connectorFileData};i&&(d[i?.file_id]=i),e.setState({files:l,connectorFileData:d}),P.logEvent("Upload File Completed",{status:c.status,fileId:c.fileId,contextConnector:c.contextConnector??"local"}),Fe.logEvent("chatgpt_file_upload_completed",null,{status:c.status,contextConnector:c.contextConnector??"local"})}},remove:(e,t,n,r,s,i)=>{const o=e.getState().files,a=o.findIndex(c=>c.tempId===t);if(a>=0){const c=o[a];n==="error"?(P.logEvent("Upload File Error",{status:c.status,fileId:c.fileId,client:"web",errorClassName:r??"undefined",useCaseType:s,uploadStatus:i??"undefined",contextConnector:c.contextConnector}),Fe.logEvent("chatgpt_file_upload_error",null,{client:"web",errorClassName:r??"undefined",useCaseType:s?.kind??"undefined",uploadStatus:i??"undefined",contextConnector:c.contextConnector??"undefined"})):P.logEvent("Remove File",{status:c.status,fileId:c.fileId});const l=[...o];l.splice(a,1),e.setState({files:l})}}},QI=e=>({onFileCreated:ui.createFileCompleted.bind(null,e),onFileUploadProgress:ui.updateProgress.bind(null,e),onFileUploaded:ui.uploadCompleted.bind(null,e),onError:ui.remove.bind(null,e)}),nd=ze({maxUploadsAtATime:{id:"useFilePickerState.maxUploadsAtATime",defaultMessage:"Unable to upload {fileName}. Max {maxUploads} uploads at a time"},duplicateFileAttached:{id:"useFilePickerState.duplicateFileAttached",defaultMessage:"Unable to upload {fileName} because an identical file has already been attached to this message."}}),Jae=qe.createContext({mode:void 0,getGizmoId:void 0}),Qae=()=>m.useContext(Jae),Z0={filePickerStarted:e=>{P.logEvent("Context Connectors: Picker Started",{contextConnector:e})},filePickerLoaded:e=>{P.logEvent("Context Connectors: Picker Loaded",{contextConnector:e})},filePickerPicked:(e,t)=>{P.logEvent("Context Connectors: Picker Picked",{contextConnector:e,numFiles:t})},filePickerCancelled:e=>{P.logEvent("Context Connectors: Picker Cancelled",{contextConnector:e})},linkPasted:e=>{P.logEvent("Context Connectors: Link Pasted",{...e})},linkMetadataFetchStarted:e=>{P.logEvent("Context Connectors: Link Metadata Fetch Started",{contextConnector:e})},linkMetadataFetchSucceeded:(e,t)=>{P.logEvent("Context Connectors: Link Metadata Fetch Succeeded",{contextConnector:e,mimeType:t})},linkMetadataFetchFailed:(e,t)=>{P.logEvent("Context Connectors: Link Metadata Fetch Failed",{contextConnector:e,reason:String(t)})},oauthUpsellButtonClick:(e,t)=>{P.logEvent("Context Connectors: OAuth Upsell Button Click",{contextConnector:e,choice:t})},expiredAccessTokenUsed:(e,t)=>{P.logEvent("Context Connectors: Expired Access Token Used",{contextConnector:e,useCase:t})}};function r2e(e,t,n,r){const s=Rt(),i=Ue(),{getGizmoId:o}=Qae(),[a,c]=m.useState();m.useEffect(()=>{o?o().then(f=>c(f)):c(void 0)},[o]);const l=Do(t),u=ZI();return m.useCallback(f=>{const{docsReferencedByURL:h}=Ht(e)??{};if(h!=null)for(const g of f){const{id:_,type:v,handler:y}=g,C=`${v}:${_}`,E=h[C],S=u.getState().files.find(w=>w.tempId===_);if(E!=null&&E!=="failed"&&S){s.success(i.formatMessage(rd.fileAlreadyAttached),{hasCloseButton:!0});continue}switch(y.type){case"fetch":{lt(e,w=>{w.docsReferencedByURL[C]="pending"}),ui.uploadFile(u,_,new File([],i.formatMessage(rd.fileLoading)),Xt.None,n,i,s,{skipUpload:!0,gizmoId:a},r,{contextConnector:v,sourceUrl:g.url,syntheticExtension:null,type:yl.Link}),Z0.linkMetadataFetchStarted(v),y.tryFetch().then(w=>{if(ui.remove(u,_,"none"),w==null)return null;const{id:x,title:T,connector:O,mimeType:A,url:k,syntheticExtension:I,o365DriveId:N,manifest:j}=w;Z0.linkMetadataFetchSucceeded(v,A),lt(e,D=>{D.docsReferencedByURL[C]="fetched"});let q=T;O===J.GDRIVE&&(q=I?`${T}.${I}`:T),ui.uploadFile(u,x,new File([],q,{type:A.split(";")[0]}),Xt.Retrieval,n,i,s,{gizmoId:a},r,{contextConnector:O,sourceUrl:k,syntheticExtension:I,type:yl.Link,o365DriveId:N,manifest:j})}).catch(w=>{Z0.linkMetadataFetchFailed(v,w),w instanceof je&&w.status===404&&v===J.NOTION_OPEN_CONNECTOR?(s.danger(rd.fileNotAccessible,{hasCloseButton:!0,toastId:"ccc_use_parsed_document_handler"}),l.appendMessageIfNotDismissed({connector:v,type:"not-connected"})):s.danger(rd.fileFetchFailed,{hasCloseButton:!0,toastId:"ccc_use_parsed_document_handler"}),lt(e,x=>{x.docsReferencedByURL[C]="failed"}),ui.remove(u,_,"none")});break}case"prompt":{l.appendMessageIfNotDismissed({connector:v,type:y.message}),lt(e,w=>{w.docsReferencedByURL[C]="prompted"});break}}}},[e,u,s,i,n,a,r,l])}const rd=ze({fileLoading:{id:"CCC.fileLoading",defaultMessage:"Loading…"},fileFetchFailed:{id:"CCC.fileFetchFailed",defaultMessage:"Unable to fetch file information"},fileAlreadyAttached:{id:"CCC.fileAlreadyAttached",defaultMessage:"This file is already a part of your message."},fileNotAccessible:{id:"CCC.fileNotAccessible",defaultMessage:"This document is not accessible by ChatGPT, please make sure the document exists and you have granted ChatGPT the access."}}),XI=()=>{const e=Q3(),{connectorConfig:t,isLoading:n,error:r,refetch:s}=iae(),i=t.has(J.CONFLUENCE)&&!e,o=t.has(J.GDRIVE)&&!e,a=t.has(J.JIRA)&&!e,c=t.has(J.NOTION_OPEN_CONNECTOR)&&!e,l=(t.has(J.O365_PERSONAL)||t.has(J.O365_BUSINESS))&&!e,u=t.has(J.SLACK_OPEN_CONNECTOR)&&!e;return{isConfluenceEnabled:i,isGdriveEnabled:o,isJiraEnabled:a,isNotionOpenConnectorEnabled:c,isO365Enabled:l,isSlackOpenConnectorEnabled:u,connectorConfig:t,isLoading:n,hasContextConnectorEnabled:i||o||a||c||l||u,error:r,refetch:s}},s2e=Vn[M.GDRIVE_ACTION_CONNECTOR],i2e=Vn[M.GITHUB_CONNECTOR],o2e=Vn[M.SHAREPOINT_CONNECTOR],Kv=`#settings/${au.Connectors}`,a2e=[M.GDRIVE_ACTION_CONNECTOR,M.GCAL_CONNECTOR,M.GMAIL_CONNECTOR].map(e=>Vn[e]),eN="connector",cC="add-connector-link",Xae="create-connector",lC="product-sku",tN="redirectAfter",ece="system-hint-type",c2e=()=>{const e=Fr();return({connectorId:t,redirectAfter:n,systemHintType:r})=>e(nN(s=>{s.set(cC,"true"),s.set(lC,rn.CONNECTOR_SETTING),t&&s.set(eN,t),n&&s.set(tN,n),r&&s.set(ece,r)}),{replace:!0})},l2e=()=>{const e=Fr();return()=>e(nN(t=>{t.delete(cC),t.delete(lC)}),{replace:!0})};function nN(e){const t=window.location.hash,[n,r]=t.split("?"),s=new URLSearchParams(r);e(s);const i=s.toString();return Kv+(i?`?${i}`:"")}const u2e=()=>{const{hash:e}=fr(),t=e.indexOf("?");return t===-1?!1:new URLSearchParams(e.substring(t+1)).get(cC)==="true"},d2e=()=>{const{hash:e}=fr(),t=e.indexOf("?");return t===-1?!1:new URLSearchParams(e.substring(t+1)).get(Xae)==="true"},f2e=()=>{const e=Fr();return t=>{const n=window.location.hash,[r,s]=n.split("?"),i=new URLSearchParams(s);t?i.set("connector",t):i.delete("connector");const o=i.toString()?`${r}?${i.toString()}`:r;e(o,{replace:!0})}},uC=e=>{const{hash:t}=fr();return m.useMemo(()=>{const n=t.indexOf("?");return n===-1?void 0:new URLSearchParams(t.slice(n+1)).get(e)??void 0},[t,e])},h2e=()=>uC(tN),p2e=()=>uC(lC),m2e=()=>uC(eN),tce=e=>e.supported_auth.some(t=>t.type==="OAUTH")?"OAUTH":"NONE",nce=e=>H.safePost("/aip/connectors/links/noauth",{requestBody:{connector_id:e.id,name:e.name,action_names:e.actions.map(t=>t.name)},additionalHeaders:{[mn]:rn.CONNECTOR_SETTING}}),rce=async({connector:e,redirectAfter:t,shouldRedirectToConnectorDetails:n=!1,onError:r,openPopup:s,toaster:i,intl:o,productSku:a})=>{const c={connectorId:e.id,name:e.name,actionNames:e.connector_type==="MCP"||e.connector_type==="OPEN_API"?e.actions.map(l=>l.name):null,oauthClientId:null,oauthClientScopes:null};return Ck({redirectUri:yk(e.id),connectorPlatformParams:c,redirectTo:t||(n?`${Kv}?connector=${e.id}`:Kv),onError:r,openPopup:s,toaster:i,intl:o,productSku:a})},sce=async({connector:e,shouldRedirectToConnectorDetails:t=!1,openPopup:n,toaster:r,intl:s})=>{switch(tce(e)){case"OAUTH":return await rce({connector:e,redirectAfter:void 0,shouldRedirectToConnectorDetails:t,openPopup:n,toaster:r,intl:s,productSku:rn.CONNECTOR_SETTING}),null;case"NONE":return await nce(e)}},g2e=(e,t)=>H.safePost("/accounts/{account_id}/connectors/{connector_id}/publish",{parameters:{path:{account_id:t,connector_id:e}}}),ice=()=>{const e=pu(),t=rC(),n=m.useMemo(()=>t.data?.connection_statuses.filter(o=>["google_drive_oauth","google_drive_dwd"].includes(o.user_connection_details.knowledge_connector_type)),[t.data]),r=XI(),s=r.connectorConfig.get(J.GDRIVE),i=r.isGdriveEnabled&&!!s;return{isLoading:t.isLoading||r.isLoading,fileUploadConfig:i?s:null,internalKnowledgeEnabled:e,internalKnowledgeConfigs:e&&n?.length?n:null}},oce=()=>{const e=XI(),t=e.connectorConfig.get(J.O365_PERSONAL),n=e.connectorConfig.get(J.O365_BUSINESS);return{isLoading:e.isLoading,personalConfig:e.isO365Enabled&&t?.access_token?t:null,businessConfig:e.isO365Enabled&&n?.access_token?n:null}},_2e=()=>{const e=pu(),t=_u(e,rn.CONNECTOR_SETTING),n=ko({fetchValidLinksOnly:!0,productSku:rn.CONNECTOR_SETTING}),{fileUploadConfig:r,internalKnowledgeConfigs:s}=ice(),i=oce(),{availableConnectors:o}=j3(),a=(n.connectorLinks.get(Vn[M.GDRIVE_ACTION_CONNECTOR])?.length??0)>0||(s?.filter(v=>v.user_connection_details.auth_status!=="not_connected").length??0)>0,c=(n.connectorLinks.get(Vn[M.SHAREPOINT_CONNECTOR])?.length??0)>0,l=!!r?.access_token,u=!!i.businessConfig?.access_token,d=t.platformConnectors.get(Vn[M.GDRIVE_ACTION_CONNECTOR]),f=d&&d.status!=="DISABLED_BY_ADMIN"||(s?.filter(v=>v.user_connection_details.auth_status==="not_connected").length??0)>0,h=o.some(v=>v.type===M.SHAREPOINT_CONNECTOR&&v.status!=="DISABLED_BY_ADMIN");return{canUpgradeGDrive:l&&!a&&f,canUpgradeSharepoint:u&&!c&&h,isLoading:t.isLoading||n.isLoading}};async function v2e(e){return(await H.safeGet("/aip/connectors/mcp/oauth_config",{parameters:{query:{mcp_url:e}},additionalHeaders:{[mn]:rn.CONNECTOR_SETTING}})).oauth_config}function y2e(e){return H.safePost("/aip/connectors/mcp/refresh_actions",{requestBody:{link_id:e},additionalHeaders:{[mn]:rn.CONNECTOR_SETTING}})}function C2e(e,t){return H.safePatch("/aip/connectors/links/{link_id}",{parameters:{path:{link_id:e}},requestBody:{actions:t},additionalHeaders:{[mn]:rn.CONNECTOR_SETTING}})}function ace(e){return H.safeGet("/aip/connectors/{connector_id}/conformance",{parameters:{path:{connector_id:e}},additionalHeaders:{[mn]:rn.CONNECTOR_SETTING}})}function cce(e){return H.safeDelete("/aip/connectors/{connector_id}",{parameters:{path:{connector_id:e}},additionalHeaders:{[mn]:rn.CONNECTOR_SETTING}})}const lce=ze({gdriveBrandName:{id:"81dp6y",defaultMessage:"Google Drive"}}),b2e=(e,t)=>e==="gdrive_action_connector"?t.formatMessage(lce.gdriveBrandName):e;async function S2e(e,t,n){const r=`https://chat.openai.com/aip/${e.id}/oauth/callback`,s=t,i=await H.safeGet("/aip/p/{id}/user-settings/oauth/redirect",{parameters:{path:{id:e.id},query:{redirect_uri:r,redirect_to:s}}});window.location.href=i.redirect_uri}async function w2e(e,t,n,r){const s=await H.safeGet("/connectors/{id}/oauth/redirect",{parameters:{path:{id:e.id},query:{redirect_uri:n,entry_point:t,redirect_to:r}}});window.location.href=s.redirect_uri}async function uce(e,t){e&&await H.safeDelete("/aip/connectors/links/{link_id}",{parameters:{path:{link_id:e}},additionalHeaders:t?{[mn]:t}:void 0})}async function dce(e,t){await H.safeDelete("/aip/connectors/links",{requestBody:{connector_id:e},additionalHeaders:t?{[mn]:t}:void 0}),window.location.reload()}function E2e(e){switch(e){case yl.Link:return"link_paste_popover";case yl.Picker:return"file_upload_menu"}}async function x2e(e){await H.safeDelete("/connectors/user_setting/{connector_name}",{parameters:{path:{connector_name:e}}}),window.location.reload()}function fce(e,t){const{isLoading:n,error:r,refetch:s,platformConnectors:i}=_u(!0,t),o=i.get(e);return{enabled:!!o&&o.status!=="DISABLED_BY_ADMIN",isLoading:n,error:r,refetch:s}}function T2e(e){return fce(Vn[M.GITHUB_CONNECTOR],e)}function hce(e,t,n){const r=gu(),s=Ue(),i=Rt(),{data:o,isLoading:a,error:c,refetch:l}=$e({queryKey:["connector-client-data",e],queryFn:async()=>{const u=await H.safeGet("/aip/connectors/oauth_clients",{parameters:{query:{service:t}},additionalHeaders:n?{[mn]:n}:void 0});return u.oauth_clients?u.oauth_clients:(i.danger(s.formatMessage({id:"OfpT7B",defaultMessage:"Request error fetching oauth clients"}),{id:"fetch-oauth-clients-error",duration:3,hasCloseButton:!0}),[])},enabled:r});return{oAuthClients:o,isLoading:a,error:c,refetch:l}}function O2e(e,t,n="/",r,s,i){const{platformConnectors:o,isLoading:a,error:c,refetch:l}=_u(!0,r),{connectorLinks:u,isLoading:d,error:f,refetch:h}=ko({productSku:r}),{oAuthClients:g,isLoading:_,error:v,refetch:y}=hce(e,t,r),C=pce(),E=m.useCallback(()=>{l(),h(),y()},[l,h,y]),b=Vn[e],S=o.get(b),w=u.has(b),x=u.get(b)?.[0]?.id,T=m.useCallback(()=>{x&&C(x,()=>{E()},r)},[C,E,x,r]),O=c??f??v,A=a||d||_,k=m.useCallback(()=>{if(!A){if(!S){s?.();return}if(!g?.length){i?.();return}window.location.hash=`#settings/${au.Connectors}?connector=${b}&add-connector-link=true&redirectAfter=${n}&product-sku=${r}`}},[A,S,g,b,s,i,n,r]);return m.useMemo(()=>({isLoading:A,isConnected:w,openGithubModal:k,error:O,refetch:E,handleDisconnect:T}),[A,w,k,O,E,T])}function k2e(e){"use forget";const t=xe.c(20),n=Ue(),r=Rt(),s=gte(),{refetch:i}=_u(!0,e);let o;t[0]===Symbol.for("react.memo_cache_sentinel")?(o={fetchValidLinksOnly:!0},t[0]=o):o=t[0];const{refetch:a}=ko(o);let c;t[1]!==e?(c={fetchValidLinksOnly:!1,productSku:e},t[1]=e,t[2]=c):c=t[2];const{refetch:l}=ko(c),u=sB(dh.DeveloperMode);let d;t[3]!==n||t[4]!==u||t[5]!==s||t[6]!==e||t[7]!==r?(d=async _=>{const{supported_auth:v,...y}=_,{connector:C}=await H.safePost("/aip/connectors/mcp",{requestBody:{...y,auth_request:{supported_auth:v,oauth_client_params:null}},additionalHeaders:e?{[mn]:e}:void 0});if(C.supported_auth.length===0){const b=await ace(C.id);if(!u.data&&!b.implements_retrievable)return await cce(C.id),{connector:null,link:null,implementsRetrievable:!1}}const E=await sce({connector:C,shouldRedirectToConnectorDetails:!0,openPopup:s,toaster:r,intl:n});return{connector:C,link:E,implementsRetrievable:!0}},t[3]=n,t[4]=u,t[5]=s,t[6]=e,t[7]=r,t[8]=d):d=t[8];let f;t[9]!==n||t[10]!==r?(f=_=>{const v=_ instanceof je&&_.status===409?n.formatMessage({id:"Tedt6I",defaultMessage:"Connector name already exists"}):n.formatMessage({id:"9J7rOY",defaultMessage:"Error creating connector"});r.danger(v)},t[9]=n,t[10]=r,t[11]=f):f=t[11];let h;t[12]!==i||t[13]!==l||t[14]!==a?(h=()=>{i(),a(),l()},t[12]=i,t[13]=l,t[14]=a,t[15]=h):h=t[15];let g;return t[16]!==d||t[17]!==f||t[18]!==h?(g={mutationFn:d,onError:f,onSettled:h},t[16]=d,t[17]=f,t[18]=h,t[19]=g):g=t[19],gn(g)}function A2e(){const e=Ue(),t=Rt(),n=on(),r=ko(),s=Tn();return async(o,a,c)=>{try{await dce(o,c),s.invalidateQueries({queryKey:["fetchConnectorLinkData",n?.normalizedAccountUserId]}),await r.refetch(),a?.()}catch{t.danger(e.formatMessage({id:"Gmong7",defaultMessage:"Error disconnecting connector"}))}}}function pce(){const e=Ue(),t=Rt(),n=on(),r=ko(),s=Tn();return async(o,a,c)=>{try{await uce(o,c),s.invalidateQueries({queryKey:["fetchConnectorLinkData",n?.normalizedAccountUserId]}),await r.refetch(),a?.()}catch{t.danger(e.formatMessage({id:"Gmong7",defaultMessage:"Error disconnecting connector"}))}}}function M2e(){const e=on(),t=Ue(),n=Rt(),{refetch:r}=mu({skip:!0});return gn({mutationKey:["upgradeConnectorToSync"],mutationFn:({link:s,user_extension:i})=>e?.isPersonalAccount()?Oi.user_request_connect_upgrade_to_sync({link_id:s.id,user_extension:i}):Oi.user_activate_workspace_connection_and_user({link_id:s.id,user_extension:i}),onMutate:({link:s,isConnectingAndUpgrading:i=!1})=>{P.logEventWithStatsig("Connectors - Upgrade To Sync Initiated","chatgpt_connectors_upgrade_to_sync_initiated",{connector_id:s.connector_id,isConnectingAndUpgrading:i?"true":"false"})},onSuccess:(s,{link:i,isConnectingAndUpgrading:o=!1})=>{r(),n.success(o?t.formatMessage({id:"rfbIpd",defaultMessage:"{connector} is now connected and syncing."},{connector:i.name}):t.formatMessage({id:"yhtO5d",defaultMessage:"{connector} is now syncing."},{connector:i.name})),P.logEventWithStatsig("Connectors - Upgrade To Sync Success","chatgpt_connectors_upgrade_to_sync_success",{connector_id:i.connector_id,isConnectingAndUpgrading:o?"true":"false"})},onError:(s,{link:i,isConnectingAndUpgrading:o=!1})=>{if(o)n.warning(t.formatMessage({id:"wag12O",defaultMessage:"{connector} is now connected, but not syncing. Try enabling sync again."},{connector:i.name}));else{const a=s instanceof je&&s.status===409?t.formatMessage({id:"Tedt6I",defaultMessage:"Connector name already exists"}):t.formatMessage({id:"tumE6A",defaultMessage:"There was a problem syncing {connector}. Try again later."},{connector:i.name});n.danger(a,{toastId:"upgrade_connector_to_sync",loggingTitle:s instanceof je&&s.status===409?"Connector name already exists":"There was a problem syncing {connector}. Try again later."})}P.logEventWithStatsig("Connectors - Upgrade To Sync Error","chatgpt_connectors_upgrade_to_sync_error",{connector_id:i.connector_id,isConnectingAndUpgrading:o?"true":"false"})}})}function I2e(){const e=Ue(),t=Rt(),{refetch:n}=rC(),{refetch:r}=mu({skip:!0});return async i=>{try{await Oi.user_delete_sync(i),n(),r(),t.success(e.formatMessage({id:"Nktfkq",defaultMessage:"Successfully disabled sync."}))}catch{t.danger({defaultMessage:"Error disabling sync for your connector.",description:"Error message when disabling sync for a connector fails"},{toastId:"disable_sync_on_connector"})}}}function mce(){const t=on()?.isEnterprisey(),{availableConnectors:n}=j3(),r=fM()??!1;return t?n.length>0||r:!0}function N2e({platformConnectors:e,enabled:t}){const{isLoading:n,data:r}=gM(t),{disabledTools:s=[],...i}=r??{},o=Tn(),{isPending:a,mutate:c}=gn({mutationFn:async({data:y})=>await Wee(y),onSettled:(y,C)=>{const E=["userContext"];y!=null&&!C?o.setQueryData(E,y):o.invalidateQueries({queryKey:E})},onError:y=>(P.logEventWithStatsig("chatgpt_web_disable_auto_connectors_for_teams_error","chatgpt_web_disable_auto_connectors_for_teams_error",{errorMessage:y.message}),y)}),{allAutoConnectors:l,enabledAutoConnectors:u,isLoading:d}=vM({getDisabledAutoConnectors:t}),[f,h]=m.useState(!1),g=m.useMemo(()=>l.filter(y=>e.has(Vn[y])&&e.get(Vn[y])?.status==="DISABLED_BY_ADMIN"),[l,e]),{newDisabledTools:_,maybeNewEnabledTools:v}=m.useMemo(()=>{if(!t)return{newDisabledTools:[],maybeNewEnabledTools:[]};const y=[],C=[];return u.length>0&&u.forEach(E=>{g.includes(E)&&!s.includes($u(E)??"")&&y.push(E)}),g.length<l.length&&g.length<l.length&&l.forEach(E=>{!g.includes(E)&&s.includes(($u(E)??"").concat("_admin_disabled"))&&C.push(E)}),{newDisabledTools:y,maybeNewEnabledTools:C}},[t,u,s,l,g]);m.useEffect(()=>{if(!t||n||a||f||d||_.length===0&&v.length===0)return;const y=new Set(s);v.forEach(C=>{const E=$u(C);E&&(y.delete(E),y.delete(`${E}_admin_disabled`))}),_.forEach(C=>{const E=$u(C);E&&(y.add(E),y.add(`${E}_admin_disabled`))}),c({data:{disabledTools:Array.from(y),...i}}),h(!0)},[n,a,c,_,v,i,f,s,d,t])}function gce(){return $e({queryKey:["userIsInSearchHoldoutWithWebDisabled"],queryFn:()=>H.safeGet("/user_is_in_search_holdout_with_web_disabled",{authOption:ht.SendIfAvailable}),select:e=>({userIsInSearchHoldoutWithWebDisabled:e.user_is_in_search_holdout_with_web_disabled??!1})})}function _ce(){"use forget";const e=xe.c(3),t=Y(),n=Nt(t),r=!Ft(t),s=gce();if(r||n&&!n.isFree()){let a;return e[0]===Symbol.for("react.memo_cache_sentinel")?(a={userIsInSearchHoldoutWithWebDisabled:!1},e[0]=a):a=e[0],a}const i=s.isLoading?!1:s.data?.userIsInSearchHoldoutWithWebDisabled;let o;return e[1]!==i?(o={userIsInSearchHoldoutWithWebDisabled:i},e[1]=i,e[2]=o):o=e[2],o}const vce=e=>m.createElement("svg",{width:20,height:20,viewBox:"0 0 20 20",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",...e},m.createElement("path",{d:"M14.0857 8.74999C14.0857 5.80355 11.6972 3.41503 8.75073 3.41503C5.80429 3.41503 3.41577 5.80355 3.41577 8.74999C3.41577 11.6964 5.80429 14.085 8.75073 14.085C11.6972 14.085 14.0857 11.6964 14.0857 8.74999ZM15.4158 8.74999C15.4158 10.3539 14.848 11.8245 13.9041 12.9746L13.9705 13.0303L16.9705 16.0303L17.0564 16.1338C17.2269 16.3919 17.1977 16.7434 16.9705 16.9707C16.7432 17.1975 16.3925 17.226 16.1345 17.0557L16.03 16.9707L13.03 13.9707L12.9753 13.9033C11.8253 14.8472 10.3547 15.415 8.75073 15.415C5.06975 15.415 2.08569 12.431 2.08569 8.74999C2.08569 5.06901 5.06975 2.08495 8.75073 2.08495C12.4317 2.08495 15.4158 5.06901 15.4158 8.74999Z"}));function rN({className:e,inputClassName:t,value:n,onChange:r,onKeyDown:s,onFocus:i,onBlur:o,placeholder:a,id:c,autoFocus:l}){return p.jsxs("div",{className:ne("relative",e),children:[p.jsx(vce,{className:"icon-sm text-token-text-tertiary absolute start-2 top-1/2 -translate-y-1/2 transform"}),p.jsx("input",{id:c,type:"text",value:n,onKeyDown:s,onChange:r,onFocus:i,onBlur:o,placeholder:a,autoFocus:l,className:ne("rounded-lg border border-gray-200 ps-8 placeholder:text-gray-500 dark:border-gray-600 dark:bg-gray-700",t),autoComplete:"off"})]})}const yce=e=>m.createElement("svg",{width:24,height:24,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",...e},m.createElement("path",{d:"M9.50052 9.00046C9.71306 9.00069 9.89164 9.16037 9.91556 9.37156C10.0629 10.6708 10.7997 11.4662 12.1187 11.5835C12.3346 11.6026 12.5008 11.7837 12.5005 12.0005C12.5003 12.2172 12.3337 12.3978 12.1177 12.4165C10.8173 12.5292 10.0292 13.3173 9.91654 14.6177C9.89785 14.8336 9.71729 15.0002 9.50052 15.0005C9.28377 15.0007 9.10271 14.8345 9.08353 14.6186C8.96627 13.2996 8.17085 12.5628 6.87162 12.4155C6.66043 12.3916 6.50075 12.213 6.50052 12.0005C6.50031 11.7879 6.65949 11.6088 6.87064 11.5844C8.18858 11.4323 8.93237 10.6885 9.08451 9.37058C9.10886 9.15943 9.28798 9.00025 9.50052 9.00046Z",fill:"currentColor"}),m.createElement("path",{d:"M9.52591 2.56101C10.8927 1.19443 13.1083 1.19443 14.4751 2.56101L21.44 9.52585C22.8061 10.8927 22.8064 13.1084 21.44 14.4751L14.4751 21.4399C13.1085 22.8063 10.8927 22.806 9.52591 21.4399L2.56107 14.4751C1.19449 13.1083 1.19449 10.8926 2.56107 9.52585L9.52591 2.56101ZM13.0611 3.97507C12.4753 3.38954 11.5257 3.38954 10.94 3.97507L3.97513 10.9399C3.3896 11.5257 3.3896 12.4753 3.97513 13.061L10.94 20.0259C11.5258 20.6109 12.4755 20.6112 13.0611 20.0259L20.0259 13.061C20.6113 12.4754 20.611 11.5257 20.0259 10.9399L13.0611 3.97507Z",fill:"currentColor"})),$7=e=>m.createElement("svg",{width:16,height:16,viewBox:"0 0 16 16",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",...e},m.createElement("path",{d:"M8 7.33301C8.36819 7.33301 8.66699 7.63181 8.66699 8V10.667C8.66682 11.035 8.36808 11.333 8 11.333C7.63192 11.333 7.33318 11.035 7.33301 10.667V8C7.33301 7.63181 7.63181 7.33301 8 7.33301Z"}),m.createElement("path",{d:"M8 4.66699C8.42342 4.66699 8.7666 5.01018 8.7666 5.43359C8.76646 5.85689 8.42333 6.2002 8 6.2002C7.57667 6.20019 7.23354 5.85689 7.2334 5.43359C7.2334 5.01018 7.57658 4.66699 8 4.66699Z"}),m.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M8 1.33301C11.6819 1.33301 14.667 4.3181 14.667 8C14.667 11.6819 11.6819 14.667 8 14.667C4.3181 14.667 1.33301 11.6819 1.33301 8C1.33301 4.3181 4.3181 1.33301 8 1.33301ZM8 2.66699C5.05448 2.66699 2.66699 5.05448 2.66699 8C2.66699 10.9455 5.05448 13.333 8 13.333C10.9455 13.333 13.333 10.9455 13.333 8C13.333 5.05448 10.9455 2.66699 8 2.66699Z"})),Cce=e=>m.createElement("svg",{width:24,height:24,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",...e},m.createElement("path",{d:"M15.11 14.285a.41.41 0 0 1 .78 0c.51 2.865.96 3.315 3.825 3.826.38.12.38.658 0 .778-2.865.511-3.315.961-3.826 3.826a.408.408 0 0 1-.778 0c-.511-2.865-.961-3.315-3.826-3.826a.408.408 0 0 1 0-.778c2.865-.511 3.315-.961 3.826-3.826Zm2.457-12.968a.454.454 0 0 1 .866 0C19 4.5 19.5 5 22.683 5.567a.454.454 0 0 1 0 .866C19.5 7 19 7.5 18.433 10.683a.454.454 0 0 1-.866 0C17 7.5 16.5 7 13.317 6.433a.454.454 0 0 1 0-.866C16.5 5 17 4.5 17.567 1.317Z",fill:"currentColor"}),m.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M7.001 4a1 1 0 0 1 .993.887c.192 1.7.701 2.877 1.476 3.665.768.783 1.913 1.3 3.618 1.452a1 1 0 0 1-.002 1.992c-1.675.145-2.849.662-3.638 1.452-.79.79-1.307 1.963-1.452 3.638a1 1 0 0 1-1.992.003c-.152-1.706-.67-2.851-1.452-3.62-.788-.774-1.965-1.283-3.665-1.475a1 1 0 0 1-.002-1.987c1.73-.2 2.878-.709 3.646-1.476.767-.768 1.276-1.916 1.476-3.646A1 1 0 0 1 7 4Zm-2.472 6.998a6.11 6.11 0 0 1 2.468 2.412 6.232 6.232 0 0 1 1.037-1.376 6.232 6.232 0 0 1 1.376-1.036 6.114 6.114 0 0 1-2.412-2.469 6.163 6.163 0 0 1-1.053 1.416 6.163 6.163 0 0 1-1.416 1.053Z",fill:"currentColor"})),bce=e=>m.createElement("svg",{width:24,height:24,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",...e},m.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M12 7.42a22.323 22.323 0 0 0-2.453 2.127A22.323 22.323 0 0 0 7.42 12a22.32 22.32 0 0 0 2.127 2.453c.807.808 1.636 1.52 2.453 2.128a22.335 22.335 0 0 0 2.453-2.128A22.322 22.322 0 0 0 16.58 12a22.326 22.326 0 0 0-2.127-2.453A22.32 22.32 0 0 0 12 7.42Zm1.751-1.154a24.715 24.715 0 0 1 2.104 1.88 24.722 24.722 0 0 1 1.88 2.103c.316-.55.576-1.085.779-1.59.35-.878.507-1.625.503-2.206-.003-.574-.16-.913-.358-1.111-.199-.199-.537-.356-1.112-.36-.58-.003-1.328.153-2.205.504-.506.203-1.04.464-1.59.78Zm3.983 7.485a24.706 24.706 0 0 1-1.88 2.104 24.727 24.727 0 0 1-2.103 1.88 12.7 12.7 0 0 0 1.59.779c.878.35 1.625.507 2.206.503.574-.003.913-.16 1.111-.358.199-.199.356-.538.36-1.112.003-.58-.154-1.328-.504-2.205a12.688 12.688 0 0 0-.78-1.59ZM12 18.99c.89.57 1.768 1.03 2.605 1.364 1.026.41 2.036.652 2.955.646.925-.006 1.828-.267 2.5-.94.673-.672.934-1.575.94-2.5.006-.919-.236-1.929-.646-2.954A15.688 15.688 0 0 0 18.99 12a15.6 15.6 0 0 0 1.364-2.606c.41-1.025.652-2.035.646-2.954-.006-.925-.267-1.828-.94-2.5-.672-.673-1.575-.934-2.5-.94-.919-.006-1.929.235-2.954.646-.838.335-1.716.795-2.606 1.364a15.69 15.69 0 0 0-2.606-1.364C8.37 3.236 7.36 2.994 6.44 3c-.925.006-1.828.267-2.5.94-.673.672-.934 1.575-.94 2.5-.006.919.235 1.929.646 2.955A15.69 15.69 0 0 0 5.01 12c-.57.89-1.03 1.768-1.364 2.605-.41 1.026-.652 2.036-.646 2.955.006.925.267 1.828.94 2.5.672.673 1.575.934 2.5.94.92.006 1.93-.235 2.955-.646A15.697 15.697 0 0 0 12 18.99Zm-1.751-1.255a24.714 24.714 0 0 1-2.104-1.88 24.713 24.713 0 0 1-1.88-2.104c-.315.55-.576 1.085-.779 1.59-.35.878-.507 1.625-.503 2.206.003.574.16.913.359 1.111.198.199.537.356 1.111.36.58.003 1.328-.153 2.205-.504.506-.203 1.04-.463 1.59-.78Zm-3.983-7.486a24.727 24.727 0 0 1 1.88-2.104 24.724 24.724 0 0 1 2.103-1.88 12.696 12.696 0 0 0-1.59-.779c-.878-.35-1.625-.507-2.206-.503-.574.003-.913.16-1.111.359-.199.198-.356.537-.36 1.111-.003.58.153 1.328.504 2.205.203.506.464 1.04.78 1.59Z",fill:"currentColor"})),Sce=e=>m.createElement("svg",{width:20,height:20,viewBox:"0 0 20 20",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",...e},m.createElement("path",{d:"M16.0012 14.4404C16.0011 13.9504 15.8513 13.4739 15.5735 13.0742L15.4465 12.9082L15.012 12.3877C13.8614 12.8911 12.9152 13.1121 12.0618 13.1562C11.1474 13.2035 10.3804 13.0475 9.66528 12.8857C8.94197 12.7221 8.2815 12.5562 7.4729 12.5146C6.70029 12.475 5.77576 12.5504 4.5686 12.8887L4.55298 12.9082C4.19457 13.3383 3.9984 13.8806 3.99829 14.4404C3.99829 15.7627 5.07059 16.835 6.39282 16.835H13.6077C14.9298 16.8349 16.0012 15.7626 16.0012 14.4404ZM11.8352 3.16504H8.16528V7.72949C8.16528 8.20671 8.01876 8.6713 7.74829 9.06055L7.62427 9.22266L5.93384 11.25C6.52115 11.1756 7.05045 11.1614 7.54028 11.1865C8.48665 11.2351 9.26917 11.432 9.95825 11.5879C10.6556 11.7456 11.2718 11.8653 11.9924 11.8281C12.5791 11.7978 13.2616 11.6591 14.1213 11.3184L12.3752 9.22266C12.0261 8.80363 11.8352 8.27494 11.8352 7.72949V3.16504ZM13.1653 7.72949C13.1653 7.96372 13.2468 8.19111 13.3967 8.37109L16.468 12.0566L16.6653 12.3154C17.0974 12.9371 17.3312 13.6782 17.3313 14.4404C17.3313 16.4971 15.6643 18.1649 13.6077 18.165H6.39282C4.33605 18.165 2.66821 16.4972 2.66821 14.4404C2.66832 13.5694 2.97386 12.7258 3.53149 12.0566L6.60278 8.37109L6.65552 8.30176C6.77186 8.13447 6.83521 7.93464 6.83521 7.72949V3.16504H6.66626C6.29914 3.16486 6.00122 2.86716 6.00122 2.5C6.00122 2.13284 6.29914 1.83514 6.66626 1.83496H13.3333L13.467 1.84863C13.7702 1.91057 13.9983 2.17857 13.9983 2.5C13.9983 2.82143 13.7702 3.08943 13.467 3.15137L13.3333 3.16504H13.1653V7.72949Z"}));function wce(e){de.setCookie(ie.LastUsedModel,e,{path:"/",maxAge:60*60*24*30})}function R2e(){de.deleteCookie(ie.LastUsedModel)}function P2e(){return de.getCookie(ie.LastUsedModel)}function Ece({modelSwitcherDeny:e}){const t=Y(),r=Nt(t)?.isPro();switch(e.reason){case Xn.UNSUPPORTED_TOOL_USE:case Xn.UNSUPPORTED_AUDIO:case Xn.UNSUPPORTED_IMAGE:case Xn.UNSUPPORTED_GIZMO:case Xn.UNSUPPORTED_ATTACHMENT:case Xn.UNSUPPORTED_CUSTOM_INSTRUCTIONS:case Xn.UNSUPPORTED_CANVAS:case Xn.UNSUPPORTED_TEMPORARY_CHAT:return p.jsx(p.Fragment,{children:e.description});case Vy.RATE_LIMIT:{const{resetsAfter:i}=e,o=new Date(i),a=new Date(i).toLocaleTimeString([],{hour:"numeric",minute:"2-digit"});if(r)return p.jsx("div",{children:p.jsx(K,{id:"CwSQn9",defaultMessage:"Temporarily limited. Contact <supportEmail>support@openai.com</supportEmail> for help.",values:{supportEmail:c=>p.jsx(Vf,{to:"mailto:support@openai.com",className:"underline",children:c})}})});if(Wne(o))return p.jsx(K,{id:"HUybjA",defaultMessage:"Your limit will reset at {time}",values:{time:a}});if(Kne(o))return p.jsx(K,{id:"TvYw9K",defaultMessage:"Your limit will reset at {time} tomorrow",values:{time:a}});{const c=o.toLocaleDateString([],{month:"short",day:"numeric"});return p.jsx(K,{id:"60ZcZL",defaultMessage:"Your limit will reset on {date}",values:{date:c}})}}}const s=e.description;if(s)return p.jsx(p.Fragment,{children:s})}var cl=(e=>(e.GPT4o="AG8PqS2q",e.AUTO="auto",e))(cl||{});const D2e=e=>{const{categoryId:t}=e;return t==="auto"};function L2e(e){return e?.categories.some(({categoryId:t})=>t===cl.GPT4o)??!1}function sN(e,t){return t!=null?e?.get(t)??null:null}function xce(e=!1){const t=Y(),n=we(t,"1213809372"),r=we(t,"1854238036"),s=fr(),i=Fr(),[,o]=zf();return m.useCallback(({location:a,modelId:c,options:l,extraQueryParams:u=new URLSearchParams})=>{const d=s.pathname.includes("/g/"),f=s.pathname.startsWith("/g/g-p-");if(e||d&&!n&&!r&&!f){P.logNewChatButtonClicked({location:a}),u.toString();const h=new URLSearchParams(u);h.set("model",c),i({pathname:"/",search:"?"+h.toString()},l)}else o(h=>{const g=new URLSearchParams([...u,...h]);return g.set("model",c),g}),P.logNewChatButtonClicked({location:a})},[e,s,i,o,n,r])}function iN(e){const{clientThreadId:t,isGizmo:n=!1}=typeof e=="string"?{clientThreadId:e,isGizmo:!1}:e,{modelsData:r}=k2({isGizmo:n}),s=Hs(t,i=>i?.modelId);return sN(r?.models,s)??null}function Tce(e){const{clientThreadId:t,isGizmo:n=!1}=typeof e=="string"?{clientThreadId:e,isGizmo:!1}:e;return iN({clientThreadId:t,isGizmo:n})}function Oce(e,t){return e?.enabledTools?.includes(t)??!1}function kce(e){return sN(e?.models,e?.defaultModelSlug)}const F2e="g-2fkFE8rbu";var Ace=(e=>(e[e.USER=1]="USER",e[e.GROUP=2]="GROUP",e[e.WORKSPACE=3]="WORKSPACE",e[e.ALL=4]="ALL",e[e.PROJECT=5]="PROJECT",e[e.ORGANIZATION=6]="ORGANIZATION",e[e.SYSTEM=7]="SYSTEM",e[e.AGENT=8]="AGENT",e[e.EMAIL=10]="EMAIL",e))(Ace||{});const Mce={can_read:!0,can_view_config:!1,can_write:!1,can_delete:!1,can_export:!1,can_share:!1},j2e={can_read:!0,can_view_config:!0,can_write:!1,can_delete:!1,can_export:!1,can_share:!1},U2e={can_read:!0,can_view_config:!0,can_write:!0,can_delete:!1,can_export:!1,can_share:!1},Ln={Private:"private",User:"user",Group:"group",WorkspaceLink:"workspace_link",Workspace:"workspace",Link:"link",Marketplace:"marketplace"};var Ice=(e=>(e.FirstParty="first_party",e.UsesFunctionCalls="uses_function_calls",e.Reportable="reportable",e.Private="private",e.Workspace="workspace",e.Public="public",e.Beta="beta",e.Pinned="pinned",e.WorkspaceDisabled="workspace_disabled",e.Unreviewable="unreviewable",e))(Ice||{});const B2e=e=>e.gizmo.tags?.includes("first_party"),q2e=e=>!e.gizmo.tags?.includes("unreviewable");var sc=(e=>(e.PROJECT="snorlax",e.GPT="gpt",e))(sc||{}),oN=(e=>(e.FILE_SERVICE="fs",e))(oN||{});function G2e(e){return e.type===10||e.type===1||e.type===2}const W7=[1,2,3,4];function H2e(e){return e.length===0?null:e.reduce((t,n)=>W7.indexOf(n.type)<W7.indexOf(t.type)?t:n,e[0])}function V2e(e,t,n){return t=t.filter(r=>r.type===Ln.User||r.type===Ln.Group),e===Ln.Private||e===Ln.User||e===Ln.Group?[{type:Ln.Private,capabilities:Mce},...t]:[...t,{type:e,capabilities:n}]}class Nce{constructor(t){this.response=t}}var wa=(e=>(e.FirstParty="first_party",e.SidebarKeep="sidebar_keep",e.Mine="mine",e.Recent="recent",e.Workspace="workspace",e))(wa||{});const Rce="q",z2e="author";function sd(e,t){return t?`${Rf(Nf(t))}/c/${e}`:`/c/${e}`}function Nf(e){return e.gizmo.short_url??e.gizmo.id??"-"}function Rf(e){return`/g/${e}`}function $2e(){return"/gpts"}function W2e(){return"/schedules"}function K2e(){return"/gpts/mine"}function aN(e){return e?`/gpts/editor/${e}`:"/gpts/editor"}function Y2e(e){const t=Pce();return e==null?t:aN(e)}function Pce(e){return aN(e)}function Dce(e){if(!e)return null;try{return new URL(e).hostname}catch{return null}}function Z2e(e){const t=Dce(e);return t?t.replace(/^www\./,""):e}const up="client-correlated-secret";function K7(){const e=localStorage.getItem(up);return e==null?e:crypto.subtle.importKey("jwk",JSON.parse(e),{name:"HMAC",hash:{name:"SHA-512"}},!0,["sign","verify"])}async function cN(){K7()==null&&localStorage.setItem(up,JSON.stringify(await crypto.subtle.exportKey("jwk",await crypto.subtle.generateKey({name:"HMAC",hash:{name:"SHA-512"}},!0,["sign","verify"]))));const t=K7();if(t==null)throw new Error("Failed to get key from storage");return t}function Lce(e){const t=new Uint8Array(e.length/2);for(let n=0;n<t.length;n++)t[n]=parseInt(e.substr(n*2,2),16);return t.buffer}function Fce(e){return[...new Uint8Array(e)].map(t=>t.toString(16).padStart(2,"0")).join("")}function jce(e){const t=new URL(e),n=$e({queryKey:[up,"generate-challenge",e.search],queryFn:async()=>Fce(await crypto.subtle.sign("HMAC",await cN(),new TextEncoder().encode(e.search))),staleTime:0});if(n.data!==void 0)return t.hash=n.data,t}function J2e(){const e=location?.search,t=location?.hash;return $e({queryKey:[up,"verify-challenge",e,t],queryFn:async()=>typeof e!="string"||typeof t!="string"?!1:crypto.subtle.verify("HMAC",await cN(),Lce(t.slice(1)),new TextEncoder().encode(e))}).data?new URLSearchParams(e):void 0}class Tt{static getMyGizmos(){return De("gizmo_api.get_my_gizmos",()=>Ne.get(`${Ae}/gizmos?mine=true`))}static getGizmosByUser(t){return De("gizmo_api.get_gizmos_by_user",()=>Ne.get(`${Ae}/gizmos/u/${t}`))}static getGizmo(t,n){const r=n?"?draft=true":"";return De("gizmo_api.get_gizmo",()=>Ne.get(`${Ae}/gizmos/${t}${r}`))}static shareGizmo(t,n){return De("gizmo_api.share",()=>Ne.post(`${Ae}/gizmos/${t}/share`,n))}static getGizmoDiscovery(t,n){const r=new URLSearchParams;return t!=null&&r.set("locale",t),De("gizmo_api.discovery",()=>Ne.get(n?`${hd}/gizmos/discovery_anon?${r}`:`${hd}/gizmos/discovery?${r}`,{authOption:ht.SendIfAvailable}))}static async getGizmoDiscoveryCut(t,n){const r=i=>{const o={};i!=null&&(o.cursor=i),n?.limit!=null&&(o.limit=`${n.limit}`),n?.locale!=null&&(o.locale=n.locale);const a=`${hd}/gizmos/discovery/${t}`;return De("gizmo_api.discovery",()=>Ne.get(a,{params:o,authOption:ht.SendIfAvailable}))},s=await r(n?.cursor);return s.list.items.length===0&&s.list.cursor!=null?(await new Promise(i=>setTimeout(i,Math.random()*30)),await r(s.list.cursor)):s}static getGizmoBootstrap(t){return De("gizmo_api.bootstrap",()=>Ne.get(`${Ae}/gizmos/bootstrap?limit=${t}`))}static getGizmoPinned(){return De("gizmo_api.pinned",()=>Ne.get(`${Ae}/gizmos/pinned`))}static getGizmoSearch(t,n=null){return n?De("gizmo_api.search_with_cursor",()=>Ne.get(`${Ae}/gizmos/search?q=${t}&cursor=${n} `)):De("gizmo_api.search",()=>Ne.get(`${Ae}/gizmos/search?q=${t}`))}static getGizmoSearchForWorkspace(t,n=null){return n?De("gizmo_api.search_workspace_cursor",()=>Ne.get(`${Ae}/gizmos/search?q=${t}&workspace_only=true&cursor=${n}`)):De("gizmo_api.search_workspace",()=>Ne.get(`${Ae}/gizmos/search?q=${t}&workspace_only=true`))}static async postGizmoAppeal(t,n,r,s,i){await De("gizmo_api.appeal",()=>Ne.post(`${Ae}/gizmos/${n}/appeal`,{reason:r,share_recipient:s,categories:i})),await t.invalidateQueries({queryKey:["gizmo",{gizmoId:n}]})}static async postGizmoCancelAppeal(t,n){await De("gizmo_api.cancel_appeal",()=>Ne.post(`${Ae}/gizmos/${n}/cancel_appeal`,{})),await t.invalidateQueries({queryKey:["gizmo",{gizmoId:n}]})}static upsertDraft(t,n){return n!==void 0?De("gizmo_api.upsert_gizmo",()=>Ne.post(`${Ae}/gizmos?gizmo_id=${n}`,t)):De("gizmo_api.upsert_gizmo",()=>Ne.post(`${Ae}/gizmos`,t))}static promoteDraft(t,n){return De("gizmo_api.promote",()=>Ne.post(`${Ae}/gizmos/${n}/promote`,t))}static deleteGizmo(t){return De("gizmo_api.delete_gizmos",()=>H.safeDelete("/gizmos/{gizmo_id}",{parameters:{path:{gizmo_id:t}}}))}static getBuilderProfile(){return De("gizmo_api.gizmo_creator_profile",()=>Ne.get(`${Ae}/gizmo_creator_profile`))}static updateBuilderProfile(t){return De("gizmo_api.gizmo_creator_profile",()=>Ne.post(`${Ae}/gizmo_creator_profile`,t))}static unverifySocialAuth(t){return De("gizmo_api.delete_socials",()=>H.safeDelete("/gizmo_creator_profile/socials/{verifier_type}",{parameters:{path:{verifier_type:t}}}))}static async updateGizmoSidebar(t,n,r,s,i){const o=await De("gizmo_api.update_sidebar",()=>Ne.post(`${Ae}/gizmos/${r}/sidebar`,{action:s}));switch(s){case"keep":P.logEvent("Sidebar Gizmo Keep",{location:i}),n.handleGizmoSidebarKeep(t,r);break;case"hide":P.logEvent("Sidebar Gizmo Hide",{location:i}),n.handleGizmoSidebarHide(t,r);break}return o}static async removeFromRecent(t,n){const r=await De("gizmo_api.remove_recent",()=>Ne.post(`${Ae}/gizmos/${n}/remove_recent`,{}));return t.invalidateQueries({queryKey:["gizmos","bootstrap"]}),t.invalidateQueries({queryKey:["gizmos","discovery"]}),r}static fetchOpenAPISpec(t){return De("gizmo_api.fetch_openapi",()=>Ne.post(`${Ae}/gizmos/fetch_openapi`,{url:t}))}static validateOpenAPISpec(t){return De("gizmo_api.validate_openapi",()=>Ne.post(`${Ae}/gizmos/validate_openapi`,{raw_spec:t}))}static transformToOpenAPISpec(t,n){return De("gizmo_api.transform_openapi",()=>Ne.post(`${Ae}/gizmos/transform_openapi`,{...t,auth:n}))}static async doOAuthRedirect(t,n,r,s,i){const o=await De("gizmo_api.oauth_redirect",()=>Ne.post(`${Ae}/gizmos/oauth_redirect`,{gizmo_id:t,gizmo_action_id:n,domain:r,redirect_to:s,draft:i}));window.location.href=o.redirect_uri}static async upsertUserActionSettings(t,n,r){return De("gizmo_api.action_settings",()=>Ne.post(`${Ae}/gizmos/action_settings`,{gizmo_action_id:t,domain:n,action_settings:r}))}static async getUserActionSettings(t){return De("gizmo_api.user_action_settings",()=>Ne.get(`${Ae}/gizmos/user_action_settings?gizmo_id=${t}`))}static async generateCategory(t,n){return De("gizmo_api.gen_category",()=>Ne.post(`${Ae}/gizmos/gen_category`,{name:t,instructions:n}))}static async getConversations(t,n=null){return De("gizmo_api.conversations",()=>Ne.get(`${Ae}/gizmos/${t}/conversations`,{params:{...n?{cursor:n}:{}}}))}static async getProjectConversations(t,n=null){return De("gizmo_api.conversations",()=>Ne.get(`${Ae}/gizmos/${t}/conversations`,{params:{...n?{cursor:n}:{}}}))}static async getCategories(){return De("gizmo_api.categories",()=>Ne.get(`${Ae}/gizmos/categories`))}static async getUserReview(t){return De("gizmo_api.get_gizmo_reviews",()=>Ne.get(`${Ae}/gizmo_reviews/${t}`))}static async upsertUserReview(t,n,r,s){return De("gizmo_api.upsert_gizmo_reviews",()=>Ne.post(`${Ae}/gizmo_reviews/${t}`,{rating:n,message:r,include_from:s}))}static async sendFeedbackEmail(t,n,r){return De("gizmo_api.feedback",()=>Ne.post(`${Ae}/gizmos/${t}/feedback`,{message:n,include_from:r}))}static async getAbout(t){return De("gizmo_api.about",()=>Ne.get(`${Ae}/gizmos/${t}/about`))}static async getCreatorSlice({creatorId:t}){return De("gizmo_api.gizmo_creators",()=>Ne.get(`${Ae}/gizmo_creators/${t}/gizmos`))}static async getVersion({gizmoId:t,version:n}){return n==null?De("gizmo_api.latest_version",()=>Ne.get(`${Ae}/gizmos/${t}/version/latest`)):De("gizmo_api.version",()=>Ne.get(`${Ae}/gizmos/${t}/version/${n}`))}static async listVersions({gizmoId:t,limit:n,cursor:r}){const s={};return n&&(s.limit=n),r&&(s.cursor=r),De("gizmo_api.versions",()=>Ne.get(`${Ae}/gizmos/${t}/versions`,{params:s}))}static async copyGizmo({gizmoId:t}){return De("gizmo_api.copy",()=>Ne.post(`${Ae}/gizmos/${t}/copy`))}}async function De(e,t){return R.addAction(`${e}.start`),t().catch(n=>{throw R.addAction(`${e}.failure`,{error:n}),n})}async function Uce(){const e=await H.safeGet("/me",{authOption:ht.SendIfAvailable});return{id:e.id,email:e.email,name:e.name,picture:e.picture,created:e.created,phone_number:e.phone_number,first_name:e.first_name,email_domain_type:["government","professional","education","social","unknown"].includes(e.email_domain_type)?e.email_domain_type:"unknown"}}const Bce=ms({queryKey:["user"],queryFn:Uce,staleTime:1/0});function Q2e(){return $e(Bce).data}const qce={currentWorkspace:null,subscriptionStatus:null,workspaces:[]};function lN(e){const t=$e({...js(),select:n=>{const r=Mh(n);return{currentWorkspace:r?.data??null,subscriptionStatus:r?.data.subscriptionStatus??null,workspaces:n.accountItems.map(s=>s.data)}}}).data??qce;return e?e(t):t}const Gce={isBusinessWorkspace:({currentWorkspace:e})=>e!=null?e.structure===Rn.WORKSPACE:void 0,isEduPlan:({subscriptionStatus:e})=>wh(e?.planType),isEnterpriseyPlan:({subscriptionStatus:e})=>e!=null&&t2(e.planType),isTeamPlan:({subscriptionStatus:e})=>e?.planType===Re.TEAM,workspaceId:({currentWorkspace:e})=>e!=null?e.id:null,workspaces:({workspaces:e})=>e,accountUserId:({currentWorkspace:e})=>e?.accountUserId};function X2e(){return on()?.data.subscriptionStatus.lastActiveSubscription}function e3e(e){return e.email_domain_type==="professional"||e.email_domain_type==="government"||e.email_domain_type==="unknown"}const dC=e=>{const t=on(),n=t?.getWorkspaceId(),r=Are(),{data:s,isLoading:i}=Sh(n);if(!t?.isWorkspaceAccount())return{hasWorkspacePermission:!0,isLoading:!1};const o=s?.permissions?.includes(e)??!1;return{hasWorkspacePermission:r?o:!0,isLoading:i}},t3e=()=>{const e=on(),{hasWorkspacePermission:t,isLoading:n}=dC(Uo.CrudGPT);return{canCreate:e?.hasPaidFeatures()&&t,isLoading:n}};function n3e(e){const{hasWorkspacePermission:t,isLoading:n}=dC(Uo.CrudGPT);return{canDelete:(t&&e?.gizmo.current_user_permission?.can_delete)??!1,isLoading:n}}function r3e(e){const{hasWorkspacePermission:t,isLoading:n}=dC(Uo.CrudGPT);return{canEdit:(t&&e?.gizmo.current_user_permission?.can_write)??!1,isLoading:n}}function s3e(e){return{canViewConfig:e.gizmo.current_user_permission?.can_view_config??!1}}function Hce(e,t,n){const r=t?.name;switch(e){case Ln.Link:return n.formatMessage(id.privacyAnyoneWithLink);case Ln.Private:return n.formatMessage(id.privacyOnlyMe);case Ln.Group:case Ln.User:return n.formatMessage({id:"B9pJ5o",defaultMessage:"Invite only"});case Ln.Marketplace:return n.formatMessage(id.privacyMarketplace);case Ln.Workspace:return n.formatMessage(id.privacyWorkspace,{workspaceName:r});case Ln.WorkspaceLink:return n.formatMessage({id:"T5Eek0",defaultMessage:"Anyone at {workspaceName} with the link"},{workspaceName:r})}}function i3e(e){const t=Ue(),n=lN(r=>r.currentWorkspace);return Hce(e,n,t)}function Vce(e){return"gizmo"in e}function zce(e){return"id"in e}function o3e(e){return`${e.replaceAll(".","_").replaceAll("-","_")}__jit_plugin`}const id=ze({privacyOnlyMe:{id:"gizmo.privacyOnlyMe",defaultMessage:"Only me"},privacyAnyoneWithLink:{id:"gizmo.privacyAnyoneWithLink",defaultMessage:"Anyone with a link"},privacyWorkspace:{id:"gizmo.privacyWorkspace",defaultMessage:"Anyone at {workspaceName}"},privacyMarketplace:{id:"gizmo.privacyMarketplace",defaultMessage:"Everyone"}}),a3e="GPT Builder",$ce="gizmo-bootstrap",Wce=1;function c3e(e){if(e)return`ChatGPT - ${e}`}function l3e(e){returnwindow.location.origin+`${Rf(e)}`}function Kce(e,t){return we(e,"491279851")&&Bi(t.gizmo.id)?`${Rf(Nf(t))}/project`:Rf(Nf(t))}function u3e(e,t,n){const r=new URLSearchParams;return n!=null&&r.set(Rce,n),jce(new URL(`${Kce(e,t)}?${r}`,window.location.origin))}function d3e(e){return`/g/${Nf(e)}`}function f3e(e){return Vce(e)&&e.gizmo.live_version===0||zce(e)&&e.liveVersion===0}function h3e(e,t){return $e({queryKey:["gizmos","discovery",{locale:e,isAnon:t}],queryFn:async()=>Tt.getGizmoDiscovery(e,t)})}function p3e({cutId:e,locale:t,limit:n,cursor:r,enabled:s=!0}){return fy({queryKey:["gizmos","discovery",{cutId:e,locale:t,limit:n}],queryFn:async({pageParam:i})=>Tt.getGizmoDiscoveryCut(e,{locale:t,cursor:i,limit:n}),initialPageParam:r,getNextPageParam:i=>i.list.cursor??void 0,enabled:s})}const m3e=It(e=>ch(e,ms({queryKey:["gizmos","discovery",{cutId:"recent",limit:20}],queryFn:()=>Tt.getGizmoDiscoveryCut("recent",{limit:20}),enabled:Ft(e)}))),g3e=It(e=>ch(e,ms({queryKey:["gizmos","pinned"],enabled:Ft(e),queryFn:Tt.getGizmoPinned})));function po(e=2){return ms({queryKey:["gizmos","bootstrap"],experimental_prefetchInRender:!0,queryFn:async()=>Tt.getGizmoBootstrap(e).then(t=>(R.addFirstTiming("load.gizmoBootstrap"),{gizmos:Object.values(t).flat().filter(r=>r).filter(r=>r.resource.gizmo?.gizmo_type!==sc.PROJECT).map(r=>({resource:r.resource,flair:r.flair}))}))})}const _3e=It(e=>ch(e,po()));function v3e(){const e=po(2);return $e(e)}function y3e(){const e=po(2),t=O2($ce,Wce,e.queryKey);return NR({...e,initialData:t})}function Y7(e,t){const n=e.filter(s=>s.resource.gizmo.id!==t.resource.gizmo.id);let r=n.findIndex(s=>s.flair.kind===wa.Recent);return r===-1&&(r=n.length),n.splice(r,0,t),n}const C3e={handleGizmoInteracted(e,t){const n=e.getQueryData(Ao(e,t).queryKey);n==null||Bi(t)||e.setQueryData(po().queryKey,r=>{if(r==null)return r;const s=r.gizmos.find(i=>i.resource.gizmo.id===t);return s?.flair.kind===wa.FirstParty||s?.flair.kind===wa.SidebarKeep?r:{gizmos:Y7(r.gizmos,{resource:n,flair:{kind:wa.Recent}})}})},handleGizmoSidebarKeep(e,t){const n=e.getQueryData(Ao(e,t).queryKey);n!=null&&e.setQueryData(po().queryKey,r=>r==null?r:{gizmos:Y7(r.gizmos,{resource:n,flair:{kind:wa.SidebarKeep}})})},handleGizmoSidebarHide(e,t){e.setQueryData(po().queryKey,n=>n?.gizmos.some(r=>r.resource.gizmo.id===t)?{gizmos:n.gizmos.filter(r=>r.resource.gizmo.id!==t)}:n)}};function uN(e,t=!1){const n=Tn();return $e(Ao(n,e,t))}const b3e=({gizmoId:e,limit:t,cursor:n})=>$e({queryFn:async()=>Tt.listVersions({gizmoId:e}),queryKey:["gizmo","versions",{gizmoId:e,limit:t,cursor:n}]});function S3e({gizmoId:e,draft:t,version:n}){const r=Tn(),s=n?{queryKey:["gizmo","version",{gizmoId:e,version:n}],queryFn:async()=>Tt.getVersion({gizmoId:e,version:n}),enabled:e!=null}:Ao(r,e,t);return $e(s)}function w3e(e,t){return $e({queryKey:["gizmo","userActionSettings",{gizmoId:e}],queryFn:async()=>Tt.getUserActionSettings(e),enabled:e!=null&&t})}function Ao(e,t,n=!1){return ms({queryKey:["gizmo",{gizmoId:t},{draft:n}],queryFn:async()=>Tt.getGizmo(t,n),enabled:t!=null,initialData:()=>{if(n===!0)return;const r=e.getQueryData(po().queryKey);if(r!=null)return r.gizmos.find(i=>i.resource.gizmo.id===t)?.resource;const s=e.getQueryData(["gizmos","discovery"]);if(s!=null)for(const i of s.cuts){const o=i.list.items.find(a=>a.resource.gizmo.id===t)?.resource;if(o!=null)return o}}})}function Yce(e,t){return e.fetchQuery(Ao(e,t))}function E3e(e){return $e({queryKey:["gizmo",{search:e}],queryFn:async()=>Tt.getGizmoSearch(e),enabled:e.length>0})}function x3e(e,t){return $e({queryKey:["gizmo-search-workspace",{search:e}],queryFn:async()=>Tt.getGizmoSearchForWorkspace(e),enabled:e.length>0&&t})}function T3e(e,t=!1,n=!1,r=null){return fy({queryKey:[n?"gizmo-search-workspace":"gizmo",{query:e,cursor:r}],queryFn:async({pageParam:s})=>n?Tt.getGizmoSearchForWorkspace(e,r=s):Tt.getGizmoSearch(e,r=s),initialPageParam:r,getNextPageParam:s=>s.cursor??void 0,enabled:t})}function O3e(){const e=Tn();return gn({mutationFn:async({gizmoId:t,editorData:n})=>{const{instructions:r,name:s,description:i,emoji:o,theme:a,profilePictureId:c,profilePictureUrl:l,promptStarters:u,tools:d,files:f,defaultModel:h,trainingDisabled:g}=n,_={instructions:r,display:{name:s,description:i,emoji:o,theme:a,profile_pic_id:c,profile_picture_url:l,prompt_starters:u},tools:d,files:f.map(v=>({...v,location:oN.FILE_SERVICE})),training_disabled:g,default_model:h??void 0};return Tt.upsertDraft(_,t)},onSettled:t=>{t&&(e.setQueryData(Ao(e,t.gizmo.id,!0).queryKey,t),e.invalidateQueries({queryKey:["gizmos","mine"],refetchType:"none"}))}})}function k3e(){const e=Tn();return gn({mutationFn:async({gizmoId:t,data:n})=>{const{sharingRecipient:r,categories:s}=n,i=await Tt.promoteDraft({sharing:n.sharingSubjects&&n.sharingSubjects.length>0?n.sharingSubjects:{recipient:r},categories:s},t);if(i.error)throw new Nce(i);return i.resource},onSettled:t=>{e.invalidateQueries({queryKey:["gizmos"],refetchType:"all"}),e.invalidateQueries({queryKey:["gizmos","pinned"],refetchType:"none"}),t&&e.setQueryData(Ao(e,t.gizmo.id,!1).queryKey,t)}})}function A3e(){const e=Tn();return gn({mutationFn:async({gizmoId:t})=>Tt.deleteGizmo(t),onSettled:()=>{e.invalidateQueries({queryKey:["gizmos"],refetchType:"all"})}})}function M3e(){const e=Tn(),t=Rt();return gn({mutationFn:async({name:n,hideName:r,websiteUrl:s,willReceiveSupportEmails:i})=>Tt.updateBuilderProfile({name:n,hide_name:r,website_url:s,will_receive_support_emails:i}),onSuccess:n=>{e.setQueryData(["builderProfile"],n)},onError:n=>{t.warning(n.message)}})}function I3e(){return $e({queryKey:["builderProfile"],queryFn:async()=>Tt.getBuilderProfile()})}function N3e(){return gn({mutationFn:async({gizmoId:e})=>Tt.copyGizmo({gizmoId:e})})}function R3e(){return $e({queryKey:["gizmoCategories"],queryFn:async()=>Tt.getCategories()})}function P3e(e,t){const n=Y(),r=we(n,"2632917233");return!!(t!=null&&[St.PrimaryAssistant,St.GizmoInteraction].includes(t)&&(r||e?.includes(Gy.GPT_4)))}function D3e(e,t){const n=Tn(),r=Rt();return gn({mutationFn:async({rating:s,message:i,includeFrom:o})=>{await Tt.upsertUserReview(e,s,i,o)},onSuccess:async()=>{n.invalidateQueries({queryKey:["gizmo","review",{gizmoId:e}]})},onError:s=>{r.danger(s.message,{toastId:"gizmo_review_error",loggingTitle:"useUpsertUserReviewMutation",loggingDescription:s.message})}})}function Zce({clientThreadId:e}){const t=E2(),[n,r]=Hs(e,f=>[Z.getCurrentNode(f)?.message.metadata?.model_switcher_deny,Z.getGizmoId(f)]),s=r??t,{data:i}=uN(s),{data:o}=jH({isGizmo:!!s}),a=Ue(),c={},l=Y(),u=we(l,"891514942"),d=_U();for(const{resets_after:f,model_slug:h}of d)[Fc.CONVERSATION,Fc.REGENERATE].forEach(g=>{const _=c[h]??{},v=_[g]??[],y={reason:Vy.RATE_LIMIT,resetsAfter:f,isAvailable:!1};v.push(y),_[g]=v,c[h]=_});if(n?.forEach(f=>{const{slug:h,context:g,reason:_,description:v,is_available:y}=f,C=u&&y,E=c[h]??{},b=E[g]??[];b.push({reason:_,description:v,isAvailable:C}),E[g]=b,c[h]=E}),s&&Bi(s)){const f=[Jr.GIZMO_PROJECT];i?.files?.length&&f.push(Jr.ATTACHMENT),i?.gizmo.instructions.length&&f.push(Jr.CUSTOM_INSTRUCTIONS),o?.categories.forEach(h=>{const{defaultModel:g,supportedFeatures:_}=h,v=_||[],y=[];if(f.includes(Jr.GIZMO_PROJECT)&&!v.includes(Jr.GIZMO_PROJECT)&&y.push({reason:Xn.UNSUPPORTED_GIZMO,description:a.formatMessage({id:"6w0z4F",defaultMessage:"This model doesn't support projects."}),isAvailable:!1}),f.includes(Jr.ATTACHMENT)&&!v.includes(Jr.ATTACHMENT)&&y.push({reason:Xn.UNSUPPORTED_ATTACHMENT,description:a.formatMessage({id:"ZKjdak",defaultMessage:"This model doesn't support file attachments."}),isAvailable:!1}),f.includes(Jr.CUSTOM_INSTRUCTIONS)&&!v.includes(Jr.CUSTOM_INSTRUCTIONS)&&y.push({reason:Xn.UNSUPPORTED_CUSTOM_INSTRUCTIONS,description:a.formatMessage({id:"zaubcf",defaultMessage:"This model doesn't support custom instructions."}),isAvailable:!1}),y.length){const C=c[g]??{};[Fc.CONVERSATION,Fc.REGENERATE].forEach(E=>{const b=C[E]??[];b.push(...y),C[E]=b,c[g]=C})}})}return c}function Jce({modelSlug:e,modelSwitcherDenialsBySlug:t}){const n=e?t[e]?.conversation:null;return n?n.every(r=>r.isAvailable===!0):!0}function Qce({currentModel:e,categoryOptions:t,className:n,modelSwitcherDenialsBySlug:r,displayInFull_INTERNAL_USE_ONLY:s=!1,onModelItemClick:i,preferredModelId:o}){const a=Ue(),c=e?.id??null,[l,u]=m.useState(""),d=m.useMemo(()=>l?t.filter(f=>f.name.toLowerCase().includes(l.toLowerCase())):t,[t,l]);return p.jsx(Ye.Portal,{children:p.jsxs(Ye.SubContent,{className:ne("flex flex-col pt-0",n),children:[p.jsxs("div",{style:{borderRadius:"inherit"},className:"sticky top-0 z-1 bg-white",children:[p.jsx("div",{className:"p-2",children:p.jsx(rN,{inputClassName:"w-full",value:l,onKeyDown:f=>{f.stopPropagation()},onChange:f=>{u(f.target.value)}})}),p.jsx("hr",{})]}),p.jsxs("div",{className:"scrollbar-gutter-stable w-[min(320px,95vw)] flex-grow overflow-auto",children:[d.length===0&&p.jsx(Ye.Item,{children:a.formatMessage({id:"model-switcher.no-results",defaultMessage:"No results found"})}),d.map(f=>{const{value:h}=f;return"options"in f?p.jsx(ma,{currentModel:e,isSelected:c?.startsWith(h),option:f,modelSwitcherDenialsBySlug:r,displayInFull_INTERNAL_USE_ONLY:s,onModelItemClick:i,preferredModelId:o},h):p.jsx(Ea,{currentModelId:c,isSelected:c===h,value:h,modelSwitcherDenialsBySlug:r,displayInFull_INTERNAL_USE_ONLY:s,onClick:i,preferredModelId:o,children:f.name},h)})]})]})})}function ma({currentModel:e,option:t,isSelected:n=!1,modelSwitcherDenialsBySlug:r,displayInFull_INTERNAL_USE_ONLY:s=!1,onModelItemClick:i,preferredModelId:o}){const{name:a,options:c,categoryId:l}=t,u=`${a} Models`,d=()=>p.jsx("div",{className:"flex shrink-0 grow justify-between gap-2",children:p.jsxs("div",{className:"flex items-center gap-3",children:[p.jsx(Sce,{className:"icon"}),u]})});let f;return s&&n&&(f=t.options.find(h=>h.value===e?.id)?.name),p.jsxs(Ye.Sub,{children:[p.jsx(Ye.SubMenuTrigger,{children:p.jsxs("div",{className:ne("flex grow justify-between gap-2 overflow-hidden",s?"items-center break-all":""),children:[l?d():a,n&&p.jsx("div",{className:"text-token-text-tertiary truncate",children:f??e?.title})]})}),p.jsx(Qce,{currentModel:e,categoryOptions:c,modelSwitcherDenialsBySlug:r,displayInFull_INTERNAL_USE_ONLY:s,onModelItemClick:i,preferredModelId:o})]})}function Ea({value:e,children:t,icon:n,secondary:r,currentModelId:s,isSelected:i,onClick:o,modelSwitcherDenialsBySlug:a,isUpgradeUpsell:c=!1,testId:l,displayInFull_INTERNAL_USE_ONLY:u=!1,deprecated:d,preferredModelId:f,disabledByAdmin:h}){const g=Y(),_=xce(),v=e?a[e]?.conversation?.[0]:null,y=Jce({modelSlug:e,modelSwitcherDenialsBySlug:a}),C=h||!y,E=gt(g,"1846737571"),b=()=>{if(o)o(e);else if(e){P.logEvent("Model Switcher Model Changed",{from:s,to:e}),Fe.logEvent("chatgpt_model_switcher_model_changed",e,{from:s??"",to:e});const w=e;wce(w),_({modelId:w,location:"Model switcher menu item"})}},S=p.jsx(Ye.Item,{onClick:b,disabled:C,className:ne(u&&"break-all"),icon:n,secondary:r,trailingColor:"primary",trailing:c?p.jsx(Ct,{color:"secondary",size:"small",className:E.get("is_upgrade_button_blue",!1)?"border-none bg-blue-600 text-white hover:bg-blue-800":"",children:p.jsx(K,{id:"oKo8wt",defaultMessage:"Upgrade"})}):i?p.jsx(q3,{className:"icon-sm"}):p.jsx("span",{className:"icon"}),"data-testid":l,children:p.jsxs("span",{className:"flex items-center gap-1",children:[t,e&&e===f&&!i&&!c&&!d&&p.jsx("span",{className:"inline-flex items-center rounded-full bg-blue-100 px-2 py-0.5 text-xs font-medium text-blue-700",children:p.jsx(K,{id:"model-switcher.preferred",defaultMessage:"GPT creator recommended"})})]})},e);return v?p.jsx(Yn,{withArrow:!0,side:"right",sideOffset:-10,label:p.jsx(Ece,{modelSwitcherDeny:v}),children:S}):S}function Xce(e,t){switch(t){case"gpt-4o":return Zn(e).checkGate("1627380539");default:return!1}}function ele(e){return qv(new URL(e,window.location.origin).searchParams).includes(X.Search)}var tle=(e=>(e.DownloadMessages="download-messages",e.InviteUsersToWorkspace="invite-users-to-workspace",e.WorkspaceAppearance="workspace-appearance",e.KeyboardActions="keyboard-actions",e.WorkspaceSwitcher="workspace-switcher",e.ReadOnlyConversationTemplate="read-only-conversation-template",e.CookieManagement="cookie-management",e.AgeVerificationInterstitial="age-verification-interstitial",e.GPTDetails="gpt-details",e.GPTPrivacySettings="gpt-privacy-settings",e.GPTFeedbackEmail="gpt-support-email",e.GPTReview="gpt-review",e.GPTRemoveThirdParty="gpt-remove-third-party",e.SharedConversationModeration="shared-conversation-moderation",e.ReportConversation="report-conversation",e.BlockingInitialComponent="blocking-initial-component",e.NoAuthNewChat="no-auth-new-chat",e.GlobalMemoryOnboarding="global-memory-onboarding",e.AccountPayment="account-payment",e.CreateExclusion="create-exclusion",e.AddServiceAccountKey="add-service-account-key",e.DeleteServiceAccountKey="delete-service-account-key",e.LogoutConfirm="logout-confirm",e.NotificationFeed="notification-feed",e.DeepResearchShare="deep-research-share",e))(tle||{});function nle({isOpen:e}){de.setCookie(ie.NavigationState,e?"1":"0",{maxAge:2*365*24*60*60})}const Be=vt()(()=>({isThreadHeaderVisible:!0,isSlideoverSidebarOpen:void 0,isPopoverSidebarOpen:!1,isVoiceActive:!1,isConversationScrolledFromTop:!1,sharingModalThreadId:void 0,deepResearchShareTaskId:void 0,feedbackModalThreadId:void 0,leaveWorkspaceData:null,activeSidebar:!1,activeStageSidebar:!1,activeModals:new Set,isLatencyDevToolsVisible:!1,purchaseWorkspaceData:null,browseMode:"conversation",voiceFeedbackThread:null,lastVoiceSessionStartTime:null,lastVoiceSessionEndTime:null,displayAnnouncementTooltip:null,noAuthMadlibsModalOpen:!1,onboardingConvoState:null,autoHighlightNicknameInput:!1,shouldShowThreadModelPickerDot:!1})),L3e={isLatencyDevtoolsVisible:e=>e.isLatencyDevToolsVisible},ll={setBrowseMode:e=>{Be.setState(t=>({...t,browseMode:e}))},setIsConversationScrolledFromTop:e=>{Be.setState(t=>({...t,isConversationScrolledFromTop:e}))},enterGizmoEditor:()=>{Be.setState({browseMode:"gizmo-editor"})},exitGizmoEditor:()=>{Be.setState({browseMode:"conversation"})},setAutoHighlightNicknameInput:e=>{Be.setState({autoHighlightNicknameInput:e})},setSidebarOpen(e){rle()?ll.setPopoverSidebarOpen(e):ll.setSlideoverSidebarOpen(e)},setPopoverSidebarOpen:e=>{Be.setState(({isPopoverSidebarOpen:t})=>({isPopoverSidebarOpen:e??!t}))},setSlideoverSidebarOpen:e=>{Be.setState(({isSlideoverSidebarOpen:t})=>{const n=e??!(t??dN());return nle({isOpen:n}),P.logToggleDesktopNavCollapsed({isDesktopNavCollapsed:!n,action:"button_click"}),{isSlideoverSidebarOpen:n}}),fN=!1},hideThreadHeader:()=>{Be.setState({isThreadHeaderVisible:!1})},showThreadHeader:()=>{Be.setState({isThreadHeaderVisible:!0})},openSharingModal(e,t){Be.setState({sharingModalThreadId:e}),P.logEvent("Share Conversation: Open Modal",{location:t})},closeSharingModal(){Be.setState({sharingModalThreadId:void 0})},openFeedbackModal(e){Be.setState({feedbackModalThreadId:e})},closeFeedbackModal(){Be.setState({feedbackModalThreadId:void 0})},setLeaveWorkspaceData(e){Be.setState({leaveWorkspaceData:e})},setPurchaseWorkspaceData(e){Be.setState({purchaseWorkspaceData:e})},setActiveSidebar(e){Be.setState({activeSidebar:e})},setThreadModelPickerAlertDot:e=>{Be.setState(({shouldShowThreadModelPickerDot:t})=>(t!==e&&P.logEvent("Notifications: Thread Model Picker Alert Dot",{shown:e}),{shouldShowThreadModelPickerDot:e}))},toggleActiveSidebar(e){Be.setState(t=>({activeSidebar:t.activeSidebar===e?!1:e}))},closeActiveSidebar(){Be.setState(()=>({activeSidebar:!1}))},setActiveStageSidebar(e){Be.setState({activeStageSidebar:e})},toggleModal(e){Be.setState(t=>{const n=new Set(t.activeModals);return n.has(e)?n.delete(e):n.add(e),{activeModals:n}})},openModal(e){Be.setState(t=>{if(t.activeModals.has(e))return t;const n=new Set(t.activeModals);return n.add(e),{activeModals:n}})},closeModal(e){Be.setState(t=>{if(!t.activeModals.has(e))return t;const n=new Set(t.activeModals);return n.delete(e),{activeModals:n}})},openDeepResearchShare(e){Be.setState(t=>({...t,deepResearchShareTaskId:e})),ll.openModal("deep-research-share")},closeAllActiveModals(){Be.getState().activeModals.size>0&&Be.setState({activeModals:new Set})},hideLatencyDevTools:()=>{Be.setState({isLatencyDevToolsVisible:!1})},showLatencyDevTools:()=>{Be.setState({isLatencyDevToolsVisible:!0})},showAnnouncementTooltipExclusively(e,t=!1){Be.setState(n=>n.displayAnnouncementTooltip&&!t?n:{displayAnnouncementTooltip:e})},setNoAuthMadlibsModalOpen:e=>{Be.setState({noAuthMadlibsModalOpen:e}),_t.setItem(Qe.NoAuthMadlibsModalState,"seen")},setOnboardingConvoState:e=>{Be.setState({onboardingConvoState:e})}};function F3e(e){return Be(t=>t.activeModals.has(e))}function dN(){if(fN)return!1;const e=de.getCookie(ie.NavigationState);return e!=null?e==="1":!0}let fN=ele(window.location.href);function rle(){const e=Be.getState().activeStageSidebar,t=Gq();return e||!t}function sle(){const e=Be(n=>n.activeStageSidebar),t=zx();return e||!t}function j3e(){const e=Y(),t=sle(),n=Be(r=>r.isSlideoverSidebarOpen);return Ft(e)&&!t&&(n??dN())}function U3e(){return Be(e=>e.activeModals.has("blocking-initial-component"))}function B3e(){const[e,t]=m.useState(!1);return m.useEffect(()=>Be.subscribe(n=>{n.activeModals.has("blocking-initial-component")&&t(r=>r||n.activeModals.has("blocking-initial-component"))}),[]),e}const q3e=(e,t,n,r)=>{const s=we(e,"2861925050"),i=n?.some(({model_slug:o})=>r?.models.get(o));return!(!s||!i||!t||!t.isTeam())},hN=()=>{const e=_t.getItem(Qe.FinchAdminNotified);return new Date(e??0)},ile=()=>{const e=new Date;e.setDate(e.getDate()+1),_t.setItem(Qe.FinchAdminNotified,e.toISOString())},ole=()=>{const e=hN();return _t.getItem(Qe.FinchAdminNotified)!=null&&new Date<=e},G3e=()=>{const e=hN();return new Date>e},H3e=e=>{switch(e){case"wham":return"wham";case"deep_research":return"deep_research";case"image_gen":return"image_gen";case"gpt-4-5":return"gpt-4-5";default:return null}},ale=vt(e=>({hasRequestedCredits:ole(),setHasRequestedCredits:t=>e(()=>({hasRequestedCredits:t}))})),cle=Zh(()=>$(()=>import("./basyx65cczg0r3w4.js"),__vite__mapDeps([12,1,13,14,5,6,15,16])).then(e=>e.CreditPurchaseModal)),lle=()=>{const e=Rt(),t=Ue(),{hasRequestedCredits:n,setHasRequestedCredits:r}=ale(),{mutate:s,isPending:i}=gn({mutationFn:o=>H.safePost("/credits/pleas",{requestBody:{product:o}}),onError:o=>{R.addError(new Error("Error occurred while submitting credit plea request",{cause:o})),e.danger(Da.errorRequestCredits,{toastId:"teams_credit_plea_button"})},onSuccess:()=>{r(!0),e.success(t.formatMessage(Da.successRequestCredits)),ile(),ll.setThreadModelPickerAlertDot(!1)}});return{submitCreditPleaRequest:s,hasRequestedCredits:n,isPending:i}},ule=({trigger:e,...t})=>{const n=Y();m.useEffect(()=>{P.logEventWithStatsig("ChatGPT Credits: Add Credits Button Shown","chatgpt_credits_add_credits_button_shown",{trigger:e})},[e]);const r=()=>{P.logEventWithStatsig("ChatGPT Credits: Add Credits Clicked","chatgpt_credits_add_credits_clicked"),M2(n,cle)};return p.jsx(Ct,{color:"primary",onClick:r,...t,children:p.jsx(K,{...Da.addCredits})})},dle=({creditConsumingProduct:e,trigger:t,...n})=>{const r=Ue(),{submitCreditPleaRequest:s,isPending:i,hasRequestedCredits:o}=lle();m.useEffect(()=>{P.logEventWithStatsig("ChatGPT Credits: Notify Admin Button Shown","chatgpt_credits_notify_admin_button_shown",{trigger:t,creditConsumingProduct:e})},[e,t]);const a=()=>{o||(s(e),P.logEventWithStatsig("ChatGPT Credits: Notify Admin Clicked","chatgpt_credits_notify_admin_clicked"))},c=p.jsx(Ct,{loading:i,color:o?"secondary":"primary",disabled:o,onClick:a,...n,children:o?r.formatMessage(Da.requested):r.formatMessage(Da.notifyAdmin)});return o?p.jsx(Yn,{className:"w-auto whitespace-nowrap",withArrow:!0,labelTextAlign:"left",contentClassName:"w-[180px]",side:"right",label:r.formatMessage(Da.alreadyRequested),children:c}):c},Da=ze({notifyAdmin:{id:"prompt-textarea.teamsCreditRequestBanner.notifyAdmin",defaultMessage:"Notify admin"},addCredits:{id:"prompt-textarea.teamsCreditRequestBanner.addCredits",defaultMessage:"Add credits"},requested:{id:"prompt-textarea.teamsCreditRequestBanner.requested",defaultMessage:"Requested"},errorRequestCredits:{id:"prompt-textarea.teamsCreditRequestBanner.error",defaultMessage:"Error occurred while submitting credit request"},successRequestCredits:{id:"prompt-textarea.teamsCreditRequestBanner.success",defaultMessage:"Request sent to your admin"},alreadyRequested:{id:"prompt-textarea.teamsCreditRequestBanner.alreadyRequested",defaultMessage:"You’ve already notified your admin"}}),Z7="needsCreditsSection",fle=()=>{const t=on()?.isOwnerOfAccount();return p.jsxs(Ye.Item,{className:"pointer-events-none pe-2.5! hover:bg-transparent hover:text-inherit",onSelect:n=>n.preventDefault(),disabled:!0,children:[p.jsx("div",{className:"text-token-text-tertiary text-xs",children:p.jsx(K,{...t?J7.ownerDescription:J7.description})}),t?p.jsx(ule,{size:"small",trigger:"thread-header-dropdown-credits-section"}):p.jsx(dle,{size:"small",creditConsumingProduct:"gpt-4-5",trigger:"thread-header-dropdown-credits-section"})]})},J7=ze({description:{id:"prompt-textarea.teamsCreditRequestBanner.label",defaultMessage:"Limits reached. Send a request to your admin to get access"},ownerDescription:{id:"prompt-textarea.teamsCreditRequestBanner.ownerLabel",defaultMessage:"Limits reached. Add credits to your account"}}),hle="{{.assetPrefix}}/assets/no-auth-upsell-m8ypcpwf.webp",ple={src:hle};function mle(){const e=Y();return gt(e,"3637408529").get("is_login_primary_button",!1)}const gle=()=>{const e=Y();return gt(e,"1346366956").get("signup_cta_copy","SIGN_UP")},_le=()=>{const e=Y();return gt(e,"1803944755").get("login_or_signup_cta_copy","LOGIN_OR_SIGNUP")},V3e=()=>{switch(_le()){case"LOGIN_OR_SIGNUP":return Q7.loginOrSignup;case"SIGNIN":return Q7.signin}},vle=e=>{switch(gle()){case"SIGN_UP":return e;case"SIGN_UP_FOR_FREE":return od.signUpForFreeCta;case"CREATE_ACCOUNT":return od.createAccountCta;case"CREATE_NEW_ACCOUNT":return od.createNewAccountCta;case"CREATE_FREE_ACCOUNT":return od.createFreeAccountCta}},Q7=ze({loginOrSignup:{id:"loginOrSignupCta.loginOrSignup",defaultMessage:"Log in or sign up"},signin:{id:"loginOrSignupCta.signin",defaultMessage:"Sign in"}}),od=ze({createAccountCta:{id:"createAccountCta",defaultMessage:"Create account"},createNewAccountCta:{id:"createNewAccountCta",defaultMessage:"Create new account"},createFreeAccountCta:{id:"createFreeAccountCta",defaultMessage:"Create free account"},signUpForFreeCta:{id:"signUpForFreeCta",defaultMessage:"Sign up for free"}});function yle({statsig_login_event:e,statsig_signup_event:t,location:n,containerNoPadding:r=!1}){const s=Y(),i=mle(),o=vle(X7.signUpCta),a=`no-auth-${n}`,c=Fr(),l=$f(s,"2210309751").get("variant","control"),u=()=>{c({hash:mk,search:window.location.search},{state:{[gk]:"NoAuth Model Picker Upsell"}})},d=()=>{Wa(s,{authType:"login",callback:_=>{P.logLogInButtonClicked({location:a,provider:_}),Fe.logEvent(e)}})},f=()=>{Wa(s,{authType:"signup",callback:_=>{P.logSignUpButtonClicked({location:a,provider:_}),Fe.logEvent(t)}})},h=p.jsx(Ct,{as:"button",size:"medium",color:i?"primary":"secondary",onClick:d,children:p.jsx(K,{id:"NavigationContent.unauthLoginCta",defaultMessage:"Log in"})},"login-button"),g=p.jsx(Ct,{as:"button",size:"medium",color:i?"secondary":"primary",onClick:f,children:p.jsx(K,{...o})},"signup-button");return p.jsxs("div",{className:ne("flex flex-col",r?"xs:-mt-4 max-w-xs":"-mt-4 max-w-[calc(100vw-2rem)]"),children:[p.jsx("img",{className:"max-xs:hidden h-[132px] object-fill",src:ple.src,alt:""}),p.jsxs("div",{className:"flex flex-col p-5",children:[p.jsx("p",{className:"text-token-text-primary mb-1 text-lg font-medium text-pretty",children:p.jsx(K,{id:"rwmTbn",defaultMessage:"Try advanced features for free"})}),p.jsx("p",{className:"text-token-text-secondary text-sm text-pretty",children:p.jsx(K,{id:"unOBJo",defaultMessage:"Get smarter responses, upload files, create images, and more by logging in."})}),p.jsx("div",{className:"mt-5 flex flex-row justify-start space-x-2",children:i?[h,g]:[g,h]}),l==="model-picker"&&p.jsx("p",{className:"text-token-text-secondary mt-5 text-xs",children:p.jsx(K,{...X7.createWorkspaceTeamOrBusiness,values:{createWorkspaceLink:_=>p.jsx("span",{onClick:u,className:"text-token-text-secondary decoration-token-text-primary cursor-pointer underline",children:_})}})})]})]})}const X7=ze({signUpCta:{id:"NavigationContent.unauthSignupCta",defaultMessage:"Sign up"},createWorkspaceTeamOrBusiness:{id:"components.noAuthUpsell.createWorkspaceTeamOrBusiness",defaultMessage:"<createWorkspaceLink>Create a workspace</createWorkspaceLink> for a team or business"}}),Cle="gpt-4",ble="oai/apps/capExpiresAt";vt(()=>({serverThreadIds:new Set}));function Sle(){const e=dp(s=>s.isoDate),t=Date.now(),n=e&&new Date(e).getTime(),r=e&&n&&n<=t;return m.useEffect(()=>{r&&pN()},[r]),r?null:e?Cle:null}const dp=vt()(xk(()=>({isoDate:""}),{name:ble}));function wle(e){dp.setState({isoDate:e})}function pN(){dp.setState({isoDate:""})}function z3e(e){return e.map(t=>typeof t=="string"?t:"").join("")}function Ele(e,t){const n=[];let r=0;for(let s=0;s<e.length;s++){const i=e[s];if(typeof i=="string")if(t!=null&&t<r+i.length){n.push({type:"text",text:i.slice(0,t-r)});break}else n.push({type:"text",text:i}),r+=i.length;else if(i.content_type===Qt.ImageAssetPointer){const o=s>0?n[s-1]:null;o?.type==="images"?o.imageAssets.push(i):n.push({type:"images",imageAssets:[i]})}else i.content_type===Qt.AudioTranscription&&n.push({type:"transcription",text:i.text})}return n}function $3e({isUserTurn:e,parts:t}){if(!e)return Ele(t);const n={text:[],images:[]};for(let s=0;s<t.length;s++){const i=t[s];typeof i=="string"?i.trim().length>0&&n.text.push({type:"text",text:i}):i.content_type===Qt.AudioTranscription?n.text.push({type:"transcription",text:i.text}):i.content_type===Qt.ImageAssetPointer&&n.images.push(i)}const r=[];return n.images.length>0&&r.unshift({type:"images",imageAssets:n.images}),r.push(...n.text.map(s=>({type:s.type,text:s.text}))),r}function xle(e){const t=e&&new Date(e),n=t&&new Date(t);return n?`after ${n.getHours()%12||12}:${n.getMinutes()<10?"0":""}${n.getMinutes()} ${n.getHours()>=12?"PM":"AM"}`:"later"}function Tle(e){if(e<60)return{type:"minute",value:e,text:e<2?"minute":`${e} minutes`};const t=Math.floor(e/60);if(t<24)return{type:"hour",value:t,text:t<2?"hour":`${t} hours`};const n=Math.floor(t/24);return n<7?{type:"day",value:n,text:n<2?"day":`${n} days`}:{type:"minute",value:e,text:e<2?"minute":`${e} minutes`}}const J0={textarea:"","model-switcher":""};function Ole(){const e=dp(a=>a.isoDate),t=xle(e),n=Ue(),r=lN(Gce.isEnterpriseyPlan),{isUnauthenticated:s,isLoading:i}=nu(),{data:o}=$e({queryKey:["modelMessageCap",s],queryFn:()=>nB.safeGet("/conversation_limit",{authOption:ht.SendIfAvailable}),enabled:!i});return m.useMemo(()=>{const a=o?.message_cap??0,c=o?.message_cap_window??1,{text:l,type:u,value:d}=Tle(c),f=o?.message_disclaimer??J0;if(!l||r)return{textareaDisclaimer:f.textarea,modelSwitcherDisclaimer:f["model-switcher"],modelSwitcherLimitShort:""};if(!o||!c||!a)return{textareaDisclaimer:J0.textarea,modelSwitcherDisclaimer:J0["model-switcher"],modelSwitcherLimitShort:""};let h=n.formatMessage(Q0.shortLimitMinutes,{numerator:a,denominator:d});switch(u){case"hour":h=n.formatMessage(Q0.shortLimitHours,{numerator:a,denominator:d});break;case"day":h=n.formatMessage(Q0.shortLimitDays,{numerator:a,denominator:d});break}return{textareaDisclaimer:f.textarea.replaceAll("%FORMATTED_TIME%",t).replaceAll("%NUMERATOR%",`${a}`).replaceAll("%DENOMINATOR%",l),modelSwitcherDisclaimer:f["model-switcher"].replaceAll("%FORMATTED_TIME%",t).replaceAll("%NUMERATOR%",`${a}`).replaceAll("%DENOMINATOR%",l),modelSwitcherLimitShort:h}},[o,t,n,r])}const Q0=ze({shortLimitMinutes:{id:"modelCapMessaging.shortLimitMinutes",defaultMessage:"Limit {numerator, plural, =0 {# message} one {# message} other {# messages}} / {denominator, plural, =0 {# minute} one {# minute} other {# minutes}}"},shortLimitHours:{id:"modelCapMessaging.shortLimitHours",defaultMessage:"Limit {numerator, plural, =0 {# message} one {# message} other {# messages}} / {denominator, plural, =0 {# hour} one {# hour} other {# hours}}"},shortLimitDays:{id:"modelCapMessaging.shortLimitDays",defaultMessage:"Limit {numerator, plural, =0 {# message} one {# message} other {# messages}} / {denominator, plural, =0 {# day} one {# day} other {# days}}"}});var Cs=(e=>(e.ALPHA="alpha",e.DATA_CAMPAIGNS="data_campaigns",e.EXPERIMENTS="experiments",e.MAINLINE="mainline",e))(Cs||{});const eE={code_interpreter_model:{name:"Advanced Data Analysis"},dalle_model:{name:"DALL·E 3"}},kle=e=>pM(e,({id:t})=>t.split(":").slice(0,1).join(":"));function W3e(){const e=E2(),{modelsData:t}=k2({isGizmo:!!e}),n=Sle(),{modelSwitcherDisclaimer:r}=Ole();return m.useMemo(()=>{const s=[];if(!t)return s;const{categories:i,groups:o,models:a}=t;for(const c of i){const{defaultModel:l,categoryId:u,label:d}=c,f=a.get(l);if(f){const h=n===l,g=h?[]:Ale(c,a);s.push({categoryId:u,value:l,name:d,description:h?r:f.description,options:[ul(f,{name:"Default"}),...g]})}}for(const c of o){const{group:l,label:u,modelIds:d}=c,f=d[0],h=[];for(const g of d){const _=a.get(g);_&&!_.tags.includes(Gy.HIDDEN)&&h.push(_)}if(l==="experiments"){const g=kle(h),_=Object.entries(g).map(([v,y])=>{const C=v.split(":").slice(-1)[0];return{key:v,value:C,name:C,options:y.map(E=>{const{title:b}=E;return ul({...E,title:b.replace(C,"")})})}});s.push({categoryId:l,value:f,name:u,options:_})}else s.push({categoryId:l,value:f,name:u,options:h.map(g=>ul(g))})}return s},[t,n,r])}function ul(e,t={}){return{value:e.id,name:e.title,...t}}function Ale(e,t){const n=[],r=e.code_interpreter_model!=null&&t.get(e.code_interpreter_model);if(r){const i=eE.code_interpreter_model;n.push(ul(r,{name:i.name}))}const s=e.dalle_model!=null&&t.get(e.dalle_model);if(s){const i=eE.dalle_model;n.push(ul(s,{name:i.name}))}return n}function tE(e,t){let n=e;if(e===q_.AUTO){const i=t?.categories.filter(({defaultModel:o})=>o!==q_.AUTO);i?.length===1&&(n=i[0].defaultModel)}const r=t?.categories.find(({defaultModel:i,supportedModels:o})=>i===n||n&&o?.includes(n));if(r){const{categoryId:i}=r;return{selectedCategory:i,modelLabel:r.shortLabel,fullModelLabel:r.label}}const s=t?.groups.find(({modelIds:i})=>n&&i.includes(n));if(s){const{group:i,shortLabel:o,label:a}=s;return{selectedCategory:i,modelLabel:o,fullModelLabel:a}}return{selectedCategory:null,modelLabel:null,fullModelLabel:null}}function Mle(e,t,n,r){const s=t?e.formatMessage(Yv.beta):n?e.formatMessage(Yv.alpha):r;if(s)return p.jsx(I2,{children:s})}function Ile({category:e,modelSwitcherDenialsBySlug:t,currentGizmoId:n,currentModelId:r,testId:s,preferredModelId:i,disabledByAdmin:o=!1}){const a=Ue(),{defaultModel:c,label:l,description:u,isBeta:d,isAlpha:f,modelBadge:h}=e,g=Bi(n??""),_=Y(),v=Xce(_,c),y=p.jsxs(Ea,{value:c,currentModelId:r,modelSwitcherDenialsBySlug:t,secondary:u,deprecated:v,disabledByAdmin:o,isSelected:(!n||g)&&r===c,testId:s,preferredModelId:i,children:[l,Mle(a,d,f,h)]},c);return o?p.jsx(Yn,{label:a.formatMessage(Yv.disabledByAdmin),children:y}):y}function K3e({sections:e}){return p.jsx(p.Fragment,{children:e.map((t,n)=>p.jsxs(qe.Fragment,{children:[n!==0&&e[n-1]?.id!=="model-picker-title"?p.jsx(Ye.Separator,{}):null,t.content]},t.id))})}function mN(){const{session:e}=lc(),{data:t}=kq();return Dx(e?.account?.planType??Re.FREE)||t&&Iq(t)&&!!1}function Y3e(e,t,n,r,s){const i=Ue(),o=Y(),a=!Ft(o),{session:c}=lc(),l=c?.user,u=l&&B8(l),d=Tce(e),f=d?.id??null,h=nZ(e);let{modelsData:g}=k2({isGizmo:!!h});const _=mN(),v=XY(e),y=Zce({clientThreadId:e}),C=g?.modelPickerVersion===2,{gizmoModelsData:E}=FH({enabled:!!h}),b=!v,S=t.find(({categoryId:L})=>L===Cs.ALPHA),w=t.find(({categoryId:L})=>L===Cs.DATA_CAMPAIGNS),x=t.find(({categoryId:L})=>L===Cs.EXPERIMENTS),T=t.find(({categoryId:L})=>L===Cs.MAINLINE),[O,A]=m.useState(""),k=Ii(nt(!0)),I=[S,w,x,T].reduce((L,ue)=>ue?[...L,...ue.options.map(Ie=>({...Ie,badge:ue.categoryId}))]:L,[]),N=m.useMemo(()=>O?I.filter(L=>L.name.toLowerCase().includes(O.toLowerCase())):I,[I,O]);if(r&&h&&g&&E){const L=JSON.parse(JSON.stringify(g));L.categories=L.categories.filter(({defaultModel:ue})=>E.editor.models_list_with_custom_actions.includes(ue)),g=L}const j=!!S?.options.length,q=!!w?.options.length,D=!!x?.options.length,U=!!T?.options.length,G=Fr(),F=m.useCallback(()=>{P.logEvent("Account Pay: Open Payment from Model Picker",{content:"gizmo-button"}),d3(G,"Thread header dropdown")},[G]),le=()=>{Fe.logEvent("chatgpt_model_switcher_plus_upgrade_button_clicked"),P.logEvent("Model Switcher Plus Upgrade Button Clicked"),a?Wa(o,{shouldOpenPaymentModalOnAuth:!0,callback:L=>{P.logSignUpButtonClicked({location:"Model switcher GPT-4 upsell",provider:L})}}):F()},me=()=>{P.logEventWithStatsig("Model Switcher Go Upgrade Button Clicked","chatgpt_model_switcher_go_upgrade_button_clicked"),a?Wa(o,{shouldOpenPaymentModalOnAuth:!0,callback:L=>{P.logSignUpButtonClicked({location:"Model switcher Go upsell",provider:L})}}):F()},ge=[],ke=we(o,"3315017149");g?.title&&ke&&ge.push({id:"model-picker-title",content:[p.jsx(Ye.Label,{className:"mb-0",children:g.title},"model-picker-title")]});const Pe=p.jsxs(Ye.Label,{className:"flex items-center",children:[p.jsx(K,{id:"coNCb7",defaultMessage:"Models"}),p.jsx(Yn,{side:"right",className:"ms-1.5",delayDuration:120,label:p.jsx(K,{id:"/vFWz/",defaultMessage:"Learn more"}),children:p.jsx("a",{href:"https://help.openai.com/en/articles/7864572-what-is-the-chatgpt-model-selector",target:"_blank",rel:"noreferrer",children:p.jsx($7,{className:"h-3.5 w-3.5 shrink-0"})})})]},"models-section-header");if(a){const L={id:"modelSection",content:[]};L.content.push(p.jsx(yle,{location:"model-switcher",statsig_login_event:"chatgpt_modelswitcher_login_button_clicked",statsig_signup_event:"chatgpt_modelswitcher_signup_button_clicked"},"noAuthUpsell")),ge.push(L)}else if(!_&&!h){const L={id:"modelSection",content:[]};$K(o)?L.content.push(p.jsx(Ea,{value:"",currentModelId:f,onClick:me,modelSwitcherDenialsBySlug:y,isUpgradeUpsell:!0,icon:yce,secondary:p.jsx(K,{id:"vm2Wqf",defaultMessage:"Our smartest model & more"}),isSelected:!1,children:p.jsx(K,{id:"/d/+gD",defaultMessage:"ChatGPT Go"})},"goUpgrade")):L.content.push(p.jsx(Ea,{value:"",currentModelId:f,onClick:le,modelSwitcherDenialsBySlug:y,isUpgradeUpsell:!0,icon:Cce,secondary:p.jsx(K,{id:"bqTHri",defaultMessage:"Our smartest model & more"}),isSelected:!1,children:p.jsx(K,{id:"mzDzkX",defaultMessage:"ChatGPT Plus"})},"plusUpgrade")),L.content.push(p.jsx(Ea,{value:cl.AUTO,currentModelId:f,modelSwitcherDenialsBySlug:y,icon:bce,secondary:p.jsx(K,{id:"n96qML",defaultMessage:"Great for everyday tasks"}),isSelected:!h&&f===cl.AUTO,children:p.jsx(K,{id:"U9E7Rx",defaultMessage:"ChatGPT"})},cl.AUTO)),ge.push(L)}else{const L={id:"modelSection",content:[]};g?.categories.length&&!C&&L.content.push(Pe);const ue=new Map;g?.categories.forEach(oe=>{const ye=p.jsx(Ile,{category:oe,currentGizmoId:h,currentModelId:f,modelSwitcherDenialsBySlug:y,preferredModelId:s,testId:`model-switcher-${oe.defaultModel}`,disabledByAdmin:oe.disabledByAdmin},oe.categoryId);oe.subcategory?(ue.has(oe.subcategory)||ue.set(oe.subcategory,[]),ue.get(oe.subcategory)?.push(ye)):L.content.push(ye)});const Ie=g?.categories?.some(oe=>oe.defaultModel==="gpt-5")??!1,it=g?.categories?.some(oe=>oe.defaultModel==="gpt-5-pro")??!1;if(Ie&&!it&&!Nt(o)?.isPro()&&we(o,"3309244414")){const oe=p.jsx(Nle,{}),ye=g?.categories?.find(ot=>ot.defaultModel==="gpt-5-thinking")?.subcategory;ye?ue.get(ye)?.push(oe):L.content.push(oe)}C?ue.forEach((oe,ye)=>{ye&&L.content.push(p.jsx(Ye.Separator,{},`${ye}-divider`));const ot=g?.categories.find(at=>at.subcategory===ye&&at.defaultModel===d?.id),{fullModelLabel:be}=tE(ot?.defaultModel??"",g);L.content.push(p.jsxs(Ye.Sub,{children:[p.jsx(Ye.SubMenuTrigger,{"data-testid":ye+"-submenu",trailing:p.jsx("div",{className:"truncate",children:be}),children:ye}),p.jsx(Ye.Portal,{children:p.jsx(Ye.SubContent,{children:oe})})]},ye))}):ue.forEach((oe,ye)=>{const ot=g?.categories.find(be=>be.subcategory===ye&&be.defaultModel===d?.id);L.content.push(p.jsxs(Ye.Sub,{children:[p.jsx(Ye.SubMenuTrigger,{"data-testid":ye?`${ye}-submenu`:void 0,trailing:ot&&p.jsx("div",{className:"truncate",children:ot.label}),children:ye}),p.jsx(Ye.Portal,{children:p.jsx(Ye.SubContent,{children:oe})})]},ye))});const tt=g?.categories?.some(oe=>oe.defaultModel==="gpt-4o"||oe.defaultModel==="gpt-4.1")??!1;r&&h&&L.content.push(p.jsx(Ye.Label,{className:"flex flex-col items-start gap-1",children:p.jsxs("span",{className:"flex items-center",children:[p.jsx(K,{id:"Y96ci5",defaultMessage:"Limited models for Custom Action GPTs"}),p.jsx(Yn,{side:"right",className:"ms-1.5 cursor-pointer",delayDuration:0,label:Ie&&tt?p.jsx(K,{id:"CicYT3",defaultMessage:"GPTs with custom web actions can currently only use GPT-5, GPT-4o, and GPT-4.1."}):Ie?p.jsx(K,{id:"VfAyqX",defaultMessage:"GPTs with custom web actions can currently only use GPT-5."}):p.jsx(K,{id:"wDE3HX",defaultMessage:"GPTs with custom web actions can currently only use GPT-4o and GPT-4.1. If your GPT has no custom actions it can use any model."}),children:p.jsx($7,{className:"h-4 w-4 shrink-0"})})]})})),ge.push(L)}const ve={id:"otherOptionsSection",content:[]},{selectedCategory:he}=tE(f,g);return b&&(j||q||D||U?ve.content.push(p.jsx("div",{className:"px-4 py-2",children:p.jsx(rN,{inputClassName:"w-full",onKeyDown:L=>{L.stopPropagation()},onChange:L=>{A(L.target.value)},value:O})})):u&&ve.content.push(p.jsxs(p.Fragment,{children:[p.jsx(Ye.Shimmer,{size:"long"}),p.jsx(Ye.Shimmer,{size:"long"}),p.jsx(Ye.Shimmer,{size:"long"}),p.jsx(Ye.Shimmer,{size:"long"})]})),O?ve.content.push(p.jsxs("div",{className:"scrollbar-gutter-stable max-h-64 w-[min(320px,95vw)] overflow-y-scroll",children:[N.length===0&&p.jsx(Ye.Item,{className:"w-full",children:i.formatMessage({id:"model-switcher.no-results",defaultMessage:"No results found"})}),N.map(L=>{const{value:ue}=L;return"options"in L?p.jsx(ma,{currentModel:d,isSelected:f?.startsWith(ue),option:L,modelSwitcherDenialsBySlug:y,displayInFull_INTERNAL_USE_ONLY:!0,preferredModelId:s},ue):p.jsxs(Ea,{currentModelId:f,isSelected:f===ue,value:ue,modelSwitcherDenialsBySlug:y,displayInFull_INTERNAL_USE_ONLY:!0,preferredModelId:s,children:[L.name,L.badge&&p.jsx(I2,{children:L.badge})]},ue)})]})):(j&&ve.content.push(p.jsx(ma,{isSelected:he===Cs.ALPHA,currentModel:d,option:S,modelSwitcherDenialsBySlug:y,displayInFull_INTERNAL_USE_ONLY:!0,preferredModelId:s},S.value)),q&&ve.content.push(p.jsx(ma,{isSelected:he===Cs.DATA_CAMPAIGNS,currentModel:d,option:w,modelSwitcherDenialsBySlug:y,displayInFull_INTERNAL_USE_ONLY:!0,preferredModelId:s},w.value)),D&&ve.content.push(p.jsx(ma,{currentModel:d,isSelected:he===Cs.EXPERIMENTS,option:x,modelSwitcherDenialsBySlug:y,displayInFull_INTERNAL_USE_ONLY:!0,preferredModelId:s},x.value)),U&&ve.content.push(p.jsx(ma,{isSelected:he===Cs.MAINLINE,currentModel:d,option:T,modelSwitcherDenialsBySlug:y,displayInFull_INTERNAL_USE_ONLY:!0,preferredModelId:s},T.value)))),ve.content.length&&k&&ge.push(ve),n&&ge.push({id:Z7,content:[p.jsx(fle,{},Z7)]}),ge}const Nle=()=>{const e=Fr(),t=Y(),n=we(t,"3315017149");let r=p.jsx(K,{id:"4myKt+",defaultMessage:"GPT-5 Pro"});return n&&(r=p.jsx(K,{id:"fCVj6z",defaultMessage:"Pro"})),p.jsx(Ye.Item,{disabled:!0,label:r,secondary:p.jsx(K,{id:"BsApen",defaultMessage:"Research-grade intelligence"}),trailing:p.jsx(Ct,{color:"secondary",size:"small",onClick:()=>{P.logEventWithStatsig("Model Switcher Pro Upgrade Button Clicked","chatgpt_model_switcher_pro_upgrade_button_clicked"),P.logEvent("Account Pay: Open Payment from Model Picker",{content:"gizmo-button"}),d3(e,"Thread header dropdown")},children:p.jsx(K,{id:"aJndhk",defaultMessage:"Upgrade"})})})},Yv=ze({alpha:{id:"o5FsPB",defaultMessage:"Alpha"},beta:{id:"XZwFET",defaultMessage:"Beta"},gpt35ShortExplainer:{defaultMessage:"Great for everyday tasks",id:"ModelSwitcher.gpt35ShortExplainer"},modelTunerSmartSelectionTitle:{id:"czjW8I",defaultMessage:"Dynamic"},modelTunerSmartSelectionExplainer:{id:"gp/YH1",defaultMessage:"Optimized for speed and intelligence"},gpt4ShortExplainer:{defaultMessage:"With DALL·E, browsing and analysis",id:"ModelSwitcher.gpt4ShortExplainer"},gpt4ShortExplainerWithoutBrowse:{defaultMessage:"With DALL·E and analysis",id:"ModelSwitcher.gpt4ShortExplainerWithoutBrowse"},gpt4UpsellExplainer:{id:"ModelSwitcher.gpt4Upsell",defaultMessage:"Our smartest and most capable model. Includes DALL·E, browsing and more."},userUpgrade:{id:"ModelSwithcer.upgradeButton",defaultMessage:"Upgrade to Plus"},userUpgradeSignup:{id:"ModelSwitcher.signupUpgradeButton",defaultMessage:"Sign up for ChatGPT Plus"},temporaryChat:{id:"ModelSwitcher.temporaryChat",defaultMessage:"Temporary chat"},shareChat:{id:"ModelSwitcher.shareChat",defaultMessage:"Share chat"},disabledByAdmin:{id:"XoQ6cH",defaultMessage:"Disabled by Admin"}});function Rle(){const e=Y(),t=mce(),{data:n,isSuccess:r,isLoading:s}=Fx(),{userIsInSearchHoldoutWithWebDisabled:i}=_ce(),o=mN(),a=we(e,"1627380539"),c=we(e,"222095887");return{systemHints:m.useMemo(()=>{if(s)return;if(!n||!r)return[];const u=Nt(e)?.planType;return n.sort(Ple(u)).filter(d=>!(d.systemHint===X.Think&&o&&(!a||c)||d.systemHint===X.Search&&i||d.systemHint===X.Slurm&&!t))},[n,s,r,e,i,t,o,a,c]),isLoading:s}}function Ple(e){const t=Dle(e);return(n,r)=>{const s=t.indexOf(n.systemHint),i=t.indexOf(r.systemHint),o=s===-1?Number.MAX_SAFE_INTEGER:s,a=i===-1?Number.MAX_SAFE_INTEGER:i;return o===a?0:o>a?1:-1}}function Dle(e){switch(e){case void 0:case Re.FREE:case Re.EDUCATION:case Re.DEPRECATED_EDU:return[X.Tatertot,X.PictureV2,X.Picture,X.Think,X.Agent,X.Research,X.ContextualAnswers,X.Slurm,X.Search,X.Canvas,X.Video];case Re.GO:case Re.PLUS:case Re.PRO:return[X.Agent,X.Research,X.PictureV2,X.Picture,X.Think,X.ContextualAnswers,X.Slurm,X.Tatertot,X.Search,X.Canvas,X.Video];case Re.BUSINESS:case Re.TEAM:case Re.QUORUM:case Re.DEPRECATED_ENTERPRISE:return[X.Agent,X.ContextualAnswers,X.Slurm,X.Research,X.Think,X.PictureV2,X.Picture,X.Search,X.Canvas,X.Video]}}const{useDebugValue:Lle}=qe,{useSyncExternalStoreWithSelector:Fle}=D8,jle=e=>e;function gN(e,t=jle,n){const r=Fle(e.subscribe,e.getState,e.getServerState||e.getInitialState,t,n);return Lle(r),r}const nE=(e,t)=>{const n=qr(e),r=(s,i=t)=>gN(n,s,i);return Object.assign(r,n),r},Ule=(e,t)=>e?nE(e,t):nE;let Ble=0;const _N=m.createContext(null);function qle({children:e}){const[t]=m.useState(()=>({}));return m.createElement(_N.Provider,{value:t},e)}function Su(e){if(e===void 0)return Su;const t=typeof e=="function"?e:()=>e;let n;const r=m.createContext(null);return class{static useState(i=Gle,o){return gN(this.useStore(),i,o)}static useStore(){return this.useStoreWithInit()}static useStoreWithInit(...i){const o=m.useContext(r),a=m.useContext(_N);if(o)return o;const c=this.name??"Store";if(!a)throw new Error(`No StoreScope found. Must use ${c} within a <StoreScopeProvider> or <${c}.Provider>.`);if(n||(n=`${c}:${Ble++}`),n in a)return a[n];if(typeof t=="function"&&t.length>0&&i.length===0)throw new Error(`Not initialized. First call ${c}.useStoreWithInit(value) or <${c}.Provider store={() => new ${c}(value)}>`);return a[n]=new this(...i)}static Provider({store:i,children:o}){const[a]=m.useState(i);return m.createElement(r.Provider,{value:a},o)}constructor(i){const o=t(i);Object.assign(this,qr(typeof o=="function"?o:()=>o))}}}function Gle(e){return e}const ss=e=>{const t={turn_index:e.turnIndex?.toString(),thread_id:e.threadId,conversation_id:e.clientThreadId?ur(e.clientThreadId):void 0,message_id:e?.messageId};return Object.fromEntries(Object.entries(t).filter(([n,r])=>r!==void 0))};class Mo extends Su()(({initialHint:t=null,locked:n=!1})=>({locked:n,activeSystemHintType:t,activeSystemHintTrigger:void 0})){getActiveSystemHintType=()=>this.getState().activeSystemHintType;setActiveSystemHint(t,n){const{locked:r,activeSystemHintType:s}=this.getState();r&&n?.locked===void 0||n?.ifPrevSystemHint!==void 0&&n.ifPrevSystemHint!==s||(Vle(s,t,n?.analyticsMetadata,n?.triggerSource),this.setState({locked:n?.locked??r,activeSystemHintType:t,activeSystemHintTrigger:t?n?.triggerSource:void 0}))}getPersistedSystemHintTrigger=t=>{if(!this.getState().locked&&this.getState().activeSystemHintType===t)return this.getState().activeSystemHintTrigger}}const J3e=()=>Mo.useState(e=>e.activeSystemHintType),Hle=()=>{const e=Mo.useStore(),t=Eee();return(n,r)=>{e.setActiveSystemHint(n,r),$x()&&t&&n&&t instanceof oM&&setTimeout(()=>t.view.dom.focus(),100)}};function rE({persistSearchMode:e,persistTatertotMode:t,persistAgentMode:n,forcedSystemHintType:r,completionMetadataHints:s,systemHintsFromSearchParams:i,lazySystemHint:o}){return r||(i.length>0?i[0]:e?X.Search:t?X.Tatertot:n?X.Agent:s?s[0]:null)}function Vle(e,t,n,r){t?p7(t,Gv.Enable,ss(n??{})):e&&p7(e,Gv.Disable,ss(n??{})),t===X.Search?P.logEventWithStatsig("Search Mode Engaged","search_mode_engaged",{...ss(n??{}),triggerSource:r}):t==null&&e===X.Search&&P.logEventWithStatsig("Search Mode Disabled","search_mode_disabled",ss(n??{}))}function Q3e({children:e,clientThreadId:t,forcedSystemHintType:n}){const r=Y(),[s]=zf(),{systemHints:i}=Rle(),o=iN(t),a=Oce(o,z8.Search),c=Hs(t,Z.getLastMessageSystemHints),l=$f(r,"269676899",{disableExposureLog:!0}),u=l.get("clear_all",!1),d=l.get("skip_search",!1),f=u&&!d,h=c.includes(X.Search)&&a&&!f,_=hre()&&c.includes(X.Tatertot),y=dte()&&c.includes(X.Agent),C=m.useMemo(()=>c.find(O=>i?.find(A=>A.systemHint===O)?.persistBetweenMessages),[c,i]),E=Ii(()=>IM(r)()[t]),b=!1,S=null,[w]=m.useState(()=>{const O=qv(s),A=rE({persistSearchMode:h,persistTatertotMode:_,persistAgentMode:y,forcedSystemHintType:n,completionMetadataHints:E,systemHintsFromSearchParams:O,lazySystemHint:S});return new Mo({initialHint:A,locked:n!=null})}),x=m.useRef(t);m.useEffect(()=>{if(x.current!==t){w.setActiveSystemHint(null);const A=qv(s),k=rE({persistSearchMode:h,persistTatertotMode:_,persistAgentMode:y,forcedSystemHintType:n,completionMetadataHints:E,systemHintsFromSearchParams:A,lazySystemHint:S});w.setActiveSystemHint(k,{locked:n!=null}),x.current=t;return}const O=w.getActiveSystemHintType();h&&O!==X.Search?w.setActiveSystemHint(X.Search,{analyticsMetadata:{clientThreadId:t}}):_&&O!==X.Tatertot?w.setActiveSystemHint(X.Tatertot,{analyticsMetadata:{clientThreadId:t}}):C&&w.setActiveSystemHint(C,{analyticsMetadata:{clientThreadId:t}})},[t,E,n,h,_,y,w,C,s,b,S]);const T=m.useRef(n);return m.useEffect(()=>{if(i==null||i.length===0){T.current=n;return}const O=n!=null?i.find(A=>A.systemHint===n):void 0;n!=null&&O!=null?w.setActiveSystemHint(n,{locked:!0}):w.getState().locked&&w.setActiveSystemHint(null,{locked:!1}),T.current=n},[i,w,n]),p.jsx(Mo.Provider,{store:w,children:e})}function zle({children:e}){const[t]=m.useState(()=>new Mo({initialHint:null,locked:!0}));return p.jsx(Mo.Provider,{store:t,children:e})}class $le{#e;#t=t=>(this.#e||(this.#e=$(()=>import("./n97h6so7iblif4c5.js").then(n=>n.aB),[]).then(n=>n?.datadogLogs)),this.#e.then(n=>n&&t(n)));init(t){this.#t(n=>n.init(t))}setGlobalContextProperty(t,n){this.#t(r=>r.setGlobalContextProperty(t,n))}setUser(t){this.#t(n=>n.setUser(t))}get logger(){return{setHandler:t=>{this.#t(n=>n.logger.setHandler(t))}}}createLogger(t,n){return new Wle(this.#t,t,n)}}class Wle{#e;constructor(t,n,r){this.#e=t(s=>s.createLogger(n,r))}#t=t=>this.#e.then(n=>n&&t(n));ok(t,n,r){this.#t(s=>s.ok(t,n,r))}debug(t,n,r){this.#t(s=>s.debug(t,n,r))}info(t,n,r){this.#t(s=>s.info(t,n,r))}notice(t,n,r){this.#t(s=>s.notice(t,n,r))}warn(t,n,r){this.#t(s=>s.warn(t,n,r))}error(t,n,r){this.#t(s=>s.error(t,n,r))}critical(t,n,r){this.#t(s=>s.critical(t,n,r))}alert(t,n,r){this.#t(s=>s.alert(t,n,r))}emerg(t,n,r){this.#t(s=>s.emerg(t,n,r))}}const ia=new $le,Kle="datadoghq.com",Yle="pub1f79f8ac903a5872ae5f53026d20a77c";class Zle{initialize(){const t=Kf?Gt?.getTelemetryConfig?.():void 0,n=t!==void 0?t.datadogService:v9();ia.init({clientToken:Yle,site:Kle,service:n,env:"prod",version:"2ce0a3f07a70586b8e072b67b1fc24498df2535f",sessionSampleRate:100,forwardErrorsToLogs:!1,beforeSend:r=>(r.view.url=Xc(r.view.url),r.http&&r.http.url&&(r.http.url=Xc(r.http.url)),!0)}),ia.setGlobalContextProperty("track","stable"),ia.setGlobalContextProperty("is_electron_desktop_app",t!==void 0),ia.logger.setHandler(["http"])}setUser(t,n){const r={user_id:t.id,account_plan_type:n?.planType??"none",workspace_id:n?.id};ia.setUser(r)}createLogger(t,n="info",r="http",s){return ia.createLogger(t,{level:n,handler:r,context:s})}}const Zv=new Zle;function vN(e){const t=new URL(window.location.href);if(!t.searchParams.has(e))return;t.searchParams.delete(e);const n=t.pathname+t.search+t.hash;history.replaceState(null,"",n)}let sE=!1;if(_9()){const e=function(){return window.location.pathname!=="/search"?void 0:{sessionSampleRate:100,traceSampleRate:100}}();R.initialize(e)}function Jle(e,t){if(t){const n=de.getCookie(ie.Workspace),r=n===fi?void 0:n,s=t.structure===Rn.WORKSPACE?t.id:void 0;r!==s&&R.addAction("bootstrap_client.account_cookie_mismatch",{accountCookieValue:n,lightAccount:t})}e.fetchQuery(js()).then(n=>{const r=Mh(n),s=de.getCookie(ie.Workspace),i=wq(r,n.accountItems);s!==i&&K_(i),r&&t&&(r.id!==t.id||r.planType!==t.planType||r.isDelinquent!==t.isDelinquent||r.gracePeriodId!==t.gracePeriodId)&&Qy()}).catch(n=>{if(!(n instanceof je&&n.isClientError()))return R.addAction("bootstrap_client.fetchAccounts.error",{error:n}),null})}function Qle(e,t,n){if(sE)return;sE=!0;const r=Zn(e);if(r.checkGate("4011688770")&&$(()=>import("./mrkpoml1unmgvsy6.js"),__vite__mapDeps([17,1])).then(s=>s?.initOpenTelemetry()),r.on("gate_evaluation",({gate:s})=>{R.addFeatureFlagEvaluation(s.name,s.value)}),vN("refresh_account"),window.addEventListener("vite:preloadError",s=>{s.preventDefault(),R.addAction("vite:preloadError",{payload:s.payload})}),Ni(),vH(),R.addTiming("chatgpt.web.bootstrapClient"),R.addAction("bootstrap_client.start"),window.__oai_SSR_HTML?R.addFirstTiming("composer.html",window.__oai_SSR_HTML):window.__oai_logHTML=()=>{R.addFirstTiming("composer.html")},window.__oai_SSR_TTI?R.addFirstTiming("composer.visible",window.__oai_SSR_TTI):window.__oai_logTTI=()=>{R.addFirstTiming("composer.visible")},_9()&&Zv.initialize(),t.authStatus===fn.LoggedIn){const s=t.user,i=t.session?.account;R.addAction("bootstrap_client.has_session_user"),Jle(n,i),KU(s,i,t.intercomHash),R.setUser(s,i),Zv.setUser(s,i),P.initialize({userInfo:{currentAccount:i??null,sessionUser:s}}),R.addAction("bootstrap_client.success.is_authenticated",{hasCurrentAccount:!0})}else R.addAction("bootstrap_client.does_not_have_session_user"),P.initialize(),R.addAction("bootstrap_client.success.is_not_authenticated");fetch(`${Ae}/edge`).catch(()=>{})}function Xle({root:e,autoFocus:t=!1}){if(!e)return null;const n=["a[href]:not([data-skip-to-content])","area[href]","input:not([disabled])","select:not([disabled])","textarea:not([disabled])","button:not([disabled])","iframe","object","embed",'[tabindex]:not([tabindex="-1"])',"[contenteditable]"].join(", "),r=Array.from(e.querySelectorAll(n));let s=null;for(const i of r)if(i.offsetWidth>0&&i.offsetHeight>0){s=i;break}return t&&s?.focus(),s}const eue=()=>{const e=Y();return{country:_n(e).userCountry}};function iE(e){return e!=null&&e in IP}const X0=60*60*24*30*6,yN=e=>{de.setBooleanCookie(ie.ConsentAnalytics,e.consent_analytics,{maxAge:X0,domain:Np}),de.setBooleanCookie(ie.ConsentMarketing,e.consent_marketing,{maxAge:X0,domain:Np}),de.setBooleanCookie(ie.AllowNonessential,e.consent_analytics&&e.consent_marketing,{maxAge:X0,domain:Np}),R.addAction("update-cookie-consent.cookie.success")};async function CN(e){if(yN(e),_n(Xe()).authStatus===fn.LoggedIn)try{await H.safePost("/user_granular_consent",{authOption:ht.Required,requestBody:{granular_consent:{analytics:e.consent_analytics,marketing:e.consent_marketing}}}),R.addAction("update-cookie-consent.backend.success")}catch(n){R.addError(n)}}const fC=ms({queryKey:["cookie-consent"],queryFn:async()=>{const{isUserInPioneerHR:e,userCountry:t}=_n(jr(Xe()));if(!e){const i=de.getBooleanCookie(ie.ConsentAnalytics),o=de.getBooleanCookie(ie.ConsentMarketing);return i!=null||o!=null?{consent_analytics:i??!1,consent_marketing:o??!1,is_consent_required:!0}:(R.addAction("get-cookie-consent.use-anonymous-default.consent-not-required",{country:t}),{consent_analytics:!0,consent_marketing:!0,is_consent_required:!1})}if(t!=null&&!iE(t))return R.addAction("get-cookie-consent.use-anonymous-default.consent-not-required",{country:t}),{consent_analytics:!0,consent_marketing:!0,is_consent_required:!1};if(iE(t)&&!e)return R.addAction("get-cookie-consent.use-anonymous-default.consent-required-essential-only",{country:t}),{consent_analytics:!1,consent_marketing:!1,is_consent_required:!0};let n;try{const i=await H.safeGet("/user_granular_consent",{authOption:ht.Required});n={consent_analytics:i.granular_consent?.analytics??null,consent_marketing:i.granular_consent?.marketing??null,is_consent_required:i.is_consent_required},R.addAction("get-cookie-consent.use-authenticated",{country:t})}catch(i){i instanceof yh||R.addError(i,{country:t}),n={consent_analytics:null,consent_marketing:null,is_consent_required:!0}}const r=de.getBooleanCookie(ie.ConsentAnalytics),s=de.getBooleanCookie(ie.ConsentMarketing);return n.consent_analytics!=null&&n.consent_marketing!=null&&(r!==n.consent_analytics||s!==n.consent_marketing)?(yN({consent_analytics:n.consent_analytics,consent_marketing:n.consent_marketing}),R.addAction("get-cookie-consent.update-cookie-consent-cookie",{country:t})):r!==void 0&&s!==void 0&&n.is_consent_required&&n.consent_analytics==null&&n.consent_marketing==null&&(CN({consent_analytics:r??!1,consent_marketing:s??!1}),R.addAction("get-cookie-consent.update-cookie-consent-backend",{country:t}),n={...n,consent_analytics:r??!1,consent_marketing:s??!1}),n}}),X3e=e=>{const{country:t}=eue(),n=Tn();return gn({...e,mutationFn:r=>CN(r),onSuccess:(r,s,i)=>{e?.onSuccess?.(r,s,i),n.setQueryData(fC.queryKey,o=>{if(!o){R.addError(new Error("Cookie consent query data is undefined during mutation"));return}return{...o,consent_analytics:s.consent_analytics,consent_marketing:s.consent_marketing}})},onError:(r,s,i)=>{e?.onError?.(r,s,i),R.addError(r,{country:t})}})};class e_ extends Su()(()=>({cookieConsentBannerClosed:!1,cookieConsentBannerIgnored:de.getBooleanCookie(ie.CookieBannerIgnored)??!1,onCloseSideEffect:()=>{},manuallySetVisibility:!1})){closeCookieConsentBanner=t=>{const n={cookieConsentBannerClosed:!0,...t?{cookieConsentBannerIgnored:!0}:{}};this.setState(n),t&&de.setBooleanCookie(ie.CookieBannerIgnored,!0)};setOnCloseSideEffect=t=>{this.setState(n=>({...n,onCloseSideEffect:t}))};setManualVisibility=t=>{this.setState(n=>({...n,manuallySetVisibility:t}))};static useWasClosed=()=>this.useState(t=>t.cookieConsentBannerClosed);static useWasIgnored=()=>this.useState(t=>t.cookieConsentBannerIgnored);static useOnCloseSideEffect=()=>this.useState(t=>t.onCloseSideEffect);static useManuallySetVisibility=()=>this.useState(t=>t.manuallySetVisibility)}const eCe=()=>{const e=e_.useStore(),{isUnauthenticated:t,isLoading:n}=nu(),{data:r,isLoading:s}=$e(fC),i=e_.useWasClosed(),o=e_.useWasIgnored(),a=de.getCookie(ie.CookieBannerShownPath),c=a===window.location.pathname,l=n||s;return{shouldShowCookieBanner:(!l&&t&&!(i||o)&&(!a||c)&&r?.is_consent_required&&r?.consent_analytics==null&&r?.consent_marketing==null)??!1,isCookieConsentBannerLoading:l,closeCookieConsentBanner:e.closeCookieConsentBanner,ignoreCookieConsentBanner:()=>e.closeCookieConsentBanner(!0)}};var Zc=(e=>(e.Gclid="gclid",e.Fbclid="fbclid",e.Rdtcid="rdt_cid",e.Tiktokclid="ttclid",e))(Zc||{});function tCe(e){switch(e){case"gclid":return de.getMarketingCookie(ie.Gclid);case"fbclid":return de.getMarketingCookie(ie.Fbclid);case"rdt_cid":return de.getMarketingCookie(ie.Rdtcid);case"ttclid":return de.getMarketingCookie(ie.Tiktokclid)}}function nCe(e){switch(e){case"gclid":de.deleteCookie(ie.Gclid);break;case"fbclid":de.deleteCookie(ie.Fbclid);break;case"rdt_cid":de.deleteCookie(ie.Rdtcid);break;case"ttclid":de.deleteCookie(ie.Tiktokclid);break}}function tue(e){switch(e){case"gclid":return ie.Gclid;case"fbclid":return ie.Fbclid;case"rdt_cid":return ie.Rdtcid;case"ttclid":return ie.Tiktokclid}}function nue({searchParams:e,clidLifetimeSeconds:t=24*60*60,eligibleExplorers:n}){for(const r of n){if(e.get(r)==null)continue;const s=tue(r);de.setMarketingCookie(s,e.get(r),{path:"/",maxAge:t})}}let bN=!1;const rue=e=>{const t=_n(e);if(!t.eligibleMarketing)return;const n=new URLSearchParams(window.location.search);nue({searchParams:n,eligibleExplorers:[...t.eligibleMarketing.isUserEligibleForPioneer?[Zc.Gclid]:[],...t.eligibleMarketing.isUserEligibleForMaverick?[Zc.Fbclid]:[],...t.eligibleMarketing.isUserEligibleForTrailBlazer?[Zc.Rdtcid]:[],...t.eligibleMarketing.isUserEligibleForStratos?[Zc.Tiktokclid]:[]]}),bN=!0},sue=(e,t)=>{const n=_n(e).userCountry;new n9(t,fC).subscribe(s=>{if(s.isPending)return;const i=s.data;if(!i)return;(i.is_consent_required?i.consent_marketing:!0)?(de.setAllowMarketingCookies_CLIENT_ONLY(!0),R.addAction("marketing-tracking.non-essential-cookies.allowed",{country:n}),bN||(rue(e),R.addAction("marketing-tracking.non-essential-cookies.marketing-tracking-functions-run",{country:n}))):(de.setAllowMarketingCookies_CLIENT_ONLY(!1),R.addAction("marketing-tracking.non-essential-cookies.disallowed",{country:n}))})};async function iue(){if(!("container"in document.documentElement.style)){performance.mark("polyfill.containerQuery.start");try{await $(()=>import("./ju44vdme8sg2h8v1.js"),[])}catch(e){return R.addError(new Error("Error loading polyfill: containerQuery",{cause:e})),Promise.reject(e)}performance.mark("polyfill.containerQuery.end"),performance.measure("polyfill.containerQuery","polyfill.containerQuery.start","polyfill.containerQuery.end")}}async function oue(){if(!Array.prototype.findLast)try{await $(()=>import("./krkitrtcjhkjzpyt.js"),__vite__mapDeps([18,1]))}catch(e){return R.addError(new Error("Error loading polyfill: findLast",{cause:e})),Promise.reject(e)}}async function aue(){if(!CSS.supports("animation-timeline: --works")||window.ViewTimeline===void 0){performance.mark("polyfill.scrollTimeline.start");try{await $(()=>import("./mv7t0tsdviudgwx9.js"),[])}catch(e){return R.addAction("Error loading polyfill: scrollTimeline",{cause:e}),Promise.reject(e)}performance.mark("polyfill.scrollTimeline.end"),performance.measure("polyfill.scrollTimeline","polyfill.scrollTimeline.start","polyfill.scrollTimeline.end")}}async function cue(){performance.mark("polyfill.all.start"),await Promise.allSettled([oue(),iue(),aue()]),performance.mark("polyfill.all.end"),performance.measure("polyfill.all","polyfill.all.start","polyfill.all.end")}const Pf=["light","dark"],hC="(prefers-color-scheme: dark)",lue=typeof window>"u",pC=m.createContext(void 0),uue={setTheme:e=>{},themes:[]},SN=()=>{var e;return(e=m.useContext(pC))!==null&&e!==void 0?e:uue},due=e=>m.useContext(pC)?qe.createElement(m.Fragment,null,e.children):qe.createElement(hue,e),fue=["light","dark"],hue=({forcedTheme:e,disableTransitionOnChange:t=!1,enableSystem:n=!0,enableColorScheme:r=!0,storageKey:s="theme",themes:i=fue,defaultTheme:o=n?"system":"light",attribute:a="data-theme",value:c,children:l,nonce:u})=>{const[d,f]=m.useState(()=>oE(s,o)),[h,g]=m.useState(()=>oE(s)),_=c?Object.values(c):i,v=m.useCallback(b=>{let S=b;if(!S)return;b==="system"&&n&&(S=aE());const w=c?c[S]:S,x=t?mue():null,T=document.documentElement;if(a==="class"?(T.classList.remove(..._),w&&T.classList.add(w)):w?T.setAttribute(a,w):T.removeAttribute(a),r){const O=Pf.includes(o)?o:null,A=Pf.includes(S)?S:O;T.style.colorScheme=A}x?.()},[]),y=m.useCallback(b=>{f(b);try{localStorage.setItem(s,b)}catch{}},[e]),C=m.useCallback(b=>{const S=aE(b);g(S),d==="system"&&n&&!e&&v("system")},[d,e]);m.useEffect(()=>{const b=window.matchMedia(hC);return b.addListener(C),C(b),()=>b.removeListener(C)},[C]),m.useEffect(()=>{const b=S=>{S.key===s&&y(S.newValue||o)};return window.addEventListener("storage",b),()=>window.removeEventListener("storage",b)},[y]),m.useEffect(()=>{v(e??d)},[e,d]);const E=m.useMemo(()=>({theme:d,setTheme:y,forcedTheme:e,resolvedTheme:d==="system"?h:d,themes:n?[...i,"system"]:i,systemTheme:n?h:void 0}),[d,y,e,h,n,i]);return qe.createElement(pC.Provider,{value:E},qe.createElement(pue,{forcedTheme:e,disableTransitionOnChange:t,enableSystem:n,enableColorScheme:r,storageKey:s,themes:i,defaultTheme:o,attribute:a,value:c,children:l,attrs:_,nonce:u}),l)},pue=m.memo(({forcedTheme:e,storageKey:t,attribute:n,enableSystem:r,enableColorScheme:s,defaultTheme:i,value:o,attrs:a,nonce:c})=>{const l=i==="system",u=n==="class"?`var d=document.documentElement,c=d.classList;c.remove(${a.map(g=>`'${g}'`).join(",")});`:`var d=document.documentElement,n='${n}',s='setAttribute';`,d=s?Pf.includes(i)&&i?`if(e==='light'||e==='dark'||!e)d.style.colorScheme=e||'${i}'`:"if(e==='light'||e==='dark')d.style.colorScheme=e":"",f=(g,_=!1,v=!0)=>{const y=o?o[g]:g,C=_?g+"|| ''":`'${y}'`;let E="";return s&&v&&!_&&Pf.includes(g)&&(E+=`d.style.colorScheme = '${g}';`),n==="class"?E+=_||y?`c.add(${C})`:"null":y&&(E+=`d[s](n,${C})`),E},h=e?`!function(){${u}${f(e)}}()`:r?`!function(){try{${u}var e=localStorage.getItem('${t}');if('system'===e||(!e&&${l})){var t='${hC}',m=window.matchMedia(t);if(m.media!==t||m.matches){${f("dark")}}else{${f("light")}}}else if(e){${o?`var x=${JSON.stringify(o)};`:""}${f(o?"x[e]":"e",!0)}}${l?"":"else{"+f(i,!1,!1)+"}"}${d}}catch(e){}}()`:`!function(){try{${u}var e=localStorage.getItem('${t}');if(e){${o?`var x=${JSON.stringify(o)};`:""}${f(o?"x[e]":"e",!0)}}else{${f(i,!1,!1)};}${d}}catch(t){}}();`;return qe.createElement("script",{nonce:c,dangerouslySetInnerHTML:{__html:h}})},()=>!0),oE=(e,t)=>{if(lue)return;let n;try{n=localStorage.getItem(e)||void 0}catch{}return n||t},mue=()=>{const e=document.createElement("style");return e.appendChild(document.createTextNode("*{-webkit-transition:none!important;-moz-transition:none!important;-o-transition:none!important;-ms-transition:none!important;transition:none!important}")),document.head.appendChild(e),()=>{window.getComputedStyle(document.body),setTimeout(()=>{document.head.removeChild(e)},1)}},aE=e=>(e||(e=window.matchMedia(hC)),e.matches?"dark":"light");function wN(e){return e==="system"||EN(e)}function EN(e){return e==="dark"||e==="light"}function gue(e){if(!wN(e))throw new Error(`Unexpected theme ${e}`)}function rCe(){const{theme:e,setTheme:t}=SN();function n(r){gue(r),r!==e&&t(r)}return[wN(e)?e:"system",n]}function _ue(){const e=SN().resolvedTheme;if(EN(e))return e}function vue(){return _ue()==="dark"}function yue(){return document.documentElement.classList.contains("dark")}(!globalThis.EventTarget||!globalThis.Event)&&console.error(`
  PartySocket requires a global 'EventTarget' class to be available!
  You can polyfill this global by adding this to your code before any partysocket imports: 
  
  \`\`\`
  import 'partysocket/event-target-polyfill';
  \`\`\`
  Please file an issue at https://github.com/partykit/partykit if you're still having trouble.
`);var xN=class extends Event{message;error;constructor(e,t){super("error",t),this.message=e.message,this.error=e}},TN=class extends Event{code;reason;wasClean=!0;constructor(e=1e3,t="",n){super("close",n),this.code=e,this.reason=t}},t_={Event,ErrorEvent:xN,CloseEvent:TN};function Cue(e,t){if(!e)throw new Error(t)}function bue(e){return new e.constructor(e.type,e)}function Sue(e){return"data"in e?new MessageEvent(e.type,e):"code"in e||"reason"in e?new TN(e.code||1999,e.reason||"unknown reason",e):"error"in e?new xN(e.error,e):new Event(e.type,e)}var cE,wue=typeof process<"u"&&typeof((cE=process.versions)==null?void 0:cE.node)<"u"&&typeof document>"u",ad=wue?Sue:bue,Wi={maxReconnectionDelay:1e4,minReconnectionDelay:1e3+Math.random()*4e3,minUptime:5e3,reconnectionDelayGrowFactor:1.3,connectionTimeout:4e3,maxRetries:Number.POSITIVE_INFINITY,maxEnqueuedMessages:Number.POSITIVE_INFINITY},lE=!1,Jv=class Xi extends EventTarget{_ws;_retryCount=-1;_uptimeTimeout;_connectTimeout;_shouldReconnect=!0;_connectLock=!1;_binaryType="blob";_closeCalled=!1;_messageQueue=[];_debugLogger=console.log.bind(console);_url;_protocols;_options;constructor(t,n,r={}){super(),this._url=t,this._protocols=n,this._options=r,this._options.startClosed&&(this._shouldReconnect=!1),this._options.debugLogger&&(this._debugLogger=this._options.debugLogger),this._connect()}static get CONNECTING(){return 0}static get OPEN(){return 1}static get CLOSING(){return 2}static get CLOSED(){return 3}get CONNECTING(){return Xi.CONNECTING}get OPEN(){return Xi.OPEN}get CLOSING(){return Xi.CLOSING}get CLOSED(){return Xi.CLOSED}get binaryType(){return this._ws?this._ws.binaryType:this._binaryType}set binaryType(t){this._binaryType=t,this._ws&&(this._ws.binaryType=t)}get retryCount(){return Math.max(this._retryCount,0)}get bufferedAmount(){return this._messageQueue.reduce((n,r)=>(typeof r=="string"?n+=r.length:r instanceof Blob?n+=r.size:n+=r.byteLength,n),0)+(this._ws?this._ws.bufferedAmount:0)}get extensions(){return this._ws?this._ws.extensions:""}get protocol(){return this._ws?this._ws.protocol:""}get readyState(){return this._ws?this._ws.readyState:this._options.startClosed?Xi.CLOSED:Xi.CONNECTING}get url(){return this._ws?this._ws.url:""}get shouldReconnect(){return this._shouldReconnect}onclose=null;onerror=null;onmessage=null;onopen=null;close(t=1e3,n){if(this._closeCalled=!0,this._shouldReconnect=!1,this._clearTimeouts(),!this._ws){this._debug("close enqueued: no ws instance");return}if(this._ws.readyState===this.CLOSED){this._debug("close: already closed");return}this._ws.close(t,n)}reconnect(t,n){this._shouldReconnect=!0,this._closeCalled=!1,this._retryCount=-1,!this._ws||this._ws.readyState===this.CLOSED?this._connect():(this._disconnect(t,n),this._connect())}send(t){if(this._ws&&this._ws.readyState===this.OPEN)this._debug("send",t),this._ws.send(t);else{const{maxEnqueuedMessages:n=Wi.maxEnqueuedMessages}=this._options;this._messageQueue.length<n&&(this._debug("enqueue",t),this._messageQueue.push(t))}}_debug(...t){this._options.debug&&this._debugLogger("RWS>",...t)}_getNextDelay(){const{reconnectionDelayGrowFactor:t=Wi.reconnectionDelayGrowFactor,minReconnectionDelay:n=Wi.minReconnectionDelay,maxReconnectionDelay:r=Wi.maxReconnectionDelay}=this._options;let s=0;return this._retryCount>0&&(s=n*t**(this._retryCount-1),s>r&&(s=r)),this._debug("next delay",s),s}_wait(){return new Promise(t=>{setTimeout(t,this._getNextDelay())})}_getNextProtocols(t){if(!t)return Promise.resolve(null);if(typeof t=="string"||Array.isArray(t))return Promise.resolve(t);if(typeof t=="function"){const n=t();if(!n)return Promise.resolve(null);if(typeof n=="string"||Array.isArray(n))return Promise.resolve(n);if(n.then)return n}throw Error("Invalid protocols")}_getNextUrl(t){if(typeof t=="string")return Promise.resolve(t);if(typeof t=="function"){const n=t();if(typeof n=="string")return Promise.resolve(n);if(n.then)return n}throw Error("Invalid URL")}_connect(){if(this._connectLock||!this._shouldReconnect)return;this._connectLock=!0;const{maxRetries:t=Wi.maxRetries,connectionTimeout:n=Wi.connectionTimeout}=this._options;if(this._retryCount>=t){this._debug("max retries reached",this._retryCount,">=",t);return}this._retryCount++,this._debug("connect",this._retryCount),this._removeListeners(),this._wait().then(()=>Promise.all([this._getNextUrl(this._url),this._getNextProtocols(this._protocols||null)])).then(([r,s])=>{if(this._closeCalled){this._connectLock=!1;return}!this._options.WebSocket&&typeof WebSocket>"u"&&!lE&&(console.error(`‼️ No WebSocket implementation available. You should define options.WebSocket. 

For example, if you're using node.js, run \`npm install ws\`, and then in your code:

import PartySocket from 'partysocket';
import WS from 'ws';

const partysocket = new PartySocket({
  host: "127.0.0.1:1999",
  room: "test-room",
  WebSocket: WS
});

`),lE=!0);const i=this._options.WebSocket||WebSocket;this._debug("connect",{url:r,protocols:s}),this._ws=s?new i(r,s):new i(r),this._ws.binaryType=this._binaryType,this._connectLock=!1,this._addListeners(),this._connectTimeout=setTimeout(()=>this._handleTimeout(),n)}).catch(r=>{this._connectLock=!1,this._handleError(new t_.ErrorEvent(Error(r.message),this))})}_handleTimeout(){this._debug("timeout event"),this._handleError(new t_.ErrorEvent(Error("TIMEOUT"),this))}_disconnect(t=1e3,n){if(this._clearTimeouts(),!!this._ws){this._removeListeners();try{this._ws.readyState===this.OPEN&&this._ws.close(t,n),this._handleClose(new t_.CloseEvent(t,n,this))}catch{}}}_acceptOpen(){this._debug("accept open"),this._retryCount=0}_handleOpen=t=>{this._debug("open event");const{minUptime:n=Wi.minUptime}=this._options;clearTimeout(this._connectTimeout),this._uptimeTimeout=setTimeout(()=>this._acceptOpen(),n),Cue(this._ws,"WebSocket is not defined"),this._ws.binaryType=this._binaryType,this._messageQueue.forEach(r=>{var s;return(s=this._ws)==null?void 0:s.send(r)}),this._messageQueue=[],this.onopen&&this.onopen(t),this.dispatchEvent(ad(t))};_handleMessage=t=>{this._debug("message event"),this.onmessage&&this.onmessage(t),this.dispatchEvent(ad(t))};_handleError=t=>{this._debug("error event",t.message),this._disconnect(void 0,t.message==="TIMEOUT"?"timeout":void 0),this.onerror&&this.onerror(t),this._debug("exec error listeners"),this.dispatchEvent(ad(t)),this._connect()};_handleClose=t=>{this._debug("close event"),this._clearTimeouts(),this._shouldReconnect&&this._connect(),this.onclose&&this.onclose(t),this.dispatchEvent(ad(t))};_removeListeners(){this._ws&&(this._debug("removeListeners"),this._ws.removeEventListener("open",this._handleOpen),this._ws.removeEventListener("close",this._handleClose),this._ws.removeEventListener("message",this._handleMessage),this._ws.removeEventListener("error",this._handleError))}_addListeners(){this._ws&&(this._debug("addListeners"),this._ws.addEventListener("open",this._handleOpen),this._ws.addEventListener("close",this._handleClose),this._ws.addEventListener("message",this._handleMessage),this._ws.addEventListener("error",this._handleError))}_clearTimeouts(){clearTimeout(this._connectTimeout),clearTimeout(this._uptimeTimeout)}};/*!
 * Reconnecting WebSocket
 * by Pedro Ladaria <pedro.ladaria@gmail.com>
 * https://github.com/pladaria/reconnecting-websocket
 * License MIT
 */let ys=null;function Eue(e,t){let n=null;const r=()=>{const s=Date.now(),i=n!=null?s-n.time:null;return n!=null&&i!=null&&i<t?(R.addAction("websocket-url-cache.hit",{timeSinceLastValue:i}),n.promise):(R.addAction("websocket-url-cache.miss",{timeSinceLastValue:i}),n={promise:e().catch(o=>{throw R.addAction("websocket-url-cache.error"),n=null,o}),time:s},n.promise)};return r.invalidate=()=>{R.addAction("websocket-url-cache.invalidate"),n=null},r}const ON=async()=>(await H.safeGet("/celsius/ws/user")).websocket_url,kN=Eue(ON,15e5);function AN(e){return we(e,"2892913572")?kN():ON()}const MN=It(()=>nt("disconnected")),Df=new h3;function xue(e,t){const n=MN(e);t?.run(),n.set("connecting"),ys=new Jv(async()=>{const s=await AN(e);return t?.onFetchSocketURL(),s},void 0,{maxRetries:50,minReconnectionDelay:1e3+Math.random()*4e3,reconnectionDelayGrowFactor:1.25,maxReconnectionDelay:2e4});let r;return ys.addEventListener("open",()=>{n.set("connected"),we(e,"3274829134")&&(r=setInterval(()=>{ys&&ys.readyState===Jv.OPEN&&ys.send(JSON.stringify({type:"keepalive-ping"}))},2e4))}),ys.addEventListener("close",()=>{n.set("disconnected"),r!==void 0&&(clearInterval(r),r=void 0)}),ys.addEventListener("message",s=>{const i=JSON.parse(s.data),{type:o,...a}=i,c={kind:o,...a};Df.publish(c)}),ys.addEventListener("error",s=>{kN.invalidate(),R.addAction("websocket error",{error:s.error,message:s.message})}),ys}const Tue=It(e=>new Oue(e));class Oue{constructor(t){this.ctx=t}ws;nextRequestId=1;commandCallbacks={};topics={};isTransportOpen=!1;isBatchingCommands=!1;batchCommands=[];keepaliveInterval;init(){const t=new Jv(()=>AN(this.ctx),void 0,{maxRetries:50,minReconnectionDelay:1e3+Math.random()*4e3,reconnectionDelayGrowFactor:1.25,maxReconnectionDelay:2e4});this.ws=t,t.addEventListener("open",()=>{this.#e()}),t.addEventListener("close",()=>{this.#t()}),t.addEventListener("message",n=>{this.#r(n)}),t.addEventListener("error",n=>{this.#n(n)})}connect(){this.ws.reconnect()}disconnect(){this.ws.close()}#e(){this.isTransportOpen=!0,this.startBatchCommands(),this.sendCommand({type:"connect"});for(const t of Object.values(this.topics))t.state===1&&t.subscribe();this.endBatchCommands(),we(this.ctx,"3274829134")&&(this.keepaliveInterval=setInterval(()=>{this.ws.send(JSON.stringify({type:"keepalive-ping"}))},2e4))}#t(){this.isTransportOpen=!1;for(const t of Object.values(this.topics))t.handleDisconnect();this.endBatchCommands(),this.keepaliveInterval&&(clearInterval(this.keepaliveInterval),this.keepaliveInterval=void 0)}#r(t){const n=JSON.parse(t.data);if(Array.isArray(n)){const r=n;for(const s of r)if("type"in s&&s.type==="message"){const{topic_id:i}=s,o=this.topics[i];o&&o.handleMessage(s.payload)}else"id"in s&&"reply"in s&&this.commandCallbacks[s.id].resolve(s.reply)}else{const r=n,{type:s,...i}=r,o={kind:s,...i};Df.publish(o)}}#n(t){R.addAction("websocket error",{error:t.error,message:t.message})}getTopic(t){if(this.topics[t])return this.topics[t];const n=new kue(t,this);return this.topics[t]=n,n}startBatchCommands(){this.isBatchingCommands=!0,this.batchCommands=[]}endBatchCommands(){this.isBatchingCommands=!1,this.ws.send(JSON.stringify(this.batchCommands)),this.batchCommands=[]}async sendCommand(t){const n=this.nextRequestId++;this.commandCallbacks[n]=Promise.withResolvers();const r={id:n,command:t};this.isBatchingCommands?this.batchCommands.push(r):this.ws.send(JSON.stringify([r]));const s=await this.commandCallbacks[n].promise;return delete this.commandCallbacks[n],s}}class kue{constructor(t,n){this.topicId=t,this.client=n}state=2;#e=new h3;#t=!1;onMessage(t){return this.#e.on("message",n=>t(n.payload))}handleMessage(t){this.#e.publish({kind:"message",payload:t})}handleDisconnect(){this.state=1,this.#t=!1}async subscribe(){if(this.state!==0&&(this.state=1,this.client.isTransportOpen&&!this.#t)){this.#t=!0;const t=await this.client.sendCommand({type:"subscribe",topic_id:this.topicId});if(this.#t=!1,t.type==="subscribe"&&t.topic_id===this.topicId)this.state=0;else throw new Error("Unexpected reply to subscribe command")}}unsubscribe(){this.state!==2&&((this.state===0||this.#t)&&this.client.sendCommand({type:"unsubscribe",topic_id:this.topicId}),this.state=2)}}class Aue{webSocketState$;start=0;connectTime=0;hasLoggedGetSocketURL=!1;didLogPingFromWorker=!1;didLogPingFromServer=!1;pingId=dr();actionMetadata={};constructor(t){this.webSocketState$=MN(t)}onFetchSocketURL=()=>{if(!this.hasLoggedGetSocketURL){const t=performance.now()-this.start;this.actionMetadata.socket_url_duration=t,this.actionMetadata.socket_url_time=t,R.addAction("ws.get-socket-url",this.actionMetadata),Sn.hist(dn.WEBSOCKET,"get-socket-url",[],t),this.hasLoggedGetSocketURL=!0}};#e=({payload:t})=>{const{ping_id:n,source:r}=t;if(!(n!=null&&n!==this.pingId)){if(r==="server"&&!this.didLogPingFromServer){this.didLogPingFromServer=!0;const s=performance.now()-this.start,i=s-this.connectTime;this.actionMetadata.receive_server_ping_time=s,this.actionMetadata.receive_server_ping_duration=i,R.addAction("ws.receive-server-ping",this.actionMetadata),Sn.hist(dn.WEBSOCKET,"receive-server-ping",[],i)}if((r==="worker"||r==null)&&!this.didLogPingFromWorker){this.didLogPingFromWorker=!0;const s=performance.now()-this.start,i=s-this.connectTime;this.actionMetadata.receive_ping_time=s,this.actionMetadata.receive_ping_duration=i,R.addAction("ws.receive-ping",this.actionMetadata),Sn.hist(dn.WEBSOCKET,"receive-ping",[],i)}this.didLogPingFromWorker&&this.didLogPingFromServer&&Df.off("ping",this.#e)}};async run(){try{R.addAction("ws.init"),Sn.count(dn.WEBSOCKET,"init"),this.start=performance.now(),await hF(()=>this.webSocketState$()==="connected"),this.connectTime=performance.now()-this.start;const t=this.connectTime-Number(this.actionMetadata.socket_url_time);this.actionMetadata.connect_time=this.connectTime,this.actionMetadata.connect_duration=t,R.addAction("ws.connect",this.actionMetadata),Sn.hist(dn.WEBSOCKET,"connect",[],t),Df.on("ping",this.#e),R.addAction("ws.send-ping",this.actionMetadata),H.safePost("/celsius/ping",{requestBody:{ping_id:this.pingId}})}catch(t){R.addAction("ws.error",{error:t}),Sn.count(dn.WEBSOCKET,"error")}}}const Mue=It(e=>new Aue(e));function Iue(e){if(we(e,"1819663106")){Tue(e).init();return}const t=we(e,"1281927149");(we(e,"4141006638")||t)&&xue(e,t?Mue(e):void 0)}function Nue(e){Ft(e)&&(jq(e),Iue(e))}let uE=!1;function Rue(e){uE||(uE=!0,Nue(e))}const Qv="_tm",dl="_m";var Pue=(e=>(e.SHARE_NOT_FOUND="share_not_found",e.SHARED_POST_NOT_FOUND="shared_post_not_found",e.GIZMO_NOT_FOUND="gizmo_not_found",e.NO_ACCESS="no_access",e.OAUTH_SUCCESS="oauth_success",e.OAUTH_FAILED_GENERIC="oauth_failed_generic",e.OAUTH_FAILED_SCOPE_MISMATCH="oauth_failed_scope_mismatch",e.OAUTH_FAILED_EMAIL_DOMAIN_ENFORCEMENT="oauth_failed_email_domain_enforcement",e.CUSTOM_ERROR="c_err",e.CUSTOM_MSG="c_msg",e.ACCOUNT_TRANSFER_ERROR="account_transfer_error",e.MFA_ENABLED="mfa_enabled",e.ENABLE_MFA_ERROR="enable_mfa_error",e.DISABLE_MFA_SUCCESS="disable_mfa_success",e.DISABLE_MFA_TIMEOUT="disable_mfa_timeout",e.CANVAS_NOT_FOUND="canvas_not_found",e))(Pue||{});function sCe(e,t="/",n){const r=typeof window<"u",s=new URL(t,r?window.location.origin:window.location.origin);return s.searchParams.set(Qv,e),(e==="c_err"||e==="c_msg")&&(n?s.searchParams.set(dl,n):s.searchParams.set(dl,"An error has occurred")),s.pathname+s.search+s.hash}function Due(){const[e]=zf(),{pathname:t,hash:n}=fr(),r=Fr(),s=Ue(),i=Rt();m.useEffect(()=>{const o=e.get(Qv);if(o!==void 0){const a=(c,l,u,d,f)=>{const h=typeof c=="string"?c:s.formatMessage(c);i[d](h,{id:l,duration:u,hasCloseButton:f});const g=new URLSearchParams(e);g.delete(Qv),g.delete(dl),r({search:`?${g.toString()}`,hash:n},{replace:!0})};switch(o){case"share_not_found":R.addAction("global_toast.conversation_inaccessible",{path:t}),a(yr.conversationInaccessible,"share_not_found",10,"warning",!0);break;case"shared_post_not_found":a(yr.sharedPostNotFound,"shared_post_not_found",10,"warning",!0);break;case"gizmo_not_found":a(yr.gizmoNotFound,"gizmo_not_found",10,"warning",!0);break;case"no_access":a(yr.noAccess,"no_access",5,"warning",!0);break;case"oauth_success":a(yr.oauthSuccess,"oauth_success",5,"success",!0);break;case"oauth_failed_generic":a(yr.oauthFailedGeneric,"oauth_failed_generic",5,"warning",!0);break;case"oauth_failed_scope_mismatch":a(yr.oauthFailedScopeMismatch,"oauth_failed_scope_mismatch",5,"warning",!0);break;case"oauth_failed_email_domain_enforcement":a(yr.oauthFailedEmailDomainEnforcement,"oauth_failed_email_domain_enforcement",5,"warning",!0);break;case"c_msg":a(e.get(dl),"c_msg",10,"success",!0);break;case"c_err":a(e.get(dl),"c_err",5,"warning",!0);break;case"account_transfer_error":a({id:"globalToasts.accountTransferError",defaultMessage:"Error transferring account. To retry, go to Settings → Merge.",description:"Error when unable to transfer their personal account to the workspace"},"account_transfer_error",5,"warning",!0);break;case"mfa_enabled":a({id:"enableMfa.success",defaultMessage:"Multi-factor authentication enabled",description:"Confirmation toast after an MFA enable action is successfully executed"},"mfa_enabled",5,"success",!0);break;case"enable_mfa_error":a({id:"enrollMfa.failure",defaultMessage:"Error occurred. Please try again.",description:"Error toast after MFA token request failed"},"enable_mfa_error",5,"warning",!0);break;case"disable_mfa_success":a(yr.disableMfaSuccess,"disable_mfa_success",5,"success",!0);break;case"disable_mfa_timeout":a(yr.disableMfaTimeout,"disable_mfa_timeout",5,"warning",!0);break;case"canvas_not_found":a(yr.canvasNotFound,"canvas_not_found",5,"warning",!1);break}}},[s,i,t,e,r,n])}const yr=ze({conversationInaccessible:{id:"globalToasts.conversationInaccessible",defaultMessage:"Conversation inaccessible or not found. You may need to switch accounts or request access if this conversation exists."},sharedPostNotFound:{id:"globalToasts.sharedPostNotFound",defaultMessage:"This share is inaccessible or not found."},gizmoNotFound:{id:"globalToasts.gizmoNotFound",defaultMessage:"This GPT is inaccessible or not found. Ensure you are logged in, verify you’re in the correct ChatGPT.com workspace, or request access if you believe you should have it, if it exists."},noAccess:{id:"globalToasts.noAccess",defaultMessage:"You do not currently have access to this feature"},oauthSuccess:{id:"globalToasts.oauthSuccess",defaultMessage:"Your account is now connected"},oauthFailedGeneric:{id:"globalToasts.oauthFailedGeneric",defaultMessage:"Something went wrong with setting up the connection"},oauthFailedScopeMismatch:{id:"globalToasts.oauthFailedScopeMismatch",defaultMessage:"Not all requested permissions were granted"},oauthFailedEmailDomainEnforcement:{id:"globalToasts.oauthFailedEmailDomainEnforcement",defaultMessage:"Your company has an enterprise workspace that manages connector access. Contact your enterprise admin to get access."},disableMfaSuccess:{id:"disableMfa.success",defaultMessage:"Multi-factor authentication disabled"},disableMfaTimeout:{id:"disableMfa.timeout",defaultMessage:"Your last log in was too long ago, please try again"},canvasNotFound:{id:"canvasNotFound",defaultMessage:"This canvas is inaccessible or not found. Ensure you are logged in, verify you’re in the correct ChatGPT.com workspace, or request access if you believe you should have it, if it exists."}});var Lue=NM();const Fue=Ot(Lue);let Go;function jue(){let e;return{promise:new Promise(n=>{e=n}),resolve:e}}const{promise:Uue,resolve:Bue}=jue();function iCe(e){Go=e,Bue(e)}async function que(){try{const e=Go?.getHost();return e?await e.getToolNames():null}catch{return null}}const Gue=6e4,Hue="unqfp8es",Vue="kaur1br5",oCe="side_chat",aCe="ntp",cCe="website";function wu(){return Go?.getHost()}function zue(){const[e,t]=m.useState(()=>wu());return m.useEffect(()=>{if(e)return;let n=!0;return Uue.then(r=>{n&&t(r.getHost())}),()=>{n=!1}},[e]),e}function lCe(){return Go?.getLinkHandler()}function uCe(){return Go?.getProductEventHandler()}function dCe(e,t){return Go?Promise.race([$ue(e,t),new Promise(n=>setTimeout(()=>n(null),Gue))]):Promise.resolve(null)}async function $ue(e,t){const n=await Go?.getSidebarWhisperContent();return!n||!n.content?null:await NN(n,IN(e?.url),e,t)}function Wue(e,t){return e.map(n=>({id:n.fileid,name:n.name,size:n.size,mime_type:n.mimetype,...t&&{kaur1br5:{source:{url:t.url,host:t.url?new URL(t.url).hostname:void 0,title:t.title}}}}))}function IN(e){return e?`${Hue} - ${e}`:void 0}async function NN(e,t,n,r){const{imageAssetPointers:s,content:i,files:o}=e;if(!i)throw new Error("Whisper content is missing content");let a;if(s){const c=s.map(u=>({content_type:Qt.ImageAssetPointer,asset_pointer:u.assetPointer,size_bytes:u.sizeBytes,width:u.width,height:u.height})),l=i;a={content_type:Ee.MultimodalText,parts:[...c,l]}}else a={content_type:Ee.Text,parts:[i]};return Nh(a,{is_visually_hidden_from_conversation:!0,attachments:Wue(o??[],n),exclusive_key:t,...await Kue(n,r,"context")})}async function fCe(e,t){if(!(!e||!Ur()||!Ms.whisperContent))return await NN(Ms.whisperContent,IN(e.url),e,t)}async function Kue(e,t,n){const r=c=>{const l=c.trim();if("Intl"in window&&"Segmenter"in Intl){const u=navigator.language||"en-US",f=new Intl.Segmenter(u,{granularity:"word"}).segment(l);let h=0;for(const g of f)g.isWordLike&&h++;return h}return l.split(/\s+/).filter(u=>u.length>0).length};let s,i;if(e?.selection){const c=e.selection;i=r(c),s=c.length>1e3?c.substring(0,1e3):c}let o;try{const c=wu();c&&(o=await c.getClientID())}catch{}const a={origin:t,type:n,client_id:o,sources:e?[{id:e.id,url:e.url,host:e.url?new URL(e.url).hostname:void 0,title:e.title,...s&&{selection:s,selection_word_count:i},base64favicon:e.base64favicon??void 0}]:[]};return{[Vue]:a}}const La=qr(()=>({activeRequests:{}})),hCe=e=>{const{activeRequests:t}=La.getState();return t[e]??null},RN=e=>Do(La,e);function pCe(e){return RN(t=>PN(e,t))}function PN(e,t=La.getState()){return e!=null&&t.activeRequests[e]!=null}function mCe(){return RN(e=>Object.keys(e.activeRequests).length>0)}const Lf={addRequest(e,t,n){La.setState(r=>({activeRequests:{...r.activeRequests,[e]:{id:e,abortController:t,turnTracker:n}}}))},removeRequest(e){La.setState(t=>{const n={...t.activeRequests};return delete n[e],{activeRequests:n}})},abortRequest(e){const{activeRequests:t}=La.getState();return t[e]!=null?(t[e].abortController.abort(),Lf.removeRequest(e),!0):!1}},fp=It(()=>({conversations:{},newClientIdToServerId:{},allKnownConversationIds$:nt([])}));function Yue(e){const t=nt(null);return{id:e,serverId$:nt(ur(e)),bufferedWebsocketMessages$:nt([]),asyncStatus$:()=>t(),setAsyncStatus$:r=>{Zue(t(),r)&&t.set(r)}}}function Zue(e,t){return!(e?.value===Bn.REALTIME&&t?.value===Bn.STREAMING)}function Eu(e,t){const{conversations:n,newClientIdToServerId:r}=fp(e);if(n[t]!=null)return n[t];if(lu(t)){const i=r[t];if(i!=null&&n[i]!=null)return n[i]}const s=Yue(t);return n[t]=s,Que(e),s}function Jue(e,t,n){const r=Eu(e,t);r.serverId$.set(n);const{conversations:s,newClientIdToServerId:i}=fp(e);delete s[t],s[n]=r,lu(t)&&(i[t]=n,hf.setServerIdForNewThread(t,n))}function gCe(e){const{conversations:t,allKnownConversationIds$:n}=fp(e);return n(),Object.values(t)}let n_;function Que(e){n_==null&&(n_=window.setTimeout(()=>{const{conversations:t,allKnownConversationIds$:n}=fp(e);n.set(Object.keys(t)),n_=void 0},100))}const _Ce=m.createContext(void 0),vCe=e=>{const t=Y();return Ii(()=>e===void 0?null:Eu(t,e).asyncStatus$())},mC=(e,t)=>Eu(e,t).asyncStatus$(),ga=(e,t)=>{Eu(Xe(),e).setAsyncStatus$(t)};async function DN(e,t=Z.getRequestId(Ht(e)),n=!1){const r=PN(t),s=Xe(),i=ur(e),o=mC(s,e),a=o?.value===Bn.REALTIME,c=o?.value===Bn.STREAMING,l=Z.getCurrentNode(Ht(e)),d=(()=>{const _=l?.message;return _?AG(_):!1})(),f=c&&l?.message?.metadata?.model_slug?.endsWith("-pro");if(!r&&!a&&!f&&!(c&&n))return;lt(e,_=>{_.interruptionInProgress=!0});let g;return i&&we(s,"3922476776")&&(g=await H.safePost("/stop_conversation",{requestBody:{conversation_id:i,check_async_status:a||f&&!r},authOption:ht.SendIfAvailable})),r&&!d&&Lf.abortRequest(t),lt(e,_=>{_.interruptionInProgress=!1}),g}const Ff=new Set,yCe=e=>{m.useEffect(()=>(Ff.add(e),()=>{Ff.delete(e)}),[e])},Xue=()=>Ff.size>0,ede=()=>Promise.allSettled(Array.from(Ff).map(e=>e()));class tde{completionStartTime=Date.now();completionEndTime;blurDuringCompletionTime;refocusTime;constructor(){window.addEventListener("blur",this.onWindowBlur)}logFocusAfterBlurDuringCompletionEvent=()=>{Fe.logEvent("chatgpt_focus_after_blur_during_completion",null,{completion_duration_ms:`${this.completionEndTime-this.completionStartTime}`,blur_time_ms:`${this.blurDuringCompletionTime-this.completionStartTime}`,refocus_time_ms:`${this.refocusTime-this.completionStartTime}`}),P.logEvent("Focus After Blur During Completion",{completion_duration_ms:`${this.completionEndTime-this.completionStartTime}`,blur_time_ms:`${this.blurDuringCompletionTime-this.completionStartTime}`,refocus_time_ms:`${this.refocusTime-this.completionStartTime}`})};onWindowBlur=()=>{this.blurDuringCompletionTime===void 0&&(this.blurDuringCompletionTime=Date.now(),window.addEventListener("focus",this.onWindowFocusAfterBlur))};onWindowFocusAfterBlur=()=>{this.refocusTime=Date.now(),this.completionEndTime!==void 0&&this.logFocusAfterBlurDuringCompletionEvent(),this.cleanupFocusAfterBlurListener()};cleanupFocusAfterBlurListener=()=>{window.removeEventListener("focus",this.onWindowFocusAfterBlur)};onMessageError=()=>{window.removeEventListener("blur",this.onWindowBlur)};onMessageDone=()=>{window.removeEventListener("blur",this.onWindowBlur),this.blurDuringCompletionTime!==void 0&&(this.completionEndTime=Date.now(),Fe.logEvent("chatgpt_blur_during_completion",null,{completion_duration_ms:`${this.completionEndTime-this.completionStartTime}`,blur_time_ms:`${this.blurDuringCompletionTime-this.completionStartTime}`}),P.logEvent("Blur During Completion",{completion_duration_ms:`${this.completionEndTime-this.completionStartTime}`,blur_time_ms:`${this.blurDuringCompletionTime-this.completionStartTime}`}),this.refocusTime!==void 0&&this.logFocusAfterBlurDuringCompletionEvent())}}const Xv=new Set,CCe=e=>{m.useEffect(()=>(Xv.add(e),()=>{Xv.delete(e)}),[e])},dE=e=>{for(const t of Xv)try{t({error:e})}catch(n){R.addError(n)}},bc=vt(()=>({messagesDevData:{},activeNodeId:void 0,ui:{focusedNodeId:void 0}})),nde=()=>bc.getState().ui.focusedNodeId,Sc=()=>bc.getState().messagesDevData;function bCe(e){const t=Object.keys(Sc()),n=t.indexOf(e);if(n===-1)throw new Error("Key not found in object");const r=(n+1)%t.length;return t[r]}function SCe(e){const t=Object.keys(Sc()),n=t.indexOf(e);if(n===-1)throw new Error("Key not found in object");const r=(n-1+t.length)%t.length;return t[r]}function wCe(e){return Object.keys(Sc()).indexOf(e)}const ECe=()=>Object.keys(Sc()).length;var r_,fE;function rde(){if(fE)return r_;fE=1;function e(t,n){for(var r,s=-1,i=t.length;++s<i;){var o=n(t[s]);o!==void 0&&(r=r===void 0?o:r+o)}return r}return r_=e,r_}var s_,hE;function sde(){if(hE)return s_;hE=1;var e=rde(),t=NaN;function n(r,s){var i=r==null?0:r.length;return i?e(r,s)/i:t}return s_=n,s_}var i_,pE;function ide(){if(pE)return i_;pE=1;var e=sde(),t=w2();function n(r){return e(r,t)}return i_=n,i_}var ode=ide();const ade=Ot(ode);function cde(e){return e.length===0?null:e.reduce((n,r)=>n+r,0)/e.length}function lde(e){const t=e.length;if(t===0)return 0;const n=cde(e)||0,r=e.reduce((s,i)=>s+Math.pow(i-n,2),0)/t;return Math.sqrt(r)}function mE(e,t){const n=e.slice().sort((a,c)=>a-c),r=t*(n.length-1),s=Math.floor(r),i=Math.ceil(r);if(s===i)return n[s];const o=r-s;return(1-o)*n[s]+o*n[i]}function ude(e){if(e.length===0)return null;const t=e.slice().sort((r,s)=>r-s),n=Math.floor(t.length/2);return t.length%2===0?(t[n-1]+t[n])/2:t[n]}var br=(e=>(e.FirstTokenLatency="first_token_lat",e.TotalRequestTime="total_request_time",e.TokenCount="token_count",e.StdDevTokenLatency="std_dev_token_lat",e.MeanTokenLatency="mean_token_lat",e.MedianTokenLatency="median_token_lat",e.MinTokenLatency="min_token_lat",e.MaxTokenLatency="max_token_lat",e.P95TokenLatency="p95_token_lat",e.P99TokenLatency="p99_token_lat",e))(br||{});const LN=e=>{const t=e.filter(f=>f.requestCount>1);let n=0;for(let f=0;f<e.length;f++){const h=e[f];if(n=h.requestDuration,h.content!=="")break}const r=mE(t.map(f=>f.lastTokenDuration),.95),s=mE(t.map(f=>f.lastTokenDuration),.99),i=ade(t.map(f=>f.lastTokenDuration)),o=ude(t.map(f=>f.lastTokenDuration)),a=t.filter(f=>f.lastTokenDuration!==0).reduce((f,h)=>Math.min(f,h.lastTokenDuration),1/0),c=t.reduce((f,h)=>Math.max(f,h.lastTokenDuration),-1/0),l=lde(t.map(f=>f.lastTokenDuration)),u=e[e.length-1]?.requestDuration;return[{id:"first_token_lat",name:"First Token lat.",stat:n>0?`${n.toFixed(2)}ms`:null,value:n>0?n:null,category:"summary"},{id:"total_request_time",name:"Total request time",stat:u?`${(u/1e3).toFixed(2)}s`:null,value:u||null,category:"summary"},{id:"token_count",name:"Token count",stat:`${e.length}`,value:e.length,category:"summary"},{id:"std_dev_token_lat",name:"Std dev Token lat.",stat:`${l.toFixed(2)}`,value:l,category:"token"},{id:"mean_token_lat",name:"Mean Token lat.",stat:i?`${i.toFixed(2)}ms`:null,value:i??null,category:"aggregate"},{id:"median_token_lat",name:"Median Token lat.",stat:o?`${o.toFixed(2)}ms`:null,value:o??null,category:"token"},{id:"min_token_lat",name:"Min Token lat.",stat:`${a.toFixed(2)}ms`,value:a??null,category:"token"},{id:"max_token_lat",name:"Max Token lat.",stat:`${c.toFixed(2)}ms`,value:c??null,category:"token"},{id:"p95_token_lat",name:"p95 Token lat.",stat:r?`${r.toFixed(2)}ms`:null,value:r??null,category:"aggregate"},{id:"p99_token_lat",name:"p99 Token lat.",stat:s?`${s.toFixed(2)}ms`:null,value:s??null,category:"aggregate"}]},xCe=()=>{const e=Sc(),t=nde();if(!e||!t)return{stats:[],targetLatencyData:[]};const r=e[t]?.data??[];return{stats:LN(r),targetLatencyData:r}},dde=(e,t,n,r)=>{bc.setState(s=>{const i={focusedNodeId:e},o={status:"active",data:[],model:t,serverRequestId:n,preflightTime:r};return{...s,activeNodeId:e,ui:i,messagesDevData:{...s.messagesDevData,[e]:o}}})},fde=(e,t,n)=>{const r=n?.search_source;bc.setState(s=>{const i=s.messagesDevData[e];return{...s,activeNodeId:e,messagesDevData:{...s.messagesDevData,[e]:{...i,data:[...i?.data??[],t],searchSource:r}}}})},Kr=(e,t)=>t.find(n=>n.id===e)?.value,hde=e=>{if(!Ft(Xe()))return;const n=Sc()[e],r=LN(n.data),{preflightTime:s,model:i,serverRequestId:o,searchSource:a}=n;return H.safePost("/lat/r",{requestBody:{server_request_id:o,model:i,preflight_time_ms:s,search_source:a,count_tokens:Kr(br.TokenCount,r)??0,ts_first_token_ms:Kr(br.FirstTokenLatency,r),ts_max_token_time_ms:Kr(br.MaxTokenLatency,r),ts_mean_token_without_first_ms:Kr(br.MeanTokenLatency,r),ts_median_token_without_first_ms:Kr(br.MedianTokenLatency,r),ts_min_token_time_ms:Kr(br.MinTokenLatency,r),ts_p95_token_without_first_ms:Kr(br.P95TokenLatency,r),ts_p99_token_without_first_ms:Kr(br.P99TokenLatency,r),ts_std_dev_token_ms:Kr(br.StdDevTokenLatency,r),ts_total_request_ms:Kr(br.TotalRequestTime,r)}})},pde=e=>bc.setState(t=>{const n={...t.messagesDevData[e],status:"finished"};return{...t,messagesDevData:{...t.messagesDevData,[e]:n}}}),TCe=e=>bc.setState(t=>({...t,ui:{...t.ui,focusedNodeId:e}}));class mde{constructor(t,n){this.requestLatencyId=t,this.requestStartTime=n,this.requestLastTokenTime=n}requestLastTokenTime;requestCount=0;requestTimes=[];onResponse(t,n,r){const s=performance.now(),i=s-this.requestLastTokenTime,o=s-this.requestStartTime;this.requestLastTokenTime=s,this.requestCount+=1;const a={requestCount:this.requestCount,requestDuration:o,lastTokenDuration:Number(JSON.stringify(i)),messageType:n.content.content_type,content:rf(n)?Xl(n):""};this.requestTimes.push(a),t.type==="message"?fde(this.requestLatencyId,a,n.metadata):t.type==="done"&&r!=null&&(pde(this.requestLatencyId),hde(this.requestLatencyId))}}const gde=(e,t)=>{const{isCompletion:n,messageId:r,conversationId:s,flagged:i,blocked:o,disclaimers:a,metadata:c,shouldDisableConversation:l}=e,u=!!a?.length&&n;lt(t,d=>{tr.updateTree(d,f=>{const h=f.messageIdToNodeId(r);o&&f.clearNodeMessageParts(h);const g=o,_=c?.safety_limited??!1;f.updateNodeMetadata(h,{...(u&&!!a?.length&&Jx(a,o))??{},...i&&Yx,...o&&Qx({isSafetyLimited:_,shouldDisableConversation:l,isModelIncompatibility:g}),...l&&Zx,completionSampleFinishTime:Date.now()})})}),P.logEvent(n?o?"Moderation: Completion Content Blocked":"Moderation: Completion Content Flagged":o?"Moderation: Prompt Content Blocked":"Moderation: Prompt Content Flagged",{threadId:s,id:r})};var o_,gE;function FN(){if(gE)return o_;gE=1;var e=iT(),t=tu(),n=BI(),r=SA();function s(i,o){if(i==null)return{};var a=e(r(i),function(c){return[c]});return o=t(o),n(i,a,function(c,l){return o(c,l[0])})}return o_=s,o_}var _de=FN();const jN=Ot(_de),_E={base_config:void 0,eval_preset:void 0,sonicberry_model_ids:void 0,settings_overrides:void 0,dump_sub_conversation:void 0};vt(e=>({settings:UN(),setSettings:t=>{e({settings:t}),de.setCookie(ie.InternalSearchSettings,JSON.stringify(t),{maxAge:2*365*24*60*60})}}));function UN(){let e;try{const t=de.getCookie(ie.InternalSearchSettings);e=t?JSON.parse(t):_E}catch{e=_E}return jN(e,t=>!!t)}const BN=(e=Xe(),t=!1)=>Ft(e)?Nt(e)?.planType===Re.FREE?gt(e,"3178812292",{disableExposureLog:t}):gt(e,"3703416703",{disableExposureLog:t}):gt(e,"2861477803",{disableExposureLog:t}),vde=(e=Xe())=>{const t=bu().fConversationEndpoint;return t==="convo2"?!0:t==="convo1"?!1:we(e,"4154476537")?!0:BN(e,!0).get("use_f_prepare",!1)},gC=(e=Xe(),t=!1)=>{const n=bu().fConversationEndpoint;return n==="convo2"?!0:n==="convo1"?!1:we(e,"4154476537")?!0:BN(e,t).get("use_f_convo",!1)},yde=()=>UN().fast_search??!1;function vE(e,t){uu.setState(n=>{const r=n.threads[e];if(r)r.prepareRequestBlocked=t,t||(r.lastCompletionFinishedTimestamp=performance.now());else{const s=ur(e);if(s){const i=n.threads[s];i&&(i.prepareRequestBlocked=t,t||(i.lastCompletionFinishedTimestamp=performance.now()))}}})}function Cde(e){window.history.pushState({},"",e)}const bde="starredConversations",OCe=5,yE="snorlaxConversations",Sde="disable_history",kCe="user_latency_tools",ACe="mfa",MCe="chatgpt_allow_workspace_instruction",ICe="workspace_ip_allowlist";var wde=(e=>(e.BrowsingAvailable="browsing_available",e.Sunshine="sunshine_available",e.WorkspaceGPTCustomActions="workspace_gpt_custom_actions",e.WorkspaceShareLinks="workspace_share_links",e.GizmoSupportEmails="gizmo_support_emails",e.D3Editor="d3_editor",e.D3EditorAllGpts="d3_editor_gpts",e.DataAnalysisV2="graphite",e.ChartSerialization="chart_serialization",e.SearchTool="search_tool",e.SearchToolHoldout="search_tool_holdout",e.MemoryInSearch="memory_in_search",e.Canvas="canvas",e.CanvasCodeExecution="canvas_code_execution",e.CanvasCodeNetworkAccess="canvas_code_network_access",e.GizmoCanvasToggle="gizmo_canvas_toggle",e.Moonshine="moonshine",e.VideoScreenSharing="video_screen_sharing",e.DeepResearch="caterpillar",e.AllowVoiceUse="breeze_available",e.ImageGenToggle="image_gen_toggle",e))(wde||{});const Ede=28,_C="conversationHistory",xde="conversation-history",Tde=1;function qN(){return RR({queryKey:[_C],queryFn:async({pageParam:e})=>{const t=await H.safeGet("/conversations",{parameters:{query:{offset:e,limit:Ede,order:"updated",is_archived:!1}},intercomEventOnError:"fetch-error:conversations:get",authOption:ht.SendIfAvailable});return R.addFirstTiming("load.conversationHistory"),pF(()=>{for(const n of t.items)n.async_status!=null&&Eu(Xe(),n.id).setAsyncStatus$({source:ws.SERVER,value:n.async_status})}),t},initialPageParam:0,getNextPageParam:e=>{const t=(e.offset??0)+(e.limit??0);return t<(e.total??0)?t:void 0}})}function NCe(e={}){"use forget";const{buckets:t,recentConversationLimit:n}=e,s=Bx()?.includes(Sde)??!1,i=Y(),o=Nt(i),a=!s&&!!o,c=Ue(),u=Q3(),d=O2(xde,Tde,[_C]),{data:f,fetchNextPage:h,hasNextPage:g,isLoading:_,isFetchingNextPage:v,isError:y,refetch:C}=fy({...qN(),enabled:a,refetchOnReconnect:u?"always":!0,refetchOnWindowFocus:u?"always":!0,placeholderData:d}),E=m.useMemo(()=>f?.pages.flatMap(x=>x.items)??[],[f]),b=m.useMemo(()=>{if(!f||!t)return[];const w=Ode(E,c);return[w.recent,w.dynamicMonths,w.dynamicYears].flatMap(T=>Object.entries(T).map(([O,{items:A,label:k}],I)=>({key:`${O}-${I}`,label:k,items:A}))).filter(T=>T.items.length>0)},[E,f,c,t]),S=m.useMemo(()=>{const w=E.slice(0,n??5);return{key:"recents",label:c.formatMessage(Jc.historyBucketRecent),items:w}},[E,n,c]);return{buckets:b,conversations:E,data:f,fetchNextPage:h,hasNextPage:g,refetch:C,recents:S,isLoading:_,isFetchingNextPage:v,isError:y}}function Ode(e,t){return e.reduce((n,r)=>{const s=new Date(r.update_time??r.create_time??0),i=bM(new Date,s);if(i===0)n.recent.today.items.push(r);else if(i<=1)n.recent.yesterday.items.push(r);else if(i<=7)n.recent.lastSeven.items.push(r);else if(i<=30)n.recent.lastThirty.items.push(r);else if($ne(s)){const o=s7(s),a=Gne(s),c=`${o}-${a}`;n.dynamicMonths[c]?n.dynamicMonths[c].items.push(r):n.dynamicMonths[c]={label:t.formatDate(s,{month:"long"}),items:[r]}}else{const a=`${s7(s)}-`;n.dynamicYears[a]?n.dynamicYears[a].items.push(r):n.dynamicYears[a]={label:t.formatDate(s,{year:"numeric"}),items:[r]}}return n},{recent:{today:{label:t.formatMessage(Jc.historyBucketToday),items:[]},yesterday:{label:t.formatMessage(Jc.historyBucketYesterday),items:[]},lastSeven:{label:t.formatMessage(Jc.historyBucketLastSeven),items:[]},lastThirty:{label:t.formatMessage(Jc.historyBucketLastThirty),items:[]}},dynamicMonths:{},dynamicYears:{}})}function GN(e,t){e.invalidateQueries({queryKey:[_C]}),e.invalidateQueries({queryKey:[bde]}),t?e.invalidateQueries({queryKey:[yE,{gizmoId:t}]}):e.invalidateQueries({queryKey:[yE]})}function kde(e,t,n){Ul(e).setQueryData(qN().queryKey,r=>{if(r!==void 0)return Sr(r,s=>{for(const i of s.pages)for(const o of i.items)o.id===t&&(o.title=n)})})}const Jc=ze({historyBucketRecent:{id:"history.bucket.recent",defaultMessage:"Recent"},historyBucketToday:{id:"history.bucket.today",defaultMessage:"Today"},historyBucketYesterday:{id:"history.bucket.yesterday",defaultMessage:"Yesterday"},historyBucketLastSeven:{id:"history.bucket.lastSeven",defaultMessage:"Previous 7 Days"},historyBucketLastThirty:{id:"history.bucket.lastThirty",defaultMessage:"Previous 30 Days"}});function HN(e,t,n,r){lt(t,s=>{s.title=n,s.titleSource=r}),Ma.publish({kind:"updateThreadTitle",conversationId:t}),kde(e,t,n)}function Ade(e,t,n){const s=Z.getCurrentNode(Ht(t)).message.id;H.safePost("/conversation/gen_title/{conversation_id}",{parameters:{path:{conversation_id:t}},requestBody:{message_id:s},intercomEventOnError:"fetch-error:conversation:generate-title",authOption:ht.SendIfAvailable}).then(({title:i})=>{const o=Z.getGizmoId(Ht(t));HN(e,t,i,p3.Generated),GN(Ul(e),o),P.logEvent("Rename Thread",{threadId:t,content:i,model:n})})}function Mde(e,t,n,r,s){const i=Z.getGizmoId(Ht(n));i!=null?Yce(t,i).then(o=>{if(r){e(sd(n,o));return}Cde(sd(n,o))}).catch(o=>{R.addError(o),e(sd(n))}):e(sd(n))}var Xr=(e=>(e.Unavailable="unavailable",e.Thinking="thinking",e.Generating="generating",e.AsyncGenerating="async_generating",e.AsyncHanging="async_hanging",e.Complete="complete",e.Errored="errored",e.Empty="empty",e))(Xr||{});const Ide=["generating","async_generating","async_hanging","thinking"],Nde="sj1i4kz",Fa=`${oo.T2UAY3K}.${Nde}`;function vC(e){return e.author.role==="tool"&&e.author.name===Fa&&e.content.content_type===Ee.MultimodalText}function Rde(e,{skipSort:t}={skipSort:!1}){let n=e.filter(i=>vC(i)&&!i.metadata?.is_visually_hidden_from_conversation);t||(n=[...n].sort((i,o)=>(i.metadata?.generation_index??0)-(o.metadata?.generation_index??0)));const r=n.flatMap(i=>v2.getImageAssetPointers(i)),s=n.map(i=>i.id);return{imageAssetPointers:r,messageIds:s}}const VN=(e,t)=>{const n=e.find(_=>_.author.role===fe.Tool&&[Ee.Error,Ee.SystemError].includes(_.content.content_type)||_.metadata?.is_error),{imageAssetPointers:r}=Rde(e),s=r.length>0,o=e.some(_=>vC(_))&&!s,a=e.some(_=>{if(_.metadata?.image_gen_async)return!1;const v=_.author.name===oo.IMAGE_GEN_HALLUCINATED||_.author.name===Fa,y=_.content.content_type===Ee.Text,C=!!_.metadata?.is_visually_hidden_from_conversation;return v&&y&&C}),c=e.length>0&&!!e[e.length-1]?.metadata?.image_gen_async,u=!e.some(_=>[Fa,oo.IMAGE_GEN_HALLUCINATED].includes(_.author.name??"")&&_.content.content_type===Ee.MultimodalText)&&e.some(_=>{const v=[Fa,oo.IMAGE_GEN_HALLUCINATED].includes(_.author.name??""),y=_.recipient==="assistant";return v&&y});let d=0;for(const _ of r){const v=_.height,y=_.metadata?.generation?.height??void 0;d+=v!==void 0&&y!==void 0?y/v:0}const f=r.length>0?d/r.length:0,h=n!==void 0,g=t?Xr.AsyncGenerating:Xr.AsyncHanging;if(o||a||u)return Xr.Empty;if(h)return Xr.Errored;if(f){if(f<1)return c?g:Xr.Generating;if(f===1)return Xr.Complete}else return c?g:Xr.Thinking;return Xr.Unavailable},Pde=e=>VN([e],!0)===Xr.Complete,Dde=e=>e.author.role===fe.Assistant&&e.recipient===Fa;function RCe(e){return(e.author.name===Fa||Dde(e))&&Ide.includes(VN([e],!0))}const Lde=["notificationSettings"];class Fde{static async getOrCreateSubscription({endpoint:t,p256dh:n,auth:r}){return H.safePost("/notifications/subscription/register",{requestBody:{platform:"web",web_metadata:{endpoint:t,p256dh:n},token:r}})}static async getSettings(){return H.safeGet("/notifications/settings")}static async updateSettings(t){const{category:n,...r}=t;return H.safePatch("/notifications/settings",{requestBody:{updates:{[n]:r}}})}}const jde=1e4,zN=vt(Ri(()=>({notifications:[]}))),Ude=e=>{const t=crypto.randomUUID();zN.setState(r=>{r.notifications.push({...e,id:t})});const n=e.timeout??jde;setTimeout(()=>{Bde(t)},n)},Bde=e=>{zN.setState(t=>{t.notifications=t.notifications.filter(n=>n.id!==e)})},PCe=({onSuccess:e,alwaysRefetchOnMount:t=!1})=>$e({queryKey:Lde,queryFn:async()=>{const r=(await Fde.getSettings()).settings;return e?.(r),r},refetchOnMount:t?"always":!0});function qde(e,t){return t&&(e?.kind===St.GizmoInteraction||e?.kind===St.PrimaryAssistant)?{gizmo_id:t,kind:St.GizmoInteraction}:e}function Gde(e){return e==null||[St.PrimaryAssistant,St.GizmoInteraction].includes(e.kind)}function DCe(e,t){"use forget";const n=xe.c(5);let r;n[0]!==t?(r=o=>qde(o?.mode,t),n[0]=t,n[1]=r):r=n[1];const s=Hs(e,r),{data:i}=uN(s!=null&&"gizmo_id"in s?s.gizmo_id:void 0,s?.kind===St.GizmoTest);if(s!=null)switch(s.kind){case St.GizmoInteraction:case St.GizmoMagicCreate:case St.GizmoTest:{let o;return n[2]!==s||n[3]!==i?(o={gizmo:i,...s},n[2]=s,n[3]=i,n[4]=o):o=n[4],o}case St.FlyingCircusCustomization:case St.PrimaryAssistant:return s}}const jf=vt(Ri(()=>null)),Hde={updateDetails:e=>{["beacon_banner_info","beacon_modal_info"].includes(e.ui_info.type)&&jf.setState(()=>({...e}),!0)},dismiss:()=>{jf.setState(()=>null,!0)}};function LCe(){return jf(e=>e?.ui_info.type==="beacon_banner_info"?e:null)}function FCe(){return jf(e=>e?.ui_info.type==="beacon_modal_info"?e:null)}const jCe="https://help.openai.com/en/articles/8590148-memory-faq";function $N(e,t=!0){return["memories",{gizmoId:e,includeMemoryEntries:t}]}function UCe(e,t=!0,n=!0){return $e({queryKey:$N(e,t),queryFn:async()=>{const r=await H.safeGet("/memories",{parameters:{query:{gizmo_id:e,include_memory_entries:t}}}),s=Math.min(Math.floor(100*r.memory_num_tokens/r.memory_max_tokens),100);return{...r,memoryFullPct:s}},refetchOnMount:"always",enabled:n})}const Vde=(e,t)=>{window.__reactRouterDataRouter.navigate(e,t)};var a_,CE;function zde(){if(CE)return a_;CE=1;var e=Gr(),t=function(){return e.Date.now()};return a_=t,a_}var c_,bE;function $de(){if(bE)return c_;bE=1;var e=qs(),t=zde(),n=cT(),r="Expected a function",s=Math.max,i=Math.min;function o(a,c,l){var u,d,f,h,g,_,v=0,y=!1,C=!1,E=!0;if(typeof a!="function")throw new TypeError(r);c=n(c)||0,e(l)&&(y=!!l.leading,C="maxWait"in l,f=C?s(n(l.maxWait)||0,c):f,E="trailing"in l?!!l.trailing:E);function b(N){var j=u,q=d;return u=d=void 0,v=N,h=a.apply(q,j),h}function S(N){return v=N,g=setTimeout(T,c),y?b(N):h}function w(N){var j=N-_,q=N-v,D=c-j;return C?i(D,f-q):D}function x(N){var j=N-_,q=N-v;return _===void 0||j>=c||j<0||C&&q>=f}function T(){var N=t();if(x(N))return O(N);g=setTimeout(T,w(N))}function O(N){return g=void 0,E&&u?b(N):(u=d=void 0,h)}function A(){g!==void 0&&clearTimeout(g),v=0,u=_=d=g=void 0}function k(){return g===void 0?h:O(t())}function I(){var N=t(),j=x(N);if(u=arguments,d=this,_=N,j){if(g===void 0)return S(_);if(C)return clearTimeout(g),g=setTimeout(T,c),b(_)}return g===void 0&&(g=setTimeout(T,c)),h}return I.cancel=A,I.flush=k,I}return c_=o,c_}var Wde=$de();const Kde=Ot(Wde),WN={[fn.LoggedIn]:Qe.LoggedInUserMessageCount,[fn.LoggedOut]:Qe.NoAuthUserMessageCount},Yde=vt(Ri(()=>({messageCountByAuthStatus:{[fn.LoggedIn]:SE(fn.LoggedIn),[fn.LoggedOut]:SE(fn.LoggedOut)}})));function BCe(e){return e.messageCountByAuthStatus[fn.LoggedOut]}function qCe(e){return e.messageCountByAuthStatus[fn.LoggedIn]}const Zde={incrementUserMessageCount:e=>{Yde.setState(t=>{const n=t.messageCountByAuthStatus[e]+1;t.messageCountByAuthStatus[e]=n,Jde({authStatus:e,messageCount:n})})}};function SE(e){const t=localStorage.getItem(WN[e]);return t?Number(t):0}function Jde({authStatus:e,messageCount:t}){localStorage.setItem(WN[e],String(t))}function Qde(e){return!(e.type==="perf_stats"||e.type==="server_ste_metadata"||e.type==="message_marker")}var rt=(e=>(e.Starter="starter",e.Reply="reply",e.Capabilities="capabilities",e.Autocomplete="autocomplete",e.Trending="trending",e))(rt||{}),Xde=(e=>(e.Search="Search",e.Canvas="Canvas",e.Image="Image",e.ContextualAnswers="ContextualAnswers",e.ContextualAnswersNUX="ContextualAnswersNUX",e.ChatGPTTrending="ChatGPTTrending",e.ImageGenTrending="ImageGenTrending",e.Slurm="Slurm",e.Tatertot="Tatertot",e))(Xde||{});let fl=null;async function KN(){return fl==null&&(fl=await que()),fl??[]}function GCe(e){return fl==null?!1:fl.includes(e)}var Ss=(e=>(e.Success="success",e.Error="error",e.Canceled="canceled",e))(Ss||{});async function*efe(e,t){let n=null;for await(const r of e)if("response"in r)yield r;else if(r.event==="delta_encoding"){const s=String(r.data);if(t?.(s),s==="v1")n=new tfe;else throw new Error(`[delta] unknown delta encoding: ${s}`)}else if(r.event==="delta"){if(!n)throw new Error("[delta] delta event before delta_encoding");yield{data:n.applyDelta(r.data)}}else yield r}var YN=(e=>(e.V1="v1",e))(YN||{});class tfe{prevObjByChannel=[];prevDelta={channel:0,op:"add",path:"",value:void 0};applyDelta(t){try{const n=this.decodeDelta(t),r=n.channel,s=this.prevObjByChannel[r],i=sfe(s,n);return this.prevObjByChannel[r]=i,i}catch(n){R.addError(`Error applying delta: ${n}`)}}decodeDelta(t){rfe(t);const n=nfe(t,this.prevDelta),r=ZN(n);return this.prevDelta=r,r}}function nfe(e,t){for(const[n,r]of JN)n!=="value"&&!(r in e)&&(e[r]=t[n]);return e}function ZN(e){const t=e;for(const[n,r]of JN)r in e&&(t[n]=e[r],delete e[r]);return t.op==="patch"&&(t.value=t.value.map(ZN)),t}function rfe(e){if(!e||typeof e!="object")throw new Error("Unexpected delta non-object")}const JN=[["channel","c"],["path","p"],["op","o"],["value","v"]];function sfe(e,t){return Sr({__root:e},r=>QN(r,t)).__root}function QN(e,t){const n=afe(t.path??"");for(let s=0;s<n.length-1;s++)e[n[s]]===void 0&&(typeof n[s+1]=="number"?e[n[s]]=[]:e[n[s]]={}),e=e[n[s]];const r=n[n.length-1];switch(t.op){case"patch":for(const s of t.value){const i={__root:e[r]};QN(i,s),e[r]=i.__root}break;case"add":Array.isArray(e)?e.splice(r,0,t.value):e[r]=t.value;break;case"remove":Array.isArray(e)?e.splice(r,1):delete e[r];break;case"replace":e[r]=t.value;break;case"append":if(typeof e[r]=="string")e[r]+=t.value;else if(Array.isArray(e[r]))e[r].push(...cfe(t.value));else if(wE(e[r])&&wE(t.value))for(const s in t.value)e[r][s]=t.value[s];else e[r]=t.value;break;case"truncate":e[r]&&(typeof e[r]=="string"?e[r]=e[r].substring(0,t.value):Array.isArray(e[r])&&(e[r].length=t.value));break;default:throw new Error("Unknown json delta operation")}}function ife(e){return e.replace(/~1/g,"/").replace(/~0/g,"~")}const ofe=/^(?:0|[1-9]\d*)$/d;function afe(e){const t=["__root"];if(e==="")return t;e[0]==="/"&&(e=e.substring(1));for(const n of e.split("/"))ofe.test(n)?t.push(parseInt(n,10)):t.push(ife(n));return t}function cfe(e){return Array.isArray(e)?e:[e]}function wE(e){return typeof e=="object"&&e!=null&&!Array.isArray(e)}function lfe(e){let t=!1;const n=[],r=[];function s(c){n.length>0?n.shift()(c):r.push(c)}function i(c){t||s({value:c,done:!1})}function o(){t||(t=!0,n.forEach(c=>c({value:void 0,done:!0})),n.length=0)}function a(c){t||(s(Promise.reject(c)),o())}try{e(i,o,a)}catch(c){a(c)}return{next(){return new Promise(c=>{r.length>0?c(r.shift()):t?c({value:void 0,done:!0}):n.push(c)})},[Symbol.asyncIterator](){return this}}}async function ufe(e,t){const n=e.getReader();let r;for(;!(r=await n.read()).done;)t(r.value)}function dfe(e){let t,n,r,s=!1;return function(o){t===void 0?(t=o,n=0,r=-1):t=hfe(t,o);const a=t.length;let c=0;for(;n<a;){s&&(t[n]===10&&(c=++n),s=!1);let l=-1;for(;n<a&&l===-1;++n)switch(t[n]){case 58:r===-1&&(r=n-c);break;case 13:s=!0;case 10:l=n;break}if(l===-1)break;e(t.subarray(c,l),r),c=n,r=-1}c===a?t=void 0:c!==0&&(t=t.subarray(c),n-=c)}}function ffe(e,t,n){let r=EE();const s=new TextDecoder;return function(o,a){if(o.length===0)n?.(r),r=EE();else if(a>0){const c=s.decode(o.subarray(0,a)),l=a+(o[a+1]===32?2:1),u=s.decode(o.subarray(l));switch(c){case"data":r.data=r.data?r.data+`
`+u:u;break;case"event":r.event=u;break;case"id":e(r.id=u);break;case"retry":const d=parseInt(u,10);isNaN(d)||t(r.retry=d);break}}}}function hfe(e,t){const n=new Uint8Array(e.length+t.length);return n.set(e),n.set(t,e.length),n}function EE(){return{data:"",event:"",id:"",retry:void 0}}var pfe=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(e);s<r.length;s++)t.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(e,r[s])&&(n[r[s]]=e[r[s]]);return n};const ey="text/event-stream",mfe=1e3,xE="last-event-id";function gfe(e,t){var{signal:n,headers:r,onopen:s,onmessage:i,onclose:o,onerror:a,openWhenHidden:c,fetch:l}=t,u=pfe(t,["signal","headers","onopen","onmessage","onclose","onerror","openWhenHidden","fetch"]);return new Promise((d,f)=>{const h=Object.assign({},r);h.accept||(h.accept=ey);let g;function _(){g.abort(),document.hidden||S()}c||document.addEventListener("visibilitychange",_);let v=mfe,y=0;function C(){document.removeEventListener("visibilitychange",_),window.clearTimeout(y),g.abort()}n?.addEventListener("abort",()=>{C(),d()});const E=l??window.fetch,b=s??_fe;async function S(){var w;g=new AbortController;try{const x=await E(e,Object.assign(Object.assign({},u),{headers:h,signal:g.signal}));await b(x),await ufe(x.body,dfe(ffe(T=>{T?h[xE]=T:delete h[xE]},T=>{v=T},i))),o?.(),C(),d()}catch(x){if(!g.signal.aborted)try{const T=(w=a?.(x))!==null&&w!==void 0?w:v;window.clearTimeout(y),y=window.setTimeout(S,T)}catch(T){C(),f(T)}}}S()})}function _fe(e){const t=e.headers.get("content-type");if(!t?.startsWith(ey))throw new Error(`Expected content-type to be ${ey}, Actual: ${t}`)}function vfe(e){if(typeof navigator<"u"&&!navigator.onLine||e instanceof TypeError)return!0;if(e instanceof Error){const t=e.message.toLowerCase();if(t.includes("failed to fetch")||t.includes("networkerror when attempting to fetch resource")||t.includes("network error")||t.includes("load failed")||t.includes("failed to resolve")||t.includes("dns")||/\b(enotfound|eai_again|eaddrinfo|econnrefused|econnreset|etimedout)\b/.test(t))return!0}return!1}function TE(e){return e.headers.get("x-request-id")??e.headers.get("cf-ray")??void 0}function yC(e,{ctx:t,method:n,headers:r,body:s,intercomEventOnError:i,signal:o,observer:a}={}){return lfe((c,l,u)=>{let d=!1;function f(_){if(d)return _;d=!0;try{return u(_),a?.onClose?.("error",_),_}finally{_ instanceof je?(dx(_,"stream"),fx(_),i&&Xy(i,{url:_.url,message:_.message})):(R.addError(_),P.logEvent("request_stream_error",{error:_ instanceof Error?_.message:String(_)}))}}function h(){if(!d)if(d=!0,o?.aborted){const _=o.reason??new DOMException("Aborted","AbortError");u(_),a?.onClose?.("aborted",_)}else l(),a?.onClose?.("completed")}const g=t?fh(t):void 0;gfe(e,{method:n,credentials:"include",headers:{...g?bh({accessToken:g}):Ch(),...s?{"Content-Type":"application/json"}:null,...r},body:s?JSON.stringify(s):void 0,signal:o,openWhenHidden:!0,async onopen(_){const v=_.headers.get("content-type")??"";if(_.ok&&v.includes("text/event-stream"))c({response:_}),a?.onOpen?.(_);else if(v.includes("application/json")){const y=await _.json();throw f(new je(e,_.status,y,TE(_)))}else{const y=await _.text();throw f(new je(e,_.status,{detail:{message:XR,code:"unexpected_content_type",contentType:v,text:y.substring(0,1e3)}},TE(_)))}},onmessage(_){const v=new TextEncoder,y=_.data==="[DONE]";if(a?.onEvent?.({byteLength:v.encode(_.data).length,isDoneEvent:y}),_.event==="ping"||!_.data)return;if(y){h();return}const C=JSON.parse(_.data);C.error?f(je.createWithErrorMessage(e,"server",C.error)):c({event:_.event||void 0,data:C})},onerror(_){const v=_ instanceof Error?_:new Error(JSON.stringify(_));throw vfe(v)?f(je.createWithErrorMessage(e,"client",Ua)):v.message==="Failed to fetch"?(P.logFailedToFetchError({source:"request_stream"}),f(je.createWithErrorMessage(e,"server",`An error occurred. Either the engine you requested does not exist or there was another issue processing your request. ${hy}`))):f(v)}}).then(h,f)})}function yfe(e){let t=2166136261;for(let n=0;n<e.length;n++)t^=e.charCodeAt(n),t=Math.imul(t,16777619)>>>0;return t^=t>>>16,t=Math.imul(t,2246822507)>>>0,t^=t>>>13,t=Math.imul(t,3266489909)>>>0,t^=t>>>16,(t>>>0).toString(16).padStart(8,"0")}class Cfe{answers=new Map;maxAttempts=5e5;requirementsSeed=bfe();sid=dr();errorPrefix="wQ8Lk5FbGpA2NcR9dShT6gYjU7VxZ4D";async initializeAndGatherData(t){this._getAnswer(t)}async startEnforcement(t){this._getAnswer(t)}getEnforcementTokenSync(t){const n=this._getAnswer(t);return typeof n=="string"?n:null}async getEnforcementToken(t,n){return this._getAnswer(t,n?.forceSync)}async getRequirementsToken(){return this.answers.has(this.requirementsSeed)||this.answers.set(this.requirementsSeed,this._generateAnswerAsync(this.requirementsSeed,"0")),"gAAAAAC"+await this.answers.get(this.requirementsSeed)}getRequirementsTokenBlocking(){return"gAAAAAC"+this._generateRequirementsTokenAnswerBlocking()}_getAnswer(t,n=!1){const r="gAAAAAB";if(!t?.proofofwork?.required)return null;const{seed:s,difficulty:i}=t.proofofwork;if(!(typeof s=="string"&&typeof i=="string"))return null;const o=this.answers.get(s);if(typeof o=="string")return o;if(n){const a=this._generateAnswerSync(s,i),c=r+a;return this.answers.set(s,c),c}return this.answers.has(s)||this.answers.set(s,this._generateAnswerAsync(s,i)),Promise.resolve().then(async()=>r+await this.answers.get(s)).then(a=>(this.answers.set(s,a),a))}_runCheck=(t,n,r,s,i)=>{s[3]=i,s[9]=Math.round(performance.now()-t);const o=cd(s);return yfe(n+o).substring(0,r.length)<=r?o+"~S":null};buildGenerateFailMessage(t){return this.errorPrefix+cd(String(t??"e"))}_generateAnswerSync(t,n){const r=performance.now();try{const s=this.getConfig();for(let i=0;i<this.maxAttempts;i++){const o=this._runCheck(r,t,n,s,i);if(o)return o}}catch(s){return this.buildGenerateFailMessage(s)}return this.buildGenerateFailMessage()}async _generateAnswerAsync(t,n){const r=performance.now();try{let s=null;const i=this.getConfig();for(let o=0;o<this.maxAttempts;o++){(!s||s.timeRemaining()<=0)&&(s=await wfe());const a=this._runCheck(r,t,n,i,o);if(a)return a}}catch(s){return this.buildGenerateFailMessage(s)}return this.buildGenerateFailMessage()}_generateRequirementsTokenAnswerBlocking(){let t="e";const n=performance.now();try{const r=this.getConfig();return r[3]=1,r[9]=Math.round(performance.now()-n),cd(r)}catch(r){t=cd(String(r))}return this.errorPrefix+t}getConfig(){return[screen?.width+screen?.height,""+new Date,performance?.memory?.jsHeapSizeLimit,Math?.random(),navigator.userAgent,jd(Array.from(document.scripts).map(t=>t?.src).filter(t=>t)),(Array.from(document.scripts||[]).map(t=>t?.src?.match("c/[^/]*/_")).filter(t=>t?.length)[0]??[])[0]??document.documentElement.getAttribute("data-build"),navigator.language,navigator.languages?.join(","),Math?.random(),Sfe(),jd(Object.keys(document)),jd(Object.keys(window)),performance.now(),this.sid,[...new URLSearchParams(window.location.search).keys()].join(","),navigator?.hardwareConcurrency,performance.timeOrigin]}}function jd(e){return e[Math.floor(Math.random()*e.length)]}function bfe(){return""+Math.random()}function Sfe(){const e=jd(Object.keys(Object.getPrototypeOf(navigator)));try{return`${e}−${navigator[e].toString()}`}catch{return`${e}`}}function cd(e){return e=JSON.stringify(e),window.TextEncoder?btoa(String.fromCharCode(...new TextEncoder().encode(e))):btoa(unescape(encodeURIComponent(e)))}function wfe(){return new Promise(e=>{(window.requestIdleCallback||Efe)(n=>{e(n)},{timeout:10})})}function Efe(e){return setTimeout(()=>{e({timeRemaining:()=>1,didTimeout:!1})},0),0}const ty=new Cfe,xfe=0,Tfe=1,Ofe=2,kfe=3,Afe=4,Mfe=5,Ife=6,Nfe=24,Rfe=7,Pfe=8,ja=9,Dfe=10,Lfe=11,Ffe=12,jfe=13,Ufe=14,Bfe=15,XN=16,qfe=17,Gfe=18,Hfe=19,Vfe=23,zfe=20,$fe=21,Wfe=22,Kfe=25,Yfe=26,Zfe=27,Jfe=28,V=new Map;let hl=0;function eR(){for(;V.get(ja).length>0;){const[e,...t]=V.get(ja).shift();V.get(e)(...t),hl++}}function ny(e){return new Promise((t,n)=>{setTimeout(()=>t(""+hl),100),V.set(kfe,r=>t(btoa(""+r))),V.set(Afe,r=>n(btoa(""+r)));try{V.set(ja,JSON.parse(tR(atob(e),""+V.get(XN)))),eR(),t(btoa(""+hl))}catch(r){t(btoa(hl+": "+r))}})}function Qfe(e){Xfe(),hl=0,V.set(XN,e)}function tR(e,t){let n="";for(let r=0;r<e.length;r++)n+=String.fromCharCode(e.charCodeAt(r)^t.charCodeAt(r%t.length));return n}function Xfe(){V.clear(),V.set(xfe,ny),V.set(Tfe,(e,t)=>V.set(e,tR(""+V.get(e),""+V.get(t)))),V.set(Ofe,(e,t)=>V.set(e,t)),V.set(Mfe,(e,t)=>{const n=V.get(e);Array.isArray(n)?n.push(V.get(t)):V.set(e,n+V.get(t))}),V.set(Zfe,(e,t)=>{const n=V.get(e);Array.isArray(n)?n.splice(n.indexOf(V.get(t)),1):V.set(e,n-V.get(t))}),V.set(Ife,(e,t,n)=>V.set(e,V.get(t)[V.get(n)])),V.set(Rfe,(e,...t)=>V.get(e)(...t.map(n=>V.get(n)))),V.set(qfe,(e,t,...n)=>V.set(e,V.get(t)(...n.map(r=>V.get(r))))),V.set(jfe,(e,t,...n)=>{try{V.get(t)(...n)}catch(r){V.set(e,""+r)}}),V.set(Pfe,(e,t)=>V.set(e,V.get(t))),V.set(Dfe,window),V.set(Lfe,(e,t)=>V.set(e,(Array.from(document.scripts||[]).map(n=>n?.src?.match(V.get(t))).filter(n=>n?.length)[0]??[])[0]??null)),V.set(Ffe,e=>V.set(e,V)),V.set(Ufe,(e,t)=>V.set(e,JSON.parse(""+V.get(t)))),V.set(Bfe,(e,t)=>V.set(e,JSON.stringify(V.get(t)))),V.set(Gfe,e=>V.set(e,atob(""+V.get(e)))),V.set(Hfe,e=>V.set(e,btoa(""+V.get(e)))),V.set(zfe,(e,t,n,...r)=>V.get(e)===V.get(t)?V.get(n)(...r):null),V.set($fe,(e,t,n,r,...s)=>Math.abs(V.get(e)-V.get(t))>V.get(n)?V.get(r)(...s):null),V.set(Vfe,(e,t,...n)=>V.get(e)!==void 0?V.get(t)(...n):null),V.set(Nfe,(e,t,n)=>V.set(e,V.get(t)[V.get(n)].bind(V.get(t)))),V.set(Wfe,(e,t)=>{const r=[...V.get(ja)];V.set(ja,[...t]);try{eR()}catch(s){V.set(e,""+s)}finally{V.set(ja,r)}}),V.set(Jfe,()=>{}),V.set(Yfe,()=>{}),V.set(Kfe,()=>{})}const ehe=1e3*60*9;var pl=(e=>(e.NOAUTH="chatgpt-noauth",e.FREEACCOUNT="chatgpt-freeaccount",e.PAID="chatgpt-paid",e))(pl||{}),the=(e=>(e.ChatRequirementsToken="OpenAI-Sentinel-Chat-Requirements-Token",e.TurnstileToken="OpenAI-Sentinel-Turnstile-Token",e.ProofToken="OpenAI-Sentinel-Proof-Token",e.Token="OpenAI-Sentinel-Token",e))(the||{});let nhe=-1,wr=null;function rhe(){if(wr){const{chatRequirements:e,expiration:t}=wr;if(Date.now()>=t)return wr=null,null;if(e)return wr=null,e}return null}async function she(e=!1){if(wr){const{expiration:s,chatRequirementsPromise:i}=wr;if(Date.now()<s)try{return e||(wr=null),i}catch{}else i.then(o=>R.addAction("chat_requirements_cache_expired",{app:o.persona.toString()}));wr=null}const t=ty.getRequirementsTokenBlocking();Qfe(t);const n=H.safePost("/sentinel/chat-requirements",{requestBody:{p:t},authOption:ht.SendIfAvailable}),r=++nhe;return e&&(wr={id:r,chatRequirements:null,chatRequirementsPromise:n.then(s=>(wr?.id===r&&(wr.chatRequirements=s),s)),expiration:Date.now()+ehe}),n}function ihe(){return new Promise((e,t)=>{const n=document.createElement("script");n.type="text/javascript",n.src=window.location.origin+"/backend-api/sentinel/sdk.js",n.async=!0,n.defer=!0,n.onload=e,n.onerror=t,document.getElementsByTagName("head")[0].appendChild(n)})}function HCe(e){return ohe().then(()=>window.SentinelSDK.token(e))}const ohe=(()=>{let e;return()=>(e||(e=ihe()),e)})();function ahe(e,t,n,r){const s={};return e?.token&&(s["OpenAI-Sentinel-Chat-Requirements-Token"]=e.token),t&&(s["OpenAI-Sentinel-Turnstile-Token"]=t),n&&(s["OpenAI-Sentinel-Proof-Token"]=n),r&&(s["OpenAI-Sentinel-Token"]=r),s}const Qc=e=>{if(e.type===rt.Starter&&e.category==="onboarding")return"";switch(e.type){case rt.Reply:return e.text;case rt.Starter:case rt.Autocomplete:case rt.Trending:case rt.Capabilities:return e.prompt}},che=e=>e.type===rt.Reply,nR=e=>e.type===rt.Starter,CC=e=>e.type===rt.Autocomplete,rR=e=>e.type===rt.Trending,Uf=e=>CC(e)&&!!e.theme,sR=e=>e.type===rt.Capabilities,lhe=e=>rR(e)||sR(e)||CC(e)&&!Uf(e),VCe=(e,t,n,r)=>{switch(Fe.logEvent("chatgpt_prompt_use_suggestion",lhe(e)?"":Qc(e),{id:nR(e)||Uf(e)?e.id??"":"",index:`${t}`,type:e.type}),e.type){case rt.Reply:P.logEvent("Use Suggested Reply",{value:Qc(e),prompt_type:rt.Reply,messageId:r});break;case rt.Capabilities:P.logEvent("Use Capabilities Suggestion",{prompt_type:rt.Capabilities,categoryId:e.categoryId,client_thread_id:n,messageId:r});break;case rt.Starter:P.logEvent("Use Starter Prompt",{value:Qc(e),prompt_type:rt.Starter,title:e.title,body:e.body,id:e.id,category:e.category,client_thread_id:n,messageId:r,index:t,theme:e.theme});break;case rt.Autocomplete:{const s=Uf(e);P.logEvent("Use Autocomplete",{value:s?Qc(e):"",prompt_type:rt.Autocomplete,title:s?e.title:"",body:s?e.body:"",id:s?e.id:"",category:e.category,index:t,messageId:r,client_thread_id:n,theme:e.theme??""});break}case rt.Trending:{P.logEvent("Use Trending Prompt",{prompt_type:rt.Trending,title:e.title,index:t,messageId:r,client_thread_id:n});break}}},zCe=(e,t)=>{if(e.length===0)return;const r=Z.getCurrentNode(Ht(t)).message.id;if(Fe.logEvent("chatgpt_prompt_show_suggestions",`count_${e.length}`,{type:e[0].type}),e.every(che))P.logEvent("Show Suggested Replies",{prompt_count:e.length,prompt_type:rt.Reply,client_thread_id:t,suggestions:e.map(s=>s.text),message_id:r});else if(e.every(nR)){const{isAdditional:s}=e[0];P.logEvent(s?"More Starter Prompts Shown":"Show Starter Prompts",{prompt_count:e.length,prompt_type:rt.Starter,titles:e.map(i=>i.title),bodies:e.map(i=>i.body),ids:e.map(i=>i.id),client_thread_id:t,message_id:r,themes:e.map(i=>i.theme??"")}),s&&P.logEvent("Expand More Starter Prompts",{client_thread_id:t,message_id:r})}else if(e.every(CC)){const s=!!e.find(i=>Uf(i));P.logEvent("Show Autocomplete Prompts",{prompt_count:e.length,prompt_type:e[0].type,titles:e.map(i=>s?i.title:""),bodies:e.map(i=>s?i.body:""),ids:e.map(i=>s?i.id:""),client_thread_id:t,message_id:r,themes:e.map(i=>i.theme??"")})}else e.every(rR)?P.logEvent("Show Trending Prompts",{prompt_count:e.length,prompt_type:rt.Trending,titles:e.map(s=>s.title),client_thread_id:t,message_id:r}):e.every(sR)?P.logEvent("Show Capabilities Suggestions",{prompt_count:e.length,prompt_type:rt.Capabilities,category_ids:e.map(s=>s.categoryId),client_thread_id:t,message_id:r}):R.addError("Unhandled suggestion type",{type:e[0].type})},$Ce=e=>{const n=Z.getCurrentNode(Ht(e)).message.id;P.logEvent("Show Expand More Starter Prompts Button",{client_thread_id:e,message_id:n})},WCe=e=>{const n=Z.getCurrentNode(Ht(e)).message.id;P.logEvent("Expand More Starter Prompts",{client_thread_id:e,message_id:n})},oa=ze({searchPlaceholder:{id:"PromptTextarea.searchPlaceholder",defaultMessage:"Search the web"},thinkPlaceholder:{id:"PromptTextarea.thinkPlaceholder",defaultMessage:"Ask anything"},connectorPlaceholder:{id:"PromptTextarea.connectorPlaceholder",defaultMessage:"Search connected sources"},researchPlaceholder:{id:"PromptTextarea.researchPlaceholder",defaultMessage:"Get a detailed report"},canvasPlaceholder:{id:"PromptTextarea.canvasPlaceholder",defaultMessage:"Write or code"},picturePlaceholder:{id:"PromptTextarea.picturePlaceholder",defaultMessage:"Describe an image"},pictureV2Placeholder:{id:"PromptTextarea.pictureV2Placeholder",defaultMessage:"Describe an image"},contextualAnswersPlaceholder:{id:"PromptTextarea.contextualAnswersPlaceholder",defaultMessage:"Search internal sources"},tatertotPlaceholder:{id:"PromptTextarea.studyAndLearnPlaceholder",defaultMessage:"Learn something new"},continueGenerating:{id:"PromptTextarea.continueGenerating",defaultMessage:"Continue generating"},stopGenerating:{id:"PromptTextarea.stopGenerating",defaultMessage:"Stop generating"},disallowedByWorkspacePlaceholder:{id:"PromptTextarea.disallowedByWorkspaceReason",defaultMessage:"Your workspace owner hasn’t approved this GPT."},pimBlockPlaceholder:{id:"PromptTextarea.pimBlockPlaceholder",defaultMessage:"Potentially Malicious Content Detected"},noModelsAvailablePlaceholder:{id:"PromptTextarea.noModelsAvailablePlaceholder",defaultMessage:"No models available"},requiresPluginsToBeInstalled:{id:"PromptTextarea.requiresPluginsToBeInstalled",defaultMessage:"Requires plugins to be installed"},noTestGizmoId:{id:"PromptTextarea.noTestGizmoId",defaultMessage:"Start by defining your GPT."},searchWith:{id:"PromptTextarea.searchWith",defaultMessage:"Search with {name}"},loading:{id:"PromptTextarea.loading",defaultMessage:"Loading..."},placeholder:{id:"PromptTextarea.placeholder",defaultMessage:"Send a message"},placeholderWithName:{id:"PromptTextarea.placeholderWithName",defaultMessage:"Message {name}"},placeholderAskAnythingVariant:{id:"PromptTextarea.placeholderAskAnythingVariant",defaultMessage:"Ask anything"},placeholderAskNameAnythingVariant:{id:"PromptTextarea.placeholderAskNameAnythingVariant",defaultMessage:"Ask {name} anything"},continueSharedConversationPlaceholder:{id:"PromptTextarea.continueSharedConversationPlaceholder",defaultMessage:"Send a message to continue the conversation."},sendMessageTooltip:{id:"PromptTextarea.sendMessageTooltip",defaultMessage:"Send message"},unsupportedFileType:{id:"PromptTextarea.unsupportedFileType",defaultMessage:'Uploads with file type "{file_type}" are not supported, please try another file.'},gizmoKnowledgeWarning:{id:"PromptTextarea.gizmoKnowledgeWarning",defaultMessage:"Files uploaded here may be included in conversations with your GPT. Files can be downloaded if Code Interpreter is enabled."},n7jupdSystemHintPlaceholder:{id:"3pa1zs",defaultMessage:"Describe a task"},n7jupdActivePlaceholder:{id:"0qUILF",defaultMessage:"Follow up"}}),iR="prompt-textarea";function KCe(){document.getElementById(iR)?.focus()}const YCe={getAndReset:(e,t)=>{const n=_t.getItem(Qe.RestoreMessageAfterOauthRedirect);return _t.removeItem(Qe.RestoreMessageAfterOauthRedirect),!n||n.userId!==e||t!==n.serverThreadId||Date.now()>n.expiresAt?null:n},set:(e,t,n)=>{const r={userId:e,serverThreadId:t,inputText:n,expiresAt:Date.now()+6e4};_t.setItem(Qe.RestoreMessageAfterOauthRedirect,r)}},ZCe=()=>{"use forget";const e=xe.c(16),t=Hle(),n=Mo.useStore();let r;e[0]!==n?(r=g=>n.getPersistedSystemHintTrigger(g),e[0]=n,e[1]=r):r=e[1];const s=r;let i;e[2]!==t?(i=g=>t(null,{ifPrevSystemHint:g}),e[2]=t,e[3]=i):i=e[3];const o=i;let a;e[4]!==t?(a=()=>t(null),e[4]=t,e[5]=a):a=e[5];const c=a;let l;e[6]!==t?(l=(g,_,v,y)=>{_?t(g,{analyticsMetadata:v,triggerSource:y}):t(null,{ifPrevSystemHint:g,analyticsMetadata:v})},e[6]=t,e[7]=l):l=e[7];const u=l;let d;e[8]!==t?(d=(g,_)=>{t(g,{analyticsMetadata:_})},e[8]=t,e[9]=d):d=e[9];const f=d;let h;return e[10]!==c||e[11]!==o||e[12]!==s||e[13]!==u||e[14]!==f?(h={getSystemHintModeTrigger:s,clearSystemHintModeTrigger:o,setThreadSystemHintMode:u,clearAllSystemHintModeTriggers:c,updateSystemHint:f},e[10]=c,e[11]=o,e[12]=s,e[13]=u,e[14]=f,e[15]=h):h=e[15],h},JCe=({promptDisabledReason:e,hasPendingFiles:t,hasTextContent:n,isTextContentTooLong:r,hasAsyncTaskPending:s,noSourceSelectedDr:i,isDeepResearchTaskStreaming:o,isThreadHardBlocked:a})=>e||(a?"rate_limit_hard_block":t?"file_upload_pending":s?o?void 0:"async_task_pending":n?r?"text_content_too_long":i?"no_source_selected_dr":void 0:"empty_text_content"),uhe=e=>e.replace(/[\u{E0000}-\u{E007F}]+/gu,""),dhe=e=>{const t=uhe(e.getContentToSend().content);return Math.ceil(t.length/4)},QCe=({currentModelConfig:e,composerController:t})=>{const n=dhe(t);return typeof e?.maxTokens=="number"&&n>e.maxTokens};function XCe(e,t){return e?t===void 0?!0:t.includes(e):!1}const ebe=e=>{switch(e){case"pimBlock":return{placeholder:oa.pimBlockPlaceholder,isLastingDisabledStyle:!0};case"workspaceDisallowsGizmo":return{placeholder:oa.disallowedByWorkspacePlaceholder,isLastingDisabledStyle:!0};case"noModelsAvailable":return{placeholder:oa.noModelsAvailablePlaceholder,isLastingDisabledStyle:!0};case"requiresPluginsToBeInstalled":return{placeholder:oa.requiresPluginsToBeInstalled,isLastingDisabledStyle:!0};case"loadingPlugins":return{placeholder:oa.loading,isLastingDisabledStyle:!0};case"noTestGizmoId":return{placeholder:oa.noTestGizmoId,isLastingDisabledStyle:!0}}return null},fhe="OAI-Echo-Logs",aa={FOCUS_IN:0,FOCUS_OUT:1,COPY:2,PASTE:3,TOUCH_START:4,TOUCH_END:5},oR=[];function ca(e){return()=>{oR.push({type:e,ts:Math.round(performance.now())})}}const hhe={focusin:ca(aa.FOCUS_IN),focusout:ca(aa.FOCUS_OUT),copy:ca(aa.COPY),paste:ca(aa.PASTE),touchstart:ca(aa.TOUCH_START),touchend:ca(aa.TOUCH_END)};function tbe(e){const t=e??document.getElementById(iR);for(const[n,r]of Object.entries(hhe))t?.removeEventListener(n,r),t?.addEventListener(n,r)}function bC(){return{[fhe]:oR.slice(0,10).map(e=>`${e.type},${e.ts}`).join(",")}}var phe=typeof globalThis=="object"?globalThis:typeof self=="object"?self:typeof window=="object"?window:typeof global=="object"?global:{},io="1.6.0",OE=/^(\d+)\.(\d+)\.(\d+)(-(.+))?$/;function mhe(e){var t=new Set([e]),n=new Set,r=e.match(OE);if(!r)return function(){return!1};var s={major:+r[1],minor:+r[2],patch:+r[3],prerelease:r[4]};if(s.prerelease!=null)return function(c){return c===e};function i(a){return n.add(a),!1}function o(a){return t.add(a),!0}return function(c){if(t.has(c))return!0;if(n.has(c))return!1;var l=c.match(OE);if(!l)return i(c);var u={major:+l[1],minor:+l[2],patch:+l[3],prerelease:l[4]};return u.prerelease!=null||s.major!==u.major?i(c):s.major===0?s.minor===u.minor&&s.patch<=u.patch?o(c):i(c):s.minor<=u.minor?o(c):i(c)}}var ghe=mhe(io),_he=io.split(".")[0],Fl=Symbol.for("opentelemetry.js.api."+_he),jl=phe;function xu(e,t,n,r){var s;r===void 0&&(r=!1);var i=jl[Fl]=(s=jl[Fl])!==null&&s!==void 0?s:{version:io};if(!r&&i[e]){var o=new Error("@opentelemetry/api: Attempted duplicate registration of API: "+e);return n.error(o.stack||o.message),!1}if(i.version!==io){var o=new Error("@opentelemetry/api: Registration of version v"+i.version+" for "+e+" does not match previously registered API v"+io);return n.error(o.stack||o.message),!1}return i[e]=t,n.debug("@opentelemetry/api: Registered a global for "+e+" v"+io+"."),!0}function Io(e){var t,n,r=(t=jl[Fl])===null||t===void 0?void 0:t.version;if(!(!r||!ghe(r)))return(n=jl[Fl])===null||n===void 0?void 0:n[e]}function Tu(e,t){t.debug("@opentelemetry/api: Unregistering a global for "+e+" v"+io+".");var n=jl[Fl];n&&delete n[e]}var vhe=function(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var r=n.call(e),s,i=[],o;try{for(;(t===void 0||t-- >0)&&!(s=r.next()).done;)i.push(s.value)}catch(a){o={error:a}}finally{try{s&&!s.done&&(n=r.return)&&n.call(r)}finally{if(o)throw o.error}}return i},yhe=function(e,t,n){if(n||arguments.length===2)for(var r=0,s=t.length,i;r<s;r++)(i||!(r in t))&&(i||(i=Array.prototype.slice.call(t,0,r)),i[r]=t[r]);return e.concat(i||Array.prototype.slice.call(t))},Che=function(){function e(t){this._namespace=t.namespace||"DiagComponentLogger"}return e.prototype.debug=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return Pc("debug",this._namespace,t)},e.prototype.error=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return Pc("error",this._namespace,t)},e.prototype.info=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return Pc("info",this._namespace,t)},e.prototype.warn=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return Pc("warn",this._namespace,t)},e.prototype.verbose=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return Pc("verbose",this._namespace,t)},e}();function Pc(e,t,n){var r=Io("diag");if(r)return n.unshift(t),r[e].apply(r,yhe([],vhe(n),!1))}var Dn;(function(e){e[e.NONE=0]="NONE",e[e.ERROR=30]="ERROR",e[e.WARN=50]="WARN",e[e.INFO=60]="INFO",e[e.DEBUG=70]="DEBUG",e[e.VERBOSE=80]="VERBOSE",e[e.ALL=9999]="ALL"})(Dn||(Dn={}));function bhe(e,t){e<Dn.NONE?e=Dn.NONE:e>Dn.ALL&&(e=Dn.ALL),t=t||{};function n(r,s){var i=t[r];return typeof i=="function"&&e>=s?i.bind(t):function(){}}return{error:n("error",Dn.ERROR),warn:n("warn",Dn.WARN),info:n("info",Dn.INFO),debug:n("debug",Dn.DEBUG),verbose:n("verbose",Dn.VERBOSE)}}var She=function(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var r=n.call(e),s,i=[],o;try{for(;(t===void 0||t-- >0)&&!(s=r.next()).done;)i.push(s.value)}catch(a){o={error:a}}finally{try{s&&!s.done&&(n=r.return)&&n.call(r)}finally{if(o)throw o.error}}return i},whe=function(e,t,n){if(n||arguments.length===2)for(var r=0,s=t.length,i;r<s;r++)(i||!(r in t))&&(i||(i=Array.prototype.slice.call(t,0,r)),i[r]=t[r]);return e.concat(i||Array.prototype.slice.call(t))},Ehe="diag",ps=function(){function e(){function t(s){return function(){for(var i=[],o=0;o<arguments.length;o++)i[o]=arguments[o];var a=Io("diag");if(a)return a[s].apply(a,whe([],She(i),!1))}}var n=this,r=function(s,i){var o,a,c;if(i===void 0&&(i={logLevel:Dn.INFO}),s===n){var l=new Error("Cannot use diag as the logger for itself. Please use a DiagLogger implementation like ConsoleDiagLogger or a custom implementation");return n.error((o=l.stack)!==null&&o!==void 0?o:l.message),!1}typeof i=="number"&&(i={logLevel:i});var u=Io("diag"),d=bhe((a=i.logLevel)!==null&&a!==void 0?a:Dn.INFO,s);if(u&&!i.suppressOverrideMessage){var f=(c=new Error().stack)!==null&&c!==void 0?c:"<failed to generate stacktrace>";u.warn("Current logger will be overwritten from "+f),d.warn("Current logger will overwrite one already registered from "+f)}return xu("diag",d,n,!0)};n.setLogger=r,n.disable=function(){Tu(Ehe,n)},n.createComponentLogger=function(s){return new Che(s)},n.verbose=t("verbose"),n.debug=t("debug"),n.info=t("info"),n.warn=t("warn"),n.error=t("error")}return e.instance=function(){return this._instance||(this._instance=new e),this._instance},e}(),xhe=function(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var r=n.call(e),s,i=[],o;try{for(;(t===void 0||t-- >0)&&!(s=r.next()).done;)i.push(s.value)}catch(a){o={error:a}}finally{try{s&&!s.done&&(n=r.return)&&n.call(r)}finally{if(o)throw o.error}}return i},The=function(e){var t=typeof Symbol=="function"&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},Ohe=function(){function e(t){this._entries=t?new Map(t):new Map}return e.prototype.getEntry=function(t){var n=this._entries.get(t);if(n)return Object.assign({},n)},e.prototype.getAllEntries=function(){return Array.from(this._entries.entries()).map(function(t){var n=xhe(t,2),r=n[0],s=n[1];return[r,s]})},e.prototype.setEntry=function(t,n){var r=new e(this._entries);return r._entries.set(t,n),r},e.prototype.removeEntry=function(t){var n=new e(this._entries);return n._entries.delete(t),n},e.prototype.removeEntries=function(){for(var t,n,r=[],s=0;s<arguments.length;s++)r[s]=arguments[s];var i=new e(this._entries);try{for(var o=The(r),a=o.next();!a.done;a=o.next()){var c=a.value;i._entries.delete(c)}}catch(l){t={error:l}}finally{try{a&&!a.done&&(n=o.return)&&n.call(o)}finally{if(t)throw t.error}}return i},e.prototype.clear=function(){return new e},e}(),khe=Symbol("BaggageEntryMetadata"),Ahe=ps.instance();function Mhe(e){return e===void 0&&(e={}),new Ohe(new Map(Object.entries(e)))}function nbe(e){return typeof e!="string"&&(Ahe.error("Cannot create baggage metadata from unknown type: "+typeof e),e=""),{__TYPE__:khe,toString:function(){return e}}}function aR(e){return Symbol.for(e)}var Ihe=function(){function e(t){var n=this;n._currentContext=t?new Map(t):new Map,n.getValue=function(r){return n._currentContext.get(r)},n.setValue=function(r,s){var i=new e(n._currentContext);return i._currentContext.set(r,s),i},n.deleteValue=function(r){var s=new e(n._currentContext);return s._currentContext.delete(r),s}}return e}(),Nhe=new Ihe,wc=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,s){r.__proto__=s}||function(r,s){for(var i in s)Object.prototype.hasOwnProperty.call(s,i)&&(r[i]=s[i])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),Rhe=function(){function e(){}return e.prototype.createHistogram=function(t,n){return Ghe},e.prototype.createCounter=function(t,n){return qhe},e.prototype.createUpDownCounter=function(t,n){return Hhe},e.prototype.createObservableGauge=function(t,n){return zhe},e.prototype.createObservableCounter=function(t,n){return Vhe},e.prototype.createObservableUpDownCounter=function(t,n){return $he},e.prototype.addBatchObservableCallback=function(t,n){},e.prototype.removeBatchObservableCallback=function(t){},e}(),SC=function(){function e(){}return e}(),Phe=function(e){wc(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.add=function(n,r){},t}(SC),Dhe=function(e){wc(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.add=function(n,r){},t}(SC),Lhe=function(e){wc(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.record=function(n,r){},t}(SC),wC=function(){function e(){}return e.prototype.addCallback=function(t){},e.prototype.removeCallback=function(t){},e}(),Fhe=function(e){wc(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t}(wC),jhe=function(e){wc(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t}(wC),Uhe=function(e){wc(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t}(wC),Bhe=new Rhe,qhe=new Phe,Ghe=new Lhe,Hhe=new Dhe,Vhe=new Fhe,zhe=new jhe,$he=new Uhe,Whe={get:function(e,t){if(e!=null)return e[t]},keys:function(e){return e==null?[]:Object.keys(e)}},Khe={set:function(e,t,n){e!=null&&(e[t]=n)}},Yhe=function(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var r=n.call(e),s,i=[],o;try{for(;(t===void 0||t-- >0)&&!(s=r.next()).done;)i.push(s.value)}catch(a){o={error:a}}finally{try{s&&!s.done&&(n=r.return)&&n.call(r)}finally{if(o)throw o.error}}return i},Zhe=function(e,t,n){if(n||arguments.length===2)for(var r=0,s=t.length,i;r<s;r++)(i||!(r in t))&&(i||(i=Array.prototype.slice.call(t,0,r)),i[r]=t[r]);return e.concat(i||Array.prototype.slice.call(t))},Jhe=function(){function e(){}return e.prototype.active=function(){return Nhe},e.prototype.with=function(t,n,r){for(var s=[],i=3;i<arguments.length;i++)s[i-3]=arguments[i];return n.call.apply(n,Zhe([r],Yhe(s),!1))},e.prototype.bind=function(t,n){return n},e.prototype.enable=function(){return this},e.prototype.disable=function(){return this},e}(),Qhe=function(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var r=n.call(e),s,i=[],o;try{for(;(t===void 0||t-- >0)&&!(s=r.next()).done;)i.push(s.value)}catch(a){o={error:a}}finally{try{s&&!s.done&&(n=r.return)&&n.call(r)}finally{if(o)throw o.error}}return i},Xhe=function(e,t,n){if(n||arguments.length===2)for(var r=0,s=t.length,i;r<s;r++)(i||!(r in t))&&(i||(i=Array.prototype.slice.call(t,0,r)),i[r]=t[r]);return e.concat(i||Array.prototype.slice.call(t))},l_="context",epe=new Jhe,hp=function(){function e(){}return e.getInstance=function(){return this._instance||(this._instance=new e),this._instance},e.prototype.setGlobalContextManager=function(t){return xu(l_,t,ps.instance())},e.prototype.active=function(){return this._getContextManager().active()},e.prototype.with=function(t,n,r){for(var s,i=[],o=3;o<arguments.length;o++)i[o-3]=arguments[o];return(s=this._getContextManager()).with.apply(s,Xhe([t,n,r],Qhe(i),!1))},e.prototype.bind=function(t,n){return this._getContextManager().bind(t,n)},e.prototype._getContextManager=function(){return Io(l_)||epe},e.prototype.disable=function(){this._getContextManager().disable(),Tu(l_,ps.instance())},e}(),ry;(function(e){e[e.NONE=0]="NONE",e[e.SAMPLED=1]="SAMPLED"})(ry||(ry={}));var cR="0000000000000000",lR="00000000000000000000000000000000",tpe={traceId:lR,spanId:cR,traceFlags:ry.NONE},ml=function(){function e(t){t===void 0&&(t=tpe),this._spanContext=t}return e.prototype.spanContext=function(){return this._spanContext},e.prototype.setAttribute=function(t,n){return this},e.prototype.setAttributes=function(t){return this},e.prototype.addEvent=function(t,n){return this},e.prototype.setStatus=function(t){return this},e.prototype.updateName=function(t){return this},e.prototype.end=function(t){},e.prototype.isRecording=function(){return!1},e.prototype.recordException=function(t,n){},e}(),EC=aR("OpenTelemetry Context Key SPAN");function xC(e){return e.getValue(EC)||void 0}function npe(){return xC(hp.getInstance().active())}function TC(e,t){return e.setValue(EC,t)}function rpe(e){return e.deleteValue(EC)}function spe(e,t){return TC(e,new ml(t))}function uR(e){var t;return(t=xC(e))===null||t===void 0?void 0:t.spanContext()}var ipe=/^([0-9a-f]{32})$/i,ope=/^[0-9a-f]{16}$/i;function ape(e){return ipe.test(e)&&e!==lR}function cpe(e){return ope.test(e)&&e!==cR}function dR(e){return ape(e.traceId)&&cpe(e.spanId)}function lpe(e){return new ml(e)}var u_=hp.getInstance(),fR=function(){function e(){}return e.prototype.startSpan=function(t,n,r){r===void 0&&(r=u_.active());var s=!!n?.root;if(s)return new ml;var i=r&&uR(r);return upe(i)&&dR(i)?new ml(i):new ml},e.prototype.startActiveSpan=function(t,n,r,s){var i,o,a;if(!(arguments.length<2)){arguments.length===2?a=n:arguments.length===3?(i=n,a=r):(i=n,o=r,a=s);var c=o??u_.active(),l=this.startSpan(t,i,c),u=TC(c,l);return u_.with(u,a,void 0,l)}},e}();function upe(e){return typeof e=="object"&&typeof e.spanId=="string"&&typeof e.traceId=="string"&&typeof e.traceFlags=="number"}var dpe=new fR,fpe=function(){function e(t,n,r,s){this._provider=t,this.name=n,this.version=r,this.options=s}return e.prototype.startSpan=function(t,n,r){return this._getTracer().startSpan(t,n,r)},e.prototype.startActiveSpan=function(t,n,r,s){var i=this._getTracer();return Reflect.apply(i.startActiveSpan,i,arguments)},e.prototype._getTracer=function(){if(this._delegate)return this._delegate;var t=this._provider.getDelegateTracer(this.name,this.version,this.options);return t?(this._delegate=t,this._delegate):dpe},e}(),hpe=function(){function e(){}return e.prototype.getTracer=function(t,n,r){return new fR},e}(),ppe=new hpe,kE=function(){function e(){}return e.prototype.getTracer=function(t,n,r){var s;return(s=this.getDelegateTracer(t,n,r))!==null&&s!==void 0?s:new fpe(this,t,n,r)},e.prototype.getDelegate=function(){var t;return(t=this._delegate)!==null&&t!==void 0?t:ppe},e.prototype.setDelegate=function(t){this._delegate=t},e.prototype.getDelegateTracer=function(t,n,r){var s;return(s=this._delegate)===null||s===void 0?void 0:s.getTracer(t,n,r)},e}(),AE;(function(e){e[e.NOT_RECORD=0]="NOT_RECORD",e[e.RECORD=1]="RECORD",e[e.RECORD_AND_SAMPLED=2]="RECORD_AND_SAMPLED"})(AE||(AE={}));var ME;(function(e){e[e.INTERNAL=0]="INTERNAL",e[e.SERVER=1]="SERVER",e[e.CLIENT=2]="CLIENT",e[e.PRODUCER=3]="PRODUCER",e[e.CONSUMER=4]="CONSUMER"})(ME||(ME={}));var IE;(function(e){e[e.UNSET=0]="UNSET",e[e.OK=1]="OK",e[e.ERROR=2]="ERROR"})(IE||(IE={}));var rbe=hp.getInstance(),sbe=ps.instance(),mpe=function(){function e(){}return e.prototype.getMeter=function(t,n,r){return Bhe},e}(),gpe=new mpe,d_="metrics",_pe=function(){function e(){}return e.getInstance=function(){return this._instance||(this._instance=new e),this._instance},e.prototype.setGlobalMeterProvider=function(t){return xu(d_,t,ps.instance())},e.prototype.getMeterProvider=function(){return Io(d_)||gpe},e.prototype.getMeter=function(t,n,r){return this.getMeterProvider().getMeter(t,n,r)},e.prototype.disable=function(){Tu(d_,ps.instance())},e}(),ibe=_pe.getInstance(),vpe=function(){function e(){}return e.prototype.inject=function(t,n){},e.prototype.extract=function(t,n){return t},e.prototype.fields=function(){return[]},e}(),OC=aR("OpenTelemetry Baggage Key");function hR(e){return e.getValue(OC)||void 0}function ype(){return hR(hp.getInstance().active())}function Cpe(e,t){return e.setValue(OC,t)}function bpe(e){return e.deleteValue(OC)}var f_="propagation",Spe=new vpe,wpe=function(){function e(){this.createBaggage=Mhe,this.getBaggage=hR,this.getActiveBaggage=ype,this.setBaggage=Cpe,this.deleteBaggage=bpe}return e.getInstance=function(){return this._instance||(this._instance=new e),this._instance},e.prototype.setGlobalPropagator=function(t){return xu(f_,t,ps.instance())},e.prototype.inject=function(t,n,r){return r===void 0&&(r=Khe),this._getGlobalPropagator().inject(t,n,r)},e.prototype.extract=function(t,n,r){return r===void 0&&(r=Whe),this._getGlobalPropagator().extract(t,n,r)},e.prototype.fields=function(){return this._getGlobalPropagator().fields()},e.prototype.disable=function(){Tu(f_,ps.instance())},e.prototype._getGlobalPropagator=function(){return Io(f_)||Spe},e}(),obe=wpe.getInstance(),h_="trace",Epe=function(){function e(){this._proxyTracerProvider=new kE,this.wrapSpanContext=lpe,this.isSpanContextValid=dR,this.deleteSpan=rpe,this.getSpan=xC,this.getActiveSpan=npe,this.getSpanContext=uR,this.setSpan=TC,this.setSpanContext=spe}return e.getInstance=function(){return this._instance||(this._instance=new e),this._instance},e.prototype.setGlobalTracerProvider=function(t){var n=xu(h_,this._proxyTracerProvider,ps.instance());return n&&this._proxyTracerProvider.setDelegate(t),n},e.prototype.getTracerProvider=function(){return Io(h_)||this._proxyTracerProvider},e.prototype.getTracer=function(t,n){return this.getTracerProvider().getTracer(t,n)},e.prototype.disable=function(){Tu(h_,ps.instance()),this._proxyTracerProvider=new kE},e}(),xpe=Epe.getInstance();function Tpe(e,t,n,r,s,i){const o=Ape(e,t,n,s,i);return kpe(n,r,o)}const Ope=1e3*30,Dc=xpe.getTracer("completion");function p_(e,t){Sn.count(dn.DEFAULT,e,[{key:"prepare_sent",value:t&&t!=="none"?"true":"false"},{key:"prepare_succeeded",value:t==="success"?"true":"false"},{key:"prepare_failed",value:t==="failure"?"true":"false"}])}async function*kpe(e,t,n){let r=!1,s=!1,i=!1,o=!1,a,c,l,u,d;Dc.startActiveSpan("completion.response",h=>{a=Dc.startSpan("completion.first_response"),c=Dc.startSpan("completion.first_token_including_tool_calls"),l=Dc.startSpan("completion.first_token_including_visible_content"),u=Dc.startSpan("completion.first_token"),d=h});let f=setTimeout(()=>{P.logEvent("SSE Response Took Too Long to Come Back",{}),e.logCompletion({type:Ss.Error,error:{reason:"timeout",message:"SSE Response Took Too Long to Come Back"}})},Ope);try{t?.logTiming("prompt_submitted");for await(const h of n)yield h,h.type!=="connected"&&f&&(clearTimeout(f),f=null),h.type==="message"&&(e.onMessageUpdate(h.message),r||(r=!0,a?.end(),t?.logTiming("first_response")),!s&&h.message.author.role===fe.Assistant&&(s=!0,c?.end(),t?.logTiming("first_assistant_token")),!i&&h.message.author.role===fe.Assistant&&rf(h.message)&&(i=!0,l?.end(),t?.logTiming("first_visible_content_token")),!o&&h.message.author.role===fe.Assistant&&nT(h.message)&&(o=!0,u?.end(),t?.logTiming("first_message_token"))),h.type==="perf_stats"&&e.addServerPerfStats(h),h.type==="server_ste_metadata"&&e.addServerSteMetadata(h),h.type==="message_marker"&&e.onMessageMarker(h),h.type==="done"&&e.onStreamClose()}catch(h){throw f&&(clearTimeout(f),f=null),h}finally{d?.end()}}async function*Ape(e,t,n,r,s){const{conduitToken:i,prepareState:o,model:a,f_completion:c,f_search:l}=t,u=Mn(3010482349,`${a}-AAAA`)||Mn(3240390095,`${a}-AAAA`),d=Ft(e)?u?window.location.origin+"/backend-alt":window.location.origin+"/backend-api":window.location.origin+"/backend-anon";let f=`${d}/conversation`;c&&(f=`${d}/f/conversation`),we(e,"212625335")&&(f+="?debug=true"),n.onSentUserMessage();const h=Ur()?await KN():void 0;let g=yC(f,{ctx:e,method:"POST",headers:{...bC(),...ahe(t.chatReq,t.turnstileToken,t.proofToken,null),...i?{"x-conduit-token":i}:{}},body:pR(t,h),intercomEventOnError:"fetch-error:conversation:new-message",signal:r,observer:{onEvent:y=>{n.onStreamEvent(y.byteLength,y.isDoneEvent)}}});g=Ppe(g,{ctx:e,model:a,turnTracker:n,signal:r??null}),g=Lpe(g,{turnTracker:n,prepareState:o,signal:r??null,f_completion:c??null}),c&&s&&lt(s,y=>{y.conduitToken=null,y.prepareState=null,y.lastPrepareTimestamp=null});const v=efe(g,y=>{n.stream_encoding=y});yield*Mpe(v)}async function*Mpe(e){let t=!1;for await(const n of e)if("response"in n)yield{type:"connected",serverRequestId:n.response?.headers?.get("Cf-Ray")??null};else{const r=Npe(n.data);r&&(r.type==="done"&&(t=!0),yield r)}t||(yield{type:"done"})}function pR(e,t){const n="threadId"in e?e.threadId:void 0;return{action:e.completionType,messages:e.messages.length>0?e.messages.map(Ipe):void 0,conversation_id:n,continue_from_shared_conversation_id:"continueFromSharedConversationId"in e&&n==null?e.continueFromSharedConversationId:void 0,continue_from_shared_post_id:"continueFromSharedPostId"in e?e.continueFromSharedPostId:void 0,fork_from_shared_post:"forkFromSharedPost"in e?e.forkFromSharedPost:void 0,parent_message_id:e.parentMessageId,model:e.model,timezone_offset_min:new Date().getTimezoneOffset(),timezone:Intl.DateTimeFormat().resolvedOptions().timeZone,variant_purpose:e.completionMetadata?.variantPurpose,suggestions:e.completionMetadata?.suggestions?e.completionMetadata.suggestions.map(r=>Qc(r)):void 0,chosen_suggestion:e.completionMetadata?.suggestion?{type:e.completionMetadata.suggestion.type,index:e.completionMetadata.suggestionIndex,source:e.completionMetadata.suggestion.type===rt.Autocomplete?e.completionMetadata.suggestion.source:void 0,user_input:e.completionMetadata.suggestion.type===rt.Autocomplete?e.completionMetadata.suggestion.userInput:void 0}:void 0,history_and_training_disabled:Yr(e.historyDisabled),conversation_mode:Y_(e.completionMetadata?.conversationMode),force_paragen:Yr(e.forceParagen),force_paragen_model_slug:e.forceParagenModel,force_indepth_feedback:Yr(e.forceIndepthFeedback),force_rate_limit:Yr(e.forceRateLimit),reset_rate_limits:Yr(e.resetRateLimits),record_rendering:Yr(e.recordRendering),disable_system_content_toggling:Yr(e.disableSystemContentToggling),enable_message_followups:e.enableMessageFollowups,source:e.completionMetadata?.source,system_hints:e.completionMetadata?.systemHints,prefetch_ids:e.completionMetadata?.prefetchIds,supports_buffering:!0,supported_encodings:[YN.V1],conversation_origin:Zr(e.conversationOrigin),force_use_search:Zr(e.forceUseSearch),force_disable_features:Zr(e.forceDisableFeatures),client_reported_search_source:e.completionMetadata?.searchSource,client_contextual_info:e.contextualInfo,paragen_stream_type_override:Zr(e.paragenStreamType==="none"?null:e.paragenStreamType),paragen_cot_summary_display_override:Zr(e.paragenCotSummaryDisplay==="none"?null:e.paragenCotSummaryDisplay),is_onboarding_conversation:Yr(e.isOnboardingConversation),override_infer_treatment:Zr(e.overrideInferTreatment),model_slug_stats_override:Zr(e.modelSlugStatsOverride),is_anon_mode:Yr(e.isAnonModeEnabled),is_reasoning_skipped:Yr(e.isReasoningSkipped),force_parallel_switch:Zr(e.forceParallelSwitch),juice_score:Zr(e.juiceScore),multimodal_juice_score:Zr(e.multimodalJuiceScore),local_function_names:Ur()&&t?[...t]:void 0}}function Ipe(e){let t=e;return e.clientMetadata&&(t={...e},delete t.clientMetadata),t}function Yr(e){if(e===!0)return e}function Zr(e){if(e!=null)return e}function Npe(e){if("type"in e)switch(e.type){case"gizmo_inline_review":return{type:"gizmo_inline_review",gizmoId:e.gizmo_id};case"title_generation":return{type:"title_generation",title:e.title,conversation_id:e.conversation_id};case"moderation":return{type:"moderation",conversationId:e.conversation_id,messageId:e.message_id,isCompletion:e.is_completion,flagged:e.moderation_response.flagged,blocked:e.moderation_response.blocked,shouldDisableConversation:!!e.moderation_response.should_disable_conversation,disclaimers:e.moderation_response.disclaimers,metadata:e.moderation_response.metadata};case"url_moderation":return{type:"url_moderation",conversationId:e.conversation_id,messageId:e.message_id,url:e.url_moderation_result.full_url,isSafe:e.url_moderation_result.is_safe};case"num_variants_in_stream":return{type:"num_variants_in_stream",num_variants_in_stream:e.num_variants_in_stream,display_treatment:e.display_treatment};case"perf_stats":case"conversation_detail_metadata":case"beacon_ui_response":case"resume_conversation_token":case"conversation_async_status":case"server_ste_metadata":case"message_marker":return e;case"message_stream_complete":return{type:"done"};default:return}if(e.message)return{type:"message",message:e.message,conversationId:e.conversation_id}}async function abe(e,t,n=[],r,s=!1,i=!1){const o=Xe();if(!gC(o,!0)||!vde(o))return;const a=ur(e),c=Ht(e);if(c?.prepareRequestBlocked)return;const l=3e3;if(c?.lastCompletionFinishedTimestamp){const x=performance.now()-c.lastCompletionFinishedTimestamp,T=l-x;T>0&&await new Promise(O=>setTimeout(O,T))}const u=c?.conversationOrigin??null;let d;s?d=Z.getParentPromptNode(c)?.id??"":d=Z.getCurrentNode(c).message.id;const f=bu(),h=hT(o),g=c?.conduitToken??null,_=c?.prepareState??"none",v={threadId:a,prepareState:_,conduitToken:g,continueFromSharedPostId:c?.continuingFromSharedPostId,forkFromSharedPost:!!c?.continuingFromSharedPostId,continueFromSharedConversationId:c?.continuingFromSharedConversationId,isOnboardingConversation:i,conversationOrigin:u,model:t,completionType:Oa.Next,completionMetadata:{systemHints:n,conversationMode:c?.mode??{kind:St.PrimaryAssistant}},messages:[],parentMessageId:d,recordRendering:f.recordRendering,historyDisabled:h},y=Ur()?await KN():void 0,C=pR(v,y),E={"x-conduit-token":g??"no-token"},b=Mn(3010482349,`${t}-AAAA`)||Mn(3240390095,`${t}-AAAA`);if(b){lt(e,x=>{x.conduitToken=null,x.prepareState=null});return}const w=`${Ft(o)?b?window.location.origin+"/backend-alt":window.location.origin+"/backend-api":window.location.origin+"/backend-anon"}/f/conversation/prepare`;try{lt(e,O=>{O.prepareState="sent",O.lastPrepareTimestamp=performance.now()});const x=await Ne.post(w,C,{additionalHeaders:E,authOption:ht.SendIfAvailable}),{conduit_token:T}=x;r(T)}catch(x){Sn.count(dn.DEFAULT,"conduit_f_conversation_prepare_api_error"),R.addError(x),lt(e,T=>{T.conduitToken=null,T.prepareState="failure"})}}const Rpe=e=>new Promise(t=>setTimeout(t,e));async function*Ppe(e,t){const n=zt(t.ctx,"3165814200"),r=n.get("MIN_RETRY_INTERVAL",300),s=n.get("MAX_RETRY_INTERVAL",5e3),i=n.get("RETRY_FACTOR",1.5),o=n.get("MAX_RETRY_COUNT",12),{signal:a}=t;let c,l,u=e,d=0,f=0,h=0,g=0;for(;u!=null;)try{for await(const _ of u){const v="response"in _;!v&&_.data!=null&&typeof _.data=="object"&&"type"in _.data&&_.data.type==="resume_conversation_token"&&"token"in _.data&&"conversation_id"in _.data?(l=String(_.data.token),c=String(_.data.conversation_id)):yield _,f>0&&(g++,P.logEventWithStatsig("ChatGPT Convo Stream: Resume Succeeded","chatgpt_convo_stream_resume_succeeded",{conversationId:c,offset:d,afterRetryCount:f,successfulResumeCount:g}),f=0),v||d++}P.logEventWithStatsig("ChatGPT Convo Stream: Stream Completed","chatgpt_convo_stream_completed",{conversationId:c,resumeAttempts:h,successfulResumeCount:g}),u=null}catch(_){const v=NE(_);if(f===0&&P.logEventWithStatsig("ChatGPT Convo Stream: Error","chatgpt_convo_stream_error",{conversationId:c,offset:d,isNetworkError:v,successfulResumeCount:g,errorMessage:_ instanceof Error?_.message:String(_)}),f<o&&!a?.aborted&&l!=null&&c!=null&&NE(_)&&gt(t.ctx,"2489999880").get("is_resume_enabled",!1)){f===0&&P.logEventWithStatsig("ChatGPT Convo Stream: Resume Attempted","chatgpt_convo_stream_resume_attempted",{conversationId:c,offset:d,retryCount:f,successfulResumeCount:g}),f++,h++;const C=Math.min(r*i**f,s)*(.5+Math.random()*.5);await Rpe(C),u=Dpe({...t,resumeToken:l,conversationId:c,offset:d})}else{const y=_ instanceof je&&_.status===404;throw(f>=o||y&&f>0)&&P.logEventWithStatsig("ChatGPT Convo Stream: Resume Failed","chatgpt_convo_stream_resume_failed",{conversationId:c,offset:d,afterRetryCount:f,successfulResumeCount:g,isNetworkError:v,is404:y}),u=null,_ instanceof je&&_.status===404&&f>0?je.createWithErrorMessage(_.url,"client",Ua):_}}}function NE(e){return e instanceof Error&&e.message===Ua||typeof e=="string"&&e===Ua}function Dpe({ctx:e,conversationId:t,resumeToken:n,model:r,turnTracker:s,offset:i,signal:o}){const a=Mn(3010482349,`${r}-AAAA`)||Mn(3240390095,`${r}-AAAA`),c=Ft(e)?a?window.location.origin+"/backend-alt":window.location.origin+"/backend-api":window.location.origin+"/backend-anon",l={"x-conduit-token":n??"no-token"},u=`${c}/f/conversation/resume`,d=e?fh(e):void 0,f={conversation_id:t,offset:i};return yC(u,{method:"POST",headers:{...bC(),...d?bh({accessToken:d}):Ch(),...l,"Content-Type":"application/json"},body:f,intercomEventOnError:"fetch-error:conversation:new-message",signal:o??void 0,observer:{onEvent:g=>{s.onStreamEvent(g.byteLength,g.isDoneEvent)}}})}async function*Lpe(e,{turnTracker:t,prepareState:n,f_completion:r,signal:s}){try{for await(const i of e)yield i;t.onStreamClose(),r&&p_("conduit_f_conversation_api.success",n)}catch(i){throw Sn.count(dn.DEFAULT,"conversation_api.client_request_error"),s?.aborted?(t.handleAbort(i),r&&p_("conduit_f_conversation_api.aborted",n)):(t.handleRawError(i instanceof Error||typeof i=="string"?i:JSON.stringify(i)),r&&p_("conduit_f_conversation_api.error",n)),i}}class Fpe{constructor(t,n,r,s,i,o,a,c,l,u,d,f,h,g,_,v,y,C,E=!1,b,S=!1,w=!1,x=void 0){this.ctx=t,this.requestId=n,this.queryClient=r,this.initialThread=s,this.clientThreadId=i,this.parentMessageId=o,this.prependMessages=a,this.promptMessage=c,this.appendMessages=l,this.completionType=u,this.model=d,this.eventSource=f,this.isHistoryAndTrainingDisabled=h,this.startPreflightTime=g,this.isSnorlaxEnabledForGizmo=_,this.isNewThread=v,this.isContinuingFromSharedConversation=y,this.turnTracker=C,this.isAnonModeEnabled=b,this.isContinuableSharedPost=S,this.isReasoningSkipped=w,this.modelSlugStatsOverride=x,this.completionLatencyTracker=new mde(this.requestId,g),this.isFirstCompletionInThread=v||this.isContinuingFromSharedConversation||this.isContinuableSharedPost,this.placeholderNodeId=`${NY}${n}`,E&&(this.sentNotification=!0)}isFirstCompletionInThread;activeBranchLastMessage;messagesToUpdate={};allIncompleteMessageIds=new Set;responseThreadId;isCompletionBlocked=!1;isEitherFlagged=!1;sentNotification=!1;variantsInStreamInfo;blurDuringCompletionTracker=new tde;completionLatencyTracker;preflightTime;treatCompletionAsAsync=!1;realtimeAsyncCompletion=!1;resumeToken;placeholderNodeId;updateBeforeRequest(){Zde.incrementUserMessageCount(Ft(this.ctx)?fn.LoggedIn:fn.LoggedOut),hf.retainThread(this.clientThreadId),lt(this.clientThreadId,t=>{t.conduitToken=null,t.prepareState=null,t.lastPrepareTimestamp=null,this.completionType===Oa.Next&&Z.hasUserMessage(t)&&this.promptMessage?.author.role===fe.User&&(t.scrollToMessageId=this.promptMessage?.id),tr.updateTree(t,(n,r)=>{if(this.parentMessageId&&(r=Z.getNode(t,this.parentMessageId).id),this.prependMessages)for(const o of this.prependMessages)r=n.addMessageNode(r,o);if(this.promptMessage&&(r=n.addMessageNode(r,this.promptMessage)),this.appendMessages)for(const o of this.appendMessages)r=n.addMessageNode(r,o);const s=this.promptMessage?.metadata?.gizmo_id,i=_6("",s?{gizmo_id:s}:void 0,{requestId:this.requestId,isPlaceholder:!0},this.placeholderNodeId);return r=n.addMessageNode(r,i),r})})}async sendRequest$({conduitToken:t,turnstileToken:n,proofToken:r,completionMetadata:s,resolvedParentMessageId:i,messages:o,extraStreamParams:a,chatReq:c,profiler:l}){vE(this.clientThreadId,!0);const u=new AbortController;Lf.addRequest(this.requestId,u,this.turnTracker);const d=bu(),f=ur(this.clientThreadId);if(this.completionType===Oa.Variant&&f==null){R.addError("Generating variant without conversation_id"),this.#r(new Error("Regeneration must have conversation_id"));return}const h=Tpe(this.ctx,{conversationOrigin:this.initialThread?.conversationOrigin??null,model:this.model,completionType:this.completionType,prepareState:this.initialThread?.prepareState??"none",conduitToken:t,threadId:f,isReasoningSkipped:this.isReasoningSkipped,overrideInferTreatment:d.autoSwitcherTreatmentOverride,modelSlugStatsOverride:this.modelSlugStatsOverride,continueFromSharedConversationId:this.initialThread?.continuingFromSharedConversationId,continueFromSharedPostId:this.initialThread?.continuingFromSharedPostId,forkFromSharedPost:this.initialThread?.forkFromSharedPost,historyDisabled:this.isHistoryAndTrainingDisabled,isAnonModeEnabled:this.isAnonModeEnabled,parentMessageId:i,messages:o,chatReq:c,turnstileToken:n,proofToken:r,completionMetadata:s,contextualInfo:{is_dark_mode:yue(),time_since_loaded:Math.floor(performance.now()/1e3),page_height:window.innerHeight,page_width:window.innerWidth,pixel_ratio:window.devicePixelRatio,screen_height:window.screen.height,screen_width:window.screen.width},isOnboardingConversation:s?.isOnboardingConversation,forceParagen:d.forceParagen,forceParagenModel:d.forceParagen?d.forceParagenModel.value:void 0,forceRateLimit:d.forceRateLimit,resetRateLimits:d.resetRateLimits,recordRendering:d.recordRendering,disableSystemContentToggling:d.rebaseSystemMessageContent!=null,forceUseSearch:d.forceUseSearch??void 0,paragenStreamType:d.paragenStreamType,paragenCotSummaryDisplay:d.paragenCotSummaryDisplay,forceParallelSwitch:d.forceParallelSwitch,juiceScore:d.juiceScore,multimodalJuiceScore:d.multimodalJuiceScore,...gC(this.ctx)?{f_completion:!0}:{},...yde()?{f_search:!0}:{},...a},this.turnTracker,l,u.signal,this.clientThreadId);try{for await(const g of h)g.type==="connected"?this.#e(g):Qde(g)&&this.#t(g)}catch(g){nP(g)||u.signal.aborted?this.#m(g):this.#r(g)}finally{vE(this.clientThreadId,!1)}}#e(t){const{serverRequestId:n}=t;this.turnTracker.onStreamOpen(),n&&this.turnTracker.onReceivedServerRequestId(n),dde(this.requestId,this.model,n,jr(this.preflightTime))}#t=t=>{if(this.activeBranchLastMessage&&this.completionLatencyTracker.onResponse(t,this.activeBranchLastMessage,this.responseThreadId),this.responseThreadId===void 0&&"conversationId"in t){const n=t.conversationId;if(this.responseThreadId=n,lu(this.clientThreadId)&&ur(this.clientThreadId)!==n&&(Jue(this.ctx,this.clientThreadId,n),P.logEvent("Attribution: Client Thread to Server Thread",{client_thread_id:this.clientThreadId,server_thread_id:n})),this.isContinuingFromSharedConversation&&(lt(this.clientThreadId,s=>{delete s.continuingFromSharedConversationId}),Fe.logEvent("chatgpt_continue_conversation_first_message_sent"),P.logEvent("Continue Conversation: First Message Sent")),this.isContinuableSharedPost&&lt(this.clientThreadId,s=>{delete s.continuingFromSharedPostId,delete s.forkFromSharedPost}),this.isFirstCompletionInThread){const s=Ht(this.clientThreadId);P.logEvent("Create New Thread"),!this.isHistoryAndTrainingDisabled&&Gde(s?.mode)&&Ft(this.ctx)&&(GN(this.queryClient,Z.getGizmoId(s)),s?.disableConversationNavigation||Mde(Vde,this.queryClient,n,this.isSnorlaxEnabledForGizmo))}const r={id:this.requestId,threadId:this.responseThreadId,completionType:this.completionType,eventSource:this.eventSource,model:this.model};if(this.completionType===Oa.Next){const s=Z.getConversationTurns(this.initialThread),i=s.length,o=s.filter(c=>c.role===fe.User),a=o&&o[o.length-1]?.messages[0];if(a?.content.content_type===Ee.Text){const c=a.content.parts.join("").length,l=o?.length??0;r.countConversationTurns=i,r.countUserSubmittedMessages=l,r.countLastUserPromptTextMessageLength=c}}P.logEvent("Generate Completion",r)}switch(t.type){case"num_variants_in_stream":this.#d(t);break;case"moderation":this.#f(t);break;case"url_moderation":this.#h(t);break;case"message":this.#p(t);break;case"done":this.#s();break;case"gizmo_inline_review":this.#n(t);break;case"title_generation":this.#o(t);break;case"conversation_detail_metadata":this.#a(t);break;case"beacon_ui_response":this.#c(t);break;case"conversation_async_status":this.#l(t);break;case"resume_conversation_token":this.#u(t);break}};#r(t){const n=tP(t),r=n.message,s=t instanceof je?t.code:void 0,i=t instanceof je?t.detail?.can_retry:void 0,o=r===Ua,a=o&&!this.treatCompletionAsAsync&&Ft(this.ctx)&&gt(this.ctx,"2489999880").get("is_polling_enabled",!1);switch(a&&(this.treatCompletionAsAsync=!0),this.debouncedUpdateExistingMessages.flush(),this.treatCompletionAsAsync&&r===Ua&&!a||lt(this.clientThreadId,l=>{tr.updateTree(l,(u,d)=>{const f=this.variantsInStreamInfo?Z.getParentPromptNode(l)?.id??d:d,h={err:a?eP:r,errType:a?"info":"danger",errCode:a?d9.NetworkErrorWithReconnection:s,completionSampleFinishTime:Date.now(),canRetry:a?!1:i};if(u.getNodeIfExists(f)?.message?.content?.content_type!==Ee.Text){const g=_6("");return g.clientMetadata={...g.clientMetadata,...h},u.addMessageNode(f,g)}else u.updateNodeMetadata(f,h)})}),o&&P.logNetworkError({source:"request_stream",type:a?"info_polling":"error"}),s){case Ka.ContentPolicy:case Ka.ContentOrTos:case fd.ModelCapExceeded:case fd.HistoryDisabledConversationNotFound:break;default:r!==void 0&&Fe.logEvent("chatgpt_conversation_error_web",r)}if(this.blurDuringCompletionTracker.onMessageError(),dE(n),this.#i(),Ma.publish({kind:"completionFinished",serverThreadId:this.responseThreadId}),t instanceof je&&t.code===fd.ModelCapExceeded){const l=t.detail?.clears_in;l&&(wle(new Date(Date.now()+l*1e3).toISOString()),setTimeout(()=>{pN()},l*1e3))}}#n({gizmoId:t}){lt(this.clientThreadId,n=>{n.promptGptRating={gizmoId:t}})}#o(t){HN(this.ctx,t.conversation_id,t.title,p3.Generated),this.maybeSendNotification()}#a(t){const{default_model_slug:n}=t;n&&lt(this.clientThreadId,s=>{s.modelId=n}),we(this.ctx,"3315017149")&&mU(t)&&this.queryClient.invalidateQueries({queryKey:Fh()}),ex.updateDetails(t)}#c(t){Hde.updateDetails(t)}#l(t){const{async_status:n}=t;n===Bn.REALTIME&&(this.realtimeAsyncCompletion=!0),this.responseThreadId&&ga(this.responseThreadId,{source:ws.SERVER,value:n}),ga(this.clientThreadId,{source:ws.SERVER,value:n})}#u(t){const{token:n}=t;this.resumeToken=n??void 0}#d(t){this.variantsInStreamInfo=t,lt(this.clientThreadId,n=>{tr.updateTree(n,(r,s)=>{const i=Z.getParentPromptNode(n)??r.getNodeByIdOrMessageId(s);r.updateNodeMetadata(i.id,{variantsInStreamInfo:this.variantsInStreamInfo})})})}#f(t){const{isCompletion:n,flagged:r,blocked:s,disclaimers:i}=t,o=!!i?.length&&n;(r||s||o)&&(this.debouncedUpdateExistingMessages.flush(),this.isEitherFlagged=!0,s&&n&&(this.isCompletionBlocked=!0),gde(t,this.clientThreadId))}#h(t){const{conversationId:n,url:r,isSafe:s}=t;s&&lt(n,i=>{i.safeUrls.push(r)})}#p({message:t,conversationId:n}){if(this.activeBranchLastMessage=t,t?.author.role===fe.Tool&&t?.author.name==="bio"){const r=t.metadata?.gizmo_id;setTimeout(()=>{this.queryClient.invalidateQueries({queryKey:$N(r)})},5e3)}if(t.metadata?.trigger_async_ux&&(this.treatCompletionAsAsync=!0,ga(this.clientThreadId,{source:ws.SERVER,value:Bn.STREAMING})),Z.getTree(Ht(n)).containsNodeOrMessageId(t.id)){this.messagesToUpdate[t.id]=t,this.debouncedUpdateExistingMessages();return}this.debouncedUpdateExistingMessages.flush(),lt(this.clientThreadId,r=>{tr.updateTree(r,(s,i)=>{const o={requestId:this.requestId};t.status!=="in_progress"?o.completionSampleFinishTime=Date.now():this.allIncompleteMessageIds.add(t.id);const a={...t,clientMetadata:o},c=t.metadata?.parent_id;if(c){if(this.placeholderNodeId&&s.getParent(this.placeholderNodeId).id===s.getNodeByIdOrMessageId(c).id)if(bi(a)){s.prependNode(this.placeholderNodeId,a);return}else s.deleteNode(this.placeholderNodeId),this.placeholderNodeId=void 0;return s.addMessageNode(c,a)}else{const l=s.findFirst(u=>!bi(u.message));if(l)s.prependNode(l.id,a);else return s.addMessageNode(i,a)}})})}debouncedUpdateExistingMessages=Kde(()=>{if(this.isCompletionBlocked)return;const t=Object.values(this.messagesToUpdate);t.length!==0&&(lt(this.clientThreadId,n=>{tr.updateTree(n,r=>{for(const s of t)r.updateNodeMessage(s.id,s),s.status!=="in_progress"&&(r.updateNodeMetadata(s.id,{completionSampleFinishTime:Date.now()}),this.allIncompleteMessageIds.delete(s.id))})}),this.messagesToUpdate={})},50,{leading:!0,maxWait:50});#m(t){this.debouncedUpdateExistingMessages.flush(),lt(this.clientThreadId,n=>{tr.updateTree(n,r=>{for(const s of this.allIncompleteMessageIds)r.updateNodeMessageMetadata(s,{finish_details:{type:"interrupted"}})})}),this.#s()}#s(){this.debouncedUpdateExistingMessages.flush(),this.isEitherFlagged||(this.isFirstCompletionInThread&&this.responseThreadId&&!this.isHistoryAndTrainingDisabled&&!Fe.checkGate("2562876640")&&Ade(this.ctx,this.responseThreadId,this.model),Ma.publish({kind:"completionFinished",serverThreadId:this.responseThreadId})),Ma.publish({kind:"createConversation",clientThreadId:this.clientThreadId}),this.blurDuringCompletionTracker.onMessageDone(),dE(),this.#i()}maybeSendNotification(){if(this.sentNotification)return;const t=Ht(this.clientThreadId),n=t?.title??void 0;if(!n)return;const r=Z.getCurrentNode(t).message;if(vC(r)&&!Pde(r))return;const s=r.content,i=s?.content_type===Ee.Text?(s.parts[0]??"").replace(/[^a-zA-Z0-9\s]/g,""):void 0;Ude({title:n,subtitle:i,clientThreadId:this.clientThreadId}),this.sentNotification=!0}#i(){lt(this.clientThreadId,t=>{tr.updateTree(t,n=>{for(const r of this.allIncompleteMessageIds)n.updateNodeMetadata(r,{completionSampleFinishTime:Date.now()})})}),this.allIncompleteMessageIds.clear(),setTimeout(()=>{if(this.treatCompletionAsAsync||this.realtimeAsyncCompletion){const t=this.treatCompletionAsAsync?Bn.STREAMING:Bn.REALTIME,n=r=>{if(!r)return;const s=mC(this.ctx,r);(s==null||s.source===ws.CLIENT)&&ga(r,{source:ws.SERVER,value:t})};n(this.responseThreadId),n(this.clientThreadId)}else ga(this.clientThreadId,{source:ws.CLIENT,value:Bn.UNREAD});this.maybeSendNotification(),Lf.removeRequest(this.requestId),hf.releaseThread(this.clientThreadId)},0)}}const jpe=10,Upe=vt(Ri(()=>({requests:{},requestIds:[]}))),ld=(e,t,n)=>{if(!Zn(Xe()).checkGate("1154002920"))return null;Upe.setState(r=>{if(r.requestIds.length===jpe){const s=r.requestIds.shift();s!=null&&delete r.requests[s]}r.requests[e]??={serverRequestId:null,timeToFirstToken:null,apiStartDelay:null,serverStats:null},r.requests[e][t]=n})},ud={publishServerRequestId:(e,t)=>{ld(e,"serverRequestId",t)},publishServerStats:(e,t)=>{ld(e,"serverStats",t)},publishApiStartDelay:(e,t)=>{ld(e,"apiStartDelay",t)},publishTimeToFirstToken:(e,t)=>{ld(e,"timeToFirstToken",t)}};var m_,RE;function Bpe(){if(RE)return m_;RE=1;function e(t){return t===void 0}return m_=e,m_}var qpe=Bpe();const Gpe=Ot(qpe);var g_,PE;function Hpe(){if(PE)return g_;PE=1;var e="Expected a function";function t(n){if(typeof n!="function")throw new TypeError(e);return function(){var r=arguments;switch(r.length){case 0:return!n.call(this);case 1:return!n.call(this,r[0]);case 2:return!n.call(this,r[0],r[1]);case 3:return!n.call(this,r[0],r[1],r[2])}return!n.apply(this,r)}}return g_=t,g_}var __,DE;function Vpe(){if(DE)return __;DE=1;var e=tu(),t=Hpe(),n=FN();function r(s,i){return n(s,t(e(i)))}return __=r,__}var zpe=Vpe();const $pe=Ot(zpe);function Wpe(e){return typeof e=="number"?Math.trunc(e):e}const Kpe=["time_since_prompt_sent_ms","time_since_last_event_ms","first_token_lat","api_start_delay","completion_request_time_to_first_visible_message"];class Ype{ctx;start_time_ms;turn_id;trigger;result;time_since_prompt_sent_ms;stream_update_event_count=0;first_token_lat;first_visible_content_token_lat;first_nav_link_token_lat;last_model_message_received;api_start_time;time_since_last_event_ms;api_start_delay;completion_request_time_to_first_visible_message;model_slug;last_message_model_slug;tools_used;system_hints;gizmo_id;promptSentTimestamp;serverStats;serverSteMetadata;logger;server_request_id;client_request_id;completed=!1;num_images_attached=0;num_files_attached=0;bytes_received=0;model_message_update_count=0;stream_encoding;stream_buffering=!0;gizmo_type;isStreamOpen=!1;isTemporaryChat;messageMarkerLatencies={};constructor({ctx:t,clientRequestId:n,gizmoType:r,preflightTime:s,isTemporaryChat:i}){this.ctx=t,this.client_request_id=n,this.start_time_ms=performance.now(),this.turn_id=dr(),this.promptSentTimestamp=s??performance.now(),this.tools_used=new Set,this.system_hints=new Set,this.logger=Zv.createLogger("turn-analytics","info","http"),r&&(this.gizmo_type=r),this.isTemporaryChat=i}truncateValueForKey(t){const n=Wpe(this[t]);n!==void 0&&(this[t]=n)}onUserMessages(t){t.forEach(n=>{n.author.role==="user"&&(n.metadata?.attachments?.forEach(r=>{r.height&&r.width?this.num_images_attached+=1:this.num_files_attached+=1}),n.metadata?.system_hints?.forEach(r=>{this.system_hints.add(r)}))})}addServerPerfStats(t){ud.publishServerStats(this.client_request_id,t),this.serverStats=t}addServerSteMetadata(t){this.serverSteMetadata=t.metadata}onMessageMarker(t){const r=`${t.event}_received`;this.messageMarkerLatencies[t.marker]={...this.messageMarkerLatencies[t.marker],[r]:performance.now()-this.promptSentTimestamp}}onStreamOpen(){this.isStreamOpen=!0}onStreamClose(){this.model_message_update_count>0?this.logCompletion({type:Ss.Success}):this.logCompletion({type:Ss.Error,error:{reason:"empty_response",message:"Successful completion ended with no messages"}})}onCompletionStarted(t,n){switch(t){case"next":this.trigger="submit";break;case"variant":this.trigger="reroll";break;case"continue":this.trigger="continue";break}this.model_slug=n}onReceivedServerRequestId(t){this.server_request_id=t,ud.publishServerRequestId(this.client_request_id,this.server_request_id)}onStreamEvent(t,n){this.bytes_received+=t,n||(this.stream_update_event_count+=1)}onSentUserMessage(){this.api_start_time=performance.now(),this.api_start_delay=this.api_start_time-this.promptSentTimestamp,ud.publishApiStartDelay(this.client_request_id,this.api_start_delay)}onMessageUpdate(t){const{model_slug:n,gizmo_id:r}=t.metadata??{},{role:s,name:i}=t.author;if(this.gizmo_id=this.gizmo_id??r,s===fe.Tool&&i&&this.tools_used.add(i),s!==fe.User&&s!==fe.System&&s!==fe.Developer&&s!==fe.Root&&(this.model_message_update_count+=1,this.last_model_message_received=performance.now(),this.last_message_model_slug=n??this.last_message_model_slug),!this.first_token_lat&&t.author.role!==fe.User&&rf(t)&&Xl(t).length>0){const o=performance.now();this.first_token_lat=o-this.promptSentTimestamp,this.api_start_time&&(this.completion_request_time_to_first_visible_message=o-this.api_start_time),ud.publishTimeToFirstToken(this.client_request_id,this.first_token_lat)}!this.first_visible_content_token_lat&&t.author.role===fe.Assistant&&rf(t)&&(this.first_visible_content_token_lat=performance.now()-this.promptSentTimestamp),!this.first_nav_link_token_lat&&us(t)===ee.SuperWidget&&t.content.widgets.navlinks.length>0&&(this.first_nav_link_token_lat=performance.now()-this.promptSentTimestamp)}handleAbort(t){this.logCompletion({type:Ss.Canceled})}handleRawError(t){let n,r=null,s=null;t instanceof Error?(r=t.message??"Something went wrong",s=t instanceof je?t.status:void 0):r=t,s===400||r==="NetworkError when attempting to fetch resource."||r==="The network connection was lost."?n="network_error":r==="Request timed out"?n="timeout":n="request_failed",this.logCompletion({type:Ss.Error,error:{reason:n,message:r,...s&&{status_code:s}}})}getFeatureFlags(){const t={"resumable-streaming":gt(this.ctx,"2489999880",{disableExposureLog:!0}).get("is_resume_enabled",!1)},n=Object.entries(t),r=n.filter(([i,o])=>o).map(([i])=>i),s=n.filter(([i,o])=>!o).map(([i])=>i);return{enabled_feature_flags:r,disabled_feature_flags:s}}createLogPayload(){const{enabled_feature_flags:t,disabled_feature_flags:n}=this.getFeatureFlags(),r={turn_id:this.turn_id,trigger:this.trigger,result:jr(this.result?.type),...this.result?.type===Ss.Error?{error:this.result.error}:void 0,time_since_prompt_sent_ms:this.time_since_prompt_sent_ms,stream_update_event_count:this.stream_update_event_count,model_message_update_count:this.model_message_update_count,time_since_last_event_ms:this.time_since_last_event_ms,first_token_lat:this.first_token_lat,first_visible_content_token_lat:this.first_visible_content_token_lat,first_nav_link_token_lat:this.first_nav_link_token_lat,api_start_delay:this.api_start_delay,completion_request_time_to_first_visible_message:this.completion_request_time_to_first_visible_message,bytes_received:this.bytes_received,stream_encoding:this.stream_encoding,stream_buffering:this.stream_buffering,model_slug:this.model_slug,last_message_model_slug:this.last_message_model_slug,tools_used:[...this.tools_used],system_hints:[...this.system_hints],gizmo_id:this.gizmo_id,attachments:{files:this.num_files_attached,images:this.num_images_attached,total:this.num_files_attached+this.num_images_attached},temporary_chat:this.isTemporaryChat,gizmo_type:this.gizmo_type,server_ste_metadata:this.serverSteMetadata,message_marker_latencies:this.messageMarkerLatencies,enabled_feature_flags:t,disabled_feature_flags:n};return{request_id:this.server_request_id,turn_analytics:r}}createStatsigPayload(){return $pe({turn_id:String(this.turn_id),trigger:this.trigger,result:this.result?.type,error:JSON.stringify(this.result?.type===Ss.Error?{error:this.result.error}:void 0),time_since_prompt_sent_ms:String(this.time_since_prompt_sent_ms),stream_update_event_count:String(this.stream_update_event_count),model_message_update_count:String(this.model_message_update_count),time_since_last_event_ms:JSON.stringify(this.time_since_last_event_ms),first_token_lat:String(this.first_token_lat),api_start_delay:String(this.api_start_delay),completion_request_time_to_first_visible_message:String(this.completion_request_time_to_first_visible_message),bytes_received:String(this.bytes_received),stream_encoding:this.stream_encoding,stream_buffering:this.stream_buffering,model_slug:this.model_slug,last_message_model_slug:this.last_message_model_slug,tools_used:[...this.tools_used].join(", "),system_hints:[...this.system_hints].join(", "),gizmo_id:this.gizmo_id,attachments:JSON.stringify({files:this.num_files_attached,images:this.num_images_attached,total:this.num_files_attached+this.num_images_attached}),temporary_chat:String(this.isTemporaryChat),gizmo_type:this.gizmo_type,server_ste_metadata:JSON.stringify(this.serverSteMetadata),message_marker_latencies:JSON.stringify(this.messageMarkerLatencies)},Gpe)}logCompletion(t){if(this.completed)return;const n=performance.now();Sn.count(dn.DEFAULT,"completion_request"),Sn.hist(dn.DEFAULT,"completion_request_time",[],n-this.start_time_ms),this.completed=!0,this.result=t;for(const r of Kpe)this.truncateValueForKey(r);this.time_since_prompt_sent_ms=n-this.promptSentTimestamp,this.last_model_message_received&&(this.time_since_last_event_ms=n-this.last_model_message_received),t.type===Ss.Error?this.logger.error("Turn exchange complete",this.createLogPayload()):this.logger.info("Turn exchange complete",this.createLogPayload()),P.logEventWithStatsig("chatgpt_conversation_turn_turn_exchange_complete","chatgpt_conversation_turn_turn_exchange_complete",this.createStatsigPayload())}}function cbe(e){return SG(e)&&!EG(e)}const dd=50,Zpe=95;function lbe(e,t){if(e<=t)return e/t*dd;{const n=dd,r=Zpe-dd,s=e-t,o=-(dd/t)/r;return n+r*(1-Math.exp(o*s))}}class Jpe{mostRecentCompletionRequest;loggedRequests=new Set;onCompletionRequestStarted(t){this.mostRecentCompletionRequest={requestId:t,timestamp:Date.now()},this.loggedRequests.clear()}logEvent(t,n,r,s,i){const o=this.mostRecentCompletionRequest;o!=null&&!this.loggedRequests.has(t)&&Z.getNode(Ht(n),r).message.clientMetadata?.requestId===o.requestId&&(P.logEvent(t,{messageId:r,timeMs:Date.now()-o.timestamp,...s}),i?.(),this.loggedRequests.add(t))}}const Qpe=new Jpe;function ube(e){return(e.find(s=>s.metadata?.image_search_results!==void 0)?.metadata?.image_search_results??[]).slice(0,5)}function Xpe(e,t){if(we(e,"1627380539"))return"gpt-5";switch(Nt(e)?.planType){case Re.FREE:return t?"gpt-4o":"auto";case void 0:return"auto";default:return"gpt-4o"}}function LE(e,t){if(!t?.length)return e;const n=new Set(e.map(s=>s.url)),r=[...e];for(const s of t)n.has(s.url)||(n.add(s.url),r.push(s));return r}const sy={navlinks:[],images:[],videos:[],isSearchLikely:void 0},eme=e=>({entries:{},updateFromEvent:(t,n)=>e(r=>{const s=r.entries[t]??sy;let i=s;switch(n.event){case"navlinks":i={...s,navlinks:LE(s.navlinks,n.data.navlinks??[]),images:LE(s.images,n.data.images??[])};break;case"search.classifier":i={...s,isSearchLikely:n.data.is_search_likely};break;case"attributions":i={...s,navlinks:s.navlinks.map(o=>{const a=(n.data.attributions??[]).find(c=>c.url===o.url);return{...o,domain:a?.attribution??o.domain}})};break}return{entries:{...r.entries,[t]:i}}})}),mR=Ule()(eme,Tk);function dbe(e){return mR(t=>e==null?sy:t.entries[e]??sy)}async function tme({ctx:e,query:t,classifier:n=!1,attributions:r=!1,profiler:s=void 0,use_case:i="navlinks"}){if(t.length===0)return;s?.logTiming("fetch_navlinks_stream_called");const o=nme({ctx:e,query:t,classifier:n,attributions:r,use_case:i});let a=!1,c=!1;for await(const l of o){c||(c=!0,s?.logTiming("fetch_navlinks_stream_first_event"));const u=l;if(u.event==="log"){s?.logTiming(`fetch_navlinks_server_${u.data.event}`,{overrideDurationMs:u.data.timestamp_ms});continue}mR.getState().updateFromEvent(t,u),!a&&u.event==="navlinks"&&u.data.navlinks!==void 0&&u.data.navlinks.length>0&&(a=!0,s?.logTiming("fetch_navlinks_first_link_fetched_client")),u.event==="search.classifier"&&s?.logTiming("fetch_navlinks_classifier_result")}}function nme({ctx:e,query:t,classifier:n,attributions:r,use_case:s="navlinks"}){const i=`${Ae}/navlinks`;return yC(i,{ctx:e,method:"POST",headers:{...bC()},body:{query:t,classifier:n,attributions:r,use_case:s}})}function rme(e){return e instanceof KeyboardEvent||"key"in e||"detail"in e&&e.detail===0?"keyboard":"mouse"}function gR(e){return e!=null&&typeof e=="object"&&"then"in e&&typeof e.then=="function"}function sme(){"use forget";const e=xe.c(2),t=Y();let n;return e[0]!==t?(n=we(t,"491279851"),e[0]=t,e[1]=n):n=e[1],n}function fbe(e){"use forget";const t=xe.c(3),n=sme();if(!e)return!1;let r;return t[0]!==e||t[1]!==n?(r=n&&Bi(e),t[0]=e,t[1]=n,t[2]=r):r=t[2],r}function ime(e,t){return t!=null&&Bi(t)&&we(e,"491279851")}function ome(e,t){const n=Ht(t)?.mode,r=n&&"gizmo_id"in n?n.gizmo_id:null;if(r!=null)return ime(e,r)?sc.PROJECT:sc.GPT}const ame="https://challenges.cloudflare.com/turnstile/v0/api.js",cme={[pl.PAID]:"0x4AAAAAAASbFNinhLLnW5f1",[pl.FREEACCOUNT]:"0x4AAAAAAACPe2BTwOIpYk6H",[pl.NOAUTH]:"0x4AAAAAAASbHVR44GU82lOI"};class Bf{toString(){return JSON.stringify(this.toJSON())}}class v_ extends Bf{constructor(t){super(),this.message=t,this.message=t}toJSON(){return{"Turnstile-Internal-Error":this.message}}}class lme extends Bf{constructor(t){super(),this.errorCode=t,this.errorCode=t}toJSON(){return{"Turnstile-Client-Error":this.errorCode}}}class ume{app=pl.NOAUTH;status="idle";turnstileInstancePromise=null;enforcementTokenPromise=null;enforcementTokenCache=new WeakMap;requestStartTimeMs=0;_onCompleted;_onError;async initializeAndGatherData(t){this._getOrCreateInstance(t)}async _getOrCreateInstance(t){return!t.turnstile?.required||t.turnstile?.dx?null:(this.app!==t.persona&&(this.app=t.persona,this.turnstileInstancePromise=this._getTurnstileInstancePromise()),this.turnstileInstancePromise??new v_("Turnstile instance not initialized."))}getEnforcementTokenSync(t){return this.enforcementTokenCache.get(t)??null}async getEnforcementToken(t){return t.turnstile?.dx?ny(t.turnstile.dx):this.startEnforcement(t).then(n=>(this.enforcementTokenPromise=null,n?n.toString():null))}async startEnforcement(t){return t.turnstile?.required?t.turnstile?.dx?ny(t.turnstile.dx).then(n=>(n&&this.enforcementTokenCache.set(t,n),n)):this.enforcementTokenPromise!==null?this.enforcementTokenPromise:this.enforcementTokenPromise=this._getEnforcementToken(t):null}async _getEnforcementToken(t,n){const r=await this._getOrCreateInstance(t);return r instanceof Bf||r===null?r:new Promise((s,i)=>{this.setOnCompleted(o=>{const a=performance.now()-this.requestStartTimeMs;R.addAction("turnstile_get_token_success",{app:this.app.toString(),durationMs:a}),s(o)}),this.setOnError(o=>{if(!n)this._getEnforcementToken(t,!0).then(s,i);else{const a=performance.now()-this.requestStartTimeMs;R.addAction("turnstile_get_token_error",{app_release:"2ce0a3f07a70586b8e072b67b1fc24498df2535f",error:o,app:this.app.toString(),durationMs:a}),s(new lme(o))}}),this.setStatus("ready"),this.requestStartTimeMs=performance.now(),r.reset(),r.execute()})}setStatus(t){this.status=t}onCompleted(t){this._onCompleted?.(t)}setOnCompleted(t){this._onCompleted=t}onError(t){this._onError?.(t)}setOnError(t){this._onError=t}onExpired(){this.enforcementTokenPromise=null}_getTurnstileInstancePromise(t){if(this.turnstileInstancePromise!==null)if(t)this.turnstileInstancePromise.then(n=>{n instanceof Bf||n.remove()}),this.turnstileInstancePromise=null;else return this.turnstileInstancePromise;return this.turnstileInstancePromise=new Promise((n,r)=>{const s="onloadTurnstileCallback";Object.defineProperty(window,s,{value:()=>{if(this.status==="ready")return;this.setStatus("script_loaded");const{turnstile:l}=window;if(l===null){this.setStatus("error"),t?(R.addAction("turnstile_instance_missing",{app_release:"2ce0a3f07a70586b8e072b67b1fc24498df2535f",app:this.app.toString()}),n(new v_("Turnstile instance missing"))):this._getTurnstileInstancePromise(!0).then(n,r);return}l.render("#"+i,{sitekey:cme[this.app],execution:"execute",callback:this.onCompleted.bind(this),"error-callback":this.onError.bind(this),"expired-callback":this.onExpired.bind(this)}),n(l)}});const i="cf-turnstile",o="cf-turnstile-script";document.getElementById(i)?.remove(),document.getElementById(o)?.remove();const a=document.createElement("div");a.id=i,a.hidden=!0,document.body.appendChild(a),this.setStatus("loading");const c=document.createElement("script");c.id=o,c.src=ame+`?onload=${s}`,c.async=!0,c.defer=!0,c.onerror=()=>{this.setStatus("error"),t?(R.addAction("turnstile_script_load_error",{app_release:"2ce0a3f07a70586b8e072b67b1fc24498df2535f",app:this.app.toString()}),n(new v_("Turnstile script failed to load"))):this._getTurnstileInstancePromise(!0).then(n,r)},document.body.appendChild(c)}),this.turnstileInstancePromise}}const FE=new ume;function dme(e,t){const n=we(e,"3530414009"),r=!!t?.prefetchIds?.length,s=performance.now(),i=[],o=rhe();if(o==null)return i.push("chatReq"),she().then(a);return a(o);function a(c){c.force_login&&Wa(e,{authType:"login"});const l=FE.getEnforcementTokenSync(c);if(l==null)return i.push("turnstile"),FE.getEnforcementToken(c).then(u);return u(l);function u(d){const f=performance.now(),h=ty.getEnforcementTokenSync(c);if(h==null)return i.push("proofofwork"),ty.getEnforcementToken(c,{forceSync:r&&n}).then(g);return g(h);function g(_){const v=String(performance.now()-f),y=i.includes("chatReq")?"false":"true",C=i.includes("turnstile")?"false":"true",E=i.includes("proofofwork")?"false":"true";return Sn.hist(dn.DEFAULT,"chat_req_time",[{key:"wasChatReqSync",value:y},{key:"wasTurnstileSync",value:C},{key:"wasProofofworkSync",value:E}],performance.now()-s),qd(Xe(),{eventName:"chatgpt_web_completion_integrity_checks",value:i.length===0?"true":"false",metadata:{wasChatReqSync:y,wasTurnstileSync:C,wasProofofworkSync:E,isPrefetchInitialLoad:r?"true":"false",powTime:v}}),{chatReq:c,turnstileToken:d,proofToken:_}}}}}async function fme({ctx:e,clientThreadId:t,requestedModelId:n,completionType:r=Oa.Next,sourceEvent:s,eventSource:i,completionMetadata:o,extraStreamParams:a,parentMessageId:c,promptMessage:l,existingMessages:u,prependMessages:d,appendMessages:f,profiler:h,skipNotification:g,isReasoningSkipped:_,parentMessageIdPromise:v}){const y=Ul(e),C=s?.timeStamp??performance.now(),E=i??(s?rme(s):"mouse"),b=YY(),S=`request-${t}-${b}`,w=Ht(t),{conduitToken:x=null,prepareState:T="none",lastPrepareTimestamp:O=null}=w??{},A=n??w?.modelId??kce(UH(y))?.id??Xpe(Xe(),!1),k=Z.findNode(w,oe=>oe.message.author.role===fe.Assistant||oe.message.author.role===fe.Tool)==null,I=w?.continuingFromSharedConversationId!=null,N=!!w?.continuingFromSharedPostId,j=c?Z.getNode(w,c):u?.[0]?Z.getParentNode(w,u[0].id):Z.getCurrentNode(w);let q=j.message.id??j.id;const D=[...u??[],...d??[],...l?[l]:[],...f??[]],U=ome(e,t),G=new Ype({ctx:e,clientRequestId:S,gizmoType:U,preflightTime:C,isTemporaryChat:pT()});if(G.onUserMessages(D),U===sc.PROJECT&&k&&!$f(e,"269676899",{disableExposureLog:!0}).get("clear_all",!1)){const oe=o?.systemHints;IM(e).set(ot=>({...ot,[t]:oe??[]}))}const F=hT(e),le=kH(),me=_t.getItem(Qe.ModelSlugStatsOverride),ge=new Fpe(e,S,y,w,t,c,d,l,f,r,A,E,F,C,U===sc.PROJECT,k,I,G,g??!1,le,N,_,me),ke=o?.systemHints?.includes(Co);if(Ur()&&l){const oe=Xl(l);if(tme({ctx:e,query:oe,classifier:!0,attributions:!0,profiler:h}),ke){const ye=wu(),ot=ur(t);if(ot)try{ye?.userSentMessageInAgentConversation(ot)}catch{}}}const ve=DN(t);if(Ma.publish({kind:"requestCompletion"}),ga(t,{source:ws.CLIENT,value:ke?Bn.REALTIME:Bn.STREAMING}),Qpe.onCompletionRequestStarted(S),ge.updateBeforeRequest(),mC(e,t)?.value===Bn.REALTIME){const oe=await ve;oe?.last_message_id&&(q=oe.last_message_id)}if(v){const oe=await v;oe&&(q=oe)}const L=dme(e,o),{chatReq:ue,turnstileToken:Ie,proofToken:it}=gR(L)?await L:L;y.getQueriesData(nv())==null&&await y.ensureQueryData(nv()),Xue()&&(await ede()).forEach(ye=>{ye.status==="fulfilled"&&ye.value&&D.unshift(ye.value)}),G.onCompletionStarted(r,A),ge.preflightTime=performance.now()-C;const tt=gC(e);if(R.addFeatureFlagEvaluation("fast_convo",tt),tt&&O!=null){const oe=performance.now()-O;oe<=6e4&&Sn.hist(dn.DEFAULT,"fast_conversation_last_prepare_to_convo_client",[{key:"model_id",value:A},{key:"prepare_state",value:String(T)},{key:"has_conduit_token",value:x!=null?"true":"false"}],oe)}await ge.sendRequest$({conduitToken:x,turnstileToken:Ie,proofToken:it,completionMetadata:o,resolvedParentMessageId:q,messages:D,extraStreamParams:a,chatReq:ue,profiler:h})}const hme=e=>m.createElement("svg",{width:20,height:20,viewBox:"0 0 20 20",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",...e},m.createElement("path",{d:"M4.12916 6.71647C3.30231 7.66684 2.69669 8.64386 2.31959 9.33561L2.1399 9.67643C2.03481 9.88215 2.03489 10.1172 2.1399 10.3229L2.31959 10.6637C2.79011 11.5269 3.61393 12.8363 4.78346 13.9811C6.11816 15.2875 7.85464 16.3346 10.0003 16.3346C11.1135 16.3346 12.116 16.0511 13.01 15.5973L13.9905 16.5778C12.8512 17.2276 11.5215 17.6646 10.0003 17.6647C7.38789 17.6647 5.33564 16.3827 3.8528 14.9313C2.55744 13.6633 1.65876 12.2312 1.14967 11.2965L0.955334 10.9284C0.6562 10.3426 0.656129 9.65668 0.955334 9.07096L1.14967 8.7028C1.56617 7.93819 2.24311 6.84027 3.18483 5.77213L4.12916 6.71647Z"}),m.createElement("path",{d:"M2.52955 2.52897C2.75682 2.30194 3.10844 2.27358 3.36647 2.44401L3.47096 2.52897L17.471 16.529L17.5559 16.6335C17.7264 16.8915 17.698 17.2431 17.471 17.4704C17.2437 17.6976 16.8922 17.7258 16.634 17.5553L16.5296 17.4704L2.52955 3.47037L2.44459 3.36588C2.27419 3.10776 2.30233 2.75619 2.52955 2.52897Z"}),m.createElement("path",{d:"M10.0003 2.33463C12.6124 2.33477 14.664 3.61673 16.1467 5.06803C17.6273 6.51728 18.5903 8.18058 19.0452 9.07096L19.1428 9.29557C19.311 9.75097 19.3109 10.2483 19.1428 10.7038L19.0452 10.9284C18.6628 11.6768 17.9199 12.9706 16.8137 14.2253L15.8714 13.2829C16.8454 12.1631 17.5118 11.0058 17.8606 10.3229L17.8948 10.2448C17.9539 10.0856 17.954 9.91374 17.8948 9.75455L17.8606 9.67643C17.4383 8.84982 16.5534 7.32638 15.2171 6.01822C13.8824 4.71194 12.1457 3.66485 10.0003 3.66471C8.88688 3.66471 7.88357 3.94723 6.98951 4.40104L6.00905 3.42057C7.14849 2.77093 8.47916 2.33463 10.0003 2.33463Z"}),m.createElement("path",{d:"M7.78053 10.3678C7.93665 11.3159 8.68321 12.0619 9.63112 12.2184L10.8831 13.4704C10.6006 13.5421 10.305 13.5817 10.0003 13.5817C8.02216 13.5817 6.41822 11.9778 6.41822 9.99967C6.41825 9.69449 6.45574 9.39775 6.5276 9.1149L7.78053 10.3678Z"}),m.createElement("path",{d:"M10.0003 6.41764C11.9781 6.41787 13.5811 8.02186 13.5813 9.99967C13.5813 10.304 13.5414 10.5994 13.47 10.8815L12.219 9.63053C12.0623 8.68292 11.3162 7.93616 10.3684 7.77994L9.11549 6.52701C9.39833 6.45518 9.69509 6.41764 10.0003 6.41764Z"})),pme=e=>m.createElement("svg",{width:20,height:20,viewBox:"0 0 20 20",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",...e},m.createElement("path",{d:"M16.0012 6.09038C16.0012 5.74214 15.8209 5.42299 15.5315 5.24175L15.4016 5.17241L10.4016 2.98491C10.1776 2.8869 9.9263 2.87423 9.69556 2.9478L9.59888 2.98491L4.59888 5.17241C4.23428 5.33192 3.99829 5.69242 3.99829 6.09038V10.8335C3.99834 12.3761 4.58097 13.7821 5.53735 14.8453C6.5736 13.5214 8.18682 12.6685 10.0002 12.6685C11.8135 12.6686 13.426 13.5216 14.4622 14.8453C15.4186 13.7821 16.0012 12.3762 16.0012 10.8335V6.09038ZM10.0002 13.9986C8.58354 13.9986 7.32514 14.6781 6.53345 15.731C7.5127 16.4254 8.70843 16.8355 10.0002 16.8355C11.2918 16.8354 12.4869 16.4252 13.4661 15.731C12.6744 14.6783 11.4167 13.9987 10.0002 13.9986ZM11.6262 8.54155C11.6261 7.64334 10.8984 6.91477 10.0002 6.9146C9.1019 6.9146 8.37336 7.64323 8.37329 8.54155C8.37329 9.43993 9.10186 10.1685 10.0002 10.1685C10.8985 10.1683 11.6262 9.43983 11.6262 8.54155ZM12.9563 8.54155C12.9563 10.1744 11.633 11.4984 10.0002 11.4986C8.36732 11.4986 7.04321 10.1745 7.04321 8.54155C7.04328 6.90869 8.36737 5.5855 10.0002 5.5855C11.633 5.58567 12.9562 6.9088 12.9563 8.54155ZM17.3313 10.8335C17.3312 14.8825 14.0492 18.1644 10.0002 18.1646C5.95114 18.1646 2.66831 14.8826 2.66821 10.8335V6.09038C2.66821 5.16401 3.21698 4.32497 4.06567 3.95366L9.06567 1.76616L9.29224 1.6812C9.82924 1.51009 10.4135 1.53807 10.9348 1.76616L15.9348 3.95366L16.0901 4.02886C16.8496 4.43032 17.3313 5.22192 17.3313 6.09038V10.8335Z"})),mme="https://help.openai.com/en/articles/11752874-chatgpt-agent#h_beedf96566";function gme({onClose:e,onConfirm:t}){return p.jsxs(ji,{testId:"modal-odyssey-takeover-nux",isOpen:!0,onClose:e,shouldIgnoreClickOutside:!0,onEscapeKeyDown:()=>{},className:"w-[420px]! p-2",children:[p.jsx("div",{className:"flex w-full flex-col items-center pt-2 text-center",children:p.jsx("div",{className:"text-xl font-semibold text-balance",children:p.jsx(K,{id:"0hMe9z",defaultMessage:"You’re about to control ChatGPT’s browser"})})}),p.jsx("div",{className:"border-token-border-default mt-6 mb-8 rounded-2xl border",children:p.jsxs("div",{className:"divide-token-border-default flex flex-col divide-y px-4",children:[p.jsxs("div",{className:"flex items-center gap-4 py-4 text-sm",children:[p.jsx(hme,{className:"h-6 w-6 shrink-0"}),p.jsxs("div",{children:[p.jsx("div",{className:"pb-0.5 font-medium",children:p.jsx(K,{id:"+htsoa",defaultMessage:"ChatGPT won’t take screenshots"})}),p.jsx("div",{className:"text-token-text-secondary",children:p.jsx(K,{id:"jNhK03",defaultMessage:"Only you can see info you enter (like passwords) while you’re in control."})})]})]}),p.jsxs("div",{className:"flex items-center gap-4 py-4 text-sm",children:[p.jsx(pme,{className:"h-6 w-6 shrink-0"}),p.jsxs("div",{children:[p.jsx("div",{className:"pb-0.5 font-medium",children:p.jsx(K,{id:"Ip50c4",defaultMessage:"Your browser session will be saved"})}),p.jsx("div",{className:"text-token-text-secondary",children:p.jsx(K,{id:"qE+5u7",defaultMessage:"This will keep you signed into sites after you finish. You can manage this in Settings."})})]})]}),p.jsxs("div",{className:"flex items-center gap-4 py-4 text-sm",children:[p.jsx(Xa,{className:"h-6 w-6 shrink-0 text-[#E25507] dark:text-[#FF9E6C]"}),p.jsxs("div",{children:[p.jsx("div",{className:"pb-0.5 font-medium text-[#E25507] dark:text-[#FF9E6C]",children:p.jsx(K,{id:"2OxBmy",defaultMessage:"This may put your data at risk"})}),p.jsx("div",{className:"text-[#E25507] opacity-80 dark:text-[#FF9E6C]",children:p.jsx(K,{id:"JGhrvI",defaultMessage:"Signing ChatGPT into websites can expose your data to malicious sites. {learnMoreLink}",values:{learnMoreLink:p.jsx("a",{href:mme,target:"_blank",rel:"noopener noreferrer",className:"underline",children:p.jsx(K,{id:"L9XdfE",defaultMessage:"Learn more"})})}})})]})]})]})}),p.jsxs("div",{className:"flex w-full flex-row gap-3",children:[p.jsx(Ct,{size:"large",color:"secondary",className:"flex flex-1",onClick:e,children:p.jsx(K,{id:"qz9XeG",defaultMessage:"Cancel"})}),p.jsx(Ct,{size:"large",color:"primary",className:"flex flex-1",onClick:()=>{t(),e()},children:p.jsx(K,{id:"h00sr3",defaultMessage:"I understand"})})]})]})}var _R=(e=>(e.FirstTimeUsingUserContext="oai/apps/hasUserContextFirstTime/2023-06-29",e.Onboarding="oai/apps/hasSeenOnboarding",e.TeamOwnerOnboarding="oai/apps/hasSeenTeamOwnerOnboarding",e.MemoryOnboarding="oai/apps/hasSeenMemoryOnboarding",e.TemporaryChatOnboarding="oai/apps/hasSeenTemporaryChatOnboarding",e.ArchiveConversationOnboarding="oai/apps/hasSeenArchiveConversationOnboarding",e.NewOnboardingConvo="oai/apps/hasSeenNewUserOnboardingConvo",e.DalleEditingOnboarding="oai/apps/hasSeenDalleEditingOnboarding",e.ModelSwitcherAutoDowngrade="oai/apps/hasSeenModelSwitcherAutoDowngrade",e.hasDismissedCanvasOnboarding="oai/apps/hasDismissedCanvasOnboarding",e.hasDismissedCanvasContextualOnboarding="oai/apps/hasDismissedCanvasContextualOnboarding",e.HasSeenAdvancedVoiceOnMobile="oai/apps/hasSeenAdvancedVoiceOnMobile/2024-09-26",e.SidekickLauncherOnboarding="oai/apps/hasSeenSidekickLauncherOnboarding",e.UseSidekick="oai/apps/hasDismissedUseSidekick",e.UseSidetron="oai/apps/hasDismissedUseSidetron",e.hasSeenSncUsageNux="oai/apps/hasSeenSncUsageNux",e.hasSeenSncWelcomeNux="oai/apps/hasSeenSncWelcomeNux",e.hasSeenSncSourcesTooltip="oai/apps/hasSeenSncSourcesTooltip",e.hasSeenComposerSearchButtonTooltip="oai/apps/hasSeenComposerSearchButtonTooltip",e.hasSeenComposerContextualAnswerTooltip="oai/apps/hasSeenComposerContextualAnswerTooltip",e.hasSeenContextualAnswerAdminNuxModal="oai/apps/hasSeenContextualAnswerAdminNuxModal",e.hasSeenContextualAnswerUserNuxModal="oai/apps/hasSeenContextualAnswerUserNuxModal",e.hasSeenConnectorsNuxModal="oai/apps/hasSeenConnectorsNuxModal",e.hasSeenGoogleConnectorsNuxModal="oai/apps/hasSeenGoogleConnectorsNuxModal",e.hasSeenContextualAnswerGoogleSyncFinished="oai/apps/hasSeenContextualAnswerGoogleSyncFinished",e.hasSeenConnectorsSourcesPillTooltip="oai/apps/hasSeenConnectorsSourcesPillTooltip",e.hasSeenConnectorsUpgradeFileAccessModal="oai/apps/hasSeenConnectorsUpgradeFileAccessModal",e.hasSeenComposerSystemHintButtonTooltip="oai/apps/hasSeenComposerSystemHintButtonTooltip",e.hasSeenPioneer="oai/apps/hasSeenPioneer",e.hasSeenMaverick="oai/apps/hasSeenMaverick",e.hasSeenMaverickCapi="oai/apps/hasSeenMaverickCapi",e.hasSeenTrailBlazer="oai/apps/hasSeenTrailBlazer",e.hasSeenStratos="oai/apps/hasSeenStratos",e.hasSeenAdvancedVoiceNuxFullPage="oai/apps/hasSeenAdvancedVoice/2024-09-24",e.hasSeenWindowsAppOnboarding="oai/apps/hasSeenWindowsAppOnboarding",e.DesktopBrowserExtensionAnnouncement="oai/apps/hasSeenDesktopBrowserExtensionAnnouncement",e.DesktopBrowserExtensionReactiveAnnouncement="oai/apps/hasSeenDesktopBrowserExtensionReactiveAnnouncement",e.DesktopOperatorAnnouncement="oai/apps/hasSeenDesktopOperatorAnnouncement",e.DesktopClassmatesPromotionAnnouncement="oai/apps/hasSeenDesktopClassmatesPromotionAnnouncement",e.NewOnboardingFlow="oai/apps/hasSeenOnboardingFlow",e.NewStaticOnboardingFlow="oai/apps/hasSeenStaticOnboarding",e.hasUsedConversationalOnboardingStarterPrompt="oai/apps/hasUsedNewUserStarterPrompt",e.hasSeenProjectsWebNuxTooltip="oai/apps/hasSeenProjectsWebNuxTooltip",e.hasSeenProjectsUpdateNuxTooltip="oai/apps/hasSeenProjectsUpdateNuxTooltip",e.hasSeenMemoryInSearch="oai/apps/hasSeenMemoryInSearch",e.hasSeenMoonshineNux="oai/apps/hasSeenMoonshineNux",e.hasSeenMoonshineNuxV2="oai/apps/hasSeenMoonshineNuxV2",e.hasSeenInlineFeedbackCustomInstrMessage="oai/apps/hasSeenInlineFeedbackCustomInstrMessage",e.hasSeenCaSystemHint="oai/apps/hasSeenCaSystemHint",e.hasDismissedPromoRedemption="oai/apps/hasDismissedPromoRedemption",e.hasSeenFilePickerNuxTooltip="oai/apps/hasSeenFilePicker",e.hasSeenMultipleGPTEditorsTooltip="oai/apps/hasSeenMultipleGPTEditorsTooltip",e.hasSeenSharedProjectsTooltip="oai/apps/hasSeenSharedProjectsTooltip",e.hasSeenPhoenixNux="oai/apps/hasSeenPhoenixNux",e.hasSeenPhoenixFreeNux="oai/apps/hasSeenPhoenixFreeNux",e.hasSeenAshwingNux="oai/apps/hasSeenAshwingNux",e.hasDismissedReferrerRedemption="oai/apps/hasDismissedReferrerRedemption",e.hasDismissedRefereeRedemption="oai/apps/hasDismissedRefereeRedemption",e.hasSeenReferralUpsellAnnouncement="oai/apps/hasSeenReferralProgramUpsell",e.hasSeenTatertotIntakeForm="oai/apps/hasSeenTatertotIntakeForm",e.hasSeenComposerBigBoxEnterHint="oai/apps/hasSeenComposerBigBoxEnterHint",e.d2dee219="oai/apps/d2dee219",e.hasSeenStudentsUpsellAnnouncement="oai/apps/hasSeenStudentsUpsellAnnouncement",e.hasSeenMemoryUpdatedTooltip="oai/apps/hasSeenMemoryUpdatedTooltip",e.hasSeenTeamsContextualAnswersUpsell="oai/apps/hasSeenTeamsContextualAnswersUpsell",e.hasSeenO3O4MiniAutomations="oai/apps/hasSeenO3O4MiniAutomations",e.hasSeenn7jupdNux="oai/apps/hasSeenn7jupdNux",e.hasSeenTatertotNux="oai/apps/hasSeenTatertotNux",e.hasSeenAudioParagenPrompt="oai/apps/hasSeenAudioParagenPrompt",e.hasSeenOdysseyConnectorsModal="oai/apps/hasSeenOdysseyConnectorsModal",e.hasSeenOdysseyTakeoverModal="oai/apps/hasSeenOdysseyTakeoverModal",e.hasSeenAgentModeAnnouncementBanner="oai/apps/hasSeenAgentModeAnnouncementBanner",e.hasSeenBurritoNux="oai/apps/hasSeenBurritoNux",e))(_R||{});function _me(){"use forget";return vx(vme)}function vme(e){return e.eligible_announcements}function yme(e){"use forget";const t=xe.c(12),{data:n,isLoading:r}=_me();let s;t[0]!==n?(s=n===void 0?[]:n,t[0]=n,t[1]=s):s=t[1];const i=s,{mutate:o}=Cme();let a;t[2]!==e||t[3]!==o?(a=()=>o({key:e}),t[2]=e,t[3]=o,t[4]=a):a=t[4];const c=a;let l;t[5]!==i||t[6]!==e?(l=i.includes(e),t[5]=i,t[6]=e,t[7]=l):l=t[7];let u;return t[8]!==r||t[9]!==c||t[10]!==l?(u={eligible:l,markAsViewed:c,isLoading:r},t[8]=r,t[9]=c,t[10]=l,t[11]=u):u=t[11],u}function Cme(){"use forget";const e=xe.c(2),t=Tn();let n;return e[0]!==t?(n={mutationFn:bme,onMutate:r=>{const{key:s}=r;t.getQueryData(["userSettings"])?.persistent_announcements?.includes(s)||t.setQueryData(["userSettings"],o=>({...o,eligible_announcements:o.eligible_announcements.filter(a=>a!==s)}))},onSuccess:()=>{t.invalidateQueries({queryKey:["userSettings"]})}},e[0]=t,e[1]=n):n=e[1],gn(n)}function bme(e){const{key:t}=e;return H.safePost("/settings/announcement_viewed",{parameters:{query:{announcement_id:t}}})}const hbe=m.createContext(()=>Promise.resolve()),Sme=m.createContext(null),wme=()=>m.useContext(Sme)!=null;m.createContext({onDismount:()=>{}});const Eme="I took control of the virtual browser. If you're unsure what changed, ask for more context. If the task is complete, just acknowledge and wrap it up. Otherwise, please proceed.",pn=vt(()=>({token:null,clientThreadId:null,isOpen:!1,isResuming:!1,parentMessageId:null,vmId:null,takeControlPlaceholderMessageId:null})),pbe=(e,t)=>{pn.setState(n=>({...n,clientThreadId:e,token:t}))},xme=()=>{const e=Y(),t=yme(_R.hasSeenOdysseyTakeoverModal),{clientThreadId:n}=pn(),r=Hs(n??void 0,a=>Z.findNode(a,c=>c.message.author.name==="n7jupd.metadata"));if(!n)return()=>{Os.info("VNC modal opened without a client thread id")};const s=async a=>{const c=ur(a);if(c)return await H.safePost("/conversation/{conversation_id}/agent/resume",{parameters:{path:{conversation_id:c}}})},i=()=>{if(!Ur()||!r?.message.metadata?.kaur1br5_mode)return Promise.resolve(!1);const a=ur(n);if(!a)return Os.info("Agent viewer opened without a server thread id"),Promise.resolve(!1);try{const l=wu()?.tryOpenAgentViewer(a)??!1;return Promise.resolve(l)}catch{return Os.error("Failed to open local agent viewer - error thrown"),Promise.resolve(!1)}},o=async()=>{if(await i()){Os.info("Opened VNC modal with local agent viewer");return}pn.setState({isResuming:!0}),pn.setState({isOpen:!0}),ll.setSidebarOpen(!1);const a=await s(n);pn.setState({isResuming:!1,vmId:a?.vm_id}),vR({})};return async()=>{if(t.eligible){M2(e,gme,{onConfirm:async()=>{t.markAsViewed(),await o()}});return}await o()}},Tme=async(e,{startNewTurn:t})=>{pn.setState({isOpen:!1}),await yR(e,{startNewTurn:t})},Ome=e=>{const t=Nh("",{is_takeover_ended_message:!0,system_hints:[Co]});(t.clientMetadata||={}).isPlaceholder=!0,lt(e,n=>{tr.appendMessage(n,t)}),pn.setState({takeControlPlaceholderMessageId:t.id})},kme=e=>{const{takeControlPlaceholderMessageId:t}=pn.getState();t&&(lt(e,n=>{tr.updateTree(n,r=>{r.containsNodeOrMessageId(t)&&r.updateNodeMetadata(t,{isPlaceholder:!1})})}),pn.setState({takeControlPlaceholderMessageId:null}))},vR=async({showPlaceholderMessage:e=!1})=>{const{clientThreadId:t}=pn.getState();if(!t){Os.info("VNC takeover started without a client thread id");return}e&&Ome(t);const n=await DN(t);pn.setState({parentMessageId:n?.last_message_id})},yR=async(e,{startNewTurn:t})=>{const{clientThreadId:n}=pn.getState();if(!n){Os.info("VNC modal closed without a client thread id");return}if(!t)return;const r=Ame();kme(n),await fme({ctx:e,clientThreadId:n,eventSource:"mouse",promptMessage:Nh(Eme,{is_takeover_ended_message:!0,system_hints:[Co]}),parentMessageIdPromise:r,completionMetadata:{systemHints:[Co],conversationMode:{kind:St.PrimaryAssistant}}})},Ame=(e=5e3)=>new Promise(t=>{const{parentMessageId:n}=pn.getState();if(n)return t(n);const r=setTimeout(()=>{s(),t(void 0)},e),s=pn.subscribe(i=>{i.parentMessageId&&(t(i.parentMessageId),clearTimeout(r),s())})}),mbe=()=>{pn.setState({token:null,clientThreadId:null,isOpen:!1})},gbe=()=>{const e=xme(),t=pn(s=>({token:s.token,clientThreadId:s.clientThreadId,isOpen:s.isOpen,isResuming:s.isResuming,vmId:s.vmId,open:e,close:Tme})),r=!wme();return m.useMemo(()=>({...t,isVNCEnabled:r}),[t,r])};function Mme(){const e=Ii(Ms.wantsHandleAgentRequest$),t=Y();m.useEffect(()=>{if(!e)return;Ms.wantsHandleAgentRequest$.set(!1);const n=Ms.agentRequest;if(n)switch(n){case"startTakeoverFromAgent":{vR({showPlaceholderMessage:!0});break}case"endTakeoverFromAgent":{yR(t,{startNewTurn:!0});break}}},[e,t])}function jE(e,t,n,r,{name:s,value:i}){const o=new URLSearchParams(e);o.get(s)!==i&&(o.set(s,i),r({pathname:t,search:o.toString(),hash:n},{replace:!0}))}function Ime(){const e=fr(),t=Fr(),[n,r]=A8(c=>[Fy(c),k8(c)]),s=Y(),i=Ft(s),o=Ii(Ms.wantsAuthSessionContext$);Mme();const a=zue();return m.useEffect(()=>{a&&(i?a.recordAvailableSessionAuth():a.onMissingSessionAuth())},[a,i]),m.useEffect(()=>{if(!o)return;Ms.wantsAuthSessionContext$.set(!1);const c=Ms.authSessionContext;if(c)switch(c.behavior){case"justLoggedInAccessToken":i&&q8(s,c.authToken.accessToken);break;case"reloadPageIfLoggedOut":i||window.location.reload();break}},[i,s,o]),m.useEffect(()=>{n&&jE(e.search,e.pathname,e.hash,t,yF),r&&jE(e.search,e.pathname,e.hash,t,CF),r?document.body.setAttribute("data-window-style","sidebar_view"):document.body.removeAttribute("data-window-style")},[e.pathname,e.search,e.hash,t,n,r]),null}const Nme="sourcesSidebar",Rme="initialPageLoad";function UE(e){return e.type==="summarizer"}function ic(e){return e.type==="searchSources"}function BE(e){return e.type==="caterpillar"}function qf(e){return e.type==="retrievalResults"}function CR(e){return e.type==="product"}function qE(e){return e.type==="n7jupdSources"}function GE(e){return e.type==="codingCitations"}class No extends Su()(t=>t){static getIsOpen=({isOpen:t})=>t;static getActiveSidebar=({activeSidebar:t})=>t;openThreadSidebar=t=>{Ume(t),this.setState({isOpen:!0,activeSidebar:t})};updateThreadSidebar=t=>{this.setState({activeSidebar:t})};toggleThreadSidebar=(t,n)=>{const r=this.getState(),s=r.activeSidebar,i=r.isOpen&&s&&Pme(t,s);if(ic(t)&&i&&s&&ic(s)&&s.scrollToHeader!==t.scrollToHeader){this.updateThreadSidebar({...t,shouldAnimateScroll:!0});return}i?this.closeThreadSidebar():(n?.(),this.openThreadSidebar(t))};closeThreadSidebar=()=>{const t=this.getState().activeSidebar;t&&Bme(t),this.setState({isOpen:!1,activeSidebar:void 0})}}const Pme=(e,t)=>ic(e)&&ic(t)?t.messageId===e.messageId:BE(e)&&BE(t)?t.caterpillarId===e.caterpillarId&&t.initialTab===e.initialTab:UE(e)&&UE(t)?t.clientThreadId===e.clientThreadId&&t.turnIndex===e.turnIndex:qf(e)&&qf(t)?t.clientThreadId===e.clientThreadId&&t.turnIndex===e.turnIndex&&t.messageId===e.messageId:qE(e)&&qE(t)?t.clientThreadId===e.clientThreadId&&t.messageId===e.messageId:GE(e)&&GE(t)?t.clientThreadId===e.clientThreadId&&t.messageId===e.messageId&&t.matchedText===e.matchedText:!1;function Dme(e){const{isOpen:t}=e;return JSON.stringify({isOpen:t})}function Lme({children:e}){const[t]=m.useState(()=>{let n;return n={isOpen:new URLSearchParams(window.location.search).get(Nme)==="open",activeSidebar:{type:"searchSources",turnIndex:0,messageId:"",clientThreadId:Rme}},new No(n)});return m.useEffect(()=>t.subscribe((n,r)=>{if(!(n.isOpen!==r.isOpen))return;const i=Dme(n);de.setCookie(ie.ThreadSidebarState,i,{maxAge:2*365*24*60*60})}),[t]),p.jsx(No.Provider,{store:t,children:e})}const _be=()=>{const e=No.useStore(),t=m.useCallback(s=>e.openThreadSidebar(s),[e]),n=m.useCallback((s,i)=>e.toggleThreadSidebar(s,i),[e]),r=m.useCallback(()=>e.closeThreadSidebar(),[e]);return{openThreadSidebar:t,toggleThreadSidebar:n,closeThreadSidebar:r}};function Fme(e,t){return e.type===t}function vbe(){return No.useState(No.getIsOpen)}function jme(){return No.useState(No.getActiveSidebar)}function ybe(e){const t=jme();if(e&&t&&Fme(t,e))return t}const Ume=e=>{if(ic(e)){const{clientThreadId:t,turnIndex:n,messageId:r}=e;P.logEventWithStatsig("Search Links Sidebar Shown","search_links_sidebar_shown",ss({turnIndex:n,clientThreadId:t,messageId:r}))}else if(CR(e)){const{clientThreadId:t,turnIndex:n,messageId:r,contentReferenceStartIndex:s,productIndex:i}=e;P.logEventWithStatsig("Product Sidebar Shown","product_sidebar_shown",{...ss({turnIndex:n,clientThreadId:t,messageId:r}),content_reference_start_index:s,product_index:(i+1).toString()})}else if(qf(e)){const{clientThreadId:t,turnIndex:n}=e;P.logEventWithStatsig("File Sources Sidebar Shown","file_sources_sidebar_shown",{...ss({turnIndex:n,clientThreadId:t})})}},Bme=e=>{if(ic(e)){const{clientThreadId:t,messageId:n,turnIndex:r}=e;P.logEventWithStatsig("Search Links Sidebar Closed","search_links_sidebar_closed",ss({clientThreadId:t,messageId:n,turnIndex:r}))}else if(CR(e)){const{clientThreadId:t,messageId:n,turnIndex:r,contentReferenceStartIndex:s,productIndex:i}=e;P.logEventWithStatsig("Product Sidebar Closed","product_sidebar_closed",{...ss({turnIndex:r,clientThreadId:t,messageId:n}),content_reference_start_index:s,product_index:(i+1).toString()})}else if(qf(e)){const{clientThreadId:t,turnIndex:n}=e;P.logEvent("File Sources Sidebar Closed",ss({clientThreadId:t,turnIndex:n}))}},qme=()=>(m.useEffect(()=>{const e=({shiftKey:r,metaKey:s,ctrlKey:i})=>{Lv.setState({shift:r,meta:s,ctrl:i})},t=()=>{Lv.setState(aM)},n={passive:!0,capture:!0};return document.addEventListener("keydown",e,n),document.addEventListener("keyup",e,n),document.addEventListener("visibilitychange",t,n),()=>{document.removeEventListener("keydown",e,n),document.removeEventListener("keyup",e,n),document.removeEventListener("visibilitychange",t,n)}},[]),null);function Gf(e,t){for(const[n,r]of Object.entries(t))e.addEventListener(n,r);return()=>{for(const[n,r]of Object.entries(t))e.removeEventListener(n,r)}}function Cbe(e,t){for(const[n,r]of Object.entries(t))e.on(n,r);return()=>{for(const[n,r]of Object.entries(t))e.off(n,r)}}class iy extends Su()(()=>({windowWidth:window.innerWidth,windowHeight:window.innerHeight})){static selectWindowWidth=({windowWidth:t})=>t;static selectWindowHeight=({windowHeight:t})=>t}function bbe(e,t){const n=iy.useStore();return m.useSyncExternalStore(r=>n.subscribe((s,i)=>{e(s)!==e(i)&&r()}),()=>e(n.getState()),()=>t??e(n.getInitialState()))}function Gme({children:e}){const[t]=m.useState(()=>new iy);return m.useEffect(()=>Gf(window,{resize:()=>{t.setState({windowWidth:window.innerWidth,windowHeight:window.innerHeight})}}),[t]),p.jsx(iy.Provider,{store:t,children:e})}class bR{cacheK1=new Map;get(t,n){return this.cacheK1.get(t)?.get(n)}set(t,n,r){let s=this.cacheK1.get(t);s||(s=new Map,this.cacheK1.set(t,s)),s.set(n,r)}delete(t,n){const r=this.cacheK1.get(t);r&&(r.delete(n),r.size===0&&this.cacheK1.delete(t))}}const HE=new bR,oy=new bR;function Hme(e,t){const n=oy.get(e,t);if(n==null){const r=MU(e,t).catch(()=>rl);return oy.set(e,t,r),r}return n}function Vme(e,t){if(e===vh)return rl;const n=HE.get(e,t);if(n!=null)return n;const r=Hme(e,t),s=m.use(r);return s===rl?rl:(HE.set(e,t,s),oy.delete(e,t),s)}function zme({children:e,locale:t}){const n=Y(),r=ix(t)&&gt(n,"2884982660").get("load-machine-translated",!1),s=Vme(t,r);return p.jsx(PR,{defaultLocale:vh,locale:t,messages:s,children:p.jsx(SV,{dir:rx.has(t)?"rtl":"ltr",children:e})})}const $me=({children:e})=>{const t=KR().locale;return m.useEffect(()=>{const n=navigator.language??"",r=sx(n);P.logEvent("Locale Loaded",{loaded_locale:t,raw_browser_locale:navigator.language,suggested_locale:r}),Fe.logEvent("chatgpt_locale_loaded",t,{loaded_locale:t,raw_browser_locale:navigator.language,suggested_locale:r??""})},[t]),p.jsx(zme,{locale:t,children:e})};var y_,VE;function Wme(){if(VE)return y_;VE=1;var e=dc(),t=hr(),n=Pi(),r="[object String]";function s(i){return typeof i=="string"||!t(i)&&n(i)&&e(i)==r}return y_=s,y_}var Kme=Wme();const Yme=Ot(Kme);function Zme(e){return new Promise(t=>{requestAnimationFrame(()=>{setTimeout(()=>{t(e())},0)})})}const pp=nt("livekit"),Sbe=()=>Ii(()=>pp()),wbe=()=>Zme(()=>pp()),mp=nt(""),Ebe=()=>Ii(()=>mp()),xbe=()=>{requestAnimationFrame(()=>{mp.set("")})};function se(e,t,n){return r=>{requestAnimationFrame(()=>{const s=pp(),i=r?.voice_session_id??mp(),o={...r,message:t,protocol:s,voice_session_id:i};R.addAction(e,o),n&&qd(Xe(),n,void 0,jN(o,a=>Yme(a)))})}}function Ks(e){return(t,n)=>{requestAnimationFrame(()=>{const r=pp(),s=n?.voice_session_id??mp();t instanceof je||R.addError(t,{...n,status:"error",name:e,protocol:r,voice_session_id:s})})}}const zE={audioPlayer:{error:Ks("audio-player")},readAloud:{click:se("read-aloud","click"),error:Ks("read-aloud")},messagePlayback:{click:se("message-playback","click")},toggleVideoButton:{click:se("toggle-video-button","click")},toggleMuteButton:{click:se("toggle-mute-button","click")},toggleScreenShareButton:{click:se("toggle-screenshare-button","click")},composerSpeechButton:{hover:se("composer-speech-button","hover")},voiceSessionEndedByUser:{click:se("voice-session-ended-by-user","click")},voiceSessionStarted:{click:se("voice-session-started","click")},voiceSessionDuration:{duration:se("voice-session-duration","duration")},voiceSessionListening:{stateChange:se("voice-session-listening","stateChange")},voiceSessionListeningIntently:{stateChange:se("voice-session-listening-intently","stateChange")},voiceSessionThinking:{stateChange:se("voice-session-thinking","stateChange")},voiceSessionSpeaking:{stateChange:se("voice-session-speaking","stateChange")},voiceSessionHalted:{stateChange:se("voice-session-halted","stateChange")},voiceSessionDisconnected:{stateChange:se("voice-session-disconnected","stateChange")},voiceMode:{connect:se("voice-mode","connect"),error:se("voice-mode","error")},previews:{click:se("previews","click"),error:Ks("previews")},getToken:{request:se("get-token","request"),success:se("get-token","success"),failure:se("get-token","failure")},getVoiceStatus:{request:se("get-voice-status","request"),success:se("get-voice-status","success"),failure:se("get-voice-status","failure")},livekit:{connectCalled:se("livekit","connectCalled"),success:se("livekit","success"),failure:Ks("livekit")},bloop:{performance:se("bloop","performance")},voiceSelectionShown:{click:se("voice-selection-shown","click","voice_selection_shown")},voiceSelected:{click:se("voice-selected","click")},voiceAdvancedDisclosureShown:{success:se("voice-advanced-disclosure-shown","success")},voiceAdvancedDisclosureAccepted:{click:se("voice-advanced-disclosure-accepted","click")},rateLimitReached:{success:se("rate-limit-reached","success"),modalShown:se("rate-limit-reached","modalShown")},upsell:{upgradeToPlus:se("upsell","upgradeToPlus"),upgradeToPro:se("upsell","upgradeToPro"),upgradeToApp:se("upsell","upgradeToApp"),appUpsellShown:se("upsell","appUpsellShown"),appUpsellDismissed:se("upsell","appUpsellDismissed")},feedbackShown:{success:se("feedback-shown","success")},feedbackThumbsUp:{success:se("feedback-thumbs-up","success")},feedbackThumbsDown:{success:se("feedback-thumbs-down","success")},feedbackDetails:{audio_issues:se("feedback-details","audio_issues"),response_quality:se("feedback-details","response_quality"),interruptions:se("feedback-details","interruptions"),transcription_issues:se("feedback-details","transcription_issues"),inaudible_issues:se("feedback-details","inaudible_issues"),other:se("feedback-details","other"),inputText:se("feedback-details","inputText")},connectionLatency:{success:se("connection-latency","success"),failure:Ks("connection-latency")},firstListeningLatency:{success:se("first-listening-latency","success")},permissions:{denied:se("permissions-denied")},voiceSessionFirstListening:{stateChange:se("voice-session-first-listening","stateChange")},voiceSessionFirstSpeaking:{stateChange:se("voice-session-first-speaking","stateChange")},defaultMediaDeviceChanged:{success:se("default-media-device-changed","success"),failure:Ks("default-media-device-changed")},voiceStatusCache:{hit:se("voice-status-cache","hit"),failed:se("voice-status-cache","failed"),ineligible:se("voice-status-cache","ineligible"),skipped:se("voice-status-cache","skipped")},certificateCache:{hit:se("certificate-cache","hit")},peerConnectionCache:{hit:se("peer-connection-cache","hit")},certificateLocalDb:{hit:se("certificate-local-db","hit"),generated:se("certificate-local-db","generated"),saveFailed:Ks("certificate-local-db"),loadFailed:Ks("certificate-local-db")}},On=vt(qY(Ri(()=>({playerNode:null,playerApi:null,playerState:{sourceUrl:null,isPlaying:!1}}))));function Tbe(){return On(e=>e.playerApi)}function Obe(e){return On(t=>e(t.playerState))}function kbe(){return On.getState().playerApi}function Abe(){return On.getState().playerState}const Jme=m.memo(function(){const t=m.useRef(null),n=On(r=>r.playerNode);return m.useEffect(()=>{const r=t.current;r&&!n&&(r.onplay=()=>{On.setState(s=>{s.playerState.isPlaying=!0})},r.onpause=()=>{On.setState(s=>{s.playerState.isPlaying=!1})},r.ontimeupdate=()=>{On.setState(s=>{s.playerState.currentTime=r.currentTime})},r.ondurationchange=()=>{On.setState(s=>{s.playerState.duration=r.duration})},r.onerror=s=>{typeof s=="string"?zE.audioPlayer.error(new Error(s)):s.target&&"error"in s.target&&zE.audioPlayer.error(s.target.error)},On.setState({playerNode:r,playerApi:new Qme(r)}))},[n]),p.jsx("audio",{className:"fixed start-0 bottom-0 hidden h-0 w-0",autoPlay:!0,crossOrigin:"anonymous",ref:t})});class Qme{constructor(t){this.player=t}get state(){return On.getState().playerState}changeSource(t){this.player.src&&this.player.src!==t&&this.stop(),this.player.src=t,On.setState(n=>{n.playerState.sourceUrl=t})}async play(){this.state.isPlaying||await this.player.play()}pause(){this.state.isPlaying&&this.player.pause()}stop(){this.pause(),this.player.removeAttribute("src"),On.setState(t=>{t.playerState.sourceUrl=null,t.playerState.currentTime=void 0,t.playerState.duration=void 0})}setCurrentTime(t){this.player.currentTime=t}setSpeed(t){this.player.playbackRate=t,this.player.defaultPlaybackRate=t}}function Mbe(e){const t=On.getState().playerNode;if(!t)return!1;const n=t.canPlayType(e);return n==="probably"||n==="maybe"}const Xme=({children:e})=>{const t=Ur();return p.jsx(cW,{children:p.jsx($me,{children:p.jsx(pY,{children:p.jsxs(Lme,{children:[p.jsx(qle,{children:p.jsx(Gme,{children:e})}),p.jsx(Jme,{}),p.jsx(qme,{}),null,t?p.jsx(Ime,{}):null]})})})})},ay=({resetError:e,componentStack:t,error:n})=>(m.useEffect(()=>{R.addError(n),Gt?.publish(Si.ERROR_THROWN,{error:n})},[n]),p.jsxs("div",{className:"flex h-full w-full flex-col items-center justify-center gap-4",children:[p.jsx("h2",{children:"Content failed to load"}),!1,p.jsx(Ct,{color:"secondary",onClick:e,children:"Try again"}),!1]})),kC=nt(!1),Ibe=kC;function ege(e){const t=Gf(e.document,{keydown:nge,keyup:Ud,visibilitychange:Ud}),n=Gf(e,{blur:Ud});return()=>{t(),n()}}const tge=500;let Hf;function nge(e){rge(e)?Hf??=setTimeout(()=>{kC.set(!0)},tge):Hf&&Ud()}function rge(e){return!jh(e)&&e.key===(m9()?"Meta":"Control")&&bT(e)===ZH()}function Ud(){clearTimeout(Hf),Hf=void 0,kC.set(!1)}var Cr={},$E;function sge(){if($E)return Cr;$E=1,Object.defineProperty(Cr,"__esModule",{value:!0});for(var e=typeof window<"u"&&/Mac|iPod|iPhone|iPad/.test(window.navigator.platform),t={alt:"altKey",control:"ctrlKey",meta:"metaKey",shift:"shiftKey"},n={add:"+",break:"pause",cmd:"meta",command:"meta",ctl:"control",ctrl:"control",del:"delete",down:"arrowdown",esc:"escape",ins:"insert",left:"arrowleft",mod:e?"meta":"control",opt:"alt",option:"alt",return:"enter",right:"arrowright",space:" ",spacebar:" ",up:"arrowup",win:"meta",windows:"meta"},r={backspace:8,tab:9,enter:13,shift:16,control:17,alt:18,pause:19,capslock:20,escape:27," ":32,pageup:33,pagedown:34,end:35,home:36,arrowleft:37,arrowup:38,arrowright:39,arrowdown:40,insert:45,delete:46,meta:91,numlock:144,scrolllock:145,";":186,"=":187,",":188,"-":189,".":190,"/":191,"`":192,"[":219,"\\":220,"]":221,"'":222},s=1;s<20;s++)r["f"+s]=111+s;function i(f,h,g){h&&!("byKey"in h)&&(g=h,h=null),Array.isArray(f)||(f=[f]);var _=f.map(function(C){return c(C,h)}),v=function(E){return _.some(function(b){return l(b,E)})},y=g==null?v:v(g);return y}function o(f,h){return i(f,h)}function a(f,h){return i(f,{byKey:!0},h)}function c(f,h){var g=h&&h.byKey,_={};f=f.replace("++","+add");var v=f.split("+"),y=v.length;for(var C in t)_[t[C]]=!1;var E=!0,b=!1,S=void 0;try{for(var w=v[Symbol.iterator](),x;!(E=(x=w.next()).done);E=!0){var T=x.value,O=T.endsWith("?")&&T.length>1;O&&(T=T.slice(0,-1));var A=d(T),k=t[A];if(T.length>1&&!k&&!n[T]&&!r[A])throw new TypeError('Unknown modifier: "'+T+'"');(y===1||!k)&&(g?_.key=A:_.which=u(T)),k&&(_[k]=O?null:!0)}}catch(I){b=!0,S=I}finally{try{!E&&w.return&&w.return()}finally{if(b)throw S}}return _}function l(f,h){for(var g in f){var _=f[g],v=void 0;if(_!=null&&(g==="key"&&h.key!=null?v=h.key.toLowerCase():g==="which"?v=_===91&&h.which===93?91:h.which:v=h[g],!(v==null&&_===!1)&&v!==_))return!1}return!0}function u(f){f=d(f);var h=r[f]||f.toUpperCase().charCodeAt(0);return h}function d(f){return f=f.toLowerCase(),f=n[f]||f,f}return Cr.default=i,Cr.isHotkey=i,Cr.isCodeHotkey=o,Cr.isKeyHotkey=a,Cr.parseHotkey=c,Cr.compareHotkey=l,Cr.toKeyCode=u,Cr.toKeyName=d,Cr}var ige=sge();const oge=Ot(ige),age=It(()=>{const e=nt([]),t=nt(void 0),n=Ly(()=>{const a=t();return e().filter(c=>KE(c,a))});function r(...a){return e.set(c=>[...a,...c]),()=>{e.set(c=>c.filter(l=>!a.includes(l)))}}function s(a){const c=Ep(t);return t.set(a),()=>t.set(c)}function i(a){return Gf(a.document,{keydown:o})}function o(a){if(a.key===void 0||a.repeat||jh(a)||a.defaultPrevented)return;const l=Ep(e),u=Ep(t);for(const d of l)if(cge(d,a)&&KE(d,u)&&d.action(a)!==!1){P.logEventWithStatsig("Keyboard Shortcut","keyboard_shortcut",{keyboardActionKey:d.key}),R.addAction("chatgpt_keyboard_shortcut",{keyboardActionKey:d.key}),a.preventDefault();return}}return{actions$:n,addAction:r,limitActionGroups:s,registerEventListener:i}}),WE=new WeakMap;function cge(e,t){let n=WE.get(e);if(!n){const{keyboardBinding:r,altKeyboardBindings:s}=e,i=[r,...s??[]].map(o=>o.join("+"));n=oge(i,{byKey:!0}),WE.set(e,n)}return n(t)}function KE(e,t){return!(e.enabled===!1||t!=null&&!t.includes(e.group))}function lge(){const[e,t]=zf(),n=Ue(),r=Rt(),s=e.get(Tp),i=e.get(Op),o=on();m.useEffect(()=>{let a=!1;if(o&&s==="true"){let l;o.isWorkspacePlan()?l=o.name??"Workspace":l="Personal",r.info(n.formatMessage({id:"S4JoJY",defaultMessage:"Switched to {name}"},{name:l})),a=!0}let c=!1;if(typeof i=="string"&&uge(i)){const l=SR[i];r.danger(n.formatMessage(l),{toastId:"error_query_param",loggingTitle:i,loggingDescription:l.defaultMessage?String(l.defaultMessage):""}),c=!0}(e.has(Tp)||e.has(Op))&&t(l=>(a&&l.delete(Tp),c&&l.delete(Op),l),{replace:!0})},[s,o,i,n,e,t,r])}function uge(e){return e in SR}const SR=ze({invalidToken:{id:"UAhT32",defaultMessage:"The token is invalid"},continueFromApiGeneric:{id:"FHUH8C",defaultMessage:"Unable to continue your conversation"}});class AC{subscribers;constructor(t){this.subscribers=AC.createTypedEmitterAllEventSubscribers(t)||{}}publish(t,n){const r=this.subscribers[t]||{};for(const s of Object.values(r))s(n)}subscribe(t,n){const r=dr();this.subscribers[t]||(this.subscribers[t]={});const s=this.subscribers[t];return s[r]=n,()=>{delete s[r]}}static createTypedEmitterAllEventSubscribers(t){return t.reduce((n,r)=>(n[r]={},n),{})}}class dge extends AC{constructor(){super(Object.values(x2))}getVersion(){return 1}}const fge=new dge;function hge(){const e=Y(),n=Zn(e).getContext().user,r=Jl(e),s=Nt(e);m.useEffect(()=>{Gt&&(r?.accessToken&&r?.user?.id?Gt.publish(Si.LOGIN_CHANGED,{userId:r.user.id,accountId:s?.id,authToken:r.accessToken,statsigUser:n,email:r.user.email}):Gt.publish(Si.LOGOUT,{statsigUser:n}))},[s?.id,r?.accessToken,r?.user,s,n])}function Nbe(e){const t=m.useContext(lh).windowStyle;m.useEffect(()=>{if(Gt)return fge.subscribe(x2.WINDOW_VISIBILITY_STATE_CHANGED,n=>{n.windowType===t&&n.state==="hidden"&&e()})},[e,t])}function Rbe(){return Gt?Gt.takePhoto():Promise.resolve(void 0)}function Pbe(){return Gt?Gt.requestSystemPermission(uT.MICROPHONE):Promise.resolve(!0)}function Dbe(){return Gt?Gt.takeScreenshot():Promise.resolve(void 0)}function pge({children:e}){lge(),y9&&hge();const t=Y();return m.useEffect(()=>age(t).registerEventListener(window),[t]),m.useEffect(()=>ege(window),[]),p.jsx(p.Fragment,{children:e})}const mge=60*60*24*30*3,gge=Zh(()=>$(()=>import("./npigzo2u99lls885.js"),__vite__mapDeps([19,1,5,6,20,21,22,23,24,25,26,27,13,14,28,29,16,30,10,11,15,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51])).then(e=>e.GlobalModalsComponent));uU();function _ge(){return Due(),null}y9&&$(()=>import("./dmhc6m80kecp7ycu.js"),__vite__mapDeps([52,5,1,6])).then(e=>e.initDesktop()),Ur()&&$(()=>import("./fr3lc6cgmy47l3cd.js"),__vite__mapDeps([53,1])).then(e=>e.initHost());jr(window.location.origin,"import.meta.env.VITE_APP_URL");function vge({children:e}){"use forget";const[t,n]=m.useState(!1),r=fr();m.useContext(lh),m.useEffect(()=>{window._oaiHandleSessionExpired=function(i,o){window.location.href.includes("/auth/login")||(Ur()&&wu()?.onMissingSessionAuth(),n(!0),P.logEvent("Account: Force Login Modal Shown",{content:`${i}: ${o}`}))}},[]);function s(i){try{const o=i.match(/^\/share\/(.+)$/);let a=de.getCookie(ie.SharedConversationId);if(!a&&o&&(a=o[1],de.setCookie(ie.SharedConversationId,a,{maxAge:mge})),typeof a=="string"&&a&&Fe.getUser()?.customIDs){const c=Fe.getUser();c?.customIDs&&(c.customIDs.shared_conversation_id=a)}}catch(o){o instanceof Error?Os.error("Error in shared conversation cookie code:",{message:o.message,stack:o.stack}):Os.error("Unknown error in shared conversation cookie code:",{error:o})}}return m.useEffect(()=>{s(r.pathname),P.logPageView(),Fe.logEvent("chatgpt_page_view",null,X_()),vN("openaicom-did")},[r.pathname,r.search,r.hash]),p.jsx(p.Fragment,{children:p.jsx(Wx,{name:"ui_boundary_error",fallback:({resetError:i,componentStack:o,error:a})=>p.jsx(ay,{resetError:i,componentStack:o,error:a}),logRequestErrors:!0,children:p.jsx(Xme,{children:p.jsxs(pge,{children:[e,p.jsx(_ge,{}),p.jsx(yge,{isOpen:t,onLogInClick:()=>{n(!1)}}),p.jsx(gge,{}),p.jsx(WH,{}),p.jsx(lG,{}),!1]})})})})}const yge=e=>{"use forget";const t=xe.c(16),{isOpen:n,onLogInClick:r}=e,s=Ue();let i;t[0]!==s?(i=s.formatMessage(C_.forceLogInModalTitle),t[0]=s,t[1]=i):i=t[1];let o;t[2]!==s?(o=s.formatMessage(C_.forceLogInModalDescription),t[2]=s,t[3]=o):o=t[3];let a;t[4]!==r?(a=async()=>{const d=await r9.signOut({redirect:!1,callbackUrl:`/auth/login?next=${encodeURIComponent(location.pathname+location.search+location.hash)}`});location.href=d.url,r()},t[4]=r,t[5]=a):a=t[5];let c;t[6]!==s?(c=s.formatMessage(C_.forceLogInModalButton),t[6]=s,t[7]=c):c=t[7];let l;t[8]!==a||t[9]!==c?(l=p.jsx(ba.Button,{onClick:a,title:c}),t[8]=a,t[9]=c,t[10]=l):l=t[10];let u;return t[11]!==n||t[12]!==i||t[13]!==o||t[14]!==l?(u=p.jsx(ji,{testId:"modal-expired-session",isOpen:n,icon:Xa,title:i,description:o,type:"warning",onClose:Fue,primaryButton:l}),t[11]=n,t[12]=i,t[13]=o,t[14]=l,t[15]=u):u=t[15],u},C_=ze({forceLogInModalTitle:{id:"App.forceLogInModalTitle",defaultMessage:"Your session has expired"},forceLogInModalDescription:{id:"App.forceLogInModalDescription",defaultMessage:"Please log in again to continue using the app."},forceLogInModalButton:{id:"App.forceLogInModalButton",defaultMessage:"Log in"}});function Cge(e,t){try{return e()}catch(n){return t(n)}}function wR(e){return e instanceof Element?e:e.parentElement?wR(e.parentElement):null}function Bd(e){const t=wR(e);if(t){const n=LR(t,void 0);if(n)return n}return e.nodeName}const bge=e=>e.type==="childList"?e.addedNodes.length>0?`added ${Bd(e.addedNodes[e.addedNodes.length-1])}`:e.removedNodes.length>0?`removed ${e.removedNodes[e.removedNodes.length-1].nodeName} from ${Bd(e.target)}`:`unknown ${e.type}`:e.type==="characterData"?`characterData in ${Bd(e.target)}`:`unknown ${e.type}`,YE="checkVisibility"in Element.prototype?e=>e.checkVisibility({opacityProperty:!0,visibilityProperty:!0,contentVisibilityAuto:!0}):e=>!e.hasAttribute("aria-hidden")&&!e.classList.contains("hidden");function Sge(e){if(document.head.contains(e))return!1;if(e instanceof Element)return YE(e);if(e instanceof Text){const t=e.parentElement;if(t!=null)return YE(t)}return!0}function MC(e){const t=[],n=e(r=>t.push(r));return()=>(n(),t)}class wge{timeouts=new Set;add(t,n){const r=setTimeout(()=>{this.timeouts.delete(r),t()},n);this.timeouts.add(r)}clear(){for(const t of this.timeouts)clearTimeout(t);this.timeouts.clear()}}function b_(e,t){try{if(e.type&&!PerformanceObserver.supportedEntryTypes.includes(e.type))return()=>{};const n=new PerformanceObserver(r=>{for(const s of r.getEntries())t(s)});return n.observe(e),()=>n.disconnect()}catch{return()=>{}}}function Ege({idleTimeout:e=5e3,minIdleGap:t=100,filter:n}={}){return new Promise((r,s)=>{let i=null;const o=()=>{i!=null&&clearTimeout(i),i=setTimeout(c,e)};o();const a=MC(l=>{function u(f){(!n||n(f))&&(l({start:f.startTime,end:f.startTime+f.duration}),o())}const d=[b_({type:"resource",buffered:!0},u),b_({type:"longtask",buffered:!0,durationThreshold:0},u),b_({type:"navigation",buffered:!0},u)];return()=>{for(const f of d)f()}});function c(){try{const l=a();r(xge(l,t))}catch(l){s(l)}}})}function xge(e,t){const n=[];for(const{start:s,end:i}of e)n.push({t:s,delta:1}),n.push({t:i,delta:-1});n.sort((s,i)=>s.t===i.t?s.delta-i.delta:s.t-i.t);let r=0;for(let s=0;s<n.length;s++)if(r+=n[s].delta,r===0){const i=n[s].t,o=n[s+1];if(!o||o.t-i>=t)return i}throw new Error("no idle gap found")}function Tge(e){return`${e.type} ${e.target instanceof Node?Bd(e.target):`(unknown target ${e.target})`}`}function Oge(e){return MC(t=>{const n=new wge;function r(s){const i=performance.now();n.add(()=>{t({start:i,end:performance.now(),label:Tge(s)})})}for(const s of e)window.addEventListener(s,r,{capture:!0});return()=>{for(const s of e)window.removeEventListener(s,r,{capture:!0});n.clear()}})}function kge(e){return MC(t=>{const n=new MutationObserver(r=>{const s=_d(r,e);s&&t({time:performance.now(),label:Cge(()=>bge(s),i=>`error describing mutation: ${i}`)})});return n.observe(document,{childList:!0,subtree:!0,characterData:!0,attributes:!1}),()=>n.disconnect()})}const Age=["pointerdown","touchend","input","keydown","mouseleave","mouseenter","drop","beforeinput","pointerenter","dragend","pointercancel","compositionupdate","mousedown","dragleave","dragover","mouseup","pointerover","lostpointercapture","mouseover","gotpointercapture","dblclick","keyup","keypress","pointerup","compositionstart","auxclick","dragstart","touchstart","compositionend","pointerout","dragenter","touchcancel","click","contextmenu","mouseout","pointerleave"];function Mge(e){return e instanceof Element&&e.hasAttribute("data-ignore-for-page-load")}function ER(e){return Sge(e)&&!Mge(e)}function Ige(e){for(const t of e)if(ER(t))return!0;return!1}async function Nge(){if(typeof PerformanceObserver!="function")return{label:"no performance observer"};const e=Age.filter(l=>!/(enter|leave|over|out)$/.test(l)),t=Oge(e),n=kge(l=>l.type==="childList"&&Ige(l.addedNodes)||l.type==="characterData"&&ER(l.target)),r=await Ege({filter:l=>l.duration!==0&&!(l.entryType==="resource"&&DR(b9,l.name))}),s=t(),i=n(),o=s.find(l=>i.some(u=>l.start<u.time&&u.time<=l.end));if(o!=null&&o.start<r)return{label:"mutating input before page loaded",firstMutatingInput:o,pageIdle:r};const a=i.filter(l=>l.time<r+200),c=a.at(-1);return c?{...c,mutationsBeforeIdle:a.length,mutationsBeforeIdleList:a,pageIdle:r,firstMutatingInput:o}:{label:"no mutations before page idle",pageIdle:r,firstMutatingInput:o}}const Rge=5*60*1e3;function Pge(e){return Math.min(Math.max(e,0),Rge)}async function Dge(){const e=await $(()=>import("./lq790ciry1z0b5jk.js"),[]);if(!e)return;const{onCLS:t,onFCP:n,onLCP:r}=e,s=new Promise(y=>t(y)),i=new Promise(y=>n(y)),o=new Promise(y=>r(y)),a=_n(Xe()),c={country:a.userCountry??"unknown",continent:a.userContinent??"unknown",device:Wf()?"mobile":"desktop",track:"stable",cluster:a.cluster},l=y=>C=>Sn.hist(dn.DEFAULT,`web.vitals.${y}`,c,C.value);s.then(l("cls")),i.then(l("fcp")),o.then(l("lcp"));const[u,d,f]=await Promise.all([s,i,o]),h=y=>Math.min(Math.max(y,0),5*60*1e3),g=h(u.value),_=h(d.value),v=h(f.value);Fe.logEvent("chatgpt_web_vitals",v,{cls:String(u.value),fcp:String(d.value),lcp:String(f.value),cls_trimmed:String(g),fcp_trimmed:String(_),lcp_trimmed:String(v)})}function Lge(e){const t=window.__reactRouterManifest,n=new Set([t.entry].concat(e.map(s=>t.routes[s])).flatMap(s=>[s.module,...s.imports].map(i=>new URL(i,location.origin).toString()))),r=performance.getEntriesByType("resource").filter(s=>n.has(s.name));if(r.length===n.size){const s={transfer_size:r.reduce((i,o)=>i+o.transferSize,0),encoded_body_size:r.reduce((i,o)=>i+o.encodedBodySize,0),decoded_body_size:r.reduce((i,o)=>i+o.decodedBodySize,0)};R.addAction("pageLoad.jsResourceSizes",{...s,count:r.length,route_id:e[e.length-1],route_ids:e})}else R.addAction("pageLoad.jsResourceSizes.missing",{missing:n.difference?Array.from(n.difference(new Set(r.map(s=>s.name)))):null})}function Fge(){const e=m.useRef([]),t=m.useRef((n,r)=>{const s=setTimeout(n,r);return e.current.push(s),s});return m.useEffect(()=>{const n=e.current;return()=>{n.forEach(r=>{clearTimeout(r)})}},[]),t.current}function jge(e){const{speed:t=100,value:n="",typing:r,onTyped:s,initTyped:i,chunk:o}=e,[a,c]=m.useState(0),l=m.useRef(void 0),u=Fge(),d=vue();function f(h,g,_){l.current=u(function(){h>=g.length||(c(h+_),s?.(),f(h+_,g,_))},t)}return m.useEffect(()=>(c(i?n.length:0),r&&f(0,n,o?4:1),()=>{clearTimeout(l.current)}),[r,n]),p.jsxs(p.Fragment,{children:[p.jsx("span",{className:ne("whitespace-pre-wrap",a<n.length&&"result-streaming no-flow",d?"dark":"light"),children:p.jsx("span",{children:n.slice(0,a)})}),p.jsx("span",{className:"whitespace-pre-wrap text-transparent",children:n.slice(a)})]})}function Uge({showReturnHome:e=!1}){const t=m.useId(),n=Fr(),[r]=m.useState(()=>{{const s=document.getElementById(t)?.dataset.index;if(s!=null)return parseInt(s)}return Math.floor(Math.random()*ZE.length)});return p.jsx("section",{className:"flex h-screen flex-col items-center justify-center","data-index":r,id:t,children:p.jsxs("div",{children:[p.jsxs("h3",{children:[p.jsx(X3,{className:"mb-2 h-6 w-6 align-baseline"}),"404 Not Found"]}),p.jsx("p",{className:"mt-2 max-w-lg pb-6",children:p.jsx(jge,{value:ZE[r].message,typing:!0,speed:150,chunk:!0})}),e&&p.jsx(Ct,{color:"primary",onClick:()=>{P.logEventWithStatsig("404 Page Return Home Button Clicked","chatgpt_404_page_return_home_button_clicked"),n("/")},children:p.jsx(K,{id:"Cc1py2",defaultMessage:"Go to ChatGPT"})})]})})}const ZE=[{message:`Lost in the vast web,
Where you sought, there's only void—
Nothingness awaits.`},{message:`Paths cross empty void
Seeking what once existed
Silence answers all.`},{message:`Where we are, there's only air,
A page misplaced, it isn't there.
In the void where data fades,
Questions linger, answers evade.
Not all paths lead where we care.`},{message:`Where the page should be,
Empty space and missing words—
A void in the code.`},{message:`The link was a dream,
A shadow of what once was—
Now, nothing remains.`},{message:`In the heat of day,
The path dissolves to nothing—
An empty mirage.`}],Bge=m.createContext({cspNonce:""});function qge(){"use forget";const e=xe.c(8),t=XE(),{cspNonce:n}=m.useContext(Bge);let r;e[0]===Symbol.for("react.memo_cache_sentinel")?(r=p.jsxs("head",{children:[p.jsx("meta",{charSet:"UTF-8"}),p.jsx(o9,{})]}),e[0]=r):r=e[0];let s;e[1]!==t?(s=FR(t)?t.status===404?p.jsx(Uge,{}):p.jsx(ay,{error:new Error(`Route Error (${t.status} ${t.statusText}): ${t.message}`),resetError:Hge}):p.jsx(ay,{error:t,resetError:Gge}),e[1]=t,e[2]=s):s=e[2];let i;e[3]!==n?(i=p.jsx(a9,{nonce:n}),e[3]=n,e[4]=i):i=e[4];let o;return e[5]!==s||e[6]!==i?(o=p.jsxs("html",{"data-build":Zl,suppressHydrationWarning:!0,children:[r,p.jsxs("body",{children:[s,i]})]}),e[5]=s,e[6]=i,e[7]=o):o=e[7],o}function Gge(){return location.reload()}function Hge(){return location.reload()}const Vge=30;function zge(){const e=_t.getItem(Qe.LastPageLoadDate),t=new Date,n=typeof e=="string"?new Date(e):null,r=Math.min(n!=null?Math.floor((t.getTime()-n.getTime())/(1e3*60*60)):1/0,Vge*24),s=Math.floor(r/24);_t.setItem(Qe.LastPageLoadDate,t.toISOString()),R.addAction("time_since_last_page_load",{hoursSinceLastPageLoad:r,daysSinceLastPageLoad:s})}const JE="rq:";function $ge(e){const t=[],n=[];for(const r of e)if(r.data){for(const[s,i]of Object.entries(r.data))if(s.startsWith(JE)){const o=s.substring(JE.length);gR(i)?n.push({queryHash:o,queryKey:JSON.parse(o),state:{fetchStatus:"fetching",status:"pending"},promise:i}):t.push({queryHash:o,queryKey:JSON.parse(o),state:{...i,data:i.data}})}}return{staticQueries:t,promiseQueries:n}}function Wge(){const e=ly();return m.useMemo(()=>$ge(e),[e])}function QE(e){return new Promise(t=>{setTimeout(()=>t(e()),0)})}function Kge(){const e="scheduler"in globalThis;if(!e)return{supportsScheduler:e,supportsYield:!1};const n="yield"in globalThis.scheduler;return{supportsScheduler:e,supportsYield:n}}let S_;function Yge(){const e=globalThis.scheduler,{supportsScheduler:t,supportsYield:n}=Kge();return e&&n?e:t&&!n?(Object.defineProperty(e,"yield",{value:()=>e.postTask(()=>{})}),e):(S_||(S_={postTask:QE,yield:()=>QE(()=>{})}),S_)}class Zge{scheduler;setScheduler(){this.scheduler||(this.scheduler=Yge())}postTask(t,n){return this.setScheduler(),this.scheduler.postTask(t,n)}yield(){return this.setScheduler(),this.scheduler.yield()}}const Jge=new Zge,w_=[];function Qge(e,t){for(const n of t)if(e.getQueryState(n.queryKey)==null){let r;const s=new Promise(i=>{r=i});w_.push(r),c9(e,{queries:[{...n,promise:s.then(()=>jr(n.promise,"missing react-query hydration promise")).catch(i=>{throw Jge.yield().then(()=>{e.refetchQueries({queryKey:n.queryKey,exact:!0})}),R.addAction("react-query.prefetch-hydration.error",{queryKey:JSON.stringify(n.queryKey),error:i}),i})}]})}jO(()=>{for(const n of w_)n();w_.length=0},[t])}cue();const Lbe=()=>!1,Fbe=()=>[{title:"ChatGPT"},...cG],jbe=HR(qge);function Xge(e){"use forget";const t=xe.c(48),{children:n,isSearchPage:r,isOrla:s,isEdgeToEdge:i,isElectron:o,isIos:a,hasCachedViewTransitions:c,isAndroidChrome:l,windowStyle:u,ddTraceMetadata:d,cspScriptNonce:f,lang:h}=e,g=(h&&rx.has(h),"ltr"),_=o===!0||!1;let v;t[0]!==s||t[1]!==r||t[2]!==_?(v=ne({"snc-root":r,"mini-root":s,"sdtrn-root":_}),t[0]=s,t[1]=r,t[2]=_,t[3]=v):v=t[3];let y;t[4]===Symbol.for("react.memo_cache_sentinel")?(y=p.jsx("meta",{charSet:"UTF-8"}),t[4]=y):y=t[4];const C=`width=device-width, initial-scale=1${a?", maximum-scale=1":""}${i?", viewport-fit=cover":""}`;let E;t[5]!==C?(E=p.jsx("meta",{name:"viewport",content:C}),t[5]=C,t[6]=E):E=t[6];let b;t[7]===Symbol.for("react.memo_cache_sentinel")?(b=p.jsx(qR,{}),t[7]=b):b=t[7];let S;t[8]!==l?(S=l?p.jsx(uG,{}):null,t[8]=l,t[9]=S):S=t[9];let w;t[10]===Symbol.for("react.memo_cache_sentinel")?(w=p.jsx(dG,{}),t[10]=w):w=t[10];let x;t[11]!==d?(x=d?p.jsxs(p.Fragment,{children:[p.jsx("meta",{name:"dd-trace-id",content:d.traceId}),p.jsx("meta",{name:"dd-trace-time",content:`${d.traceTime}`})]}):null,t[11]=d,t[12]=x):x=t[12];let T,O;t[13]===Symbol.for("react.memo_cache_sentinel")?(T=p.jsx(fG,{}),O=p.jsx(o9,{}),t[13]=T,t[14]=O):(T=t[13],O=t[14]);let A;t[15]!==f?(A=p.jsx("script",{nonce:f,suppressHydrationWarning:!0,children:'!function initScrollTimelineInline(){try{if(CSS.supports("animation-timeline: --works"))return;var t=new Map;document.addEventListener("animationstart",(n=>{if(!(n.target instanceof HTMLElement))return;const e=n.target.getAnimations().filter((t=>t.animationName===n.animationName));t.set(n.target,e)})),document.addEventListener("scrolltimelineload",(n=>{t.forEach(((t,e)=>{t.forEach((t=>{n.detail.upgradeAnimation(t,e)}))})),t.clear()}),{once:!0})}catch{}}();'}),t[15]=f,t[16]=A):A=t[16];let k;t[17]!==f||t[18]!==c?(k=!1,t[17]=f,t[18]=c,t[19]=k):k=t[19];let I;t[20]!==A||t[21]!==k||t[22]!==E||t[23]!==S||t[24]!==x?(I=p.jsxs("head",{children:[y,E,b,S,w,x,T,O,A,k]}),t[20]=A,t[21]=k,t[22]=E,t[23]=S,t[24]=x,t[25]=I):I=t[25];let N;t[26]!==s||t[27]!==r?(N=ne({snc:r,mini:s}),t[26]=s,t[27]=r,t[28]=N):N=t[28];let j;t[29]!==f||t[30]!==u?(j={cspScriptNonce:f,windowStyle:u},t[29]=f,t[30]=u,t[31]=j):j=t[31];let q;t[32]!==n||t[33]!==j?(q=p.jsx(lh.Provider,{value:j,children:n}),t[32]=n,t[33]=j,t[34]=q):q=t[34];let D;t[35]!==f?(D=p.jsx(a9,{nonce:f}),t[35]=f,t[36]=D):D=t[36];let U;t[37]!==N||t[38]!==q||t[39]!==D||t[40]!==u?(U=p.jsxs("body",{className:N,"data-window-style":u,children:[q,D]}),t[37]=N,t[38]=q,t[39]=D,t[40]=u,t[41]=U):U=t[41];let G;return t[42]!==g||t[43]!==h||t[44]!==I||t[45]!==U||t[46]!==v?(G=p.jsxs("html",{lang:h,"data-build":Zl,dir:g,className:v,suppressHydrationWarning:!0,children:[I,U]}),t[42]=g,t[43]=h,t[44]=I,t[45]=U,t[46]=v,t[47]=G):G=t[47],G}const Ube=GR(function(t){"use forget";const n=xe.c(56),{clientBootstrap:r,windowStyle:s,cspScriptNonce:i,dd:o,statsigGateEvaluationsPromise:a}=cy();{bn.setGlobalContextProperty("cluster",r.cluster),R.addFeatureFlagEvaluation("promote_css",r.promoteCss);for(const[L,ue]of Object.entries(r.session?.rumViewTags??{}))bn.setViewContextProperty(L,ue)}let c;n[0]!==r?(c=()=>{const L=Xe()??u9();return ZR(L,r),L},n[0]=r,n[1]=c):c=n[1];const l=c;let u;n[2]!==l?(u=()=>l(),n[2]=l,n[3]=u):u=n[3];const[d,f]=m.useState(u);d||(R.addError(new Error("Context not generated during intialization.")),f(l()));let h;n[4]!==d?(h=Ul(d),n[4]=d,n[5]=h):h=n[5];const g=h;let _,v;n[6]!==d?(_=()=>{Rue(d)},v=[d],n[6]=d,n[7]=_,n[8]=v):(_=n[7],v=n[8]),m.useEffect(_,v);let y,C;n[9]!==d?(y=()=>{zge(),Dge(),Nge().then(n1e),s1e(d)},C=[d],n[9]=d,n[10]=y,n[11]=C):(y=n[10],C=n[11]),m.useEffect(y,C);const{staticQueries:E,promiseQueries:b}=Wge();let S,w;n[12]!==E?(w=[...E],n[12]=E,n[13]=w):w=n[13];let x;n[14]===Symbol.for("react.memo_cache_sentinel")?(x=[],n[14]=x):x=n[14];let T;n[15]!==w?(T={queries:w,mutations:x},n[15]=w,n[16]=T):T=n[16],S=T;const O=S;r1e(g,b);const A=ly();let k;n[17]!==A?(k=A.map(t1e),n[17]=A,n[18]=k):k=n[18];const I=k;let N;n[19]!==r||n[20]!==d||n[21]!==O||n[22]!==g||n[23]!==I||n[24]!==a?(N=()=>{{c9(g,O),sue(d,g),Qle(d,r,g),a.then(e1e);try{Lge(I)}catch(L){const ue=L;R.addError(ue)}}return!0},n[19]=r,n[20]=d,n[21]=O,n[22]=g,n[23]=I,n[24]=a,n[25]=N):N=n[25],m.useState(N);const{pathname:j}=fr();let q;n[26]!==j?(q=j.startsWith("/search"),n[26]=j,n[27]=q):q=n[27];const D=q;let U;n[28]!==s?(U=O8({windowStyle:s}),n[28]=s,n[29]=U):U=n[29];const G=U;let F;n[30]!==d?(F=Zn(d).checkGate("1536947154"),n[30]=d,n[31]=F):F=n[31];const le=F;let me;n[32]!==i?(me=p.jsx(Fq,{cspScriptNonce:i}),n[32]=i,n[33]=me):me=n[33];let ge;n[34]===Symbol.for("react.memo_cache_sentinel")?(ge=p.jsx(vge,{children:p.jsx(jR,{})}),n[34]=ge):ge=n[34];let ke;n[35]!==O?(ke=p.jsx(UR,{state:O,children:ge}),n[35]=O,n[36]=ke):ke=n[36];let Pe;n[37]!==g||n[38]!==me||n[39]!==ke?(Pe=p.jsx(zle,{children:p.jsx(due,{attribute:"class",children:p.jsxs(BR,{client:g,children:[me,ke]})})}),n[37]=g,n[38]=me,n[39]=ke,n[40]=Pe):Pe=n[40];let ve;n[41]!==r.isAndroidChrome||n[42]!==r.isElectron||n[43]!==r.isIos||n[44]!==r.locale||n[45]!==i||n[46]!==o||n[47]!==G||n[48]!==le||n[49]!==D||n[50]!==Pe||n[51]!==s?(ve=p.jsx(Xge,{lang:r.locale,isIos:r.isIos,isAndroidChrome:r.isAndroidChrome,isElectron:r.isElectron,isEdgeToEdge:le,isOrla:G,isSearchPage:D,cspScriptNonce:i,ddTraceMetadata:o,windowStyle:s,children:Pe}),n[41]=r.isAndroidChrome,n[42]=r.isElectron,n[43]=r.isIos,n[44]=r.locale,n[45]=i,n[46]=o,n[47]=G,n[48]=le,n[49]=D,n[50]=Pe,n[51]=s,n[52]=ve):ve=n[52];let he;return n[53]!==d||n[54]!==ve?(he=p.jsx(zR,{sessionContext:d,children:ve}),n[53]=d,n[54]=ve,n[55]=he):he=n[55],he});function e1e(e){for(const[t,n]of Object.entries(e))R.addFeatureFlagEvaluation(t,n)}function t1e(e){return e.id}function n1e(e){if("pageIdle"in e&&R.addFirstTiming("pageLoad.pageIdle",performance.timeOrigin+e.pageIdle),"time"in e&&e.time!=null){const t=e.time,n=Pge(t);R.addFirstTiming("pageLoad.lastMutation",performance.timeOrigin+t),R.addAction("pageLoad.lastMutation",e),Fe.logEvent("chatgpt_web_last_mutation_time",void 0,{raw_duration_ms:String(t),trimmed_duration_ms:String(n)})}else R.addAction("pageLoad.withoutTiming",e);if("mutationsBeforeIdleList"in e)for(const t of e.mutationsBeforeIdleList)R.addAction("pageLoad.mutation",t)}const r1e=Qge;function s1e(e){zq(e).composer.autofocusDisabled$()&&requestAnimationFrame(()=>{requestAnimationFrame(()=>{const n=document.querySelector("h1")??Xle({root:document.body});n instanceof HTMLElement&&typeof n.focus=="function"&&n.focus()})})}export{Lee as $,_R as A,Ct as B,ji as C,R as D,kh as E,Uye as F,Pi as G,dc as H,CA as I,ep as J,E3 as K,FJ as L,zJ as M,dn as N,jJ as O,P,KJ as Q,H as R,Qee as S,l2 as T,dh as U,hr as V,u2 as W,Sx as X,qs as Y,Mx as Z,i2 as _,Y as a,kq as a$,w2 as a0,Sae as a1,Tae as a2,d2 as a3,DCe as a4,F2e as a5,Fe as a6,kve as a7,$I as a8,qt as a9,mH as aA,Rf as aB,N0e as aC,Hs as aD,gt as aE,M2 as aF,ur as aG,zH as aH,Z as aI,Ht as aJ,v2 as aK,_d as aL,nu as aM,x0e as aN,mle as aO,vle as aP,od as aQ,ii as aR,Wa as aS,Ste as aT,Qe as aU,_t as aV,Jge as aW,It as aX,Ft as aY,wme as aZ,St as a_,Qye as aa,Fue as ab,Zh as ac,$ as ad,Q3e as ae,sk as af,ik as ag,Vx as ah,ok as ai,ak as aj,uk as ak,Fi as al,ck as am,lk as an,Ye as ao,El as ap,vt as aq,nQ as ar,xH as as,Rt as at,Q3 as au,lu as av,ht as aw,hf as ax,ga as ay,ws as az,u3 as b,u_e as b$,Mh as b0,Iq as b1,Di as b2,d3 as b3,vce as b4,pye as b5,X3 as b6,on as b7,_n as b8,Zn as b9,P2 as bA,jo as bB,hc as bC,FT as bD,st as bE,Mt as bF,jT as bG,Ce as bH,Hr as bI,cV as bJ,ST as bK,cT as bL,$f as bM,Ib as bN,h0e as bO,gB as bP,f0e as bQ,_B as bR,p0e as bS,d0e as bT,C_e as bU,Ek as bV,ll as bW,I2 as bX,Q0e as bY,ioe as bZ,Xa as b_,Bce as ba,Q2e as bb,nl as bc,lN as bd,q3 as be,y0e as bf,u4 as bg,Qy as bh,Rn as bi,nO as bj,Uee as bk,Ph as bl,iT as bm,S2 as bn,tu as bo,h2 as bp,yae as bq,jre as br,m9 as bs,age as bt,Ii as bu,pM as bv,nt as bw,ba as bx,xI as by,qh as bz,we as c,B1e as c$,EW as c0,d_e as c1,Fu as c2,fme as c3,xce as c4,FH as c5,jH as c6,XY as c7,wce as c8,yE as c9,Tce as cA,Ma as cB,Gre as cC,fe as cD,Ms as cE,q_e as cF,kce as cG,nve as cH,AT as cI,cr as cJ,Kf as cK,uye as cL,Ur as cM,zre as cN,Yn as cO,W$ as cP,HK as cQ,J0e as cR,fi as cS,zx as cT,Yde as cU,BCe as cV,xF as cW,T1e as cX,bF as cY,Hj as cZ,Rle as c_,_C as ca,lt as cb,Y_ as cc,Kce as cd,HF as ce,Ede as cf,mU as cg,Fh as ch,P2e as ci,Xce as cj,Zce as ck,E2 as cl,k8 as cm,k2 as cn,R2e as co,uN as cp,Bi as cq,lc as cr,Xpe as cs,ex as ct,Hde as cu,_U as cv,C1e as cw,Os as cx,tle as cy,F3e as cz,ne as d,Nj as d$,Co as d0,Eee as d1,Hle as d2,au as d3,Su as d4,Nh as d5,lh as d6,_1e as d7,Be as d8,k_e as d9,iE as dA,x7 as dB,pu as dC,kee as dD,T3 as dE,mu as dF,fve as dG,woe as dH,_oe as dI,_2e as dJ,j3 as dK,yc as dL,qoe as dM,Vn as dN,M as dO,Koe as dP,Y0e as dQ,mT as dR,hye as dS,fye as dT,gye as dU,sl as dV,Gce as dW,Aq as dX,CU as dY,vU as dZ,eCe as d_,A_e as da,vh as db,rl as dc,Bj as dd,d1e as de,L1e as df,Pge as dg,yU as dh,R2 as di,yT as dj,MT as dk,lr as dl,o_e as dm,i_e as dn,W2 as dp,iu as dq,ET as dr,So as ds,vK as dt,EK as du,wT as dv,kK as dw,eue as dx,m1e as dy,Np as dz,Xee as e,K8 as e$,e_ as e0,Fee as e1,wae as e2,Sr as e3,M1e as e4,I1e as e5,QF as e6,P1e as e7,XF as e8,Gf as e9,sme as eA,O2 as eB,eye as eC,NCe as eD,h3 as eE,KCe as eF,Xl as eG,$0e as eH,W0e as eI,K0e as eJ,yP as eK,py as eL,Wx as eM,iH as eN,voe as eO,sd as eP,bM as eQ,Oi as eR,ive as eS,J3e as eT,cve as eU,mte as eV,vM as eW,vve as eX,rC as eY,Yl as eZ,iN as e_,jr as ea,GN as eb,Ude as ec,Ri as ed,Ya as ee,bh as ef,gfe as eg,ey as eh,ZCe as ei,Tt as ej,w3e as ek,t_e as el,n_e as em,jV as en,Ao as eo,Ln as ep,Ne as eq,OCe as er,Ace as es,$de as et,ch as eu,fq as ev,Mce as ew,G2e as ex,oN as ey,Nce as ez,de as f,t3e as f$,ko as f0,D_e as f1,B_e as f2,qd as f3,wA as f4,F_e as f5,rP as f6,G_e as f7,Ipe as f8,tr as f9,Ee as fA,qY as fB,ZI as fC,sR as fD,Qc as fE,UN as fF,VCe as fG,$x as fH,Xde as fI,rt as fJ,oM as fK,ZF as fL,zce as fM,Qae as fN,zCe as fO,Vce as fP,Coe as fQ,W1e as fR,l3e as fS,o1e as fT,u3e as fU,D3e as fV,K3e as fW,tE as fX,W3e as fY,Y3e as fZ,r3e as f_,Wt as fa,bde as fb,FF as fc,fh as fd,J3 as fe,S2e as ff,zh as fg,$2 as fh,ls as fi,TO as fj,_K as fk,J2 as fl,Za as fm,GO as fn,Z2 as fo,ru as fp,OO as fq,kO as fr,fbe as fs,Ice as ft,n2e as fu,qye as fv,Vye as fw,Xt as fx,Lye as fy,Qt as fz,ie as g,rte as g$,s3e as g0,Y2e as g1,B2e as g2,q2e as g3,b0e as g4,d3e as g5,rye as g6,Cve as g7,Wne as g8,gCe as g9,us as gA,ee as gB,q1e as gC,V8 as gD,wu as gE,hbe as gF,m0e as gG,UH as gH,sN as gI,Oa as gJ,OG as gK,_be as gL,Jr as gM,mre as gN,zoe as gO,Hoe as gP,$oe as gQ,Goe as gR,Voe as gS,_u as gT,rn as gU,U_e as gV,ote as gW,Yee as gX,F3 as gY,Kee as gZ,Zee as g_,Bn as ga,U3e as gb,B3e as gc,M4 as gd,eY as ge,Sh as gf,Gie as gg,XB as gh,sH as gi,P8 as gj,Re as gk,Kde as gl,sCe as gm,Pue as gn,N1e as go,D1e as gp,A1e as gq,R1e as gr,oo as gs,k1e as gt,CCe as gu,z3e as gv,Ele as gw,pCe as gx,Oce as gy,z8 as gz,Bx as h,f1e as h$,Jee as h0,coe as h1,rZ as h2,O0e as h3,J1e as h4,Eu as h5,UK as h6,_se as h7,Mo as h8,ss as h9,$ye as hA,bye as hB,Jye as hC,zX as hD,Hq as hE,$R as hF,Wye as hG,Iye as hH,d9 as hI,dp as hJ,xle as hK,ube as hL,Qpe as hM,jj as hN,Fy as hO,E0e as hP,V0e as hQ,z0e as hR,sx as hS,zme as hT,bi as hU,$3e as hV,dye as hW,Hy as hX,NY as hY,OU as hZ,_ce as h_,qI as ha,Rye as hb,Nye as hc,Ka as hd,fd as he,Sme as hf,D0e as hg,iy as hh,k$ as hi,R$ as hj,M$ as hk,I$ as hl,C$ as hm,a_e as hn,gbe as ho,cH as hp,Do as hq,qr as hr,G0e as hs,xk as ht,Zye as hu,C0e as hv,doe as hw,aC as hx,xye as hy,Uae as hz,wde as i,G1e as i$,hCe as i0,iye as i1,lbe as i2,y2 as i3,dbe as i4,tme as i5,ybe as i6,vbe as i7,nZ as i8,Jg as i9,uu as iA,p3 as iB,Gq as iC,HN as iD,Mve as iE,Cbe as iF,_3e as iG,BO as iH,lye as iI,Oz as iJ,s_e as iK,P$ as iL,L$ as iM,D$ as iN,N$ as iO,$K as iP,Dj as iQ,zK as iR,ui as iS,iZ as iT,Wf as iU,my as iV,Gt as iW,U0e as iX,B0e as iY,Kue as iZ,ni as i_,Vue as ia,$_e as ib,jO as ic,KR as id,vx as ie,KF as ig,Xe as ih,X3e as ii,fC as ij,TW as ik,p_e as il,mk as im,gk as io,vP as ip,XH as iq,tV as ir,$2e as is,rle as it,vCe as iu,bve as iv,Mn as iw,_6 as ix,hy as iy,Ua as iz,sB as j,JH as j$,j_e as j0,abe as j1,Ql as j2,gC as j3,YH as j4,uB as j5,Cx as j6,IF as j7,c0e as j8,sc as j9,R0e as jA,Cme as jB,$Ce as jC,WCe as jD,yF as jE,CF as jF,y1e as jG,v1e as jH,j0e as jI,J as jJ,Z0 as jK,yl as jL,w2e as jM,E2e as jN,Vv as jO,Tye as jP,Eye as jQ,sp as jR,Boe as jS,UI as jT,jI as jU,Joe as jV,Mye as jW,S0e as jX,oC as jY,JI as jZ,eve as j_,e3e as ja,j1e as jb,qCe as jc,Bne as jd,Vne as je,oa as jf,Fj as jg,Lj as jh,LCe as ji,Qj as jj,gU as jk,I_e as jl,ua as jm,ule as jn,dle as jo,H3e as jp,$1e as jq,Q1e as jr,qve as js,ahe as jt,HCe as ju,T_e as jv,UCe as jw,jCe as jx,g4 as jy,CG as jz,A8 as k,$ne as k$,FCe as k0,_h as k1,V1e as k2,z1e as k3,tae as k4,Sye as k5,wye as k6,pF as k7,Dbe as k8,Rbe as k9,Roe as kA,ute as kB,dte as kC,mve as kD,pte as kE,Zme as kF,the as kG,ty as kH,zE as kI,Ni as kJ,pp as kK,DY as kL,gN as kM,Ule as kN,Tk as kO,Sbe as kP,h1e as kQ,t2e as kR,ebe as kS,GC as kT,Pbe as kU,zq as kV,Ve as kW,iR as kX,tbe as kY,fF as kZ,wa as k_,K1e as ka,L0e as kb,Cae as kc,Cee as kd,Q_e as ke,Lw as kf,tve as kg,M0e as kh,Rj as ki,Er as kj,lp as kk,hse as kl,$re as km,Poe as kn,cu as ko,wY as kp,QH as kq,jh as kr,ip as ks,Yt as kt,i2e as ku,RI as kv,c2e as kw,pve as kx,yye as ky,Noe as kz,O8 as l,bu as l$,s7 as l0,Gne as l1,Fge as l2,Pte as l3,Ove as l4,nV as l5,W2e as l6,Ree as l7,hme as l8,GR as l9,gM as lA,A0e as lB,Wee as lC,i0e as lD,Uj as lE,uve as lF,lve as lG,RCe as lH,mCe as lI,fse as lJ,$8 as lK,Z2e as lL,cbe as lM,Iee as lN,qj as lO,UV as lP,q0e as lQ,Jce as lR,Ece as lS,Vy as lT,DF as lU,D2e as lV,qee as lW,Dx as lX,nT as lY,F0e as lZ,dve as l_,op as la,$G as lb,goe as lc,fn as ld,Dve as le,bse as lf,dme as lg,yC as lh,YN as li,efe as lj,yoe as lk,rde as ll,O1e as lm,gse as ln,pse as lo,Fye as lp,nB as lq,zF as lr,VF as ls,jme as lt,Fme as lu,xee as lv,vC as lw,xG as lx,w1e as ly,pme as lz,vue as m,pq as m$,sY as m0,B8 as m1,rf as m2,hre as m3,Aee as m4,fM as m5,V_e as m6,b1e as m7,qde as m8,zN as m9,J2e as mA,qv as mB,ice as mC,Rme as mD,zue as mE,mye as mF,wbe as mG,No as mH,zu as mI,w9 as mJ,Lbe as mK,Fbe as mL,jbe as mM,Ube as mN,_a as mO,gte as mP,M2e as mQ,P_e as mR,Mae as mS,r_e as mT,vye as mU,NI as mV,cG as mW,v0e as mX,EH as mY,G4 as mZ,e2e as m_,Bde as ma,Mde as mb,tCe as mc,Zc as md,nCe as me,KN as mf,GCe as mg,Uue as mh,Go as mi,LF as mj,q3e as mk,G3e as ml,Ul as mm,Df as mn,MN as mo,hF as mp,Npe as mq,gde as mr,xP as ms,bT as mt,lCe as mu,fCe as mv,CT as mw,Z0e as mx,Rce as my,z2e as mz,iB as n,PCe as n$,g0e as n0,F1e as n1,gH as n2,YF as n3,_0e as n4,_q as n5,Cde as n6,zU as n7,o4 as n8,Or as n9,Tbe as nA,Obe as nB,kbe as nC,Abe as nD,yle as nE,kye as nF,A7 as nG,cae as nH,zye as nI,Hye as nJ,Aye as nK,sq as nL,Ah as nM,m2 as nN,WG as nO,Fae as nP,Yye as nQ,Xye as nR,gve as nS,pv as nT,hH as nU,v3e as nV,C3e as nW,tye as nX,j2e as nY,U2e as nZ,Z_ as n_,fce as na,Nee as nb,Uge as nc,Si as nd,fge as ne,x2 as nf,iCe as ng,wh as nh,Gj as ni,Kye as nj,jye as nk,xt as nl,Fde as nm,GF as nn,qF as no,BF as np,Mee as nq,L3 as nr,wU as ns,js as nt,tx as nu,cB as nv,u0e as nw,K_ as nx,bbe as ny,Mbe as nz,zt as o,vse as o$,ave as o0,poe as o1,wz as o2,T2e as o3,O2e as o4,X_e as o5,wee as o6,Uv as o7,NF as o8,nye as o9,mR as oA,Zv as oB,_Ce as oC,H_e as oD,she as oE,FE as oF,nY as oG,Et as oH,kCe as oI,Gde as oJ,rN as oK,rH as oL,lT as oM,Zoe as oN,b3e as oO,N3e as oP,Pj as oQ,aN as oR,zle as oS,b2e as oT,PN as oU,ase as oV,hJ as oW,_s as oX,UZ as oY,Xk as oZ,Y_e as o_,V3e as oa,j3e as ob,sle as oc,KX as od,Ti as oe,Ef as of,WK as og,H4 as oh,N_e as oi,pB as oj,a0e as ok,o0e as ol,fB as om,Vde as on,R3e as oo,H2e as op,I3e as oq,V2e as or,A3e as os,p3e as ot,$N as ou,a2e as ov,U1e as ow,Gy as ox,Gye as oy,to as oz,Nt as p,ACe as p$,Pce as p0,n3e as p1,f3e as p2,i3e as p3,E3e as p4,x3e as p5,T3e as p6,h3e as p7,Uo as p8,vc as p9,a3e as pA,Oye as pB,Bq as pC,CP as pD,s0e as pE,r0e as pF,Ly as pG,g3e as pH,m3e as pI,JCe as pJ,uhe as pK,H1e as pL,yCe as pM,z_e as pN,uCe as pO,dCe as pP,Mte as pQ,CM as pR,Fve as pS,Sve as pT,Tee as pU,ICe as pV,rve as pW,PF as pX,Mq as pY,S1e as pZ,RF as p_,$ve as pa,zve as pb,Wve as pc,Kve as pd,Yve as pe,Jve as pf,Qve as pg,Xve as ph,Hve as pi,Gve as pj,sye as pk,SG as pl,sC as pm,Y1e as pn,hve as po,N2e as pp,QCe as pq,YCe as pr,xY as ps,oCe as pt,aCe as pu,cCe as pv,DN as pw,P3e as px,r2e as py,XCe as pz,X as q,Ooe as q$,l_e as q0,Ij as q1,p2 as q2,JG as q3,zG as q4,JK as q5,RG as q6,pbe as q7,mbe as q8,Tme as q9,y_e as qA,jF as qB,L2e as qC,w_e as qD,b_e as qE,S_e as qF,x_e as qG,vY as qH,l0e as qI,M_e as qJ,E_e as qK,ju as qL,Ive as qM,Xr as qN,Fa as qO,Rde as qP,Dde as qQ,VN as qR,MI as qS,boe as qT,_ye as qU,eC as qV,loe as qW,dk as qX,Eoe as qY,xoe as qZ,T7 as q_,un as qa,Vs as qb,mt as qc,In as qd,Gpe as qe,Ys as qf,MCe as qg,Vve as qh,Zve as qi,y3e as qj,MM as qk,Ibe as ql,v_e as qm,jN as qn,Jae as qo,K2e as qp,o3e as qq,S3e as qr,O3e as qs,k3e as qt,fc as qu,Oj as qv,J_ as qw,oge as qx,Lve as qy,t2 as qz,Dye as r,ai as r$,cF as r0,tte as r1,_ve as r2,Kv as r3,_M as r4,s2e as r5,__e as r6,g2e as r7,Aoe as r8,oye as r9,oJ as rA,Xh as rB,CJ as rC,Z_e as rD,W as rE,Q as rF,zn as rG,He as rH,xd as rI,uZ as rJ,g3 as rK,J_e as rL,ade as rM,Ebe as rN,xbe as rO,x1e as rP,Nbe as rQ,rCe as rR,Ih as rS,Uq as rT,LG as rU,gv as rV,R_e as rW,lf as rX,Z1e as rY,H0e as rZ,Yj as r_,xve as ra,Bve as rb,ure as rc,Pve as rd,Uve as re,jve as rf,Tf as rg,Tve as rh,Fte as ri,Ave as rj,Eve as rk,Rve as rl,wve as rm,Nve as rn,Wq as ro,Sse as rp,xCe as rq,L3e as rr,nde as rs,Sc as rt,wCe as ru,ECe as rv,TCe as rw,SCe as rx,bCe as ry,K_e as rz,Sn as s,f2e as s$,rs as s0,Ia as s1,Oe as s2,$n as s3,wS as s4,QX as s5,wZ as s6,JF as s7,Vt as s8,aA as s9,ry as sA,ibe as sB,IE as sC,ape as sD,rbe as sE,tpe as sF,ME as sG,AE as sH,Nhe as sI,Xc as sJ,VK as sK,O_e as sL,R8 as sM,x2e as sN,L_e as sO,dce as sP,nte as sQ,ste as sR,ite as sS,ete as sT,xW as sU,UF as sV,oae as sW,XI as sX,EY as sY,Cye as sZ,ooe as s_,QZ as sa,Sa as sb,W_e as sc,tee as sd,RX as se,Al as sf,vA as sg,_ue as sh,Jue as si,mp as sj,QB as sk,LY as sl,u1e as sm,Pye as sn,Gr as so,$7 as sp,E1e as sq,WF as sr,$F as ss,aR as st,nbe as su,obe as sv,sbe as sw,Dn as sx,xpe as sy,dR as sz,Ae as t,Jf as t$,pce as t0,oce as t1,A2e as t2,tce as t3,nce as t4,y2e as t5,cce as t6,hM as t7,C2e as t8,I2e as t9,X1e as tA,e0e as tB,t0e as tC,X2e as tD,cye as tE,Bye as tF,EM as tG,YG as tH,qre as tI,eae as tJ,Yme as tK,YB as tL,aT as tM,eH as tN,GG as tO,lF as tP,g1e as tQ,v8 as tR,a8 as tS,c8 as tT,Rr as tU,Dt as tV,Wd as tW,nh as tX,rh as tY,xa as tZ,ae as t_,Qoe as ta,Xoe as tb,ove as tc,o2e as td,m2e as te,sve as tf,rce as tg,p2e as th,h2e as ti,k2e as tj,v2e as tk,Lde as tl,f_e as tm,m_e as tn,w0e as to,Dq as tp,p1e as tq,M3e as tr,g_e as ts,TH as tt,u2e as tu,d2e as tv,l2e as tw,h_e as tx,qx as ty,n0e as tz,yme as u,Ty as u0,sn as u1,nn as u2,Pn as u3,c3e as u4,yve as u5,ose as u6,Pae as v,je as w,vl as x,S3 as y,n2 as z};
//# sourceMappingURL=cim4usely8ixso70.js.map
