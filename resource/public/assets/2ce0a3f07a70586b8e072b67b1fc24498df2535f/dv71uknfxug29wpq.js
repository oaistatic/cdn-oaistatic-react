import{hf as T,fz as _,aM as v,c7 as F,nk as q,D as w,nl as A}from"./cim4usely8ixso70.js";import{aO as C,aP as b,aQ as x}from"./ivbsxyeeopn30y8l.js";import{r as c,u as D}from"./n97h6so7iblif4c5.js";const i=5*60*1e3,P=30*1e3;function k(l,y,m,f,h){const s=c.useContext(T)?.serverSharedThreadId,r=C(m),p=c.useMemo(()=>({asset_pointer:r,content_type:_.ArbitraryAssetPointer}),[r]),o=b(),{isUnauthenticated:E}=v(),a=F(y),t=x.makeQueryOptions({asset:p,sharedThreadId:s,postId:o,gizmoId:void 0,isUnauthenticated:E,conversationId:s?void 0:a}),n=q(),I=!!(l&&(a||s||o)&&r&&t.enabled),u=t.queryFn;if(typeof u=="symbol")throw Error("Unexpected symbol query fn...");return D({queryKey:t.queryKey,queryFn:async g=>{try{const e=await u(g);return f?.(e.url),{status:"success",download_url:e.url}}catch(e){w.addError(e);let d=n("default_download_link_error",{fileName:r});throw e instanceof A&&e.code!=null&&(d=n(e.code)),h?.(d),e}},enabled:I,staleTime:i,gcTime:P,refetchInterval:i,refetchOnWindowFocus:!0})}export{k as u};
//# sourceMappingURL=dv71uknfxug29wpq.js.map
