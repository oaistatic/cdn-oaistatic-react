import{r as c,j as e,M as h,a9 as x,a8 as f}from"./msupklk377u8vx8o.js";import{fC as g,S as b,ao as j,fD as d}from"./idf4u2jy0wx0pvap.js";import{p as w,g as v}from"./dlnf68ukfyzf5s4a.js";import{F as N}from"./j9j5epjhcjv8ndrh.js";import{W as k}from"./n737zu6y3rojcst6.js";import{c as y}from"./i3bl95k8z8nuf4dv.js";import"./mxye9dnv7ug9w78j.js";import"./km20jt8rls1pvll5.js";import"./hskvlm4fdvagz0fn.js";import"./ojrw0o0rizu55rz7.js";import"./gc51ish3otzvnj1w.js";import"./hwl3hzno2kq7obfl.js";import"./hmii3551qscelikg.js";import"./i3xeaua08fnq6vw7.js";import"./ev39bkx1q3tpviat.js";import"./mmjudc45gj99bpja.js";import"./hykg4shppjdez6do.js";import"./kqsvxl6vimrirts2.js";import"./bpz5dug6lzivjns5.js";import"./bh8emud9m2ohtvi0.js";import"./b2dyy1jg95n5gtr8.js";import"./ojiial81qrlp15mq.js";import"./bl75917ayi16sr8y.js";import"./gvsp7fy7hloerc2p.js";import"./hgzals0lml4o26vg.js";import"./onklb7txlsriyspd.js";import"./b8sq4gagi5vun041.js";import"./k0gfwt82z96kzlbw.js";import"./etqfvs5ggajp1a11.js";import"./nr2o0yx4ps6bt6je.js";import"./iot0cxie20e0du89.js";import"./nxqfgrk9atl9s5yp.js";import"./jyaoagcxkb094sr3.js";import"./c8aouq5xzucu176k.js";import"./fg6m3tmym7bd4wpr.js";import"./2jlfyhj3fjtss87f.js";import"./eyf2nwgexpz6pjnh.js";import"./l2bq6yq3kjp539k9.js";import"./hu4ci70fpsy8huk5.js";const C="_glow_1o0tc_1",p={glow:C};function F({diffFiles:t,onClickFile:a,startOpen:i=!1,isActive:o=!1}){const[r,m]=c.useState(i);return t.length?e.jsxs("div",{className:y("bg-token-bg-primary flex flex-col rounded-2xl border",o?"border-token-border-heavy outline-2 outline-black/5":"border-token-border-light"),children:[e.jsx("button",{className:"cursor-pointer p-2 focus-visible:outline-0",onClick:()=>{t.length&&a?.(t[0]),(o||!r)&&m(!r)},children:e.jsxs("div",{className:"flex items-center justify-between gap-2",children:[e.jsx("div",{className:"gap-1 px-2 py-1 text-sm",children:e.jsx("span",{className:"text-token-text-primary font-medium",children:e.jsx(h,{id:"wham.diff.changedFileList.title",defaultMessage:"{numFiles, plural, one {File ({numFiles})} other {Files ({numFiles})}}",values:{numFiles:t.length}})})}),r?e.jsx(g,{className:"icon-md"}):e.jsx(b,{className:"icon-md"})]})}),e.jsx(x,{initial:!i,children:r&&e.jsx(f.ul,{initial:{height:0},animate:{height:"auto"},exit:{height:0},transition:{duration:.1},className:"overflow-clip px-2 pb-2",children:t.map((n,l)=>{const u=`${n._oldFileName??l}-${n._newFileName}`;return e.jsx(T,{diffFile:n,onClick:()=>a?.(n)},u)})})})]}):null}function T({diffFile:t,onClick:a}){const i=c.useRef(null),o=c.useRef(null),r=c.useRef(null),[m,n]=c.useState(!1),l=v(t),u=`${t._oldFileName??""}-${t._newFileName}`;return e.jsx("li",{className:"group w-full",children:e.jsx(j,{label:l,labelTextAlign:"left",open:m?void 0:!1,children:e.jsxs("button",{className:"hover:bg-token-border-light after:bg-token-border-light relative flex h-10 w-full items-center justify-start rounded-lg px-2 text-sm after:absolute after:inset-x-2 after:bottom-0 after:h-[1px] after:content-[''] group-last:after:hidden focus-visible:outline-0",onClick:()=>{a?.(),requestAnimationFrame(()=>{i.current!=null&&window.clearTimeout(i.current);const s=document.querySelector(`[data-diff-header="${l}"]`);s?.classList.remove(p.glow),s?.scrollIntoView({behavior:"instant",block:"start"}),s?.classList.add(p.glow),i.current=window.setTimeout(()=>{s?.classList.remove(p.glow)},5e3)})},children:[e.jsxs("div",{className:"relative flex min-w-0 shrink pe-2",children:[e.jsx("span",{"aria-hidden":!0,className:"invisible fixed inline-block whitespace-nowrap",ref:d({axis:"width",onChange:({width:s})=>{o.current=s,r.current!=null&&n(r.current<s)}}),children:l}),e.jsx("span",{ref:d({axis:"width",onChange:({width:s})=>{r.current=s,o.current!=null&&n(s<o.current)}}),className:"inline-block max-w-full min-w-0 shrink truncate",children:l})]}),e.jsx("span",{className:"ms-auto",children:e.jsx(N,{diffFile:t,fallback:e.jsx(k,{linesAdded:t.additionLength,linesRemoved:t.deletionLength})})})]})})},u)}function de({assistantTurn:t,onClickFile:a,startOpen:i=!1,isActive:o=!1}){const r=w({assistantTurn:t}).map(m=>m.diffFile);return e.jsx(F,{diffFiles:r,onClickFile:a,startOpen:i,isActive:o})}export{F as ChangedFileList,de as ChangedFileListFromTaskTurn};
//# sourceMappingURL=l9rde01krrxaiuvm.js.map
