import{ej as R,cB as g,fF as E,cZ as M,bs as F,b1 as y,bN as B,be as D}from"./i3bl95k8z8nuf4dv.js";import{D as N,o as O,d as A,r as s,a as H,j as e}from"./msupklk377u8vx8o.js";import{r as _,t as T,a as l,u as k,s as L,C as b,b as Q,g as j,P as $,T as q,c as K,d as V}from"./idf4u2jy0wx0pvap.js";import{C as G}from"./eo5uot0b1uoupak4.js";import{T as W,C as Z}from"./boee90z71jkuo9go.js";import{g as z}from"./ftpfjx7bripqt5mr.js";import{C as w,T as J}from"./bgffthat6lwvaj3l.js";import{C as U}from"./gc51ish3otzvnj1w.js";import"./jy1u8exw8iz2slve.js";import"./gy64pge8qevmvg7e.js";import"./itm96x5skyrm0csf.js";import"./cx50bzj9gti9k1eh.js";import"./eyf2nwgexpz6pjnh.js";import"./etqfvs5ggajp1a11.js";import"./l4zbgkg566u66cq3.js";import"./hwl3hzno2kq7obfl.js";import"./hmii3551qscelikg.js";import"./i3xeaua08fnq6vw7.js";import"./mg22stn4exi88qee.js";import"./gjp4gv474prvqiwp.js";import"./kwmncs5inhubx058.js";import"./hgzals0lml4o26vg.js";import"./galv4529ourghuwf.js";import"./hskvlm4fdvagz0fn.js";import"./bk8slwxjkdlmxjxm.js";import"./bpz5dug6lzivjns5.js";import"./bh8emud9m2ohtvi0.js";import"./fii0gwkgtas4sckd.js";import"./k4oexpwbiepmd1cd.js";import"./np9w83f07wa6edf5.js";import"./gd7xfxa2yqt151v4.js";import"./igftvtdft8b4phs3.js";import"./o2t4lszmsavslsdu.js";import"./gwmfzjrffpu4d2tx.js";import"./onklb7txlsriyspd.js";const Ne=()=>(_(),null),Oe=R(function(){const r=N(),[o]=O(),u=A(),p=T(r.conversationId),i=l(o.get("readonly"),!1),c=l(o.get("isFullScreen"),!1),d=l(o.get("header"),!0),m=l(o.get("appPreview"),!1),a=g(()=>E()),C=g(()=>M()),P=l(o.get("hideBottomComposer"),!!i),n=T(r.canmoreId),t=p,f=k();s.useEffect(()=>{L({type:b.Textdoc,textdocId:n})},[n]),Q(t,{kind:F.PrimaryAssistant});const h=H();if(s.useEffect(()=>(y.retainThread(t),()=>{setTimeout(()=>{h.invalidateQueries({queryKey:["conversation",t]})},0),y.releaseThread(t)}),[t,h]),s.useEffect(()=>{n||u("/")},[n,u]),s.useEffect(()=>{j().sendMessage({type:w.Loaded})},[n]),!n||f?.type!==b.Textdoc)return null;const S=()=>{j().sendMessage({type:w.Close})},I=i&&!d;return e.jsxs("div",{className:"h-full w-full overflow-hidden contain-content",children:[e.jsx("meta",{name:"viewport",content:"width=device-width, initial-scale=1, maximum-scale=1"}),e.jsx($,{clientThreadId:t,children:e.jsx(U,{clientThreadId:t,children:e.jsx(q,{clientThreadId:t,children:m?e.jsx(B,{children:e.jsx(X,{textdocId:f.textdocId})}):I?e.jsxs(e.Fragment,{children:[e.jsx(W,{clientThreadId:t,disableScroll:!a,textdocId:f.textdocId}),e.jsx(Z,{})]}):e.jsx(J,{isEmbedded:!0,hideRunCode:!a,isFullScreen:c,hideHeader:!d,hideBottomComposer:P,isReadonlyFromQueryParam:i,hideRenameButton:C,clientThreadId:t,focusedTextdoc:f,onClose:S},"textdocContent")})})})]})}),X=({textdocId:x})=>{const r=s.useRef(null),o=K(x),[u,p]=s.useState(!1),i=o?.versions??[],c=D(i),d=s.useCallback(V(async m=>{const a=z(m.type,m.content);if(r.current&&(a==="react"||a==="html")){p(!0);const v=r.current.evalAsync({language:a,code:m.content});for await(const C of v)console.debug(C)}p(!1)},100),[]);return s.useEffect(()=>{c&&d(c)},[c,d]),e.jsx(G,{visuallyHidden:!u,ref:r,enableTransition:!0,title:""})};export{Ne as clientLoader,Oe as default};
//# sourceMappingURL=ikk5hdx5157i6q1t.js.map
