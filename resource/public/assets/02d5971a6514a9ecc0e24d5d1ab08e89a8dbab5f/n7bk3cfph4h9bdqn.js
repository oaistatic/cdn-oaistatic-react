import{r as g,j as e,a9 as z,M as S,g as oe,u as ae,f as v,a8 as M}from"./msupklk377u8vx8o.js";import{bo as ie,H as B,bR as b,an as _,cF as re,k as le,b as ce,bk as de,m as ue,g2 as Q,B as k,cX as pe,f as me,ax as ge}from"./i3bl95k8z8nuf4dv.js";import{a as fe,C as xe}from"./gc51ish3otzvnj1w.js";import{e as G,d7 as he,d8 as U,U as R,d9 as Y,da as ye,db as be,dc as _e,dd as we,de as $,df as Se,dg as ke,dh as je,di as ve,I as Me,dj as Ne}from"./idf4u2jy0wx0pvap.js";import{b as Ce,a as Ee,m as Oe}from"./lvc34l5biwha9w7t.js";import{M as Pe}from"./n6gxahppsdxdf9e1.js";import{H as Te}from"./g4tl5lt9yqf20m4s.js";import"./hwl3hzno2kq7obfl.js";import"./hmii3551qscelikg.js";import"./i3xeaua08fnq6vw7.js";import"./fii0gwkgtas4sckd.js";import"./k4oexpwbiepmd1cd.js";import"./np9w83f07wa6edf5.js";import"./gd7xfxa2yqt151v4.js";import"./igftvtdft8b4phs3.js";import"./o2t4lszmsavslsdu.js";import"./gwmfzjrffpu4d2tx.js";import"./jm9661216xi1kol5.js";import"./iaogn9yqy8ycbrvh.js";import"./bjlvmvwbynia41h5.js";import"./en1ee50tqvrjf3xp.js";import"./n5fowtub43nwjawh.js";import"./hstsg1tnsukf0vw2.js";import"./ev39bkx1q3tpviat.js";import"./etqfvs5ggajp1a11.js";import"./l79p1rsauk0lwxt6.js";import"./eyf2nwgexpz6pjnh.js";import"./hgzals0lml4o26vg.js";function Ue(t,s,n){const{data:l,isLoading:a,isSuccess:d,isError:c}=ae({queryKey:["onboardingSteps",s,n,t],queryFn:()=>ce.safePost("/onboarding/steps",{requestBody:{main_usage:void 0,main_usages:s,user_description:n,exclude_feature_steps:t},authOption:de.SendIfAvailable})});return{steps:l?.steps??[],isLoading:a,isSuccess:d,isError:c}}function N({children:t,className:s}){return e.jsx(M.div,{className:s,initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{duration:.25},exit:{opacity:0,y:-10},children:t})}function De({isFirstStep:t,userName:s}){return e.jsx(N,{className:"max-sm:px-5 max-sm:py-4",children:e.jsx("h1",{className:"text-token-text-primary mb-2 text-3xl leading-9 font-medium max-sm:text-center",children:e.jsx(S,{...t?i.preparingOnboardingExperience:i.allSetLetMeShowYouAroundWithoutName,values:{name:s,nextLine:n=>e.jsx("span",{className:"block",children:n})}})})})}function Ie({setIsInWelcomePage:t}){const s=G();return g.useEffect(()=>{s&&setTimeout(()=>{t(!1)},2500)},[s,t]),s?e.jsx(N,{className:"max-sm:px-5 max-sm:py-4",children:e.jsx("h1",{className:"text-token-text-primary mb-2 text-3xl leading-9 font-medium max-sm:text-center",children:e.jsx(S,{...i.imChaggptNiceToMeetYou})})}):null}function Le(t){const s=Y(),n=v(),l=ue(),a=ye(t),d=be(t),c=_e(a,d),o=we(a,d);return g.useCallback(async f=>{const p="text/plain",r=new Blob([f],{type:p}),x=new File([r],"My_File.txt",{type:p});return $.uploadFile(s,Se(x),x,ke.Retrieval,o,n,l,void 0,c?.attachments)},[s,n,l,o,c?.attachments])}function qe({step:t,steps:s,stepIndex:n,handleGoBack:l,skipUsageQuestion:a,endOnboarding:d}){const c=v();return e.jsxs("div",{className:"absolute start-0 top-0 z-10 flex w-full items-center justify-between bg-none px-4",style:{minHeight:"var(--screen-thread-header-min-height,60px)"},children:[s&&s.length>0&&e.jsx("div",{className:"absolute start-0 top-0 h-2 w-full",children:e.jsx(M.div,{className:"bg-token-main-surface-primary-inverse h-1.5",initial:{width:"0%",opacity:0},animate:{width:`${(n+1)/s.length*100}%`,opacity:1},transition:{duration:.3}})}),n>0?e.jsx(k,{onClick:l,color:"ghost",className:"border-none",icon:je}):e.jsx("div",{}),t?.step_type==="usage_question"||t?.step_type==="self_description"?e.jsx(k,{onClick:a,color:"ghost",className:"border-none",children:c.formatMessage(i.skip)}):e.jsx(k,{onClick:()=>d(!0),color:"ghost",className:"border-none",children:c.formatMessage(i.close)})]})}function Fe({step:t,steps:s,stepIndex:n,skipUsageQuestion:l,endOnboarding:a,gotoStep:d,isInWelcomePage:c,isLoading:o,clientThreadId:f}){const p=v(),r=Q({clientThreadId:f}),x=K(t,n,s.length,a,d);if(c||o||t?.step_type==="usage_question"||t?.step_type==="self_description")return e.jsxs("div",{className:"flex w-full justify-between px-5 py-1.5",children:[e.jsx("div",{}),e.jsx(k,{onClick:l,color:"ghost",children:p.formatMessage(i.skip)})]});const j=s.filter(w=>w.step_type==="usage_question"||w.step_type==="self_description");return e.jsxs("div",{className:"bg-token-main-surface-primary-inverse text-token-main-surface-primary dark:bg-token-main-surface-secondary flex w-full flex-col gap-y-1 bg-none px-4",children:[e.jsxs("div",{className:"flex items-center justify-between py-1.5",children:[e.jsxs("button",{onClick:()=>a(!0),className:"text-token-main-surface-primary dark:text-token-text-primary relative p-2",children:[e.jsx("div",{className:"bg-token-main-surface-primary dark:bg-token-text-primary absolute start-0 top-0 h-full w-full rounded-full opacity-20"}),e.jsx(pe,{className:"h-6 w-6"})]}),e.jsx("div",{className:"text-token-text-tertiary text-sm",children:p.formatMessage({id:"chatgpt_onboarding.steps_count",defaultMessage:"{current_step} of {total_steps}"},{current_step:n+1-j.length,total_steps:s.length-j.length})}),e.jsx(k,{onClick:x,color:"ghost",className:"bg-token-main-surface-primary text-token-main-surface-primary-inverse dark:bg-token-main-surface-primary-inverse dark:text-token-main-surface-primary",disabled:n!==s.length-1&&r,children:n===s.length-1?p.formatMessage(i.done):p.formatMessage(i.next)})]}),t&&e.jsxs("div",{className:"mb-4 text-center",children:[e.jsx("p",{className:"text-base leading-normal font-bold text-white",children:t.title?t.title:P[t.step_type]?p.formatMessage(P[t.step_type]):null}),e.jsx("p",{className:"text-token-text-tertiary text-sm leading-normal font-normal",children:t.subtitle?t.subtitle:T[t.step_type]?p.formatMessage(T[t.step_type]):null})]})]})}function xt({clientThreadId:t,setClientThreadId:s}){const[n,l]=g.useState(!0),{isOpen:a,setIsOpen:d,markAsViewed:c}=Ce(),[o,f]=g.useState(0),[p,r]=g.useState(new Set(["usage_question"])),[x,j]=g.useState([]),[w,X]=g.useState(),[D,I]=g.useState(!1),{steps:h,isLoading:C,isError:L}=Ue(!D,D?x:[],D?w:void 0),V=G(),q=Ee({clientThreadId:t}),F=Le(t),{createNewThread:A}=he({clientThreadId:t,setClientThreadId:s}),H=ie(t,ge.hasUserMessage),{layer:J}=B("109457",{shouldLogExposure:!1}),Z=J.get("keep_onboarding_after_dismiss",!1),ee=U();g.useEffect(()=>{a?(b.logEvent("chatgpt_onboarding_flow_shown"),_.logEvent("Onboarding Shown")):R.setOnboardingConvoState(null)},[a]),g.useEffect(()=>{L&&(c(),b.logEvent("chatgpt_onboarding_flow_error"),_.logEvent("Onboarding Error"))},[L,c]),g.useEffect(()=>{const u=h[o];if(!(C||!u)&&!p.has(u.step_type)){r(O=>new Set([...O,u.step_type]));const y=u.step_prompt;y&&(R.setOnboardingConvoState({onboardingConvoClientThreadId:t}),q({eventSource:"url",stepPrompt:y,messageMetadata:u.step_metadata,authorMetadata:{real_author:re.Onboarding}}),h[o].step_type==="file_upload"&&h[o].additional_info&&F(h[o].additional_info))}},[o,C,p,q,h,F,t]);const m=h[o];if(g.useEffect(()=>{const u=m?.step_type;(u==="usage_question"||u==="self_description")&&H&&a&&(A(),r(y=>new Set(Array.from(y).filter(O=>O==="usage_question"||O==="self_description"))))},[m?.step_type,A,H,a]),g.useEffect(()=>{m?.step_type&&(b.logEvent("chatgpt_onboarding_step_shown",null,{step_type:m?.step_type,step_index:o.toString()}),_.logEvent("Onboarding Step Shown",{step_type:m?.step_type,step_index:o.toString()}))},[o,m?.step_type]),L)return null;const E=u=>{d(!1),o===h.length-1?(b.logEvent("chatgpt_onboarding_flow_finished"),_.logEvent("Onboarding Finished")):(b.logEvent("chatgpt_onboarding_flow_dismissed",null,{step_type:m?.step_type,step_index:o.toString()}),_.logEvent("Onboarding Dismissed",{step_type:m?.step_type,step_index:o.toString()})),u&&!Z&&c()},te=u=>{j(u),h.find(y=>y.step_type==="self_description")||I(!0),f(y=>y+1),b.logEvent("chatgpt_onboarding_usage_question_selected",null,{main_usages:u.join(", ")}),_.logEvent("Onboarding Usage Question Selected",{main_usages:u.join(", ")})},se=u=>{X(u),I(!0),f(y=>y+1),b.logEvent("chatgpt_onboarding_self_description_entered",null,{main_usages:x.join(", ")}),_.logEvent("Onboarding Self Description Entered",{main_usages:x.join(", ")})},W=()=>{b.logEvent("chatgpt_onboarding_usage_question_skipped",null,{step_type:m?.step_type,step_index:o.toString()}),_.logEvent("Onboarding Usage Question Skipped",{step_type:m?.step_type,step_index:o.toString()}),f(u=>u+1),I(!0)},ne=()=>{b.logEvent("chatgpt_onboarding_go_back",null,{step_type:m?.step_type,step_index:o.toString()}),_.logEvent("Onboarding Go Back",{step_type:m?.step_type,step_index:o.toString()}),f(u=>u-1)};return e.jsx(le,{testId:"modal-new-user-onboarding-flow",isOpen:a,onClose:()=>E(!1),type:"success",size:"fullscreen",noPadding:!0,className:"w-full",children:e.jsx(fe,{clientThreadId:t,children:e.jsxs("div",{className:"bg-token-main-surface-primary flex h-full max-h-full flex-col",children:[ee?e.jsx(Fe,{step:m,steps:h,stepIndex:o,skipUsageQuestion:W,endOnboarding:E,gotoStep:f,isInWelcomePage:n,isLoading:C,clientThreadId:t}):e.jsx(qe,{step:m,steps:h,stepIndex:o,handleGoBack:ne,skipUsageQuestion:W,endOnboarding:E}),e.jsx("div",{className:"flex min-h-0 flex-1 flex-col items-center justify-center overflow-hidden",children:e.jsx(z,{mode:"wait",children:n?e.jsx(Ie,{setIsInWelcomePage:l},"welcome"):C?e.jsx(De,{isFirstStep:o<1,userName:V?.name},"loading"):m?.step_type==="usage_question"?e.jsx(Ae,{mainUsagesProp:x,onSelectMainUsages:te},"usage-question"):m?.step_type==="self_description"?e.jsx(He,{mainUsages:x,selfDescriptionProp:w,onEnterSelfDescription:se},"self-description"):["dalle","file_upload","canvas","voice","ask_any_question"].includes(m?.step_type)?e.jsx(We,{step:m,gotoStep:f,stepIndex:o,totalSteps:h.length,endOnboarding:E,clientThreadId:t},"tools-onboarding"):null})})]})})})}function Ae({mainUsagesProp:t,onSelectMainUsages:s}){const[n,l]=g.useState(new Set(t)),[a,d]=g.useState(void 0),c=v(),o=U(),f=()=>{const r=new Set(n);r.has("other")&&a&&(r.add(a),r.delete("other")),s(Array.from(r))},p=["school","work","personalTasks","funAndEntertainment","other"];return e.jsxs(N,{className:"max-sm:overflow-y-auto max-sm:px-5 max-sm:py-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-token-text-primary mb-2 text-3xl leading-9 font-medium",children:e.jsx(S,{...i.tellMeWhyHere})}),e.jsx("p",{className:"text-token-text-secondary mb-6 text-base",children:e.jsx(S,{...i.suggestUsefulIdeas})})]}),e.jsxs("div",{className:"flex flex-col items-start justify-start gap-7 ps-2.5",children:[p.map(r=>e.jsx(ve,{id:`main-usage-${r}`,checked:n.has(r),onChange:x=>l(j=>{const w=new Set(j);return x.target.checked?w.add(r):w.delete(r),w}),label:e.jsx("span",{className:"cursor-pointer",children:c.formatMessage(Oe[r])}),className:"rounded-full!"},r)),n.has("other")&&e.jsx(Me,{ariaLabel:c.formatMessage(i.tellMeWhyHere),name:"other",placeholder:c.formatMessage(i.tellMeWhyHere),onChange:r=>d(r.target.value),maxLength:100,className:"bg-token-main-surface-primary ms-6 min-w-64"})]}),e.jsx(k,{size:o?"large":"medium",color:"primary",onClick:f,className:"mt-10",disabled:n.size===0,fullWidth:o,children:e.jsx(S,{...i.next})})]})}function He({mainUsages:t,selfDescriptionProp:s,onEnterSelfDescription:n}){const[l,a]=g.useState(s),d=v(),c=U(),o=g.useMemo(()=>t.includes("school")?i.exampleSchoolSelfDescription:t.includes("work")?i.exampleWorkSelfDescription:t.includes("funAndEntertainment")?i.exampleFunAndEntertainmentSelfDescription:i.examplePersonalTasksSelfDescription,[t]),{layer:f}=B("109457",{shouldLogExposure:!1}),p=f.get("write_custom_instructions_in_onboarding",!1),r=async()=>{n(l),p&&l&&me.createOrUpdateUserSystemMessage({aboutUserMessage:l,aboutModelMessage:"",disabledTools:[],enabled:!0}).catch(()=>{})};return e.jsxs(N,{className:"flex w-[640px] flex-col items-start max-sm:w-full max-sm:overflow-y-auto max-sm:px-5 max-sm:py-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-token-text-primary mb-4 text-3xl leading-9 font-medium",children:e.jsx(S,{...i.anythingElseYouWantMeToKnow})}),e.jsx("p",{className:"text-token-text-secondary text-base",children:e.jsx(S,{...p?i.selfDescriptionReasonSaveToCustomInstructions:i.selfDescriptionReason,values:{customInstructions:x=>e.jsx("a",{href:Te,className:"underline",target:"_blank",rel:"noreferrer",children:x})}})})]}),e.jsx(Ne,{className:"!dark:bg-white/5 border-token-border-default placeholder-token-text-tertiary mt-10 rounded-sm border bg-black/5! p-5 text-base!",placeholder:d.formatMessage(o),rows:4,value:l,onChange:x=>a(x.target.value),autoFocus:!0}),e.jsx(k,{size:c?"large":"medium",color:"primary",onClick:r,className:"mt-10",fullWidth:c,children:e.jsx(S,{...i.next})})]})}function K(t,s,n,l,a){const d=Y();return g.useCallback(()=>{s<n-1?(b.logEvent("chatgpt_onboarding_flow_next_clicked",null,{source_step_type:t?.step_type,source_step_index:s.toString()}),_.logEvent("Onboarding Next",{source_step_type:t?.step_type,source_step_index:s.toString()}),t?.step_type==="file_upload"&&$.reset(d),a(s+1)):l(!0),document.body.scrollTo({top:document.body.scrollHeight,behavior:"smooth"})},[t,s,n,d,l,a])}function We({step:t,gotoStep:s,stepIndex:n,totalSteps:l,endOnboarding:a,clientThreadId:d}){const c=Q({clientThreadId:d}),o=v(),f=n===l-1,p=U(),r=K(t,n,l,a,s);return e.jsxs(N,{className:"flex h-full w-full flex-row sm:px-8 md:px-12 lg:px-16 xl:px-24",children:[!p&&e.jsx("div",{className:"flex flex-1 flex-col items-center justify-center",children:e.jsxs(M.div,{className:"flex w-[90%] flex-1 flex-col items-start justify-center gap-2 md:w-[85%] lg:w-[80%]",initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{duration:.5},children:[e.jsxs(z,{mode:"wait",children:[e.jsx(M.h1,{className:"text-token-text-primary mb-2 text-3xl font-medium",initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{duration:.5},exit:{opacity:0,y:-10},children:t.title?t.title:P[t.step_type]?o.formatMessage(P[t.step_type]):null},`title-${n}`),e.jsx(M.p,{className:"text-token-text-secondary mb-6 text-base",initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{duration:.5},exit:{opacity:0,y:-10},children:t.subtitle?t.subtitle:T[t.step_type]?o.formatMessage(T[t.step_type]):null},`subtitle-${n}`)]}),e.jsx(k,{size:"large",color:"primary",onClick:r,disabled:c&&!f,children:e.jsx(S,{...f?i.tryChatGPT:i.next})})]})}),e.jsx("div",{className:"relative flex h-full flex-1 flex-col sm:min-w-[360px] sm:pt-16 sm:pb-16",children:e.jsx("div",{className:"bg-token-main-surface-primary shadow-token-border-default h-full w-full overflow-auto shadow-[0_0_50px] sm:rounded-[30px]",children:e.jsx(xe,{clientThreadId:d,ignoreParentComposerController:!0,children:e.jsx(Pe,{hideHeader:!0,clientThreadId:d})})})})]})}const i=oe({skip:{defaultMessage:"Skip",id:"chatgpt.new-onboarding.skip"},close:{defaultMessage:"Close",id:"chatgpt.new-onboarding.close"},done:{defaultMessage:"Done",id:"chatgpt.new-onboarding.done"},submit:{defaultMessage:"Submit",id:"chatgpt.new-onboarding.submit"},next:{defaultMessage:"Next",id:"chatgpt.new-onboarding.next"},finish:{defaultMessage:"Finish",id:"chatgpt.new-onboarding.finish"},tellMeWhyHere:{defaultMessage:"Tell me about why youâ€™re here.",id:"chatgpt.new-onboarding.tell-me-why-here"},suggestUsefulIdeas:{defaultMessage:"Iâ€™ll use this information to suggest ideas you might find useful.",id:"chatgpt.new-onboarding.suggest-useful-ideas"},imChaggptNiceToMeetYou:{defaultMessage:"ðŸ‘‹ Hi, Iâ€™m ChatGPT. Itâ€™s nice to meet you!",id:"chatgpt.new-onboarding.im-chatgpt-nice-to-meet-you"},preparingOnboardingExperience:{defaultMessage:"Preparing your onboarding experience...",id:"chatgpt.new-onboarding.preparing-onboarding-experience"},oneLastQuestion:{defaultMessage:"One last question:",id:"chatgpt.new-onboarding.one-last-question-2"},anythingElseYouWantMeToKnow:{defaultMessage:"Is there anything else youâ€™d like me to know?",id:"chatgpt.new-onboarding.anything-else-you-want-me-to-know-2"},oneQuestionAnythingElse:{defaultMessage:"One last question: Is there anything else youâ€™d like me to know?",id:"chatgpt.new-onboarding.one-more-question"},selfDescriptionReason:{defaultMessage:"Details like your job, hobbies, or interests make my responses more relevant.",id:"chatgpt.new-onboarding.self-description-reason"},allSetLetMeShowYouAroundWithoutName:{defaultMessage:"All set!<nextLine></nextLine>Now, let me show you around...",id:"chatgpt.new-onboarding.all-set-let-me-show-you-around-without-name"},selfDescriptionReasonSaveToCustomInstructions:{defaultMessage:"Details like your job, hobbies, or interests make my responses more relevant. Iâ€™ll save this information as <customInstructions>Custom Instructions</customInstructions>, which you can update any time.",id:"chatgpt.new-onboarding.self-description-reason-save-to-custom-instructions"},exampleSchoolSelfDescription:{defaultMessage:"I'm a college student studying computer science, and I love to play the guitar.",id:"chatgpt.new-onboarding.example-school-self-description"},exampleWorkSelfDescription:{defaultMessage:"I'm a graphic designer based in Berlin, and I enjoy painting and attending art exhibitions.",id:"chatgpt.new-onboarding.example-work-self-description"},examplePersonalTasksSelfDescription:{defaultMessage:"I live in Sydney and love cooking new recipes and planning travel itineraries.",id:"chatgpt.new-onboarding.example-personal-tasks-self-description"},exampleFunAndEntertainmentSelfDescription:{defaultMessage:"I'm a music enthusiast based in Nashville, and I can talk for hours about guitar techniques and songwriting.",id:"chatgpt.new-onboarding.example-fun-and-entertainment-self-description"},tryChatGPT:{defaultMessage:"Try ChatGPT",id:"chatgpt.new-onboarding.try-chatgpt"}}),P={usage_question:i.tellMeWhyHere},T={usage_question:i.suggestUsefulIdeas};export{De as LoadingState,xt as default};
//# sourceMappingURL=n7bk3cfph4h9bdqn.js.map
