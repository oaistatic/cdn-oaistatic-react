import{ej as f,g as P,o as _,an as T,cE as x,b1 as y,bs as k}from"./i3bl95k8z8nuf4dv.js";import{r as c,j as i,C as w}from"./msupklk377u8vx8o.js";import{m as u}from"./nc6572sivljsjb83.js";import{R as C}from"./b2dyy1jg95n5gtr8.js";import{C as l}from"./lrp7yi8771btz35r.js";import{P as b,a as v}from"./gwmfzjrffpu4d2tx.js";import{u as W,W as I}from"./dlnf68ukfyzf5s4a.js";import{b as g}from"./mxye9dnv7ug9w78j.js";import"./idf4u2jy0wx0pvap.js";import"./gc51ish3otzvnj1w.js";import"./hwl3hzno2kq7obfl.js";import"./hmii3551qscelikg.js";import"./i3xeaua08fnq6vw7.js";import"./ojiial81qrlp15mq.js";import"./ojrw0o0rizu55rz7.js";import"./ev39bkx1q3tpviat.js";import"./mmjudc45gj99bpja.js";import"./hykg4shppjdez6do.js";import"./bl75917ayi16sr8y.js";import"./gvsp7fy7hloerc2p.js";import"./hgzals0lml4o26vg.js";import"./onklb7txlsriyspd.js";import"./b8sq4gagi5vun041.js";import"./k0gfwt82z96kzlbw.js";import"./etqfvs5ggajp1a11.js";import"./nr2o0yx4ps6bt6je.js";import"./iot0cxie20e0du89.js";import"./nxqfgrk9atl9s5yp.js";import"./lvc34l5biwha9w7t.js";import"./gno8mfhpd8fsxtyq.js";import"./o2t4lszmsavslsdu.js";import"./igftvtdft8b4phs3.js";import"./fii0gwkgtas4sckd.js";import"./k4oexpwbiepmd1cd.js";import"./np9w83f07wa6edf5.js";import"./gd7xfxa2yqt151v4.js";import"./lgau3pvpncteatb6.js";import"./vieocwuyvvf28lwx.js";import"./lm1rmwueprcm5uwi.js";import"./l6rjg4a8acic6tx2.js";import"./f8brziwaxja17w8l.js";import"./m2labkp4eli82luk.js";import"./ikpwdaspyqzs2oop.js";import"./n6gxahppsdxdf9e1.js";import"./jm9661216xi1kol5.js";import"./iaogn9yqy8ycbrvh.js";import"./bjlvmvwbynia41h5.js";import"./en1ee50tqvrjf3xp.js";import"./n5fowtub43nwjawh.js";import"./hstsg1tnsukf0vw2.js";import"./l79p1rsauk0lwxt6.js";import"./eyf2nwgexpz6pjnh.js";import"./lvu025dz454zr6ij.js";import"./km20jt8rls1pvll5.js";import"./n737zu6y3rojcst6.js";import"./hu4ci70fpsy8huk5.js";import"./l2bq6yq3kjp539k9.js";import"./hskvlm4fdvagz0fn.js";import"./kqsvxl6vimrirts2.js";import"./bpz5dug6lzivjns5.js";import"./bh8emud9m2ohtvi0.js";import"./jyaoagcxkb094sr3.js";import"./c8aouq5xzucu176k.js";import"./fg6m3tmym7bd4wpr.js";import"./2jlfyhj3fjtss87f.js";function S(e){if(e.post.attachments[0].kind!=="codex")return{task:void 0,turns:void 0};const r=e.post.attachments[0];return{task:r.task,fetchedTurns:r.turns,current_user_turn:r.current_user_turn,current_assistant_turn:r.current_assistant_turn,current_diff_task_turn:r.current_diff_task_turn}}function j({postWithProfile:e}){const r=g(m=>m.addTurnToTaskMap),{task:t,fetchedTurns:n,current_user_turn:o,current_assistant_turn:s,current_diff_task_turn:a}=S(e),{activeAssistantTurn:d,setActiveAssistantTurnId:h}=W({taskId:t?.id,task:t,currentDiffTaskTurn:a??null,currentUserTurn:o??null,currentAssistantTurn:s??null});c.useEffect(()=>{Object.values(n?.turn_mapping??{}).forEach(m=>{r(t?.id??"",m.turn)})},[n,r,t]);const p=g(({getTurnsForTask:m})=>t?m(t.id):[]);return!t||!p?null:i.jsx(I,{permissions:"read",taskId:t.id,turnId:s?.id??"",task:t,assistantTurn:d,pastTurns:p,setActiveAssistantTurnId:h,canFollowUp:!1,lastTurnWithDiffId:a?.id??"",onEscape:()=>{}})}const Jt=f(function(){const r=w();return r.kind==="forbidden"?i.jsx(O,{chatPageProps:r.chatPageProps,reason:"workspace"}):i.jsx(E,{loaderData:r})});function E({loaderData:e}){c.useEffect(()=>{T.logEventWithStatsig("Share Post: Shared Post Page Viewed","chatgpt_share_post_page_viewed",{post_id:e.postWithProfile.post.id,primary_attachment_type:e.postWithProfile.post.attachments?.[0]?.kind,referrer:e.referrer})},[e]);const r=c.useMemo(()=>{const t=x();return y.initThread(t,{kind:k.PrimaryAssistant}),t},[]);return e.postWithProfile.post.attachments?.[0]?.kind==="deep_research"&&e.postWithProfile.post.attachments[0].tags?.includes("deep_research")?i.jsx(C,{postWithProfile:e.postWithProfile,threadId:r}):e.postWithProfile.post.attachments?.[0]?.kind==="codex"?i.jsx(j,{postWithProfile:e.postWithProfile}):i.jsx(z,{postWithProfile:e.postWithProfile,chatPageProps:e.chatPageProps})}function A(e){return{url:`https://ogimg.chatgpt.com/?postId=${e}`,size:[1200,630]}}function R(e,r){if(!e.attachments||e.attachments.length===0)return{url:u.src};const t=e.attachments[0];switch(t.kind){case"media_generation":{const n=t.encodings?.md?.path?{url:t.encodings.md.path,size:[t.width,t.height]}:void 0,o=t.encodings?.unfurl?.path?{url:t.encodings.unfurl.path,size:[1200,630]}:void 0,s=t.encodings?.thumbnail?.path?{url:t.encodings.thumbnail.path}:void 0,a={url:t.url,size:[t.width,t.height]};return r&&n!=null?n:o??s??a}default:return{url:u.src}}}function G(e){const r=e.text?.trim();if(r)return r;const t=e.attachments?.[0];return t?.kind==="media_generation"&&t.title?.trim()?t.title.trim():"Shared Content"}const Qt=({data:e})=>{const r=e,t={name:"robots",content:"noindex,nofollow"};if(!r||r.kind==="forbidden"){const p="Privately Shared Content";return[{title:`ChatGPT - ${p}`},t,{property:"og:site_name",content:"ChatGPT"},{property:"og:title",content:p},{property:"og:type",content:"website"},{property:"og:image",content:u.src},{name:"twitter:card",content:"summary_large_image"},{name:"twitter:image",content:u.src},{name:"twitter:site",content:"@ChatGPTapp"},{name:"twitter:title",content:p}]}const{post:n}=r.postWithProfile,o=r.enforceRenderedOgImg?A(n.id):R(n,r.preferIntrinsicAspectRatioForOgImage),s=G(n),a=n.permalink,d=new Date(n.posted_at*1e3).toISOString();return[{title:`ChatGPT - ${s}`},t,{property:"og:site_name",content:"ChatGPT"},{property:"og:type",content:"article"},{property:"og:url",content:a},{property:"og:title",content:s},{property:"og:locale",content:"en_US"},{property:"og:image",content:o.url},{property:"og:image:secure_url",content:o.url},...o.size?[{property:"og:image:width",content:o.size[0]},{property:"og:image:height",content:o.size[1]}]:[],{property:"og:image:alt",content:"Preview of shared ChatGPT content"},{property:"article:published_time",content:d},{name:"twitter:card",content:"summary_large_image"},{name:"twitter:site",content:"@ChatGPTapp"},{name:"twitter:title",content:s},{name:"twitter:image",content:o.url},{name:"twitter:image:alt",content:"Preview of shared ChatGPT content"}]};function O({chatPageProps:e,reason:r}){const t=P();return c.useEffect(()=>{_(t,b,{reason:r})},[]),i.jsx(l,{...e})}function z({postWithProfile:e,chatPageProps:r}){return i.jsx(v.Provider,{value:{postWithProfile:e},children:i.jsx(l,{...r})})}export{Jt as default,Qt as meta};
//# sourceMappingURL=ntdj217r8iplfmf2.js.map
