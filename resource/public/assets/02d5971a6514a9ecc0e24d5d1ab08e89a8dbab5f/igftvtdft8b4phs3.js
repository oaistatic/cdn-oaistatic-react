import{u as C}from"./gc51ish3otzvnj1w.js";import{R as P,V as _,W as U,X as F,U as E,Y as I,Z as w,$ as O,a0 as A,a1 as G,a2 as R,E as k}from"./idf4u2jy0wx0pvap.js";import{bj as N,bg as s,bQ as j,f7 as q,ax as D}from"./i3bl95k8z8nuf4dv.js";import{r as K}from"./msupklk377u8vx8o.js";function Z(){const{store:a}=P(),t=_(),{clearSystemHintModeTrigger:r,getSystemHintModeTrigger:o}=U(),{value:n}=N("1988730211"),i=!F.useDisabledGlobally(),{onRequestCompletion:c}=C();return K.useCallback((x,e,M,d)=>{const m=a.getSharedProps();if(!m)return;const{clientThreadId:S,onResetState:f,conversationMode:T}=m;E.hideThreadHeader();const l=t.has(s.Search),p=l?o(s.Search):void 0,u=j(S),{systemHints:H,extraStreamParams:g}=I(e)?{systemHints:[e.categoryId],extraStreamParams:e.modelOverride?{model:e.modelOverride}:{}}:n?w(Array.from(t)):{systemHints:Array.from(t),extraStreamParams:{}};i&&(g.enableMessageFollowups=!0);const h=O(),y={is_starter_prompt:!0,suggestion_type:e.type,starter_prompt_id:"id"in e?e.id:void 0};h&&(y.__internal={search_settings:h});const b=q(A(e),y);c({promptMessage:b,sourceEvent:x,extraStreamParams:g,completionMetadata:{suggestions:M,suggestion:e,suggestionIndex:d,conversationMode:T??u?.mode,systemHints:H,searchSource:p}});const v=D.getCurrentNode(u).message.id;f(),G(e,d,S,v),R()||k(),p&&l&&r(s.Search)},[a,t,o,n,i,c,r])}export{Z as u};
//# sourceMappingURL=igftvtdft8b4phs3.js.map
