const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/o3corbdm0u4364l4.js","assets/d6yct2a6si5momkj.js","assets/i3bl95k8z8nuf4dv.js","assets/msupklk377u8vx8o.js","assets/root-en2soewk.css","assets/idf4u2jy0wx0pvap.js","assets/conversation-small-irmw3ffz.css","assets/k4oexpwbiepmd1cd.js","assets/np9w83f07wa6edf5.js","assets/gc51ish3otzvnj1w.js","assets/hwl3hzno2kq7obfl.js","assets/hmii3551qscelikg.js","assets/i3xeaua08fnq6vw7.js","assets/n66nziizs4dm6g4j.js","assets/j2fsyk6x0cj7lqb9.js","assets/oolawtlmofrxfppx.js","assets/htrnnuotpctf5mkl.js","assets/d3y72ugnrmac5z1v.js","assets/kwmncs5inhubx058.js"])))=>i.map(i=>d[i]);
import{R as ne,c as q,a as Qt,r as h,j as t,M as y,g as ge,d as Ue,f as U,L as Xt,a9 as we,a8 as V,u as Yt,h as Zt}from"./msupklk377u8vx8o.js";import{nq as lt,k4 as ct,rz as Jt,iZ as _,jI as es,k9 as ts,rZ as ss,r_ as as,ao as J,r$ as ns,kg as Ge,f as We,s0 as is,s1 as $e,s2 as rs,s3 as os,s4 as ls,s5 as Ee,s6 as dt,s7 as Te,p6 as ut,s8 as _e,bY as mt,cv as ye,k5 as cs,s9 as Be,Q as ds,nx as us,M as ms,nn as fs,eZ as xs,sa as hs,sb as gs,nZ as ps,hz as ft,sc as ve,eD as bs,y as Ne,sd as js,kb as vs,se as Me,U as O,aG as xt,bI as ys,bH as Ss,sf as ws,v as ht,sg as Ns,sh as ks,si as gt,z as pt,ks as ke,sj as Cs,sk as Le,eI as Is,k6 as _s,k3 as Ms,sl as ze,sm as Ts,sn as Ps,so as Ls,sp as Es,kq as Fs,kr as Os,ki as Fe,sq as Rs,sr as As,lc as bt,ss as Bs,st as zs,su as Ds,hW as Hs,sv as Pe,sw as Us,sx as Gs,sy as Je,sz as jt,sA as Ws,H as $s,b$ as Vs,sB as qs,kt as vt,bK as Ve,dM as yt,kv as Ks,sC as Qs,sD as Xs,gJ as Ys,sE as Zs,kl as Js,sF as ea,sG as pe,sH as ta,hJ as sa,qq as aa,sI as na,sJ as qe,sK as ia,sL as ra,sM as oa,sN as la,sO as ca,sP as da,sQ as et,sR as ua,sS as ma,sT as St,I as fa,B as wt,h as xa,mu as ha,sU as ga,mp as pa,mv as ba,sV as Nt,sW as ja,sX as va,mP as ya,dn as Sa,dp as wa,sY as Na,c6 as kt,as as ka,fL as Ca,fC as Ia,ar as _a,az as Ma,dv as Ta,sZ as Ct,s_ as Pa,s$ as La,t0 as Ea,hh as Fa,t1 as Oa,t2 as Ra,f4 as Aa,t3 as Ba}from"./idf4u2jy0wx0pvap.js";import{F as It,gv as za,s as Ce,c as M,B as ee,bS as _t,bN as Q,bI as He,aw as Mt,_ as he,g as K,dy as Da,bj as Ha,bp as Tt,v as Pt,d5 as Lt,D as Ua,bq as Et,an as H,cB as Ga,cX as Ft,d2 as Ot,b2 as Wa,dF as $a,bR as Se,f as Rt,he as Va,m as qa,d as Ka,d3 as Qa,x as Xa,d4 as Ya,H as Ke,hf as Za,ap as Ja,aq as en,g5 as tn,ar as Oe,d8 as sn,d9 as an,da as nn,dc as rn,dA as on,de as ln,df as cn,bo as Qe,ai as dn,cD as un,ax as At,O as Bt,dR as mn,dL as zt,r as fn,bC as xn,ep as hn,k as gn,cC as pn,ft as Dt,gp as ae,eo as bn}from"./i3bl95k8z8nuf4dv.js";import{e as Ht,h as jn,i as vn,j as Xe}from"./fii0gwkgtas4sckd.js";import{u as yn,H as Sn,a as wn}from"./m2labkp4eli82luk.js";import{i as Nn}from"./k4oexpwbiepmd1cd.js";import{G as Ut}from"./gd7xfxa2yqt151v4.js";import{u as kn}from"./gc51ish3otzvnj1w.js";import{W as tt}from"./k0gfwt82z96kzlbw.js";import{P as Cn}from"./b8sq4gagi5vun041.js";const st=ge({unableToLoadHistory:{id:"history.unableToLoad",defaultMessage:"Unable to load history"},retryButton:{id:"history.retryButton",defaultMessage:"Retry"}});function In(s){const e=JSON.stringify(s.map(n=>[n.id,n.title,n.update_time]));return h.useMemo(()=>s,[e])}function _n(s){"use forget";const e=q.c(57),{activeId:a,hideOverflowMenu:n}=s,r=Qt(),[i,l]=h.useState(!1),[o,f]=h.useState(0),c=za(),[u,m]=h.useState(!1),d=lt(),x=ct();let b;e[0]===Symbol.for("react.memo_cache_sentinel")?(b={},e[0]=b):b=e[0];const{conversations:S,hasNextPage:v,fetchNextPage:j,isLoading:g,isFetchingNextPage:N,isError:w}=Jt(b),I=In(S),k=h.useRef(null);let p;e[1]!==v||e[2]!==g||e[3]!==j?(p=D=>{g||D==null||(k.current?.disconnect(),k.current=new IntersectionObserver(Kt=>{Kt[0].isIntersecting&&v&&j()}),k.current.observe(D))},e[1]=v,e[2]=g,e[3]=j,e[4]=p):p=e[4];const P=p;let C,B;e[5]===Symbol.for("react.memo_cache_sentinel")?(C=()=>()=>{k.current?.disconnect()},B=[],e[5]=C,e[6]=B):(C=e[5],B=e[6]),h.useEffect(C,B);let T,R;e[7]!==I?(T=()=>{_t.publish({kind:"refreshHistory",conversations:I})},R=[I],e[7]=I,e[8]=T,e[9]=R):(T=e[8],R=e[9]),h.useEffect(T,R);const z=I;let G,L;e[10]!==o||e[11]!==c?(G=()=>{const D=ss(as(),Date.now());c(()=>{f(o+1)},D+1e3)},L=[o,c],e[10]=o,e[11]=c,e[12]=G,e[13]=L):(G=e[12],L=e[13]),h.useEffect(G,L);const E=z.length===0;_.markStart("History",_.NS_SIDEBAR),Ce()!=null&&!g&&_.markRendered("History",_.NS_SIDEBAR);const $=yn(z,o);let W;e[14]!==d?(W=d!=null&&d.kind==="conversation"&&d.gizmoId!=null&&es(d.gizmoId),e[14]=d,e[15]=W):W=e[15];const F=W,A=h.useRef(0),X=g||w||E;let ie;e[16]!==F?(ie=D=>{D.preventDefault(),F&&m(!0)},e[16]=F,e[17]=ie):ie=e[17];let re;e[18]!==F||e[19]!==d||e[20]!==x?(re=D=>{D.preventDefault(),F&&(A.current=0,m(!1),x({newGizmoId:null,conversation:d.conversation,previousGizmoId:d.gizmoId??null}))},e[18]=F,e[19]=d,e[20]=x,e[21]=re):re=e[21];let oe,le;e[22]!==F?(oe=D=>{D.preventDefault(),F&&(A.current=A.current+1)},le=D=>{D.preventDefault(),F&&(A.current=A.current-1,A.current===0&&m(!1))},e[22]=F,e[23]=oe,e[24]=le):(oe=e[23],le=e[24]);const Ae=u&&"opacity-50";let ce;e[25]!==Ae?(ce=M(Ae),e[25]=Ae,e[26]=ce):ce=e[26];let de;e[27]!==E||e[28]!==g?(de=E&&g&&t.jsx(Q,{children:t.jsx(He,{className:"m-auto"})}),e[27]=E,e[28]=g,e[29]=de):de=e[29];let ue;e[30]!==i||e[31]!==E||e[32]!==w||e[33]!==r?(ue=E&&w&&t.jsxs("div",{className:"text-token-text-tertiary p-3 text-center italic",children:[t.jsx(y,{...st.unableToLoadHistory}),!i&&t.jsx("div",{className:"mt-1",children:t.jsx(ee,{as:"button",color:"primary",size:"small",className:"m-auto mt-2",onClick:()=>{l(!0),ts(r)},children:t.jsx(y,{...st.retryButton})})})]}),e[30]=i,e[31]=E,e[32]=w,e[33]=r,e[34]=ue):ue=e[34];let me;e[35]!==a||e[36]!==$||e[37]!==v||e[38]!==n||e[39]!==P||e[40]!==E||e[41]!==g||e[42]!==z?(me=!g&&!E&&t.jsx("div",{children:t.jsx(Sn,{activeId:a,bucketedItems:$,hasNextPage:v,items:z,infiniteScrollTriggerElementRef:P,hideOverflowMenu:n})}),e[35]=a,e[36]=$,e[37]=v,e[38]=n,e[39]=P,e[40]=E,e[41]=g,e[42]=z,e[43]=me):me=e[43];let fe;e[44]!==N?(fe=N&&t.jsx("div",{className:"m-4 mb-5 flex justify-center",children:t.jsx(He,{})}),e[44]=N,e[45]=fe):fe=e[45];let Ie;return e[46]!==X||e[47]!==ie||e[48]!==re||e[49]!==oe||e[50]!==le||e[51]!==ce||e[52]!==de||e[53]!==ue||e[54]!==me||e[55]!==fe?(Ie=t.jsxs(Tn,{id:"history",$centered:X,onDragOver:ie,onDrop:re,onDragEnter:oe,onDragLeave:le,className:ce,children:[de,ue,me,fe]}),e[46]=X,e[47]=ie,e[48]=re,e[49]=oe,e[50]=le,e[51]=ce,e[52]=de,e[53]=ue,e[54]=me,e[55]=fe,e[56]=Ie):Ie=e[56],Ie}const Mn=ne.memo(_n),Tn=It.div`flex flex-col gap-2 text-token-text-primary text-sm mt-5 first:mt-0
${({$centered:s})=>[s&&"h-full justify-center items-center empty:hidden"]}`;function Ye(){return(Nn()?"âŒ˜":"Ctrl")+" K"}function Pn({children:s,className:e}){return _.markStart("FannyPackSearchTooltip",_.NS_SIDEBAR),_.markRendered("FannyPackSearchTooltip",_.NS_SIDEBAR),t.jsx(J,{className:e,label:t.jsx(ns,{children:t.jsx(y,{id:"jmd8WH",defaultMessage:"Search chats"}),keyboardShortcut:Ye()}),children:s})}function Ln({className:s}){return h.useEffect(()=>{Mt.addAction("fannypack.web.action_seen"),he(()=>import("./o3corbdm0u4364l4.js").then(e=>e.d),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12]))},[]),t.jsx(Pn,{className:M("flex",s),children:t.jsx(Ge,{"aria-label":Ye(),onClick:()=>{he(()=>import("./o3corbdm0u4364l4.js").then(e=>e.d),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12])).then(e=>e.openFannyPackSearch())},icon:We})})}function En({isNewConversation:s}){const e=K(),a=Ce(),{data:n}=Da(a?.id),r=a?.isEnterprisey()?n?.beta_settings.wham_access??!1:!0,i=is(),{value:l}=Ha("2113934735"),o=$e(e);return _.markStart("OperatorSidebarListItem",_.NS_SIDEBAR),l?l&&_.markRendered("OperatorSidebarListItem",_.NS_SIDEBAR):_.cancelRender("OperatorSidebarListItem",_.NS_SIDEBAR),t.jsxs(t.Fragment,{children:[!o&&t.jsx(Fn,{account:a,isNewConversation:s}),null,r?t.jsx(rs,{}):null,l?t.jsx(os,{}):null,i?t.jsx(ls,{}):null,null]})}const Fn=({account:s,isNewConversation:e})=>{const a=K(),n=Ue(),r=U();let i;return s==null?null:(i=ut,t.jsx("div",{className:"bg-token-bg-elevated-secondary pt-0",children:t.jsx(J,{side:"right",label:r.formatMessage(Te.newChat),className:"flex w-full items-center",children:t.jsx(Ee,{className:"group w-full duration-100 not-only-of-type:flex-1 active:scale-[0.98] motion-safe:transition-transform",loggingGizmoId:"primary",href:"/",onClick:l=>{!Tt(a)&&!e?(l.preventDefault(),dt(n)):_t.publish({kind:"newChatRequested"})},icon:t.jsx(Ut,{isFirstParty:!0,className:"h-6 w-6","aria-label":""}),isMenuOpen:!1,label:i,hoverRightIcon:null})})}))};function On({gizmoResource:s,serverThreadId:e,isOnProjectPage:a,conversations:n,hasNextPage:r=!1}){const i=K(),l=n??[],o=l.findIndex(u=>u.id===e),f=l.slice(0,_e);o!=null&&o>=_e&&(f[_e-1]=l[o]);const c=r||l.length>_e;return t.jsxs("div",{className:"screen-arch:gap-0.5 flex flex-col",children:[f.map(u=>t.jsx(wn,{className:"ms-7 ps-1",item:u,isActive:u.id===e},u.id)),c&&!a&&t.jsx(Xt,{to:mt(i,s),className:"group tracking-condensed text-token-text-primary hover:bg-token-sidebar-surface-secondary ms-7 flex h-9 items-center gap-2.5 rounded-lg ps-3 pe-2 text-sm",children:t.jsx("span",{className:"text-start",children:t.jsx(y,{...ye.seeAllChats})})})]})}const Rn=Pt(()=>he(()=>import("./n66nziizs4dm6g4j.js"),__vite__mapDeps([13,3,2,4,14])).then(s=>s.SnorlaxFolderAnimation),{loading:({color:s})=>t.jsx(Gt,{color:s})}),An={open:{opacity:1,y:0,transition:{duration:.15,ease:"easeOut"}},closed:{opacity:0,y:-5,transition:{duration:.15,ease:"easeIn"}}};function Bn({color:s,folderState:e,gizmoId:a,sidebarSnorlaxFolderStore:n}){const r=U(),[i,l]=h.useState(!1);return t.jsx(J,{side:"top",delayDuration:600,label:e==="open"?r.formatMessage(ye.hideChatsForProjectTooltip):r.formatMessage(ye.showChatsForProjectTooltip),children:t.jsx("button",{onClick:o=>{o.preventDefault(),e==="open"?n.collapseProject(a):n.expandProject(a)},className:"text-token-text-secondary hover:bg-token-sidebar-surface-tertiary -m-0.5 flex rounded-xl p-0.5",onMouseEnter:()=>{l(!0)},onMouseLeave:()=>{l(!1)},children:t.jsx("div",{className:"h-6 w-6",children:t.jsx("div",{className:"text-token-text-primary relative flex h-full items-center justify-center",children:t.jsx(Rn,{isOpen:e==="open",isHovered:i,color:s})})})})})}function Gt({color:s}){return t.jsx("div",{className:"text-token-text-primary flex h-6 w-6 shrink-0 items-center justify-center",children:t.jsx(cs,{className:"h-3/4 w-3/4",style:{color:s}})})}function Re({gizmo:s,historyDisabled:e,section:a,onClick:n,isActive:r,hideOverflowMenu:i=!1,elementRef:l}){const o=K(),{clientThreadId:f}=kn(),c=Lt(f),u=U(),[m,d]=h.useState(!1),x=s.gizmo.id,b=Be.useStore(),S=Be.useState(T=>Be.selectFolderState(T,x)),v=Ua(),j=!!s.gizmo.tags?.includes(ds.FirstParty),g=lt(),N=ct(),{items:w=[],hasNextPage:I}=us(s.gizmo.id),k=ms(x),p=fs(s);let P=!1;r&&k&&!(S==="open"&&c)&&(P=!0),h.useEffect(()=>{S!=="open"&&r&&c&&b.expandProject(x)},[r,c,b,x]);let C;if(s!=null)C=s.gizmo.display.name||xs;else{if(v==null)return null;e?C=u.formatMessage(Te.clearChat):C=ut}const B=g!=null&&g.kind==="conversation"&&(g.gizmoId==null||g.gizmoId!=x);return t.jsxs(t.Fragment,{children:[t.jsx("div",{className:"relative z-0 focus-within:z-20",onDrop:T=>{T.preventDefault(),B&&N({newGizmoId:x,conversation:g.conversation,previousGizmoId:g.gizmoId??null})},onDragOver:T=>{T.preventDefault()},children:t.jsx(Ee,{loggingGizmoId:s?.gizmo.id??"primary",href:mt(o,s),onClick:n,showActiveIndicator:P,icon:k&&w.length>0?t.jsx(Bn,{color:p,folderState:S,gizmoId:x,sidebarSnorlaxFolderStore:b}):k?t.jsx(Gt,{color:p}):t.jsx(Ut,{isFirstParty:j,src:s?.gizmo.display.profile_picture_url,className:"h-6 w-6 shrink-0"}),isMenuOpen:m,label:C,rightIcon:a===ve.Workspace&&t.jsx(J,{side:"right",label:u.formatMessage(at.workspaceRecommended,{workspace_name:v?.name??"Your Workspace"}),children:t.jsx(bs,{className:"icon-md text-token-text-secondary",alt:u.formatMessage(at.workspaceRecommended,{workspace_name:v?.name??"Your Workspace"})})}),hoverRightIcon:t.jsxs("div",{className:"flex gap-2",children:[!i&&(k?t.jsx("div",{className:M("text-token-text-tertiary can-hover:opacity-0 group-focus-within:opacity-100 group-hover:opacity-100 group-focus:opacity-100 focus-within:opacity-100",m&&"opacity-100!"),onClick:T=>{T.preventDefault()},children:t.jsx(hs,{gizmo:s,isOpen:m,setIsOpen:d})}):t.jsx("div",{className:M("text-token-text-tertiary can-hover:opacity-0 group-focus-within:opacity-100 group-hover:opacity-100 group-focus:opacity-100 focus-within:opacity-100",m&&"opacity-100!"),onClick:T=>{T.preventDefault()},children:t.jsx(gs,{gizmo:s,isOpen:m,setIsOpen:d,section:a})})),!k&&!i&&t.jsx(J,{side:"right",label:u.formatMessage(e?Te.clearChat:Te.newChat),className:"flex items-center",children:t.jsx("button",{className:m?"text-token-text-tertiary":"text-token-text-secondary hover:text-token-text-primary can-hover:opacity-0 group-focus-within:opacity-100 group-hover:opacity-100 group-focus:opacity-100 focus-within:opacity-100",children:e?t.jsx(ps,{className:"icon-md"}):t.jsx(ft,{className:"icon-md"})})})]}),elementRef:l})}),t.jsx(we,{initial:!1,children:k&&S==="open"&&w.length>0&&t.jsx(V.div,{initial:"closed",animate:"open",exit:"closed",variants:An,className:"overflow-hidden",children:t.jsx(On,{gizmoResource:s,serverThreadId:c,isOnProjectPage:P,conversations:w,hasNextPage:I})},"nested-conversations")})]})}const at=ge({workspaceRecommended:{id:"gizmo.workspaceRecommended",defaultMessage:"Recommended at {workspace_name}"}}),zn=2;function Dn({gizmos:s,maxToShowOnLoad:e=4,showAllSidebarItems:a}){const n=vs(s,d=>d.flair.kind),r=[...(n[Me.Workspace]?.map(({resource:d})=>({gizmo:d,section:ve.Workspace}))??[]).slice(0,3),...n[Me.FirstParty]?.map(({resource:d})=>({gizmo:d,section:ve.Keep}))??[],...n[Me.SidebarKeep]?.map(({resource:d})=>({gizmo:d,section:ve.Keep}))??[]],i=n[Me.Recent]??[],o=(a?i:i.slice(0,zn)).map(({resource:d})=>({gizmo:d,section:ve.Recents})),f=r.length;let c=[];c=[...r,...o],a||(c.length>e&&f>e?c=c.slice(0,f):c.length>e&&(c=c.slice(0,e)));const m=s.length>c.length;return{listItems:c,itemsLeft:s.length-c.length,needsToCollapseItems:m,total:s.length}}function Hn(s){"use forget";const e=q.c(19),{gizmo:a,currentGizmoId:n,maxToShowOnLoad:r,hideOverflowMenu:i}=s,l=i===void 0?!1:i,o=Ne(Un);let f,c,u;if(e[0]!==n||e[1]!==a||e[2]!==l||e[3]!==r||e[4]!==o){const{listItems:b,needsToCollapseItems:S,itemsLeft:v}=Dn({gizmos:a,maxToShowOnLoad:r,showAllSidebarItems:o});c=S,f=v;let j;e[8]!==n||e[9]!==l?(j=function(w,I){return t.jsx(Re,{gizmo:w,isActive:w.gizmo.id===n,section:I,hideOverflowMenu:l},w.gizmo.id)},e[8]=n,e[9]=l,e[10]=j):j=e[10];const g=j;u=b.map((N,w)=>{const{gizmo:I,section:k}=N;return t.jsxs(h.Fragment,{children:[w>1&&k!==b[w-1].section&&t.jsx("div",{className:"bg-token-border-default my-2 ms-2 h-px w-7"}),g(I,k)]},w)}),e[0]=n,e[1]=a,e[2]=l,e[3]=r,e[4]=o,e[5]=f,e[6]=c,e[7]=u}else f=e[5],c=e[6],u=e[7];let m;e[11]!==f||e[12]!==c||e[13]!==o?(m=c?t.jsxs("button",{onClick:O.toggleGptListCollapsed,className:"text-token-text-primary hover:bg-token-sidebar-surface-secondary flex h-10 w-full items-center gap-2 rounded-lg px-2 text-sm",children:[t.jsx("div",{className:"flex h-6 w-6 shrink-0 items-center justify-center",children:t.jsx(xt,{className:"icon-md text-token-text-primary"})}),t.jsx("div",{className:"flex grow items-center gap-1",children:o?t.jsxs(t.Fragment,{children:[t.jsx(y,{id:"GizmoSidebarList.showLess",defaultMessage:"See less"}),t.jsx(ys,{className:"icon-xs"})]}):t.jsxs(t.Fragment,{children:[t.jsx(y,{id:"GizmoSidebarList.showMoreItems",defaultMessage:"{numMore} more",values:{numMore:f}}),t.jsx(Ss,{className:"icon-xs"})]})})]}):null,e[11]=f,e[12]=c,e[13]=o,e[14]=m):m=e[14];let d;e[15]===Symbol.for("react.memo_cache_sentinel")?(d=t.jsx(ws,{}),e[15]=d):d=e[15];let x;return e[16]!==u||e[17]!==m?(x=t.jsxs(t.Fragment,{children:[u,m,d]}),e[16]=u,e[17]=m,e[18]=x):x=e[18],x}function Un(s){return!js.isGptListCollapsed(s)}function nt(){"use forget";const s=q.c(1);if(!Ce())return null;let a;return s[0]===Symbol.for("react.memo_cache_sentinel")?(a=t.jsx(Vn,{}),s[0]=a):a=s[0],a}function Gn(s){"use forget";const e=q.c(2),{currentGizmoId:a}=s;if(!Ce())return null;let r;return e[0]!==a?(r=t.jsx(Wn,{currentGizmoId:a}),e[0]=a,e[1]=r):r=e[1],r}function Wn(s){"use forget";const e=q.c(13),{currentGizmoId:a}=s,n=K();let r;e[0]!==n?(r=Et(n,"2152104812").get("hide_gpts_if_none",!1),e[0]=n,e[1]=r):r=e[1];const i=r,l=ht(),{data:o}=Ns();let f;e[2]!==o?(f=o===void 0?{}:o,e[2]=o,e[3]=f):f=e[3];const{gizmos:c}=f;let u;e[4]!==c?(u=c??[],e[4]=c,e[5]=u):u=e[5];let m=u;if(l){let x;e[6]!==m?(x=m.filter($n)??[],e[6]=m,e[7]=x):x=e[7],m=x}let d;return e[8]!==a||e[9]!==m||e[10]!==c?.length||e[11]!==i?(d=(!i||c?.length!==0)&&t.jsx(Hn,{gizmo:m,currentGizmoId:a,maxToShowOnLoad:7}),e[8]=a,e[9]=m,e[10]=c?.length,e[11]=i,e[12]=d):d=e[12],d}function $n(s){return!ks(s.resource)}function Vn(){"use forget";const s=q.c(4),e=K();let a;s[0]!==e?(a=Et(e,"2152104812").get("hide_default_gpts",!1),s[0]=e,s[1]=a):a=s[1];const n=a;let r;return s[2]!==n?(r=!n&&t.jsx(En,{isNewConversation:!0}),s[2]=n,s[3]=r):r=s[3],r}const qn=({onNewThread:s})=>t.jsxs(t.Fragment,{children:[t.jsx(Qn,{onNewThread:s}),t.jsx(Xn,{}),t.jsx(gt,{}),t.jsx(Kn,{})]}),Kn=()=>t.jsx("div",{className:"h-8"}),Qn=({onNewThread:s})=>{const e=U(),a=n=>{ke(window)||O.toggleNavCollapsed(!0),n.metaKey||n.ctrlKey?H.logEventWithStatsig("New Chat Opened In New Tab","chatgpt_new_chat_opened_in_new_tab"):(n.preventDefault(),s())};return t.jsx(Ee,{loggingGizmoId:"primary",testId:"create-new-chat-button",href:"/",onClick:a,icon:t.jsx(ft,{className:"icon-md","aria-label":""}),isMenuOpen:!1,label:e.formatMessage({id:"6Abeg/",defaultMessage:"New chat"}),hoverRightIcon:null})},Xn=()=>{const s=U(),{isFannyPackEnabled:e}=pt();return h.useEffect(()=>{e&&(Mt.addAction("fannypack.web.action_seen"),he(()=>import("./o3corbdm0u4364l4.js").then(a=>a.d),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12])))},[e]),e?t.jsx(Ee,{href:"#",onClick:a=>{a.preventDefault(),ke(window)||O.toggleNavCollapsed(!0),he(()=>import("./o3corbdm0u4364l4.js").then(n=>n.d),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12])).then(n=>n.openFannyPackSearch())},icon:t.jsx(We,{className:"icon-md","aria-label":""}),isMenuOpen:!1,label:s.formatMessage({id:"bDEsvT",defaultMessage:"Search chats"}),hoverRightIcon:t.jsx("div",{className:"text-token-text-tertiary pe-1 not-group-hover:not-group-focus-visible:hidden",children:Ye()})}):null};function Yn({currentGizmoId:s,onClick:e}){const{isSidebarFlyoutOpen:a,onSidebarFlyoutOpenChange:n}=Cs(),r=a(Le.Snorlax);return t.jsx("div",{className:"group flex w-full items-center justify-start",children:t.jsx(Is,{onOpenChange:i=>n(Le.Snorlax,i),side:"right",sideOffset:4,open:r,contentAlign:"end",triggerButton:t.jsxs("button",{className:M("tracking-condensed text-token-text-secondary hover:bg-token-sidebar-surface-secondary screen-arch:py-[7px] screen-arch:text-body can-hover:hover:screen-arch:bg-token-main-surface-secondary flex flex-1 items-center gap-2.5 rounded-lg px-2 py-1.5 text-sm ease-[var(--spring-bounce)] select-none focus:ring-0 motion-safe:active:scale-[98%] motion-safe:active:transition-transform",r&&"bg-token-main-surface-secondary"),onClick:e,children:[t.jsx("div",{className:"h-6 w-6",children:t.jsx("div",{className:"text-token-text-primary relative flex h-full items-center justify-center",children:t.jsx(xt,{className:"icon-md text-token-sidebar-icon font-semibold"})})}),t.jsx("span",{className:"text-start",children:t.jsx(y,{...ye.seeMoreProjectItems})})]}),size:"auto",children:t.jsx("div",{className:"max-h-[50dvh] w-80 overflow-x-auto px-2 [scrollbar-gutter:stable]",children:t.jsx(Q,{children:t.jsx(_s,{currentGizmoId:s,inSidebarFlyout:!0,customListItem:Re})})})})})}function Zn({snorlaxes:s,currentGizmoId:e}){return t.jsx(t.Fragment,{children:s.map(a=>t.jsx(Re,{gizmo:a.gizmo,isActive:a.gizmo.gizmo.id===e},a.gizmo.gizmo.id))})}function Jn({currentGizmoId:s,includeRevisedSidebarIa:e}){const a=U(),{snorlaxes:n,data:r,isLoading:i,isError:l,refetch:o,hasNextPage:f}=Ms(),c=n.slice(0,ze),u=h.useRef(!1),[m,d]=h.useState(!0),x=h.useCallback(function(I){I&&d(!1),o()},[o,d]),b=(n??[]).length===0,S=l||r===void 0&&!i&&u.current;_.markStart("SnorlaxSidebarList",_.NS_SIDEBAR),r!=null&&!i&&_.markRendered("SnorlaxSidebarList",_.NS_SIDEBAR),r===void 0&&!i&&!u.current&&(u.current=!0,x(!1));const j=n?.find(w=>w.gizmo.gizmo.id===s),g=c.some(w=>w.gizmo.gizmo.id===s),N=n&&(n?.length>(!s||g?ze:ze+1)||f);return t.jsxs(t.Fragment,{children:[S&&t.jsx(Ts,{showRetry:m,refetch:x}),!S&&t.jsx(Ps,{id:"snorlax-heading",condensed:e,header:t.jsxs(Q,{children:[a.formatMessage(ye.projectsHeading),!b&&t.jsx(Es,{})]}),isLastInGroup:!0,ulClassName:"screen-arch:mb-3",children:!i&&t.jsxs(t.Fragment,{children:[t.jsx(Zn,{snorlaxes:c,currentGizmoId:s}),j&&!g&&t.jsx(Re,{gizmo:j.gizmo,isActive:!0}),N&&t.jsx(Yn,{currentGizmoId:s}),!i&&b&&t.jsx(Ls,{})]})})]})}function ei(s){"use forget";const e=q.c(13),{clientThreadId:a,onNewThread:n}=s,r=Lt(a),i=Ot(a),l=Wa(),o=ht(),[f,c]=h.useState(!1);let u;e[0]!==f?(u=g=>g===Le.Snorlax?f:!1,e[0]=f,e[1]=u):u=e[1];const m=u;let d;e[2]===Symbol.for("react.memo_cache_sentinel")?(d=(g,N)=>{g===Le.Snorlax&&c(N)},e[2]=d):d=e[2];const x=d;let b;e[3]!==m?(b={isSidebarFlyoutOpen:m,onSidebarFlyoutOpenChange:x},e[3]=m,e[4]=b):b=e[4];const S=l?void 0:r;let v;e[5]!==i||e[6]!==o||e[7]!==n||e[8]!==S?(v=t.jsx("div",{id:"sidebar",className:"group/sidebar",children:t.jsx(ti,{currentGizmoId:i,activeId:S,isSnorlaxEnabled:o,onNewThread:n})}),e[5]=i,e[6]=o,e[7]=n,e[8]=S,e[9]=v):v=e[9];let j;return e[10]!==b||e[11]!==v?(j=t.jsx(Bs,{value:b,children:v}),e[10]=b,e[11]=v,e[12]=j):j=e[12],j}function ti(s){"use forget";const e=q.c(20),{currentGizmoId:a,activeId:n,isSnorlaxEnabled:r,onNewThread:i}=s,l=K();let o;e[0]!==l?(o=$e(l),e[0]=l,e[1]=o):o=e[1];const f=o;let c;e[2]!==f||e[3]!==i?(c=f&&t.jsx(qn,{onNewThread:i}),e[2]=f,e[3]=i,e[4]=c):c=e[4];let u;e[5]!==f?(u=!f&&t.jsx(nt,{}),e[5]=f,e[6]=u):u=e[6];let m;e[7]!==f?(m=!f&&t.jsx(gt,{}),e[7]=f,e[8]=m):m=e[8];let d;e[9]===Symbol.for("react.memo_cache_sentinel")?(d=null,e[9]=d):d=e[9];let x;e[10]!==n||e[11]!==a||e[12]!==r||e[13]!==f?(x=t.jsx(Q,{fallback:null,children:t.jsx(zs,{fallback:null,simulateOnce:!1,children:S=>{const{didSuspend:v}=S;return t.jsxs("div",{className:M(v&&Ds.revealDown),id:"late-load-sidebar-items",children:[t.jsx($a,{name:"GizmoSidebarList",children:t.jsx(Gn,{currentGizmoId:a})}),f&&t.jsx(nt,{}),r&&t.jsx(Jn,{currentGizmoId:a}),null,t.jsx(Mn,{activeId:n})]})}})}),e[10]=n,e[11]=a,e[12]=r,e[13]=f,e[14]=x):x=e[14];let b;return e[15]!==c||e[16]!==u||e[17]!==m||e[18]!==x?(b=t.jsxs(t.Fragment,{children:[c,u,m,d,x]}),e[15]=c,e[16]=u,e[17]=m,e[18]=x,e[19]=b):b=e[19],b}function Xi(s){"use forget";const e=q.c(4),{clientThreadId:a,onNewThread:n}=s,r=K();let i;return e[0]!==a||e[1]!==r||e[2]!==n?(i=Tt(r)?t.jsx(ei,{clientThreadId:a,onNewThread:n}):null,e[0]=a,e[1]=r,e[2]=n,e[3]=i):i=e[3],i}function si(s){"use forget";const e=q.c(43),{className:a,onNewThread:n}=s,r=K(),i=$e(r),l=U(),o=Ga(ni),{isFannyPackEnabled:f}=pt(),c=Ht(Os,Fs,!0,!0),u=jn(),m=Ne(ai),d=Fe();let x;e[0]!==l?(x=l.formatMessage({id:"Q6nsOM",defaultMessage:"Close sidebar"}),e[0]=l,e[1]=x):x=e[1];const b=x;let S;e[2]!==l?(S=l.formatMessage({id:"FIsqAC",defaultMessage:"Lock sidebar open"}),e[2]=l,e[3]=S):S=e[3];const v=S,j=!m&&d,g=j?v:b,N=J,w="touch:hidden",I="flex",k=Ge,p=M("no-draggable",i&&"text-token-text-tertiary"),P=i?"icon-lg-heavy":void 0;let C;e[4]!==d||e[5]!==j?(C=()=>{j?(Se.logEvent("chatgpt_web_sidebar_locked"),O.setIsSidebarLocked(!0),O.setTemporaryDisableHoverSidebar()):(O.toggleNavCollapsed(void 0,"button_click"),d&&O.setTemporaryDisableHoverSidebar())},e[4]=d,e[5]=j,e[6]=C):C=e[6];const B=j?Rs:i?As:c,T=i?Ft:bt;let R;e[7]!==k||e[8]!==g||e[9]!==p||e[10]!==P||e[11]!==C||e[12]!==B||e[13]!==T?(R=t.jsx(k,{className:p,iconClassName:P,"aria-label":g,onClick:C,icon:B,mobileIcon:T,"data-testid":"close-sidebar-button"}),e[7]=k,e[8]=g,e[9]=p,e[10]=P,e[11]=C,e[12]=B,e[13]=T,e[14]=R):R=e[14];let z;e[15]!==N||e[16]!==g||e[17]!==R?(z=t.jsx(N,{label:g,contentClassName:w,className:I,children:R}),e[15]=N,e[16]=g,e[17]=R,e[18]=z):z=e[18];const G=z,L=o?.visible&&o.getTitlebarAreaRect().left>0?"justify-end":"justify-between";let E;e[19]!==a||e[20]!==L?(E=M("flex",L,a),e[19]=a,e[20]=L,e[21]=E):E=e[21];let te;e[22]!==i||e[23]!==n||e[24]!==G?(te=i?t.jsx(ii,{onNewThread:n}):G,e[22]=i,e[23]=n,e[24]=G,e[25]=te):te=e[25];let se;e[26]!==u?(se=u&&t.jsx(vn,{}),e[26]=u,e[27]=se):se=e[27];let $;e[28]!==f||e[29]!==i?($=!i&&f&&t.jsx(Ln,{}),e[28]=f,e[29]=i,e[30]=$):$=e[30];let W;e[31]!==i||e[32]!==n?(W=!i&&t.jsx(Xe,{onClick:n,testId:"create-new-chat-button"}),e[31]=i,e[32]=n,e[33]=W):W=e[33];const F=i&&G;let A;e[34]!==se||e[35]!==$||e[36]!==W||e[37]!==F?(A=t.jsxs("div",{className:"flex",children:[se,$,W,F]}),e[34]=se,e[35]=$,e[36]=W,e[37]=F,e[38]=A):A=e[38];let X;return e[39]!==E||e[40]!==te||e[41]!==A?(X=t.jsxs("div",{id:"sidebar-header",className:E,children:[te,A]}),e[39]=E,e[40]=te,e[41]=A,e[42]=X):X=e[42],X}function ai(s){return s.isSidebarLocked}function ni(){return navigator.windowControlsOverlay}function ii({onNewThread:s,testId:e}){const a=Fe(),n=()=>{!ke(window)&&!a&&O.toggleNavCollapsed(!0),s()};return t.jsx(Ge,{onClick:n,icon:Hs,"aria-label":"","data-testid":e,as:"link"})}function ri({showFreeTrialLoadingPayment:s,handleGetPaymentLink:e}){const a=U(),n=()=>{s||(Pe(!0),e())},r=x=>{x.stopPropagation(),Us(!0),Gs(!0)},{data:i,isLoading:l,isSuccess:o}=Yt({queryKey:["claimedReferralInvite"],queryFn:()=>Rt.getClaimedReferralInvite(),refetchOnMount:!1,refetchOnWindowFocus:!1,refetchInterval:!1,refetchOnReconnect:!1}),f=i?.invite_code,[c,u]=h.useState(!1);if(h.useEffect(()=>{f&&!c&&o&&(u(!0),Se.logEvent("chatgpt_referral_show_claimed_sidebar_menu_promo"),H.logEvent("Referral: Show Claimed Sidebar Menu Promo"))},[f,u,c,o]),!f||l||!o)return null;const m=f.invite_metadata.invite_data,d=m?.referral_trial_duration_months?m?.referral_trial_duration_months>1?a.formatMessage(De.monthsOfBenefit,{referralTrialDurationMonths:m?.referral_trial_duration_months}):a.formatMessage(De.daysOfBenefit,{referralTrialDurationDays:m?.referral_trial_duration_days}):null;return t.jsx(V.div,{className:M("relative",{"cursor-progress opacity-50":s}),layout:"position",initial:{y:-10,opacity:1},animate:{y:0,opacity:1,transition:{duration:.1,ease:"easeIn"}},children:t.jsxs(oi,{className:M(s&&"opacity-75"),onClick:n,children:[t.jsxs("div",{className:"flex w-full flex-row items-center justify-start gap-3",children:[t.jsx(Va,{className:"icon-sm shrink-0"}),t.jsx(y,{...De.freeTrialCta,values:{duration:d}})]}),!s&&t.jsx(Ft,{onClick:r,className:"icon-md text-token-text-tertiary shrink-0 rounded-full p-0.5 opacity-50 transition-colors duration-200 group-hover:opacity-100 hover:bg-[#0077FF] hover:text-red-500"}),t.jsx("span",{className:"absolute top-11 h-0 w-0 border-s-8 border-e-8 border-t-8 border-s-transparent border-e-transparent border-t-[#0077FF] transition-colors duration-200 group-hover:border-t-[#0077FF]"})]})})}const oi=It.a`group relative mb-1 rounded-md hover:[#0077FF] bg-[#0077FF] flex px-3 min-h-[44px] py-1 items-center gap-3 transition-colors duration-200 dark:text-white cursor-pointer text-sm`,De=ge({freeTrialCta:{id:"PaymentMenuItems.freeTrialCta",defaultMessage:"Get {duration}!"},monthsOfBenefit:{id:"FreeTrialMenuItem.monthsOfBenefit",defaultMessage:"{referralTrialDurationMonths, plural, one {one month free} other {# months free}}"},daysOfBenefit:{id:"FreeTrialMenuItem.daysOfBenefit",defaultMessage:"{referralTrialDurationDays, plural, one {one day free} other {# days free}}"}}),li=Pt(()=>he(()=>import("./oolawtlmofrxfppx.js"),__vite__mapDeps([15,3,5,2,4,6,16,17,18])));function ci(){const s=U(),e=qa(),a=Ka(),{isLoading:n,data:r}=Qa(),i=Xa(r),l=i?.hasPaidSubscription()??!1,o=i?.hasClaimedFreeTrial()??!1,f=h.useMemo(()=>i?.subscriptionAnalyticsParams,[i]),c=async()=>{Pe(!0),H.logEvent("Account Pay: Payment Checkout Clicked",f);try{const C=await Rt.getCheckoutLink(a,"PaymentMenuItems");window.location.href=C.url}catch{e.warning(s.formatMessage(Z.paymentErrorWarning),{hasCloseButton:!0}),Pe(!1)}finally{}},u=()=>{d||(Pe(!0),c())},m=Je(C=>C.didCloseFreeTrial),d=Je(C=>C.showFreeTrialLoadingPayment),x=!m&&o,b=i?.wasPaidCustomer()??!1;let S=i?.isWorkspaceAccount()??!1;const v=i?.hasPaidSubscription()??!1,j=i?.isPlus()??!1,g=r&&Ya(r),{layer:N}=Ke("2670443078");let w=j;!S&&!j&&g&&N.get("is_gating_fix_enabled",!1)&&(w=g,S=!0);const I=!n&&!S,k=Ue(),p=()=>{H.logEvent("Account Pay: Click Sidebar Account Pay",f),Vs(k,"Sidebar account payment menu item")},P=i?.isTeam()??!1;return t.jsxs(t.Fragment,{children:[!l&&x&&t.jsx(ri,{showFreeTrialLoadingPayment:d,handleGetPaymentLink:c}),P&&t.jsx(di,{currentWorkspace:i}),I&&t.jsx(jt,{onClick:x?u:p,className:"m-0 rounded-lg px-2",children:t.jsx("span",{className:"flex w-full flex-row flex-wrap-reverse justify-between",children:t.jsx("div",{className:"flex items-center gap-2",children:t.jsx(ui,{wasPaidCustomer:b,showFreeTrialLoadingPayment:d,hasPlusSubscription:w,hasPaidSubscription:v})})})})]})}const di=({currentWorkspace:s})=>t.jsxs(t.Fragment,{children:[t.jsx(jt,{onClick:()=>{O.openModal($s.InviteUsersToWorkspace),H.logEvent("Account: Invite Member Button Clicked",{location:"payment-menu-click"}),Se.logEvent("chatgpt_invite_users_to_workspace",0,{action:"OpenAdminInviteModal",location:"payment-menu-click",text:"AddTeammatesWithInfo",step:"OpenModal"})},className:"m-0 rounded-lg px-2",children:t.jsx("span",{className:"flex w-full flex-row flex-wrap-reverse justify-between",children:t.jsx("div",{className:"flex items-center gap-2",children:t.jsxs(t.Fragment,{children:[t.jsx("span",{"aria-label":"",className:"border-token-border-default flex h-7 w-7 items-center justify-center rounded-full border",children:t.jsx(Ws,{className:"icon-sm shrink-0"})}),t.jsx("div",{className:"flex flex-col",children:t.jsxs(t.Fragment,{children:[t.jsx("span",{children:t.jsx(y,{...Z.addTeammates})}),t.jsx("span",{className:"text-token-text-tertiary line-clamp-1 text-xs",children:t.jsx(y,{...Z.addTeammatesUpsell})})]})})]})})})}),s!=null&&t.jsx(li,{workspace:s})]}),ui=({wasPaidCustomer:s,showFreeTrialLoadingPayment:e,hasPlusSubscription:a,hasPaidSubscription:n})=>e?t.jsx(He,{className:"icon-sm shrink-0"}):n&&!a?null:t.jsxs(t.Fragment,{children:[t.jsx("span",{className:"border-token-border-default flex h-7 w-7 shrink-0 items-center justify-center rounded-full border",children:t.jsx(qs,{className:"icon-sm"})}),t.jsx("div",{className:"flex flex-col",children:s?t.jsx(y,{...Z.renewPlus}):t.jsxs(t.Fragment,{children:[t.jsx("span",{children:a?t.jsx(y,{...Z.viewPlans}):!n&&t.jsx(y,{...Z.upgradePlan})}),t.jsx("span",{className:"text-token-text-tertiary line-clamp-1 text-xs",children:a?t.jsx(y,{...Z.upgradeToProOrTeamUpsell}):!n&&t.jsx(y,{...Z.upgradeToPlusUpsell})})]})})]}),Z=ge({upgradePlan:{id:"PaymentMenuItems.upgradePlan",defaultMessage:"Upgrade plan"},viewPlans:{id:"PaymentMenuItems.viewPlans",defaultMessage:"View plans"},upgradeToTeamUpsell:{id:"PaymentMenuItems.upgradeToTeamUpsell",defaultMessage:"Collaborate on a Team plan"},upgradeToProOrTeamUpsell:{id:"PaymentMenuItems.upgradeToProOrTeamUpsell",defaultMessage:"Unlimited access, team features, and more"},upgradeToPlusUpsell:{id:"PaymentMenuItems.upgradeToPlusUpsell.0",defaultMessage:"More access to the best models"},renewPlus:{id:"PaymentMenuItems.renewPlus",defaultMessage:"Renew Plus"},inviteReferral:{id:"PaymentMenuItems.inviteReferral",defaultMessage:"Refer a friend"},addTeammates:{id:"PaymentMenuItems.addTeammates.0",defaultMessage:"Add teammates"},addTeammatesUpsell:{id:"PaymentMenuItems.addTeammatesUpsell.0",defaultMessage:"Invite coworkers to ChatGPT"},paymentErrorWarning:{id:"PaymentMenuItems.paymentErrorWarning",defaultMessage:"The payments page encountered an error. Please try again. If the problem continues, please visit help.openai.com."}});function Yi({navHeader:s,children:e,className:a}){const n=U(),{layer:r}=Ke("1578749296"),i=r.get("is_sticky_toggle_off",!1);return h.useEffect(()=>{i&&O.toggleNavCollapsed()},[i]),t.jsx(t.Fragment,{children:t.jsxs("div",{className:"draggable relative h-full w-full flex-1 items-start border-white/20",children:[t.jsx(Za,{asChild:!0,children:t.jsx("h2",{children:t.jsx(y,{...xe.chatHistoryLabel})})}),t.jsxs("nav",{className:M("relative flex h-full w-full flex-1 flex-col overflow-y-auto px-3 transition-opacity duration-500",a),"aria-label":n.formatMessage(xe.chatHistoryLabel),children:[t.jsx("div",{className:"bg-token-bg-elevated-secondary sticky top-0 z-30",children:s}),e,t.jsxs(Q,{children:[t.jsx("div",{className:"grow"}),t.jsx(mi,{})]})]})]})})}function mi(){const[s]=h.useState(()=>{const r=Ja.getCookie(en.Workspace);return typeof r=="string"&&r!==tn}),e=Ce(),{isUnauthenticated:a}=Oe(),n=Ks();return s&&!e||!e?null:a?t.jsx(Wt,{}):t.jsxs("div",{className:"bg-token-bg-elevated-secondary sticky bottom-0 z-30 flex flex-col py-2 empty:hidden dark:border-white/20",children:[t.jsx(Qs,{}),t.jsx(ci,{}),n&&t.jsx("div",{className:"flex w-full items-center md:hidden",children:t.jsx("div",{className:"max-w-[100%] grow",children:t.jsx(Xs,{})})})]})}const Wt=()=>{const s=vt(),e=Ve(),a=yt(xe.unauthSignupCta),n=()=>{e({authType:"login",callback:o=>{H.logLogInButtonClicked({location:"Sidebar bottom unit",provider:o}),Se.logEvent("chatgpt_sidebar_login_button_clicked")}})},r=()=>{e({authType:"signup",callback:o=>{H.logSignUpButtonClicked({location:"Sidebar bottom unit",provider:o}),Se.logEvent("chatgpt_sidebar_signup_button_clicked")}})},i=t.jsx(ee,{as:"button",size:"medium",color:s?"secondary":"primary","data-testid":"signup-button",onClick:r,children:t.jsx(y,{...a})},"signup-button"),l=t.jsx(ee,{as:"button",size:"medium",color:s?"primary":"secondary","data-testid":"login-button",onClick:n,children:t.jsx(y,{...xe.unauthLoginCta})},"login-button");return t.jsxs("div",{className:"bg-token-bg-elevated-secondary sticky bottom-0 z-30 p-2",children:[t.jsxs("div",{className:"mt-2 mb-4",children:[t.jsx("p",{className:"text-token-text-primary mb-1 text-sm font-semibold",children:t.jsx(y,{...s?xe.logInOrSignUp:xe.signUpOrLogIn})}),t.jsx("p",{className:"text-token-text-secondary text-sm",children:t.jsx(y,{id:"tr+zlt",defaultMessage:"Get smarter responses, upload files and images, and save your conversations."})})]}),t.jsx("div",{className:"flex flex-row items-start gap-2",children:s?[l,i]:[i,l]})]})},xe=ge({chatHistoryLabel:{id:"NavigationContent.chatHistoryLabel",defaultMessage:"Chat history"},closeSidebar:{id:"NavigationContent.closeSidebar",defaultMessage:"Close sidebar"},signInToChat:{id:"NavigationContent.signInToChat",defaultMessage:"Sign in to ChatGPT"},signUpOrLogIn:{id:"NavigationContent.signUpOrLogIn",defaultMessage:"Sign up or log in"},logInOrSignUp:{id:"NavigationContent.logInOrSignUp",defaultMessage:"Log in or sign up for free"},unauthSignupCta:{id:"NavigationContent.unauthSignupCta",defaultMessage:"Sign up"},unauthLoginCta:{id:"NavigationContent.unauthLoginCta",defaultMessage:"Log in"}}),fi=()=>{const s=Ue();return t.jsxs("div",{className:"flex h-full flex-col gap-2 p-3",children:[t.jsx(si,{className:"h-header-height flex items-center",onNewThread:()=>{dt(s)}}),t.jsx(xi,{}),t.jsx("div",{className:"flex items-center justify-center",children:t.jsx(Wt,{})})]})},$t="border border-token-border-xlight bg-token-sidebar-surface-secondary";function Y({className:s,width:e}){return t.jsx("div",{className:M("h-2.5 grow rounded-sm",$t,s),style:{maxWidth:e+"px"}})}function xi(){const s=t.jsx("div",{className:M("h-4 w-4 shrink-0 grow-0 rounded-full",$t)});return t.jsxs("div",{className:"mt-2 flex w-full grow flex-col gap-4 overflow-hidden px-2",style:{maskImage:"linear-gradient(to bottom, black 50%, transparent 100%)",WebkitMaskImage:"linear-gradient(to bottom, black 50%, transparent 100%)"},children:[t.jsxs("div",{className:"flex flex-row items-center justify-start gap-3",children:[s,t.jsx(Y,{width:80})]}),t.jsxs("div",{className:"flex flex-row items-center justify-start gap-3",children:[s,t.jsx(Y,{width:120})]}),t.jsxs("div",{className:"flex flex-row items-center justify-start gap-3",children:[s,t.jsx(Y,{width:100})]}),t.jsx("div",{className:"mt-5 flex flex-row items-center justify-start gap-3",children:t.jsx(Y,{width:150})}),t.jsxs("div",{className:"flex flex-row items-center justify-start gap-3",children:[s,t.jsx(Y,{width:50})]}),t.jsxs("div",{className:"flex flex-row items-center justify-start gap-3",children:[s,t.jsx(Y,{width:100})]}),t.jsxs("div",{className:"mb-5 flex flex-row items-center justify-start gap-3",children:[s,t.jsx(Y,{width:80})]}),[120,180,160,100,90,190,140,120,180,170,100,120,180,150].map((e,a)=>t.jsx("div",{className:"flex flex-row items-center justify-start py-1",children:t.jsx(Y,{width:e})},a))]})}function Zi({onClick:s,className:e,...a}){return t.jsx(ea,{onClick:s,className:M(e,"grow overflow-hidden"),...a})}function Ji({onNewChatButtonClick:s}){const{isUnauthenticated:e,isLoading:a}=Oe();return a||!e?null:t.jsx(Xe,{className:"me-3",onClick:()=>{H.logNewChatButtonClicked({location:"Mobile header"}),s()}})}function er({onNewChatButtonClick:s,clientThreadId:e}){const{isUnauthenticated:a,isLoading:n}=Oe(),r=vt(),i=Ot(e),l=Qe(e,At.getIsNewConversation),o=dn(),f=l&&o&&!a&&!i;if(n)return null;if(a)return r?t.jsx(gi,{}):t.jsx(hi,{});const c=t.jsx(Xe,{onClick:()=>{H.logNewChatButtonClicked({location:"Mobile header"}),s()}});return f?t.jsx(Js,{layout:"compact",clientThreadId:e}):c}function hi(){const s=Ve(),e=yt(Ze.signUpButtonText);return t.jsx(ee,{as:"button",size:"small",color:"primary",onClick:()=>{s({authType:"signup",callback:a=>{H.logSignUpButtonClicked({location:"Mobile Chat Stage Header",provider:a})}})},children:t.jsx(y,{...e})})}function gi(){const s=Ve();return t.jsx(ee,{as:"button",size:"small",color:"primary",onClick:()=>{s({authType:"login",callback:e=>{H.logLogInButtonClicked({location:"Mobile Chat Stage Header",provider:e})}})},"data-testid":"mobile-login-button",children:t.jsx(y,{...un.logInButtonText})})}function pi({onClick:s}){const e=Ht(Zs,bt,!0,!0);return t.jsxs("button",{type:"button",className:"hover:text-token-text-primary inline-flex rounded-md focus:ring-2 focus:ring-white focus:outline-hidden focus:ring-inset active:opacity-50",onClick:s,"data-testid":"open-sidebar-button",children:[t.jsx("span",{className:"sr-only",children:t.jsx(y,{...Ze.openSidebar})}),t.jsx(e,{className:"icon-lg text-token-text-secondary mx-2"})]})}const bi=({rightContentExpanded:s,onOpenSidebar:e,children:a,showNavSidebar:n,leftContent:r,rightContent:i,bottomContent:l})=>{const o=Zt(),f=o.pathname+o.search+o.hash;h.useEffect(()=>{ke(window)||O.toggleNavCollapsed(!0)},[f]);const c=Ne(u=>u.isConversationScrolledFromTop);return t.jsxs(t.Fragment,{children:[t.jsxs("div",{className:M("draggable h-header-height bg-token-main-surface-primary sticky top-0 z-10 flex items-center justify-center border-transparent ps-0 md:hidden",c?"[box-shadow:var(--sharp-edge-top-shadow)]":"[box-shadow:var(--sharp-edge-top-shadow-placeholder)]"),children:[(n||r)&&t.jsxs("div",{className:"no-draggable absolute start-0 top-0 bottom-0 ms-3 inline-flex items-center justify-center",children:[n&&t.jsx(pi,{onClick:e}),r]}),t.jsx("div",{className:"no-draggable",children:a}),i&&t.jsx("div",{className:M("no-draggable absolute end-0 top-0 bottom-0 me-3 inline-flex items-center justify-center",s&&"start-10"),children:i})]}),l&&t.jsx("div",{className:"no-draggable bg-token-main-surface-primary flex w-full items-center justify-center md:hidden",children:l})]})};function ji({isPopoverOnDesktop:s=!1,children:e}){const a=Ys();_.markStart("StageNavigationSidebar"),_.markRendered("StageNavigationSidebar");const n=!a||s;return t.jsxs(t.Fragment,{children:[n?t.jsx(yi,{children:e}):null,a&&!n&&t.jsx(vi,{children:e})]})}const Vt={type:"spring",bounce:.12,duration:.64},it={...Vt,duration:.4},vi=({style:s,children:e})=>{const a=h.useRef(null),n=h.useRef(void 0);return n.current===void 0&&(n.current=ke(window)),n.current&&_.trackNamespace(_.NS_SIDEBAR),t.jsx(V.div,{className:M("bg-token-sidebar-surface-primary z-21 shrink-0 overflow-x-hidden [view-transition-name:var(--sidebar-slideover)] max-md:w-0!"),ref:a,initial:{width:0},transition:Vt,animate:{width:260},exit:{width:0},style:s,children:t.jsx("div",{className:"h-full w-[var(--sidebar-width)]",children:t.jsx("div",{className:"flex h-full min-h-0 flex-col",children:e})})})},yi=({style:s,children:e})=>{const a=Fe(),n=Ne(i=>i.temporaryDisableHoverSidebar),r=ne.useRef(null);return t.jsx(sn,{open:!0,onOpenChange:i=>{i||O.toggleNavCollapsed(!0)},children:t.jsxs(an,{forceMount:!0,children:[!a&&t.jsx(nn,{asChild:!0,className:"fixed inset-0 z-10 bg-gray-50/50 dark:bg-black/50",children:t.jsx(V.div,{transition:it,initial:{opacity:0},animate:{opacity:1},exit:{opacity:0}})}),t.jsx(rn,{asChild:!0,className:"bg-token-sidebar-surface-primary top-banner-visible:bottom-0 top-banner-visible:top-(--top-banner-height,0px) top-banner-visible:h-auto fixed start-0 top-0 z-50 h-full w-[var(--sidebar-width)] max-w-xs border-e border-gray-200 shadow-[0_0_64px_0_rgba(0,0,0,0.07)] [view-transition-name:var(--sidebar-popover)] focus:outline-hidden dark:border-gray-800",onMouseLeave:a&&!n?()=>{r.current=window.setTimeout(()=>{O.toggleNavCollapsed(!0,"hover")},200)}:void 0,onMouseEnter:a&&!n?()=>{r.current&&window.clearTimeout(r.current)}:void 0,onOpenAutoFocus:a&&!n?i=>{i.preventDefault()}:void 0,children:t.jsxs(V.div,{transition:it,initial:{translateX:"-100%"},animate:{translateX:"0"},exit:{translateX:"-100%"},style:s,children:[t.jsx(on,{asChild:!0,children:t.jsxs(ln,{children:[t.jsx(y,{...Ze.sidebarTitle}),t.jsx(cn,{})]})}),e]})})]})})},Ze=ge({sidebarTitle:{id:"navigation.sidebarTitle",defaultMessage:"Sidebar"},closeSidebar:{id:"navigation.closeSidebar",defaultMessage:"Close sidebar"},openSidebar:{id:"navigation.openSidebar",defaultMessage:"Open sidebar"},signUpButtonText:{id:"navigation.signUpButtonText",defaultMessage:"Sign up"}});function Si({children:s}){return t.jsx("div",{className:"bg-token-main-surface-primary h-full w-full px-[22px] py-4",children:s})}function wi(){return t.jsxs("div",{className:"flex w-full gap-2",children:[t.jsx("div",{className:"h-6 w-6",children:t.jsx(pe,{className:"h-full w-full rounded-full!"})}),t.jsxs("div",{className:"flex w-full flex-col gap-2",children:[t.jsx(pe,{}),t.jsx(pe,{}),t.jsx(pe,{}),t.jsx(pe,{})]})]})}function be({icon:s,message:e,iconClassName:a}){return t.jsx("div",{className:"loading-shimmer-pure-text flex h-8 gap-1 overflow-hidden",children:t.jsx(qe,{fillIcon:!1,icon:s,className:a,children:t.jsx("div",{className:"mt-[.5px] flex h-10",children:e})})})}const Ni=({finalRow:s})=>{const e=U(),a=s.type==="fileOpen"?ta[s.iconType]??sa:null;return t.jsx(we,{children:t.jsx(V.div,{layout:!0,transition:{type:"spring",stiffness:300,damping:30},className:"flex flex-col items-start justify-start gap-4",children:s.type==="search"?t.jsx(be,{icon:t.jsx(We,{className:"text-token-text-primary relative h-5 w-5 opacity-50"}),message:e.formatMessage({id:"f9wsyE",defaultMessage:"Searchingâ€¦"})}):s.type==="websiteOpen"?t.jsx(be,{icon:t.jsx(aa,{className:"inline-flex h-5 w-5 items-center justify-center opacity-50"}),message:e.formatMessage({id:"8L6BBp",defaultMessage:"Readingâ€¦"})}):s.type==="fileOpen"?t.jsx(be,{icon:t.jsx(a,{className:"inline-flex h-5 w-5 items-center justify-center opacity-50"}),message:e.formatMessage({id:"h5M4/O",defaultMessage:"Reading fileâ€¦"})}):s.type==="pythonAnalysis"?t.jsx(be,{icon:t.jsx(na,{className:"inline-flex h-5 w-5 items-center justify-center opacity-50"}),message:e.formatMessage({id:"jZ7gNw",defaultMessage:"Analyzingâ€¦"})}):t.jsx(be,{icon:t.jsx(Bt,{className:"inline-flex h-5 w-5 items-center justify-center opacity-50"}),message:e.formatMessage({id:"bSPYmC",defaultMessage:"Thinkingâ€¦"})})})})};function je({children:s}){return t.jsx(V.div,{className:"w-full",initial:{opacity:0},animate:{opacity:1},transition:{duration:1},children:s})}const ki=({previousRow:s,currentRow:e})=>t.jsx("div",{className:"flex flex-col items-start justify-start gap-4",children:e.type==="search"?t.jsx(je,{children:t.jsx(ia,{row:e,showIcon:!s||s.type!=="search"})},`search_${e.id}`):e.type==="summary"?t.jsx(je,{children:t.jsx(ra,{row:e,showIcon:!s||s.type!=="summary"})},`summary_${e.id}`):e.type==="websiteOpen"?t.jsx(je,{children:t.jsx(oa,{website:e})},`website_${e.id}`):e.type==="fileOpen"?t.jsx(je,{children:t.jsx(la,{row:e})},`file_${e.id}`):e.type==="pythonAnalysis"?t.jsx(je,{children:t.jsx(ca,{row:e})},`python_${e.id}`):null}),Ci=120,Ii=1e3*60*2;function rt(s){s?.scrollIntoView({block:"center",behavior:"smooth"})}function _i({caterpillarStatusMessageTexts:s}){return t.jsx("div",{className:"p-4",children:t.jsx(wt,{type:"error",title:s.failureMessage,content:s.failureBannerContentMessage})})}function Mi({caterpillarStatusMessageTexts:s}){return t.jsx("div",{className:"p-4",children:t.jsx(wt,{title:s.cancelledMessage,content:""})})}function Ti({interruptPrompt:s,setInterruptPrompt:e,handleInterruptCaterpillar:a}){const n=U();return t.jsxs("div",{className:"flex w-full flex-col justify-center gap-4 p-4",children:[t.jsx(fa,{ariaLabel:n.formatMessage({id:"aYWRtV",defaultMessage:"Press enter to interrupt task"}),name:"interrupt-caterpillar-prompt",value:s,onChange:r=>e(r.target.value),color:"search",onPressEnter:a}),t.jsx(ee,{onClick:a,children:t.jsx(y,{id:"h73FdF",defaultMessage:"Interrupt task"})})]})}function Pi({sourcesCount:s,taskInfo:e}){const a=Qe(e.originalConversationId,r=>At.findNode(r,i=>i.message.metadata?.b1de6e2_s===!0&&i.message.metadata?.async_task_id===e.taskId)?.message.metadata?.async_task_status_messages),n=h.useMemo(()=>a?.completed_no_time?t.jsxs(t.Fragment,{children:[a?.completed_with_time??a?.completed_no_time,t.jsx(y,{id:"zxfmo/",defaultMessage:" Â· {sourcesCount} sources",values:{sourcesCount:s}})]}):t.jsx(y,{id:"YG7a0T",defaultMessage:"Completed Â· {sourcesCount} sources",values:{sourcesCount:s}}),[s,a]);return!e.updatedAt&&!a?.completed?null:t.jsx(qe,{icon:t.jsx(xa,{className:"text-token-text-secondary"}),fillIcon:!1,children:t.jsx("div",{className:"text-token-text-tertiary",children:n})})}function Li({taskInfo:s,caterpillarStatusMessageTexts:e,sourcesCount:a,caterpillarHeaderRef:n}){const[r,i]=h.useState(""),[l,o]=h.useState(!1),f=mn("caterpillar-interrupts"),c=h.useRef(!1),u=h.useRef(null),m=h.useMemo(()=>(c.current=!!u.current&&da(u.current,Ci),s.rows??[]),[s.rows]);h.useEffect(()=>{if(m.length===0){const v=new Date(s.createdAt).getTime(),j=Date.now()-v,g=Ii-j;if(g>0){const N=setTimeout(()=>{o(!0)},g);return()=>clearTimeout(N)}else o(!0)}else o(!1)},[m,s.createdAt]),h.useEffect(()=>{c.current&&rt(u.current)},[m]),h.useEffect(()=>{et(s)||setTimeout(()=>{u.current&&rt(u.current)},100)},[]);const d=ua({taskId:s.taskId,prompt:r}),x=et(s)||ma(s),b=h.useCallback(async()=>{await d.mutateAsync(),i("")},[d,i]),S=h.useMemo(()=>m.length?x?m:m.slice(0,m.length-1):m,[m,x]);return t.jsxs("div",{className:"flex flex-col",children:[t.jsx("div",{ref:n},"task-header"),t.jsxs("div",{className:"flex w-full flex-col gap-4",children:[t.jsx("div",{className:"text-base font-medium",children:s.title}),m.length?t.jsxs(we,{initial:!1,children:[S.map((v,j)=>t.jsx(ki,{previousRow:j>0?m[j-1]:null,currentRow:v},v.id)),!x&&t.jsx(Ni,{finalRow:m[m.length-1]})]}):l?t.jsx(qe,{fillIcon:!1,icon:t.jsx(Bt,{className:"text-token-text-primary inline-flex h-5 w-5 items-center justify-center"}),children:e.waitingInQueueMessage}):t.jsx(wi,{}),St(s)&&f&&t.jsx(Ti,{interruptPrompt:r,setInterruptPrompt:i,handleInterruptCaterpillar:b}),s.status==="failed"?t.jsx(_i,{caterpillarStatusMessageTexts:e}):s.status==="cancelled"?t.jsx(Mi,{caterpillarStatusMessageTexts:e}):s.status==="completed"?t.jsx(Pi,{caterpillarStatusMessageTexts:e,taskInfo:s,sourcesCount:a}):null]}),t.jsx("div",{ref:u},"task-footer")]})}function Ei({taskId:s,setWidth:e=void 0,initialTab:a}){const n=ha(d=>ga.getTask(s,d)),{closeThreadSidebar:r}=zt(),[i,l]=h.useState(a),o=pa(),f=h.useRef(null),c=!1;h.useEffect(()=>{l(a)},[a]),h.useEffect(()=>{},[n?.taskId,n?.status,c]),h.useEffect(()=>{},[n?.taskId,n?.status,i]),h.useEffect(()=>{},[e,n,c]);const{uniqueSources:u,totalSources:m}=h.useMemo(()=>{if(!n?.rows)return{uniqueSources:[],totalSources:0};const d=ba(n.rows),x=d.reduce((b,S)=>b+S.count,0);return{uniqueSources:d,totalSources:x}},[n?.rows]);return t.jsx(Nt,{handleClose:r,leading:t.jsx("div",{className:"flex w-full justify-center",children:t.jsx(va,{activeTab:i,setActiveTab:l,showAuxTab:c,sourcesCount:m,caterpillarHeaderRef:f})}),children:n&&t.jsxs(Si,{children:[!1,i==="activity"&&t.jsx(Li,{taskInfo:n,caterpillarStatusMessageTexts:o,sourcesCount:m,caterpillarHeaderRef:f}),i==="sources"&&t.jsx(ja,{taskIsPending:St(n),finalMessage:n.finalMessage,sources:u,caterpillarHeaderRef:f})]})})}const ot=3;function Fi({product:s,descriptionCitation:e,clientThreadId:a,messageId:n,contentReferenceStartIndex:r,productIndex:i,analyticsMetadata:l,offsetTopMargin:o=!1}){const f=K(),c=fn(f,"3381490948"),[u,m]=h.useState(void 0),d=h.useRef([]),x=h.useRef([]),b=u?.product.offers??s.offers??[];for(const p of b)d.current.some(P=>P.merchant_name===p.merchant_name)||d.current.push(p);const S=u?.product.image_urls??s.image_urls??[];for(const p of S)x.current.includes(p)||x.current.push(p);const[v,j]=h.useState(!1);h.useEffect(()=>j(!1),[s]);const g=ya(l),N=Sa.useStore(),{numReviews:w,rating:I,ratingGroupedCitation:k}=h.useMemo(()=>{const p=u?.product??s;return{numReviews:p.num_reviews,rating:p.rating,ratingGroupedCitation:p.rating_grouped_citation}},[s,u]);return t.jsxs("div",{className:M("bg-token-bg-primary flex w-full flex-col",o?"mt-[calc(var(--threadFlyOut-leading-height,57px)*-1)] min-h-screen":"mt-0"),children:[t.jsx(Oi,{imageUrls:x.current,title:s.title,onImageClick:p=>{N.setCurrentImage({image:{url:p,content_url:p,thumbnail_url:p,title:s.title,content_size:{width:0,height:0},thumbnail_size:{width:0,height:0}},source:wa.ProductDetails,analyticsMetadata:l,contentReferenceStartIndex:r,productIndex:i})}}),t.jsxs("div",{className:"border-token-border-light flex flex-col border-t px-6 py-4",children:[t.jsx("div",{className:"text-token-text-primary text-xl font-semibold",children:s.title}),w&&w>0&&t.jsxs("div",{className:"flex flex-col gap-1 pt-1",children:[t.jsxs("div",{className:"text-token-text-secondary flex flex-row items-center gap-1 text-sm text-nowrap text-ellipsis",children:[t.jsx(Na,{rating:I??0}),t.jsx(y,{id:"Tj10jZ",defaultMessage:"{rating} ({num_reviews})",values:{rating:(I??0).toFixed(1),num_reviews:new Intl.NumberFormat().format(w)}}),t.jsx(J,{label:t.jsx(y,{id:"zngDZ6",defaultMessage:"Ratings and pricing are sourced from third parties which may update over time"}),children:t.jsx(kt,{className:"h-4 w-4"})})]}),k&&t.jsx(tt,{webpageItem:k,trackContentReferenceEvent:g,analyticsMetadata:{...l,section:"products",section_location:"sidebar"},isLastHovered:!0,noMarginStart:!0})]}),s.description&&t.jsxs("div",{className:"pt-3 text-sm",children:[s.description,e&&t.jsx(tt,{webpageItem:e,trackContentReferenceEvent:g,analyticsMetadata:{section:"products",section_location:"sidebar"}})]})]}),t.jsx(ka,{title:t.jsx(y,{id:"ITQW8G",defaultMessage:"Purchasing Options"}),children:t.jsxs("div",{className:"-mx-3 flex flex-col",children:[d.current.slice(0,v?d.current.length:ot).map((p,P)=>t.jsx(V.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.3},children:t.jsx(Ri,{offer:p,onClick:()=>{H.logEventWithStatsig("Product Offer Clicked","product_offer_clicked",{...xn(l),content_reference_start_index:r,product_index:i,offer_index:P,product_id:s.id,offer_url:p.url,checkout_url:p.checkout_url,offers_count:d.current.length}),window.open(p.checkout_url||p.url,"_blank")}},p.url)},p.url)),d.current.length>ot&&t.jsxs(ee,{className:"w-fit px-3",size:"small",color:"ghost",onClick:()=>j(!v),children:[v?t.jsx(y,{id:"Gl3oLS",defaultMessage:"See less"}):t.jsx(y,{id:"f9tOaY",defaultMessage:"See more"}),v?t.jsx(Ca,{}):t.jsx(Ia,{})]})]})}),c&&t.jsx(Cn,{clientThreadId:a,messageId:n,product:s,trackContentReferenceEvent:g,onProductEntityUpdated:p=>{m(p)}})]})}function Oi({imageUrls:s,title:e,onImageClick:a}){const[n,r]=h.useState(0),i=h.useRef(null);return s?t.jsxs("div",{className:"flex flex-col",children:[s[n]&&t.jsx(V.div,{className:"bg-token-main-surface-secondary dark:bg-token-main-surface-primary-inverse",drag:"x",dragConstraints:{left:0,right:0},dragElastic:0,onDragEnd:(l,{offset:o,velocity:f})=>{const c=Math.abs(o.x)*f.x;c<-1e3?n<s.length-1&&r(n+1):c>1e3&&n>0&&r(n-1)},onClick:()=>a(s[n]),children:t.jsx("img",{className:"m-0 aspect-square w-full object-contain mix-blend-darken",src:s[n],alt:e,draggable:!1})}),s.length>1&&t.jsx("div",{ref:i,className:"no-scrollbar flex flex-row gap-2.5 overflow-x-scroll px-6 py-3",children:s.map((l,o)=>t.jsx("div",{className:M("flex-none cursor-pointer overflow-hidden rounded-md border-2 p-0.5",n===o?"border-token-text-primary":"border-transparent"),onMouseEnter:()=>r(o),onClick:()=>a(l),children:t.jsx("div",{className:"bg-token-main-surface-secondary dark:bg-token-main-surface-primary-inverse",children:t.jsx("img",{className:"h-10 w-10 rounded-xs object-cover mix-blend-darken",src:l,alt:e})})},`${o}-${l}`))})]}):null}function Ri({offer:s,onClick:e}){const a=s.price_details,n=a?.base&&(a.shipping??a.tax)&&a.total,r=a?.display_price==="total_price"||n,i=a?.display_price==="total_price";let l=null;n&&a?l=t.jsxs("div",{className:"space-y-1 text-sm",children:[t.jsx("div",{children:t.jsx(y,{id:"offer.breakdown.base",defaultMessage:"Base price: {amount}",values:{amount:a.base}})}),a.shipping&&t.jsx("div",{children:t.jsx(y,{id:"offer.breakdown.shipping",defaultMessage:"Shipping: {amount}",values:{amount:a.shipping}})}),a.tax&&t.jsx("div",{children:t.jsx(y,{id:"offer.breakdown.tax",defaultMessage:"Tax: {amount}",values:{amount:a.tax}})})]}):i&&(l=t.jsx(y,{id:"ur3//V",defaultMessage:"Prices shown include estimated tax and shipping."}));const o=!!s.checkout_url;return t.jsxs("div",{className:M("flex cursor-pointer flex-col rounded-xl p-3","hover:bg-token-bg-tertiary"),onClick:e,children:[t.jsxs("div",{className:"flex flex-row items-center gap-2 text-sm font-semibold",children:[t.jsx(_a,{className:"h-5 w-5 rounded-full",url:s.url,size:128,minSize:16,fallback:t.jsx(Ma,{className:"text-token-text-tertiary"})}),t.jsx("div",{className:"min-w-0 flex-1 truncate",children:s.merchant_name}),r&&l?t.jsx(J,{label:l,children:t.jsxs("span",{className:"flex items-baseline",children:[t.jsx(kt,{className:"text-token-text-secondary h-3 w-3"}),t.jsx("span",{children:s.price})]})}):t.jsx("span",{children:s.price}),t.jsx(ee,{className:"w-fit min-w-20 truncate",size:"small",color:o?"primary":"secondary",children:o?t.jsx(y,{id:"LlDx51",defaultMessage:"Buy now"}):t.jsx(y,{id:"sTpOJt",defaultMessage:"Buy"})})]}),t.jsx("div",{className:"text-token-text-secondary pt-2.5 text-xs",children:s.product_name}),t.jsx("div",{className:"text-token-text-secondary text-xs",children:s.details})]})}function Ai({clientThreadId:s,type:e="sidebar"}){const{closeThreadSidebar:a}=zt(),{clientThreadId:n,messageId:r,turnIndex:i,contentReferenceStartIndex:l,productIndex:o}=hn("product")??{},f=Qe(n,b=>b),c=h.useMemo(()=>({clientThreadId:s,messageId:r,turnIndex:i}),[s,r,i]);if(n!==s||l===void 0||o===void 0||!r)return null;const{product:u,descriptionCitation:m}=Ta({thread:f,messageId:r,contentReferenceStartIndex:l,productIndex:o});if(!u)return null;const d=`${r}-${l}-${o}`,x=t.jsx(Fi,{product:u,descriptionCitation:m,clientThreadId:s,messageId:r,contentReferenceStartIndex:l,productIndex:o,analyticsMetadata:c,offsetTopMargin:e==="sidebar"});switch(e){case"sidebar":return t.jsx(Nt,{handleClose:a,children:x},d);case"modal":return t.jsxs(gn,{testId:"modal-chat-screen-product-flyout",className:"relative max-w-md",size:"custom",type:"success",noPadding:!0,title:u.title,visuallyHiddenHeader:!0,isOpen:!0,onClose:a,children:[x,t.jsx(pn,{className:"absolute end-2.5 top-2.5 z-10",onClick:a})]},d)}}function Bi({isExpanded:s,children:e}){const a=h.useRef(null),[n,r]=h.useState("400px"),i=ne.isValidElement(e)?ne.cloneElement(e,{setWidth:r}):e;return t.jsx(we,{children:t.jsx(V.div,{className:"bg-token-sidebar-surface-primary relative z-1 shrink-0 overflow-x-hidden max-lg:w-0!",ref:a,initial:!1,animate:{width:s?n:0,transition:{type:"spring",bounce:.12,duration:.3}},onAnimationStart:()=>{a.current&&(a.current.style.visibility="visible")},onAnimationComplete:()=>{a.current&&(s||(a.current.style.visibility="hidden"))},children:t.jsx("div",{className:M("absolute h-full",!s&&"pointer-events-none"),style:{width:n},children:t.jsx("div",{className:"flex h-full flex-col",children:i})})})})}const tr=({setWidth:s,clientThreadId:e})=>{const a=Dt(),n=Ct();return a?t.jsxs(t.Fragment,{children:[ae(a,"searchSources")&&t.jsx(Pa,{clientThreadId:e}),ae(a,"retrievalResults")&&t.jsx(La,{clientThreadId:e}),n&&ae(a,"summarizer")&&t.jsx(Ea,{clientThreadId:e}),ae(a,"caterpillar")&&t.jsx(Ei,{taskId:a.caterpillarId,initialTab:a.initialTab,setWidth:s}),ae(a,"product")&&t.jsx(Ai,{clientThreadId:e})]}):null};function qt({children:s,hideNavigation:e=!1,mobileHeaderContent:a,mobileHeaderRightContentExpanded:n,mobileHeaderLeftContent:r,mobileHeaderRightContent:i,mobileHeaderBottomContent:l,renderNavSidebar:o,threadFlyout:f,forceOpenDesktopSidebar:c=!1}){const{isUnauthenticated:u}=Oe(),[m,d,x,b]=Ne(L=>[L.activeStageSidebar,L.activeSidebar,L.isSidebarLocked,L.temporaryDisableHoverSidebar]),S=Fe(),v=bn(),j=Dt(),g=Fa(),N=[];let w=null;ne.Children.forEach(s,L=>{ne.isValidElement(L)&&(L.type===qt.Sidebars?w=L:N.push(L))});const{layer:I}=Ke("3737571708"),k=I.get("sidebar_type","slick"),p=(!u||k==="heavy")&&!e&&o!=null,P=!e&&(p||u),C=Ct(),B=j?ae(j,"summarizer")&&C:!1,T=j?!ae(j,"summarizer"):!1,R=v&&(B||T),[z,G]=ne.useState(p&&(c||!g));return h.useEffect(()=>{G(p&&(c||!g))},[p,c,g]),t.jsxs("div",{className:"flex h-full w-full flex-col",children:[t.jsx(Q,{children:t.jsx(Oa,{})}),t.jsxs("div",{className:M("relative flex h-full w-full flex-1 transition-colors",d!=="popover-nav"&&"z-0"),children:[t.jsxs("div",{className:"relative flex h-full w-full flex-row",children:[t.jsx(we,{initial:!1,children:z&&t.jsx(ji,{isPopoverOnDesktop:m||S&&!x,children:u?t.jsx(fi,{}):o?.()})}),t.jsxs("div",{className:"relative flex h-full max-w-full flex-1 flex-col",children:[P&&t.jsxs(Q,{children:[t.jsx(Ra,{}),t.jsx(bi,{rightContentExpanded:n,onOpenSidebar:()=>O.toggleNavCollapsed(),showNavSidebar:p,leftContent:r,rightContent:i,bottomContent:l,children:a})]}),t.jsx("main",{className:"transition-width relative h-full w-full flex-1 overflow-auto",id:"main","z-index":"-1",children:N})]})]}),t.jsx(Q,{children:t.jsx(Bi,{isExpanded:R,children:f})}),w]}),t.jsx(Q,{children:t.jsx(Aa,{useManuallyControlledVisibility:!0})}),S&&g&&!b&&t.jsx(Ba,{})]})}function zi({children:s}){return t.jsx(t.Fragment,{children:s})}qt.Sidebars=zi;export{Xi as C,tr as F,Yi as N,ti as S,si as a,qt as b,er as c,Ji as d,Zi as e};
//# sourceMappingURL=f8brziwaxja17w8l.js.map
