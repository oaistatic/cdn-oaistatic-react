import{m as T,k as F,eP as v,D as _,F as K,bI as R,g as H,r as W,B as X,f as V,aw as Q,c as Z,ej as J}from"./i3bl95k8z8nuf4dv.js";import{r as h,f as S,j as e,M as i,ah as P,g as k,u as ee,d as ae,o as se}from"./msupklk377u8vx8o.js";import{lt as q,c7 as $,c9 as N,lu as ne,cg as G,ch as O,jO as A,lv as te,e as ie,dG as le,I as oe,lw as re,lx as ce,ce as de,cf as ue,ci as me,be as ge,j0 as fe,bE as pe,eg as xe,li as he,fA as je,eI as ye,ev as L,ly as Me,lz as be,bH as ve,cA as Se}from"./idf4u2jy0wx0pvap.js";import{a as Ne,b as we,S as Ce,c as Be}from"./e3wybuqg37q9b79t.js";import{c as Ie}from"./k209r7vuwiflzp7c.js";import{T as Te,a as Le}from"./hk6pboyxu8imttac.js";import{B as Ee}from"./d4n1c44fvq6e4si5.js";import{e as Y,b as E,g as _e,d as Pe,c as U,a as ke,A as Ae}from"./m5f9ap1vca064g53.js";import"./f8brziwaxja17w8l.js";import"./fii0gwkgtas4sckd.js";import"./k4oexpwbiepmd1cd.js";import"./np9w83f07wa6edf5.js";import"./gc51ish3otzvnj1w.js";import"./hwl3hzno2kq7obfl.js";import"./hmii3551qscelikg.js";import"./i3xeaua08fnq6vw7.js";import"./gd7xfxa2yqt151v4.js";import"./igftvtdft8b4phs3.js";import"./o2t4lszmsavslsdu.js";import"./gwmfzjrffpu4d2tx.js";import"./m2labkp4eli82luk.js";import"./ikpwdaspyqzs2oop.js";import"./k0gfwt82z96kzlbw.js";import"./b8sq4gagi5vun041.js";import"./etqfvs5ggajp1a11.js";import"./jxisywa3fftqubgr.js";import"./hstsg1tnsukf0vw2.js";import"./nfdankr6r3tis32a.js";import"./nfft5dsl9vynpk6s.js";import"./bh8emud9m2ohtvi0.js";import"./oawahzrephbeszvx.js";import"./bjlvmvwbynia41h5.js";var b=(a=>(a.FLEXIBLE="month",a.ANNUAL="year",a))(b||{});const De=Ie(b);function ze({isOpen:a,onClose:n,initialTeamBillingType:s,renewalDate:l,accountId:t,billingDetails:r}){const[c,o]=h.useState(s),[m,d]=h.useState(!1),[p,g]=h.useState(!1),f=S(),y=T(),x=q(t),w=async()=>{g(!0);try{await x.mutateAsync({accountId:t,updatedPriceInterval:c==="month"?"month":"year",updatedSeats:void 0}),g(!1),y.success(f.formatMessage({id:"teamBilling.successfullyUpdatedSubscription",defaultMessage:"Your subscription was updated successfully"}),{hasCloseButton:!0}),d(!1),n()}catch{y.warning(f.formatMessage({id:"teamBilling.errorUpdatingSubscription",defaultMessage:"There was a problem updating your subscription"}),{hasCloseButton:!0})}finally{g(!1)}},{flexibleBillingPlan:B,annualBillingPlan:C}=$(r.currency),D=c==="month"?B:C,I=()=>{d(!1),o(s),n()};return e.jsx(F,{testId:"modal-teams-change-billing-schedule",type:"success",isOpen:a,onClose:I,size:"custom",className:"max-w-xl",noPadding:!0,title:m?f.formatMessage({id:"teamBilling.changeBillingScheduleConfirmTitle",defaultMessage:"Confirm changes"}):f.formatMessage({id:"teamBilling.changeBillingScheduleTitle",defaultMessage:"Change billing schedule"}),showCloseButton:!0,children:m?e.jsx(Oe,{selectedPlan:c,initialTeamBillingType:s,renewalDate:l,handleUpdate:w,isUpdating:p,selectedBillingPlan:D,onClose:I}):e.jsx(Ue,{setSelectedPlan:o,selectedPlan:c,initialTeamBillingType:s,setConfirmPage:d,renewalDate:l,flexibleBillingPlan:B,annualBillingPlan:C,onClose:I})})}function Ue({selectedPlan:a,setSelectedPlan:n,initialTeamBillingType:s,setConfirmPage:l,renewalDate:t,flexibleBillingPlan:r,annualBillingPlan:c,onClose:o}){const m=S();return e.jsxs("div",{className:"flex flex-col p-6",children:[e.jsx("div",{className:"grid grid-flow-row grid-cols-2",children:e.jsxs(G,{className:"col-span-2 grid gap-4 md:col-span-2 md:grid-cols-2",defaultValue:a,onValueChange:d=>{De(d)&&n(d)},children:[e.jsx(O,{billingType:"month",...r,selectedValue:a}),e.jsx(O,{billingType:"year",...c,selectedValue:a})]})}),e.jsx("span",{className:"text-token-text-secondary mt-5 text-sm",children:e.jsx(i,{...N.changeEffectDate,values:{date:e.jsx(P,{value:t,year:"numeric",month:"long",day:"numeric"})}})}),e.jsxs("div",{className:"mt-6 flex items-center justify-end gap-2",children:[e.jsx(v,{title:m.formatMessage(N.cancel),color:"secondary",onClick:()=>o()}),e.jsx(v,{title:m.formatMessage(N.continueToPricePreview),disabled:a===s,color:"primary",onClick:()=>l(!0)})]})]})}function Oe({initialTeamBillingType:a,selectedPlan:n,renewalDate:s,handleUpdate:l,isUpdating:t,selectedBillingPlan:r,onClose:c}){const o=S();return e.jsxs("div",{className:"p-4",children:[e.jsx("span",{className:"text-sm",children:e.jsx(i,{...N.confirmPageChangeEffectDate,values:{current_plan:a==="month"?"Flexible (monthly)":"Annual",new_plan:n==="month"?"Flexible (monthly)":"Annual",date:e.jsx(P,{value:s,year:"numeric",month:"long",day:"numeric"})}})}),e.jsxs("div",{className:"bg-token-main-surface-secondary mt-4 flex flex-col rounded-xl p-4",children:[e.jsx("span",{className:"font-semibold",children:e.jsx(i,{...r.name})}),e.jsx("span",{className:"text-sm",children:e.jsx(i,{...r.cost,values:{monthlyCost:r.monthlyCost,discountedMonthlyCost:r.discountedMonthlyCost,currencyCode:o.formatMessage(r.currencyCode),currencySign:o.formatMessage(r.currencySign),s:(...m)=>e.jsx(ne,{children:m})}})}),e.jsx("span",{className:"text-token-text-secondary text-sm",children:e.jsx(i,{...r.costStructure})})]}),e.jsxs("div",{className:"mt-4 flex justify-end gap-2",children:[e.jsx(v,{title:o.formatMessage(N.cancel),color:"secondary",onClick:c}),e.jsx(v,{title:o.formatMessage(N.confirmChange),color:"primary",onClick:l,loading:t})]})]})}const Fe="https://q.surveysapp.org/jfe/form/SV_9vIX2bUyeLKgCZo";function Re({isOpen:a,onClose:n}){const s=S(),l=T(),{data:t,isLoading:r}=A(),c=_(),o=te(c?.id),m=ie(),[d,p]=h.useState(""),[g,f]=h.useState(!1),y=m?.email&&d.toLowerCase()==m.email.toLowerCase(),[x,w]=h.useState(t&&!t.will_renew);if(r||!c||!t)return null;const B=async()=>{f(!0);try{await o.mutateAsync(c.id),w(!0),window.open(`${Fe}?user_id=${m?.id}&account_id=${c.id}&plan_type=${t.plan_type}`,"_blank")}catch{l.warning(s.formatMessage(j.errorCancellingSubscription),{hasCloseButton:!0})}finally{f(!1)}};return e.jsx(F,{testId:"modal-cancel-team-plan",type:"success",onClose:n,showCloseButton:!0,isOpen:a,className:"",title:e.jsx("span",{className:"text-lg",children:e.jsx(i,{...j.cancelPlan})}),children:x?e.jsxs("div",{children:[e.jsx("h3",{className:"text-token-text-primary mb-2 text-base font-semibold",children:e.jsx(i,{...j.successfullyCanceled})}),t.active_until!=null&&e.jsx("p",{className:"text-token-text-primary text-sm",children:e.jsx(i,{...j.retainUntil,values:{expiryDate:new Date(t.active_until)}})}),e.jsx("div",{className:"mt-6 flex w-full flex-row justify-end",children:e.jsx(v,{title:s.formatMessage(j.doneButton),color:"primary",onClick:n,disabled:g})})]}):e.jsxs("div",{children:[e.jsxs("div",{className:"flex flex-col items-center justify-center gap-4",children:[e.jsxs("div",{className:"flex w-full items-center gap-4",children:[e.jsx(le,{src:c.data.profilePictureUrl,size:"large"}),e.jsxs("div",{className:"flex-col",children:[e.jsx("p",{className:"font-semibold",children:c.data.name}),e.jsx("p",{className:"text-token-text-secondary text-sm",children:e.jsx(i,{...j.membersCount,values:{count:t.seats_entitled}})})]})]}),e.jsxs("div",{className:"w-full",children:[e.jsx("h3",{className:"text-token-text-primary mb-2 text-base font-semibold",children:e.jsx(i,{...j.areYouSure})}),e.jsxs("ul",{className:"text-token-text-secondary list-disc ps-5 text-sm",children:[e.jsx("li",{className:"my-2",children:e.jsx(i,{...j.dataUnavailable})}),t.active_until!=null&&e.jsx("li",{className:"my-2",children:e.jsx(i,{...j.retainUntil,values:{expiryDate:new Date(t.active_until)}})}),e.jsx("li",{className:"my-2",children:e.jsx(i,{...j.retainEmailAccess})})]})]}),e.jsxs("div",{className:"w-full",children:[e.jsx("h3",{className:"text-token-text-primary mb-2 text-base font-semibold",children:e.jsx(i,{...j.enterEmailToConfirm})}),e.jsx(oe,{ariaLabel:s.formatMessage(j.enterEmailToConfirm),type:"text",name:"user-email",placeholder:"abcd@acme.com",onChange:C=>{p(C.target.value)}})]})]}),e.jsxs("div",{className:"mt-6 flex w-full flex-row justify-end",children:[e.jsx(v,{title:s.formatMessage(j.keepSubscriptionButton),onClick:n,disabled:g}),e.jsx(v,{title:s.formatMessage(j.cancelSubscriptionButton),onClick:B,disabled:!y,loading:g,color:"danger",className:"ms-2"})]})]})})}const j=k({dataUnavailable:{id:"cancelTeamPlanModal.dataUnavailable",defaultMessage:"All workspace data including chat history and settings will not be available."},cancelPlan:{id:"cancelTeamPlanModal.cancelPlan",defaultMessage:"Cancel subscription"},retainUntil:{id:"cancelTeamPlanModal.retainUntil",defaultMessage:"You will retain access to the workspace until the end of your billing cycle on {expiryDate, date, long}."},retainEmailAccess:{id:"cancelTeamPlanModal.retainEmailAccess",defaultMessage:"You will still be able to use ChatGPT with the other workspaces associated with this email address."},errorCancellingSubscription:{id:"cancelTeamPlanModal.errorCancellingSubscription",defaultMessage:"There was a problem cancelling your subscription."},areYouSure:{id:"cancelTeamPlanModal.areYouSure",defaultMessage:"Are you sure?"},enterEmailToConfirm:{id:"cancelTeamPlanModal.enterEmailToConfirm",defaultMessage:"Enter your Email address to confirm"},emailPlaceholder:{id:"cancelTeamPlanModal.emailPlaceholder",defaultMessage:"abcd@acme.com"},doneButton:{id:"cancelTeamPlanModal.doneButton",defaultMessage:"Done"},keepSubscriptionButton:{id:"cancelTeamPlanModal.keepSubscriptionButton",defaultMessage:"Keep subscription"},cancelSubscriptionButton:{id:"cancelTeamPlanModal.cancelSubscriptionButton",defaultMessage:"Cancel subscription"},successfullyCanceled:{id:"cancelTeamPlanModal.successfullyCanceled",defaultMessage:"You have successfully canceled your subscription."},membersCount:{id:"yourComponent.membersCount",defaultMessage:"{count, plural, one {# member} other {# members}}"}}),He=K.p`text-base font-semibold mb-3 mt-3`;function We({isOpen:a,onClose:n,initialTeamBillingType:s,initialSeats:l,accountId:t,renewalDate:r,billingDetails:c}){const o=S(),m=T(),[d,p]=h.useState(l),[g,f]=h.useState(!1),[y,x]=h.useState(!1),{flexibleBillingPlan:w,annualBillingPlan:B}=$(c.currency),C=s===re.FLEXIBLE?w:B,D=q(t),I=async()=>{x(!0);try{await D.mutateAsync({accountId:t,updatedPriceInterval:void 0,updatedSeats:d}),x(!1),m.success(o.formatMessage({id:"teamBilling.successfullyUpdatedSubscription",defaultMessage:"Your subscription was updated successfully"}),{hasCloseButton:!0}),f(!1),n()}catch{m.warning(o.formatMessage({id:"teamBilling.errorUpdatingSubscription",defaultMessage:"There was a problem updating your subscription"}),{hasCloseButton:!0})}finally{x(!1)}},z=()=>{f(!1),p(l),n()};return e.jsx(F,{testId:"modal-teams-manage-seats",type:"success",isOpen:a,onClose:z,size:"custom",noPadding:!0,className:"max-w-2xl",showCloseButton:!0,title:g?o.formatMessage({id:"teamsManageSeatsModal.title",defaultMessage:"Manage seats"}):o.formatMessage({id:"teamsManageSeatsModalConfirmPage.title",defaultMessage:"Review"}),children:g?e.jsx(Ye,{numSeats:d,initialSeats:l,handleUpdate:I,isUpdating:y,renewalDate:r,accountId:t,selectedPlanBillingInfo:C,onClose:z}):e.jsx($e,{selectedPlan:s,selectedPlanBillingInfo:C,numSeats:d,initialSeats:l,setNumSeats:p,renewalDate:r,setConfirmPage:f,billingDetails:c})})}function $e({selectedPlan:a,selectedPlanBillingInfo:n,numSeats:s,initialSeats:l,setNumSeats:t,setConfirmPage:r,billingDetails:c,renewalDate:o}){const m=S(),d=de(isNaN(s)?0:s,l,ue);return e.jsxs("div",{className:"grid grid-flow-row grid-cols-2",children:[e.jsxs("div",{className:"flex flex-col gap-2 p-5",children:[e.jsx(me,{numSeats:s,minSeats:l,setNumSeats:t}),e.jsx(G,{className:"col-span-2 grid md:col-span-1 md:grid-cols-1",defaultValue:a,children:e.jsx(O,{billingType:a,...n,selectedValue:a})})]}),e.jsxs("div",{className:"border-token-main-surface-tertiary bg-token-main-surface-secondary col-span-3 flex h-full flex-col overflow-hidden border-s p-6 md:col-span-1",children:[e.jsx(He,{children:e.jsx(i,{...N.summaryTitle})}),e.jsx(Ee,{numSeats:d,selectedPlan:a,billingDetails:c,totalLabel:N.allPlansTotal,billDate:e.jsx(P,{value:o,year:"numeric",month:"long",day:"numeric"})}),e.jsx(v,{title:m.formatMessage(M.continue),disabled:d===l,onClick:()=>r(!0),className:"w-full rounded-xl",color:"primary"})]})]})}function Ye({numSeats:a,initialSeats:n,renewalDate:s,handleUpdate:l,isUpdating:t,accountId:r,selectedPlanBillingInfo:c,onClose:o}){const m=S(),{data:d,isError:p,isLoading:g}=ce(r,a);if(g)return e.jsx("div",{className:"flex items-center justify-center py-32",children:e.jsx(R,{})});if(!(p||!d))return e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"font-semibold",children:e.jsx(i,{...M.additionalSeats,values:{additionalSeats:a-n}})}),e.jsx("span",{className:"font-semibold",children:e.jsx(i,{...M.additionalSeatsTotal,values:{currencySign:m.formatMessage(c.currencySign),totalCost:(d.total_amount/100).toFixed(2)}})})]}),e.jsx("span",{className:"text-token-text-secondary text-sm",children:e.jsx(i,{...M.proratedAmountMessage})}),e.jsx("span",{className:"bg-token-main-surface-secondary text-token-text-secondary mt-4 flex flex-col rounded-2xl p-4 text-sm",children:e.jsx(i,{...M.chargeMessage,values:{numSeats:a,date:e.jsx(P,{value:s,year:"numeric",month:"long",day:"numeric"})}})}),e.jsx("hr",{className:"mt-4"}),e.jsxs("div",{className:"mt-4 flex justify-between",children:[e.jsx("span",{className:"font-semibold",children:e.jsx(i,{...M.subtotal})}),e.jsx("span",{children:e.jsx(i,{...M.subtotalPrice,values:{currencySign:m.formatMessage(c.currencySign),totalCost:(d.amount_excluding_tax/100).toFixed(2)}})})]}),e.jsxs("div",{className:"mt-2 flex justify-between",children:[e.jsx("span",{className:"font-semibold",children:e.jsx(i,{...M.tax})}),e.jsx("span",{children:e.jsx(i,{...M.taxAmount,values:{currencySign:m.formatMessage(c.currencySign),tax:(d.tax_amount/100).toFixed(2)}})})]}),e.jsxs("div",{className:"mt-2 flex justify-between",children:[e.jsx("span",{className:"font-semibold",children:e.jsx(i,{...M.totalDueToday})}),e.jsx("span",{className:"font-semibold",children:e.jsx(i,{...M.totalDueTodayAmount,values:{currencySign:m.formatMessage(c.currencySign),totalCost:(d.total_amount/100).toFixed(2)}})})]}),e.jsx("hr",{className:"mt-4"}),e.jsxs("div",{className:"mt-6 flex justify-end gap-2",children:[e.jsx(v,{title:m.formatMessage(N.cancel),color:"secondary",onClick:o,disabled:t}),e.jsx(v,{title:m.formatMessage(M.payNow),color:"primary",onClick:l,loading:t})]})]})}const M={continue:{id:"teamsManageSeatsModal.continue",defaultMessage:"Continue",description:"Continue button for manage seats modal"},payNow:{id:"teamsManageSeatsModal.payNow",defaultMessage:"Pay now",description:"Team manage seats modal pay now button"},tax:{id:"teamsManageSeatsModal.tax",defaultMessage:"Tax",description:"Tax label"},subtotal:{id:"teamsManageSeatsModal.subTotal",defaultMessage:"Subtotal",description:"Subtotal label"},proratedAmountMessage:{id:"teamsManageSeatsModal.proratedAmountMessage",defaultMessage:"Prorated amount until next billing cycle",description:"Informing user that they will be charged a prorated amount today"},chargeMessage:{id:"teamsManageSeatsModal.chargeMessage",defaultMessage:"You will be charged for {numSeats} total seats at your next renewal on {date}",description:"Number of additional seats being purchased"},additionalSeats:{id:"teamsManageSeatsModal.additionalSeats",defaultMessage:"{additionalSeats} additional {additionalSeats, plural, one {seat} other {seats}}",description:"Number of additional seats being purchased"},additionalSeatsTotal:{id:"teamsManageSeatsModal.additionalSeatsTotal",defaultMessage:"{currencySign}{totalCost}",description:"Summary total of selected plan"},subtotalPrice:{id:"teamsManageSeatsModal.subtotalPrice",defaultMessage:"{currencySign}{totalCost}",description:"Subtotal price for selected plan"},taxAmount:{id:"teamsManageSeatsModal.taxAmount",defaultMessage:"{currencySign}{tax}",description:"Tax amount"},totalDueToday:{id:"teamsManageSeatsModal.totalDueToday",defaultMessage:"Total due today",description:"Total due today label"},totalDueTodayAmount:{id:"teamsManageSeatsModal.totalDueTodayAmount",defaultMessage:"{currencySign}{totalCost}",description:"Total due today"}};function Xe({numInUse:a,numAllocated:n,isTeam:s,subscriptionWillRenew:l,subscriptionBillingPeriod:t,accountId:r,subscriptionRenewalDate:c,billingDetails:o}){const m=H(),d=W(m,"3954884439"),[p,g]=h.useState(!1),f=function(){g(!p)},y=t==="monthly"?b.FLEXIBLE:b.ANNUAL;return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-start text-base",children:e.jsx(i,{...Ve.description,values:{num:`${a}/${n}`,bold:x=>e.jsx("span",{className:"font-medium",children:x})}})}),s&&l&&d&&e.jsx(X,{color:"secondary",onClick:f,children:e.jsx(i,{id:"components.business.NumSeats.manageSeats",defaultMessage:"Manage seats"})})]}),p&&e.jsx(We,{isOpen:!0,onClose:f,initialTeamBillingType:y,initialSeats:n,accountId:r,renewalDate:c,billingDetails:o})]})}const Ve=k({description:{defaultMessage:"<bold>{num}</bold> seats in use",id:"components.business.NumSeats.description"}});function qe(a,n){const s=S(),l=T();return ee({queryKey:["organization-invoices",{...a,options:n}],queryFn:async()=>await V.getInvoices(a,n).catch(t=>{throw l.danger(s.formatMessage(Ke.invoicesLoadError,{error:t.message})),t}),enabled:"account_id"in a||"organization_id"in a})}function Ge(a){const n=_(),s=n?.id,l=n?.data.organizationId??void 0,t=n?.isEnterprisey();return qe(t?{organization_id:l}:{account_id:s},a)}const Ke=k({invoicesLoadError:{id:"organizationBillingInfo.invoicesLoadError.0",defaultMessage:"Failed to load invoices. Contact support@openai.com if error persists."}}),Qe="https://help.openai.com/en/articles/8792536-manage-billing-on-the-chatgpt-team-subscription-plan",Ze=(a,n)=>{const s=a?.isEdu(),l=a?.isTeam(),t=a?.isEnterprisey(),r=a?.isResellerHosted(),c=n?.non_profit_org_discount_applied,o=n.active_until!=null;if(s)return o?u.activeEduLicense:r?u.resellerHostedEduLicense:u.pendingEduLicense;if(t)return o?u.activeEnterpriseLicense:r?u.resellerHostedEnterpriseLicense:u.pendingEnterpriseLicense;if(c)return o?u.activeTeamLicenseNonProfitOrg:u.pendingTeamLicense;if(l)return o?u.activeTeamLicense:u.pendingTeamLicense;throw Q.addError("getWorkspaceLicenseSubtitle: No license found",{subscription:n,currentAccount:a}),new Error("No license for workspace account.")};function Je(){const{data:a,isLoading:n,isError:s}=A(),l=_(),t=H();if(W(t,"2861925050"),n)return e.jsx("div",{className:"flex min-h-screen items-center justify-center",children:e.jsx(R,{})});if(s||!a||!l)return null;const r=a.active_until!=null,c=a?.seats_in_use>a?.seats_entitled,o=a.active_until?new Date(a.active_until):null,m=Ze(l,a),d=l?.isTeam(),p=a?.billing_period==="monthly"?b.FLEXIBLE:b.ANNUAL,g=$(a.billing_currency),{discountedMonthlyCost:f,currencySign:y}=p===b.FLEXIBLE?g.flexibleBillingPlan:g.annualBillingPlan;return e.jsxs(e.Fragment,{children:[!1,e.jsxs(E,{className:"border-token-border-light gap-0 rounded-xl border",children:[e.jsxs("div",{className:"flex flex-col gap-4 p-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs(_e,{className:"flex items-center gap-2",children:[e.jsx(i,{...m}),d&&e.jsx("div",{className:"rounded-sm bg-[#E0FFE7] px-1.5 py-1 text-sm font-medium text-[#24622B]",children:e.jsx(i,{...p===b.FLEXIBLE?u.monthly:u.annual})})]}),o&&e.jsx(Pe,{className:"text-token-text-secondary mt-1",children:l?.isEnterprisey()?e.jsx(i,{...u.licenseExpiry,values:{expiryDate:o}}):a.will_renew?e.jsx(i,{...u.renewalDate,values:{expiryDate:o}}):e.jsx(i,{...u.deactivateDate,values:{expiryDate:o}})})]}),e.jsx(ea,{})]}),d&&!a?.non_profit_org_discount_applied&&e.jsx("div",{className:"text-token-text-secondary h-[50px] text-sm",children:e.jsx(i,{...u.pricePerSeat,values:{symbol:e.jsx(i,{...y}),amount:f,currency:x=>e.jsx("span",{className:"align-top text-xl",children:x}),price:x=>e.jsx("span",{className:"text-token-text-primary ps-[1px] pe-1 align-bottom text-[42px] leading-none",children:x})}})})]}),e.jsx("hr",{}),r&&e.jsxs("div",{className:"p-6",children:[e.jsx(na,{isTeam:d,accountId:l.id}),d&&c&&e.jsx("span",{className:"text-token-text-secondary text-sm",children:e.jsx(i,{...u.teamsAutochargeMessage,values:{link:x=>e.jsx(pe,{className:"ps-1",openNewTab:!0,href:Qe,children:x})}})})]})]}),!1]})}function ea(){const[a,n]=h.useState(!1),s=S(),l=T(),t=_(),{data:r}=A(),[c,o]=h.useState(!1),m=function(){o(!c)},[d,p]=h.useState(!1),g=H(),f=W(g,"1318146997");if(!t||!t.isTeam()||!r)return;const y=async()=>{n(!0);try{const w=await V.fetchCustomerPortalUrl(t?.getWorkspaceId());location.href=w.url}catch{l.warning(s.formatMessage(u.stripeErrorWarning),{hasCloseButton:!0})}finally{n(!1)}},x=r?.billing_period==="monthly"?b.FLEXIBLE:b.ANNUAL;return e.jsxs(e.Fragment,{children:[e.jsxs(ye,{size:"default",contentAlign:"end",sideOffset:4,triggerButton:e.jsx(X,{color:"secondary",icon:ve,children:e.jsx(i,{...u.manageLicenseBtn})}),children:[e.jsx(L.Item,{icon:Ce,onClick:y,children:e.jsx(i,{...u.managePaymentMethod})}),r.will_renew&&f&&e.jsx(L.Item,{icon:Me,onClick:()=>p(!0),children:e.jsx(i,{...u.manageBillingSchedule})}),r?.will_renew&&e.jsx(L.Separator,{}),r?.will_renew&&e.jsx(L.Item,{icon:be,color:"danger",onClick:()=>{m()},children:e.jsx(i,{...u.cancelSubscriptionBtn})})]}),r.active_until!=null&&e.jsx(ze,{isOpen:d,onClose:()=>p(!1),initialTeamBillingType:x,renewalDate:new Date(r.active_until),accountId:t.id,billingDetails:{currency:r.billing_currency}}),e.jsx(Re,{isOpen:c,onClose:m})]})}function aa({invoice:a}){const n=a?.status_transitions.paid_at!=null&&new Date(a.status_transitions.paid_at*1e3),s=a&&new Date(a.due_date*1e3),l=a&&new Date(a.created*1e3);return e.jsxs(Ae,{className:"items-center",children:[e.jsxs("div",{className:"flex grow flex-col gap-1",children:[e.jsx("span",{children:l?e.jsx(i,{...u.invoiceName,values:{createdDate:l}}):e.jsx(i,{...u.defaultInvoiceName})}),a?.paid&&n!=null?e.jsx("div",{className:"text-token-text-secondary text-xs",children:e.jsx(i,{...u.paidInvoice,values:{invoiceDate:n}})}):a&&e.jsx("div",{className:"text-xs text-green-600",children:e.jsx(i,{...u.upcomingInvoice,values:{invoiceDate:s}})})]}),e.jsx("a",{href:a?.hosted_invoice_url,className:Z("mx-auto",a?.hosted_invoice_url===void 0&&"cursor-not-allowed opacity-20"),target:"_blank",rel:"noreferrer",children:e.jsx(Se,{className:"icon-sm text-green-600"})})]})}function sa(){const[a,n]=h.useState({limit:5}),{data:s,isError:l,isLoading:t}=Ge(a),r=a.startingAfter!=null||a.endingBefore!=null&&s?.has_more,c=a.endingBefore!=null||s?.has_more&&a.endingBefore==null;return t?e.jsxs(E,{children:[e.jsx(U,{children:e.jsx(i,{...u.invoicesTitle})}),e.jsx("div",{className:"flex h-40 items-center justify-center",children:e.jsx(R,{})})]}):l||s==null?e.jsxs(E,{children:[e.jsx(U,{children:e.jsx(i,{...u.invoicesTitle})}),e.jsx(xe,{children:e.jsx(i,{...u.noInvoices})})]}):e.jsxs(E,{children:[e.jsx(U,{children:e.jsx(i,{...u.invoicesTitle})}),e.jsx(ke,{children:s.data.map(o=>e.jsx(aa,{invoice:o},o.id))}),e.jsxs("div",{className:"flex",children:[r&&e.jsx("button",{onClick:()=>{s&&n(o=>({...o,endingBefore:s.data[0].id,startingAfter:void 0}))},children:e.jsx(he,{className:"icon-sm"})}),e.jsx("div",{className:"grow"}),c&&e.jsx("button",{onClick:()=>{s&&n(o=>({...o,startingAfter:s.data[s.data.length-1].id,endingBefore:void 0}))},children:e.jsx(je,{className:"icon-sm"})})]})]})}function na({isTeam:a,accountId:n}){const{data:s,isLoading:l,isError:t}=A();return t||!s||l||!s.billing_period||!s.active_until?null:e.jsx(Xe,{numInUse:s.seats_in_use,numAllocated:s.seats_entitled,isTeam:a,subscriptionWillRenew:s.will_renew,subscriptionBillingPeriod:s.billing_period,subscriptionRenewalDate:new Date(s.active_until),accountId:n,billingDetails:{currency:s.billing_currency}})}const ta=a=>a==="plan"||a==="invoices";function ia(){const a=ge(d=>d.currentWorkspace),n=S(),s=ae(),l=h.useMemo(()=>[{key:"plan",label:n.formatMessage(u.planTabName),children:e.jsx(Y,{children:e.jsx(Je,{})})},{key:"invoices",label:n.formatMessage(u.invoicesTabName),children:e.jsx(Y,{children:e.jsx(sa,{})})}],[n]),[t]=se(),r=t.get("tab"),[c,o]=h.useState(r&&ta(r)?r:l[0].key),m=d=>{o(d),s({pathname:window.location.pathname,search:new URLSearchParams({tab:d}).toString()})};return a?.organizationId?e.jsxs(e.Fragment,{children:[e.jsx(fe,{children:e.jsx("title",{children:n.formatMessage(u.adminBrowserPageTitle)})}),e.jsx(Ne,{title:n.formatMessage(u.title),subtitle:n.formatMessage(u.subtitle),tabsHeader:e.jsx(Te,{items:l,activeTab:c,onTabChange:m})}),e.jsx(we,{children:e.jsx(Le,{items:l,activeTab:c})})]}):null}const u=k({adminBrowserPageTitle:{id:"organizationBillingInfo.adminBrowserPageTitle",defaultMessage:"ChatGPT - Admin | Billing"},title:{id:"organizationBillingInfo.title.1",defaultMessage:"Billing"},subtitle:{id:"organizationBillingInfo.subtitle",defaultMessage:"Only workspace owners can view and change these settings"},activeEnterpriseLicense:{id:"organizationBillingInfo.activeEnterpriseLicense",defaultMessage:"Enterprise License"},pendingEnterpriseLicense:{id:"organizationBillingInfo.pendingEnterpriseLicense",defaultMessage:"Enterprise License (pending activation)"},resellerHostedEnterpriseLicense:{id:"organizationBillingInfo.resellerHostedEnterpriseLicense",defaultMessage:"Enterprise License"},activeEduLicense:{id:"organizationBillingInfo.activeEduLicense",defaultMessage:"Edu License"},pendingEduLicense:{id:"organizationBillingInfo.pendingEduLicense",defaultMessage:"Edu License (pending activation)"},resellerHostedEduLicense:{id:"organizationBillingInfo.resellerHostedEduLicense",defaultMessage:"Edu License"},activeTeamLicense:{id:"organizationBillingInfo.activeTeamLicense",defaultMessage:"Team Plan"},activeTeamLicenseNonProfitOrg:{id:"organizationBillingInfo.activeTeamLicenseNonProfitOrg",defaultMessage:"Team License (Non Profit Discount)"},pendingTeamLicense:{id:"organizationBillingInfo.pendingTeamLicense",defaultMessage:"Team Plan (pending activation)"},licenseExpiry:{id:"organizationBillingInfo.licenseExpiry",defaultMessage:"Active until {expiryDate, date, long}"},renewalDate:{id:"organizationBillingInfo.renewalDate",defaultMessage:"Renews on {expiryDate, date, long}"},deactivateDate:{id:"organizationBillingInfo.deactivateDate",defaultMessage:"Deactivates on {expiryDate, date, long}"},seatsInUse:{id:"organizationBillingInfo.seatsInUse",defaultMessage:"{numSeats} in use ({numSeatsPct})"},invoicesTitle:{id:"organizationBillingInfo.invoicesTitle",defaultMessage:"Invoices"},invoiceName:{id:"organizationBillingInfo.invoiceName",defaultMessage:"Invoice: {createdDate, date, long}"},defaultInvoiceName:{id:"organizationBillingInfo.defaultInvoiceName",defaultMessage:"Invoice"},paidInvoice:{id:"organizationBillingInfo.paidInvoice",defaultMessage:"Paid: {invoiceDate, date, long}"},upcomingInvoice:{id:"organizationBillingInfo.upcomingInvoice",defaultMessage:"Due: {invoiceDate, date, long}"},noInvoices:{id:"organizationBillingInfo.noInvoices",defaultMessage:"No invoices found"},manageSubscription:{id:"organizationBillingInfo.manageSubscription",defaultMessage:"Manage subscription"},cancelSubscriptionBtn:{id:"organizationBillingInfo.cancelSubscriptionBtn",defaultMessage:"Cancel subscription"},manageLicenseBtn:{id:"organizationBillingInfo.manageLicenseBtn",defaultMessage:"Manage plan"},managePaymentMethod:{id:"organizationBillingInfo.managePaymentMethod",defaultMessage:"Payment method"},manageBillingSchedule:{id:"organizationBillingInfo.manageSchedule",defaultMessage:"Billing schedule"},stripeErrorWarning:{id:"organizationBillingInfo.stripeErrorWarning",defaultMessage:"Error loading account information"},teamsAutochargeMessage:{id:"organizationBillingInfo.teamsAutochargeMessage",defaultMessage:"Your additional seats will be included on your next invoice. <link>Learn more</link>"},planTabName:{id:"organizationBillingInfo.planTabName",defaultMessage:"Plan"},invoicesTabName:{id:"organizationBillingInfo.invoicesTabName",defaultMessage:"Invoices"},pricePerSeat:{id:"organizationBillingInfo.pricePerSeat",defaultMessage:"<currency>{symbol}</currency><price>{amount}</price>/seat"},monthly:{id:"organizationBillingInfo.monthly",defaultMessage:"Monthly"},annual:{id:"organizationBillingInfo.annual",defaultMessage:"Annual"}}),Oa=J(function(){return Be(),e.jsx(ia,{})});export{Oa as default};
//# sourceMappingURL=hjb5gkgct1eakujb.js.map
