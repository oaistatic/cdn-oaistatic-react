const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/nfqmor1q4t3d1rq6.js","assets/msupklk377u8vx8o.js"])))=>i.map(i=>d[i]);
import{F as je,bj as ye,k as L,l as G,cP as qe,s as ve,v as Ke,_ as De,g as ke,m as be,D as Qe,bM as Y,bF as Ye,c as ee,B as O,f as Ve,b as He}from"./i3bl95k8z8nuf4dv.js";import{r as N,j as e,f as D,M as r,a as se,s as x,g as we,u as Xe}from"./msupklk377u8vx8o.js";import{bF as i,O as Je,em as ae,dD as Me,en as m,e as $e,eo as Ze,ep as es,eq as ss,er as as,es as ts,et as ue,eu as $,ev as S,ew as Z,ex as is,ac as g,ey as pe,ez as P,eA as q,eB as Se,eC as rs,ag as me,eD as ns,eE as ls,b9 as os,a_ as ge,a$ as cs,eF as ds,h as us,eG as ps,eH as ms,eI as gs,eJ as xs,eK as hs,eL as fs,eM as js}from"./idf4u2jy0wx0pvap.js";import{C as ys}from"./ot1k26387o73dpla.js";import{S as H}from"./ju1ci02jioqmoctd.js";import{g as Ne,i as z,h as X}from"./o02jebqcoqg6cyor.js";import{G as vs}from"./gd7xfxa2yqt151v4.js";const xe=je.a`bold underline`,ks=je.textarea`w-full text-sm overflow-y-auto rounded-lg border px-3 py-2 focus:ring-2 focus:ring-blue-400 border-token-border-medium bg-token-main-surface-primary h-32`;var _e=(s=>(s[s.None=0]="None",s[s.AppealAvailable=1]="AppealAvailable",s[s.AppealSent=2]="AppealSent",s))(_e||{}),Pe=(s=>(s[s.None=0]="None",s[s.PublishBlocked=1]="PublishBlocked",s[s.RemovedFromMarketplace=2]="RemovedFromMarketplace",s[s.RemovedFromPublic=3]="RemovedFromPublic",s[s.RemovedFromPrivate=4]="RemovedFromPrivate",s[s.Recategorized=5]="Recategorized",s))(Pe||{});function qs(s){if(!s)return;const a=s.gizmo.appeal_info?.state.kind==="appeal_sent",n=bs(s.gizmo.share_recipient,s.gizmo.sharing_targets);return{sharingRecipient:s.gizmo.share_recipient,categories:s.gizmo.categories,gizmoId:s.gizmo.id,moderationType:n,sharingTargets:s.gizmo.sharing_targets,showModal:a?2:n!==0?1:0}}const he={[i.User]:i.Private,[i.Group]:i.Private,[i.WorkspaceLink]:i.Workspace};function bs(s,a=[]){const n=new Set(a.filter(d=>d.allowed).map(d=>d.recipient));if(!s||(s in he&&(s=he[s]),n.has(s)))return 0;const l=n.has(i.Private)||n.has(i.Workspace),c=n.has(i.Link)||n.has(i.Marketplace);return s===i.Marketplace&&c?2:!c&&l?3:4}function fe(s){switch(s){case 0:case 1:return x({id:"gizmo.appeals.publishBlockedTitle",defaultMessage:"Your changes couldn’t be published"});case 2:return x({id:"gizmo.appeals.removedFromMarketplaceTitle",defaultMessage:"Your GPT has been removed from the marketplace"});case 3:return x({id:"gizmo.appeals.removedFromPublicTitle",defaultMessage:"Your GPT has been removed from public view"});case 5:return x({id:"gizmo.appeals.recategorizedTitle",defaultMessage:"Your GPT has been recategorized"});default:Me(s)}}function ws(s){switch(s){case"profile_picture":return x({id:"gizmo.appeals.profilePictureFieldName",defaultMessage:"Profile Picture"});case"gizmo_name":return x({id:"gizmo.appeals.gizmoNameFieldName",defaultMessage:"Name"});case"gizmo_description":return x({id:"gizmo.appeals.gizmoDescriptionFieldName",defaultMessage:"Description"});case"gizmo_instructions":return x({id:"gizmo.appeals.gizmoInstructionsFieldName",defaultMessage:"Instructions"});case"gizmo_welcome_message":return x({id:"gizmo.appeals.gizmoWelcomeMessageFieldName",defaultMessage:"Welcome Message"});case"custom_actions":return x({id:"gizmo.appeals.customActionsFieldName",defaultMessage:"Custom Actions"});case"conversation_starter":return x({id:"gizmo.appeals.conversationStarterFieldName",defaultMessage:"Conversation Starter"});case"file":return x({id:"gizmo.appeals.fileFieldName",defaultMessage:"File"});case"gizmo_combined_content":return x({id:"gizmo.appeals.gizmoCombinedContentFieldName",defaultMessage:"Overall GPT Config"})}}function Ms(s){switch(s){case i.Private:case i.Workspace:return x({id:"gizmo.appeals.privateRecipientModerationText",defaultMessage:"Your GPT can’t be updated because it violates our {usagePolicyLink}Usage Policies{usagePolicyLink}."});case i.Link:return x({id:"gizmo.appeals.linkRecipientModerationText",defaultMessage:"Your GPT can’t be shared publicly because it violates our {usagePolicyLink}Usage Policies{usagePolicyLink}."});case i.Marketplace:return x({id:"gizmo.appeals.marketplaceRecipientModerationText",defaultMessage:"Your GPT can’t appear in the Explore GPTs page because it violates our {usagePolicyLink}Usage Policies{usagePolicyLink}."});default:Me(s)}}function Ce({sharingRecipient:s,moderatedFields:a,appealAvailable:n}){const l=a.length;return e.jsxs(e.Fragment,{children:[e.jsxs("p",{children:[e.jsx(r,{...Ms(s),values:{usagePolicyLink:c=>e.jsx(xe,{target:"_blank",href:"https://openai.com/policies/usage-policies",rel:"noreferrer",children:c})}})," ",l>0&&e.jsx(r,{id:"gizmo.appeals.seeBelowForSpecificIssues",defaultMessage:`{numModeratedFields, plural,
              one {See below for the specific issue:}
              other {See below for the specific issues:}
            }`,values:{numModeratedFields:l}})]}),l>0&&a?.map(c=>e.jsxs(e.Fragment,{children:[e.jsx("p",{className:"font-bold",children:e.jsx(r,{...ws(c.name)})}),e.jsx("ul",{className:"list-disc ps-5",children:c.reasons.map(d=>e.jsxs("li",{children:[d.description," ",d.link?e.jsx(xe,{href:d.link,target:"_blank",rel:"noreferrer",children:e.jsx(r,{id:"gizmo.appeals.learnMore",defaultMessage:"Learn more"})}):""]},d.description))})]})),n&&e.jsx("p",{children:e.jsx(r,{id:"gizmo.appeals.appealAvailableText",defaultMessage:"Alternatively you may appeal this decision and we will get back to you as soon as possible. Or you can publish to “Only me” and use this GPT privately."})})]})}function Ss({gizmoId:s,sharingRecipient:a,categories:n,moderationType:l,sharingTargets:c,appealAvailable:d,onClose:v,onAppealSubmitted:j}){const f=D(),[h,B]=N.useState(""),[k,b]=N.useState(0),[T,o]=N.useState(!1),C=se(),w=async()=>{o(!0);try{await ae.postGizmoAppeal(C,s,h,a,n),b(2),j?.()}finally{o(!1)}},M=Ne(a,c),E=M?.length??0,u=ve();if(E==0&&u?.isEnterprisey())return e.jsx(L,{testId:"modal-gizmo-appeal-available",title:f.formatMessage(fe(l)),isOpen:!0,onClose:v,showCloseButton:!0,type:"warning",primaryButton:e.jsx(G.Button,{color:"primary",onClick:v,children:e.jsx(r,{id:"wEsAOU",defaultMessage:"OK"})}),children:e.jsx("p",{className:"text-sm",children:e.jsx(r,{id:"gizmo.appeals.workspaceSettingsMessage",defaultMessage:"Access to your GPT has been reduced by your workspace's GPT sharing settings. An owner of the workspace can change these settings in the workspace settings page."})})});switch(k){case 0:return e.jsx(L,{testId:"modal-gizmo-appeal-available",title:f.formatMessage(fe(l)),isOpen:!0,onClose:v,showCloseButton:!0,primaryButton:e.jsx(G.Button,{color:"primary",onClick:v,children:e.jsx(r,{id:"gizmo.appeals.contunueButton",defaultMessage:"Continue"})}),secondaryButton:d?e.jsx(G.Button,{onClick:()=>b(1),children:e.jsx(r,{id:"gizmo.appeals.appealButton",defaultMessage:"Appeal"})}):void 0,type:"warning",children:e.jsx("div",{className:"flex flex-col gap-2 text-sm",children:e.jsx(Ce,{sharingRecipient:a,moderatedFields:M??[],appealAvailable:d})})});case 1:return e.jsx(L,{testId:"modal-gizmo-appeal-form",title:f.formatMessage({id:"gizmo.appeals.appealModalTitle",defaultMessage:"Appeal"}),isOpen:!0,onClose:v,showCloseButton:!0,shouldIgnoreClickOutside:!0,primaryButton:e.jsx(G.Button,{color:"primary",onClick:w,disabled:T||h.trim().length===0,children:e.jsx(r,{id:"gizmo.appeals.submitAppealButton",defaultMessage:"Submit"})}),secondaryButton:e.jsx(G.Button,{onClick:()=>b(0),children:e.jsx(r,{id:"gizmo.appeals.backButton",defaultMessage:"Back"})}),type:"warning",children:e.jsxs("div",{className:"flex flex-col gap-2 text-sm",children:[e.jsx("p",{children:e.jsx(r,{id:"gizmo.appeals.appealReasonText",defaultMessage:"Please provide a reason for why you believe this GPT doesn’t violate our policies and should be published"})}),e.jsx(ks,{value:h,onChange:y=>B(y.target.value)})]})});case 2:return e.jsx(e.Fragment,{})}}function Ns({onClose:s}){const a=D();return e.jsx(L,{testId:"modal-gizmo-appeal-submitted",title:a.formatMessage({id:"gizmo.appeals.appealSubmittedModalTitle",defaultMessage:"Appeal submitted"}),isOpen:!0,onClose:s,showCloseButton:!0,primaryButton:e.jsx(G.Button,{color:"primary",onClick:s,children:e.jsx(r,{id:"gizmo.appeals.closeButton",defaultMessage:"Close"})}),type:"success",children:e.jsx("div",{className:"flex flex-col gap-2 text-sm",children:e.jsx("div",{children:e.jsx(r,{id:"gizmo.appeals.appealSubmittedText",defaultMessage:"Your appeal has been submitted. We will get back to you as soon as possible."})})})})}function _s({gizmoId:s,onClose:a}){const{data:n}=Je(s,!0),l=se(),c=async()=>{await ae.postGizmoCancelAppeal(l,s)};return e.jsx(L,{testId:"modal-gizmo-appeal-sent",isOpen:!0,onClose:qe,primaryButton:e.jsx(G.Button,{color:"primary",onClick:()=>{c(),a?.()},children:e.jsx(r,{id:"gizmo.appeals.cancelAppealButton",defaultMessage:"Cancel appeal"})}),type:"warning",children:e.jsxs("div",{className:"flex flex-col gap-2 text-sm",children:[e.jsx("h2",{className:"text-lg font-semibold",children:e.jsx(r,{id:"gizmo.appeals.appealReviewingHeader",defaultMessage:"Reviewing your appeal"})}),e.jsx("p",{children:e.jsx(r,{id:"gizmo.appeals.appealSentModalText",defaultMessage:"During the review you can continue using “{gizmoName}” as your private GPT, but won’t be able to update it or share it with others.",values:{gizmoName:n?.gizmo.display.name}})})]})})}function Ks({appealState:s,onAppealClose:a,onAppealSubmitted:n}){const{value:l}=ye("4226692983"),[c,d]=N.useState(!1);return c?e.jsx(Ns,{onClose:()=>{d(!1),n?.()}}):e.jsxs(e.Fragment,{children:[s?.showModal==2&&e.jsx(_s,{gizmoId:s.gizmoId,onClose:a}),s?.showModal==1&&e.jsx(Ss,{gizmoId:s.gizmoId,sharingRecipient:s.sharingRecipient,categories:s.categories,moderationType:s.moderationType,sharingTargets:s.sharingTargets,appealAvailable:l,onClose:()=>a?.(),onAppealSubmitted:()=>d(!0)})]})}const Re=Ke(()=>De(()=>import("./nfqmor1q4t3d1rq6.js"),__vite__mapDeps([0,1])).then(s=>s.DirectorySyncResourceManagedIndication)),Ps=s=>s?[P,q,ds]:[P,q];function Cs(s,a){return s.type===m.USER?s.user_id===a.user_id:s.type===m.GROUP?s.group_id===a.group_id:s.type===a.type}const Rs={[m.USER]:i.User,[m.GROUP]:i.Group,[m.WORKSPACE]:i.Workspace,[m.ALL]:i.Marketplace};function zs(s){const a=Rs[s.type];if(!a)throw new Error("Unknown sharing subject type: "+s.type);return{...s,type:a}}function Ds({gizmo:s,publishedGizmo:a,updateGizmo:n,promoteGizmo:l,appealGizmo:c,setAppealState:d,showActionsModal:v,shareOnly:j,onClose:f,workspaceOwner:h=!1}){const B=ke(),k=D(),b=be(),T=Qe(),o=T?.data?.name??"your workspace",C=$e(),w=Ze(),[M,E]=N.useState(void 0);N.useEffect(()=>{if(M==null)if(a?.gizmo.display.categories&&a?.gizmo.display.categories.length>0){const t=w.data?.categories.find(p=>p.id===a?.gizmo.display.categories[0]);t&&E(t)}else w.data!=null&&E(w.data.categories[w.data.categories.length-1])},[w.data,M,a]);const[u,te]=N.useState(s.sharingRecipient??i.Private),[y,W]=N.useState(s.sharing?.subjects??[]),[ie,Be]=N.useState(null),[re,ne]=N.useState(!1),{value:Fe}=ye("2687575887"),Ue=N.useCallback(()=>!Y(s.sharing?.subjects,y)||s.sharingRecipient!==u,[s.sharing,s.sharingRecipient,u,y]),A=se(),le=es(s,u,M?.id??void 0),Ge=le.includes(ss.MissingPublicActionPrivacyPolicyURL),Le=s.tools.find(t=>t.type===Ye.JIT_PLUGIN&&!t.metadata.privacy_policy_url);if(ie)return e.jsx(As,{publishedGizmo:ie,sharing:{recipient:u,subjects:y},workspaceName:o,onClose:f});function Ie(t){y.find(p=>Cs(p,t))||W([...y,t])}const F=as(y);function V(t){const p=y.filter(R=>[m.WORKSPACE,m.ALL].indexOf(R.type)===-1);t!=null&&p.push(t),W(p)}function Ee(t){switch(te(t),t){case i.Marketplace:case i.Link:V({type:m.ALL,capabilities:P});break;case i.Workspace:case i.WorkspaceLink:V({type:m.WORKSPACE,capabilities:P});break;default:V(null)}}function oe(t){F!=null&&W(y.map(p=>p===F?{...p,capabilities:t}:p))}function We(t,p,R){return t.type===m.USER&&t.user_id.indexOf("__")===-1?{...t,user_id:t.user_id+"__"+T?.getWorkspaceId()}:t}async function Oe(t,p){if(re)return;if(t&&!p)throw new Error("Cannot share a gizmo that hasn't been promoted before");if(!M)return;ne(!0);let U=y.map(We).map(zs);if(U=xs(u,U,F?.capabilities??P),h)return!T||!p?(b.warning("Unable to change sharing settings"),f()):(await He.safePost("/accounts/{account_id}/gpts/{gizmo_id}/share",{parameters:{path:{account_id:T.id,gizmo_id:p}},requestBody:{sharing:U}}),b.success(k.formatMessage({id:"SWSzcY",defaultMessage:"Sharing settings updated"})),A.invalidateQueries({queryKey:["workspace"]}),f());if(t){if(!p||!a)throw new Error("No gizmo ID to share");try{const _={sharing:U};M&&(_.categories=[M.id]);const Q=await ae.shareGizmo(p,_);Q.error?X(u,Q.sharing_targets)?(d?.({gizmoId:a.gizmo.id,sharingRecipient:u,categories:a.gizmo.display.categories,moderationType:Pe.PublishBlocked,sharingTargets:Q.sharing_targets,showModal:_e.AppealAvailable}),f()):b.warning(k.formatMessage({id:"tmIKmp",defaultMessage:"Unable to share GPT"})):(A.setQueryData(["gizmo",{gizmoId:a.gizmo.id},{draft:!1}],de=>Q.resource),n?.(de=>({...de,sharingRecipient:u})),b.success(k.formatMessage({id:"SWSzcY",defaultMessage:"Sharing settings updated"})),f())}catch{return b.warning(k.formatMessage({id:"dKC65l",defaultMessage:"Failed to update sharing settings"})),f()}}else{if(l){const _=await l({subjects:U,recipient:u},M.id);p||(p=_?.gizmo.id),Be(_??null),n?.({liveVersion:_?.gizmo.live_version??void 0})}A.invalidateQueries({queryKey:["gizmo",{gizmoId:p}]})}ne(!1),A.invalidateQueries({queryKey:["gizmos"]}),A.refetchQueries({queryKey:["gizmos","discovery"]}),A.refetchQueries({queryKey:["gizmo",{gizmoId:p}]}),A.invalidateQueries({queryKey:["gizmo","userActionSettings",{gizmoId:p}]}),A.invalidateQueries({queryKey:["workspace"]}),n?.({sharing:{recipient:u,subjects:y},sharingRecipient:u},!1)}const ce=!a||Fs(a.gizmo.author.user_id.split("__")[0],C?.id);return e.jsx(L,{testId:"modal-share-gizmo",type:"success",className:"max-w-[555px]",size:"custom",isOpen:!0,onClose:f,primaryButton:X(u,s.sharingTargets)?e.jsx(O,{onClick:()=>c(u,M?.id),children:e.jsx(r,{id:"HRzqKK",defaultMessage:"Appeal"})}):e.jsx(O,{onClick:()=>Oe(j,a?.gizmo.id),loading:re,disabled:le.length>0||!z(u,s.sharingTargets),children:j?e.jsx(r,{id:"BEKjVh",defaultMessage:"Save"}):e.jsx(r,{id:"24j5ts",defaultMessage:"Update"})}),secondaryButton:e.jsxs(e.Fragment,{children:[Ue()&&e.jsx("div",{className:"text-token-text-secondary absolute start-6 bottom-8 text-sm",children:e.jsx(r,{id:"9CkgC4",defaultMessage:"Unsaved changes"})}),a&&e.jsx(O,{color:"secondary",onClick:t=>Se(B,a,b,t,k.formatMessage({id:"KdDqMm",defaultMessage:"Copied link to clipboard"})),children:e.jsx(r,{id:"wvL15a",defaultMessage:"Copy link"})})]}),title:k.formatMessage({id:"7JggXH",defaultMessage:"Share GPT"}),showCloseButton:!0,children:e.jsxs("div",{className:"flex flex-col space-y-4",children:[e.jsx(Bs,{onAdd:t=>Ie(t),publishedGizmo:a}),e.jsx("h3",{className:"text-base font-semibold",children:e.jsx(r,{id:"bNQXcV",defaultMessage:"Share with..."})}),e.jsxs("div",{className:"max-h-[200px] space-y-2 overflow-y-auto",children:[e.jsxs("div",{className:"mb-4 flex flex-row items-center justify-between space-x-3",children:[e.jsx("div",{className:"shrink-0 grow-0 self-start",children:ce?e.jsx(ts,{user:C,size:"gizmoConversation",roundedStyle:"rounded-full"}):e.jsx(ue,{name:a.gizmo.author.display_name??"User",initialsCount:2,size:"gizmoConversation"})}),e.jsx("div",{className:"grow text-base font-semibold",children:ce?e.jsxs("div",{className:"flex flex-col",children:[e.jsx(r,{id:"U7tzof",defaultMessage:"{userName} (you)",values:{userName:C?.name}}),e.jsx("span",{className:"text-token-text-secondary -mt-1 text-sm",children:C?.email})]}):e.jsx(r,{id:"scRZqV",defaultMessage:"{userName} (builder)",values:{userName:a.gizmo.author.display_name}})})]}),y.map((t,p)=>$(t)&&e.jsxs("div",{className:"mb-4 flex flex-row items-center justify-between space-x-3",children:[e.jsx(ue,{name:t.type===m.GROUP?t.group_name:`${t.user_name} ${t.user_email}`,initialsCount:t.type===m.USER?2:1,size:"gizmoConversation",className:ee("shrink-0 grow-0",t.type===m.USER&&"self-start")}),e.jsxs("div",{className:"flex grow flex-col",children:[e.jsxs("span",{className:"flex flex-row",children:[e.jsx("span",{className:"me-2 text-base font-semibold",children:t.type===m.GROUP?t.group_name:t.user_name}),t.type===m.GROUP&&t.is_scim_managed&&e.jsx(Re,{})]}),t.type===m.USER&&e.jsx("span",{className:"text-token-text-secondary -mt-1 text-sm",children:t.user_email})]}),e.jsxs(S.Root,{children:[e.jsxs(S.Trigger,{className:"text-token-text-secondary text-base whitespace-nowrap",children:[e.jsx(r,{...K(t.capabilities)}),e.jsx(Z,{className:"icon-md"})]}),e.jsx(S.Portal,{children:e.jsxs(S.Content,{className:"max-w-[320px]",children:[Ps(Fe).map((R,U)=>e.jsx(J,{capabilities:R,selected:Y(R,t.capabilities),onClick:()=>{W(y.map(_=>_===t?{..._,capabilities:R}:_))}},U)),e.jsx(S.Separator,{className:"my-2"}),e.jsx(S.Item,{onClick:()=>W(y.filter(R=>R!==t)),color:"danger",icon:is,children:e.jsx(r,{id:"NU0BOB",defaultMessage:"Remove"})})]})})]})]},p))]}),e.jsx("hr",{className:"border-token-border-medium"}),e.jsx("h3",{className:"text-base font-semibold",children:e.jsx(r,{id:"uqD7Y8",defaultMessage:"Access"})}),e.jsxs("div",{className:"-ms-3.5 flex flex-row items-center justify-between space-x-3",children:[e.jsxs(g.Root,{value:u,onValueChange:t=>Ee(t),children:[e.jsxs(g.Trigger,{children:[e.jsx(g.Value,{}),e.jsx(g.Icon,{})]}),e.jsx(g.Portal,{children:e.jsxs(g.Content,{children:[e.jsxs(g.Group,{children:[e.jsx(g.Label,{children:e.jsx(r,{id:"YIQwaP",defaultMessage:"Private"})}),u===i.User?e.jsx(g.Item,{value:i.User,children:e.jsx(I,{shareLevel:i.User,workspaceName:o})}):e.jsx(g.Item,{value:i.Private,children:e.jsx(I,{shareLevel:i.Private,workspaceName:o})})]}),e.jsx(g.Separator,{}),e.jsx(pe,{label:k.formatMessage({id:"n0m61x",defaultMessage:"Your workspace has disabled sharing with the workspace."}),side:"bottom",disabled:z("workspace",s.sharingTargets),children:e.jsxs(g.Group,{children:[e.jsx(g.Label,{children:o}),e.jsx(g.Item,{value:i.WorkspaceLink,disabled:!z(i.WorkspaceLink,s.sharingTargets)&&!z(i.Workspace,s.sharingTargets),children:e.jsx(I,{shareLevel:i.WorkspaceLink,workspaceName:o})}),e.jsx(g.Item,{value:i.Workspace,disabled:!z("workspace",s.sharingTargets),children:e.jsx(I,{shareLevel:i.Workspace,workspaceName:o})})]})}),e.jsx(g.Separator,{}),e.jsx(pe,{label:k.formatMessage({id:"IHnort",defaultMessage:"Your workspace has disabled public sharing."}),side:"bottom",disabled:z("marketplace",s.sharingTargets),children:e.jsxs(g.Group,{children:[e.jsx(g.Label,{children:e.jsx(r,{id:"PjY9bi",defaultMessage:"Public"})}),e.jsx(g.Item,{value:i.Link,disabled:!z("link",s.sharingTargets),children:e.jsx(I,{shareLevel:i.Link,workspaceName:o})}),e.jsx(g.Item,{disabled:!z("marketplace",s.sharingTargets),value:i.Marketplace,children:e.jsx(I,{shareLevel:i.Marketplace,workspaceName:o})})]})})]})})]}),u!==i.Private&&u!==i.User&&e.jsxs(S.Root,{children:[e.jsxs(S.Trigger,{className:"text-token-text-secondary text-base whitespace-nowrap",children:[F==null?e.jsx(r,{...K(P)}):e.jsx(r,{...K(F.capabilities)}),e.jsx(Z,{className:"icon-md"})]}),e.jsx(S.Portal,{children:e.jsxs(S.Content,{className:"max-w-[320px]",children:[e.jsx(J,{onClick:()=>oe(P),capabilities:P,selected:Y(F?.capabilities,P)}),u!==i.Marketplace&&u!==i.Link&&e.jsx(J,{onClick:()=>oe(q),capabilities:q,selected:Y(F?.capabilities,q)})]})})]})]}),Ge&&e.jsx("div",{className:"text-xs text-red-500",children:e.jsx(r,{id:"/iw1Iv",defaultMessage:"Public actions require valid privacy policy URLs. Click <fixlink>here</fixlink> to update.",values:{fixlink:t=>e.jsx("button",{onClick:()=>{v?.(Le?.metadata.action_id),f()},className:"underline",children:t})}})}),(u===i.Marketplace||u===i.Workspace)&&(z(u,s.sharingTargets)?e.jsx(Ae,{gizmo:s,category:M?.id,categories:w.data?.categories,onCategoryChange:t=>E(t)}):X(u,s.sharingTargets)?e.jsx("div",{className:"pb-2 text-xs text-red-500",children:e.jsx(Ce,{sharingRecipient:u,moderatedFields:Ne(u,s.sharingTargets)??[],appealAvailable:!0})}):e.jsx("div",{className:"pb-2 text-xs text-red-500",children:e.jsx(r,{id:"BzqqKH",defaultMessage:"Your workspace's settings don't allow this level of access. An owner of the workspace can change this setting in the workspace's GPTs settings."})}))]})})}const ze=we({private:{id:"pSXBWQ",defaultMessage:"Invite-only"},user:{id:"pSXBWQ",defaultMessage:"Invite-only"},group:{id:"pSXBWQ",defaultMessage:"Invite-only"},workspace_link:{id:"Giaxt1",defaultMessage:"Anyone at {workspaceName} with the link"},workspace:{id:"XLHaTU",defaultMessage:"{workspaceName}"},link:{id:"uP1+Ri",defaultMessage:"Anyone with the link"},marketplace:{id:"82Ilac",defaultMessage:"GPT Store"}}),Ts=we({workspace:{id:"1kpopF",defaultMessage:"Published to {workspaceName}"},marketplace:{id:"hdTRpJ",defaultMessage:"Published to GPT Store"}});function K(s){return s.can_write?x({id:"SubCqD",defaultMessage:"Can edit"}):s.can_view_config?x({id:"V6OjbX",defaultMessage:"Can view settings"}):s.can_read?x({id:"/0j34W",defaultMessage:"Can chat"}):x({id:"x2E8ET",defaultMessage:"Unknown"})}function J({capabilities:s,selected:a,onClick:n}){let l=null;s.can_write?l=hs:s.can_view_config?l=fs:s.can_read&&(l=js);const c=s.can_write?e.jsx(r,{id:"wKFMT1",defaultMessage:"Edit settings, duplicate, and chat"}):s.can_view_config?e.jsx(r,{id:"Y/J4TZ",defaultMessage:"See settings, duplicate, and chat"}):s.can_read?e.jsx(r,{id:"PvgEQP",defaultMessage:"Chat with this GPT only"}):null;return e.jsxs(S.Item,{className:"flex h-auto flex-row items-center px-3 py-3",onClick:n,icon:l,children:[e.jsxs("div",{className:"me-1 flex grow flex-col",children:[e.jsx("span",{className:"mb-0.5 text-base leading-tight",children:e.jsx(r,{...K(s)})}),e.jsx("span",{className:"text-token-text-secondary text-xs",children:c})]}),e.jsx(us,{className:ee("icon-lg shrink-0",!a&&"invisible")})]})}const Te={private:H,user:H,group:H,workspace_link:me,workspace:ns,link:me,marketplace:rs};function I({shareLevel:s,workspaceName:a,hasInviteSharing:n=!0}){(s===i.User||s===i.Group)&&(s=i.Private);const l=Te[s];return e.jsxs("div",{className:"flex flex-row items-center gap-3 text-sm",children:[e.jsx(l,{className:"icon-md-heavy text-token-text-secondary"}),e.jsx("div",{className:"pt-px text-start",children:!n&&s===i.Private?e.jsx(r,{id:"vVJhYB",defaultMessage:"Only me"}):e.jsx(r,{...ze[s],values:{workspaceName:a}})})]})}function As({publishedGizmo:s,sharing:a,workspaceName:n,onClose:l}){const c=ke(),d=a.recipient,v=Te[d],j=D(),f=be();return e.jsxs(L,{testId:"modal-gizmo-updated",isOpen:!0,onClose:l,showCloseButton:!0,className:"w-[304px]",title:e.jsx(r,{id:"5CEceY",defaultMessage:"GPT Updated"}),primaryButton:e.jsx(O,{onClick:()=>{window.location.href=`/g/${s.gizmo.id}`},children:e.jsx(r,{id:"RF75o5",defaultMessage:"View GPT"})}),secondaryButton:e.jsx(O,{color:"secondary",onClick:h=>Se(c,s,f,h,j.formatMessage({id:"KdDqMm",defaultMessage:"Copied link to clipboard"})),children:e.jsx(r,{id:"9hLOl9",defaultMessage:"Copy link"})}),type:"success",children:[e.jsx(Ae,{gizmo:{profilePictureUrl:s.gizmo.display.profile_picture_url??void 0,name:s.gizmo.display.name}}),a.subjects.filter(h=>$(h)).length>0&&e.jsxs("div",{className:"my-4",children:[e.jsx("h4",{className:"text-token-text-secondary text-xs font-semibold",children:e.jsx(r,{id:"/paYH9",defaultMessage:"Shared with"})}),a.subjects&&a.subjects.map((h,B)=>$(h)&&e.jsxs("div",{className:"flex flex-row items-center justify-between space-x-3 py-2",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-base font-semibold",children:h.type===m.GROUP?h.group_name:h.user_name}),h.type===m.USER&&e.jsxs(e.Fragment,{children:[e.jsx("br",{}),e.jsx("span",{className:"text-token-text-secondary text-sm",children:h.user_email})]})]}),e.jsx("span",{className:"text-token-text-secondary",children:e.jsx(r,{...K(h.capabilities)})})]},B))]}),e.jsxs("div",{className:"my-4",children:[e.jsx("h4",{className:"text-token-text-secondary text-xs font-semibold",children:e.jsx(r,{id:"q9XNZ7",defaultMessage:"Access"})}),e.jsxs("div",{className:"ms-[3px] flex flex-row items-center py-3 text-start text-base font-semibold",children:[e.jsx(v,{className:"md:icon-lg me-3 h-6 w-6 shrink-0"}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"font-semibold",children:e.jsx(r,{...Ts[d]??ze[d],values:{workspaceName:n}})}),(d===i.Workspace||d===i.Marketplace)&&e.jsx("span",{className:"text-token-text-secondary text-xs"})]})]})]})]})}function Ae({gizmo:s,category:a,categories:n,onCategoryChange:l}){const{data:c,isLoading:d}=ps(),v=n?.find(j=>j.id===a);return e.jsxs("div",{children:[e.jsxs("div",{className:ee("bg-token-main-surface-secondary mb-[1px] flex flex-row items-center space-x-2 p-4",d&&"invisible",n?"rounded-t-lg":"rounded-lg"),children:[e.jsx(vs,{isFirstParty:!1,className:"h-11 w-11",src:s.profilePictureUrl}),e.jsxs("div",{className:"flex grow flex-col space-y-0",children:[e.jsx("span",{className:"text-base font-semibold",children:s.name}),e.jsx(ms,{builderName:c?.display_name,builderUrl:c?.website_url,socials:[c?.socials.linkedin,c?.socials.github,c?.socials.twitter].filter(j=>j!=null),className:"text-token-text-secondary text-xs"})]})]}),n&&e.jsxs("div",{className:"bg-token-main-surface-secondary flex min-h-[56px] flex-row items-center justify-between space-x-2 rounded-b-lg px-4 text-base",children:[e.jsx("span",{className:"font-semibold",children:e.jsx(r,{id:"JcA4/t",defaultMessage:"Category"})}),e.jsx("div",{className:"text-token-text-secondary",children:l?e.jsx(gs,{size:"small",triggerButton:e.jsxs("button",{className:"flex items-center gap-1",children:[v?.title,e.jsx(Z,{className:"icon-md"})]}),children:n.map((j,f)=>e.jsx(S.Item,{onClick:()=>l(j),children:j.title},f))}):e.jsx("span",{className:"text-token-text-secondary",children:v?.title})})]})]})}function Bs({onAdd:s,publishedGizmo:a}){const n=D(),l=ve(),[c,d]=N.useState(""),j=ls(l?.id,0,c,5).data?.items.filter(o=>o.account_user_id!==a?.gizmo.author.user_id),{data:f}=Xe({queryKey:[l?.id,"groups","filtered",c],queryFn:()=>Ve.getWorkspaceGroups(l.id,{query:c,orderby:"@score"}),enabled:c.trim()!==""&&l!=null&&!!l.getWorkspaceId()});function h(o,C,w){s({type:m.GROUP,group_id:o,group_name:C,capabilities:{...P},is_scim_managed:w}),d("")}function B(o,C,w){l&&(s({type:m.USER,user_id:o,user_name:C,user_email:w,capabilities:{...P}}),d(""))}const k=l?.isEnterprisey()?n.formatMessage({id:"xy/AMO",defaultMessage:"Add people and groups from your workspace"}):n.formatMessage({id:"Lh9njB",defaultMessage:"Add people from your workspace"}),{eligible:b,markAsViewed:T}=os(ge.hasSeenMultipleGPTEditorsTooltip);return e.jsx(e.Fragment,{children:e.jsx("div",{className:"flex w-full flex-row space-x-3",children:e.jsx(cs,{announcementKey:ge.hasSeenMultipleGPTEditorsTooltip,show:b,side:"right",align:"center",className:"w-full",sideOffset:0,contentClassName:"z-100",childrenWrapperClassName:"w-full",theme:"bright",dismissOnOutsideClick:!0,badge:"new",description:n.formatMessage({id:"SR33A6",defaultMessage:"You can now add editors to collaborate on your GPTs."}),onDismiss:T,children:e.jsx(ys,{label:k,name:"share-with-input",inputValue:c,onInputChange:d,suggestions:[...j?.map(o=>({id:o.id,className:"flex flex-col rounded-xs p-1 can-hover:hover:bg-token-main-surface-tertiary rounded-xs p-1 text-sm",focusedClassName:"bg-token-main-surface-tertiary",onClick:()=>B(o.account_user_id,o.name,o.email??""),children:e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"w-full font-semibold",children:o.name}),e.jsx("span",{className:"text-token-text-secondary text-sm",children:o.email})]})}))??[],...f?.items.map(o=>({id:o.id,className:"flex flex-col rounded-xs p-1 can-hover:hover:bg-token-main-surface-tertiary rounded-xs p-1 text-sm",focusedClassName:"bg-token-main-surface-tertiary",onClick:()=>h(o.id,o.name,o.is_scim_managed??!1),children:e.jsxs("span",{className:"flex flex-col",children:[e.jsxs("span",{className:"flex flex-row",children:[e.jsx("span",{className:"me-2 font-semibold",children:o.name}),o.is_scim_managed&&e.jsx(Re,{})]}),e.jsx("span",{className:"text-token-text-secondary text-sm",children:e.jsx(r,{id:"r3Rx6X",defaultMessage:"{numMembers, plural, one {1 member} other {# members}}",values:{numMembers:o.num_members}})})]})}))??[]]})})})})}function Fs(s,a){return s===void 0||a===void 0?!1:s.split("__")[0]===a.split("__")[0]}export{_e as A,Ae as G,Pe as M,Ds as S,I as a,Te as b,As as c,Ks as d,qs as g,zs as s};
//# sourceMappingURL=ghc7uc524xjjwk4f.js.map
