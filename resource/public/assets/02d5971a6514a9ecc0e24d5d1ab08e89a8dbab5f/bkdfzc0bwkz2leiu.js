import{ej as m,m as _,f as R,cI as p,cJ as h}from"./i3bl95k8z8nuf4dv.js";import{C as S,d as E,r as o,j as C}from"./msupklk377u8vx8o.js";const f="chatgpt://oauth_complete",b=m(function(){const{pluginId:t,code:i,state:n,error:r,errorDesc:c}=S(),e=E(),u=o.useRef(!1);o.useEffect(()=>{if(u.current===!0)return;u.current=!0;async function d(){const g=`https://chat.openai.com/aip/${t}/oauth/callback`;try{const a=await R.pluginOauthCallback(t,i,g,n);if(a.success)if(a.redirect_path===f)window.location.href=f;else{const s=new URL(p(h.OAUTH_SUCCESS,a.redirect_path),location.origin);s.searchParams.set("oauth_success","true"),e(s.pathname+s.search+s.hash)}else e(p(h.CUSTOM_ERROR,a.redirect_path,a.error??a.message))}catch{e({pathname:"/",search:new URLSearchParams({model:"gpt-4-plugins",loginAip:t,loginSuccess:"false"}).toString()})}}d()},[t,i,n,e]);const l=_();return o.useEffect(()=>{r&&l.danger(`${r}${c?`: ${c}`:""}`,{duration:5})},[r,c,l]),C.jsx("div",{})});export{b as default};
//# sourceMappingURL=bkdfzc0bwkz2leiu.js.map
