import{F as u}from"./d6yct2a6si5momkj.js";import{an as t,aw as c,bR as y,bG as m,bH as F,ac as b,az as E,s as I,bj as A}from"./i3bl95k8z8nuf4dv.js";import{z as S}from"./idf4u2jy0wx0pvap.js";import{i as w}from"./k4oexpwbiepmd1cd.js";import{r as p,v as g}from"./msupklk377u8vx8o.js";let s="",o="";const d=new Set,i={setSessionId(e){s=e},setQuerySessionId(e){d.clear(),o=e},logClick(e,n,a){c.addAction("fannypack.web.click",{index:n,source:a}),t.logEvent("FannyPack: Click result",{fanny_pack_session_id:s,fanny_pack_query_session_id:o,conversationId:e,index:n,source:a}),y.logEvent("chatgpt_fannypack_click",n,{index:String(n),source:a})},logClose(e){t.logEvent("FannyPack: Close",{fanny_pack_session_id:s,source:e})},logOpen(e){m.count(F.DEFAULT,"conversation_search.open",[{key:"source",value:e}]),c.addAction("fannypack.web.open",{source:e}),t.logEvent("FannyPack: Open",{fanny_pack_session_id:s,source:e}),y.logEvent("chatgpt_fannypack_open",e)},logQuery(){c.addAction("fannypack.web.query"),t.logEvent("FannyPack: Query",{fanny_pack_session_id:s,fanny_pack_query_session_id:o}),y.logEvent("chatgpt_fannypack_query")},logQueryError(){c.addError("fannypack.web.query_error"),t.logEvent("FannyPack: Query Error",{fanny_pack_session_id:s,fanny_pack_query_session_id:o})},logQueryMore(){c.addAction("fannypack.web.queryMore"),t.logEvent("FannyPack: Query Fetch More",{fanny_pack_session_id:s,fanny_pack_query_session_id:o}),y.logEvent("chatgpt_fannypack_query_more")},logNoResults(){t.logEvent("FannyPack: No results",{fanny_pack_session_id:s,fanny_pack_query_session_id:o})},logImpression(e,n,a){d.has(a)||(d.add(a),t.logEvent("FannyPack: Impression",{fanny_pack_session_id:s,fanny_pack_query_session_id:o,source:e,index:n,conversation_id:a}))}},q={isActive:!1,query:"",activeIndex:void 0,mouseInteractionsDisabled:!1},_=b(E(()=>({...q}))),f=_.getState,l=_.setState,j={getQuery:(e=f())=>e.query,getMouseInteractionsDisabled:()=>f().mouseInteractionsDisabled},v={setIsActive:e=>{l({isActive:e})},setQuery:e=>{l({query:e})},setActiveIndex:e=>{l(n=>{n.activeIndex=e,n.mouseInteractionsDisabled=!0})},setMouseInteractionsDisabled:e=>{l(n=>{n.mouseInteractionsDisabled=e})}};function h(e){return(w()?e.metaKey:e.ctrlKey)&&e.key==="k"}function C(){const e=I(),{isFannyPackEnabled:n}=S(),a=_(r=>r.isActive),{value:k}=A("1422501431");p.useEffect(()=>{n&&e&&(k?u.setCurrentAccountV2(e):u.setCurrentAccount(e),u.init())},[e,k,n]),p.useEffect(()=>{if(n){const r=P=>{h(P)&&(a?i.logClose("shortcut"):(i.setSessionId(g()),i.logOpen("shortcut")),v.setIsActive(!a))};return window.addEventListener("keydown",r),()=>{window.removeEventListener("keydown",r)}}},[a,n])}function D(){v.setIsActive(!0),i.setSessionId(g()),i.logOpen("button")}const x=Object.freeze(Object.defineProperty({__proto__:null,openFannyPackSearch:D,useInitializeFannyPackHandler:C},Symbol.toStringTag,{value:"Module"}));export{v as F,i as a,j as b,C as c,x as d,_ as u};
//# sourceMappingURL=o3corbdm0u4364l4.js.map
