import{fX as w,m as S,g as _,D as N,r as k,bI as F,ej as A}from"./i3bl95k8z8nuf4dv.js";import{D as P,j as e,ac as W,f as R,d as U,a as D,b as T,M as l}from"./msupklk377u8vx8o.js";import{dC as I}from"./idf4u2jy0wx0pvap.js";import{R as O,I as a,S as v}from"./ed38oe907luc067x.js";import{E as B,R as L,g as $}from"./k60a3qznu8auu1al.js";import{u as q,W as z,i as G,a as Q}from"./mxye9dnv7ug9w78j.js";import{W as X}from"./lvcn6tc5m2pwz77u.js";import"./nq7r3w6gn2bznceb.js";import"./b55502r205nz6n48.js";import"./iw3ol6hqkoiaf3nc.js";import"./hykg4shppjdez6do.js";import"./imu5mwp7oamdtl8y.js";import"./ojiial81qrlp15mq.js";import"./l4zbgkg566u66cq3.js";import"./n737zu6y3rojcst6.js";import"./hu4ci70fpsy8huk5.js";import"./l2bq6yq3kjp539k9.js";import"./umecogb8uj87jcv4.js";import"./fii0gwkgtas4sckd.js";import"./k4oexpwbiepmd1cd.js";import"./np9w83f07wa6edf5.js";import"./gc51ish3otzvnj1w.js";import"./hwl3hzno2kq7obfl.js";import"./hmii3551qscelikg.js";import"./i3xeaua08fnq6vw7.js";import"./gd7xfxa2yqt151v4.js";import"./igftvtdft8b4phs3.js";import"./o2t4lszmsavslsdu.js";import"./gwmfzjrffpu4d2tx.js";import"./me2w1vt1t6ynrd52.js";function H(){const{environmentId:s}=P(),{eligible:i}=I();return i?e.jsx(W,{to:"/codex/onboarding"}):s?e.jsx(J,{environmentId:s}):e.jsx(w,{})}function J({environmentId:s}){const i=R(),o=S(),g=U(),m=D(),{data:n,isLoading:x,isError:h}=q(s),d=n?.secrets??{},E=_(),c=N()?.isEnterprisey(),f=k(E,"627760596")&&c,j=c&&f?"workspace":"private",{mutate:y,isPending:b}=T({mutationFn:t=>z.updateEnvironment(s,t),onSuccess:async t=>{await G(m,s),Q(m,s,t),o.success(i.formatMessage({id:"wham.editEnvironment.environmentUpdatedSuccessfully",defaultMessage:"Environment updated successfully"})),g(`/codex/settings/environment/${s}`)},onError:()=>{o.danger(i.formatMessage({id:"wham.editEnvironment.failedToUpdateEnvironment",defaultMessage:"Failed to update environment"}))}});function M(t){const r=$(t.secrets,d),C=t.envVars.reduce((u,p)=>(u[p.key]=p.value,u),{});y({label:t.label,repos:[t.repositoryId],machine_id:t.machine,setup:t.setupCommands,workspace_dir:t.workspaceDirectory,description:t.description,share_settings:t.share_settings,secrets:r,env_vars:C})}return e.jsx(X,{flex:!0,hideBorder:!0,showSidebar:!1,horizontalPadding:!0,children:x?e.jsx("div",{className:"flex h-full items-center justify-center",children:e.jsx(F,{})}):h?e.jsx("div",{className:"flex h-full items-center justify-center",children:e.jsx(l,{id:"wham.editEnvironment.errorLoadingEnvironment",defaultMessage:"Error loading environment"})}):n?e.jsxs(e.Fragment,{children:[e.jsxs(O,{className:"sticky top-0",children:[e.jsx(a,{label:i.formatMessage({id:"wham.editEnvironment.environments",defaultMessage:"Environments"}),url:"/codex/settings/environments",className:"text-token-text-tertiary"}),e.jsx(v,{}),e.jsx(a,{label:n.label,url:`/codex/settings/environment/${s}`,className:"font-medium"}),e.jsx(v,{}),e.jsx(a,{label:i.formatMessage({id:"wham.editEnvironment.edit",defaultMessage:"edit"}),className:"text-token-text-tertiary"})]}),e.jsx(B,{initialEnvironmentId:s,existingEnvironment:n,initialValues:{label:n?.label,description:n?.description??"",share_settings:n?.share_settings??j,machine:n?.machine_id,repositoryId:n?.repos[0],workspaceDirectory:n?.workspace_dir??"",setupCommands:n?.setup?Array.isArray(n?.setup)?n.setup.join(`
`):n.setup:"",envVars:Object.entries(n?.env_vars??{}).map(([t,r])=>({key:t,value:r})),secrets:Object.keys(d).map(t=>({key:t,value:L,isEditing:!1}))},primaryButtonText:i.formatMessage({id:"wham.editEnvironment.saveEnvironment",defaultMessage:"Save environment"}),onSubmit:M,isPending:b})]}):e.jsx("div",{className:"flex h-full items-center justify-center",children:e.jsx(l,{id:"wham.editEnvironment.environmentNotFound",defaultMessage:"Environment not found"})})})}const _e=()=>[{title:"Codex"}],Ne=A(function(){return e.jsx(H,{})});export{Ne as default,_e as meta};
//# sourceMappingURL=5q1ydjoqvs75e5t7.js.map
