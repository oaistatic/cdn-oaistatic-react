import{f as x,u as g,r as d,j as e,M as c}from"./msupklk377u8vx8o.js";import{L as h,ac as t,ad as f,ae as p}from"./idf4u2jy0wx0pvap.js";import{bI as b,g as j}from"./i3bl95k8z8nuf4dv.js";import{W as y}from"./mxye9dnv7ug9w78j.js";function N(s,{forceRedirect:i}={}){{const o=encodeURIComponent(JSON.stringify({client_redirect_to:location.pathname}));window.open(`https://github.com/apps/chatgpt-connector/installations/select_target?state=${o}`,"_blank")}}function k(){return j(),e.jsx("div",{className:"flex items-center justify-center px-2",children:e.jsxs("button",{className:"text-token-text-primary bg-token-bg-primary hover:bg-token-bg-secondary dark:bg-token-bg-secondary dark:hover:bg-token-bg-primary flex w-full items-center rounded-lg px-2 py-3 text-center text-sm",onClick:()=>N(),children:[e.jsx(p,{"aria-hidden":!0,className:"icon-md me-1"}),e.jsx(c,{id:"wham.accountSelect.addGitHubAccount",defaultMessage:"Add a GitHub account"})]})})}function G({selectedInstallationId:s,setSelectedInstallationId:i}){const o=x(),{data:l,isLoading:r}=g({queryKey:["githubInstallations"],queryFn:()=>y.getGithubInstallations(),staleTime:0,refetchOnWindowFocus:!0,refetchOnMount:!0}),n=d.useMemo(()=>l?.installations??[],[l]),u=n?.find(a=>a.id===s);d.useEffect(()=>{s&&!u?i(null):!s&&n?.length&&i(n[0].id)},[s,u,n,i]);const m=a=>{i(parseInt(a))};return e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx("p",{className:"text-token-text-primary text-sm font-medium",children:e.jsx(c,{id:"wham.accountSelect.githubOrganization",defaultMessage:"GitHub organization"})}),r?e.jsx(h,{className:"h-9 w-52"}):e.jsxs(t.Root,{value:r?"":s?.toString()??"",onValueChange:m,disabled:r,children:[e.jsx(t.Trigger,{className:"border-token-border-heavy bg-token-bg-primary flex w-52 rounded-md border","aria-label":o.formatMessage({id:"wham.accountSelect.openOrganizationMenu",defaultMessage:"Open organization menu"}),children:e.jsxs("div",{className:"flex w-full items-center justify-between",children:[e.jsxs("div",{className:"flex w-0 flex-1 items-center",children:[e.jsx(f,{"aria-hidden":!0,className:"icon-sm me-1.5"}),e.jsx("div",{className:"truncate",children:e.jsx(t.Value,{placeholder:o.formatMessage({id:"wham.accountSelect.selectOrganization",defaultMessage:"Select organization"})})})]}),e.jsx(t.Icon,{})]})}),e.jsx(t.Portal,{children:e.jsxs(t.Content,{align:"start",children:[n.length>0?n.map(a=>e.jsx(t.Item,{value:a.id.toString(),children:a.account_login},a.id)):e.jsxs("div",{className:"p-4 text-center",children:[e.jsx("p",{className:"text-token-text-primary text-sm",children:e.jsx(c,{id:"wham.accountSelect.noGitHubAccounts",defaultMessage:"No GitHub accounts"})}),e.jsx("p",{className:"text-token-text-secondary text-xs",children:e.jsx(c,{id:"wham.accountSelect.noGitHubAccountsDescription",defaultMessage:"Codex requires a GitHub account to work"})})]}),e.jsx(t.Separator,{}),e.jsx(k,{}),r&&e.jsx("div",{className:"flex justify-center p-2",children:e.jsx(b,{})})]})})]})]})}export{G as A,N as h};
//# sourceMappingURL=b55502r205nz6n48.js.map
