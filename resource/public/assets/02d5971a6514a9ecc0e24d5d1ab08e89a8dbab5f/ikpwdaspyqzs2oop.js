const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/fii0gwkgtas4sckd.js","assets/msupklk377u8vx8o.js","assets/idf4u2jy0wx0pvap.js","assets/i3bl95k8z8nuf4dv.js","assets/root-en2soewk.css","assets/conversation-small-irmw3ffz.css","assets/k4oexpwbiepmd1cd.js","assets/np9w83f07wa6edf5.js","assets/gc51ish3otzvnj1w.js","assets/hwl3hzno2kq7obfl.js","assets/hmii3551qscelikg.js","assets/i3xeaua08fnq6vw7.js","assets/gd7xfxa2yqt151v4.js","assets/igftvtdft8b4phs3.js","assets/o2t4lszmsavslsdu.js","assets/gwmfzjrffpu4d2tx.js"])))=>i.map(i=>d[i]);
import{ar as Ee,v as Ce,_ as Re,g as Ie,bj as de,bo as Te,ax as Ae,dE as we,aB as C,bE as Ne,c as ue,an as ye,bR as je,bU as De,fP as ke,af as ze,aC as ae,f as fe}from"./i3bl95k8z8nuf4dv.js";import{f as Pe,j as a,c as Le,r as l,L as me}from"./msupklk377u8vx8o.js";import{aG as Me,aH as Ue,aI as Oe,aJ as Ge,aK as He,aL as qe,aM as Ke,aN as Ve,aO as pe,aP as Fe,aQ as Be,aR as ve,aS as Qe,aT as Xe,aU as $e,aV as We,aW as Ye,aX as Je,aY as Ze,aZ as ge}from"./idf4u2jy0wx0pvap.js";import{G as et}from"./k4oexpwbiepmd1cd.js";const tt=Ce(()=>Re(()=>import("./fii0gwkgtas4sckd.js").then(n=>n.k),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15])).then(n=>n.GizmoConversationOptionsDropdown)),st=new Date(2024,9,11,0);function he(n){je.checkGate("3922476776")||De.abortAllRequests(),ye.logEvent("Load Thread",{threadId:n})}function at({conversation:n,onOpenChange:e,testId:t,inMainScreen:R=!1,isActiveConversation:T}){const s=Pe(),{isUnauthenticated:I}=Ee();return I?null:a.jsx(tt,{conversation:n,onOpenChange:e,inMainScreen:R,isActiveConversation:T,children:a.jsx("button",{className:"text-token-text-secondary hover:text-token-text-primary radix-state-open:text-token-text-secondary flex items-center justify-center transition","data-testid":t,"aria-label":s.formatMessage({id:"idEcXk",defaultMessage:"Open conversation options"}),children:a.jsx(Me,{className:"icon-md"})})})}function ct(n){"use forget";const e=Le.c(75),{conversation:t,className:R,hideOverflowMenu:T,isActive:s,elementRef:I,testId:B}=n,Q=T===void 0?!1:T,X=Ie(),[d,$]=l.useState(!1),[u,xe]=l.useState(!1),[W,oe]=l.useState(!1);let A;e[0]===Symbol.for("react.memo_cache_sentinel")?(A="3922476776",e[0]=A):A=e[0];const{value:f}=de(A);let w;e[1]===Symbol.for("react.memo_cache_sentinel")?(w="232791851",e[1]=w):w=e[1];const{value:N}=de(w),Y=Ue(t.id);let j;e[2]!==Y?(j=Y??{},e[2]=Y,e[3]=j):j=e[3];const{value:ie,source:ne}=j,i=ie===void 0?null:ie,c=ne===void 0?null:ne,Se=Te(t.id,Ae.getRequestId),m=we(Se),_e=Oe(new Date,new Date(t.update_time??0))<Ge(He.Standard),D=qe(t.id);let k;e[4]!==t.update_time?(k=t.update_time&&Ke(new Date(t.update_time),st),e[4]=t.update_time,e[5]=k):k=e[5];const be=k,re=(i===C.STREAMING||i===C.REALTIME)&&_e,J=N&&!s&&!m&&be&&!W&&i===C.UNREAD,z=N&&(m||re)&&!W,Z=!W&&N&&!s,ee=!z&&N&&!s&&(m||re),te=Ve(t.id)&&!s,se=l.useRef(!1);let P;e[6]!==c||e[7]!==i||e[8]!==t.id||e[9]!==s||e[10]!==f?(P=()=>{se.current||f&&(async()=>(se.current=!0,s&&i===C.UNREAD&&(c===ae.SERVER&&await fe.setConversationStatus(t.id),ge(t.id,null)),!s&&c===ae.CLIENT&&i===C.UNREAD&&(await fe.setConversationStatus(t.id,i),ge(t.id,{value:C.UNREAD,source:ae.SERVER})),se.current=!1))()},e[6]=c,e[7]=i,e[8]=t.id,e[9]=s,e[10]=f,e[11]=P):P=e[11];let L;e[12]!==c||e[13]!==i||e[14]!==t.id||e[15]!==s||e[16]!==m||e[17]!==f?(L=[f,s,t.id,i,c,m],e[12]=c,e[13]=i,e[14]=t.id,e[15]=s,e[16]=m,e[17]=f,e[18]=L):L=e[18],l.useEffect(P,L);let M,U;e[19]!==t.id||e[20]!==s?(M=()=>ke(et,{editTitle:o=>{const{serverThreadId:r}=o;(r?r===t.id:s)&&$(!0)}}),U=[t.id,s],e[19]=t.id,e[20]=s,e[21]=M,e[22]=U):(M=e[21],U=e[22]),l.useEffect(M,U);let O;e[23]!==t.conversation_template_id||e[24]!==X?(O=()=>t.conversation_template_id==null?void 0:Ye(X)().data?.gizmos.find(r=>r.resource.gizmo.id===t.conversation_template_id)?.resource,e[23]=t.conversation_template_id,e[24]=X,e[25]=O):O=e[25];const p=Ne(O),le=l.useRef(null),ce=l.useRef(null);let v;e[26]!==t.gizmo_id||e[27]!==d?(v=!d&&pe(t.gizmo_id),e[26]=t.gizmo_id,e[27]=d,e[28]=v):v=e[28];let g;e[29]!==t?(g=o=>{if(!pe(t.gizmo_id))return;const r=ze(ce.current),F=le.current;F&&(F.style.display="none"),o.dataTransfer.setDragImage(r,r.clientWidth/3,r.clientHeight/2),F&&requestAnimationFrame(()=>{F.style.display=""}),o.dataTransfer.effectAllowed="move",Je({kind:"conversation",conversation:t,gizmoId:t.gizmo_id})},e[29]=t,e[30]=g):g=e[30];let h;e[31]!==R||e[32]!==s||e[33]!==u?(h=ue(Fe(s,u),"screen-arch:bg-transparent relative",R),e[31]=R,e[32]=s,e[33]=u,e[34]=h):h=e[34];let G,H;e[35]===Symbol.for("react.memo_cache_sentinel")?(G=()=>{oe(!0)},H=()=>{oe(!1)},e[35]=G,e[36]=H):(G=e[35],H=e[36]);let y;e[37]!==t.id||e[38]!==te?(y=te&&a.jsx(Be,{threadId:t.id}),e[37]=t.id,e[38]=te,e[39]=y):y=e[39];let x;e[40]!==t.id||e[41]!==p?(x=ve(t.id,p),e[40]=t.id,e[41]=p,e[42]=x):x=e[42];let S;e[43]!==t.id||e[44]!==s?(S=o=>{o.metaKey||o.ctrlKey||s||he(t.id)},e[43]=t.id,e[44]=s,e[45]=S):S=e[45];let q;e[46]===Symbol.for("react.memo_cache_sentinel")?(q=()=>{$(!0)},e[46]=q):q=e[46];let K;e[47]===Symbol.for("react.memo_cache_sentinel")?(K={maskImage:"var(--sidebar-mask)"},e[47]=K):K=e[47];let _;e[48]!==t||e[49]!==ee?(_=a.jsx(Qe,{clientThreadId:t.id,historyConversationResponse:t,shouldShowLoadingShimmer:ee,style:K}),e[48]=t,e[49]=ee,e[50]=_):_=e[50];let b;e[51]!==I||e[52]!==x||e[53]!==S||e[54]!==_?(b=a.jsx(me,{to:x,onClick:S,onDoubleClick:q,ref:I,className:"motion-safe:group-active:screen-arch:scale-[98%] motion-safe:group-active:screen-arch:transition-transform motion-safe:group-active:screen-arch:duration-100 flex items-center gap-2 rounded-lg p-2","data-history-item-link":!0,children:_}),e[51]=I,e[52]=x,e[53]=S,e[54]=_,e[55]=b):b=e[55];let E;e[56]!==Z||e[57]!==D||e[58]!==t||e[59]!==p||e[60]!==Q||e[61]!==s||e[62]!==u||e[63]!==d||e[64]!==z||e[65]!==J||e[66]!==B?(E=d?a.jsx("div",{className:"bg-token-sidebar-surface-secondary absolute start-[7px] end-2 top-0 bottom-0 flex items-center",children:a.jsx(Xe,{conversationId:t.id,historyConversationResponse:t,onClose:()=>{$(!1)}})}):J?a.jsx(me,{to:ve(t.id,p),onClick:o=>{o.metaKey||o.ctrlKey||s||he(t.id)},children:a.jsx("div",{className:"absolute top-0 bottom-0 flex items-center gap-1.5 pe-2 ltr:end-0 rtl:start-0",children:a.jsx("div",{className:"h-2 w-2 rounded-full bg-blue-400"})})}):Z&&D.length>0?a.jsx("div",{className:"absolute top-0 bottom-0 flex items-center gap-1.5 pe-2 ltr:end-0 rtl:start-0",children:a.jsx($e,{task:D[0]})}):z?a.jsx("div",{className:"absolute top-0 bottom-0 flex items-center gap-1.5 pe-2 ltr:end-0 rtl:start-0",children:a.jsx(We,{size:16,className:"text-token-text-primary"})}):!Q&&a.jsx("div",{className:ue("absolute top-0 bottom-0 inline-flex items-center gap-1.5 pe-2 ltr:end-0 rtl:start-0",s||u?"flex":"can-hover:not-group-hover:opacity-0 group-focus-within:opacity-100! group-hover:opacity-100! group-focus:opacity-100! focus-within:opacity-100! focus:opacity-100!"),ref:le,children:a.jsx(at,{isActiveConversation:s,conversation:t,onOpenChange:o=>{xe(o),o&&ye.logEvent("Conversation History Item Open Menu",{conversationId:t.id})},testId:`${B}-options`})}),e[56]=Z,e[57]=D,e[58]=t,e[59]=p,e[60]=Q,e[61]=s,e[62]=u,e[63]=d,e[64]=z,e[65]=J,e[66]=B,e[67]=E):E=e[67];let V;return e[68]!==v||e[69]!==g||e[70]!==h||e[71]!==y||e[72]!==b||e[73]!==E?(V=a.jsxs("div",{draggable:v,onDragStart:g,onDragEnd:ot,ref:ce,className:h,onMouseEnter:G,onMouseLeave:H,children:[y,b,E]}),e[68]=v,e[69]=g,e[70]=h,e[71]=y,e[72]=b,e[73]=E,e[74]=V):V=e[74],V}function ot(){Ze()}export{at as G,ct as H};
//# sourceMappingURL=ikpwdaspyqzs2oop.js.map
