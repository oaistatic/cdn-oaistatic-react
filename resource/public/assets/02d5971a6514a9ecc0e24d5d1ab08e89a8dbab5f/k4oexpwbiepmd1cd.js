import{fK as B,an as K,aw as S,m as D,g as w,dw as L,cP as x,fL as z,fM as E,fN as R,ax as T,bQ as F,bW as O,bY as P,am as G,o as I,fF as U,fO as Z}from"./i3bl95k8z8nuf4dv.js";import{K as e,w as a,x as V,y as N,z as H,A as W,E as _,U as k,G as J,H as C,J as Q}from"./idf4u2jy0wx0pvap.js";import{c as Y}from"./np9w83f07wa6edf5.js";import{r as $,g as j}from"./msupklk377u8vx8o.js";const q=/```.*?\n([\s\S]+?)\n?```[^`]*$/gms;function h(){return U()||Z()}const X={[e.Comma]:",",[e.Enter]:"⏎",[e.Escape]:"Esc",[e.ArrowUp]:"↑",[e.ArrowDown]:"↓",[e.ArrowLeft]:"←",[e.ArrowRight]:"→",[e.Backspace]:"⌫",[e.Delete]:"⌦",[e.Tab]:"⇥",[e.Control]:"Ctrl",[e.Shift]:"Shift"};function ee(o){switch(o){case e.Mod:return h()?"⌘":"Ctrl";case e.Meta:return h()?"⌘":"Win";default:return X[o]}}const ce=o=>o.map(t=>ee(t)??t),n=j({newChat:{id:"keyboardActions.newChat",defaultMessage:"Open new chat"},focusPromptTextarea:{id:"keyboardActions.focusPromptTextarea",defaultMessage:"Focus chat input"},copyLastCodeBlock:{id:"keyboardActions.copyLastCodeBlock",defaultMessage:"Copy last code block"},copyLastResponse:{id:"keyboardActions.copyLastResponse",defaultMessage:"Copy last response"},toggleCustomInstructions:{id:"keyboardActions.toggleCustomInstructions",defaultMessage:"Set custom instructions"},navigationToggle:{id:"keyboardActions.navigationToggle",defaultMessage:"Toggle sidebar"},deleteChat:{id:"keyboardActions.deleteChat",defaultMessage:"Delete chat"},zoomIn:{id:"keyboardActions.zoomIn",defaultMessage:"Zoom in"},zoomOut:{id:"keyboardActions.zoomOut",defaultMessage:"Zoom out"},resetZoom:{id:"keyboardActions.resetZoom",defaultMessage:"Reset zoom"},cycleReasoningLevel:{id:"keyboardActions.cycleReasoningLevel",defaultMessage:"Cycle reasoning level"},toggleKeyboardActions:{id:"keyboardActions.toggleKeyboardActions",defaultMessage:"Show shortcuts"}}),de=new B,oe=({ctx:o,resetThreadAction:t,clientThreadId:s,focusPromptTextareaAction:i,toaster:r,isFannyPackEnabled:g,isZoomEnabled:c,isElectronClient:l})=>{const y=l?[[e.Mod,"n"]]:[];return[{key:"newChat",action:t||x,actionMessageDescriptor:n.newChat,group:a.Core,keyboardBinding:[e.Mod,e.Shift,"o"],altKeyboardBindings:g?[...y]:[...y,[e.Mod,"k"]]},{key:"focusPromptTextarea",action:i??_,actionMessageDescriptor:n.focusPromptTextarea,group:a.Chat,keyboardBinding:[e.Shift,e.Escape]},{key:"copyLastCodeBlock",action:d=>{if(s!=null){const f=T.getConversationTurns(F(s));for(let p=f.length-1;p>=0;p--){const{messages:v}=f[p],b=[...v.reduce((M,u)=>u.clientMetadata?.err==null&&u.author.role===O.Assistant&&u.recipient==="all"?M+(M?`

`:"")+P(u):M,"").matchAll(q)],m=b.length?b[b.length-1][1]:null;if(m!=null){J(m,r,d).then(()=>{r.success("Copied code block to clipboard")});break}}}},actionMessageDescriptor:n.copyLastCodeBlock,group:a.Chat,keyboardBinding:[e.Mod,e.Shift,";"],altKeyboardBindings:[[e.Mod,e.Shift,":"]]},{key:"copyLastResponse",action:d=>{s!=null&&Y(o,s,r,d,"keyboard").then(()=>{r.success("Last response copied to clipboard")})},actionMessageDescriptor:n.copyLastResponse,group:a.Chat,keyboardBinding:[e.Mod,e.Shift,"c"]},{key:"toggleCustomInstructions",action:()=>k.toggleModal(C.UserContext),actionMessageDescriptor:n.toggleCustomInstructions,group:a.Settings,keyboardBinding:[e.Mod,e.Shift,"i"]},{key:"navigationToggle",action:()=>{k.toggleNavCollapsed()},actionMessageDescriptor:n.navigationToggle,group:a.Core,keyboardBinding:[e.Mod,e.Shift,"s"]},{key:"deleteChat",action:()=>{if(s){const d=G(s);d&&I(o,Q,{serverThreadId:d,isActiveConversation:!0})}},actionMessageDescriptor:n.deleteChat,group:a.Chat,keyboardBinding:[e.Mod,e.Shift,e.Backspace],altKeyboardBindings:[[e.Mod,e.Shift,e.Delete]]},{key:"zoomIn",enabled:c,action:()=>z(),actionMessageDescriptor:n.zoomIn,group:a.Chat,keyboardBinding:[e.Mod,"+"],altKeyboardBindings:[[e.Mod,"="]]},{key:"zoomOut",enabled:c,action:()=>E(),actionMessageDescriptor:n.zoomOut,group:a.Chat,keyboardBinding:[e.Mod,"-"]},{key:"resetZoom",enabled:c,action:()=>R(),actionMessageDescriptor:n.resetZoom,group:a.Chat,keyboardBinding:[e.Mod,"0"]},{key:"toggleKeyboardActions",action:()=>k.toggleModal(C.KeyboardActions),actionMessageDescriptor:n.toggleKeyboardActions,group:a.Settings,keyboardBinding:[e.Mod,"/"]}]},A=o=>V(o,t=>{K.logEvent("Keyboard Shortcut",{keyboardActionKey:t.key}),S.addAction("chatgpt_keyboard_shortcut",{keyboardActionKey:t.key})},{enabled:!0}),te=({resetThreadAction:o,clientThreadId:t,focusPromptTextareaAction:s}={})=>{const i=D(),{isFannyPackEnabled:r}=H(),g=W(),c=L,l=w();return $.useMemo(()=>oe({ctx:l,resetThreadAction:o,clientThreadId:t,focusPromptTextareaAction:s,toaster:i,isElectronClient:g,isFannyPackEnabled:r,isZoomEnabled:c}).filter(({enabled:d=!0})=>d),[l,o,t,s,i,g,r,c])},ge=({resetThreadAction:o,clientThreadId:t,focusPromptTextareaAction:s})=>{const i=te({resetThreadAction:o,clientThreadId:t,focusPromptTextareaAction:s}),g=N(c=>c.isVoiceActive)?[]:i;A(g)},le=({setSelectedVoiceIndex:o,prevVoiceIndex:t,nextVoiceIndex:s})=>{const i=[{key:"selectPrevVoice",action:()=>{o(t)},actionMessageDescriptor:{defaultMessage:"Select previous voice"},group:a.Chat,keyboardBinding:[e.ArrowLeft]},{key:"selectNextVoice",action:()=>{o(s)},actionMessageDescriptor:{defaultMessage:"Select next voice"},group:a.Chat,keyboardBinding:[e.ArrowRight]}];A(i)};export{de as G,ge as a,le as b,ce as g,h as i,te as u};
//# sourceMappingURL=k4oexpwbiepmd1cd.js.map
