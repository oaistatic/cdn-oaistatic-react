import{u as p,g as d}from"./b9b8pdc8f8cdvf7w.js";import{eL as f,dw as l,aw as m}from"./i3bl95k8z8nuf4dv.js";import{r as n}from"./msupklk377u8vx8o.js";function g(e){const r=n.useRef(void 0);n.useEffect(()=>{if(!(f()&&l||!navigator.permissions))return navigator.permissions.query({name:"microphone"}).then(o=>{r.current=o,o.onchange=()=>{e(o.state==="granted")}}).catch(()=>{}),()=>{r.current&&(r.current.onchange=null)}},[e])}const w=()=>{const[e,r]=n.useState(!1),[i,o]=n.useState(!1),[c,a]=n.useState(),u=n.useCallback(s=>{r(s)},[]);g(u);const t=p(),h=n.useCallback(async()=>i?e:t().then(s=>(r(s),s)).finally(()=>{o(!0)}),[t,i,e]);return n.useEffect(()=>{e&&v().then(s=>{a(s)})},[e]),{requestMicrophonePermissions:h,userDeclinedMicrophonePermissions:i&&!e,microphoneAvailable:e,microphoneLabel:c}},v=async()=>{try{return(await d("audioinput"))?.label??""}catch(e){return m.addError("Failed to fetch default media device",{error:e}),"Error accessing microphone devices"}};export{w as u};
//# sourceMappingURL=gzl485petzezqbrn.js.map
