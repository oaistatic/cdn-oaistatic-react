import{f as Se,r,j as e,M as u,g as xe,h as ce}from"./msupklk377u8vx8o.js";import{b9 as be,a_ as Ce,cT as ve,ie as Pe,ig as We,ih as Ee,ii as ue,ij as _e,ba as Re,ik as Te,bK as Ue,ha as Ge,dM as ze,il as Ve,im as Fe,be as B,bf as ke,bc as He,io as qe,ip as Qe,fw as Ke,iq as Ye,ir as $e,is as Je,it as Xe,iu as Ze,iv as et,iw as tt,ix as st,iy as ot,iz as at,iA as nt,iB as it,iC as lt,iD as rt,iE as dt,iF as ct,iG as ut,iH as gt,iI as mt,iJ as ft,iK as ht,iL as pt,iM as Mt,iN as St,iO as xt,iP as bt,iQ as Ct,iR as kt,iS as At,iT as Nt,iU as Ot,iV as yt,iW as wt,iX as Bt,iY as Dt,P as Lt,y as jt,H as y,U as ge,iZ as me,i_ as It,i$ as vt}from"./idf4u2jy0wx0pvap.js";import{an as S,k as D,cC as Pt,c as Wt,B as C,H as Et,ar as _t,bR as fe,cP as Ae,eR as Rt,eQ as Tt,eO as Ut,bo as Gt,d3 as zt,x as Vt,bj as Ft,ef as Ht,gB as he,eh as qt}from"./i3bl95k8z8nuf4dv.js";import{b as Qt}from"./etqfvs5ggajp1a11.js";import{u as Kt,a as Yt,N as $t,I as Jt}from"./o2t4lszmsavslsdu.js";import{b as Xt}from"./gwmfzjrffpu4d2tx.js";const Zt=()=>{const{isLoading:s,eligible:t}=be(Ce.hasSeenContextualAnswerGoogleSyncFinished),o=ve(),{connectionInstanceData:a,isLoading:n}=Pe({skip:!o}),i=We(a?.connection_statuses??[]);return s||n?"loading":t&&o&&i?"show":"hide"},es=({onClose:s})=>{const t=Se(),{markAsViewed:o}=be(Ce.hasSeenContextualAnswerGoogleSyncFinished);r.useEffect(()=>{S.logEvent("Contextual Answers User Fully Synced Modal")},[]);const a=()=>{o(),s(),_e()},n=()=>{o(),s()},i=e.jsx(C,{color:"secondary",onClick:n,children:e.jsx(u,{id:"341zvt",defaultMessage:"Maybe later"})}),g=e.jsx(C,{color:"primary",onClick:()=>a(),children:e.jsx(u,{id:"mfjqem",defaultMessage:"Try now"})});return e.jsx(D,{isOpen:!0,noPadding:!0,onClose:n,shouldIgnoreClickOutside:!0,size:"xlarge",type:"success",testId:"modal-ca-synced-nux",children:e.jsxs("div",{className:"relative px-2 py-8",children:[e.jsx(Pt,{onClick:n,className:"absolute end-0 top-0 z-10 me-2 mt-2 text-black"}),e.jsx("div",{className:"text-heading-3 text-center",children:e.jsx(u,{id:"cB19NT",defaultMessage:"Ask ChatGPT anything,{br}even about information in your Google Drive.",values:{br:e.jsx("br",{})}})}),e.jsx("div",{className:"border-token-border-light text-token-text-tertiary text-body-small-regular mx-auto mt-5 mb-5 w-max rounded-4xl border px-6 py-3 text-center italic",children:e.jsx(u,{id:"6cGGS5",defaultMessage:"What's the latest status on project widgets?"})}),e.jsxs("div",{className:"flex justify-center",children:[e.jsx(w,{Logo:Ee,title:t.formatMessage({id:"E7Iqah",defaultMessage:"Project Widgets Budget"}),className:"z-10 translate-x-[2.5rem] translate-y-[2rem] rotate-[-4deg]"}),e.jsx(w,{Logo:ue,title:t.formatMessage({id:"cVbcSP",defaultMessage:"Project Widgets PRD"}),className:"z-20"}),e.jsx(w,{Logo:ue,title:t.formatMessage({id:"QbnI4s",defaultMessage:"Project Widgets Presentation"}),className:"z-10 translate-x-[-2.5rem] translate-y-[2rem] rotate-[4deg]"})]}),e.jsxs("div",{className:"mt-12 flex justify-center gap-3",children:[i,g]})]})})},w=({Logo:s,title:t,className:o})=>e.jsxs("div",{className:Wt("border-token-border-light bg-token-bg-primary w-[14rem] rounded-2xl border p-3 shadow-sm",o),children:[e.jsxs("div",{className:"mb-3 flex items-center",children:[e.jsx(s,{}),e.jsx("span",{className:"text-body-small-regular text-token-interactive-label-accent-default ms-2",children:t})]}),e.jsx("div",{children:e.jsx(Qt,{lines:5,size:"sm"})})]}),pe="has-dismissed-welcome-back-modal",Ne=()=>{const[s,t]=r.useState(()=>sessionStorage.getItem(pe)!=null),{layer:o}=Et("3637408529"),a=o.get("is_no_auth_welcome_back_modal_enabled",!1),n=Re(),{isUnauthenticated:i,isLoading:g}=_t(),d=Te(),k=Xt(),x=()=>{t(!0),sessionStorage.setItem(pe,"true")};return g?{isLoading:!0,isOpen:null,onClose:null}:{isLoading:!1,isOpen:i&&a&&!s&&d&&!n&&!k,onClose:x}},ts=({onClose:s})=>{const t=Ue(),o=Ge(),a=ze(M.signUpCta),n=o?"center":"bottom",{isOpen:i,onClose:g}=Ne();return r.useEffect(()=>{i&&(S.logEvent("No Auth Welcome Back Modal Shown"),fe.logEvent("chatgpt_no_auth_welcome_back_modal_shown"))},[i]),i?e.jsx(D,{testId:"modal-no-auth-welcome-back",isOpen:!0,onClose:Ae,shouldIgnoreClickOutside:!0,showCloseButton:!1,type:"success",noPadding:!0,size:"custom",className:"max-w-[373px] sm:max-w-[400px]",position:n,children:e.jsxs("div",{className:"flex flex-col items-center justify-center px-6 py-8 sm:p-10",children:[e.jsx("p",{className:"mb-1 text-center text-2xl font-semibold",children:e.jsx(u,{...M.title})}),e.jsx("p",{className:"text-token-text-secondary mb-6 text-center text-lg",children:e.jsx(u,{...M.subtitle})}),e.jsx(C,{as:"button",size:"large",color:"primary",fullWidth:!0,className:"mb-2 sm:mb-3","data-testid":"welcome-login-button",onClick:()=>{t({authType:"login",callback:d=>{S.logLogInButtonClicked({provider:d,location:"No Auth Welcome Back Modal"})}})},children:e.jsx(u,{...M.logInCta})}),e.jsx(C,{as:"button",size:"large",color:"secondary",fullWidth:!0,className:"mb-5",onClick:()=>{t({authType:"signup",callback:d=>{S.logSignUpButtonClicked({provider:d,location:"No Auth Welcome Back Modal"})}})},children:e.jsx(u,{...a})}),e.jsx("a",{href:"#",className:"text-token-text-secondary cursor-pointer font-semibold underline sm:text-sm",onClick:d=>{d.preventDefault(),S.logEvent("No Auth Welcome Modal Stay Logged Out Link Clicked"),fe.logEvent("chatgpt_no_auth_welcome_back_modal_stay_logged_out_link_clicked"),s(),g()},"data-testid":"dismiss-welcome",children:e.jsx(u,{...M.stayLoggedOutLink})})]})}):null},M=xe({title:{id:"NoAuthWelcomeBackModal.title",defaultMessage:"Welcome back"},subtitle:{id:"7WQi5y",defaultMessage:"Log in or sign up to get smarter responses, upload files and images, and more."},signUpCta:{id:"NoAuthWelcomeBackModal.signUpCta",defaultMessage:"Sign up"},logInCta:{id:"NoAuthWelcomeBackModal.logInCta",defaultMessage:"Log in"},stayLoggedOutLink:{id:"NoAuthWelcomeBackModal.stayLoggedOut",defaultMessage:"Stay logged out"}}),ss=({onClose:s})=>{const t=Se(),o=B(ke.isBusinessWorkspace),a=B(i=>i.currentWorkspace),n=o?t.formatMessage(Me.workspaceWelcome,{workspaceName:a?.name}):"ChatGPT";return e.jsx(D,{testId:"modal-onboarding",isOpen:!0,onClose:Ae,type:"success",title:n,size:"custom",noPadding:!0,className:"max-w-3xl",description:t.formatMessage(Me.personalOnboardingSubheading),children:e.jsx(It,{onClose:s,scope:vt.Personal})})},os=({onClose:s})=>{const t=qt.useStore();return r.useEffect(()=>(t.setOnCloseSideEffect(s),t.setManualVisibility(!0),()=>{t.setManualVisibility(!1)}),[s,t]),null};function us({clientThreadId:s}){const[t,o]=r.useState(0),{hasSeenOnboardingDate:a}=Ve(),{hasSeenTeamOwnerOnboardingDate:n}=Fe(),i=B(ke.isBusinessWorkspace),[g,d]=r.useState(!1),k=ce(),x=He(k),{data:Oe,isPending:ye,isEnabled:we}=qe(),L=Qe(Oe,ye&&we),j=Rt(),I=Tt(),v=Ut(),[Be,A]=Gt(s,l=>[!l||l.isLoading,l?.conversationOrigin]),N=Be&&!!s,{data:c,isError:p}=zt(),O=Vt(c),f=c!=null,P=c&&c?.accountItems.length>1&&c.currentAccountId==null,W=c?.accountItems.some(l=>l.isPersonalAccount()),E=!!c?.accountItems&&c.accountItems.length>0&&c.accountItems.every(({canAccessWithCurrentSession:l})=>!l),{eligible:_,isLoading:R}=Ke(),{value:T}=Ft("1542198993"),{punchOutRequireLoginInfo:U}=Ye(),{state:G}=$e(),{isOpen:z,isLoading:V}=Je(),{isOpen:F,isLoading:H}=Xe(),{isOpen:q,isLoading:Q}=Ze(),{isOpen:K,isLoading:Y}=Ne(),{state:$}=et(),J=tt(),X=Kt(),Z=Yt(),ee=st(),te=ot(),se=Zt(),oe=at(),ae=nt(),{isOpen:ne,isLoading:ie}=it(),De=lt(s),{shouldShowCookieBanner:le,isCookieConsentBannerLoading:re}=Ht(),h=r.useMemo(()=>[{Component:rt,getModalState:()=>U?"show":"hide",isDeferrable:!1},{Component:dt,getModalState:()=>G,isDeferrable:!1},{Component:ct,getModalState:()=>$,isDeferrable:!1},{Component:ut,getModalState:()=>ie?"loading":ne?"show":"hide",isDeferrable:!1},{Component:$t,getModalState:()=>Z,isDeferrable:!0},{Component:gt,getModalState:()=>V||N?"loading":A===he.APPLE?"hide":z?"show":"hide",isDeferrable:!0},{Component:ts,getModalState:()=>Y||N?"loading":A===he.APPLE?"hide":K?"show":"hide",isDeferrable:!0},{Component:os,getModalState:()=>re?"loading":le?"show":"hide",isDeferrable:!1},{Component:ss,getModalState:()=>i||x?"hide":a===null?"loading":a===!1?"show":"hide",isDeferrable:!0},{Component:mt,getModalState:()=>p?"hide":P?"show":f?"hide":"loading",isDeferrable:!1},{Component:ft,getModalState:()=>j!==null?"show":p||f?"hide":"loading",isDeferrable:!1},{Component:ht,getModalState:()=>I!==null?"show":p||f?"hide":"loading",isDeferrable:!1},{Component:pt,getModalState:()=>v!=null?"show":p||f?"hide":"loading",isDeferrable:!1},{Component:Mt,getModalState:()=>f?E?"show":"hide":"loading",isDeferrable:!1},{Component:St,getModalState:()=>H?"loading":F?"show":"hide",isDeferrable:!1},{Component:xt,getModalState:()=>Q?"loading":q?"show":"hide",isDeferrable:!1},{Component:bt,getModalState:()=>"hide",isDeferrable:!1},{Component:Ct,getModalState:()=>!O?.isTeam()||!O?.isOwnerOfAccount()||!W?"hide":!f||n===null?"loading":n===!1?"show":"hide",isDeferrable:!1},{Component:kt,getModalState:()=>i?a===null?"loading":a===!1?"show":"hide":"hide",isDeferrable:!0},{Component:At,getModalState:()=>R?"loading":_&&T?"show":"hide",isDeferrable:!1},{Component:Nt,getModalState:()=>L,isDeferrable:!1},{Component:Ot,getModalState:()=>J,isDeferrable:!1},{Component:l=>s&&e.jsx(Lt,{clientThreadId:s,children:e.jsx(Jt,{clientThreadId:s,...l})}),getModalState:()=>X,isDeferrable:!1},{Component:es,getModalState:()=>se,isDeferrable:!1},{Component:yt,getModalState:()=>ee,isDeferrable:!1},{Component:wt,getModalState:()=>te,isDeferrable:!1},{Component:Bt,getModalState:()=>oe,isDeferrable:!0},{Component:Dt,getModalState:()=>ae,isDeferrable:!1}],[U,G,$,ie,ne,Z,V,N,A,z,Y,K,re,le,i,x,a,p,P,f,j,I,v,E,H,F,Q,q,O,W,n,R,_,T,L,J,s,X,se,ee,te,oe,ae])[t],Le=g||De;let m;h&&(h.isDeferrable&&Le?m="hide":h.Component?m=h.getModalState():m="hide"),r.useEffect(()=>{m==="hide"&&o(t+1)},[t,m]);const{pathname:b}=ce(),de=r.useRef(b);if(r.useEffect(()=>{de.current!==b&&(de.current=b,o(0))},[b]),r.useEffect(()=>{const l=m==="show",Ie=jt.getState().activeModals.has(y.BlockingInitialComponent);l!==Ie&&(l?ge.openModal(y.BlockingInitialComponent):ge.closeModal(y.BlockingInitialComponent))},[m]),h==null)return me.trackNamespace(me.NS_COMPOSER),e.jsx("span",{"data-testid":"blocking-initial-modals-done",className:"hidden"});if(m!=="show")return null;const je=h.Component;return e.jsx(je,{onClose:()=>{d(!0),o(l=>l+1)}})}const Me=xe({workspaceWelcome:{id:"BlockingInitialModals.workspaceWelcome",defaultMessage:"Welcome to the {workspaceName} workspace"},personalOnboardingSubheading:{id:"BlockingInitialModals.personalOnboardingSubheading",defaultMessage:"Tips for getting started"}});export{us as B};
//# sourceMappingURL=gno8mfhpd8fsxtyq.js.map
