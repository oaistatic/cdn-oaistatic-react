const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/mzf5pw4jspp3m0l4.js","assets/msupklk377u8vx8o.js","assets/idf4u2jy0wx0pvap.js","assets/i3bl95k8z8nuf4dv.js","assets/root-en2soewk.css","assets/conversation-small-irmw3ffz.css","assets/jm9661216xi1kol5.js","assets/gc51ish3otzvnj1w.js","assets/hwl3hzno2kq7obfl.js","assets/hmii3551qscelikg.js","assets/i3xeaua08fnq6vw7.js","assets/iaogn9yqy8ycbrvh.js","assets/bjlvmvwbynia41h5.js","assets/igftvtdft8b4phs3.js","assets/o2t4lszmsavslsdu.js","assets/gwmfzjrffpu4d2tx.js","assets/gd7xfxa2yqt151v4.js","assets/en1ee50tqvrjf3xp.js","assets/n5fowtub43nwjawh.js","assets/lvc34l5biwha9w7t.js","assets/k4oexpwbiepmd1cd.js","assets/np9w83f07wa6edf5.js","assets/hstsg1tnsukf0vw2.js","assets/ev39bkx1q3tpviat.js","assets/etqfvs5ggajp1a11.js","assets/ikpwdaspyqzs2oop.js","assets/ot1k26387o73dpla.js","assets/o02jebqcoqg6cyor.js","assets/gcz2j2o5g6y0kzog.js","assets/m89x2zftpo6hrypr.js","assets/e48v7rt2aozho8dl.js"])))=>i.map(i=>d[i]);
import{j as e,r as L,u as ne,f as w,M as m,g as ie,a8 as $e,L as Ye,d as V,a as Je}from"./msupklk377u8vx8o.js";import{Q as Se,eH as te,f0 as Xe,jP as Ze,jQ as K,d8 as Qe,jR as et,O as Ce,M as oe,co as ke,H as y,U as g,em as re,eI as le,jS as Me,aG as tt,dw as st,dK as at,jT as Ne,bY as nt,jU as it,eM as ce,eW as ot,jV as rt,jW as lt,jX as ct,bF as ge,jY as we,eN as _e,ev as u,hz as Ge,bP as ze,c6 as dt,ai as mt,bJ as Ie,f1 as ut,hx as ht,jZ as xt,j_ as gt,bx as Te,eT as ft,j$ as pt,k0 as vt,k1 as jt,k2 as bt,v as yt,k3 as St,k4 as Ct,b9 as kt,a_ as Mt,aO as Nt,k5 as fe,cv as Q,k6 as pe,k7 as wt,eK as _t,k8 as Gt,ex as zt,J as It,k9 as Tt,ka as Ft,kb as Pt,kc as Et,kd as At,dE as Lt,ke as Dt,cQ as Ot,dB as Bt,kf as Ut,ao as W,kg as $,y as Fe,hh as Pe,kh as Ht,gJ as Rt,ki as Ee,kj as qt,kk as Kt,kl as Vt,km as Wt,kn as ve,ko as $t,kp as Yt,kq as Jt,kr as Xt,ks as Zt,iZ as je,hg as Qt,bK as es,kt as ts,dM as ss,ku as as}from"./idf4u2jy0wx0pvap.js";import{c as p,v as de,_ as me,gz as ns,an as N,k as Ae,bI as is,en as os,cC as rs,B as P,bj as E,d as ue,bO as A,cG as ls,g as D,F as Y,bF as M,g3 as cs,d5 as Le,ar as J,cX as ds,D as ms,r as se,am as us,m as hs,o as xs,b as he,bR as gs,ac as fs,az as ps,H as X,bk as vs,f7 as js,bo as be,aA as bs,b2 as ys,bp as ae,ax as ye}from"./i3bl95k8z8nuf4dv.js";import{G as Ss}from"./k4oexpwbiepmd1cd.js";import{G as De}from"./gd7xfxa2yqt151v4.js";import{u as Cs}from"./igftvtdft8b4phs3.js";import{g as ks}from"./o2t4lszmsavslsdu.js";import{u as Ms}from"./hwl3hzno2kq7obfl.js";import{u as Oe}from"./gc51ish3otzvnj1w.js";function Ns({resource:t,grayedOut:s,className:a}){const n=t.gizmo.vanity_metrics?.num_conversations_str;return e.jsxs("div",{className:p("flex w-full grow items-center gap-4 overflow-hidden",a),children:[e.jsx(De,{isFirstParty:!!t.gizmo.tags?.includes(Se.FirstParty),src:t.gizmo.display.profile_picture_url??void 0,className:p("h-12 w-12 shrink-0",s&&"grayscale group-hover:grayscale-0")}),e.jsxs("div",{className:"overflow-hidden break-words text-ellipsis",children:[e.jsx("span",{className:"line-clamp-2 text-sm leading-tight font-semibold",children:t.gizmo.display.name}),e.jsx("span",{className:"line-clamp-3 text-xs",children:t.gizmo.display.description}),e.jsxs("div",{className:"text-token-text-tertiary mt-1 flex items-center gap-1 pe-1 text-xs text-ellipsis whitespace-nowrap",children:[e.jsx(te,{gizmo:t,className:"text-xs",hideLink:!0}),n&&e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"text-[8px]",children:"â€¢"}),e.jsx(Xe,{className:"h-3 w-3"}),n]})]})]})]})}const ws=de(()=>me(()=>import("./mzf5pw4jspp3m0l4.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29])).then(t=>t.SnorlaxSplashScreen)),ja=({clientThreadId:t,currentModelId:s,onRequestCompletion:a,gizmoId:n})=>{const{data:o}=Ce(n),i=oe(n),r=ns();return o==null?null:i?e.jsx(ws,{clientThreadId:t,gizmoId:n,currentModelId:s,onRequestCompletion:a}):e.jsx(Be,{gizmo:o,showStarterPrompts:!0,disableStarterPrompts:r})};function Be({gizmo:t,hideOwner:s=!1,children:a,className:n,avatarClassName:o,showStarterPrompts:i=!1,disableStarterPrompts:r=!1}){return t==null?null:e.jsx(e.Fragment,{children:e.jsxs("div",{className:p("text-token-text-primary flex h-full flex-col items-center justify-center","screen-arch:min-h-[calc(100dvh-var(--thread-leading-height)-var(--thread-trailing-height)-12px)]",n),children:[e.jsx(_s,{gizmo:t,avatarClassName:o}),e.jsx(zs,{gizmo:t,hideOwner:s,showStarterPrompts:i,disableStarterPrompts:r}),a]})})}function _s({gizmo:t,avatarClassName:s}){const a=!!(t!=null&&Ze(t)&&t?.gizmo.tags?.includes(Se.FirstParty));return e.jsx("div",{className:"relative",children:e.jsx(De,{isFirstParty:a||!t,src:t!=null&&K(t)?t.profilePictureUrl:t?.gizmo.display.profile_picture_url,className:p("mb-3 h-12 w-12",s)})})}function Gs({gizmo:t,disabled:s}){const a=ks(t),n=Cs(),o=Qe();if(a==null||a.length===0)return null;const i=a.slice(0,o?2:4);return e.jsx(Ts,{starterPrompts:i,onSelectStarterPrompt:n,disabled:s})}function zs({gizmo:t,hideOwner:s,showStarterPrompts:a,disableStarterPrompts:n}){const o=t!=null&&K(t)?t.name:t?.gizmo.display.name,i=t!=null&&K(t)?t.description:t?.gizmo.display.description;return e.jsxs("div",{className:"flex flex-col items-center gap-2",children:[e.jsx("div",{className:"text-center text-2xl font-semibold",children:o}),!s&&e.jsx("div",{className:"text-token-text-tertiary flex items-center gap-1",children:e.jsx(e.Fragment,{children:t&&K(t)?e.jsx(te,{gizmo:t}):e.jsx(te,{gizmo:t,socials:t.gizmo.author.display_socials})})}),i&&e.jsx("div",{className:"text-token-text-primary max-w-md text-center text-sm font-normal",children:i}),a&&e.jsx(Gs,{gizmo:t,disabled:n})]})}const Is=/\s/;function Ts({starterPrompts:t,onSelectStarterPrompt:s,disabled:a,cssMobileDisplayLimit:n,marginOverride:o}){let i=t.map((r,d)=>{let l=r.oneliner??r.title;l===""&&(l=r.body);const c=Is.test(l);return e.jsxs("button",{className:p(n!==void 0&&d>=n&&"max-sm:hidden","border-token-border-default shadow-xxs enabled:hover:bg-token-main-surface-secondary relative flex w-40 flex-col gap-2 rounded-2xl border px-3 pt-3 pb-4 text-start align-top text-[15px] transition disabled:cursor-not-allowed"),disabled:a,onClick:h=>s(h,r,t,d),children:[e.jsx(et,{category:r.category}),e.jsx("div",{className:p("line-clamp-3 max-w-full text-balance text-gray-600 dark:text-gray-500",c?"break-word":"break-all"),children:l})]},r.id??d)});if(i.length>2){const r=Math.floor(i.length/2);i=[i.slice(0,r),i.slice(r)].map((d,l)=>e.jsx("div",{className:"flex max-w-3xl flex-wrap items-stretch justify-center gap-4",children:d},l))}return e.jsx("div",{className:p("mx-3 flex max-w-3xl flex-wrap items-stretch justify-center gap-4",o??"mt-12"),children:i})}const Fs=de(()=>me(()=>import("./e48v7rt2aozho8dl.js"),__vite__mapDeps([30,1,2,3,4,5])).then(t=>t.GizmoKeepInSidebarMenuItem)),Ps=4,Z=Y.div`font-bold mt-6`,Es=t=>ne({queryFn:async()=>re.getAbout(t),queryKey:["gizmo","about",{gizmoId:t}]}),As=t=>ne({queryFn:async()=>re.getCreatorSlice({creatorId:t}),queryKey:["gizmo","creator",{creatorId:t}],enabled:t!=null}),Ls=t=>{switch(t.type){case M.BROWSER:return{title:b.browsing};case M.PYTHON:return{title:b.dataAnalysis};case M.DALLE:return{title:b.dalle};case M.IMAGE_GEN:return{title:b.imageGen};case M.MEMORY:return{title:b.memory,description:b.memoryDescription};case M.JIT_PLUGIN:return{title:b.actions,description:b.actionsDescription};default:return null}},Ds=({tools:t})=>{const s=ue(),a=s?.includes(A.SearchTool)&&!s?.includes(A.SearchToolHoldout),n=st(t??[],i=>i.type);var o=ls(n.map(Ls).filter(i=>i!=null)??[]);return o.length===0?null:(a&&(o=o.map(i=>i.title===b.browsing?{title:b.search}:i)),e.jsxs("div",{className:"flex flex-col",children:[e.jsx(Z,{className:"mb-2",children:e.jsx(m,{id:"gizmo.about.capabilitiesHeader",defaultMessage:"Capabilities"})}),o.map(i=>e.jsxs("div",{className:"flex flex-row items-start gap-2 py-1 text-sm",children:[e.jsx(at,{className:"icon-sm mt-0.5 text-green-600"}),e.jsxs("div",{children:[e.jsx(m,{...i.title}),i.description!=null&&e.jsx("div",{className:"text-token-text-tertiary text-xs",children:e.jsx(m,{...i.description})})]})]},i.title.id))]}))},H=Y.div`flex flex-col justify-center items-center gap-2 border-s border-token-border-heavy first:border-0 w-48 mt-4 px-2`,R=Y.div`flex flex-row items-center gap-1.5 pt-1 text-xl font-semibold text-center leading-none`,q=Y.div`text-xs text-token-text-tertiary`,Os=({gizmoResource:t})=>e.jsxs(le,{contentAlign:"end",sideOffset:4,triggerButton:e.jsx(P,{color:"ghost",icon:tt}),children:[e.jsx(Fs,{gizmoResource:t,location:"about_modal"}),e.jsx(Me,{gizmoResource:t})]}),Bs=({aboutBlock:t})=>{switch(t.type){case"generic_title_subtitle":return e.jsxs(H,{children:[e.jsx(R,{children:t.title}),e.jsx(q,{children:t.subtitle})]});case"rating":return e.jsxs(H,{children:[e.jsxs(R,{children:[e.jsx(Ne,{className:"icon-sm"}),t.avg]}),e.jsx(q,{children:t.count_str})]});case"category":return t.category_ranking!=null?e.jsxs(H,{children:[e.jsx(R,{children:e.jsx(m,{id:"gizmo.about.trendingRank",defaultMessage:"#{rank}",values:{rank:t.category_ranking}})}),e.jsx(q,{children:e.jsx(m,{id:"gizmo.about.inCategory",defaultMessage:"in {category} {locale}",values:{category:t.category_str,locale:t.category_locale_str??""}})})]}):e.jsxs(H,{children:[e.jsx(R,{children:t.category_str}),e.jsx(q,{children:e.jsx(m,{id:"gizmo.about.category",defaultMessage:"Category"})})]})}},Us=({blocks:t})=>e.jsx("div",{className:"flex justify-center",children:t.map(s=>e.jsx(Bs,{aboutBlock:s},s.type))}),Hs=({href:t,onClick:s,children:a})=>e.jsx($e.div,{whileTap:{scale:.98},className:"flex",children:e.jsxs(Ye,{to:t,reloadDocument:!0,onClick:s,className:p("group border-token-border-medium bg-token-main-surface-primary hover:bg-token-main-surface-secondary relative ms-2 h-14 min-w-full grow rounded-xl border px-4 focus:outline-hidden"),children:[e.jsx("div",{className:"flex h-full items-center",children:e.jsx("div",{className:"line-clamp-2 text-sm break-all",children:a})}),e.jsx("div",{className:"border-token-border-medium bg-token-main-surface-primary group-hover:bg-token-main-surface-secondary absolute -start-2 -bottom-px h-3 w-4 border-b",children:e.jsx("div",{className:"border-token-border-medium bg-token-main-surface-primary h-3 w-2 rounded-ee-full border-e border-b"})}),e.jsx("div",{className:"absolute end-2 top-0 bottom-0 hidden items-center group-hover:flex",children:e.jsx("div",{className:"bg-token-main-surface-primary flex h-8 w-8 items-center justify-center rounded-lg",children:e.jsx(ce,{className:"icon-md text-token-text-primary"})})})]})}),Rs=({gizmo:t,onClose:s})=>{const a=E("1825130190").value,n=t.gizmo.display.prompt_starters?.slice(0,Ps);return n==null||n.length===0||!a?null:e.jsxs("div",{className:"flex flex-col",children:[e.jsx(Z,{children:e.jsx(m,{id:"gizmo.about.conversationStartersHeader",defaultMessage:"Conversation Starters"})}),e.jsx("div",{className:"mt-4 grid grid-cols-2 gap-x-1.5 gap-y-2",children:n.map((o,i)=>e.jsx(qs,{gizmo:t,prompt:o,onClick:s},i))})]})};function qs({gizmo:t,prompt:s,onClick:a}){const n=D(),o=it(n,t,s);return e.jsx(Hs,{href:o?.toString()??"#",onClick:a,children:s})}const Ks=({reviewStats:t})=>E("1825130190").value?e.jsxs("div",{className:"flex flex-col",children:[e.jsx("div",{className:"mb-2",children:e.jsx(Z,{children:e.jsx(m,{id:"gizmo.about.ratingsHeader",defaultMessage:"Ratings"})})}),t!=null?[5,4,3,2,1].map(a=>e.jsxs("div",{className:"flex flex-row items-center gap-2 py-1 text-xl font-semibold",children:[e.jsxs("div",{className:"icon-lg relative",children:[e.jsx(Ne,{className:"icon-lg text-green-500"}),e.jsx("div",{className:"absolute inset-0 flex items-center justify-center text-[11px] text-white",children:a})]}),e.jsx("div",{className:"h-2.5 grow overflow-hidden rounded-full bg-gray-100 dark:bg-gray-700",children:e.jsx("div",{className:"h-full bg-green-500",style:{width:`${(t?.by_rating[a-1]??0)*100}%`}})})]},a)):e.jsx("div",{className:"text-token-text-tertiary text-sm",children:e.jsx(m,{id:"gizmo.about.ratings.notEnoughRatings",defaultMessage:"Not enough ratings yet"})})]}):null,Vs=({gizmoId:t,creatorId:s})=>{const a=ke(y.GPTDetails),n=()=>g.closeModal(y.GPTDetails);return a?e.jsx(Ws,{gizmoId:t,creatorId:s,onClose:n}):null},Ws=({gizmoId:t,creatorId:s,onClose:a,children:n})=>{const o=Ce(t),i=Es(t),r=As(s);return L.useEffect(()=>{N.logEvent("Detail Show Modal",{gizmo_id:t})},[t]),e.jsx(Ae,{testId:"modal-gizmo-about",isOpen:!0,onClose:a,type:"success",hideSeparator:!0,showCloseButton:!0,noPadding:!0,className:"flex h-[calc(100vh-25rem)] min-h-[40vh] max-w-xl flex-col",children:e.jsx($s,{aboutQuery:i,gizmoQuery:o,creatorSliceQuery:r,onClose:a,children:n})})},$s=({aboutQuery:t,gizmoQuery:s,creatorSliceQuery:a,children:n,onClose:o})=>{const i=w();if(t.isLoading||s.isLoading||a.isLoading)return e.jsx("div",{className:"flex h-40 items-center justify-center pb-10",children:e.jsx(is,{})});const r=t.data?.gizmo,d=a?.data,l=s?.data;if(!r||t.error||s.error||a.error||t.data==null||s.data==null||a.data==null||!l){const c=os(t.error??s.error??a.error)??i.formatMessage({id:"I3v3Oj",defaultMessage:"An error occurred loading this GPT."});return e.jsx("div",{className:"relative flex flex-col gap-2 overflow-hidden px-2 py-4",children:e.jsx("div",{className:"flex flex-col p-4 text-red-500",children:c})})}return e.jsx("div",{className:"flex h-full px-2 py-4",children:e.jsxs("div",{className:"relative flex grow flex-col gap-4 overflow-y-auto px-8 pt-16 pb-20",children:[e.jsx("div",{className:"absolute top-0",children:e.jsxs("div",{className:"from-token-main-surface-primary fixed start-4 end-4 z-10 flex items-center justify-end bg-linear-to-b to-transparent pb-2",children:[l&&e.jsx(Os,{gizmoResource:l}),e.jsx(rs,{onClick:o})]})}),e.jsx("div",{className:"absolute bottom-[64px]",children:e.jsx("div",{className:"from-token-main-surface-primary fixed start-4 end-4 z-10 flex min-h-[64px] items-end bg-linear-to-t to-transparent px-2",children:n})}),e.jsx(Be,{gizmo:l,className:"h-fit!",avatarClassName:"h-20! w-20!"}),e.jsx(Us,{blocks:t.data.about_blocks}),e.jsx(Rs,{gizmo:l,onClose:o}),e.jsx(Ds,{tools:l.tools}),e.jsx(Ks,{reviewStats:t.data.review_stats}),d&&e.jsx(Ys,{gizmos:d.items})]})})};function Ys({gizmos:t}){const s=D();return t.length===0?null:e.jsxs("div",{className:"flex flex-col",children:[e.jsx("div",{className:"mb-2",children:e.jsx(Z,{children:e.jsx(m,{id:"gizmo.about.moreByHeader",defaultMessage:"More by {creatorName}",values:{creatorName:t[0].gizmo.author.display_name}})})}),e.jsx("div",{className:p("no-scrollbar group flex min-h-[104px] items-center space-x-2 overflow-x-auto overflow-y-hidden"),children:t?.map(a=>e.jsx("a",{onClick:()=>{N.logEvent("Detail Click Gizmo",{gizmo_id:a.gizmo.id})},href:nt(s,a),className:"bg-token-main-surface-secondary h-fit min-w-fit rounded-xl px-1 py-4 md:px-3 md:py-4 lg:px-3",children:e.jsx(Ns,{resource:a})},a.gizmo.id))})]})}const ba=t=>e.jsx("div",{className:"flex grow flex-col items-center",children:e.jsxs(P,{color:"primary",className:"h-12 w-full",icon:ce,...t,children:[e.jsx(m,{id:"gizmo.about.startChat",defaultMessage:"Start Chat"}),t.children]})}),b=ie({browsing:{id:"gizmo.about.tools.browsing",defaultMessage:"Browsing"},search:{id:"gizmo.about.tools.search",defaultMessage:"Web Search"},dataAnalysis:{id:"gizmo.about.tools.dataAnalysis",defaultMessage:"Code Interpreter & Data Analysis"},dalle:{id:"gizmo.about.tools.dalle",defaultMessage:"DALLÂ·E Images"},imageGen:{id:"gizmo.about.tools.imageGen",defaultMessage:"4o Image Generation"},memory:{id:"gizmo.about.tools.memory",defaultMessage:"Memory"},actions:{id:"gizmo.about.tools.actions",defaultMessage:"Actions"},actionsDescription:{id:"gizmo.about.tools.actionsDescription",defaultMessage:"Retrieves or takes actions outside of ChatGPT"},memoryDescription:{id:"gizmo.about.tools.memoryDescription",defaultMessage:"Learns from previous chats to improve future conversations"}}),Js=de(()=>me(()=>import("./e48v7rt2aozho8dl.js"),__vite__mapDeps([30,1,2,3,4,5])).then(t=>t.GizmoKeepInSidebarMenuItem));function Xs({children:t,clientThreadId:s,gizmoResource:a,showReportModal:n,inMobileHeader:o}){return e.jsxs(e.Fragment,{children:[e.jsx(le,{contentAlign:o?"center":"start",size:"small",triggerButton:t,children:e.jsx(Ue,{clientThreadId:s,gizmoResource:a,showReportModal:n})}),e.jsx(Zs,{gizmoResource:a})]})}function Zs({gizmoResource:t}){const s=ke(y.GPTRemoveThirdParty),a=ms(),n=we(t);return e.jsxs(e.Fragment,{children:[e.jsx(Vs,{gizmoId:t.gizmo.id,creatorId:t.gizmo.author.user_id}),e.jsx(pt,{gizmo:t}),n&&e.jsx(vt,{gizmo:t}),n&&e.jsx(jt,{gizmo:t}),e.jsx(bt,{gpt:t,isOpen:s,onClose:()=>g.closeModal(y.GPTRemoveThirdParty),account:a})]})}function Ue({clientThreadId:t,gizmoResource:s,showReportModal:a}){const n=ot(s),o=rt(s),i=lt(s.gizmo.id),r=ue(),d=ct(s),l=s.gizmo.share_recipient===ge.Marketplace||s.gizmo.share_recipient===ge.Link,c=!d&&l,h=E("1825130190").value,z=E("3645668434").value,C=h&&!d&&we(s),I=r?.includes(A.GizmoSupportEmails)&&!d&&s.gizmo.author.will_receive_support_emails&&C,B=cs(),_=Le(t),k=_e(A.WorkspaceShareLinks),{isUnauthenticated:j}=J(),T=k&&_&&!j,v=V();return e.jsxs(e.Fragment,{children:[e.jsx(u.Item,{onClick:()=>{N.logNewChatButtonClicked({location:"Gizmo information dropdown",gizmo_id:s.gizmo.id}),ze(v,`/g/${s.gizmo.short_url}`)},icon:Ge,children:e.jsx(m,{...f.newChat})}),e.jsx(u.Item,{onClick:()=>g.openModal(y.GPTDetails),icon:dt,children:e.jsx(m,{...f.about})}),s.tools?.find(x=>x.type===M.JIT_PLUGIN)&&e.jsx(u.Item,{onClick:()=>g.openModal(y.GPTPrivacySettings),icon:mt,children:e.jsx(m,{...f.privacySettings})}),n&&e.jsx(u.Item,{onClick:()=>{v(i)},icon:Ie,children:e.jsx(m,{...f.customize})}),!n&&o&&z&&e.jsxs(e.Fragment,{children:[e.jsx(u.Item,{onClick:async()=>{v(`/g/${s.gizmo.id}/view`)},icon:ut,children:e.jsx(m,{id:"GizmoInformation.viewGizmoLabel",defaultMessage:"View configuration"})}),e.jsx(u.Item,{onClick:async()=>{const x=await re.copyGizmo({gizmoId:s.gizmo.id});x.gizmo.id&&v(`/gpts/editor/${x.gizmo.id}`)},icon:ht,children:e.jsx(m,{id:"GizmoInformation.copyGizmoLabel",defaultMessage:"Duplicate GPT"})})]}),e.jsx(Js,{gizmoResource:s,location:"conversation_page"}),e.jsx(Me,{gizmoResource:s}),I&&e.jsx(u.Item,{onClick:()=>g.openModal(y.GPTFeedbackEmail),icon:ce,children:e.jsx(m,{...f.feedbackEmail})}),C&&e.jsx(u.Item,{onClick:()=>g.openModal(y.GPTReview),icon:xt,children:e.jsx(m,{...f.reviewGPT})}),c&&e.jsx(u.Item,{onClick:a,icon:gt,children:e.jsx(m,{...f.report})}),T&&e.jsx(u.Item,{onClick:()=>g.openSharingModal(_),icon:Te,children:e.jsx(m,{...f.shareChat})}),B&&e.jsxs(e.Fragment,{children:[e.jsx(u.Separator,{}),e.jsx(u.Item,{color:"danger",onClick:()=>g.openModal(y.GPTRemoveThirdParty),icon:ds,children:e.jsx(m,{defaultMessage:"Remove GPT from workspace",id:"GizmoInformation.removeGPT"})})]}),r?.includes("debug")&&e.jsxs(e.Fragment,{children:[e.jsx(u.Separator,{}),e.jsx(u.Item,{onClick:()=>{v(ft(s))},children:"(Internal) See share page"})]})]})}const Qs=({conversation:t,inMainScreen:s=!1,isActiveConversation:a,inChatWindow:n=!1})=>{const o=D(),i=t.id,r=t.gizmo_id,d=oe(r),l=se(o,"16480203"),c=us(i),h=_e(A.WorkspaceShareLinks),{isUnauthenticated:z}=J(),C=h&&c&&!z&&(!d||l),I=yt(),[B,_]=L.useState(!!t.is_do_not_remember),k=w();let j=null;const{snorlaxes:T}=St();j=T;let v=null;d&&j&&(v=j.find(({gizmo:F})=>F.gizmo.id===r)?.gizmo);const x=Ct(),U=Je(),{eligible:S,markAsViewed:qe}=kt(Mt.ArchiveConversationOnboarding),Ke=hs(),Ve=V(),We=async()=>{await he.safePatch("/conversation/{conversation_id}",{parameters:{path:{conversation_id:t.id}},requestBody:{is_archived:!0}}),Tt(U,t.gizmo_id),gs.logEvent("chatgpt_conversation_archived"),N.logEvent("Conversation Archived"),S&&(Ke.info(k.formatMessage({defaultMessage:"You can view archived chats in Settings",id:"HistoryGizmoItem.archiveChatOnboarding"}),{duration:10,hasCloseButton:!0}),qe()),a&&ze(Ve)};return e.jsxs(e.Fragment,{children:[C&&!n&&e.jsx(u.Item,{onClick:()=>g.openSharingModal(c,"History Item Menu"),icon:Te,"data-testid":"share-chat-menu-item",children:e.jsx(m,{...f.shareChat})}),!1,I&&j&&j?.length>0&&Nt(r)&&c&&e.jsxs(e.Fragment,{children:[C&&!n&&e.jsx(u.Separator,{}),d&&e.jsxs(e.Fragment,{children:[j.length>1&&e.jsxs(u.Sub,{children:[e.jsx(u.SubMenuTrigger,{icon:fe,children:e.jsx(m,{...Q.moveConversationToSnorlax})}),e.jsx(u.Portal,{children:e.jsx(u.SubContent,{children:e.jsx(pe,{inSidebarFlyout:!1,onUpdateConversationGizmo:F=>{x({newGizmoId:F,conversation:t,previousGizmoId:r})},currentGizmoId:r})})})]}),e.jsx(u.Item,{onClick:()=>{x({newGizmoId:null,conversation:t,previousGizmoId:r})},icon:wt,children:e.jsx("div",{className:"overflow-hidden text-ellipsis whitespace-nowrap",children:e.jsx(m,{...Q.removeConversationFromSnorlax,values:{projectName:v?.gizmo.display.name??"project"}})})})]}),!d&&e.jsxs(u.Sub,{children:[e.jsx(u.SubMenuTrigger,{icon:fe,children:k.formatMessage(Q.addConversationToSnorlax)}),e.jsx(u.Portal,{children:e.jsx(u.SubContent,{children:e.jsx(pe,{inSidebarFlyout:!1,onUpdateConversationGizmo:F=>x({newGizmoId:F,conversation:t,previousGizmoId:r})})})})]}),e.jsx(u.Separator,{})]}),!n&&e.jsx(u.Item,{disabled:!c,onClick:()=>{setTimeout(()=>{c&&Ss.publish({kind:s?"editTitleInMainScreen":"editTitle",serverThreadId:c})},100)},icon:_t,children:e.jsx(m,{...f.renameChat})}),!1,e.jsx(u.Item,{disabled:!c,onClick:()=>{c&&We()},icon:Gt,children:e.jsx(m,{...f.archiveChat})}),e.jsx(u.Item,{color:"danger",disabled:!c,onClick:()=>{c&&xs(o,It,{serverThreadId:c,isActiveConversation:a})},icon:zt,"data-testid":"delete-chat-menu-item",children:e.jsx(m,{...f.deleteChat})})]})},He=({conversation:t,children:s,onOpenChange:a,inMainScreen:n=!1,isActiveConversation:o,inChatWindow:i=!1,...r})=>{const[d,l]=L.useState(!1);return e.jsx(le,{...r,open:d,onOpenChange:c=>{l(c),a?.(c)},side:"bottom",contentAlign:i?"end":"start",triggerButton:s,size:"auto",children:d&&e.jsx(Qs,{conversation:t,inMainScreen:n,isActiveConversation:o,inChatWindow:i})})},f=ie({newChat:{defaultMessage:"New chat",id:"GizmoInformation.newChat"},about:{defaultMessage:"About",id:"GizmoInformation.about"},privacySettings:{defaultMessage:"Privacy settings",id:"GizmoInformation.privacySettings"},viewDetails:{defaultMessage:"View details",id:"GizmoInformation.viewDetails"},share:{defaultMessage:"Share",id:"GizmoInformation.share"},favorite:{defaultMessage:"Favorite",id:"GizmoInformation.favorite"},customize:{defaultMessage:"Edit GPT",id:"GizmoInformation.customize"},feedbackEmail:{defaultMessage:"Send feedback",id:"GizmoInformation.feedbackEmail"},reviewGPT:{defaultMessage:"Review GPT",id:"GizmoInformation.reviewGPT"},report:{defaultMessage:"Report",id:"GizmoInformation.report"},privacy:{defaultMessage:"Privacy",id:"GizmoInformation.privacy"},deleteChat:{defaultMessage:"Delete",id:"GizmoInformation.deleteChat.0"},debugChat:{defaultMessage:"(Internal) Debug",id:"GizmoInformation.debugChat"},renameChat:{defaultMessage:"Rename",id:"GizmoInformation.renameChat"},archiveChat:{defaultMessage:"Archive",id:"GizmoInformation.archiveChat.0"},shareChat:{defaultMessage:"Share",id:"GizmoInformation.shareChat"},shareChatLong:{defaultMessage:"Share chat",id:"GizmoInformation.shareChatLong"}}),ya=Object.freeze(Object.defineProperty({__proto__:null,GizmoConversationOptionsDropdown:He,GizmoInformationDropdown:Xs,GizmoInformationDropdownItems:Ue},Symbol.toStringTag,{value:"Module"})),O=fs(ps(()=>({feedItems:[],hasUnreadNotifications:!1,isModalOpen:!1}))),ea=O.getState,ee=O.setState,ta={getHasUnreadNotifications:(t=ea())=>t.hasUnreadNotifications},G={setIsModalOpen:t=>{ee({isModalOpen:t})},setHasUnreadNotifications:t=>{ee({hasUnreadNotifications:t})},bulkLoadFeedItems:t=>{ee(s=>{s.feedItems=t})}};function sa(){const t=xe(),s=O(ta.getHasUnreadNotifications);return t&&s}function Re(t,s,a,n){const o=sa(),i=Ft();return o||n&&i?t:s}function xe(){const{layer:t}=X("3606233934",{shouldLogExposure:!1});return t.get("enable_notifications_feed")}function Sa(){const t=xe(),s=O(a=>a.isModalOpen);return t&&s}function aa(){const t=xe(),s=ne({queryKey:["fetch-notifications-feed"],queryFn:async()=>{const a=await he.safeGet("/notifications/feed");return G.bulkLoadFeedItems(a.items),G.setHasUnreadNotifications(a.has_unreads),a.items},enabled:t});return{isLoading:s.isLoading,isFetching:s.isFetching}}function Ca(){const t=w(),s=Re(Ut,Bt,!0,!1),a=t.formatMessage({id:"1UHY6w",defaultMessage:"Notifications"});return aa(),e.jsx(W,{label:a,className:"group",children:e.jsx($,{icon:s,onClick:()=>G.setIsModalOpen(!0),"aria-label":a})})}function na({item:t,closeModal:s}){const n={announcement:Dt}[t.type];let o=null;try{const c=new Date(t.created_at);o=Ot({date:c})}catch{}const{clientThreadId:i}=Oe(),r=Ms(i),d=V(),l=c=>{if(t.action?.type==="show_conversation")s(),d(t.action.conversation_id);else if(t.action?.type==="new_conversation"){const h=t.action;h.prefilled_message&&(r({sourceEvent:c,promptMessage:js(h.prefilled_message),requestedModelId:h.model_slug??void 0}),s())}};return e.jsxs("button",{className:"border-token-border-default flex w-full items-center justify-start gap-3 overflow-hidden border-t py-4 first-of-type:border-none",onClick:l,disabled:!t.action,children:[e.jsx("div",{className:"relative",children:n&&e.jsx(n,{className:"icon-md"})}),e.jsxs("div",{className:"flex h-5 shrink grow basis-0 items-center justify-between",children:[e.jsx("div",{className:"text-token-text-primary text-sm leading-tight font-normal",children:t.message}),e.jsx("div",{className:"flex items-center justify-start gap-1",children:e.jsx("div",{className:"text-token-text-tertiary text-sm leading-tight font-normal",children:o??""})})]})]})}function ka(){const{feedItems:t,isModalOpen:s}=O();L.useEffect(()=>{s&&(G.setHasUnreadNotifications(!1),he.safePost("/notifications/feed/read",{authOption:vs.SendIfAvailable}))},[s]);const a=w(),n=V(),{value:o}=E("3325813340"),i=new Date,r=Pt(t,l=>{const c=new Date(l.created_at);if(Et(c))return"today";const h=At(i,c);return h<=7?"last_7_days":h<=30?"last_30_days":"more_than_30_days"}),d=l=>{switch(l){case"today":return a.formatMessage({id:"zlkA39",defaultMessage:"Today"});case"last_7_days":return a.formatMessage({id:"FW89A4",defaultMessage:"Last 7 days"});case"last_30_days":return a.formatMessage({id:"2s3h/P",defaultMessage:"Last 30 days"});case"more_than_30_days":return a.formatMessage({id:"yArZiR",defaultMessage:"More than 30 days"})}};return e.jsx(Ae,{testId:"modal-notifications-feed",isOpen:s,onClose:()=>{G.setIsModalOpen(!1)},type:"success",size:"custom",className:"max-w-3xl",children:e.jsxs("div",{className:"flex flex-col gap-y-10",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h2",{className:"text-2xl font-bold",children:a.formatMessage({id:"kWt8Cx",defaultMessage:"Notifications"})}),o&&e.jsx(Lt,{icon:e.jsx(Ie,{className:"icon-lg"}),onClick:()=>{n("/#settings/Notifications")},label:a.formatMessage({id:"mZVh0S",defaultMessage:"Notifications settings"})})]}),Object.entries(r).map(([l,c])=>e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-bold",children:d(l)}),c.map(h=>e.jsx(na,{item:h,closeModal:()=>G.setIsModalOpen(!1)},h.id))]},l))]})})}function Ma({showShareButton:t,showProfileDropdown:s,clientThreadId:a}){const n=D(),o=Le(a),i=w(),{layer:r}=X("1547743984");se(n,"1288877412"),se(n,"3204157926");const[d,l,c,h]=be(a,S=>[ye.hasUserMessage(S),ye.getGizmoId(S),as(S),S?.is_do_not_remember??null]),z=bs(a),{prefetchSearchPromises:C}=Oe(),I=C!=null,B=r.get("show_share_button_text",!1),_=i.formatMessage({id:"GizmoInformation.shareChat",defaultMessage:"Share"}),k=()=>g.openSharingModal(o),j=oe(l),T=ue();ys();const{isUnauthenticated:v}=J(),x=be(a,S=>S),U=L.useMemo(()=>a==null?null:{id:a,title:x?.title??"",create_time:null,update_time:null,conversation_template_id:null,async_status:x?.async_status??null,gizmo_id:l??null,snippet:null,is_do_not_remember:h},[l,a,x?.title,x?.async_status,h]);return e.jsxs(e.Fragment,{children:[e.jsx(qt,{}),ae(n)?e.jsx(Kt,{}):null,!1,!v&&!l&&z&&!I&&!d&&e.jsxs(e.Fragment,{children:[!1,e.jsx(Vt,{layout:"wide",clientThreadId:a})]}),ae(n)&&T?.includes("caterpillar")&&e.jsx(Wt,{}),null,t&&o&&e.jsx(e.Fragment,{children:B?e.jsx(P,{onClick:k,icon:ve,label:_,"data-testid":"share-chat-button",color:"secondary",className:"text-token-text-primary",style:{viewTransitionName:"var(--vt_share_chat_wide_button)"},children:_}):e.jsx(W,{label:i.formatMessage({id:"CPEfES",defaultMessage:"Share chat"}),children:e.jsx($,{"data-testid":"share-chat-button",onClick:k,icon:ve,style:{viewTransitionName:"var(--vt_share_chat_compact_button)"}})})}),o!=null&&U!=null&&!v?e.jsx(He,{conversation:U,inMainScreen:!0,isActiveConversation:!0,inChatWindow:!0,children:e.jsx($t,{"aria-label":i.formatMessage({id:"9Mk/E3",defaultMessage:"Open conversation options"}),"data-testid":"conversation-options-button"})}):l&&j?e.jsx(e.Fragment,{children:e.jsx(Yt,{gizmoId:l})}):null,s&&e.jsx(ia,{clientThreadId:a})]})}function ia({clientThreadId:t}){const s=D();return je.markStart("LoginOrProfileMenu"),je.markRendered("LoginOrProfileMenu"),e.jsxs(e.Fragment,{children:[!ae(s)&&e.jsx(la,{}),e.jsx(Qt,{clientThreadId:t})]})}function oa({onClick:t,className:s,testId:a}){const n=w(),o=Ee(),i=n.formatMessage({id:"OFyxqj",defaultMessage:"New chat"}),r=d=>{!Zt(window)&&!o&&g.toggleNavCollapsed(!0),d.metaKey||d.ctrlKey?N.logEventWithStatsig("New Chat Opened In New Tab","chatgpt_new_chat_opened_in_new_tab"):(d.preventDefault(),t())};return e.jsx(W,{label:i,className:p("flex",s),children:e.jsx($,{onClick:r,icon:Ge,"aria-label":i,"data-testid":a,as:"link"})})}function Na({clientThreadId:t,hideNewChat:s=!1}){const[a]=Fe(i=>[i.activeStageSidebar]),n=Pe(),o=Ht({clientThreadId:t,location:"Navigation actions"});return!n&&!a?null:e.jsxs("div",{className:"flex items-center",children:[e.jsx(ra,{}),!s&&e.jsx(oa,{onClick:o})]})}function ra(){const t=w(),[s]=Fe(c=>[c.activeStageSidebar]),a=Pe(),n=Rt(),o=Ee(),{isUnauthenticated:i}=J(),r=Re(Xt,Jt,!0,!0),{layer:d}=X("3737571708"),l=d.get("sidebar_type","slick");return i&&l==="slick"||!s&&!a||!n?null:e.jsx(W,{label:t.formatMessage({id:"cElEQV",defaultMessage:"Open sidebar"}),className:"flex",children:e.jsx($,{"aria-label":t.formatMessage({id:"pV/Etp",defaultMessage:"Open sidebar"}),onClick:()=>{g.toggleNavCollapsed(!1,"button_click"),o&&g.setIsSidebarLocked(!0)},icon:r})})}function la(){const t=es(),s=ts(),a=ss(ca.signUpCta),{layer:n}=X("3637408529"),o=n.get("is_desktop_primary_auth_button_on_right",!1),i=()=>{t({authType:"login",callback:h=>{N.logLogInButtonClicked({location:"Chat header",provider:h})}})},r=()=>{t({authType:"signup",callback:h=>{N.logSignUpButtonClicked({location:"Chat header",provider:h})}})},d=e.jsx(P,{onClick:i,color:s?"primary":"secondary","data-testid":"login-button",className:p(!s&&"screen-arch:hidden md:screen-arch:flex"),children:e.jsx(m,{id:"B1SN7b",defaultMessage:"Log in"})},"login"),l=e.jsx(P,{color:s?"secondary":"primary",onClick:r,"data-testid":"signup-button",className:p(s&&"screen-arch:hidden md:screen-arch:flex"),children:e.jsx(m,{...a})},"signup"),c=s?[d,l]:[l,d];return e.jsx("div",{className:"flex items-center justify-center gap-2",children:o?c.reverse():c})}const ca=ie({signUpCta:{id:"P6cySK",defaultMessage:"Sign up"}});export{Ma as C,ra as E,Ws as G,ia as L,Na as N,ba as a,Be as b,Ns as c,ka as d,Re as e,la as f,ja as g,xe as h,Ca as i,oa as j,ya as k,Sa as u};
//# sourceMappingURL=fii0gwkgtas4sckd.js.map
