const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/ft1d6nfto9ph9vmv.js","assets/msupklk377u8vx8o.js","assets/i3bl95k8z8nuf4dv.js","assets/root-en2soewk.css","assets/fml15imew58q2tfq.js","assets/nfdankr6r3tis32a.js","assets/idf4u2jy0wx0pvap.js","assets/conversation-small-irmw3ffz.css","assets/nldog6xzrxdjupw9.js","assets/ju1ci02jioqmoctd.js","assets/fjfu7kbgt4p55wff.js","assets/fii0gwkgtas4sckd.js","assets/k4oexpwbiepmd1cd.js","assets/np9w83f07wa6edf5.js","assets/gc51ish3otzvnj1w.js","assets/hwl3hzno2kq7obfl.js","assets/hmii3551qscelikg.js","assets/i3xeaua08fnq6vw7.js","assets/gd7xfxa2yqt151v4.js","assets/igftvtdft8b4phs3.js","assets/o2t4lszmsavslsdu.js","assets/gwmfzjrffpu4d2tx.js","assets/srha86i9wo52jwpc.js","assets/79g682b4ut5i1adn.js","assets/e38jtoe1pk39q0qz.js","assets/ot1k26387o73dpla.js","assets/lripkcxmyjmx76pd.js","assets/euq7ybw4dhrsufo2.js"])))=>i.map(i=>d[i]);
import{bo as $e,f2 as ea,c as E,an as D,bQ as ta,B as Te,bI as qe,g as Ie,j as aa,bi as sa,o as oa,ar as ye,gK as na,H as Q,bg as H,O as bt,b2 as vt,u as ia,c4 as St,bE as fe,gj as ra,ap as X,aq as ee,bG as ct,bH as dt,bj as me,s as Ke,bM as la,b as wt,bk as ca,f as Ae,d5 as Ze,bO as da,d2 as Ct,r as jt,v as Mt,_ as _t,aA as Be,e8 as ua,d as ha,bn as ga,bu as ma,aw as ut,h4 as pa,ay as fa,go as xa,bs as ya,e2 as ba,eN as va,bN as Sa,bJ as wa,ax as te,gB as Ca}from"./i3bl95k8z8nuf4dv.js";import{r,d as Je,a as Xe,j as e,a8 as Ye,M as L,f as q,g as Nt,s as ja,L as Ma,u as _a,v as Na,R as ka,o as Ta}from"./msupklk377u8vx8o.js";import{u as kt,P as Aa}from"./hwl3hzno2kq7obfl.js";import{C as et,u as tt,d as be}from"./gc51ish3otzvnj1w.js";import{hX as Tt,oC as ve,jt as Ea,d8 as Pa,ns as At,jv as Ia,jw as Et,jy as Ra,j as ht,jx as La,oD as Wa,kM as Ha,bx as gt,oE as Ga,bn as Oa,gC as Pt,dr as Da,ds as Fa,oF as Ua,oG as ke,ao as pe,kg as Fe,eM as za,f1 as Va,ff as qa,bw as Ba,bl as Ya,dt as Qa,t as Qe,oH as $a,du as Ka,P as It,F as Za,gE as Rt,oI as Lt,oJ as mt,oK as Ja,oL as Xa,oM as at,V as Wt,oN as es,c0 as ts,oO as xe,e as Ht,fK as as,fx as ss,U as Ee,H as os,oP as ns,oQ as is,gz as rs,gB as ls,gD as cs,oR as pt,oS as ds,ae as Gt,oT as us,W as hs,oU as gs,oV as ms,oW as ps,oX as fs,li as xs,fA as ys,dg as bs,ia as Ot,oY as vs,kz as T,b0 as R,ii as Ss,oZ as ws,ih as Cs,ct as Dt,cU as js,o_ as Ms,kI as ft,d as _s,o$ as Ns,p0 as ks,p1 as Ts,p2 as As,y as Ft,eN as Es,M as st,u as Ps,p3 as Ut,e5 as Is,p4 as Rs,O as Ls,p5 as Ws,gJ as Hs,p6 as Gs,fR as Os,p7 as Ds,hF as Fs,gN as Us,gO as xt,he as zs,Q as Vs,gM as qs,p8 as Bs,db as Ys,lG as Qs,gI as $s,p9 as Ks,pa as Ue,pb as Zs,pc as Js,fr as Xs,pd as eo,k9 as zt,pe as to,pf as ao,pg as so,mF as oo,j0 as no,ph as io,pi as ro,pj as lo,pk as co,pl as uo,pm as ho,pn as go,po as mo,pp as po,pq as fo,pr as xo,ps as yo}from"./idf4u2jy0wx0pvap.js";import{C as bo,N as vo,g as So}from"./fii0gwkgtas4sckd.js";import{u as wo,b as Co}from"./gwmfzjrffpu4d2tx.js";import{I as jo,P as Mo,M as _o,F as No,T as ko}from"./jm9661216xi1kol5.js";import{b as To}from"./o2t4lszmsavslsdu.js";import{T as Ao}from"./l79p1rsauk0lwxt6.js";import"./eyf2nwgexpz6pjnh.js";const Eo=({assetPointer:t,isInFocusMode$:a,serverThreadId:o,transformationId:i,width:s,height:n,onEdit:l})=>{const c=Tt(),[g,y]=r.useState(!1),[v]=$e(o,u=>[u?.modelId]),m=kt(o),C=ve(),p=Je(),h=Xe(),d=r.useRef(null);r.useEffect(()=>{jo.prefetch()},[]),r.useEffect(()=>{y(!1),a?.set(!1)},[t,a]),r.useEffect(()=>ea(()=>{a&&!a()&&y(!1)}),[a]),Ea(r.useMemo(()=>({image:{asset_pointer:t,metadata:{dalle:{gen_id:i},generation:{gen_id:i}},height:n,width:s},currentDrawnShape:null,onCleared:()=>{},getImageData:()=>{}}),[i,t,n,s]));const S=u=>{C.transitionToPage({type:"conversation",value:void 0},()=>{l?.(),Ha(p,h,o,void 0,!0),m(u)})},x=Pa();return e.jsx(At,{children:e.jsx(Ye.div,{layout:!c,transition:{type:"spring",duration:.2},className:E(g?"w-full rounded-3xl":"mx-auto rounded-full"),children:g?e.jsx(Ia,{value:{isImageGenEditor:!0,isInpainting:!1,onCancelInpaint:()=>{}},children:e.jsx(et,{clientThreadId:o,children:e.jsx(Mo,{clientThreadId:o,currentModelId:v??Et(void 0).id,disableDraftPersistence:!0,onRequestCompletion:async u=>{a?.set(!1),D.logEventWithStatsig("chatgpt_web_image_library_lightbox_image_edit_submitted","chatgpt_web_image_library_lightbox_image_edit_submitted"),ta(o)==null&&await(d.current??ht(o,!0)),S(await La(u))},onContinueGenerating:u=>S(Ra(u)),hideHeader:!0,isNewThread:!1})})}):e.jsx(Te,{color:"secondary",size:x?"large":void 0,className:"px-4 max-md:min-w-[50vw]",onClick:()=>{D.logEventWithStatsig("chatgpt_web_image_library_lightbox_image_composer_opened","chatgpt_web_image_library_lightbox_image_composer_opened"),y(!0),a?.set(!0),d.current=ht(o,!0).finally(()=>{d.current=null})},icon:x?void 0:Wa,children:e.jsx(Ye.div,{initial:c?!1:{opacity:0},animate:{opacity:1},children:e.jsx(L,{id:"BD4ZLh",defaultMessage:"Edit image"})})})})})},Po=({assetPointer:t,serverThreadId:a,messageId:o})=>{const i=q(),[s,n]=r.useState(!1),l=wo({assetPointer:t,clientThreadId:a,imageGenMessageId:o}),c=r.useCallback(async()=>{n(!0);try{await l()}finally{n(!1)}D.logEventWithStatsig("chatgpt_web_image_library_lightbox_image_share_clicked","chatgpt_web_image_library_lightbox_image_share_clicked")},[l]),g=i.formatMessage({id:"lqgWN2",defaultMessage:"Share"});return e.jsxs(e.Fragment,{children:[e.jsx(Te,{className:"max-md:hidden",color:"secondary",icon:s?qe:gt,onClick:c,disabled:s,children:g}),e.jsx(Te,{color:"ghost",className:"text-token-text-secondary w-10 md:hidden",icon:s?qe:gt,size:"xl",onClick:c,label:g,disabled:s})]})},Io=({initialIndex:t,includeArchived:a,onScrollToEnd:o,onClose:i})=>{const s=q(),n=Ie(),l=aa(n).checkGate("1520205231"),{archiveMutation:c}=Ga(a),g=Oa(),[y]=r.useState(()=>sa(!1)),v=ve(),m=Je(),{images:C}=Pt(a);return e.jsxs(Da,{imageList:C,initialIndex:t??0,onClose:i,isInFocusMode$:y,onScrollToEnd:o,children:[e.jsx(Fa,{children:({title:p,createdAt:h})=>e.jsxs("div",{className:"flex min-h-12 min-w-0 flex-col items-center max-md:h-full",children:[e.jsx("h2",{className:"text-token-text-primary max-w-full min-w-0 grow justify-center self-start truncate text-base text-balance max-md:flex max-md:items-center max-md:ps-2",children:e.jsx("span",{className:"line-clamp-2",children:p??e.jsx(L,{id:"OIDfvR",defaultMessage:"Image Generation"})})}),h&&e.jsx("span",{className:"text-token-text-secondary text-sm max-md:hidden",children:h.toDateString()})]})}),e.jsxs(Ua,{children:[e.jsx(ke,{children:({conversationId:p,messageId:h})=>e.jsx(pe,{label:s.formatMessage(V.openInChat),children:e.jsx(Fe,{className:"aspect-square",icon:za,onClick:d=>{D.logEventWithStatsig("chatgpt_web_image_library_lightbox_image_open_in_chat_clicked","chatgpt_web_image_library_lightbox_image_open_in_chat_clicked"),d.preventDefault(),v.addClassToCurrentTransition(["from-lightbox","to-conversation"]),v.transitionToPage({type:"conversation",value:void 0},async()=>{i(null),await m(`/c/${p}?message=${h}`,{preventScrollReset:!0})})},"aria-label":s.formatMessage(V.openInChat)})})}),l&&e.jsx(ke,{children:({id:p,archived:h})=>e.jsx(pe,{label:s.formatMessage(h?V.unarchive:V.archive),children:e.jsx(Fe,{className:"aspect-square",icon:h?qa:Va,onClick:()=>{D.logEventWithStatsig(h?"chatgpt_web_image_library_lightbox_image_unarchive_clicked":"chatgpt_web_image_library_lightbox_image_archive_clicked",h?"chatgpt_web_image_library_lightbox_image_unarchive_clicked":"chatgpt_web_image_library_lightbox_image_archive_clicked"),c.mutate({imageId:p,operation:h?"unarchive":"archive"})},"aria-label":s.formatMessage(h?V.unarchive:V.archive)})})}),e.jsx(ke,{children:({url:p,title:h})=>e.jsx(pe,{label:s.formatMessage(V.download),children:e.jsx(Fe,{className:"aspect-square",icon:Ba,onClick:()=>{D.logEventWithStatsig("chatgpt_web_image_library_lightbox_image_download_clicked","chatgpt_web_image_library_lightbox_image_download_clicked"),Ya({url:p,fileName:`${h??s.formatMessage({id:"cYxKbe",defaultMessage:"My ChatGPT image"})}.png`})},"aria-label":s.formatMessage(V.download)})})}),g()&&e.jsx(ke,{children:({assetPointer:p,conversationId:h,messageId:d})=>!h||!d?null:e.jsx(Po,{assetPointer:p,serverThreadId:h,messageId:d})})]}),e.jsx(Qa,{children:({url:p,width:h,height:d,title:S,position:x})=>e.jsx("img",{className:$a("bg-tertiary block h-fit max-h-full w-auto rounded-lg object-contain shadow-xl max-md:rounded-none max-md:shadow-none",x==="current"&&"[view-transition-name:var(--vt-active-image)]"),style:x&&x!=="current"?{viewTransitionName:`var(--vt-image-${x})`}:void 0,src:Qe(p),width:h,tabIndex:0,height:d,alt:S??""})}),e.jsx(Ka,{children:({width:p,height:h,assetPointer:d,conversationId:S,transformationId:x})=>S&&d&&e.jsx(Eo,{isInFocusMode$:y,onEdit:()=>i(null),width:p,height:h,assetPointer:d,serverThreadId:S,transformationId:x})})]})},V=Nt({download:{id:"Z23tMl",defaultMessage:"Download image"},openInChat:{id:"Eh8G/f",defaultMessage:"Open in Chat"},archive:{id:"yOqxdz",defaultMessage:"Hide image"},unarchive:{id:"yEUKZl",defaultMessage:"Show image"}}),Ro=({disableEntryAnimation:t=!1,hasMoreImages:a,count:o,images:i,includeArchived:s,isFetchingMore:n,onScrollToEnd:l})=>{const c=a?Math.max((o??0)-(i.length??0),0):0,[g,y]=r.useState(!1),[v,m]=r.useState(null),C=ve(),p=Ie(),{clientThreadId:h}=tt(),d=r.useCallback(S=>{D.logEventWithStatsig("chatgpt_web_image_library_lightbox_opened","chatgpt_web_image_library_lightbox_opened"),y(!0),m(S),C.transitionToPage({type:"lightbox",value:void 0},()=>{oa(p,({closeModal:x})=>e.jsx(It,{clientThreadId:h,children:e.jsx(Za,{children:e.jsx(Rt,{children:e.jsx(Io,{includeArchived:s,onClose:u=>{if(u==null){x();return}Lt({update:()=>{x(),m(u),y(!0)},className:"from-lightbox",forceFlushSync:!0}).finished.then(()=>y(!1))},initialIndex:S,onScrollToEnd:l})})})})),y(!1)})},[h,p,s,l,C]);return e.jsxs("div",{className:"w-full",children:[e.jsx("div",{className:"grid min-h-60 w-full grid-cols-2 gap-4 max-md:gap-0.5 sm:grid-cols-3 md:grid-cols-4",children:i.map(({url:S,thumbnail:x,width:u,height:M,title:_=null},k)=>e.jsx(mt,{disableEntryAnimation:t,index:k,active:g&&v===k,src:Qe(S),onClick:d,thumbnail:Qe(x),width:u,height:M,alt:_,children:k===i.length-1&&e.jsx(Ja,{onScrollToEnd:l})},k)).concat(new Array(c).fill(null).map((S,x)=>{const u=i.length+x;return e.jsx(mt,{index:u,disableEntryAnimation:t,isPlaceholder:!0,active:!1},u)}))}),e.jsx("div",{className:"flex h-8 items-center justify-center",children:a&&n&&e.jsx(qe,{})})]})};function Lo(t){const{clientThreadId:a}=t;return e.jsx(et,{clientThreadId:a,children:e.jsx(Ho,{...t})})}function Wo({clientThreadId:t,headlineOption:a,currentModelId:o,isModelLoaded:i}){const s=at(),n=ts(),l=be(),{isFocused:c,autocompletions:g}=St(l.store),y=c&&g.length>0,v=xe(),m=fe(v.isImageGenLandingPageEnabled$);return e.jsxs(Ye.div,{initial:{opacity:0},animate:{opacity:y?0:1},exit:{opacity:0},transition:{duration:.1},className:E("text-token-text-primary mt-[var(--screen-optical-compact-offset-amount)] [display:var(--display-hidden-until-loaded,flex)] shrink flex-col items-center justify-center overflow-hidden",n?"keyboard-open:h-[calc(100%-var(--screen-keyboard-height,0px)-var(--composer-height,100px))] h-full motion-safe:[transition:height_0.3s_var(--easing-common)]":"h-full",y?"pointer-events-none":"",s?"@lg/thread:hidden":"lg:hidden"),children:[a==="CHATGPT_LOGO"?e.jsx(bt,{className:"inline-block h-12 w-12"}):e.jsx(Vt,{headlineOption:a}),!m&&e.jsx(_o,{isModelLoaded:i,currentModelId:o,clientThreadId:t})]})}function Ho({clientThreadId:t,currentModelId:a,isModelLoaded:o}){const i=be(),{isUnauthenticated:s}=ye();na(),Xa(i);const{layer:n}=Q("4031588851"),{layer:l}=Q("3533083032",{shouldLogExposure:!1}),c=s?l:n,g=at(),y=c.get("headline_option","HELP_WITH"),C=Wt().has(H.Research)?N.deepResearchPlaceholder:void 0;return e.jsxs("div",{className:E("flex items-center justify-center",g?"@lg/thread:items-end":"lg:items-end"),children:[e.jsx("div",{className:E("mb-7 hidden text-center @lg/thread:block",g?"@lg/thread:block":"lg:block"),children:y==="CHATGPT_LOGO"?e.jsx(bt,{className:"inline-block h-12 w-12"}):e.jsx(Vt,{headlineOption:y,overrideMessage:C})}),e.jsx(Wo,{headlineOption:y,clientThreadId:t,isModelLoaded:o,currentModelId:a})]})}function Go({headlineOption:t,overrideMessage:a}){function o({name:u}){return e.jsx(pe,{label:n.formatMessage(N.editNicknameTooltip),delayDuration:300,side:"top",children:e.jsx("button",{onClick:()=>{Ee.setAutoHighlightNicknameInput(!0),Ee.openModal(os.UserContext)},style:{textDecoration:"none",transition:"color 0.2s"},onMouseEnter:M=>{M.currentTarget.className="text-token-text-secondary"},onMouseLeave:M=>{M.currentTarget.className="text-inherit"},children:u})})}function i(){const u=[],M=[];u.push("READY_WHEN_YOU_ARE","ON_YOUR_MIND","WHAT_ARE_YOU_WORKING_ON","AGENDA_TODAY","SHOULD_WE_BEGIN"),M.push("GOOD_TO_SEE_YOU","DIVE_IN","HOW_CAN_I_HELP",...u);const _=M[Math.floor(Math.random()*M.length)],A=`${u[Math.floor(Math.random()*u.length)]} | ${_}`;X.setCookie(ee.headlineMessage,A)}function s(){const u=X.getCookie(ee.GreetingName),_=X.getCookie(ee.headlineMessage)?.split("|"),k=_?.[0]?.trim(),A=_?.[1]?.trim();return{cookieName:u,isReadyForPersonalized:!!u&&u.length<=c,headline:k,namedHeadline:A}}const n=q(),{layer:l}=Q("1704793646"),c=l.get("name_char_limit",20),[g,y]=r.useState(s),{isUnauthenticated:v}=ye(),m=Ht(),p=as(!v&&!!m)?.data,h=ss(),d=l.get("greeting_web",!1),S=l.get("full_name_llm",!1);r.useEffect(()=>{if(d&&h){if(m&&p){const u=ra(p,m,S);X.setCookie(ee.GreetingName,u),ct.count(dt.MOONSHINE,"splashScreenV2.greeting_cookie_name_set_web")}i()}else X.deleteCookie(ee.GreetingName),X.deleteCookie(ee.headlineMessage)},[p,m,d,S,h]),r.useEffect(()=>{const u=()=>{if(d&&h){const{cookieName:M,isReadyForPersonalized:_}=s();y(k=>({...k,cookieName:M,isReadyForPersonalized:_}))}};return window.addEventListener("refreshGreeting",u),()=>window.removeEventListener("refreshGreeting",u)}),r.useEffect(()=>{d&&h&&ct.count(dt.MOONSHINE,"splashScreenV2.greeting_shown_web")},[d,h]);let x;return a?x=n.formatMessage(a):g.isReadyForPersonalized&&d?x=e.jsx(e.Fragment,{children:e.jsx(L,{...ze[g.namedHeadline??t].withName,values:{name:e.jsx(o,{name:g.cookieName??""},"name")}})}):d?x=n.formatMessage(ze[g.headline??t].original):x=n.formatMessage(ze[t].original),x}function Vt({headlineOption:t,overrideMessage:a}){const o=vt(),i=r.useRef(null),[s,n]=r.useState({isTempChatVisible:o,titleTranslate:0});return ia(()=>{n({isTempChatVisible:o,titleTranslate:o?-((i.current?.offsetHeight??0)-40):0})},[o]),e.jsx("div",{className:"relative inline-flex justify-center text-center text-2xl leading-9 font-semibold",children:e.jsx("div",{children:e.jsxs("div",{className:"grid-cols-1 items-center justify-end",style:{viewTransitionName:"var(--vt-splash-screen-headline)"},children:[e.jsx("h1",{className:E("inline-flex min-h-10.5 items-baseline text-[28px] leading-[34px] font-normal tracking-[0.38px] whitespace-pre-wrap motion-safe:[transition:0.25s_transform_var(--spring-standard),0.2s_opacity_var(--spring-standard),0.3s_visibility_var(--spring-standard)]",s.isTempChatVisible?"invisible opacity-0":"opacity-100"),"aria-hidden":o,style:{transform:`translateY(${s.titleTranslate}px)`},children:e.jsx("div",{className:"px-1 text-pretty whitespace-pre-wrap",children:e.jsx(Go,{headlineOption:t,overrideMessage:a})})}),e.jsx("div",{className:E("absolute bottom-0 motion-safe:[transition:0.25s_transform_var(--spring-standard),0.2s_opacity_var(--spring-standard),0.3s_visibility_var(--spring-standard)]",s.isTempChatVisible?"translate-y-0 opacity-100":"invisible translate-y-10 opacity-0"),"aria-hidden":!o,ref:i,children:e.jsx(es,{})})]})})})}const N=Nt({whatCanIHelpWith:{id:"SplashScreenV2.whatCanIHelpWith",defaultMessage:"What can I help with?"},whatCanIHelpWithWithName:{id:"SplashScreenV2.whatCanIHelpWith.withName",defaultMessage:"What can I help with, {name}?"},whereShouldWeStart:{id:"SplashScreenV2.whereShouldWeStart",defaultMessage:"Where should we start?"},whereShouldWeStartWithName:{id:"SplashScreenV2.whereShouldWeStart.withName",defaultMessage:"Where should we start, {name}?"},askChatgptAnything:{id:"SplashScreenV2.askChatgptAnything",defaultMessage:"Ask ChatGPT anything"},askChatgptAnythingWithName:{id:"SplashScreenV2.askChatgptAnything.withName",defaultMessage:"Ask ChatGPT anything, {name}"},shouldWeBegin:{id:"SplashScreenV2.shouldWeBegin",defaultMessage:"Where should we begin?"},goodToSeeYouWithName:{id:"SplashScreenV2.goodToSeeYou.withName",defaultMessage:"Good to see you, {name}."},diveInWithName:{id:"SplashScreenV2.diveInWithName",defaultMessage:"Hey, {name}. Ready to dive in?"},readyWhenYouAre:{id:"SplashScreenV2.readyWhenYouAre",defaultMessage:"Ready when you are."},onYourMind:{id:"SplashScreenV2.onYourMind",defaultMessage:"What's on your mind today?"},whatAreYouWorkingOn:{id:"SplashScreenV2.whatAreYouWorkingOn",defaultMessage:"What are you working on?"},agendaToday:{id:"SplashScreenV2.agendaToday",defaultMessage:"What's on the agenda today?"},deepResearchPlaceholder:{id:"G1v9do",defaultMessage:"What are you researching?"},editNicknameTooltip:{id:"SplashScreenV2.editNicknameTooltip",defaultMessage:"Edit nickname"},howCanIHelp:{id:"SplashScreenV2.howCanIHelp",defaultMessage:"How can I help?"},howCanIHelpWithName:{id:"SplashScreenV2.howCanIHelp.withName",defaultMessage:"How can I help, {name}?"}}),ze={HELP_WITH:{original:N.whatCanIHelpWith,withName:N.whatCanIHelpWithWithName},WHERE_TO_START:{original:N.whereShouldWeStart,withName:N.whereShouldWeStartWithName},ASK_CHATGPT:{original:N.askChatgptAnything,withName:N.askChatgptAnythingWithName},HOW_CAN_I_HELP:{original:N.howCanIHelp,withName:N.howCanIHelpWithName},GOOD_TO_SEE_YOU:{original:N.goodToSeeYouWithName,withName:N.goodToSeeYouWithName},DIVE_IN:{original:N.diveInWithName,withName:N.diveInWithName},READY_WHEN_YOU_ARE:{original:N.readyWhenYouAre,withName:N.readyWhenYouAre},ON_YOUR_MIND:{original:N.onYourMind,withName:N.onYourMind},WHAT_ARE_YOU_WORKING_ON:{original:N.whatAreYouWorkingOn,withName:N.whatAreYouWorkingOn},AGENDA_TODAY:{original:N.agendaToday,withName:N.agendaToday},SHOULD_WE_BEGIN:{original:N.shouldWeBegin,withName:N.shouldWeBegin}};function Oo({onClick:t}){return e.jsxs("div",{className:"flex flex-col",children:[e.jsx("button",{onClick:t,"aria-labelledby":"upload-image-label",className:"relative",id:"upload-image-button",type:"button",children:e.jsx("div",{className:"bg-token-main-surface-primary dark:bg-token-main-surface-secondary border-token-border-default z-1 flex aspect-square items-center justify-center overflow-hidden rounded-2xl border p-5 text-xs transition-[transform_box-shadow] duration-[0.24s] select-none hover:motion-safe:scale-105",children:e.jsxs("div",{className:"text-token-text-tertiary inline-flex items-center justify-center",children:[e.jsx(ds,{"aria-label":"",className:"h-12 w-12"}),e.jsx(Gt,{"aria-label":"",className:"absolute start-1/2 top-1/2 ms-1 mt-1 h-8 w-8"})]})})}),e.jsx("div",{id:"upload-image-label",className:"text-token-text-secondary mt-8 w-full text-center text-sm font-medium",children:e.jsx(L,{id:"DJ+4dI",defaultMessage:"Upload an image"})})]})}function yt({card:t,className:a,label:o}){const{formatMessage:i}=q();return typeof t.url=="string"?e.jsx("img",{src:t.url,alt:i(t.prompt),className:a}):e.jsxs("picture",{className:a,children:[t.url.map(({type:s,url:n})=>s==="jpg"?null:e.jsx("source",{srcSet:n,type:`image/${s}`},n)),e.jsx("img",{"aria-label":o,src:t.url[0].url,alt:i(t.prompt),className:E(a,"h-full w-full object-cover")})]})}function Do({type:t,images:a,onClick:o}){const[i,s]=r.useState(0),{formatMessage:n}=q(),l=i+1>=a.length?0:i+1,c=a[i].prompt;return e.jsxs("div",{children:[e.jsxs("div",{className:"group/stack relative flex justify-center",children:[e.jsx("div",{onClick:()=>{const g=i+1>=a.length?0:i+1;s(g)},className:E("bg-token-bg-primary relative z-2 grid aspect-square h-full overflow-clip rounded-xl text-xs shadow-lg transition-transform duration-[0.24s]","group-hover/stack:-translate-x-2 group-hover/stack:rotate-[-3deg] group-hover/stack:shadow-md",a.length>1&&"cursor-pointer"),children:e.jsx(yt,{card:a[i],label:n(c)})},i),e.jsx("div",{className:E("ease-in-expo ease-spring-standard absolute top-0 left-0! flex aspect-square w-full translate-y-2 rotate-[2deg] opacity-40 transition-transform duration-[0.24s]","group-hover/stack:translate-x-2 group-hover/stack:translate-y-[0px] group-hover/stack:rotate-[4deg]"),children:e.jsx(yt,{card:a[l],label:n(c),className:E(us.fadeScale,"aspect-square w-full overflow-hidden rounded-xl shadow-xl")})},l),e.jsx("button",{id:n(c),onClick:()=>o(n(c)),tabIndex:0,className:"border-token-border-default bg-token-main-surface-primary hover:bg-token-main-surface-tertiary can-hover:z-0 absolute bottom-6 flex w-fit items-center justify-center rounded-full border px-3 py-1 text-sm shadow-md duration-[0.24s] group-hover/stack:z-11 focus-visible:z-11 active:scale-98 motion-safe:transition-[background-color,transform]",children:e.jsx(L,{id:"wk6Ayk",defaultMessage:"Try this prompt"})})]}),t&&e.jsx("div",{className:"text-token-text-secondary mt-8 w-full text-center text-sm font-medium",children:n(t)})]})}function Fo({onCardClick:t,onUploadCardClick:a}){const{value:o}=me("2640502720"),i=q(),n=Ke()?.isWorkspacePlan()?ns:is,l=xe(),[c,g]=r.useState(!1),{images:y,hasNextPage:v,isLoading:m,isFetchingNextPage:C,fetchNextPage:p}=Pt(c),{data:h,isLoading:d}=rs(),S=be(),x=h?.images_count,u=!!x,M=!!h?.archived_images_count,k=!d&&!u,A=ja({id:"Gd9T7H",defaultMessage:"My Library"});return e.jsxs("div",{className:"mx-auto flex w-full flex-col items-center",children:[e.jsxs("div",{className:"my-6 grid w-full grid-cols-2 gap-4 gap-y-10 max-md:px-4 sm:grid-cols-3 md:grid-cols-4",children:[e.jsx(Oo,{onClick:a}),n.map(f=>e.jsx(Do,{type:f.type,images:f.images,onClick:G=>{t(G),f.needsUpload&&l.showUploadSuggestion$.set(!0)}},String(f.type.defaultMessage)))]}),e.jsx("div",{className:E("z-50 mt-4 flex w-full items-center justify-between max-md:px-4",o&&"sticky top-[9px]"),children:e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"flex text-lg font-medium",children:e.jsx(L,{...A})}),u&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-token-text-tertiary flex gap-6 text-sm",children:e.jsx(L,{id:"Grwczz",defaultMessage:"{count, plural, =0 {No images} one {# image} other {# images}}",values:{count:x}})}),M&&e.jsx(ls,{includeArchived:c,setIncludeArchived:g})]})]})}),!k&&e.jsx("div",{className:"mt-4 mb-6 w-full border-t max-md:mb-6 max-md:hidden"}),k&&e.jsx(cs,{onClick:()=>{const f=pt(n),G=pt(f?.images??[]);G&&t(i.formatMessage(G.prompt)),S.focus()}}),!k&&e.jsx("div",{className:"min-h-svh w-full max-md:px-4",children:e.jsx(Ro,{count:x??0,images:y??[],includeArchived:c,hasMoreImages:v,isFetchingMore:C||m,onScrollToEnd:p})})]})}const Uo=({systemHint:t})=>{const{updateSystemHint:a}=hs(),o=ve(),{transitionToNextPage:i}=gs(),{clientThreadId:s}=tt();r.useEffect(()=>{o.activeViewTransition&&o.signalTransitionReady()},[o]),r.useEffect(()=>{a(t,{clientThreadId:s})},[t,s,a]);let n=null;switch(t){case H.Canvas:n=e.jsx(L,{id:"4+tS2L",defaultMessage:"Write with canvas"});break;case H.PictureV2:n=e.jsx(L,{id:"QtMyOg",defaultMessage:"Make an image"});break;case H.Research:n=e.jsx(L,{id:"Rdax1G",defaultMessage:"Deep research"});break;default:n=e.jsx(L,{id:"UrTsbY",defaultMessage:"Unknown landing page"});break}return e.jsx(ms,{children:e.jsxs(ps,{className:"mt-[100px] flex flex-col items-center gap-6",children:[e.jsx(fs,{isBadge:!0,isLauncher:!1,systemHint:t,label:null}),e.jsxs("div",{className:"flex flex-col items-center justify-center gap-3",children:[e.jsx("div",{"data-landing-page-load-target":!0,className:"text-token-text-primary text-4xl font-medium tracking-tight [text-box-trim:trim-both] [view-transition-name:var(--vt-tool-page-title)] md:text-5xl",children:n}),e.jsxs(Ma,{to:"/",viewTransition:!0,onClick:l=>{l.preventDefault(),i({path:"/",nextPageType:{type:"home",value:void 0},update:()=>{a(null,{clientThreadId:s})}})},className:"group text-token-text-tertiary flex items-center gap-1 text-sm",children:[e.jsx(xs,{className:"h-4 w-4",style:{display:"var(--is-ltr, block) var(--is-rtl, none)"}}),e.jsx(ys,{className:"h-4 w-4",style:{display:"var(--is-ltr, none) var(--is-rtl, block)"}}),e.jsx("div",{className:"group-hover:underline",children:e.jsx(L,{id:"gdbtML",defaultMessage:"Back to ChatGPT home"})})]})]})]})})},zo=({systemHint:t})=>{const a=be(),o=xe(),i=r.useCallback(C=>{a.setText(C),a.focus()},[a]);r.useEffect(()=>()=>{o.reset()},[o]);const s=r.useCallback(()=>{D.logEvent("Open File Viewer",{intent:bs.Multimodal.toString()}),a.openFileDialog()},[a]),{isImageGenLandingPageEnabled$:n,isAllPagesEnabled$:l}=xe(),c=fe(n),g=fe(l),v=t===H.PictureV2&&c;if(!g&&!v)return null;let m=null;switch(t){case H.Canvas:m=!1;break;case H.PictureV2:m=e.jsx(Fo,{onCardClick:i,onUploadCardClick:s});break;case H.Research:m=!1;break;default:m=e.jsx(L,{id:"JEsPH+",defaultMessage:"Unknown landing page {systemHint}",values:{systemHint:t}})}return m},Vo=4,qo=async({text:t,numCompletions:a,isUnauthenticated:o,isThreadUsingSearchMode:i=!1,autocompleteMode:s,activeSystemHint:n})=>{try{return(o?await Ae.generateAutocompletionsAnon(t,a,i,n):await Ae.generateAutocompletions(t,a,i,n)).completions.map(c=>({id:Na(),type:R.Autocomplete,title:c.slice(0,t.length),body:c.slice(t.length),oneliner:c,prompt:c,source:s}))}catch{return[]}},Bo=()=>!1,Yo=({clientThreadId:t,composerController:a,isGizmoThread:o})=>{const i=St(a.store,b=>b.showTaggingDropdown),s=Wt(),n=Array.from(s)[0],[l,c]=r.useState([]),[g,y]=r.useState([]);r.useRef(0);const{configurationMenuType:v}=Ot(),m=Vo,[C,p]=r.useState(),h=v!=="none",d=r.useCallback(b=>{c(w=>{const I=typeof b=="function"?b(w):b;return la(I,w)?w:I})},[]),{trendingSuggestions:S,fetchTrendingSuggestions:x}=Qo(m),{isUnauthenticated:u}=ye(),M=vs(),_=r.useCallback(b=>{const w=a.getCurrentText();return w&&Ve(b).startsWith(w.toLocaleLowerCase())},[a]),k=r.useCallback(b=>{const w=a.getCurrentText(),I=b.title+b.body;return _(b)?{...b,title:w,body:I.slice(w.length)}:{...b,title:I,body:""}},[a,_]),A=r.useCallback((b=!1)=>{d(w=>!w.some(_)&&w.length>0?[]:b?w:w.map(k))},[_,k,d]),f=q(),G=r.useMemo(()=>({[T.Canvas]:[{type:R.Starter,title:f.formatMessage({id:"GMvniX",defaultMessage:"Help me write a birthday message for a friend"}),prompt:f.formatMessage({id:"JInqHw",defaultMessage:"Help me write a birthday message for a friend"}),body:"",theme:T.Canvas},{type:R.Starter,title:f.formatMessage({id:"Xwp6O+",defaultMessage:"Help me write a short story"}),prompt:f.formatMessage({id:"e2j3PL",defaultMessage:"Help me write a short story set in a post-apocalyptic Tokyo, focused on a character who’s discovering a long-lost secret"}),body:"",theme:T.Canvas},{type:R.Starter,title:f.formatMessage({id:"ARQf7p",defaultMessage:"Help me write a basic outline for an essay"}),prompt:f.formatMessage({id:"K0WcGA",defaultMessage:"Help me write a basic outline for an essay"}),body:"",theme:T.Canvas},{type:R.Starter,title:f.formatMessage({id:"z+JwEj",defaultMessage:"Create a business plan outline"}),prompt:f.formatMessage({id:"4c/Ux5",defaultMessage:"Create a detailed outline for a business plan for a new app that connects local artists with buyers. Include sections for market analysis, monetization, and user acquisition"}),body:"",theme:T.Canvas}],[T.Image]:[{type:R.Starter,title:f.formatMessage({id:"noA7wB",defaultMessage:"Design a modern logo"}),prompt:f.formatMessage({id:"k53BuX",defaultMessage:"Create a modern, minimalist logo for a tech startup called ‘Nexora’. It should use bold typography and a sleek geometric icon, suitable for both light and dark backgrounds"}),body:"",theme:T.Image},{type:R.Starter,title:f.formatMessage({id:"akHy6z",defaultMessage:"Create an invite for my birthday"}),prompt:f.formatMessage({id:"BXf15G",defaultMessage:"Please create an invite for my birthday to send to my friends. It’ll be an outdoor barbeque with music and delicious food with my closest friends and family"}),body:"",theme:T.Image},{type:R.Starter,title:f.formatMessage({id:"57SKj2",defaultMessage:"Create a cartoon illustration of my pet"}),prompt:f.formatMessage({id:"EtCE7V",defaultMessage:"Please create an illustration of my pet in 2D animation style. It’s taking a nap in its favorite spot by the fire"}),body:"",theme:T.Image},{type:R.Starter,title:f.formatMessage({id:"s5iqKS",defaultMessage:"Create a Renaissance-style painting"}),prompt:f.formatMessage({id:"mEPKGA",defaultMessage:"Please create a Renaissance-style painting of a Mars rover. Use techniques like chiaroscuro and a warm color palette"}),body:"",theme:T.Image}],[T.ContextualAnswers]:[{type:R.Starter,title:f.formatMessage({id:"VJy602",defaultMessage:"Summarize my top projects this quarter and key outcomes across all of them."}),prompt:f.formatMessage({id:"BADBWZ",defaultMessage:"Summarize my top projects this quarter and key outcomes across all of them."}),icon:e.jsx(Ss,{className:"h-full w-full"}),body:"",theme:T.ContextualAnswers},{type:R.Starter,title:f.formatMessage({id:"CXhrsc",defaultMessage:"Get me up to speed on the past 2 weeks of project updates."}),prompt:f.formatMessage({id:"WPQR3a",defaultMessage:"Get me up to speed on the past 2 weeks of project updates."}),icon:e.jsx(ws,{className:"h-full w-full"}),body:"",theme:T.ContextualAnswers},{type:R.Starter,title:f.formatMessage({id:"7QVCTa",defaultMessage:"Find the revenue projection for Q3 and the most profitable projects."}),prompt:f.formatMessage({id:"tvB7JD",defaultMessage:"Find the revenue projection for Q3 and the most profitable projects."}),icon:e.jsx(Cs,{className:"h-full w-full"}),body:"",theme:T.ContextualAnswers},{type:R.Starter,title:f.formatMessage({id:"Rny+bg",defaultMessage:"What is our company's current policy on work from home?"}),prompt:f.formatMessage({id:"P0W1ks",defaultMessage:"What is our company's current policy on work from home?"}),icon:e.jsx(Dt,{className:"h-full w-full"}),body:"",theme:T.ContextualAnswers}]}),[f]),O=!!js(),Re=Ms({exposed:O})==="autocomplete",$=!(!O||!a.isEmpty()||!Re||o||![H.ContextualAnswers].includes(n)),{caSuggestions:ae}=Ko({skip:!$});r.useEffect(()=>{$&&d(b=>ae.length>0?b.length>0&&!b.some(w=>w.theme===T.ContextualAnswers)?b:ae:b.length>0?b:G[T.ContextualAnswers].slice(0,m))},[G,ae,m,d,$]),r.useEffect(()=>{const b=()=>{d(w=>w.filter(I=>I.theme!==T.Search&&I.theme!==T.Image))};if(a.getCurrentText()==="")if(M)S.length>0?d(S):x();else if(h&&n===H.PictureV2){const w=To(f);d(w)}else b();else b()},[l,a,x,M,d,S,n,f,h]),r.useEffect(()=>{M&&a.getCurrentText()===""&&S.length>0&&ft(S,t)},[M,a,S,t]);const se=m-l.filter(_).length,F=Jo(M),{layer:U}=Q("4031588851"),oe=U.get("autocomplete_min_char",4),ne=U.get("autocomplete_fetch_interval",200),ie=r.useRef(null),Se=r.useCallback(_s(async b=>{const w=a.getCurrentText();if(!w||w.length<oe||w.length>80||a.hasMultipleLines()){d([]);return}if(!i&&!(ie.current&&ie.current.length>oe&&w.startsWith(ie.current)))try{const I=(await qo({text:w,numCompletions:b,isUnauthenticated:u,isThreadUsingSearchMode:M,autocompleteMode:F,activeSystemHint:n})).filter(_).map(k);d(K=>{const Z=K.filter(_),je=I.filter(de=>{const B=Ve(de);return!Z.some(We=>{const ue=Ve(We);if(B===ue)return!0;const J=/[\p{P}\p{S}]$/u,z=B.replace(J,""),Me=ue.replace(J,"");return z===ue||B===Me||z===Me})}).slice(0,m-Z.length);return[...Z,...je]}),I.length>0&&ft(I,t)}catch{}},F==="BING"?150:ne),[a,F,k,ne,n]);Ns(b=>b.files);const we=n===H.Research,re=Bo(),le=we&&re,P=r.useCallback(()=>{A(),se>0&&Se(se)},[Se,A,se]);r.useEffect(()=>{i&&d([])},[i,d]);const W=r.useMemo(()=>F==="HARDCODED"?A:P,[F,P,A]),ce=!1,Le=r.useCallback(()=>{W()},[W,ce,le,d]),Ce=r.useCallback(()=>{a instanceof Aa&&A(!0),a.getCurrentText().indexOf(`
`)>0&&(d([]),p(void 0))},[a,d,A,ce,le]);return r.useEffect(()=>a.subscribe("input",()=>{Le()}),[a,Le]),r.useEffect(()=>a.subscribe("change",()=>{Ce()}),[a,Ce]),{autocompletions:l,matchaData:C}},Qo=t=>{const[a,o]=r.useState([]),i=r.useCallback(async()=>{const n=(await wt.safePost("/conversation/experimental/generate_trending_suggestions",{requestBody:{num_items:t},authOption:ca.SendIfAvailable})).suggestions.map((l,c)=>({type:R.Trending,title:Pe(l),body:"",icon:e.jsx(ks,{className:"h-full w-full"}),prompt:Pe(l),id:`search-trending-${c}`,theme:T.Search}));return o(n),n},[t]);return{trendingSuggestions:a,fetchTrendingSuggestions:i}},$o=t=>{const a=/(["'])(?:(?=(\\?))\2.)*?\1/g,o=t.match(a),i=[];let s=0;return o&&o.forEach(n=>{const l=t.indexOf(n,s);l>s&&i.push({text:t.slice(s,l),isMatched:!1}),i.push({text:n,isMatched:!0,className:"font-medium"}),s=l+n.length}),s<t.length&&i.push({text:t.slice(s),isMatched:!1}),i},Ko=({skip:t})=>{const{data:a=[],refetch:o}=_a({queryKey:["caSuggestions"],queryFn:async()=>(await wt.safeGet("/ca/v2/user/suggested_starter_prompts")).suggestions.map((s,n)=>{const l=Ts(s.related_file_type)??Dt,c=e.jsx(l,{className:"h-full w-full"}),g=$o(s.prompt);return{type:R.Autocomplete,title:Pe(s.prompt),body:"",icon:c,prompt:Pe(s.prompt),id:`ca-suggestions-${n}`,theme:T.ContextualAnswers,autocompletionChunks:g}}),enabled:!t});return{caSuggestions:a,fetchCaSuggestions:o}};function Pe(t){return t.split(" ").map(As).join(" ")}const Ve=t=>`${t.title}${t.body}`.toLocaleLowerCase();function Zo(){const{layer:t}=Q("4031588851",{shouldLogExposure:!1}),a=t.get("autocomplete_qualified_start_date","2099-09-13T00:00:00Z"),o=Ht();return!!o&&o.created*1e3>=new Date(a).getTime()}function Jo(t){const{isUnauthenticated:a}=ye(),o=me("1468311859").value,i=me("2053937752").value,s=me("3664702598").value,n=me("471233253").value,{layer:l}=Q("4031588851"),{layer:c}=Q("3533083032"),g=Zo(),y=!a&&o||a&&i,v=(!a&&s||a&&n)&&g;let m="HARDCODED";{const C=a?c:l;if(t){const p=C.get("search_autocomplete_mode","");y&&p&&(m=p)}else v&&(m=C.get("autocomplete_mode","HARDCODED"))}return m}const Xo=({clientThreadId:t,isGizmoThread:a})=>{const o=be(),{autocompletions:i,matchaData:s}=Yo({clientThreadId:t,composerController:o,isGizmoThread:a});return r.useEffect(()=>(o.store.setState({autocompletions:i,matchaData:s}),()=>{o.store.setState({autocompletions:[],matchaData:void 0})}),[i,o,s]),null},en=({clientThreadId:t})=>{const a=Ie(),o=Ft(p=>p.activeStageSidebar),i=Ze(t),s=Es(da.WorkspaceShareLinks),{isUnauthenticated:n}=ye(),l=vt(),c=Ct(t),g=st(c),y=jt(a,"16480203"),v=Ps(),m=s&&i&&!n&&!l&&(!g||y)&&!v,C=!o;return e.jsx("div",{className:"flex items-center gap-2 pe-1 leading-[0]",id:"conversation-header-actions",children:e.jsx(bo,{showShareButton:m,showProfileDropdown:C,clientThreadId:t})})},tn=Mt(()=>_t(()=>import("./ft1d6nfto9ph9vmv.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25])).then(t=>t.GizmoUsingAsOwnerNotice));function an({clientThreadId:t,transparentBackground:a,isEmptyState:o}){const{isNewScrollEnabled:i}=Ut(),s=Ct(t),n=st(s),l=Is(),c=Rs(),{data:g}=Ls(s),y=Ke(),v=Ws(),m=Hs(),C=q(),{showLegacyReasoningSlider:p,showReasoningSliderNux:h}=Ot(),d=Be(t),S=Ft(_=>_.isConversationScrolledFromTop),x=ua(),u=!p||!!s&&(!n||!d)||v;if(l)return null;const M=u?e.jsx(e.Fragment,{children:m&&(n||!s)?e.jsx(Us,{children:e.jsx(xt,{clientThreadId:t})}):e.jsx(xt,{clientThreadId:t})}):e.jsx(pe,{side:"bottom",theme:x?"default":"white",label:p&&!h?null:e.jsxs("div",{className:"flex h-full w-full flex-col overflow-hidden px-4 py-3",children:[e.jsx("div",{className:"flex w-full justify-center py-2",children:e.jsxs("div",{className:"border-token-border-default bg-token-main-surface-primary flex w-56 flex-col gap-2 rounded-xl border p-2 pt-1.5 shadow-lg",children:[e.jsx("div",{className:"text-token-text-tertiary flex w-full text-start text-[11px] font-normal tracking-tight",children:C.formatMessage({id:"kvZYws",defaultMessage:"Ask anything"})}),e.jsxs("div",{className:"flex w-full flex-row items-center gap-2",children:[e.jsx(Gt,{className:"text-token-text-primary h-3 w-3 opacity-40"}),e.jsx(Os,{className:"text-token-text-primary h-3 w-3 opacity-40"}),e.jsxs("div",{className:"relative h-3 w-3",children:[e.jsx(Ds,{className:"text-token-text-primary h-3 w-3"}),e.jsx("div",{className:"absolute start-0 top-0 h-full w-full scale-200 animate-ping rounded-full bg-blue-400/50 duration-1000"})]}),e.jsx("div",{className:"flex-auto"}),e.jsx("div",{className:"bg-token-main-surface-primary rounded-full p-[1px] opacity-20 invert",children:e.jsx(Fs,{className:"text-token-text-primary h-3 w-3"})})]})]})}),e.jsxs("div",{className:"text-token-text-primary mt-4 flex max-w-80 flex-col gap-1",children:[e.jsx("div",{className:"font-semibold",children:C.formatMessage({id:"ZQnsFt",defaultMessage:"The model picker has moved"})}),e.jsx("div",{className:"text-xs font-normal opacity-75",children:C.formatMessage({id:"EyZkkB",defaultMessage:"Adjust thinking or choose a model here"})})]})]}),onOpenChange:_=>{_&&D.logEvent("Model Switcher Moved Tooltip Hover",{location:"thread_header"})},ignoreTriggerOnOutsideClick:!0,interactive:!0,children:e.jsx("div",{className:"text-token-text-secondary px-0.5 text-xl",children:Gs})});return e.jsxs(e.Fragment,{children:[e.jsxs(zs,{id:"page-header",className:E("pointer-events-none select-none [view-transition-name:var(--vt-page-header)] *:pointer-events-auto motion-safe:transition max-md:hidden",o&&"absolute start-0 end-0",!s&&"@[84rem]/thread:absolute @[84rem]/thread:start-0 @[84rem]/thread:end-0 @[84rem]/thread:bg-transparent @[84rem]/thread:shadow-none!",a&&"bg-transparent",!i&&S?"[box-shadow:var(--sharp-edge-top-shadow)]":"[box-shadow:var(--sharp-edge-top-shadow-placeholder)]",i&&"[box-shadow:var(--sharp-edge-top-shadow-placeholder)] group-data-scroll-from-top/thread:[box-shadow:var(--sharp-edge-top-shadow)]"),children:[e.jsxs("div",{className:"absolute start-1/2 ltr:-translate-x-1/2 rtl:translate-x-1/2",children:[g!=null&&y?.isWorkspaceAccount()&&g.gizmo.tags?.includes(Vs.WorkspaceDisabled)&&e.jsx(tn,{gizmo:g}),e.jsx(qs,{gizmoId:s,clientThreadId:t})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx(vo,{clientThreadId:t}),M]}),e.jsx(en,{clientThreadId:t})]}),c&&e.jsx(Bs,{})]})}const sn=Mt(()=>_t(()=>import("./lripkcxmyjmx76pd.js"),__vite__mapDeps([26,1,6,2,3,7,27])));function on({clientThreadId:t}){const a=Xe(),o=Ze(t),i=$e(t,te.getGizmoId),s=async()=>{o&&(await Ae.patchConversation(o,{is_archived:!1}),a.invalidateQueries({queryKey:["conversation",t]}),wa(o,n=>{n.isArchived=!1}),zt(a,i))};return e.jsxs("div",{className:"my-6 flex flex-col items-center justify-center gap-4",children:[e.jsx("div",{className:"text-token-text-secondary px-3 text-center text-sm",children:e.jsx(L,{id:"thread.archivedConversationDescription",defaultMessage:"This conversation is archived. To continue, please unarchive it first."})}),e.jsx("div",{children:e.jsx(Te,{disabled:!o,onClick:s,icon:yo,children:e.jsx(L,{id:"thread.unarchiveButton",defaultMessage:"Unarchive"})})})]})}const nn=function({clientThreadId:t,getGizmosCompletionParams:a,hideDisclaimer:o,hideHeader:i,messagesVerticalAlign:s="top",renderEmptyState:n}){const l=ha(),{isNewScrollEnabled:c,autoPinningEnabled:g}=Ut(),{data:y}=ga(),v=Ys(t),m=ma(),[C,p,h,d,S,x,u,M]=$e(t,j=>[j?.isLoading,te.getCurrentLeafId(j),te.hasUserMessage(j),te.getConversationTurns(j).length,te.isArchived(j),j?.modelId,j?te.getGizmoId(j):m,j?.conversationOrigin===Ca.APPLE]),_=Ze(t),k=Xe(),{prefetchSearchPromises:A}=tt(),[f]=Ta(),G=!!f.get("message"),[O,Re]=r.useState(A?.navlink);r.useEffect(()=>{C||(Be(t)?ut.addTiming("chatgpt.web.chatPage.renderNewConversation"):ut.addTiming("chatgpt.web.chatPage.renderExistingConversation"))},[t,C]);const{setTargetedContent:$}=Qs(),ae=l?.includes(pa),se=null,F=d>=2,{pageType:U}=$s(),oe=Ie(),ne=xe(),ie=fe(ne.isImageGenLandingPageEnabled$),Se=fe(ne.isAllPagesEnabled$),we=r.useContext(fa),re=xa(we),le=Ks(),P=Be(t)&&!F&&Ue(v)&&!le&&A==null&&!re,W=U?.type==="landing-page"&&(Se||U.value===H.PictureV2&&ie);jt(oe,"733205176");const ce=P&&!h&&(Ue(v)||v?.kind===ya.GizmoTest)&&A==null&&!re,Ce=Et(y).id,b=x??Ce,w=!!x,I=Zs(y?.models,b),K=Js(t,v),Z=Xs();eo(d,t),r.useEffect(()=>{Z||$(void 0)},[t,$,Z,p]),r.useEffect(()=>{Ee.setIsConversationScrolledFromTop(!1)},[t]),r.useEffect(()=>{const j=new URLSearchParams(window.location.search),ge=j.get("src");if(ge==="history_search"){j.delete("src");const Ne=j.toString(),Xt=`${window.location.pathname}${Ne?`?${Ne}`:""}${window.location.hash}`;window.history.replaceState({},document.title,Xt)}_&&ge==="history_search"&&Ae.patchConversation(_,{touch:!0}).then(()=>{zt(k,u)})},[_,u,k]);const je=kt(t),de=r.useCallback(j=>{je(a?a(j):j)},[je,a]),B=ve(),We=Tt(),ue=Je(),J=r.useRef(null);J.current=j=>{W?B.transitionToPage({type:"home",value:void 0},()=>{ue("/",{preventScrollReset:!0}),de(j)}):P&&!We&&ba(oe,"3253785454").get("should_animate_composer",!1)?Lt({className:to["composer-slide"],update:()=>de(j)}):de(j)};const z=r.useCallback(j=>J.current?.(j),[J]);r.useEffect(()=>{B.signalTransitionReady()},[B,W,t]);const Me=ao({clientThreadId:t,handleRequestCompletion:z,prefetchSearchThreadIdPromise:A?.threadId})&&O==null,He=r.useRef(null),qt=j=>{if(c&&!W)return e.jsx(po,{allowScrollToEnd:!0,allowScrollToTop:M,clientThreadId:t,enableAutoScrollPinning:g,initScrolledToEnd:O==null&&!G,threadFooterRef:De,threadRootRef:nt,children:j});{const ge=e.jsx("div",{className:"relative h-full",children:e.jsxs("div",{className:E("flex h-full flex-col overflow-y-auto [scrollbar-gutter:stable_both-edges] @[84rem]/thread:pt-(--header-height)"),ref:He,children:[e.jsx(fo,{setIsScrolledToEdge:Ne=>{Ee.setIsConversationScrolledFromTop(Ne)},options:{root:He?.current}}),j]})});return O!=null?ge:e.jsx(Sa,{children:e.jsxs(r.Suspense,{fallback:null,children:[e.jsx(xo,{}),ge]})})}},Ge=Co();r.useEffect(()=>{Ge||(document.title=K??"ChatGPT")},[K,se,Ge]);const Bt=va(we),Oe=Ke(),Yt=Oe&&!Oe.isTeam()&&!Oe.isEnterprisey(),ot=!o&&!Bt&&!re&&!(P&&Yt)&&Ue(v),nt=r.useRef(null),it=r.useRef(null),De=r.useRef(null),rt=so(j=>j.composerHeight),Qt=r.useMemo(()=>({threadContentScrollContainerElementRef:it,footerRootContainerElementRef:De}),[]),$t=!P&&!W,Kt=at(),Zt=st(u),Y=!!u,he=Y&&Zt,_e=!he,Jt=P&&!W,lt=W&&U?.type==="landing-page";return e.jsx(oo.Provider,{value:O,children:e.jsx(It,{clientThreadId:t,children:e.jsxs(et,{clientThreadId:t,children:[ae&&e.jsx(sn,{}),!Ge&&e.jsx(no,{children:K!=null&&e.jsx("title",{children:K})}),e.jsx(io.Provider,{value:z,children:e.jsxs(Rt,{children:[e.jsxs("div",{id:"thread",ref:nt,className:E("group/thread @container/thread h-full w-full",c&&!W&&co.threadRoot,W&&"overflow-y-auto"),children:[e.jsxs(No,{noKeyboard:!0,clientThreadId:t,currentModelConfig:I,className:E("composer-parent flex flex-col focus-visible:outline-0",!W&&"h-full"),children:[e.jsxs(ro,{value:Qt,children:[!i&&e.jsx(an,{clientThreadId:t,isEmptyState:ce}),e.jsxs("div",{ref:it,className:E("flex basis-auto flex-col",$t&&"-mb-(--composer-overlap-px) [--composer-overlap-px:24px]",he||Y||!P?"grow":"shrink",!P&&"overflow-hidden",P&&!he&&!Y&&"min-[510px]:max-[768px]:mt-[25dvh]! @max-[31.9rem]/thread:grow @max-[31.9rem]/thread:justify-center @lg/thread:mt-[calc(30dvh+25px)]"),style:{"--composer-height":rt?`${rt}px`:void 0},children:[lt&&e.jsx(Uo,{systemHint:U.value}),!W&&e.jsx(e.Fragment,{children:!C&&!Me?ce?n??e.jsx(e.Fragment,{children:Y?e.jsx(So,{clientThreadId:t,gizmoId:u,onRequestCompletion:z,currentModelId:b}):e.jsx(Lo,{clientThreadId:t,currentModelId:b,isModelLoaded:w})}):F||O!=null?qt(e.jsx(Ao,{onRequestCompletion:z,clientThreadId:t,scrollContainerRef:He,prefetchNavlink:O,setPrefetchNavlink:Re},t)):null:null})]})]}),e.jsxs("div",{id:"thread-bottom-container",className:E("isolate z-3 w-full basis-auto has-data-has-thread-error:pt-2 has-data-has-thread-error:[box-shadow:var(--sharp-edge-bottom-shadow)] md:border-transparent md:pt-0 dark:border-white/20 md:dark:border-transparent",!W&&!ot&&"mb-4",Y||he||!P?"":_e&&P&&Kt?"@lg/thread:grow":"lg:grow",_e&&"flex flex-col"),ref:De,children:[S?e.jsx(on,{clientThreadId:t}):e.jsxs(e.Fragment,{children:[(!P||_e)&&e.jsx(ko,{isGizmoThread:Y,isProjectThread:he,clientThreadId:t,isNewThread:P,currentModelId:b,onRequestCompletion:z,shouldUseUnifiedComposer:_e,isModelLoaded:w}),Jt&&e.jsx(Xo,{clientThreadId:t,isGizmoThread:Y})]}),ot?e.jsx("div",{className:"text-token-text-secondary relative mt-auto flex min-h-8 w-full items-center justify-center p-2 text-center text-xs md:px-[60px]",children:e.jsx(lo,{clientThreadId:t})}):null]})]}),lt&&e.jsx(At,{children:e.jsx(zo,{systemHint:U.value})})]}),e.jsx(uo,{clientThreadId:t,isStaticSharedThread:!1,isDynamicSharedThread:le}),e.jsx(ho,{}),e.jsx(go,{}),e.jsx(mo,{conversationId:t}),!1]})})]})})})},yn=ka.memo(nn);export{en as C,Ro as I,yn as M};
//# sourceMappingURL=n6gxahppsdxdf9e1.js.map
