import{k as U,j as r,a8 as E,r as _,M as o,g as x}from"./msupklk377u8vx8o.js";import{at as k,h5 as b,h1 as q,c as I,cL as F,an as Y,am as X}from"./i3bl95k8z8nuf4dv.js";import{dY as B,pD as Z,dZ as c,pE as J,cN as j,b9 as K,a_ as C,jd as $,a$ as z,ao as Q,pF as L}from"./idf4u2jy0wx0pvap.js";import{N as W}from"./jy1u8exw8iz2slve.js";import{S as tt}from"./l4zbgkg566u66cq3.js";var R,D;function st(){if(D)return R;D=1;var t=k();function s(e){return typeof e=="function"?e:t}return R=s,R}var O,T;function et(){if(T)return O;T=1;var t=b(),s=st(),e=q(),i=9007199254740991,n=4294967295,u=Math.min;function m(a,l){if(a=e(a),a<1||a>i)return[];var p=n,v=u(a,n);l=s(l),a-=n;for(var f=t(v,l);++p<a;)l(p);return f}return O=m,O}var rt=et();const it=U(rt),Dt=({gap:t,padding:s=4,size:e=3})=>r.jsx(E.div,{className:I("grid h-full max-w-full flex-1 grid-cols-3 items-center"),style:{gap:t,padding:s},children:it(3,i=>r.jsx(E.div,{className:"dark:bg-white-400 aspect-square rounded-full bg-gray-400",animate:{translateY:["0%","-50%","0%","0%","0%"]},style:{translateX:.5,width:e,height:e},transition:{repeat:1/0,type:"keyframes",delay:i/10,duration:.7}},i))});var nt=(t=>(t.READY="ready",t.LOG="log",t.RUN_START="run_start",t.ENVIRONMENT_STATUS="environment_status",t.ENVIRONMENT_ERROR="environment_error",t.SET_BACKGROUND_COLOR="set_background_color",t.INSTRUMENT="instrument",t.OUTPUT="output",t.ERROR="error",t.RUN_COMPLETE="run_complete",t))(nt||{}),at=(t=>(t.SW_RECONNECT="sw_reconnect",t.SW_NOT_SUPPORTED="sw_not_supported",t))(at||{});const lt=["python","javascript","typescript","html","react"];function ct(t){return lt.includes(t)}var ut=(t=>(t[t.INITIALIZING=0]="INITIALIZING",t[t.INSTALLING_PACKAGES=1]="INSTALLING_PACKAGES",t[t.RUNNING_CODE=2]="RUNNING_CODE",t))(ut||{}),ot=(t=>(t.RUN_CODE="run",t.STOP_CODE="stop",t.PREPARE_ENVIRONMENT="prepare_environment",t))(ot||{}),pt=(t=>(t.SW_RECONNECT_RESPONSE="sw_reconnect_response",t))(pt||{}),mt=(t=>(t.FLUSH="flush",t.SW_RECONNECT_RESPONSE="sw_reconnect_response",t.FETCH_RESPONSE="fetch_response",t.INIT="init",t.PING="ping",t.DISCONNECT="disconnect",t))(mt||{}),P=(t=>(t.javascript="javascript",t.typescript="typescript",t.bash="bash",t.zsh="zsh",t.html="html",t.css="css",t.python="python",t.json="json",t.sql="sql",t.go="go",t.yaml="yaml",t.java="java",t.rust="rust",t.cpp="cpp",t.swift="swift",t.php="php",t.xml="xml",t.ruby="ruby",t.haskell="haskell",t.kotlin="kotlin",t.csharp="csharp",t.c="c",t.objectivec="objectivec",t.r="r",t.lua="lua",t.dart="dart",t.scala="scala",t.perl="perl",t.commonlisp="commonlisp",t.clojure="clojure",t.ocaml="ocaml",t.powershell="powershell",t.verilog="verilog",t.dockerfile="dockerfile",t.vue="vue",t.other="other",t))(P||{});function y(t){if(B(t))switch(t){case c.CODE_REACT:return"typescript";default:return Z(t.replace(/^code\//,""),Object.values(P),"other")}}function M(t){return t.includes("'react'")||t.includes('"react"')}function Tt(t,s){switch(t){case c.CODE_HTML:case c.CODE_REACT:return!0;case c.CODE_JAVASCRIPT:case c.CODE_TYPESCRIPT:return M(s);default:return!1}}function wt(t){return J([c.CODE_PYTHON],t)}function jt(t,s){let e=y(t)??null;return(M(s)||t===c.CODE_REACT)&&(e="react"),e&&ct(e)?e:null}const ht=36,Pt=-24,Et=280,yt=Et+ht,Mt=40;var _t=(t=>(t.COLLAPSED="collapsed",t.EXPANDED="expanded",t))(_t||{});const N="hiveTranscript",w=/(::hiveTranscript\{([^}]+)\})/g,Nt=/\btimestamp\s*=\s*["']?(\d+)["']?(?=\s|,|$)/,vt=()=>t=>{j(t,"paragraph",s=>{if(!s.children||!Array.isArray(s.children))return;const e=[];for(const i of s.children)if(i.type==="text"&&i.value.includes(`::${N}`)){let n=0,u;for(;(u=w.exec(i.value))!=null;){u.index>n&&e.push({type:"text",value:i.value.slice(n,u.index)});const m=u[2],l=Nt.exec(m)?.[1];l&&Number.isInteger(Number(l))&&e.push({type:"textDirective",name:N,attributes:{timestamp:l},data:{hName:N,hProperties:{timestamp:l}},children:[],position:i.position}),n=w.lastIndex}n<i.value.length&&e.push({type:"text",value:i.value.slice(n)})}else e.push(i);s.children=e})},Gt=Object.freeze(Object.defineProperty({__proto__:null,HIVE_LOG_DIRECTIVE_NAME:N,hiveLogDirectivePlugin:vt},Symbol.toStringTag,{value:"Module"})),ft=[F,N],Vt=()=>t=>{j(t,"textDirective",s=>{ft.includes(s.name)||(s.type="text",s.value=`:${s.name}`)})},dt=t=>_.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",...t},_.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M12 2C6.477 2 2 6.477 2 12s4.477 10 10 10 10-4.477 10-10S17.523 2 12 2ZM9 8.963v6.074c0 .9.996 1.444 1.754.957l4.723-3.037a1.138 1.138 0 0 0 0-1.914l-4.723-3.037A1.138 1.138 0 0 0 9 8.963Z",clipRule:"evenodd"}));function Ht({isDisabled:t=!1,isCodePreviewable:s=!1,isCodeRunning:e,disabledTooltip:i,clientThreadId:n,textdocType:u,onClick:m}){const[a,l]=_.useState(e),p=K(C.hasSeenCanvasCodeExecutionNux),[{width:v},f]=$();_.useEffect(()=>{let S=null;return!e||s?l(e):(S=setTimeout(()=>{l(e)},200),()=>clearTimeout(S))},[e,s]);const G=()=>({conversation_id:n?X(n):void 0}),V=()=>{Y.logEventWithStatsig("Canvas Run Code Button Clicked","chatgpt_canvas_run_code_button_clicked",G()),setTimeout(()=>m?.())},d=r.jsx(E.button,{disabled:t||e&&!a,onClick:V,className:I("btn rounded-full border transition-colors",a?I(W,"border-transparent"):"border-token-border-default hover:bg-token-surface-hover bg-transparent"),animate:{width:v??0},initial:{width:v??0},transition:{type:"spring",bounce:.24,duration:.4},children:r.jsx("div",{ref:f,children:a?r.jsxs(E.div,{className:"flex items-center gap-2 px-3 sm:px-4",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.3},children:[r.jsx(tt,{className:"icon-md"}),r.jsx("span",{className:"hidden sm:inline",children:r.jsx(o,{...h.stopCode})})]}):r.jsxs(E.div,{className:"flex items-center gap-2 px-3 sm:px-4",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.3},children:[r.jsx(dt,{className:"icon-md"}),r.jsx("span",{className:"hidden sm:inline",children:r.jsx(o,{...s?h.previewCode:h.runCode})})]})})}),H=!p.isLoading&&p.eligible,A=t&&i?i:e?null:r.jsx(o,{...s?h.previewCodeTooltip:h.runCodeTooltip}),g=_.useMemo(()=>{if(!u)return"canvas";switch(u){case c.CODE_JAVASCRIPT:return"JavaScript";case c.CODE_TYPESCRIPT:return"TypeScript";case c.CODE_HTML:return"HTML";case c.CODE_PYTHON:return"Python";case c.CODE_REACT:return"React"}return y(u)??"canvas"},[u]);return H?r.jsx(z,{announcementKey:C.hasSeenCanvasCodeExecutionNux,show:!0,side:"bottom",align:"end",theme:"bright",dismissOnOutsideClick:!0,badge:"new",title:s?r.jsx(o,{id:"O8VBVO",defaultMessage:"Preview your output"}):r.jsx(o,{id:"2sN/zT",defaultMessage:"Run {language}",values:{language:g}}),description:s?r.jsx(o,{id:"CMJOVI",defaultMessage:"Run your code to see how it looks and interact with the output."}):r.jsx(o,{id:"ew1tTJ",defaultMessage:"See your output and get help debugging without leaving the canvas."}),onDismiss:p.markAsViewed,sideOffset:0,children:d}):A?r.jsx(Q,{label:A,children:d}):d}const h=x({previewCode:{id:"a08baM",defaultMessage:"Preview"},runCode:{id:"O/1aYA",defaultMessage:"Run"},stopCode:{id:"nCwG4+",defaultMessage:"Stop"},runCodeTooltip:{id:"UeNB/S",defaultMessage:"See output and debug"},previewCodeTooltip:{id:"XLZZHl",defaultMessage:"Preview your output"}});class Rt{constructor(s){this.params=s}get isReadonly(){return Object.values(this.params).some(s=>!!s)}get isHistoricalVersion(){return!!this.params.isHistoricalVersion}get isStreaming(){return!!this.params.isTextdocStreaming||!!this.params.isRequestActive}get isTextdocStreaming(){return!!this.params.isTextdocStreaming}get isStreamingFromNative(){return this.isStreaming&&this.params.streamingSource===L.NATIVE}get isRestoring(){return!!this.params.isRestoring}get isShowingChanges(){return!!this.params.isShowingChanges}get isReadonlyFromQueryParam(){return!!this.params.isReadonlyFromQueryParam}}const gt=t=>new Rt(t);export{Mt as C,Et as E,_t as G,N as H,nt as M,Dt as T,gt as a,y as b,yt as c,wt as d,Ht as e,P as f,jt as g,ft as h,Tt as i,ht as j,Vt as k,vt as l,h as m,mt as n,at as o,pt as p,ot as q,ut as r,Pt as s,Gt as t};
//# sourceMappingURL=ftpfjx7bripqt5mr.js.map
