import{j as e,r,f as S,a8 as _,M as g,d as A,h as I,ac as k}from"./msupklk377u8vx8o.js";import{B as G}from"./gno8mfhpd8fsxtyq.js";import{b as H,c as D}from"./gc51ish3otzvnj1w.js";import{P as O}from"./hwl3hzno2kq7obfl.js";import{b$ as U,lr as z,ls as q,be as V,bf as $,dC as Q,f_ as X,i9 as L}from"./idf4u2jy0wx0pvap.js";import{an as C,g as y,bp as J,B as N,f1 as K,r as M,bI as Y,bN as Z,bj as ee,ai as te,c4 as se,u as E}from"./i3bl95k8z8nuf4dv.js";import{b as ae}from"./f8brziwaxja17w8l.js";import{W as ne}from"./ojrw0o0rizu55rz7.js";import{a as re,b as ie,h as oe}from"./lvcn6tc5m2pwz77u.js";import{P as le}from"./nq7r3w6gn2bznceb.js";import{T as ce,W as de}from"./km20jt8rls1pvll5.js";import{b as x,c as me}from"./mxye9dnv7ug9w78j.js";import{S as ue}from"./hyviotcy9l0eyqwj.js";import{I as ge}from"./hykg4shppjdez6do.js";import{a as he,b as xe}from"./n737zu6y3rojcst6.js";import{u as fe}from"./m155zrrujuukfclv.js";import{u as pe}from"./me2w1vt1t6ynrd52.js";function ve({disabled:s,children:a}){return s?e.jsx("div",{className:"pointer-events-none opacity-50 select-none","aria-hidden":"true",tabIndex:-1,inert:!0,children:a}):a}var je="AspectRatio",F=r.forwardRef((s,a)=>{const{ratio:i=1/1,style:l,...o}=s;return e.jsx("div",{style:{position:"relative",width:"100%",paddingBottom:`${100/i}%`},"data-radix-aspect-ratio-wrapper":"",children:e.jsx(le.div,{...o,ref:a,style:{...l,position:"absolute",top:0,right:0,bottom:0,left:0}})})});F.displayName=je;const be="https://openai.com/index/introducing-codex/";function ye(){const s=S(),a=Pe();return r.useEffect(()=>{C.logEventWithStatsig("Wham Landing Page Shown","chatgpt_wham_landing_page_shown")},[]),e.jsxs(_.div,{className:"bg-token-bg-primary flex min-h-screen w-full flex-col items-center justify-center gap-8 overflow-scroll px-8 py-20 sm:gap-12 sm:px-24 sm:py-28",initial:{opacity:0},animate:{opacity:1},transition:{duration:1},children:[e.jsxs("div",{className:"flex max-w-lg flex-col items-center gap-4",children:[e.jsx("div",{className:"text-5xl font-semibold",children:"Codex"}),e.jsx("div",{className:"text-token-text-tertiary text-sm",children:e.jsx(g,{id:"wham.landing.researchPreview",defaultMessage:"Research Preview"})}),e.jsx("p",{className:"text-center text-lg",children:e.jsx(g,{id:"WhamLandingPage.subtitle",defaultMessage:"A cloud-based software engineering agent that answers codebase questions, executes code, and drafts pull requests."})}),e.jsx(R,{}),e.jsx("p",{className:"text-token-text-tertiary text-center text-sm",children:e.jsx(g,{...a})})]}),e.jsx(_.div,{initial:{opacity:0,y:12},animate:{opacity:1,y:0},transition:{duration:.5},className:"flex w-full max-w-5xl items-center justify-center",children:e.jsx(F,{className:"flex w-full items-center justify-center",ratio:1.5,children:e.jsx("img",{className:"absolute w-full max-w-5xl rounded-xl",src:"https://persistent.oaistatic.com/chatgpt/landing-e8737b0.jpg",alt:s.formatMessage({id:"WhamLandingPage.imageAltText",defaultMessage:"Creating a new task with Codex"})})})}),e.jsxs("div",{className:"bg-token-bg-secondary flex w-full max-w-5xl flex-col items-center gap-8 rounded-xl px-4 py-12 sm:py-24",children:[e.jsx("div",{className:"text-xl font-medium sm:text-2xl",children:e.jsx(g,{id:"WhamLandingPage.tryTheCodexResearchPreview",defaultMessage:"Try the Codex research preview"})}),e.jsx(R,{})]})]})}function R(){const s=y(),a=J(s),i=A(),l=we();return e.jsxs("div",{className:"flex flex-col items-center gap-4 sm:flex-row",children:[a?e.jsx(N,{size:"large",onClick:()=>{C.logEventWithStatsig("Wham Upgrade to Try It Button Clicked","chatgpt_wham_upgrade_to_try_it_button_clicked"),U(i,"WhamLandingPage")},children:e.jsx(g,{...l})}):e.jsx(N,{size:"large",onClick:()=>{i("/auth/login?next=/codex"),C.logEventWithStatsig("Wham Log In Button Clicked","chatgpt_wham_log_in_button_clicked")},children:e.jsx(g,{id:"WhamLandingPage.logInToTryIt",defaultMessage:"Log in to try it"})}),e.jsxs("a",{href:be,target:"_blank",rel:"noreferrer",className:"text-token-text-tertiary flex items-center gap-1 text-sm",onClick:()=>{C.logEventWithStatsig("Wham Learn More Link Clicked","chatgpt_wham_learn_more_link_clicked")},children:[e.jsx(g,{id:"WhamLandingPage.learnMore",defaultMessage:"Learn more"}),e.jsx(z,{className:"icon-xs"})]})]})}function B(){const s=y();return K(s,"349697204")}function Pe(){switch(B().get("availability_message_type")){case"rolling_out_pro_today":return{id:"WhamLandingPage.rollingOutProToday",defaultMessage:"Rolling out to users on the ChatGPT Pro Plan today",description:"Text explaining that Codex is rolling out to users on the ChatGPT Pro Plan today"};case"available_to_pro_and_team":return{id:"WhamLandingPage.availableToProAndTeam",defaultMessage:"Available to users on the ChatGPT Pro Plan and ChatGPT Team Plan",description:"Text explaining that Codex is available to users on the ChatGPT Pro Plan and ChatGPT Team Plan"};default:return{id:"WhamLandingPage.availableToPro",defaultMessage:"Available to users on the ChatGPT Pro Plan",description:"Text explaining that Codex is available to users on the ChatGPT Pro Plan"}}}function we(){switch(B().get("upgrade_button_message_type")){case"try_with_pro":return{id:"WhamLandingPage.tryWithPro",defaultMessage:"Try it with ChatGPT Pro",description:"Text inviting user to try Codex with ChatGPT Pro"};default:return{id:"WhamLandingPage.upgradeToTryIt",defaultMessage:"Upgrade to try it",description:"Text inviting user to upgrade to try Codex"}}}function Te(){const s=S(),a=x(({tasksFilter:c})=>c),i=x(({setTasksFilter:c})=>c),l=y(),o=I(),h=A(),p=M(l,"2665240312"),m=r.useCallback(c=>{i(c);const d=new URLSearchParams(o.search);d.set("tab",c==="archived"?"archived":"all"),h({pathname:o.pathname,search:d.toString()},{replace:!0})},[i,o,h]);return e.jsx("div",{className:"border-token-border-primary mt-4 flex w-full items-center border-b align-middle md:mt-6",children:p&&e.jsx("div",{className:"flex items-center gap-2",children:e.jsx(ce,{currentTab:a,onChange:m,withUnderline:!0,tabs:[{label:s.formatMessage({id:"wham.whamTasksHeader.all",defaultMessage:"Tasks"}),key:"current"},{label:s.formatMessage({id:"wham.whamTasksHeader.archived",defaultMessage:"Archive"}),key:"archived"}]})})})}function ke(){const s=S(),a=x(({tasksFilter:t})=>t),{data:i,isLoading:l,error:o,fetchNextPage:h,hasNextPage:p,isFetchingNextPage:m,refetch:c,isPending:d}=me({refetchOnMount:!0}),j=i?.pages.flatMap(t=>t.items??[])??[],P=x(t=>t.pendingTaskIds),n=j.length>0,[w,f]=r.useState(null),b=a==="archived"?[]:Array.from(Object.entries(P)).filter(([t,u])=>!j.some(v=>v.id===u)).map(([t])=>t).reverse(),T=j.length===0&&b.length===0;return e.jsx("div",{className:"flex flex-col justify-center pt-2",children:l&&!n?e.jsx("div",{className:"mt-4 flex h-full w-full items-center justify-center",children:e.jsx(Y,{})}):e.jsxs(e.Fragment,{children:[T&&e.jsx(e.Fragment,{children:o?e.jsxs("div",{className:"mt-6 flex w-full flex-col items-center justify-center gap-2 text-sm",children:[e.jsx("div",{className:"text-token-text-error",children:e.jsx(g,{id:"wham.whamTasksSection.errorLoadingTasks",defaultMessage:"Error loading tasks"})}),e.jsx(N,{color:"secondary",onClick:()=>c(),children:e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(g,{id:"wham.whamTasksSection.retry",defaultMessage:"Retry"}),e.jsx(ue,{className:"icon-xs"})]})})]}):e.jsx("div",{className:"mt-6 flex h-full w-full items-center justify-center",children:e.jsx("div",{className:"text-token-text-secondary text-sm",children:a==="current"?s.formatMessage({id:"wham.whamTasksSection.noActiveTasks",defaultMessage:"No active tasks"}):s.formatMessage({id:"wham.whamTasksSection.noArchivedTasks",defaultMessage:"No archived tasks"})})})}),a!=="archived"&&b.map(t=>e.jsx(he,{},t)),j.map((t,u)=>e.jsx(xe,{index:u,taskListItem:t,hoveredIndex:w,onMouseEnter:()=>{f(u)},onMouseLeave:()=>f(null)},t.id)),e.jsx(ge,{isFetchingNextPage:m||d,hasNextPage:p??!1,fetchNextPage:h})]})})}const Ce=r.memo(ke);function Ne(){const s=y();return M(s,"3984934927")}function Ve(){const s=y(),a=q(),i=Ne(),l=V($.workspaceId),{eligible:o}=Q(),h=pe();fe();const p=M(s,"547652119");return x(m=>m.showReactQueryDevtools),a?p?e.jsx(k,{to:"/codex/failwhale"}):h==="DISABLED"?e.jsx(k,{to:"/",replace:!0}):o?e.jsx(k,{to:"/codex/onboarding"}):e.jsxs(e.Fragment,{children:[e.jsx(G,{},l),!1,e.jsx(ae,{mobileHeaderRightContent:null,children:e.jsxs("div",{className:"flex h-full flex-col",children:[e.jsx(re,{children:e.jsx(ie,{hideNotificationBell:!0})}),e.jsx(Z,{children:e.jsx(Se,{})})]})})]}):i?e.jsx(ye,{}):e.jsx(k,{to:"/"})}const Se=()=>{const s=x(({setPromptDraft:t})=>t),a=x(({setTasksFilter:t})=>t),i=I(),l=x(t=>t.lastViewedTaskId),[o]=r.useState(!!l),[h,p]=r.useState(!1),m=r.useRef(o),c=r.useRef(null),{value:d}=ee("1406552515"),j=x(({promptDraft:t})=>t),P=te(),n=r.useMemo(()=>P?new O(H()):new X,[P]);r.useEffect(()=>{n.setText(d?"":j)},[n,d]);const w=r.useRef(null),f=L(({setIsExpanded:t})=>t),b=L(t=>t.isExpanded),T=se(n.store,({isFocused:t})=>t);return E(()=>{o&&f(!1)},[o]),E(()=>{const t=c.current;if(!t)return;const u=()=>{const v=t.scrollTop>0;if(p(v),m.current)return;const W=n.isEmpty()&&!T&&b&&v;m.current=W,f(!W)};return t.addEventListener("scroll",u),()=>t.removeEventListener("scroll",u)},[b,T,f,n]),r.useEffect(()=>n.subscribe("focus",()=>{m.current=!1}),[n]),r.useEffect(()=>n.subscribe("blur",t=>{t.relatedTarget instanceof HTMLElement&&w.current?.contains(t.relatedTarget)||h&&(m.current=!0,f(!1))}),[n,h,f]),r.useEffect(()=>n.subscribe("change",()=>{s(n.getCurrentText())}),[n,s]),r.useEffect(()=>{const t=new URLSearchParams(i.search),u=t.get("prompt");u&&n.setText(u);const v=t.get("tab");v==="archived"?a("archived"):v==="all"&&a("current")},[i.search,n,a]),e.jsx(D.Provider,{value:n,children:e.jsx("div",{className:"h-full w-full overflow-y-auto",ref:c,style:{scrollbarGutter:"stable"},children:e.jsxs("div",{className:"z-0 mx-auto flex w-full flex-col md:w-3xl",children:[e.jsx(de,{}),e.jsxs("div",{className:"bg-token-bg-primary sticky top-0 z-50 flex flex-col items-center md:pt-8",children:[e.jsx("h1",{className:"mb-8",children:e.jsx(g,{id:"wham.home.title",defaultMessage:"What are we coding next?"})}),e.jsx("div",{ref:w,className:"w-full max-md:px-3",children:e.jsx(ve,{disabled:d,children:e.jsx(ne,{disableAutoFocus:o||d,isExpandedByDefault:!d,isBigBoxMode:!d,onSubmit:()=>{s(""),oe.set(t=>t+1)}})})}),e.jsx(Te,{})]}),e.jsx(Ce,{})]})})})};export{Ve as W};
//# sourceMappingURL=iz1wmi4z0rwsy60i.js.map
