import{ar as K,g as O,bq as me,f1 as ge,H as pe,cD as R,B as H,an as N,k as te,cC as he,ak as se,al as fe,bj as ae,t as xe,bg as z,cP as ye,c as w,s as oe,bo as ne,bs as re,bD as be,gI as Se,fb as ve,d as _e,j as ke,bp as Ne,af as je,b as Ce,aw as we}from"./i3bl95k8z8nuf4dv.js";import{ik as Me,kv as Ae,bK as Ie,kt as Le,dM as Pe,kw as Ee,kx as Te,ky as He,kz as D,b0 as j,b9 as ie,a_ as le,kA as Be,kB as Fe,eS as De,eP as Ue,ev as T,fP as X,eQ as Ge,kC as Oe,eR as ze,bI as We,bH as qe,db as Re,kD as Ve,W as ce,ao as Ke,hm as Ye,kE as Qe,jQ as $e,O as Ze,fq as Je,kF as Xe,iZ as U,e as et,kG as tt,kH as st,kI as at,a1 as ot}from"./idf4u2jy0wx0pvap.js";import{d as ue}from"./gc51ish3otzvnj1w.js";import{r as y,j as e,M as k,d as nt,f as Y,a8 as V,aj as rt,a9 as it,o as lt,u as ct,q as ut}from"./msupklk377u8vx8o.js";import{b as dt}from"./gwmfzjrffpu4d2tx.js";import{u as mt}from"./igftvtdft8b4phs3.js";const gt="https://persistent.oaistatic.com/image-gen/nux.222e584e.mp4",Q=()=>Te(se.HasSeenNoAuthImagegenNux,!1,He),It=()=>{const{isUnauthenticated:t}=K(),s=Me(),[d]=Q(),a=dt(),l=O(),o=me(l,"2118136551");return!t||s||d||a?"hide":o.get("should_show_imagegen_nux",!1)?"show":"hide"},Lt=({onClose:t})=>{const d=Ae()?"bottom":"center",a=Ie(),[l,o]=y.useState(!1),g=O(),c=ge(g,"2604379743").value,r=typeof c.nux_video_url=="string"?c.nux_video_url:gt,m=typeof c.nux_image_url=="string"?c.nux_image_url:"",[,f]=Q(),x=()=>{f(!0),fe.setItem(se.HasSeenNoAuthImagegenNux,!0)},i=Le(),{layer:n}=pe("2118136551"),u=n.get("sign_up_button_has_the_word_free",!0),p=Pe(u?Ee.signUpForFreeCta:R.signUpButtonText),_=e.jsx(H,{as:"button",size:"large",color:i?"secondary":"primary",onClick:()=>{x(),a({authType:"signup",callback:S=>{N.logSignUpButtonClicked({provider:S,location:"No Auth Imagegen Nux Modal"})}})},fullWidth:!0,children:e.jsx(k,{...p})}),b=e.jsx(H,{as:"button",size:"large",color:i?"primary":"secondary",fullWidth:!0,onClick:()=>{x(),a({authType:"login",callback:S=>{N.logLogInButtonClicked({provider:S,location:"No Auth Imagegen Nux Modal"})}})},children:e.jsx(k,{...R.logInButtonText})}),C=()=>{t(),x(),N.logEventWithStatsig("chatgpt_no_auth_imagegen_nux_modal_dismissed","chatgpt_no_auth_imagegen_nux_modal_dismissed")};return y.useEffect(()=>{N.logEventWithStatsig("chatgpt_no_auth_imagegen_nux_modal_shown","chatgpt_no_auth_imagegen_nux_modal_shown")},[]),e.jsxs(te,{testId:"modal-no-auth-imagegen-nux",isOpen:!0,noPadding:!0,onClose:C,showCloseButton:!1,size:"custom",type:"success",className:"max-w-lg",position:d,children:[e.jsxs("div",{className:"relative aspect-3/2 w-full",children:[!l&&e.jsx("img",{src:m,alt:"",className:"absolute inset-0 h-full w-full object-cover object-bottom transition-opacity duration-300"}),e.jsx("video",{src:r,autoPlay:!0,loop:!0,muted:!0,playsInline:!0,className:"h-full w-full object-cover object-bottom",onLoadedData:()=>o(!0)}),e.jsx("div",{className:"absolute end-4 top-4",children:e.jsx(he,{onClick:C})})]}),e.jsxs("div",{className:"flex flex-col gap-2 px-8 pt-6 pb-8 text-center",children:[e.jsx("div",{className:"text-xl font-medium",children:e.jsx(k,{id:"OxVK72",defaultMessage:"Bring your ideas to life with images"})}),e.jsx("div",{className:"text-token-text-secondary w-full",children:e.jsx(k,{id:"bVWvdX",defaultMessage:"Create a free account to make illustrations, charts, comics, and more."})}),e.jsx("div",{className:"mt-4 mb-2 flex w-full flex-col gap-3",children:i?[b,_]:[_,b]}),e.jsx(H,{color:"ghost",className:"text-token-text-secondary font-semibold underline hover:bg-transparent",onClick:C,children:e.jsx(k,{...R.stayLoggedOut})})]})]})},pt="https://persistent.oaistatic.com/image-gen/nux.222e584e.mp4",ht="https://help.openai.com/en/articles/8932459",Pt=()=>{const{isLoading:t,eligible:s}=ie(le.hasSeenShibaHomeNux),{isUnauthenticated:d}=K(),[a]=Q(),{value:l}=ae("2781425969");return d||!l||a?"hide":t?"loading":s?"show":"hide"};function $(t){return[{title:t.formatMessage({id:"er580q",defaultMessage:"Create an image of a magazine cover of cute animals with headlines and text"}),body:"",type:j.Autocomplete,prompt:t.formatMessage({id:"SKZKBN",defaultMessage:"Create an image of a photorealistic magazine cover for 'CUTE ANIMALS,' featuring three impossibly cute and stylishly accessorized pets, with realistic, catchy headlines and teaser text"}),theme:D.Image},{title:t.formatMessage({id:"ukPFbH",defaultMessage:"Create an image for a garden-themed birthday party invitation"}),body:"",type:j.Autocomplete,prompt:t.formatMessage({id:"uYg5kL",defaultMessage:"Create an image of a colorful invitation for a garden-themed birthday party, including whimsical typography"}),theme:D.Image},{title:t.formatMessage({id:"mMiJxP",defaultMessage:"Create an image of an astronaut with an inflatable duck on Mars"}),body:"",type:j.Autocomplete,prompt:t.formatMessage({id:"5nFWh4",defaultMessage:"Create a photorealistic image of an international astronaut on Mars, wearing a giant duck inflatable toy around its waist"}),theme:D.Image},{title:t.formatMessage({id:"+T7POI",defaultMessage:"Create an image of a tutorial for cooking pasta"}),body:"",type:j.Autocomplete,prompt:t.formatMessage({id:"9N2bJ0",defaultMessage:"Create an image of a comic-book style tutorial for cooking pasta"}),theme:D.Image}]}const Et=({onClose:t,clientThreadId:s})=>{const{markAsViewed:d}=ie(le.hasSeenShibaHomeNux),a=ue(),l=nt(),o=xe("2604379743").config.value,g=typeof o.nux_video_url=="string"?o.nux_video_url:pt,c=typeof o.nux_image_url=="string"?o.nux_image_url:"",[r,m]=y.useState(!1),f=Be(a,s),{activeSystemHints:x}=Fe(s),i=x.find(b=>b.systemHint===z.PictureV2);y.useEffect(()=>{N.logEventWithStatsig("chatgpt_imagegen_nux_modal_shown","chatgpt_imagegen_nux_modal_shown")},[]);const n=Y(),u=$(n),p=()=>{d(),t(),N.logEventWithStatsig("chatgpt_imagegen_nux_modal_dismissed","chatgpt_imagegen_nux_modal_dismissed")},_=()=>{d(),t(),requestAnimationFrame(()=>{requestAnimationFrame(()=>{i&&f({hint:i,enable:!0}),a.focus()})}),a.setAutocompletions(u)};return e.jsx(e.Fragment,{children:e.jsxs(te,{testId:"modal-imagegen-nux",isOpen:!0,noPadding:!0,onClose:ye,shouldIgnoreClickOutside:!0,showCloseButton:!1,size:"custom",type:"success",className:"max-w-lg",children:[e.jsxs("div",{className:"relative aspect-3/2 w-full",children:[!r&&e.jsx("img",{src:c,alt:"",className:"absolute inset-0 h-full w-full object-cover object-bottom transition-opacity duration-300"}),e.jsx("video",{src:g,autoPlay:!0,loop:!0,muted:!0,playsInline:!0,className:"h-full w-full object-cover object-bottom",onLoadedData:()=>m(!0)})]}),e.jsxs("div",{className:"flex flex-col gap-2 px-8 pt-6 pb-6 text-center",children:[e.jsx("div",{className:"text-xl font-medium",children:e.jsx(k,{id:"KgZP2O",defaultMessage:"Image creation just got better"})}),e.jsx("div",{className:"text-token-text-secondary w-full",children:e.jsx(k,{id:"/oguus",defaultMessage:"ChatGPT now thinks a little longer to make more accurate and detailed images. <link>Learn more</link>",values:{link:b=>e.jsx("a",{href:ht,target:"_blank",rel:"noopener noreferrer",className:"text-blue-400 no-underline",children:b})}})}),e.jsx("div",{className:"mt-2 w-full text-xs text-[#8F8F8F] dark:text-[#C4C4C4]",children:e.jsx(k,{id:"6pIXUv",defaultMessage:"You must have permission to edit images you upload, including consent from any people in them."})}),e.jsxs("div",{className:"mt-4 flex w-full gap-3",children:[e.jsx(H,{color:"secondary",onClick:p,className:"flex-1",children:e.jsx(k,{id:"6nf9tD",defaultMessage:"Not now"})}),e.jsx(H,{color:"primary",onClick:()=>{_(),l("/?model=gpt-4o"),N.logEventWithStatsig("chatgpt_imagegen_nux_modal_continued","chatgpt_imagegen_nux_modal_continued")},className:"flex-1",children:e.jsx(k,{id:"ms5BU0",defaultMessage:"Try it"})})]})]})]})})};function Tt({suggestions:t,composerController:s,onSelect:d,onChange:a}){const l=mt(),o=y.useCallback((i,n,u,p)=>{d?.(n,u,p),l(i,n,u,p)},[d,l]),[g,c]=y.useState(()=>t.length>0),[r,m]=y.useState(-1),[f,x]=y.useState(!1);return y.useEffect(()=>{const i=n=>{if(!n.isComposing)if(n.key==="ArrowDown"){const u=r===t.length-1?0:r+1;m(u),a?.(u,!0,t[u])}else if(n.key==="ArrowUp"){n.preventDefault();const u=r<=0?t.length-1:r-1;m(u),a?.(u,!0,t[u])}else n.key==="Enter"&&!n.shiftKey&&t[r]&&o(n,t[r],t,r)};return s.subscribe("keydown",i)},[t,r,a,o,s]),y.useEffect(()=>s.subscribe("blur",()=>{m(-1),c(!1),a?.(-1,!1)}),[s,a]),y.useEffect(()=>s.subscribe("focus",()=>c(!0)),[s]),y.useEffect(()=>{if(!f){const i=()=>{x(!0),window.removeEventListener("mousemove",i)};return window.addEventListener("mousemove",i),()=>{window.removeEventListener("mousemove",i)}}},[f]),y.useEffect(()=>{m(-1),a?.(-1,!1),x(!1)},[t,a]),e.jsx(V.ul,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:w("w-full flex-col p-2.5 max-lg:flex-col-reverse",g?"flex":"hidden"),children:t.map((i,n)=>e.jsxs(V.li,{initial:{opacity:0,translateY:4},animate:{opacity:1,translateY:0},transition:{delay:n*.03},exit:{opacity:0,translateY:4},className:"w-full",children:[n>0&&e.jsx("div",{className:w("h-[1px] opacity-60 max-lg:hidden",r===n||r===n-1?"bg-token-main-surface-secondary mx-2":"bg-token-border-default")}),e.jsxs("button",{className:w("flex w-full cursor-pointer items-center justify-start rounded-lg px-2.5 py-3 text-start whitespace-pre-wrap",r===n?"bg-token-main-surface-secondary":"bg-token-main-surface-primary"),onClick:u=>{u.preventDefault(),o(u,i,t,n)},onMouseDown:u=>{u.preventDefault()},onMouseEnter:()=>{f&&(m(n),a?.(n,!1,i))},onMouseLeave:()=>{m(-1),a?.(-1,!1,i)},children:[i.icon?e.jsx("span",{className:"text-token-text-secondary me-2 h-[18px] w-[18px] flex-none",children:i.icon}):null,e.jsx("span",{className:"text-sm whitespace-pre-wrap",children:i.autocompletionChunks&&i.autocompletionChunks.length>0?e.jsx(e.Fragment,{children:i.autocompletionChunks.map((u,p)=>e.jsx("span",{className:w(u.className??(u.isMatched?"text-token-text-tertiary":"text-token-text-primary")),children:u.text},p))}):e.jsxs(e.Fragment,{children:[e.jsx("span",{className:w(i.type===j.Starter||i.type===j.Trending?"text-token-text-secondary":"text-token-text-tertiary"),children:i.title}),e.jsx("span",{className:"text-token-text-primary",children:i.body})]})})]}),n>0&&e.jsx("div",{className:w("h-[1px] opacity-60 lg:hidden",r===n||r===n-1?"bg-token-main-surface-secondary mx-2":"bg-token-border-default")})]},i.id??n))})}function ft(t,s){t=t.toLocaleLowerCase();const d=s;s=s.toLocaleLowerCase();const a=[];let l=0;for(let c=0;c<s.length&&(l<t.length&&t[l]===s[c]&&(a.push(c),l++),l!==t.length);c++);const o=[];let g=0;if(a.forEach(c=>{if(c>g){const r=d.slice(g,c);r&&o.push({text:r,isMatched:!1})}o.push({text:d[c],isMatched:!0}),g=c+1}),g<s.length){const c=d.slice(g);c&&o.push({text:c,isMatched:!1})}return xt(o)}function xt(t){if(t.length===0)return t;const s=[t[0]];for(let a=1;a<t.length;a++){const l=s[s.length-1],o=t[a];l.isMatched===o.isMatched?l.text+=o.text:s.push(o)}const d=s.filter(a=>a.isMatched).reduce((a,l)=>a+l.text.trim().length,0);return s.length<=4&&d>=2?s:[{text:s.map(a=>a.text).join(""),isMatched:!1}]}const yt=({pressed:t,disabled:s,icon:d,label:a,ariaLabel:l,animatedLabel:o,showLabel:g,onClick:c,splitButtonDropdownContent:r,dropdownContent:m,dataTestid:f,splitSecondaryButton:x,tooltip:i,as:n="popover"})=>{const[u,p]=y.useState(!1),[_,b]=y.useState(!1),C=rt(),S=!s&&t,L=a&&e.jsx("div",{className:w("[display:var(--force-hide-label)] ps-1 pe-1 whitespace-nowrap"),children:a}),P=e.jsxs("button",{className:w("flex h-full min-w-8 items-center justify-center p-2",{"pe-1.5":!!r}),"data-testid":f,"aria-pressed":t,"aria-label":l,disabled:s,onTransitionEnd:()=>b(!1),onClick:A=>{m||(b(!0),c(A))},children:[d,!o&&g?L:null,o&&e.jsx(it,{initial:!1,children:g&&e.jsx(V.span,{initial:{x:-10,width:0,opacity:0},animate:{x:0,width:"fit-content",opacity:1},exit:{x:-10,width:0,opacity:0},transition:{ease:"easeOut",duration:C?0:.15},children:L})})]}),M=i?i(P):P,B=u?e.jsx(We,{className:"h-[18px] w-[18px]"}):e.jsx(qe,{className:"h-[18px] w-[18px]"}),E=r||m?n==="popover"?e.jsx(Ge,{children:e.jsx(Oe,{className:"p-0",$as:ze,side:"bottom",align:"start",collisionPadding:10,sideOffset:8,children:m??r})}):e.jsx(T.Portal,{children:e.jsx(T.Content,{children:m??r})}):null,h=n==="popover"?e.jsx(X,{asChild:!0,children:M}):e.jsx(T.Trigger,{asChild:!0,children:M}),v=n==="popover"?e.jsx(X,{asChild:!0,children:e.jsx("button",{className:"border-token-border-default border-s p-2",style:{borderColor:S?"#0285FF0D":void 0},disabled:s,children:B})}):e.jsx(T.Trigger,{asChild:!0,children:e.jsx("button",{style:{border:"unset",borderLeft:"solid 1px",borderColor:S?"#0285FF0D":"var(--border-default)",backgroundColor:"transparent",height:"100%",padding:"0.5rem",borderRadius:"unset",color:S?"var(--interactive-label-accent-default)":void 0},disabled:s,children:B})}),F=e.jsxs("div",{className:w("radix-state-open:bg-black/10 inline-flex h-9 rounded-full border text-[13px] font-medium",{"duration-75 motion-safe:transition-all":_,"text-token-text-secondary":!t,"text-token-interactive-label-accent-default can-hover:hover:bg-[#BDDCF4] dark:can-hover:hover:bg-[#1A416A] bg-token-composer-blue-bg border-transparent dark:bg-[#2A4A6D] dark:text-[#48AAFF]":!!S,"border-token-border-default can-hover:hover:bg-token-main-surface-secondary focus-visible:outline-black dark:focus-visible:outline-white":!S,"opacity-30":s}),children:[m?h:M,!m&&r?v:null,x]});return r||m?n==="popover"?e.jsxs(De,{onOpenChange:A=>p(A),children:[e.jsx(Ue,{asChild:!0,children:F}),E]}):e.jsxs(T.Root,{onOpenChange:A=>p(A),children:[F,E]}):F},G=z.PictureV2,bt=["o1","o3-mini","o3-mini-high","o1-pro","gpt-4.5","gpt-4-5"];function Ht({clientThreadId:t,composerController:s,currentModelConfig:d,currentModelConfigLoading:a,disableIfNoAccess:l}){const o=O(),[g]=lt(),c=oe()?.planType,r=ne(t,L=>Qe(o,t,L,g,c)),{value:m}=ae("2868048419"),f=Re(t),x=f==null||f?.kind===re.PrimaryAssistant,{isUnauthenticated:i}=K(),n=!i,u=d?.enabledTools?.includes(be.ImageGen),p=Se(),_=!!p,b=u&&!a&&r&&!bt.includes(r),C=n&&m&&!0&&x;return!ve(z.PictureV2)||!(C&&(b||l))?null:e.jsx("div",{"data-testid":"system-hint-picture_v2",style:{viewTransitionName:`var(--vt-composer-${G}-action)`},children:e.jsx(St,{clientThreadId:t,composerController:s,disabled:!!l&&!b||_,imageGenFeatureBlock:p})},`system-hint-${G}`)}function St({clientThreadId:t,composerController:s,disabled:d,imageGenFeatureBlock:a}){const o=Ve(s)===G,g=Y(),c=$(g),r=de(g),m=g.formatMessage({id:"av47h4",defaultMessage:"Visualize anything"}),{clearAllSystemHintModeTriggers:f}=ce(),x=p=>{p.stopPropagation(),p.preventDefault(),requestAnimationFrame(()=>{requestAnimationFrame(()=>{f(),o?s.removeSystemHints():s.addSystemHint(G,r),s.focus()})}),s.setAutocompletions(c),o?N.logEventWithStatsig("Composer Create Image Button Disabled","composer_create_image_button_disabled",{clientThreadId:t}):N.logEventWithStatsig("Composer Create Image Button Enabled","composer_create_image_button_enabled",{clientThreadId:t})},i=e.jsx(yt,{pressed:o,icon:e.jsx(Ye,{className:"h-[18px] w-[18px]"}),label:r,ariaLabel:r,animatedLabel:!0,showLabel:!0,onClick:x,disabled:!!d,dataTestid:"composer-button-create-image"}),n=a?.title??m,u=a?.description??void 0;return e.jsx(Ke,{className:"inline-block",label:n,secondaryLabel:u,side:"bottom",onOpenChange:p=>{p&&N.logEventWithStatsig("Composer Create Image Button Hovered","composer_create_image_button_hovered",{clientThreadId:t})},children:i})}function de(t){return t.formatMessage({id:"rh3NHv",defaultMessage:"Create image"})}async function vt(t=8,s=null){const d=await Ce.safeGet("/prompt_library/",{parameters:{query:{limit:t,use_v2:!0,model_slug:s}},anonAware:!0});return we.addFirstTiming("load.promptStarters"),d}function _t(t=8,s=null){return ut({queryKey:["promptStarters",t,s],queryFn:()=>vt(t,s)})}function ee(t){return($e(t)?t.promptStarters:t.gizmo.display.prompt_starters)?.map(s=>({type:j.Starter,title:"",body:s,prompt:s}))}const kt=()=>{const t=O(),s=ke(t),d=et(),a=tt(st),l=Ne(t),o=l?s.getLayer("4031588851"):s.getLayer("3533083032"),g=l?s.getLayer("4031588851",{disableExposureLog:!0}):s.getLayer("3533083032",{disableExposureLog:!0});return l?d==null?!1:Date.now()/1e3-d.created<g.get("new-user-age-seconds",14*24*60*60)&&o.get("web-enable-for-new-users",!1):a<g.get("new-user-message-count",20)&&o.get("web-enable-for-new-users",!1)},Bt=({clientThreadId:t,limit:s,shouldBeEnabledForDefaultAssistant:d,isModelLoaded:a,modelSlug:l})=>{const o=ue(),g=_e(),c=Y(),{clearAllSystemHintModeTriggers:r}=ce(),m=ne(t,h=>h?.mode),f=Ze(m?.kind===re.GizmoInteraction?m.gizmo_id:void 0).data,{gizmoEditorData:x,mode:i}=Je(),n=kt(),u=Xe(m),p=oe(),_=n&&d&&!u&&!p?.isEnterprisey(),{data:b,isSuccess:C}=ct({..._t(s,l),enabled:_});if(g==null)return{promptStarters:[],isLoading:!0,isSuccess:!1};if(i==="test"&&x)return{promptStarters:ee(x)??[],isLoading:!1,isSuccess:!0};if(f!=null)return{promptStarters:ee(f),isLoading:!1,isSuccess:!0};if(!_)return{promptStarters:[],isLoading:!1,isSuccess:!0};const S=b?.items.map(h=>({type:j.Starter,id:h.id,title:h.title,body:h.description,prompt:h.prompt,category:h.category,oneliner:h.oneliner,theme:h.theme,requires_file_upload:h.requires_file_upload}))??[],L=(h,v,F,A)=>{if(v.type===j.Starter&&v.category==="dalle"){requestAnimationFrame(()=>{r(),o.addSystemHint(z.PictureV2,de(c)),o.focus()}),o.setAutocompletions($(c));return}const Z=v.title;o.setAutocompletions([]),o.focus(),o.setText(Z),requestAnimationFrame(()=>{const W=S.filter(I=>I.theme===v.theme).map(I=>{const q=je(I.oneliner),J=q.startsWith(I.title);return{...I,title:J?`${I.title} `:"",body:J?I.body:q,autocompletionChunks:ft(Z,q),type:j.Autocomplete}});o.setAutocompletions(W),W.length>0&&at(W,t),ot(v,A,t)})},P=S?.reduce((h,v)=>(v.theme&&!h[v.theme]&&(h[v.theme]=v),h),{}),M=[];if(P)for(const h in P)h!=="For you"&&M.push(P[h]);const B=M.length>0,E=!!(C&&B&&a);return U.markStart("StarterPromptChips",U.NS_COMPOSER),E&&U.markRendered("StarterPromptChips",U.NS_COMPOSER),{onSelectStarterPrompt:L,shouldShowStarterPrompts:E,promptStarters:M}};export{Tt as A,yt as C,Et as I,Lt as N,It as a,$ as b,Ht as c,Bt as d,ee as g,Pt as u};
//# sourceMappingURL=o2t4lszmsavslsdu.js.map
