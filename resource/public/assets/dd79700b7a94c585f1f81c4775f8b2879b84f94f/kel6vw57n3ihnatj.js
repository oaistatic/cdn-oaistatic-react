import{gb as S,j as y,L as b,fd as _}from"./eb6xg52mym6rhnsh.js";import{D as M,j as e,a9 as N,f as k,d as C,a as F,b as A,M as u}from"./cs2gapsc2bulabhw.js";import{d1 as W}from"./pduvb49qgyq1mqhk.js";import{R as P,I as a,S as l}from"./ootq0ng338ql9vbp.js";import{E as R,R as U,g as D}from"./luvp4cbk2e9m68md.js";import{u as T}from"./jt94ci8v8fgyr3fb.js";import{u as L,W as O,i as B,a as I}from"./flul5lgejanvmzis.js";import{W as $}from"./gn8hoowjr3gjt16v.js";import"./jfxh69p8ryncyku8.js";import"./co1ila1zqn6dc99l.js";import"./m4uwihyvndo7xd88.js";import"./lxj9p4c7fussomnd.js";import"./dijlyyo6bxi7y1gl.js";import"./kpz7qev108jf94tz.js";import"./ke1leuxpoxd60g1m.js";import"./dugtojg1blcdqewy.js";import"./lzqtvz4ppmzufktl.js";import"./mhlnvw0pfrh2uh0n.js";import"./fb2gj4fu6zbut62o.js";import"./kmvt5g0oz7ekj3ft.js";import"./ic7rccsdo5x6ovoh.js";import"./c1w85nn5shpnb9e0.js";import"./f2cwocui2o4rh90z.js";import"./do5nmvaddt7ak8xi.js";import"./e95x0gs5di7mq1tw.js";import"./ggve90in2x9hqouv.js";import"./nlj97v8clhezwsxr.js";import"./bzo48ft2wb6beuij.js";import"./otrhg4fwlde4g25l.js";import"./epqkr08njby1t19h.js";import"./7u88g4wa9fostszz.js";import"./codkr9xsn28rihk7.js";import"./h71lg9jejkufcc57.js";import"./l9t7qwwrq1pkwdh1.js";import"./ec6jcwftshefgs7y.js";function q(){const{environmentId:s}=M(),{eligible:i}=W();return i?e.jsx(N,{to:"/codex/onboarding"}):s?e.jsx(z,{environmentId:s}):e.jsx(S,{})}function z({environmentId:s}){const i=k(),o=y(),g=C(),m=F(),{data:n,isLoading:v,isError:h}=L(s),d=n?.secrets??{},x=T()?"workspace":"private",{mutate:f,isPending:E}=A({mutationFn:t=>O.updateEnvironment(s,t),onSuccess:async t=>{await B(m,s),I(m,s,t),o.success(i.formatMessage({id:"wham.editEnvironment.environmentUpdatedSuccessfully",defaultMessage:"Environment updated successfully"})),g(`/codex/settings/environment/${s}`)},onError:()=>{o.danger(i.formatMessage({id:"wham.editEnvironment.failedToUpdateEnvironment",defaultMessage:"Failed to update environment"}))}});function j(t){const r=D(t.secrets,d),w=t.envVars.reduce((c,p)=>(c[p.key]=p.value,c),{});f({label:t.label,repos:[t.repositoryId],machine_id:t.machine,setup:t.setupCommands,workspace_dir:t.workspaceDirectory,agent_network_access:t.agentNetworkAccess,description:t.description,share_settings:t.share_settings,secrets:r,env_vars:w})}return e.jsx($,{flex:!0,hideBorder:!0,showSidebar:!1,maxWidth:"w-full",children:v?e.jsx("div",{className:"flex h-full items-center justify-center",children:e.jsx(b,{})}):h?e.jsx("div",{className:"flex h-full items-center justify-center",children:e.jsx(u,{id:"wham.editEnvironment.errorLoadingEnvironment",defaultMessage:"Error loading environment"})}):n?e.jsxs(e.Fragment,{children:[e.jsxs(P,{className:"sticky top-0 px-4",children:[e.jsx(a,{label:i.formatMessage({id:"wham.editEnvironment.environments",defaultMessage:"Environments"}),url:"/codex/settings/environments",className:"text-token-text-tertiary"}),e.jsx(l,{}),e.jsx(a,{label:n.label,url:`/codex/settings/environment/${s}`,className:"font-medium"}),e.jsx(l,{}),e.jsx(a,{label:i.formatMessage({id:"wham.editEnvironment.edit",defaultMessage:"edit"}),className:"text-token-text-tertiary"})]}),e.jsx(R,{initialEnvironmentId:s,existingEnvironment:n,initialValues:{label:n?.label,description:n?.description??"",share_settings:n?.share_settings??x,machine:n?.machine_id,repositoryId:n?.repos[0],workspaceDirectory:n?.workspace_dir??"",agentNetworkAccess:n?.agent_network_access,setupCommands:n?.setup?Array.isArray(n?.setup)?n.setup.join(`
`):n.setup:"",envVars:Object.entries(n?.env_vars??{}).map(([t,r])=>({key:t,value:r})),secrets:Object.keys(d).map(t=>({key:t,value:U,isEditing:!1}))},primaryButtonText:i.formatMessage({id:"wham.editEnvironment.saveEnvironment",defaultMessage:"Save environment"}),onSubmit:j,isPending:E})]}):e.jsx("div",{className:"flex h-full items-center justify-center",children:e.jsx(u,{id:"wham.editEnvironment.environmentNotFound",defaultMessage:"Environment not found"})})})}const Ne=()=>[{title:"Codex"}],ke=_(function(){return e.jsx(q,{})});export{ke as default,Ne as meta};
//# sourceMappingURL=kel6vw57n3ihnatj.js.map
