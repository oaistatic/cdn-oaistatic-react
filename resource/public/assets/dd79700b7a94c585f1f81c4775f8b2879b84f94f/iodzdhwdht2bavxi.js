import{j as N,h as P,i as h,c as k,gb as y,b0 as C,L as S,B as x,fd as _}from"./eb6xg52mym6rhnsh.js";import{f as j,a as A,d as M,b as W,j as e,M as n,D as O,a9 as R,r as F,ad as B}from"./cs2gapsc2bulabhw.js";import{d1 as I,e as T,ac as p,hR as L,i9 as q,b3 as U}from"./pduvb49qgyq1mqhk.js";import{R as V,I as v,S as $}from"./ootq0ng338ql9vbp.js";import{u as z}from"./jt94ci8v8fgyr3fb.js";import{W as Y,r as Q,i as X,c as Z,u as G}from"./flul5lgejanvmzis.js";import{E as H}from"./f8frnjk244oycrb4.js";import{W as J}from"./gn8hoowjr3gjt16v.js";import"./fb2gj4fu6zbut62o.js";import"./kmvt5g0oz7ekj3ft.js";import"./ic7rccsdo5x6ovoh.js";import"./c1w85nn5shpnb9e0.js";import"./f2cwocui2o4rh90z.js";import"./do5nmvaddt7ak8xi.js";import"./e95x0gs5di7mq1tw.js";import"./ggve90in2x9hqouv.js";import"./nlj97v8clhezwsxr.js";import"./bzo48ft2wb6beuij.js";import"./otrhg4fwlde4g25l.js";import"./epqkr08njby1t19h.js";import"./7u88g4wa9fostszz.js";import"./codkr9xsn28rihk7.js";import"./h71lg9jejkufcc57.js";import"./l9t7qwwrq1pkwdh1.js";import"./ec6jcwftshefgs7y.js";import"./ke1leuxpoxd60g1m.js";import"./dugtojg1blcdqewy.js";import"./lzqtvz4ppmzufktl.js";function K({environmentId:s,onClose:t}){const o=j(),m=N(),r=A(),c=M(),{mutate:a,isPending:g}=W({mutationFn:()=>Y.deleteEnvironment(s),onSuccess:async()=>{Q(r,s),await X(r,s),m.success(o.formatMessage({id:"wham.deleteEnvironmentModal.environmentDeletedSuccessfully",defaultMessage:"Environment deleted successfully"})),t(),c("/codex/settings/environments")},onError:()=>{m.danger(o.formatMessage({id:"wham.deleteEnvironmentModal.failedToDeleteEnvironment",defaultMessage:"Failed to delete environment"}))}});return e.jsx(P,{testId:"modal-wham-delete-environment",isOpen:!0,type:"danger",title:e.jsx(n,{id:"wham.deleteEnvironmentModal.title",defaultMessage:"Delete environment"}),onClose:t,primaryButton:e.jsx(h.Button,{title:o.formatMessage({id:"wham.deleteEnvironmentModal.delete",defaultMessage:"Delete"}),color:"danger",loading:g,onClick:()=>{a()}}),secondaryButton:e.jsx(h.Button,{title:o.formatMessage({id:"wham.deleteEnvironmentModal.cancel",defaultMessage:"Cancel"}),color:"secondary",onClick:t}),children:e.jsx("div",{className:"text-sm",children:e.jsx(n,{id:"wham.deleteEnvironmentModal.message",defaultMessage:"Tasks that use it will remain, but users wonâ€™t be able to create follow-up tasks."})})})}function i({label:s,children:t,className:o}){return e.jsxs("div",{className:k("flex flex-col gap-1",o),children:[e.jsx("dt",{className:"text-token-text-primary text-sm font-medium",children:s}),e.jsx("dd",{className:"text-token-text-primary text-sm font-normal",children:t})]})}function ee(){const{environmentId:s}=O(),{eligible:t}=I();return t?e.jsx(R,{to:"/codex/onboarding"}):s?e.jsx(te,{environmentId:s}):e.jsx(y,{})}function te({environmentId:s}){const t=j(),o=M(),[m,r]=F.useState(!1),c=Z(l=>l.setEnvironmentId),{data:a,isLoading:g,isError:w}=G(s),f=T(),d=f&&a&&a.creator.email===f.email,b=C(),E=z(),D=b?.name??t.formatMessage({id:"wham.environmentDetailsPage.workspace",defaultMessage:"Workspace"}),u=a?.agent_network_access?.mode;return e.jsxs(J,{topPadding:!0,showSidebar:!1,children:[e.jsx("div",{className:"flex flex-col px-8 md:px-16",children:g?e.jsx("div",{className:"flex h-full items-center justify-center",children:e.jsx(S,{})}):w?e.jsx(H,{title:t.formatMessage({id:"wham.environmentDetailsPage.errorLoadingEnvironment",defaultMessage:"Error loading environment"}),description:t.formatMessage({id:"wham.environmentDetailsPage.errorLoadingEnvironmentDescription",defaultMessage:"Error loading environment description"})}):a?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"border-token-border-default flex flex-col justify-between gap-2 border-b pb-4",children:e.jsxs("div",{className:"flex flex-row items-center justify-between",children:[e.jsxs(V,{children:[e.jsx(v,{label:t.formatMessage({id:"wham.environmentDetailsPage.environments",defaultMessage:"Environments"}),url:"/codex/settings/environments",className:"text-token-text-tertiary"}),e.jsx($,{}),e.jsx(v,{label:a.label,url:`/codex/settings/environment/${s}`,className:"text-token-text-primary font-medium"})]}),e.jsxs("div",{className:"flex flex-row gap-2",children:[e.jsx(p,{label:d?void 0:t.formatMessage({id:"wham.environmentDetailsPage.deleteEnvironmentTooltip",defaultMessage:"You cannot delete an environment that you did not create"}),children:e.jsx(x,{color:"danger-outline",onClick:()=>r(!0),disabled:!d,children:e.jsx(n,{id:"wham.environmentDetailsPage.deleteEnvironment",defaultMessage:"Delete"})})}),e.jsx(p,{label:d?void 0:t.formatMessage({id:"wham.environmentDetailsPage.editEnvironmentTooltip",defaultMessage:"You cannot edit an environment that you did not create"}),children:e.jsx(x,{icon:L,onClick:()=>{o(`/codex/settings/environment/${s}/edit`)},color:"secondary",disabled:!d,children:e.jsx(n,{id:"wham.environmentDetailsPage.editEnvironment",defaultMessage:"Edit"})})}),e.jsx(x,{size:"xs",color:"secondary",onClick:()=>{c(s),U.recordClickEnv(),o("/codex")},children:e.jsxs("div",{className:"flex items-center gap-0.5",children:[e.jsx(n,{id:"wham.turnInfoRow.useEnvironment",defaultMessage:"Use this"}),e.jsx(q,{className:"icon-xs"})]})})]})]})}),e.jsx("div",{className:"text-token-text-primary py-8 text-xl",children:a.label}),e.jsxs("div",{className:"grid gap-x-12 gap-y-6 md:grid-cols-2",children:[e.jsx(i,{label:t.formatMessage({id:"wham.environmentDetailsPage.creator",defaultMessage:"Creator"}),children:a.creator.email}),e.jsx(i,{label:t.formatMessage({id:"wham.environmentDetailsPage.image",defaultMessage:"Image"}),children:a.machine.label||e.jsx(n,{id:"wham.environmentDetailsPage.noImage",defaultMessage:"No image"})}),e.jsx(i,{label:t.formatMessage({id:"wham.environmentDetailsPage.description",defaultMessage:"Description"}),children:a.description??e.jsx(n,{id:"wham.environmentDetailsPage.noDescription",defaultMessage:"N/A"})}),e.jsx(i,{label:t.formatMessage({id:"wham.environmentDetailsPage.agentNetworkAccess",defaultMessage:"Agent internet access"}),children:u==="on"?e.jsx(n,{id:"wham.environmentDetailsPage.agentInternetAccess.on",defaultMessage:"On"}):u==="custom"?e.jsx(n,{id:"wham.environmentDetailsPage.agentInternetAccess.custom",defaultMessage:"Custom"}):u==="off"?e.jsx(n,{id:"wham.environmentDetailsPage.agentInternetAccess.off",defaultMessage:"Off"}):null}),e.jsx(i,{label:t.formatMessage({id:"wham.environmentDetailsPage.environmentVariables",defaultMessage:"Environment variables"}),children:e.jsx("pre",{className:"mono text-xs leading-5 break-all whitespace-pre-wrap",children:Object.keys(a.env_vars??{}).filter(l=>!l.startsWith("CODEX_ENV_")).join(`
`)})}),e.jsx(i,{label:t.formatMessage({id:"wham.environmentDetailsPage.secrets",defaultMessage:"Secrets"}),children:e.jsx("pre",{className:"mono text-xs leading-5 break-all whitespace-pre-wrap",children:Object.keys(a.secrets??{}).join(`
`)})}),e.jsx(i,{label:t.formatMessage({id:"wham.environmentDetailsPage.createdAt",defaultMessage:"Created at"}),children:a.created_at?e.jsx(B,{value:new Date(a.created_at*1e3),year:"numeric",month:"long",day:"numeric"}):e.jsx(n,{id:"wham.environmentDetailsPage.noCreationDate",defaultMessage:"No creation date"})}),e.jsx(i,{label:t.formatMessage({id:"wham.environmentDetailsPage.setupScript",defaultMessage:"Setup script"}),children:e.jsx("pre",{className:"mono text-xs leading-5 break-all whitespace-pre-wrap",children:(Array.isArray(a.setup)?a.setup:[a.setup]).filter(Boolean).join(`
`)})}),e.jsx(i,{label:t.formatMessage({id:"wham.environmentDetailsPage.repository",defaultMessage:"Repository"}),children:a.repo_map?Object.values(a.repo_map).map(l=>l.repository_full_name):e.jsx(n,{id:"wham.environmentDetailsPage.noRepository",defaultMessage:"No repository"})}),e.jsx(i,{label:t.formatMessage({id:"wham.environmentDetailsPage.numTasks",defaultMessage:"No. of tasks"}),children:a.task_count??0}),E&&e.jsx(i,{label:t.formatMessage({id:"94ZVks",defaultMessage:"Share"}),children:a.share_settings==="workspace"?t.formatMessage({id:"wham.environmentDetailsPage.sharedWithWorkspace",defaultMessage:"Shared with {workspaceName}"},{workspaceName:D}):t.formatMessage({id:"wham.environmentDetailsPage.private",defaultMessage:"Private"})})]})]}):e.jsx("div",{className:"flex h-full items-center justify-center",children:e.jsx(n,{id:"wham.environmentDetailsPage.environmentNotFound",defaultMessage:"Environment not found"})})}),m&&e.jsx(K,{environmentId:s,onClose:()=>r(!1)})]})}const _e=()=>[{title:"Codex"}],Ae=_(function(){return e.jsx(ee,{})});export{Ae as default,_e as meta};
//# sourceMappingURL=iodzdhwdht2bavxi.js.map
