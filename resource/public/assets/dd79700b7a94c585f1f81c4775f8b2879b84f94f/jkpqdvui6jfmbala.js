import{f as D,r as l,j as e,g as P,M as U}from"./cs2gapsc2bulabhw.js";import{aJ as E,b6 as z,b7 as B,b8 as R,aM as k,aN as h,b9 as X,ac as w,aT as Y,am as $,aU as q,al as H,ba as J,aX as K,aW as Q,aO as Z,aY as ee}from"./pduvb49qgyq1mqhk.js";import{a9 as ae,fb as se,c as p,bE as te,e as ne,L as ie}from"./eb6xg52mym6rhnsh.js";import{u as oe}from"./epqkr08njby1t19h.js";import{I as re}from"./evmyafqvn996a7fd.js";const le="ChatGPT Image";function G({rightAlign:a=!1,bottomAlign:s=!1,fullWidth:n=!1,justifyBetween:i=!1,alwaysVisible:o=!1,children:r}){return e.jsxs("div",{className:p("absolute z-2",o?"opacity-100":"opacity-0 group-hover/imagegen-image:opacity-100 group-focus/imagegen-image:opacity-100 focus-within:opacity-100",a?"end-0":"start-0",s?"bottom-0":"top-0",n&&"w-full"),children:[e.jsx("div",{className:p(s?"bg-linear-to-b":"bg-linear-to-t","from-transparent to-black/30","h-20 w-full")}),e.jsx("div",{className:p("absolute inset-0 flex p-1",s?"items-end":"items-start",a?"justify-end":"justify-start",i&&"justify-between"),children:r})]})}function c({icon:a,children:s,selected:n,disabled:i,onClick:o,ariaLabel:r}){return e.jsxs("button",{className:p("hover:bg-white/15 hover:backdrop-blur-md focus:bg-white/15 focus:backdrop-blur-md","z-11 flex h-10 items-center justify-center gap-1 rounded-xl text-sm font-medium text-white",s==null?"w-10":"px-2"),onClick:o,disabled:i??n,"aria-label":r,children:[e.jsx(a,{style:{filter:"drop-shadow(0px 2px 4px rgba(0, 0, 0, 0.15))"},className:p("icon-sidebar",n?"fill-current":"fill-transparent")}),s]})}function b(a){return s=>{s.stopPropagation(),a()}}const he=({imageAssetPointer:a,imageUrl:s,onEditorClick:n,isEditorAvailable:i,messageId:o,clientThreadId:r,serverThreadId:y,shouldShowOverflow:g=!1,showRatingButtons:x=!0})=>{const{value:j}=ae("706943082"),{config:C}=se("2248456840"),O=C.get("enabled",!1),t=D(),[F,v]=l.useState(!1),[d,L]=l.useState(null),m=E(),M=f=>{d==null&&(h.imageRated({liked:f,analyticsContext:m}),L(f),f||v(!0))},I=l.useCallback(()=>{const f=new Date,V=t.formatDate(f,{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit",second:"2-digit"});return`${le} ${V}.png`},[t]),N=z(),S=B(),_=S?.type===R.Image&&S.image.asset_pointer===a,[T,W]=l.useState(!1),A=l.useCallback(()=>{a&&(k({url:a,fileName:I()}),h.download({analyticsContext:m}))},[a,I,m]);return e.jsxs(e.Fragment,{children:[N?!_&&e.jsx(G,{rightAlign:!0,fullWidth:!0,children:e.jsx(c,{icon:X,ariaLabel:t.formatMessage(u.expand)})}):e.jsx(e.Fragment,{children:e.jsx(G,{bottomAlign:!0,rightAlign:!0,fullWidth:!0,alwaysVisible:T,children:e.jsxs("div",{className:"flex w-full items-center justify-between",children:[e.jsxs("div",{className:"flex",children:[x&&d!==!1&&e.jsx(w,{label:t.formatMessage({id:"U99PVw",defaultMessage:"Like"}),delayDuration:300,children:e.jsx(c,{icon:d===!0?Y:$,onClick:b(()=>M(!0)),ariaLabel:t.formatMessage(u.thumbsUp)})}),x&&d!==!0&&e.jsx(w,{label:t.formatMessage({id:"ncGqTt",defaultMessage:"Dislike"}),delayDuration:300,children:e.jsx(c,{icon:d===!1?q:H,onClick:b(()=>M(!1)),ariaLabel:t.formatMessage(u.thumbsDown)})}),i&&!j&&e.jsx(w,{label:t.formatMessage({id:"UH0Ly0",defaultMessage:"Edit image"}),children:e.jsx(c,{icon:J,ariaLabel:t.formatMessage(u.inpaint),onClick:b(()=>{n?.(),h.inpaintStarted({analyticsContext:m})})})}),s&&e.jsx(w,{label:t.formatMessage({id:"0EYire",defaultMessage:"Download"}),children:e.jsx(c,{icon:K,ariaLabel:t.formatMessage(u.download),onClick:b(()=>{k({url:s,fileName:I()}),h.download({analyticsContext:m})})})}),O&&g&&e.jsx(Q,{onOpenChange:W,onDownload:A,triggerClassName:"z-11 flex h-10 w-10 items-center justify-center rounded-xl bg-transparent hover:bg-token-icon-surface/10 focus:bg-token-icon-surface/10 focus-visible:bg-token-icon-surface/10",iconClassName:"icon-lg fill-transparent text-white",dropdownClassName:"z-11 min-w-fit origin-top-right text-token-text-primary"})]}),e.jsx("div",{className:"flex",children:e.jsx(de,{clientThreadId:r,messageId:o})})]})})}),F&&e.jsx(re,{messageId:o,serverThreadId:y??"",rating:d,onClose:()=>v(!1)})]})};function de({clientThreadId:a,messageId:s}){const[n,i]=l.useState(!1),o=D(),r=te(),y=Z(),g=!r&&y(),x=oe({clientThreadId:a,imageGenMessageId:s}),j=E();return l.useEffect(()=>{g&&ne.logEventWithStatsig("Share Post: Share Button Shown","chatgpt_post_share_button_shown",{source:"image_gen_action_overlay"})},[g]),g?e.jsx(c,{icon:n?ie:ee,disabled:n,onClick:b(async()=>{i(!0);try{await x()}finally{i(!1)}h.imageShared({analyticsContext:j,source:"image_gen_action_overlay"})}),ariaLabel:o.formatMessage(u.share),children:e.jsx(U,{id:"imageGenActionOverlay.shareButton",defaultMessage:"Share"})}):null}const u=P({thumbsUp:{id:"imageGenActionOverlay.thumbsUp",defaultMessage:"Like this image"},thumbsDown:{id:"imageGenActionOverlay.thumbsDown",defaultMessage:"Dislike this image"},inpaint:{id:"imageGenActionOverlay.inpaint",defaultMessage:"Enter inpainting mode"},download:{id:"imageGenActionOverlay.download",defaultMessage:"Download this image"},expand:{id:"imageGenActionOverlay.expand",defaultMessage:"Expand this image"},share:{id:"imageGenActionOverlay.share",defaultMessage:"Share this image"}});export{he as I};
//# sourceMappingURL=jkpqdvui6jfmbala.js.map
