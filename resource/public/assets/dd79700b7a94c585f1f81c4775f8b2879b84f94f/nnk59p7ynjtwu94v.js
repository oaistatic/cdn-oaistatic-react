import{fd as R,cR as g,d3 as E,dC as M,aC as F,bD as y,fc as B,bL as D}from"./eb6xg52mym6rhnsh.js";import{D as O,p as A,d as H,r as o,a as L,j as e}from"./cs2gapsc2bulabhw.js";import{r as N,t as T,a as p,u as _,s as k,C as b,b as Q,g as j,P as $,T as q,c as K,d as V}from"./pduvb49qgyq1mqhk.js";import{C as G}from"./nhgg43vfy9ih4vl5.js";import{T as W,C as z}from"./loj7h6g9jxs26h85.js";import{g as J}from"./fi1xw3fnwortmtrb.js";import{C as w,T as U}from"./n28u28v6jphl8y3u.js";import{C as X}from"./f2cwocui2o4rh90z.js";import"./pbk0s8tey8blca1e.js";import"./jy1u8exw8iz2slve.js";import"./n3cijkf5teq8hl4t.js";import"./f76gy0b8ieo4s693.js";import"./gy64pge8qevmvg7e.js";import"./o9jbx8esqeax3dhl.js";import"./hpoi02g0dgpne8ux.js";import"./kmvt5g0oz7ekj3ft.js";import"./kpz7qev108jf94tz.js";import"./do5nmvaddt7ak8xi.js";import"./e95x0gs5di7mq1tw.js";import"./dv3d7908pzpkjndg.js";import"./ekzdsqfpi8dxrf9q.js";import"./jcndegd4nkgfbfly.js";import"./jvqxvg1ld8ud62qh.js";import"./xbmjt85q81k7ilbj.js";import"./ocr8ihe7mqprglo4.js";import"./nkcra1lf12hy5eza.js";import"./j0zvljvurep0tkuq.js";import"./echjzuil72lr2oll.js";import"./nlwtx7zdm2am1wmc.js";import"./bk8slwxjkdlmxjxm.js";import"./m6mpdolaukauf1xm.js";import"./dwy8f7y5ary0iziz.js";import"./ic7rccsdo5x6ovoh.js";import"./c1w85nn5shpnb9e0.js";import"./nlj97v8clhezwsxr.js";import"./bzo48ft2wb6beuij.js";import"./fb2gj4fu6zbut62o.js";import"./otrhg4fwlde4g25l.js";import"./epqkr08njby1t19h.js";import"./7u88g4wa9fostszz.js";import"./codkr9xsn28rihk7.js";import"./h71lg9jejkufcc57.js";import"./l9t7qwwrq1pkwdh1.js";import"./ec6jcwftshefgs7y.js";import"./oe3vdo8nwau2d3cp.js";import"./abn9sjdb7psxnmu1.js";import"./ggve90in2x9hqouv.js";const Ge=()=>(N(),null),We=R(function(){const r=O(),[s]=A(),l=H(),u=T(r.conversationId),i=p(s.get("readonly"),!1),c=p(s.get("isFullScreen"),!1),d=p(s.get("header"),!0),m=p(s.get("appPreview"),!1),a=g(()=>E()),C=g(()=>M()),P=p(s.get("hideBottomComposer"),!!i),n=T(r.canmoreId),t=u,f=_();o.useEffect(()=>{k({type:b.Textdoc,textdocId:n})},[n]),Q(t,{kind:F.PrimaryAssistant});const h=L();if(o.useEffect(()=>(y.retainThread(t),()=>{setTimeout(()=>{h.invalidateQueries({queryKey:["conversation",t]})},0),y.releaseThread(t)}),[t,h]),o.useEffect(()=>{n||l("/")},[n,l]),o.useEffect(()=>{j().sendMessage({type:w.Loaded})},[n]),!n||f?.type!==b.Textdoc)return null;const S=()=>{j().sendMessage({type:w.Close})},I=i&&!d;return e.jsxs("div",{className:"h-full w-full overflow-hidden contain-content",children:[e.jsx("meta",{name:"viewport",content:"width=device-width, initial-scale=1, maximum-scale=1"}),e.jsx($,{clientThreadId:t,children:e.jsx(X,{clientThreadId:t,children:e.jsx(q,{clientThreadId:t,children:m?e.jsx(B,{children:e.jsx(Y,{textdocId:f.textdocId})}):I?e.jsxs(e.Fragment,{children:[e.jsx(W,{clientThreadId:t,disableScroll:!a,textdocId:f.textdocId}),e.jsx(z,{})]}):e.jsx(U,{isEmbedded:!0,hideRunCode:!a,isFullScreen:c,hideHeader:!d,hideBottomComposer:P,isReadonlyFromQueryParam:i,hideRenameButton:C,clientThreadId:t,focusedTextdoc:f,onClose:S},"textdocContent")})})})]})}),Y=({textdocId:x})=>{const r=o.useRef(null),s=K(x),[l,u]=o.useState(!1),i=s?.versions??[],c=D(i),d=o.useCallback(V(async m=>{const a=J(m.type,m.content);if(r.current&&(a==="react"||a==="html")){u(!0);const v=r.current.evalAsync({language:a,code:m.content});for await(const C of v)console.debug(C)}u(!1)},100),[]);return o.useEffect(()=>{c&&d(c)},[c,d]),e.jsx(G,{visuallyHidden:!l,ref:r,enableTransition:!0,title:""})};export{Ge as clientLoader,We as default};
//# sourceMappingURL=nnk59p7ynjtwu94v.js.map
