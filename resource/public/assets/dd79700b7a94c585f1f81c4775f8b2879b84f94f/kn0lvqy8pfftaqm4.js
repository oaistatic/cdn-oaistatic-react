import{f as x,r as d,j as e,a5 as X,M as w}from"./cs2gapsc2bulabhw.js";import{a9 as z,fb as E,dc as V,c as q,F as J,e as K,L as Q}from"./eb6xg52mym6rhnsh.js";import{aJ as k,aK as Y,aL as D,aM as j,aN as b,aO as A,aP as H,aQ as p,aR as Z,aS as ee,aT as te,am as ae,aU as se,al as ne,aV as oe,aW as ie,ac as re,aX as le,aY as de}from"./pduvb49qgyq1mqhk.js";import{u as ce}from"./epqkr08njby1t19h.js";import{I as ge}from"./evmyafqvn996a7fd.js";const M="ChatGPT Image";function me({imageAsset:t,serverThreadId:s}){const{config:i}=E("2248456840"),n=i.get("enabled",!1),a=x(),c=k(),r=d.useCallback(()=>{const g=new Date,f=a.formatDate(g,{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit",second:"2-digit"});return`${M} ${f}.png`},[a]),l=D({imageAssetPointer:t,serverThreadId:s}),h=d.useCallback(()=>{n&&l?j({url:l,fileName:r()}):j({url:t.url,fileName:r()}),b.download({analyticsContext:c})},[n,l,t,r,c]);return e.jsx(o,{tooltip:a.formatMessage({id:"imageEditorControls.downloadButtonTooltip",defaultMessage:"Save"}),onClick:h,children:e.jsx(le,{})})}function ue({onClose:t}){const s=x();return e.jsx(o,{tooltip:s.formatMessage({id:"imageEditorControls.closeButtonTooltip",defaultMessage:"Close"}),onClick:t,children:e.jsx(V,{className:"icon-lg"})})}function Ce({imageAsset:t,mode:s,setMode:i,inpaintingDrawingState:n,isLoadingNewImage:a,onClose:c,onInpaintClick:r,messageId:l,clientThreadId:h,serverThreadId:g}){const{value:f}=z("706943082"),{config:y}=E("2248456840"),C=k(),v=y.get("enabled",!1),{canUndoDrawing:F,undoDrawing:N,canRedoDrawing:G,redoDrawing:P}=n,m=x(),{rating:u,onLike:T,onDislike:_}=Y(),[B,S]=d.useState(!1),I=d.useCallback(()=>{const U=new Date,$=m.formatDate(U,{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit",second:"2-digit"});return`${M} ${$}.png`},[m]),L=()=>{_(),S(!0)},W=D({imageAssetPointer:t,serverThreadId:g}),O=d.useCallback(()=>{j({url:t.url,fileName:I()}),b.download({analyticsContext:C})},[t,I,C]),R=A();return e.jsxs(e.Fragment,{children:[e.jsxs(X.div,{className:"grid h-16 w-full grid-cols-3 px-4",...H,children:[e.jsx("div",{className:"flex items-center justify-self-start text-start",children:e.jsx(ue,{onClose:c})}),e.jsx("div",{className:"flex flex-col items-center justify-center justify-self-center p-2",children:(!f||s===p.Selecting)&&e.jsx(e.Fragment,{children:e.jsx("div",{className:"text-token-text-primary font-semibold",children:e.jsx(w,{id:"imageEditorControls.imageName",defaultMessage:"Edit Selection"})})})}),e.jsx("div",{className:"flex items-center justify-self-end text-end",children:s===p.Selecting?e.jsxs(e.Fragment,{children:[e.jsx(o,{disabled:!F||a,onClick:N,children:e.jsx(Z,{})}),e.jsx(o,{disabled:!G||a,onClick:P,children:e.jsx(ee,{})}),e.jsx(fe,{}),e.jsx(o,{onClick:()=>i(p.Default),disabled:a,children:e.jsx(w,{id:"imageEditorControls.cancelButtonLabel",defaultMessage:"Cancel"})})]}):e.jsxs(e.Fragment,{children:[u!==!1&&e.jsx(o,{tooltip:m.formatMessage({id:"imageEditorControls.likeButtonTooltip",defaultMessage:"Like"}),onClick:T,children:u===!0?e.jsx(te,{}):e.jsx(ae,{})}),u!==!0&&e.jsx(o,{tooltip:m.formatMessage({id:"imageEditorControls.dislikeButtonTooltip",defaultMessage:"Dislike"}),onClick:L,children:u===!1?e.jsx(se,{}):e.jsx(ne,{})}),f&&e.jsx(o,{tooltip:m.formatMessage({id:"imageEditorControls.inpaintButtonTooltip",defaultMessage:"Select"}),onClick:r,children:e.jsx(oe,{className:"h-7 w-7 pe-1",fill:"black"})}),e.jsx(me,{imageAsset:t,serverThreadId:g}),l&&R()&&e.jsx(xe,{clientThreadId:h,messageId:l}),v&&W&&e.jsx(ie,{onDownload:O,triggerClassName:"rounded-sm h-10 w-10 p-0 font-semibold hover:bg-token-main-surface-tertiary group-radix-state-open:bg-token-main-surface-tertiary text-token-text-secondary",iconClassName:"h-6 w-6",dropdownClassName:"z-50 min-w-fit origin-top-right text-token-text-primary"})]})})]}),B&&e.jsx(ge,{messageId:l??"",serverThreadId:g??"",rating:u,onClose:()=>S(!1)})]})}function o({children:t,tooltip:s,disabled:i,onClick:n}){const a=e.jsx("button",{className:q("hover:bg-token-main-surface-tertiary group-radix-state-open:bg-token-main-surface-tertiary rounded-sm p-2 font-semibold max-sm:p-1.5",i?"text-token-text-quaternary":"text-token-text-secondary"),disabled:i,onClick:n,children:t});return s!=null?e.jsx(re,{label:s,children:a}):a}const fe=J.div`mx-3 w-[1px] h-6 bg-token-border-default`;function xe({clientThreadId:t,messageId:s}){const i=x(),[n,a]=d.useState(!1),c=ce({clientThreadId:t,imageGenMessageId:s}),r=k();return d.useEffect(()=>{K.logEventWithStatsig("Share Post: Share Button Shown","chatgpt_post_share_button_shown",{source:"image_gen_editor_controls"})},[]),e.jsx(o,{tooltip:i.formatMessage({id:"imageEditorControls.share",defaultMessage:"Share image"}),onClick:async()=>{a(!0);try{await c()}finally{a(!1)}b.imageShared({analyticsContext:r,source:"image_gen_editor_controls"})},disabled:n,children:n?e.jsx(Q,{}):e.jsx(de,{})})}export{Ce as I,me as a,ue as b,o as c};
//# sourceMappingURL=kn0lvqy8pfftaqm4.js.map
