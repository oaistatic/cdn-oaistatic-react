const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/bnc7gw55yyehw384.js","assets/cs2gapsc2bulabhw.js","assets/eb6xg52mym6rhnsh.js","assets/root-o1pc79my.css","assets/h5cv933252grkuon.js","assets/fc9gc4j06cn3ngox.js","assets/pduvb49qgyq1mqhk.js","assets/conversation-small-ggtqjiqs.css","assets/gq3l0719iseemaj9.js","assets/jw0dq3wwxkyh055i.js","assets/ic7rccsdo5x6ovoh.js","assets/c1w85nn5shpnb9e0.js","assets/f2cwocui2o4rh90z.js","assets/do5nmvaddt7ak8xi.js","assets/e95x0gs5di7mq1tw.js","assets/ggve90in2x9hqouv.js","assets/nlj97v8clhezwsxr.js","assets/bzo48ft2wb6beuij.js","assets/fb2gj4fu6zbut62o.js","assets/kmvt5g0oz7ekj3ft.js","assets/otrhg4fwlde4g25l.js","assets/epqkr08njby1t19h.js","assets/7u88g4wa9fostszz.js","assets/codkr9xsn28rihk7.js","assets/h71lg9jejkufcc57.js","assets/l9t7qwwrq1pkwdh1.js","assets/ec6jcwftshefgs7y.js","assets/ncmq1ek8w2jfo55j.js","assets/gs6mle7jpkg22qtt.js","assets/5jqxj85lj1babxy3.js","assets/ofismvcmsrpkaerj.js","assets/euq7ybw4dhrsufo2.js"])))=>i.map(i=>d[i]);
import{aa as Le,fK as cs,c as D,e as Y,aS as ds,B as Ae,L as $e,f as Re,b6 as us,aA as hs,o as ms,am as ve,gZ as gs,aE as K,aF as V,ad as Ct,bE as jt,u as ps,aQ as Mt,c2 as xe,c4 as ie,c5 as re,gx as fs,s as ht,N as mt,a9 as pe,ai as Je,c8 as xs,b as Ee,d as Nt,dB as et,cP as ys,dV as kt,aV as Qe,O as Tt,_ as At,bc as Ke,en as vs,ab as J,bk as bs,bQ as Ss,bU as ws,an as gt,hn as _s,ac as Cs,gP as js,cS as Ms,ho as Ns,aC as ks,aG as Et,a8 as Ts,fy as As,fc as Es,aT as Ps,gN as Is}from"./eb6xg52mym6rhnsh.js";import{r as l,d as tt,a as st,j as t,a5 as Ze,M as F,f as Z,g as Pt,c as be,l as Ls,L as Rs,u as Os,v as Ws,R as Gs,p as Hs}from"./cs2gapsc2bulabhw.js";import{u as It,P as Ds}from"./do5nmvaddt7ak8xi.js";import{C as at,d as nt,u as Se}from"./f2cwocui2o4rh90z.js";import{fw as Lt,no as we,jd as Us,cL as Fs,np as Rt,jf as zs,jg as Ot,ji as Vs,j as pt,jh as qs,nq as Ys,jp as Bs,aY as ft,nr as $s,aO as Qs,he as Wt,cW as Ks,cX as Zs,ns as Xs,nt as Te,ac as fe,kd as Ve,eb as Js,eq as ea,eC as ta,aX as sa,aM as aa,cY as na,t as Xe,nu as oa,cZ as ia,P as Gt,F as ra,hg as Ht,nv as Dt,nw as xt,nx as la,ny as ca,nz as ot,ky as Ut,nA as da,bv as ua,nB as ye,e as Ft,f9 as ha,f1 as ma,U as Pe,aZ as ga,nC as pa,nD as fa,hb as xa,hd as ya,hf as va,nE as yt,nF as ba,a3 as zt,nG as Sa,kz as wa,nH as _a,nI as Ca,nJ as ja,nK as Ma,kp as Na,f5 as ka,nL as Ta,iG as Vt,nM as Aa,nN as R,H as U,nO as Ea,nP as Pa,nQ as Ia,c8 as qt,cD as La,nR as Ra,nS as vt,d as Oa,nT as Wa,nU as Ga,nV as Ha,nW as Da,Y as Yt,ec as Ua,x as it,u as Fa,nX as Bt,ds as za,nY as Va,z as qa,nZ as Ya,hi as Ba,fd as $a,n_ as qe,fj as Qa,n$ as Ka,hY as Za,hm as Xa,hn as bt,hA as Ja,G as en,hl as tn,o0 as St,o1 as sn,hX as an,kq as nn,hh as on,o2 as rn,o3 as wt,o4 as ln,o5 as cn,b6 as dn,o6 as un,mn as $t,o7 as hn,o8 as mn,o9 as gn,me as pn,oa as fn,jW as xn,ob as yn,oc as vn,od as bn,oe as Sn,of as wn,og as _n,oh as Cn,oi as jn,oj as Mn,ok as Nn,ol as kn,om as Tn,on as An,oo as En}from"./pduvb49qgyq1mqhk.js";import{C as Pn,N as In,f as Ln}from"./ic7rccsdo5x6ovoh.js";import{b as Rn}from"./h71lg9jejkufcc57.js";import{u as On,b as Qt}from"./epqkr08njby1t19h.js";import{b as Wn,P as Gn,M as Hn,g as Dn,F as Un,T as Fn}from"./nlj97v8clhezwsxr.js";import{I as zn}from"./jkpqdvui6jfmbala.js";import{S as Vn,T as qn}from"./hatmfprcm0t26pcx.js";import"./hpoi02g0dgpne8ux.js";const Yn=({assetPointer:s,isInFocusMode$:e,serverThreadId:o,transformationId:n,width:a,height:i,onEdit:u})=>{const d=Lt(),[x,C]=l.useState(!1),[b]=Le(o,f=>[f?.modelId]),y=It(o),j=we(),g=tt(),p=st(),c=l.useRef(null);l.useEffect(()=>{Wn.prefetch()},[]),l.useEffect(()=>{C(!1),e?.set(!1)},[s,e]),l.useEffect(()=>cs(()=>{e&&!e()&&C(!1)}),[e]),Us(l.useMemo(()=>({image:{asset_pointer:s,metadata:{dalle:{gen_id:n},generation:{gen_id:n}},height:i,width:a},currentDrawnShape:null,onCleared:()=>{},getImageData:()=>{}}),[n,s,i,a]));const h=f=>{j.transitionToPage({type:"conversation",value:void 0},()=>{u?.(),Bs(g,p,o,void 0,!0),y(f)})},m=Fs();return t.jsx(Rt,{children:t.jsx(Ze.div,{layout:!d,transition:{type:"spring",duration:.2},className:D(x?"w-full rounded-3xl":"mx-auto rounded-full"),children:x?t.jsx(zs,{value:{isImageGenEditor:!0,isInpainting:!1,onCancelInpaint:()=>{}},children:t.jsx(at,{clientThreadId:o,children:t.jsx(Gn,{clientThreadId:o,currentModelId:b??Ot(void 0).id,disableDraftPersistence:!0,onRequestCompletion:async f=>{e?.set(!1),Y.logEventWithStatsig("chatgpt_web_image_library_lightbox_image_edit_submitted","chatgpt_web_image_library_lightbox_image_edit_submitted"),ds(o)==null&&await(c.current??pt(o)),h(await qs(f))},onContinueGenerating:f=>h(Vs(f)),hideHeader:!0,isNewThread:!1})})}):t.jsx(Ae,{color:"secondary",size:m?"large":void 0,className:"px-4 max-md:min-w-[50vw]",onClick:()=>{Y.logEventWithStatsig("chatgpt_web_image_library_lightbox_image_composer_opened","chatgpt_web_image_library_lightbox_image_composer_opened"),C(!0),e?.set(!0),c.current=pt(o).finally(()=>{c.current=null})},icon:m?void 0:Ys,children:t.jsx(Ze.div,{initial:d?!1:{opacity:0},animate:{opacity:1},children:t.jsx(F,{id:"BD4ZLh",defaultMessage:"Edit image"})})})})})},Bn=({assetPointer:s,serverThreadId:e,messageId:o})=>{const n=Z(),[a,i]=l.useState(!1),u=On({assetPointer:s,clientThreadId:e,imageGenMessageId:o}),d=l.useCallback(async()=>{i(!0);try{await u()}finally{i(!1)}Y.logEventWithStatsig("chatgpt_web_image_library_lightbox_image_share_clicked","chatgpt_web_image_library_lightbox_image_share_clicked")},[u]),x=n.formatMessage({id:"lqgWN2",defaultMessage:"Share"});return t.jsxs(t.Fragment,{children:[t.jsx(Ae,{className:"max-md:hidden",color:"secondary",icon:a?$e:ft,onClick:d,disabled:a,children:x}),t.jsx(Ae,{color:"ghost",className:"text-token-text-secondary w-10 md:hidden",icon:a?$e:ft,size:"xl",onClick:d,label:x,disabled:a})]})},$n=({initialIndex:s,includeArchived:e,onScrollToEnd:o,onClose:n})=>{const a=Z(),i=Re(),u=us(i).checkGate("1520205231"),{archiveMutation:d}=$s(e),x=Qs(),[C]=l.useState(()=>hs(!1)),b=we(),y=tt(),{images:j}=Wt(e);return t.jsxs(Ks,{imageList:j,initialIndex:s??0,onClose:n,isInFocusMode$:C,onScrollToEnd:o,children:[t.jsx(Zs,{children:({title:g,createdAt:p})=>t.jsxs("div",{className:"flex min-h-12 min-w-0 flex-col items-center max-md:h-full",children:[t.jsx("h2",{className:"text-token-text-primary max-w-full min-w-0 grow justify-center self-start truncate text-base text-balance max-md:flex max-md:items-center max-md:ps-2",children:t.jsx("span",{className:"line-clamp-2",children:g??t.jsx(F,{id:"OIDfvR",defaultMessage:"Image Generation"})})}),p&&t.jsx("span",{className:"text-token-text-secondary text-sm max-md:hidden",children:p.toDateString()})]})}),t.jsxs(Xs,{children:[t.jsx(Te,{children:({conversationId:g,messageId:p})=>t.jsx(fe,{label:a.formatMessage(Q.openInChat),triggerAs:null,children:t.jsx(Ve,{className:"aspect-square",icon:Js,onClick:c=>{Y.logEventWithStatsig("chatgpt_web_image_library_lightbox_image_open_in_chat_clicked","chatgpt_web_image_library_lightbox_image_open_in_chat_clicked"),c.preventDefault(),b.addClassToCurrentTransition(["from-lightbox","to-conversation"]),b.transitionToPage({type:"conversation",value:void 0},async()=>{n(null),await y(`/c/${g}?message=${p}`,{preventScrollReset:!0})})},"aria-label":a.formatMessage(Q.openInChat)})})}),u&&t.jsx(Te,{children:({id:g,archived:p})=>t.jsx(fe,{label:a.formatMessage(p?Q.unarchive:Q.archive),triggerAs:null,children:t.jsx(Ve,{className:"aspect-square",icon:p?ta:ea,onClick:()=>{Y.logEventWithStatsig(p?"chatgpt_web_image_library_lightbox_image_unarchive_clicked":"chatgpt_web_image_library_lightbox_image_archive_clicked",p?"chatgpt_web_image_library_lightbox_image_unarchive_clicked":"chatgpt_web_image_library_lightbox_image_archive_clicked"),d.mutate({imageId:g,operation:p?"unarchive":"archive"})},"aria-label":a.formatMessage(p?Q.unarchive:Q.archive)})})}),t.jsx(Te,{children:({url:g,title:p})=>t.jsx(fe,{label:a.formatMessage(Q.download),triggerAs:null,children:t.jsx(Ve,{className:"aspect-square",icon:sa,onClick:()=>{Y.logEventWithStatsig("chatgpt_web_image_library_lightbox_image_download_clicked","chatgpt_web_image_library_lightbox_image_download_clicked"),aa({url:g,fileName:`${p??a.formatMessage({id:"cYxKbe",defaultMessage:"My ChatGPT image"})}.png`})},"aria-label":a.formatMessage(Q.download)})})}),x()&&t.jsx(Te,{children:({assetPointer:g,conversationId:p,messageId:c})=>!p||!c?null:t.jsx(Bn,{assetPointer:g,serverThreadId:p,messageId:c})})]}),t.jsx(na,{children:({url:g,width:p,height:c,title:h,position:m})=>t.jsx("img",{className:oa("bg-tertiary block h-fit max-h-full w-auto rounded-lg object-contain shadow-xl max-md:rounded-none max-md:shadow-none",m==="current"&&"[view-transition-name:var(--vt-active-image)]"),style:m&&m!=="current"?{viewTransitionName:`var(--vt-image-${m})`}:void 0,src:Xe(g),width:p,tabIndex:0,height:c,alt:h??""})}),t.jsx(ia,{children:({width:g,height:p,assetPointer:c,conversationId:h,transformationId:m})=>h&&c&&t.jsx(Yn,{isInFocusMode$:C,onEdit:()=>n(null),width:g,height:p,assetPointer:c,serverThreadId:h,transformationId:m})})]})},Q=Pt({download:{id:"Z23tMl",defaultMessage:"Download image"},openInChat:{id:"Eh8G/f",defaultMessage:"Open in Chat"},archive:{id:"yOqxdz",defaultMessage:"Hide image"},unarchive:{id:"yEUKZl",defaultMessage:"Show image"}}),Qn=({hasMoreImages:s,count:e,images:o,includeArchived:n,isFetchingMore:a,onScrollToEnd:i})=>{const u=s?Math.max((e??0)-(o.length??0),0):0,[d,x]=l.useState(!1),[C,b]=l.useState(null),y=we(),j=Re(),{clientThreadId:g}=nt(),p=l.useCallback(c=>{Y.logEventWithStatsig("chatgpt_web_image_library_lightbox_opened","chatgpt_web_image_library_lightbox_opened"),x(!0),b(c),y.transitionToPage({type:"lightbox",value:void 0},()=>{ms(j,({closeModal:h})=>t.jsx(Gt,{clientThreadId:g,children:t.jsx(ra,{children:t.jsx(Ht,{children:t.jsx($n,{includeArchived:n,onClose:m=>{if(m==null){h();return}Dt({update:()=>{h(),b(m),x(!0)},className:"from-lightbox",forceFlushSync:!0}).finished.then(()=>x(!1))},initialIndex:c,onScrollToEnd:i})})})})),x(!1)})},[g,j,n,i,y]);return t.jsxs("div",{className:"w-full",children:[t.jsx("div",{className:"grid min-h-60 w-full grid-cols-2 gap-1 max-md:gap-0.5 sm:grid-cols-3 md:grid-cols-4 xl:grid-cols-5 2xl:grid-cols-6",children:o.map(({url:c,thumbnail:h,width:m,height:f,title:N=null,assetPointer:v,conversationId:M,messageId:S},r)=>t.jsxs(xt,{index:r,active:d&&C===r,src:Xe(c),onClick:p,thumbnail:Xe(h),width:m,height:f,alt:N,children:[M!=null&&S!=null&&t.jsx(zn,{imageAssetPointer:v??void 0,imageUrl:c??void 0,clientThreadId:M,serverThreadId:M,messageId:S,showRatingButtons:!1}),r===o.length-1&&t.jsx(la,{onScrollToEnd:i})]},r)).concat(new Array(u).fill(null).map((c,h)=>{const m=o.length+h;return t.jsx(xt,{index:m,isPlaceholder:!0,active:!1},m)}))}),t.jsx("div",{className:"flex h-8 items-center justify-center",children:s&&a&&t.jsx($e,{})})]})};function Kn(s){"use forget";const e=be.c(5),{clientThreadId:o}=s;let n;e[0]!==s?(n=t.jsx(Xn,{...s}),e[0]=s,e[1]=n):n=e[1];let a;return e[2]!==o||e[3]!==n?(a=t.jsx(at,{clientThreadId:o,children:n}),e[2]=o,e[3]=n,e[4]=a):a=e[4],a}function Zn(s){"use forget";const e=be.c(21),{clientThreadId:o,headlineOption:n,currentModelId:a,isModelLoaded:i}=s,u=ot(),d=ua(),x=Se(),{isFocused:C,autocompletions:b}=Mt(x.store),y=C&&b.length>0,j=ye(),g=xe(j.isImageGenLandingPageEnabled$);let p;e[0]===Symbol.for("react.memo_cache_sentinel")?(p={opacity:0},e[0]=p):p=e[0];const c=y?0:1;let h;e[1]!==c?(h={opacity:c},e[1]=c,e[2]=h):h=e[2];let m,f;e[3]===Symbol.for("react.memo_cache_sentinel")?(m={opacity:0},f={duration:.1},e[3]=m,e[4]=f):(m=e[3],f=e[4]);const N=d?"keyboard-open:h-[calc(100%-var(--screen-keyboard-height,0px)-var(--composer-height,100px))] h-full motion-safe:[transition:height_0.3s_var(--easing-common)]":"h-full",v=y?"pointer-events-none":"",M=u?"@lg/thread:hidden":"lg:hidden";let S;e[5]!==N||e[6]!==v||e[7]!==M?(S=D("text-token-text-primary mt-[var(--screen-optical-compact-offset-amount)] [display:var(--display-hidden-until-loaded,flex)] shrink flex-col items-center justify-center overflow-hidden",N,v,M),e[5]=N,e[6]=v,e[7]=M,e[8]=S):S=e[8];let r;e[9]!==n?(r=n==="CHATGPT_LOGO"?t.jsx(Ct,{className:"inline-block h-12 w-12"}):t.jsx(Kt,{headlineOption:n}),e[9]=n,e[10]=r):r=e[10];let T;e[11]!==o||e[12]!==a||e[13]!==g||e[14]!==i?(T=!g&&t.jsx(Hn,{isModelLoaded:i,currentModelId:a,clientThreadId:o}),e[11]=o,e[12]=a,e[13]=g,e[14]=i,e[15]=T):T=e[15];let k;return e[16]!==r||e[17]!==T||e[18]!==h||e[19]!==S?(k=t.jsxs(Ze.div,{initial:p,animate:h,exit:m,transition:f,className:S,children:[r,T]}),e[16]=r,e[17]=T,e[18]=h,e[19]=S,e[20]=k):k=e[20],k}function Xn(s){"use forget";const e=be.c(30),{clientThreadId:o,currentModelId:n,isModelLoaded:a}=s,i=Se(),{isUnauthenticated:u}=ve(),d=gs();ca(i);let x;e[0]===Symbol.for("react.memo_cache_sentinel")?(x="4031588851",e[0]=x):x=e[0];const{layer:C}=K(x);let b,y;e[1]===Symbol.for("react.memo_cache_sentinel")?(b="3533083032",y={shouldLogExposure:!1},e[1]=b,e[2]=y):(b=e[1],y=e[2]);const{layer:j}=K(b,y),g=u?j:C,p=ot();let c;e[3]!==g?(c=g.get("headline_option","HELP_WITH"),e[3]=g,e[4]=c):c=e[4];const h=c,m=Ut();let f;e[5]!==m?(f=m.has(V.Research),e[5]=m,e[6]=f):f=e[6];const N=f;let v;e[7]!==n||e[8]!==d||e[9]!==N?(v=N?I.deepResearchPlaceholder:void 0,e[7]=n,e[8]=d,e[9]=N,e[10]=v):v=e[10];const M=v,S=p?"@lg/thread:items-end":"lg:items-end";let r;e[11]!==S?(r=D("flex items-center justify-center",S),e[11]=S,e[12]=r):r=e[12];const T=p?"@lg/thread:block":"lg:block";let k;e[13]!==T?(k=D("mb-7 hidden text-center @lg/thread:block",T),e[13]=T,e[14]=k):k=e[14];let G;e[15]!==h||e[16]!==M?(G=h==="CHATGPT_LOGO"?t.jsx(Ct,{className:"inline-block h-12 w-12"}):t.jsx(Kt,{headlineOption:h,overrideMessage:M}),e[15]=h,e[16]=M,e[17]=G):G=e[17];let O;e[18]!==k||e[19]!==G?(O=t.jsx("div",{className:k,children:G}),e[18]=k,e[19]=G,e[20]=O):O=e[20];let P;e[21]!==o||e[22]!==n||e[23]!==h||e[24]!==a?(P=t.jsx(Zn,{headlineOption:h,clientThreadId:o,isModelLoaded:a,currentModelId:n}),e[21]=o,e[22]=n,e[23]=h,e[24]=a,e[25]=P):P=e[25];let W;return e[26]!==O||e[27]!==P||e[28]!==r?(W=t.jsxs("div",{className:r,children:[O,P]}),e[26]=O,e[27]=P,e[28]=r,e[29]=W):W=e[29],W}function Jn(s){"use forget";const e=be.c(21),{headlineOption:o,overrideMessage:n}=s,a=function(L){const{name:H}=L;return t.jsx(fe,{label:x.formatMessage(I.editNicknameTooltip),delayDuration:300,side:"top",children:t.jsx("button",{onClick:so,style:{textDecoration:"none",transition:"color 0.2s"},onMouseEnter:to,onMouseLeave:eo,children:H})})};let i;e[0]===Symbol.for("react.memo_cache_sentinel")?(i=function(){const L=[],H=[];L.push("READY_WHEN_YOU_ARE","ON_YOUR_MIND","WHAT_ARE_YOU_WORKING_ON","AGENDA_TODAY","SHOULD_WE_BEGIN"),H.push("GOOD_TO_SEE_YOU","DIVE_IN","HOW_CAN_I_HELP",...L);const z=H[Math.floor(Math.random()*H.length)],q=`${L[Math.floor(Math.random()*L.length)]} | ${z}`;ie.setCookie(re.headlineMessage,q)},e[0]=i):i=e[0];const u=i,d=function(){const L=ie.getCookie(re.GreetingName),z=ie.getCookie(re.headlineMessage)?.split("|"),B=z?.[0]?.trim(),q=z?.[1]?.trim();return{cookieName:L,isReadyForPersonalized:!!L&&L.length<=y,headline:B,namedHeadline:q}},x=Z();let C;e[1]===Symbol.for("react.memo_cache_sentinel")?(C="1704793646",e[1]=C):C=e[1];const{layer:b}=K(C),y=b.get("name_char_limit",20),[j,g]=l.useState(d),{isUnauthenticated:p}=ve(),c=Ft(),m=ha(!p&&!!c)?.data,f=ma();let N;e[2]!==b?(N=b.get("greeting_web",!1),e[2]=b,e[3]=N):N=e[3];const v=N;let M;e[4]!==b?(M=b.get("full_name_llm",!1),e[4]=b,e[5]=M):M=e[5];const S=M;let r,T;e[6]!==c||e[7]!==S||e[8]!==f||e[9]!==v||e[10]!==m?(r=()=>{if(v&&f){if(c&&m){const W=fs(m,c,S);ie.setCookie(re.GreetingName,W),ht.count(mt.MOONSHINE,"splashScreenV2.greeting_cookie_name_set_web")}u()}else ie.deleteCookie(re.GreetingName),ie.deleteCookie(re.headlineMessage)},T=[m,c,v,S,f],e[6]=c,e[7]=S,e[8]=f,e[9]=v,e[10]=m,e[11]=r,e[12]=T):(r=e[11],T=e[12]),l.useEffect(r,T);let k;e[13]!==d||e[14]!==f||e[15]!==v?(k=()=>{const W=()=>{if(v&&f){const{cookieName:L,isReadyForPersonalized:H}=d();g(z=>({...z,cookieName:L,isReadyForPersonalized:H}))}};return window.addEventListener("refreshGreeting",W),()=>window.removeEventListener("refreshGreeting",W)},e[13]=d,e[14]=f,e[15]=v,e[16]=k):k=e[16],l.useEffect(k);let G,O;e[17]!==f||e[18]!==v?(O=()=>{v&&f&&ht.count(mt.MOONSHINE,"splashScreenV2.greeting_shown_web")},G=[v,f],e[17]=f,e[18]=v,e[19]=G,e[20]=O):(G=e[19],O=e[20]),l.useEffect(O,G);let P;return n?P=x.formatMessage(n):j.isReadyForPersonalized&&v?P=t.jsx(t.Fragment,{children:t.jsx(F,{...Ye[j.namedHeadline??o].withName,values:{name:t.jsx(a,{name:j.cookieName??""},"name")}})}):v?P=x.formatMessage(Ye[j.headline??o].original):P=x.formatMessage(Ye[o].original),P}function eo(s){s.currentTarget.className="text-inherit"}function to(s){s.currentTarget.className="text-token-text-secondary"}function so(){Pe.setAutoHighlightNicknameInput(!0),Pe.openModal(ga.UserContext)}function Kt(s){"use forget";const e=be.c(27),{headlineOption:o,overrideMessage:n}=s,a=jt(),i=l.useRef(null);let u;e[0]!==a?(u={isTempChatVisible:a,titleTranslate:0},e[0]=a,e[1]=u):u=e[1];const[d,x]=l.useState(u);let C,b;e[2]!==a?(C=()=>{x({isTempChatVisible:a,titleTranslate:a?-((i.current?.offsetHeight??0)-40):0})},b=[a],e[2]=a,e[3]=C,e[4]=b):(C=e[3],b=e[4]),ps(C,b);let y;e[5]===Symbol.for("react.memo_cache_sentinel")?(y={viewTransitionName:"var(--vt-splash-screen-headline)"},e[5]=y):y=e[5];const j=d.isTempChatVisible?"invisible opacity-0":"opacity-100";let g;e[6]!==j?(g=D("text-page-header inline-flex min-h-10.5 items-baseline whitespace-pre-wrap motion-safe:[transition:0.25s_transform_var(--spring-standard),0.2s_opacity_var(--spring-standard),0.3s_visibility_var(--spring-standard)]",j),e[6]=j,e[7]=g):g=e[7];const p=`translateY(${d.titleTranslate}px)`;let c;e[8]!==p?(c={transform:p},e[8]=p,e[9]=c):c=e[9];let h;e[10]!==o||e[11]!==n?(h=t.jsx("div",{className:"px-1 text-pretty whitespace-pre-wrap",children:t.jsx(Jn,{headlineOption:o,overrideMessage:n})}),e[10]=o,e[11]=n,e[12]=h):h=e[12];let m;e[13]!==a||e[14]!==g||e[15]!==c||e[16]!==h?(m=t.jsx("h1",{className:g,"aria-hidden":a,style:c,children:h}),e[13]=a,e[14]=g,e[15]=c,e[16]=h,e[17]=m):m=e[17];const f=d.isTempChatVisible?"translate-y-0 opacity-100":"invisible translate-y-10 opacity-0";let N;e[18]!==f?(N=D("absolute bottom-0 motion-safe:[transition:0.25s_transform_var(--spring-standard),0.2s_opacity_var(--spring-standard),0.3s_visibility_var(--spring-standard)]",f),e[18]=f,e[19]=N):N=e[19];const v=!a;let M;e[20]===Symbol.for("react.memo_cache_sentinel")?(M=t.jsx(da,{}),e[20]=M):M=e[20];let S;e[21]!==N||e[22]!==v?(S=t.jsx("div",{className:N,"aria-hidden":v,ref:i,children:M}),e[21]=N,e[22]=v,e[23]=S):S=e[23];let r;return e[24]!==m||e[25]!==S?(r=t.jsx("div",{className:"relative inline-flex justify-center text-center text-2xl leading-9 font-semibold",children:t.jsx("div",{children:t.jsxs("div",{className:"grid-cols-1 items-center justify-end",style:y,children:[m,S]})})}),e[24]=m,e[25]=S,e[26]=r):r=e[26],r}const I=Pt({whatCanIHelpWith:{id:"SplashScreenV2.whatCanIHelpWith",defaultMessage:"What can I help with?"},whatCanIHelpWithWithName:{id:"SplashScreenV2.whatCanIHelpWith.withName",defaultMessage:"What can I help with, {name}?"},whereShouldWeStart:{id:"SplashScreenV2.whereShouldWeStart",defaultMessage:"Where should we start?"},whereShouldWeStartWithName:{id:"SplashScreenV2.whereShouldWeStart.withName",defaultMessage:"Where should we start, {name}?"},askChatgptAnything:{id:"SplashScreenV2.askChatgptAnything",defaultMessage:"Ask ChatGPT anything"},askChatgptAnythingWithName:{id:"SplashScreenV2.askChatgptAnything.withName",defaultMessage:"Ask ChatGPT anything, {name}"},shouldWeBegin:{id:"SplashScreenV2.shouldWeBegin",defaultMessage:"Where should we begin?"},goodToSeeYouWithName:{id:"SplashScreenV2.goodToSeeYou.withName",defaultMessage:"Good to see you, {name}."},diveInWithName:{id:"SplashScreenV2.diveInWithName",defaultMessage:"Hey, {name}. Ready to dive in?"},readyWhenYouAre:{id:"SplashScreenV2.readyWhenYouAre",defaultMessage:"Ready when you are."},onYourMind:{id:"SplashScreenV2.onYourMind",defaultMessage:"What's on your mind today?"},whatAreYouWorkingOn:{id:"SplashScreenV2.whatAreYouWorkingOn",defaultMessage:"What are you working on?"},agendaToday:{id:"SplashScreenV2.agendaToday",defaultMessage:"What's on the agenda today?"},deepResearchPlaceholder:{id:"G1v9do",defaultMessage:"What are you researching?"},editNicknameTooltip:{id:"SplashScreenV2.editNicknameTooltip",defaultMessage:"Edit nickname"},howCanIHelp:{id:"SplashScreenV2.howCanIHelp",defaultMessage:"How can I help?"},howCanIHelpWithName:{id:"SplashScreenV2.howCanIHelp.withName",defaultMessage:"How can I help, {name}?"}}),Ye={HELP_WITH:{original:I.whatCanIHelpWith,withName:I.whatCanIHelpWithWithName},WHERE_TO_START:{original:I.whereShouldWeStart,withName:I.whereShouldWeStartWithName},ASK_CHATGPT:{original:I.askChatgptAnything,withName:I.askChatgptAnythingWithName},HOW_CAN_I_HELP:{original:I.howCanIHelp,withName:I.howCanIHelpWithName},GOOD_TO_SEE_YOU:{original:I.goodToSeeYouWithName,withName:I.goodToSeeYouWithName},DIVE_IN:{original:I.diveInWithName,withName:I.diveInWithName},READY_WHEN_YOU_ARE:{original:I.readyWhenYouAre,withName:I.readyWhenYouAre},ON_YOUR_MIND:{original:I.onYourMind,withName:I.onYourMind},WHAT_ARE_YOU_WORKING_ON:{original:I.whatAreYouWorkingOn,withName:I.whatAreYouWorkingOn},AGENDA_TODAY:{original:I.agendaToday,withName:I.agendaToday},SHOULD_WE_BEGIN:{original:I.shouldWeBegin,withName:I.shouldWeBegin}};function ao({onClick:s}){return t.jsxs("div",{className:"flex flex-col",children:[t.jsx("button",{onClick:s,"aria-labelledby":"upload-image-label",className:"relative",id:"upload-image-button",type:"button",children:t.jsx("div",{className:"bg-token-main-surface-primary dark:bg-token-main-surface-secondary border-token-border-default z-1 flex aspect-square items-center justify-center overflow-hidden rounded-2xl border p-5 text-xs transition-[transform_box-shadow] duration-[0.24s] select-none hover:motion-safe:scale-105",children:t.jsxs("div",{className:"text-token-text-tertiary inline-flex items-center justify-center",children:[t.jsx(ba,{"aria-label":"",className:"h-12 w-12"}),t.jsx(zt,{"aria-label":"",className:"absolute start-1/2 top-1/2 ms-1 mt-1 h-8 w-8"})]})})}),t.jsx("div",{id:"upload-image-label",className:"text-token-text-secondary mt-8 w-full text-center text-sm font-medium",children:t.jsx(F,{id:"DJ+4dI",defaultMessage:"Upload an image"})})]})}function _t({card:s,className:e,label:o}){const{formatMessage:n}=Z();return typeof s.url=="string"?t.jsx("img",{src:s.url,alt:n(s.prompt),className:e}):t.jsxs("picture",{className:e,children:[s.url.map(({type:a,url:i})=>a==="jpg"?null:t.jsx("source",{srcSet:i,type:`image/${a}`},i)),t.jsx("img",{"aria-label":o,src:s.url[0].url,alt:n(s.prompt),className:D(e,"h-full w-full object-cover")})]})}function no({type:s,images:e,onClick:o}){const[n,a]=l.useState(0),{formatMessage:i}=Z(),u=n+1>=e.length?0:n+1,d=e[n].prompt;return t.jsxs("div",{children:[t.jsxs("div",{className:"group/stack relative flex justify-center",children:[t.jsx("div",{onClick:()=>{const x=n+1>=e.length?0:n+1;a(x)},className:D("bg-token-bg-primary relative z-2 grid aspect-square h-full overflow-clip rounded-xl text-xs shadow-lg transition-transform duration-[0.24s]","group-hover/stack:-translate-x-2 group-hover/stack:rotate-[-3deg] group-hover/stack:shadow-md",e.length>1&&"cursor-pointer"),children:t.jsx(_t,{card:e[n],label:i(d)})},n),t.jsx("div",{className:D("ease-in-expo ease-spring-standard absolute top-0 left-0! flex aspect-square w-full translate-y-2 rotate-[2deg] opacity-40 transition-transform duration-[0.24s]","group-hover/stack:translate-x-2 group-hover/stack:translate-y-[0px] group-hover/stack:rotate-[4deg]"),children:t.jsx(_t,{card:e[u],label:i(d),className:D(Sa.fadeScale,"aspect-square w-full overflow-hidden rounded-xl shadow-xl")})},u),t.jsx("button",{id:i(d),onClick:()=>o(i(d)),tabIndex:0,className:"border-token-border-default bg-token-main-surface-primary hover:bg-token-main-surface-tertiary can-hover:z-0 absolute bottom-6 flex w-fit items-center justify-center rounded-full border px-3 py-1 text-sm shadow-md duration-[0.24s] group-hover/stack:z-11 focus-visible:z-11 active:scale-98 motion-safe:transition-[background-color,transform]",children:t.jsx(F,{id:"wk6Ayk",defaultMessage:"Try this prompt"})})]}),s&&t.jsx("div",{className:"text-token-text-secondary mt-8 w-full text-center text-sm font-medium",children:i(s)})]})}function oo({onCardClick:s,onUploadCardClick:e}){const{value:o}=pe("2640502720"),n=Z(),i=Je()?.isWorkspacePlan()?pa:fa,u=ye(),[d,x]=l.useState(!1),{images:C,hasNextPage:b,isLoading:y,isFetchingNextPage:j,fetchNextPage:g}=Wt(d),{data:p,isLoading:c}=xa(),h=Se(),m=p?.images_count,f=!!m,N=!!p?.archived_images_count,M=!c&&!f,S=Ls({id:"Gd9T7H",defaultMessage:"My Library"});return t.jsxs("div",{className:"mx-auto flex w-full flex-col items-center",children:[t.jsxs("div",{className:"my-6 grid w-full grid-cols-2 gap-4 gap-y-10 max-md:px-4 sm:grid-cols-3 md:grid-cols-4",children:[t.jsx(ao,{onClick:e}),i.map(r=>t.jsx(no,{type:r.type,images:r.images,onClick:T=>{s(T),r.needsUpload&&u.showUploadSuggestion$.set(!0)}},String(r.type.defaultMessage)))]}),t.jsx("div",{className:D("z-50 mt-4 flex w-full items-center justify-between max-md:px-4",o&&"sticky top-[9px]"),children:t.jsxs(t.Fragment,{children:[t.jsx("span",{className:"flex text-lg font-medium",children:t.jsx(F,{...S})}),f&&t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("span",{className:"text-token-text-tertiary flex gap-6 text-sm",children:t.jsx(F,{id:"Grwczz",defaultMessage:"{count, plural, =0 {No images} one {# image} other {# images}}",values:{count:m}})}),N&&t.jsx(ya,{includeArchived:d,setIncludeArchived:x})]})]})}),!M&&t.jsx("div",{className:"mt-4 mb-6 w-full border-t max-md:mb-6 max-md:hidden"}),M&&t.jsx(va,{onClick:()=>{const r=yt(i),T=yt(r?.images??[]);T&&s(n.formatMessage(T.prompt)),h.focus()}}),!M&&t.jsx("div",{className:"min-h-svh w-full max-md:px-4",children:t.jsx(Qn,{count:m??0,images:C??[],includeArchived:d,hasMoreImages:b,isFetchingMore:j||y,onScrollToEnd:g})})]})}const io=({systemHint:s})=>{const{updateSystemHint:e}=wa(),o=we(),{transitionToNextPage:n}=_a(),{clientThreadId:a}=nt();l.useEffect(()=>{o.activeViewTransition&&o.signalTransitionReady()},[o]),l.useEffect(()=>{e(s,{clientThreadId:a})},[s,a,e]);let i=null;switch(s){case V.Canvas:i=t.jsx(F,{id:"4+tS2L",defaultMessage:"Write with canvas"});break;case V.PictureV2:i=t.jsx(F,{id:"QtMyOg",defaultMessage:"Make an image"});break;case V.Research:i=t.jsx(F,{id:"Rdax1G",defaultMessage:"Deep research"});break;default:i=t.jsx(F,{id:"UrTsbY",defaultMessage:"Unknown landing page"});break}return t.jsx(Ca,{children:t.jsxs(ja,{className:"mt-[100px] flex flex-col items-center gap-6",children:[t.jsx(Ma,{isBadge:!0,isLauncher:!1,systemHint:s,label:null}),t.jsxs("div",{className:"flex flex-col items-center justify-center gap-3",children:[t.jsx("div",{"data-landing-page-load-target":!0,className:"text-token-text-primary text-4xl font-medium tracking-tight [text-box-trim:trim-both] [view-transition-name:var(--vt-tool-page-title)] md:text-5xl",children:i}),t.jsxs(Rs,{to:"/",viewTransition:!0,onClick:u=>{u.preventDefault(),n({path:"/",nextPageType:{type:"home",value:void 0},update:()=>{e(null,{clientThreadId:a})}})},className:"group text-token-text-tertiary flex items-center gap-1 text-sm",children:[t.jsx(Na,{className:"h-4 w-4",style:{display:"var(--is-ltr, block) var(--is-rtl, none)"}}),t.jsx(ka,{className:"h-4 w-4",style:{display:"var(--is-ltr, none) var(--is-rtl, block)"}}),t.jsx("div",{className:"group-hover:underline",children:t.jsx(F,{id:"gdbtML",defaultMessage:"Back to ChatGPT home"})})]})]})]})})},ro=({systemHint:s})=>{const e=Se(),o=ye(),n=l.useCallback(j=>{e.setText(j),e.focus()},[e]);l.useEffect(()=>()=>{o.reset()},[o]);const a=l.useCallback(()=>{Y.logEvent("Open File Viewer",{intent:Ta.Multimodal.toString()}),e.openFileDialog()},[e]),{isImageGenLandingPageEnabled$:i,isAllPagesEnabled$:u}=ye(),d=xe(i),x=xe(u),b=s===V.PictureV2&&d;if(!x&&!b)return null;let y=null;switch(s){case V.Canvas:y=!1;break;case V.PictureV2:y=t.jsx(oo,{onCardClick:n,onUploadCardClick:a});break;case V.Research:y=!1;break;default:y=t.jsx(F,{id:"JEsPH+",defaultMessage:"Unknown landing page {systemHint}",values:{systemHint:s}})}return y},lo=4,co=async({text:s,numCompletions:e,isUnauthenticated:o,isThreadUsingSearchMode:n=!1,autocompleteMode:a,activeSystemHint:i})=>{try{return(o?await Ee.safePost("/conversation/experimental/generate_autocompletions_anon",{requestBody:{input_text:s,num_completions:e,in_search_mode:n,system_hint:i},authOption:Nt.Anonymous}):await Ee.safePost("/conversation/experimental/generate_autocompletions",{requestBody:{input_text:s,num_completions:e,in_search_mode:n,system_hint:i}})).completions.map(d=>({id:Ws(),type:U.Autocomplete,title:d.slice(0,s.length),body:d.slice(s.length),oneliner:d,prompt:d,source:a}))}catch{return[]}},uo=()=>!1,ho=({clientThreadId:s,composerController:e,isGizmoThread:o})=>{const n=Mt(e.store,_=>_.showTaggingDropdown),a=Ut(),i=Array.from(a)[0],[u,d]=l.useState([]),[x,C]=l.useState([]);l.useRef(0);const{configurationMenuType:b}=Vt(),y=lo,[j,g]=l.useState(),p=b!=="none",c=l.useCallback(_=>{d(w=>{const E=typeof _=="function"?_(w):_;return xs(E,w)?w:E})},[]),{trendingSuggestions:h,fetchTrendingSuggestions:m}=mo(y),{isUnauthenticated:f}=ve(),N=Aa(),v=l.useCallback(_=>{const w=e.getCurrentText();return w&&Be(_).startsWith(w.toLocaleLowerCase())},[e]),M=l.useCallback(_=>{const w=e.getCurrentText(),E=_.title+_.body;return v(_)?{..._,title:w,body:E.slice(w.length)}:{..._,title:E,body:""}},[e,v]),S=l.useCallback((_=!1)=>{c(w=>!w.some(v)&&w.length>0?[]:_?w:w.map(M))},[v,M,c]),r=Z(),T=l.useMemo(()=>({[R.Canvas]:[{type:U.Starter,title:r.formatMessage({id:"GMvniX",defaultMessage:"Help me write a birthday message for a friend"}),prompt:r.formatMessage({id:"JInqHw",defaultMessage:"Help me write a birthday message for a friend"}),body:"",theme:R.Canvas},{type:U.Starter,title:r.formatMessage({id:"Xwp6O+",defaultMessage:"Help me write a short story"}),prompt:r.formatMessage({id:"e2j3PL",defaultMessage:"Help me write a short story set in a post-apocalyptic Tokyo, focused on a character who’s discovering a long-lost secret"}),body:"",theme:R.Canvas},{type:U.Starter,title:r.formatMessage({id:"ARQf7p",defaultMessage:"Help me write a basic outline for an essay"}),prompt:r.formatMessage({id:"K0WcGA",defaultMessage:"Help me write a basic outline for an essay"}),body:"",theme:R.Canvas},{type:U.Starter,title:r.formatMessage({id:"z+JwEj",defaultMessage:"Create a business plan outline"}),prompt:r.formatMessage({id:"4c/Ux5",defaultMessage:"Create a detailed outline for a business plan for a new app that connects local artists with buyers. Include sections for market analysis, monetization, and user acquisition"}),body:"",theme:R.Canvas}],[R.Image]:[{type:U.Starter,title:r.formatMessage({id:"noA7wB",defaultMessage:"Design a modern logo"}),prompt:r.formatMessage({id:"k53BuX",defaultMessage:"Create a modern, minimalist logo for a tech startup called ‘Nexora’. It should use bold typography and a sleek geometric icon, suitable for both light and dark backgrounds"}),body:"",theme:R.Image},{type:U.Starter,title:r.formatMessage({id:"akHy6z",defaultMessage:"Create an invite for my birthday"}),prompt:r.formatMessage({id:"BXf15G",defaultMessage:"Please create an invite for my birthday to send to my friends. It’ll be an outdoor barbeque with music and delicious food with my closest friends and family"}),body:"",theme:R.Image},{type:U.Starter,title:r.formatMessage({id:"57SKj2",defaultMessage:"Create a cartoon illustration of my pet"}),prompt:r.formatMessage({id:"EtCE7V",defaultMessage:"Please create an illustration of my pet in 2D animation style. It’s taking a nap in its favorite spot by the fire"}),body:"",theme:R.Image},{type:U.Starter,title:r.formatMessage({id:"s5iqKS",defaultMessage:"Create a Renaissance-style painting"}),prompt:r.formatMessage({id:"mEPKGA",defaultMessage:"Please create a Renaissance-style painting of a Mars rover. Use techniques like chiaroscuro and a warm color palette"}),body:"",theme:R.Image}],[R.ContextualAnswers]:[{type:U.Starter,title:r.formatMessage({id:"VJy602",defaultMessage:"Summarize my top projects this quarter and key outcomes across all of them."}),prompt:r.formatMessage({id:"BADBWZ",defaultMessage:"Summarize my top projects this quarter and key outcomes across all of them."}),icon:t.jsx(Ea,{className:"h-full w-full"}),body:"",theme:R.ContextualAnswers},{type:U.Starter,title:r.formatMessage({id:"CXhrsc",defaultMessage:"Get me up to speed on the past 2 weeks of project updates."}),prompt:r.formatMessage({id:"WPQR3a",defaultMessage:"Get me up to speed on the past 2 weeks of project updates."}),icon:t.jsx(Pa,{className:"h-full w-full"}),body:"",theme:R.ContextualAnswers},{type:U.Starter,title:r.formatMessage({id:"7QVCTa",defaultMessage:"Find the revenue projection for Q3 and the most profitable projects."}),prompt:r.formatMessage({id:"tvB7JD",defaultMessage:"Find the revenue projection for Q3 and the most profitable projects."}),icon:t.jsx(Ia,{className:"h-full w-full"}),body:"",theme:R.ContextualAnswers},{type:U.Starter,title:r.formatMessage({id:"Rny+bg",defaultMessage:"What is our company's current policy on work from home?"}),prompt:r.formatMessage({id:"P0W1ks",defaultMessage:"What is our company's current policy on work from home?"}),icon:t.jsx(qt,{className:"h-full w-full"}),body:"",theme:R.ContextualAnswers}]}),[r]),k=!!La(),G=Ra({exposed:k})==="autocomplete",O=!(!k||!e.isEmpty()||!G||o||![V.ContextualAnswers].includes(i)),{caSuggestions:P}=po({skip:!O});l.useEffect(()=>{O&&c(_=>P.length>0?_.length>0&&!_.some(w=>w.theme===R.ContextualAnswers)?_:P:_.length>0?_:T[R.ContextualAnswers].slice(0,y))},[T,P,y,c,O]),l.useEffect(()=>{const _=()=>{c(w=>w.filter(E=>E.theme!==R.Search&&E.theme!==R.Image))};if(e.getCurrentText()==="")if(N)h.length>0?c(h):m();else if(p&&i===V.PictureV2){const w=Dn(r);c(w)}else _();else _()},[u,e,m,N,c,h,i,r,p]),l.useEffect(()=>{N&&e.getCurrentText()===""&&h.length>0&&vt(h,s)},[N,e,h,s]);const W=y-u.filter(v).length,L=xo(N),{layer:H}=K("4031588851"),z=H.get("autocomplete_min_char",4),B=H.get("autocomplete_fetch_interval",200),q=l.useRef(null),_e=l.useCallback(Oa(async _=>{const w=e.getCurrentText();if(!w||w.length<z||w.length>80||e.hasMultipleLines()){c([]);return}if(!n&&!(q.current&&q.current.length>z&&w.startsWith(q.current)))try{const E=(await co({text:w,numCompletions:_,isUnauthenticated:f,isThreadUsingSearchMode:N,autocompleteMode:L,activeSystemHint:i})).filter(v).map(M);c(je=>{const Me=je.filter(v),We=E.filter(se=>{const ae=Be(se);return!Me.some(Ge=>{const $=Be(Ge);if(ae===$)return!0;const ue=/[\p{P}\p{S}]$/u,he=ae.replace(ue,""),ne=$.replace(ue,"");return he===$||ae===ne||he===ne})}).slice(0,y-Me.length);return[...Me,...We]}),E.length>0&&vt(E,s)}catch{}},L==="BING"?150:B),[e,L,M,B,i]);Wa(_=>_.files);const Oe=i===V.Research,ee=uo(),te=Oe&&ee,le=l.useCallback(()=>{S(),W>0&&_e(W)},[_e,S,W]);l.useEffect(()=>{n&&c([])},[n,c]);const ce=l.useMemo(()=>L==="HARDCODED"?S:le,[L,le,S]),de=!1,X=l.useCallback(()=>{ce()},[ce,de,te,c]),Ce=l.useCallback(()=>{e instanceof Ds&&S(!0),e.getCurrentText().indexOf(`
`)>0&&(c([]),g(void 0))},[e,c,S,de,te]);return l.useEffect(()=>e.subscribe("input",()=>{X()}),[e,X]),l.useEffect(()=>e.subscribe("change",()=>{Ce()}),[e,Ce]),{autocompletions:u,matchaData:j}},mo=s=>{const[e,o]=l.useState([]),n=l.useCallback(async()=>{const i=(await Ee.safePost("/conversation/experimental/generate_trending_suggestions",{requestBody:{num_items:s},authOption:Nt.SendIfAvailable})).suggestions.map((u,d)=>({type:U.Trending,title:Ie(u),body:"",icon:t.jsx(Ga,{className:"h-full w-full"}),prompt:Ie(u),id:`search-trending-${d}`,theme:R.Search}));return o(i),i},[s]);return{trendingSuggestions:e,fetchTrendingSuggestions:n}},go=s=>{const e=/(["'])(?:(?=(\\?))\2.)*?\1/g,o=s.match(e),n=[];let a=0;return o&&o.forEach(i=>{const u=s.indexOf(i,a);u>a&&n.push({text:s.slice(a,u),isMatched:!1}),n.push({text:i,isMatched:!0,className:"font-medium"}),a=u+i.length}),a<s.length&&n.push({text:s.slice(a),isMatched:!1}),n},po=({skip:s})=>{const{data:e=[],refetch:o}=Os({queryKey:["caSuggestions"],queryFn:async()=>(await Ee.safeGet("/ca/v2/user/suggested_starter_prompts")).suggestions.map((a,i)=>{const u=Da(a.related_file_type)??qt,d=t.jsx(u,{className:"h-full w-full"}),x=go(a.prompt);return{type:U.Autocomplete,title:Ie(a.prompt),body:"",icon:d,prompt:Ie(a.prompt),id:`ca-suggestions-${i}`,theme:R.ContextualAnswers,autocompletionChunks:x}}),enabled:!s});return{caSuggestions:e,fetchCaSuggestions:o}};function Ie(s){return s.split(" ").map(Ha).join(" ")}const Be=s=>`${s.title}${s.body}`.toLocaleLowerCase();function fo(){const{layer:s}=K("4031588851",{shouldLogExposure:!1}),e=s.get("autocomplete_qualified_start_date","2099-09-13T00:00:00Z"),o=Ft();return!!o&&o.created*1e3>=new Date(e).getTime()}function xo(s){const{isUnauthenticated:e}=ve(),o=pe("1468311859").value,n=pe("2053937752").value,a=pe("3664702598").value,i=pe("471233253").value,{layer:u}=K("4031588851"),{layer:d}=K("3533083032"),x=fo(),C=!e&&o||e&&n,b=(!e&&a||e&&i)&&x;let y="HARDCODED";{const j=e?d:u;if(s){const g=j.get("search_autocomplete_mode","");C&&g&&(y=g)}else b&&(y=j.get("autocomplete_mode","HARDCODED"))}return y}const yo=({clientThreadId:s,isGizmoThread:e})=>{const o=Se(),{autocompletions:n,matchaData:a}=ho({clientThreadId:s,composerController:o,isGizmoThread:e});return l.useEffect(()=>(o.store.setState({autocompletions:n,matchaData:a}),()=>{o.store.setState({autocompletions:[],matchaData:void 0})}),[n,o,a]),null},vo=({clientThreadId:s})=>{const e=Re(),o=Yt(g=>g.activeStageSidebar),n=et(s),a=Ua(ys.WorkspaceShareLinks),{isUnauthenticated:i}=ve(),u=jt(),d=kt(s),x=it(d),C=Qe(e,"16480203"),b=Fa(),y=a&&n&&!i&&!u&&(!x||C)&&!b,j=!o;return t.jsx("div",{className:"flex items-center gap-2 pe-1 leading-[0]",id:"conversation-header-actions",children:t.jsx(Pn,{showShareButton:y,showProfileDropdown:j,clientThreadId:s})})},bo=Tt(()=>At(()=>import("./bnc7gw55yyehw384.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29])).then(s=>s.GizmoUsingAsOwnerNotice));function So({clientThreadId:s,transparentBackground:e,isEmptyState:o}){const{isNewScrollEnabled:n}=Bt(),a=kt(s),i=it(a),u=za(),d=Va(),{data:x}=qa(a),C=Je(),b=Ya(),y=Ba(),j=$a(),g=Z(),{showLegacyReasoningSlider:p,showReasoningSliderNux:c}=Vt(),h=Ke(s),m=Yt(P=>P.isConversationScrolledFromTop),f=vs(),N=!p||!!a&&(!i||!h)||b,{layer:v}=K("497415788"),M=Le(s,P=>J.hasUserMessage(P))||!h,S=Qt(),r=S&&j;if(u)return null;const T=C?.isFree()&&v.get("upgrade_pill_position","none"),k=T==="left"&&(!M||v.get("should_upgrade_pill_persist",!1)),G=T==="center"&&(!M||v.get("should_upgrade_pill_persist",!1)),O=N?t.jsx(t.Fragment,{children:y&&(i||!a)?t.jsx(Xa,{children:k?t.jsx("div",{className:"text-token-text-primary px-3 text-lg",children:qe}):t.jsx(bt,{clientThreadId:s})}):k?t.jsx("div",{className:"text-token-text-primary px-3 text-lg",children:qe}):t.jsx(bt,{clientThreadId:s})}):t.jsx(fe,{side:"bottom",theme:f?"default":"white",label:p&&!c?null:t.jsxs("div",{className:"flex h-full w-full flex-col overflow-hidden px-4 py-3",children:[t.jsx("div",{className:"flex w-full justify-center py-2",children:t.jsxs("div",{className:"border-token-border-default bg-token-main-surface-primary flex w-56 flex-col gap-2 rounded-xl border p-2 pt-1.5 shadow-lg",children:[t.jsx("div",{className:"text-token-text-tertiary flex w-full text-start text-[11px] font-normal tracking-tight",children:g.formatMessage({id:"kvZYws",defaultMessage:"Ask anything"})}),t.jsxs("div",{className:"flex w-full flex-row items-center gap-2",children:[t.jsx(zt,{className:"text-token-text-primary h-3 w-3 opacity-40"}),t.jsx(Qa,{className:"text-token-text-primary h-3 w-3 opacity-40"}),t.jsxs("div",{className:"relative h-3 w-3",children:[t.jsx(Ka,{className:"text-token-text-primary h-3 w-3"}),t.jsx("div",{className:"absolute start-0 top-0 h-full w-full scale-200 animate-ping rounded-full bg-blue-400/50 duration-1000"})]}),t.jsx("div",{className:"flex-auto"}),t.jsx("div",{className:"bg-token-main-surface-primary rounded-full p-[1px] opacity-20 invert",children:t.jsx(Za,{className:"text-token-text-primary h-3 w-3"})})]})]})}),t.jsxs("div",{className:"text-token-text-primary mt-4 flex max-w-80 flex-col gap-1",children:[t.jsx("div",{className:"font-semibold",children:g.formatMessage({id:"ZQnsFt",defaultMessage:"The model picker has moved"})}),t.jsx("div",{className:"text-xs font-normal opacity-75",children:g.formatMessage({id:"EyZkkB",defaultMessage:"Adjust thinking or choose a model here"})})]})]}),onOpenChange:P=>{P&&Y.logEvent("Model Switcher Moved Tooltip Hover",{location:"thread_header"})},ignoreTriggerOnOutsideClick:!0,interactive:!0,children:t.jsx("div",{className:"text-token-text-secondary px-0.5 text-xl",children:qe})});return t.jsxs(t.Fragment,{children:[t.jsxs(Ja,{id:"page-header",className:D("pointer-events-none select-none [view-transition-name:var(--vt-page-header)] *:pointer-events-auto motion-safe:transition max-md:hidden",o&&"absolute start-0 end-0",!a&&"@[84rem]/thread:absolute @[84rem]/thread:start-0 @[84rem]/thread:end-0 @[84rem]/thread:shadow-none!",!a&&!S&&"@[84rem]/thread:bg-transparent",e&&!S&&"bg-transparent",!n&&m?"[box-shadow:var(--sharp-edge-top-shadow)]":"[box-shadow:var(--sharp-edge-top-shadow-placeholder)]",n&&"[box-shadow:var(--sharp-edge-top-shadow-placeholder)] group-data-scroll-from-top/thread:[box-shadow:var(--sharp-edge-top-shadow)]"),children:[t.jsxs("div",{className:"absolute start-1/2 ltr:-translate-x-1/2 rtl:translate-x-1/2",children:[x!=null&&C?.isWorkspaceAccount()&&x.gizmo.tags?.includes(en.WorkspaceDisabled)&&t.jsx(bo,{gizmo:x}),t.jsx(tn,{gizmoId:a,clientThreadId:s}),G&&t.jsx(St,{}),r&&t.jsx(Vn,{})]}),t.jsxs("div",{className:"flex items-center",children:[t.jsx(In,{clientThreadId:s}),O,k&&t.jsx(St,{})]}),t.jsx(vo,{clientThreadId:s})]}),d&&t.jsx(sn,{})]})}const wo=Tt(()=>At(()=>import("./ofismvcmsrpkaerj.js"),__vite__mapDeps([30,1,6,2,3,7,31])));function _o({clientThreadId:s}){const e=st(),o=et(s),n=Le(s,J.getGizmoId),a=async()=>{o&&(await Et.patchConversation(o,{is_archived:!1}),e.invalidateQueries({queryKey:["conversation",s]}),Ps(o,i=>{i.isArchived=!1}),$t(e,n))};return t.jsxs("div",{className:"my-6 flex flex-col items-center justify-center gap-4",children:[t.jsx("div",{className:"text-token-text-secondary px-3 text-center text-sm",children:t.jsx(F,{id:"thread.archivedConversationDescription",defaultMessage:"This conversation is archived. To continue, please unarchive it first."})}),t.jsx("div",{children:t.jsx(Ae,{disabled:!o,onClick:a,icon:En,children:t.jsx(F,{id:"thread.unarchiveButton",defaultMessage:"Unarchive"})})})]})}const Co=function({clientThreadId:s,getGizmosCompletionParams:e,hideDisclaimer:o,hideHeader:n,messagesVerticalAlign:a="top",renderEmptyState:i}){const u=bs(),{isNewScrollEnabled:d,autoPinningEnabled:x}=Bt(),{data:C}=Ss(),b=an(s),y=ws(),[j,g,p,c,h,m,f,N]=Le(s,A=>[A?.isLoading,J.getCurrentLeafId(A),J.hasUserMessage(A),J.getConversationTurns(A).length,J.isArchived(A),A?.modelId,A?J.getGizmoId(A):y,A?.conversationOrigin===Is.APPLE]),v=et(s),M=st(),{prefetchSearchPromises:S}=nt(),[r]=Hs(),T=!!r.get("message"),[k,G]=l.useState(S?.navlink);l.useEffect(()=>{j||(Ke(s)?gt.addTiming("chatgpt.web.chatPage.renderNewConversation"):gt.addTiming("chatgpt.web.chatPage.renderExistingConversation"))},[s,j]);const{setTargetedContent:O}=nn(),P=u?.includes(_s),W=null,L=c>=2,{pageType:H}=on(),z=Re(),B=ye(),q=xe(B.isImageGenLandingPageEnabled$),_e=xe(B.isAllPagesEnabled$),Oe=Qe(z,"1909635392"),ee=l.useContext(Cs),te=js(ee),le=Ms(ee),ce=Ns(ee),de=rn(),X=Qt(),{isOpen:Ce}=Rn(),_=!!f,w=Ke(s)&&!L&&(wt(b)||b?.kind===ks.GizmoTest)&&!de&&!X&&S==null&&(!te||_),E=H?.type==="landing-page"&&(_e||H.value===V.PictureV2&&q);Qe(z,"733205176");const je=w&&!p&&S==null&&(!te||_),We=Ot(C).id,se=m??We,ae=!!m,Ge=ln(C?.models,se),$=cn(s,b),ue=dn();un(c,s),l.useEffect(()=>{ue||O(void 0)},[s,O,ue,g]),l.useEffect(()=>{Pe.setIsConversationScrolledFromTop(!1)},[s]),l.useEffect(()=>{const A=new URLSearchParams(window.location.search),ge=A.get("src");if(ge==="history_search"){A.delete("src");const ke=A.toString(),ls=`${window.location.pathname}${ke?`?${ke}`:""}${window.location.hash}`;window.history.replaceState({},document.title,ls)}v&&ge==="history_search"&&Et.patchConversation(v,{touch:!0}).then(()=>{$t(M,f)})},[v,f,M]);const he=It(s),ne=l.useCallback(A=>{he(e?e(A):A)},[he,e]),He=we(),Zt=Lt(),Xt=tt(),De=l.useRef(null);De.current=A=>{E?He.transitionToPage({type:"home",value:void 0},()=>{Xt("/",{preventScrollReset:!0}),ne(A)}):w&&!Zt&&Ts(z,"3253785454").get("should_animate_composer",!1)?Dt({className:hn["composer-slide"],update:()=>ne(A)}):ne(A)};const oe=l.useCallback(A=>De.current?.(A),[De]);l.useEffect(()=>{He.signalTransitionReady()},[He,E,s]),l.useEffect(()=>{},[ce,oe]);const Jt=mn({clientThreadId:s,handleRequestCompletion:oe,prefetchSearchThreadIdPromise:S?.threadId})&&k==null,Ue=l.useRef(null),es=A=>{if(d&&!E)return t.jsx(kn,{allowScrollToEnd:!le,allowScrollToTop:!le&&N,clientThreadId:s,enableAutoScrollPinning:x,initScrolledToEnd:k==null&&!T,threadFooterRef:ze,threadRootRef:lt,children:A});{const ge=t.jsx("div",{className:"relative h-full",children:t.jsxs("div",{className:D("flex h-full flex-col overflow-y-auto [scrollbar-gutter:stable_both-edges] @[84rem]/thread:pt-(--header-height)"),ref:Ue,children:[t.jsx(Tn,{setIsScrolledToEdge:ke=>{Pe.setIsConversationScrolledFromTop(ke)},options:{root:Ue?.current}}),A]})});return k!=null?ge:t.jsx(Es,{children:t.jsxs(l.Suspense,{fallback:null,children:[t.jsx(An,{}),ge]})})}};l.useEffect(()=>{X||(document.title=$??"ChatGPT")},[$,W,X]);const ts=As(ee),Fe=Je(),ss=Fe&&!Fe.isTeam()&&!Fe.isEnterprisey(),rt=!o&&!ts&&!te&&!(w&&ss)&&wt(b),lt=l.useRef(null),ct=l.useRef(null),ze=l.useRef(null),dt=gn(A=>A.composerHeight),as=l.useMemo(()=>({threadContentScrollContainerElementRef:ct,footerRootContainerElementRef:ze}),[]),ns=!w&&!E,os=ot(),is=it(f),me=_&&is,Ne=!me,rs=w&&!E,ut=E&&H?.type==="landing-page";return t.jsx(pn.Provider,{value:k,children:t.jsx(fn,{clientThreadId:s,children:t.jsx(Gt,{clientThreadId:s,children:t.jsxs(at,{clientThreadId:s,children:[P&&t.jsx(wo,{}),!X&&t.jsx(xn,{children:$!=null&&t.jsx("title",{children:$})}),t.jsx(yn.Provider,{value:oe,children:t.jsxs(Ht,{children:[t.jsxs("div",{id:"thread",ref:lt,className:D("group/thread @container/thread h-full w-full",d&&!E&&wn.threadRoot,E&&"overflow-y-auto"),children:[t.jsxs(Un,{noKeyboard:!0,clientThreadId:s,currentModelConfig:Ge,className:D("composer-parent flex flex-col focus-visible:outline-0",!E&&"h-full"),children:[t.jsxs(vn,{value:as,children:[!n&&t.jsx(So,{clientThreadId:s,isEmptyState:je}),Oe&&t.jsx(bn,{clientThreadId:s}),t.jsxs("div",{ref:ct,className:D("flex basis-auto flex-col",ns&&"-mb-(--composer-overlap-px) [--composer-overlap-px:24px]",me||_||!w?"grow":"shrink",!w&&"overflow-hidden",w&&!me&&!_&&"min-[510px]:max-[768px]:mt-[25dvh]! @max-[31.9rem]/thread:grow @max-[31.9rem]/thread:justify-center @lg/thread:mt-[calc(30dvh+25px)]"),style:{"--composer-height":dt?`${dt}px`:void 0},children:[ut&&t.jsx(io,{systemHint:H.value}),!E&&t.jsx(t.Fragment,{children:!j&&!Jt?je?i??t.jsx(t.Fragment,{children:_?t.jsx(Ln,{clientThreadId:s,gizmoId:f,onRequestCompletion:oe,currentModelId:se}):t.jsx(Kn,{clientThreadId:s,currentModelId:se,isModelLoaded:ae})}):L||k!=null?es(t.jsx(qn,{onRequestCompletion:oe,clientThreadId:s,scrollContainerRef:Ue,prefetchNavlink:k,setPrefetchNavlink:G},s)):null:null})]})]}),t.jsxs("div",{id:"thread-bottom-container",className:D("isolate z-3 w-full basis-auto has-data-has-thread-error:pt-2 has-data-has-thread-error:[box-shadow:var(--sharp-edge-bottom-shadow)] md:border-transparent md:pt-0 dark:border-white/20 md:dark:border-transparent",!E&&!rt&&"mb-4",_||me||!w?"":Ne&&w&&os?"@lg/thread:grow":"lg:grow",Ne&&"flex flex-col"),ref:ze,children:[h?t.jsx(_o,{clientThreadId:s}):t.jsxs(t.Fragment,{children:[(!w||Ne)&&!Ce&&t.jsx(Fn,{isGizmoThread:_,isProjectThread:me,clientThreadId:s,isNewThread:w,currentModelId:se,onRequestCompletion:oe,shouldUseUnifiedComposer:Ne,isModelLoaded:ae}),rs&&t.jsx(yo,{clientThreadId:s,isGizmoThread:_})]}),rt?t.jsx("div",{className:"text-token-text-secondary relative mt-auto flex min-h-8 w-full items-center justify-center p-2 text-center text-xs md:px-[60px]",children:t.jsx(Sn,{clientThreadId:s})}):null]})]}),ut&&t.jsx(Rt,{children:t.jsx(ro,{systemHint:H.value})})]}),t.jsx(_n,{clientThreadId:s,isStaticSharedThread:!1,isDynamicSharedThread:de}),t.jsx(Cn,{}),t.jsx(jn,{conversationId:s}),t.jsx(Mn,{}),t.jsx(Nn,{conversationId:s}),!1]})})]})})})})},Wo=Gs.memo(Co);export{vo as C,Qn as I,Wo as M};
//# sourceMappingURL=knjoyspfheg8zfxl.js.map
