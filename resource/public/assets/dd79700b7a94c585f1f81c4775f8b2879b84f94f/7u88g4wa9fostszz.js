import{f as E,j as e,d as $,M as C,g as G,a5 as S,r as x,a6 as V}from"./cs2gapsc2bulabhw.js";import{ef as H,kG as z,ac as R,kH as M,bd as W,kI as q,hi as K,bu as J,ff as j,kJ as Q,kK as Y,dU as Z,c4 as O,kL as X,fw as ee,kM as te,fg as oe,fh as ne,iu as F,iH as N,kN as se,kO as ae,kP as re,fe as ie}from"./pduvb49qgyq1mqhk.js";import{aa as le,ai as I,cW as A,R as ce,T as ue,P as de,C as pe,e as k,h7 as _,B as w,ab as fe,c as T}from"./eb6xg52mym6rhnsh.js";import{F as ge}from"./codkr9xsn28rihk7.js";import{u as me}from"./h71lg9jejkufcc57.js";const xe=({clientThreadId:o,rateLimitPopup:i,children:t,disabled:n,highlightTooltip:a=!1,disabledReason:l,currentModelName:r})=>{const s=E(),u=le(o,fe.getIsNewConversation),d=I(),p=m=>{i!=null&&m&&k.logPopoverHover({type:"rate_limit",location:"file_upload",plan_type:d?.planType??"unknown"})},c=H(A.signUpButtonText),{isEligible:g}=me(o),h=!!i;return e.jsx(e.Fragment,{children:h?e.jsx("div",{className:"h-8",children:e.jsxs(ce,{delayDuration:150,onOpenChange:p,children:[e.jsx(ue,{asChild:!0,children:t}),e.jsx(de,{children:e.jsx(z,{$as:pe,side:"left",sideOffset:0,align:"start",alignOffset:-12,className:"max-w-[320px]",children:e.jsx(ve,{isNewConversation:u,rateLimitPopup:i,signUpButtonText:c})})})]})}):!n&&g?e.jsx(ge,{clientThreadId:o,children:t}):e.jsx(R,{label:he(s,n,l,r),className:"flex",open:a?!0:void 0,side:"bottom",children:t})})};function he(o,i,t,n){if(!i)return o.formatMessage({id:"composer.add.label",defaultMessage:"Add photos and files"});switch(t){case M.ModelNotSupported:if(!n)break;return o.formatMessage({id:"xPEzDr",defaultMessage:"Add files disabled for {modelName}"},{modelName:n??"model"});case M.ThinkModeInUse:return o.formatMessage({id:"s8j69s",defaultMessage:"Add files disabled in Reason mode"});case M.SearchModeInUse:return o.formatMessage({id:"EQF2Gd",defaultMessage:"Add files disabled in Search mode"})}return o.formatMessage({id:"MeW0HZ",defaultMessage:"Add files is unavailable"})}const ve=({isNewConversation:o=!1,rateLimitPopup:i,signUpButtonText:t})=>{const n=I(),a=$(),l=W(),r=q(),s=K();if(i==null)return null;const{call_to_action:u,description:d}=i,p=d||e.jsx(C,{...B.defaultDescription}),c=u?.includes(_.GET_PLUS),g=u?.includes(_.AUTHENTICATE),h=g&&s;return e.jsxs("div",{className:"text-token-text-primary p-2 text-sm",children:[e.jsx("div",{className:"mb-3",children:p}),c?e.jsx(w,{size:"small",color:"secondary",onClick:()=>{J(a,"Rate limited file upload popover"),k.logRateLimitGetPlusButtonClicked({type:"file_upload",location:"popover",plan_type:n?.planType??"unknown",is_hard_block:!1,is_new_conversation:o,hard_block_reason:""})},children:e.jsx(C,{...B.getPlus})}):null,g?e.jsx(w,{size:"small",color:"primary",onClick:()=>{l({authType:r?"login":"signup",callback:m=>{r?k.logLogInButtonClicked({location:"File picker rate limit tooltip",provider:m}):k.logSignUpButtonClicked({location:"File picker rate limit tooltip",provider:m})}})},children:r?e.jsx(C,{...A.logInButtonText}):e.jsx(C,{...t})}):null,h?e.jsx(w,{size:"small",color:"secondary",className:"ms-2",onClick:()=>{l({authType:r?"signup":"login",callback:m=>{r?k.logSignUpButtonClicked({location:"File picker rate limit tooltip",provider:m}):k.logLogInButtonClicked({location:"File picker rate limit tooltip",provider:m})}})},children:r?e.jsx(C,{...t}):e.jsx(C,{...A.logInButtonText})}):null]})},B=G({defaultDescription:{id:"U5qAWP",defaultMessage:"You've reached your daily upload limit. Get ChatGPT Plus to unlock more."},getPlus:{id:"TeyLcp",defaultMessage:"Get Plus"}}),ke=({as:o="div",children:i,className:t,isSelected:n=!1,shape:a="rectangle",spacing:l="normal",disableHover:r=!1,isLegacyStyle:s=!1,borderVisible:u=!1,visualTreatment:d="composer-btn",...p})=>{const c=o==="div"?S.div:S.button,g=!r&&"hover:border-black/0 hover:bg-black/5 motion-safe:transition-colors dark:hover:bg-white/5",h=!r&&"hover:bg-black/[0.075]! dark:hover:bg-white/10!";return e.jsx(c,{"data-is-selected":n||void 0,"data-pill":!0,className:d==="composer-btn"?"composer-btn":T("relative -ms-1 flex cursor-pointer flex-row items-center justify-center gap-1 rounded-3xl border py-1 font-medium whitespace-nowrap select-none *:pointer-events-none","[font-size:var(--pill-font-size,14px)]",l==="compact"&&a==="round"&&"px-1.5",l==="compact"&&a==="rectangle"&&"px-2.5",l==="normal"&&a==="rectangle"&&"px-3.5",s?"min-h-9":"min-h-8",u?"border-token-border-default":"border-transparent",n?s?"text-token-interactive-label-accent-default bg-token-composer-blue-bg hover:bg-[#BDDCF4] focus-visible:outline-black dark:bg-[#2A4A6D] dark:text-[#48AAFF] dark:hover:bg-[#1A416A] dark:focus-visible:outline-white":T("dark:text-token-composer-blue-text bg-black/[0.045] dark:bg-white/5",h):s?"hover:bg-token-main-surface-secondary":T("[color:var(--pill-color,var(--text-secondary))]",g),t),...p,children:i})};function we({setOpen:o,open:i,...t}){return e.jsxs(e.Fragment,{children:[e.jsx(Z.Trigger,{className:"m-0 h-0 w-0 border-none bg-transparent p-0"}),e.jsx(U,{...t,onClick:()=>o(!0),open:i})]})}function U({clientThreadId:o,icon:i,isDisabled:t=!1,showLabel:n=!1,highlightTooltip:a=!1,hideBorder:l=!1,isSmall:r=!1,disabledReason:s,currentModelName:u,visualTreatment:d,onClick:p,open:c,hasPopoverTrigger:g=!1,showGlowingBorder:h,rateLimit:m}){const b=E(),P=e.jsxs(e.Fragment,{children:[i,n&&e.jsx(Y,{})]}),y={disabled:t,"aria-disabled":t,"aria-label":t?b.formatMessage({id:"NTwThg",defaultMessage:"Attach files is unavailable"}):b.formatMessage({id:"ixBxc3",defaultMessage:"Upload files and more"}),onClick:f=>{f.preventDefault(),p()}},v=d==="composer-btn"?e.jsx("button",{...y,className:"composer-btn","data-is-open":c||void 0,children:P}):e.jsx(Q,{...y,$open:c,$showLabel:n,$showGlowingBorder:h,$hideBorder:l,$isSmall:r,$visualTreatment:d,children:P});return e.jsx(xe,{clientThreadId:o,rateLimitPopup:m,highlightTooltip:a,disabled:t,disabledReason:s,currentModelName:u,children:g?e.jsx(j,{asChild:!0,children:v}):v})}function be({isLoading:o,handleLocalFileUploadClick:i,noAvailableConnectors:t,showMenuForNoAuth:n,announcement:a,...l}){const{openPopover:r,isOpen:s}=O(),{openMenu:u,confirmMenuOpened:d}=X();x.useEffect(()=>{u&&(r(),d())},[u,d,r]);const p=()=>{if(t&&!o&&!n){i();return}r(),a.eligible&&a.markAsViewed(),k.logEventWithStatsig("Composer: Open Context Connector Picker","chatgpt_composer_open_context_connector_picker")};return e.jsx(U,{...l,onClick:p,open:s,hasPopoverTrigger:!0})}const D=({children:o,sideOffset:i=-35,...t})=>{const n=ee(),{isOpen:a,closePopover:l,popoverContentRef:r}=O();return x.useEffect(()=>{if(a)return te(l,r)},[a,r,l]),x.useEffect(()=>{if(!a)return;const s=u=>{u.key==="Escape"&&l()};return document.addEventListener("keydown",s,{capture:!0,passive:!0}),()=>document.removeEventListener("keydown",s,{capture:!0})},[a,l]),e.jsx(oe,{forceMount:!0,children:e.jsx(ne,{forceMount:!0,asChild:!0,align:"center",sideOffset:i,onClick:s=>{s.stopPropagation(),s.preventDefault()},onOpenAutoFocus:s=>{s.preventDefault()},...t,children:e.jsx("div",{ref:r,className:T(!a&&"pointer-events-none"),children:e.jsx(V,{mode:"sync",children:a&&e.jsx(S.div,{className:T("border-token-border-xlight origin-radix-popover dark:bg-token-main-surface-secondary flex overflow-clip rounded-2xl border bg-white shadow-2xl dark:border-white/5 dark:shadow-[0px_24px_64px_rgba(0,0,0,0.32)]"),variants:{open:{scale:[.7,1],opacity:1,transition:n?F:N},closed:{opacity:0,scale:.8,transition:n?F:{...N,duration:.2}}},initial:"closed",animate:"open",exit:"closed",children:o})})})})})},L=({children:o,className:i,isSelected:t=!1,onClick:n,tooltipLabel:a,...l})=>{const{isOpen:r,openPopover:s,popoverTriggerRef:u}=O(),d=x.useCallback(c=>{(c.key==="Enter"||c.key===" ")&&(c.preventDefault(),s())},[s]),p=x.useCallback(c=>{n?.(c),!c.defaultPrevented&&s()},[n,s]);return e.jsx(R,{label:a,children:e.jsx(j,{asChild:!0,onFocusCapture:c=>{c.stopPropagation()},children:e.jsx(ke,{animate:r?"inactive":"active",as:"div",role:"button",className:T("group motion-safe:[transition:border-color_0.1s_ease-in-out]",i),isSelected:t,"data-reasoning-popover-action":!0,onClick:p,onKeyDown:d,ref:u,tabIndex:0,...l,children:o})})})};function Ce(o=!1){const[i,t]=x.useState(o),[n,a]=x.useState(!1);return{isOpen:i,isStartingToOpen:n,setIsOpen:t,setIsStartingToOpen:a}}function Se({layoutMode:o,initialOpen:i=!1,forceOpen:t=!1,restoreFocus:n,children:a,onClose:l,mode:r="default",modal:s}){const{isOpen:u,isStartingToOpen:d,setIsOpen:p,setIsStartingToOpen:c}=Ce(i||t),g=t||u,h=x.useRef(null),m=x.useRef(null),b=x.useCallback((f=!0)=>{g||(p(!0),se(),requestAnimationFrame(()=>{c(!0),f&&ae({root:h.current,autoFocus:!0})}))},[p,c,g]),P=x.useCallback(()=>{!d&&!g||(p(!1),c(!1),requestAnimationFrame(()=>{const f=new Event("focus");n?.(f),f.defaultPrevented||m.current?.focus()}),l?.())},[l,p,c,d,g,n]),y=f=>{f?b():P()},v={Trigger:{instance:null},Content:{instance:null}};return x.Children.forEach(a,f=>{if(x.isValidElement(f))if(f.type===L||f.type===j||f.type===be){if(v.Trigger.instance)throw new Error("Only one trigger is allowed");v.Trigger.instance=f}else f.type===D&&(v.Content.instance=f)}),e.jsx(re,{value:{closePopover:P,isOpen:g,isStartingToOpen:d,layoutMode:o,openPopover:b,popoverContentRef:h,popoverTriggerRef:m,mode:r},children:e.jsxs(ie,{open:g,onOpenChange:y,modal:s,children:[v.Trigger.instance,v.Content.instance]})})}const Ae=j,Oe=L,Fe=D;export{Ae as B,Fe as C,xe as F,Se as P,Oe as T,be as V,ke as a,we as b,he as g};
//# sourceMappingURL=7u88g4wa9fostszz.js.map
