import{f as P,j as e,M as u,r as g,h as J,d as Q}from"./cs2gapsc2bulabhw.js";import{bB as X,bC as xe,bD as m,e as Z,bE as ge,bF as ee,U as pe,bG as B,bH as fe,bI as he,bJ as ye,bK as H,bL as A,bM as Y,bN as $}from"./pduvb49qgyq1mqhk.js";import{c as Se,W as je}from"./gd0pn4vfv3rmbjax.js";import{F as be,c as Ne,j as te,fb as se,bk as ae,f as Te,a8 as ke,b0 as D,an as F,e as N,aJ as ne,h as R,ae as v,ad as we}from"./eb6xg52mym6rhnsh.js";import{u as oe}from"./fnic6w92j5ja4sg4.js";import{u as le}from"./otrhg4fwlde4g25l.js";var ce=(a=>(a.FLEXIBLE="month",a.ANNUAL="year",a))(ce||{});const I=Se(ce),ie="team-pricing-seat-selection",U="team-pricing-seat-selection-direct",q="numSeats",G="selectedPlan",Ae=a=>{const o=Te(),p=ke(o,"4250628994").get("enabled",!1),x=J(),l=x.hash.split("#")[1]===ie||x.hash.split("#")[1]===U,s=D(),{initialBillingDetails:n}=le(s,!0),t=g.useRef(!1);g.useEffect(()=>{p&&!t.current&&l&&s&&!a&&(pe.setPurchaseWorkspaceData({minimumSeats:B,billingDetails:n}),t.current=!0)},[s,n,l,a,p])},re=({isOpen:a,onClose:o,onSubmit:p})=>{const x=D(),[l,s]=g.useState(""),n=g.useMemo(()=>x?.subscriptionAnalyticsParams,[x]);g.useEffect(()=>{N.logEvent("Account Pay: Create Workspace Modal Show",n),ne.logEvent("chatgpt_select_team_plan_modal_show",null,{})},[n]);const t=c=>{N.logEvent("Account Pay: Create Workspace Modal Clicked",{...n,...c})},d=()=>{N.logEvent("Account Pay: Create Workspace Modal Dismiss",n)},i=P();return e.jsxs(R,{testId:"modal-workspace-name-collection",type:"success",isOpen:a,onClose:()=>{o(),d()},className:"max-w-lg",showCloseButton:!0,title:e.jsx(u,{...m.createWorkspace}),children:[e.jsx("div",{className:"bg-token-bg-primary flex flex-col justify-center pb-2",children:e.jsx(je,{workspaceName:l,onChangeWorkspaceName:s})}),e.jsxs("div",{className:"mt-4 flex flex-row justify-end",children:[e.jsx(v,{title:i.formatMessage(m.cancel),onClick:()=>{o(),t({buttonType:"Cancel"})}}),e.jsx(v,{title:i.formatMessage(m.selectBillingOption),onClick:()=>{p(l),t({buttonType:"Billing Options"})},disabled:l==="",color:"primary",className:"ms-4"})]})]})},z=be.p`text-base font-medium mb-3`,me=({isOpen:a,onClose:o,onSubmit:p,minimumSeats:x,billingDetails:l,isDirectFlow:s=!1})=>{const n=D(),t=new URLSearchParams(window.location.search),d=t.get(q),i=t.get(G),[c,k]=g.useState(i&&I(i)?i:"month"),[w,_]=g.useState(!1),S=P(),[y,j]=g.useState(d&&!isNaN(parseInt(d,10))?parseInt(d,10):Math.max(fe,x)),b=Math.max(x,B),{flexibleBillingPlan:f,annualBillingPlan:E}=X(l.currency),h=he(isNaN(y)?0:y,b,ye),M=g.useMemo(()=>n?.subscriptionAnalyticsParams,[n]);g.useEffect(()=>{N.logEvent("Account Pay: Select Team Plan Modal Show",M)},[M]);const O=r=>{switch(r){case"month":N.logEvent("Account Pay: Team Plan Selection Clicked",{...M,buttonType:"Continue",numberOfSeats:y,planLength:$.MONTHLY});break;case"year":N.logEvent("Account Pay: Select Team Plan Modal Clicked",{...M,buttonType:"Continue",numberOfSeats:y,planLength:$.ANNUAL});break}},V=(r,C)=>{N.logEvent("Account Pay: Select Team Plan Modal Clicked",{...M,buttonType:"Continue",numberOfSeats:C,planLength:r}),ne.logEvent("chatgpt_select_team_plan_modal_continue_to_billing_clicked",r,{number_of_seats:C.toString()}),F.addAction("chatgpt_funnel.team_plan_modal_checkout_initiated",{planLength:r,numberOfSeats:C.toString(),accountId:n?.id})},L=()=>{N.logEvent("Account Pay: Select Team Plan Modal Dismiss",M)},de=Q(),T=J(),W=g.useMemo(()=>T.hash.split("#")[1]===U,[T.hash]);return g.useEffect(()=>{const r=new URLSearchParams;r.set(q,h.toString()),r.set(G,c);const C=s||W?`#${U}`:`#${ie}`,ue=`${T.pathname}?${r.toString()}${C}`;window.history.pushState({from:T.pathname+T.search},"",ue)},[h,s,W,T.pathname,T.search,de,c]),s||W?e.jsx(R,{testId:"modal-workspace-purchase",type:"success",isOpen:a,onClose:()=>{o(),L()},size:"fullscreen",noPadding:!0,removePopoverStyling:!0,showCloseButton:!0,children:e.jsxs("div",{className:"grid grid-flow-row grid-cols-1 md:h-full md:grid-cols-2",children:[e.jsx("div",{className:"flex-column col-span-1 flex justify-center p-5 md:grid-cols-2",children:e.jsxs("div",{className:"flex w-full max-w-[400px] flex-col items-center",children:[e.jsx(we,{className:"mt-8 mb-6 h-8 w-8 md:fixed md:start-4 md:top-4 md:mt-0 md:h-6 md:w-6"}),e.jsx("div",{className:"mb-8 text-3xl font-medium md:mt-[120px]",children:e.jsx(u,{id:"selectTeamPlanModal.title",defaultMessage:"Pick your plan"})}),e.jsxs(H,{className:"col-span-3 mb-6 grid w-full gap-4 md:col-span-2 md:grid-cols-2",defaultValue:c,onValueChange:r=>{I(r)&&(k(r),O(r))},children:[e.jsx(A,{billingType:"year",...E,selectedValue:c,hideDetails:!0}),e.jsx(A,{billingType:"month",...f,selectedValue:c,hideDetails:!0})]}),e.jsx(Y,{numSeats:y,minSeats:b,setNumSeats:j}),e.jsx("div",{className:"text-token-text-secondary self-start text-xs",children:S.formatMessage({id:"selectTeamPlanModal.seatsDescription",defaultMessage:"Add more seats at any time. Minimum of {minSeats} seats."},{minSeats:B})})]})}),e.jsx("div",{className:"col-span-3 flex h-full flex-col items-center overflow-hidden p-6 md:col-span-1 md:shadow-lg",children:e.jsxs("div",{className:"flex w-full max-w-[400px] flex-col md:mt-[120px]",children:[e.jsx(z,{className:"mb-8 text-xl font-medium",children:e.jsx(u,{...m.summaryTitle})}),e.jsx(K,{numSeats:h,selectedPlan:c,billingDetails:l,totalLabel:m.allPlansTodayTotal,billDate:e.jsx(u,{...m.today})}),e.jsx(v,{title:S.formatMessage(m.continueToBillingButton),onClick:()=>{_(!0),p(c,h),V(c,h)},disabled:!1,loading:w,color:"green",className:"w-full rounded-xl"}),e.jsx(v,{title:S.formatMessage(m.cancel),onClick:()=>{o(),L()},color:"ghost",className:"mt-4 w-full rounded-xl"})]})})]})}):e.jsx(R,{testId:"modal-select-team-plan",type:"success",isOpen:a,onClose:()=>{o(),L()},size:"custom",noPadding:!0,removePopoverStyling:!0,className:"max-w-4xl",showCloseButton:!0,title:S.formatMessage(m.selectTeamPlanModalTitle),children:e.jsxs("div",{className:"grid grid-flow-row grid-cols-3",children:[e.jsxs("div",{className:"flex-column col-span-3 p-5 md:col-span-2 md:grid-cols-2",children:[e.jsx(Y,{numSeats:y,minSeats:b,setNumSeats:j}),e.jsxs(H,{className:"col-span-3 mt-5 grid gap-4 md:col-span-2 md:grid-cols-2",defaultValue:c,onValueChange:r=>{I(r)&&(k(r),O(r))},children:[e.jsx(A,{billingType:"year",...E,selectedValue:c}),e.jsx(A,{billingType:"month",...f,selectedValue:c})]})]}),e.jsxs("div",{className:"border-token-bg-tertiary bg-token-bg-secondary col-span-3 flex h-full flex-col overflow-hidden border-s p-6 md:col-span-1",children:[e.jsx(z,{children:e.jsx(u,{...m.summaryTitle})}),e.jsx(K,{numSeats:h,selectedPlan:c,billingDetails:l,totalLabel:m.allPlansTodayTotal,billDate:e.jsx(u,{...m.today})}),e.jsx(v,{title:S.formatMessage(m.continueToBillingButton),onClick:()=>{_(!0),p(c,h),V(c,h)},disabled:!1,loading:w,color:"primary",className:"w-full rounded-xl"})]})]})})},K=({numSeats:a,selectedPlan:o,billingDetails:p,totalLabel:x,billDate:l})=>{const s=P(),{flexibleBillingPlan:n,annualBillingPlan:t}=X(p.currency),d=o==="month"?n:t,i=xe[o];return e.jsxs("div",{className:"flex grow flex-col text-sm",children:[e.jsxs("div",{className:"text-token-text-secondary flex w-full justify-between text-sm",children:[e.jsx("div",{className:"flex",children:e.jsx(u,{...i.name})}),e.jsx("div",{className:"flex",children:e.jsx(u,{...m.allPlansPreDiscountTotal,values:{currencySign:s.formatMessage(d.currencySign),preDiscountTotalAmount:((a||0)*(o==="year"?t.monthlyCost*12:n.monthlyCost)).toLocaleString()}})})]}),e.jsxs("div",{className:"text-token-text-tertiary flex w-full justify-between text-xs",children:[e.jsx("div",{className:"flex",children:e.jsx(u,{...i.breakdown,values:{numSeats:a}})}),e.jsx("div",{className:"flex",children:e.jsx(u,{...m.breakdownAmount,values:{currencySign:s.formatMessage(d.currencySign),amount:d.monthlyCost}})})]}),e.jsxs("div",{className:"text-token-text-secondary mt-3 flex w-full justify-between text-sm",children:[e.jsx("div",{className:"flex",children:e.jsx(u,{...m.planDiscountLabel})}),e.jsx("div",{className:Ne("flex",o==="year"&&t.discountedMonthlyCost<t.monthlyCost&&"font-medium text-[#10A37F]"),children:e.jsx(u,{...i.discountAmount,values:{currencySign:s.formatMessage(n.currencySign),discountAmount:((a||0)*(o==="year"?(t.monthlyCost-t.discountedMonthlyCost)*12:n.monthlyCost-n.discountedMonthlyCost)).toLocaleString()}})})]}),i.discountDescription&&t.discountedMonthlyCost<t.monthlyCost&&o==="year"&&e.jsx("div",{className:"text-token-text-tertiary text-xs",children:e.jsx(u,{...i.discountDescription,values:{discountPercentage:Math.floor((1-t.discountedMonthlyCost/t.monthlyCost)*100)}})}),e.jsx("hr",{className:"border-token-border-default my-3"}),e.jsxs("div",{className:"flex w-full justify-between text-base font-medium",children:[e.jsx("div",{className:"flex",children:e.jsx(u,{...x})}),e.jsx("div",{className:"flex",children:e.jsx(u,{...i.total,values:{currencyCode:s.formatMessage(d.currencyCode),currencySign:s.formatMessage(d.currencySign),totalAmount:((a||0)*d.unitCost).toLocaleString()}})})]}),e.jsx("div",{className:"text-token-text-tertiary mb-8 text-xs",children:e.jsx(u,{...i.billed,values:{billDate:l}})})]})};function Be(){const a=D(),o=Q(),{prepareCheckoutSession:p,navigateToCheckout:x}=oe(),{initialBillingDetails:l}=le(a,!0),s=P(),n=Z(),t=ee(s,void 0,n),{config:d}=se("3217984440"),i=d.get("enabled",!1),[c,k]=g.useState(i?t:""),w=ae(),_=te(),S=async(j,b)=>{try{const f=await p({plan_name:"chatgptteamplan",team_plan_data:{workspace_name:t,price_interval:j,seat_quantity:b},billing_details:l},"TeamsDirectWorkspacePurchaseModal",w);await x(f)}catch(f){F.addError(f),_.warning(s.formatMessage(m.paymentErrorWarning),{hasCloseButton:!0})}},y=()=>{o("/")};return c===""?e.jsx(re,{isOpen:!0,onClose:y,onSubmit:j=>k(j)}):e.jsx(me,{isOpen:!0,onClose:y,onSubmit:(j,b)=>S(j,b),isDirectFlow:!0,minimumSeats:B,billingDetails:l})}function De({isOpen:a,onClose:o,minimumSeats:p,billingDetails:x,existingAccount:l=void 0}){const s=P(),n=te(),t=Z(),{prepareCheckoutSession:d,navigateToCheckout:i}=oe(),c=l?ge(s,l):"",k=ee(s,l,t),{config:w}=se("3217984440"),_=w.get("enabled",!1),[S,y]=g.useState(_?k:c),j=ae(),b=async(f,E)=>{try{const h=await d({plan_name:"chatgptteamplan",team_plan_data:{workspace_name:S,price_interval:f,seat_quantity:E,existing_workspace_id:l?.id},billing_details:x,cancel_url:window.location.href},"TeamsWorkspacePurchaseModal",j);await i(h)}catch(h){F.addError(h),n.warning(s.formatMessage(m.paymentErrorWarning),{hasCloseButton:!0})}};return S===""?e.jsx(re,{isOpen:a,onClose:o,onSubmit:f=>{y(f)}}):e.jsx(me,{isOpen:a,onClose:o,onSubmit:(f,E)=>b(f,E),minimumSeats:p,billingDetails:x})}export{K as B,Be as T,De as a,Ae as u};
//# sourceMappingURL=jzyclmlbxnv8eqhh.js.map
