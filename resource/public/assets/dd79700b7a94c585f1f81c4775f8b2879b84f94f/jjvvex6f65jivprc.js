const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/jtb083g97bhz26ld.js","assets/cs2gapsc2bulabhw.js"])))=>i.map(i=>d[i]);
import{j as B,ai as O,h as A,c$ as z,B as b,b as G,an as ee,c as I,L as Z,aG as se,O as te,_ as ae,b0 as re,a9 as oe,fd as ne}from"./eb6xg52mym6rhnsh.js";import{r as g,f as N,j as e,M as i,ai as H,u as W,a as D,b as R,g as ie,ad as le}from"./cs2gapsc2bulabhw.js";import{m as F}from"./gqbv4i6gwnuvc6nj.js";import{cO as ue,e3 as ce,jm as T,ly as $,hs as o,j1 as de,eh as V,lz as K,ac as E,f as me,dU as M,en as P,dZ as pe,jW as ge,jq as xe}from"./pduvb49qgyq1mqhk.js";import{V as he}from"./d3y72ugnrmac5z1v.js";import{a as fe,b as je,u as Me}from"./h3nkyfh9oisoqd5o.js";import"./3s6z6so3p651ma5p.js";import"./ic7rccsdo5x6ovoh.js";import"./c1w85nn5shpnb9e0.js";import"./f2cwocui2o4rh90z.js";import"./do5nmvaddt7ak8xi.js";import"./e95x0gs5di7mq1tw.js";import"./ggve90in2x9hqouv.js";import"./nlj97v8clhezwsxr.js";import"./bzo48ft2wb6beuij.js";import"./fb2gj4fu6zbut62o.js";import"./kmvt5g0oz7ekj3ft.js";import"./otrhg4fwlde4g25l.js";import"./epqkr08njby1t19h.js";import"./7u88g4wa9fostszz.js";import"./codkr9xsn28rihk7.js";import"./h71lg9jejkufcc57.js";import"./l9t7qwwrq1pkwdh1.js";import"./ec6jcwftshefgs7y.js";import"./pm0gb7r9jflnjr23.js";import"./isvebwen77ppsppm.js";import"./dj9sltuyr3641pw7.js";import"./fc9gc4j06cn3ngox.js";import"./ig30z6bnmojfa37r.js";import"./dwy8f7y5ary0iziz.js";const ye=s=>g.createElement("svg",{width:24,height:24,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",...s},g.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M12 7C11.1716 7 10.5 7.67157 10.5 8.5C10.5 9.32843 11.1716 10 12 10C12.8284 10 13.5 9.32843 13.5 8.5C13.5 7.67157 12.8284 7 12 7ZM8.5 8.5C8.5 6.567 10.067 5 12 5C13.933 5 15.5 6.567 15.5 8.5C15.5 10.433 13.933 12 12 12C10.067 12 8.5 10.433 8.5 8.5ZM4 8.5C3.44772 8.5 3 8.94772 3 9.5C3 10.0523 3.44772 10.5 4 10.5C4.55228 10.5 5 10.0523 5 9.5C5 8.94772 4.55228 8.5 4 8.5ZM1 9.5C1 7.84315 2.34315 6.5 4 6.5C5.65685 6.5 7 7.84315 7 9.5C7 11.1569 5.65685 12.5 4 12.5C2.34315 12.5 1 11.1569 1 9.5ZM20 8.5C19.4477 8.5 19 8.94772 19 9.5C19 10.0523 19.4477 10.5 20 10.5C20.5523 10.5 21 10.0523 21 9.5C21 8.94772 20.5523 8.5 20 8.5ZM17 9.5C17 7.84315 18.3431 6.5 20 6.5C21.6569 6.5 23 7.84315 23 9.5C23 11.1569 21.6569 12.5 20 12.5C18.3431 12.5 17 11.1569 17 9.5ZM9.14202 15.815C8.43814 16.3155 8 17.0257 8 18C8 18.5523 7.55228 19 7 19C6.44772 19 6 18.5523 6 18C6 16.3077 6.81186 15.0179 7.98298 14.1851C9.12436 13.3734 10.5892 13 12 13C13.4108 13 14.8756 13.3734 16.017 14.1851C17.1881 15.0178 18 16.3076 18 18C18 18.5523 17.5523 19 17 19C16.4477 19 16 18.5523 16 18C16 17.0257 15.5619 16.3155 14.858 15.815C14.1244 15.2933 13.0892 15 12 15C10.9108 15 9.87564 15.2933 9.14202 15.815ZM4.98449 14.3246C5.08138 14.8683 4.71916 15.3876 4.17544 15.4845C2.78925 15.7315 2 16.4863 2 17.5C2 18.0523 1.55228 18.5 1 18.5C0.447715 18.5 0 18.0523 0 17.5C0 15.0898 1.97796 13.8446 3.82456 13.5155C4.36828 13.4186 4.8876 13.7808 4.98449 14.3246ZM19.0155 14.3246C19.1124 13.7808 19.6317 13.4186 20.1754 13.5155C22.022 13.8446 24 15.0898 24 17.5C24 18.0523 23.5523 18.5 23 18.5C22.4477 18.5 22 18.0523 22 17.5C22 16.4863 21.2108 15.7315 19.8246 15.4845C19.2808 15.3876 18.9186 14.8683 19.0155 14.3246Z",fill:"currentColor"})),Q=1e3;function Ce({group:s,isOpen:t,onClose:a}){const l=N(),n=B(),p=l.formatMessage({id:"workspaceSettings.groups.addMember",defaultMessage:"Add members to the {groupName} group"},{groupName:s.name}),r=O(),[u,d]=g.useState([]),[c,x]=g.useState(!1);async function f(){const y=r?.getWorkspaceId();if(!y)throw new Error("No workspace ID found");x(!0);const w=await G.safePost("/accounts/{account_id}/group/{group_id}/users",{parameters:{path:{account_id:y,group_id:s.id}},requestBody:{email_addresses:u}});n.success(l.formatMessage({id:"yU4Zf0",defaultMessage:"Added {numUsers} users to the group"},{numUsers:w.added_group_users.length})),a?.(),x(!1)}return e.jsxs(A,{testId:"modal-bulk-add-group-members",isOpen:t,onClose:a??z,title:p,type:"success",showCloseButton:!0,primaryButton:e.jsx(b,{onClick:f,disabled:u.length===0||u.length>Q,loading:c,children:e.jsx(i,{id:"EpbOzA",defaultMessage:"Add users to group"})}),children:[e.jsx(we,{onChange:d}),u.length>Q&&e.jsx("div",{className:"text-token-text-error mt-2 text-sm",children:e.jsx(i,{id:"9lp0Tc",defaultMessage:"Email list is limited to {maxEmails} users at once",values:{maxEmails:Q}})})]})}function we({onChange:s}){const[t,a]=g.useState("");return e.jsxs("div",{className:"flex flex-col space-y-4",children:[e.jsxs("label",{htmlFor:"group-email-paste",children:[e.jsx(i,{id:"qvGcSC",defaultMessage:"Emails"}),e.jsx("br",{}),e.jsx("span",{className:"text-token-text-tertiary text-sm",children:e.jsx(i,{id:"Fhd+5h",defaultMessage:"Paste email addresses here, one per line:"})})]}),e.jsx(ue,{id:"group-email-paste",className:"h-[250px] text-sm",value:t,onChange:l=>{a(l.target.value),s(Se(l.target.value))},placeholder:`jean@example.com
joohyun@example.com
muhammed@example.com
susan@example.com`})]})}function Se(s){return s.split(`
`).map(t=>t.trim()).filter(t=>t.length>0).filter(t=>he.test(t))}function X({group:s,isOpen:t,onClose:a}){const n=N().formatMessage({id:"workspaceSettings.addGroupsMembersModal.title",defaultMessage:"Add members to the {groupName} group"},{groupName:s.name}),r=O()?.getWorkspaceId(),[u,d]=g.useState(""),[c,x]=g.useState(0),{data:f}=ce(r,c*T,u,T,H),[y,w]=g.useState([]),[C,S]=g.useState([]),[j,_]=g.useState("interactive"),m=f?Math.ceil((f.total??0)/T):0;async function k(h){S(v=>[...v,h]);try{await be(r,s.id,h),w(v=>[...v,h])}catch(v){ee.addError(v)}finally{S(v=>v.filter(Y=>Y!==h))}}return j==="batch"?e.jsx(Ce,{group:s,isOpen:t,onClose:a}):e.jsx(A,{testId:"modal-add-group-member",type:"warning",isOpen:t,onClose:a??z,title:n,size:"custom",className:"max-w-(--breakpoint-md)",showCloseButton:!0,primaryButton:e.jsx(b,{onClick:a,children:e.jsx(i,{id:"0NAzDq",defaultMessage:"Done"})}),children:e.jsxs("div",{className:"flex flex-col gap-3",children:[e.jsxs("div",{className:"flex flex-row justify-between",children:[e.jsx("p",{children:n}),e.jsx(b,{onClick:()=>{_("batch")},color:"secondary",children:e.jsx(i,{id:"5GPldp",defaultMessage:"Bulk add users"})})]}),e.jsx($,{value:u,inputClassName:"w-full",onChange:h=>{d(h.target.value)}}),e.jsxs(o.Root,{className:"min-w-full",children:[e.jsxs(o.Header,{children:[e.jsx(o.HeaderCell,{children:e.jsx(i,{id:"workspaceSettings.groups.addMember.name",defaultMessage:"Name"})}),e.jsx(o.HeaderCell,{children:e.jsx(i,{id:"workspaceSettings.groups.addMember.email",defaultMessage:"Email"})}),e.jsx(o.HeaderCell,{})]}),e.jsx(o.Body,{children:f?.items.map(h=>e.jsxs(o.Row,{children:[e.jsx(o.Cell,{children:h.name}),e.jsx(o.Cell,{children:h.email}),e.jsx(o.Cell,{textAlign:"right",className:"pe-1",children:e.jsx(b,{size:"small",color:"secondary",disabled:C.includes(h.id),onClick:()=>{y.includes(h.id)||k(h.id)},icon:y.includes(h.id)?de:V,children:y.includes(h.id)?e.jsx(i,{id:"workspaceSettings.groups.addMember.addButton",defaultMessage:"Added"}):e.jsx(i,{id:"workspaceSettings.groups.addMember.addedButton",defaultMessage:"Add"})})})]},h.id))})]}),e.jsx("div",{className:"flex flex-row justify-center",children:e.jsx(K,{currentPage:c,onChangeIndex:h=>{x(h)},length:m})})]})})}async function be(s,t,a){await G.safePatch("/accounts/{account_id}/group/{group_id}",{parameters:{path:{account_id:s,group_id:t}},requestBody:{user_id:a}})}const L=10;function Ne({workspaceId:s,group:t,readOnly:a}){const l=N(),[n,p]=g.useState(!1),[r,u]=g.useState(""),[d,c]=g.useState(0),{data:x,isLoading:f,isPlaceholderData:y}=W({queryKey:[s,"groups",t.id,r,`members-page-${d}`],queryFn:()=>G.safeGet("/accounts/{account_id}/group/{group_id}/users",{parameters:{path:{account_id:s,group_id:t.id},query:{query:r,offset:d*L}}}),placeholderData:H}),[w,C]=g.useState(!1),S=g.useRef(null),j=D();g.useEffect(()=>{n&&S.current&&S.current.focus()},[n]);const{mutateAsync:_}=R({mutationFn:async m=>await G.safeDelete("/accounts/{account_id}/group/{group_id}/users/{user_id}",{parameters:{path:{account_id:s,group_id:t.id,user_id:m}}}),onMutate:m=>{j.cancelQueries({queryKey:[s,"groups",t.id]});const k=x;return j.setQueryData([s,"groups",t.id,r,`members-page-${d}`],h=>h?{...h,items:h.items.filter(v=>v.id!==m),total:h.total-1}:{limit:10,offset:0,items:[],total:0}),{previousData:k}},onError:(m,k,h)=>{j.setQueryData([s,"groups",t.id,`members-page-${d}`],h?.previousData),j.invalidateQueries({queryKey:[s,"groups",t.id]})},onSettled:async()=>{await new Promise(m=>setTimeout(m,1e3)),j.invalidateQueries({queryKey:[s,"groups"]})}});return e.jsxs("div",{className:"flex w-full flex-col",children:[e.jsxs("div",{className:"flex flex-row items-center",children:[e.jsx("div",{className:"border-token-border-dark mt-3 inline-block h-8 grow-0 border-b-2 text-sm font-semibold",children:e.jsx(i,{id:"workspaceSettings.groups.membersTableTitle",defaultMessage:"Group members"})}),e.jsx("div",{className:"grow"}),e.jsx(E,{label:l.formatMessage({id:"workspaceSettings.groups.searchButtonTooltip",defaultMessage:"Search members"}),children:e.jsx("div",{className:"cursor-pointer p-2",onClick:()=>{p(!0)},children:e.jsx(me,{className:"icon-sm"})})}),e.jsx("input",{type:"text",ref:S,placeholder:l.formatMessage({id:"workspaceSettings.groups.searchMembers",defaultMessage:"Filter by name or email..."}),className:I("bg-token-surface-primary dark:bg-token-surface-secondary transition-width border-none px-0 duration-300 ease-in-out focus:ring-0",n?"w-64":"w-0"),value:r,onChange:()=>{c(0),u(S.current?.value??"")}})]}),e.jsxs(o.Root,{className:"min-w-full",children:[e.jsxs(o.Header,{children:[e.jsx(o.HeaderCell,{children:e.jsx(i,{id:"workspaceSettings.groups.memberName",defaultMessage:"Name"})}),e.jsx(o.HeaderCell,{children:e.jsx(i,{id:"workspaceSettings.groups.email",defaultMessage:"Email"})}),e.jsx(o.HeaderCell,{})]}),e.jsx(o.Body,{className:f||y?"opacity-50":void 0,children:x==null?e.jsx(o.Row,{children:e.jsx(o.Cell,{colSpan:3,children:e.jsx(Z,{})})}):x.items.length===0?e.jsx(o.Row,{children:e.jsx(o.Cell,{colSpan:3,children:r===""?e.jsx(i,{id:"workspaceSettings.groups.noMembers",defaultMessage:"No members"}):e.jsx(i,{id:"workspaceSettings.groups.noMembersForSearch",defaultMessage:"No members matched the filter"})})}):x.items.map(m=>e.jsxs(o.Row,{children:[e.jsx(o.Cell,{children:e.jsx("span",{className:"ms-3",children:m.name})}),e.jsx(o.Cell,{children:m.email}),e.jsx(o.Cell,{textAlign:"right",children:!a&&(t.is_scim_managed?e.jsx(M.Root,{children:e.jsx(M.Trigger,{disabled:!0,children:e.jsx(E,{label:l.formatMessage(F.managedViaSCIMTooltip),className:"flex",side:"right",children:e.jsx(P,{className:"icon-sm"})})})}):e.jsxs(M.Root,{children:[e.jsx(M.Trigger,{className:"-my-2",children:e.jsx(P,{className:"icon-sm"})}),e.jsx(M.Portal,{children:e.jsx(M.Content,{size:"default",children:e.jsx(M.Item,{onClick:()=>_(m.id),icon:e.jsx(pe,{className:"text-token-text-status-error"}),className:"text-token-text-status-error",children:e.jsx(i,{id:"workspaceSettings.groups.removeMember",defaultMessage:"Remove member"})})})})]}))})]},m.id))})]}),e.jsxs("div",{className:"my-2 flex flex-row justify-center",children:[!a&&!t.is_scim_managed&&e.jsx(b,{color:"secondary",onClick:()=>C(!0),children:e.jsx(i,{id:"workspaceSettings.groups.addMemberButton",defaultMessage:"Add member"})}),!a&&t.is_scim_managed&&e.jsx(E,{label:l.formatMessage(F.managedViaSCIMTooltip),side:"right",children:e.jsx(b,{color:"secondary",disabled:!0,children:e.jsx(i,{id:"workspaceSettings.groups.addMemberButton",defaultMessage:"Add member"})})}),e.jsx("div",{className:"grow"}),x&&x.items.length>0&&e.jsx(K,{currentPage:d,onChangeIndex:m=>{c(m)},length:Math.ceil(x.total/L)})]}),w&&e.jsx(X,{isOpen:!0,onClose:()=>{j.invalidateQueries({queryKey:[s,"groups"]}),C(!1)},group:t})]})}function ve({group:s,readOnly:t,workspaceId:a,onClose:l}){const p=N().formatMessage({id:"workspaceSettings.groupsMembersModal.title",defaultMessage:"Members of group: {groupName}"},{groupName:s.name});return e.jsx(A,{testId:"modal-add-group-member",type:"warning",isOpen:!0,onClose:l,title:p,size:"custom",className:"max-w-(--breakpoint-md)",showCloseButton:!0,primaryButton:e.jsx(b,{onClick:l,children:e.jsx(i,{id:"0NAzDq",defaultMessage:"Done"})}),children:e.jsx(Ne,{group:s,readOnly:t,workspaceId:a})})}const U=10,Ge=({workspaceId:s,currPage:t,groupFilter:a})=>{const{data:l,isLoading:n,isPlaceholderData:p}=W({queryKey:a===""?[s,"groups",`page-${t}`]:[s,"groups","filtered",a,`page-${t}`],queryFn:()=>se.getWorkspaceGroups(s,{query:a,offset:t*U}),placeholderData:H});return{groups:l,isLoading:n,isPlaceholderData:p}},ke=({workspaceId:s,currentGroups:t})=>{const a=D(),l=B(),n=N(),{mutateAsync:p}=R({mutationFn:({workspaceId:r,name:u})=>G.safePost("/accounts/{account_id}/group",{parameters:{path:{account_id:r}},requestBody:{name:u}}),onMutate:({workspaceId:r,name:u})=>{a.cancelQueries({queryKey:[r,"groups"]});const d=t;return a.setQueryData([r,"groups","page-0"],c=>(c||(c={limit:10,offset:0,items:[],total:0}),{...c,items:[{id:"new",name:u,num_members:0,created_time:""},...c.items.slice(0,9)]})),{previousGroups:d}},onError:(r,u,d)=>{a.setQueryData([s,"groups","page-0"],d?.previousGroups),a.invalidateQueries({queryKey:[s,"groups"]}),r.message==="Group with this name already exists."&&l.warning(n.formatMessage({id:"workspaceSettings.groups.duplicateName",defaultMessage:"Group with this name already exists"}),{duration:2})},onSettled:async()=>{await new Promise(r=>setTimeout(r,1e3)),a.invalidateQueries({queryKey:[s,"groups"]})}});return{createGroup:p}},_e=({workspaceId:s,currentGroups:t})=>{const a=D(),{mutateAsync:l}=R({mutationFn:async n=>await G.safeDelete("/accounts/{account_id}/group/{group_id}",{parameters:{path:{account_id:s,group_id:n}}}),onMutate:n=>{a.cancelQueries({queryKey:[s,"groups","page-0"]});const p=t;return a.setQueryData([s,"groups","page-0"],r=>(r||(r={items:[]}),{...r,items:r.items.filter(u=>u.id!==n)})),{previousGroups:p}},onError:(n,p,r)=>{a.setQueryData([s,"groups","page-0"],r?.previousGroups),a.invalidateQueries({queryKey:[s,"groups"]})},onSettled:async()=>{await new Promise(n=>setTimeout(n,1e3)),a.invalidateQueries({queryKey:[s,"groups"]})}});return{deleteGroup:l}},Ae=({workspaceId:s,currPage:t})=>{const a=D(),l=B(),n=N(),{mutateAsync:p}=R({mutationFn:async({workspaceId:r,groupID:u,name:d})=>await G.safePatch("/accounts/{account_id}/group/{group_id}",{parameters:{path:{account_id:r,group_id:u}},requestBody:{name:d}}),onMutate:({workspaceId:r,groupID:u,name:d})=>{const c=a.getQueryData([r,"groups",`page-${t}`]);return a.setQueryData([r,"groups",`page-${t}`],x=>(x||(x={items:[]}),{...x,items:x.items.map(f=>f.id===u?{...f,name:d}:f)})),{previousGroups:c}},onError:(r,u,d)=>{a.setQueryData([u,"groups",`page-${t}`],d?.previousGroups),r.message==="Group with this name already exists."&&l.warning(n.formatMessage({id:"workspaceSettings.groups.duplicateName",defaultMessage:"Group with this name already exists"}),{duration:2})},onSettled:async()=>{await new Promise(r=>setTimeout(r,1e3)),a.invalidateQueries({queryKey:[s,"groups"]})}});return{updateGroupName:p}},De=te(()=>ae(()=>import("./jtb083g97bhz26ld.js"),__vite__mapDeps([0,1])).then(s=>s.DirectorySyncResourceManagedIndication));function Ee({workspaceId:s}){const t=N(),a=D(),l=re(),n=!(l?.isAdminOfAccount()||l?.isOwnerOfAccount()),[p,r]=g.useState(""),[u,d]=g.useState(0),{groups:c,isLoading:x,isPlaceholderData:f}=Ge({workspaceId:s,currPage:u,groupFilter:p}),[y,w]=g.useState(!1),C=m=>{m&&(d(0),r("")),w(m)},{createGroup:S}=ke({workspaceId:s,currentGroups:c}),{deleteGroup:j}=_e({workspaceId:s,currentGroups:c}),{updateGroupName:_}=Ae({workspaceId:s,currPage:u});return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"mt-6 mb-3 flex flex-row justify-between gap-2",children:[e.jsx($,{inputClassName:"w-[250px]",value:p,onChange:m=>{r(m.target.value),d(0)},placeholder:t.formatMessage({id:"workspaceSettings.groups.search",defaultMessage:"Search group name"})}),!n&&e.jsx(b,{onClick:()=>C(!0),icon:V,children:e.jsx(i,{id:"workspaceSettings.groups.create",defaultMessage:"Create group"})})]}),e.jsxs("div",{children:[e.jsxs(o.Root,{className:"min-w-full",children:[e.jsxs("colgroup",{children:[e.jsx("col",{className:"w-[60%]"}),e.jsx("col",{className:"w-[20%]"}),e.jsx("col",{className:"w-[20%]"}),e.jsx("col",{className:"w-16"})]}),e.jsxs(o.Header,{children:[e.jsx(o.HeaderCell,{children:e.jsx(i,{id:"workspaceSettings.groups.groupName",defaultMessage:"Group name"})}),e.jsx(o.HeaderCell,{children:e.jsx(i,{id:"workspaceSettings.groups.members",defaultMessage:"Members"})}),e.jsx(o.HeaderCell,{children:e.jsx(i,{id:"workspaceSettings.groups.created",defaultMessage:"Created"})}),e.jsx(o.HeaderCell,{})]}),e.jsx(o.Body,{className:I((x||f)&&"opacity-50"),children:c==null?e.jsx(o.Row,{children:e.jsx(o.Cell,{colSpan:5,textAlign:"center",children:e.jsx(Z,{})})}):c.items.length===0?e.jsx(o.Row,{children:e.jsx(o.Cell,{colSpan:5,textAlign:"center",children:p===""?e.jsx(i,{id:"workspaceSettings.groups.noGroups",defaultMessage:"No groups found."}):e.jsx(i,{id:"workspaceSettings.groups.noGroupsWithFIlter",defaultMessage:"No groups found. Try changing the search query."})})}):c.items.map(m=>e.jsx(qe,{group:m,workspaceId:s,onDelete:j,onChangeName:async k=>{await _({workspaceId:s,groupID:m.id,name:k})},onAddMember:()=>{a.invalidateQueries({queryKey:[s,"groups"]})},readOnly:n},m.id))})]}),c&&e.jsx("div",{className:"text-center",children:e.jsx(K,{length:Math.ceil(c.total/U),currentPage:Math.min(u,Math.ceil(c.total/U)),onChangeIndex:m=>d(m)})})]}),y&&e.jsx(J,{onClose:()=>C(!1),onSave:async m=>{await S({name:m,workspaceId:s})},placeholder:t.formatMessage({id:"workspaceSettings.groups.placeholder",defaultMessage:"E.g. marketing team"})})]})}function Pe({currentWorkspaceId:s}){const t=N();return e.jsxs(e.Fragment,{children:[e.jsx(ge,{children:e.jsx("title",{children:t.formatMessage(q.title)})}),e.jsx(fe,{title:t.formatMessage(q.title),subtitle:e.jsx(i,{id:"NDDzzF",defaultMessage:"Only workspace admins can edit these settings."})}),e.jsx(je,{showSpinner:!1,children:e.jsx(Ee,{workspaceId:s})})]})}function qe({group:s,workspaceId:t,onChangeName:a,onDelete:l,onAddMember:n,readOnly:p}){const r=N(),{value:u}=oe("2091463435"),[d,c]=g.useState(null),[x,f]=g.useState(null),[y,w]=g.useState(!1),[C,S]=g.useState(!1);return e.jsxs(e.Fragment,{children:[e.jsxs(o.Row,{className:"hover:bg-token-surface-secondary cursor-pointer [&>td]:py-2",onClick:()=>S(!0),children:[e.jsxs(o.Cell,{children:[e.jsxs("div",{className:"relative pe-3",children:[e.jsx(xe,{IconComponent:ye,size:"medium",className:"bg-token-bg-tertiary",rounded:!0}),u&&s.is_scim_managed&&e.jsx("div",{className:"absolute end-0 bottom-0",children:e.jsx(De,{})})]}),s.name]}),e.jsx(o.Cell,{children:e.jsx(i,{id:"workspaceSettings.groups.memberCount",defaultMessage:"{count} members",values:{count:s.num_members}})}),e.jsx(o.Cell,{children:s.created_time&&e.jsx(le,{value:s.created_time,year:"numeric",month:"long",day:"numeric"})}),e.jsx(o.Cell,{textAlign:"right",children:!p&&(s.is_scim_managed?e.jsx(M.Root,{children:e.jsx(M.Trigger,{disabled:!0,children:e.jsx(E,{label:r.formatMessage(F.managedViaSCIMTooltip),className:"flex",side:"right",children:e.jsx(P,{className:"icon-sm"})})})}):e.jsxs(M.Root,{children:[e.jsx(M.Trigger,{className:"-my-2",children:e.jsx(P,{className:"icon-sm"})}),e.jsx(M.Portal,{children:e.jsxs(M.Content,{children:[e.jsx(M.Item,{onClick:j=>{w(!0),j.stopPropagation()},disabled:p||s.is_scim_managed,children:e.jsx(i,{id:"workspaceSettings.groups.addMembers",defaultMessage:"Add members"})}),e.jsx(M.Item,{onClick:j=>{f(s),j.stopPropagation()},children:e.jsx(i,{id:"workspaceSettings.groups.changeName",defaultMessage:"Edit name"})}),e.jsx(M.Item,{onClick:j=>{c(s),j.stopPropagation()},children:e.jsx(i,{id:"workspaceSettings.groups.edit",defaultMessage:"Delete group"})})]})})]}))})]}),d&&e.jsx(Be,{group:d,onDelete:l,onClose:()=>c(null)}),x&&e.jsx(J,{defaultName:x.name,onSave:a,onClose:()=>f(null),placeholder:"E.g. marketing team"}),C&&e.jsx(ve,{group:s,readOnly:p,workspaceId:t,onClose:()=>S(!1)}),y&&!p&&!s.is_scim_managed&&e.jsx(X,{isOpen:!0,onClose:()=>{n(s.id),w(!1)},group:s})]})}function J({defaultName:s,placeholder:t,onSave:a,onClose:l}){const n=N(),p=s==null,[r,u]=g.useState(s||""),[d,c]=g.useState(!1),[x,f]=g.useState(null),y=B(),w=async()=>{if(r.trim()===""){f(n.formatMessage({id:"workspaceSettings.groups.emptyName",defaultMessage:"Group name cannot be empty"}));return}c(!0);try{await a(r),y.success(p?n.formatMessage({id:"workspaceSettings.groups.createdGroup",defaultMessage:"Group created successfully"}):n.formatMessage({id:"workspaceSettings.groups.nameChanged",defaultMessage:"Group name changed successfully"})),l()}catch{f(n.formatMessage({id:"workspaceSettings.groups.duplicateName",defaultMessage:"Group with this name already exists"}))}finally{c(!1)}};return e.jsx(A,{isOpen:!0,type:"success",onClose:l,title:p?n.formatMessage(q.newGroupTitle):n.formatMessage(q.updateNameTitle),testId:"modal-change-group-name",showCloseButton:!0,primaryButton:e.jsx(b,{color:"primary",onClick:()=>w(),loading:d,children:e.jsx(i,{id:"workspaceSettings.groups.save",defaultMessage:"Save"})}),secondaryButton:e.jsx(b,{onClick:l,color:"secondary",children:e.jsx(i,{id:"workspaceSettings.groups.cancel",defaultMessage:"Cancel"})}),children:e.jsxs("div",{className:"mb-3 flex flex-col gap-2",children:[e.jsx("label",{className:"text-sm font-medium",children:e.jsx(i,{id:"workspaceSettings.groups.groupNameLabel",defaultMessage:"Group Name"})}),e.jsx("input",{autoFocus:!0,type:"text",value:r,placeholder:t,onChange:C=>{u(C.target.value),f(null)},className:"border-token-border-secondary focus:border-token-accent w-full rounded border px-3 py-2 text-sm focus:outline-none",onKeyDown:C=>{C.key==="Enter"&&w()}}),x&&e.jsx("p",{className:"text-xs text-red-500",children:x})]})})}function Be({group:s,onDelete:t,onClose:a}){const n=N().formatMessage({id:"workspaceSettings.groups.deleteGroupTitle",defaultMessage:"Delete group {groupName}?"},{groupName:s.name});return e.jsx(A,{type:"warning",isOpen:!0,onClose:a,title:n,testId:"modal-delete-group",showCloseButton:!0,primaryButton:e.jsx(b,{color:"danger",onClick:async()=>{t(s.id),a()},children:e.jsx(i,{id:"workspaceSettings.groups.confirmDelete",defaultMessage:"Delete"})}),secondaryButton:e.jsx(b,{onClick:a,color:"secondary",children:e.jsx(i,{id:"workspaceSettings.groups.cancelDelete",defaultMessage:"Cancel"})}),children:e.jsx("p",{children:e.jsx(i,{id:"workspaceSettings.groups.deleteGroupWarning",defaultMessage:'Are you sure you want to delete the "{groupName}" group? This action cannot be undone.',values:{groupName:s.name}})})})}const q=ie({title:{id:"admin.groupsSettings.title",defaultMessage:"Groups"},newGroupTitle:{id:"workspaceSettings.groups.newGroup",defaultMessage:"New group"},updateNameTitle:{id:"workspaceSettings.groups.updateNameTitle",defaultMessage:"Update group name"}}),ms=ne(function(){const t=Me();return e.jsx(Pe,{...t})});export{ms as default};
//# sourceMappingURL=jjvvex6f65jivprc.js.map
