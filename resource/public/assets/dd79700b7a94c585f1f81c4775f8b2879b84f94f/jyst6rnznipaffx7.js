import{r as i,g as fe,j as e,M as p,h as ie,f as we}from"./cs2gapsc2bulabhw.js";import{Z as De,gw as Le,bd as Ie,gx as We,ef as Pe,gy as ye,gz as _e,a$ as B,b0 as he,a0 as Ee,gA as Re,gB as ve,f0 as Te,gC as Ue,gD as je,gE as Ve,gF as ze,gG as Ge,gH as He,gI as qe,gJ as Fe,gK as $e,gL as Ke,gM as Qe,gN as Ye,gO as Ze,gP as Je,gQ as Xe,gR as eo,gS as oo,gT as to,gU as ao,gV as so,gW as no,gX as io,gY as lo,gZ as ro,g_ as uo,g$ as co,h0 as go,h1 as mo,h2 as fo,h3 as ho,h4 as po,h5 as Mo,h6 as So,h7 as Co,P as bo,Y as ko,aZ as N,U as le,h8 as re,h9 as Ao,ha as xo}from"./pduvb49qgyq1mqhk.js";import{aE as Oo,am as No,e as b,aJ as de,h as pe,c$ as Me,B as ue,fB as Bo,fA as wo,fz as Do,aa as Lo,e5 as Io,b1 as Wo,a9 as Po,f7 as yo,gN as ce,f8 as _o}from"./eb6xg52mym6rhnsh.js";import{u as Eo,a as Ro,N as vo,I as To}from"./nlj97v8clhezwsxr.js";import{b as Uo}from"./epqkr08njby1t19h.js";import{b as jo}from"./h71lg9jejkufcc57.js";const ge="has-dismissed-welcome-back-modal",Se=()=>{const[t,o]=i.useState(()=>sessionStorage.getItem(ge)!=null),{layer:l}=Oo("3637408529"),s=l.get("is_no_auth_welcome_back_modal_enabled",!1),r=De(),{isUnauthenticated:n,isLoading:f}=No(),d=Le(),k=Uo(),S=()=>{o(!0),sessionStorage.setItem(ge,"true")};return f?{isLoading:!0,isOpen:null,onClose:null}:{isLoading:!1,isOpen:n&&s&&!t&&d&&!r&&!k,onClose:S}},Vo=({onClose:t})=>{const o=Ie(),l=We(),s=Pe(M.signUpCta),r=l?"center":"bottom",{isOpen:n,onClose:f}=Se();return i.useEffect(()=>{n&&(b.logEvent("No Auth Welcome Back Modal Shown"),de.logEvent("chatgpt_no_auth_welcome_back_modal_shown"))},[n]),n?e.jsx(pe,{testId:"modal-no-auth-welcome-back",isOpen:!0,onClose:Me,shouldIgnoreClickOutside:!0,showCloseButton:!1,type:"success",noPadding:!0,size:"custom",className:"max-w-[373px] sm:max-w-[400px]",position:r,children:e.jsxs("div",{className:"flex flex-col items-center justify-center px-6 py-8 sm:p-10",children:[e.jsx("p",{className:"mb-1 text-center text-2xl font-semibold",children:e.jsx(p,{...M.title})}),e.jsx("p",{className:"text-token-text-secondary mb-6 text-center text-lg",children:e.jsx(p,{...M.subtitle})}),e.jsx(ue,{as:"button",size:"large",color:"primary",fullWidth:!0,className:"mb-2 sm:mb-3","data-testid":"welcome-login-button",onClick:()=>{o({authType:"login",callback:d=>{b.logLogInButtonClicked({provider:d,location:"No Auth Welcome Back Modal"})}})},children:e.jsx(p,{...M.logInCta})}),e.jsx(ue,{as:"button",size:"large",color:"secondary",fullWidth:!0,className:"mb-5",onClick:()=>{o({authType:"signup",callback:d=>{b.logSignUpButtonClicked({provider:d,location:"No Auth Welcome Back Modal"})}})},children:e.jsx(p,{...s})}),e.jsx("a",{href:"#",className:"text-token-text-secondary cursor-pointer font-semibold underline sm:text-sm",onClick:d=>{d.preventDefault(),b.logEvent("No Auth Welcome Modal Stay Logged Out Link Clicked"),de.logEvent("chatgpt_no_auth_welcome_back_modal_stay_logged_out_link_clicked"),t(),f()},"data-testid":"dismiss-welcome",children:e.jsx(p,{...M.stayLoggedOutLink})})]})}):null},M=fe({title:{id:"NoAuthWelcomeBackModal.title",defaultMessage:"Welcome back"},subtitle:{id:"7WQi5y",defaultMessage:"Log in or sign up to get smarter responses, upload files and images, and more."},signUpCta:{id:"NoAuthWelcomeBackModal.signUpCta",defaultMessage:"Sign up"},logInCta:{id:"NoAuthWelcomeBackModal.logInCta",defaultMessage:"Log in"},stayLoggedOutLink:{id:"NoAuthWelcomeBackModal.stayLoggedOut",defaultMessage:"Stay logged out"}}),zo=({onClose:t})=>{const o=we(),l=B(he.isBusinessWorkspace),s=B(n=>n.currentWorkspace),r=l?o.formatMessage(me.workspaceWelcome,{workspaceName:s?.name}):"ChatGPT";return e.jsx(pe,{testId:"modal-onboarding",isOpen:!0,onClose:Me,type:"success",title:r,size:"custom",noPadding:!0,className:"max-w-3xl",description:o.formatMessage(me.personalOnboardingSubheading),children:e.jsx(Ao,{onClose:t,scope:xo.Personal})})},Go=({onClose:t})=>{const o=_o.useStore();return i.useEffect(()=>(o.setOnCloseSideEffect(t),o.setManualVisibility(!0),()=>{o.setManualVisibility(!1)}),[t,o]),null};function Zo({clientThreadId:t}){const[o,l]=i.useState(0),{hasSeenOnboardingDate:s}=ye(),{hasSeenTeamOwnerOnboardingDate:r}=_e(),n=B(he.isBusinessWorkspace),[f,d]=i.useState(!1),k=ie(),S=Ee(k),{data:Ce,isPending:be,isEnabled:ke}=Re(),w=ve(Ce,be&&ke),D=Bo(),L=wo(),I=Do(),[Ae,A]=Lo(t,a=>[!a||a.isLoading,a?.conversationOrigin]),x=Ae&&!!t,{data:u,isError:h}=Io(),O=Wo(u),g=u!=null,W=u&&u?.accountItems.length>1&&u.currentAccountId==null,P=u?.accountItems.some(a=>a.isPersonalAccount()),y=!!u?.accountItems&&u.accountItems.length>0&&u.accountItems.every(({canAccessWithCurrentSession:a})=>!a),{eligible:_,isLoading:E}=Te(),{value:R}=Po("1542198993"),{punchOutRequireLoginInfo:v}=Ue(),{state:T}=je(),{isOpen:U,isLoading:j}=Ve(),{isOpen:V,isLoading:z}=ze(),{isOpen:G,isLoading:H}=Ge(),{isOpen:q,isLoading:F}=Se(),{state:$}=He(),K=qe(),Q=Eo(),Y=Ro(),Z=Fe(),J=$e(),X=Ke(),ee=Qe(),{isOpen:oe,isLoading:te}=Ye(),{isOpen:xe}=jo(),{shouldShowCookieBanner:ae,isCookieConsentBannerLoading:se}=yo(),m=i.useMemo(()=>[{Component:Ze,getModalState:()=>v?"show":"hide",isDeferrable:!1},{Component:Je,getModalState:()=>T,isDeferrable:!1},{Component:Xe,getModalState:()=>$,isDeferrable:!1},{Component:eo,getModalState:()=>te?"loading":oe?"show":"hide",isDeferrable:!1},{Component:vo,getModalState:()=>Y,isDeferrable:!0},{Component:oo,getModalState:()=>j||x?"loading":A===ce.APPLE?"hide":U?"show":"hide",isDeferrable:!0},{Component:Vo,getModalState:()=>F||x?"loading":A===ce.APPLE?"hide":q?"show":"hide",isDeferrable:!0},{Component:Go,getModalState:()=>se?"loading":ae?"show":"hide",isDeferrable:!1},{Component:zo,getModalState:()=>n||S?"hide":s===null?"loading":s===!1?"show":"hide",isDeferrable:!0},{Component:to,getModalState:()=>h?"hide":W?"show":g?"hide":"loading",isDeferrable:!1},{Component:ao,getModalState:()=>D!==null?"show":h||g?"hide":"loading",isDeferrable:!1},{Component:so,getModalState:()=>L!==null?"show":h||g?"hide":"loading",isDeferrable:!1},{Component:no,getModalState:()=>I!=null?"show":h||g?"hide":"loading",isDeferrable:!1},{Component:io,getModalState:()=>g?y?"show":"hide":"loading",isDeferrable:!1},{Component:lo,getModalState:()=>z?"loading":V?"show":"hide",isDeferrable:!1},{Component:ro,getModalState:()=>H?"loading":G?"show":"hide",isDeferrable:!1},{Component:uo,getModalState:()=>"hide",isDeferrable:!1},{Component:co,getModalState:()=>!O?.isTeam()||!O?.isOwnerOfAccount()||!P?"hide":!g||r===null?"loading":r===!1?"show":"hide",isDeferrable:!1},{Component:go,getModalState:()=>n?s===null?"loading":s===!1?"show":"hide":"hide",isDeferrable:!0},{Component:mo,getModalState:()=>E?"loading":_&&R?"show":"hide",isDeferrable:!1},{Component:fo,getModalState:()=>w,isDeferrable:!1},{Component:ho,getModalState:()=>K,isDeferrable:!1},{Component:a=>t&&e.jsx(bo,{clientThreadId:t,children:e.jsx(To,{clientThreadId:t,...a})}),getModalState:()=>Q,isDeferrable:!1},{Component:po,getModalState:()=>Z,isDeferrable:!1},{Component:Mo,getModalState:()=>J,isDeferrable:!1},{Component:So,getModalState:()=>X,isDeferrable:!0},{Component:Co,getModalState:()=>ee,isDeferrable:!1}],[v,T,$,te,oe,Y,j,x,A,U,F,q,se,ae,n,S,s,h,W,g,D,L,I,y,z,V,H,G,O,P,r,E,_,R,w,K,t,Q,Z,J,X,ee])[o],Oe=f;let c;m&&(m.isDeferrable&&Oe?c="hide":m.Component?c=m.getModalState():c="hide"),i.useEffect(()=>{c==="hide"&&l(o+1)},[o,c]);const{pathname:C}=ie(),ne=i.useRef(C);if(i.useEffect(()=>{ne.current!==C&&(ne.current=C,l(0))},[C]),i.useEffect(()=>{const a=c==="show",Be=ko.getState().activeModals.has(N.BlockingInitialComponent);a!==Be&&(a?le.openModal(N.BlockingInitialComponent):le.closeModal(N.BlockingInitialComponent))},[c]),m==null)return re.trackNamespace(re.NS_COMPOSER),e.jsx("span",{"data-testid":"blocking-initial-modals-done",className:"hidden"});if(c!=="show"||xe)return null;const Ne=m.Component;return e.jsx(Ne,{onClose:()=>{d(!0),l(a=>a+1)}})}const me=fe({workspaceWelcome:{id:"BlockingInitialModals.workspaceWelcome",defaultMessage:"Welcome to the {workspaceName} workspace"},personalOnboardingSubheading:{id:"BlockingInitialModals.personalOnboardingSubheading",defaultMessage:"Tips for getting started"}});export{Zo as B};
//# sourceMappingURL=jyst6rnznipaffx7.js.map
