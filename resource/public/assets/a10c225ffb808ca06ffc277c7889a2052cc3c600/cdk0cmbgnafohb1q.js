import{r as U,ad as Y,j as o}from"./jj85rqzpbnvv3emr.js";import{aW as Z,aX as _,Y as $,aY as D,aZ as K,a_ as X,a$ as q,b0 as H}from"./mclphevd122040jw.js";import{gd as J,cj as h,i as V,r as ee,gG as se,kP as oe,ck as ae,gZ as ne,f$ as re,ci as te,j as ie,hP as le,bI as m,mN as ce}from"./lef5ym39glv4981l.js";import{P as ue}from"./gyvvad7btmtz1x9o.js";function fe({clientThreadId:s,currentModelId:c,disableDraftPersistence:x=!1,isNewThread:P,isProjectThread:M=!1,onRequestCompletion:S,onContinueGenerating:j,headerClassName:z,hideHeader:N,onlyAllowImageUploads:k,layoutMode:w="bottom"}){const{modelsData:a,externalModelsLoading:A}=J(),[g,p,t,I,b]=h(s,e=>{var C;const r=m.getCurrentNode(e);return[((C=r.message.clientMetadata)==null?void 0:C.errType)!=null&&r.message.clientMetadata.errType!=="info",ce(m.getCurrentNode(e).message),e==null?void 0:e.mode,!!(e!=null&&e.continuingFromSharedPostId),(e==null?void 0:e.continuingFromSharedProjectConversationId)!=null]}),u=V(),i=ee(u),y=se(),n=Z({clientThreadId:s}),{isOpen:G,onClose:v}=_({type:"just-hit-rate-limit"}),W=U.useMemo(()=>n?!1:!g&&p,[g,p,n]),L=n,R=oe(s),E=h(s,m.hasRecentPIMWarning),d=ae(R).data,T=ne(),l=(()=>{var r;return E?"pimBlock":((r=d==null?void 0:d.gizmo.tags)==null?void 0:r.includes(re.WorkspaceDisabled))&&!T?"workspaceDisallowsGizmo":(a==null?void 0:a.models.size)===0?"noModelsAvailable":(t==null?void 0:t.kind)===te.GizmoTest&&t.gizmo_id==null?"noTestGizmoId":null})(),B=Y(),f=$(),O=B.action==="moderate",F=ie(u,"1860647109"),Q=!D(u);return o.jsxs(o.Fragment,{children:[o.jsx(K,{composerController:y,clientThreadId:s,currentModelId:c,isCompletionInProgress:n,expireConduit:Q}),o.jsx("div",{className:"flex justify-center empty:hidden",children:f&&O&&F?o.jsx(X,{}):null}),G?o.jsx(q,{onClose:v}):null,M&&o.jsx(H,{clientThreadId:s,accountUserId:i==null?void 0:i.normalizedAccountUserId}),o.jsx(ue,{clientThreadId:s,disableDraftPersistence:x,onCreateNewCompletion:S,onContinueGenerating:j,currentModelId:c,account:i,currentModelConfig:le(a==null?void 0:a.models,c),areModelsLoading:A,isNewThread:P,isCompletionInProgress:n,className:"w-full",canContinue:W,disabled:!!l,disabledReason:l!=null?l:void 0,canPause:L,isInteractableSharedThread:f||I||b,headerClassName:z,hideHeader:N,onlyAllowImageUploads:k,layoutMode:w,modelsData:a},s)]})}export{fe as P};
//# sourceMappingURL=cdk0cmbgnafohb1q.js.map
