var B=Object.defineProperty,L=Object.defineProperties;var F=Object.getOwnPropertyDescriptors;var N=Object.getOwnPropertySymbols;var U=Object.prototype.hasOwnProperty,O=Object.prototype.propertyIsEnumerable;var S=(t,s,a)=>s in t?B(t,s,{enumerable:!0,configurable:!0,writable:!0,value:a}):t[s]=a,m=(t,s)=>{for(var a in s||(s={}))U.call(s,a)&&S(t,a,s[a]);if(N)for(var a of N(s))O.call(s,a)&&S(t,a,s[a]);return t},D=(t,s)=>L(t,F(s));import{R as I,b as q,f as G,r as c,d as H,j as e,M as C,m as K}from"./jj85rqzpbnvv3emr.js";import{aE as W,f as X,ax as z,C as Q,bw as v,s as V,B as P,e as J,R as Y}from"./lef5ym39glv4981l.js";import{u as Z}from"./mueia064md5nlhd6.js";import{c3 as $,c4 as ee,bg as te,c5 as w,bl as se,a3 as ae}from"./mclphevd122040jw.js";import{u as ne}from"./l041el2tch1t3nkf.js";import"./eyi9jrf1bwm7dn6f.js";const oe="https://help.openai.com/en/articles/11481834",re={USD:4,EUR:4,GBP:4,INR:340,IDR:66e3},xe=({onClose:t})=>{var k;const[h,y]=I.useState(2500),[i,l]=I.useState(!1),{prepareCheckoutSession:g,navigateToCheckout:f}=Z(),n=W(),{initialBillingDetails:b}=ne(n,!0),x=(k=n==null?void 0:n.mustGetSubscriptionBillingCurrency("CreditPurchaseModal"))!=null?k:"USD",_=re[x],o=X(),u=q(),{data:d}=G({queryKey:["creditPurchaseRateCard"],queryFn:()=>Y.safeGet("/subscriptions/credit-purchase-rate-card"),refetchOnWindowFocus:!1,refetchOnReconnect:!1,refetchOnMount:!1}),T=c.useCallback(async()=>{if(!i){l(!0);try{const r=n==null?void 0:n.id;if(!r)throw new Error("No account_id found");const A=await g({credit_purchase_data:{quantity:h,unit:"credit",account_id:r},billing_details:b});await f(A)}catch(r){z.addError(r),o.warning(u.formatMessage(p.paymentErrorWarning),{hasCloseButton:!0})}finally{l(!1)}}},[b,u,i,f,h,g,o,n]),M=$(h,300),E=r=>!d||!d[r].price?"N/A":Math.round(M/parseFloat(d[r].price)).toLocaleString();return e.jsxs(Q,{isOpen:!0,onClose:t,type:"success",size:"custom",noPadding:!0,className:"max-w-xl",showCloseButton:!0,testId:"modal-credit-purchase-modal",children:[e.jsx(v.Header,{title:e.jsx(C,m({},p.title))}),e.jsxs("div",{className:"flex flex-col px-6",children:[e.jsx("div",{className:"text-token-text-secondary text-sm",children:e.jsx(C,D(m({},p.description),{values:{link:r=>e.jsx(V,{href:oe,target:"_blank",children:r})}}))}),e.jsx("div",{className:"mt-6",children:e.jsx(ce,{minCredits:500,maxCredits:1e5,increment:250,centsPerCredit:_,currency:x,numCredits:h,setNumCredits:y})}),d&&e.jsxs(K.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-token-bg-tertiary text-token-text-secondary mt-4 flex w-full gap-2 rounded-lg p-3 text-sm",children:[e.jsx(ee,{}),e.jsx(C,D(m({},p.amountToAddDescription),{values:{deepResearchCount:E("deep_research_completion"),gpt5proChatCount:E("chat_completion_5_pro"),imagegenCount:E("chat_tool_imagegen")}}))]})]}),e.jsx(v.Actions,{className:"sm:p-2 md:p-6",secondaryButton:e.jsx(P,{disabled:i,onClick:t,color:"secondary",children:e.jsx(C,m({},p.cancel))}),primaryButton:e.jsx(P,{loading:i,onClick:()=>T(),color:"primary",children:e.jsx(C,m({},p.next))})})]})};function ce({numCredits:t,minCredits:s,maxCredits:a,increment:R,centsPerCredit:j,currency:h,setNumCredits:y}){const i=c.useRef(null);c.useEffect(()=>{var o;(o=i.current)==null||o.focus()},[i]);const l=c.useRef(null),g=c.useRef(0),f=c.useCallback(o=>{y(u=>te(u+o,s,a))},[a,s,y]),n=c.useCallback(o=>{const M=300-o*50;return M>25?M:25},[]),b=c.useCallback(o=>{f(o),g.current=0;const u=()=>{g.current+=1,f(o);const d=n(g.current);l.current=setTimeout(u,d)};l.current=setTimeout(u,n(g.current))},[f,n]),x=c.useCallback(()=>{l.current&&(clearTimeout(l.current),l.current=null)},[]),_=t*j/100;return e.jsxs("div",{className:"mb-3 flex w-full flex-col",children:[e.jsx("label",{className:"mb-1 flex text-base font-medium",htmlFor:"Credits",children:e.jsx(C,m({},p.amountToAdd))}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("div",{className:"relative w-full",children:[e.jsx("span",{className:"text-token-text-secondary pointer-events-none absolute end-3 top-1/2 -translate-y-1/2 text-sm",children:e.jsx(C,D(m({},p.numCredits),{values:{numCredits:t}}))}),e.jsx("input",{ref:i,name:"Credits",value:_.toLocaleString("en-US",{style:"currency",currency:h,maximumFractionDigits:2}),disabled:!0,autoFocus:!0,tabIndex:0,className:"bg-token-bg-primary text-token-text-primary m-0 h-12 w-full appearance-none rounded-lg border border-gray-200 px-2 py-0 ps-5 text-start text-sm shadow-none ring-transparent outline-hidden focus:border-black focus:ring-black dark:border-gray-700 dark:focus:border-white dark:focus:ring-white"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(w,{disabled:t<=s,onMouseDown:()=>b(-R),onMouseUp:x,onMouseLeave:x,children:e.jsx(se,{className:J("icon",t<=s&&"text-token-text-tertiary")})}),e.jsx(w,{disabled:t>=a,onMouseDown:()=>b(R),onMouseUp:x,onMouseLeave:x,children:e.jsx(ae,{className:"icon"})})]})]})]})}const p=H({title:{id:"components.business.CreditPurchaseModal.title",defaultMessage:"Buy more credits for your team"},description:{id:"components.business.CreditPurchaseModal.description",defaultMessage:"Give your team continued access to advanced features after hitting plan limits. Credits valid for 12 months. <link>View rate card</link>."},amountToAdd:{id:"components.business.CreditPurchaseModal.amountToAdd",defaultMessage:"Amount to add"},amountToAddDescription:{id:"components.business.CreditPurchaseModal.amountToAddDescription",defaultMessage:"Equal to {deepResearchCount} deep research tasks, {gpt5proChatCount} GPT-5 pro messages, or {imagegenCount} imagegen messages."},numCredits:{id:"components.business.CreditPurchaseModal.numCredits",defaultMessage:"{numCredits, plural, one {# credit} other {# credits}}"},paymentErrorWarning:{id:"components.business.CreditPurchaseModal.paymentErrorWarning",defaultMessage:"The payments page encountered an error. Please try again. If the problem continues, please visit help.openai.com."},cancel:{id:"components.business.CreditPurchaseModal.cancel",defaultMessage:"Cancel"},next:{id:"components.business.CreditPurchaseModal.next",defaultMessage:"Next"}});export{xe as CreditPurchaseModal,ce as CreditSelectorButtons};
//# sourceMappingURL=lz9e0y9lvu5e72oe.js.map
