import{r as e,G as _,ag as y,g as R,ad as I,u as M,j as a}from"./jj85rqzpbnvv3emr.js";import{j as N,bH as b,pg as k,ck as z,i as G,k as H,fg as E,fh as P,ff as A,gk as j,ci as F,nK as L,bG as Q,nZ as U,mH as K}from"./lef5ym39glv4981l.js";import{C as Y}from"./du2fkn1o0qxwuukg.js";import{r as $,fM as T,fN as w,fO as B,a as D,d2 as J,fP as W}from"./mclphevd122040jw.js";import"./n82i9qkvs5r9bggc.js";import"./9z485wf4plyfoo73.js";import"./cncd8uuk5eicbkeu.js";import"./dta5t6ifyam55mk9.js";import"./cdk0cmbgnafohb1q.js";import"./gyvvad7btmtz1x9o.js";import"./n6vmm5pyahusdy8e.js";import"./l041el2tch1t3nkf.js";import"./easgat082167v0i8.js";import"./dvqe6kc43fkjsavv.js";import"./mw2u7timj0qnsnvj.js";import"./hnotrmacgvnfyexv.js";import"./e0efgancp8wep37e.js";import"./xx3svpq6qe4q5uu1.js";import"./ng0sx063g0r0whhb.js";import"./fvmxudg74tbhlabl.js";import"./mtg83aqpqaxteb09.js";import"./fr4ckts5oz9jhhs0.js";import"./f3wj76d1ulqyss85.js";function X(n,s){const r=e.useRef(0);return()=>{r.current<s&&(n(),r.current+=1)}}const Et=()=>{$();const n=b();if(!N(n,"491279851"))return y("/")},Pt=_(function(){const s=R(),{gizmoSlug:r}=I(),t=k(r!=null?r:""),{data:c,isError:g,error:o}=z(t,!1),m=M(),u=m.getQueryData([T]),f=m.getQueryState([T]),C=(f==null?void 0:f.fetchStatus)==="fetching",p=e.useMemo(()=>u==null?void 0:u.pages.flatMap(d=>d.items),[u]),x=G(),v=w(),S=B(x)(t,v);e.useEffect(()=>{S.conversations$().preload$()},[S]),e.useEffect(()=>{if(g&&!c)if(o instanceof H&&(o.status===403||o.status===404))s(E(P.PROJECT_NOT_FOUND));else{const d=A(o);s(E(P.CUSTOM_ERROR,void 0,d))}},[g,c,s,o]);const[i,l]=e.useState(()=>j());D(i,{kind:F.GizmoInteraction,gizmo_id:t}),e.useEffect(()=>{l(j())},[t]);const h=X(()=>{W(m)},5);return e.useEffect(()=>{if(!t||!c||C)return;(p==null?void 0:p.some(O=>O.gizmo.gizmo.id===t))||h()},[c,t,p,C,m,h]),a.jsx(L.Provider,{value:Q(x,i),children:a.jsx(U,{children:a.jsx(K,{clientThreadId:i,children:a.jsx(J,{clientThreadId:i,setClientThreadId:l,routeType:"snorlax",children:a.jsx(Y,{clientThreadId:i,setClientThreadId:l})})})})})});export{Et as clientLoader,Pt as default};
//# sourceMappingURL=odi2ycq3s09v5ga7.js.map
