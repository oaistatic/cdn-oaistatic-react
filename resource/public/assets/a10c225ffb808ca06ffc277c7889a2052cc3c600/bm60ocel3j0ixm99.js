var _e=Object.freeze,we=Object.defineProperty,xt=Object.defineProperties;var yt=Object.getOwnPropertyDescriptors;var ve=Object.getOwnPropertySymbols;var pt=Object.prototype.hasOwnProperty,St=Object.prototype.propertyIsEnumerable;var Ne=(l,o,i)=>o in l?we(l,o,{enumerable:!0,configurable:!0,writable:!0,value:i}):l[o]=i,n=(l,o)=>{for(var i in o||(o={}))pt.call(o,i)&&Ne(l,i,o[i]);if(ve)for(var i of ve(o))St.call(o,i)&&Ne(l,i,o[i]);return l},h=(l,o)=>xt(l,yt(o));var Ee=(l,o)=>_e(we(l,"raw",{value:_e(o||l.slice())}));import{r as A,s as $e,R as Tt,g as bt,b as D,j as e,i as Mt,M as g,d as Ct}from"./jj85rqzpbnvv3emr.js";import{fU as ge,fV as fe,fW as U,fX as Q,fY as ie,fZ as ce,d5 as de,f_ as We,d8 as jt,fK as he,f$ as Ve,g0 as me,g1 as Ye,d1 as qe,g2 as Ke,g3 as Xe,g4 as ze,g5 as O,g6 as W,bg as Pt,g7 as _t,g8 as Ge,g9 as ne,ga as C,gb as Ae,gc as J,gd as le,ge as vt,gf as Qe,gg as Ze,gh as Nt,gi as wt,gj as Le,gk as Et}from"./mclphevd122040jw.js";import{i as K,aE as xe,dF as ke,b as Je,f as De,v as At,hc as Lt,dA as kt,P as G,bo as Bt,q as Ft,a9 as Rt,C as Be,aD as It,iK as oe,e as ue,ez as re,B as Fe,y as et,ae as tt,ax as ye,j as Ot,F as Ut}from"./lef5ym39glv4981l.js";import{u as Re}from"./eksfatdee5z30mgz.js";import{S as Ht,F as $t,c as I,L as Wt}from"./cfjmhsr8xf6xwmmf.js";import{u as st}from"./mueia064md5nlhd6.js";import{a as Vt,b as Yt,u as qt}from"./l041el2tch1t3nkf.js";import{S as Kt}from"./gd5k9khi2ma4fx2d.js";const Xt=We(de),zt=({promoData:l,initialPromoCoupon:o,initialSeats:i}={})=>{var v;K();const _=he(),S=jt(),a=(v=ge())!=null?v:o,{data:t}=fe(a!=null?a:"");let c=l;!l&&t&&(c=t);const j=(c==null?void 0:c.coupon)===U&&c.state==="eligible",f=c&&Q(c.coupon)&&c.state==="eligible",m=typeof window<"u"?new URLSearchParams(window==null?void 0:window.location.search):new URLSearchParams,u=m.get(ie),d=m.get(ce),w=j?de.FLEXIBLE:d&&Xt(d)?d:de.FLEXIBLE,[P,b]=A.useState(w),[x,y]=A.useState(i!=null?i:u&&!isNaN(parseInt(u,10))?parseInt(u,10):Math.max(S,_));return{promoData:c,selectedPlan:P,setSelectedPlan:b,numSeats:x,setNumSeats:y,minTeamSeats:_,TEAM1DOLLAR_COUPON_IsEligible:j,TEAM_FREE_TRIAL_COUPON_IsEligible:f}};var at=(l=>(l.FLEXIBLE="month",l.ANNUAL="year",l))(at||{});const Gt={input:"rounded-full!",button:"rounded-full! h-8! w-8! border-none!",buttons:"absolute end-2! gap-0!"},Ie=We(at),rs=l=>{const o=A.useRef(!1),i=$e(),_=i.hash.split("#")[1]===Ve||i.hash.split("#")[1]===me,S=xe(),a=!o.current&&_&&S&&!l,{country:t}=Vt(),c=Yt({country:t,currentAccount:S,location:"team-workspace-purchase-modal"}),j=ge(),{data:f,isLoading:m}=fe(j!=null?j:"");K();const u=he(),d=Tt.useRef(void 0);A.useEffect(()=>{a&&(ke.setPurchaseWorkspaceData({minimumSeats:u,billingDetails:c,promoData:f}),o.current=!0)},[S,c,u,_,l,j,f,a]),A.useEffect(()=>{const w=d.current;d.current=m,!(m||!o.current)&&w&&ke.setPurchaseWorkspaceData({minimumSeats:u,billingDetails:c,promoData:f})},[f,m,u,c])};var He;const Oe=Ut.p(He||(He=Ee(["text-base font-medium mb-3"]))),q=Ct({preDiscountTotal:{id:"teamBilling.nativeCurrency.preDiscountTotal",defaultMessage:"{amount}"},breakdownAmount:{id:"teamBilling.nativeCurrency.breakdownAmount",defaultMessage:"{amount}/seat"},temporaryCardHoldAmount:{id:"promo.teamFreeTrial.temporaryCardHoldAmountWithFormattedCurrency",defaultMessage:"{amount}"},discountAmount:{id:"teamBilling.nativeCurrency.discountAmount",defaultMessage:"{amount}"},totalAmount:{id:"teamBilling.nativeCurrency.totalAmount",defaultMessage:"{currencyCode} {totalAmount}"},afterPromoAmount:{id:"promo.teamFreeTrial.afterPromoAmountWithFormattedCurrency",defaultMessage:"After promotional period {amount} per month"}}),nt=({isOpen:l,onClose:o,onSubmit:i,minimumSeats:_,billingDetails:S,isDirectFlow:a=!1,promoData:t=void 0})=>{const c=xe(),{trackSelectedPixels:j}=Re({key:At.SELF_SERVE_BUSINESS}),{trackSelectedPixels:f}=Re({key:"team-secondary"}),{selectedPlan:m,setSelectedPlan:u,numSeats:d,setNumSeats:w,minTeamSeats:P,TEAM1DOLLAR_COUPON_IsEligible:b,TEAM_FREE_TRIAL_COUPON_IsEligible:x}=zt({promoData:t}),[y,v]=A.useState(!1),s=D(),p=S.currency,T=Math.max(_,P),{flexibleBillingPlan:B,annualBillingPlan:F}=Ke(p);let M=B,L=null;if(b||x){L=(t==null?void 0:t.coupon)===U?Xe(p):ze(p);let r,N;b?(r=n({},p===Lt?O.team1dollarMonthlyCostINR:O.team1dollarMonthlyCost),N=h(n({},O.team1dollarMonthlyStructure),{defaultMessage:"Then ".concat(s.formatMessage(M.currencySign)).concat(M.monthlyCost," seat/mo after 1 month"),id:"promo.team1dollar.monthlyPlanStructure",description:"Subsequent pricing description for team1dollar promo. Describing the monthly then the annual price after."})):(r=n({},W.teamFreeTrialMonthlyCost),N=h(n({},W.teamFreeTrialMonthlyStructure),{defaultMessage:"Then ".concat(s.formatMessage(M.currencySign)).concat(M.monthlyCost," seat/mo after 1 month"),id:"promo.teamFreeTrial.monthlyPlanStructure",description:"Subsequent pricing description for teamFreeTrial promo. Describing the monthly then the annual price after."})),M=h(n({},M),{cost:r,costStructure:N,discountedMonthlyCost:L!=null?L:M.discountedMonthlyCost})}const k=(t==null?void 0:t.coupon)===U,lt=t&&Q(t==null?void 0:t.coupon),X=k||lt,pe=(t==null?void 0:t.state)==="not_eligible"&&X,Se=(t==null?void 0:t.state)==="temporary_disabled"&&X,ot=(t==null?void 0:t.state)==="offline"&&X,H=Pt(isNaN(d)?0:d,T,_t),V=A.useMemo(()=>c==null?void 0:c.subscriptionAnalyticsParams,[c]),E=kt(r=>r.purchaseWorkspaceData);A.useEffect(()=>{var N;const r=(N=E==null?void 0:E.referrer)!=null?N:document.referrer;G.logEvent("Account Pay: Select Team Plan Modal Show",h(n({},V),{referrer:r}))},[V,E==null?void 0:E.referrer]);const ee=r=>{switch(r){case"month":G.logEvent("Account Pay: Team Plan Selection Clicked",h(n({},V),{buttonType:"Continue",numberOfSeats:d,planLength:Le.MONTHLY}));break;case"year":G.logEvent("Account Pay: Select Team Plan Modal Clicked",h(n({},V),{buttonType:"Continue",numberOfSeats:d,planLength:Le.ANNUAL}));break}},rt=(r,N)=>{G.logEventWithStatsig("Account Pay: Select Team Plan Modal Clicked","chatgpt_select_team_plan_modal_continue_to_billing_clicked",h(n({},V),{buttonType:"Continue",numberOfSeats:N,planLength:r})),ye.addAction("chatgpt_funnel.team_plan_modal_checkout_initiated",{planLength:r,numberOfSeats:N.toString(),accountId:c==null?void 0:c.id}),(t==null?void 0:t.state)==="eligible"&&X&&Et.logCouponApplied(t.coupon)},it=()=>{G.logEvent("Account Pay: Select Team Plan Modal Dismiss",V)},R=$e(),z=A.useMemo(()=>R.hash.split("#")[1]===me,[R.hash]);A.useEffect(()=>{var Pe;const r=new URLSearchParams;r.set(ie,H.toString()),r.set(ce,m),r.set("referrer",(Pe=E==null?void 0:E.referrer)!=null?Pe:document.referrer);const N=t!=null&&t.coupon&&t.coupon!==Ge?t.coupon:null;N&&r.set(ne,N);const je=a||z?"#".concat(me):"#".concat(Ve),mt="".concat(R.pathname,"?").concat(r.toString()).concat(je),Z=new URL(window.location.href).searchParams,ut=Z.get(ie)===H.toString(),gt=Z.get(ce)===m,ft=N==null&&!Z.has(ne)||Z.get(ne)===N,ht=window.location.hash===je;(!ut||!gt||!ft||!ht)&&window.history.pushState({from:R.pathname+R.search},"",mt)},[H,a,z,R.pathname,R.search,R.hash,m,t==null?void 0:t.coupon,E==null?void 0:E.referrer]);let Y;pe?Y=k?O.team1dollarNotEligible:W.teamFreeTrialNotEligible:Se?Y=k?O.team1dollarTemporarilyDisabled:W.teamFreeTrialTemporarilyDisabled:Y=k?O.team1dollarOffline:W.teamFreeTrialOffline;const te=pe||Se||ot,se=async()=>{v(!0),rt(m,H),j(),f(),await i(m,H),v(!1)},Te=()=>{o(),it()},be=K(),ct=Bt(),ae=!(a||z)&&Ft(be,"2307162844").get("enabled",!1),Me=!ct&&!(a||z)&&Rt(be,"3469223149").get("enabled_compact_seat_picker",!1),Ce=e.jsx(Ue,{numSeats:H,selectedPlan:m,billingDetails:S,totalLabel:C.allPlansTodayTotal,billDate:e.jsx(g,n({},C.today)),promoData:t}),$=b||x;if(a||z||ae)return e.jsxs(Be,{testId:"modal-workspace-purchase",type:"success",isOpen:l,onClose:o,size:"fullscreen",noPadding:!0,removePopoverStyling:!0,showCloseButton:!0,children:[!Me&&e.jsxs("div",{className:"grid grid-flow-row grid-cols-1 md:h-full md:grid-cols-2",children:[e.jsx("div",{className:"flex-column col-span-1 flex justify-center p-5 md:grid-cols-2",children:e.jsxs("div",{className:"flex w-full max-w-[400px] flex-col items-center md:max-w-[600px]",children:[e.jsx(It,{className:"mt-8 mb-6 h-8 w-8 md:fixed md:start-4 md:top-4 md:mt-0 md:h-6 md:w-6"}),te&&e.jsx("div",{className:"mb-4 w-full","data-testid":"team-promo-banner",children:e.jsx(oe,{content:s.formatMessage(Y),type:"info"})}),e.jsx("div",{className:"mb-8 text-3xl font-medium md:mt-[120px]",children:e.jsx(g,{id:"selectTeamPlanModal.title",defaultMessage:"Pick your plan"})}),e.jsxs(Ae,{className:ue("col-span-3 mb-6 grid w-full gap-4 md:col-span-2 md:grid-cols-2"),defaultValue:m,onValueChange:r=>{Ie(r)&&(u(r),ee(r))},children:[e.jsx(J,h(n({billingType:"year"},F),{selectedValue:m,hideSavingsMessage:$,hideDetails:!ae})),e.jsx(J,h(n({billingType:"month"},M),{selectedValue:m,hideDetails:!ae,hideSavingsMessage:$,showWelcomeOfferLabel:$}))]}),e.jsx(le,{numSeats:d,minSeats:T,setNumSeats:w}),e.jsx("div",{className:"text-token-text-secondary self-start text-xs",children:s.formatMessage({id:"selectTeamPlanModal.seatsDescription",defaultMessage:"Add more seats at any time. Minimum of {minSeats} seats."},{minSeats:P})})]})}),e.jsx("div",{className:"col-span-3 flex h-full flex-col items-center overflow-hidden p-6 md:col-span-1 md:shadow-lg",children:e.jsxs("div",{className:"flex w-full max-w-[400px] flex-col md:mt-[120px]",children:[e.jsx(Oe,{className:"mb-8 text-xl font-medium",children:e.jsx(g,n({},C.summaryTitle))}),Ce,e.jsx(re,{title:s.formatMessage(C.continueToBillingButton),onClick:se,loading:y,color:"green",className:"mt-8 w-full rounded-xl"}),e.jsx(re,{title:s.formatMessage(C.cancel),onClick:Te,color:"ghost",className:"mt-4 w-full rounded-xl"})]})})]}),Me&&e.jsx(Ht,{headerPaddingClassName:"pt-10 [@media(min-width:450px)]:pt-0",content:e.jsxs($t,{title:s.formatMessage(I.purchaseStepTitle),subTitle:s.formatMessage(I.purchaseStepSubtitle),children:[te&&e.jsx("div",{"data-testid":"team-promo-banner",children:e.jsx(oe,{content:s.formatMessage(Y),type:"info"})}),e.jsxs("div",{className:"flex flex-col gap-6",children:[e.jsx(le,{numSeats:d,minSeats:T,setNumSeats:w,classNames:Gt,label:e.jsx(g,n({},I.seatsCountLabel))}),e.jsxs("div",{className:"flex flex-col gap-1.5",children:[e.jsx(Wt,{required:!0,children:s.formatMessage(I.planSummaryTitle)}),e.jsxs("div",{className:"border-token-border-default flex flex-col gap-6 rounded-3xl border p-5",children:[e.jsx(Kt,{ariaLabel:s.formatMessage(I.planTypeLabel),leftItem:{label:e.jsxs("div",{className:"flex flex-wrap justify-center gap-1 text-center",children:[s.formatMessage(C.annualPlanName),!$&&e.jsx("span",{className:"text-blue-400",children:s.formatMessage(C.annualPlanSavingsLabel,{percent:vt(F.monthlyCost,F.discountedMonthlyCost)})})]}),value:"year"},rightItem:{label:s.formatMessage(I.monthlyPlanLabel),value:"month"},value:m,onChange:r=>{u(r),ee(r)}}),e.jsx(Ue,{numSeats:H,selectedPlan:m,billingDetails:S,totalLabel:I.allPlansTodayTotal,billDate:s.formatMessage(I.today),promoData:t,nonZeroDiscountClassName:"text-blue-400"})]})]})]}),e.jsxs("div",{className:"flex flex-col gap-3 pb-10 [@media(min-width:450px)]:pb-0",children:[e.jsx(Fe,{size:"large",loading:y,onClick:se,children:s.formatMessage(C.continueToBillingButton)}),e.jsx(Fe,{color:"ghost",size:"large",className:"w-full",onClick:Te,disabled:y,children:s.formatMessage(C.cancel)})]})]})})]});const dt=k?Qe:Ze;return e.jsxs(Be,{testId:"modal-select-team-plan",type:"success",isOpen:l,onClose:o,size:"custom",noPadding:!0,removePopoverStyling:!0,className:"max-w-4xl",showCloseButton:!0,hasSeparator:!0,title:s.formatMessage(C.selectTeamPlanModalTitle),children:[te&&e.jsx("div",{className:"px-5 pt-4","data-testid":"team-promo-banner",children:e.jsx(oe,{content:s.formatMessage(Y),type:"info"})}),e.jsxs("div",{className:"grid grid-flow-row grid-cols-3",children:[e.jsxs("div",{className:"flex-column col-span-3 p-5 md:col-span-2 md:grid-cols-2",children:[e.jsx(le,{numSeats:d,minSeats:T,setNumSeats:w}),X&&(t==null?void 0:t.state)==="eligible"&&m==="month"&&d>dt&&e.jsx("div",{className:"text-token-text-secondary mt-1 self-start text-xs","data-testid":"team-promo-overseats-disclaimer",children:e.jsx(g,n({},k?O.team1dollarOverSeatsDisclaimer:W.teamFreeTrialOverSeatsDisclaimer))}),e.jsxs(Ae,{className:ue("col-span-3 mt-5 grid gap-4 md:col-span-2 md:grid-cols-2"),defaultValue:m,onValueChange:r=>{Ie(r)&&(u(r),ee(r))},children:[e.jsx(J,h(n({billingType:"year"},F),{selectedValue:m,hideSavingsMessage:$})),e.jsx(J,h(n({billingType:"month"},M),{selectedValue:m,hideSavingsMessage:$,showWelcomeOfferLabel:$}))]})]}),e.jsxs("div",{className:"border-token-main-surface-tertiary bg-token-bg-elevated-secondary col-span-3 flex h-full flex-col overflow-hidden border-s p-6 md:col-span-1",children:[e.jsx(Oe,{children:e.jsx(g,n({},C.summaryTitle))}),Ce,e.jsx(re,{title:s.formatMessage(C.continueToBillingButton),onClick:se,loading:y,color:"primary",className:"mt-8 w-full rounded-xl"})]})]})]})},Ue=({numSeats:l,selectedPlan:o,billingDetails:i,totalLabel:_,billDate:S,promoData:a,extraDiscountAmount:t,nonZeroDiscountClassName:c="text-[#10A37F]",footerNote:j})=>{const f=D(),m=K(),u=Ot(m,"3856970506"),d=A.useCallback(L=>f.formatNumber(L,{style:"currency",currency:i.currency,currencyDisplay:"narrowSymbol",trailingZeroDisplay:"stripIfInteger"}),[i.currency,f]),{flexibleBillingPlan:w,annualBillingPlan:P}=Ke(i.currency),b=w,x=o==="month"?b:P,y=Nt[o],v=(l||0)*(o==="year"?P.monthlyCost*12:b.monthlyCost);let s=(l||0)*x.unitCost,p=v-s,T=0,B=v,F=!1;if(a!=null&&(a.coupon===U||Q(a.coupon))&&a.state==="eligible"&&o==="month"){F=!0;const L=(a==null?void 0:a.coupon)===U?Xe(i.currency):ze(i.currency),k=(a==null?void 0:a.coupon)===U?Qe:Ze;l<=k?(T=L,B=l*b.monthlyCost,p=B-T,s=T):(T=L+(l-k)*b.monthlyCost,B=l*b.monthlyCost,p=B-T,s=T)}t&&t>0&&(p+=t,s=Math.max(s-t,0));let M;return a!=null&&Q(a.coupon)&&a.coupon!==Ge&&a.state==="eligible"&&o==="month"&&(M={title:{id:"promo.teamFreeTrial.temporaryCardHold",defaultMessage:"Temporary card hold",description:"Label for the temporary card hold line item in the billing summary"},description:{id:"promo.teamFreeTrial.temporaryCardHoldDescription",defaultMessage:"Used to verify payment â€” we'll refund it",description:"Description for the temporary card hold line item in the billing summary"},amount:1},s+=1),e.jsxs("div",{className:"flex grow flex-col text-sm",children:[e.jsxs("div",{className:"text-token-text-secondary flex w-full justify-between text-sm",children:[e.jsx("div",{className:"flex",children:e.jsx(g,n({},y.name))}),e.jsx("div",{className:"flex",children:u?e.jsx(g,h(n({},q.preDiscountTotal),{values:{amount:d(v)}})):e.jsx(g,h(n({},C.allPlansPreDiscountTotal),{values:{currencySign:f.formatMessage(x.currencySign),preDiscountTotalAmount:v.toLocaleString()}}))})]}),e.jsxs("div",{className:"text-token-text-tertiary flex w-full justify-between text-xs",children:[e.jsx("div",{className:"flex",children:e.jsx(g,h(n({},y.breakdown),{values:{numSeats:l}}))}),e.jsx("div",{className:"flex",children:u?e.jsx(g,h(n({},q.breakdownAmount),{values:{amount:d(x.monthlyCost)}})):e.jsx(g,h(n({},C.breakdownAmount),{values:{currencySign:f.formatMessage(x.currencySign),amount:x.monthlyCost}}))})]}),M&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"text-token-text-secondary mt-3 flex w-full justify-between text-sm",children:[e.jsx("div",{className:"flex",children:e.jsx(g,n({},M.title))}),e.jsx("div",{className:"flex",children:u?e.jsx(g,h(n({},q.temporaryCardHoldAmount),{values:{amount:d(M.amount)}})):e.jsx(g,{id:"promo.teamFreeTrial.temporaryCardHoldAmount",defaultMessage:"{currencySign}{amount}",description:"Amount for the temporary card hold line item (e.g., $1). Keep the currency sign and numeric amount placeholders; translators may reorder them per locale.",values:{currencySign:f.formatMessage(x.currencySign),amount:M.amount.toLocaleString()}})})]}),M.description&&e.jsx("div",{className:"text-token-text-tertiary text-xs",children:e.jsx(g,n({},M.description))})]}),e.jsxs("div",{className:"text-token-text-secondary mt-3 flex w-full justify-between text-sm",children:[e.jsx("div",{className:"flex",children:e.jsx(g,n({},C.planDiscountLabel))}),e.jsx("div",{className:ue("flex",p>0&&"font-medium",p>0&&c),children:u?e.jsx(g,h(n({},q.discountAmount),{values:{amount:d(-p)}})):e.jsx(g,h(n({},y.discountAmount),{values:{currencySign:f.formatMessage(b.currencySign),discountAmount:p.toLocaleString()}}))})]}),a!=null&&(a.coupon===U||Q(a.coupon))&&a.state==="eligible"&&o==="month"&&e.jsx("div",{className:"text-token-text-tertiary text-xs",children:e.jsx(g,n({},(a==null?void 0:a.coupon)===U?O.team1dollarBelowDiscount:W.teamFreeTrialBelowDiscount))}),y.discountDescription&&P.discountedMonthlyCost<P.monthlyCost&&o==="year"&&e.jsx("div",{className:"text-token-text-tertiary text-xs",children:e.jsx(g,h(n({},y.discountDescription),{values:{discountPercentage:wt(P.monthlyCost,P.discountedMonthlyCost)}}))}),e.jsx("hr",{className:"border-token-border-default my-3"}),e.jsxs("div",{className:"flex w-full justify-between text-base font-medium",children:[e.jsx("div",{className:"flex",children:e.jsx(g,n({},_))}),e.jsx("div",{className:"flex",children:F?u?e.jsxs(e.Fragment,{children:[f.formatMessage(x.currencyCode)," ",d(s)]}):e.jsxs(e.Fragment,{children:[f.formatMessage(x.currencyCode)," ",f.formatMessage(x.currencySign),s.toLocaleString()]}):u?e.jsx(g,h(n({},q.totalAmount),{values:{currencyCode:f.formatMessage(x.currencyCode),totalAmount:d(s)}})):e.jsx(g,h(n({},y.total),{values:{currencyCode:f.formatMessage(x.currencyCode),currencySign:f.formatMessage(x.currencySign),totalAmount:s.toLocaleString()}}))})]}),e.jsxs("div",{className:"text-token-text-tertiary mt-2 text-xs",children:[F?u?e.jsx(g,h(n({},q.afterPromoAmount),{values:{amount:d(B)}})):e.jsx(g,{id:"ngnBJG",defaultMessage:"After promotional period {currencySign}{amount} per month",values:{currencySign:f.formatMessage(b.currencySign),amount:B.toLocaleString()}}):e.jsx(g,h(n({},y.billed),{values:{billDate:S}})),j&&e.jsx("div",{className:"mt-1",children:j})]})]})};function is(){const l=xe(),o=bt(),{prepareCheckoutSession:i,navigateToCheckout:_}=st(),S=K(),a=he(),{initialBillingDetails:t}=qt(l,!0),c=D(),j=Je(),f=Ye(c,void 0,j),m=De(),u=ge(),{data:d}=fe(u!=null?u:""),{eligible:w,campaignId:P}=qe(),b=!u&&w,x=d!=null?d:b?{coupon:P,state:"eligible",redemption:null}:void 0,y=async(s,p)=>{if(!et(S)){tt(S,{fallbackScreenHint:"login",callbackUrl:window.location.href});return}try{const T=await i({plan_name:"chatgptteamplan",team_plan_data:{workspace_name:f,price_interval:s,seat_quantity:p},billing_details:t,promo_campaign:s==="month"?x==null?void 0:x.coupon:null,checkout_ui_mode:"custom"});await _(T)}catch(T){ye.addError(T),m.warning(c.formatMessage(C.paymentErrorWarning),{hasCloseButton:!0})}},v=()=>{o("/")};return e.jsx(nt,{isOpen:!0,onClose:v,onSubmit:(s,p)=>y(s,p),isDirectFlow:!0,minimumSeats:a,billingDetails:t,promoData:x})}const cs=({isOpen:l,onClose:o,minimumSeats:i,billingDetails:_,existingAccount:S=void 0,promoData:a=void 0})=>{const t=D(),c=De(),j=Je(),{prepareCheckoutSession:f,navigateToCheckout:m}=st(),u=K(),[d]=Mt(),w=d.get("from_webview")==="ios",P=Ye(t,S,j),{eligible:b,campaignId:x}=qe(),y=a!=null?a:b?{coupon:x,state:"eligible",redemption:null}:void 0,v=async(s,p)=>{if(!et(u)){tt(u,{fallbackScreenHint:"login",callbackUrl:window.location.href});return}try{const T=await f({plan_name:"chatgptteamplan",team_plan_data:{workspace_name:P,price_interval:s,seat_quantity:p,existing_workspace_id:S==null?void 0:S.id},billing_details:_,cancel_url:window.location.href,promo_campaign:s==="month"?y==null?void 0:y.coupon:null},{fromiOSWebview:w});await m(T)}catch(T){ye.addError(T),c.warning(t.formatMessage(C.paymentErrorWarning),{hasCloseButton:!0})}};return e.jsx(nt,{isOpen:l,onClose:o,onSubmit:(s,p)=>v(s,p),minimumSeats:i,billingDetails:_,promoData:y})};export{Ue as B,is as T,rs as a,cs as b,zt as u};
//# sourceMappingURL=bm60ocel3j0ixm99.js.map
