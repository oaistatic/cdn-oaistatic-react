var J=Object.defineProperty;var U=Object.getOwnPropertySymbols;var Q=Object.prototype.hasOwnProperty,$=Object.prototype.propertyIsEnumerable;var I=(a,s,n)=>s in a?J(a,s,{enumerable:!0,configurable:!0,writable:!0,value:n}):a[s]=n,j=(a,s)=>{for(var n in s||(s={}))Q.call(s,n)&&I(a,n,s[n]);if(U)for(var n of U(s))$.call(s,n)&&I(a,n,s[n]);return a};import{b as N,r as Z,j as e,d as ee,M}from"./jj85rqzpbnvv3emr.js";import{i as B,bG as se,fW as ae,a9 as z,cj as ne,O as te,cY as oe,Y as ie,ib as re,fX as ce,c1 as le,g5 as ue,y as p,B as x,dF as G,T as P,am as de,ab as ge,ac as he,nW as me,e as S,ae as k,P as y,mh as pe,a6 as xe,nX as Se,bI as F}from"./lef5ym39glv4981l.js";import{k as fe,l as be,m as ve,o as Ce,p as je,q as Me,t as ke,w as T,N as O,x as ye,y as Ne,O as Be,G as Pe,H as Oe,P as H,z as _e,A as we,B as Le,D as Ee,E as Ae,F as Ue,I as Ie,J as Fe}from"./mclphevd122040jw.js";import{P as Te}from"./dvqe6kc43fkjsavv.js";function Ye({showShareButton:a,showProfileDropdown:s,showConversationPrivacyIndicator:n,clientThreadId:o}){const i=B(),h=se(i,o),c=ae(o),u=N(),f=z(i,"1547743984"),[b,r,v,d,m,g,l]=ne(o,t=>[F.hasUserMessage(t),F.getGizmoId(t),Fe(t),t==null?void 0:t.title,t==null?void 0:t.is_do_not_remember,t==null?void 0:t.isStarred,t==null?void 0:t.continuingFromSharedProjectConversationId]),_=te(()=>{var t;return(t=fe(h))==null?void 0:t.value}),D=Z.useMemo(()=>be({clientThreadId:o,gizmoId:r,conversationTitle:d,conversationAsyncStatus:_,isDoNotRemember:m,isStarred:g}),[o,r,d,_,m,g]),R=oe(o),{prefetchSearchPromises:W}=ve(),q=W!=null,w=ie(re),K=f.get("show_share_button_text",!1)&&!w,L=u.formatMessage({id:"GizmoInformation.shareChat",defaultMessage:"Share"}),V=ce(r),C=le();ue();const E=!p(i),{shouldShowProjectsChatShareModal:X,openProjectsChatShareModal:Y}=Ce({clientThreadId:o}),A=()=>X?Y():G.openSharingModal(c);return e.jsxs(e.Fragment,{children:[p(i)?e.jsx(je,{}):null,p(i)&&(C==null?void 0:C.includes("caterpillar"))&&e.jsx(Me,{}),null,r&&V&&e.jsx(ke,{gizmoId:r,serverThreadId:c!=null?c:l}),a&&(c||l)&&e.jsx(e.Fragment,{children:K?e.jsx(x,{onClick:A,icon:T,label:L,"data-testid":"share-chat-button",color:"ghost",className:"text-token-text-primary mx-2",style:{viewTransitionName:"var(--vt_share_chat_wide_button)"},children:L}):e.jsx(P,{label:u.formatMessage({id:"CPEfES",defaultMessage:"Share chat"}),children:e.jsx(O,{"data-testid":"share-chat-button",onClick:A,icon:T,style:{viewTransitionName:"var(--vt_share_chat_compact_button)"}})})}),e.jsxs("div",{className:"flex items-center",children:[!E&&!r&&R&&!q&&!b&&!w&&e.jsx(e.Fragment,{children:e.jsx(ye,{clientThreadId:o})}),n&&e.jsx("div",{className:"me-2",children:e.jsx(Ne,{clientThreadId:o,gizmoId:r})}),e.jsx(Be,{}),c!=null&&!E&&e.jsx(Pe,{conversation:D,inMainScreen:!0,isActiveConversation:!0,inChatWindow:!0,children:e.jsx(Oe,{"aria-label":u.formatMessage({id:"9Mk/E3",defaultMessage:"Open conversation options"}),"data-testid":"conversation-options-button"})}),s&&e.jsx(He,{clientThreadId:o})]})]})}const He=({clientThreadId:a})=>{const s=B(),n=de();return H.markStart("LoginOrProfileMenu"),H.markRendered("LoginOrProfileMenu"),e.jsxs(e.Fragment,{children:[!n&&!p(s)&&e.jsx(De,{}),!n&&e.jsx(Te,{clientThreadId:a})]})};function ze({onClick:a,className:s,testId:n}){const i=N().formatMessage({id:"OFyxqj",defaultMessage:"New chat"});return e.jsx(P,{label:i,className:S("flex",s),children:e.jsx(O,{onClick:h=>Ie(h,a),icon:Ue,"aria-label":i,"data-testid":n,as:"link"})})}function Je({clientThreadId:a,hideNewChat:s=!1}){const n=Ae({clientThreadId:a,location:"Navigation actions"});return Se()?e.jsxs("div",{className:"flex items-center",children:[e.jsx(Ge,{}),!s&&e.jsx(ze,{onClick:n})]}):null}function Ge(){const a=N(),s=pe(),{isUnauthenticated:n}=xe(),o=we(Ee,Le,!1,!0);return n||s?null:e.jsx(P,{label:a.formatMessage({id:"cElEQV",defaultMessage:"Open sidebar"}),className:"flex",children:e.jsx(O,{"aria-label":a.formatMessage({id:"pV/Etp",defaultMessage:"Open sidebar"}),onClick:()=>{G.setSidebarOpen(!0)},icon:o})})}function De(){const a=B(),s=ge(),n=_e(),o=he(Re.signUpCta),i=me(),c=z(a,"3637408529").get("is_desktop_primary_auth_button_on_right",!1),u="Chat header",f=()=>{k(a,{fallbackScreenHint:"login",callback:l=>{y.logLogInButtonClicked({location:u,provider:l})}})},b=()=>{k(a,{fallbackScreenHint:"signup",callback:l=>{y.logSignUpButtonClicked({location:u,provider:l})}})},r=()=>{k(a,{fallbackScreenHint:"login_or_signup",callback:l=>{y.logLoginOrSignUpButtonClicked({location:u,provider:l})}})},v=e.jsx(x,{onClick:f,color:s?"primary":"secondary","data-testid":"login-button",className:S(!s&&"screen-arch:hidden md:screen-arch:flex"),children:e.jsx(M,{id:"B1SN7b",defaultMessage:"Log in"})},"login"),d=e.jsx(x,{color:s?"secondary":"primary",onClick:b,"data-testid":"signup-button",className:S(s&&"screen-arch:hidden md:screen-arch:flex"),children:e.jsx(M,j({},o))},"signup"),m=e.jsx(x,{color:"primary",onClick:r,"data-testid":"login-or-signup-button",className:S(s&&"screen-arch:hidden md:screen-arch:flex"),children:e.jsx(M,j({},i))},"signup"),g=n?[m]:s?[v,d]:[d,v];return e.jsx("div",{className:"flex items-center justify-center gap-2",children:c?g.reverse():g})}const Re=ee({signUpCta:{id:"P6cySK",defaultMessage:"Sign up"}});export{Ye as C,Ge as E,He as L,Je as N,De as a,ze as b};
//# sourceMappingURL=mw2u7timj0qnsnvj.js.map
