import{j as e,b as ne,r as M,M as a,L as Ne,c as Pe,x as Me,G as _e}from"./jj85rqzpbnvv3emr.js";import{n as oe,iK as le,lC as Ae,i as re,j as de,fv as ce,B as Ce,i6 as ke,aE as Se,I as Te,e as v,T as L,qZ as Ie,E as Ee,oM as Be}from"./lef5ym39glv4981l.js";import{W as Ue,u as qe}from"./i5w9a1ap4yrxpqjj.js";import{u as V}from"./hxd0yong6zdu9u3r.js";import{at as j,dv as me,c3 as Le,as as q}from"./mclphevd122040jw.js";import{C as ue,D as Oe,E as D,u as De}from"./ef92qx749w9klz4o.js";import{T as m}from"./i5991cad8s41d2db.js";import{S as Ve}from"./e9aznsjtqjftc764.js";import{I as We}from"./l45tzjfw41ny1oxj.js";import{u as Fe,o as Ge}from"./cyjxa1lf8mf7jt69.js";import{u as He}from"./l0qst8b5ko1unmi5.js";import"./hqbuxjfjvu1puiaw.js";import"./jxokrjy8ycftw0wv.js";import"./jk4cx3iywxazx01l.js";import"./hc8beflnn681x6ow.js";import"./mw2u7timj0qnsnvj.js";import"./dvqe6kc43fkjsavv.js";import"./nk7ydxm8ptxusvbt.js";import"./k059n59kmbyb9lsl.js";import"./ojb4d4bxj44fs0l8.js";import"./oz589d7sqtxcbljf.js";import"./kxedrjbxv2qblujd.js";function $e({value:i,options:t,disabled:s,onChange:o}){const l=t.find(r=>r.value===i);return e.jsxs(j.Root,{value:i,onValueChange:r=>o(r),disabled:s,children:[e.jsxs(j.Trigger,{className:"w-full max-w-[260px] min-w-[120px] justify-between sm:max-w-[300px]",children:[e.jsx("div",{className:"truncate text-sm font-normal",children:l==null?void 0:l.title}),e.jsx(j.Icon,{})]}),e.jsx(j.Portal,{children:e.jsx(j.Content,{className:"max-w-[340px] min-w-[220px]","data-unbound-width":"",children:t.map(r=>e.jsx(j.Item,{value:r.value,className:"items-start",children:e.jsxs("div",{className:"flex min-w-[220px] flex-col gap-1",children:[e.jsx("span",{className:"text-sm font-normal",children:r.title}),e.jsx("span",{className:"text-token-text-tertiary text-xs whitespace-normal",children:r.description})]})},r.value))})})]})}function Qe({isSaving:i,initialScope:t,onChange:s,showNewReviewSettings:o=!1}){const l=ne(),r=V(),[p,w]=M.useState(t),d=[{value:"never",title:l.formatMessage({id:"wham.codeReviewPage.autoReview.optionOff",defaultMessage:"Off"}),description:l.formatMessage({id:"wham.codeReviewPage.autoReview.optionOff.description",defaultMessage:"Across all repos"})},{value:"always",title:l.formatMessage({id:"wham.codeReviewPage.autoReview.optionAll",defaultMessage:"Across all repos"}),description:l.formatMessage({id:"wham.codeReviewPage.autoReview.optionAll.description",defaultMessage:"Run code reviews on my PRs in every repo"})},{value:"repo_default",title:r?l.formatMessage({id:"wham.codeReviewPage.autoReview.optionTeam",defaultMessage:"Only in team-enabled repos"}):l.formatMessage({id:"wham.codeReviewPage.autoReview.optionPersonal",defaultMessage:"Only in specific repos"}),description:r?l.formatMessage({id:"wham.codeReviewPage.autoReview.optionTeam.description",defaultMessage:"Run only in repos where my team has enabled them"}):l.formatMessage({id:"wham.codeReviewPage.autoReview.optionPersonal.description",defaultMessage:"Run only in selected repos"})}],h=o?e.jsx(a,{id:"wham.codeReviewPage.autoReviewMyPRs.titleV2",defaultMessage:"Personal preferences"}):e.jsx(a,{id:"wham.codeReviewPage.autoReviewMyPRs",defaultMessage:"Review my pull requests automatically"}),x=o?e.jsx(a,{id:"wham.codeReviewPage.autoReviewMyPRs.descriptionV2",defaultMessage:"Review all my pull requests."}):e.jsx(a,{id:"wham.codeReviewPage.autoReviewMyPRs.description",defaultMessage:"Codex automatically suggests improvements (or reacts with üëç)"});return e.jsx("section",{className:"flex flex-col gap-2",children:e.jsxs("div",{className:"flex w-full flex-wrap items-start justify-between gap-4 sm:flex-nowrap",children:[e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx("p",{className:"text-sm font-medium",children:h}),e.jsx("p",{className:"text-token-text-secondary text-xs",children:x})]}),e.jsx("div",{className:"flex h-full items-center pe-2 sm:w-auto",children:o?e.jsx(oe,{"aria-label":l.formatMessage({id:"wham.codeReviewPage.personalPreferences.toggleRepoCodeReviewAria",defaultMessage:"Toggle code review for personal preferences"}),checked:p==="always",onCheckedChange:g=>{const c=g?"always":"repo_default";w(c),s(c)}}):e.jsx($e,{value:p,options:d,disabled:i,onChange:g=>{w(g),s(g)}})})]})})}function Ye(){return e.jsx(le,{type:"info",className:"bg-token-bg-tertiary! rounded-2xl!",icon:e.jsx(me,{className:"icon-md text-token-text-tertiary"}),isElevated:!1,content:e.jsx("p",{className:"text-token-text-secondary text-sm leading-tight font-normal",children:e.jsx(a,{id:"wham.codeReviewPage.infoBanner.title",defaultMessage:"Mention @<b>codex</b> in your pull request to ask questions or start a task.",values:{b:i=>e.jsx("span",{className:"font-medium",children:i})}})})})}function ze(){return e.jsxs("section",{className:"flex flex-col gap-4",children:[e.jsx("div",{className:"flex w-full flex-wrap items-start justify-between gap-4 sm:flex-nowrap",children:e.jsx("div",{className:"flex w-full flex-col gap-2",children:e.jsx(le,{type:"info",className:"bg-token-bg-tertiary! rounded-2xl!",icon:e.jsx(me,{className:"icon-md text-token-text-tertiary"}),isElevated:!1,content:e.jsx("p",{className:"text-token-text-secondary text-sm leading-tight font-normal",children:e.jsx(a,{id:"wham.codeReviewPage.infoBannerV2.bannertext",defaultMessage:"When code review is turned on, Codex automatically suggests improvements to the pull request, or react with üëç.{br}Mention @<b>codex</b> in your pull request to start a task or manually request a review.",values:{br:e.jsx("br",{}),b:i=>e.jsx("span",{className:"font-medium",children:i})}})})})})}),e.jsx("div",{className:"bg-token-border-default h-px"})]})}function Ke(i,t){const s=Ae("installations/select_target");if(i.length>1)return s;const o=i[0];return t?o.account_type==="user"?"https://github.com/settings/installations/".concat(o.id,"/permissions/update"):"https://github.com/organizations/".concat(o.account_login,"/settings/installations/").concat(o.id,"/permissions/update"):"https://github.com/settings/installations/".concat(o.id)}function Ze(){const i=re(),t=de(i,"2782825951"),{data:s}=ue(),o=M.useMemo(()=>{var r;return(r=s==null?void 0:s.installations_without_events)!=null?r:[]},[s]);if(o.length===0)return null;const l=Ke(o,t);return e.jsx("div",{className:"pt-2",children:e.jsxs("div",{className:"bg-token-bg-status-warning outline-token-border-status-warning flex items-start justify-start gap-3 self-stretch rounded-2xl p-4 outline outline-offset-[-1px]",children:[e.jsx("div",{className:"text-token-text-status-warning relative h-5 w-5",children:e.jsx(ce,{className:"icon-md"})}),e.jsxs("div",{className:"inline-flex flex-1 flex-col items-start justify-start gap-1",children:[e.jsx("div",{className:"text-token-text-status-warning text-sm leading-tight font-medium",children:e.jsx(a,{id:"wham.codeReviewPage.permissionsBanner.title",defaultMessage:"Action required"})}),e.jsx("div",{className:"justify-start self-stretch",children:e.jsx("p",{className:"text-token-text-status-warning text-sm leading-tight font-normal",children:o.length>1?e.jsx(a,{id:"wham.codeReviewPage.permissionsBanner.description.multiple",defaultMessage:"Some repos require updated GitHub permissions for code reviews to work"}):e.jsx(a,{id:"wham.codeReviewPage.permissionsBanner.description.single",defaultMessage:"Update your GitHub permissions to enable code reviews for <u>{installationName}</u>",values:{u:r=>e.jsx("span",{className:"underline",children:r}),installationName:o[0].account_login}})})})]}),e.jsx("div",{className:"inline-flex flex-col items-start justify-center gap-2 self-stretch",children:e.jsx(Ce,{color:"secondary",icon:ke,onClick:()=>{window.open(l,"_blank")},children:e.jsx("div",{className:"text-token-interactive-label-secondary-default justify-start text-sm leading-tight",children:e.jsx(a,{id:"wham.codeReviewPage.permissionsBanner.updateButton",defaultMessage:"Update"})})})})]})})}const Je=["everyone","team","default"];function Xe(i){return Je.includes(i)}const et={everyone:{globalReviewPreference:"review_everyone",reviewPreference:"team"},team:{globalReviewPreference:"review_if_enabled",reviewPreference:"team"},default:{globalReviewPreference:"review_if_enabled",reviewPreference:"never"}};function xe(i){return i.global_review_preference==="review_everyone"?"everyone":i.review_preference==="team"?"team":"default"}function tt(i,t){const s=xe(i);return t==="all"?!0:s===t}function st(i){"use forget";const t=Pe.c(19),{columnClassName:s,lastUpdatedBy:o,lastUpdatedRelativeTime:l,tooltipLabel:r}=i;let p;t[0]!==s?(p=v(s,"min-w-0"),t[0]=s,t[1]=p):p=t[1];const w=!l;let d;t[2]!==w?(d=v("min-w-0 truncate text-start",{"col-span-2":w}),t[2]=w,t[3]=d):d=t[3];let h;t[4]!==o||t[5]!==d?(h=e.jsx("span",{className:d,children:o}),t[4]=o,t[5]=d,t[6]=h):h=t[6];let x;t[7]!==l?(x=l?e.jsx("span",{className:"text-token-text-tertiary min-w-0 truncate text-end sm:min-w-[6rem]",children:l}):null,t[7]=l,t[8]=x):x=t[8];let g;t[9]!==h||t[10]!==x?(g=e.jsxs("div",{className:"hidden w-full min-w-0 items-center justify-between text-xs sm:text-sm md:flex",children:[h,x]}),t[9]=h,t[10]=x,t[11]=g):g=t[11];let c;t[12]===Symbol.for("react.memo_cache_sentinel")?(c=e.jsx(ce,{className:"icon-sm text-token-text-secondary shrink-0"}),t[12]=c):c=t[12];let _;t[13]!==r?(_=e.jsx(L,{className:"flex w-full justify-end md:hidden",label:r,labelTextAlign:"left",labelClassName:"text-xs",align:"start",children:c}),t[13]=r,t[14]=_):_=t[14];let y;return t[15]!==p||t[16]!==g||t[17]!==_?(y=e.jsxs(m.Cell,{textAlign:"left",className:p,children:[g,_]}),t[15]=p,t[16]=g,t[17]=_,t[18]=y):y=t[18],y}function at({disabledInstallations:i=[],showNewReviewSettings:t}){const s=ne(),[o,l]=M.useState(""),p=Le(o,300).trim(),w=p.length>0,[d,h]=M.useState("all"),[x,g]=M.useState("all"),c=V(),_=Se(),{data:y,isLoading:W,isFetching:fe,fetchNextPage:pe,hasNextPage:F,isFetchingNextPage:G}=Oe(p),{mutate:H}=Fe(),O=M.useMemo(()=>{var n;return((n=y==null?void 0:y.pages)!=null?n:[]).flatMap(f=>{var R;return(R=f.repo_review_settings)!=null?R:[]}).filter(f=>!!f)},[y]),T=M.useMemo(()=>[...O].sort((n,f)=>{var B,k,C,A;const R=(k=(B=n.repository)==null?void 0:B.repository_full_name)!=null?k:"",I=(A=(C=f.repository)==null?void 0:C.repository_full_name)!=null?A:"";return R.localeCompare(I,void 0,{sensitivity:"base"})}),[O]),$=M.useMemo(()=>{let n=T;return t?x!=="all"&&(n=T.filter(f=>tt(f,x))):n=d==="enabled"?T.filter(f=>f.review_preference==="team"):T,w?n.slice(0,D):n},[T,d,x,t,w]),ge=w&&O.length>=D,we=!w&&!W&&(!!F||!!G),he=new Date,b=["w-[50%] sm:w-[40%]","w-[30%] sm:w-[35%]","w-[20%] sm:w-[25%] lg:w-[30%]"],Q=[{value:"everyone",title:s.formatMessage({id:"wham.codeReviewPage.teamAutomations.option.always.title",defaultMessage:"Review all PRs"}),individual_title:void 0,description:s.formatMessage({id:"wham.codeReviewPage.teamAutomations.option.always.description",defaultMessage:"Run auto code reviews on every pull request, even from contributors outside this workspace"}),individual_description:s.formatMessage({id:"wham.codeReviewPage.teamAutomations.option.always.individual_description",defaultMessage:"Run on every pull request, even from other contributors"})},{value:"team",title:s.formatMessage({id:"wham.codeReviewPage.teamAutomations.option.team.title",defaultMessage:"Review team PRs"}),individual_title:s.formatMessage({id:"wham.codeReviewPage.teamAutomations.option.always.individual_title",defaultMessage:"Review my PRs"}),description:s.formatMessage({id:"wham.codeReviewPage.teamAutomations.option.team.description",defaultMessage:"Only run on pull requests opened by members of this workspace"}),individual_description:s.formatMessage({id:"wham.codeReviewPage.teamAutomations.option.team.individual_description",defaultMessage:"Only run on pull requests opened by me"})},{value:"default",title:s.formatMessage({id:"wham.codeReviewPage.teamAutomations.option.individuals.title",defaultMessage:"Follow personal preferences"}),individual_title:s.formatMessage({id:"wham.codeReviewPage.teamAutomations.option.individuals.individual_title",defaultMessage:"Follow personal preferences"}),description:s.formatMessage({id:"wham.codeReviewPage.teamAutomations.option.individuals.description",defaultMessage:"Let users opt in with their personal settings"}),individual_description:s.formatMessage({id:"wham.codeReviewPage.teamAutomations.option.individuals.individual_description",defaultMessage:"Run on your own pull requests based on your personal preference"})}];return e.jsxs("section",{className:"flex flex-col gap-4",children:[c&&!t&&e.jsxs("div",{className:"hidden flex-col gap-2 sm:flex",children:[e.jsx("p",{className:"text-sm font-medium",children:e.jsx(a,{id:"wham.codeReviewPage.teamAutomations",defaultMessage:"Repo code reviews"})}),e.jsx("p",{className:"text-token-text-secondary text-xs",children:e.jsx(a,{id:"wham.codeReviewPage.teamAutomations.description",defaultMessage:"Tell Codex when to automatically review pull requests"})})]}),t&&e.jsxs("div",{className:"hidden flex-col gap-2 sm:flex",children:[e.jsx("p",{className:"text-sm font-medium",children:e.jsx(a,{id:"wham.codeReviewPage.teamAutomations.repoPreferences",defaultMessage:"Repository preferences"})}),e.jsx("p",{className:"text-token-text-secondary text-xs",children:c?e.jsx(a,{id:"wham.codeReviewPage.teamAutomations.repoPreferences.description.team",defaultMessage:"Configure code review for all contributors to a repository."}):e.jsx(a,{id:"wham.codeReviewPage.teamAutomations.repoPreferences.description.individual",defaultMessage:"Configure code review preferences for each repository."})})]}),e.jsxs("div",{className:"flex items-center justify-between gap-4",children:[e.jsx("div",{className:"w-84",children:e.jsx(Te,{name:"team-automations-search",containerInputClassName:"w-full",className:"text-token-text-primary flex h-8 w-full items-center rounded-md!",ariaLabel:s.formatMessage({id:"wham.codeReviewPage.teamAutomations.searchRepoAria",defaultMessage:"Search repos or enter a GitHub org/repo"}),placeholder:s.formatMessage({id:"wham.codeReviewPage.teamAutomations.searchRepoPlaceholder",defaultMessage:"Search repos or enter a GitHub org/repo"}),type:"search",color:"search",value:o,onChange:n=>l(n.target.value)})}),!t&&e.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[e.jsx("button",{type:"button",className:v("text-token-text-secondary bg-transparent p-0",{underline:d==="all","text-token-text-primary":d==="all"}),onClick:()=>h("all"),children:e.jsx(a,{id:"wham.codeReviewPage.teamAutomations.filter.all",defaultMessage:"All"})}),e.jsx("span",{className:"text-token-text-tertiary",children:"‚Ä¢"}),e.jsx("button",{type:"button",className:v("text-token-text-secondary bg-transparent p-0",{underline:d==="enabled","text-token-text-primary":d==="enabled"}),onClick:()=>h("enabled"),children:e.jsx(a,{id:"wham.codeReviewPage.teamAutomations.filter.enabledOnly",defaultMessage:"Enabled only"})})]})]}),e.jsx("div",{children:e.jsxs(m.Root,{size:"compact",disableScroll:!0,fixed:!0,children:[e.jsxs(m.Header,{children:[e.jsx(m.HeaderCell,{textAlign:"left",className:b[0],children:e.jsx(a,{id:"wham.codeReviewPage.teamAutomations.table.repository",defaultMessage:"Repository"})}),e.jsx(m.HeaderCell,{textAlign:"left",className:v(b[1],"ps-3"),children:e.jsx(a,{id:"wham.codeReviewPage.teamAutomations.table.codeReview",defaultMessage:"Auto code review"})}),e.jsx(m.HeaderCell,{textAlign:"left",className:v(b[2],"table-cell"),children:e.jsx(a,{id:"wham.codeReviewPage.teamAutomations.table.lastUpdated",defaultMessage:"Last updated by"})})]}),e.jsxs(m.Body,{children:[W?Array.from({length:6}).map((n,f)=>e.jsxs(m.Row,{children:[e.jsx(m.Cell,{className:v(b[0],"min-w-0"),children:e.jsxs("div",{className:"flex min-w-0 items-center gap-2",children:[e.jsx(q,{className:"h-4 w-4 rounded"}),e.jsx(q,{className:"h-4 w-48"})]})}),e.jsx(m.Cell,{textAlign:"left",className:v(b[1],"min-w-0"),children:e.jsx(q,{className:v("h-6 rounded-md",t?"w-40":"w-10")})}),e.jsx(m.Cell,{textAlign:"left",className:v(b[2],"min-w-0"),children:e.jsx(q,{className:"h-4 w-32"})})]},"skeleton-".concat(f))):$.length===0&&!fe?e.jsx(m.Row,{children:e.jsx(m.Cell,{colSpan:3,className:"text-token-text-tertiary",textAlign:"left",children:e.jsx(a,{id:"wham.codeReviewPage.teamAutomations.noRepositories",defaultMessage:"No repositories"})})}):$.map(n=>{var X,ee,te,se,ae;const f=(X=n.repository.owner)==null?void 0:X.login,R=f?i.includes(f):!1,I=((ee=n.repository.permissions)==null?void 0:ee.admin)||((te=n.repository.permissions)==null?void 0:te.push),B=e.jsx(oe,{"aria-label":s.formatMessage({id:"wham.codeReviewPage.teamAutomations.toggleRepoCodeReviewAria",defaultMessage:"Toggle code review for repository"}),checked:n.review_preference==="team",disabled:R,onCheckedChange:u=>{const P=u?"team":"never";H({repo_review_settings:[{repository:n.repository.id,review_preference:P}]})}}),k=xe(n),C=k==="everyone",A=C&&!I,Y=C&&n.global_review_account_id!==Ge(_),N=Q.find(u=>u.value===k),E=[];Y&&(c?E.push(e.jsx(a,{id:"wham.codeReviewPage.teamAutomations.everyoneWarningTooltip.differentUser.team",defaultMessage:"This setting was set by a user in a different team."})):E.push(e.jsx(a,{id:"wham.codeReviewPage.teamAutomations.everyoneWarningTooltip.differentUser.individual",defaultMessage:"This setting was set by a different user."}))),A?E.push(e.jsx(a,{id:"wham.codeReviewPage.teamAutomations.everyoneWarningTooltip.noPermissions",defaultMessage:"You must have repo admin or push permissions to change this setting."})):E.push(e.jsx(a,{id:"wham.codeReviewPage.teamAutomations.everyoneWarningTooltip.changeWarning",defaultMessage:"Changing this setting affects auto code reviews for other contributors to this repository."}));const z=e.jsx(e.Fragment,{children:E.map((u,P)=>e.jsxs("span",{children:[u," "]},P))}),ve=e.jsxs(j.Root,{value:k,onValueChange:u=>{if(!Xe(u))return;const P=et[u];H({repo_review_settings:[{repository:n.repository.id,review_preference:P.reviewPreference,global_review_preference:P.globalReviewPreference}]})},disabled:R||A,children:[e.jsxs(j.Trigger,{className:"w-full max-w-[250px] min-w-[150px] justify-between",children:[e.jsx(L,{label:z,withArrow:!0,side:"top",sideOffset:0,disabled:!(C&&A)||R,children:e.jsx("div",{className:"flex items-center gap-2 truncate text-sm font-normal",children:c?N==null?void 0:N.title:(se=N==null?void 0:N.individual_title)!=null?se:N==null?void 0:N.title})}),A?null:e.jsx(j.Icon,{})]}),e.jsx(j.Portal,{children:e.jsxs(j.Content,{className:"max-w-[340px] min-w-[220px]","data-unbound-width":"",children:[C&&!A&&e.jsx(j.Item,{value:"unselectable",className:"items-start",disabled:!0,children:e.jsx("div",{className:"flex min-w-[220px] flex-col gap-1",children:e.jsx("span",{className:"text-token-text-tertiary text-xs whitespace-normal",children:z})})},"unselectable"),Q.map(u=>{var P,ie;return e.jsx(j.Item,{value:u.value,className:"items-start",disabled:u.value==="everyone"&&!I,children:e.jsx(L,{label:e.jsx(a,{id:"wham.codeReviewPage.teamAutomations.everyoneDisabledTooltip",defaultMessage:"You must have repo admin or push permissions to select this option"}),disabled:!(u.value==="everyone"&&!I),withArrow:!0,side:"top",sideOffset:0,children:e.jsxs("div",{className:"flex min-w-[220px] flex-col gap-1",children:[e.jsx("span",{className:"text-sm font-normal",children:c?u.title:(P=u.individual_title)!=null?P:u.title}),e.jsx("span",{className:"text-token-text-tertiary text-xs whitespace-normal",children:c?u.description:(ie=u.individual_description)!=null?ie:u.description})]})})},u.value)})]})})]}),K=t?ve:B,je=R?e.jsx(L,{label:e.jsx(a,{id:"wham.codeReviewPage.teamAutomations.repoDisabledTooltip",defaultMessage:"Update the {installation} GitHub installation to enable code review",values:{installation:f}}),children:K}):K,S=n.updated_at?new Date(n.updated_at):null,Z=!!(S&&!Number.isNaN(S.getTime())),ye=Z&&S?e.jsx(Me,{value:S,year:"numeric",month:"short",day:"2-digit"}):null,U=Z&&S?Ie({givenDate:S,now:he,intl:s,format:"descriptive"}):null,be=(ae=U!=null?U:ye)!=null?ae:e.jsx(a,{id:"wham.codeReviewPage.teamAutomations.lastUpdatedUnknown",defaultMessage:"Not recorded"}),J=Y?e.jsx(Ne,{className:"font-medium",target:"_blank",to:"https://github.com/".concat(n.last_updated_by_github_id),children:n.last_updated_by_github_id}):c?n.last_updated_user_email:e.jsx(a,{id:"wham.codeReviewPage.teamAutomations.lastUpdatedByUser",defaultMessage:"me"}),Re=e.jsx(a,{id:"wham.codeReviewPage.teamAutomations.lastUpdatedBy",defaultMessage:"{date} by {user}",values:{date:be,user:J}});return e.jsxs(m.Row,{children:[e.jsx(m.Cell,{className:v(b[0],"min-w-[150px]"),children:e.jsxs("div",{className:"flex min-w-0 items-center gap-2",children:[e.jsx(Ve,{className:"icon-md shrink-0"}),e.jsx("p",{className:"truncate text-sm",children:n.repository.repository_full_name})]})}),e.jsx(m.Cell,{textAlign:"left",className:v(b[1],"min-w-0"),children:e.jsx("div",{className:"flex w-full max-w-[250px] items-center justify-end sm:justify-start",children:je})}),e.jsx(st,{columnClassName:b[2],lastUpdatedBy:J,lastUpdatedRelativeTime:U,tooltipLabel:Re})]},n.repository.id)}),ge&&e.jsx(m.Row,{children:e.jsx(m.Cell,{colSpan:4,className:"!border-b-0!",textAlign:"left",children:e.jsx("p",{className:"text-token-text-secondary text-xs",children:e.jsx(a,{id:"wham.codeReviewPage.teamAutomations.maxSuggestionsNote",defaultMessage:"Displaying maximum {count} suggestions",values:{count:D}})})})}),we&&e.jsx(m.Row,{children:e.jsx(m.Cell,{colSpan:3,className:"!border-b-0!",textAlign:"left",children:e.jsx(We,{isFetchingNextPage:!!G,hasNextPage:!!F,fetchNextPage:()=>pe(),bgColor:"bg-transparent"})})})]})]})})]})}function it(){const{data:i,isLoading:t,isError:s}=De(),{mutate:o,isPending:l}=He({showToast:!1}),r=V(),p=re(),w=(i==null?void 0:i.code_review_preference)==="repo_default"||r,d=de(p,"917648193"),h=t||s||!i,{data:x}=ue(),g=M.useMemo(()=>{var c;return(c=x==null?void 0:x.installations_without_events)!=null?c:[]},[x]);return e.jsx(Ue,{topPadding:!0,children:e.jsxs("div",{className:"mx-auto flex h-full max-w-screen-xl flex-1 flex-col gap-2 ps-4 pe-12",children:[e.jsx("div",{className:v("border-token-border-heavy flex items-center justify-between",!d&&"border-b"),children:e.jsx("p",{className:"flex items-center gap-2 align-middle text-xl leading-7 font-medium",children:e.jsx(a,{id:"wham.codeReviewPage.header",defaultMessage:"Code review"})})}),d&&e.jsx("p",{className:"text-token-text-secondary w-max text-sm",children:e.jsx(a,{id:"wham.codeReviewPage.infoBannerV2.subtitle",defaultMessage:"Set up Codex to automatically review pull requests"})}),e.jsx(Ze,{}),d?e.jsx(ze,{}):e.jsx(Ye,{}),h?e.jsx("div",{className:"flex items-center justify-center pt-2",children:e.jsx(Ee,{className:"icon me-1.5"})}):e.jsxs("div",{className:"flex flex-col gap-4 pt-2 pb-4",children:[e.jsx(Qe,{isSaving:l,initialScope:i.code_review_preference,onChange:c=>{o({codeReviewPreference:c})},showNewReviewSettings:d}),e.jsx("div",{className:"bg-token-border-default h-px"}),(w||d)&&e.jsx(at,{disabledInstallations:g.map(c=>c.account_login),showNewReviewSettings:d})]})]})})}const _t=()=>[{title:"Codex"}],At=_e(function(){return qe()?e.jsx(it,{}):e.jsx(Be,{})});export{At as default,_t as meta};
//# sourceMappingURL=d603y4hggr7hio1h.js.map
