const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/gjo3e3b22954g6lm.js","assets/lef5ym39glv4981l.js","assets/jj85rqzpbnvv3emr.js","assets/root-ogjlcpyy.css","assets/mclphevd122040jw.js","assets/conversation-small-g7l5datj.css","assets/ctl8k0odelcp7jyc.js","assets/ciubj222m9jmobiu.js","assets/hqbuxjfjvu1puiaw.js","assets/jxokrjy8ycftw0wv.js","assets/jk4cx3iywxazx01l.js","assets/e0efgancp8wep37e.js","assets/xx3svpq6qe4q5uu1.js","assets/ng0sx063g0r0whhb.js","assets/fvmxudg74tbhlabl.js","assets/hnotrmacgvnfyexv.js","assets/gyvvad7btmtz1x9o.js","assets/n6vmm5pyahusdy8e.js","assets/l041el2tch1t3nkf.js","assets/dta5t6ifyam55mk9.js","assets/easgat082167v0i8.js","assets/cncd8uuk5eicbkeu.js","assets/cdk0cmbgnafohb1q.js","assets/mtg83aqpqaxteb09.js","assets/fr4ckts5oz9jhhs0.js","assets/mw2u7timj0qnsnvj.js","assets/dvqe6kc43fkjsavv.js","assets/f3wj76d1ulqyss85.js","assets/du2fkn1o0qxwuukg.js","assets/n82i9qkvs5r9bggc.js","assets/9z485wf4plyfoo73.js","assets/ikp2xm3x9qblaabk.js","assets/cwig5vk2rvi1vksw.js","assets/d64g4smj0v6wfguu.js","assets/cfjmhsr8xf6xwmmf.js","assets/m46a0bw94g3hbrbv.js","assets/mueia064md5nlhd6.js","assets/eyi9jrf1bwm7dn6f.js","assets/bm60ocel3j0ixm99.js","assets/eksfatdee5z30mgz.js","assets/gd5k9khi2ma4fx2d.js","assets/eyrb6sf5jz8ri0pt.js","assets/n9gjott769mxfmpz.js","assets/jucwzbakxra299c6.js","assets/ebxncu61uuayv8xb.js","assets/pb6aizka92emjg8u.js","assets/lz6nvf1wtn80mpd2.js","assets/g4tl5lt9yqf20m4s.js","assets/i7ccy3s598cxt4cl.js","assets/byc485nmh825ib1a.js","assets/l2l4d2d2bzani7km.js","assets/jae7m9gwp330mg9x.js"])))=>i.map(i=>d[i]);
var Ye=Object.defineProperty,Qe=Object.defineProperties;var qe=Object.getOwnPropertyDescriptors;var ye=Object.getOwnPropertySymbols;var Je=Object.prototype.hasOwnProperty,Ze=Object.prototype.propertyIsEnumerable;var Ve=(o,e,i)=>e in o?Ye(o,e,{enumerable:!0,configurable:!0,writable:!0,value:i}):o[e]=i,Me=(o,e)=>{for(var i in e||(e={}))Je.call(e,i)&&Ve(o,i,e[i]);if(ye)for(var i of ye(e))Ze.call(e,i)&&Ve(o,i,e[i]);return o},Le=(o,e)=>Qe(o,qe(e));import{ij as $e,mH as Ke,q4 as Xe,q5 as es,ex as F,ey as M,i as ss,g5 as ts,q6 as is,bK as ze,bG as os,d as as,h as rs,nK as ls,q7 as ns,gk as De,ae as cs,aG as ds,dW as Ue,y as fs,jk as us,bJ as ms,ci as gs,pu as ps,ca as hs,gm as ws,nZ as xs}from"./lef5ym39glv4981l.js";import{j as t,r as l,A as _s,m as Re,c as bs,s as Ge,i as Es,u as vs}from"./jj85rqzpbnvv3emr.js";import{lk as Ps,ll as Cs,lm as Be,jH as js,df as Ne,dg as He,ln as Ss,lo as ks,lp as Is,lq as Ts,lr as Os,ls as Fs,lt as Ms,lu as Ns,lv as As,lw as ys,lx as Vs,ly as Ls,lz as We,lA as zs,lB as Ds,lC as Us,lD as Rs,lE as Gs,lF as Bs,d2 as Hs,lG as Ws,lH as Ks,lI as Ys,lJ as Qs,T as qs,lK as Js,lL as Zs,cY as $s,ed as Xs,cI as et,b4 as st}from"./mclphevd122040jw.js";import{B as tt}from"./hqbuxjfjvu1puiaw.js";import{P as it,M as ot}from"./e0efgancp8wep37e.js";import{C as at}from"./du2fkn1o0qxwuukg.js";function rt({clientThreadId:o}){const e=Ps();return t.jsxs(t.Fragment,{children:[e&&t.jsx(Cs,{}),t.jsx(lt,{clientThreadId:o})]})}function lt({clientThreadId:o}){const e=l.useContext($e),[i,c]=l.useState(!!(e!=null&&e.postWithProfile)&&e.postWithProfile.post.attachments&&e.postWithProfile.post.attachments.every(d=>d.kind==="media_generation"));return!(e!=null&&e.postWithProfile)||!i?null:t.jsx(Ke,{clientThreadId:o,children:t.jsx(it,{clientThreadId:o,postWithProfile:e.postWithProfile,onClose:()=>c(!1)})})}const nt=450;function ct({children:o,clientThreadId:e,isOpen:i,onClose:c,type:d}){return t.jsx(_s,{children:i&&t.jsx(Xe,{children:t.jsx(es.Provider,{value:{isEmbeddedInFocusedView:!0,type:d},children:t.jsxs("div",{className:"absolute inset-0 flex flex-col",children:[t.jsx(Re.div,Me({className:"bg-token-main-surface-secondary h-full w-full"},Be)),t.jsxs("div",{className:"absolute inset-0 flex",children:[t.jsx("div",{className:"grow overflow-auto",children:o}),t.jsx(Re.div,Le(Me({className:"border-token-border-medium bg-token-main-surface-primary relative shrink-0 border-s",style:{width:nt}},Be),{children:t.jsx("div",{className:"h-[100vh] pb-4",children:t.jsx(ot,{clientThreadId:e,hideHeader:!0,hideDisclaimer:!0,messagesVerticalAlign:"bottom"},e)})}))]})]})})})})}const dt=F(()=>M(()=>import("./gjo3e3b22954g6lm.js"),__vite__mapDeps([0,1,2,3,4,5,6]))),ft=F(()=>M(()=>import("./ciubj222m9jmobiu.js"),__vite__mapDeps([7,1,2,3,4,5,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30])).then(o=>o.ImageEditor));function ut({clientThreadId:o}){const e=js();l.useEffect(()=>{Ne.close()},[o]);let i;return(e==null?void 0:e.type)===He.ADAVisualization?i=t.jsx(dt,{clientThreadId:o,visualization:e.visualization}):(e==null?void 0:e.type)===He.Image&&(i=t.jsx(ft,{clientThreadId:o,messageId:e.messageId,image:e.image,allImages:e.allImages},e.image.asset_pointer)),t.jsx(ct,{clientThreadId:o,isOpen:e!=null,onClose:Ne.close,type:e==null?void 0:e.type,children:i})}var mt={};const gt=F(()=>M(()=>import("./ikp2xm3x9qblaabk.js"),__vite__mapDeps([31,2,1,3,4,5]))),pt=F(()=>M(()=>import("./cwig5vk2rvi1vksw.js"),__vite__mapDeps([32,2,1,3,33,34,35,4,5,36,37,18,38,39,40,41,42,43,44,45,46,11,12,13,14,15,16,17,19,20,21,22,23,24,25,26,27,47]))),ht=F(()=>M(()=>import("./i7ccy3s598cxt4cl.js"),__vite__mapDeps([48,2,4,1,3,5,49,41,50]))),wt=F(()=>M(()=>import("./jae7m9gwp330mg9x.js"),__vite__mapDeps([51,2,1,3,41,4,5,42,43,44,49])));function St(o){"use forget";var Ae;const e=bs.c(112),{urlThreadId:i,clientThreadId:c,prefetchSearch:d}=o,r=ss(),n=ts(),p=is(),g=Ge(),[u]=Es(),h=u.get("from_webview")==="ios";let A;e[0]!==c||e[1]!==i?(A=()=>{var a;if(i!==void 0){const f=i;return(a=ns(f))!=null?a:f}return c!==void 0?c:De()},e[0]=c,e[1]=i,e[2]=A):A=e[2];const[s,N]=l.useState(A);i!==void 0&&s!==i&&(ze(s)===i||N(i));let y;e[3]!==s||e[4]!==r?(y=os(r,s),e[3]=s,e[4]=r,e[5]=y):y=e[5];const ke=y,Ie=Ge();let V;e[6]!==Ie?(V=Ss(Ie),e[6]=Ie,e[7]=V):V=e[7];const Te=V;let L;e[8]!==s||e[9]!==i?(L=()=>{i===void 0&&ze(s)!==void 0&&N(De())},e[8]=s,e[9]=i,e[10]=L):L=e[10];let z;e[11]!==s||e[12]!==Te||e[13]!==i?(z=[i,s,Te],e[11]=s,e[12]=Te,e[13]=i,e[14]=z):z=e[14],l.useEffect(L,z);const Oe=as(rs.workspaceId),{eligible:D,isLoading:U,markAsViewed:R}=ks(),G=Is(),{eligible:B,isLoading:H,markAsViewed:W}=Ts(),K=Os(),{eligible:Y,isLoading:Q,markAsViewed:q}=Fs(),J=Ms(),{eligible:Z,isLoading:$,markAsViewed:X}=Ns(),ee=As();let se,te;e[15]!==r?(se=()=>{Ls(!0).then(a=>{a.force_login&&cs(r,{fallbackScreenHint:"login"}),We.initializeAndGatherData(a),ds(r).checkGate("4178431533")&&We.precomputeEnforcementToken(a),zs.initializeAndGatherData(a)})},te=[r],e[15]=r,e[16]=se,e[17]=te):(se=e[16],te=e[17]),l.useEffect(se,te);let ie,oe;e[18]!==p||e[19]!==n||e[20]!==u?(ie=()=>{const a=u.get(Ds)==="true",f=u.get(Us)==="true";f!==p&&Ue.setIsAnonModeEnabled(f),n!==a&&Ue.setIsTemporaryChatEnabled(a)},oe=[n,p,u],e[18]=p,e[19]=n,e[20]=u,e[21]=ie,e[22]=oe):(ie=e[21],oe=e[22]),l.useEffect(ie,oe);let ae;e[23]!==g.state?(ae=()=>{var a;(a=g.state)!=null&&a.focusObject&&Ne.setFocusedObject(g.state.focusObject)},e[23]=g.state,e[24]=ae):ae=e[24];const Fe=(Ae=g.state)==null?void 0:Ae.focusObject;let re;e[25]!==Fe?(re=[Fe],e[25]=Fe,e[26]=re):re=e[26],l.useEffect(ae,re);let le,ne;e[27]!==D||e[28]!==U||e[29]!==R||e[30]!==G?(le=()=>{!U&&D&&(R(),G())},ne=[D,U,R,G],e[27]=D,e[28]=U,e[29]=R,e[30]=G,e[31]=le,e[32]=ne):(le=e[31],ne=e[32]),l.useEffect(le,ne);let ce,de;e[33]!==B||e[34]!==H||e[35]!==W||e[36]!==K?(ce=()=>{!H&&B&&(W(),K())},de=[B,H,W,K],e[33]=B,e[34]=H,e[35]=W,e[36]=K,e[37]=ce,e[38]=de):(ce=e[37],de=e[38]),l.useEffect(ce,de);let fe,ue;e[39]!==Y||e[40]!==Q||e[41]!==q||e[42]!==J?(fe=()=>{!Q&&Y&&(q(),J())},ue=[Y,Q,q,J],e[39]=Y,e[40]=Q,e[41]=q,e[42]=J,e[43]=fe,e[44]=ue):(fe=e[43],ue=e[44]),l.useEffect(fe,ue);let me,ge;e[45]!==Z||e[46]!==$||e[47]!==X||e[48]!==ee?(me=()=>{!$&&Z&&(X(),ee())},ge=[Z,$,X,ee],e[45]=Z,e[46]=$,e[47]=X,e[48]=ee,e[49]=me,e[50]=ge):(me=e[49],ge=e[50]),l.useEffect(me,ge),ys(s);const m=vs();let pe,he;e[51]!==r||e[52]!==m?(pe=()=>{fs(r)&&Rs(m)},he=[m,r],e[51]=r,e[52]=m,e[53]=pe,e[54]=he):(pe=e[53],he=e[54]),l.useEffect(pe,he);let we,xe;e[55]!==n||e[56]!==m?(we=()=>us(hs,{completionFinished:a=>{var f;if(a.serverThreadId!=null&&!n){const Se=(f=ms(a.serverThreadId))==null?void 0:f.mode;(Se==null?void 0:Se.kind)===gs.GizmoInteraction&&ps.handleGizmoInteracted(m,Se.gizmo_id)}}}),xe=[n,m],e[55]=n,e[56]=m,e[57]=we,e[58]=xe):(we=e[57],xe=e[58]),l.useEffect(we,xe),Vs();let w;e[59]!==s||e[60]!==h||e[61]!==Oe?(w=t.jsx(tt,{clientThreadId:s,page:"chat",isIosDirectPurchaseFlow:h},Oe),e[59]=s,e[60]=h,e[61]=Oe,e[62]=w):w=e[62];let x;e[63]!==s||e[64]!==h?(x=t.jsx(xt,{clientThreadId:s,setClientThreadId:N,isIosDirectPurchaseFlow:h}),e[63]=s,e[64]=h,e[65]=x):x=e[65];let _e,be;e[66]===Symbol.for("react.memo_cache_sentinel")?(_e=t.jsx(gt,{}),be=t.jsx(Gs,{}),e[66]=_e,e[67]=be):(_e=e[66],be=e[67]);let Ee;e[68]===Symbol.for("react.memo_cache_sentinel")?(Ee=t.jsx(Bs,{}),e[68]=Ee):Ee=e[68];let _;e[69]!==s||e[70]!==i?(_=t.jsx(at,{urlThreadId:i,clientThreadId:s,setClientThreadId:N}),e[69]=s,e[70]=i,e[71]=_):_=e[71];let b;e[72]!==s?(b=t.jsx(rt,{clientThreadId:s}),e[72]=s,e[73]=b):b=e[73];let E;e[74]!==s||e[75]!==d||e[76]!==_||e[77]!==b?(E=t.jsxs(Hs,{clientThreadId:s,setClientThreadId:N,prefetchSearchPromises:d,children:[Ee,_,b]}),e[74]=s,e[75]=d,e[76]=_,e[77]=b,e[78]=E):E=e[78];let v;e[79]!==s||e[80]!==w||e[81]!==x||e[82]!==E?(v=t.jsxs(ws,{clientThreadId:s,children:[w,x,_e,be,E]}),e[79]=s,e[80]=w,e[81]=x,e[82]=E,e[83]=v):v=e[83];let P,C;e[84]!==s?(P=t.jsx(ut,{clientThreadId:s}),C=t.jsx(Ws,{clientThreadId:s}),e[84]=s,e[85]=P,e[86]=C):(P=e[85],C=e[86]);let ve;e[87]===Symbol.for("react.memo_cache_sentinel")?(ve=t.jsx(Ks,{}),e[87]=ve):ve=e[87];let j;e[88]!==s?(j=t.jsx(Ys,{clientThreadId:s}),e[88]=s,e[89]=j):j=e[89];let Pe;e[90]===Symbol.for("react.memo_cache_sentinel")?(Pe=t.jsx(Qs,{}),e[90]=Pe):Pe=e[90];let S;e[91]!==s||e[92]!==v||e[93]!==P||e[94]!==C||e[95]!==j?(S=t.jsxs(Ke,{clientThreadId:s,children:[v,P,C,ve,j,Pe]}),e[91]=s,e[92]=v,e[93]=P,e[94]=C,e[95]=j,e[96]=S):S=e[96];let k;e[97]!==s||e[98]!==S?(k=t.jsx(qs,{clientThreadId:s,children:S}),e[97]=s,e[98]=S,e[99]=k):k=e[99];let I;e[100]!==s||e[101]!==k?(I=t.jsx(Js,{clientThreadId:s,children:k}),e[100]=s,e[101]=k,e[102]=I):I=e[102];let Ce;e[103]===Symbol.for("react.memo_cache_sentinel")?(Ce=t.jsx(Zs,{}),e[103]=Ce):Ce=e[103];let T;e[104]!==s?(T=!1,e[104]=s,e[105]=T):T=e[105];let O;e[106]!==I||e[107]!==T?(O=t.jsxs(xs,{children:[I,Ce,T]}),e[106]=I,e[107]=T,e[108]=O):O=e[108];let je;return e[109]!==ke||e[110]!==O?(je=t.jsx(ls.Provider,{value:ke,children:O}),e[109]=ke,e[110]=O,e[111]=je):je=e[111],je}function xt({clientThreadId:o,setClientThreadId:e,isIosDirectPurchaseFlow:i}){const{isOpen:c,isLoading:d}=$s(),{isOpen:r,isLoading:n}=Xs(),{isOpen:p,isLoading:g,closeModal:u}=et();return i?null:!d&&c?t.jsx(pt,{clientThreadId:o,setClientThreadId:e}):!n&&r?t.jsx(ht,{clientThreadId:o}):!g&&p?t.jsx(st,{children:t.jsx(wt,{clientThreadId:o,onClose:u})}):null}typeof window<"u"&&(window._g=mt.GOKU_SERVICE);export{St as C,nt as F};
//# sourceMappingURL=ka8yvzszndzglfav.js.map
