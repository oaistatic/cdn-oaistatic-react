const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/fck11x3djvav0rp9.js","assets/jj85rqzpbnvv3emr.js"])))=>i.map(i=>d[i]);
var Re=Object.freeze,Ue=Object.defineProperty,ds=Object.defineProperties;var us=Object.getOwnPropertyDescriptors;var Ce=Object.getOwnPropertySymbols;var ms=Object.prototype.hasOwnProperty,ps=Object.prototype.propertyIsEnumerable;var Le=(s,a,t)=>a in s?Ue(s,a,{enumerable:!0,configurable:!0,writable:!0,value:t}):s[a]=t,v=(s,a)=>{for(var t in a||(a={}))ms.call(a,t)&&Le(s,t,a[t]);if(Ce)for(var t of Ce(a))ps.call(a,t)&&Le(s,t,a[t]);return s},I=(s,a)=>ds(s,us(a));var te=(s,a)=>Re(Ue(s,"raw",{value:Re(a||s.slice())}));import{G as r,F as Ke,i as V,j as xs,C as K,bw as q,ck as gs,ai as fs,r as Qe,f1 as ce,ky as hs,ex as js,ey as ys,f9 as f,f as Ye,aE as ks,b as vs,pS as ws,ct as Z,o as Ms,pT as bs,fb as le,e as de,eE as C,fa as A,pv as $,pw as Ns,T as Ae,B as G,id as _s,pU as Ps,fw as Ss,pV as Ts,R as Ge}from"./lef5ym39glv4981l.js";import{r as b,j as e,b as H,M as n,u as ue,e as h,d as De,f as Rs}from"./jj85rqzpbnvv3emr.js";import{jV as Cs,jW as Ls,c9 as Us,jX as Be,bO as oe,be as As,at as y,gL as Ve,jY as Bs,au as Ie,a6 as Is,gH as Es,bq as Fs,br as Ee,hl as Ws,bW as Os,jZ as zs,gO as qs,dt as Ks,gP as Qs}from"./mclphevd122040jw.js";import{C as Ys}from"./m07wx0qobxpm3v8p.js";import{S as ie}from"./daioev77nl79ehf6.js";function He(s){return s==r.User||s==r.Group?r.Private:s==r.WorkspaceLink?r.Workspace:s}function E(s,a){return s=He(s),a===void 0?!1:a.some(t=>t.recipient===s&&t.allowed)}function me(s,a){if(a===void 0)return[];s=He(s);const t=a.find(c=>c.recipient===s);return t==null?void 0:t.moderated_fields}function re(s,a){const t=me(s,a);return t&&t.length>0}var ze;const Fe=Ke.a(ze||(ze=te(["bold underline"])));var qe;const Gs=Ke.textarea(qe||(qe=te(["w-full text-sm overflow-y-auto rounded-lg border px-3 py-2 focus:ring-2 focus:ring-blue-400 border-token-border-medium bg-token-main-surface-primary h-32"])));var Xe=(s=>(s[s.None=0]="None",s[s.AppealAvailable=1]="AppealAvailable",s[s.AppealSent=2]="AppealSent",s))(Xe||{}),Je=(s=>(s[s.None=0]="None",s[s.PublishBlocked=1]="PublishBlocked",s[s.RemovedFromMarketplace=2]="RemovedFromMarketplace",s[s.RemovedFromPublic=3]="RemovedFromPublic",s[s.RemovedFromPrivate=4]="RemovedFromPrivate",s[s.Recategorized=5]="Recategorized",s))(Je||{});function pa(s){var c;if(!s)return;const a=((c=s.gizmo.appeal_info)==null?void 0:c.state.kind)==="appeal_sent",t=Ds(s.gizmo.share_recipient,s.gizmo.sharing_targets);return{sharingRecipient:s.gizmo.share_recipient,categories:s.gizmo.categories,gizmoId:s.gizmo.id,moderationType:t,sharingTargets:s.gizmo.sharing_targets,showModal:a?2:t!==0?1:0}}const We={[r.User]:r.Private,[r.Group]:r.Private,[r.WorkspaceLink]:r.Workspace};function Ds(s,a=[]){const t=new Set(a.filter(d=>d.allowed).map(d=>d.recipient));if(!s||(s in We&&(s=We[s]),t.has(s)))return 0;const c=t.has(r.Private)||t.has(r.Workspace),l=t.has(r.Link)||t.has(r.Marketplace);return s===r.Marketplace&&l?2:!l&&c?3:4}function Oe(s){switch(s){case 0:case 1:return h({id:"gizmo.appeals.publishBlockedTitle",defaultMessage:"Your changes couldn’t be published"});case 2:return h({id:"gizmo.appeals.removedFromMarketplaceTitle",defaultMessage:"Your GPT has been removed from the marketplace"});case 3:return h({id:"gizmo.appeals.removedFromPublicTitle",defaultMessage:"Your GPT has been removed from public view"});case 4:return h({id:"gizmo.appeals.removedFromPrivateTitle",defaultMessage:"Your GPT has been removed from private view"});case 5:return h({id:"gizmo.appeals.recategorizedTitle",defaultMessage:"Your GPT has been recategorized"})}}function Vs(s){switch(s){case"profile_picture":return h({id:"gizmo.appeals.profilePictureFieldName",defaultMessage:"Profile Picture"});case"gizmo_name":return h({id:"gizmo.appeals.gizmoNameFieldName",defaultMessage:"Name"});case"gizmo_description":return h({id:"gizmo.appeals.gizmoDescriptionFieldName",defaultMessage:"Description"});case"gizmo_instructions":return h({id:"gizmo.appeals.gizmoInstructionsFieldName",defaultMessage:"Instructions"});case"gizmo_welcome_message":return h({id:"gizmo.appeals.gizmoWelcomeMessageFieldName",defaultMessage:"Welcome Message"});case"custom_actions":return h({id:"gizmo.appeals.customActionsFieldName",defaultMessage:"Custom Actions"});case"conversation_starter":return h({id:"gizmo.appeals.conversationStarterFieldName",defaultMessage:"Conversation Starter"});case"file":return h({id:"gizmo.appeals.fileFieldName",defaultMessage:"File"});case"gizmo_combined_content":return h({id:"gizmo.appeals.gizmoCombinedContentFieldName",defaultMessage:"GPT Content"})}}function Hs(s){switch(s){case r.Private:case r.Workspace:return h({id:"gizmo.appeals.privateRecipientModerationText",defaultMessage:"Your GPT can’t be updated because it violates our {usagePolicyLink}Usage Policies{usagePolicyLink}."});case r.Link:return h({id:"gizmo.appeals.linkRecipientModerationText",defaultMessage:"Your GPT can’t be shared publicly because it violates our {usagePolicyLink}Usage Policies{usagePolicyLink}."});case r.Marketplace:return h({id:"gizmo.appeals.marketplaceRecipientModerationText",defaultMessage:"Your GPT can’t appear in the Explore GPTs page because it violates our {usagePolicyLink}Usage Policies{usagePolicyLink}."});default:hs(s)}}function Ze({sharingRecipient:s,moderatedFields:a,appealAvailable:t}){const c=a.length;return e.jsxs(e.Fragment,{children:[e.jsxs("p",{children:[e.jsx(n,I(v({},Hs(s)),{values:{usagePolicyLink:l=>e.jsx(Fe,{target:"_blank",href:"https://openai.com/policies/usage-policies",rel:"noreferrer",children:l})}}))," ",c>0&&e.jsx(n,{id:"gizmo.appeals.seeBelowForSpecificIssues",defaultMessage:"{numModeratedFields, plural,\n              one {See below for the specific issue:}\n              other {See below for the specific issues:}\n            }",values:{numModeratedFields:c}})]}),c>0&&(a==null?void 0:a.map(l=>e.jsxs(e.Fragment,{children:[e.jsx("p",{className:"font-bold",children:e.jsx(n,v({},Vs(l.name)))}),e.jsx("ul",{className:"list-disc ps-5",children:l.reasons.map(d=>e.jsxs("li",{children:[d.description," ",d.link?e.jsx(Fe,{href:d.link,target:"_blank",rel:"noreferrer",children:e.jsx(n,{id:"gizmo.appeals.learnMore",defaultMessage:"Learn more"})}):""]},d.description))})]}))),t&&e.jsx("p",{children:e.jsx(n,{id:"gizmo.appeals.appealAvailableText",defaultMessage:"Alternatively you may appeal this decision and we will get back to you as soon as possible. Or you can publish to “Only me” and use this GPT privately."})})]})}function Xs({gizmoId:s,sharingRecipient:a,categories:t,moderationType:c,sharingTargets:l,appealAvailable:d,onClose:m,onAppealSubmitted:w}){var W;const j=H(),[T,F]=b.useState(""),[g,N]=b.useState(0),[R,_]=b.useState(!1),M=ue(),L=async()=>{_(!0);try{await ce.postGizmoAppeal(M,s,T,a,t),N(2),w==null||w()}finally{_(!1)}},p=me(a,l),u=(W=p==null?void 0:p.length)!=null?W:0,o=V(),B=Qe(o);if(u==0&&(B==null?void 0:B.isEnterprisey()))return e.jsx(K,{testId:"modal-gizmo-appeal-available",title:j.formatMessage(Oe(c)),isOpen:!0,onClose:m,showCloseButton:!0,type:"warning",primaryButton:e.jsx(q.Button,{color:"primary",onClick:m,children:e.jsx(n,{id:"wEsAOU",defaultMessage:"OK"})}),children:e.jsx("p",{className:"text-sm",children:e.jsx(n,{id:"gizmo.appeals.workspaceSettingsMessage",defaultMessage:"Access to your GPT has been reduced by your workspace's GPT sharing settings. An owner of the workspace can change these settings in the workspace settings page."})})});switch(g){case 0:return e.jsx(K,{testId:"modal-gizmo-appeal-available",title:j.formatMessage(Oe(c)),isOpen:!0,onClose:m,showCloseButton:!0,primaryButton:e.jsx(q.Button,{color:"primary",onClick:m,children:e.jsx(n,{id:"gizmo.appeals.contunueButton",defaultMessage:"Continue"})}),secondaryButton:d?e.jsx(q.Button,{onClick:()=>N(1),children:e.jsx(n,{id:"gizmo.appeals.appealButton",defaultMessage:"Appeal"})}):void 0,type:"warning",children:e.jsx("div",{className:"flex flex-col gap-2 text-sm",children:e.jsx(Ze,{sharingRecipient:a,moderatedFields:p!=null?p:[],appealAvailable:d})})});case 1:return e.jsx(K,{testId:"modal-gizmo-appeal-form",title:j.formatMessage({id:"gizmo.appeals.appealModalTitle",defaultMessage:"Appeal"}),isOpen:!0,onClose:m,showCloseButton:!0,shouldIgnoreClickOutside:!0,primaryButton:e.jsx(q.Button,{color:"primary",onClick:L,disabled:R||T.trim().length===0,children:e.jsx(n,{id:"gizmo.appeals.submitAppealButton",defaultMessage:"Submit"})}),secondaryButton:e.jsx(q.Button,{onClick:()=>N(0),children:e.jsx(n,{id:"gizmo.appeals.backButton",defaultMessage:"Back"})}),type:"warning",children:e.jsxs("div",{className:"flex flex-col gap-2 text-sm",children:[e.jsx("p",{children:e.jsx(n,{id:"gizmo.appeals.appealReasonText",defaultMessage:"Please provide a reason for why you believe this GPT doesn’t violate our policies and should be published"})}),e.jsx(Gs,{value:T,onChange:X=>F(X.target.value)})]})});case 2:return e.jsx(e.Fragment,{})}}function Js({onClose:s}){const a=H();return e.jsx(K,{testId:"modal-gizmo-appeal-submitted",title:a.formatMessage({id:"gizmo.appeals.appealSubmittedModalTitle",defaultMessage:"Appeal submitted"}),isOpen:!0,onClose:s,showCloseButton:!0,primaryButton:e.jsx(q.Button,{color:"primary",onClick:s,children:e.jsx(n,{id:"gizmo.appeals.closeButton",defaultMessage:"Close"})}),type:"success",children:e.jsx("div",{className:"flex flex-col gap-2 text-sm",children:e.jsx("div",{children:e.jsx(n,{id:"gizmo.appeals.appealSubmittedText",defaultMessage:"Your appeal has been submitted. We will get back to you as soon as possible."})})})})}function Zs({gizmoId:s,onClose:a}){const{data:t}=gs(s,!0),c=ue(),l=async()=>{await ce.postGizmoCancelAppeal(c,s)};return e.jsx(K,{testId:"modal-gizmo-appeal-sent",isOpen:!0,onClose:fs,primaryButton:e.jsx(q.Button,{color:"primary",onClick:()=>{l(),a==null||a()},children:e.jsx(n,{id:"gizmo.appeals.cancelAppealButton",defaultMessage:"Cancel appeal"})}),type:"warning",children:e.jsxs("div",{className:"flex flex-col gap-2 text-sm",children:[e.jsx("h2",{className:"text-lg font-semibold",children:e.jsx(n,{id:"gizmo.appeals.appealReviewingHeader",defaultMessage:"Reviewing your appeal"})}),e.jsx("p",{children:e.jsx(n,{id:"gizmo.appeals.appealSentModalText",defaultMessage:"During the review you can continue using “{gizmoName}” as your private GPT, but won’t be able to update it or share it with others.",values:{gizmoName:t==null?void 0:t.gizmo.display.name}})})]})})}function xa({appealState:s,onAppealClose:a,onAppealSubmitted:t}){const c=V(),l=xs(c,"4226692983"),[d,m]=b.useState(!1);return d?e.jsx(Js,{onClose:()=>{m(!1),t==null||t()}}):e.jsxs(e.Fragment,{children:[(s==null?void 0:s.showModal)==2&&e.jsx(Zs,{gizmoId:s.gizmoId,onClose:a}),(s==null?void 0:s.showModal)==1&&e.jsx(Xs,{gizmoId:s.gizmoId,sharingRecipient:s.sharingRecipient,categories:s.categories,moderationType:s.moderationType,sharingTargets:s.sharingTargets,appealAvailable:l,onClose:()=>a==null?void 0:a(),onAppealSubmitted:()=>m(!0)})]})}const $e=js(()=>ys(()=>import("./fck11x3djvav0rp9.js"),__vite__mapDeps([0,1])).then(s=>s.DirectorySyncResourceManagedIndication)),$s=()=>[A,$,Ns];function ea(s,a){return s.type===f.USER?s.user_id===a.user_id:s.type===f.GROUP?s.group_id===a.group_id:s.type===f.EMAIL?a.type===f.EMAIL&&s.user_email.toLowerCase()===a.user_email.toLowerCase():s.type===a.type}const sa={[f.USER]:r.User,[f.GROUP]:r.Group,[f.WORKSPACE]:r.Workspace,[f.ALL]:r.Marketplace};function aa(s){const a=sa[s.type];if(!a)throw new Error("Unknown sharing subject type: "+s.type);return I(v({},s),{type:a})}function ga({gizmo:s,publishedGizmo:a,updateGizmo:t,promoteGizmo:c,appealGizmo:l,setAppealState:d,showActionsModal:m,shareOnly:w,onClose:j,workspaceOwner:T=!1}){var ye,ke,ve,we,Me,be,Ne,_e,Pe;const F=V(),g=H(),N=Ye(),R=ks(),_=(ke=(ye=R==null?void 0:R.data)==null?void 0:ye.name)!=null?ke:"your workspace",M=vs(),L=ws(),[p,u]=b.useState(void 0);b.useEffect(()=>{var i;if(p==null)if(a!=null&&a.gizmo.display.categories&&(a==null?void 0:a.gizmo.display.categories.length)>0){const x=(i=L.data)==null?void 0:i.categories.find(U=>U.id===(a==null?void 0:a.gizmo.display.categories[0]));x&&u(x)}else L.data!=null&&u(L.data.categories[L.data.categories.length-1])},[L.data,p,a]);const[o,B]=b.useState((ve=s.sharingRecipient)!=null?ve:r.Private),[k,W]=b.useState((Me=(we=s.sharing)==null?void 0:we.subjects)!=null?Me:[]),[X,ts]=b.useState(null),[pe,xe]=b.useState(!1),ee=b.useRef(null),ge=b.useRef(k.length);b.useEffect(()=>{k.length>ge.current&&requestAnimationFrame(()=>{var i;(i=ee.current)==null||i.scrollTo({top:ee.current.scrollHeight,behavior:"smooth"})}),ge.current=k.length},[k]);const is=b.useCallback(()=>{var i;return!Z((i=s.sharing)==null?void 0:i.subjects,k)||s.sharingRecipient!==o},[s.sharing,s.sharingRecipient,o,k]),O=ue(),fe=Cs(s,o,(be=p==null?void 0:p.id)!=null?be:void 0),rs=fe.includes(Ls.MissingPublicActionPrivacyPolicyURL),se=s.tools.find(i=>i.type===Ms.JIT_PLUGIN&&!i.metadata.privacy_policy_url);if(X)return e.jsx(ia,{publishedGizmo:X,sharing:{recipient:o,subjects:k},workspaceName:_,onClose:j});function ns(i){k.find(x=>ea(x,i))||W([...k,i])}const P=bs(k);function ae(i){const x=k.filter(U=>[f.WORKSPACE,f.ALL].indexOf(U.type)===-1);i!=null&&x.push(i),W(x)}function ls(i){switch(B(i),i){case r.Marketplace:case r.Link:ae({type:f.ALL,capabilities:A});break;case r.Workspace:case r.WorkspaceLink:ae({type:f.WORKSPACE,capabilities:A});break;default:ae(null)}}function he(i){P!=null&&W(k.map(x=>x===P?I(v({},x),{capabilities:i}):x))}function os(i,x,U){return i.type===f.USER&&i.user_id.indexOf("__")===-1?I(v({},i),{user_id:i.user_id+"__"+(R==null?void 0:R.getWorkspaceId())}):i}async function cs(i,x){var Q,Se;if(pe)return;if(i&&!x)throw new Error("Cannot share a gizmo that hasn't been promoted before");if(!p)return;xe(!0);let z=k.map(os).map(aa);if(z=Ts(o,z,(Q=P==null?void 0:P.capabilities)!=null?Q:A),T)return!R||!x?(N.warning("Unable to change sharing settings"),j()):(await Ge.safePost("/accounts/{account_id}/gpts/{gizmo_id}/share",{parameters:{path:{account_id:R.id,gizmo_id:x}},requestBody:{sharing:z}}),N.success(g.formatMessage({id:"SWSzcY",defaultMessage:"Sharing settings updated"})),O.invalidateQueries({queryKey:["workspace"]}),j());if(i){if(!x||!a)throw new Error("No gizmo ID to share");try{const S={sharing:z};p&&(S.categories=[p.id]);const J=await ce.shareGizmo(x,S);J.error?re(o,J.sharing_targets)?(d==null||d({gizmoId:a.gizmo.id,sharingRecipient:o,categories:a.gizmo.display.categories,moderationType:Je.PublishBlocked,sharingTargets:J.sharing_targets,showModal:Xe.AppealAvailable}),j()):N.warning(g.formatMessage({id:"tmIKmp",defaultMessage:"Unable to share GPT"})):(O.setQueryData(["gizmo",{gizmoId:a.gizmo.id},{draft:!1}],Te=>J.resource),t==null||t(Te=>I(v({},Te),{sharingRecipient:o})),N.success(g.formatMessage({id:"SWSzcY",defaultMessage:"Sharing settings updated"})),j())}catch(S){return N.warning(g.formatMessage({id:"dKC65l",defaultMessage:"Failed to update sharing settings"})),j()}}else{if(c){const S=await c({subjects:z,recipient:o},p.id);x||(x=S==null?void 0:S.gizmo.id),ts(S!=null?S:null),t==null||t({liveVersion:(Se=S==null?void 0:S.gizmo.live_version)!=null?Se:void 0})}O.invalidateQueries({queryKey:["gizmo",{gizmoId:x}]})}xe(!1),O.invalidateQueries({queryKey:["gizmos"]}),O.refetchQueries({queryKey:["gizmos","discovery"]}),O.refetchQueries({queryKey:["gizmo",{gizmoId:x}]}),O.invalidateQueries({queryKey:["gizmo","userActionSettings",{gizmoId:x}]}),O.invalidateQueries({queryKey:["workspace"]}),t==null||t({sharing:{recipient:o,subjects:k},sharingRecipient:o},!1)}const je=!a||na(a.gizmo.author.user_id.split("__")[0],M==null?void 0:M.id);return e.jsx(K,{testId:"modal-share-gizmo",type:"success",className:"max-w-[555px]",size:"custom",isOpen:!0,onClose:j,primaryButton:re(o,s.sharingTargets)?e.jsx(G,{onClick:()=>l(o,p==null?void 0:p.id),children:e.jsx(n,{id:"HRzqKK",defaultMessage:"Appeal"})}):e.jsx(G,{onClick:()=>cs(w,a==null?void 0:a.gizmo.id),loading:pe,disabled:fe.length>0||!E(o,s.sharingTargets),children:w?e.jsx(n,{id:"BEKjVh",defaultMessage:"Save"}):e.jsx(n,{id:"24j5ts",defaultMessage:"Update"})}),secondaryButton:e.jsxs(e.Fragment,{children:[is()&&e.jsx("div",{className:"text-token-text-secondary absolute start-6 bottom-8 text-sm",children:e.jsx(n,{id:"9CkgC4",defaultMessage:"Unsaved changes"})}),a&&e.jsx(G,{color:"secondary",onClick:i=>Ve(F,a,N,i,g.formatMessage({id:"KdDqMm",defaultMessage:"Copied link to clipboard"})),children:e.jsx(n,{id:"wvL15a",defaultMessage:"Copy link"})})]}),title:g.formatMessage({id:"7JggXH",defaultMessage:"Share GPT"}),showCloseButton:!0,children:e.jsxs("div",{className:"flex flex-col space-y-4",children:[e.jsx(ra,{onAdd:i=>ns(i),publishedGizmo:a}),e.jsx("h3",{className:"text-base font-semibold",children:e.jsx(n,{id:"bNQXcV",defaultMessage:"Share with..."})}),e.jsxs("div",{ref:ee,className:"max-h-[200px] space-y-2 overflow-y-auto",children:[e.jsxs("div",{className:"mb-4 flex flex-row items-center justify-between space-x-3",children:[e.jsx("div",{className:"shrink-0 grow-0 self-start",children:je?e.jsx(Us,{user:M}):e.jsx(Be,{name:(Ne=a.gizmo.author.display_name)!=null?Ne:"User",initialsCount:2})}),e.jsx("div",{className:"grow text-base font-semibold",children:je?e.jsxs("div",{className:"flex flex-col",children:[e.jsx(n,{id:"U7tzof",defaultMessage:"{userName} (you)",values:{userName:M==null?void 0:M.name}}),e.jsx("span",{className:"text-token-text-secondary -mt-1 text-sm",children:M==null?void 0:M.email})]}):e.jsx(n,{id:"scRZqV",defaultMessage:"{userName} (builder)",values:{userName:a.gizmo.author.display_name}})})]}),k.map((i,x)=>le(i)&&e.jsxs("div",{className:"mb-4 flex flex-row items-center justify-between space-x-3",children:[e.jsx(Be,{name:i.type===f.GROUP?i.group_name:"".concat(i.user_name," ").concat(i.user_email),initialsCount:i.type===f.USER?2:1,className:de("shrink-0 grow-0",i.type===f.USER&&"self-start")}),e.jsxs("div",{className:"flex grow flex-col",children:[e.jsxs("span",{className:"flex flex-row",children:[e.jsx("span",{className:"me-2 text-base font-semibold",children:i.type===f.GROUP?i.group_name:i.user_name}),i.type===f.GROUP&&i.is_scim_managed&&e.jsx($e,{})]}),i.type===f.USER&&e.jsx("span",{className:"text-token-text-secondary -mt-1 text-sm",children:i.user_email})]}),e.jsxs(C.Root,{children:[e.jsxs(C.Trigger,{className:"text-token-text-secondary text-base whitespace-nowrap",children:[e.jsx(n,v({},D(i.capabilities))),e.jsx(oe,{className:"icon"})]}),e.jsx(C.Portal,{children:e.jsxs(C.Content,{className:"max-w-[320px]",children:[$s().map((U,z)=>e.jsx(ne,{capabilities:U,selected:Z(U,i.capabilities),onClick:()=>{W(k.map(Q=>Q===i?I(v({},Q),{capabilities:U}):Q))}},z)),e.jsx(C.Separator,{className:"my-2"}),e.jsx(C.Item,{onClick:()=>W(k.filter(U=>U!==i)),color:"danger",icon:As,children:e.jsx(n,{id:"NU0BOB",defaultMessage:"Remove"})})]})})]})]},x))]}),e.jsx("hr",{className:"border-token-border-medium"}),e.jsx("h3",{className:"text-base font-semibold",children:e.jsx(n,{id:"uqD7Y8",defaultMessage:"Access"})}),e.jsxs("div",{className:"-ms-3.5 flex flex-row items-center justify-between space-x-3",children:[e.jsxs(y.Root,{value:o,onValueChange:i=>ls(i),children:[e.jsxs(y.Trigger,{children:[e.jsx(y.Value,{}),e.jsx(y.Icon,{})]}),e.jsx(y.Portal,{children:e.jsxs(y.Content,{children:[e.jsxs(y.Group,{children:[e.jsx(y.Label,{children:e.jsx(n,{id:"YIQwaP",defaultMessage:"Private"})}),o===r.User?e.jsx(y.Item,{value:r.User,children:e.jsx(Y,{shareLevel:r.User,workspaceName:_})}):e.jsx(y.Item,{value:r.Private,children:e.jsx(Y,{shareLevel:r.Private,workspaceName:_})})]}),e.jsx(y.Separator,{}),e.jsx(Ae,{triggerAs:null,label:g.formatMessage({id:"n0m61x",defaultMessage:"Your workspace has disabled sharing with the workspace."}),side:"bottom",disabled:E("workspace",s.sharingTargets),children:e.jsxs(y.Group,{children:[e.jsx(y.Label,{children:_}),e.jsx(y.Item,{value:r.WorkspaceLink,disabled:!E(r.WorkspaceLink,s.sharingTargets)&&!E(r.Workspace,s.sharingTargets),children:e.jsx(Y,{shareLevel:r.WorkspaceLink,workspaceName:_})}),e.jsx(y.Item,{value:r.Workspace,disabled:!E("workspace",s.sharingTargets),children:e.jsx(Y,{shareLevel:r.Workspace,workspaceName:_})})]})}),e.jsx(y.Separator,{}),e.jsx(Ae,{triggerAs:null,label:g.formatMessage({id:"IHnort",defaultMessage:"Your workspace has disabled public sharing."}),side:"bottom",disabled:E("marketplace",s.sharingTargets),children:e.jsxs(y.Group,{children:[e.jsx(y.Label,{children:e.jsx(n,{id:"PjY9bi",defaultMessage:"Public"})}),e.jsx(y.Item,{value:r.Link,disabled:!E("link",s.sharingTargets),children:e.jsx(Y,{shareLevel:r.Link,workspaceName:_})}),e.jsx(y.Item,{disabled:!E("marketplace",s.sharingTargets),value:r.Marketplace,children:e.jsx(Y,{shareLevel:r.Marketplace,workspaceName:_})})]})})]})})]}),o!==r.Private&&o!==r.User&&e.jsxs(C.Root,{children:[e.jsxs(C.Trigger,{className:"text-token-text-secondary text-base whitespace-nowrap",children:[P==null?e.jsx(n,v({},D(A))):e.jsx(n,v({},D(P.capabilities))),e.jsx(oe,{className:"icon"})]}),e.jsx(C.Portal,{children:e.jsxs(C.Content,{className:"max-w-[320px]",children:[e.jsx(ne,{onClick:()=>he(A),capabilities:A,selected:Z(P==null?void 0:P.capabilities,A)}),o!==r.Marketplace&&o!==r.Link&&e.jsx(ne,{onClick:()=>he($),capabilities:$,selected:Z(P==null?void 0:P.capabilities,$)})]})})]})]}),rs&&e.jsx("div",{className:"text-xs text-red-500",children:e.jsx(n,{id:"/iw1Iv",defaultMessage:"Public actions require valid privacy policy URLs. Click <fixlink>here</fixlink> to update.",values:{fixlink:i=>e.jsx("button",{onClick:()=>{m==null||m(se==null?void 0:se.metadata.action_id),j()},className:"underline",children:i})}})}),(o===r.Marketplace||o===r.Workspace)&&(E(o,s.sharingTargets)?e.jsx(as,{gizmo:s,category:p==null?void 0:p.id,categories:(_e=L.data)==null?void 0:_e.categories,onCategoryChange:i=>u(i)}):re(o,s.sharingTargets)?e.jsx("div",{className:"pb-2 text-xs text-red-500",children:e.jsx(Ze,{sharingRecipient:o,moderatedFields:(Pe=me(o,s.sharingTargets))!=null?Pe:[],appealAvailable:!0})}):e.jsx("div",{className:"pb-2 text-xs text-red-500",children:e.jsx(n,{id:"BzqqKH",defaultMessage:"Your workspace's settings don't allow this level of access. An owner of the workspace can change this setting in the workspace's GPTs settings."})}))]})})}const es=De({private:{id:"pSXBWQ",defaultMessage:"Invite-only"},user:{id:"pSXBWQ",defaultMessage:"Invite-only"},group:{id:"pSXBWQ",defaultMessage:"Invite-only"},email:{id:"pSXBWQ",defaultMessage:"Invite-only"},workspace_link:{id:"Giaxt1",defaultMessage:"Anyone at {workspaceName} with the link"},workspace:{id:"XLHaTU",defaultMessage:"{workspaceName}"},link:{id:"uP1+Ri",defaultMessage:"Anyone with the link"},marketplace:{id:"82Ilac",defaultMessage:"GPT Store"}}),ta=De({workspace:{id:"1kpopF",defaultMessage:"Published to {workspaceName}"},marketplace:{id:"hdTRpJ",defaultMessage:"Published to GPT Store"}});function D(s){return s.can_write?h({id:"SubCqD",defaultMessage:"Can edit"}):s.can_view_config?h({id:"V6OjbX",defaultMessage:"Can view settings"}):s.can_read?h({id:"/0j34W",defaultMessage:"Can chat"}):h({id:"x2E8ET",defaultMessage:"Unknown"})}function ne({capabilities:s,selected:a,onClick:t}){let c=null;s.can_write?c=qs:s.can_view_config?c=Ks:s.can_read&&(c=Qs);const l=s.can_write?e.jsx(n,{id:"wKFMT1",defaultMessage:"Edit settings, duplicate, and chat"}):s.can_view_config?e.jsx(n,{id:"Y/J4TZ",defaultMessage:"See settings, duplicate, and chat"}):s.can_read?e.jsx(n,{id:"PvgEQP",defaultMessage:"Chat with this GPT only"}):null;return e.jsxs(C.Item,{className:"flex h-auto flex-row items-center px-3 py-3",onClick:t,icon:c,children:[e.jsxs("div",{className:"me-1 flex grow flex-col",children:[e.jsx("span",{className:"mb-0.5 text-base leading-tight",children:e.jsx(n,v({},D(s)))}),e.jsx("span",{className:"text-token-text-secondary text-xs",children:l})]}),e.jsx(_s,{className:de("icon-lg shrink-0",!a&&"invisible")})]})}const ss={private:ie,user:ie,group:ie,workspace_link:Ie,workspace:Is,link:Ie,marketplace:Bs};function Y({shareLevel:s,workspaceName:a,hasInviteSharing:t=!0}){(s===r.User||s===r.Group)&&(s=r.Private);const c=ss[s];return e.jsxs("div",{className:"flex flex-row items-center gap-3 text-sm",children:[e.jsx(c,{className:"icon text-token-text-secondary"}),e.jsx("div",{className:"pt-px text-start",children:!t&&s===r.Private?e.jsx(n,{id:"vVJhYB",defaultMessage:"Only me"}):e.jsx(n,I(v({},es[s]),{values:{workspaceName:a}}))})]})}function ia({publishedGizmo:s,sharing:a,workspaceName:t,onClose:c}){var T,F;const l=V(),d=a.recipient,m=ss[d],w=H(),j=Ye();return e.jsxs(K,{testId:"modal-gizmo-updated",isOpen:!0,onClose:c,showCloseButton:!0,className:"w-[304px]",title:e.jsx(n,{id:"5CEceY",defaultMessage:"GPT Updated"}),primaryButton:e.jsx(G,{onClick:()=>{window.location.href="/g/".concat(s.gizmo.id)},children:e.jsx(n,{id:"RF75o5",defaultMessage:"View GPT"})}),secondaryButton:e.jsx(G,{color:"secondary",onClick:g=>Ve(l,s,j,g,w.formatMessage({id:"KdDqMm",defaultMessage:"Copied link to clipboard"})),children:e.jsx(n,{id:"9hLOl9",defaultMessage:"Copy link"})}),type:"success",children:[e.jsx(as,{gizmo:{profilePictureUrl:(T=s.gizmo.display.profile_picture_url)!=null?T:void 0,name:s.gizmo.display.name}}),a.subjects.filter(g=>le(g)).length>0&&e.jsxs("div",{className:"my-4",children:[e.jsx("h4",{className:"text-token-text-secondary text-xs font-semibold",children:e.jsx(n,{id:"/paYH9",defaultMessage:"Shared with"})}),a.subjects&&a.subjects.map((g,N)=>le(g)&&e.jsxs("div",{className:"flex flex-row items-center justify-between space-x-3 py-2",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-base font-semibold",children:g.type===f.GROUP?g.group_name:g.user_name}),g.type===f.USER&&e.jsxs(e.Fragment,{children:[e.jsx("br",{}),e.jsx("span",{className:"text-token-text-secondary text-sm",children:g.user_email})]})]}),e.jsx("span",{className:"text-token-text-secondary",children:e.jsx(n,v({},D(g.capabilities)))})]},N))]}),e.jsxs("div",{className:"my-4",children:[e.jsx("h4",{className:"text-token-text-secondary text-xs font-semibold",children:e.jsx(n,{id:"q9XNZ7",defaultMessage:"Access"})}),e.jsxs("div",{className:"ms-[3px] flex flex-row items-center py-3 text-start text-base font-semibold",children:[e.jsx(m,{className:"md:icon-lg me-3 h-6 w-6 shrink-0"}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"font-semibold",children:e.jsx(n,I(v({},(F=ta[d])!=null?F:es[d]),{values:{workspaceName:t}}))}),(d===r.Workspace||d===r.Marketplace)&&e.jsx("span",{className:"text-token-text-secondary text-xs"})]})]})]})]})}function as({gizmo:s,category:a,categories:t,onCategoryChange:c}){const{data:l,isLoading:d}=Ps(),m=t==null?void 0:t.find(w=>w.id===a);return e.jsxs("div",{children:[e.jsxs("div",{className:de("bg-token-main-surface-secondary mb-[1px] flex flex-row items-center space-x-2 p-4",d&&"invisible",t?"rounded-t-lg":"rounded-lg"),children:[e.jsx(Os,{isFirstParty:!1,className:"h-11 w-11",src:s.profilePictureUrl}),e.jsxs("div",{className:"flex grow flex-col space-y-0",children:[e.jsx("span",{className:"text-base font-semibold",children:s.name}),e.jsx(zs,{builderName:l==null?void 0:l.display_name,builderUrl:l==null?void 0:l.website_url,socials:[l==null?void 0:l.socials.linkedin,l==null?void 0:l.socials.github].filter(w=>w!=null),className:"text-token-text-secondary text-xs"})]})]}),t&&e.jsxs("div",{className:"bg-token-main-surface-secondary flex min-h-[56px] flex-row items-center justify-between space-x-2 rounded-b-lg px-4 text-base",children:[e.jsx("span",{className:"font-semibold",children:e.jsx(n,{id:"JcA4/t",defaultMessage:"Category"})}),e.jsx("div",{className:"text-token-text-secondary",children:c?e.jsx(Ss,{size:"small",triggerButton:e.jsxs("button",{className:"flex items-center gap-1",children:[m==null?void 0:m.title,e.jsx(oe,{className:"icon"})]}),children:t.map((w,j)=>e.jsx(C.Item,{onClick:()=>c(w),children:w.title},j))}):e.jsx("span",{className:"text-token-text-secondary",children:m==null?void 0:m.title})})]})]})}function ra({onAdd:s,publishedGizmo:a}){var M,L,p;const t=H(),c=V(),l=Qe(c),[d,m]=b.useState(""),j=(M=Es(l==null?void 0:l.id,0,d,5).data)==null?void 0:M.items.filter(u=>u.account_user_id!==(a==null?void 0:a.gizmo.author.user_id)),{data:T}=Rs({queryKey:[l==null?void 0:l.id,"groups","filtered",d],queryFn:()=>Ge.safeGet("/accounts/{account_id}/groups",{parameters:{path:{account_id:l.id},query:{query:d,offset:0,orderby:"@score",limit:20}}}),enabled:d.trim()!==""&&l!=null&&!!l.getWorkspaceId()});function F(u,o,B){s({type:f.GROUP,group_id:u,group_name:o,capabilities:v({},A),is_scim_managed:B}),m("")}function g(u,o,B){l&&(s({type:f.USER,user_id:u,user_name:o,user_email:B,capabilities:v({},A)}),m(""))}const N=l!=null&&l.isEnterprisey()?t.formatMessage({id:"xy/AMO",defaultMessage:"Add people and groups from your workspace"}):t.formatMessage({id:"Lh9njB",defaultMessage:"Add people from your workspace"}),{eligible:R,markAsViewed:_}=Fs(Ee.hasSeenMultipleGPTEditorsTooltip);return e.jsx(e.Fragment,{children:e.jsx("div",{className:"flex w-full flex-row space-x-3",children:e.jsx(Ws,{announcementKey:Ee.hasSeenMultipleGPTEditorsTooltip,show:R,side:"right",align:"center",className:"w-full",sideOffset:0,contentClassName:"z-100",childrenWrapperClassName:"w-full",theme:"bright",dismissOnOutsideClick:!0,badge:"new",description:t.formatMessage({id:"SR33A6",defaultMessage:"You can now add editors to collaborate on your GPTs."}),onDismiss:_,children:e.jsx(Ys,{label:N,name:"share-with-input",inputValue:d,onInputChange:m,suggestions:[...(L=j==null?void 0:j.map(u=>({id:u.id,className:"flex flex-col rounded-xs p-1 hover:bg-token-main-surface-tertiary rounded-xs p-1 text-sm",focusedClassName:"bg-token-main-surface-tertiary",onClick:()=>{var o;return g(u.account_user_id,u.name,(o=u.email)!=null?o:"")},children:e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"w-full font-semibold",children:u.name}),e.jsx("span",{className:"text-token-text-secondary text-sm",children:u.email})]})})))!=null?L:[],...(p=T==null?void 0:T.items.map(u=>({id:u.id,className:"flex flex-col rounded-xs p-1 hover:bg-token-main-surface-tertiary rounded-xs p-1 text-sm",focusedClassName:"bg-token-main-surface-tertiary",onClick:()=>{var o;return F(u.id,u.name,(o=u.is_scim_managed)!=null?o:!1)},children:e.jsxs("span",{className:"flex flex-col",children:[e.jsxs("span",{className:"flex flex-row",children:[e.jsx("span",{className:"me-2 font-semibold",children:u.name}),u.is_scim_managed&&e.jsx($e,{})]}),e.jsx("span",{className:"text-token-text-secondary text-sm",children:e.jsx(n,{id:"r3Rx6X",defaultMessage:"{numMembers, plural, one {1 member} other {# members}}",values:{numMembers:u.num_members}})})]})})))!=null?p:[]]})})})})}function na(s,a){return s===void 0||a===void 0?!1:s.split("__")[0]===a.split("__")[0]}export{Xe as A,as as G,Je as M,ga as S,Y as a,ss as b,ia as c,xa as d,pa as g,E as i,aa as s};
//# sourceMappingURL=c5d5as11kwvue83v.js.map
