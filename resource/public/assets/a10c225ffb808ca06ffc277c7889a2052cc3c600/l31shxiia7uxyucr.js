import{j as t,M as m,c as se,b as ue,A as le,m as re}from"./jj85rqzpbnvv3emr.js";import{Y as xe,gZ as pe,m as fe,dq as O,g_ as me,g$ as ge,h0 as he,h1 as je,h2 as ve,h3 as Ce,h4 as ke,h5 as ye}from"./mclphevd122040jw.js";import{e as j,fw as we,eE as K,fx as be,ax as Ne,P as Te,T as Ie}from"./lef5ym39glv4981l.js";const Me=({isExpanded:d,agentVisualMode:e,setAgentVisualMode:s,isStreaming:i,isStopping:l,isKAUR1BR5:o})=>{const n=d||i,r=xe(),{open:c}=pe(),{clientThreadId:u}=fe();return t.jsxs("div",{className:j("flex flex-1 flex-row items-center gap-2 px-1",i?"justify-end":"justify-between"),children:[!i&&t.jsx(O,{className:j("icon-sm text-token-text-secondary inline align-middle transition-transform",d&&"rotate-90")}),!l&&n&&t.jsx("div",{className:"flex flex-row items-center justify-center gap-2",children:t.jsxs(we,{side:"bottom",size:"small",contentClassName:"text-sm",triggerButton:t.jsx("button",{onPointerDown:a=>a.stopPropagation(),onClick:a=>a.stopPropagation(),className:"hover:bg-token-bg-tertiary flex max-h-6 items-center justify-center overflow-visible rounded-md p-1",children:t.jsx(be,{className:"text-token-text-secondary size-5"})}),children:[e==="visual-cot"&&t.jsxs(K.Item,{onClick:a=>{a.stopPropagation(),s==null||s("list-cot"),ce("list-cot")},children:[t.jsx(me,{className:"icon"}),t.jsx(m,{id:"cot.listView",defaultMessage:"Activity"})]}),e==="list-cot"&&t.jsxs(K.Item,{onClick:a=>{a.stopPropagation(),s==null||s("visual-cot"),ce("visual-cot")},children:[t.jsx(ge,{className:"icon"}),t.jsx(m,{id:"cot.desktopView",defaultMessage:"Desktop view"})]}),!r&&t.jsxs(K.Item,{onClick:a=>{a.stopPropagation(),c()},children:[t.jsx(he,{className:"icon"}),o?t.jsx(m,{id:"qMkIYk",defaultMessage:"Open tabs"}):t.jsx(m,{id:"cot.takeOverBrowser",defaultMessage:"Take over browser"})]}),!r&&i&&t.jsxs(K.Item,{onClick:()=>je(u,void 0,{clientInitiated:!0,reason:"agent_cot_stop",isLastTurnAgent:!0}),children:[t.jsx(ve,{className:"icon"}),t.jsx(m,{id:"cot.stop",defaultMessage:"Stop"})]})]})})]})},ce=d=>{Ne.addAction("agent.cot_view_change",{cot_view:d}),Te.logEvent("Agent CoT View Change",{cot_view:d})},Re=d=>{"use forget";const e=se.c(65),{isExpanded:s,isExpandDisabled:i,showChunkIcon:l,isComplete:o,latestHeadline:n,latestChunk:r,counters:c,onToggleExpanded:u,skipTitle:a,onSkip:x,shouldDisplayVisualCoT:g,agentVisualMode:$,setAgentVisualMode:F,isStreaming:B,interruptionInProgress:U,isAgentVisualCoT:oe,isKAUR1BR5:ae,wasInterrupted:ie,isAgentTurn:de,isGlauxTurn:J}=d,f=s===void 0?!1:s,h=i===void 0?!1:i,X=l===void 0?!0:l,A=g===void 0?!1:g,v=oe===void 0?!1:oe,Y=ae===void 0?!1:ae,Z=ie===void 0?!1:ie,C=ue();let _;e[0]!==C||e[1]!==o||e[2]!==J||e[3]!==n||e[4]!==Z?(_=n&&n.length>0?n:o?Z?C.formatMessage({id:"tD55er",defaultMessage:"Stopped thinking"}):C.formatMessage({id:"nkvZJE",defaultMessage:"Thought"}):J?C.formatMessage({id:"4XsLlK",defaultMessage:"Searching internal apps"}):C.formatMessage({id:"hgnsat",defaultMessage:"Thinking"}),e[0]=C,e[1]=o,e[2]=J,e[3]=n,e[4]=Z,e[5]=_):_=e[5];const H=_,p=Ce(!!de),G=o&&c&&(c.queries>0||c.sources>0)?void 0:!1;let k;e[6]!==c?(k=c&&t.jsx(Ee,{counters:c}),e[6]=c,e[7]=k):k=e[7];const Q=p&&"flex-row";let y;e[8]!==Q?(y=j("flex w-full flex-col items-start justify-between text-start",Q),e[8]=Q,e[9]=y):y=e[9];const W=(f||B)&&A&&"justify-between";let w;e[10]!==W?(w=j("flex w-full items-center gap-0.5",W),e[10]=W,e[11]=w):w=e[11];const ee=!o&&"loading-shimmer font-medium";let b;e[12]!==ee?(b=j(ee),e[12]=ee,e[13]=b):b=e[13];const te=o&&(h?"text-token-text-secondary dark:text-[var(--interactive-label-tertiary-default)]":"text-token-text-secondary hover:text-token-text-primary dark:hover:text-token-text-primary dark:text-[var(--interactive-label-tertiary-default)]");let N;e[14]!==te?(N=j("flex items-center gap-1 truncate text-start align-middle",te),e[14]=te,e[15]=N):N=e[15];let L,V;e[16]===Symbol.for("react.memo_cache_sentinel")?(L={opacity:1},V={type:"spring",duration:.3},e[16]=L,e[17]=V):(L=e[16],V=e[17]);let T;e[18]!==o||e[19]!==r||e[20]!==X?(T=X&&(r==null?void 0:r.type)!==ke.Recap&&t.jsx(ye,{chunk:r,isAnimated:!o,size:"medium",className:"text-token-text-secondary",isHeadline:!0}),e[18]=o,e[19]=r,e[20]=X,e[21]=T):T=e[21];let I;e[22]!==p||e[23]!==v?(I=p&&!v&&t.jsx(O,{className:"icon-xs"}),e[22]=p,e[23]=v,e[24]=I):I=e[24];let M;e[25]!==H||e[26]!==N||e[27]!==T||e[28]!==I?(M=t.jsx(le,{mode:"popLayout",children:t.jsxs(re.span,{className:N,initial:!1,animate:L,transition:V,children:[T,H,I]},H)}),e[25]=H,e[26]=N,e[27]=T,e[28]=I,e[29]=M):M=e[29];let S;e[30]!==b||e[31]!==M?(S=t.jsx("span",{className:b,children:M}),e[30]=b,e[31]=M,e[32]=S):S=e[32];let E;e[33]!==$||e[34]!==U||e[35]!==v||e[36]!==h||e[37]!==f||e[38]!==Y||e[39]!==B||e[40]!==F||e[41]!==A?(E=(!h||A)&&v&&t.jsx(Se,{isExpanded:f,shouldDisplayVisualCoT:A,agentVisualMode:$,setAgentVisualMode:F,isStreaming:B,isStopping:!!U,isKAUR1BR5:Y}),e[33]=$,e[34]=U,e[35]=v,e[36]=h,e[37]=f,e[38]=Y,e[39]=B,e[40]=F,e[41]=A,e[42]=E):E=e[42];let q;e[43]!==h||e[44]!==u||e[45]!==w||e[46]!==S||e[47]!==E?(q=t.jsxs("button",{disabled:h,onClick:u,className:w,children:[S,E]}),e[43]=h,e[44]=u,e[45]=w,e[46]=S,e[47]=E,e[48]=q):q=e[48];let D;e[49]!==p||e[50]!==o||e[51]!==f||e[52]!==x||e[53]!==a?(D=!o&&(!f||p&&f)&&x&&t.jsx(re.div,{initial:{opacity:0},exit:{opacity:0},animate:{opacity:1},transition:{type:"spring",duration:.3},children:t.jsx("button",{onClick:ne=>{x(ne),ne.stopPropagation()},className:"text-token-text-tertiary hover:text-token-text-primary whitespace-nowrap",children:t.jsxs("span",{className:p?"underline decoration-dotted":"flex items-center gap-0.5",children:[a!=null?a:t.jsx(m,{id:"+sOejI",defaultMessage:"Skip"}),!p&&t.jsx(O,{className:"icon-xs"})]})})}),e[49]=p,e[50]=o,e[51]=f,e[52]=x,e[53]=a,e[54]=D):D=e[54];let P;e[55]!==D?(P=t.jsx(le,{mode:"popLayout",children:D}),e[55]=D,e[56]=P):P=e[56];let R;e[57]!==y||e[58]!==q||e[59]!==P?(R=t.jsx("div",{className:"relative w-full text-start",children:t.jsxs("div",{className:y,children:[q,P]})}),e[57]=y,e[58]=q,e[59]=P,e[60]=R):R=e[60];let z;return e[61]!==k||e[62]!==R||e[63]!==G?(z=t.jsx(Ie,{open:G,align:"start",side:"bottom",label:k,children:R}),e[61]=k,e[62]=R,e[63]=G,e[64]=z):z=e[64],z},Se=d=>{"use forget";const e=se.c(11),{isExpanded:s,shouldDisplayVisualCoT:i,agentVisualMode:l,setAgentVisualMode:o,isStreaming:n,isStopping:r,isKAUR1BR5:c}=d;if(i){let g;return e[0]!==l||e[1]!==s||e[2]!==c||e[3]!==r||e[4]!==n||e[5]!==o?(g=t.jsx(Me,{isExpanded:s,agentVisualMode:l,setAgentVisualMode:o,isStreaming:n,isStopping:r,isKAUR1BR5:c}),e[0]=l,e[1]=s,e[2]=c,e[3]=r,e[4]=n,e[5]=o,e[6]=g):g=e[6],g}const u=s&&"rotate-90";let a;e[7]!==u?(a=j("icon-sm text-token-text-secondary inline align-middle transition-transform",u),e[7]=u,e[8]=a):a=e[8];let x;return e[9]!==a?(x=t.jsx(O,{className:a}),e[9]=a,e[10]=x):x=e[10],x},Ee=d=>{"use forget";const e=se.c(11),{counters:s}=d;let i;e[0]!==s.queries?(i=s.queries>0&&t.jsx(m,{id:"JPkpiw",defaultMessage:"{queriesCount} searches",values:{queriesCount:s.queries}}),e[0]=s.queries,e[1]=i):i=e[1];let l;e[2]!==s.queries||e[3]!==s.sources?(l=s.queries>0&&s.sources>0&&t.jsx(t.Fragment,{children:" Â· "}),e[2]=s.queries,e[3]=s.sources,e[4]=l):l=e[4];let o;e[5]!==s.sources?(o=s.sources>0&&t.jsx(m,{id:"QnBAXR",defaultMessage:"{sourcesCount} sources",values:{sourcesCount:s.sources}}),e[5]=s.sources,e[6]=o):o=e[6];let n;return e[7]!==i||e[8]!==l||e[9]!==o?(n=t.jsxs(t.Fragment,{children:[i,l,o]}),e[7]=i,e[8]=l,e[9]=o,e[10]=n):n=e[10],n};export{Re as C};
//# sourceMappingURL=l31shxiia7uxyucr.js.map
