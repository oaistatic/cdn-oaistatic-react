var K=Object.defineProperty,Q=Object.defineProperties;var Y=Object.getOwnPropertyDescriptors;var B=Object.getOwnPropertySymbols;var X=Object.prototype.hasOwnProperty,G=Object.prototype.propertyIsEnumerable;var F=(e,s,t)=>s in e?K(e,s,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[s]=t,N=(e,s)=>{for(var t in s||(s={}))X.call(s,t)&&F(e,t,s[t]);if(B)for(var t of B(s))G.call(s,t)&&F(e,t,s[t]);return e},P=(e,s)=>Q(e,Y(s));import{c as J,b as Z,r as A,d as V,j as o,M as k}from"./jj85rqzpbnvv3emr.js";import{oC as ee,aE as te,i as se,on as oe,O as ne,oD as w,oE as ae,ax as ce,ae as ie,bw as q,C as re,dP as le,ai as ue,P as de,dM as fe}from"./lef5ym39glv4981l.js";import{cX as he}from"./mclphevd122040jw.js";function me(e){switch(e){case w.SSOMismatch:return{title:a.cannotAccessWorkspace,description:a.ssoMismatchDescription};case w.RequireSSOLogin:return{title:a.cannotAccessWorkspace,description:a.requireSSODescription};case w.UnexpectedSSOLogin:return{title:a.cannotAccessWorkspace,description:a.unexpectedSSODescription}}}const Se=2e3;function Ce(){"use forget";var I,L;const e=J.c(33),s=ee(),t=te(),j=Z(),i=se(),R=oe();let m;e[0]!==i?(m=()=>ae(i).isFetched,e[0]=i,e[1]=m):m=e[1];const W=ne(m),c=s==null?void 0:s.errorCode,f=s!=null&&W&&R==null&&!!t,[z,H]=A.useState(!1);let S,g;e[2]!==f?(S=()=>{f&&setTimeout(()=>{H(!0)},Se)},g=[f],e[2]=f,e[3]=S,e[4]=g):(S=e[3],g=e[4]),A.useEffect(S,g);const $=c===w.UnexpectedSSOLogin,h=f&&($?z:!0),n=he();let p,x;if(e[5]!==n||e[6]!==c||e[7]!==h?(p=()=>{var U;if(!c||!h)return;const _=(U=n==null?void 0:n.split("@"))==null?void 0:U[1];ce.addError("SSO Catch All Modal: ".concat(c," for ").concat(n!=null?n:"unknown user"),{sso_error:c,email:n,email_hostname:_})},x=[c,h,n],e[5]=n,e[6]=c,e[7]=h,e[8]=p,e[9]=x):(p=e[8],x=e[9]),A.useEffect(p,x),!h)return null;let O;e[10]!==j||e[11]!==s.accountName||e[12]!==(t==null?void 0:t.name)?(O=(L=(I=s==null?void 0:s.accountName)!=null?I:t==null?void 0:t.name)!=null?L:j.formatMessage(a.workspacePlaceholder),e[10]=j,e[11]=s.accountName,e[12]=t==null?void 0:t.name,e[13]=O):O=e[13];const T=O;let M;e[14]!==i||e[15]!==t?(M=()=>{const _=t!=null&&t.ssoConnectionName?{connection:t.ssoConnectionName}:void 0;ie(i,{fallbackScreenHint:"login",additionalAuthParams:_})},e[14]=i,e[15]=t,e[16]=M):M=e[16];const v=M;let C;e[17]!==s.errorCode?(C=me(s.errorCode),e[17]=s.errorCode,e[18]=C):C=e[18];const{title:D,description:b}=C;let r;e[19]!==D?(r=o.jsx("div",{className:"flex flex-col",children:o.jsx("div",{className:"text-lg",children:o.jsx(k,N({},D))})}),e[19]=D,e[20]=r):r=e[20];let l;e[21]!==T?(l=o.jsx(k,P(N({},a.authenticateNotice),{values:{workspaceName:T}})),e[21]=T,e[22]=l):l=e[22];let u;e[23]!==v||e[24]!==l?(u=o.jsx(q.Button,{onClick:v,color:"primary",children:l}),e[23]=v,e[24]=l,e[25]=u):u=e[25];let y;e[26]===Symbol.for("react.memo_cache_sentinel")?(y=o.jsx(q.Button,{onClick:ge,children:o.jsx(k,{id:"KlMYRb",defaultMessage:"Log out"})}),e[26]=y):y=e[26];let d;e[27]!==b?(d=o.jsx("div",{className:"flex flex-col space-y-4",children:o.jsx("div",{children:o.jsx(k,N({},b))})}),e[27]=b,e[28]=d):d=e[28];let E;return e[29]!==u||e[30]!==d||e[31]!==r?(E=o.jsx(re,{testId:"modal-sso-catch-all",isOpen:!0,onClose:ue,type:"warning",size:"custom",className:"max-w-3xl",title:r,icon:le,primaryButton:u,secondaryButton:y,children:d}),e[29]=u,e[30]=d,e[31]=r,e[32]=E):E=e[32],E}function ge(){de.logLogOutButtonClicked({location:"sso_catch_all_modal"}),fe()}const a=V({authenticateNotice:{id:"zF1QJE",defaultMessage:"Authenticate to {workspaceName}"},workspacePlaceholder:{id:"IIY4N4",defaultMessage:"this workspace"},cannotAccessWorkspace:{id:"IlXHdd",defaultMessage:"Cannot Access This Workspace"},ssoMismatchDescription:{id:"xSuU9q",defaultMessage:"The SSO you logged in with does not match the SSO registered for this workspace. Try re-authenticating with that SSO."},unexpectedSSODescription:{id:"uSkRZx",defaultMessage:"This workspace doesn't have an SSO associated with it, but you're trying to log in with SSO. Try logging in with social authentication (i.e. Google) or with your password."},requireSSODescription:{id:"akKMy1",defaultMessage:"Your organization requires that you log in with SSO to access this workspace"}});export{Ce as default};
//# sourceMappingURL=ikp2xm3x9qblaabk.js.map
