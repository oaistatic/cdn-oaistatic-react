var h=(s,e)=>(e=Symbol[s])?e:Symbol.for("Symbol."+s);var g=(s,e,r)=>(e=s[h("asyncIterator")])?e.call(s):(s=s[h("iterator")](),e={},r=(n,i)=>(i=s[n])&&(e[n]=c=>new Promise((a,p,d)=>(c=i.call(s,c),d=c.done,Promise.resolve(c.value).then(u=>a({value:u,done:d}),p)))),r("next"),r("return"),e);import{G as R,ad as M,i as F,g as B,r as l,u as H,j as t}from"./jj85rqzpbnvv3emr.js";import{i as A,eJ as T,hE as v,fr as D,jI as N,ci as Q,cm as y,nK as _,bG as $,mH as k,gm as G,fl as L,e$ as O,be as K}from"./lef5ym39glv4981l.js";import{C as q}from"./erm6n5lmbxodgs50.js";import{r as J,u as V,s as W,C as j,a as z,g as U,b as P,T as X,c as Y}from"./mclphevd122040jw.js";import{T as Z,C as ee}from"./m1igv34szcbu0myd.js";import{g as te}from"./g9xi6m5yzu4rtfn2.js";import{C as b,T as se}from"./m1gt25yur8ncekq0.js";import"./lbaueofbjv8jfqwm.js";import"./zta1pq4ds1hak11y.js";import"./ns51nblw8ziscsgd.js";import"./nfygy4vif6crzpny.js";import"./iqw8c7pica2coyb9.js";import"./dl9z2ehd50icy9od.js";import"./g2yrrlnprx92uhjb.js";import"./kq1ir6pxp9hst9p9.js";import"./f3wj76d1ulqyss85.js";import"./b2bzebhpy3vjflr5.js";import"./moqemqor8gto0ynb.js";import"./kl7c6054usfnqmd4.js";import"./k97n0y6ba9c9h39c.js";import"./hhs3uwxj7uii5eg7.js";import"./gwaaxp36jr4o1a8o.js";import"./l66h8h301eaq59ck.js";import"./hzcock7l6ec8fnr2.js";import"./fue7kd61xxcv74sk.js";import"./ng0sx063g0r0whhb.js";import"./fvmxudg74tbhlabl.js";import"./hnotrmacgvnfyexv.js";import"./irqko7c1s7qpl41n.js";import"./bx2wdn43543b9ysc.js";import"./n5wrqpcxv1sjah44.js";import"./kkl7694f44ns8yp6.js";import"./mw2u7timj0qnsnvj.js";import"./dvqe6kc43fkjsavv.js";import"./nq5i976pifkrt40a.js";import"./fnnulb9pmlo3cgid.js";const Le=()=>(J(),null),Oe=R(function(){const e=A(),r=M(),[n]=F(),i=B(),c=T(r.conversationId),a=v(n.get("readonly"),!1),p=v(n.get("isFullScreen"),!1),d=v(n.get("header"),!0),u=v(n.get("appPreview"),!1),C=D(),w=N(),S=v(n.get("hideBottomComposer"),!!a),f=T(r.canmoreId),o=c,m=V();l.useEffect(()=>{W({type:j.Textdoc,textdocId:f})},[f]),z(o,{kind:Q.PrimaryAssistant});const x=H();if(l.useEffect(()=>(y.retainThread(o),()=>{setTimeout(()=>{x.invalidateQueries(U({clientThreadId:o}))},0),y.releaseThread(o)}),[o,x]),l.useEffect(()=>{f||i("/")},[f,i]),l.useEffect(()=>{P().sendMessage({type:b.Loaded})},[f]),!f||(m==null?void 0:m.type)!==j.Textdoc)return null;const I=()=>{P().sendMessage({type:b.Close})},E=a&&!d;return t.jsxs("div",{className:"h-full w-full overflow-hidden contain-content",children:[t.jsx("meta",{name:"viewport",content:"width=device-width, initial-scale=1, maximum-scale=1"}),t.jsx(_.Provider,{value:$(e,o),children:t.jsx(k,{clientThreadId:o,children:t.jsx(G,{clientThreadId:o,children:t.jsx(X,{clientThreadId:o,children:u?t.jsx(L,{children:t.jsx(oe,{textdocId:m.textdocId})}):E?t.jsxs(t.Fragment,{children:[t.jsx(Z,{clientThreadId:o,disableScroll:!C,textdocId:m.textdocId}),t.jsx(ee,{})]}):t.jsx(se,{isEmbedded:!0,hideRunCode:!C,isFullScreen:p,hideHeader:!d,hideBottomComposer:S,isReadonlyFromQueryParam:a,hideRenameButton:w,clientThreadId:o,focusedTextdoc:m,onClose:I},"textdocContent")})})})})]})}),oe=({textdocId:s})=>{var d;const e=l.useRef(null),r=Y(s),[n,i]=l.useState(!1),c=(d=r==null?void 0:r.versions)!=null?d:[],a=O(c),p=l.useCallback(K(async u=>{const C=te(u.type,u.content);if(e.current&&(C==="react"||C==="html")){i(!0);const o=e.current.evalAsync({language:C,code:u.content});try{for(var re=g(o),w,S,f;w=!(S=await re.next()).done;w=!1){const m=S.value;console.debug(m)}}catch(S){f=[S]}finally{try{w&&(S=re.return)&&await S.call(re)}finally{if(f)throw f[0]}}}i(!1)},100),[]);return l.useEffect(()=>{a&&p(a)},[a,p]),t.jsx(q,{id:s,visuallyHidden:!n,ref:e,enableTransition:!0,title:""})};export{Le as clientLoader,Oe as default};
//# sourceMappingURL=d5kdsu4qip39cmx9.js.map
