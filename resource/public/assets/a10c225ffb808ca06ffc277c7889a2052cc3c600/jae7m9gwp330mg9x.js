var ye=Object.defineProperty;var se=Object.getOwnPropertySymbols;var we=Object.prototype.hasOwnProperty,ve=Object.prototype.propertyIsEnumerable;var re=(e,s,a)=>s in e?ye(e,s,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[s]=a,Y=(e,s)=>{for(var a in s||(s={}))we.call(s,a)&&re(e,a,s[a]);if(se)for(var a of se(s))ve.call(s,a)&&re(e,a,s[a]);return e};import{c as _e,r as l,j as t,b as K,d as le,A as G,m as W,M as ne}from"./jj85rqzpbnvv3emr.js";import{R as Se,A as je,i as ce,dO as Ne,P as R,gk as Ee,cm as ke,ci as ae,dl as Ce,co as Me,e as J,B as F,aI as Pe,id as Ae,aa as Le}from"./lef5ym39glv4981l.js";import{s as q,R as Te}from"./eyrb6sf5jz8ri0pt.js";import{bq as de,br as ue,mB as me,mC as Ie,ks as Re,dq as pe,d7 as Oe,mD as ze,cI as De,mE as Fe,mF as Ue}from"./mclphevd122040jw.js";import{M as $e,O as We}from"./n9gjott769mxfmpz.js";import{S as qe}from"./byc485nmh825ib1a.js";import"./jucwzbakxra299c6.js";import"./ebxncu61uuayv8xb.js";async function Ke(e){try{return(await Se.safePost("/onboarding/steps",{requestBody:{main_usages:e,variant:"use_case"},authOption:je.SendIfAvailable})).steps}catch(s){return[]}}function Be(){"use forget";var k,_,T,o;const e=_e.c(14),s=ce(),{markAsViewed:a,eligible:f,isLoading:n}=de(ue.CreateExampleChatsOnboarding);let r;e[0]!==s?(r=me(s,!1),e[0]=s,e[1]=r):r=e[1];const d=r,x=l.useRef(!1),{session:i}=Ne(),g=(_=(k=i==null?void 0:i.user)==null?void 0:k.id)!=null?_:void 0,b=(o=(T=i==null?void 0:i.account)==null?void 0:T.id)!=null?o:void 0;let y;e[2]!==b||e[3]!==s||e[4]!==f||e[5]!==n||e[6]!==a||e[7]!==d||e[8]!==g?(y=p=>{!f||n||x.current||(x.current=!0,a(),R.logEventWithStatsig("Onboarding: Create Example Chats","chatgpt_onboarding_flow_create_example_chats"),Promise.all(p.map(h=>{var N;if(h.step_type==="usage_question")return Promise.resolve();const c=h.step_metadata;h.step_type!=="dalle"&&d.get("use_dynamic_response",!1)&&c!=null&&c.onboarding&&(delete c.onboarding.system_hints,delete c.onboarding.hardcoded_response);const P=Ee();return ke.initThread({clientThreadId:P,conversationMode:{kind:ae.PrimaryAssistant},userId:g,accountId:b,disableConversationNavigation:!0}),Ie({ctx:s,clientThreadId:P,eventSource:"url",promptMessage:Ce(h.step_prompt,c!=null?c:void 0,{real_author:Me.Onboarding}),completionMetadata:{isOnboardingConversation:!0,conversationMode:{kind:ae.PrimaryAssistant},systemHints:(N=c==null?void 0:c.onboarding)==null?void 0:N.system_hints},skipNotification:!0})})).catch(Ve))},e[2]=b,e[3]=s,e[4]=f,e[5]=n,e[6]=a,e[7]=d,e[8]=g,e[9]=y):y=e[9];const v=y;let M;return e[10]!==f||e[11]!==n||e[12]!==v?(M={eligible:f,isLoading:n,createExampleChats:v},e[10]=f,e[11]=n,e[12]=v,e[13]=M):M=e[13],M}function Ve(){R.logEventWithStatsig("Onboarding Error","chatgpt_onboarding_flow_error",{errorReason:"error_creating_example_chats"})}function Xe({item:e,onClick:s}){var a;return t.jsx("li",{className:"first:border-t-0",children:t.jsxs("button",{className:"hover:bg-token-interactive-bg-secondary-hover flex w-full cursor-pointer items-start gap-3 rounded-2xl px-4 py-4 text-start sm:px-6",onClick:f=>s(f,e),children:[t.jsx("div",{className:"mt-0.5 text-xl",children:e.iconImageUrl?t.jsx("img",{src:e.iconImageUrl,alt:e.title,className:"h-6 w-6 rounded-full"}):e.icon?t.jsx("span",{"aria-hidden":!0,children:e.icon}):t.jsx(Re,{category:(a=e.category)!=null?a:"onboarding",useV2Colors:!0})}),t.jsxs("div",{className:"flex-1",children:[t.jsx("div",{className:"text-token-text-primary text-base font-medium",children:e.title}),t.jsx("div",{className:"text-token-text-secondary mt-1 text-sm leading-5",children:e.body})]}),t.jsx(pe,{className:"icon mt-0.5 shrink-0 opacity-60"})]})})}function fe({onAutoAdvance:e,enabled:s,delayMs:a=5e3,idleRestartMs:f=400,elementRef:n,dependencies:r=[]}){const d=l.useRef(null),x=l.useRef(null),i=()=>{d.current!=null&&(window.clearTimeout(d.current),d.current=null),x.current!=null&&(window.clearTimeout(x.current),x.current=null)};l.useEffect(()=>{if(i(),!!s)return d.current=window.setTimeout(()=>{e()},a),i},[s,a,e,...r]),l.useEffect(()=>{if(!s)return;const g=n==null?void 0:n.current,b=g!=null?g:window,y=()=>{d.current!=null&&(window.clearTimeout(d.current),d.current=null),x.current!=null&&window.clearTimeout(x.current),x.current=window.setTimeout(()=>{s&&(d.current!=null&&window.clearTimeout(d.current),d.current=window.setTimeout(()=>{e()},a))},f)};return b.addEventListener("scroll",y,{passive:!0}),b.addEventListener("wheel",y,{passive:!0}),()=>{b.removeEventListener("scroll",y),b.removeEventListener("wheel",y),i()}},[s,a,f,e,n==null?void 0:n.current,...r])}const B=le({cardsAriaLabel:{id:"prompt-new-user-onboarding.cards-aria-label",defaultMessage:"Starter examples"},dotsAriaLabel:{id:"prompt-new-user-onboarding.dots-aria-label",defaultMessage:"Card {current} of {total}"},prevCardAriaLabel:{id:"prompt-new-user-onboarding.prev-card-aria-label",defaultMessage:"Previous idea"},nextCardAriaLabel:{id:"prompt-new-user-onboarding.next-card-aria-label",defaultMessage:"Next idea"}}),Ge=60,xe=5e3,ge=400;function He({items:e,onSelect:s,onSubmit:a,className:f}){const n=K(),r=l.useRef(null),d=l.useRef(null),x=l.useRef(null),[i,g]=l.useState(0),[b,y]=l.useState(0),v=l.useRef({vw:0,paddingLeft:0,gapPx:0,cardWidth:0,slotWidth:1,centerTarget:0,s:0}),M=e[i];l.useEffect(()=>{s(M,i)},[s,M,i]),l.useEffect(()=>{var p;const o=e[i];o&&R.logEventWithStatsig("Onboarding Show Prompt","chatgpt_onboarding_flow_show_prompt",{prompt_index:i,prompt_id:(p=o.id)!=null?p:String(i)})},[e,i]),l.useEffect(()=>{const o=r.current;if(!o)return;let p=null,h=o.scrollLeft,c=performance.now();const P=160,N=u=>{const w=x.current;w&&(w.style.transform="translate3d(".concat(u,"px, 0, 0)"))},A=()=>{const{vw:u,paddingLeft:w,slotWidth:j,centerTarget:O,s:z,cardWidth:U}=v.current,m=(o.scrollLeft+u/2-w-U/2)/(j||1),E=Math.max(0,Math.min(e.length-1,m)),L=Math.round(E);g(D=>D!==L?L:D);const I=E*(_+z)+_/2;N(O-I)},C=()=>{p=null,A();const u=performance.now(),w=o.scrollLeft;Math.abs(w-h)>.1&&(c=u,h=w),u-c<P&&(p=window.requestAnimationFrame(C))},S=()=>{p==null&&(h=o.scrollLeft,c=performance.now(),p=window.requestAnimationFrame(C))};return A(),o.addEventListener("scroll",S,{passive:!0}),o.addEventListener("wheel",S,{passive:!0}),()=>{o.removeEventListener("scroll",S),o.removeEventListener("wheel",S),p!=null&&window.cancelAnimationFrame(p)}},[e.length]),l.useEffect(()=>{const o=r.current,p=d.current;if(!o||!p)return;const h=()=>{const c=o.getBoundingClientRect(),P=p.getBoundingClientRect(),N=c.width,A=window.getComputedStyle(o),C=parseFloat(A.paddingLeft||"0"),S=parseFloat((A.columnGap||A.gap||"0").toString())||0,u=Math.max(0,N-2*C),w=u+S,j=Math.max(0,N/2-_/2-Ge),O=c.left-P.left+N/2;v.current={vw:N,paddingLeft:C,gapPx:S,cardWidth:u,slotWidth:w,centerTarget:O,s:j},y(j);const z=(o.scrollLeft+N/2-C-u/2)/(w||1),U=Math.max(0,Math.min(e.length-1,z)),m=Math.round(U);g(I=>I!==m?m:I);const E=U*(_+j)+_/2,L=x.current;L&&(L.style.transform="translate3d(".concat(O-E,"px, 0, 0)"))};return h(),window.addEventListener("resize",h),()=>window.removeEventListener("resize",h)},[e.length]);const k=o=>{const p=r.current;if(!p)return;const c=p.querySelectorAll('li[data-card="true"]')[o];c&&c.scrollIntoView({behavior:"smooth",block:"nearest",inline:"center"})};fe({onAutoAdvance:()=>{const o=(i+1)%e.length;k(o)},enabled:e.length>1,delayMs:xe,idleRestartMs:ge,elementRef:r,dependencies:[i,e.length,k]});const _=180,T=l.useMemo(()=>{const o=Math.max(0,i-1),p=Math.min(e.length-1,i+1);return e.map((h,c)=>{var S,u;if(c<o||c>p)return null;const P=(S=h.id)!=null?S:c,N=c===i,A=N?1:.9,C=N?1:.5;return t.jsx("div",{className:"pointer-events-none flex items-center justify-center",style:{position:"absolute",top:0,left:c*(_+b),height:_,width:_,transform:"scale(".concat(A,")"),opacity:C,transition:"transform 300ms cubic-bezier(0.2, 0.8, 0.2, 1), opacity 300ms cubic-bezier(0.2, 0.8, 0.2, 1)",willChange:"transform, opacity"},children:h.iconImageUrl||h.coverImageUrl?t.jsx("img",{src:(u=h.iconImageUrl)!=null?u:h.coverImageUrl,alt:"",className:"rounded-3xl",style:{height:_,width:_}}):t.jsx("div",{className:"flex items-center justify-center text-3xl",style:{height:_,width:_},children:h.icon})},P)})},[e,i,b]);return t.jsx("div",{ref:d,className:J(f,"relative"),children:t.jsxs("div",{className:"relative",children:[t.jsx("div",{className:"pointer-events-none absolute inset-x-0 top-0 z-10 overflow-hidden",style:{height:_},"aria-hidden":!0,children:t.jsx("div",{ref:x,className:"pointer-events-none absolute start-0 top-0",style:{height:_,willChange:"transform"},"aria-hidden":!0,children:T})}),t.jsx("ul",{ref:r,className:"no-scrollbar flex max-h-full snap-x snap-mandatory scroll-ps-5 scroll-pe-5 gap-4 overflow-x-auto scroll-smooth px-5 pb-10","aria-label":n.formatMessage(B.cardsAriaLabel),children:e.map((o,p)=>{var h;return t.jsx("li",{"data-card":"true",className:"max-h-full shrink-0 snap-center [scroll-snap-stop:always]",children:t.jsx("div",{className:J("relative h-full w-[calc(100vw-2.5rem)] rounded-3xl text-start sm:w-[260px]","focus:outline-none focus-visible:ring-2 focus-visible:ring-blue-500 focus-visible:ring-offset-2"),style:{"--accent":o.accentColor},children:t.jsxs("div",{className:"flex h-full flex-col items-center justify-center gap-4",children:[t.jsx("div",{className:"relative",style:{height:_,width:_},"aria-hidden":!0}),t.jsx("div",{className:"text-token-text-primary text-center text-2xl leading-tight font-medium sm:text-xl",children:o.title}),t.jsx(he,{prompt:o.prompt||o.body,onSubmit:c=>a(c,o,p)})]})})},(h=o.id)!=null?h:p)})}),t.jsx("div",{className:"mt-2 flex items-center justify-center gap-2 pb-4 sm:hidden",children:e.map((o,p)=>t.jsx("button",{"aria-label":n.formatMessage(B.dotsAriaLabel,{current:p+1,total:e.length}),"aria-current":i===p,className:J("h-2 w-2 rounded-full bg-current transition-colors",i===p?"text-token-text-primary":"bg-token-bg-secondary"),onClick:()=>k(p)},p))})]})})}function Ze({items:e,onSelect:s,onSubmit:a,className:f}){var b;const[n,r]=l.useState(0),[d,x]=l.useState(0),i=e[n],g=e[d];return l.useEffect(()=>{s(i,n)},[s,i,n]),l.useEffect(()=>{var v;const y=e[n];y&&R.logEventWithStatsig("Onboarding Show Prompt","chatgpt_onboarding_flow_show_prompt",{prompt_index:n,prompt_id:(v=y.id)!=null?v:String(n)})},[e,n]),t.jsx("div",{className:f,children:t.jsxs("div",{className:"tall:gap-8 flex flex-col items-center gap-4",children:[t.jsxs("div",{className:"relative",children:[t.jsx(G,{mode:"sync",children:g&&t.jsx(W.div,{"aria-hidden":!0,className:"pointer-events-none absolute inset-0 start-1/2 top-1/2 -z-10 h-[160%] w-[100%] -translate-x-1/2 -translate-y-1/2",initial:{opacity:0},animate:{opacity:.2},exit:{opacity:0},transition:{duration:.6,ease:[.2,.8,.2,1]},style:{backgroundImage:"radial-gradient(closest-side, ".concat(g.accentColor," 0%, transparent 80%)")}},(b=g.id)!=null?b:d)}),t.jsx(Ye,{items:e,activeIndex:n,onWillChange:y=>{x(y)},onChange:y=>{r(y)}})]}),g&&t.jsx(G,{mode:"wait",children:t.jsxs(W.div,{className:"flex max-w-[320px] flex-col items-center gap-4",initial:{opacity:0,y:8},animate:{opacity:1,y:0,transition:{duration:.3,ease:[.2,.8,.2,1]}},exit:{opacity:0,y:8,transition:{duration:.3,ease:[.2,.8,.2,1]}},children:[t.jsx("div",{className:"text-token-text-primary text-2xl leading-tight font-medium sm:text-xl",children:g.title}),t.jsx("div",{className:"sm:min-h-24",children:t.jsx(he,{prompt:g.prompt||g.body,onSubmit:y=>a(y,g,d)})})]},d)})]})})}const ee=228,oe=190,Qe=160,ie=180,te=350;function Ye({items:e,activeIndex:s,onChange:a,onWillChange:f}){const n=K(),r=e.length,[d,x]=l.useState(null),[i,g]=l.useState("idle"),[b,y]=l.useState(!1),v=l.useRef(null),M=l.useRef(null);l.useEffect(()=>()=>{v.current!=null&&window.clearTimeout(v.current),M.current!=null&&window.cancelAnimationFrame(M.current)},[]);const[k,_]=l.useState(ee);l.useEffect(()=>{const m=()=>{const E=window.innerHeight||800,I=(Math.max(600,Math.min(800,E))-600)/200,D=Math.round(oe+(ee-oe)*I);_(D)};return m(),window.addEventListener("resize",m),()=>window.removeEventListener("resize",m)},[]);const T=k/ee,o=Math.round(Qe*T),p=k/o,h=(k+o)/2+ie,c=(m,E)=>(m%E+E)%E,P=c(s-1,r),N=c(s+1,r),A=c(s-2,r),C=c(s+2,r),S=l.useCallback(m=>{if(b||r<=1)return;y(!0),x(m),g("prepare");const E=c(m==="right"?s+1:s-1,r);f==null||f(E),M.current=window.requestAnimationFrame(()=>{M.current=window.requestAnimationFrame(()=>{g("slide"),v.current=window.setTimeout(()=>{x(null),g("idle"),y(!1),a(c(m==="right"?s+1:s-1,r))},te)})})},[b,r,s,f,a]);if(fe({onAutoAdvance:()=>S("right"),enabled:r>1&&!b,delayMs:xe,idleRestartMs:ge,dependencies:[s,S,b]}),r===0)return null;const u=[-2,-1,0,1,2].map(m=>m*h),w=[{key:"left-".concat(P),index:P,slot:1},{key:"center-".concat(s),index:s,slot:2},{key:"right-".concat(N),index:N,slot:3}];let j=w;if(d==="right"){const m=[{key:"farRight-".concat(C),index:C,slot:4,fadeIn:!0}];j=[...w,...m]}else d==="left"&&(j=[...[{key:"farLeft-".concat(A),index:A,slot:0,fadeIn:!0}],...w]);const O=m=>{if(d==null||i==="idle"||i==="prepare")return u[m];if(d==="right"){const E=Math.max(m-1,0);return u[E]}else{const E=Math.min(m+1,4);return u[E]}},z=(m,E)=>{const L=O(m),I=m===2?30:m===1||m===3?20:10,D=!b&&r>1&&(m===1||m===3),V=L===u[2],H=L===u[1]||L===u[3],Z=o,Q=V?p:1,X=V?1:H?.5:0;return{x:L,z:I,cardSize:Z,scale:Q,opacity:E&&i==="prepare"?0:X,isDisabled:!D}},U=m=>{m.key==="ArrowLeft"?(m.preventDefault(),S("left")):m.key==="ArrowRight"&&(m.preventDefault(),S("right"))};return t.jsxs("div",{className:"relative flex w-full items-center justify-center py-2 outline-none",tabIndex:0,"aria-label":n.formatMessage(B.cardsAriaLabel),onKeyDown:U,children:[t.jsx("div",{className:"relative overflow-hidden",style:{height:k,width:3*k+2*ie},children:j.map(({key:m,index:E,slot:L,fadeIn:I})=>{const{x:D,z:V,cardSize:H,scale:Z,opacity:Q,isDisabled:X}=z(L,I);return t.jsx(Je,{item:e[E],translateX:D,zIndex:V,onClick:()=>S(L===1?"left":"right"),cardSize:H,scale:Z,opacity:Q,isDisabled:X},m)})}),t.jsx(F,{color:"ghost","aria-label":n.formatMessage(B.prevCardAriaLabel),className:"absolute! top-1/2 z-20 h-9 w-9 -translate-y-1/2",style:{left:"calc(50% - ".concat(k/2+20+36,"px)")},onClick:()=>S("left"),disabled:b||r<=1,icon:Oe}),t.jsx(F,{color:"ghost","aria-label":n.formatMessage(B.nextCardAriaLabel),className:"absolute! top-1/2 z-20 h-9 w-9 -translate-y-1/2",style:{left:"calc(50% + ".concat(k/2+20,"px)")},onClick:()=>S("right"),disabled:b||r<=1,icon:pe})]})}function Je({item:e,translateX:s,zIndex:a,onClick:f,cardSize:n,scale:r,opacity:d,isDisabled:x}){var i;return t.jsx("button",{className:"absolute start-1/2 top-1/2 flex items-center justify-center rounded-3xl",style:{transform:"translate3d(-50%, -50%, 0) translate3d(".concat(s,"px, 0, 0) scale(").concat(r,")"),height:"".concat(n,"px"),width:"".concat(n,"px"),transition:"transform ".concat(te,"ms cubic-bezier(0.2, 0.8, 0.2, 1), opacity ").concat(te,"ms cubic-bezier(0.2, 0.8, 0.2, 1)"),willChange:"transform, opacity",opacity:d,zIndex:a},onClick:f,disabled:x,children:e.iconImageUrl||e.coverImageUrl?t.jsx("img",{src:(i=e.iconImageUrl)!=null?i:e.coverImageUrl,alt:"",className:"rounded-3xl",style:{maxHeight:"".concat(n,"px"),maxWidth:"".concat(n,"px")}}):t.jsx("div",{className:"text-6xl","aria-hidden":!0,children:e.icon})})}function he({prompt:e,onSubmit:s}){const a=K();return t.jsxs("div",{className:"group bg-token-bg-elevated-primary border-token-border-light inline-flex items-end justify-center gap-3 self-stretch rounded-3xl border p-3 ps-4 shadow-xl backdrop-blur-[20px]",children:[t.jsx("div",{className:"text-token-text-primary flex-1 justify-end text-sm leading-tight font-normal duration-300 sm:opacity-65 sm:group-hover:opacity-100",children:e}),t.jsx(F,{icon:qe,size:"small",label:a.formatMessage(q.tryNow),onClick:s,className:"h-7 w-7 transition-all duration-300 sm:opacity-65 sm:group-hover:opacity-100"})]})}const $=le({subtitleCards:{id:"prompt-new-user-onboarding.subtitle-cards-2",defaultMessage:"Try one of these ideas to see how ChatGPT works."},close:{id:"prompt-new-user-onboarding.close",defaultMessage:"Close"},skip:{id:"prompt-new-user-onboarding.skip",defaultMessage:"Skip"}}),be={work:["help_me_get_recognized","anime_style_portrait","document_summary"],school:["fix_procrastination","anime_style_portrait","create_a_quiz"],personalTasks:["meal_prep","anime_style_portrait","upgrade_skin_care"],funAndEntertainment:["promo_code","action_figure_portrait","color_theory"],other:["be_my_personal_trainer","anime_style_portrait","color_theory"]};function et(e){return Object.prototype.hasOwnProperty.call(be,e)}function tt({cardItems:e,isUserTriggered:s,handleSelect:a,onClose:f}){const n=K(),[r,d]=l.useState(0),x=!Le(),i=(g,b)=>{d(b)};return t.jsxs(We,{className:"flex h-full flex-col gap-6",children:[t.jsx("p",{className:"text-token-text-secondary sm:tall:text-3xl sm:tall:font-medium sm:tall:font-medium sm:tall:mb-4 sm:short:mt-4 mx-auto min-h-0 max-w-[280px] shrink text-center text-base max-sm:mt-10 sm:max-w-[420px]",children:n.formatMessage($.subtitleCards)}),t.jsx("div",{className:"flex min-h-0 flex-1 flex-col justify-center gap-4",children:x?t.jsx(He,{items:e,onSelect:i,onSubmit:a,className:"flex min-h-0 flex-1 flex-col justify-center"}):t.jsx(Ze,{items:e,onSelect:i,onSubmit:a,className:"sm:pb-6"})}),t.jsxs("div",{className:"mx-auto flex w-full shrink-0 flex-col gap-2 px-6 pb-6 sm:max-w-[380px]",children:[t.jsx(F,{size:"large",color:"primary",fullWidth:!0,onClick:g=>a(g,e[r],r),children:n.formatMessage(q.tryNow)}),t.jsx(F,{size:"large",color:"ghost",fullWidth:!0,onClick:()=>f==null?void 0:f(),children:s?n.formatMessage($.close):n.formatMessage($.skip)})]})]})}function st({starters:e,handleSelect:s,isUserTriggered:a,onClose:f}){const n=K();return l.useEffect(()=>{!e||e.length===0||e.forEach((r,d)=>{var x;R.logEventWithStatsig("Onboarding Show Prompt","chatgpt_onboarding_flow_show_prompt",{prompt_index:d,prompt_id:(x=r.id)!=null?x:""})})},[e]),t.jsxs("div",{className:"tall:gap-16 flex h-full flex-col gap-6 sm:mx-auto sm:max-w-[480px] sm:px-3",children:[t.jsxs("div",{className:"flex flex-col gap-2 px-5 pt-6 sm:px-8 sm:pt-7",children:[t.jsx("h2",{className:"text-token-text-primary text-center text-3xl font-medium",children:n.formatMessage(q.promptOnboardingTitle)}),t.jsx("p",{className:"text-token-text-secondary text-center text-base",children:n.formatMessage(q.promptOnboardingSubtitle)})]}),t.jsx("div",{className:"min-h-0 flex-1 overflow-y-auto px-2 pb-8",children:t.jsx("ul",{className:"divide-token-border-light divide-y",children:e.map((r,d)=>{var x;return t.jsx(Xe,{item:r,onClick:(i,g)=>s(i,g,d)},(x=r.id)!=null?x:d)})})}),t.jsx("div",{className:"px-6 pb-6",children:t.jsx(F,{size:"large",color:"secondary",fullWidth:!0,onClick:()=>f==null?void 0:f(),children:a?n.formatMessage($.close):n.formatMessage($.skip)})})]})}function ft({clientThreadId:e,onClose:s}){const a=ce(),n=me(a,!1).get("prompt_onboarding_enable_usage_selection",!1),[r,d]=l.useState(n?null:["other"]),[x,i]=l.useState(!1),g=K(),b=ze({clientThreadId:e}),{markAsViewed:y,isUserTriggered:v,onboardingStyle:M}=De(),k=l.useRef(null);l.useEffect(()=>{y(),R.logEventWithStatsig("Onboarding Shown","chatgpt_onboarding_flow_shown",{isUserTriggered:v?"true":"false"})},[y,v]);const _=l.useMemo(()=>{const u=["work","school","funAndEntertainment"],w=new Set(r!=null?r:[]);if(w.size===0)return"other";for(const j of u)if(w.has(j))return j;for(const j of w)if(et(j))return j;return"other"},[r]),T=Fe(),o=l.useMemo(()=>v?T:be[_].map(u=>T.find(w=>w.id===u)).filter(u=>u!==void 0),[T,v,_]);l.useEffect(()=>{o.length>0&&Ue(o,e)},[o,e]);const p=l.useCallback(u=>(k.current||(k.current=Ke(u)),k.current),[]),{createExampleChats:h,eligible:c,isLoading:P}=Be();l.useEffect(()=>{r!=null&&p(r)},[p,r]);const N=l.useCallback(u=>{const w=u!=null?u:r;!c||P||w==null||p(w).then(j=>{h(j)}).catch(()=>{R.logEventWithStatsig("Onboarding Error","chatgpt_onboarding_flow_error",{errorReason:"error_fetching_onboarding_steps"})})},[h,c,P,p,r]),A=(u,w,j)=>{var O;try{s==null||s(),b({suggestedPrompt:w,index:j,isOnboarding:!v}),N(),R.logEventWithStatsig("Onboarding Try Prompt","chatgpt_onboarding_flow_try_prompt",{index:j,prompt_id:(O=w.id)!=null?O:String(j),isUserTriggered:v?"true":"false"})}catch(z){R.logEventWithStatsig("Onboarding Error","chatgpt_onboarding_flow_error",{error:z instanceof Error?z.message:String(z)})}},C=()=>{const u=r!=null?r:["other"];R.logEventWithStatsig("Onboarding Dismissed","chatgpt_onboarding_flow_dismissed",{isUserTriggered:v?"true":"false"}),s==null||s(),N(u)},S=()=>{v?C():i(!0)};return t.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center",children:[t.jsx(W.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.35},className:"absolute inset-0 bg-black/60","aria-hidden":"true",onClick:u=>{u.stopPropagation(),v&&C()}}),t.jsx(G,{children:t.jsx(W.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},transition:{duration:.35},className:"bg-token-bg-primary relative z-10 flex h-full w-full flex-col items-center justify-center rounded-none",style:{boxShadow:"0 10px 30px rgba(0,0,0,0.15)"},onClick:u=>u.stopPropagation(),children:t.jsxs("div",{className:"flex max-h-full w-full flex-col gap-6 max-sm:h-full",children:[t.jsx("div",{className:"absolute end-3 top-3 z-20 hidden sm:block",children:t.jsx(F,{icon:Pe,onClick:C,color:"ghost",className:"h-9 w-9",label:g.formatMessage($.close)})}),t.jsx(G,{mode:"wait",children:r==null?t.jsx($e,{mainUsagesProp:r!=null?r:[],onSelectMainUsages:d,onSkip:()=>d(["other"])},"main-usage-question"):x?t.jsx(rt,{onClose:C,createExampleChats:N},"all-set-page"):M==="cards"?t.jsx(tt,{cardItems:o,isUserTriggered:v,handleSelect:A,onClose:S},"cards-variant"):t.jsx(st,{starters:o,handleSelect:A,isUserTriggered:v,onClose:S},"list-variant")})]})})})]})}function rt({onClose:e,createExampleChats:s}){const{eligible:a,isLoading:f,markAsViewed:n}=de(ue.Onboarding);return l.useEffect(()=>{a&&!f&&n()},[a,f,n]),l.useEffect(()=>{s()},[s]),t.jsxs("div",{className:"mx-auto flex h-full w-full flex-col items-center justify-center gap-16 p-6 sm:max-w-[380px]",children:[t.jsxs("div",{className:"flex min-h-0 flex-col items-center justify-center gap-4 max-sm:flex-1",children:[t.jsx(W.div,{initial:{scale:.6,opacity:0},animate:{scale:1,opacity:1},transition:{type:"spring",stiffness:360,damping:24,mass:.8,duration:.6},children:t.jsx(Ae,{className:"text-token-text-primary h-10 w-10 text-5xl"})}),t.jsx(W.p,{className:"text-token-text-primary text-center text-3xl",initial:{opacity:0,y:8},animate:{opacity:1,y:0},transition:{duration:.6,ease:"easeOut",delay:.5},children:t.jsx(ne,Y({},q.allSet))})]}),t.jsxs("div",{className:"flex flex-col gap-4 sm:gap-6",children:[t.jsx("div",{className:"text-token-text-secondary relative mt-auto w-full text-center text-base",children:t.jsx(Te,{})}),t.jsx(F,{size:"large",color:"primary",fullWidth:!0,onClick:e,children:t.jsx(ne,Y({},q.done))})]})]})}export{ft as default};
//# sourceMappingURL=jae7m9gwp330mg9x.js.map
