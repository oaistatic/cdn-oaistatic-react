import{G as P,i as h,a6 as _,j as S,b as E,g as M,u as L,r as b,d as w}from"./jj85rqzpbnvv3emr.js";import{L as p,p as d,aE as F,v as l,nv as T,i as v,f as A,z as R,a9 as g,P as x,an as O,h3 as I}from"./lef5ym39glv4981l.js";import{i as k,C as D}from"./lz6nvf1wtn80mpd2.js";import{bD as N}from"./mclphevd122040jw.js";function m({intl:n,message:e,navigate:s,toaster:a}){a.warning(n.formatMessage(e),{duration:5}),s("/#pricing")}function j({checkoutFrom:n,checkoutPlanType:e,ctx:s,currentAccount:a,intl:i,navigate:c,queryClient:o,isEligibleForProOnboarding:r,toaster:u}){const t=g(s,"2494348560"),y=g(s,"2239990662");if(x.logPaymentSuccess({plan_type:e}),e===l.PLUS&&O.logEvent("chatgpt_plus_payment_success_page"),a.isFree())o.invalidateQueries(I());else if(n)p.removeItem(d.CheckoutFrom),window.location.href=D[n];else if(r&&t.get("enable_ca_pro_onboarding_flow",!1))window.location.href="/payments/success-ind";else{const C=y.get("redirect_to_home",!1);c(C?"/":"/#pricing"),u.success(i.formatMessage(f.paymentConfirmationToastMessage,{planName:N(e)}),{duration:5})}}function G({checkoutFrom:n,checkoutPlanType:e,currentAccount:s,postCheckoutResult:a,isEligibleForProOnboarding:i}){const c=v(),o=E(),r=M(),u=L(),t=A();return b.useEffect(()=>{switch(a){case"success":return j({checkoutFrom:n,checkoutPlanType:e,ctx:c,currentAccount:s,intl:o,isEligibleForProOnboarding:i,navigate:r,queryClient:u,toaster:t});case"payment_failed":return m({intl:o,toaster:t,navigate:r,message:f.paymentFailedToastMessage});case"other_error":return m({intl:o,toaster:t,navigate:r,message:R.somethingWentWrong})}},[n,e,c,s,o,i,r,a,u,t]),null}const H=P(function(){var t;const[e]=h(),s=p.getItem(d.CheckoutFrom),a=F(),i=_(),c=(t=e.get("plan_type"))!=null?t:l.PLUS,{anyConnectorEnabled:o,isLoading:r}=T();if(!a||r)return null;const u=!o&&c===l.PRO;return S.jsx(G,{checkoutFrom:k(s)?s:null,checkoutPlanType:c,currentAccount:a,isEligibleForProOnboarding:u,postCheckoutResult:i.postCheckoutResult})}),f=w({paymentConfirmationToastMessage:{id:"Payments.success.toast",defaultMessage:"You're now subscribed to ChatGPT {planName}"},paymentFailedToastMessage:{id:"Payments.success.paymentFailedToastMessage",defaultMessage:"Payment failed. Please try again."}});export{H as default};
//# sourceMappingURL=in9u965e0l00fshd.js.map
