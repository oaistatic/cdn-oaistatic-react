import{r as u,j as e,M as g,b as A,d as T}from"./jj85rqzpbnvv3emr.js";import{iX as F,iY as L,f as O,iZ as E,B as U,N as R,a1 as X,c1 as H,U as b,j3 as h,i as N,j as P,iU as f,hk as W,j4 as B}from"./lef5ym39glv4981l.js";import{gl as z,gm as G,cA as J,at as l,gn as K,go as Y,gp as q,gq as Z,gr as $,gs as Q}from"./mclphevd122040jw.js";import{S as ee}from"./w705jdvl4grquz0l.js";function se({voice:s,voiceSpeed:n}){const[r,a]=u.useState(!1),t=F(),i=s.voice,d=s.preview_url,c=u.useRef({playPromise:null}).current,o=L(p=>p.isPlaying&&p.sourceUrl===d);u.useEffect(()=>{t&&t.setSpeed(n)},[t,n]);const x=O(),V=u.useCallback(async()=>{if(!t)return;const p={voice:i,source:d};E.previews.click(p);try{a(!0),t.changeSource(d),c.playPromise=t.play(),a(!1)}catch(k){E.previews.error(k,p),x.danger({defaultMessage:"Something went wrong playing preview",description:"Error message when message playing the preview fails"},{toastId:"voice_preview_player_play_error"})}},[t,d,i,c,x]),m=u.useCallback(()=>{t&&(c.playPromise?c.playPromise.then(()=>{t.stop(),c.playPromise=null}):t.stop())},[t,c]),D=u.useCallback(()=>{o?m():r||V()},[m,V,r,o]);return u.useEffect(()=>()=>{o&&m()},[s,o,m]),e.jsx(U,{onClick:D,color:"secondary",className:"flex flex-row flex-nowrap items-center gap-1 border-none font-normal",loading:r,icon:o?ee:z,children:o?e.jsx(g,{id:"yGpEMJ",defaultMessage:"Stop"}):e.jsx(g,{id:"JwYDVp",defaultMessage:"Play"})})}const j=.5,v=2,_=.1,I=Math.round((v-j)/_),te=Array.from({length:I+1},(s,n)=>n),C=2,S=8,M=(S-C)/2,ne=s=>{const n=Number(s);return isNaN(n)?1:n};function ae(){const s=N();return P(s,"174366048")}function ie(){const s=N();return P(s,"3302173089")}function xe(){const s=ae(),n=H(),r=ie(),{isLoading:a,value:t,setValue:i}=y(b.VoiceSpeed),d=ne(t),c=G();if(!s)return null;const o=(n==null?void 0:n.length)&&!(n!=null&&n.includes(J.VideoScreenSharing));return e.jsxs(e.Fragment,{children:[c&&e.jsx(h,{children:e.jsx(re,{})}),e.jsx(h,{children:e.jsx(oe,{voiceSpeed:d})}),r&&e.jsx(h,{children:e.jsx(le,{voiceSpeed:d,setVoiceSpeed:i,isLoading:a})}),o&&e.jsx(h,{children:e.jsx(ce,{})})]})}function y(s,n=!1){const{data:r,isLoading:a}=R(s)||{},t=X(n);return{isLoading:a,value:r,setValue:i=>{t.mutate({setting:s,value:i})}}}function oe({voiceSpeed:s}){const{isLoading:n,value:r,setValue:a}=y(b.VoiceName),t=K(),i=Y(),d=n?"":q(r,i),c=t.find(({voice:o})=>o===d);return e.jsx(e.Fragment,{children:e.jsx("div",{className:"flex flex-col flex-nowrap gap-2",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{children:e.jsx(g,{id:"speechSettings.content.voice",defaultMessage:"Voice"})}),e.jsxs("div",{className:"flex flex-row flex-nowrap items-center gap-1",children:[c?e.jsxs(e.Fragment,{children:[e.jsx(se,{voice:c,voiceSpeed:s}),e.jsx("div",{className:"h-4 border-s"})]}):null,e.jsxs(l.Root,{value:d,onValueChange:o=>a(o),disabled:n,children:[e.jsxs(l.Trigger,{children:[e.jsx(l.Value,{}),e.jsx(l.Icon,{})]}),e.jsx(l.Portal,{children:e.jsx(l.Content,{children:t.map(({voice:o,name:x})=>e.jsx(l.Item,{value:o,children:x},o))})})]})]})]})})})}function le({voiceSpeed:s,setVoiceSpeed:n,isLoading:r}){const[a,t]=u.useState(s);return u.useEffect(()=>t(s),[s]),e.jsxs("div",{className:"flex w-full flex-col gap-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{children:e.jsx(g,{id:"speechSettings.content.voiceSpeed",defaultMessage:"Voice speed"})}),e.jsx("div",{className:"text-token-text-secondary tabular-nums",children:e.jsx(g,{id:"speechSettings.content.voiceSpeed.current",defaultMessage:"{value}x",values:{value:a.toFixed(1)}})})]}),e.jsx("div",{className:"w-full",children:e.jsx("div",{className:"flex items-center gap-3",children:e.jsxs(Z,{className:"relative flex w-full items-center",min:j,max:v,step:_,value:[a],disabled:r,onValueChange:i=>t(i[0]),onValueCommit:i=>{const d=i[0],c=Math.min(v,Math.max(j,d));n(c.toString())},children:[e.jsxs($,{className:"relative h-[4px] grow rounded-full",children:[e.jsx("div",{className:"bg-token-text-tertiary/30 absolute top-0 bottom-0 rounded-full",style:{left:M,right:M}}),e.jsx("div",{className:"pointer-events-none absolute top-0 bottom-0",style:{left:S/2,right:S/2},children:te.map(i=>e.jsx("div",{className:"bg-token-text-secondary/30 absolute top-[-2px] bottom-[-2px] rounded",style:{width:C,left:"".concat(i/I*100,"%"),transform:"translateX(-50%)"}},i))})]}),e.jsx(Q,{className:"bg-token-bg-primary border-token-bg-secondary block h-[24px] cursor-pointer rounded-full border focus:outline-none",style:{width:S}})]})})})]})}function re(){const{isLoading:s,value:n,setValue:r}=y(b.VoiceMainLanguage);return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{children:e.jsx(g,{id:"speechSettings.content.language",defaultMessage:"Spoken language"})}),e.jsxs(l.Root,{value:s?"":n!=null?n:f.Auto,onValueChange:a=>r(a),disabled:s,children:[e.jsxs(l.Trigger,{children:[e.jsx(l.Value,{}),e.jsx(l.Icon,{})]}),e.jsx(l.Portal,{children:e.jsxs(l.Content,{position:"popper",style:{maxHeight:"calc(var(--radix-select-content-available-height) - 5rem)"},children:[e.jsx(l.Item,{value:f.Auto,children:e.jsx(g,{id:"speechSettings.content.autoDetect",defaultMessage:"Auto-detect"})}),Object.entries(f).filter(([a,t])=>t!==f.Auto).map(([a,t])=>e.jsx(l.Item,{value:t,className:"capitalize",children:a},t))]})})]})]}),e.jsx(W,{children:e.jsx(g,{id:"speechSettings.content.autoDetectDescription",defaultMessage:"For best results, select the language you mainly speak. If it's not listed, it may still be supported via auto-detection."})})]})}function ce(){const s=A();return e.jsx(B,{label:s.formatMessage(w.voiceAndScreenSharing),enabled:!1,onChange:()=>{},disabled:!0,description:s.formatMessage(w.voiceAndScreenSharingDescription)})}const w=T({voiceAndScreenSharing:{id:"9dnywk",defaultMessage:"Voice and screen sharing"},voiceAndScreenSharingDescription:{id:"wjwSas",defaultMessage:"Sharing your screen and video while in voice mode has been disabled by your workspace administrator."}});export{xe as S,y as u};
//# sourceMappingURL=nuz80uov2gm1dlm5.js.map
