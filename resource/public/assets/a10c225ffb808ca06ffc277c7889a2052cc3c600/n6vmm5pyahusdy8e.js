var ge=Object.defineProperty,fe=Object.defineProperties;var he=Object.getOwnPropertyDescriptors;var q=Object.getOwnPropertySymbols;var Ce=Object.prototype.hasOwnProperty,xe=Object.prototype.propertyIsEnumerable;var H=(n,e,a)=>e in n?ge(n,e,{enumerable:!0,configurable:!0,writable:!0,value:a}):n[e]=a,f=(n,e)=>{for(var a in e||(e={}))Ce.call(e,a)&&H(n,a,e[a]);if(q)for(var a of q(e))xe.call(e,a)&&H(n,a,e[a]);return n},P=(n,e)=>fe(n,he(e));import{b as E,g as Me,r as v,j as t,d as J,M,c as Q}from"./jj85rqzpbnvv3emr.js";import{aE as be,L as N,p as I,P as V,an as z,iK as Te,w as Se,kM as ee,he as ye,hc as Pe,ha as ve,h8 as je,f as _e,p2 as Ne,hZ as Ie,i as Oe,j as K,p3 as Re,C as Ee,p4 as _,I as ke,s as R,hj as we,B as Fe,_ as Ae,e as $,p5 as De,k as W}from"./lef5ym39glv4981l.js";import{br as Le,bq as te,fm as Be,fn as Ue,ao as Ge,fo as oe,fp as Ye,fq as qe,fr as He,fs as Ve,ft as ze,fu as Ke,fv as $e,fw as We,fx as Xe,fy as Ze,fz as Je,bL as Qe,bf as et,fA as tt,fB as ot,a3 as nt}from"./mclphevd122040jw.js";import{u as rt}from"./l041el2tch1t3nkf.js";import{u as at}from"./dta5t6ifyam55mk9.js";const ne=Le.hasDismissedPromoRedemption,O="month",re="year",ae="hour";function st(n){return n==="chatgptplusplan"?"Plus":n==="chatgptgoplan"?"Go":(Se.warn("Unsupported plan name for promo redemption banner, falling back to Plus: ",{planName:n}),"Plus")}function xt(){const{eligible:n}=te(ne);return N.getItem(I.PromoCode)?n:!1}function Mt(){const n=E(),{markAsViewed:e}=te(ne),a=Me(),c=be(),{initialBillingDetails:r}=rt(c,!0),l=N.getItem(I.PromoCode),{promoMetadata:i}=Be(l),d=i!=null&&!i.schedule,C=(i==null?void 0:i.plan_name)&&st(i.plan_name)||"";if(v.useEffect(()=>{d&&(V.logEvent("Promo Redemption Banner Shown",{promoCode:l}),z.logEvent("chatgpt_promo_redemption_banner_shown"))},[d,l]),!d)return null;const p=i.plan_name==="chatgptgoplan"?Ue():Ge(),h=it(n,r,i,p,C),u=lt(n,r,i,p),g=t.jsxs("div",{className:"grow",children:[t.jsx("div",{className:"mb-0.5 font-semibold",children:h}),t.jsx("span",{className:"text-token-text-secondary",children:u})]});return t.jsx(Te,{onPrimaryCtaClick:()=>{const x=N.getItem(I.PromoCode);N.removeItem(I.PromoCode),e(),a("/p/".concat(x,"#pricing")),V.logEvent("Promo Redemption Banner Redeem Button Clicked",{promoCode:x}),z.logEvent("chatgpt_promo_redemption_banner_redeem_button_clicked")},primaryCtaText:n.formatMessage(S.bannerPrimaryCta),onDismiss:e,content:g})}function ct({billingDetails:n,planName:e}){const a=n.currency;let c;switch(a){case je:c=e==="chatgptgoplan"?Xe:Ze;break;case ve:c=e==="chatgptgoplan"?$e:We;break;case Pe:c=e==="chatgptgoplan"?ze:Ke;break;case ye:c=e==="chatgptgoplan"?He:Ve;break;default:c=e==="chatgptgoplan"?Ye:qe}return c}function se(n,e){const{discount:a}=e;let c=ct({billingDetails:n,planName:e.plan_name});if("percentage"in a){const r=(a==null?void 0:a.percentage)/100;c=c*(1-r)}else if("value"in a){const r=a==null?void 0:a.value;c-=r}return c}function it(n,e,a,c,r){var h,u;const{discount:l,duration:i}=a,{currencySymbol:d}=oe(c,e.currency),C=i?i.period:O,p=i?i.num_periods:1;if("percentage"in l){const g=l==null?void 0:l.percentage;return n.formatMessage(S.bannerTitleForPercentageDiscount,{discount:"".concat(g),planName:r})}else if("value"in l){const g=se(e,a),x=(u=(h=d.code.defaultMessage)==null?void 0:h.toString())!=null?u:ee,b=n.formatNumber(g,{style:"currency",currency:x,minimumFractionDigits:0,maximumFractionDigits:2});let y;switch(C){case O:p===1?y=n.formatMessage(S.bannerTitleForSingleMonth,{cost:b,planName:r}):y=n.formatMessage(S.bannerTitleForPluralMonths,{cost:b,num_months:p,planName:r});break;case re:p===1?y=n.formatMessage(S.bannerTitleForSingleYear,{cost:b,planName:r}):y=n.formatMessage(S.bannerTitleForPluralYears,{cost:b,num_years:p,planName:r});break;case ae:throw new Error("Period 'hour' is not supported")}return y}}function lt(n,e,a,c){var g,x;const{duration:r}=a,{currencySymbol:l}=oe(c,e.currency),i=r?r.period:O,d=r?r.num_periods:1,C=(x=(g=l.code.defaultMessage)==null?void 0:g.toString())!=null?x:ee,p=se(e,a),h=n.formatNumber(p,{style:"currency",currency:C,minimumFractionDigits:0,maximumFractionDigits:2});let u;switch(i){case O:d===1?u=n.formatMessage(S.bannerContentForSingleMonth,{cost:h}):u=n.formatMessage(S.bannerContentForPluralMonths,{num_months:d,cost:h});break;case re:d===1?u=n.formatMessage(S.bannerContentForSingleYear,{cost:h}):u=n.formatMessage(S.bannerContentForPluralYears,{num_years:d,cost:h});break;case ae:throw new Error("Period 'hour' is not supported")}return u}const S=J({bannerTitleForPluralMonths:{id:"promoRedemptionBannerTitleForPluralMonths",defaultMessage:"Get {planName} for {cost}/month for the first {num_months} months"},bannerTitleForSingleMonth:{id:"promoRedemptionBannerTitleForSingleMonth",defaultMessage:"Get {planName} for {cost}/month for the first month"},bannerTitleForPluralYears:{id:"promoRedemptionBannerTitleForPluralYears",defaultMessage:"Get {planName} for {cost}/year for the first {num_years} years"},bannerTitleForSingleYear:{id:"promoRedemptionBannerTitleForSingleYear",defaultMessage:"Get {planName} for {cost}/year for the first year"},bannerTitleForPercentageDiscount:{id:"promoRedemptionBannerTitleForPercentageDiscount",defaultMessage:"Finish redeeming your {discount}% off code for {planName}"},bannerContentForPluralMonths:{id:"promoRedemptionBannerContentForPluralMonths",defaultMessage:"Get {num_months} months of expanded access for only {cost} per month."},bannerContentForSingleMonth:{id:"promoRedemptionBannerContentForSingleMonth",defaultMessage:"Get 1 month of expanded access for only {cost} per month."},bannerContentForPluralYears:{id:"promoRedemptionBannerContentForPluralYears",defaultMessage:"Get {num_years} years of expanded access for only {cost} per year."},bannerContentForSingleYear:{id:"promoRedemptionBannerContentForSingleYear",defaultMessage:"Get 1 year of expanded access for only {cost} per year."},bannerPrimaryCta:{id:"promoRedemptionBannerPrimaryCta",defaultMessage:"Redeem"}}),X=1024*1024*4,Z=()=>{"use forget";const n=Q.c(1);let e;return n[0]===Symbol.for("react.memo_cache_sentinel")?(e=t.jsx("span",{className:"text-token-text-tertiary font-normal",children:t.jsx(M,f({},s.optionalText))}),n[0]=e):e=n[0],e},dt=n=>{"use forget";const e=Q.c(15),{previewUrl:a,isDragActive:c}=n,r=E(),l=Ae();if(!a||c){const u=c?"border-green-600 bg-green-600/30 text-green-600":"border-token-border-heavy text-token-text-tertiary";let g;e[0]!==u?(g=$("rounded-xl border border-dashed p-4",u),e[0]=u,e[1]=g):g=e[1];let x;e[2]===Symbol.for("react.memo_cache_sentinel")?(x=t.jsx(nt,{className:"h-6 w-6"}),e[2]=x):x=e[2];let b;return e[3]!==g?(b=t.jsx("span",{className:g,children:x}),e[3]=g,e[4]=b):b=e[4],b}const i=l&&"bg-white";let d;e[5]!==i?(d=$("bg-token-bg-tertiary overflow-hidden rounded-xl border",i),e[5]=i,e[6]=d):d=e[6];let C;e[7]!==r?(C=r.formatMessage(s.iconPreviewAlt),e[7]=r,e[8]=C):C=e[8];let p;e[9]!==a||e[10]!==C?(p=t.jsx("img",{src:a,alt:C,className:"h-14 w-14 object-cover"}),e[9]=a,e[10]=C,e[11]=p):p=e[11];let h;return e[12]!==d||e[13]!==p?(h=t.jsx("span",{className:d,children:p}),e[12]=d,e[13]=p,e[14]=h):h=e[14],h},ut=n=>new Promise((e,a)=>{const c=new FileReader;c.onloadend=()=>e(c.result),c.onerror=()=>a(),c.readAsDataURL(n)}),bt=({onClose:n})=>{"use forget";const e=_e(),{mutateAsync:a,isPending:c}=Ne(Ie.CONNECTOR_SETTING),r=E(),[l,i]=v.useState(!1),[d,C]=v.useState("OAUTH"),[p,h]=v.useState(!1),u=Je({defaultValues:{name:"",url:"",description:"",oauthClientId:"",oauthClientSecret:""},onSubmit:async({value:o})=>{var B,U,G;const m=g?await ut(g):null;let D=[],L=null;if(d==="OAUTH")try{const T=await De(o.url.trim());if(D=[T],A){const j=o.oauthClientId.trim(),Y=o.oauthClientSecret.trim();if(Y.length!==0&&j.length===0){e.danger(r.formatMessage(s.clientIdRequired));return}j.length!==0&&(L={client_id:j,client_secret:Y,scopes:(B=T.base_scopes)!=null?B:[]})}}catch(T){e.danger(r.formatMessage(s.oauthConfigError));return}try{const T=await a({name:o.name.trim(),mcp_url:o.url.trim(),description:o.description.trim(),logo_url:m,supported_auth:D,oauth_client_params:L,authTypeOverride:d});if(!T.implementsRetrievable&&!ie){w(!0);return}n((U=T.connector)==null?void 0:U.id)}catch(T){if(T instanceof W&&T.status===409)e.danger(r.formatMessage(s.duplicateName));else{const j=T instanceof W&&typeof((G=T.detail)==null?void 0:G.details)=="string"?T.detail.details:void 0;e.danger(r.formatMessage(s.createConnectorError),{description:j})}return}},validators:{onSubmit:({value:o})=>{const m={};return o.name.trim()||(m.name=r.formatMessage({id:"vtyh9X",defaultMessage:"Name is required"})),o.url.trim()?o.url.trim().match(/^https?:\/\//)||(m.url=r.formatMessage({id:"7hn6Jq",defaultMessage:"URL is invalid"})):m.url=r.formatMessage({id:"7WV2q4",defaultMessage:"URL is required"}),{fields:m}}}}),[g,x]=v.useState(null),[b,y]=v.useState(null),[k,w]=v.useState(!1),F=Oe(),A=K(F,"3832963721"),ce=K(F,"735368229"),ie=Re(),le=o=>{if(b&&URL.revokeObjectURL(b),o.size>X){e.danger(r.formatMessage(s.iconTooLarge));return}x(o);const m=URL.createObjectURL(o);y(m)},{getRootProps:de,getInputProps:ue,isDragActive:me}=at({accept:{"image/*":[]},multiple:!1,noKeyboard:!0,noClick:!0,maxSize:X,onDropAccepted:o=>{o.length>0&&le(o[0])},onDropRejected:()=>{e.danger(r.formatMessage(s.iconInvalid))}}),pe=o=>{o.preventDefault(),p&&(i(!0),u.handleSubmit())};return t.jsx(Ee,{testId:"modal-create-custom-connector",title:t.jsx("span",{className:"flex items-center gap-1",children:t.jsx(M,P(f({},s.createCustomConnectorModalTitle),{values:{betaBadge:t.jsx(ot,{})}}))}),type:"success",isOpen:!0,onClose:()=>n(),showCloseButton:!0,size:"custom",className:"max-w-[448px]",children:t.jsxs("form",{onSubmit:pe,className:"flex flex-col gap-4",children:[t.jsxs("label",P(f({},de({className:"flex cursor-pointer items-center gap-2.5"})),{children:[t.jsx("input",f({},ue())),t.jsx(dt,{previewUrl:b,isDragActive:me}),t.jsxs("span",{className:"flex flex-col gap-1",children:[t.jsx("span",{className:"text-sm font-medium",children:t.jsx(M,P(f({},s.iconTitle),{values:{optionalText:t.jsx(Z,{})}}))}),t.jsx("span",{className:"text-token-text-tertiary text-xs",children:t.jsx(M,f({},s.iconDescription))})]})]})),t.jsx(u.Field,{name:"name",children:o=>t.jsxs("div",{children:[t.jsx("label",{htmlFor:"custom-connector-name",className:"mb-1 block text-sm font-medium",children:t.jsx(M,f({},s.nameTitle))}),t.jsx(_,{name:"custom-connector-name",value:o.state.value,onChange:m=>{o.handleChange(m.target.value),l&&i(!1)},ariaLabel:r.formatMessage(s.nameTitle),placeholder:r.formatMessage(s.namePlaceholder),error:l?o.state.meta.errors[0]:void 0})]})}),t.jsx(u.Field,{name:"description",children:o=>t.jsxs("div",{children:[t.jsx("label",{htmlFor:"custom-connector-description",className:"mb-1 block text-sm font-medium",children:t.jsx(M,P(f({},s.descriptionTitle),{values:{optionalText:t.jsx(Z,{})}}))}),t.jsx(ke,{name:"custom-connector-description",value:o.state.value,onChange:m=>o.handleChange(m.target.value),ariaLabel:r.formatMessage(s.descriptionTitle,{optionalText:r.formatMessage(s.optionalText)}),placeholder:r.formatMessage(s.descriptionPlaceholder)})]})}),t.jsx(u.Field,{name:"url",children:o=>t.jsxs("div",{children:[t.jsx("label",{htmlFor:"custom-connector-url",className:"mb-1 block text-sm font-medium",children:t.jsx(M,f({},s.urlTitle))}),t.jsx(_,{name:"custom-connector-url",value:o.state.value,onChange:m=>{o.handleChange(m.target.value),l&&i(!1),k&&w(!1)},ariaLabel:r.formatMessage(s.urlTitle),placeholder:r.formatMessage(s.urlPlaceholder),error:k?t.jsx("span",{children:t.jsx(M,P(f({},ce?s.developerModeConformanceError:s.conformanceError),{values:{link:m=>t.jsx(R,{href:"https://platform.openai.com/docs/mcp",openNewTab:!0,children:m})}}))}):l?o.state.meta.errors[0]:void 0})]})}),t.jsxs("div",{children:[t.jsx("label",{htmlFor:"custom-connector-auth",className:"mb-1 block text-sm font-medium",children:t.jsx(M,f({},s.authTypeTitle))}),t.jsx(Qe,{options:[{label:r.formatMessage(s.oauthOption),value:"OAUTH"},{label:r.formatMessage(s.noAuthOption),value:"NONE"}],value:d,onValueChange:o=>C(o),triggerId:"custom-connector-auth",triggerClassName:"w-full justify-between border-token-border-medium"})]}),d==="OAUTH"&&A&&t.jsxs(t.Fragment,{children:[t.jsx(u.Field,{name:"oauthClientId",children:o=>t.jsx(_,{name:"custom-connector-client-id",value:o.state.value,onChange:m=>{o.handleChange(m.target.value),l&&i(!1)},ariaLabel:r.formatMessage(s.clientIdTitle),placeholder:r.formatMessage(s.oauthClientIdPlaceholder),error:l?o.state.meta.errors[0]:void 0,autoComplete:"off"})}),t.jsx(u.Field,{name:"oauthClientSecret",children:o=>t.jsx(_,{name:"custom-connector-client-secret",type:"password",value:o.state.value,onChange:m=>{o.handleChange(m.target.value),l&&i(!1)},ariaLabel:r.formatMessage(s.clientSecretTitle),placeholder:r.formatMessage(s.oauthClientSecretPlaceholder),error:l?o.state.meta.errors[0]:void 0,autoComplete:"off"})})]}),t.jsxs("div",{children:[t.jsxs("div",{className:"border-token-border-status-warning bg-token-bg-status-warning text-token-text-status-warning flex items-center gap-2 rounded-t-2xl border border-b-0 px-4 py-3 text-sm font-medium",children:[t.jsx(we,{className:"h-6 w-6"}),t.jsx("span",{children:t.jsx(M,P(f({},s.customConnectorBanner),{values:{link:o=>t.jsx(R,{href:"http://platform.openai.com/docs/mcp#risks-and-safety",openNewTab:!0,className:"inline",children:o},"custom-connector-banner-link")}}))})]}),t.jsxs("label",{htmlFor:"trust-checkbox",className:"flex items-center gap-3 rounded-b-2xl border border-gray-200 bg-white px-4 py-4 text-sm dark:border-gray-700 dark:bg-gray-800",children:[t.jsx(et,{id:"trust-checkbox",onChange:()=>h(o=>!o),disabled:c}),t.jsxs("div",{children:[t.jsx("p",{className:"text-sm font-medium",children:t.jsx(M,f({},s.customConnectorTrustTitle))}),t.jsx("p",{className:"text-token-text-tertiary text-sm",children:t.jsx(M,f({},s.customConnectorTrustSubtitle))})]})]})]}),t.jsxs("div",{className:"flex w-full items-center justify-between",children:[t.jsxs(R,{href:"http://platform.openai.com/docs/mcp",openNewTab:!0,className:"text-token-text-tertiary text-sm",children:[t.jsx(tt,{className:"me-1.5 inline h-4.5 w-4.5"}),t.jsx(M,f({},s.readTheGuideLink))]}),t.jsx(u.Subscribe,{selector:o=>[o.isSubmitting],children:([o])=>t.jsx(Fe,{type:"submit",loading:o,disabled:!p,children:t.jsx(M,f({},s.createButton))})})]})]})})},s=J({createCustomConnectorModalTitle:{id:"createCustomConnectorModal.title",defaultMessage:"New Connector {betaBadge}"},iconTitle:{id:"createCustomConnectorModal.iconTitle",defaultMessage:"Icon {optionalText}"},iconDescription:{id:"createCustomConnectorModal.iconDescription",defaultMessage:"Minimum size: 128 x 128 px"},nameTitle:{id:"createCustomConnectorModal.nameTitle",defaultMessage:"Name"},urlTitle:{id:"createCustomConnectorModal.urlTitle",defaultMessage:"MCP Server URL"},descriptionTitle:{id:"createCustomConnectorModal.descriptionTitle",defaultMessage:"Description {optionalText}"},optionalText:{id:"createCustomConnectorModal.optionalText",defaultMessage:"(optional)"},readTheGuideLink:{id:"createCustomConnectorModal.readTheGuideLink",defaultMessage:"Read the guide"},createButton:{id:"createCustomConnectorModal.createButton",defaultMessage:"Create"},iconPreviewAlt:{id:"createCustomConnectorModal.iconPreviewAlt",defaultMessage:"Icon preview"},namePlaceholder:{id:"createCustomConnectorModal.namePlaceholder",defaultMessage:"Custom Tool"},urlPlaceholder:{id:"createCustomConnectorModal.urlPlaceholder",defaultMessage:"https://example.com/sse"},descriptionPlaceholder:{id:"createCustomConnectorModal.descriptionPlaceholder",defaultMessage:"Explain what it does in a few words"},iconTooLarge:{id:"createCustomConnectorModal.iconTooLarge",defaultMessage:"Icon is too large"},iconInvalid:{id:"createCustomConnectorModal.iconInvalid",defaultMessage:"Invalid icon"},authTypeTitle:{id:"createCustomConnectorModal.authTypeTitle",defaultMessage:"Authentication"},oauthOption:{id:"createCustomConnectorModal.oauthOption",defaultMessage:"OAuth"},noAuthOption:{id:"createCustomConnectorModal.noAuthOption",defaultMessage:"No authentication"},oauthConfigError:{id:"createCustomConnectorModal.oauthConfigError",defaultMessage:"Error fetching OAuth configuration"},customConnectorBanner:{id:"createCustomConnectorModal.customConnectorBanner",defaultMessage:"Beta intended for developer use only. <link>Learn more</link>"},customConnectorTrustTitle:{id:"createCustomConnectorModal.customConnectorTrustTitle",defaultMessage:"I trust this application"},customConnectorTrustSubtitle:{id:"createCustomConnectorModal.customConnectorTrustSubtitle",defaultMessage:"Custom connectors are not verified by OpenAI. Malicious developers may attempt to steal your data."},conformanceError:{id:"createCustomConnectorModal.conformanceError",defaultMessage:"This MCP server doesn't implement <link>our specification</link>"},developerModeConformanceError:{id:"createCustomConnectorModal.developerModeConformanceError",defaultMessage:"This MCP server doesn't implement <link>our specification</link>. Enable Developer Mode in Advanced Connector Settings to create custom connectors that support arbitrary tool calls"},createConnectorError:{id:"createCustomConnectorModal.createConnectorError",defaultMessage:"Error creating connector"},duplicateName:{id:"createCustomConnectorModal.duplicateName",defaultMessage:"Connector name already exists"},clientIdTitle:{id:"createCustomConnectorModal.clientIdTitle",defaultMessage:"OAuth client ID"},oauthClientIdPlaceholder:{id:"createCustomConnectorModal.oauthClientIdPlaceholder",defaultMessage:"Client ID (Optional)"},clientSecretTitle:{id:"createCustomConnectorModal.clientSecretTitle",defaultMessage:"OAuth client secret"},oauthClientSecretPlaceholder:{id:"createCustomConnectorModal.oauthClientSecretPlaceholder",defaultMessage:"Client Secret (Optional)"},clientIdRequired:{id:"createCustomConnectorModal.clientIdRequired",defaultMessage:"Enter a client ID or remove the client secret"}});export{bt as C,Mt as P,ne as a,xt as u};
//# sourceMappingURL=n6vmm5pyahusdy8e.js.map
