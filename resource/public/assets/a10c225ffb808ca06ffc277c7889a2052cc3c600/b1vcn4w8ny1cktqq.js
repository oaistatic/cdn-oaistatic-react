const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/mnage1jfoeko21ag.js","assets/jj85rqzpbnvv3emr.js","assets/lef5ym39glv4981l.js","assets/root-ogjlcpyy.css"])))=>i.map(i=>d[i]);
var Oe=Object.defineProperty,Re=Object.defineProperties;var De=Object.getOwnPropertyDescriptors;var ye=Object.getOwnPropertySymbols;var Ee=Object.prototype.hasOwnProperty,Ie=Object.prototype.propertyIsEnumerable;var ke=(a,s,t)=>s in a?Oe(a,s,{enumerable:!0,configurable:!0,writable:!0,value:t}):a[s]=t,l=(a,s)=>{for(var t in s||(s={}))Ee.call(s,t)&&ke(a,t,s[t]);if(ye)for(var t of ye(s))Ie.call(s,t)&&ke(a,t,s[t]);return a},K=(a,s)=>Re(a,De(s));import{r as h,b as W,j as e,M as n,d as ee,u as V,A as Le,m as Fe,p as We,g as ze,a as pe,G as Ue}from"./jj85rqzpbnvv3emr.js";import{B as R,e as B,I as be,fv as Be,C as Ne,ai as _e,R as H,ex as He,ey as qe,qV as f,o as O,b8 as Se,aI as Pe,eE as b,aA as Ke,E as oe,G as P,ax as Ye,i as Ve,f$ as Qe,s as Je,f6 as $e,fx as Xe,dP as Ze,p_ as es,f9 as ve,m as ss,f as me,aE as ts,i9 as as,qP as is,qW as Z,hu as ne,qX as ns,T as Ce}from"./lef5ym39glv4981l.js";import{be as ce,a3 as de,bj as rs,bf as ue,bN as Me,dr as ls,ca as os,bM as cs,lR as ds,bW as us,kL as ps,jU as ms,nF as gs,nG as xs,bH as hs,bI as fs,bJ as js,at as S,nH as Ts}from"./mclphevd122040jw.js";import{a as ws,c as ys,u as ks,d as Ss}from"./fya3qb1e1s8z4llj.js";import{T as p}from"./i5991cad8s41d2db.js";import{S as Ps}from"./cyyug2nblx9tkzbn.js";import{S as vs}from"./n5wrqpcxv1sjah44.js";import{S as Ms}from"./daioev77nl79ehf6.js";import{S as bs}from"./c5d5as11kwvue83v.js";import{b as re}from"./ghs0b9qiouvv0rxl.js";import{A as Ns}from"./n7frs8nesbn1uut4.js";import"./n82i9qkvs5r9bggc.js";import"./9z485wf4plyfoo73.js";import"./cncd8uuk5eicbkeu.js";import"./dta5t6ifyam55mk9.js";import"./cdk0cmbgnafohb1q.js";import"./gyvvad7btmtz1x9o.js";import"./n6vmm5pyahusdy8e.js";import"./l041el2tch1t3nkf.js";import"./easgat082167v0i8.js";import"./dvqe6kc43fkjsavv.js";import"./mw2u7timj0qnsnvj.js";import"./hnotrmacgvnfyexv.js";import"./mej2ctt6swvc1m1z.js";import"./go9515ghq3pauvs4.js";import"./d9serb02oz4r1lgw.js";import"./m07wx0qobxpm3v8p.js";import"./fpayvvmhdp5pkskd.js";import"./fc3ognvcdyovy00k.js";function _s({value:a,title:s,valueClassName:t,onChange:i,emptyMessage:o}){const[r,c]=h.useState(!1),[m,x]=h.useState(""),j=W(),T=h.useRef(null),g=()=>{if(m!==""){const u=m.trim();i([...a,u]),c(!1),x("")}};return e.jsxs(p.Root,{className:"w-auto",children:[e.jsxs(p.Header,{children:[e.jsx(p.HeaderCell,{children:s}),e.jsx(p.HeaderCell,{})]}),e.jsxs(p.Body,{children:[a.map((u,k)=>e.jsxs(p.Row,{children:[e.jsx(p.Cell,{className:t,children:u}),e.jsx(p.Cell,{textAlign:"right",children:e.jsx(R,{type:"button",onClick:()=>{i(a.filter((C,G)=>G!==k))},children:e.jsx(ce,{className:"icon-sm"})})})]},k)),o&&a.length===0?e.jsx(p.Row,{children:e.jsx(p.Cell,{colSpan:2,className:"text-center text-sm italic",children:o})}):null,e.jsxs(p.Row,{children:[e.jsxs("div",{className:B("mt-2 flex flex-row gap-2 p-1",!r&&"hidden"),children:[e.jsx(be,{ariaLabel:j.formatMessage({id:"CgP6Du",defaultMessage:"Add new domain"}),className:"w-80",name:"newDomain",value:m,onChange:u=>{x(u.target.value)},ref:T,onPressEnter:g,placeholder:"example.com"}),e.jsx(R,{className:"grow-0",onClick:g,children:e.jsx(n,{id:"svRVol",defaultMessage:"Add"})})]}),!r&&e.jsxs(R,{type:"button",onClick:()=>{c(!0),setTimeout(()=>{var u;(u=T.current)==null||u.focus()},0)},className:"mt-2",children:[e.jsx(de,{className:"icon-sm inline-block"}),e.jsx(n,{id:"J5y3+M",defaultMessage:"Add new domain"})]})]})]})]})}function Cs(){return e.jsx(Be,{className:"icon-sm text-token-text-tertiary ms-1"})}function Gs({isOpen:a,onClose:s,account:t,gpt:i}){const o=W(),[r,c]=h.useState(!1),[m,x]=h.useState(""),[j,T]=h.useState(!0),g=i.gizmo.is_unassigned;return e.jsxs(Ne,{testId:"modal-change-owner",size:"custom",className:"max-w-lg text-sm",isOpen:a,onClose:_e,type:"success",title:o.formatMessage(g?F.assignModalTitle:F.changeModalTitle),children:[e.jsx("p",{className:"text-token-text-primary mb-4",children:e.jsx(n,K(l({},F.changeModalPrompt),{values:{gptName:i.gizmo.display.name}}))}),!j&&e.jsx("p",{className:"text-red-500",children:e.jsx(n,l({},F.invalidEmail))}),e.jsx(be,{ariaLabel:o.formatMessage({id:"x4A5l2",defaultMessage:"Email"}),className:B("px-3 py-2",j?"":"border-red-500"),name:"email",type:"email",value:m,placeholder:"Email",onChange:u=>{x(u.target.value)}}),e.jsxs("div",{className:"mt-4 flex justify-end gap-2",children:[e.jsx(R,{color:"secondary",onClick:()=>{s(!1),c(!1),T(!0)},loading:r,children:e.jsx(n,l({},F.cancelButtonText))}),e.jsx(R,{color:"primary",loading:r,onClick:()=>{c(!0),T(!0),m==""||!rs.test(m)?(T(!1),c(!1)):H.safePost("/accounts/{account_id}/gpts/{gizmo_id}/owner",{parameters:{path:{account_id:t.id,gizmo_id:i.gizmo.id}},requestBody:{email:m}}).then(()=>{s(!0),c(!1),T(!0)},()=>{T(!1),c(!1)})},children:e.jsx(n,l({},g?F.assignButtonText:F.changeOwnerButtonText))})]})]})}const F=ee({changeModalTitle:{id:"changeOwnerModal.changeModalTitle",defaultMessage:"Change Owner"},assignModalTitle:{id:"changeOwnerModal.assignModalTitle",defaultMessage:"Assign Owner"},changeModalPrompt:{id:"changeOwnerModal.changeModalPrompt",defaultMessage:"New owner of {gptName}"},cancelButtonText:{id:"changeOwnerModal.cancelButtonText",defaultMessage:"Cancel"},changeOwnerButtonText:{id:"changeOwnerModal.changeOwnerButtonText",defaultMessage:"Change owner"},assignButtonText:{id:"changeOwnerModal.assignButtonText",defaultMessage:"Assign"},invalidEmail:{id:"changeOwnerModal.invalidEmail",defaultMessage:"Email is invalid or does not belong to a member in this workspace"}});function As({isOpen:a,onClose:s,account:t,gpt:i}){const o=W(),[r,c]=h.useState(!1);return e.jsxs(Ne,{testId:"modal-delete-gpt",size:"custom",className:"max-w-lg text-sm",isOpen:a,onClose:_e,type:"success",title:o.formatMessage(X.deleteModalTitle),children:[e.jsx("p",{className:"text-token-text-primary mb-4",children:e.jsx(n,K(l({},X.deleteModalPrompt),{values:{gptName:i.gizmo.display.name}}))}),e.jsxs("div",{className:"mt-4 flex justify-end gap-2",children:[e.jsx(R,{color:"secondary",onClick:()=>{s(!1)},loading:r,children:e.jsx(n,l({},X.cancelButtonText))}),e.jsx(R,{color:"danger",loading:r,onClick:()=>{c(!0),H.safeDelete("/accounts/{account_id}/gpts/{gizmo_id}",{parameters:{path:{account_id:t.id,gizmo_id:i.gizmo.id}}}).finally(()=>{s(!0),c(!1)})},children:e.jsx(n,l({},X.deleteButtonText))})]})]})}const X=ee({deleteModalTitle:{id:"deleteGPTModal.accessModalTitle",defaultMessage:"Delete GPT"},deleteModalPrompt:{id:"deleteGPTModal.accessModalPrompt",defaultMessage:"Are you sure you would like to delete {gptName}? This action can not be undone."},cancelButtonText:{id:"deleteGPTModal.cancelButtonText",defaultMessage:"Cancel"},deleteButtonText:{id:"deleteGPTModal.deleteButtonText",defaultMessage:"Delete"}}),Os=He(()=>qe(()=>import("./mnage1jfoeko21ag.js"),__vite__mapDeps([0,1,2,3]))),Y=10;function Rs({account:a,gpt:s,thirdParty:t}){var z,A,Q,I,q;const i=V(),o=Ve(),[r,c]=h.useState(!1),[m,x]=h.useState(!1),[j,T]=h.useState(!1),[g,u]=h.useState(!1),k=ze(),C=new Date(t?(z=s.gizmo.workspace_approval_date)!=null?z:"":s.gizmo.created_at).toLocaleDateString("en-US",{month:"short",day:"numeric"}),G=new Date(s.gizmo.updated_at).toLocaleDateString("en-US",{month:"short",day:"numeric"}),D=h.useMemo(()=>{const M=s.tools.filter(L=>L.type===O.JIT_PLUGIN).map(L=>L.type===O.JIT_PLUGIN?L.metadata.domain:"");return M.length===1?M[0]:M.length>1?"".concat(M.length," domains"):""},[s.tools]),v=s.gizmo.is_unassigned;return e.jsxs(e.Fragment,{children:[e.jsxs(p.Row,{className:"relative",children:[e.jsx(p.Cell,{className:"max-w-[320px] min-w-[240px] py-2 pe-2 align-middle! whitespace-break-spaces",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"h-10 w-10 shrink-0",children:e.jsx(us,{src:s.gizmo.display.profile_picture_url,isFirstParty:(Q=(A=s.gizmo.tags)==null?void 0:A.includes(Qe.FirstParty))!=null?Q:!1,alt:s.gizmo.display.name,className:"h-10 w-10"})}),e.jsx(Je,{className:"ms-4",onClick:()=>k($e(o,s)),children:e.jsx("div",{className:"text-token-text-primary text-sm font-semibold",children:s.gizmo.display.name})})]})}),e.jsx(p.Cell,{className:"text-token-text-secondary w-full max-w-[160px] min-w-[100px] p-2 align-middle! text-sm",children:v?e.jsx("div",{className:"bg-token-bg-tertiary rounded-lg px-2 py-1",children:e.jsx(n,l({},d.unassigned))}):e.jsx("span",{className:"block overflow-hidden text-ellipsis whitespace-nowrap",children:s.gizmo.author.display_name})}),e.jsx(p.Cell,{wrap:!0,className:"text-token-text-secondary max-w-[240px] min-w-[160px] p-2 align-middle! text-sm",children:D===""?"â€”":D}),!t&&e.jsx(p.Cell,{className:"text-token-text-secondary p-2 align-middle! text-sm whitespace-nowrap",children:e.jsx(zs,{gizmo:s,account:a})}),!t&&e.jsx(p.Cell,{className:"text-token-text-secondary p-2 align-middle! text-sm whitespace-nowrap",children:(q=(I=s.gizmo.vanity_metrics)==null?void 0:I.num_conversations_str)!=null?q:0}),e.jsx(p.Cell,{className:"text-token-text-secondary p-2 align-middle! text-sm whitespace-nowrap",children:C}),e.jsx(p.Cell,{className:"text-token-text-secondary p-2 align-middle! text-sm whitespace-nowrap",children:G}),e.jsx(p.Cell,{className:"border-token-border-heavy bg-token-bg-primary sticky end-0 border-s-[0.5px] p-1 align-middle!",textAlign:"center",children:e.jsxs(b.Root,{children:[e.jsx(b.Trigger,{children:e.jsx(Xe,{className:"icon-sm"})}),e.jsx(b.Portal,{children:t?e.jsx(b.Content,{children:e.jsx(b.Item,{onClick:()=>{u(!0)},color:"danger",icon:ce,children:e.jsx(n,l({},d.removeFromWorkspace))})}):e.jsxs(b.Content,{children:[e.jsx(b.Item,{onClick:()=>{c(s)},icon:vs,children:e.jsx(n,l({},d.changeAccess))}),e.jsx(b.Item,{onClick:()=>{T(!0)},icon:v?Ms:Ze,children:e.jsx(n,l({},v?d.assignOwner:d.changeOwner))}),e.jsx(b.Item,{onClick:()=>{x(!0)},icon:ce,color:"danger",children:e.jsx(n,l({},d.deleteGPT))})]})})]})})]}),r&&e.jsx(bs,{publishedGizmo:r,gizmo:ps(r),onClose:()=>c(!1),appealGizmo:()=>k(es(r.gizmo.id)),shareOnly:!0,workspaceOwner:!0}),e.jsx(Gs,{isOpen:j,gpt:s,account:a,onClose:M=>{T(!1),M&&i.invalidateQueries({queryKey:["workspace",a.id,f.WORKSPACE]})}}),e.jsx(As,{isOpen:m,gpt:s,account:a,onClose:M=>{x(!1),M&&i.invalidateQueries({queryKey:["workspace",a.id,f.WORKSPACE]})}}),e.jsx(Os,{isOpen:g,gpt:s,account:a,onClose:M=>{u(!1),M&&i.invalidateQueries({queryKey:["workspace",a.id,f.THIRD_PARTY]})}})]})}function Ds(a,s,t){return a.sort((i,o)=>{var m,x,j,T,g,u;let r,c;if(s==="created_at")r=new Date(i.gizmo.created_at).getTime(),c=new Date(o.gizmo.created_at).getTime();else if(s==="updated_at")r=new Date(i.gizmo.updated_at).getTime(),c=new Date(o.gizmo.updated_at).getTime();else if(s==="workspace_approval_date")r=new Date((m=i.gizmo.workspace_approval_date)!=null?m:"").getTime(),c=new Date((x=o.gizmo.workspace_approval_date)!=null?x:"").getTime();else if(s==="vanity_metrics.num_conversations_str")r=(T=(j=i.gizmo.vanity_metrics)==null?void 0:j.num_conversations)!=null?T:0,c=(u=(g=o.gizmo.vanity_metrics)==null?void 0:g.num_conversations)!=null?u:0;else throw new Error("Invalid field: ".concat(s));if(t==="asc")return r-c;if(t==="desc")return c-r;throw new Error("Invalid direction: ".concat(t))})}function Es(a){switch(a){case P.User:case P.Group:return P.Private;case P.WorkspaceLink:return P.Workspace;default:return a}}function Is(a,s){return a.filter(t=>{const i=t.tools.some(c=>c.type===O.MEMORY?!1:s.tools[c.type]),o=Es(t.gizmo.share_recipient),r=s.share_recipient[o];return i||r})}function Ls(a,s){const t=s.toLowerCase();return a.filter(({gizmo:i})=>{var c;const o=i.author.display_name,r=i.display.name.toLowerCase();return(c=o==null?void 0:o.toLowerCase().includes(t))!=null?c:r.includes(t)})}const Fs=({account:a,showThirdParty:s})=>{var Te;const[t,i]=h.useState(f.WORKSPACE),{data:o,fetchNextPage:r,hasNextPage:c,isError:m,isFetchingNextPage:x}=Ws(a.id,t),j=W(),[T,g]=h.useState(!1),u=(Te=o==null?void 0:o.pages.flatMap(w=>w.items))!=null?Te:[];h.useEffect(()=>{!m&&!x&&c&&r()},[x,c,m,r]);const k=c,C=h.useRef(null),[G,D]=h.useState(""),[v,z]=h.useState(!1),[A,Q]=h.useState("updated_at"),[I,q]=h.useState("desc"),M=I==="asc"?ls:os,L={tools:{[O.BROWSER]:!1,[O.PYTHON]:!1,[O.JIT_PLUGIN]:!1,[O.RETRIEVAL]:!1,[O.DALLE]:!1,[O.IMAGE_GEN]:!1,[O.CANVAS]:!1},share_recipient:{[P.Private]:!1,[P.Workspace]:!1,[P.Link]:!1,[P.Marketplace]:!1}},[U,ge]=h.useState(L),[se,J]=h.useState(0),Ge=V();h.useEffect(()=>{v&&C.current&&C.current.focus()},[v]);function xe(w,_){const{id:E,checked:Ae}=w.currentTarget,we=l({},U);we[_][E]=Ae,ge(we),J(0)}function te(w){const _=A,E=I;A===w?q(I==="asc"?"desc":"asc"):(Q(w),q("desc")),Ye.addAction("workspace_gpt_table_sorting",{column:w,previousSort:_,previousDirection:E,newDirection:_===A?E==="asc"?"desc":"asc":"desc"})}let he=0,fe=0;const ae=Object.values(U.tools).filter(Boolean).length+Object.values(U.share_recipient).filter(Boolean).length;let N=[],je=0;const $=o===void 0,ie=!$&&u.length>0;return $||(je=Math.min(u.length,Y),fe=Math.ceil(u.length/Y),k?N=u:N=Ds(u,A,I),G!==""&&(N=Ls(N,G)),ae>0&&(N=Is(N,U)),he=Math.ceil(N.length/Y),N=N.slice(se*Y,(se+1)*Y)),e.jsxs("div",{children:[e.jsxs("div",{className:"border-token-border-default flex justify-between border-b",children:[e.jsxs("div",{className:"flex space-x-4 pt-2",children:[e.jsx(re,{isActive:t===f.WORKSPACE,onClick:()=>i(f.WORKSPACE),children:e.jsx(n,l({},d.workspaceTab))}),s&&e.jsx(re,{isActive:t===f.THIRD_PARTY,onClick:()=>i(f.THIRD_PARTY),children:e.jsx(n,l({},d.thirdPartyTab))}),e.jsx(re,{isActive:t===f.UNASSIGNED,onClick:()=>i(f.UNASSIGNED),children:e.jsx(n,l({},d.unassigned))})]}),!$&&e.jsxs("div",{className:"flex items-center pb-2",children:[ae>0&&e.jsxs(Se,{className:"flex items-center space-x-1",onClick:()=>ge(L),children:[e.jsx("span",{className:"font-medium",children:e.jsx(n,{id:"2HkRen",defaultMessage:"{filterCount, plural, one {# filter} other {# filters}} applied",values:{filterCount:ae}})}),e.jsx(Pe,{className:"icon"})]}),e.jsxs(b.Root,{children:[e.jsx(b.Trigger,{children:e.jsx(Ps,{className:"icon"})}),e.jsx(b.Portal,{children:e.jsx(b.Content,{className:"rounded-lg px-2 text-sm",children:e.jsxs("div",{className:"text-token-text-primary w-64 space-y-2 p-2 font-normal",children:[e.jsxs("div",{className:"flex-col space-y-2",children:[e.jsx("span",{className:"flex font-semibold",children:e.jsx(n,l({},d.capabilitiesTitle))}),Object.entries(U.tools).map(([w,_])=>e.jsx(ue,{id:w,checked:_,label:Me(a,w),onChange:E=>{xe(E,"tools")}},w))]}),e.jsxs("div",{className:"flex-col space-y-2",children:[e.jsx("span",{className:"flex font-semibold",children:e.jsx(n,l({},d.whoHasAccessTitle))}),Object.entries(U.share_recipient).map(([w,_])=>e.jsx(ue,{id:w,checked:_,label:Me(a,w),onChange:E=>{xe(E,"share_recipient")}},w))]})]})})})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx(Se,{onClick:()=>z(!0),children:e.jsx(Ke,{className:"icon"})}),e.jsx(Le,{children:v&&e.jsx(Fe.input,{type:"text",ref:C,placeholder:j.formatMessage(d.filterByNameOrBuilderPlaceholder),className:"bg-token-bg-primary border-none px-0 focus:ring-0",initial:{width:0,opacity:0},animate:{width:"192px",opacity:1},exit:{width:0,opacity:0,visibility:"hidden"},value:G,onChange:()=>{var w,_;J(0),D((_=(w=C.current)==null?void 0:w.value)!=null?_:"")}})}),v&&e.jsx("div",{className:"cursor-pointer",onClick:()=>{z(!1),D(""),J(0)},children:e.jsx(Pe,{className:"icon-sm"})})]}),s&&e.jsx(R,{color:"secondary",onClick:()=>g(!0),icon:de,children:e.jsx(n,l({},d.approveAGPTButton))})]})]}),$?e.jsx("div",{className:"mt-8 flex min-h-[320px] items-center justify-center",children:e.jsx(oe,{})}):e.jsxs("div",{style:{height:je*85+75},className:"mb-8 min-h-[320px]",children:[N.length>0?e.jsxs(p.Root,{size:"normal",className:"bg-token-bg-primary w-full min-w-full overflow-hidden overflow-x-auto sm:rounded-lg",children:[e.jsxs(p.Header,{children:[e.jsx(p.HeaderCell,{className:"text-token-text-secondary py-2 pe-4 text-start text-xs",children:e.jsx(n,l({},d.nameCellTitle))}),e.jsx(p.HeaderCell,{className:"text-token-text-secondary px-2 py-2 text-start text-xs",children:e.jsx(n,l({},d.builderCellTitle))}),e.jsx(p.HeaderCell,{className:"text-token-text-secondary px-2 py-2 text-start text-xs",children:e.jsx(n,l({},d.customActionsCellTitle))}),(t===f.WORKSPACE||t===f.UNASSIGNED)&&e.jsx(p.HeaderCell,{className:"text-token-text-secondary px-2 py-2 text-start text-xs",children:e.jsx(n,l({},d.whoHasAccessTitle))}),(t===f.WORKSPACE||t===f.UNASSIGNED)&&e.jsx(p.HeaderCell,{className:"text-token-text-secondary cursor-pointer px-2 py-2 text-start text-xs",children:e.jsxs("div",{className:"flex items-center gap-1",onClick:()=>{k||te("vanity_metrics.num_conversations_str")},children:[e.jsx("span",{children:e.jsx(n,l({},d.chatsCellTitle))}),A==="vanity_metrics.num_conversations_str"&&e.jsx(M,{className:B("icon-sm",k&&"opacity-30")})]})}),e.jsx(p.HeaderCell,{className:"text-token-text-secondary cursor-pointer px-2 py-2 text-start text-xs",children:e.jsxs("div",{className:"flex items-center gap-1",onClick:()=>{k||te("created_at")},children:[e.jsx("span",{children:t===f.WORKSPACE||t===f.UNASSIGNED?e.jsx(n,l({},d.createdCellTitle)):e.jsx(n,l({},d.approvedCellTitle))}),A==="created_at"&&e.jsx(M,{className:B("icon-sm",k&&"opacity-30")})]})}),e.jsx(p.HeaderCell,{className:"text-token-text-secondary cursor-pointer px-2 py-2 text-start text-xs",children:e.jsxs("div",{className:"flex items-center gap-1",onClick:()=>{k||te("updated_at")},children:[e.jsx("span",{children:e.jsx(n,l({},d.updatedCellTitle))}),A==="updated_at"&&e.jsx(M,{className:B("icon-sm",k&&"opacity-30")})]})}),e.jsx(p.HeaderCell,{className:"border-token-border-heavy absolute end-0 w-16 border-s-[0.5px]"})]}),e.jsx(p.Body,{children:N.map(w=>e.jsx(Rs,{account:a,gpt:w,thirdParty:t===f.THIRD_PARTY},w.gizmo.id))})]}):e.jsxs("div",{className:"flex h-full w-full flex-col items-center gap-4 py-16",children:[e.jsx("div",{children:e.jsx(cs,{className:"h-12 w-12 text-gray-400"})}),e.jsx("p",{className:"text-token-text-secondary",children:!k&&(t===f.THIRD_PARTY?e.jsx(n,l({},ie?d.noWorkspaceApprovedGPTsFound:d.noWorkspaceApprovedGPTs)):t===f.UNASSIGNED?e.jsx(n,l({},ie?d.noUnassignedGPTs:d.noUnassignedGPTsFound)):e.jsx(n,l({},ie?d.noWorkspaceGPTsFound:d.noWorkspaceGPTs)))}),t===f.THIRD_PARTY&&e.jsx(R,{color:"secondary",onClick:()=>g(!0),icon:de,children:e.jsx(n,l({},d.approveAGPTButton))})]}),k&&e.jsxs("div",{className:"text-token-text-tertiary my-4 flex w-full items-center justify-center gap-4",children:[e.jsx(oe,{}),e.jsx(n,l({},d.stillLoadingData))]}),fe>1&&e.jsx("div",{className:"mt-2 flex justify-center",children:e.jsx(ds,{currentPage:se,onChangeIndex:J,length:Math.max(he,1)})})]}),e.jsx(Ns,{isOpen:T,onClose:()=>{g(!1),Ge.invalidateQueries({queryKey:["workspace",a.id,f.THIRD_PARTY]})},account:a})]})};function Ws(a,s){return We({queryKey:["workspace",a,"gizmos",s],queryFn:async({pageParam:t})=>{var c,m;const i=s===f.THIRD_PARTY,o=s===f.UNASSIGNED,r=await H.safeGet("/accounts/{account_id}/gpts",{parameters:{path:{account_id:a},query:{is_approved:i,cursor:t,is_unassigned:o}}});return{total:(c=r.total_count)!=null?c:0,items:r.items,cursor:(m=r.cursor)!=null?m:null}},initialPageParam:"",getNextPageParam:t=>t.cursor})}function zs({gizmo:a,account:s}){const t=W(),i={[P.Private]:t.formatMessage(d.shareRecipientTitlePrivate),[P.User]:t.formatMessage(d.shareRecipientTitlePrivate),[P.Group]:t.formatMessage(d.shareRecipientTitlePrivate),[P.Link]:t.formatMessage(d.shareRecipientTitleLink),[P.Marketplace]:t.formatMessage(d.shareRecipientTitlePublic),[P.Workspace]:s.data.name,[P.WorkspaceLink]:s.data.name};if(["private","user","group"].includes(a.gizmo.sharing.recipient)){const{users:o,groups:r}=Us(a);return o===0&&r===0?e.jsx("span",{className:"text-token-text-secondary",children:e.jsx(n,l({},d.shareRecipientTitlePrivate))}):o>0&&r>0?e.jsxs("span",{className:"text-token-text-secondary",children:[i[a.gizmo.share_recipient],e.jsx("br",{}),e.jsx(n,{id:"fQ+tJG",defaultMessage:"Shared with {users} and {groups}",values:{users:t.formatMessage(d.userCount,{numUsers:o}),groups:t.formatMessage(d.groupCount,{numGroups:r})}})]}):o>0?e.jsxs("span",{className:"text-token-text-secondary",children:[i[a.gizmo.share_recipient],e.jsx("br",{}),e.jsx(n,K(l({},d.userCount),{values:{numUsers:o}}))]}):e.jsxs("span",{className:"text-token-text-secondary",children:[i[a.gizmo.share_recipient],e.jsx("br",{}),e.jsx(n,K(l({},d.groupCount),{values:{numGroups:r}}))]})}return e.jsx("span",{children:i[a.gizmo.share_recipient]})}function Us(a){if(a.gizmo.sharing.subjects){const s=a.gizmo.sharing.subjects.filter(i=>i.type===ve.USER).length,t=a.gizmo.sharing.subjects.filter(i=>i.type===ve.GROUP).length;return{users:s,groups:t}}return{users:0,groups:0}}const d=ee({stillLoadingData:{id:"workspaceSettings.stillLoadingData",defaultMessage:"Don't see what you're looking for? Some GPTs are still loading..."},noUnassignedGPTs:{id:"workspaceSettings.noUnassignedGPTs",defaultMessage:"No unassigned GPTs"},noUnassignedGPTsFound:{id:"workspaceSettings.noUnassignedGPTsFound",defaultMessage:"No unassigned GPTs found"},noWorkspaceGPTs:{id:"workspaceSettings.noWorkspaceGPTs",defaultMessage:"This workspace does not have any GPTs"},noWorkspaceGPTsFound:{id:"workspaceSettings.noWorkspaceGPTsFound",defaultMessage:"No workspace GPTs found"},noWorkspaceApprovedGPTs:{id:"workspaceSettings.noWorkspaceApprovedGPTs",defaultMessage:"You haven't approved any third-party GPTs"},noWorkspaceApprovedGPTsFound:{id:"workspaceSettings.noWorkspaceApprovedGPTsFound",defaultMessage:"No approved third-party GPTs found"},workspaceTab:{id:"workspaceSettings.workspaceTab",defaultMessage:"Workspace"},thirdPartyTab:{id:"workspaceSettings.thirdPartyTab",defaultMessage:"Third-party"},capabilitiesTitle:{id:"workspaceSettings.capabilitiesTitle",defaultMessage:"Capabilities"},whoHasAccessTitle:{id:"workspaceSettings.whoHasAccessTitle",defaultMessage:"Who has access"},filterByNameOrBuilderPlaceholder:{id:"workspaceSettings.filterByNameOrBuilderPlaceholder",defaultMessage:"Filter by name or builder..."},nameCellTitle:{id:"workspaceSettings.nameCellTitle",defaultMessage:"Name"},builderCellTitle:{id:"workspaceSettings.builderCellTitle",defaultMessage:"Builder"},customActionsCellTitle:{id:"workspaceSettings.customActionsCellTitle",defaultMessage:"Custom Actions"},chatsCellTitle:{id:"workspaceSettings.chatsCellTitle",defaultMessage:"Chats"},createdCellTitle:{id:"workspaceSettings.createdCellTitle",defaultMessage:"Created"},updatedCellTitle:{id:"workspaceSettings.updatedCellTitle",defaultMessage:"Updated"},approvedCellTitle:{id:"workspaceSettings.approvedCellTitle",defaultMessage:"Approved"},approveAGPTButton:{id:"workspaceSettings.approveAGPTButton",defaultMessage:"Approve a GPT"},shareRecipientTitlePrivate:{id:"vyjlzc",defaultMessage:"Invite only"},shareRecipientTitleLink:{id:"workspaceSettings.shareRecipientTitleLink",defaultMessage:"Link"},shareRecipientTitlePublic:{id:"workspaceSettings.shareRecipientTitlePublic",defaultMessage:"Public"},changeAccess:{id:"workspaceSettings.changeAccess",defaultMessage:"Change who has access"},changeOwner:{id:"workspaceSettings.changeOwner",defaultMessage:"Change Owner"},assignOwner:{id:"workspaceSettings.assignOwner",defaultMessage:"Assign Owner"},deleteGPT:{id:"workspaceSettings.deleteGPT",defaultMessage:"Delete GPT"},removeFromWorkspace:{id:"workspaceSettings.removeFromWorkspace",defaultMessage:"Remove from workspace"},userCount:{id:"P1xo2B",defaultMessage:"{numUsers, plural, one {# user} other {# users}}"},groupCount:{id:"4zRUED",defaultMessage:"{numGroups, plural, one {# group} other {# groups}}"},unassigned:{id:"workspaceSettings.unassignedGPTs",defaultMessage:"Unassigned"}});function le({title:a,description:s,children:t,upsellEnterprise:i=!1,isQuorum:o=!1,className:r=""}){return e.jsx(Ce,{label:e.jsx(n,l({},y.enterpriseRequiredMessage)),side:"top",disabled:!i,className:"max-w-5xl",triggerAs:null,children:e.jsxs(hs,{className:B(i&&"text-token-text-tertiary","max-w-4xl",r),children:[e.jsxs(fs,{className:"flex items-center gap-3",children:[e.jsx(n,l({},a)),i&&e.jsx("span",{className:"bg-token-main-surface-tertiary rounded-xl px-2 pb-0.5 text-sm",children:e.jsx(n,l({},y.enterpriseUpsellPill))}),!i&&o&&e.jsx("span",{className:"bg-token-main-surface-tertiary rounded-xl px-3 ps-3 pt-1 pb-1 text-sm font-normal",children:e.jsx(n,l({},y.thisFeatureDisabledForOrg))})]}),s&&e.jsx(js,{className:"text-token-text-secondary py-2",children:e.jsx(n,l({},s))}),t]})})}function Bs({workspaceId:a,label:s,setting:t,defaultValue:i,values:o,disabled:r=!1}){var T;const c=me(),m=V(),{variables:x,mutate:j}=pe({mutationFn:({setting:g,value:u})=>H.safePost("/accounts/{account_id}/settings/share_settings",{parameters:{path:{account_id:a}},requestBody:{setting:g,value:u}}),onSettled:()=>{m.invalidateQueries({queryKey:["workspace-settings"]}),m.invalidateQueries({queryKey:["workspace"]})},onError:()=>{c.danger(y.featureSettingsUpdateFailed,{toastId:"workspace_gpt_settings_page"})}});return e.jsxs(Ts,{children:[e.jsx("p",{className:"text-md inline-flex items-center",children:e.jsx(n,l({},s))}),e.jsxs(S.Root,{defaultValue:(T=x==null?void 0:x.value)!=null?T:i,onValueChange:g=>{j({setting:t,value:g})},disabled:r,children:[e.jsxs(S.Trigger,{className:"text-md focus-visible:border-none",children:[e.jsx(S.Value,{}),e.jsx(S.Icon,{})]}),e.jsx(S.Portal,{children:e.jsx(S.Content,{children:o.map((g,u)=>e.jsx(S.Item,{className:"text-md",value:g.value,children:e.jsx(n,l({},g.display))},u))})})]})]})}function Hs({workspaceId:a,value:s,upsellEnterprise:t=!1,isQuorum:i=!1}){var x;const o=me(),r=V(),{variables:c,mutate:m}=pe({mutationFn:({value:j})=>H.safePost("/accounts/{account_id}/settings/third_party_gpts",{parameters:{path:{account_id:a}},requestBody:{value:j}}),onSettled:()=>{r.invalidateQueries({queryKey:["workspace-settings"]})},onError:()=>{o.danger(y.featureSettingsUpdateFailed,{toastId:"third_party_gpt_setting_dropdown"})}});return e.jsxs(S.Root,{defaultValue:(x=c==null?void 0:c.value)!=null?x:s,onValueChange:j=>{m({value:j})},children:[e.jsxs(S.Trigger,{className:"border-token-border-default focus-visible:border-token-border-default border text-base",children:[e.jsx(S.Value,{}),e.jsx(S.Icon,{})]}),e.jsx(S.Portal,{children:e.jsxs(S.Content,{children:[!i&&e.jsx(S.Item,{className:"text-base",value:Z.ALLOW_ALL,children:e.jsx(n,l({},y.allowAllOption))}),!t&&!i&&e.jsx(S.Item,{className:"text-base",value:Z.ALLOW_SPECIFIC,children:e.jsx(n,l({},y.ownerApprovedOnlyOption))}),e.jsx(S.Item,{className:"text-base",value:Z.ALLOW_NONE,children:e.jsx(n,l({},y.dontAllowOption))})]})})]})}function qs({workspaceId:a,data:s}){var D;const t=W(),i=me(),o=ts(),r=as(),c=r,m=V(),x=is(),[j,T]=h.useState([]),g=pe({mutationFn:({value:v})=>H.safePost("/accounts/{account_id}/settings/allowed_custom_actions_domains",{parameters:{path:{account_id:a}},requestBody:{domains:v}}),onSettled:()=>{m.invalidateQueries({queryKey:["workspace-settings"]})},onError:()=>{i.danger(y.featureSettingsUpdateFailed,{toastId:"workspace_settings"})}});if(o==null)return null;const u=o.isTeam(),k=e.jsx(le,{title:y.thirdPartyGPTsTitle,description:y.thirdPartyGPTsDescription,className:"border-token-border-default border-b pb-4",isQuorum:r,children:e.jsx("div",{children:e.jsx(Hs,{workspaceId:a,value:s.allow_third_party_gpts,upsellEnterprise:u,isQuorum:r})})}),C=e.jsx(le,{title:y.sidebarTitle,children:e.jsx(Fs,{account:o,showThirdParty:!u&&!r&&s.allow_third_party_gpts===Z.ALLOW_SPECIFIC})}),G=s.allowed_custom_actions_domains!=null||s.beta_settings.workspace_gpt_custom_actions===!1;return e.jsxs(gs,{className:"max-w-5xl",children:[u&&!x&&k,u&&o.isOwnerOfAccount()&&C,e.jsx(le,{title:y.sharingSettingsTitle,upsellEnterprise:u,children:e.jsxs(xs,{children:[!x&&e.jsx(Bs,{workspaceId:a,label:y.gptSharingTitle,disabled:u,setting:ns.GPT_SHARE_SETTINGS,defaultValue:s.share_settings.gpt_share_setting,values:[...c?[]:[{display:y.anyOneSelect,value:ne.ANYONE}],{display:y.workspaceMembersOnlySelect,value:ne.WORKSPACE_ONLY},{display:y.inviteOnlySelect,value:ne.NO_ONE}]}),e.jsx(e.Fragment,{children:e.jsxs("div",{className:"flex flex-col gap-4 py-6",children:[e.jsx("div",{className:"text-xl font-semibold",children:e.jsx(n,{id:"ugI3Yt",defaultMessage:"GPT actions"})}),e.jsx("div",{className:"text-token-text-secondary py-2 text-sm",children:c?e.jsx(n,{id:"ZIYUEj",defaultMessage:"GPT actions allow GPT builders to create GPTs that call third-party APIs for tasks such as retrieving or modifying data, which could include protected health information. Admins can limit the domains that can be used by GPTs created by builders in your workspace. You should ensure your use of GPT actions complies with your obligations under HIPAA."}):e.jsx(n,{id:"HY2eof",defaultMessage:"GPT actions allow GPTs to call third-party APIs for tasks such as retrieving or modifying data. GPT actions are defined by GPT builders, and you can limit the domains that can be used for GPTs created in your workspace."})}),e.jsxs("div",{className:"flex flex-row items-center gap-4",children:[e.jsx(ue,{checked:!G,id:"allow-all-domains",onChange:v=>{v.currentTarget.checked?(T(s.allowed_custom_actions_domains),g.mutate({value:null})):g.mutate({value:j!=null?j:[]})},label:e.jsxs("span",{className:"flex flex-row items-center",children:[e.jsx(n,{id:"WnWoqJ",defaultMessage:"Allow all domains for GPT actions"}),e.jsx(Ce,{interactive:!0,label:e.jsx(n,{id:"KjJtEm",defaultMessage:"Limit the Internet domains that can be used by GPTs created in your workspace. This does not apply to third-party GPTs."}),side:"top",children:e.jsx(Cs,{})})]})}),g.isPending&&e.jsx(oe,{})]}),G&&e.jsx(_s,{value:(D=s.allowed_custom_actions_domains)!=null?D:[],title:t.formatMessage({id:"YetDcq",defaultMessage:"Domains"}),onChange:v=>{g.mutate({value:v})},emptyMessage:t.formatMessage({id:"rFH4IP",defaultMessage:"No domains added. No GPT actions will be allowed."})})]})})]})}),!u&&!x&&k,!u&&o.isOwnerOfAccount()&&C]})}function Ks({currentWorkspaceId:a}){const{data:s,isLoading:t}=ss(a),i=W();return e.jsxs(e.Fragment,{children:[e.jsx(ms,{children:e.jsx("title",{children:i.formatMessage(y.sidebarTitle)})}),e.jsx(ws,{title:i.formatMessage(y.sidebarTitle)}),e.jsx(ys,{showSpinner:t,children:s===void 0?null:e.jsx(qs,{workspaceId:a,data:s})})]})}const y=ee({sidebarTitle:{id:"workspaceSettingsOld.sidebarTitle",defaultMessage:"GPTs"},allowAllOption:{id:"workspaceSettingsOld.allowAllOption",defaultMessage:"Allow all"},ownerApprovedOnlyOption:{id:"workspaceSettingsOld.ownerApprovedOnlyOption",defaultMessage:"Owner-approved only"},dontAllowOption:{id:"workspaceSettingsOld.dontAllowOption",defaultMessage:"Don't allow"},retentionPolicyTitle:{id:"workspaceSettingsOld.retentionPolicyTitle",defaultMessage:"Retention policy"},thirdPartyGPTsTitle:{id:"workspaceSettingsOld.thirdPartyGPTsTitle",defaultMessage:"Third-party"},thirdPartyGPTsDescription:{id:"workspaceSettingsOld.thirdPartyGPTsDescription",defaultMessage:"Manage whether members can use GPTs created outside your workspace."},searchTooltip:{id:"workspaceSettingsOld.searchTooltip",defaultMessage:"Web search allows ChatGPT and GPTs to answer questions on recent topics. When enabled, it may send search queries and general location information to Bing, but this data is not linked to or associated with user accounts."},sharingSettingsTitle:{id:"workspaceSettingsOld.sharingSettingsTitle",defaultMessage:"Sharing"},gptSharingTitle:{id:"workspaceSettingsOld.gptSharingTitle",defaultMessage:"GPTs can be shared with..."},workspaceMembersOnlySelect:{id:"workspaceSettingsOld.workspaceMembersOnlySelect",defaultMessage:"Workspace members only"},anyOneSelect:{id:"workspaceSettingsOld.anyOneSelect",defaultMessage:"Anyone"},inviteOnlySelect:{id:"workspaceSettingsOld.inviteOnlySelect",defaultMessage:"Invite only"},featureSettingsUpdateFailed:{id:"workspaceSettingsOld.featureSettingsUpdateFailed",defaultMessage:"Failed to update feature setting"},conversationRetention:{id:"workspaceSettingsOld.conversationRetention",defaultMessage:"Chat retention"},retentionInfinite:{id:"workspaceSettingsOld.retentionInfinite",defaultMessage:"Infinite"},retentionNinetyDays:{id:"workspaceSettingsOld.retentionNinetyDays",defaultMessage:"90 days"},retentionOneYear:{id:"workspaceSettingsOld.retentionOneYear",defaultMessage:"1 year"},retentionCustomDays:{id:"workspaceSettingsOld.retentionCustomDays",defaultMessage:"{num} days"},retentionChange:{id:"workspaceSettingsOld.retentionChange",defaultMessage:"Contact your account manager to change this setting."},enterpriseUpsellPill:{id:"workspaceSettingsOld.enterpriseUpsellPill",defaultMessage:"Enterprise"},retentionSettingTooltip:{id:"workspaceSettingsOld.retentionSettingTooltip",defaultMessage:"Contact your account manager to change this setting"},enterpriseRequiredMessage:{id:"workspaceSettingsOld.enterpriseRequiredMessage",defaultMessage:"Only workspaces with the Enterprise plan can change these settings"},shareRecipientTitlePrivate:{id:"workspaceSettingsOld.shareRecipientTitlePrivate",defaultMessage:"Private"},shareRecipientTitleLink:{id:"workspaceSettingsOld.shareRecipientTitleLink",defaultMessage:"Link"},shareRecipientTitlePublic:{id:"workspaceSettingsOld.shareRecipientTitlePublic",defaultMessage:"Public"},thisFeatureDisabledForOrg:{id:"workspaceSettings.thisFeatureDisabledForOrgGPT",defaultMessage:"This feature is disabled in this workspace"}}),St=Ue(function(){const s=ks();return Ss(),e.jsx(Ks,l({},s))});export{St as default};
//# sourceMappingURL=b1vcn4w8ny1cktqq.js.map
