const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/h60m3gf0t6dhiuo2.js","assets/jj85rqzpbnvv3emr.js","assets/lef5ym39glv4981l.js","assets/root-ogjlcpyy.css","assets/n7frs8nesbn1uut4.js","assets/mclphevd122040jw.js","assets/conversation-small-g7l5datj.css","assets/fpayvvmhdp5pkskd.js","assets/daioev77nl79ehf6.js","assets/mw2u7timj0qnsnvj.js","assets/dvqe6kc43fkjsavv.js","assets/fc3ognvcdyovy00k.js","assets/m07wx0qobxpm3v8p.js","assets/mca6pva38upzxvpk.js","assets/o37ueuxacnhbdfaa.js","assets/ksbtr9cllybwh424.js","assets/euq7ybw4dhrsufo2.js","assets/lbaueofbjv8jfqwm.js"])))=>i.map(i=>d[i]);
var Vs=Object.defineProperty,$s=Object.defineProperties;var Ys=Object.getOwnPropertyDescriptors;var Et=Object.getOwnPropertySymbols;var qs=Object.prototype.hasOwnProperty,Ks=Object.prototype.propertyIsEnumerable;var At=(s,e,a)=>e in s?Vs(s,e,{enumerable:!0,configurable:!0,writable:!0,value:a}):s[e]=a,$=(s,e)=>{for(var a in e||(e={}))qs.call(e,a)&&At(s,a,e[a]);if(Et)for(var a of Et(e))Ks.call(e,a)&&At(s,a,e[a]);return s},de=(s,e)=>$s(s,Ys(e));import{f as Ze,R as pt,bw as at,aI as Vt,ij as $t,fw as Qs,eE as Js,fx as Xs,i as Q,mD as Rt,gs as Ot,gn as Ht,gu as Zs,bK as ea,jH as ta,jG as It,gr as sa,lT as aa,a6 as et,cg as ot,ax as Je,fX as tt,Y as _e,Z as ye,O as V,dm as oa,f6 as na,T as gt,q6 as ra,a9 as We,fD as Yt,aD as qt,fL as ia,g5 as Kt,x as Qt,y as ft,hx as la,ek as ca,e as U,s as da,bv as Jt,gG as xt,a3 as ua,b as ma,s6 as ha,ar as Te,as as Ee,dF as Be,s7 as pa,$ as Dt,a0 as Lt,hn as ga,s8 as fa,bD as xa,s9 as ba,bI as oe,bE as va,ch as bt,bG as xe,cj as be,bP as Sa,gi as Xt,jk as ya,ca as ja,gz as Zt,sa as wa,gA as Ca,sb as Ma,sc as _a,dz as es,bo as vt,r as St,li as Na,g7 as Ft,fM as ka,a8 as st,a2 as Pa,oZ as Ta,P as fe,pN as Ea,sd as Aa,bJ as Ra,d2 as dt,eq as Oa,bi as Ha,bM as Ia,fP as Da,w as La,lm as Fa,rX as Wa,m1 as Ba,gI as Ua,se as za,sf as Ga,am as Va,h1 as Ne,dA as ts,kP as ss,j as Ue,i9 as $a,h0 as Re,ex as as,ey as os,ck as Ya,aE as qa,m as Ka,qG as Qa,ia as ns,cY as ut,mh as Ja,f$ as Xa,o2 as Za,iq as Wt,i8 as eo,ft as to,fl as rs,ii as so,an as De,ej as is,ml as ls,oO as cs,c1 as ao,gc as oo,g2 as no,fW as ds,ib as ro,ci as io,dp as lo,cM as co,jZ as uo,hP as mo,gl as ho,b_ as po,dJ as go,q as fo,sg as xo,jC as bo,aa as vo,gm as So}from"./lef5ym39glv4981l.js";import{b as ve,g as Ge,r as x,j as t,M as ue,m as Ae,s as us,d as ms,L as hs,c as ke,A as ps,as as Bt,J as Ut,au as Le,R as yt,i as yo}from"./jj85rqzpbnvv3emr.js";import{dx as jo,dy as wo,dB as Co,N as Se,dD as Mo,dE as _o,dJ as No,dK as ko,Z as gs,be as fs,sl as Po,dn as To,bx as Eo,by as Ao,bz as Ro,m as jt,kF as Oo,lm as Ho,sm as Io,sn as Do,kE as Lo,so as Fo,sp as Wo,bc as Bo,gQ as Uo,qw as xs,sq as zo,sr as bs,ps as vs,ss as Go,bR as Vo,st as $o,c$ as Yo,mT as nt,jf as me,su as qo,sv as Ss,sw as ys,iX as Ve,m$ as Ko,sx as Qo,eD as Jo,sy as Xe,sz as mt,sA as ht,sB as Xo,sC as Zo,nf as en,hn as js,sD as tn,bq as sn,br as an,Y as wt,sE as on,b2 as nn,iT as rn,sF as ln,sG as cn,jd as ze,hy as ws,sH as dn,b3 as un,sI as mn,pw as Cs,qx as hn,sJ as pn,pK as gn,sK as fn,sL as xn,sM as bn,rB as vn,iJ as Sn,fQ as yn,cA as jn,u as wn,iN as Ct,sN as Cn,kk as Mn,c6 as _n,y as Nn,sO as kn,nh as rt,sP as Pn,F as Tn,hq as Ms,jz as _s,f5 as En,f4 as An,eT as Rn,sQ as On,sR as Hn,pC as In,jI as Dn,cY as Ns,pD as Ln,sS as Fn,sT as Wn,sU as Bn,sV as Un,sW as zn,qv as Gn,sX as Vn,sY as $n,dr as Yn,sZ as qn,fk as Kn,s_ as Qn,m9 as Jn,s$ as Xn,t0 as zt,t1 as Zn,t2 as er,mC as tr,mG as sr,t3 as ar,t4 as or,t5 as nr,t6 as rr,t7 as ir,t8 as lr,jC as cr,iR as dr,t9 as ur,ta as mr,jU as hr,tb as pr,b4 as gr,tc as fr,td as xr,te as br,tf as vr,tg as Sr,th as yr,mV as jr,ti as wr,tj as Cr,tk as Mr,tl as _r,tm as Nr,tn as kr,to as Pr,tp as Tr,tq as Er,tr as Ar,ts as Rr,tt as Or,tu as Hr,tv as Ir,tw as Dr,tx as Lr}from"./mclphevd122040jw.js";import{C as ks,S as Fr,u as Mt,a as Wr}from"./xx3svpq6qe4q5uu1.js";import{M as Br,S as Ps,a as Ur,u as _t,b as zr,D as Gr,c as Ts,d as Vr,T as $r}from"./gyvvad7btmtz1x9o.js";import{F as Yr}from"./cncd8uuk5eicbkeu.js";import{P as qr}from"./cdk0cmbgnafohb1q.js";import Kr from"./mtg83aqpqaxteb09.js";import{I as Qr}from"./fr4ckts5oz9jhhs0.js";import{C as Jr}from"./mw2u7timj0qnsnvj.js";import"./f3wj76d1ulqyss85.js";import{g as Xr}from"./hnotrmacgvnfyexv.js";const Zr=({image:s,onClose:e,onRequestCompletion:a,clientThreadId:o,currentModelId:r,post:l,canDelete:c,onOpenReport:n})=>{var w;const i=ve(),d=Ze(),h=Ge(),[m,u]=x.useState("default"),p=jo(),v=x.useRef(null),j=x.useRef(p);x.useEffect(()=>{j.current=p},[p]);const f=x.useCallback(()=>wo(i),[i]),b=x.useCallback(()=>{s&&u("inpaint")},[s]),g=x.useCallback(()=>{u("default"),j.current.clearAllDrawings()},[]),S=x.useCallback(()=>{s&&Co({url:s.url,fileName:f()})},[s,f]),P=x.useCallback(()=>{var y;return(y=v.current)==null?void 0:y.getImageData()},[]),N=x.useCallback(async()=>{if(window.confirm(i.formatMessage({id:"postReceiverModal.deletePostConfirmation",defaultMessage:"Are you sure you want to delete this post?"})))try{await pt.safeDelete("/share/post/{post_id}",{parameters:{path:{post_id:l.id}}}),h("/",{replace:!0})}catch(y){d.danger({id:"postReceiverModal.deletePostError",defaultMessage:"Failed to delete the post",description:"Error message for deleting a post"},{toastId:"post_receiver_modal.delete_post_error"})}},[l.id,i,d,h]),k=m==="inpaint"?i.formatMessage({id:"TjVqYb",defaultMessage:"Edit Selection"}):(w=l.text)!=null?w:i.formatMessage({id:"htGxHc",defaultMessage:"Image"}),C=x.useCallback(y=>{y.key==="Escape"&&(e(),y.preventDefault())},[e]);return x.useEffect(()=>(document.addEventListener("keydown",C),()=>document.removeEventListener("keydown",C)),[C]),t.jsx(at.Root,{isOpen:!0,onClose:e,testId:"modal-lightbox-post-share",shouldIgnoreClickOutside:m==="inpaint",children:t.jsx(at.Overlay,{children:t.jsxs(at.Content,{size:"fullscreen",removePopoverStyling:!0,className:"grid min-h-0 grid-rows-[auto_minmax(0,1fr)] overflow-hidden",children:[t.jsxs("header",{className:"flex h-14 w-full items-center justify-between gap-2 px-2 md:px-4",children:[t.jsxs("div",{className:"flex min-w-0 items-center gap-2",children:[t.jsx(Se,{icon:Vt,onClick:e,"aria-label":i.formatMessage({id:"EYLKSm",defaultMessage:"Close"})}),t.jsx("h2",{className:"line-clamp-1 text-base font-medium",children:k})]}),t.jsx("div",{className:"flex items-center gap-2",children:m==="inpaint"?t.jsxs(t.Fragment,{children:[t.jsx(Se,{className:"aspect-square",icon:Mo,onClick:p.undoDrawing,disabled:!p.canUndoDrawing,"aria-label":i.formatMessage({id:"OmaTPx",defaultMessage:"Undo"})}),t.jsx(Se,{className:"aspect-square",icon:_o,onClick:p.redoDrawing,disabled:!p.canRedoDrawing,"aria-label":i.formatMessage({id:"ZUr4oh",defaultMessage:"Redo"})}),t.jsx(Se,{className:"w-auto px-3",onClick:g,children:i.formatMessage({id:"D9xvar",defaultMessage:"Cancel"})})]}):t.jsxs(t.Fragment,{children:[t.jsx(Se,{className:"aspect-square",icon:No,onClick:b,"aria-label":i.formatMessage({id:"pRGwlp",defaultMessage:"Edit image"})}),t.jsx(Se,{className:"aspect-square",icon:ko,onClick:S,"aria-label":i.formatMessage({id:"9DNHka",defaultMessage:"Download image"})}),t.jsx(Se,{className:"aspect-square",icon:gs,onClick:n,"aria-label":i.formatMessage({id:"2gNXdX",defaultMessage:"Report content"})}),c&&t.jsx(Se,{className:"aspect-square",icon:fs,onClick:N,"aria-label":i.formatMessage({id:"rzlDpj",defaultMessage:"Delete post"})})]})})]}),t.jsxs("div",{className:"grid h-full w-full grid-rows-[1fr_auto] items-center overflow-y-auto overscroll-contain",children:[t.jsx("div",{className:"flex h-full w-full items-center justify-center px-4 pb-4",children:s&&t.jsxs("div",{className:"relative inline-block max-h-full rounded bg-neutral-100",children:[t.jsx("img",{src:s.url,alt:k,className:"h-full max-h-[70vh] w-auto max-w-full rounded object-contain",fetchPriority:"high"}),m==="inpaint"&&t.jsx(Po,{image:s,drawingState:p,drawingCanvasRef:v})]})}),t.jsx("div",{className:"flex w-full justify-center px-4 pb-8",children:t.jsx("div",{className:"w-full max-w-[768px]",children:t.jsx(Qr,{clientThreadId:o,currentModelId:r,onRequestCompletion:a,onClose:e,activeImage:s,currentDrawnShape:p.currentDrawnShape,getImageData:P,onCancelInpaint:g})})})]})]})})})};function al({postWithProfile:s,clientThreadId:e,onClose:a}){var o,r;return((o=s.post.attachments[0])==null?void 0:o.kind)==="media_generation"?t.jsx(ei,{postWithProfile:s,clientThreadId:e,onClose:a}):((r=s.post.attachments[0])==null?void 0:r.kind)==="message_slice"?t.jsx(ti,{postWithProfile:s,onClose:a}):null}function ei({postWithProfile:s,clientThreadId:e,onClose:a}){var C;const o=x.useRef(null),[r,l]=x.useState(!1),c=Ge(),{post:n}=s,i=n.attachments[n.attachments.length-1],d={url:i.url,content_type:Ht.ImageAssetPointer,asset_pointer:(C=i.asset_pointer)!=null?C:Ot(i.id),width:i.width,height:i.height},h=ve(),m=Zs(),u=ea(e),p=Ze(),v=x.useCallback(w=>m.getState().files.find(y=>y.tempId===w),[m]),j=i.url,f=x.useCallback(async w=>{if(o.current){const y=await o.current,M=y?v(y==null?void 0:y.tempId):null;if(M)return M}return o.current=fetch(w).then(y=>y.blob()).then(y=>{const M=new File([y],"image.png",{type:"image/png"}),I=ta(M);return It.uploadFile(m,I,M,sa.Multimodal,[M.type],h,p).then(()=>{const D=v(I);return D&&D.status===aa.Ready&&D.fileId?D:null})}),o.current},[m,h,p,v]),{onRequestCompletion:b,currentModelId:g}=jt(),{isUnauthenticated:S}=et(),P=x.useCallback(async w=>{var y;if(!(!w.promptMessage||S))try{const M=await f(j);if(!M||!M.fileId||!M.fileSpec)return;const I=[{content_type:Ht.ImageAssetPointer,asset_pointer:Ot(M.fileId),size_bytes:M.fileSpec.size,width:i.width,height:i.height},...w.promptMessage.content.content_type===ot.MultimodalText||w.promptMessage.content.content_type===ot.Text?w.promptMessage.content.parts:[]],D=de($({},w),{promptMessage:de($({},w.promptMessage),{content:{content_type:ot.MultimodalText,parts:I}}),extraStreamParams:de($({},(y=w.extraStreamParams)!=null?y:{}),{continueFromSharedPostId:n.id})});b(D),It.reset(m)}catch(M){Je.addError(new Error("post_receiver_handle_request_failed",{cause:M})),p.danger({id:"postReceiverModal.editImageError",defaultMessage:"Failed to edit the image",description:"Error message for editing an image"},{toastId:"post_receiver_modal.edit_image_error"})}},[i.height,i.width,f,b,m,j,S,p,n.id]),N={id:n.id,archived:!1,transformationId:null,url:d.url,assetPointer:d.asset_pointer,thumbnail:null,width:d.width,height:d.height,title:null,conversationId:u,messageId:n.id},k=x.useCallback(()=>{a(),c("/",{replace:!0})},[a,c]);return t.jsxs(t.Fragment,{children:[t.jsx(Zr,{image:N,onClose:k,onRequestCompletion:P,clientThreadId:e,currentModelId:g,post:n,canDelete:!!n.permissions.can_delete,onOpenReport:()=>l(!0)}),r&&t.jsx(Es,{post:n,onClose:()=>l(!1)})]})}function ti({postWithProfile:s,onClose:e}){const[a,o]=x.useState(!1),{post:r}=s;return t.jsxs("div",{className:"bg-token-bg-primary absolute start-0 end-0 top-0 bottom-0 h-full w-full",children:[t.jsx(si,{post:r,setIsReportModalOpen:o,onClose:e}),t.jsx(Oo,{attachments:r.attachments,variant:"fullscreen"}),a&&t.jsx(Es,{post:r,onClose:()=>o(!1)})]})}function si({post:s,setIsReportModalOpen:e,onClose:a,additionalButtons:o}){const r=Ge(),l=ve(),c=Ze(),n=x.useCallback(async()=>{if(window.confirm(l.formatMessage({id:"postReceiverModal.deletePostConfirmation",defaultMessage:"Are you sure you want to delete this post?"})))try{await pt.safeDelete("/share/post/{post_id}",{parameters:{path:{post_id:s.id}}}),r("/",{replace:!0})}catch(i){c.danger({id:"postReceiverModal.deletePostError",defaultMessage:"Failed to delete the post",description:"Error message for deleting a post"},{toastId:"post_receiver_modal.delete_post_error"})}},[s.id,l,c,r]);return t.jsx(t.Fragment,{children:t.jsxs(Ae.div,de($({className:"flex h-16 w-full px-2 sm:px-4"},Ho),{children:[t.jsx("div",{className:"flex items-center justify-self-start text-start",children:t.jsx(Io,{onClose:()=>{a(),r("/",{replace:!0})}})}),t.jsx("div",{className:"flex w-full flex-1 flex-col items-center justify-center justify-self-stretch",children:t.jsx(Do,{areButtonsFullWidth:!0,post:s,setIsReportModalOpen:e})}),t.jsxs("div",{className:"flex items-center justify-self-end text-end",children:[s.permissions.can_delete&&t.jsx(Lo,{tooltip:l.formatMessage({id:"postReceiverModal.deletePost",defaultMessage:"Delete"}),onClick:n,children:t.jsx(fs,{})}),o]})]}))})}function Es({post:s,onClose:e}){var n;const a=Q(),{data:o}=Eo(a,Rt.Post),r=ve(),l=Ao(a,r,s.id,Rt.Post);if(o==null)return null;const c="Report ".concat((n=s.text)!=null?n:"Post");return t.jsx(Ro,{reasons:o.reasons,submitReport:l,title:c,onClose:e,header:o.header,subHeader:o.header_explanation})}function ai(){var o;const s=x.useContext($t),e=(o=s==null?void 0:s.postWithProfile)==null?void 0:o.post,a=s==null?void 0:s.setIsReportModalOpen;return!e||!a?null:t.jsxs("div",{className:"outline-token-border-default mx-4 flex items-center justify-between gap-2.5 rounded-2xl py-1 ps-4 pe-0.5 outline-1 outline-offset-[-1px]",children:[t.jsx("span",{className:"text-token-text-secondary justify-center text-sm leading-tight",children:t.jsx(ue,{id:"e2L5bY",defaultMessage:"Content created using ChatGPT"})}),t.jsx(Qs,{size:"default",contentAlign:"end",sideOffset:4,triggerButton:t.jsx(To,{className:"rounded-full",label:"",icon:t.jsx(Xs,{className:"icon-sm"})}),children:t.jsx(Js.Item,{icon:gs,onClick:()=>a(!0),children:t.jsx(ue,{id:"jHHbcM",defaultMessage:"Flag content as unsafe"})})})]})}function oi(){var o;const s=x.useContext($t),e=(o=s==null?void 0:s.postWithProfile)==null?void 0:o.post,a=s==null?void 0:s.setIsReportModalOpen;return!e||!a?null:t.jsx("div",{className:"text-token-text-secondary text-sm",children:t.jsx(ue,{id:"iRpGVT",defaultMessage:"Content created using ChatGPT. <reportButton>Report</reportButton> if unsafe.",values:{reportButton:r=>t.jsx("button",{className:"text-token-text-primary decoration-token-text-primary underline",onClick:()=>{a(!0)},children:r})}})})}function ni({projectResource:s}){var b,g,S,P,N;const e=ve(),a=Q(),o=(b=s.gizmo)==null?void 0:b.id,r=tt(o),l=_e(ye),c=us(),n=(()=>{const k=c.pathname.replace(/\/+$/,"");return/^\/g\/[^/]+\/project$/.test(k)})(),d=((N=(P=(S=(g=s.gizmo)==null?void 0:g.sharing)==null?void 0:S.subjects)==null?void 0:P.length)!=null?N:0)>0,h=s.gizmo.display.name,m=V(()=>Fo(a,s)),u=V(()=>Wo(a,s));if(!(r&&!l&&!n)||s.gizmo.gizmo_type!==oa.PROJECT)return null;const v=h?e.formatMessage(it.openProjectHome,{projectName:h}):e.formatMessage(it.openProjectHomeFallback),j=na(a,s),f=t.jsx(t.Fragment,{children:t.jsx(hs,{to:j,"aria-label":v,className:"hover:bg-token-bg-tertiary focus-visible:outline-token-outline-primary text-token-text-secondary ms-2 inline-flex h-9 w-9 items-center justify-center rounded-lg focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2",children:t.jsx(Uo,{color:m,emoji:u,strict:!0,isSharedProject:d})})});return t.jsxs("div",{className:"flex items-center",children:[t.jsx(gt,{label:h!=null?h:e.formatMessage(it.projectNameFallback),children:f}),t.jsx(Bo,{className:"icon-sm text-token-text-tertiary","aria-hidden":"true"})]})}const it=ms({openProjectHome:{id:"threadHeader.openProjectHome",defaultMessage:"Open {projectName} project"},openProjectHomeFallback:{id:"threadHeader.openProjectHomeFallback",defaultMessage:"Open project home"},projectNameFallback:{id:"threadHeader.projectNameFallback",defaultMessage:"Project"}});function ri(s){"use forget";const e=ke.c(21),{clientThreadId:a,headlineOption:o,starterPromptStyle:r,currentModelId:l,isModelLoaded:c,overrideMessage:n}=s,i=bs(),d=xt();let h;e[0]!==d?(h=vs(d),e[0]=d,e[1]=h):h=e[1];const m=V(h.shouldShowAutocomplete$);let u;e[2]!==a?(u={shouldBeEnabledForDefaultAssistant:!0,clientThreadId:a},e[2]=a,e[3]=u):u=e[3];const p=Go(u),v=i?"keyboard-open:h-[calc(100%-var(--screen-keyboard-height,0px)-var(--composer-height,100px))] h-full motion-safe:[transition:height_0.3s_var(--easing-common)]":"h-full",j=m?"pointer-events-none opacity-0":"opacity-100";let f;e[4]!==v||e[5]!==j?(f=U("text-token-text-primary mt-[var(--screen-optical-compact-offset-amount)] [display:var(--display-hidden-until-loaded,flex)] w-full shrink flex-col items-center justify-center px-4 transition-opacity sm:hidden",v,j),e[4]=v,e[5]=j,e[6]=f):f=e[6];let b;e[7]!==o||e[8]!==n||e[9]!==r?(b=o==="CHATGPT_LOGO"?t.jsx(qt,{className:"inline-block h-12 w-12"}):r!=="tiles"?t.jsx(As,{headlineOption:o,overrideMessage:n}):null,e[7]=o,e[8]=n,e[9]=r,e[10]=b):b=e[10];let g;e[11]!==a||e[12]!==l||e[13]!==c||e[14]!==p||e[15]!==r?(g=r==="chips"||!p?t.jsx(Br,{isModelLoaded:c,currentModelId:l,clientThreadId:a}):r==="tiles"&&c&&l&&a?t.jsx(Ps,{}):null,e[11]=a,e[12]=l,e[13]=c,e[14]=p,e[15]=r,e[16]=g):g=e[16];let S;return e[17]!==f||e[18]!==b||e[19]!==g?(S=t.jsxs("div",{className:f,children:[b,g]}),e[17]=f,e[18]=b,e[19]=g,e[20]=S):S=e[20],S}function ii({activeSystemHintType:s,isAnonModeEnabled:e,currentModelId:a}){if(s===ua.Research)return H.deepResearchPlaceholder;const r=ia(s);if(a==="n7jupd"||r)return H.whatCanIDo}function li({clientThreadId:s,currentModelId:e,isModelLoaded:a}){"use forget";const o=Q(),{isUnauthenticated:r}=et(),l=ra(),c=We(o,"4031588851"),n=We(o,"3533083032",{disableExposureLog:!0}),d=(r?n:c).get("headline_option","HELP_WITH"),h=xs({shouldBeEnabledForDefaultAssistant:!0,clientThreadId:s}),m=Yt(),u=ii({activeSystemHintType:m,isAnonModeEnabled:l,currentModelId:e});return t.jsxs("div",{className:"flex justify-center",children:[t.jsx("div",{className:"mb-7 hidden text-center sm:block",children:d==="CHATGPT_LOGO"?t.jsx(qt,{className:"inline-block h-12 w-12"}):t.jsx(As,{headlineOption:d,overrideMessage:u})}),t.jsx(ri,{headlineOption:d,starterPromptStyle:h,clientThreadId:s,isModelLoaded:a,currentModelId:e,overrideMessage:u})]})}function ci(s){"use forget";var D,L;const e=ke.c(16),{headlineOption:a,overrideMessage:o}=s,r=function(T){const{name:O}=T;return t.jsx(gt,{label:i.formatMessage(H.editNicknameTooltip),delayDuration:300,side:"top",children:t.jsx("button",{onClick:()=>{Be.setAutoHighlightNicknameInput(!0),N("#settings/".concat(Jt.Personalization))},style:{textDecoration:"none",transition:"color 0.2s"},onMouseEnter:ui,onMouseLeave:di,children:O})})};let l;e[0]===Symbol.for("react.memo_cache_sentinel")?(l=function(){const T=[],O=[];T.push("READY_WHEN_YOU_ARE","ON_YOUR_MIND","WHAT_ARE_YOU_WORKING_ON","AGENDA_TODAY","SHOULD_WE_BEGIN"),O.push("GOOD_TO_SEE_YOU","DIVE_IN","HOW_CAN_I_HELP",...T);const E=O[Math.floor(Math.random()*O.length)],Y=T[Math.floor(Math.random()*T.length)],J="".concat(Y," | ").concat(E);Te.setCookie(Ee.headlineMessage,J)},e[0]=l):l=e[0];const c=l,n=function(){var B,R;const T=Te.getCookie(Ee.GreetingName),O=Te.getCookie(Ee.headlineMessage),E=O==null?void 0:O.split("|"),Y=(B=E==null?void 0:E[0])==null?void 0:B.trim(),J=(R=E==null?void 0:E[1])==null?void 0:R.trim();return{cookieName:T,isReadyForPersonalized:!!T&&T.length<=m,headline:Y,namedHeadline:J}},i=ve(),d=Q(),h=We(d,"1704793646"),m=h.get("name_char_limit",20),[u,p]=x.useState(n),{isUnauthenticated:v}=et(),j=ma(),f=ha(!v&&!!j),b=f==null?void 0:f.data,g=Vo(),S=h.get("greeting_web",!1),P=h.get("full_name_llm",!1),N=Ge();let k,C;e[1]!==j||e[2]!==P||e[3]!==g||e[4]!==S||e[5]!==b?(k=()=>{if(S&&g){if(j&&b){const _=pa(b,j,P);Te.setCookie(Ee.GreetingName,_),Dt.count(Lt.MOONSHINE,"splashScreenV2.greeting_cookie_name_set_web")}c()}else Te.deleteCookie(Ee.GreetingName),Te.deleteCookie(Ee.headlineMessage)},C=[b,j,S,P,g],e[1]=j,e[2]=P,e[3]=g,e[4]=S,e[5]=b,e[6]=k,e[7]=C):(k=e[6],C=e[7]),x.useEffect(k,C);let w;e[8]!==n||e[9]!==g||e[10]!==S?(w=()=>{const _=()=>{if(S&&g){const{cookieName:T,isReadyForPersonalized:O}=n();p(E=>de($({},E),{cookieName:T,isReadyForPersonalized:O}))}};return window.addEventListener("refreshGreeting",_),()=>window.removeEventListener("refreshGreeting",_)},e[8]=n,e[9]=g,e[10]=S,e[11]=w):w=e[11],x.useEffect(w);let y,M;e[12]!==g||e[13]!==S?(y=()=>{S&&g&&Dt.count(Lt.MOONSHINE,"splashScreenV2.greeting_shown_web")},M=[S,g],e[12]=g,e[13]=S,e[14]=y,e[15]=M):(y=e[14],M=e[15]),x.useEffect(y,M);let I;return o?I=i.formatMessage(o):u.isReadyForPersonalized&&S?I=t.jsx(t.Fragment,{children:t.jsx(ue,de($({},lt[(D=u.namedHeadline)!=null?D:a].withName),{values:{name:t.jsx(r,{name:(L=u.cookieName)!=null?L:""},"name")}}))}):S&&u.headline?I=i.formatMessage(lt[u.headline].original):I=i.formatMessage(lt[a].original),I}function di(s){s.currentTarget.className="text-inherit"}function ui(s){s.currentTarget.className="text-token-text-secondary"}function As(s){"use forget";const e=ke.c(27),{headlineOption:a,overrideMessage:o}=s,r=Kt(),l=x.useRef(null);let c;e[0]!==r?(c={isTempChatVisible:r,titleTranslate:0},e[0]=r,e[1]=c):c=e[1];const[n,i]=x.useState(c);let d,h;e[2]!==r?(d=()=>{var y,M;i({isTempChatVisible:r,titleTranslate:r?-(((M=(y=l.current)==null?void 0:y.offsetHeight)!=null?M:0)-40):0})},h=[r],e[2]=r,e[3]=d,e[4]=h):(d=e[3],h=e[4]),Qt(d,h);const m=ve(),u=Q();let p;e[5]!==u?(p=!ft(u)&&(zo(ga())||We(u,"2118136551").get("show_chatgpt_h1",!1)),e[5]=u,e[6]=p):p=e[6];const v=p,j=la(),{openSettings:f}=ca();let b;e[7]===Symbol.for("react.memo_cache_sentinel")?(b={viewTransitionName:"var(--vt-splash-screen-headline)"},e[7]=b):b=e[7];let g;e[8]!==a||e[9]!==m||e[10]!==v||e[11]!==j||e[12]!==r||e[13]!==f||e[14]!==o||e[15]!==n.isTempChatVisible||e[16]!==n.titleTranslate?(g=j?t.jsxs("div",{className:U("text-page-header flex flex-col items-center gap-2",n.isTempChatVisible?"invisible opacity-0":"opacity-100"),children:[t.jsx("h1",{className:"text-[28px] leading-[34px] font-normal tracking-[0.38px]",children:t.jsx(ue,$({},H.developerModeTitle))}),t.jsx("p",{className:"text-token-text-secondary dark:text-token-text-tertiary max-w-md text-center text-base leading-[24px] font-normal tracking-[-0.32px] text-balance",children:t.jsx(ue,de($({},H.developerModeSubtitle),{values:{settings:t.jsx(da,{onClick:()=>f(Jt.ConnectorsAdvanced),children:t.jsx(ue,$({},H.settingsLink))})}}))})]}):v?t.jsx("h1",{className:"mb-4",children:m.formatMessage(H.chatgpt)}):t.jsx("h1",{className:U("text-page-header inline-flex min-h-10.5 items-baseline whitespace-pre-wrap",n.isTempChatVisible?"invisible opacity-0":"opacity-100"),"aria-hidden":r,style:{transform:"translateY(".concat(n.titleTranslate,"px)")},children:t.jsx("div",{className:"px-1 text-pretty whitespace-pre-wrap",children:t.jsx(ci,{headlineOption:a,overrideMessage:o})})}),e[8]=a,e[9]=m,e[10]=v,e[11]=j,e[12]=r,e[13]=f,e[14]=o,e[15]=n.isTempChatVisible,e[16]=n.titleTranslate,e[17]=g):g=e[17];const S=n.isTempChatVisible?"translate-y-0 opacity-100":"invisible translate-y-10 opacity-0";let P;e[18]!==S?(P=U("absolute bottom-0",S),e[18]=S,e[19]=P):P=e[19];const N=!r;let k;e[20]===Symbol.for("react.memo_cache_sentinel")?(k=t.jsx($o,{}),e[20]=k):k=e[20];let C;e[21]!==P||e[22]!==N?(C=t.jsx("div",{className:P,"aria-hidden":N,ref:l,children:k}),e[21]=P,e[22]=N,e[23]=C):C=e[23];let w;return e[24]!==C||e[25]!==g?(w=t.jsx("div",{className:"relative inline-flex justify-center text-center text-2xl leading-9 font-semibold",children:t.jsx("div",{children:t.jsxs("div",{className:"grid-cols-1 items-center justify-end",style:b,children:[g,C]})})}),e[24]=C,e[25]=g,e[26]=w):w=e[26],w}const H=ms({developerModeTitle:{id:"SplashScreenV2.developerModeTitle",defaultMessage:"Developer mode"},developerModeSubtitle:{id:"SplashScreenV2.developerModeSubtitle",defaultMessage:"Memory is not used for this chat. {settings}"},settingsLink:{id:"SplashScreenV2.settingsLink",defaultMessage:"Settings"},whatCanIHelpWith:{id:"SplashScreenV2.whatCanIHelpWith",defaultMessage:"What can I help with?"},whatCanIHelpWithWithName:{id:"SplashScreenV2.whatCanIHelpWith.withName",defaultMessage:"What can I help with, {name}?"},whereShouldWeStart:{id:"SplashScreenV2.whereShouldWeStart",defaultMessage:"Where should we start?"},whereShouldWeStartWithName:{id:"SplashScreenV2.whereShouldWeStart.withName",defaultMessage:"Where should we start, {name}?"},askChatgptAnything:{id:"SplashScreenV2.askChatgptAnything",defaultMessage:"Ask ChatGPT anything"},askChatgptAnythingWithName:{id:"SplashScreenV2.askChatgptAnything.withName",defaultMessage:"Ask ChatGPT anything, {name}"},shouldWeBegin:{id:"SplashScreenV2.shouldWeBegin",defaultMessage:"Where should we begin?"},goodToSeeYouWithName:{id:"SplashScreenV2.goodToSeeYou.withName",defaultMessage:"Good to see you, {name}."},diveInWithName:{id:"SplashScreenV2.diveInWithName",defaultMessage:"Hey, {name}. Ready to dive in?"},readyWhenYouAre:{id:"SplashScreenV2.readyWhenYouAre",defaultMessage:"Ready when you are."},onYourMind:{id:"SplashScreenV2.onYourMind",defaultMessage:"What’s on your mind today?"},whatAreYouWorkingOn:{id:"SplashScreenV2.whatAreYouWorkingOn",defaultMessage:"What are you working on?"},agendaToday:{id:"SplashScreenV2.agendaToday",defaultMessage:"What’s on the agenda today?"},deepResearchPlaceholder:{id:"G1v9do",defaultMessage:"What are you researching?"},editNicknameTooltip:{id:"SplashScreenV2.editNicknameTooltip",defaultMessage:"Edit nickname"},howCanIHelp:{id:"SplashScreenV2.howCanIHelp",defaultMessage:"How can I help?"},howCanIHelpWithName:{id:"SplashScreenV2.howCanIHelp.withName",defaultMessage:"How can I help, {name}?"},chatgpt:{id:"SplashScreenV2.chatgpt",defaultMessage:"ChatGPT"},whatCanIDo:{id:"SplashScreenV2.whatCanIDo",defaultMessage:"What can I do for you?"}}),lt={HELP_WITH:{original:H.whatCanIHelpWith,withName:H.whatCanIHelpWithWithName},WHERE_TO_START:{original:H.whereShouldWeStart,withName:H.whereShouldWeStartWithName},ASK_CHATGPT:{original:H.askChatgptAnything,withName:H.askChatgptAnythingWithName},HOW_CAN_I_HELP:{original:H.howCanIHelp,withName:H.howCanIHelpWithName},GOOD_TO_SEE_YOU:{original:H.goodToSeeYouWithName,withName:H.goodToSeeYouWithName},DIVE_IN:{original:H.diveInWithName,withName:H.diveInWithName},READY_WHEN_YOU_ARE:{original:H.readyWhenYouAre,withName:H.readyWhenYouAre},ON_YOUR_MIND:{original:H.onYourMind,withName:H.onYourMind},WHAT_ARE_YOU_WORKING_ON:{original:H.whatAreYouWorkingOn,withName:H.whatAreYouWorkingOn},AGENDA_TODAY:{original:H.agendaToday,withName:H.agendaToday},SHOULD_WE_BEGIN:{original:H.shouldWeBegin,withName:H.shouldWeBegin},WHAT_CAN_I_DO:{original:H.whatCanIDo,withName:H.whatCanIDo}},Rs=s=>{var e,a;return(a=(e=oe.getBranch(s))==null?void 0:e.findLast(({message:o})=>o.author.role===bt.Assistant&&o.recipient==="all"))==null?void 0:a.message},ct=fa(s=>{const e=xa(()=>ba(s)),a=e?Rs(e):null;return va(new Set(a?[a.id]:[]))}),mi=s=>{"use forget";const e=ke.c(41),{clientThreadId:a,zIndex:o,onClick:r,onReveal:l}=s,c=Q(),n=ve();let i;e[0]!==a||e[1]!==c?(i=xe(c,a),e[0]=a,e[1]=c,e[2]=i):i=e[2];const d=i;let h;e[3]!==d?(h=()=>ct(d),e[3]=d,e[4]=h):h=e[4];const m=V(h),[u,p]=be(a,hi),v=Yo(p);let j;e[5]!==u?(j=u&&!!Sa(u),e[5]=u,e[6]=j):j=e[6];const f=j,b=u==null?void 0:u.id;let g;e[7]!==m||e[8]!==b?(g=b&&m.has(b),e[7]=m,e[8]=b,e[9]=g):g=e[9];const S=g;let P;e[10]!==d||e[11]!==b?(P=()=>{b&&ct.set(d,new Set(ct(d).add(b)))},e[10]=d,e[11]=b,e[12]=P):P=e[12];const N=nt(P);let k;e[13]!==r||e[14]!==N?(k=()=>{N(),r()},e[13]=r,e[14]=N,e[15]=k):k=e[15];const C=nt(k),w=nt(l);let y,M;e[16]!==f||e[17]!==w?(y=()=>{f&&w()},M=[f,w],e[16]=f,e[17]=w,e[18]=y,e[19]=M):(y=e[18],M=e[19]),x.useEffect(y,M);let I,D;e[20]!==S||e[21]!==v||e[22]!==f||e[23]!==N?(D=()=>{if(f&&!S&&!v){const E=setTimeout(()=>N(),5e3);return()=>{clearTimeout(E),N()}}},I=[f,S,v,N],e[20]=S,e[21]=v,e[22]=f,e[23]=N,e[24]=I,e[25]=D):(I=e[24],D=e[25]),x.useEffect(D,I);let L,_;e[26]!==N?(L=()=>()=>N(),_=[N],e[26]=N,e[27]=L,e[28]=_):(L=e[27],_=e[28]),x.useEffect(L,_);let T;e[29]!==a||e[30]!==C||e[31]!==S||e[32]!==n||e[33]!==v||e[34]!==f||e[35]!==u||e[36]!==N||e[37]!==o?(T=f&&!S&&t.jsx(me,{className:"relative",style:{zIndex:o},children:t.jsxs(Ae.div,{className:U(qo.main,"group bg-token-bg-primary/80 shadow-long pointer-events-auto absolute -top-2 mx-0 mb-4 h-32 w-full cursor-pointer overflow-hidden rounded-3xl px-5 py-3 backdrop-blur-2xl select-none"),initial:{opacity:0,translateY:"-50%"},animate:{opacity:1,translateY:"-100%"},exit:{opacity:0,scale:.925,filter:"blur(12px)"},transition:{duration:.6,type:"spring",bounce:.12},onClick:C,children:[t.jsx("button",{"aria-label":n.formatMessage({id:"rbCAqY",defaultMessage:"Dismiss"}),className:"dark:bg-token-bg-secondary dark:hover:bg-token-bg-tertiary text-token-text-primary absolute end-2.5 top-2.5 z-50 flex h-6 w-6 items-center justify-center rounded-full bg-black/5 opacity-0 transition-opacity group-hover:opacity-100 hover:bg-black/10",onClick:E=>{E.stopPropagation(),N()},type:"button",children:t.jsx(Vt,{className:"icon icon-sm"})}),u&&t.jsx(Kr,{messages:[u],clientThreadId:a,isFeedbackEnabled:!1,isCompletionInProgress:v,hasActiveRequest:v})]})}),e[29]=a,e[30]=C,e[31]=S,e[32]=n,e[33]=v,e[34]=f,e[35]=u,e[36]=N,e[37]=o,e[38]=T):T=e[38];let O;return e[39]!==T?(O=t.jsx(ps,{children:T}),e[39]=T,e[40]=O):O=e[40],O};function hi(s){return[Rs(s),oe.getRequestId(s)]}const pi=s=>{"use forget";const e=ke.c(15),{clientThreadId:a,onRequestCompletion:o}=s,r=Ss(a),l=ys(a),c=Xt(a),[n]=be(a,gi);let i;if(e[0]!==a||e[1]!==n||e[2]!==(c==null?void 0:c.id)||e[3]!==l||e[4]!==o){let h;e[6]!==a||e[7]!==n.length||e[8]!==(c==null?void 0:c.id)||e[9]!==l||e[10]!==o?(h=(m,u)=>{var p;return t.jsx(ks,{isFinalTurn:u===n.length-1,turnIndex:u,clientThreadId:a,onRequestCompletion:o,currentModelId:(p=c==null?void 0:c.id)!=null?p:null,scrollToBottom:void 0,scrollToMessageId:void 0,dateHeaderType:l(u),hideUserActions:!0,disableHorizontalPadding:!0},m)},e[6]=a,e[7]=n.length,e[8]=c==null?void 0:c.id,e[9]=l,e[10]=o,e[11]=h):h=e[11],i=n.map(h),e[0]=a,e[1]=n,e[2]=c==null?void 0:c.id,e[3]=l,e[4]=o,e[5]=i}else i=e[5];let d;return e[12]!==r||e[13]!==i?(d=t.jsx("div",{onCopy:r,className:"flex flex-col px-7 text-sm",children:i}),e[12]=r,e[13]=i,e[14]=d):d=e[14],d};function gi(s){return[oe.getConversationTurnIds(s)]}const Fe={duration:.4,type:"spring",bounce:.1},fi=50,Gt=.5,xi=s=>{"use forget";const e=ke.c(71),{clientThreadId:a,onRequestCompletion:o,composerController:r}=s,l=Q();let c;e[0]!==a||e[1]!==l?(c=xe(l,a),e[0]=a,e[1]=l,e[2]=c):c=e[2];const n=c,i=x.useRef(null),[d,h]=x.useState(!1);let m;e[3]!==l?(m=()=>Jo(l).height,e[3]=l,e[4]=m):m=e[4];const u=V(m);let p;e[5]!==n?(p=()=>Xe(n).height$(),e[5]=n,e[6]=p):p=e[6];const v=V(p);let j;e[7]!==n?(j=()=>Xe(n).marginBottom$(),e[7]=n,e[8]=j):j=e[8];const f=V(j);let b;e[9]!==n?(b=Ve(n),e[9]=n,e[10]=b):b=e[10];const g=b;let S;e[11]!==g?(S=()=>g.pinnedWidgetType$(),e[11]=g,e[12]=S):S=e[12];const P=V(S);let N;e[13]!==g?(N=()=>g.showLoadingBar$(),e[13]=g,e[14]=N):N=e[14];const k=V(N),C=u*Gt,w=u-fi-(f!=null?f:0),y=Bt(0),M=Bt(Gt);let I;e[15]!==y||e[16]!==M?(I=[M,y],e[15]=y,e[16]=M,e[17]=I):I=e[17];let D;e[18]!==w||e[19]!==C||e[20]!==u?(D=K=>{const[F,G]=K;return Math.min(Math.max(F*u-G,C),w)},e[18]=w,e[19]=C,e[20]=u,e[21]=D):D=e[21];const L=Ut(I,D);let _;e[22]!==g.showLoadingBar$?(_=()=>ya(ja,{requestCompletion:()=>{mt({forceFlushSync:!0,className:ht["fullscreen-widget-composer-transition"],update:()=>{g.showLoadingBar$.set(!0)}})},completionFinished:()=>{mt({forceFlushSync:!0,className:ht["fullscreen-widget-composer-transition"],update:()=>{g.showLoadingBar$.set(!1)}})}}),e[22]=g.showLoadingBar$,e[23]=_):_=e[23];let T;e[24]!==g?(T=[g],e[24]=g,e[25]=T):T=e[25],x.useEffect(_,T);let O;e[26]!==r?(O=()=>{h(!0);try{Zt(r).focus()}catch(K){requestAnimationFrame(()=>{var F;(F=i.current)==null||F.focus()})}},e[26]=r,e[27]=O):O=e[27];const E=O;let Y;e[28]!==r||e[29]!==d?(Y=()=>!d&&(wa()&&Ca(r)||Ma(r)),e[28]=r,e[29]=d,e[30]=Y):Y=e[30];const J=V(Y);let B;e[31]!==w||e[32]!==C?(B=[C,w],e[31]=w,e[32]=C,e[33]=B):B=e[33];let R;e[34]===Symbol.for("react.memo_cache_sentinel")?(R=[0,1],e[34]=R):R=e[34];const X=Ut(L,B,R);let re;e[35]===Symbol.for("react.memo_cache_sentinel")?(re=t.jsx(Xo,{},"blur"),e[35]=re):re=e[35];let z;e[36]!==a||e[37]!==f||e[38]!==E||e[39]!==P||e[40]!==k?(z=k&&t.jsx(Zo,{clientThreadId:a,bottom:f!=null?f:0,onClick:E,pinnedWidgetType:P}),e[36]=a,e[37]=f,e[38]=E,e[39]=P,e[40]=k,e[41]=z):z=e[41];let ee;e[42]!==X||e[43]!==d?(ee=d&&t.jsx(Ae.div,{initial:{opacity:0},style:{opacity:X},exit:{opacity:0},className:"bg-token-bg-primary/50 pointer-events-auto fixed inset-0 top-(--header-height) backdrop-blur-xs",onMouseDown:()=>h(!1)},"drag-overlay"),e[42]=X,e[43]=d,e[44]=ee):ee=e[44];let q;e[45]!==E||e[46]!==d||e[47]!==J?(q=!d&&t.jsx(me,{className:U("pointer-events-auto absolute start-0 end-0 top-0 z-[100] flex -translate-y-full justify-center pb-2 opacity-0 transition-opacity hover:opacity-100",J&&"opacity-100"),children:t.jsx("button",{onClick:E,className:"text-token-text-secondary border-token-border-default bg-token-bg-primary/50 relative z-30 flex h-6 w-6 cursor-pointer items-center justify-center rounded-full border bg-clip-padding backdrop-blur-md after:absolute after:-inset-2 after:content-['']",children:t.jsx(Ko,{className:"icon-sm text-token-text-primary"})})}),e[45]=E,e[46]=d,e[47]=J,e[48]=q):q=e[48];let ie;e[49]!==a||e[50]!==E||e[51]!==d||e[52]!==g.showLoadingBar$?(ie=!d&&t.jsx(mi,{zIndex:1,clientThreadId:a,onClick:E,onReveal:()=>g.showLoadingBar$.set(!1)},"last-message-banner"),e[49]=a,e[50]=E,e[51]=d,e[52]=g.showLoadingBar$,e[53]=ie):ie=e[53];let ne;e[54]!==L||e[55]!==a||e[56]!==v||e[57]!==y||e[58]!==d||e[59]!==w||e[60]!==C||e[61]!==o||e[62]!==M||e[63]!==u?(ne=d&&t.jsx(Ae.div,{tabIndex:-1,ref:i,className:"pointer-events-none absolute inset-x-0 bottom-0 mx-auto flex origin-bottom items-center justify-center rounded-3xl focus:ring-0 focus:outline-hidden focus-visible:ring-0 focus-visible:outline-hidden md:bottom-6",role:"dialog","aria-modal":"true",onClick:Si,initial:{opacity:0,scale:.98},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,scale:.98},transition:{duration:.14,type:"spring",bounce:0},children:t.jsx(me,{children:t.jsxs("div",{className:"relative overflow-visible",children:[t.jsx(bi,{onDoubleClick:()=>{L.get()===w?Le(M,C/u,Fe):Le(M,w/u,Fe)},onDragStart:()=>{y.set(0)},onDragEnd:K=>{const{velocity:F}=K,{y:G}=F,W=vi(-G,C,w,L.get());W===w?Le(M,w/u,Fe):W===C&&Le(M,C/u,Fe),Le(y,0,Fe)},onDrag:K=>{const{delta:F}=K,{y:G}=F;return y.set(y.get()+G)}}),t.jsx("div",{className:"bg-token-bg-primary shadow-long pointer-events-auto mx-0 flex overflow-hidden rounded-t-3xl backdrop-blur-2xl md:-mx-2! md:rounded-[34px]",children:t.jsx(Ae.div,{className:"relative flex w-full flex-col-reverse overflow-y-auto",style:{height:L,paddingBottom:v!=null?v:0,WebkitMaskImage:"linear-gradient(to bottom, black 0, black calc(100% - 64px), transparent calc(100% - 40px), transparent 100%)",maskImage:"linear-gradient(to bottom, black 0, black calc(100% - 64px), transparent calc(100% - 40px), transparent 100%)"},children:t.jsx(Qo,{children:t.jsx(pi,{onRequestCompletion:o,clientThreadId:a})})})})]})})},"popover-thread"),e[54]=L,e[55]=a,e[56]=v,e[57]=y,e[58]=d,e[59]=w,e[60]=C,e[61]=o,e[62]=M,e[63]=u,e[64]=ne):ne=e[64];let he;return e[65]!==z||e[66]!==ee||e[67]!==q||e[68]!==ie||e[69]!==ne?(he=t.jsxs(ps,{children:[re,z,ee,q,ie,ne]}),e[65]=z,e[66]=ee,e[67]=q,e[68]=ie,e[69]=ne,e[70]=he):he=e[70],he},bi=s=>{"use forget";const e=ke.c(17),{onDrag:a,onDragEnd:o,onDoubleClick:r,onDragStart:l,onPointerUp:c}=s;let n,i,d,h;e[0]===Symbol.for("react.memo_cache_sentinel")?(n={opacity:1},i={opacity:1},d={type:"tween",duration:.1},h={x:0,y:0,transform:"translateY(0px)"},e[0]=n,e[1]=i,e[2]=d,e[3]=h):(n=e[0],i=e[1],d=e[2],h=e[3]);let m;e[4]!==l?(m=()=>{l==null||l()},e[4]=l,e[5]=m):m=e[5];let u;e[6]===Symbol.for("react.memo_cache_sentinel")?(u={left:0,right:0,top:0,bottom:0},e[6]=u):u=e[6];let p;e[7]!==a?(p=(f,b)=>{a==null||a(b)},e[7]=a,e[8]=p):p=e[8];let v;e[9]!==o?(v=(f,b)=>o==null?void 0:o(b),e[9]=o,e[10]=v):v=e[10];let j;return e[11]!==r||e[12]!==c||e[13]!==m||e[14]!==p||e[15]!==v?(j=t.jsx(Ae.div,{drag:"y",tabIndex:-1,className:"bg-token-border-default pointer-events-auto absolute start-10 end-10 top-0 z-10 h-[4px] cursor-ns-resize rounded-b-full opacity-0 after:absolute after:inset-0 after:top-[-18px] after:h-[28px] after:bg-transparent after:content-['']",whileHover:n,whileDrag:i,transition:d,style:h,onPointerDown:m,dragMomentum:!1,dragSnapToOrigin:!1,dragElastic:!1,dragConstraints:u,onDrag:p,onPointerUp:c,onDragEnd:v,onDoubleClick:r}),e[11]=r,e[12]=c,e[13]=m,e[14]=p,e[15]=v,e[16]=j):j=e[16],j};function vi(s,e,a,o){if(!(e<=a))throw new Error("min must be <= max");const r=.25,l=8,c=24,n=1200,i=Math.abs(o-e)<=Math.abs(o-a)?e:a,d=o+s*r,h=Math.abs(d-e)<=Math.abs(d-a)?e:a;if(h===i)return i;const m=(i+h)/2,u=Math.sign(h-i)||1,p=m+u*l;if(!(u>0?d>=p:d<=p))return i;const j=Math.abs(s),f=Math.min(j/n,1),b=c*(1-f*f);return Math.abs(d-i)-Math.abs(d-h)<b?i:h}function Si(s){return s.stopPropagation()}const yi=({clientThreadId:s,isNewThread:e,isGizmoThread:a,isProjectThread:o,isModelLoaded:r,currentModelId:l,onRequestCompletion:c,shouldUseUnifiedComposer:n,onlyAllowImageUploads:i,isWidgetFullScreen:d=!1,layoutMode:h})=>{const m=Q(),u=xe(m,s),{height$:p}=Xe(u),v=_e(ye),j=xt(),{pageType:f}=en(),b=(f==null?void 0:f.type)==="landing-page",g=_a(f==null?void 0:f.type),S=js(s).isOdysseyMode,P=es(m),N=vt(),k=Ze(),C=ve(),w=St(m);tn(j);const y=_e(ye),M=Na(m),I=V(Ft.sidebarUrlTrayOpen$),D=V(Ft.context$),L=Yt(),_=y&&M&&I,T=We(m,"1925940714"),{platformConnectors:O}=ka(),E=sn(an.hasSeenOdysseyConnectorsModal),Y=be(s,F=>oe.getConversationTurns(F).some(G=>G.messages.some(W=>{var Z;return(Z=W.metadata)==null?void 0:Z.n7jupd_message}))),J=wt(),B=st(),R=V(()=>Ve(xe(m,s)).showLoadingBar$()),X=(J||B)&&Y||d&&R;on(async()=>{if(!_)return;const F=L?[L]:[],G=typeof performance<"u"?performance.now():Date.now();try{const W=await za(D,vn,F,s),Z=Math.round((typeof performance<"u"?performance.now():Date.now())-G);return W!=null?fe.logEventWithStatsig("kaur1br5: Sidebar context collected","chatgpt_sidebar_context_collected",{duration_ms:Z,count:Array.isArray(W)?W.length:1}):fe.logEventWithStatsig("kaur1br5: Sidebar context collection failure","chatgpt_sidebar_context_collection_failure",{duration_ms:Z,failure_reason:"null"}),W}catch(W){const Z=Math.round((typeof performance<"u"?performance.now():Date.now())-G),le=W instanceof Ga;fe.logEventWithStatsig("kaur1br5: Sidebar context collection failure","chatgpt_sidebar_context_collection_failure",$({duration_ms:Z,failure_reason:le?"timeout":"error"},W&&typeof W=="object"&&"message"in W?{error_message:String(W.message)}:W?{error_message:String(W)}:{}));return}},()=>_||!T.get("completion_request_blocking_promise_optimization",!1));const re=async F=>{var je,Pe,$e,ce,pe,Ye,ge,we;if(((je=Ra(s))==null?void 0:je.isLoading)!==!1)return;const G=()=>{const se=Zt(j);Wa(se),Ba(se,F.contentToSend.content),Ua(se)},W=await un(F),Z=z(($e=(Pe=W.promptMessage.metadata)==null?void 0:Pe.attachments)!=null?$e:[]),le=(pe=(ce=W.completionMetadata)==null?void 0:ce.systemHints)==null?void 0:pe.includes(dt),te=Array.from((Ye=F.selectedSources)!=null?Ye:[]).filter(se=>se!=="web")[0];if(le&&te&&E.eligible){const se=(ge=Oa[te])!=null?ge:te,Ce=O.get(se);if(Ce){let Oe=!1;Ha(m,mn,{connector:Ce,onConfirm:()=>{E.markAsViewed(),Oe=!0,c(W)},onTurnOffConnectors:()=>{Ia(s,ae=>{var He,Ie;(He=ae.selectedSources)!=null||(ae.selectedSources=new Map),ae.selectedSources.set(L,new Set(["web"])),(Ie=ae.selectedMCPSources)!=null||(ae.selectedMCPSources=new Map),ae.selectedMCPSources.set(L,new Set),ae.mentionedSources=new Set,Da({selectedSourcesMap:ae.selectedSources,selectedMCPSourcesMap:ae.selectedMCPSources,scope:{userId:w==null?void 0:w.authUserId,workspaceId:w==null?void 0:w.id}})})},onClose:()=>{Oe||G()}});return}}if(y){const se=!!D,Ce=I===!0;M&&(!se||!Ce)&&La.error("Missing context chip on message send",{clientThreadId:s,hasSidebarContext:se,isContextChipOpen:Ce,contextEnabled:M,isBridgedDesktopSidebar:y,shouldCollectSidebarContext:_}),(we=Fa())==null||we.triggerProductEvent("messageSent")}Z&&c(W)},z=x.useCallback(F=>{let G=Ta;const W=F.reduce((le,te)=>{var je;return le+((je=te.size)!=null?je:0)},0);S&&(G=Pa(m,"1504865540").get("max_file_size_mb",25));const Z=W<=G*1024*1024;return Z||k.danger(C.formatMessage({id:"odyssey.fileTooLarge",defaultMessage:"The attached files are too large. The maximum size is {maxFileSizeMB}MB."},{maxFileSizeMB:G})),Z},[m,C,S,k]),ee=x.useCallback(F=>{fe.logEvent("Continue Completion"),c(nn(F))},[c]),q=rn.useState(F=>F.isReplayEnabled),ie=Ea({clientThreadId:s}),ne=Aa({clientThreadId:s});if(ie)return t.jsx(ln,{safetyLimited:ne});const he=t.jsxs(t.Fragment,{children:[t.jsx(cn,{clientThreadId:s}),t.jsxs(ze,{ref:ws({axis:"height",onChange:({height:F})=>p.set(F)}),verticalMargin:"none",verticalPadding:P?"last-standard":"none",horizontalPadding:y?"none":"standard",children:[d&&t.jsx(xi,{clientThreadId:s,composerController:j,onRequestCompletion:c}),t.jsx(me,{className:U(v&&"w-full max-w-full"),children:q?t.jsx(dn,{clientThreadId:s},s):X?t.jsx("div",{className:"pointer-events-none h-14"}):t.jsx(qr,{clientThreadId:s,currentModelId:l,isNewThread:e,isProjectThread:o,hideHeader:e,onRequestCompletion:re,onContinueGenerating:ee,onlyAllowImageUploads:i,layoutMode:h})})]})]}),K=e&&t.jsx("div",{className:U("[display:var(--display-hidden-until-loaded,block)] md:absolute md:start-0 md:bottom-8 md:w-full"),children:t.jsx(ze,{verticalMargin:"none",verticalPadding:"none",horizontalPadding:"standard",children:t.jsx(me,{className:U(v&&"w-full max-w-full"),children:t.jsx(Ur,{className:"block flex-1"})})})});return n?t.jsxs(t.Fragment,{children:[!N&&K,t.jsx("div",{id:"thread-bottom",children:he}),N&&K,e&&!b&&!a&&!g&&!S&&!o&&t.jsx(ji,{clientThreadId:s,currentModelId:l,isModelLoaded:r})]}):he},ji=({clientThreadId:s,currentModelId:e,isModelLoaded:a})=>{const o=xt(),r=V(vs(o).shouldShowAutocomplete$),l=Cs(),c=xs({shouldBeEnabledForDefaultAssistant:!0,clientThreadId:s}),n=hn(),{shouldShow:i,newUpsellsDismissible:d}=_t({clientThreadId:s,variant:"banner"}),{shouldShow:h}=zr({clientThreadId:s,canShowBanner:!i});return t.jsxs("div",{className:U(r&&"hidden"),children:[t.jsx(ze,{verticalMargin:"none",verticalPadding:"none",horizontalPadding:"standard",children:t.jsxs(me,{children:[!l&&t.jsxs(t.Fragment,{children:[!1,t.jsx(pn,{clientThreadId:s})]}),c==="tiles"||c==="hscroll"?a&&e&&s?t.jsx(Ps,{className:"mt-10 max-sm:hidden",layout:"carousel"}):null:c==="image_gen_banner"&&n?t.jsx("div",{className:"mt-16 flex justify-center max-sm:hidden",children:t.jsx(gn,{})}):c==="chips"?t.jsx(Gr,{clientThreadId:s,currentModelId:e,isModelLoaded:a}):null,i&&t.jsx("div",{className:"hidden justify-center pt-8 sm:flex",children:t.jsx(Ts,{isDismissible:d()})}),h&&t.jsx("div",{className:"hidden justify-center pt-8 sm:flex",children:t.jsx(Vr,{})})]})}),l&&t.jsxs("div",{className:"thread-sm:flex mt-5 hidden flex-col gap-2",children:[t.jsx(fn,{}),t.jsx(xn,{}),t.jsx(bn,{})]})]})};function wi({className:s,threadHeaderDropdown:e,conversationActions:a,superWidgetTabs:o}){const r=Q(),l=Va(),c=Ne(r),n=!(l&&!ft(r)),i=o!=null?o:t.jsx(Fr,{textClassName:c?"text-sm":"text-base"});return c?t.jsx(Mi,{className:s,conversationActions:a,threadHeaderDropdown:n&&e,superWidgetTabs:i}):t.jsx(Ci,{className:s,conversationActions:a,threadHeaderDropdown:n&&e,superWidgetTabs:i})}function Ci({className:s,conversationActions:e,threadHeaderDropdown:a,superWidgetTabs:o}){return t.jsxs("div",{className:U("grid w-full grid-cols-[minmax(max-content,1fr)_auto_minmax(0,1fr)] lg:grid-cols-[1fr_auto_1fr]",Sn("default"),s),children:[t.jsx("div",{className:"col-start-1 row-start-1 justify-self-start pe-2",children:a}),t.jsx("div",{className:"col-span-2 col-start-2 row-start-1 me-7 min-w-0 place-self-center [justify-self:end] lg:col-span-1 lg:me-0 lg:min-w-(--thread-content-max-width) lg:flex-1 lg:[justify-self:center]",children:o}),t.jsx("div",{className:"col-start-3 row-start-1 hidden items-center justify-self-end overflow-visible lg:flex",children:e})]})}function Mi({className:s,conversationActions:e,threadHeaderDropdown:a,superWidgetTabs:o}){const r=x.useRef(null),l=x.useRef(null),c=x.useRef(null),n=x.useRef(null);return Qt(()=>{const i=r.current,d=l.current,h=c.current,m=n.current;if(!i||!d||!h||!m)return;const u=()=>{const v=i.getBoundingClientRect().width,j=h.getBoundingClientRect().width,f=d.getBoundingClientRect(),b=.5*(v-j),g=f.right>b;h.style.justifySelf=g?"start":"center"},p=new ResizeObserver(u);return p.observe(i,{box:"border-box"}),p.observe(d,{box:"border-box"}),p.observe(h,{box:"border-box"}),u(),()=>{p.disconnect()}},[]),t.jsxs("div",{className:U("h-header-height w-full px-2 sm:grid sm:grid-cols-[minmax(max-content,1fr)_auto_minmax(0,1fr)] sm:px-0",s),ref:r,children:[t.jsx("div",{className:"z-10 col-start-1 row-start-1 hidden self-center justify-self-start pe-2 md:flex",ref:l,children:a}),t.jsx(me,{className:"col-span-3 col-start-1 row-start-1 w-full",children:t.jsx("div",{className:"w-full",ref:n})}),t.jsx("div",{className:U("no-scrollbar col-start-2 row-start-1 -mb-px h-full w-full min-w-0 overflow-x-auto overflow-y-hidden"),ref:c,children:o}),t.jsx("div",{className:"col-start-3 row-start-1 hidden items-center justify-self-end overflow-visible md:flex",children:e})]})}const _i=({clientThreadId:s})=>{const e=Q(),a=ts(j=>j.activeStageSidebar),o=yn(jn.WorkspaceShareLinks),{isUnauthenticated:r}=et(),l=Kt(),c=ss(s),n=tt(c),i=Ue(e,"16480203"),d=wn(),h=$a(),m=_e(Re),u=o&&!r&&!l&&(!n||i)&&!d&&!h&&!(Ne(e)&&m),p=!a,v=m;return t.jsx("div",{className:"flex items-center",id:"conversation-header-actions",children:t.jsx(Jr,{showShareButton:u,showProfileDropdown:p,showConversationPrivacyIndicator:v,clientThreadId:s})})},Ni=as(()=>os(()=>import("./h60m3gf0t6dhiuo2.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12])).then(s=>s.GizmoUsingAsOwnerNotice)),ki="text-lg",Pi="icon-sm";function Ti({clientThreadId:s,transparentBackground:e,isEmptyState:a}){var B,R,X,re;const o=Q(),r=Ct(o),l=ss(s),c=tt(l),n=Cn(),{data:i}=Ya(l),d=St(o),h=d==null?void 0:d.getWorkspaceId(),m=qa(),{data:u}=Ka(h),p=(B=m==null?void 0:m.data.profilePictureUrl)!=null?B:null,v=(R=m==null?void 0:m.data.name)!=null?R:void 0,j=!!(m!=null&&m.isWorkspaceAccount()&&p&&((X=u==null?void 0:u.beta_settings)!=null&&X[Qa.SHOW_LOGO_IN_HEADER])),f=vt(),b=ns(),[g,S]=_e(z=>[Re(z),ye(z)]),P=ut(s),N=ts(z=>z.isConversationScrolledFromTop),k=be(s,oe.hasUserMessage)||!P,C=st(),w=C&&b,y=Mt()&&k&&!C,M=!l&&!y&&!S,{shouldShow:I}=_t({clientThreadId:s,variant:"pill"}),D=I&&!w,L=!ft(o),_=L&&!k;Ja();const T=t.jsx(Ms,{clientThreadId:s,children:t.jsx(_i,{clientThreadId:s})}),O=g&&!y?{textClassName:ki,chevronClassName:Pi}:{},E=y?t.jsx(wi,{threadHeaderDropdown:_?null:t.jsx(rt,$({clientThreadId:s},O)),conversationActions:T}):S?t.jsx(Pn,{clientThreadId:s}):f&&(c||!l)?_?null:t.jsx(rt,{clientThreadId:s}):_?null:t.jsx(rt,$({clientThreadId:s},O)),Y=(()=>{const z="[box-shadow:var(--sharp-edge-top-shadow)]",ee="[box-shadow:var(--sharp-edge-top-shadow-placeholder)]";return g&&Ne(o)?"":r?ee+" group-data-scroll-from-top/thread:"+z:N?z:ee})(),J=V(()=>Ve(xe(o,s)).hasPinnedWidget$());return t.jsxs(t.Fragment,{children:[t.jsxs(Mn,{id:"page-header",className:U("pointer-events-none select-none [view-transition-name:var(--vt-page-header)] *:pointer-events-auto motion-safe:transition",!y&&!S&&"max-md:hidden",a&&"absolute start-0 end-0",c&&P&&"sharp-edge-on-scroll-start sticky top-0",M&&"thread-xl:absolute thread-xl:start-0 thread-xl:end-0 thread-xl:shadow-none!",M&&!C&&!J&&"thread-xl:bg-transparent",e&&!C&&!y&&!S&&"bg-transparent",Y,N&&D&&"thread-xl:bg-token-main-surface-primary thread-xl:[box-shadow:var(--sharp-edge-top-shadow)]!"),children:[!S&&!y&&t.jsxs("div",{className:"absolute start-1/2 flex flex-col items-center gap-2 ltr:-translate-x-1/2 rtl:translate-x-1/2",children:[i==null&&j&&p&&t.jsx(_n,{src:p,alt:v!=null?v:""}),i!=null&&(d==null?void 0:d.isWorkspaceAccount())&&((re=i.gizmo.tags)==null?void 0:re.includes(Xa.WorkspaceDisabled))&&t.jsx(Ni,{gizmo:i}),t.jsx(Nn,{gizmoId:l,clientThreadId:s}),D?t.jsx($r,{}):null,w&&t.jsx(oi,{})]}),t.jsxs("div",{className:U("flex",y||S?"w-full":"items-center"),children:[L&&Ue(o,"2860321732")&&t.jsx(Ei,{}),i&&t.jsx(ni,{projectResource:i}),E]}),!y&&!S&&t.jsx("div",{className:"flex items-center",children:T})]}),n&&t.jsx(kn,{})]})}const Ei=()=>{const{resetThread:s}=jt();return t.jsx(gt,{label:t.jsx(ue,{id:"mG13YW",defaultMessage:"New chat"}),contentClassName:"cant-hover:hidden",triggerAs:null,children:t.jsx(hs,{to:"/",className:"hover:bg-token-bg-tertiary group touch:h-10 flex aspect-square h-9 items-center justify-center rounded-[10px]",onClick:e=>{e.metaKey||e.ctrlKey?fe.logEventWithStatsig("New Chat Opened In New Tab","chatgpt_new_chat_opened_in_new_tab"):(fe.logNewChatButtonClicked({location:"Anon desktop header"}),s(),e.preventDefault())},children:t.jsxs("div",{children:[t.jsx(Za,{className:"icon-lg -m-1 group-hover:hidden"}),t.jsx(Tn,{className:"icon not-group-hover:hidden"})]})})})};function Ai(s){var r;const e=oe.getConversationTurns(s),a=e.findIndex(l=>l.role===bt.Assistant);if(a===-1)return;const o=e[a];for(let l=0;l<o.messageGroups.length;l++)if(o.messageGroups[l].type===Wt.SearchGPTQuery){const n=o.messageGroups.slice(l+1).find(({type:d})=>d===Wt.Text);if(n==null)return;const i=eo(n.messages[0]);if(((r=i==null?void 0:i[0])==null?void 0:r.type)==="navigation")return{turnIndex:a,navigationCitation:i[0],message:n.messages[0]}}}function Ri(s,e){var o,r;if(e==null||s==null)return s;const a=new Set(s.domains.map(l=>l.url));return de($({},s),{domains:[...s.domains,...e.domains.filter(l=>!a.has(l.url))],safe_urls:[...(o=s.safe_urls)!=null?o:[],...(r=e.safe_urls)!=null?r:[]]})}function Oi({query:s}){return t.jsx(ze,{horizontalPadding:"standard",children:t.jsx(me,{className:_s({isUserTurn:!0}),children:t.jsx("div",{className:Xr(!0),children:t.jsx(En,{containsImagesOrAttachments:!1,children:t.jsx(An,{text:s})})})})})}function Hi({clientThreadId:s,prefetchNavlink:e,clearPrefetchNavlink:a}){var d;const o=x.use(e),r=Q(),l=Ue(r,"1032814809");x.useEffect(()=>{window.__oai_SSR_NAVLINK&&Rn.logEvent("Search Tool Page Load Time To Fast Nav SSR",{server_timing:o==null?void 0:o.timing},window.__oai_SSR_NAVLINK)},[]),x.useEffect(()=>{o==null&&a()},[o,a]);const c=x.useMemo(()=>o==null?null:de($({},o.navlink),{domains:o.navlink.domains.map(h=>{var m;return de($({},h),{subtitle:(m=h.subtitle)!=null?m:h.domain})})}),[o]),n=be(s,Ai),i=x.useMemo(()=>Ri(c,n==null?void 0:n.navigationCitation),[n,c]);return o==null||i==null?null:t.jsxs("div",{children:[t.jsx("div",{className:"mt-10",children:t.jsx(ze,{horizontalPadding:"standard",children:t.jsxs(me,{className:_s({isUserTurn:!1}),children:[t.jsx(On,{clientThreadId:s,turnIndex:(d=n==null?void 0:n.turnIndex)!=null?d:2,nextMessage:n==null?void 0:n.message,navigationCitation:i}),l?t.jsxs("div",{className:"text-token-text-secondary relative -top-2 flex justify-end gap-2 font-mono text-xs",children:[t.jsxs("div",{elementtiming:"navlink",children:["server: ",o.timing,"ms"]}),t.jsx(Ii,{})]}):null]})})}),t.jsx(Hn,{scriptSrc:"requestAnimationFrame(()=>window.__oai_SSR_NAVLINK=window.__oai_SSR_NAVLINK||performance.now());"})]})}function Ii(){const[s,e]=x.useState(null);return x.useEffect(()=>{const a=new PerformanceObserver(o=>{o.getEntries().forEach(r=>{if(r.identifier==="navlink"){const l=r.renderTime;e(c=>c==null?l:c)}})});return a.observe({type:"element",buffered:!0}),()=>a.disconnect()},[]),s==null?null:t.jsxs("span",{children:["render: ",s,"ms"]})}function Di(s){const{prefetchNavlink:e,clearPrefetchNavlink:a,clientThreadId:o,pageLoadSearchQuery:r}=s,l=Q(),c=Ct(l),n=Ss(o),i=bs(),d=In(),h=Re(l),m=ye(l),u=V(()=>Dn()),{isOpen:p}=Ns(),v=d.store.useContentAreaDimensions(Ln.Header,g=>g!=null&&g.height?g.height:void 0);let j=null;v||(j=!c&&p?"max-sm:pb-25":"pb-25",(h||m)&&(j=u==="answer"?"pb-0":"pb-8"));let f=t.jsx(Li,$({isNewScrollEnabled:c},s));const b=Mt();return b&&(f=t.jsx(Wr,{clientThreadId:o,children:f})),f=t.jsx(Ms,{clientThreadId:o,children:f}),t.jsxs("div",{onCopy:n,className:U("flex flex-col text-sm",Ne(l)&&b?"pt-4":m?"thread-xl:pt-0 pt-0":"thread-xl:pt-header-height",i&&"keyboard-open:pb-[calc(var(--composer-height,100px)+var(--screen-keyboard-height,0))]",j),style:{paddingBottom:v},children:[r&&t.jsx("div",{children:t.jsx(Oi,{query:r})}),e?t.jsx(to,{name:"prefetch-navlink",onError:g=>{Je.addError("Error with prefetch navlink",{error:g}),a()},children:t.jsx(x.Suspense,{fallback:null,children:t.jsx(Hi,{clientThreadId:o,prefetchNavlink:e,clearPrefetchNavlink:a})})}):null,t.jsx(rs,{children:f})]})}function Li({onRequestCompletion:s,clientThreadId:e,scrollContainerRef:a,isNewScrollEnabled:o}){const r=Q(),l=Re(r),c=ye(r),n=Re(r)&&so(r),[i,d,h,m]=be(e,_=>[oe.getConversationTurnIds(_),(_==null?void 0:_.conversationOrigin)===cs.APPLE,_==null?void 0:_.scrollToMessageId,n?oe.getConversationTurns(_):null]),u=m==null?void 0:m.findIndex(_=>_.role===bt.User),p=wt(),v=st(),j=ns(),f=Fn(),[b]=Wn(),g=Bn(),[S]=Un(),P=Xt(e);zn({isSharedConversation:p,clientThreadId:e}),x.useEffect(()=>{p&&(De.logEvent("chatgpt_continue_conversation_page_loaded"),fe.logEvent("Continue Conversation: Page Loaded"),De.logEvent("chatgpt_conversation_share_page_loaded"),fe.logEvent("Share Public Chat: Shared Conversation Loaded"))},[p]);const N=V(()=>e?Gn(xe(r,e)).activeSystemHintSuggestionChips$():[]),k=x.useCallback(()=>{o||f({behavior:"smooth"})},[o,f]),C=c||Ne(r)&&l,[w,y]=x.useState(!1),M=(w||!1)&&!N.length&&!c,I=x.useRef(null),D=ys(e),L=v&&!j;return t.jsxs(t.Fragment,{children:[L&&t.jsx(ai,{}),p&&t.jsxs(t.Fragment,{children:[t.jsx(me,{children:t.jsx("p",{className:"text-xs text-gray-500",children:t.jsx(ue,{id:"threadLayout.sharedConversationCopyDisclaimer",defaultMessage:"This is a copy of a conversation between ChatGPT & Anonymous."})})}),t.jsx("div",{className:"text-token-text-primary mb-5 text-center text-xs font-semibold",children:t.jsx("button",{onClick:()=>{Be.openModal(is.ReportConversation),De.logEvent("chatgpt_conversation_share_report_content_clicked",null,{location:"Static Shared Thread Page"}),fe.logEvent("Share Public Chat: Report Content Clicked",{location:"Dynamic Shared Thread Page"})},children:t.jsx(ue,{id:"thread.reportSharedConversation",defaultMessage:"Report conversation"})})})]}),i.map((_,T)=>{var E;const O=u!==void 0&&T===u;return t.jsxs(yt.Fragment,{children:[t.jsx(ks,{isFinalTurn:T===i.length-1,turnIndex:T,clientThreadId:e,onRequestCompletion:s,currentModelId:(E=P==null?void 0:P.id)!=null?E:null,scrollToBottom:o?void 0:k,scrollToMessageId:o?void 0:h,dateHeaderType:D(T),hideUserActions:C},_),n&&O&&t.jsx(Vn,{})]},_)}),!o&&t.jsxs(t.Fragment,{children:[(a==null?void 0:a.current)&&t.jsx(ls,{setIsScrolledToEdge:_=>{y(_)},options:{root:a.current,threshold:0,rootMargin:"0%"}},"threadBottomEdgeScrollObserver"),t.jsx("div",{ref:I}),d&&b&&!S&&t.jsx($n,{className:U("translate-y-[10px] md:translate-y-[30px]"),onClick:()=>{De.logEvent("chatgpt_thread_scroll_to_top"),g({behavior:"smooth"})},children:t.jsx(Yn,{className:"icon text-token-text-primary"})}),t.jsx(qn,{show:M,className:U("bottom-[calc(var(--composer-overlap-px)+--spacing(6))]"),onClick:()=>{var _;De.logEvent("chatgpt_thread_scroll_to_bottom"),(_=I.current)==null||_.scrollIntoView({behavior:"smooth",block:"end"})}})]})]})}const Fi=as(()=>os(()=>import("./mca6pva38upzxvpk.js"),__vite__mapDeps([13,1,2,3,14,15,5,6,16,17])));function Wi({clientThreadId:s,isNewScrollEnabled:e,pageLoadSearchQuery:a,messagesVerticalAlign:o,footerRootContainerElementRef:r,threadRootRef:l,scrollContainerRef:c,hideHeader:n,children:i}){const[d]=yo(),h=!!d.get("message"),m=Q(),[u,p]=_e(b=>[ye(b),Re(b)]),v=Ne(m),j=be(s,b=>(b==null?void 0:b.conversationOrigin)===cs.APPLE),f=V(()=>Ve(xe(m,s)).pinnedWidgetHeight$());if(e)return t.jsx(Dr,{allowScrollToEnd:!u,allowScrollToTop:!u&&j,clientThreadId:s,initScrolledToEnd:a==null&&!h,threadFooterRef:r,threadRootRef:l,children:i});{const b=t.jsx("div",{className:"relative h-full",style:{"--pip-widget-height":f?"".concat(f,"px"):"0px"},children:t.jsxs("div",{className:U("flex h-full flex-col overflow-y-auto",!p&&(f?"pt-(--pip-widget-height)":"thread-xl:pt-(--header-height)"),(p||u)&&v?"thread-sm:[scrollbar-gutter:stable_both-edges] [scrollbar-gutter:stable]":"[scrollbar-gutter:stable_both-edges]"),ref:c,children:[t.jsx(ls,{className:"absolute start-0 top-0",setIsScrolledToEdge:g=>{Be.setIsConversationScrolledFromTop(g)},options:{root:c==null?void 0:c.current}}),i]})});return a!=null?b:t.jsx(rs,{children:t.jsxs(x.Suspense,{fallback:null,children:[t.jsx(Lr,{}),b]})})}}const Bi=function({clientThreadId:s,getGizmosCompletionParams:e,hideDisclaimer:a,hideHeader:o,messagesVerticalAlign:r="top",renderEmptyState:l}){"use forget";var Tt;const c=ao(),n=Q(),i=Cs(),d=Ct(n),h=vt(),m=oo(),{data:u}=no({isGizmo:!!m}),p=Kn(s),[v,j,f,b,g,S,P]=be(s,A=>[A==null?void 0:A.isLoading,oe.getCurrentLeafId(A),oe.hasUserMessage(A),oe.getConversationTurns(A).length,oe.isArchived(A),A==null?void 0:A.modelId,A?oe.getGizmoId(A):m]),N=ds(s),{prefetchSearchPromises:k}=jt();x.useEffect(()=>Qn(n,s),[n,s]);const[C]=x.useState(k==null?void 0:k.query),[w,y]=x.useState(k==null?void 0:k.navlink);x.useEffect(()=>{v||(ut(s)?Je.addTiming("chatgpt.web.chatPage.renderNewConversation"):Je.addTiming("chatgpt.web.chatPage.renderExistingConversation"))},[s,v]);const{setTargetedContent:M}=Jn(),I=c==null?void 0:c.includes(Xn),D=b>=2,[L,_]=_e(A=>[ro(A),ye(A)]),T=wt(),{hash:O}=us(),E=Ge(),Y=st(),{isOpen:J}=Ns();x.useEffect(()=>{O==="#report"&&(Be.openModal(is.ReportConversation),E({hash:""},{replace:!0}))},[O,E]);const B=!!P,R=ut(s)&&!D&&(zt(p)||(p==null?void 0:p.kind)===io.GizmoTest)&&!T&&!Y&&k==null&&(!L||B),X=R&&!f&&k==null&&(!L||B),re=_&&!f&&!B,z=lo(u),ee=z==null?void 0:z.id,q=(Tt=S!=null?S:ee)!=null?Tt:null,ie=!!S,ne=co.useStore();x.useEffect(()=>{if(q===uo)return ne.setActiveSystemHint(dt,{locked:!0,analyticsMetadata:{clientThreadId:s}}),()=>{ne.setActiveSystemHint(null,{locked:!1,ifPrevSystemHint:dt,analyticsMetadata:{clientThreadId:s}})}},[q,ne,s]);const he=mo(u==null?void 0:u.models,q),K=Zn(s,p),F=ho();x.useEffect(()=>{F||M(void 0)},[s,M,F,j]),x.useEffect(()=>{Be.setIsConversationScrolledFromTop(!1)},[s]),x.useEffect(()=>{const A=new URLSearchParams(window.location.search),Me=A.get("src");if(Me==="history_search"){A.delete("src");const Qe=A.toString(),Gs="".concat(window.location.pathname).concat(Qe?"?".concat(Qe):"").concat(window.location.hash);window.history.replaceState({},document.title,Gs)}N&&Me==="history_search"&&pt.safePatch("/conversation/{conversation_id}",{parameters:{path:{conversation_id:N}},requestBody:{touch:!0},intercomEventOnError:"fetch-error:conversation:edit"}).then(()=>{const Qe=po(n);er(Qe,P)})},[n,N,P]);const G=x.useCallback(A=>{const Me=$({ctx:n,clientThreadId:s},e?e(A):A);tr(Me)},[n,s,e]),W=sr(),Z=go(),le=x.useRef(null);le.current=A=>{R&&!Z&&!L&&fo(n,"3253785454").get("should_animate_composer",!1)?mt({className:ht["composer-slide"],update:()=>G(A)}):G(A)};const te=x.useCallback(A=>{var Me;return(Me=le.current)==null?void 0:Me.call(le,A)},[le]);x.useEffect(()=>{W.signalTransitionReady()},[W,s]),ar(s,te),or(),nr(s),rr(R);const je=ir({clientThreadId:s,handleRequestCompletion:te,prefetchSearchThreadIdPromise:k==null?void 0:k.threadId})&&C==null,Pe=x.useRef(null);x.useEffect(()=>{!Y&&!i&&(document.title=K!=null?K:"ChatGPT")},[K,Y,i]);const $e=tt(P),ce=B&&$e,pe=X&&!l&&B&&xo(n,P),Ye=es(n),ge=St(n),we=be(s,A=>A==null?void 0:A.sharedProjectConversationOwner),se=ce&&(we==null?void 0:we.id)!=null&&we.id!==(ge==null?void 0:ge.normalizedAccountUserId),Ce=ge&&!ge.isTeam()&&!ge.isEnterprisey(),Oe=!a&&!Ye&&!_&&!pe&&!(L&&!h)&&!(R&&Ce)&&zt(p),ae=js(s).isOdysseyMode,He=x.useRef(null),Ie=x.useRef(null),Nt=lr(A=>A.composerHeight),kt=!R&&!J&&!_,Os=Mt()&&Ne(n)&&!X,qe=!ce,Hs=R,Is=x.useCallback(()=>y(void 0),[]),{isSingleLine:Pt}=bo(),Ds=!vo(),Ke=V(()=>Ve(xe(n,s)).displayMode$()==="fullscreen"),{shouldShow:Ls,newUpsellsDismissible:Fs}=_t({clientThreadId:s,variant:"banner"}),Ws=R&&!B&&!Ds?"center":"bottom",Bs=cr();function Us(){return t.jsx(Or,{clientThreadId:s,scrollContainerRef:Pe})}function zs(){return v||je?null:X?pe?t.jsx(Hr,{clientThreadId:s,gizmoId:P,currentModelId:q,onRequestCompletion:te}):l!=null?l:t.jsx(t.Fragment,{children:B?t.jsx(Ir,{clientThreadId:s,gizmoId:P,onRequestCompletion:te,currentModelId:q}):t.jsx(li,{clientThreadId:s,currentModelId:q,isModelLoaded:ie})}):D||C!=null?t.jsx(Wi,{clientThreadId:s,isNewScrollEnabled:d,pageLoadSearchQuery:C,messagesVerticalAlign:r,footerRootContainerElementRef:Ie,threadRootRef:He,scrollContainerRef:Pe,hideHeader:o,children:t.jsx(Di,{onRequestCompletion:te,clientThreadId:s,scrollContainerRef:Pe,pageLoadSearchQuery:C,prefetchNavlink:w,clearPrefetchNavlink:Is},s)}):null}return t.jsx(dr.Provider,{value:w?"user-query-with-navlink":C?"user-query":null,children:t.jsx(ur,{serverThreadId:N,children:t.jsx(mr,{clientThreadId:s,children:t.jsxs(So,{clientThreadId:s,children:[t.jsx(zi,{clientThreadId:s,conversationTurnsLength:b}),I&&t.jsx(Fi,{}),!Y&&!i&&t.jsx(hr,{children:K!=null&&t.jsx("title",{children:K})}),t.jsx(pr.Provider,{value:te,children:t.jsxs(gr,{children:[t.jsx("div",{id:"thread",ref:He,className:U("group/thread @container/thread h-full w-full",d&&wr.threadRoot),children:t.jsxs(Yr,{noKeyboard:!0,clientThreadId:s,currentModelConfig:he,className:U("composer-parent flex flex-col focus-visible:outline-0",!ce&&"overflow-hidden",pe?"min-h-full":"h-full"),children:[Ls&&X&&!pe&&!l&&t.jsx("div",{className:"flex justify-center pt-2 sm:hidden",children:t.jsx(Ts,{isDismissible:Fs()})}),!o&&t.jsx(Ti,{transparentBackground:R&&!pe,clientThreadId:s,isEmptyState:X}),Ue(n,"1909635392")&&t.jsx(fr,{clientThreadId:s}),t.jsxs("div",{className:U("relative basis-auto flex-col",kt&&"-mb-(--composer-overlap-px)",kt&&(Pt?"[--composer-overlap-px:28px]":"[--composer-overlap-px:55px]"),ce||B||!R?"grow":"shrink",pe?"grid":"flex",!R&&"overflow-hidden",R&&i&&"sm:min-h-[21svh]!",R&&!ce&&!B&&"flex-col justify-end max-sm:grow max-sm:justify-center sm:min-h-[42svh]"),style:{"--composer-height":Nt?"".concat(Nt,"px"):void 0},children:[Bs&&Us(),zs(),L&&re&&t.jsx(xr,{ctx:n}),Os&&t.jsx(br,{})]}),t.jsxs("div",{id:"thread-bottom-container",className:U("group/thread-bottom-container relative isolate z-10 w-full basis-auto has-data-has-thread-error:pt-2 has-data-has-thread-error:[box-shadow:var(--sharp-edge-bottom-shadow)] md:border-transparent md:pt-0 dark:border-white/20 md:dark:border-transparent",Ke&&"pointer-events-none",!R&&!Ke&&"content-fade",Pt&&"single-line",se&&"[--content-fade-height:110px]",se&&"[--content-fade-top:-110px]",R&&"min-h-0",!Oe&&!_&&!ae&&"mb-4",B||ce||!R?"":qe&&R&&"sm:grow",qe&&"flex flex-col",Ke&&"z-60"),ref:Ie,children:[g?t.jsx(vr,{clientThreadId:s}):t.jsxs(t.Fragment,{children:[(!R||qe)&&!J&&t.jsxs(t.Fragment,{children:[t.jsx(yi,{isGizmoThread:B,isProjectThread:ce,clientThreadId:s,isNewThread:R,currentModelId:q,onRequestCompletion:te,shouldUseUnifiedComposer:qe,isModelLoaded:ie,layoutMode:Ws,isWidgetFullScreen:Ke}),h&&R&&Ue(n,"537200474")&&t.jsx(Sr,{clientThreadId:s})]}),Hs&&t.jsx(yr,{clientThreadId:s,isGizmoThread:B,isNewThread:R,isProjectThread:ce})]}),Oe?t.jsx("div",{ref:ws({axis:"height",onChange:({height:A})=>Xe(xe(n,s)).marginBottom$.set(A)}),className:"text-token-text-secondary relative mt-auto flex min-h-8 w-full items-center justify-center p-2 text-center text-xs [view-transition-name:var(--vt-disclaimer)] md:px-[60px]",children:t.jsx(jr,{clientThreadId:s})}):null]})]})}),t.jsx(Cr,{clientThreadId:s,isStaticSharedThread:!1,isSharedConversation:T}),t.jsx(Mr,{}),t.jsx(_r,{conversationId:s}),t.jsx(Nr,{}),t.jsx(kr,{})]})})]})})})})},ol=yt.memo(Bi);function Ui({clientThreadId:s,conversationTurnsLength:e}){const a=ds(s);return Pr(a),Tr(),Er(),Ar(s),Rr(e,s),null}const zi=yt.memo(Ui);export{_i as C,ol as M,al as P,Es as a,ni as b};
//# sourceMappingURL=e0efgancp8wep37e.js.map
