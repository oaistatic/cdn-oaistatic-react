import{b as L,r as s,j as e,d as P}from"./jj85rqzpbnvv3emr.js";import{dw as y,dx as _,dy as B,dz as H,dA as z,dB as J,dC as x,N as i,dD as K,dE as O,dF as Q,dG as V,dH as W,dI as Y,dJ as Z,dK as X,dL as $,dM as ee}from"./mclphevd122040jw.js";import{I as ae}from"./fr4ckts5oz9jhhs0.js";import"./lef5ym39glv4981l.js";import"./cdk0cmbgnafohb1q.js";import"./gyvvad7btmtz1x9o.js";import"./n6vmm5pyahusdy8e.js";import"./l041el2tch1t3nkf.js";import"./dta5t6ifyam55mk9.js";import"./easgat082167v0i8.js";import"./cncd8uuk5eicbkeu.js";const S=P({thumbsUp:{id:"Qz8Wa6",defaultMessage:"Like this image"},thumbsDown:{id:"sUGtRy",defaultMessage:"Dislike this image"}}),se=t=>{var d,c,g,u;return z({pointer:{url:t.url,asset_pointer:(d=t.assetPointer)!=null?d:"",metadata:{dalle:{gen_id:(c=t.transformationId)!=null?c:void 0},generation:{gen_id:(g=t.transformationId)!=null?g:void 0}},width:t.width,height:t.height},conversationId:t.conversationId,messageId:(u=t.messageId)!=null?u:"",source:"chat"})},he=({images:t,initialIndex:d,onClose:c,onRequestCompletion:g,clientThreadId:u,currentModelId:M})=>{var k;const n=L(),N=y(),[o,w]=s.useState(null),[h,f]=s.useState(null),[R,F]=s.useState(d),[C,p]=s.useState("default"),r=_(),v=s.useRef(null),I=s.useRef(r);s.useEffect(()=>{I.current=r},[r]);const T=s.useCallback(l=>{f(null),w(null),F(l),p("default"),I.current.clearAllDrawings()},[]),D=s.useCallback(()=>B(n),[n]),m=s.useCallback((l,b)=>{!b||o!=null||(H.imageRated({liked:l,analyticsContext:se(b)}),w(l),l||f(b))},[o]),a=t[R],j=s.useCallback(()=>{p("default"),I.current.clearAllDrawings()},[]),U=s.useCallback(()=>{m(!0,a)},[m,a]),E=s.useCallback(()=>{!a||o!=null||m(!1,a)},[m,a,o]),A=s.useCallback(()=>{a&&p("inpaint")},[a]),G=s.useCallback(()=>{a&&J({url:a.url,fileName:D()})},[a,D]),q=s.useCallback(()=>{var l;return(l=v.current)==null?void 0:l.getImageData()},[]);return e.jsxs(e.Fragment,{children:[e.jsxs(x.Root,{images:t,initialIndex:d,onClose:c,onIndexChange:T,inpaintingProps:{mode:C,drawingState:r,drawingCanvasRef:v},children:[e.jsx(x.LightboxHeaderActions,{children:C==="inpaint"?e.jsxs("div",{className:"grid grow grid-cols-[1fr_auto] items-center gap-2",children:[e.jsx("div",{className:"text-center font-semibold",children:n.formatMessage({id:"TjVqYb",defaultMessage:"Edit Selection"})}),e.jsxs("div",{className:"flex gap-1 justify-self-end md:gap-2",children:[e.jsx(i,{className:"aspect-square",icon:K,onClick:r.undoDrawing,disabled:!r.canUndoDrawing,"aria-label":n.formatMessage({id:"OmaTPx",defaultMessage:"Undo"})}),e.jsx(i,{className:"aspect-square",icon:O,onClick:r.redoDrawing,disabled:!r.canRedoDrawing,"aria-label":n.formatMessage({id:"ZUr4oh",defaultMessage:"Redo"})}),e.jsx(i,{className:"w-auto px-3",onClick:j,children:n.formatMessage({id:"D9xvar",defaultMessage:"Cancel"})})]})]}):e.jsxs("div",{className:"flex gap-1 md:gap-2",children:[o!==!1&&e.jsx(i,{className:"aspect-square",icon:o===!0?Q:V,onClick:U,"aria-label":n.formatMessage(S.thumbsUp)}),o!==!0&&e.jsx(i,{className:"aspect-square",icon:o===!1?W:Y,onClick:E,"aria-label":n.formatMessage(S.thumbsDown)}),e.jsx(i,{className:"aspect-square",icon:Z,onClick:A,"aria-label":n.formatMessage({id:"pRGwlp",defaultMessage:"Edit image"})}),e.jsx(i,{className:"aspect-square",icon:X,onClick:G,"aria-label":n.formatMessage({id:"9DNHka",defaultMessage:"Download image"})}),N()&&(a==null?void 0:a.messageId)&&e.jsx($,{assetPointer:a.assetPointer,serverThreadId:a.conversationId,messageId:a.messageId})]})}),e.jsx(x.Footer,{children:e.jsx(ae,{clientThreadId:u,currentModelId:M,onRequestCompletion:g,onClose:c,activeImage:a,currentDrawnShape:r.currentDrawnShape,getImageData:q,onCancelInpaint:j})})]}),h&&e.jsx(ee,{messageId:(k=h.messageId)!=null?k:"",serverThreadId:h.conversationId,rating:o,onClose:()=>f(null)})]})};export{he as ImageGenConversationLightboxNew};
//# sourceMappingURL=dpaj0n43y3yxbl8z.js.map
