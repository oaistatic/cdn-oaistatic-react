var E=Object.defineProperty;var k=Object.getOwnPropertySymbols;var I=Object.prototype.hasOwnProperty,m=Object.prototype.propertyIsEnumerable;var p=(e,n,a)=>n in e?E(e,n,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[n]=a,f=(e,n)=>{for(var a in n||(n={}))I.call(n,a)&&p(e,a,n[a]);if(k)for(var a of k(n))m.call(n,a)&&p(e,a,n[a]);return e};import{F as l}from"./fiopi92hbqnf6y38.js";import{P as t,ax as c,an as r,$ as A,a0 as h,aj as q,ak as C,i as M,r as D,j as Q,fn as x}from"./lef5ym39glv4981l.js";import{bE as w,kt as L,ku as O}from"./mclphevd122040jw.js";import{r as v,e as j,v as b}from"./jj85rqzpbnvv3emr.js";let s="",o="";const _=new Set,i={setSessionId(e){s=e},setQuerySessionId(e){_.clear(),o=e},logClick(e,n,a){c.addAction("fannypack.web.click",{index:n,source:a}),t.logEvent("FannyPack: Click result",{fanny_pack_session_id:s,fanny_pack_query_session_id:o,conversationId:e,index:n,source:a}),r.logEvent("chatgpt_fannypack_click",n,{index:String(n),source:a})},logClose(e){t.logEvent("FannyPack: Close",{fanny_pack_session_id:s,source:e})},logOpen(e){A.count(h.DEFAULT,"conversation_search.open",[{key:"source",value:e}]),c.addAction("fannypack.web.open",{source:e}),t.logEvent("FannyPack: Open",{fanny_pack_session_id:s,source:e}),r.logEvent("chatgpt_fannypack_open",e)},logQuery(){c.addAction("fannypack.web.query"),t.logEvent("FannyPack: Query",{fanny_pack_session_id:s,fanny_pack_query_session_id:o}),r.logEvent("chatgpt_fannypack_query")},logQueryError(){c.addError("fannypack.web.query_error"),t.logEvent("FannyPack: Query Error",{fanny_pack_session_id:s,fanny_pack_query_session_id:o})},logQueryMore(){c.addAction("fannypack.web.queryMore"),t.logEvent("FannyPack: Query Fetch More",{fanny_pack_session_id:s,fanny_pack_query_session_id:o}),r.logEvent("chatgpt_fannypack_query_more")},logNoResults(){t.logEvent("FannyPack: No results",{fanny_pack_session_id:s,fanny_pack_query_session_id:o})},logImpression(e,n,a){_.has(a)||(_.add(a),t.logEvent("FannyPack: Impression",{fanny_pack_session_id:s,fanny_pack_query_session_id:o,source:e,index:n,conversation_id:a}))}},K={isActive:!1,query:"",activeIndex:void 0,mouseInteractionsDisabled:!1},d=q(C(()=>f({},K))),P=d.getState,y=d.setState,R={getQuery:(e=P())=>e.query,getMouseInteractionsDisabled:()=>P().mouseInteractionsDisabled},F={setIsActive:e=>{y({isActive:e})},setQuery:e=>{y({query:e})},setActiveIndex:e=>{y(n=>{n.activeIndex=e,n.mouseInteractionsDisabled=!0})},setMouseInteractionsDisabled:e=>{y(n=>{n.mouseInteractionsDisabled=e})}};function N(){const e=M(),n=D(e),{isFannyPackEnabled:a}=w(),u=d(S=>S.isActive),g=Q(e,"1422501431");v.useEffect(()=>{a&&n&&(g?l.setCurrentAccountV2(n):l.setCurrentAccount(n),l.init())},[n,g,a]),v.useEffect(()=>x(e).addAction({key:"toggleChatSearch",action:()=>{u?i.logClose("shortcut"):(i.setSessionId(b()),i.logOpen("shortcut")),F.setIsActive(!u)},actionMessageDescriptor:j({id:"oqatXV",defaultMessage:"Search chats"}),group:O.Core,keyboardBinding:[L.Mod,"k"]}),[e,u])}function V(){F.setIsActive(!0),i.setSessionId(b()),i.logOpen("button")}const U=Object.freeze(Object.defineProperty({__proto__:null,openFannyPackSearch:V,useInitializeFannyPackHandler:N},Symbol.toStringTag,{value:"Module"}));export{F,i as a,R as b,N as c,U as d,d as u};
//# sourceMappingURL=fvtv66gbcyo8d83l.js.map
