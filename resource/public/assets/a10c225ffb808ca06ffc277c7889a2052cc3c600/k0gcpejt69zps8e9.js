var E=Object.defineProperty,A=Object.defineProperties;var v=Object.getOwnPropertyDescriptors;var k=Object.getOwnPropertySymbols;var D=Object.prototype.hasOwnProperty,R=Object.prototype.propertyIsEnumerable;var g=(t,a,s)=>a in t?E(t,a,{enumerable:!0,configurable:!0,writable:!0,value:s}):t[a]=s,c=(t,a)=>{for(var s in a||(a={}))D.call(a,s)&&g(t,s,a[s]);if(k)for(var s of k(a))R.call(a,s)&&g(t,s,a[s]);return t},h=(t,a)=>A(t,v(a));import{b as S,r as U,j as e,ak as B,d as I,M as r,G as X}from"./jj85rqzpbnvv3emr.js";import{f as K,nL as z,o5 as F,o6 as G,hZ as C,ph as W,pi as H,pj as Q,es as Z,E as q,B as l,i5 as w,T as J}from"./lef5ym39glv4981l.js";import{dQ as V}from"./mclphevd122040jw.js";import{W as j}from"./i5w9a1ap4yrxpqjj.js";import"./hqbuxjfjvu1puiaw.js";import"./jxokrjy8ycftw0wv.js";import"./jk4cx3iywxazx01l.js";import"./hc8beflnn681x6ow.js";import"./ef92qx749w9klz4o.js";import"./kxedrjbxv2qblujd.js";import"./mw2u7timj0qnsnvj.js";import"./dvqe6kc43fkjsavv.js";import"./nk7ydxm8ptxusvbt.js";import"./k059n59kmbyb9lsl.js";import"./ojb4d4bxj44fs0l8.js";import"./oz589d7sqtxcbljf.js";const n=I({pageTitle:{id:"wham.slackLinkPage.title",defaultMessage:"Install Codex to Slack"},connectSlack:{id:"wham.slackLinkPage.connectSlack",defaultMessage:"Add to Slack"},disconnectSlack:{id:"wham.slackLinkPage.disconnectSlack",defaultMessage:"Uninstall Slack app"},connectedAs:{id:"wham.slackLinkPage.connectedAs",defaultMessage:"App installed to <b>{account}</b>"},installTargetUnknown:{id:"wham.slackLinkPage.installTargetUnknown",defaultMessage:"Unknown"},retry:{id:"wham.slackLinkPage.retry",defaultMessage:"Failed to load Slack connection"},retryTooltip:{id:"wham.slackLinkPage.retryTooltip",defaultMessage:"Click to retry"}});function Y({refetch:t}){const a=S();return e.jsx(J,{label:a.formatMessage(n.retryTooltip),children:e.jsx(l,{type:"button",color:"secondary",size:"small",className:"border-token-border-default flex w-fit items-center gap-1.5 rounded-full! border",onClick:t,children:e.jsxs("div",{className:"flex items-center gap-1.5",children:[e.jsx(w,{"aria-hidden":!0,className:"icon-sm"}),e.jsx(r,c({},n.retry))]})})})}function $(){var m,p,u,x,f;const t=S(),a=K(),s=z(),{eligible:N}=V(),i=U.useCallback(()=>{F({redirectUri:G(),connectorPlatformParams:{connectorId:H,name:"Slack",actionNames:null,oauthClientId:W,oauthClientScopes:null},redirectTo:"/codex/slack",intl:t,toaster:a,productSku:C.CODEX,openPopup:s})},[t,s,a]),{isConnected:P,isLoading:d,error:T,refetch:b,openConnectorModal:O,handleDisconnect:y,link:o,hasConnectorMetadata:M}=Q(Z.SLACK_CODEX_BOT_CONNECTOR,"slack","/codex/slack",C.CODEX,i,i);if(N)return e.jsx(B,{to:"/codex"});if(!M)return e.jsx(j,{topPadding:!0,showSidebar:!1,children:e.jsx("div",{className:"mx-auto flex h-full max-w-screen-sm flex-1 items-center justify-center",children:e.jsx(q,{className:"h-6 w-6"})})});const _=(f=(x=(u=(m=o==null?void 0:o.owner_profile)==null?void 0:m.nickname)!=null?u:(p=o==null?void 0:o.owner_profile)==null?void 0:p.name)!=null?x:o==null?void 0:o.name)!=null?f:t.formatMessage(n.installTargetUnknown);return e.jsx(j,{topPadding:!0,showSidebar:!1,children:e.jsxs("div",{className:"mx-auto flex h-full max-w-screen-sm flex-1 flex-col gap-6 ps-4 pe-12",children:[e.jsx("h1",{className:"text-token-text-primary text-2xl font-semibold",children:e.jsx(r,c({},n.pageTitle))}),T?e.jsx(Y,{refetch:b}):P?e.jsxs("div",{className:"flex flex-col gap-3",children:[e.jsx("p",{className:"text-token-text-primary text-sm",children:e.jsx(r,h(c({},n.connectedAs),{values:{b:L=>e.jsx("b",{children:L}),account:_}}))}),e.jsx(l,{color:"danger-outline",className:"w-fit",loading:d,onClick:y,children:e.jsx(r,c({},n.disconnectSlack))})]}):e.jsx(l,{color:"primary",className:"w-fit",icon:w,loading:d,onClick:O,children:e.jsx(r,c({},n.connectSlack))})]})})}const ge=()=>[{title:"Codex"}],he=X(function(){return e.jsx($,{})});export{he as default,ge as meta};
//# sourceMappingURL=k0gcpejt69zps8e9.js.map
