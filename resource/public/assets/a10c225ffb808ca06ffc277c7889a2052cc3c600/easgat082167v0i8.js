var xe=Object.defineProperty;var ze=Object.getOwnPropertySymbols;var me=Object.prototype.hasOwnProperty,je=Object.prototype.propertyIsEnumerable;var Ue=(e,s,r)=>s in e?xe(e,s,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[s]=r,q=(e,s)=>{for(var r in s||(s={}))me.call(s,r)&&Ue(e,r,s[r]);if(ze)for(var r of ze(s))je.call(s,r)&&Ue(e,r,s[r]);return e};var p=(e,s,r)=>Ue(e,typeof s!="symbol"?s+"":s,r);import{g7 as x,dF as ke,dd as De}from"./lef5ym39glv4981l.js";import{l6 as f,l7 as F,l8 as K,l9 as j,la as a,lb as U,lc as z,ld as k,le as M,jI as Me,n as $e,lf as Be,lg as Je,lh as Ke,li as Qe,lj as Te}from"./mclphevd122040jw.js";import"./jj85rqzpbnvv3emr.js";class J{}p(J,"interfaceName","web.bridge.AgentHandler"),p(J,"interfaceVersion",0);(e=>{let s;(c=>{c.VERSION_INFO=[{version:0,size:16}],c.CURRENT_VERSION=c.VERSION_INFO[c.VERSION_INFO.length-1];function O(S){return f.bytes(c.CURRENT_VERSION.size).add(f.forString(S.agentid))}c.measure=O;function E(S,w){S.setString(0,w.agentid)}c.encode=E;function V(S,w){return{agentid:F(S.getString(0))}}c.decode=V})(s=e.AgentHandler_TryOpenAgentViewer_Params||(e.AgentHandler_TryOpenAgentViewer_Params={}));let r;(c=>{c.VERSION_INFO=[{version:0,size:16}],c.CURRENT_VERSION=c.VERSION_INFO[c.VERSION_INFO.length-1];function O(S){return f.bytes(c.CURRENT_VERSION.size)}c.measure=O;function E(S,w){let T=0;w.response&&(T|=1),S.setU8(0,T)}c.encode=E;function V(S,w){return{response:(S.getU8(0)&1)!=0}}c.decode=V})(r=e.AgentHandler_TryOpenAgentViewer_ResponseParams||(e.AgentHandler_TryOpenAgentViewer_ResponseParams={}));let R;(c=>{c.VERSION_INFO=[{version:0,size:8}],c.CURRENT_VERSION=c.VERSION_INFO[c.VERSION_INFO.length-1];function O(S){return f.bytes(c.CURRENT_VERSION.size)}c.measure=O;function E(S,w){}c.encode=E;function V(S,w){return{}}c.decode=V})(R=e.AgentHandler_GetClientID_Params||(e.AgentHandler_GetClientID_Params={}));let t;(c=>{c.VERSION_INFO=[{version:0,size:16}],c.CURRENT_VERSION=c.VERSION_INFO[c.VERSION_INFO.length-1];function O(S){return f.bytes(c.CURRENT_VERSION.size).add(f.forString(S.clientid))}c.measure=O;function E(S,w){S.setString(0,w.clientid)}c.encode=E;function V(S,w){return{clientid:F(S.getString(0))}}c.decode=V})(t=e.AgentHandler_GetClientID_ResponseParams||(e.AgentHandler_GetClientID_ResponseParams={}));let n;(c=>{c.VERSION_INFO=[{version:0,size:16}],c.CURRENT_VERSION=c.VERSION_INFO[c.VERSION_INFO.length-1];function O(S){return f.bytes(c.CURRENT_VERSION.size).add(f.forString(S.agentid))}c.measure=O;function E(S,w){S.setString(0,w.agentid)}c.encode=E;function V(S,w){return{agentid:F(S.getString(0))}}c.decode=V})(n=e.AgentHandler_UserSentMessageInAgentConversation_Params||(e.AgentHandler_UserSentMessageInAgentConversation_Params={}));let I;(c=>{c.VERSION_INFO=[{version:0,size:16}],c.CURRENT_VERSION=c.VERSION_INFO[c.VERSION_INFO.length-1];function O(S){return f.bytes(c.CURRENT_VERSION.size).add(f.forString(S.agentid))}c.measure=O;function E(S,w){S.setString(0,w.agentid)}c.encode=E;function V(S,w){return{agentid:F(S.getString(0))}}c.decode=V})(I=e.AgentHandler_UserStoppedAgentConversation_Params||(e.AgentHandler_UserStoppedAgentConversation_Params={}));let d;(c=>{c.VERSION_INFO=[{version:0,size:24}],c.CURRENT_VERSION=c.VERSION_INFO[c.VERSION_INFO.length-1];function O(S){return f.bytes(c.CURRENT_VERSION.size).add(f.forString(S.agentid)).add(f.forStringArray(S.urls))}c.measure=O;function E(S,w){S.setString(0,w.agentid),S.setStringArray(8,w.urls)}c.encode=E;function V(S,w){return{agentid:F(S.getString(0)),urls:F(K(S.getStringArray(8)))}}c.decode=V})(d=e.AgentHandler_OpenAgentTabs_Params||(e.AgentHandler_OpenAgentTabs_Params={}));class i{constructor(O){p(this,"_endpoint");p(this,"_version");this._endpoint=new j(O.endpointState,!0),this._version=0}static create(){const[O,E]=a.createChannel(e);return[new i(O),E]}static createToBrowser(){const[O,E]=this.create();return Mojo.bindInterface(e.interfaceName,E.pipe.rawHandle),O}async tryOpenAgentViewer(O){const E={agentid:O};return(await this._endpoint.sendAndAwaitResponse(U.encode(0,z.None,s,E))).decode(r).response}async getClientID(){const O={};return(await this._endpoint.sendAndAwaitResponse(U.encode(1,z.None,R,O))).decode(t).clientid}userSentMessageInAgentConversation(O){const E={agentid:O};this._endpoint.send(U.encode(2,z.None,n,E))}userStoppedAgentConversation(O){const E={agentid:O};this._endpoint.send(U.encode(3,z.None,I,E))}openAgentTabs(O,E){const V={agentid:O,urls:E};this._endpoint.send(U.encode(4,z.None,d,V))}}e.Proxy=i;class o extends k{constructor(){super(e);p(this,"onDisconnect")}bind(E,V){this.addReceiver(V,async(S,w)=>{switch(S.header.ordinal){case 0:{const T=S.decode(s),$=E.tryOpenAgentViewer(T.agentid),B=w.createResponder(r,0,S.header.requestID),H=await $;B({response:H});break}case 1:{S.decode(R);const T=E.getClientID(),$=w.createResponder(t,1,S.header.requestID),B=await T;$({clientid:B});break}case 2:{const T=S.decode(n);E.userSentMessageInAgentConversation(T.agentid);break}case 3:{const T=S.decode(I);E.userStoppedAgentConversation(T.agentid);break}case 4:{const T=S.decode(d);E.openAgentTabs(T.agentid,T.urls);break}default:S.header.expectsResponse&&w.sendUnimplementedResponse(S.header.requestID,S.header.ordinal)}return Promise.resolve()},()=>{this.onDisconnect&&this.onDisconnect(E)})}createRemote(E){const[V,S]=a.createChannel(e);return this.bind(E,S),V}}e.Dispatcher=o})(J||(J={}));var C;(e=>{e.VERSION_INFO=[{version:0,size:32}],e.CURRENT_VERSION=e.VERSION_INFO[e.VERSION_INFO.length-1];function s(t){return f.bytes(e.CURRENT_VERSION.size).add(f.forString(t.accessToken)).add(f.forString(t.idToken))}e.measure=s;function r(t,n){t.setString(0,n.accessToken),t.setString(8,n.idToken),t.setF64(16,n.expiresTimestampMsSince1970)}e.encode=r;function R(t,n){return{accessToken:F(t.getString(0)),idToken:F(t.getString(8)),expiresTimestampMsSince1970:F(t.getF64(16))}}e.decode=R})(C||(C={}));var fe;(e=>{function s(R){if(R==="justLoggedInAccessToken")return 0;if(R==="reloadPageIfLoggedOut")return 1;if(R==="fullTokenToSessionConversion")return 2;throw new M}e.encode=s;function r(R){switch(R){case 0:return"justLoggedInAccessToken";case 1:return"reloadPageIfLoggedOut";case 2:return"fullTokenToSessionConversion";default:return"justLoggedInAccessToken"}}e.decode=r})(fe||(fe={}));class L{}p(L,"interfaceName","web.bridge.AuthHandler"),p(L,"interfaceVersion",0);(e=>{let s;(n=>{n.VERSION_INFO=[{version:0,size:8}],n.CURRENT_VERSION=n.VERSION_INFO[n.VERSION_INFO.length-1];function I(o){return f.bytes(n.CURRENT_VERSION.size)}n.measure=I;function d(o,c){}n.encode=d;function i(o,c){return{}}n.decode=i})(s=e.AuthHandler_HandleMissingSessionAuth_Params||(e.AuthHandler_HandleMissingSessionAuth_Params={}));let r;(n=>{n.VERSION_INFO=[{version:0,size:8}],n.CURRENT_VERSION=n.VERSION_INFO[n.VERSION_INFO.length-1];function I(o){return f.bytes(n.CURRENT_VERSION.size)}n.measure=I;function d(o,c){}n.encode=d;function i(o,c){return{}}n.decode=i})(r=e.AuthHandler_RecordAvailableSessionAuth_Params||(e.AuthHandler_RecordAvailableSessionAuth_Params={}));class R{constructor(I){p(this,"_endpoint");p(this,"_version");this._endpoint=new j(I.endpointState,!0),this._version=0}static create(){const[I,d]=a.createChannel(e);return[new R(I),d]}static createToBrowser(){const[I,d]=this.create();return Mojo.bindInterface(e.interfaceName,d.pipe.rawHandle),I}handleMissingSessionAuth(){const I={};this._endpoint.send(U.encode(0,z.None,s,I))}recordAvailableSessionAuth(){const I={};this._endpoint.send(U.encode(1,z.None,r,I))}}e.Proxy=R;class t extends k{constructor(){super(e);p(this,"onDisconnect")}bind(d,i){this.addReceiver(i,async(o,c)=>{switch(o.header.ordinal){case 0:{o.decode(s),d.handleMissingSessionAuth();break}case 1:{o.decode(r),d.recordAvailableSessionAuth();break}default:o.header.expectsResponse&&c.sendUnimplementedResponse(o.header.requestID,o.header.ordinal)}return Promise.resolve()},()=>{this.onDisconnect&&this.onDisconnect(d)})}createRemote(d){const[i,o]=a.createChannel(e);return this.bind(d,o),i}}e.Dispatcher=t})(L||(L={}));class v{}p(v,"interfaceName","web.bridge.AuthStateController"),p(v,"interfaceVersion",0);(e=>{let s;(t=>{t.VERSION_INFO=[{version:0,size:24}],t.CURRENT_VERSION=t.VERSION_INFO[t.VERSION_INFO.length-1];function n(i){return f.bytes(t.CURRENT_VERSION.size).add(f.forObject(C,i.authToken))}t.measure=n;function I(i,o){i.setObjectIndirect(C,0,o.authToken),i.setEnumValue(fe,8,o.behavior)}t.encode=I;function d(i,o){return{authToken:F(i.getObjectIndirect(C,0)),behavior:F(i.getEnumValue(fe,8))}}t.decode=d})(s=e.AuthStateController_RefreshSessionContext_Params||(e.AuthStateController_RefreshSessionContext_Params={}));class r{constructor(n){p(this,"_endpoint");p(this,"_version");this._endpoint=new j(n.endpointState,!0),this._version=0}static create(){const[n,I]=a.createChannel(e);return[new r(n),I]}static createToBrowser(){const[n,I]=this.create();return Mojo.bindInterface(e.interfaceName,I.pipe.rawHandle),n}refreshSessionContext(n,I){const d={authToken:n,behavior:I};this._endpoint.send(U.encode(0,z.None,s,d))}}e.Proxy=r;class R extends k{constructor(){super(e);p(this,"onDisconnect")}bind(I,d){this.addReceiver(d,async(i,o)=>{switch(i.header.ordinal){case 0:{const c=i.decode(s);I.refreshSessionContext(c.authToken,c.behavior);break}default:i.header.expectsResponse&&o.sendUnimplementedResponse(i.header.requestID,i.header.ordinal)}return Promise.resolve()},()=>{this.onDisconnect&&this.onDisconnect(I)})}createRemote(I){const[d,i]=a.createChannel(e);return this.bind(I,i),d}}e.Dispatcher=R})(v||(v={}));class G{}p(G,"interfaceName","web.bridge.ConversationArchiveController"),p(G,"interfaceVersion",0);(e=>{let s;(n=>{n.VERSION_INFO=[{version:0,size:16}],n.CURRENT_VERSION=n.VERSION_INFO[n.VERSION_INFO.length-1];function I(o){return f.bytes(n.CURRENT_VERSION.size).add(f.forString(o.conversationId))}n.measure=I;function d(o,c){o.setString(0,c.conversationId)}n.encode=d;function i(o,c){return{conversationId:F(o.getString(0))}}n.decode=i})(s=e.ConversationArchiveController_EnqueueConversationArchive_Params||(e.ConversationArchiveController_EnqueueConversationArchive_Params={}));let r;(n=>{n.VERSION_INFO=[{version:0,size:16}],n.CURRENT_VERSION=n.VERSION_INFO[n.VERSION_INFO.length-1];function I(o){return f.bytes(n.CURRENT_VERSION.size).add(f.forString(o.conversationId))}n.measure=I;function d(o,c){o.setString(0,c.conversationId)}n.encode=d;function i(o,c){return{conversationId:F(o.getString(0))}}n.decode=i})(r=e.ConversationArchiveController_CancelConversationArchive_Params||(e.ConversationArchiveController_CancelConversationArchive_Params={}));class R{constructor(I){p(this,"_endpoint");p(this,"_version");this._endpoint=new j(I.endpointState,!0),this._version=0}static create(){const[I,d]=a.createChannel(e);return[new R(I),d]}static createToBrowser(){const[I,d]=this.create();return Mojo.bindInterface(e.interfaceName,d.pipe.rawHandle),I}enqueueConversationArchive(I){const d={conversationId:I};this._endpoint.send(U.encode(0,z.None,s,d))}cancelConversationArchive(I){const d={conversationId:I};this._endpoint.send(U.encode(1,z.None,r,d))}}e.Proxy=R;class t extends k{constructor(){super(e);p(this,"onDisconnect")}bind(d,i){this.addReceiver(i,async(o,c)=>{switch(o.header.ordinal){case 0:{const O=o.decode(s);d.enqueueConversationArchive(O.conversationId);break}case 1:{const O=o.decode(r);d.cancelConversationArchive(O.conversationId);break}default:o.header.expectsResponse&&c.sendUnimplementedResponse(o.header.requestID,o.header.ordinal)}return Promise.resolve()},()=>{this.onDisconnect&&this.onDisconnect(d)})}createRemote(d){const[i,o]=a.createChannel(e);return this.bind(d,o),i}}e.Dispatcher=t})(G||(G={}));var ee;(e=>{e.VERSION_INFO=[{version:0,size:32}],e.CURRENT_VERSION=e.VERSION_INFO[e.VERSION_INFO.length-1];function s(t){return f.bytes(e.CURRENT_VERSION.size).add(f.forString(t.conduitToken))}e.measure=s;function r(t,n){t.setEnumValue(Se,0,n.prepareState),t.setF64(8,n.lastPrepareTimestampMsSince1970),t.setString(16,n.conduitToken)}e.encode=r;function R(t,n){return{prepareState:F(t.getEnumValue(Se,0)),lastPrepareTimestampMsSince1970:F(t.getF64(8)),conduitToken:F(t.getString(16))}}e.decode=R})(ee||(ee={}));var te;(e=>{e.VERSION_INFO=[{version:0,size:16}],e.CURRENT_VERSION=e.VERSION_INFO[e.VERSION_INFO.length-1];function s(t){return f.bytes(e.CURRENT_VERSION.size)}e.measure=s;function r(t,n){t.setEnumValue(he,0,n.selectedTab)}e.encode=r;function R(t,n){return{selectedTab:F(t.getEnumValue(he,0))}}e.decode=R})(te||(te={}));var ne;(e=>{e.VERSION_INFO=[{version:0,size:56}],e.CURRENT_VERSION=e.VERSION_INFO[e.VERSION_INFO.length-1];function s(t){return f.bytes(e.CURRENT_VERSION.size).add(f.forString(t.id)).add(f.forString(t.name)).add(f.forString(t.mimeType))}e.measure=s;function r(t,n){let I=0;t.setString(0,n.id),t.setI64(8,n.size),t.setString(16,n.name),t.setString(24,n.mimeType),n.width!==null&&n.width!==void 0&&(I|=1,t.setI32(36,n.width)),n.height!==null&&n.height!==void 0&&(I|=2,t.setI32(40,n.height)),n.fileTokenSize!==null&&n.fileTokenSize!==void 0&&(I|=4,t.setI32(44,n.fileTokenSize)),t.setU8(32,I)}e.encode=r;function R(t,n){const I=t.getU8(32),d=(I&1)!=0,i=(I&2)!=0,o=(I&4)!=0;return q(q(q({id:F(t.getString(0)),size:F(t.getI64(8)),name:F(t.getString(16)),mimeType:F(t.getString(24))},d?{width:F(t.getI32(36))}:{}),i?{height:F(t.getI32(40))}:{}),o?{fileTokenSize:F(t.getI32(44))}:{})}e.decode=R})(ne||(ne={}));var ce;(e=>{e.VERSION_INFO=[{version:0,size:40},{version:1,size:48},{version:2,size:56}],e.CURRENT_VERSION=e.VERSION_INFO[e.VERSION_INFO.length-1];function s(t){var n,I;return f.bytes(e.CURRENT_VERSION.size).add(f.forString(t.id)).add(f.forString(t.url)).add(f.forString(t.title)).add(f.forString((n=t.base64favicon)!=null?n:null)).add(f.forString((I=t.selection)!=null?I:null))}e.measure=s;function r(t,n){var d,i;let I=0;t.setString(0,n.id),t.setString(8,n.url),t.setString(16,n.title),t.setString(24,(d=n.base64favicon)!=null?d:null),t.setString(32,(i=n.selection)!=null?i:null),n.blocked!==null&&n.blocked!==void 0&&(I|=1,n.blocked&&(I|=2)),t.setU8(40,I)}e.encode=r;function R(t,n){const I=t.getString(24),d=n>=1?t.getString(32):null,i=n>=2?t.getU8(40):0,o=(i&1)!=0;return q(q(q({id:F(t.getString(0)),url:F(t.getString(8)),title:F(t.getString(16))},I!==null?{base64favicon:I}:{}),d!==null?{selection:d}:{}),o?{blocked:(i&2)!=0}:{})}e.decode=R})(ce||(ce={}));var Ee;(e=>{function s(R){if(R==="mainPage")return 0;if(R==="sidebar")return 1;throw new M}e.encode=s;function r(R){switch(R){case 0:return"mainPage";case 1:return"sidebar";default:throw new M}}e.decode=r})(Ee||(Ee={}));var Se;(e=>{function s(R){if(R==="none")return 0;if(R==="sent")return 1;if(R==="success")return 2;if(R==="failure")return 3;throw new M}e.encode=s;function r(R){switch(R){case 0:return"none";case 1:return"sent";case 2:return"success";case 3:return"failure";default:return"none"}}e.decode=r})(Se||(Se={}));var he;(e=>{function s(R){if(R==="answer")return 0;if(R==="web")return 1;if(R==="images")return 2;if(R==="videos")return 3;throw new M}e.encode=s;function r(R){switch(R){case 0:return"answer";case 1:return"web";case 2:return"images";case 3:return"videos";default:return"answer"}}e.decode=r})(he||(he={}));var Ve;(e=>{function s(R){if(R==="default_")return 0;if(R==="blue")return 1;if(R==="green")return 2;if(R==="yellow")return 3;if(R==="purple")return 4;if(R==="pink")return 5;if(R==="orange")return 6;if(R==="black")return 7;throw new M}e.encode=s;function r(R){switch(R){case 0:return"default_";case 1:return"blue";case 2:return"green";case 3:return"yellow";case 4:return"purple";case 5:return"pink";case 6:return"orange";case 7:return"black";default:return"default_"}}e.decode=r})(Ve||(Ve={}));var ge;(e=>{function s(R){if(R==="none")return 0;if(R==="startTakeoverFromAgent")return 1;if(R==="endTakeoverFromAgent")return 2;if(R==="stopAgent")return 3;throw new M}e.encode=s;function r(R){switch(R){case 0:return"none";case 1:return"startTakeoverFromAgent";case 2:return"endTakeoverFromAgent";case 3:return"stopAgent";default:return"none"}}e.decode=r})(ge||(ge={}));class A{}p(A,"interfaceName","web.bridge.ConversationController"),p(A,"interfaceVersion",2);(e=>{let s;(u=>{u.VERSION_INFO=[{version:0,size:16}],u.CURRENT_VERSION=u.VERSION_INFO[u.VERSION_INFO.length-1];function g(N){return f.bytes(u.CURRENT_VERSION.size)}u.measure=g;function h(N,b){N.setEnumValue(Ee,0,b.windowStyle)}u.encode=h;function _(N,b){return{windowStyle:F(N.getEnumValue(Ee,0))}}u.decode=_})(s=e.ConversationController_SetWindowStyle_Params||(e.ConversationController_SetWindowStyle_Params={}));let r;(u=>{u.VERSION_INFO=[{version:0,size:16}],u.CURRENT_VERSION=u.VERSION_INFO[u.VERSION_INFO.length-1];function g(N){return f.bytes(u.CURRENT_VERSION.size).add(f.forString(N.modelSlug))}u.measure=g;function h(N,b){N.setString(0,b.modelSlug)}u.encode=h;function _(N,b){return{modelSlug:F(N.getString(0))}}u.decode=_})(r=e.ConversationController_SetModel_Params||(e.ConversationController_SetModel_Params={}));let R;(u=>{u.VERSION_INFO=[{version:0,size:8}],u.CURRENT_VERSION=u.VERSION_INFO[u.VERSION_INFO.length-1];function g(N){return f.bytes(u.CURRENT_VERSION.size)}u.measure=g;function h(N,b){}u.encode=h;function _(N,b){return{}}u.decode=_})(R=e.ConversationController_NewConversation_Params||(e.ConversationController_NewConversation_Params={}));let t;(u=>{u.VERSION_INFO=[{version:0,size:16}],u.CURRENT_VERSION=u.VERSION_INFO[u.VERSION_INFO.length-1];function g(N){return f.bytes(u.CURRENT_VERSION.size).add(f.forString(N.remoteConversationId))}u.measure=g;function h(N,b){N.setString(0,b.remoteConversationId)}u.encode=h;function _(N,b){return{remoteConversationId:F(N.getString(0))}}u.decode=_})(t=e.ConversationController_LoadConversation_Params||(e.ConversationController_LoadConversation_Params={}));let n;(u=>{u.VERSION_INFO=[{version:0,size:32}],u.CURRENT_VERSION=u.VERSION_INFO[u.VERSION_INFO.length-1];function g(N){return f.bytes(u.CURRENT_VERSION.size).add(f.forString(N.prompt)).add(f.forStringArray(N.systemHints)).add(f.forString(N.modelSlug))}u.measure=g;function h(N,b){N.setString(0,b.prompt),N.setStringArray(8,b.systemHints),N.setString(16,b.modelSlug)}u.encode=h;function _(N,b){return{prompt:F(N.getString(0)),systemHints:F(K(N.getStringArray(8))),modelSlug:F(N.getString(16))}}u.decode=_})(n=e.ConversationController_RequestCompletion_Params||(e.ConversationController_RequestCompletion_Params={}));let I;(u=>{u.VERSION_INFO=[{version:0,size:24}],u.CURRENT_VERSION=u.VERSION_INFO[u.VERSION_INFO.length-1];function g(N){var b,y;return f.bytes(u.CURRENT_VERSION.size).add(f.forString((b=N.userMessage)!=null?b:null)).add(f.forString((y=N.targetedReply)!=null?y:null))}u.measure=g;function h(N,b){var y,D;N.setString(0,(y=b.userMessage)!=null?y:null),N.setString(8,(D=b.targetedReply)!=null?D:null)}u.encode=h;function _(N,b){const y=N.getString(0),D=N.getString(8);return q(q({},y!==null?{userMessage:y}:{}),D!==null?{targetedReply:D}:{})}u.decode=_})(I=e.ConversationController_PopulatePrompt_Params||(e.ConversationController_PopulatePrompt_Params={}));let d;(u=>{u.VERSION_INFO=[{version:0,size:32},{version:1,size:40},{version:2,size:48}],u.CURRENT_VERSION=u.VERSION_INFO[u.VERSION_INFO.length-1];function g(N){var b,y;return f.bytes(u.CURRENT_VERSION.size).add(f.forString(N.url)).add(f.forString(N.title)).add(f.forString((b=N.base64favicon)!=null?b:null)).add(f.forString((y=N.selection)!=null?y:null))}u.measure=g;function h(N,b){var D,P;let y=0;N.setString(0,b.url),N.setString(8,b.title),N.setString(16,(D=b.base64favicon)!=null?D:null),N.setString(24,(P=b.selection)!=null?P:null),b.blocked!==null&&b.blocked!==void 0&&(y|=1,b.blocked&&(y|=2)),N.setU8(32,y)}u.encode=h;function _(N,b){const y=N.getString(16),D=b>=1?N.getString(24):null,P=b>=2?N.getU8(32):0,ae=(P&1)!=0;return q(q(q({url:F(N.getString(0)),title:F(N.getString(8))},y!==null?{base64favicon:y}:{}),D!==null?{selection:D}:{}),ae?{blocked:(P&2)!=0}:{})}u.decode=_})(d=e.ConversationController_UpdateContext_Params||(e.ConversationController_UpdateContext_Params={}));let i;(u=>{u.VERSION_INFO=[{version:0,size:16}],u.CURRENT_VERSION=u.VERSION_INFO[u.VERSION_INFO.length-1];function g(N){return f.bytes(u.CURRENT_VERSION.size).add(f.forObject(ee,N.details))}u.measure=g;function h(N,b){N.setObjectIndirect(ee,0,b.details)}u.encode=h;function _(N,b){return{details:F(N.getObjectIndirect(ee,0))}}u.decode=_})(i=e.ConversationController_PrepareConversation_Params||(e.ConversationController_PrepareConversation_Params={}));let o;(u=>{u.VERSION_INFO=[{version:0,size:16}],u.CURRENT_VERSION=u.VERSION_INFO[u.VERSION_INFO.length-1];function g(N){return f.bytes(u.CURRENT_VERSION.size).add(f.forObject(te,N.options))}u.measure=g;function h(N,b){N.setObjectIndirect(te,0,b.options)}u.encode=h;function _(N,b){return{options:F(N.getObjectIndirect(te,0))}}u.decode=_})(o=e.ConversationController_SetSuperWidgetOptions_Params||(e.ConversationController_SetSuperWidgetOptions_Params={}));let c;(u=>{u.VERSION_INFO=[{version:0,size:16}],u.CURRENT_VERSION=u.VERSION_INFO[u.VERSION_INFO.length-1];function g(N){return f.bytes(u.CURRENT_VERSION.size).add(f.forObjectArray(ne,N.attachments))}u.measure=g;function h(N,b){N.setObjectArray(ne,0,b.attachments)}u.encode=h;function _(N,b){return{attachments:F(K(N.getObjectArray(ne,0)))}}u.decode=_})(c=e.ConversationController_SetAttachments_Params||(e.ConversationController_SetAttachments_Params={}));let O;(u=>{u.VERSION_INFO=[{version:0,size:16}],u.CURRENT_VERSION=u.VERSION_INFO[u.VERSION_INFO.length-1];function g(N){return f.bytes(u.CURRENT_VERSION.size).add(f.forString(N.to))}u.measure=g;function h(N,b){N.setString(0,b.to)}u.encode=h;function _(N,b){return{to:F(N.getString(0))}}u.decode=_})(O=e.ConversationController_Navigate_Params||(e.ConversationController_Navigate_Params={}));let E;(u=>{u.VERSION_INFO=[{version:0,size:16}],u.CURRENT_VERSION=u.VERSION_INFO[u.VERSION_INFO.length-1];function g(N){return f.bytes(u.CURRENT_VERSION.size).add(f.forObject(Y,N.whisperContent))}u.measure=g;function h(N,b){N.setObjectIndirect(Y,0,b.whisperContent)}u.encode=h;function _(N,b){return{whisperContent:F(N.getObjectIndirect(Y,0))}}u.decode=_})(E=e.ConversationController_SetWhisperContent_Params||(e.ConversationController_SetWhisperContent_Params={}));let V;(u=>{u.VERSION_INFO=[{version:0,size:16}],u.CURRENT_VERSION=u.VERSION_INFO[u.VERSION_INFO.length-1];function g(N){return f.bytes(u.CURRENT_VERSION.size).add(f.forObjectArray(ce,N.tabs))}u.measure=g;function h(N,b){N.setObjectArray(ce,0,b.tabs)}u.encode=h;function _(N,b){return{tabs:F(K(N.getObjectArray(ce,0)))}}u.decode=_})(V=e.ConversationController_SetTabContext_Params||(e.ConversationController_SetTabContext_Params={}));let S;(u=>{u.VERSION_INFO=[{version:0,size:16}],u.CURRENT_VERSION=u.VERSION_INFO[u.VERSION_INFO.length-1];function g(N){return f.bytes(u.CURRENT_VERSION.size).add(f.forString(N.origin))}u.measure=g;function h(N,b){N.setString(0,b.origin)}u.encode=h;function _(N,b){return{origin:F(N.getString(0))}}u.decode=_})(S=e.ConversationController_SetPromptOrigin_Params||(e.ConversationController_SetPromptOrigin_Params={}));let w;(u=>{u.VERSION_INFO=[{version:0,size:8}],u.CURRENT_VERSION=u.VERSION_INFO[u.VERSION_INFO.length-1];function g(N){return f.bytes(u.CURRENT_VERSION.size)}u.measure=g;function h(N,b){}u.encode=h;function _(N,b){return{}}u.decode=_})(w=e.ConversationController_CloseNavigationSidebar_Params||(e.ConversationController_CloseNavigationSidebar_Params={}));let T;(u=>{u.VERSION_INFO=[{version:0,size:16}],u.CURRENT_VERSION=u.VERSION_INFO[u.VERSION_INFO.length-1];function g(N){return f.bytes(u.CURRENT_VERSION.size)}u.measure=g;function h(N,b){N.setEnumValue(Ve,0,b.theme)}u.encode=h;function _(N,b){return{theme:F(N.getEnumValue(Ve,0))}}u.decode=_})(T=e.ConversationController_SetChatTheme_Params||(e.ConversationController_SetChatTheme_Params={}));let $;(u=>{u.VERSION_INFO=[{version:0,size:8}],u.CURRENT_VERSION=u.VERSION_INFO[u.VERSION_INFO.length-1];function g(N){return f.bytes(u.CURRENT_VERSION.size)}u.measure=g;function h(N,b){}u.encode=h;function _(N,b){return{}}u.decode=_})($=e.ConversationController_ShowSearch_Params||(e.ConversationController_ShowSearch_Params={}));let B;(u=>{u.VERSION_INFO=[{version:0,size:24}],u.CURRENT_VERSION=u.VERSION_INFO[u.VERSION_INFO.length-1];function g(N){return f.bytes(u.CURRENT_VERSION.size).add(f.forString(N.query)).add(f.forString(N.navlinksEvent))}u.measure=g;function h(N,b){N.setString(0,b.query),N.setString(8,b.navlinksEvent)}u.encode=h;function _(N,b){return{query:F(N.getString(0)),navlinksEvent:F(N.getString(8))}}u.decode=_})(B=e.ConversationController_PopulateNavlinks_Params||(e.ConversationController_PopulateNavlinks_Params={}));let H;(u=>{u.VERSION_INFO=[{version:0,size:16}],u.CURRENT_VERSION=u.VERSION_INFO[u.VERSION_INFO.length-1];function g(N){return f.bytes(u.CURRENT_VERSION.size)}u.measure=g;function h(N,b){N.setEnumValue(ge,0,b.request)}u.encode=h;function _(N,b){return{request:F(N.getEnumValue(ge,0))}}u.decode=_})(H=e.ConversationController_HandleAgentRequest_Params||(e.ConversationController_HandleAgentRequest_Params={}));let we;(u=>{u.VERSION_INFO=[{version:0,size:32}],u.CURRENT_VERSION=u.VERSION_INFO[u.VERSION_INFO.length-1];function g(N){return f.bytes(u.CURRENT_VERSION.size).add(f.forString(N.name)).add(f.forNumericArray(Uint8Array,N.bytes)).add(f.forString(N.mimeType))}u.measure=g;function h(N,b){N.setString(0,b.name),N.setNumericArray(Uint8Array,8,b.bytes),N.setString(16,b.mimeType)}u.encode=h;function _(N,b){return{name:F(N.getString(0)),bytes:F(N.getNumericArray(Uint8Array,8)),mimeType:F(N.getString(16))}}u.decode=_})(we=e.ConversationController_AttachUserFile_Params||(e.ConversationController_AttachUserFile_Params={}));class _e{constructor(g){p(this,"_endpoint");p(this,"_version");this._endpoint=new j(g.endpointState,!0),this._version=2}static create(){const[g,h]=a.createChannel(e);return[new _e(g),h]}static createToBrowser(){const[g,h]=this.create();return Mojo.bindInterface(e.interfaceName,h.pipe.rawHandle),g}setWindowStyle(g){const h={windowStyle:g};this._endpoint.send(U.encode(0,z.None,s,h))}setModel(g){const h={modelSlug:g};this._endpoint.send(U.encode(1,z.None,r,h))}newConversation(){const g={};this._endpoint.send(U.encode(2,z.None,R,g))}loadConversation(g){const h={remoteConversationId:g};this._endpoint.send(U.encode(3,z.None,t,h))}requestCompletion(g,h,_){const N={prompt:g,systemHints:h,modelSlug:_};this._endpoint.send(U.encode(4,z.None,n,N))}populatePrompt(g,h){const _={userMessage:g,targetedReply:h};this._endpoint.send(U.encode(5,z.None,I,_))}updateContext(g,h,_,N,b){const y={url:g,title:h,base64favicon:_,selection:N,blocked:b};this._endpoint.send(U.encode(6,z.None,d,y))}prepareConversation(g){const h={details:g};this._endpoint.send(U.encode(7,z.None,i,h))}setSuperWidgetOptions(g){const h={options:g};this._endpoint.send(U.encode(8,z.None,o,h))}setAttachments(g){const h={attachments:g};this._endpoint.send(U.encode(9,z.None,c,h))}navigate(g){const h={to:g};this._endpoint.send(U.encode(10,z.None,O,h))}setWhisperContent(g){const h={whisperContent:g};this._endpoint.send(U.encode(11,z.None,E,h))}setTabContext(g){const h={tabs:g};this._endpoint.send(U.encode(12,z.None,V,h))}setPromptOrigin(g){const h={origin:g};this._endpoint.send(U.encode(13,z.None,S,h))}closeNavigationSidebar(){const g={};this._endpoint.send(U.encode(14,z.None,w,g))}setChatTheme(g){const h={theme:g};this._endpoint.send(U.encode(15,z.None,T,h))}showSearch(){const g={};this._endpoint.send(U.encode(16,z.None,$,g))}populateNavlinks(g,h){const _={query:g,navlinksEvent:h};this._endpoint.send(U.encode(17,z.None,B,_))}handleAgentRequest(g){const h={request:g};this._endpoint.send(U.encode(18,z.None,H,h))}attachUserFile(g,h,_){const N={name:g,bytes:h,mimeType:_};this._endpoint.send(U.encode(19,z.None,we,N))}}e.Proxy=_e;class qe extends k{constructor(){super(e);p(this,"onDisconnect")}bind(h,_){this.addReceiver(_,async(N,b)=>{switch(N.header.ordinal){case 0:{const y=N.decode(s);h.setWindowStyle(y.windowStyle);break}case 1:{const y=N.decode(r);h.setModel(y.modelSlug);break}case 2:{N.decode(R),h.newConversation();break}case 3:{const y=N.decode(t);h.loadConversation(y.remoteConversationId);break}case 4:{const y=N.decode(n);h.requestCompletion(y.prompt,y.systemHints,y.modelSlug);break}case 5:{const y=N.decode(I);h.populatePrompt(y.userMessage,y.targetedReply);break}case 6:{const y=N.decode(d);h.updateContext(y.url,y.title,y.base64favicon,y.selection,y.blocked);break}case 7:{const y=N.decode(i);h.prepareConversation(y.details);break}case 8:{const y=N.decode(o);h.setSuperWidgetOptions(y.options);break}case 9:{const y=N.decode(c);h.setAttachments(y.attachments);break}case 10:{const y=N.decode(O);h.navigate(y.to);break}case 11:{const y=N.decode(E);h.setWhisperContent(y.whisperContent);break}case 12:{const y=N.decode(V);h.setTabContext(y.tabs);break}case 13:{const y=N.decode(S);h.setPromptOrigin(y.origin);break}case 14:{N.decode(w),h.closeNavigationSidebar();break}case 15:{const y=N.decode(T);h.setChatTheme(y.theme);break}case 16:{N.decode($),h.showSearch();break}case 17:{const y=N.decode(B);h.populateNavlinks(y.query,y.navlinksEvent);break}case 18:{const y=N.decode(H);h.handleAgentRequest(y.request);break}case 19:{const y=N.decode(we);h.attachUserFile(y.name,y.bytes,y.mimeType);break}default:N.header.expectsResponse&&b.sendUnimplementedResponse(N.header.requestID,N.header.ordinal)}return Promise.resolve()},()=>{this.onDisconnect&&this.onDisconnect(h)})}createRemote(h){const[_,N]=a.createChannel(e);return this.bind(h,N),_}}e.Dispatcher=qe})(A||(A={}));class pe{}p(pe,"interfaceName","web.bridge.GenericInterface"),p(pe,"interfaceVersion",0);(e=>{let s;(n=>{n.VERSION_INFO=[{version:0,size:16}],n.CURRENT_VERSION=n.VERSION_INFO[n.VERSION_INFO.length-1];function I(o){return f.bytes(n.CURRENT_VERSION.size).add(f.forString(o.request))}n.measure=I;function d(o,c){o.setString(0,c.request)}n.encode=d;function i(o,c){return{request:F(o.getString(0))}}n.decode=i})(s=e.GenericInterface_AcceptMessage_Params||(e.GenericInterface_AcceptMessage_Params={}));let r;(n=>{n.VERSION_INFO=[{version:0,size:16}],n.CURRENT_VERSION=n.VERSION_INFO[n.VERSION_INFO.length-1];function I(o){var c;return f.bytes(n.CURRENT_VERSION.size).add(f.forString((c=o.response)!=null?c:null))}n.measure=I;function d(o,c){var O;o.setString(0,(O=c.response)!=null?O:null)}n.encode=d;function i(o,c){const O=o.getString(0);return q({},O!==null?{response:O}:{})}n.decode=i})(r=e.GenericInterface_AcceptMessage_ResponseParams||(e.GenericInterface_AcceptMessage_ResponseParams={}));class R{constructor(I){p(this,"_endpoint");p(this,"_version");this._endpoint=new j(I.endpointState,!0),this._version=0}static create(){const[I,d]=a.createChannel(e);return[new R(I),d]}static createToBrowser(){const[I,d]=this.create();return Mojo.bindInterface(e.interfaceName,d.pipe.rawHandle),I}async acceptMessage(I){const d={request:I};return(await this._endpoint.sendAndAwaitResponse(U.encode(0,z.None,s,d))).decode(r).response}}e.Proxy=R;class t extends k{constructor(){super(e);p(this,"onDisconnect")}bind(d,i){this.addReceiver(i,async(o,c)=>{switch(o.header.ordinal){case 0:{const O=o.decode(s),E=d.acceptMessage(O.request),V=c.createResponder(r,0,o.header.requestID),S=await E;V({response:S});break}default:o.header.expectsResponse&&c.sendUnimplementedResponse(o.header.requestID,o.header.ordinal)}return Promise.resolve()},()=>{this.onDisconnect&&this.onDisconnect(d)})}createRemote(d){const[i,o]=a.createChannel(e);return this.bind(d,o),i}}e.Dispatcher=t})(pe||(pe={}));class Ne{}p(Ne,"interfaceName","web.bridge.LinkHandler"),p(Ne,"interfaceVersion",0);(e=>{let s;(t=>{t.VERSION_INFO=[{version:0,size:24}],t.CURRENT_VERSION=t.VERSION_INFO[t.VERSION_INFO.length-1];function n(i){return f.bytes(t.CURRENT_VERSION.size).add(f.forString(i.url)).add(f.forString(i.target))}t.measure=n;function I(i,o){i.setString(0,o.url),i.setString(8,o.target)}t.encode=I;function d(i,o){return{url:F(i.getString(0)),target:F(i.getString(8))}}t.decode=d})(s=e.LinkHandler_HandleLink_Params||(e.LinkHandler_HandleLink_Params={}));class r{constructor(n){p(this,"_endpoint");p(this,"_version");this._endpoint=new j(n.endpointState,!0),this._version=0}static create(){const[n,I]=a.createChannel(e);return[new r(n),I]}static createToBrowser(){const[n,I]=this.create();return Mojo.bindInterface(e.interfaceName,I.pipe.rawHandle),n}handleLink(n,I){const d={url:n,target:I};this._endpoint.send(U.encode(0,z.None,s,d))}}e.Proxy=r;class R extends k{constructor(){super(e);p(this,"onDisconnect")}bind(I,d){this.addReceiver(d,async(i,o)=>{switch(i.header.ordinal){case 0:{const c=i.decode(s);I.handleLink(c.url,c.target);break}default:i.header.expectsResponse&&o.sendUnimplementedResponse(i.header.requestID,i.header.ordinal)}return Promise.resolve()},()=>{this.onDisconnect&&this.onDisconnect(I)})}createRemote(I){const[d,i]=a.createChannel(e);return this.bind(I,i),d}}e.Dispatcher=R})(Ne||(Ne={}));var se;(e=>{e.VERSION_INFO=[{version:0,size:24}],e.CURRENT_VERSION=e.VERSION_INFO[e.VERSION_INFO.length-1];function s(t){return f.bytes(e.CURRENT_VERSION.size).add(f.forString(t.author)).add(f.forString(t.message))}e.measure=s;function r(t,n){t.setString(0,n.author),t.setString(8,n.message)}e.encode=r;function R(t,n){return{author:F(t.getString(0)),message:F(t.getString(8))}}e.decode=R})(se||(se={}));class l{}p(l,"interfaceName","web.bridge.LocalToolHandler"),p(l,"interfaceVersion",0);(e=>{let s;(d=>{d.VERSION_INFO=[{version:0,size:24}],d.CURRENT_VERSION=d.VERSION_INFO[d.VERSION_INFO.length-1];function i(O){return f.bytes(d.CURRENT_VERSION.size).add(f.forString(O.toolname)).add(f.forString(O.args))}d.measure=i;function o(O,E){O.setString(0,E.toolname),O.setString(8,E.args)}d.encode=o;function c(O,E){return{toolname:F(O.getString(0)),args:F(O.getString(8))}}d.decode=c})(s=e.LocalToolHandler_CallLocalTool_Params||(e.LocalToolHandler_CallLocalTool_Params={}));let r;(d=>{d.VERSION_INFO=[{version:0,size:16}],d.CURRENT_VERSION=d.VERSION_INFO[d.VERSION_INFO.length-1];function i(O){return f.bytes(d.CURRENT_VERSION.size).add(f.forObjectArray(se,O.response))}d.measure=i;function o(O,E){O.setObjectArray(se,0,E.response)}d.encode=o;function c(O,E){return{response:F(K(O.getObjectArray(se,0)))}}d.decode=c})(r=e.LocalToolHandler_CallLocalTool_ResponseParams||(e.LocalToolHandler_CallLocalTool_ResponseParams={}));let R;(d=>{d.VERSION_INFO=[{version:0,size:8}],d.CURRENT_VERSION=d.VERSION_INFO[d.VERSION_INFO.length-1];function i(O){return f.bytes(d.CURRENT_VERSION.size)}d.measure=i;function o(O,E){}d.encode=o;function c(O,E){return{}}d.decode=c})(R=e.LocalToolHandler_GetToolNames_Params||(e.LocalToolHandler_GetToolNames_Params={}));let t;(d=>{d.VERSION_INFO=[{version:0,size:16}],d.CURRENT_VERSION=d.VERSION_INFO[d.VERSION_INFO.length-1];function i(O){return f.bytes(d.CURRENT_VERSION.size).add(f.forStringArray(O.toolnames))}d.measure=i;function o(O,E){O.setStringArray(0,E.toolnames)}d.encode=o;function c(O,E){return{toolnames:F(K(O.getStringArray(0)))}}d.decode=c})(t=e.LocalToolHandler_GetToolNames_ResponseParams||(e.LocalToolHandler_GetToolNames_ResponseParams={}));class n{constructor(i){p(this,"_endpoint");p(this,"_version");this._endpoint=new j(i.endpointState,!0),this._version=0}static create(){const[i,o]=a.createChannel(e);return[new n(i),o]}static createToBrowser(){const[i,o]=this.create();return Mojo.bindInterface(e.interfaceName,o.pipe.rawHandle),i}async callLocalTool(i,o){const c={toolname:i,args:o};return(await this._endpoint.sendAndAwaitResponse(U.encode(0,z.None,s,c))).decode(r).response}async getToolNames(){const i={};return(await this._endpoint.sendAndAwaitResponse(U.encode(1,z.None,R,i))).decode(t).toolnames}}e.Proxy=n;class I extends k{constructor(){super(e);p(this,"onDisconnect")}bind(o,c){this.addReceiver(c,async(O,E)=>{switch(O.header.ordinal){case 0:{const V=O.decode(s),S=o.callLocalTool(V.toolname,V.args),w=E.createResponder(r,0,O.header.requestID),T=await S;w({response:T});break}case 1:{O.decode(R);const V=o.getToolNames(),S=E.createResponder(t,1,O.header.requestID),w=await V;S({toolnames:w});break}default:O.header.expectsResponse&&E.sendUnimplementedResponse(O.header.requestID,O.header.ordinal)}return Promise.resolve()},()=>{this.onDisconnect&&this.onDisconnect(o)})}createRemote(o){const[c,O]=a.createChannel(e);return this.bind(o,O),c}}e.Dispatcher=I})(l||(l={}));var Q;(e=>{e.VERSION_INFO=[{version:0,size:24}],e.CURRENT_VERSION=e.VERSION_INFO[e.VERSION_INFO.length-1];function s(t){var n;return f.bytes(e.CURRENT_VERSION.size).add(f.forString(t.clientId)).add(f.forString((n=t.serverId)!=null?n:null))}e.measure=s;function r(t,n){var I;t.setString(0,n.clientId),t.setString(8,(I=n.serverId)!=null?I:null)}e.encode=r;function R(t,n){const I=t.getString(8);return q({clientId:F(t.getString(0))},I!==null?{serverId:I}:{})}e.decode=R})(Q||(Q={}));var X;(e=>{e.VERSION_INFO=[{version:0,size:32}],e.CURRENT_VERSION=e.VERSION_INFO[e.VERSION_INFO.length-1];function s(t){var n;return f.bytes(e.CURRENT_VERSION.size).add(f.forString((n=t.title)!=null?n:null))}e.measure=s;function r(t,n){var d;let I=0;t.setString(0,(d=n.title)!=null?d:null),n.updateTimestampMsSince1970!==null&&n.updateTimestampMsSince1970!==void 0&&(I|=1,t.setF64(16,n.updateTimestampMsSince1970)),n.status!==null&&n.status!==void 0&&(I|=2,t.setEnumValue(be,12,n.status)),t.setU8(8,I)}e.encode=r;function R(t,n){const I=t.getString(0),d=t.getU8(8),i=(d&1)!=0,o=(d&2)!=0;return q(q(q({},I!==null?{title:I}:{}),i?{updateTimestampMsSince1970:F(t.getF64(16))}:{}),o?{status:F(t.getEnumValue(be,12))}:{})}e.decode=R})(X||(X={}));var be;(e=>{function s(R){if(R==="none")return 0;if(R==="inProgress")return 1;if(R==="done")return 2;throw new M}e.encode=s;function r(R){switch(R){case 0:return"none";case 1:return"inProgress";case 2:return"done";default:return"none"}}e.decode=r})(be||(be={}));class Re{}p(Re,"interfaceName","web.bridge.NavigationSidebarController"),p(Re,"interfaceVersion",0);(e=>{let s;(c=>{c.VERSION_INFO=[{version:0,size:16}],c.CURRENT_VERSION=c.VERSION_INFO[c.VERSION_INFO.length-1];function O(S){return f.bytes(c.CURRENT_VERSION.size)}c.measure=O;function E(S,w){let T=0;w.visible&&(T|=1),S.setU8(0,T)}c.encode=E;function V(S,w){return{visible:(S.getU8(0)&1)!=0}}c.decode=V})(s=e.NavigationSidebarController_SetSidebarVisibility_Params||(e.NavigationSidebarController_SetSidebarVisibility_Params={}));let r;(c=>{c.VERSION_INFO=[{version:0,size:8}],c.CURRENT_VERSION=c.VERSION_INFO[c.VERSION_INFO.length-1];function O(S){return f.bytes(c.CURRENT_VERSION.size)}c.measure=O;function E(S,w){}c.encode=E;function V(S,w){return{}}c.decode=V})(r=e.NavigationSidebarController_ToggleSidebarVisibility_Params||(e.NavigationSidebarController_ToggleSidebarVisibility_Params={}));let R;(c=>{c.VERSION_INFO=[{version:0,size:8}],c.CURRENT_VERSION=c.VERSION_INFO[c.VERSION_INFO.length-1];function O(S){return f.bytes(c.CURRENT_VERSION.size)}c.measure=O;function E(S,w){}c.encode=E;function V(S,w){return{}}c.decode=V})(R=e.NavigationSidebarController_NewConversation_Params||(e.NavigationSidebarController_NewConversation_Params={}));let t;(c=>{c.VERSION_INFO=[{version:0,size:24}],c.CURRENT_VERSION=c.VERSION_INFO[c.VERSION_INFO.length-1];function O(S){return f.bytes(c.CURRENT_VERSION.size).add(f.forObject(Q,S.id)).add(f.forObject(X,S.data))}c.measure=O;function E(S,w){S.setObjectIndirect(Q,0,w.id),S.setObjectIndirect(X,8,w.data)}c.encode=E;function V(S,w){return{id:F(S.getObjectIndirect(Q,0)),data:F(S.getObjectIndirect(X,8))}}c.decode=V})(t=e.NavigationSidebarController_AddConversationHistoryItem_Params||(e.NavigationSidebarController_AddConversationHistoryItem_Params={}));let n;(c=>{c.VERSION_INFO=[{version:0,size:24}],c.CURRENT_VERSION=c.VERSION_INFO[c.VERSION_INFO.length-1];function O(S){return f.bytes(c.CURRENT_VERSION.size).add(f.forObject(Q,S.id)).add(f.forObject(X,S.data))}c.measure=O;function E(S,w){S.setObjectIndirect(Q,0,w.id),S.setObjectIndirect(X,8,w.data)}c.encode=E;function V(S,w){return{id:F(S.getObjectIndirect(Q,0)),data:F(S.getObjectIndirect(X,8))}}c.decode=V})(n=e.NavigationSidebarController_UpdateConversationHistoryItem_Params||(e.NavigationSidebarController_UpdateConversationHistoryItem_Params={}));let I;(c=>{c.VERSION_INFO=[{version:0,size:8}],c.CURRENT_VERSION=c.VERSION_INFO[c.VERSION_INFO.length-1];function O(S){return f.bytes(c.CURRENT_VERSION.size)}c.measure=O;function E(S,w){}c.encode=E;function V(S,w){return{}}c.decode=V})(I=e.NavigationSidebarController_GetSidebarVisibility_Params||(e.NavigationSidebarController_GetSidebarVisibility_Params={}));let d;(c=>{c.VERSION_INFO=[{version:0,size:16}],c.CURRENT_VERSION=c.VERSION_INFO[c.VERSION_INFO.length-1];function O(S){return f.bytes(c.CURRENT_VERSION.size)}c.measure=O;function E(S,w){let T=0;w.visible&&(T|=1),S.setU8(0,T)}c.encode=E;function V(S,w){return{visible:(S.getU8(0)&1)!=0}}c.decode=V})(d=e.NavigationSidebarController_GetSidebarVisibility_ResponseParams||(e.NavigationSidebarController_GetSidebarVisibility_ResponseParams={}));class i{constructor(O){p(this,"_endpoint");p(this,"_version");this._endpoint=new j(O.endpointState,!0),this._version=0}static create(){const[O,E]=a.createChannel(e);return[new i(O),E]}static createToBrowser(){const[O,E]=this.create();return Mojo.bindInterface(e.interfaceName,E.pipe.rawHandle),O}setSidebarVisibility(O){const E={visible:O};this._endpoint.send(U.encode(0,z.None,s,E))}toggleSidebarVisibility(){const O={};this._endpoint.send(U.encode(1,z.None,r,O))}newConversation(){const O={};this._endpoint.send(U.encode(2,z.None,R,O))}addConversationHistoryItem(O,E){const V={id:O,data:E};this._endpoint.send(U.encode(3,z.None,t,V))}updateConversationHistoryItem(O,E){const V={id:O,data:E};this._endpoint.send(U.encode(4,z.None,n,V))}async getSidebarVisibility(){const O={};return(await this._endpoint.sendAndAwaitResponse(U.encode(5,z.None,I,O))).decode(d).visible}}e.Proxy=i;class o extends k{constructor(){super(e);p(this,"onDisconnect")}bind(E,V){this.addReceiver(V,async(S,w)=>{switch(S.header.ordinal){case 0:{const T=S.decode(s);E.setSidebarVisibility(T.visible);break}case 1:{S.decode(r),E.toggleSidebarVisibility();break}case 2:{S.decode(R),E.newConversation();break}case 3:{const T=S.decode(t);E.addConversationHistoryItem(T.id,T.data);break}case 4:{const T=S.decode(n);E.updateConversationHistoryItem(T.id,T.data);break}case 5:{S.decode(I);const T=E.getSidebarVisibility(),$=w.createResponder(d,5,S.header.requestID),B=await T;$({visible:B});break}default:S.header.expectsResponse&&w.sendUnimplementedResponse(S.header.requestID,S.header.ordinal)}return Promise.resolve()},()=>{this.onDisconnect&&this.onDisconnect(E)})}createRemote(E){const[V,S]=a.createChannel(e);return this.bind(E,S),V}}e.Dispatcher=o})(Re||(Re={}));var Fe;(e=>{function s(R){if(R==="general")return 0;if(R==="personalization")return 1;if(R==="searchEngines")return 2;if(R==="dataControls")return 3;if(R==="modelTraining")return 4;if(R==="autofill")return 5;throw new M}e.encode=s;function r(R){switch(R){case 0:return"general";case 1:return"personalization";case 2:return"searchEngines";case 3:return"dataControls";case 4:return"modelTraining";case 5:return"autofill";default:return"general"}}e.decode=r})(Fe||(Fe={}));class Ie{}p(Ie,"interfaceName","web.bridge.OpenSettingsController"),p(Ie,"interfaceVersion",0);(e=>{let s;(t=>{t.VERSION_INFO=[{version:0,size:16}],t.CURRENT_VERSION=t.VERSION_INFO[t.VERSION_INFO.length-1];function n(i){return f.bytes(t.CURRENT_VERSION.size)}t.measure=n;function I(i,o){let c=0;o.tab!==null&&o.tab!==void 0&&(c|=1,i.setEnumValue(Fe,4,o.tab)),i.setU8(0,c)}t.encode=I;function d(i,o){const O=(i.getU8(0)&1)!=0;return q({},O?{tab:F(i.getEnumValue(Fe,4))}:{})}t.decode=d})(s=e.OpenSettingsController_OpenSettings_Params||(e.OpenSettingsController_OpenSettings_Params={}));class r{constructor(n){p(this,"_endpoint");p(this,"_version");this._endpoint=new j(n.endpointState,!0),this._version=0}static create(){const[n,I]=a.createChannel(e);return[new r(n),I]}static createToBrowser(){const[n,I]=this.create();return Mojo.bindInterface(e.interfaceName,I.pipe.rawHandle),n}openSettings(n){const I={tab:n};this._endpoint.send(U.encode(0,z.None,s,I))}}e.Proxy=r;class R extends k{constructor(){super(e);p(this,"onDisconnect")}bind(I,d){this.addReceiver(d,async(i,o)=>{switch(i.header.ordinal){case 0:{const c=i.decode(s);I.openSettings(c.tab);break}default:i.header.expectsResponse&&o.sendUnimplementedResponse(i.header.requestID,i.header.ordinal)}return Promise.resolve()},()=>{this.onDisconnect&&this.onDisconnect(I)})}createRemote(I){const[d,i]=a.createChannel(e);return this.bind(I,i),d}}e.Dispatcher=R})(Ie||(Ie={}));var ye;(e=>{function s(R){if(R==="messageSent")return 0;if(R==="addTabContext")return 1;if(R==="removeTabContext")return 2;throw new M}e.encode=s;function r(R){switch(R){case 0:return"messageSent";case 1:return"addTabContext";case 2:return"removeTabContext";default:return"messageSent"}}e.decode=r})(ye||(ye={}));class Oe{}p(Oe,"interfaceName","web.bridge.ProductEventHandler"),p(Oe,"interfaceVersion",0);(e=>{let s;(t=>{t.VERSION_INFO=[{version:0,size:16}],t.CURRENT_VERSION=t.VERSION_INFO[t.VERSION_INFO.length-1];function n(i){return f.bytes(t.CURRENT_VERSION.size)}t.measure=n;function I(i,o){i.setEnumValue(ye,0,o.eventName)}t.encode=I;function d(i,o){return{eventName:F(i.getEnumValue(ye,0))}}t.decode=d})(s=e.ProductEventHandler_TriggerProductEvent_Params||(e.ProductEventHandler_TriggerProductEvent_Params={}));class r{constructor(n){p(this,"_endpoint");p(this,"_version");this._endpoint=new j(n.endpointState,!0),this._version=0}static create(){const[n,I]=a.createChannel(e);return[new r(n),I]}static createToBrowser(){const[n,I]=this.create();return Mojo.bindInterface(e.interfaceName,I.pipe.rawHandle),n}triggerProductEvent(n){const I={eventName:n};this._endpoint.send(U.encode(0,z.None,s,I))}}e.Proxy=r;class R extends k{constructor(){super(e);p(this,"onDisconnect")}bind(I,d){this.addReceiver(d,async(i,o)=>{switch(i.header.ordinal){case 0:{const c=i.decode(s);I.triggerProductEvent(c.eventName);break}default:i.header.expectsResponse&&o.sendUnimplementedResponse(i.header.requestID,i.header.ordinal)}return Promise.resolve()},()=>{this.onDisconnect&&this.onDisconnect(I)})}createRemote(I){const[d,i]=a.createChannel(e);return this.bind(I,i),d}}e.Dispatcher=R})(Oe||(Oe={}));class Z{}p(Z,"interfaceName","web.bridge.DesktopSidebarController"),p(Z,"interfaceVersion",0);(e=>{let s;(i=>{i.VERSION_INFO=[{version:0,size:8}],i.CURRENT_VERSION=i.VERSION_INFO[i.VERSION_INFO.length-1];function o(E){return f.bytes(i.CURRENT_VERSION.size)}i.measure=o;function c(E,V){}i.encode=c;function O(E,V){return{}}i.decode=O})(s=e.DesktopSidebarController_CloseSidebar_Params||(e.DesktopSidebarController_CloseSidebar_Params={}));let r;(i=>{i.VERSION_INFO=[{version:0,size:8}],i.CURRENT_VERSION=i.VERSION_INFO[i.VERSION_INFO.length-1];function o(E){return f.bytes(i.CURRENT_VERSION.size)}i.measure=o;function c(E,V){}i.encode=c;function O(E,V){return{}}i.decode=O})(r=e.DesktopSidebarController_CanHideHeader_Params||(e.DesktopSidebarController_CanHideHeader_Params={}));let R;(i=>{i.VERSION_INFO=[{version:0,size:16}],i.CURRENT_VERSION=i.VERSION_INFO[i.VERSION_INFO.length-1];function o(E){return f.bytes(i.CURRENT_VERSION.size)}i.measure=o;function c(E,V){let S=0;V.canHideHeader&&(S|=1),E.setU8(0,S)}i.encode=c;function O(E,V){return{canHideHeader:(E.getU8(0)&1)!=0}}i.decode=O})(R=e.DesktopSidebarController_CanHideHeader_ResponseParams||(e.DesktopSidebarController_CanHideHeader_ResponseParams={}));let t;(i=>{i.VERSION_INFO=[{version:0,size:8}],i.CURRENT_VERSION=i.VERSION_INFO[i.VERSION_INFO.length-1];function o(E){return f.bytes(i.CURRENT_VERSION.size)}i.measure=o;function c(E,V){}i.encode=c;function O(E,V){return{}}i.decode=O})(t=e.DesktopSidebarController_BecomeMainPage_Params||(e.DesktopSidebarController_BecomeMainPage_Params={}));let n;(i=>{i.VERSION_INFO=[{version:0,size:8}],i.CURRENT_VERSION=i.VERSION_INFO[i.VERSION_INFO.length-1];function o(E){return f.bytes(i.CURRENT_VERSION.size)}i.measure=o;function c(E,V){}i.encode=c;function O(E,V){return{}}i.decode=O})(n=e.DesktopSidebarController_OpenInNewTab_Params||(e.DesktopSidebarController_OpenInNewTab_Params={}));class I{constructor(o){p(this,"_endpoint");p(this,"_version");this._endpoint=new j(o.endpointState,!0),this._version=0}static create(){const[o,c]=a.createChannel(e);return[new I(o),c]}static createToBrowser(){const[o,c]=this.create();return Mojo.bindInterface(e.interfaceName,c.pipe.rawHandle),o}closeSidebar(){const o={};this._endpoint.send(U.encode(0,z.None,s,o))}async canHideHeader(){const o={};return(await this._endpoint.sendAndAwaitResponse(U.encode(1,z.None,r,o))).decode(R).canHideHeader}becomeMainPage(){const o={};this._endpoint.send(U.encode(2,z.None,t,o))}openInNewTab(){const o={};this._endpoint.send(U.encode(3,z.None,n,o))}}e.Proxy=I;class d extends k{constructor(){super(e);p(this,"onDisconnect")}bind(c,O){this.addReceiver(O,async(E,V)=>{switch(E.header.ordinal){case 0:{E.decode(s),c.closeSidebar();break}case 1:{E.decode(r);const S=c.canHideHeader(),w=V.createResponder(R,1,E.header.requestID),T=await S;w({canHideHeader:T});break}case 2:{E.decode(t),c.becomeMainPage();break}case 3:{E.decode(n),c.openInNewTab();break}default:E.header.expectsResponse&&V.sendUnimplementedResponse(E.header.requestID,E.header.ordinal)}return Promise.resolve()},()=>{this.onDisconnect&&this.onDisconnect(c)})}createRemote(c){const[O,E]=a.createChannel(e);return this.bind(c,E),O}}e.Dispatcher=d})(Z||(Z={}));var ie;(e=>{e.VERSION_INFO=[{version:0,size:8}],e.CURRENT_VERSION=e.VERSION_INFO[e.VERSION_INFO.length-1];function s(t){return f.bytes(e.CURRENT_VERSION.size)}e.measure=s;function r(t,n){}e.encode=r;function R(t,n){return{}}e.decode=R})(ie||(ie={}));var de;(e=>{e.VERSION_INFO=[{version:0,size:48}],e.CURRENT_VERSION=e.VERSION_INFO[e.VERSION_INFO.length-1];function s(t){return f.bytes(e.CURRENT_VERSION.size).add(f.forString(t.id)).add(f.forString(t.fileid)).add(f.forString(t.name)).add(f.forString(t.mimetype))}e.measure=s;function r(t,n){t.setString(0,n.id),t.setString(8,n.fileid),t.setString(16,n.name),t.setU32(24,n.size),t.setString(32,n.mimetype)}e.encode=r;function R(t,n){return{id:F(t.getString(0)),fileid:F(t.getString(8)),name:F(t.getString(16)),size:F(t.getU32(24)),mimetype:F(t.getString(32))}}e.decode=R})(de||(de={}));var re;(e=>{e.VERSION_INFO=[{version:0,size:32}],e.CURRENT_VERSION=e.VERSION_INFO[e.VERSION_INFO.length-1];function s(t){return f.bytes(e.CURRENT_VERSION.size).add(f.forString(t.assetPointer))}e.measure=s;function r(t,n){t.setString(0,n.assetPointer),t.setU32(8,n.sizeBytes),t.setU32(12,n.width),t.setU32(16,n.height)}e.encode=r;function R(t,n){return{assetPointer:F(t.getString(0)),sizeBytes:F(t.getU32(8)),width:F(t.getU32(12)),height:F(t.getU32(16))}}e.decode=R})(re||(re={}));var ue;(e=>{e.VERSION_INFO=[{version:0,size:32}],e.CURRENT_VERSION=e.VERSION_INFO[e.VERSION_INFO.length-1];function s(t){var n,I,d;return f.bytes(e.CURRENT_VERSION.size).add(f.forString((n=t.content)!=null?n:null)).add(f.forString((I=t.url)!=null?I:null)).add(f.forString((d=t.title)!=null?d:null))}e.measure=s;function r(t,n){var I,d,i;t.setString(0,(I=n.content)!=null?I:null),t.setString(8,(d=n.url)!=null?d:null),t.setString(16,(i=n.title)!=null?i:null)}e.encode=r;function R(t,n){const I=t.getString(0),d=t.getString(8),i=t.getString(16);return q(q(q({},I!==null?{content:I}:{}),d!==null?{url:d}:{}),i!==null?{title:i}:{})}e.decode=R})(ue||(ue={}));var Y;(e=>{e.VERSION_INFO=[{version:0,size:32},{version:1,size:48}],e.CURRENT_VERSION=e.VERSION_INFO[e.VERSION_INFO.length-1];function s(t){var n,I,d,i,o;return f.bytes(e.CURRENT_VERSION.size).add(f.forString((n=t.content)!=null?n:null)).add(f.forObjectArray(de,(I=t.files)!=null?I:null)).add(f.forObjectArray(re,(d=t.imageAssetPointers)!=null?d:null)).add(f.forObjectArray(ue,(i=t.embeddedDocumentContexts)!=null?i:null)).add(f.forString((o=t.customInstructions)!=null?o:null))}e.measure=s;function r(t,n){var I,d,i,o,c;t.setString(0,(I=n.content)!=null?I:null),t.setObjectArray(de,8,(d=n.files)!=null?d:null),t.setObjectArray(re,16,(i=n.imageAssetPointers)!=null?i:null),t.setObjectArray(ue,24,(o=n.embeddedDocumentContexts)!=null?o:null),t.setString(32,(c=n.customInstructions)!=null?c:null)}e.encode=r;function R(t,n){const I=t.getString(0),d=K(t.getObjectArray(de,8)),i=K(t.getObjectArray(re,16)),o=n>=1?K(t.getObjectArray(ue,24)):null,c=n>=1?t.getString(32):null;return q(q(q(q(q({},I!==null?{content:I}:{}),d!==null?{files:d}:{}),i!==null?{imageAssetPointers:i}:{}),o!==null?{embeddedDocumentContexts:o}:{}),c!==null?{customInstructions:c}:{})}e.decode=R})(Y||(Y={}));var oe;(e=>{e.VERSION_INFO=[{version:0,size:32}],e.CURRENT_VERSION=e.VERSION_INFO[e.VERSION_INFO.length-1];function s(t){return f.bytes(e.CURRENT_VERSION.size).add(f.forString(t.base64image)).add(f.forString(t.mimetype)).add(f.forString(t.filename))}e.measure=s;function r(t,n){t.setString(0,n.base64image),t.setString(8,n.mimetype),t.setString(16,n.filename)}e.encode=r;function R(t,n){return{base64image:F(t.getString(0)),mimetype:F(t.getString(8)),filename:F(t.getString(16))}}e.decode=R})(oe||(oe={}));class W{}p(W,"interfaceName","web.bridge.WhisperContentProvider"),p(W,"interfaceVersion",0);(e=>{let s;(d=>{d.VERSION_INFO=[{version:0,size:16}],d.CURRENT_VERSION=d.VERSION_INFO[d.VERSION_INFO.length-1];function i(O){var E;return f.bytes(d.CURRENT_VERSION.size).add(f.forObject(ie,(E=O.options)!=null?E:null))}d.measure=i;function o(O,E){var V;O.setObjectIndirect(ie,0,(V=E.options)!=null?V:null)}d.encode=o;function c(O,E){const V=O.getObjectIndirect(ie,0);return q({},V!==null?{options:V}:{})}d.decode=c})(s=e.WhisperContentProvider_GetWhisperContent_Params||(e.WhisperContentProvider_GetWhisperContent_Params={}));let r;(d=>{d.VERSION_INFO=[{version:0,size:16}],d.CURRENT_VERSION=d.VERSION_INFO[d.VERSION_INFO.length-1];function i(O){var E;return f.bytes(d.CURRENT_VERSION.size).add(f.forObject(Y,(E=O.content)!=null?E:null))}d.measure=i;function o(O,E){var V;O.setObjectIndirect(Y,0,(V=E.content)!=null?V:null)}d.encode=o;function c(O,E){const V=O.getObjectIndirect(Y,0);return q({},V!==null?{content:V}:{})}d.decode=c})(r=e.WhisperContentProvider_GetWhisperContent_ResponseParams||(e.WhisperContentProvider_GetWhisperContent_ResponseParams={}));let R;(d=>{d.VERSION_INFO=[{version:0,size:8}],d.CURRENT_VERSION=d.VERSION_INFO[d.VERSION_INFO.length-1];function i(O){return f.bytes(d.CURRENT_VERSION.size)}d.measure=i;function o(O,E){}d.encode=o;function c(O,E){return{}}d.decode=c})(R=e.WhisperContentProvider_GetTabScreenshot_Params||(e.WhisperContentProvider_GetTabScreenshot_Params={}));let t;(d=>{d.VERSION_INFO=[{version:0,size:16}],d.CURRENT_VERSION=d.VERSION_INFO[d.VERSION_INFO.length-1];function i(O){var E;return f.bytes(d.CURRENT_VERSION.size).add(f.forObject(oe,(E=O.screenshot)!=null?E:null))}d.measure=i;function o(O,E){var V;O.setObjectIndirect(oe,0,(V=E.screenshot)!=null?V:null)}d.encode=o;function c(O,E){const V=O.getObjectIndirect(oe,0);return q({},V!==null?{screenshot:V}:{})}d.decode=c})(t=e.WhisperContentProvider_GetTabScreenshot_ResponseParams||(e.WhisperContentProvider_GetTabScreenshot_ResponseParams={}));class n{constructor(i){p(this,"_endpoint");p(this,"_version");this._endpoint=new j(i.endpointState,!0),this._version=0}static create(){const[i,o]=a.createChannel(e);return[new n(i),o]}static createToBrowser(){const[i,o]=this.create();return Mojo.bindInterface(e.interfaceName,o.pipe.rawHandle),i}async getWhisperContent(i){const o={options:i};return(await this._endpoint.sendAndAwaitResponse(U.encode(0,z.None,s,o))).decode(r).content}async getTabScreenshot(){const i={};return(await this._endpoint.sendAndAwaitResponse(U.encode(1,z.None,R,i))).decode(t).screenshot}}e.Proxy=n;class I extends k{constructor(){super(e);p(this,"onDisconnect")}bind(o,c){this.addReceiver(c,async(O,E)=>{switch(O.header.ordinal){case 0:{const V=O.decode(s),S=o.getWhisperContent(V.options),w=E.createResponder(r,0,O.header.requestID),T=await S;w({content:T});break}case 1:{O.decode(R);const V=o.getTabScreenshot(),S=E.createResponder(t,1,O.header.requestID),w=await V;S({screenshot:w});break}default:O.header.expectsResponse&&E.sendUnimplementedResponse(O.header.requestID,O.header.ordinal)}return Promise.resolve()},()=>{this.onDisconnect&&this.onDisconnect(o)})}createRemote(o){const[c,O]=a.createChannel(e);return this.bind(o,O),c}}e.Dispatcher=I})(W||(W={}));class Xe{constructor(s){p(this,"dispatcher");this.dispatcher=new v.Dispatcher,this.dispatcher.bind(this,s)}refreshSessionContext(s,r){x.authSessionContext={authToken:s,behavior:r},x.wantsAuthSessionContext$.set(!0)}}function Ye(e){return e==="none"||e==="sent"||e==="success"||e==="failure"}class Ze{constructor(s,r,R){p(this,"prepareState");p(this,"lastPrepareTimestamp");p(this,"conduitToken");this.prepareState=Ye(s)?s:"none",this.lastPrepareTimestamp=r-performance.timeOrigin,this.conduitToken=R}}class ve{constructor(s){p(this,"dispatcher");this.dispatcher=new A.Dispatcher,this.dispatcher.bind(this,s)}closeNavigationSidebar(){ke.setSidebarOpen(!1)}setChatTheme(s){const r=s==="default_"?"default":s;x.chatTheme=r,x.wantsSetChatTheme$.set(!0)}showSearch(){throw new Error("Method not implemented.")}setWindowStyle(s){x.windowStyle$.set(s)}setModel(s){x.wantsModelSlug$.set(s)}newConversation(){x.wantsNewConversation$.set(!0),x.selectedConversationId$.set(void 0)}loadConversation(s){x.wantsNewConversation$.set(!1),x.selectedConversationId$.set(s)}requestCompletion(s,r,R){x.requestCompletion={prompt:s,systemHints:r,modelSlug:R},x.wantsRequestCompletion$.set(!0)}populatePrompt(s,r){x.populatePrompt={userMessage:s!=null?s:null,targetedReply:r!=null?r:null},x.wantsPopulatePrompt$.set(!0)}updateContext(s,r,R,t,n){x.context$.set({id:s,url:s,title:r,base64favicon:R,selection:t,blocked:n})}prepareConversation(s){var r;x.prepareConversationDetails=new Ze(s.prepareState,s.lastPrepareTimestampMsSince1970,(r=s.conduitToken)!=null?r:void 0)}setSuperWidgetOptions(s){Me.set(s.selectedTab)}setAttachments(s){x.attachments=s.map(r=>{const{id:R,name:t,size:n,mimeType:I,width:d,height:i,fileTokenSize:o}=r;return q(q(q(q(q(q(q({},R&&{id:R}),t&&{name:t}),n&&{size:typeof n=="bigint"?Number(n):n}),I&&{mime_type:I}),d&&{width:d}),i&&{height:i}),o&&{file_token_size:o})})}attachUserFile(s,r,R){x.attachUserFileRequest={name:s,bytes:r,mimeType:R},x.wantsAttachUserFile$.set(!0)}setWhisperContent(s){x.whisperContent=s}setTabContext(s){x.tabContext=s}setPromptOrigin(s){x.promptOrigin=s}navigate(s){$e(s)}populateNavlinks(s,r){const R=JSON.parse(r);Be.getState().updateFromEvent(s,R)}handleAgentRequest(s){x.agentRequest=s,x.wantsHandleAgentRequest$.set(!0)}}const Ae=6e4;class Le{constructor(s,r){p(this,"host");p(this,"logger");p(this,"lastMissingAuthTime",0);this.host=s,this.logger=r}async getAccountID(){return await this.host.getAccountID()}onMissingSessionAuth(){const s=Date.now();if(s-this.lastMissingAuthTime>Ae){this.lastMissingAuthTime=s;const[r,R]=L.Proxy.create();this.bindReceiver(R),this.logger.notice("onMissingSessionAuth.invoked"),r.handleMissingSessionAuth()}}recordAvailableSessionAuth(){const[s,r]=L.Proxy.create();this.bindReceiver(r),this.logger.notice("recordAvailableSessionAuth.invoked"),s.recordAvailableSessionAuth()}tryOpenAgentViewer(s){const[r,R]=J.Proxy.create();return this.bindReceiver(R),r.tryOpenAgentViewer(s)}userSentMessageInAgentConversation(s){const[r,R]=J.Proxy.create();this.bindReceiver(R),r.userSentMessageInAgentConversation(s)}userStoppedAgentConversation(s){const[r,R]=J.Proxy.create();this.bindReceiver(R),r.userStoppedAgentConversation(s)}openAgentTabs(s,r){const[R,t]=J.Proxy.create();this.bindReceiver(t),R.openAgentTabs(s,r)}getClientID(){const[s,r]=J.Proxy.create();return this.bindReceiver(r),s.getClientID()}becomeMainPage(){const[s,r]=Z.Proxy.create();this.bindReceiver(r),s.becomeMainPage()}openInNewTab(){const[s,r]=Z.Proxy.create();this.bindReceiver(r),s.openInNewTab()}closeSideChat(){const[s,r]=Z.Proxy.create();this.bindReceiver(r),s.closeSidebar()}async getWhisperContent(){const[s,r]=W.Proxy.create();return this.bindReceiver(r),await s.getWhisperContent({})}async getTabScreenshot(){const[s,r]=W.Proxy.create();return this.bindReceiver(r),await s.getTabScreenshot()}receivedFirstToken(){this.host.receivedFirstToken("")}async callLocalTool(s,r){const[R,t]=l.Proxy.create();return this.bindReceiver(t),await R.callLocalTool(s,r)}bindReceiver(s){this.host.bindReceiver(s.interfaceType.interfaceName,s.pipe)}async getToolNames(){const[s,r]=l.Proxy.create();return this.bindReceiver(r),await s.getToolNames()}openSettings(s){const[r,R]=Ie.Proxy.create();this.bindReceiver(R),r.openSettings(s)}enqueueConversationArchive(s){const[r,R]=G.Proxy.create();this.bindReceiver(R),r.enqueueConversationArchive(s)}cancelConversationArchive(s){const[r,R]=G.Proxy.create();this.bindReceiver(R),r.cancelConversationArchive(s)}}class Ge{constructor(s){p(this,"proxy");this.proxy=s}handleLink(s,r){this.proxy.handleLink(s,r)}}class le{constructor(s){p(this,"proxy");this.proxy=s}triggerProductEvent(s){this.proxy.triggerProductEvent(s)}}class We{constructor(){p(this,"dispatcher");p(this,"host");p(this,"logger");p(this,"conversationControllers",[]);p(this,"authStateController",[]);p(this,"navigationSidebarController");this.logger=De.createLogger("web-bridge-host","info","http"),this.dispatcher=new Je.Dispatcher;const s=Ke.Proxy.createToBrowser();this.host=new Le(s,this.logger),s.setFrontend(this.dispatcher.createRemote(this));const[r,R]=Re.Proxy.create();this.host.bindReceiver(R),this.navigationSidebarController=new Qe(r)}get linkHandler(){const[s,r]=Ne.Proxy.create();return this.host.bindReceiver(r),new Ge(s)}get productEventHandler(){const[s,r]=Oe.Proxy.create();return this.host.bindReceiver(r),new le(s)}logConsoleMessage(s){this.logger.info(s)}sendMessage(s,r){return Promise.resolve(null)}bindReceiver(s,r){s===A.interfaceName?this.conversationControllers.push(new ve(new Te(A,r))):s===v.interfaceName&&this.authStateController.push(new Xe(new Te(v,r)))}}let m;async function tt(){m=new We;const e=await m.host.getAccountID();m.logger.info("Account ID: ".concat(e))}function nt(){return m==null?void 0:m.host}function ct(){return m==null?void 0:m.linkHandler}function st(){return m==null?void 0:m.productEventHandler}async function it(){return m?(m.logger.debug("Getting whisper content"),await m.host.getWhisperContent()):null}async function dt(){return m?await m.host.getTabScreenshot():null}function rt(){if(!m)return null;m.host.closeSideChat()}export{rt as closeSideChat,nt as getHost,ct as getLinkHandler,st as getProductEventHandler,it as getSidebarWhisperContent,dt as getTabScreenshot,tt as initHostConnection};
//# sourceMappingURL=easgat082167v0i8.js.map
