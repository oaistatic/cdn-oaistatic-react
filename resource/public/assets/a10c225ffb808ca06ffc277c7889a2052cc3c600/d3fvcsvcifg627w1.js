import{r as h,j as s}from"./jj85rqzpbnvv3emr.js";import{ch as S,bI as _,bJ as p,$ as A,a0 as j,bF as M}from"./lef5ym39glv4981l.js";import{S as v}from"./ksbtr9cllybwh424.js";import{hn as g,ho as w,hp as O,h6 as b,hq as E,hr as C,hs as R,ht as T,hu as J}from"./mclphevd122040jw.js";import{u as k}from"./caf1sdj80uq0brjb.js";function N(u,r){const{automationId:o,automationTitle:e,automationMessage:y}=h.useMemo(()=>{const l=r.find(n=>n.author.role===S.Assistant),a=l?_.getParentPromptNode(p(u),l.id):null;let t=a==null?void 0:a.message.metadata;if(!(t!=null&&t.real_author_type)){const n=r.find(c=>{var i;return((i=c.metadata)==null?void 0:i.real_author_type)==="automation"});t=n==null?void 0:n.metadata}const m=(t==null?void 0:t.real_author_type)==="automation"?t==null?void 0:t.real_author_id:null,d=t==null?void 0:t.real_author_title;return{automationId:m,automationTitle:d,automationMessage:a==null?void 0:a.message}},[u,r]),{automation:x}=k(o!=null?o:"");return{automationId:o,automation:x,automationTitle:e,automationMessage:y}}function L({clientThreadId:u,messages:r}){var d,n;const{automationId:o,automation:e,automationTitle:y}=N(u,r),l=g(u).isOdysseyMode||r.some(c=>{var i;return(i=c.metadata)==null?void 0:i.n7jupd_message}),a=(d=w(u))==null?void 0:d.value,{isScheduledRun:t}=h.useContext(O),[f,m]=h.useState(!1);return h.useEffect(()=>{o&&A.count(j.JAWBONE,"jawbone_automation_source_header.open")},[o]),o?t?s.jsx("div",{className:"relative my-2 w-full",children:s.jsx(b,{automation:e,fullWidth:!0})}):l?a===M.REALTIME?null:s.jsx(E,{clientThreadId:u,children:s.jsx(C,{children:({isScheduled:c,isScheduledRun:i})=>c&&i&&s.jsx(R,{})})}):s.jsxs("div",{className:"text-token-text-secondary hover:text-token-text-primary mb-1 flex items-center gap-1.5 text-sm",children:[s.jsx(v,{className:"icon-sm"}),s.jsx("button",{onClick:()=>{m(!0)},children:(n=e==null?void 0:e.title)!=null?n:y}),f&&e&&s.jsx(T,{initialScheduleComponents:e.schedule_components,nextRunTimes:e.next_run_times,children:s.jsx(J,{item:e,source:"chat",onClose:()=>{m(!1)}})})]}):null}export{L as AutomationSourceHeader};
//# sourceMappingURL=d3fvcsvcifg627w1.js.map
