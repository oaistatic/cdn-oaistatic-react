var Me=Object.defineProperty,Pe=Object.defineProperties;var Ee=Object.getOwnPropertyDescriptors;var pe=Object.getOwnPropertySymbols;var De=Object.prototype.hasOwnProperty,ze=Object.prototype.propertyIsEnumerable;var fe=(i,e,t)=>e in i?Me(i,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):i[e]=t,C=(i,e)=>{for(var t in e||(e={}))De.call(e,t)&&fe(i,t,e[t]);if(pe)for(var t of pe(e))ze.call(e,t)&&fe(i,t,e[t]);return i},$=(i,e)=>Pe(i,Ee(e));import{r as T,b as te,j as s,M as N,v as Oe,u as Ae,c as H,g as Ue,L as Re}from"./jj85rqzpbnvv3emr.js";import{i as L,g2 as Le,q0 as Ge,f as $e,o_ as He,o$ as qe,hv as se,p0 as Be,mj as We,P as ae,jH as Qe,lT as oe,lc as Xe,q1 as re,q2 as ie,kG as Ze,ld as Ke,q3 as Ve,r as ce,ck as ve,O as ee,f8 as Ye,C as Je,B as et,T as tt,bi as ne,iz as st,e as K,cj as nt,cc as ot,dz as rt,Y as it,Z as lt,jk as at,E as ct,j as dt}from"./lef5ym39glv4981l.js";import{kK as je,fN as ye,kL as ut,jV as mt,kM as xt,fd as ge,k5 as pt,dP as _,gO as ft,jW as gt,kN as ht,kO as vt,kP as be,fl as jt,kQ as Z,kR as yt,kS as bt,kT as St,kU as _t,kV as Ct,kW as Se,gQ as It,kX as _e,kY as wt,kZ as Nt,k_ as Ft,k$ as kt,l0 as Tt,l1 as Mt,fO as Pt,l2 as Et,l3 as Dt,l4 as zt,gF as Ot,l5 as At,b3 as Ut,b2 as Rt,jf as Lt,jd as Gt}from"./mclphevd122040jw.js";import{g as $t,D as le}from"./cncd8uuk5eicbkeu.js";import{P as Ht}from"./cdk0cmbgnafohb1q.js";import{u as qt}from"./dta5t6ifyam55mk9.js";function Bt({ctx:i,gizmoId:e,gizmoName:t,canEdit:n,gizmoEditorData:m,openFileDialog:o,pendingFiles:c,setVersion:r,pendingFileUpsertMutationsRef:p,currentModelConfig:h}){var j;const u=(j=m==null?void 0:m.files)!=null?j:[],v=Array.from(c.current.values()).filter(x=>u.every(y=>y.file_id!==x.fileId)),l=v.filter(x=>h!=null&&re(h,x.file.type,x.file.name)===ie.CodeInterpreter),a=u.filter(x=>h!=null&&x.type!=null&&re(h,x.type,x.name)===ie.CodeInterpreter),f=[...l.map(x=>x.tempId),...a.map(x=>x.file_id)];return s.jsx(bt,{gizmoId:e,gizmoName:t,canEdit:n,pendingFiles:v,pendingFileUpsertMutationsRef:p,files:u,interpreterOnlyFileIds:f,onAddFiles:o,removePendingFile:x=>{c.current.delete(x),Z({ctx:i,id:e,pendingFiles:{key:x,value:null}}),r(y=>y+1)}})}const Wt=T.forwardRef(function({gizmo:e,accountPlanType:t,showInstructions:n=!0},m){var V,P;const o=je(t),c=te(),[r,p]=T.useState(!1),h=ye(),u=ut(e),v=mt(u),l=L(),{data:a}=Le(),f=(V=a==null?void 0:a.models.get(Ge))!=null?V:a&&xt(a.models.values(),X=>X.tags.includes(Ve.GPT_4o)),j=$e(),[x,y]=T.useState(0),d=T.useRef(new Map),g=T.useRef([]),b=He(f,void 0),S=X=>{X.some(({errors:U})=>{var G;return U.length!==1||((G=U[0])==null?void 0:G.code)!==ge.TooManyFiles})?j.danger(_.unknownError,{duration:2,toastId:"snorlax_handle_file_rejected"}):j.danger(c.formatMessage(_.dragTooManyFilesError,{maxFileLimit:o}),{duration:2,toastId:"snorlax_handle_file_rejected",loggingTitle:"drag_too_many_files_error"})},I=async X=>{ae.logEvent("Upload File",{client:"web",eventSource:"mouse",intent:"gizmo"});const U=u.id;X.length>0&&await Promise.all(X.map(G=>{const J=Qe(G),ue={tempId:J,gizmoId:U,file:G,status:oe.Uploading,progress:1,fileId:null,cdnUrl:null};d.current.set(J,ue),Z({ctx:l,id:U,pendingFiles:{key:J,value:ue}}),Xe(J,G,c,j,{kind:Ke.Gizmo,gizmoId:U},{onFileUploaded:async(M,B,W,E)=>{const D=d.current.get(M);D!=null&&D.fileId&&D!=null&&D.fileId&&(g.current.push({id:e.gizmo.id,mutationId:Oe(),update:Y=>{var me,xe;if(!D.fileId)return Y;const Te=[...(me=Y.files)!=null?me:[],{file_id:D.fileId,name:D.file.name,size:D.file.size,type:(xe=E==null?void 0:E.mimeType)!=null?xe:Ze(D.file),last_modified:D.file.lastModified,file_size_tokens:E==null?void 0:E.fileTokenSize}];return $(C({},Y),{files:Te})},onSuccess:()=>{d.current.delete(M),Z({ctx:l,id:U,pendingFiles:{key:M,value:null}}),y(Y=>Y+1)}}),yt(e.gizmo.id)({projectId:e.gizmo.id,upsertProjectMutation:h,pendingFileUpsertMutationsRef:g}))},onFileCreated:(M,B,W)=>{const E=$(C({tempId:M,gizmoId:U,file:G,status:oe.Uploading,progress:1},d.current.get(M)),{fileId:B,cdnUrl:W});d.current.set(M,E),Z({ctx:l,id:U,pendingFiles:{key:M,value:E}}),y(D=>D+1)},onFileUploadProgress:(M,B)=>{const W=d.current.get(M);if((W==null?void 0:W.status)===oe.Uploading){const E=$(C({},W),{progress:B>95?95:B});d.current.set(M,E),Z({ctx:l,id:U,pendingFiles:{key:M,value:E}})}y(E=>E+1)},onError:M=>{d.current.delete(M),Z({ctx:l,id:U,pendingFiles:{key:M,value:null}}),y(B=>B+1)}},{usesRetrievalIndex:f!=null&&re(f,G.type,G.name)===ie.Retrieval})}))},F=qe(b),k=$t(F),w=d.current.size+u.files.length,{canEdit:z}=se(e),{open:O,getInputProps:A,getRootProps:R,isDragAccept:q,isDragReject:Q}=qt(C({noClick:!0,noKeyboard:!0,noDragEventsBubbling:!0,onDropAccepted:I,onDropRejected:S,multiple:!0,maxSize:Be,maxFiles:o-w,validator:()=>w>=o?{code:ge.TooManyFiles,message:"Too many files"}:null,disabled:!z},F));return T.useImperativeHandle(m,()=>({openFileDialog:O})),s.jsxs("div",$(C({},R({className:"h-full px-4 min-w-0"})),{children:[s.jsx("input",C({},A())),n&&s.jsxs(pt,{children:[s.jsx("button",{className:"w-full",onClick:()=>p(!0),children:s.jsx("div",{className:"border-token-border-default w-full rounded-lg border text-start text-sm",children:(P=u==null?void 0:u.instructions)!=null&&P.length?s.jsx("div",{className:"mx-4 my-3 line-clamp-4",children:u.instructions}):s.jsxs("div",{className:"text-token-text-secondary flex h-full w-full items-center px-4 py-3",children:[s.jsx("div",{className:"flex-1",children:s.jsx(N,C({},_.addCustomInstructions))}),s.jsx(ft,{className:"icon-sm"})]})})}),v.includes(gt.GizmoInstructionsTooLong)?s.jsx(ht,{className:"mt-1",children:s.jsx(N,$(C({},_.instructionsTooLong),{values:{length:vt}}))}):null]}),r&&s.jsx(be,{gizmo:e,onClose:()=>{p(!1)}}),s.jsx(Bt,{ctx:l,gizmoId:e.gizmo.id,gizmoName:e.gizmo.display.name,canEdit:z,gizmoEditorData:u,openFileDialog:O,pendingFiles:d,pendingFileUpsertMutationsRef:g,setVersion:y,currentModelConfig:f}),q&&s.jsxs(le,{children:[s.jsx(jt,{}),s.jsx("h3",{children:s.jsx(N,C({},_.dragInstructions))}),s.jsx("h4",{className:"w-2/3 text-center",children:k.length>0?k.join(", "):s.jsx(N,C({},_.dragAllAccepted))})]}),Q&&s.jsxs(le,{children:[s.jsx(We,{className:"icon-2xl"}),s.jsx("h3",{children:s.jsx(N,C({},_.dragTooManyFiles))}),s.jsx("h4",{className:"w-2/3 text-center",children:s.jsx(N,$(C({},_.dragTooManyFilesDescription),{values:{maxFileLimit:o}}))})]})]}))});function Ce({gizmo:i,onClose:e,project:t}){var a;const n=te(),m=T.useRef(null),o=T.useCallback(()=>{var f;(f=m.current)==null||f.openFileDialog()},[m]),c=L(),r=ce(c),p=Ae(),{data:h}=ve(i.gizmo.id),u=h!=null?h:i,{canEdit:v}=se(u),l=ee(()=>{var f;return(f=t==null?void 0:t.filesCount$())!=null?f:0});return T.useEffect(()=>{p.invalidateQueries({queryKey:Ye(p,u.gizmo.id).queryKey})},[u.gizmo.id,p]),s.jsx(s.Fragment,{children:s.jsx(Je,{testId:"modal-project-files",className:"min-h-72 max-w-[820px]",isOpen:!0,showCloseButton:!0,hideSeparator:!0,noPadding:!0,size:"custom",type:"success",headerAccessory:v?s.jsx(et,{color:"secondary",onClick:o,disabled:(a=r&&l>=je(r.planType))!=null?a:!1,children:s.jsx(N,C({},_.addFilesButtonLabel))}):s.jsx(tt,{label:n.formatMessage(_.viewOnlyCustomInstructionsModalHeaderTooltip),side:"left",align:"center",children:s.jsxs("div",{className:"text-token-text-tertiary flex flex-row items-center gap-1.5 text-sm",children:[s.jsx(St,{className:"icon"}),s.jsx(N,C({},_.viewOnlyCustomInstructionsModalHeaderLabel))]})}),title:s.jsx(N,C({},_.projectFilesModalTitle)),onClose:()=>{e()},children:s.jsx("div",{className:"grid min-h-[50dvh] grow overflow-y-auto pt-0",children:r&&s.jsx(Wt,{ref:m,gizmo:u,showInstructions:!1,accountPlanType:r.planType})})})})}const us=Object.freeze(Object.defineProperty({__proto__:null,SnorlaxFileModal:Ce},Symbol.toStringTag,{value:"Module"}));function Qt({gizmo:i}){return s.jsx("div",{className:"mt-6 grid grid-cols-2 items-start",children:i?s.jsxs(s.Fragment,{children:[s.jsx(Xt,{gizmo:i,className:"rounded-[20px_0px_0px_20px] [border-width:1px_0.5px_1px_1px]"}),s.jsx(Kt,{gizmo:i,className:"rounded-[0px_20px_20px_0px] [border-width:1px_1px_1px_0.5px]"})]}):s.jsxs(s.Fragment,{children:[s.jsx(he,{}),s.jsx(he,{})]})})}const de=({className:i,header:e,context:t,contextClassName:n="",icon:m,onClick:o,disabled:c=!1})=>s.jsx("button",{onClick:o,disabled:c,className:K("group/snorlax-control-tile border-token-border-light bg-token-bg-primary hover:bg-token-bg-tertiary active:bg-token-bg-tertiary relative h-full rounded-2xl border disabled:pointer-events-none disabled:opacity-50",i),children:s.jsxs("div",{className:"relative mx-5 my-4 flex items-center justify-between gap-3 overflow-hidden",children:[s.jsxs("div",{className:"w-full grow text-start",children:[s.jsx("div",{className:"text-sm font-medium",children:e}),s.jsx("div",{className:K("text-token-text-secondary text-xs",n),children:t})]}),m]})}),he=()=>s.jsx(de,{disabled:!0,header:s.jsx("div",{className:"bg-token-bg-tertiary my-2 h-2 w-48 rounded-full"}),context:s.jsx("div",{className:"bg-token-bg-tertiary my-2 h-2 w-32 rounded-full contain-inline-size"})});function Xt({className:i,gizmo:e}){const{files:t}=e,n=!t.length,m=L(),o=()=>ne(m,Ce,{gizmo:e});let c,r,p;const{canEdit:h}=se(e);if(n)c=s.jsx(N,C({},h?_.addFilesButtonLabel:_.viewFilesButtonLabel)),r=s.jsx(N,C({},h?_.filesControlDescription:_.noFilesReadOnlyDescription)),p=null;else{const v=t.slice(0,3);c=s.jsx(N,C({},_.projectFilesModalTitle)),r=s.jsx(N,$(C({},_.filesCount),{values:{count:t.length}})),p=s.jsx("div",{className:"relative flex h-10 w-20 shrink-0 items-center justify-center rounded-full max-sm:sr-only",children:v.toReversed().map((l,a)=>s.jsx(Zt,{file:l,index:a,gizmoId:e.gizmo.id},l.id))})}return s.jsx(de,{className:i,onClick:o,header:c,context:r,icon:p,disabled:n&&!h})}function Zt({file:i,index:e,gizmoId:t}){const n=i.name,o=st(n)&&i.file_id!=null&&s.jsx(_t,{fileName:n,fileId:i.file_id,gizmoId:t,className:"[box-shadow:0px_4px_16px_0px_rgba(0,0,0,0.05)]"});return s.jsx("div",{className:"border-token-bg-primary group-hover/snorlax-control-tile:border-token-bg-tertiary absolute end-0 top-0 h-10 w-10 overflow-hidden rounded-xl border-2",style:{transform:"translateX(".concat(e*-20,"px)")},children:o||s.jsx(Ct,{className:"h-9 w-9 shrink-0 [box-shadow:0px_4px_16px_0px_rgba(0,0,0,0.05)]",filename:i.name,contextConnectorInfo:void 0})})}function Kt({gizmo:i,className:e}){const{instructions:t}=i.gizmo,n=!t.length,m=L(),o=()=>ne(m,be,{gizmo:i});let c,r,p;const{canEdit:h}=se(i);return n?(c=s.jsx(N,C({},h?_.customInstructionsTitle:_.customInstructionsReadOnlyTitle)),r=s.jsx(N,C({},h?_.customInstructionsDescription:_.customInstructionsReadOnlyDescription))):(c=s.jsx(N,C({},_.editCustomInstructionsTitle)),p="overflow-hidden text-ellipsis whitespace-nowrap",r=t),s.jsx(de,{className:e,onClick:o,header:c,context:r,contextClassName:p,disabled:n&&!h})}const Vt=()=>{"use forget";const i=H.c(1);let e;return i[0]===Symbol.for("react.memo_cache_sentinel")?(e=s.jsx("div",{className:"ms-1 mt-3 h-10",children:s.jsx("div",{className:"bg-token-tertiary my-[15px] h-[10px] w-48 rounded-full"})}),i[0]=e):e=i[0],e};function Ie(i){"use forget";var f,j,x,y;const e=H.c(17),{gizmo:t}=i,n=te(),m=L(),o=T.use(Se);let c;e[0]!==t||e[1]!==o?(c=()=>t?o.theme$():null,e[0]=t,e[1]=o,e[2]=c):c=e[2];const r=ee(c);let p;e[3]!==t||e[4]!==o?(p=()=>t?o.emoji$():null,e[3]=t,e[4]=o,e[5]=p):p=e[5];const h=ee(p);let u;e[6]!==t||e[7]!==o?(u=()=>t?o.title$():null,e[6]=t,e[7]=o,e[8]=u):u=e[8];const v=ee(u),l=((y=(x=(j=(f=t==null?void 0:t.gizmo)==null?void 0:f.sharing)==null?void 0:j.subjects)==null?void 0:x.length)!=null?y:0)>0;let a;return e[9]!==m||e[10]!==h||e[11]!==r||e[12]!==v||e[13]!==t||e[14]!==n||e[15]!==l?(a=s.jsx("div",{className:"mb-8 inline-flex w-full justify-center gap-2",children:t?s.jsx("div",{className:"text-page-header mt-0.5 inline-block px-4",children:s.jsx("h1",{className:"contents",children:s.jsxs("a",{href:"#edit-title",role:"button","aria-label":n.formatMessage({id:"edit-title",defaultMessage:"Edit the title of {projectName}"},{projectName:t.gizmo.display.name}),className:"text-page-header group hover:text-token-text-secondary ms-2 flex items-center gap-1.5 text-balance",onClick:d=>{d.preventDefault(),ne(m,_e,{submitButtonTitle:n.formatMessage(_.projectSettingsSubmitButton),gizmo:t})},children:[s.jsx(It,{size:"lg",color:r,emoji:h,isSharedProject:l,strict:!0}),v]})})}):s.jsx(Vt,{})}),e[9]=m,e[10]=h,e[11]=r,e[12]=v,e[13]=t,e[14]=n,e[15]=l,e[16]=a):a=e[16],a}function Yt(i){"use forget";const e=H.c(2),{children:t}=i;let n;return e[0]!==t?(n=s.jsx("div",{className:"group relative flex flex-col gap-1 p-3",children:s.jsx("div",{className:"flex items-center gap-4",children:t})}),e[0]=t,e[1]=n):n=e[1],n}const we=i=>{"use forget";var z,O;const e=H.c(36),{conversation:t,gizmo:n,showAvatar:m}=i,o=(z=nt(t.id,ss))!=null?z:t.title,[c,r]=T.useState(!1);let p,h;e[0]!==t.id?(p=()=>at(zt,{editTitleInMainScreen:A=>{const{serverThreadId:R}=A;R===t.id&&r(!0)}}),h=[t.id],e[0]=t.id,e[1]=p,e[2]=h):(p=e[1],h=e[2]),T.useEffect(p,h);const u=L(),{snippet:v}=t;let l,a,f,j,x;if(e[3]!==t||e[4]!==u||e[5]!==n){const A=(O=ce(u))==null?void 0:O.normalizedAccountUserId;l="owner"in t?t.owner:null,j=l==null?void 0:l.user_id,a=l==null?void 0:l.name,f=l==null?void 0:l.user_email,x=ot(t.id,n,!0,j,A),e[3]=t,e[4]=u,e[5]=n,e[6]=l,e[7]=a,e[8]=f,e[9]=j,e[10]=x}else l=e[6],a=e[7],f=e[8],j=e[9],x=e[10];const y=x;let d;e[11]!==l||e[12]!==a||e[13]!==f||e[14]!==j||e[15]!==m?(d=m&&s.jsx(Ot,{monogram:l&&a&&j?{label:a,id:j,sublabel:f}:null}),e[11]=l,e[12]=a,e[13]=f,e[14]=j,e[15]=m,e[16]=d):d=e[16];let g;e[17]!==t||e[18]!==o||e[19]!==c?(g=c?s.jsx(wt,{conversationId:t.id,historyConversationResponse:t,onClose:()=>{r(!1)}}):s.jsx("div",{className:"text-sm font-medium",children:o}),e[17]=t,e[18]=o,e[19]=c,e[20]=g):g=e[20];let b;e[21]!==v?(b=v&&s.jsx("div",{className:"text-token-text-secondary truncate text-sm",children:v}),e[21]=v,e[22]=b):b=e[22];let S;e[23]!==g||e[24]!==b?(S=s.jsxs("div",{className:"grow overflow-hidden group-hover:me-5",children:[g,b]}),e[23]=g,e[24]=b,e[25]=S):S=e[25];let I;e[26]!==t||e[27]!==c?(I=!c&&s.jsx(Ne,{conversation:t}),e[26]=t,e[27]=c,e[28]=I):I=e[28];let F;e[29]!==d||e[30]!==S||e[31]!==I?(F=s.jsxs(Yt,{children:[d,S,I]}),e[29]=d,e[30]=S,e[31]=I,e[32]=F):F=e[32];const k=F;if(c)return k;let w;return e[33]!==k||e[34]!==y?(w=s.jsx(Re,{to:y,draggable:!1,children:k}),e[33]=k,e[34]=y,e[35]=w):w=e[35],w},Ne=i=>{"use forget";var F,k;const e=H.c(24),{conversation:t,isNewProjectPage:n}=i,m=n===void 0?!1:n,[o,c]=T.useState(!1),r=te(),p=L(),h=(F=ce(p))==null?void 0:F.normalizedAccountUserId,u="owner"in t?(k=t.owner)==null?void 0:k.user_id:void 0,v=u===void 0||u===h;let l;e[0]!==t.update_time||e[1]!==r?(l=t.update_time&&Intl.DateTimeFormat(r.locale,{month:"short",day:"numeric"}).format(new Date(t.update_time)),e[0]=t.update_time,e[1]=r,e[2]=l):l=e[2];const a=l;if(!v){let w;return e[3]!==a?(w=a?s.jsx("span",{className:"text-token-text-tertiary text-sm whitespace-nowrap",children:a}):null,e[3]=a,e[4]=w):w=e[4],w}let f;e[5]===Symbol.for("react.memo_cache_sentinel")?(f=K("group text-token-text-tertiary relative flex min-h-10 min-w-10 items-center justify-between text-sm"),e[5]=f):f=e[5];let j;e[6]!==a||e[7]!==o||e[8]!==m?(j=!!a&&s.jsx("span",{className:K("whitespace-nowrap",!m&&"transition-opacity duration-100 ease-out",o?"opacity-0":"opacity-100 group-hover:opacity-0"),children:a}),e[6]=a,e[7]=o,e[8]=m,e[9]=j):j=e[9];const x=!m&&"transition-all duration-100 ease-out",y=o&&"pointer-events-auto translate-y-0 scale-100 opacity-100";let d;e[10]!==x||e[11]!==y?(d=K("absolute inset-0 flex items-center gap-1.5",x,"translate-y-0 scale-95 opacity-0","group-hover:translate-y-0 group-hover:scale-100 group-hover:opacity-100",y),e[10]=x,e[11]=y,e[12]=d):d=e[12];let g;e[13]!==t.id?(g=w=>{c(w),w&&ae.logEvent("Conversation History Item Open Menu",{conversationId:t.id})},e[13]=t.id,e[14]=g):g=e[14];let b;e[15]!==t||e[16]!==g?(b=s.jsx(At,{conversation:t,onOpenChange:g,inMainScreen:!0,isActiveConversation:!1}),e[15]=t,e[16]=g,e[17]=b):b=e[17];let S;e[18]!==d||e[19]!==b?(S=s.jsx("div",{className:d,"data-prevent-default":!0,children:b}),e[18]=d,e[19]=b,e[20]=S):S=e[20];let I;return e[21]!==S||e[22]!==j?(I=s.jsxs("div",{className:f,children:[j,S]}),e[21]=S,e[22]=j,e[23]=I):I=e[23],I};function Fe(i){"use forget";const e=H.c(24),{gizmo:t,hasConversations$:n,className:m}=i;Nt(t.gizmo.id);const{items:o,hasNextPage:c,fetchNextPage:r,isLoading:p,isFetching:h,isFetchingNextPage:u}=Ft(t.gizmo.id);let v,l;e[0]!==n||e[1]!==o.length?(v=()=>{n&&n.set(o.length>0)},l=[o.length,n],e[0]=n,e[1]=o.length,e[2]=v,e[3]=l):(v=e[2],l=e[3]),T.useEffect(v,l);let a;e[4]!==c||e[5]!==h||e[6]!==p||e[7]!==r?(a=b=>{if(p||b==null)return;const S=new IntersectionObserver(I=>{I[0].isIntersecting&&c&&!h&&r()});return S.observe(b),()=>{S.disconnect()}},e[4]=c,e[5]=h,e[6]=p,e[7]=r,e[8]=a):a=e[8];const f=a,j=o.length;let x;e[9]!==m?(x=K("mt-8 mb-14 contain-inline-size",m),e[9]=m,e[10]=x):x=e[10];let y;e[11]!==j||e[12]!==t||e[13]!==c||e[14]!==f||e[15]!==p||e[16]!==o?(y=(j||p)&&s.jsx(Jt,{gizmo:t,items:o!=null?o:[],hasNextPage:c,infiniteScrollTriggerElementRef:f}),e[11]=j,e[12]=t,e[13]=c,e[14]=f,e[15]=p,e[16]=o,e[17]=y):y=e[17];let d;e[18]!==u?(d=u&&s.jsx("div",{className:"m-4 mb-5 flex justify-center",children:s.jsx(ct,{})}),e[18]=u,e[19]=d):d=e[19];let g;return e[20]!==x||e[21]!==y||e[22]!==d?(g=s.jsxs("div",{className:x,children:[y,d]}),e[20]=x,e[21]=y,e[22]=d,e[23]=g):g=e[23],g}function Jt(i){"use forget";var j,x,y,d;const e=H.c(21),{gizmo:t,items:n,hasNextPage:m,infiniteScrollTriggerElementRef:o}=i,c=L();let r;e[0]!==c?(r=dt(c,"773249106"),e[0]=c,e[1]=r):r=e[1];const p=r,h=((d=(y=(x=(j=t==null?void 0:t.gizmo)==null?void 0:j.sharing)==null?void 0:x.subjects)==null?void 0:y.length)!=null?d:0)>0;let u;if(e[2]!==t||e[3]!==n){let g;e[5]!==t?(g=b=>{var S,I;return"owner"in b&&((S=b.owner)==null?void 0:S.user_id)!==((I=t.gizmo)==null?void 0:I.author.user_id)},e[5]=t,e[6]=g):g=e[6],u=n.some(g),e[2]=t,e[3]=n,e[4]=u}else u=e[4];const l=p&&(h||u);let a;if(e[7]!==t||e[8]!==m||e[9]!==o||e[10]!==n||e[11]!==l){let g;e[13]!==t||e[14]!==m||e[15]!==o||e[16]!==n.length||e[17]!==l?(g=(b,S)=>{const I=m&&S===n.length-3?o:void 0;return s.jsx("li",{ref:I,className:"border-token-border-light border-t first:border-t-0 last:border-b-0",children:s.jsx("div",{className:"hover:bg-token-interactive-bg-tertiary-hover",children:s.jsx(we,{conversation:b,gizmo:t,showAvatar:l})})},b.id)},e[13]=t,e[14]=m,e[15]=o,e[16]=n.length,e[17]=l,e[18]=g):g=e[18],a=n.map(g),e[7]=t,e[8]=m,e[9]=o,e[10]=n,e[11]=l,e[12]=a}else a=e[12];let f;return e[19]!==a?(f=s.jsx("ol",{children:a}),e[19]=a,e[20]=f):f=e[20],f}function ke(i,e){"use forget";const t=H.c(15),n=kt(),m=L(),o=Ue(),c=Tt(),r=Mt.useStore(),p=(n==null?void 0:n.kind)==="conversation"&&n.gizmoId!==e;let h;t[0]===Symbol.for("react.memo_cache_sentinel")?(h=[],t[0]=h):h=t[0],T.useEffect(es,h);let u;t[1]!==o||t[2]!==r||t[3]!==c?(u=async function(x){const{conversation:y,newGizmoId:d,previousGizmoId:g}=x;r.expandProject(d),await c({newGizmoId:d,conversation:y,previousGizmoId:g}),o("/g/".concat(d,"/project"))},t[1]=o,t[2]=r,t[3]=c,t[4]=u):u=t[4];const v=u;let l;t[5]!==v||t[6]!==p||t[7]!==m||t[8]!==n||t[9]!==e||t[10]!==i?(l=()=>{if(!p)return;const{conversation:j,gizmoId:x}=n;if(e)return v({conversation:j,newGizmoId:e,previousGizmoId:x});ne(m,y=>{const{onClose:d}=y;return s.jsx(_e,{onClose:d,onSuccess:g=>{if(!g)return;const b=v({conversation:j,newGizmoId:g,previousGizmoId:x});return ae.logEventWithStatsig("Projects: Create Open","chatgpt_web_projects_create_open",{source:i}),b}})})},t[5]=v,t[6]=p,t[7]=m,t[8]=n,t[9]=e,t[10]=i,t[11]=l):l=t[11];const a=l;let f;return t[12]!==p||t[13]!==a?(f={canDropConversation:p,onDropConversation:a},t[12]=p,t[13]=a,t[14]=f):f=t[14],f}function es(){return Dt()}function ts(i){"use forget";var V;const e=H.c(44),{clientThreadId:t,gizmoId:n,currentModelId:m,onRequestCompletion:o}=i,c=L(),{data:r}=ve(n),p=rt(c),h=it(lt),{onDropConversation:u,canDropConversation:v}=ke(void 0,n),[l,a]=T.useState(!1),f=ye();let j;e[0]!==c||e[1]!==n||e[2]!==f?(j=Pt(c)(n,f),e[0]=c,e[1]=n,e[2]=f,e[3]=j):j=e[3];const x=j;let y;e[4]!==v?(y=P=>{P.preventDefault(),v&&a(!0)},e[4]=v,e[5]=y):y=e[5];let d;e[6]!==v||e[7]!==u?(d=P=>{P.preventDefault(),v&&(a(!1),u())},e[6]=v,e[7]=u,e[8]=d):d=e[8];let g,b;e[9]!==v?(g=P=>{P.preventDefault(),v&&a(!0)},b=P=>{P.preventDefault(),v&&a(!1)},e[9]=v,e[10]=g,e[11]=b):(g=e[10],b=e[11]);const S=p?"last-standard":"none",I=h?"none":"standard";let F;e[12]!==r?(F=s.jsx(Ie,{gizmo:r}),e[12]=r,e[13]=F):F=e[13];let k;e[14]!==t||e[15]!==m||e[16]!==r||e[17]!==o?(k=r?s.jsx(Ht,{clientThreadId:t,isNewThread:!0,isProjectThread:!0,currentModelId:m,layoutMode:"center",onContinueGenerating:P=>o(Rt(P)),onRequestCompletion:async P=>o(await Ut(P)),hideHeader:!0}):s.jsx("div",{className:"bg-token-tertiary h-24 w-full rounded-3xl"}),e[14]=t,e[15]=m,e[16]=r,e[17]=o,e[18]=k):k=e[18];let w,z;e[19]!==r?(w=s.jsx(Qt,{gizmo:r}),z=r&&s.jsx(Fe,{gizmo:r}),e[19]=r,e[20]=w,e[21]=z):(w=e[20],z=e[21]);let O;e[22]!==(r==null?void 0:r.gizmo)||e[23]!==l?(O=l&&s.jsxs(le,{children:[s.jsx(Et,{className:"h-12 w-12",style:{color:"#3C46FF"}}),s.jsx("h3",{className:"text-center",children:s.jsx(N,$(C({},_.addConversationToNamedSnorlax),{values:{projectName:(V=r==null?void 0:r.gizmo.display.name)!=null?V:"project"}}))}),s.jsx("h4",{className:"text-center",children:s.jsx(N,C({},_.moveConversation))})]}),e[22]=r==null?void 0:r.gizmo,e[23]=l,e[24]=O):O=e[24];let A;e[25]!==w||e[26]!==z||e[27]!==O||e[28]!==F||e[29]!==k?(A=s.jsxs(Lt,{className:"[width:min(90cqw,var(--thread-content-max-width))]",children:[F,k,w,z,O]}),e[25]=w,e[26]=z,e[27]=O,e[28]=F,e[29]=k,e[30]=A):A=e[30];let R;e[31]!==A||e[32]!==S||e[33]!==I?(R=s.jsx(Gt,{verticalMargin:"none",verticalPadding:S,horizontalPadding:I,children:A}),e[31]=A,e[32]=S,e[33]=I,e[34]=R):R=e[34];let q;e[35]!==R||e[36]!==y||e[37]!==d||e[38]!==g||e[39]!==b?(q=s.jsx("div",{onDragOver:y,onDrop:d,onDragEnter:g,onDragLeave:b,className:"flex max-h-full min-h-full flex-col pt-(--header-height)",children:R}),e[35]=R,e[36]=y,e[37]=d,e[38]=g,e[39]=b,e[40]=q):q=e[40];let Q;return e[41]!==x||e[42]!==q?(Q=s.jsx(Se,{value:x,children:q}),e[41]=x,e[42]=q,e[43]=Q):Q=e[43],Q}function ss(i){return i==null?void 0:i.title}const ms=Object.freeze(Object.defineProperty({__proto__:null,SnorlaxConversationItem:we,SnorlaxConversationItemOverflowMenu:Ne,SnorlaxConversationList:Fe,SnorlaxHeader:Ie,SnorlaxSplashScreen:ts,useProjectsDragDrop:ke},Symbol.toStringTag,{value:"Module"}));export{Ne as S,us as a,ms as b,ke as u};
//# sourceMappingURL=9z485wf4plyfoo73.js.map
