var L=Object.freeze,T=Object.defineProperty,de=Object.defineProperties;var ue=Object.getOwnPropertyDescriptors;var y=Object.getOwnPropertySymbols;var D=Object.prototype.hasOwnProperty,I=Object.prototype.propertyIsEnumerable;var R=(a,t,s)=>t in a?T(a,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):a[t]=s,c=(a,t)=>{for(var s in t||(t={}))D.call(t,s)&&R(a,s,t[s]);if(y)for(var s of y(t))I.call(t,s)&&R(a,s,t[s]);return a},S=(a,t)=>de(a,ue(t));var W=(a,t)=>{var s={};for(var n in a)D.call(a,n)&&t.indexOf(n)<0&&(s[n]=a[n]);if(a!=null&&y)for(var n of y(a))t.indexOf(n)<0&&I.call(a,n)&&(s[n]=a[n]);return s};var h=(a,t)=>L(T(a,"raw",{value:L(t||a.slice())}));import{f as me,r as f,ap as ge,g as v,b as K,j as e,M as g,d as Q,s as $,e as O}from"./jj85rqzpbnvv3emr.js";import{qg as xe,qh as fe,ji as pe,qi as he,c7 as ve,c6 as je,aE as _,i as p,j as M,qj as be,R as ye,cX as Se,d as j,mM as we,a2 as F,qk as ke,f as Ae,eB as Me,B as Ne,F as k,e as P,r as E,E as Ce,v as _e,P as Pe,hj as Ee,s as V,bo as X,h as Be,ql as Le,dF as G,dY as N,ej as Re,g_ as Te,hm as De,dP as Z,dZ as Ie,T as We}from"./lef5ym39glv4981l.js";import{ai as J,a8 as ee,mm as ae,mn as Oe,mo as Fe,mp as Ge,A as Ue,N as qe,g_ as He,hz as ze,c6 as Ye,gO as Ke,mq as Qe,jY as $e,bs as Ve,B as Xe,D as Ze}from"./mclphevd122040jw.js";import{b as Je}from"./n82i9qkvs5r9bggc.js";import{W as ea}from"./mej2ctt6swvc1m1z.js";import{S as aa}from"./go9515ghq3pauvs4.js";import{S as U}from"./d9serb02oz4r1lgw.js";import{S as sa}from"./n5wrqpcxv1sjah44.js";import{L as se}from"./mw2u7timj0qnsnvj.js";function ta({cycleReferenceDate:a,cycleIndex:t,targetDate:s=new Date,period:n}){const i=n==="yearly"?xe:fe,r=i(s,t),o=A(a,r,n);return pe(o,r)?{start:A(a,i(r,-1),n),end:o}:{start:o,end:A(a,i(r,1),n)}}function A(a,t,s){return he(a,c({year:je(t)},s==="monthly"&&{month:ve(t)}))}function Ma(a=0){const t=J();return f.useMemo(()=>{var r,o,l;if(t.status==="pending")return"pending";const s=t.data;if(!s)return;const n=(o=(r=s.next_credit_grant_update)!=null?r:s.active_start)!=null?o:s.active_until;if(!n)return;let i=(l=s.billing_period)!=null?l:"monthly";if(s.last_credit_grant_update&&s.next_credit_grant_update){const d=new Date(s.last_credit_grant_update),x=new Date(s.next_credit_grant_update);if(i=be(x,d)>1?"yearly":"monthly",a===0)return{start:d,end:x,period:i}}return S(c({},ta({cycleReferenceDate:new Date(n),cycleIndex:a,period:i})),{period:i})},[t,a])}function na(){var r;const a=_(),t=p(),n=M(t,"2861925050")&&a!=null&&a.isEnterprisey()&&(a.isAdminOfAccount()||a.isOwnerOfAccount())&&a.organizationId!=null,i=me({queryKey:ia(a==null?void 0:a.organizationId),queryFn:()=>ye.safeGet("/subscriptions/{organization_id}/at_overage_limit",{parameters:{path:{organization_id:a==null?void 0:a.organizationId}}}),enabled:n});return n&&((r=i.data)==null?void 0:r.organization_at_overage_limit)===!0}function ia(a){return["is-at-overage-limit",a]}function Na(){return Se(ge("routes/admin"))}function Ca(){const a=j(n=>n.currentWorkspace),t=a!=null?ae(a.role):void 0,s=v();f.useEffect(()=>{t===!1&&s("/admin")},[t,s])}function _a(){const a=j(n=>n.currentWorkspace),t=a!=null?ee(a.role):void 0,s=v();f.useEffect(()=>{t===!1&&s("/admin")},[t,s])}function ra(){const a=we(),t=p(),s=F(t,"3131667714").get("regions",[]),n=ke(),i=F(t,"1001765573");return a&&!s.includes(n)?!1:i.get("ca_admin_enabled",!1)}function oa({accountId:a,subscription:t}){const s=K(),n=Ae(),i=Oe(a),[r,o]=f.useState(!1),l=Fe(a),d=async()=>{o(!0);try{await i.mutateAsync(a)}catch(x){n.warning(s.formatMessage(w.errorRenewingSubscription),{hasCloseButton:!0})}finally{o(!1)}};return e.jsx("div",{className:"bg-token-main-surface-secondary",children:e.jsxs("div",{className:"mx-auto flex w-full max-w-5xl items-center justify-between px-2 py-4 md:px-6 lg:px-10 lg:py-6",children:[e.jsxs("div",{className:"mx-2 grow md:mx-4",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(Me,{className:"me-4 hidden text-orange-500 md:block"}),e.jsx("p",{className:"text-lg font-semibold",children:e.jsx(g,c({},w.workspaceWillBeDeactivated))})]}),t.active_until!=null&&e.jsx("p",{className:"md:ms-8",children:e.jsx(g,S(c({},w.retainAccessUntil),{values:{expiryDate:new Date(t.active_until)}}))})]}),l&&e.jsx(Ne,{color:"primary",onClick:d,loading:r,children:e.jsx(g,c({},w.reactivateBtn))})]})})}const w=Q({retainAccessUntil:{id:"adminPage.retainAccessUntil",defaultMessage:"You will retain access to the workspace until the end of your billing cycle on {expiryDate, date, long}."},workspaceWillBeDeactivated:{id:"adminPage.workspaceWillBeDeactivated",defaultMessage:"This workspace will be deactivated."},reactivateBtn:{id:"adminPage.reactivateBtn",defaultMessage:"Reactivate"},errorRenewingSubscription:{id:"adminPage.errorRenewingSubscription",defaultMessage:"There was an error reactivating your subscription."}}),C="/admin/billing";function m(i){var r=i,{route:a,icon:t,upsellEnterprise:s=!1}=r,n=W(r,["route","icon","upsellEnterprise"]);const o=$().pathname.replace(/\/$/,"")||"/",l=v();return s?e.jsx(We,{label:e.jsx(g,c({},u.availableForEnterprise)),side:"right",contentClassName:"cant-hover:hidden",children:e.jsx(N,{as:"div",role:"button",fillContainer:!0,icon:Z,label:"name"in n?e.jsx(g,c({},n.name)):n.children})}):e.jsx(N,{as:"div",role:"button",fillContainer:!0,active:o===a,onClick:d=>{l(a),d.stopPropagation()},icon:t,label:"name"in n?e.jsx(g,c({},n.name)):n.children})}function la({workspace:a,hasAdminPrivileges:t,hasOwnerPrivileges:s}){const n=v(),i=_(),r=j(Be.isEnterpriseyPlan),o=!!i&&i.features.includes(Ge)&&r,l=f.useCallback(()=>{n("/")},[n]),d=ra(),{isComingSoon:x}=Le(),B=d||x,b=p(),ne=M(b,"2509278897"),ie=M(b,"4105779609"),re=X(),oe=(i==null?void 0:i.isTeam())&&ie,le=Ue(Ze,Xe,!1,!0),ce=K().formatMessage({id:"Q6nsOM",defaultMessage:"Close sidebar"});return e.jsxs("nav",{className:"pb-1.5",children:[!re&&e.jsx("div",{className:"h-header-height flex items-center px-2",children:e.jsx(qe,{className:"no-draggable","aria-label":ce,onClick:()=>{G.setSidebarOpen(!1)},icon:le,mobileIcon:He,"data-testid":"close-sidebar-button"})}),e.jsx("div",{className:"h-header-height flex flex-col justify-center",children:e.jsx(N,{as:"button",onClick:l,icon:e.jsx(ze,{className:"icon-sm"}),label:e.jsx(g,c({},u.backToChat))})}),e.jsxs("div",{className:"flex flex-col",children:[e.jsxs("div",{className:P("flex flex-col gap-2 rounded p-4",s&&"hover:bg-token-main-surface-secondary cursor-pointer"),onClick:()=>{s&&G.openModal(Re.WorkspaceAppearance)},children:[e.jsx(Ye,{size:"large",src:a==null?void 0:a.profilePictureUrl}),e.jsxs("div",{className:"align-center flex min-w-0 flex-row",children:[e.jsx("h2",{className:"text-token-text-primary flex-1 truncate text-lg dark:text-white",children:a==null?void 0:a.name}),s?e.jsx("div",{className:"my-auto h-4 flex-initial align-middle dark:text-white",children:e.jsx(Ke,{className:"icon-sm opacity-70 hover:opacity-100"})}):null]})]}),e.jsx(m,{route:"/admin",icon:sa,name:u.membersPageTitle}),r&&e.jsx(m,{route:"/admin/groups",icon:U,upsellEnterprise:!r,name:O({id:"aecR1i",defaultMessage:"Groups"})}),t&&e.jsx(m,{route:C,icon:Qe,name:u.billing}),s&&e.jsx(m,{route:"/admin/gpts",icon:$e,name:u.gpts}),t&&(B||ne)&&e.jsx(m,{route:"/admin/ca",icon:Ve,name:u.connections}),s&&e.jsx(m,{route:"/admin/settings",icon:Te,name:u.settings}),!r&&e.jsx("span",{className:"border-y-token-border-heavy mx-3 border-t"}),!r&&e.jsx(m,{route:"/admin/groups",icon:U,upsellEnterprise:!r,name:O({id:"aecR1i",defaultMessage:"Groups"})}),t&&e.jsx(m,{route:"/admin/usage",icon:aa,upsellEnterprise:!r,children:e.jsx("div",{className:"flex flex-row items-center gap-2",children:e.jsx(g,c({},u.userAnalytics))})}),s&&e.jsx(m,{route:"/admin/identity",upsellEnterprise:!r&&!oe,icon:De,name:u.identity}),s&&o&&e.jsx(m,{route:"/admin/ip-allowlist",icon:Z,name:u.ipAllowlist}),!1]})]})}function Pa({mobilePageTitle:a,requireAdminPrivileges:t=!1,requireOwnerPrivileges:s=!1,children:n}){const i=j(b=>b.currentWorkspace),r=v(),o=i!=null?ae(i.role):void 0,l=i!=null?ee(i.role):void 0;f.useEffect(()=>{t&&o===!1&&r("/admin"),s&&l===!1&&r("/admin")},[t,o,r,s,l]);const d=X(),x=p();return E(x)==null?null:e.jsxs(e.Fragment,{children:[e.jsx(Je,{mobileHeaderContent:a,mobileHeaderRightContent:e.jsx(se,{}),forceOpenDesktopSidebar:d,renderNavSidebar:()=>e.jsx(la,{workspace:i!=null?i:void 0,hasAdminPrivileges:o,hasOwnerPrivileges:l}),children:n}),i==null?null:e.jsx(ea,{workspace:i})]})}function ca(){return e.jsxs(e.Fragment,{children:[e.jsx(da,{}),e.jsx(ua,{})]})}function da(){const{data:a}=J(),t=p(),s=E(t),n=s&&a&&a.plan_type===_e.SELF_SERVE_BUSINESS&&!a.will_renew;return e.jsx(e.Fragment,{children:n&&e.jsx(oa,{accountId:s.id,subscription:a})})}function ua(){const a=_(),t=na(),s=$().pathname!==C;return f.useEffect(()=>{t&&Pe.logEventWithStatsig("ChatGPT Credits: At Overage Limit Banner Shown","chatgpt_credits_at_overage_limit_banner_shown",{workspaceId:a==null?void 0:a.id,workspaceName:a==null?void 0:a.name})},[t,a]),e.jsx(e.Fragment,{children:t&&e.jsx("div",{className:"text-token-interactive-label-danger-secondary-default bg-token-bg-status-error",children:e.jsxs("div",{className:"mx-auto flex w-full max-w-5xl items-center justify-center px-2 py-4 text-xs md:px-6 lg:px-10",children:[e.jsx(Ee,{className:"me-2 shrink-0"}),e.jsx(g,S(c({},u.atOverageLimitBannerText),{values:{link:n=>s?e.jsx(V,{className:"mx-1",href:C,children:n}):n}}))]})})})}var q;const te=k.div(q||(q=h(["w-full flex-row items-center gap-2"])));var H;const ma=k(te)(H||(H=h(["text-sm text-token-text-tertiary"])));var z;const ga=k.div(z||(z=h(["mx-auto w-full max-w-4xl px-2 md:px-6 lg:px-10"])));function Ea({title:a,subtitle:t,actions:s,tabsHeader:n,badge:i,navigation:r}){return e.jsxs(e.Fragment,{children:[e.jsx(ca,{}),e.jsxs("div",{className:P("border-token-bg-tertiary flex flex-col gap-6 border-b md:mt-12",!n&&"pb-6"),children:[r&&e.jsx("div",{className:"mx-auto w-full max-w-4xl px-2 md:px-6 lg:px-10",children:r}),e.jsx("div",{className:"mx-auto w-full max-w-4xl px-2 md:block md:px-6 lg:px-10",children:e.jsxs("div",{className:"flex flex-row items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs(te,{className:"hidden md:flex",children:[e.jsx("h2",{children:a}),i]}),t&&e.jsx(ma,{className:"mt-1",children:t})]}),e.jsx("div",{className:"flex",children:s})]})}),n&&e.jsx(ga,{children:n})]}),e.jsx("div",{className:"absolute end-0 top-0 hidden px-2 py-1.5 md:block",children:e.jsx(se,{})})]})}function Ba({items:a}){return e.jsx("div",{className:"text-token-text-secondary text-caption-regular flex items-center gap-2",children:a.map((t,s)=>{const n=P(s===a.length-1?"text-token-text-primary":"text-token-text-secondary","no-underline");return e.jsxs(e.Fragment,{children:[t.href?e.jsx(V,{href:t.href,style:{textDecoration:"none"},className:n,children:t.label},s):e.jsx("div",{className:n,children:t.label},s),s<a.length-1&&e.jsx(Ie,{className:"icon-sm"})]})})})}var Y;const xa=k.div(Y||(Y=h(["max-w-4xl mx-auto w-full px-2 md:px-6 lg:px-10 pb-10"])));function La({children:a,showSpinner:t,skipLegacyWorkspaceCheck:s}){const n=p(),i=E(n),r=j(d=>d.currentWorkspace),o=!s&&!r,l=!i||t;return e.jsxs(xa,{children:[l&&e.jsx("div",{className:"flex min-h-[80vh] items-center justify-center",children:e.jsx(Ce,{})}),!l&&o&&e.jsx("div",{className:"flex min-h-[80vh] items-center justify-center",children:e.jsx(g,c({},u.workspaceNotFound))}),!l&&!o&&a]})}const u=Q({workspaceNotFound:{id:"adminPage.workspaceNotFound",defaultMessage:"Workspace not found"},backToChat:{id:"adminPage.backToChat",defaultMessage:"Back to chat"},membersPageTitle:{id:"adminPage.membersPageTitle",defaultMessage:"Members"},analytics:{id:"adminPage.analytics",defaultMessage:"Analytics"},userAnalytics:{id:"adminPage.userAnalytics",defaultMessage:"User analytics"},billing:{id:"adminPage.billing.1",defaultMessage:"Billing"},gpts:{id:"adminPage.gpts",defaultMessage:"GPTs"},connections:{id:"adminPage.connections",defaultMessage:"Connectors"},settings:{id:"BExb/1",defaultMessage:"Settings & permissions"},identity:{id:"adminPage.identity.0",defaultMessage:"Identity & provisioning"},ipAllowlist:{id:"adminPage.ipAllowlist",defaultMessage:"IP allowlist"},availableForEnterprise:{id:"adminPage.availableForEnterprise",defaultMessage:"Available for Enterprise plan"},atOverageLimitBannerText:{id:"adminPage.atOverageLimitBannerText",defaultMessage:"Your organization has reached its credit overage limit. Access to advanced features is paused. <link>Adjust the limit</link> to restore access."},agreements:{id:"workspaceAgreements.agreementsTitle",defaultMessage:"Agreements"}});export{Pa as A,Ea as a,Ba as b,La as c,_a as d,na as e,Ma as f,ia as g,Ca as h,ra as i,Na as u};
//# sourceMappingURL=fya3qb1e1s8z4llj.js.map
