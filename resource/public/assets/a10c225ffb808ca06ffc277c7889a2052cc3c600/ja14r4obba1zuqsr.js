var _s=Object.defineProperty,ws=Object.defineProperties;var vs=Object.getOwnPropertyDescriptors;var gs=Object.getOwnPropertySymbols;var Ns=Object.prototype.hasOwnProperty,Es=Object.prototype.propertyIsEnumerable;var fs=(i,e,a)=>e in i?_s(i,e,{enumerable:!0,configurable:!0,writable:!0,value:a}):i[e]=a,p=(i,e)=>{for(var a in e||(e={}))Ns.call(e,a)&&fs(i,a,e[a]);if(gs)for(var a of gs(e))Es.call(e,a)&&fs(i,a,e[a]);return i},Le=(i,e)=>ws(i,vs(e));import{b as re,g as ns,r as v,j as s,M as c,d as ze,u as os,a as ls,f as As,t as Ps,c as Oe,i as Is,G as Ts}from"./jj85rqzpbnvv3emr.js";import{a6 as Ls,at as Ue,nG as ss,nH as w,v4 as Rs,cy as Ws,v5 as Ds,v6 as Os,v7 as Gs,d9 as Fs,nF as Ks,fH as Us,aU as zs,bL as Vs,jU as Hs}from"./mclphevd122040jw.js";import{qE as ks,qa as js,B as ye,e as Bs,E as rs,g_ as qs,C as cs,T as Ys,f as Xe,R as Qe,hu as ps,qX as $s,aE as Ve,mM as Xs,i as ts,j4 as as,qG as y,bi as Qs,m as ys,i9 as Js,j as es,qF as Zs,pk as He,nR as et,qH as st,n as tt,qS as at,lT as Be,pb as it,pc as nt,jH as ot,pd as lt,im as rt,io as ct,ld as dt,I as mt,aI as ut,sV as gt,of as ft,gE as pt,si as xt,sW as ht}from"./lef5ym39glv4981l.js";import{l as Cs,m as bt,c as kt,d as jt,e as yt,f as Ct,h as St}from"./jprx81py211obz0t.js";import{U as Mt,u as _t,E as wt,C as vt,R as Nt,P as Et,i as At}from"./dkg3g1u21u0d8m8u.js";import{S as Pt}from"./gxhsars2vrugs5ht.js";import{T as je}from"./i5991cad8s41d2db.js";import{C as z}from"./d2q2nhqj7harnnku.js";import{W as $e}from"./nw87b28zzjde4xnt.js";import{E as It}from"./fe7euoed9h00rh41.js";import{u as Tt,m as Re,F as Lt}from"./mej2ctt6swvc1m1z.js";import{m as De,C as Rt}from"./ewikj0vzclfii1lc.js";import{T as Wt,a as Dt}from"./ghs0b9qiouvv0rxl.js";import{a as Ot,c as Gt,u as Ft,d as Kt}from"./fya3qb1e1s8z4llj.js";import"./iggidwj20lqhrnfm.js";import"./dta5t6ifyam55mk9.js";import"./n82i9qkvs5r9bggc.js";import"./9z485wf4plyfoo73.js";import"./cncd8uuk5eicbkeu.js";import"./cdk0cmbgnafohb1q.js";import"./gyvvad7btmtz1x9o.js";import"./n6vmm5pyahusdy8e.js";import"./l041el2tch1t3nkf.js";import"./easgat082167v0i8.js";import"./dvqe6kc43fkjsavv.js";import"./mw2u7timj0qnsnvj.js";import"./hnotrmacgvnfyexv.js";import"./go9515ghq3pauvs4.js";import"./d9serb02oz4r1lgw.js";import"./n5wrqpcxv1sjah44.js";function Ut({workspaceId:i}){const e=re(),a=ns(),[t,n]=v.useState(""),{data:l,isLoading:m,isPlaceholderData:r}=Cs({workspaceId:i}),[d,o]=v.useState(!1),f=v.useMemo(()=>l==null?void 0:l.data.filter(k=>{var A;return!k.predefined_role&&(k.name.toLowerCase().includes(t.toLowerCase())||((A=k.description)==null?void 0:A.toLowerCase().includes(t.toLowerCase())))}),[l==null?void 0:l.data,t]),u=k=>{k&&n(""),o(k)},h=ks(),{createRole:x}=bt({workspaceId:i,currentRoles:f,bootstrapResources:h?["connectors"]:void 0});return s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"mt-6 mb-3 flex flex-row justify-between gap-2",children:[s.jsx(js,{inputClassName:"w-[250px] rounded-full! text-sm",value:t,onChange:k=>{n(k.target.value)},placeholder:e.formatMessage({id:"workspaceSettings.roles.search",defaultMessage:"Search role name"})}),s.jsx(ye,{onClick:()=>u(!0),icon:Pt,children:s.jsx(c,{id:"workspaceSettings.roles.create",defaultMessage:"Create role"})})]}),s.jsx("div",{children:s.jsxs(je.Root,{className:"min-w-full",children:[s.jsxs("colgroup",{children:[s.jsx("col",{className:"w-[70%]"}),s.jsx("col",{className:"w-[30%]"})]}),s.jsxs(je.Header,{children:[s.jsx(je.HeaderCell,{children:s.jsx(c,{id:"workspaceSettings.roles.roleName",defaultMessage:"Role name"})}),s.jsx(je.HeaderCell,{children:s.jsx(c,{id:"workspaceSettings.roles.created",defaultMessage:"Last updated by"})}),s.jsx(je.HeaderCell,{})]}),s.jsx(je.Body,{className:Bs((m||r)&&"opacity-50"),children:f==null?s.jsx(je.Row,{children:s.jsx(je.Cell,{colSpan:5,textAlign:"center",children:s.jsx(rs,{})})}):f.length===0?s.jsx(je.Row,{children:s.jsx(je.Cell,{colSpan:5,textAlign:"center",children:t===""?s.jsx(c,{id:"workspaceSettings.roles.noRoles",defaultMessage:"No roles found."}):s.jsx(c,{id:"workspaceSettings.roles.noRolesWithFilter",defaultMessage:"No roles found. Try changing the search query."})})}):f.map(k=>s.jsx(zt,{role:k},k.id))})]})}),d&&s.jsx(Mt,{onClose:()=>u(!1),onSave:async k=>{const A=await x(k);a("/admin/permissions/roles/".concat(A.role.id))},isCreate:!0})]})}function zt({role:i}){var a,t;const e=ns();return s.jsx(s.Fragment,{children:s.jsxs(je.Row,{className:"[&>td]:py-2",onClick:()=>{e("/admin/permissions/roles/".concat(i.id))},children:[s.jsx(je.Cell,{children:s.jsxs("div",{className:"flex flex-row items-center gap-3",children:[s.jsx("div",{children:i.predefined_role?s.jsx(Ls,{className:"icon"}):s.jsx(qs,{className:"icon"})}),s.jsxs("div",{children:[s.jsx("div",{children:i.name}),s.jsx("div",{className:"text-token-text-tertiary text-sm",children:i.description})]})]})}),s.jsx(je.Cell,{className:"truncate lowercase",children:(t=(a=i.created_by_user_obj)==null?void 0:a.email)!=null?t:""})]})})}const b=ze({workspaceDetails:{id:"workspaceSettings.workspaceDetails",defaultMessage:"Workspace details"},ekmSettingsLabel:{id:"workspaceSettings.ekmSettingsLabel",defaultMessage:"Enterprise key management"},ekmSettingsEnabled:{id:"workspaceSettings.ekmSettingsEnabled",defaultMessage:"Enabled"},ekmTypeLabel:{id:"workspaceSettings.ekmTypeLabel",defaultMessage:"EKM type"},ekmTypeAws:{id:"workspaceSettings.ekmTypeAws",defaultMessage:"AWS"},ekmTypeGcp:{id:"workspaceSettings.ekmTypeGcp",defaultMessage:"GCP"},ekmTypeAzure:{id:"workspaceSettings.ekmTypeAzure",defaultMessage:"Azure"},ekmTypeDevelopment:{id:"workspaceSettings.ekmTypeDevelopment",defaultMessage:"Development"},ekmNameLabel:{id:"workspaceSettings.ekmNameLabel",defaultMessage:"Name"},ekmAwsRoleArn:{id:"workspaceSettings.ekmAwsRoleArn",defaultMessage:"AWS role ARN"},ekmAwsExternalId:{id:"workspaceSettings.ekmAwsExternalId",defaultMessage:"AWS external ID"},ekmAwsKmsArn:{id:"workspaceSettings.ekmAwsKmsArn",defaultMessage:"AWS KMS ARN"},ekmGcpWorkloadIdentityProjectNumber:{id:"workspaceSettings.ekmGcpWorkloadIdentityProjectNumber",defaultMessage:"GCP workload identity project number"},ekmGcpWorkloadIdentityPoolId:{id:"workspaceSettings.ekmGcpWorkloadIdentityPoolId",defaultMessage:"GCP workload identity pool ID"},ekmGcpWorkloadIdentityProviderId:{id:"workspaceSettings.ekmGcpWorkloadIdentityProviderId",defaultMessage:"GCP workload identity provider ID"},ekmGcpAudience:{id:"workspaceSettings.ekmGcpAudience",defaultMessage:"GCP audience"},ekmGcpKmsProjectId:{id:"workspaceSettings.ekmGcpKmsProjectId",defaultMessage:"GCP KMS project ID"},ekmGcpKmsKeyRingName:{id:"workspaceSettings.ekmGcpKmsKeyRingName",defaultMessage:"GCP KMS key ring"},ekmGcpKmsKeyName:{id:"workspaceSettings.ekmGcpKmsKeyName",defaultMessage:"GCP KMS key name"},ekmGcpKmsKeyLocation:{id:"workspaceSettings.ekmGcpKmsKeyLocation",defaultMessage:"GCP KMS key location"},ekmAzureTenantId:{id:"workspaceSettings.ekmAzureTenantId",defaultMessage:"Azure tenant ID"},ekmAzureVaultUri:{id:"workspaceSettings.ekmAzureVaultUri",defaultMessage:"Azure Key Vault URI"},ekmAzureKeyName:{id:"workspaceSettings.ekmAzureKeyName",defaultMessage:"Azure key name"},workspacePolicySection:{id:"workspaceSettings.workspacePolicySection",defaultMessage:"Workspace Policy"},workspacePolicySectionDescription:{id:"workspaceSettings.workspacePolicySectionDescription",defaultMessage:"Please include your policy or the key policy details you want users to see before they use ChatGPT. Markdown is supported for formatting, and you can include a link to your policy."},workspacePolicyToggleLabel:{id:"workspaceSettings.workspacePolicyToggleLabel",defaultMessage:"Show policy to users in this workspace"},workspacePolicyTextareaPlaceholder:{id:"workspaceSettings.workspacePolicyTextareaPlaceholder",defaultMessage:"Enter workspace policy"},workspacePolicyPreview:{id:"workspaceSettings.workspacePolicyPreview",defaultMessage:"Preview"},workspacePolicySave:{id:"workspaceSettings.workspacePolicySave",defaultMessage:"Save"},workspaceInstructionSection:{id:"workspaceSettings.workspaceInstructionSection",defaultMessage:"Workspace Instructions"},systemInstructionDescription:{id:"workspaceSettings.workspaceInstruction",defaultMessage:"Add anything you'd like ChatGPT to consider in its response. These instructions will be added to every new conversation for users in your workspace going forward"},workspaceInstructionSave:{id:"workspaceSettings.workspaceInstructionSave",defaultMessage:"Save"},retentionInfinite:{id:"workspaceSettings.retentionInfinite",defaultMessage:"Infinite"},retentionNinetyDays:{id:"workspaceSettings.retentionNinetyDays",defaultMessage:"90 days"},retentionOneYear:{id:"workspaceSettings.retentionOneYear",defaultMessage:"1 year"},retentionCustomDays:{id:"workspaceSettings.retentionCustomDays",defaultMessage:"{num} days"},retentionSettingTooltip:{id:"workspaceSettings.retentionSettingTooltip",defaultMessage:"Contact your account manager to change this setting"},workspaceMembersOnlySelect:{id:"workspaceSettings.workspaceMembersOnlySelect",defaultMessage:"Workspace members only"},noOneSelect:{id:"workspaceSettings.noOneSelect",defaultMessage:"No one"},deleteWorkspaceMemoryModalTitle:{id:"workspaceSettings.deleteWorkspaceMemoryModalTitle",defaultMessage:"Are you sure?"},deleteWorkspaceMemoryModalConfirm:{id:"workspaceSettings.deleteWorkspaceMemoryModalConfirm",defaultMessage:"Disable and delete memories"},deleteWorkspaceMemoryModalCancel:{id:"workspaceSettings.deleteWorkspaceMemoryModalCancel",defaultMessage:"Cancel"},deleteWorkspaceMemoryModalInfo:{id:"workspaceSettings.groups.deleteWorkspaceMemoryModalInfo",defaultMessage:"If you disable memory for your workspace, <b>members' existing memories will be forgotten</b>. This can't be undone."}}),Vt=({onConfirm:i,onClose:e})=>{const a=re();return s.jsx(cs,{testId:"modal-disable-workspace-memory",type:"warning",isOpen:!0,onClose:e,title:a.formatMessage(b.deleteWorkspaceMemoryModalTitle),showCloseButton:!0,primaryButton:s.jsx(ye,{color:"danger",onClick:i,children:s.jsx(c,p({},b.deleteWorkspaceMemoryModalConfirm))}),secondaryButton:s.jsx(ye,{onClick:e,color:"secondary",children:s.jsx(c,p({},b.deleteWorkspaceMemoryModalCancel))}),children:s.jsx("div",{className:"text-token-text-primary mb-2 text-sm",children:s.jsx(c,Le(p({},b.deleteWorkspaceMemoryModalInfo),{values:{b:t=>s.jsx("b",{children:t})}}))})})},ds=60*60*24,Ht=ds*90,Bt=ds*365,qt=({data:i})=>{var n;const e=re(),a=(n=i.conversation_ttl)!=null?n:null;let t;return a==null?t=e.formatMessage(b.retentionInfinite):a===Ht?t=e.formatMessage(b.retentionNinetyDays):a===Bt?t=e.formatMessage(b.retentionOneYear):t=e.formatMessage(b.retentionCustomDays,{num:Math.floor(a/ds)}),s.jsx(Ys,{label:e.formatMessage(b.retentionSettingTooltip),children:t})},is=({workspaceId:i})=>{const e=Xe(),a=os(),t=re();return ls({mutationFn:({feature:n,enabled:l})=>Qe.safePost("/accounts/{account_id}/beta_features",{parameters:{path:{account_id:i}},requestBody:{feature:n,value:l}}),onSettled:()=>{a.invalidateQueries({queryKey:["workspace-settings"]})},onError:()=>{e.danger(t.formatMessage(Ss.featureSettingsUpdateFailed,{toastId:"workspace_settings"}))}})},Yt=({workspaceId:i})=>{const e=Xe(),a=os(),t=re();return ls({mutationFn:({setting:n,value:l})=>Qe.safePost("/accounts/{account_id}/settings/share_settings",{parameters:{path:{account_id:i}},requestBody:{setting:n,value:l}}),onSettled:()=>{a.invalidateQueries({queryKey:["workspace-settings"]})},onError:()=>{e.danger(t.formatMessage(Ss.featureSettingsUpdateFailed,{toastId:"share_settings_row"}))}})},Ss=ze({featureSettingsUpdateFailed:{id:"workspaceSettings.featureSettingsUpdateFailed",defaultMessage:"Failed to update feature setting"}}),$t=({workspaceId:i,defaultValue:e,disabled:a=!1})=>{var r;const{variables:t,mutate:n}=Yt({workspaceId:i}),l=[{display:b.workspaceMembersOnlySelect,value:ps.WORKSPACE_ONLY},{display:b.noOneSelect,value:ps.NO_ONE}],m=$s.CHAT_SHARE_SETTINGS;return s.jsxs(Ue.Root,{defaultValue:(r=t==null?void 0:t.value)!=null?r:e,onValueChange:d=>{n({setting:m,value:d})},disabled:a,children:[s.jsxs(Ue.Trigger,{className:"text-md focus-visible:border-none",children:[s.jsx(Ue.Value,{}),s.jsx(Ue.Icon,{})]}),s.jsx(Ue.Portal,{children:s.jsx(Ue.Content,{children:l.map((d,o)=>s.jsx(Ue.Item,{className:"text-md",value:d.value,children:s.jsx(c,p({},d.display))},o))})})]})};function Xt(){const i=Ve();return(i==null?void 0:i.data.ekmConfig)!=null}function Qt(){const i=Ve();return(i==null?void 0:i.data.computeResidency)!==""&&(i==null?void 0:i.data.computeResidency)!=="no_constraint"}const Jt=({workspaceId:i})=>{var r,d,o,f,u,h,x,k,A,N,I,g,T,_,E,C,M,L,P,S,O;const e=re(),a=Xe(),t=Ve(),n=Xs(),l=Qt(),m=Xt();return s.jsx($e,{title:b.workspaceDetails,children:s.jsxs(ss,{children:[s.jsxs(w,{children:[s.jsx(c,{id:"SgdcRQ",defaultMessage:"Organization ID"}),s.jsx(z,{value:(r=t==null?void 0:t.data.organizationId)!=null?r:"",onCopied:()=>a.success(e.formatMessage({id:"Ctw3o0",defaultMessage:"Copied organization ID"}))})]}),s.jsxs(w,{children:[s.jsx(c,{id:"yFldxx",defaultMessage:"Workspace ID"}),s.jsx(z,{value:i,onCopied:()=>a.success(e.formatMessage({id:"CqDpiM",defaultMessage:"Copied workspace ID"}))})]}),n&&s.jsxs(w,{children:[s.jsx(c,{id:"ql2W8E",defaultMessage:"Data Residency Region"}),s.jsx(z,{value:(d=t==null?void 0:t.data.residencyRegion)!=null?d:"",onCopied:()=>a.success(e.formatMessage({id:"gL43UM",defaultMessage:"Copied data residency"}))})]}),l&&s.jsxs(w,{children:[s.jsx(c,{id:"0l7rYd",defaultMessage:"Inference Residency Region"}),s.jsx(z,{value:(o=t==null?void 0:t.data.computeResidencyDisplayName)!=null?o:"",onCopied:()=>a.success(e.formatMessage({id:"DbwXiz",defaultMessage:"Copied inference residency"})),tooltip:t==null?void 0:t.data.computeResidencyDescription})]}),m&&s.jsxs(v.Fragment,{children:[s.jsxs(w,{children:[s.jsx(c,p({},b.ekmSettingsLabel)),s.jsx("p",{className:"text-md inline-flex items-center",children:s.jsx(c,p({},b.ekmSettingsEnabled))})]}),(t==null?void 0:t.data.ekmConfig)&&s.jsxs(v.Fragment,{children:[s.jsxs(w,{children:[s.jsx(c,p({},b.ekmTypeLabel)),s.jsxs("p",{className:"text-md inline-flex items-center",children:[(t==null?void 0:t.data.ekmConfig.type)==="aws"&&s.jsx(c,p({},b.ekmTypeAws)),(t==null?void 0:t.data.ekmConfig.type)==="gcp"&&s.jsx(c,p({},b.ekmTypeGcp)),(t==null?void 0:t.data.ekmConfig.type)==="azure"&&s.jsx(c,p({},b.ekmTypeAzure)),(t==null?void 0:t.data.ekmConfig.type)==="development"&&s.jsx(c,p({},b.ekmTypeDevelopment))]})]}),(t==null?void 0:t.data.ekmConfig.type)==="aws"&&s.jsxs(v.Fragment,{children:[s.jsxs(w,{children:[s.jsx(c,p({},b.ekmNameLabel)),s.jsx(z,{value:(f=t==null?void 0:t.data.ekmConfig.name)!=null?f:"",onCopied:()=>a.success(e.formatMessage({id:"6LvE2Y",defaultMessage:"Copied EKM name"}))})]}),s.jsxs(w,{children:[s.jsx(c,p({},b.ekmAwsRoleArn)),s.jsx(z,{value:(u=t==null?void 0:t.data.ekmConfig.role_arn)!=null?u:"",onCopied:()=>a.success(e.formatMessage({id:"4bdi09",defaultMessage:"Copied AWS role ARN"}))})]}),s.jsxs(w,{children:[s.jsx(c,p({},b.ekmAwsExternalId)),s.jsx(z,{value:(h=t==null?void 0:t.data.ekmConfig.external_id)!=null?h:"",onCopied:()=>a.success(e.formatMessage({id:"vA49q7",defaultMessage:"Copied AWS external ID"}))})]}),s.jsxs(w,{children:[s.jsx(c,p({},b.ekmAwsKmsArn)),s.jsx(z,{value:(x=t==null?void 0:t.data.ekmConfig.kms_arn)!=null?x:"",onCopied:()=>a.success(e.formatMessage({id:"OrGb/E",defaultMessage:"Copied AWS KMS ARN"}))})]})]}),(t==null?void 0:t.data.ekmConfig.type)==="gcp"&&s.jsxs(v.Fragment,{children:[s.jsxs(w,{children:[s.jsx(c,p({},b.ekmNameLabel)),s.jsx(z,{value:(k=t==null?void 0:t.data.ekmConfig.name)!=null?k:"",onCopied:()=>a.success(e.formatMessage({id:"6LvE2Y",defaultMessage:"Copied EKM name"}))})]}),s.jsxs(w,{children:[s.jsx(c,p({},b.ekmGcpWorkloadIdentityProjectNumber)),s.jsx(z,{value:(A=t==null?void 0:t.data.ekmConfig.workload_identity_project_number)!=null?A:"",onCopied:()=>a.success(e.formatMessage({id:"YqzX4K",defaultMessage:"Copied GCP workload identity project number"}))})]}),s.jsxs(w,{children:[s.jsx(c,p({},b.ekmGcpWorkloadIdentityPoolId)),s.jsx(z,{value:(N=t==null?void 0:t.data.ekmConfig.workload_identity_pool_id)!=null?N:"",onCopied:()=>a.success(e.formatMessage({id:"chEtMi",defaultMessage:"Copied GCP workload identity pool ID"}))})]}),s.jsxs(w,{children:[s.jsx(c,p({},b.ekmGcpWorkloadIdentityProviderId)),s.jsx(z,{value:(I=t==null?void 0:t.data.ekmConfig.workload_identity_provider_id)!=null?I:"",onCopied:()=>a.success(e.formatMessage({id:"/T7kiu",defaultMessage:"Copied GCP workload identity provider ID"}))})]}),s.jsxs(w,{children:[s.jsx(c,p({},b.ekmGcpAudience)),s.jsx(z,{value:(g=t==null?void 0:t.data.ekmConfig.audience)!=null?g:"",onCopied:()=>a.success(e.formatMessage({id:"/uFjyv",defaultMessage:"Copied GCP audience"}))})]}),s.jsxs(w,{children:[s.jsx(c,p({},b.ekmGcpKmsProjectId)),s.jsx(z,{value:(T=t==null?void 0:t.data.ekmConfig.kms_project_id)!=null?T:"",onCopied:()=>a.success(e.formatMessage({id:"gjI8eK",defaultMessage:"Copied GCP KMS project ID"}))})]}),s.jsxs(w,{children:[s.jsx(c,p({},b.ekmGcpKmsKeyRingName)),s.jsx(z,{value:(_=t==null?void 0:t.data.ekmConfig.kms_key_ring_name)!=null?_:"",onCopied:()=>a.success(e.formatMessage({id:"3dwsVC",defaultMessage:"Copied GCP KMS key ring"}))})]}),s.jsxs(w,{children:[s.jsx(c,p({},b.ekmGcpKmsKeyName)),s.jsx(z,{value:(E=t==null?void 0:t.data.ekmConfig.kms_key_name)!=null?E:"",onCopied:()=>a.success(e.formatMessage({id:"gHjKrz",defaultMessage:"Copied GCP KMS key name"}))})]}),s.jsxs(w,{children:[s.jsx(c,p({},b.ekmGcpKmsKeyLocation)),s.jsx(z,{value:(C=t==null?void 0:t.data.ekmConfig.kms_key_location)!=null?C:"",onCopied:()=>a.success(e.formatMessage({id:"0GOofF",defaultMessage:"Copied GCP KMS key location"}))})]})]}),(t==null?void 0:t.data.ekmConfig.type)==="azure"&&s.jsxs(v.Fragment,{children:[s.jsxs(w,{children:[s.jsx(c,p({},b.ekmNameLabel)),s.jsx(z,{value:(M=t==null?void 0:t.data.ekmConfig.name)!=null?M:"",onCopied:()=>a.success(e.formatMessage({id:"6LvE2Y",defaultMessage:"Copied EKM name"}))})]}),s.jsxs(w,{children:[s.jsx(c,p({},b.ekmAzureTenantId)),s.jsx(z,{value:(L=t==null?void 0:t.data.ekmConfig.tenant_id)!=null?L:"",onCopied:()=>a.success(e.formatMessage({id:"vH6cbU",defaultMessage:"Copied Azure tenant ID"}))})]}),s.jsxs(w,{children:[s.jsx(c,p({},b.ekmAzureVaultUri)),s.jsx(z,{value:(P=t==null?void 0:t.data.ekmConfig.vault_uri)!=null?P:"",onCopied:()=>a.success(e.formatMessage({id:"riTMZV",defaultMessage:"Copied Azure Key Vault URI"}))})]}),s.jsxs(w,{children:[s.jsx(c,p({},b.ekmAzureKeyName)),s.jsx(z,{value:(S=t==null?void 0:t.data.ekmConfig.key_name)!=null?S:"",onCopied:()=>a.success(e.formatMessage({id:"+LPUTz",defaultMessage:"Copied Azure key name"}))})]})]}),(t==null?void 0:t.data.ekmConfig.type)==="development"&&s.jsxs(w,{children:[s.jsx(c,p({},b.ekmNameLabel)),s.jsx(z,{value:(O=t==null?void 0:t.data.ekmConfig.name)!=null?O:"",onCopied:()=>a.success(e.formatMessage({id:"6LvE2Y",defaultMessage:"Copied EKM name"}))})]})]})]})]})})};function Zt(i){return As({queryKey:["workspace-system-instruction",i],queryFn:i?()=>Qe.safeGet("/accounts/{account_id}/system_instruction",{parameters:{path:{account_id:i}}}):Ps})}function ea(i){const e=os();return ls({mutationFn:a=>Qe.safePost("/accounts/{account_id}/system_instruction",{parameters:{path:{account_id:i}},requestBody:{system_instruction:a}}),onSuccess:()=>{e.invalidateQueries({queryKey:["workspace-system-instruction",i]})}})}const sa=({workspaceId:i,upsellEnterprise:e})=>{const a=Ve(),t=a&&a.features.includes(Rs),{data:n}=Zt(i),l=ea(i),[m,r]=v.useState("");return v.useEffect(()=>{n&&t&&r(n.system_instruction)},[n,t]),t?s.jsx($e,{title:b.workspaceInstructionSection,upsellEnterprise:e,description:b.systemInstructionDescription,children:s.jsxs(w,{className:"flex-col gap-2",children:[s.jsx(It,{className:"border-token-border-default focus-within:border-token-border-heavy focus-within:ring-token-text-secondary bg-token-bg-primary w-full resize-y rounded-md border px-3 py-2 font-mono text-xs shadow-none focus-within:ring-1",value:m,placeholder:"How should ChatGPT behave? What traits should it have? What should it know about your company?",onChange:d=>r(d.target.value),rows:5,disabled:e}),s.jsx("div",{className:"flex justify-end",children:s.jsx(ye,{size:"small",onClick:()=>l.mutate(m),disabled:l.isPending||m===(n==null?void 0:n.system_instruction)||e,children:s.jsx(c,p({},b.workspaceInstructionSave))})})]})}):null},ta=({onClose:i,content:e})=>{const a=re();return s.jsx(cs,{testId:"modal-workspace-policy-preview",isOpen:!0,onClose:i,type:"success",title:a.formatMessage(aa.title),size:"xlarge",shouldIgnoreClickOutside:!0,showCloseButton:!0,className:"h-[50vh]! min-h-[500px]!",children:s.jsx("div",{className:"flex flex-col gap-6",children:s.jsx(Ws,{size:"small",className:"px-4 md:px-6",children:e})})})},aa=ze({title:{id:"Jf/LUp",defaultMessage:"Workspace Policy Preview"}}),ia=({workspaceId:i,data:e,upsellEnterprise:a})=>{const t=re(),n=ts(),l=Ve(),m=l&&l.features.includes(Ds),{data:r}=Os({workspaceId:i}),d=Gs(i),{mutate:o}=is({workspaceId:i}),[f,u]=v.useState("");return v.useEffect(()=>{r&&m&&u(r.workspace_policy)},[r,m]),m?s.jsxs($e,{title:b.workspacePolicySection,upsellEnterprise:a,description:b.workspacePolicySectionDescription,children:[s.jsxs(w,{className:"justify-start py-6",children:[s.jsx(as,{label:"",enabled:e.beta_settings.workspace_policy,onChange:h=>{o({feature:y.WORKSPACE_POLICY,enabled:h})}}),s.jsx("p",{className:"text-md inline-flex items-center",children:s.jsx(c,p({},b.workspacePolicyToggleLabel))})]}),e.beta_settings.workspace_policy&&s.jsxs(w,{className:"flex-col gap-2",children:[s.jsx(Fs,{className:"border-token-border-default focus-within:border-token-border-heavy focus-within:ring-token-text-secondary bg-token-bg-primary w-full resize-y rounded-md border px-3 py-2 font-mono text-xs shadow-none focus-within:ring-1",value:f,placeholder:t.formatMessage(b.workspacePolicyTextareaPlaceholder),onChange:h=>u(h.target.value),rows:5}),s.jsxs("div",{className:"flex justify-end gap-2",children:[s.jsx(ye,{size:"small",color:"secondary",onClick:()=>Qs(n,ta,{content:f}),disabled:!f,children:s.jsx(c,p({},b.workspacePolicyPreview))}),s.jsx(ye,{size:"small",onClick:()=>d.mutate(f),disabled:d.isPending||f===(r==null?void 0:r.workspace_policy),children:s.jsx(c,p({},b.workspacePolicySave))})]})]})]}):null},na=({workspaceId:i,upsellEnterprise:e,data:a})=>s.jsxs(v.Fragment,{children:[s.jsx(Jt,{workspaceId:i}),s.jsx(ia,{workspaceId:i,upsellEnterprise:e,data:a}),s.jsx(sa,{workspaceId:i,upsellEnterprise:e})]}),oa=({workspaceId:i})=>{const e=at(),{data:a,isLoading:t}=Cs({workspaceId:i,enabled:e}),[n,l]=v.useState("");v.useEffect(()=>{const u=()=>{const h=a==null?void 0:a.data.find(x=>At(x));h&&l(h.id)};a!=null&&a.data&&u()},[a]);const{data:m,refetch:r,isLoading:d}=Ct({workspaceId:i,roleId:n!=null?n:""}),{updateRole:o}=St({workspaceId:i}),f=v.useCallback(async u=>{const h=await o(u);h.id!==n&&l(h.id),r()},[n,r,o]);return{defaultRole:m,handleSaveRole:f,isLoading:t||d}};function la({workspaceId:i}){var te,Q,oe,G,q,ae,J,F,Z;const e=re(),{data:a,isLoading:t}=ys(i),n=Ve(),l=n==null?void 0:n.isEnterprisey(),m=!l,r=Js(),d=_t(),{defaultRole:o,handleSaveRole:f,isLoading:u}=oa({workspaceId:i}),h=ts(),[x,k]=v.useState(""),A=ks(),N=es(h,"2913573978"),I=es(h,"820985683"),g=((te=a==null?void 0:a.beta_settings.wham_access)!=null?te:!1)&&es(h,"2968710568"),{filteredSections:T,totalPermissionsCount:_}=v.useMemo(()=>{var j,R,$,X,ee,le;const D=Zs(Le(p({isCanvasEnabled:(j=a==null?void 0:a.beta_settings.canvas)!=null?j:!1,isSearchEnabled:(R=o==null?void 0:o.permissions.includes(He.SearchAccess))!=null?R:!1,isEnterprisey:($=n==null?void 0:n.isEnterprisey())!=null?$:!1,isQuorum:r,legacyModelsEnabled:(X=a==null?void 0:a.beta_settings.legacy_models)!=null?X:!1},d),{includeConnectorPermissions:A,isCodexEnabledInRBACRole:(ee=o==null?void 0:o.permissions.includes(He.AllowCodexAccess))!=null?ee:!1,showProjectSharing:I,isRoleSpecificPage:!1,showDeviceCodeAuthToggle:g,gpt5ThinkingEnabled:(le=o==null?void 0:o.permissions.includes(He.GPT5ThinkingAccess))!=null?le:!1})),K=D.flatMap(U=>U.entries).length,Y=D.map(U=>Le(p({},U),{entries:U.entries.filter(W=>{const ie=typeof W.title=="string"?W.title:e.formatMessage(W.title),de=W.description?typeof W.description=="string"?W.description:e.formatMessage(W.description,W.descriptionValues):"";return[ie,de].join(" ").toLowerCase().includes(x.toLowerCase())||W.rbac&&W.permissionName.toLowerCase().includes(x.toLowerCase())||!W.rbac&&W.settingName.toLowerCase().includes(x.toLowerCase())})})).filter(U=>U.entries.length>0);return{permissionsBySection:D,totalPermissionsCount:K,filteredSections:Y}},[n,a==null?void 0:a.beta_settings.canvas,o==null?void 0:o.permissions,d,e,x,r,a==null?void 0:a.beta_settings.legacy_models,A,I,g]),{toggleAllConnectorsPermissionForRole:E,isPending:C}=kt({workspaceId:(Q=n==null?void 0:n.getWorkspaceId())!=null?Q:""}),{connectorsWithPermission:M,isLoading:L}=jt({accountId:(oe=n==null?void 0:n.id)!=null?oe:"",workspaceId:(G=n==null?void 0:n.getWorkspaceId())!=null?G:"",roleId:(q=o==null?void 0:o.id)!=null?q:"",enabled:A&&!!(o!=null&&o.id)}),P=Array.from((ae=M.values())!=null?ae:[]).filter(D=>D.connector.status!=="DISABLED_BY_ADMIN"),S=v.useMemo(()=>[y.CONTEXT_CONNECTOR_GDRIVE,y.CONTEXT_CONNECTOR_O365_PERSONAL,y.CONTEXT_CONNECTOR_O365_BUSINESS].filter(D=>!!(a!=null&&a.beta_settings[D])),[a==null?void 0:a.beta_settings]),O=yt({workspaceId:(J=n==null?void 0:n.getWorkspaceId())!=null?J:"",roleId:(F=o==null?void 0:o.id)!=null?F:"",connectorIds:S,enabled:A&&!!(o!=null&&o.id)}),ce=v.useMemo(()=>{var j,R;const K=Array.from((j=P.values())!=null?j:[]).filter($=>$.permissions.includes(He.UseConnector)),Y=Object.entries((R=O.results)!=null?R:{}).filter(([$,X])=>X.includes(He.UseConnector));return[...K,...Y]},[P,O.results]),[B,Ce]=v.useState(!1);if(t||u)return s.jsx(et,{});if(!a)return null;const se=st(r,N&&!I);return s.jsxs(Ks,{children:[o&&s.jsx("div",{className:"text-token-text-secondary text-sm",children:e.formatMessage(xs.defaultSettingDescription)}),s.jsx("div",{className:"flex flex-row items-center justify-between",children:s.jsx(js,{inputClassName:"w-[250px] rounded-full! text-sm",value:x,onChange:D=>{k(D.target.value)},placeholder:e.formatMessage({id:"hRuTvi",defaultMessage:"Search {count} permissions"},{count:_})})}),s.jsxs("div",{className:"flex flex-col gap-12",children:[l&&o&&s.jsx(wt,{preReleases:se,workspaceId:(Z=n==null?void 0:n.getWorkspaceId())!=null?Z:"",data:a,handleSaveRole:f,role:o,isCustomRole:!0}),s.jsx(na,{workspaceId:i,upsellEnterprise:m,data:a}),o&&s.jsx(vt,{workspaceId:i,roleId:o.id}),T.map(D=>{const K=m&&!D.availableForEnterprise,Y=r&&!D.availableForQuorum;return s.jsx($e,{title:D.title,description:D.description,descriptionValues:D.descriptionValues,upsellEnterprise:K,shouldDisableForQuorum:Y,children:s.jsx(ss,{children:D.entries.map(j=>{var ee,le;const R=j.rbac?j.permissionName:j.settingName,$=typeof j.title=="string"?j.title:e.formatMessage(j.title),X=r&&j.rbac&&j.disabledForQuorum;if(j.rbac&&j.permissionName===He.UseConnector){const U=ce.length>0;return s.jsxs(s.Fragment,{children:[B&&s.jsx(Nt,{platformConnectorsWithPermission:M,contextConnectorsWithPermission:O.results,workspaceId:(ee=n==null?void 0:n.getWorkspaceId())!=null?ee:"",roleId:(le=o==null?void 0:o.id)!=null?le:"",onClose:()=>Ce(!1)}),s.jsx(w,{children:s.jsxs("div",{className:"flex w-full items-center justify-between gap-4",children:[s.jsxs("div",{children:[s.jsx("div",{className:"text-md",children:$}),j.description&&s.jsx("span",{className:"text-token-text-tertiary text-sm",children:typeof j.description=="string"?j.description:e.formatMessage(j.description,j.descriptionValues)})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[(L||C)&&s.jsx(rs,{}),j.nestedKey&&(S.length>0||P.length>0)&&s.jsx("div",{className:"text-token-text-tertiary text-sm",children:s.jsx(ye,{color:"primary-inverse",onClick:()=>Ce(!0),children:s.jsx(c,{id:"workspaceSettings.roles.selectNestedPermission",defaultMessage:"Select..."})})}),s.jsx(tt,{size:"normal","aria-label":$,checked:U,onCheckedChange:W=>{var ie;return E({id:(ie=o==null?void 0:o.id)!=null?ie:"",state:W})},disabled:C})]})]})},R)]})}return s.jsx(w,{children:s.jsxs("div",{className:"flex w-full items-center justify-between gap-4",children:[s.jsxs("div",{children:[s.jsxs("div",{className:"text-md flex gap-2",children:[$,X&&s.jsx("span",{className:"bg-token-bg-tertiary text-token-text-secondary rounded-xl px-3 ps-3 pt-1 pb-1 text-sm font-normal",children:s.jsx(c,p({},xs.thisFeatureDisabledForOrg))})]}),j.description&&s.jsx("span",{className:"text-token-text-tertiary text-xs",children:typeof j.description=="string"?j.description:e.formatMessage(j.description,j.descriptionValues)})]}),j.rbac?o&&s.jsx(Et,{ariaLabel:$,role:o,permissionName:j.permissionName,handleSaveRole:f,disabled:j.disabled||K||Y||X,disabledReason:j.disabledReason}):s.jsx(ra,{entry:j,workspaceId:i,data:a,upsellEnterprise:K,isQuorum:r})]})},R)})})},String(D.title.defaultMessage))})]})]})}const ra=({entry:i,workspaceId:e,data:a,upsellEnterprise:t,isQuorum:n})=>{const l=ts(),m=es(l,"2968710568");return v.useMemo(()=>{const d=t;switch(i.settingName){case"share_chat":return s.jsx($t,{workspaceId:e,disabled:d||n,defaultValue:a.share_settings.chat_share_setting});case"rentention_policy":return s.jsx(qt,{data:a});case"memory_access":return s.jsx(ca,{data:a,workspaceId:e,disabled:d});case"apps_access":return s.jsx(ne,{workspaceId:e,enabled:a.beta_settings[y.APP_PAIRING],feature:y.APP_PAIRING,disabled:d});case"apple_intelligence_access":return s.jsx(ne,{workspaceId:e,enabled:a.beta_settings[y.CLIENT_APPLICATION_APPLE],feature:y.CLIENT_APPLICATION_APPLE,disabled:d});case"apple_intelligence_mdm_access":return s.jsx(ne,{workspaceId:e,enabled:a.beta_settings[y.CLIENT_APPLICATION_APPLE_MDM_REQUIRED],feature:y.CLIENT_APPLICATION_APPLE_MDM_REQUIRED,disabled:d});case"canvas_code_execution":return s.jsx(ne,{workspaceId:e,enabled:a.beta_settings[y.CANVAS_CODE_EXECUTION],feature:y.CANVAS_CODE_EXECUTION,disabled:d});case"canvas_code_network_access":return s.jsx(ne,{workspaceId:e,enabled:a.beta_settings[y.CANVAS_CODE_NETWORK_ACCESS],feature:y.CANVAS_CODE_NETWORK_ACCESS,disabled:d});case"web_search":return s.jsx(ne,{workspaceId:e,enabled:a.beta_settings[y.BROWSING],feature:y.BROWSING,disabled:d});case"deep_research":return s.jsx(ne,{workspaceId:e,enabled:a.beta_settings[y.DEEP_RESEARCH],feature:y.DEEP_RESEARCH,disabled:d});case"video_screen_sharing":return s.jsx(ne,{workspaceId:e,enabled:a.beta_settings[y.VIDEO_SCREEN_SHARING],feature:y.VIDEO_SCREEN_SHARING,disabled:d});case"codex_access":return s.jsx(ne,{workspaceId:e,enabled:a.beta_settings[y.ALLOW_CODEX_ACCESS],feature:y.ALLOW_CODEX_ACCESS,disabled:d});case"codex_local_access":return s.jsx(ne,{workspaceId:e,enabled:a.beta_settings[y.ALLOW_CODEX_LOCAL_ACCESS],feature:y.ALLOW_CODEX_LOCAL_ACCESS,disabled:d});case"codex_slack_posting":return s.jsx(ne,{workspaceId:e,enabled:a.beta_settings[y.CODEX_SLACK_POSTING],feature:y.CODEX_SLACK_POSTING,disabled:d});case"codex_agent_network":return s.jsx(ne,{workspaceId:e,enabled:a.beta_settings[y.CODEX_AGENT_NETWORK_ACCESS],feature:y.CODEX_AGENT_NETWORK_ACCESS,disabled:d});case"codex_device_code_auth":return!m||!a.beta_settings[y.ALLOW_CODEX_ACCESS]?null:s.jsx(ne,{workspaceId:e,enabled:a.beta_settings[y.CODEX_DEVICE_CODE_AUTH],feature:y.CODEX_DEVICE_CODE_AUTH,disabled:d});case"record_access":return s.jsx(ne,{workspaceId:e,enabled:a.beta_settings[y.HIVE],feature:y.HIVE,disabled:!1});case"record_reference_past_transcripts":return s.jsx(ne,{workspaceId:e,enabled:a.beta_settings[y.HIVE_KNOWLEDGE_RETRIEVAL],feature:y.HIVE_KNOWLEDGE_RETRIEVAL,disabled:!1});case"legacy_models":return s.jsx(ne,{workspaceId:e,enabled:a.beta_settings[y.LEGACY_MODELS],feature:y.LEGACY_MODELS,disabled:d})}},[a,i.settingName,n,t,e,m])},ca=({workspaceId:i,data:e,disabled:a})=>{var r;const{variables:t,mutate:n}=is({workspaceId:i}),[l,m]=v.useState(!1);return s.jsxs(s.Fragment,{children:[l&&s.jsx(Vt,{onConfirm:()=>{n({feature:y.MEMORY,enabled:!1}),m(!1)},onClose:()=>{m(!1)}}),s.jsx(as,{label:"",disabled:a,enabled:(r=t==null?void 0:t.enabled)!=null?r:e.beta_settings[y.MEMORY],onChange:d=>{d?n({feature:y.MEMORY,enabled:d}):m(!0)}})]})},ne=({workspaceId:i,disabled:e,enabled:a,feature:t})=>{var m;const{variables:n,mutate:l}=is({workspaceId:i});return s.jsx(as,{label:"",disabled:e,enabled:(m=n==null?void 0:n.enabled)!=null?m:a,onChange:r=>{l({feature:t,enabled:r})}})},xs=ze({defaultSettingDescription:{id:"1IUdGa",defaultMessage:"This page controls the default experience for members who don't have a custom role."},thisFeatureDisabledForOrg:{id:"nAfvpE",defaultMessage:"This feature is disabled in this workspace"}}),hs=192;function qe(i,e){"use forget";const a=Oe.c(5),[t,n]=v.useState(i);let l;a[0]!==e?(l=d=>{e(!0),n(d)},a[0]=e,a[1]=l):l=a[1];const m=l;let r;return a[2]!==m||a[3]!==t?(r=[t,m],a[2]=m,a[3]=t,a[4]=r):r=a[4],r}function da(i){"use forget";var Ie,Ge,Te,Fe;const e=Oe.c(105),{workspaceId:a,account:t,data:n}=i,l=re(),m=Xe();let r;e[0]!==a?(r={workspaceId:a},e[0]=a,e[1]=r):r=e[1];const{mutateAsync:d}=is(r),o=(Ie=t==null?void 0:t.name)!=null?Ie:"",f=(Ge=t==null?void 0:t.data.profilePictureId)!=null?Ge:null,u=(Te=t==null?void 0:t.data.profilePictureUrl)!=null?Te:null;let h;e[2]!==t?(h=t==null?void 0:t.isEnterprisey(),e[2]=t,e[3]=h):h=e[3];const x=h,k=!!((Fe=n.beta_settings)!=null&&Fe[y.SHOW_LOGO_IN_HEADER]),[A,N]=v.useState(!1),[I,g]=qe(o,N),[T,_]=qe(f,N),[E,C]=qe(u,N),[M,L]=qe(void 0,N),[P,S]=qe(null,N),[O,ce]=qe(k,N),[B,Ce]=v.useState(!1);let se,te;e[4]!==M||e[5]!==S||e[6]!==P?(se=()=>{if(M!=="initial"&&M!==void 0&&P==null){const V=new FileReader;V.addEventListener("load",()=>{const Ne=V.result;typeof Ne=="string"&&S(Ne)}),V.readAsDataURL(M.file)}},te=[M,S,P],e[4]=M,e[5]=S,e[6]=P,e[7]=se,e[8]=te):(se=e[7],te=e[8]),v.useEffect(se,te);let Q;e[9]!==l||e[10]!==B||e[11]!==_||e[12]!==C||e[13]!==L||e[14]!==S||e[15]!==m?(Q=async V=>{if(B)return;const Ne=await nt(V,hs),Je=ot(Ne);L({tempId:Je,file:Ne,status:Be.Uploading,progress:1,fileId:null,cdnUrl:null}),lt(Je,Ne,l,m,dt.ProfilePicture,{onFileCreated(Ke,Ae,ke){L(H=>H!=="initial"&&(H==null?void 0:H.tempId)===Ke&&H.status===Be.Uploading?Le(p({},H),{progress:10,fileId:Ae,cdnUrl:ke}):H)},onFileUploadProgress(Ke,Ae){L(ke=>ke!=="initial"&&(ke==null?void 0:ke.tempId)===Ke&&ke.status===Be.Uploading?Le(p({},ke),{progress:Ae}):ke)},onFileUploaded(Ke,Ae,ke){L(H=>{var ms;return H!=="initial"&&H&&H.cdnUrl&&H.tempId===Ke&&H.fileId?(rt(H.fileId).then(us=>{us.status===ct.Success&&(_(H.fileId),C(us.download_url))}),Le(p({},H),{status:Be.Ready,progress:100,fileSpec:p({name:H.file.name,id:(ms=H.fileId)!=null?ms:"",size:H.file.size,mimeType:H.file.type},ke!=null?ke:{width:0,height:0})})):H})},onError(Ke){L(Ae=>{if(Ae!=="initial"&&(Ae==null?void 0:Ae.tempId)===Ke){_(void 0),C(void 0),S(null);return}return Ae})}})},e[9]=l,e[10]=B,e[11]=_,e[12]=C,e[13]=L,e[14]=S,e[15]=m,e[16]=Q):Q=e[16];const oe=Q;let G;e[17]!==_||e[18]!==C||e[19]!==L||e[20]!==S?(G=()=>{_(null),C(null),L(void 0),S(null)},e[17]=_,e[18]=C,e[19]=L,e[20]=S,e[21]=G):G=e[21];const q=G,ae=Tt(a);let J;e[22]!==I?(J=I.trim(),e[22]=I,e[23]=J):J=e[23];const F=J,Z=M!=="initial"&&M!==void 0&&M.status!==Be.Ready,D=M!=="initial"&&M!==void 0&&M.status===Be.Ready&&!E,K=B||Z||D||ae.isPending||F.length===0||!A;let Y;e[24]!==f||e[25]!==u||e[26]!==o||e[27]!==k||e[28]!==K||e[29]!==l||e[30]!==x||e[31]!==d||e[32]!==F||e[33]!==O||e[34]!==T||e[35]!==E||e[36]!==ae||e[37]!==m?(Y=async()=>{if(K)return;Ce(!0);const V=[];(F!==o||T!==f||E!==u)&&V.push(ae.mutateAsync({name:F,profilePictureId:T,profilePictureUrl:E})),x&&k!==O&&V.push(d({feature:y.SHOW_LOGO_IN_HEADER,enabled:O})),await Promise.all(V),m.success(l.formatMessage(Ze.saveSuccessToast)),Ce(!1),N(!1)},e[24]=f,e[25]=u,e[26]=o,e[27]=k,e[28]=K,e[29]=l,e[30]=x,e[31]=d,e[32]=F,e[33]=O,e[34]=T,e[35]=E,e[36]=ae,e[37]=m,e[38]=Y):Y=e[38];const j=Y,R=B;let $;$=R?"pointer-events-none opacity-50":void 0;const X=$;let ee;e[39]===Symbol.for("react.memo_cache_sentinel")?(ee=s.jsx("p",{className:"text-token-text-primary text-sm font-medium",children:s.jsx(c,p({},Re.workspaceName))}),e[39]=ee):ee=e[39];let le;e[40]===Symbol.for("react.memo_cache_sentinel")?(le=s.jsxs("div",{className:"flex flex-col gap-1",children:[ee,s.jsx("p",{className:"text-token-text-secondary text-sm",children:s.jsx(c,p({},Re.workspaceNameDescription))})]}),e[40]=le):le=e[40];let U;e[41]!==g?(U=V=>g(V.target.value),e[41]=g,e[42]=U):U=e[42];let W;e[43]!==R||e[44]!==I||e[45]!==U?(W=s.jsxs(w,{className:"flex-col gap-2",children:[le,s.jsx(mt,{ariaLabel:!1,type:"text",name:"workspace-name",value:I,onChange:U,maxLength:64,disabled:R})]}),e[43]=R,e[44]=I,e[45]=U,e[46]=W):W=e[46];let ie;e[47]===Symbol.for("react.memo_cache_sentinel")?(ie=s.jsx("p",{className:"text-token-text-primary text-sm font-medium",children:s.jsx(c,p({},Re.workspaceAvatar))}),e[47]=ie):ie=e[47];let de;e[48]!==l?(de=l.formatMessage(Re.workspaceAvatarDescription,{size:hs}),e[48]=l,e[49]=de):de=e[49];let me;e[50]!==de?(me=s.jsxs("div",{className:"flex flex-col gap-1",children:[ie,s.jsx("p",{className:"text-token-text-secondary text-sm",children:de})]}),e[50]=de,e[51]=me):me=e[51];let ue;e[52]!==q||e[53]!==R||e[54]!==oe||e[55]!==E||e[56]!==M||e[57]!==P||e[58]!==X?(ue=E?s.jsxs("div",{className:"relative inline-flex",children:[s.jsx("img",{src:E,alt:"",referrerPolicy:"no-referrer",className:"block h-24 w-24 rounded-full object-cover object-center"}),s.jsx("div",{className:"absolute -end-1 -top-1",children:s.jsx(ma,{onClick:R?void 0:q})})]}):M!=null&&M!=="initial"&&P?s.jsx("div",{className:"flex flex-col items-center text-center",children:s.jsxs("div",{className:"relative mb-3",children:[s.jsx("img",{src:URL.createObjectURL(M.file),alt:"",referrerPolicy:"no-referrer",className:"block h-24 w-24 rounded-full object-cover object-center"}),s.jsx("div",{className:"absolute inset-0 flex items-center justify-center text-white",children:s.jsx(Us,{percentage:M.progress,className:"h-6 w-6"})})]})}):s.jsx("div",{className:X,children:s.jsx(Lt,{onFileChange:oe,mimeTypes:it})}),e[52]=q,e[53]=R,e[54]=oe,e[55]=E,e[56]=M,e[57]=P,e[58]=X,e[59]=ue):ue=e[59];let Se;e[60]!==l?(Se=l.formatMessage(Re.propagationWarning),e[60]=l,e[61]=Se):Se=e[61];let ge;e[62]!==Se?(ge=s.jsx(zs,{className:"mt-1",children:Se}),e[62]=Se,e[63]=ge):ge=e[63];let fe;e[64]!==ue||e[65]!==ge?(fe=s.jsxs("div",{className:"flex flex-col items-start gap-3",children:[ue,ge]}),e[64]=ue,e[65]=ge,e[66]=fe):fe=e[66];let pe;e[67]!==me||e[68]!==fe?(pe=s.jsxs(w,{className:"flex-col gap-3",children:[me,fe]}),e[67]=me,e[68]=fe,e[69]=pe):pe=e[69];let Me;e[70]!==R||e[71]!==l||e[72]!==x||e[73]!==O||e[74]!==ce?(Me=x&&s.jsx(w,{className:"items-center",children:s.jsxs("div",{className:"flex w-full items-center justify-between gap-4",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-token-text-primary text-sm font-medium",children:s.jsx(c,p({},Ze.toggleLabel))}),s.jsx("p",{className:"text-token-text-secondary text-sm",children:s.jsx(c,p({},Ze.toggleDescription))})]}),s.jsx(as,{label:"",ariaLabel:l.formatMessage(Ze.toggleAriaLabel),disabled:R,enabled:O,onChange:V=>ce(V)})]})}),e[70]=R,e[71]=l,e[72]=x,e[73]=O,e[74]=ce,e[75]=Me):Me=e[75];let xe;e[76]!==f||e[77]!==u||e[78]!==o||e[79]!==k||e[80]!==R||e[81]!==ce||e[82]!==_||e[83]!==C||e[84]!==g||e[85]!==L||e[86]!==S?(xe=()=>{R||(g(o),_(f),C(u),L(void 0),S(null),ce(k),N(!1))},e[76]=f,e[77]=u,e[78]=o,e[79]=k,e[80]=R,e[81]=ce,e[82]=_,e[83]=C,e[84]=g,e[85]=L,e[86]=S,e[87]=xe):xe=e[87];const Ee=R||!A;let Pe;e[88]===Symbol.for("react.memo_cache_sentinel")?(Pe=s.jsx(c,p({},Re.modalReset)),e[88]=Pe):Pe=e[88];let he;e[89]!==xe||e[90]!==Ee?(he=s.jsx(ye,{size:"small",color:"secondary",onClick:xe,disabled:Ee,children:Pe}),e[89]=xe,e[90]=Ee,e[91]=he):he=e[91];let _e;e[92]===Symbol.for("react.memo_cache_sentinel")?(_e=s.jsx(c,p({},Re.modalSubmit)),e[92]=_e):_e=e[92];let be;e[93]!==K||e[94]!==j||e[95]!==B?(be=s.jsx(ye,{size:"small",color:"primary",onClick:j,disabled:K,loading:B,children:_e}),e[93]=K,e[94]=j,e[95]=B,e[96]=be):be=e[96];let we;e[97]!==he||e[98]!==be?(we=s.jsxs(w,{className:"justify-end gap-2",children:[he,be]}),e[97]=he,e[98]=be,e[99]=we):we=e[99];let ve;return e[100]!==W||e[101]!==pe||e[102]!==Me||e[103]!==we?(ve=s.jsx($e,{title:Re.modalTitle,children:s.jsxs(ss,{children:[W,pe,Me,we]})}),e[100]=W,e[101]=pe,e[102]=Me,e[103]=we,e[104]=ve):ve=e[104],ve}function ma(i){"use forget";const e=Oe.c(3),{onClick:a}=i;let t;e[0]===Symbol.for("react.memo_cache_sentinel")?(t=s.jsx(ut,{className:"h-3 w-3"}),e[0]=t):t=e[0];let n;return e[1]!==a?(n=s.jsx("div",{className:"flex h-6 w-6 cursor-pointer flex-row flex-wrap content-center justify-center rounded-full border-2 border-white bg-black text-white",onClick:a,children:t}),e[1]=a,e[2]=n):n=e[2],n}const Ze=ze({toggleLabel:{id:"tTWDeY",defaultMessage:"Show workspace logo in header"},toggleDescription:{id:"yvJ+o5",defaultMessage:"Displays your workspace logo in the center of the header"},toggleAriaLabel:{id:"DyKp7n",defaultMessage:"Toggle workspace logo in header"},saveSuccessToast:{id:"crqLbt",defaultMessage:"Workspace appearance updated"}}),Ms=i=>[{key:"user-msg-bg",label:i.formatMessage({id:"wRclK+",defaultMessage:"User message background"})},{key:"user-msg-text",label:i.formatMessage({id:"qWGxg/",defaultMessage:"User message text"})},{key:"submit-btn-bg",label:i.formatMessage({id:"GG9BnR",defaultMessage:"Primary button bg"})},{key:"submit-btn-text",label:i.formatMessage({id:"lMz/19",defaultMessage:"Primary button text"})},{key:"secondary-btn-bg",label:i.formatMessage({id:"DixBn2",defaultMessage:"Secondary button bg"})},{key:"secondary-btn-text",label:i.formatMessage({id:"PuGfMy",defaultMessage:"Secondary button text"})},{key:"user-selection-bg",label:i.formatMessage({id:"DZuh1g",defaultMessage:"Selection background"})},{key:"attribution-highlight-bg",label:i.formatMessage({id:"OVs/pM",defaultMessage:"Attribution highlight background"})},{key:"entity-accent",label:i.formatMessage({id:"RPAjfh",defaultMessage:"Entity accent"})}],ua={"user-msg-bg":"#E9E9E9","user-msg-text":"#0d0d0d","submit-btn-bg":"#000000","submit-btn-text":"#ffffff","secondary-btn-bg":"#e8e8e8","secondary-btn-text":"#0d0d0d","user-selection-bg":"#339cff","attribution-highlight-bg":"#ffeeb8","entity-accent":"#0169cc"},ga={"user-msg-bg":"#323232","user-msg-text":"#ffffff","submit-btn-bg":"#ffffff","submit-btn-text":"#000000","secondary-btn-bg":"#424242","secondary-btn-text":"#ffffff","user-selection-bg":"#66b5ff","attribution-highlight-bg":"#6e5400","entity-accent":"#339cff"};function fa(i){"use forget";const e=Oe.c(35),{defaultValue:a,onSave:t,disabled:n}=i,l=re(),[m,r]=v.useState(!0),[d,o]=v.useState(!1),[f,u]=v.useState(!1);let h;e[0]!==(a==null?void 0:a.light)?(h=()=>p(p({},ua),a==null?void 0:a.light),e[0]=a==null?void 0:a.light,e[1]=h):h=e[1];const[x,k]=v.useState(h);let A;e[2]!==(a==null?void 0:a.dark)?(A=()=>p(p({},ga),a==null?void 0:a.dark),e[2]=a==null?void 0:a.dark,e[3]=A):A=e[3];const[N,I]=v.useState(A);let g,T,_,E;if(e[4]!==N||e[5]!==n||e[6]!==l||e[7]!==x||e[8]!==t){const ce=Ms(l);let B;e[13]!==N||e[14]!==x||e[15]!==t?(B=async()=>{o(!0);const G=new Set(gt),q=Object.fromEntries(Object.entries(x).filter(F=>{const[Z]=F;return G.has(Z)})),ae=Object.fromEntries(Object.entries(N).filter(F=>{const[Z]=F;return G.has(Z)}));await t({light:q,dark:ae}),r(!1),o(!1)},e[13]=N,e[14]=x,e[15]=t,e[16]=B):B=e[16],g=B;const Ce=(G,q,ae)=>s.jsxs("div",{className:"mt-2 flex flex-col gap-2",children:[s.jsx("div",{className:"text-token-text-tertiary text-xs font-semibold tracking-wide uppercase",children:G}),ce.map(J=>{const{key:F,label:Z}=J;return s.jsxs(w,{className:"flex flex-col gap-1",children:[s.jsxs("div",{className:"flex items-center justify-between gap-4",children:[s.jsx("label",{className:"text-sm font-medium",htmlFor:"".concat(G,"-").concat(F),children:Z}),s.jsx("input",{id:"".concat(G,"-").concat(F),type:"color",value:q[F],disabled:n,onChange:D=>{const K=D.target.value;ae(Y=>Le(p({},Y),{[F]:K}))},className:"bg-token-bg-primary h-8 w-12 cursor-pointer rounded border p-0"})]}),s.jsx("code",{className:"text-token-text-tertiary text-xs",children:s.jsx(c,{id:"TmCmd1",defaultMessage:"{key}-{mode}",values:{key:F,mode:G.toLowerCase()}})})]},F)})]});let se;e[17]===Symbol.for("react.memo_cache_sentinel")?(se=G=>{k(G),r(!0)},e[17]=se):se=e[17];const te=se;let Q;e[18]===Symbol.for("react.memo_cache_sentinel")?(Q=G=>{I(G),r(!0)},e[18]=Q):Q=e[18];const oe=Q;T="flex flex-col gap-4 py-2",_=Ce("Light",x,te),E=Ce("Dark",N,oe),e[4]=N,e[5]=n,e[6]=l,e[7]=x,e[8]=t,e[9]=g,e[10]=T,e[11]=_,e[12]=E}else g=e[9],T=e[10],_=e[11],E=e[12];let C;e[19]===Symbol.for("react.memo_cache_sentinel")?(C=s.jsx(ye,{color:"secondary",size:"small",onClick:()=>u(!0),children:s.jsx(c,{id:"8uzYJ3",defaultMessage:"Preview"})}),e[19]=C):C=e[19];const M=n||!m;let L;e[20]===Symbol.for("react.memo_cache_sentinel")?(L=s.jsx(c,{id:"vnuInT",defaultMessage:"Save"}),e[20]=L):L=e[20];let P;e[21]!==g||e[22]!==d||e[23]!==M?(P=s.jsxs("div",{className:"flex justify-end gap-2 pt-2",children:[C,s.jsx(ye,{disabled:M,loading:d,onClick:g,size:"small",children:L})]}),e[21]=g,e[22]=d,e[23]=M,e[24]=P):P=e[24];let S;e[25]!==N||e[26]!==x||e[27]!==f?(S=f&&s.jsx(pa,{onClose:()=>u(!1),lightValues:x,darkValues:N}),e[25]=N,e[26]=x,e[27]=f,e[28]=S):S=e[28];let O;return e[29]!==S||e[30]!==T||e[31]!==_||e[32]!==E||e[33]!==P?(O=s.jsxs("div",{className:T,children:[_,E,P,S]}),e[29]=S,e[30]=T,e[31]=_,e[32]=E,e[33]=P,e[34]=O):O=e[34],O}function pa(i){"use forget";const e=Oe.c(13),{onClose:a,lightValues:t,darkValues:n}=i;let l;e[0]===Symbol.for("react.memo_cache_sentinel")?(l=s.jsx(c,{id:"hoMwv8",defaultMessage:"Theme Preview"}),e[0]=l):l=e[0];let m;e[1]===Symbol.for("react.memo_cache_sentinel")?(m=s.jsx("h3",{className:"text-token-text-tertiary mb-2 text-sm font-semibold tracking-wide uppercase",children:s.jsx(c,{id:"0aW8Bm",defaultMessage:"Light"})}),e[1]=m):m=e[1];let r;e[2]!==t?(r=s.jsxs("div",{className:"min-w-0 flex-1",children:[m,s.jsx(bs,{mode:"light",values:t})]}),e[2]=t,e[3]=r):r=e[3];let d;e[4]===Symbol.for("react.memo_cache_sentinel")?(d=s.jsx("h3",{className:"text-token-text-tertiary mb-2 text-sm font-semibold tracking-wide uppercase",children:s.jsx(c,{id:"n+40kO",defaultMessage:"Dark"})}),e[4]=d):d=e[4];let o;e[5]!==n?(o=s.jsxs("div",{className:"min-w-0 flex-1",children:[d,s.jsx(bs,{mode:"dark",values:n})]}),e[5]=n,e[6]=o):o=e[6];let f;e[7]!==r||e[8]!==o?(f=s.jsxs("div",{className:"flex flex-col gap-6 sm:flex-row sm:items-start",children:[r,o]}),e[7]=r,e[8]=o,e[9]=f):f=e[9];let u;return e[10]!==a||e[11]!==f?(u=s.jsx(cs,{isOpen:!0,onClose:a,size:"custom",className:"max-w-[900px]",testId:"modal-theme-preview",title:l,children:f}),e[10]=a,e[11]=f,e[12]=u):u=e[12],u}function bs(i){"use forget";const e=Oe.c(125),{mode:a,values:t}=i,n=re();let l,m,r,d,o,f,u,h,x;if(e[0]!==n||e[1]!==a||e[2]!==t){const N=Ms(n);let I;e[12]!==t?(I=V=>t[V],e[12]=t,e[13]=I):I=e[13];const g=I;let T;e[14]!==g?(T=g("user-msg-bg"),e[14]=g,e[15]=T):T=e[15];const _=T;let E;e[16]!==g?(E=g("user-msg-text"),e[16]=g,e[17]=E):E=e[17];const C=E;let M;e[18]!==g?(M=g("submit-btn-bg"),e[18]=g,e[19]=M):M=e[19];const L=M;let P;e[20]!==g?(P=g("submit-btn-text"),e[20]=g,e[21]=P):P=e[21];const S=P;let O;e[22]!==g?(O=g("secondary-btn-bg"),e[22]=g,e[23]=O):O=e[23];const ce=O;let B;e[24]!==g?(B=g("secondary-btn-text"),e[24]=g,e[25]=B):B=e[25];const Ce=B;let se;e[26]!==g?(se=g("user-selection-bg"),e[26]=g,e[27]=se):se=e[27];const te=se;let Q;e[28]!==g?(Q=g("attribution-highlight-bg"),e[28]=g,e[29]=Q):Q=e[29];const oe=Q;let G;e[30]!==g?(G=g("entity-accent"),e[30]=g,e[31]=G):G=e[31];const q=G;let ae;e[32]!==_||e[33]!==C?(ae=V=>s.jsxs("div",{className:"ms-auto mb-4 w-[70%] rounded-[18px] px-4 py-3 text-sm",style:{background:_,color:C},children:[s.jsx("strong",{children:s.jsx(c,{id:"9hKPVK",defaultMessage:"User:"})}),s.jsx("span",{className:"ms-1"}),V]}),e[32]=_,e[33]=C,e[34]=ae):ae=e[34];const J=ae;let F;e[35]!==C?(F=V=>s.jsxs("div",{className:"mb-4 w-[70%] p-3 text-sm",style:{color:C},children:[s.jsx("strong",{children:s.jsx(c,{id:"W7weVs",defaultMessage:"Assistant:"})}),s.jsx("span",{className:"ms-1"}),V]}),e[35]=C,e[36]=F):F=e[36];const Z=F;r="rounded-md border p-4 text-xs";const D=a==="dark"?"#212121":"#ffffff";e[37]!==D||e[38]!==C?(d={background:D,color:C},e[37]=D,e[38]=C,e[39]=d):d=e[39];let K;e[40]!==te?(K={background:te},e[40]=te,e[41]=K):K=e[41];let Y;e[42]===Symbol.for("react.memo_cache_sentinel")?(Y=s.jsx(c,{id:"A4km8m",defaultMessage:"selection"}),e[42]=Y):Y=e[42];let j;e[43]!==K?(j=s.jsx(c,{id:"1taoOc",defaultMessage:"This is a user message with a {selection}.",values:{selection:s.jsx("span",{style:K,className:"py-1",children:Y})}}),e[43]=K,e[44]=j):j=e[44],e[45]!==J||e[46]!==j?(o=J(j),e[45]=J,e[46]=j,e[47]=o):o=e[47];let R;e[48]!==oe?(R={background:oe},e[48]=oe,e[49]=R):R=e[49];let $;e[50]===Symbol.for("react.memo_cache_sentinel")?($=s.jsx(c,{id:"LRImHW",defaultMessage:"Cited text"}),e[50]=$):$=e[50];let X;e[51]!==R?(X=s.jsx("span",{style:R,className:"rounded px-1",children:$}),e[51]=R,e[52]=X):X=e[52];let ee;e[53]!==q?(ee={color:q,fontWeight:600},e[53]=q,e[54]=ee):ee=e[54];let le;e[55]===Symbol.for("react.memo_cache_sentinel")?(le=s.jsx(c,{id:"uLMv/c",defaultMessage:"@Entity"}),e[55]=le):le=e[55];let U;e[56]!==ee?(U=s.jsx("span",{style:ee,children:le}),e[56]=ee,e[57]=U):U=e[57];let W;e[58]!==X||e[59]!==U?(W=s.jsx(c,{id:"wipLUT",defaultMessage:"This is an assistant reply. {cited} and an {entity} accent.",values:{cited:X,entity:U}}),e[58]=X,e[59]=U,e[60]=W):W=e[60],e[61]!==Z||e[62]!==W?(f=Z(W),e[61]=Z,e[62]=W,e[63]=f):f=e[63];let ie;e[64]!==q?(ie={color:q,fontWeight:600},e[64]=q,e[65]=ie):ie=e[65];let de;e[66]===Symbol.for("react.memo_cache_sentinel")?(de=s.jsx(c,{id:"zIYEIm",defaultMessage:"@Entity"}),e[66]=de):de=e[66];let me;e[67]!==ie?(me=s.jsx("span",{style:ie,children:de}),e[67]=ie,e[68]=me):me=e[68];let ue;e[69]!==te?(ue={background:te},e[69]=te,e[70]=ue):ue=e[70];let Se;e[71]===Symbol.for("react.memo_cache_sentinel")?(Se=s.jsx(c,{id:"DAKnsA",defaultMessage:"highlight"}),e[71]=Se):Se=e[71];let ge;e[72]!==ue?(ge=s.jsx("span",{style:ue,className:"px-1 py-0.5",children:Se}),e[72]=ue,e[73]=ge):ge=e[73];let fe;e[74]!==me||e[75]!==ge?(fe=s.jsx(c,{id:"eoyctD",defaultMessage:"Can you give another example using an {entityMention} and a different {highlighted}?",values:{entityMention:me,highlighted:ge}}),e[74]=me,e[75]=ge,e[76]=fe):fe=e[76],e[77]!==J||e[78]!==fe?(u=J(fe),e[77]=J,e[78]=fe,e[79]=u):u=e[79];let pe;e[80]!==oe?(pe={background:oe},e[80]=oe,e[81]=pe):pe=e[81];let Me;e[82]===Symbol.for("react.memo_cache_sentinel")?(Me=s.jsx(c,{id:"G4/DSz",defaultMessage:"cited snippet"}),e[82]=Me):Me=e[82];let xe;e[83]!==pe?(xe=s.jsx("span",{style:pe,className:"rounded px-1",children:Me}),e[83]=pe,e[84]=xe):xe=e[84];let Ee;e[85]!==q?(Ee={color:q,fontWeight:600},e[85]=q,e[86]=Ee):Ee=e[86];let Pe;e[87]===Symbol.for("react.memo_cache_sentinel")?(Pe=s.jsx(c,{id:"gMeCbk",defaultMessage:"@Entity"}),e[87]=Pe):Pe=e[87];let he;e[88]!==Ee?(he=s.jsx("span",{style:Ee,children:Pe}),e[88]=Ee,e[89]=he):he=e[89];let _e;e[90]!==xe||e[91]!==he?(_e=s.jsx(c,{id:"GmJEi2",defaultMessage:"Here is another reply with a {citedSnippet} and an emphasized {entity} reference.",values:{citedSnippet:xe,entity:he}}),e[90]=xe,e[91]=he,e[92]=_e):_e=e[92],e[93]!==Z||e[94]!==_e?(h=Z(_e),e[93]=Z,e[94]=_e,e[95]=h):h=e[95];let be;e[96]!==L||e[97]!==S?(be={background:L,color:S},e[96]=L,e[97]=S,e[98]=be):be=e[98];let we;e[99]===Symbol.for("react.memo_cache_sentinel")?(we=s.jsx(c,{id:"70xPCF",defaultMessage:"Primary"}),e[99]=we):we=e[99];let ve;e[100]!==be?(ve=s.jsx(ye,{color:"primary",size:"small",style:be,children:we}),e[100]=be,e[101]=ve):ve=e[101];let Ie;e[102]!==ce||e[103]!==Ce?(Ie={background:ce,color:Ce},e[102]=ce,e[103]=Ce,e[104]=Ie):Ie=e[104];let Ge;e[105]===Symbol.for("react.memo_cache_sentinel")?(Ge=s.jsx(c,{id:"AXA8xG",defaultMessage:"Secondary"}),e[105]=Ge):Ge=e[105];let Te;e[106]!==Ie?(Te=s.jsx(ye,{color:"secondary",size:"small",style:Ie,children:Ge}),e[106]=Ie,e[107]=Te):Te=e[107],e[108]!==ve||e[109]!==Te?(x=s.jsxs("div",{className:"mb-4 flex flex-wrap items-center justify-end gap-2 pe-1",children:[ve,Te]}),e[108]=ve,e[109]=Te,e[110]=x):x=e[110],l="grid grid-cols-2 gap-3 pt-1";let Fe;e[111]!==g?(Fe=V=>{const{key:Ne,label:Je}=V;return s.jsxs("div",{className:"flex items-center justify-between gap-2",children:[s.jsx("span",{className:"truncate",title:Je,children:Ne}),s.jsx("span",{className:"h-5 w-5 shrink-0 rounded border",style:{background:g(Ne)},title:Ne})]},Ne)},e[111]=g,e[112]=Fe):Fe=e[112],m=N.map(Fe),e[0]=n,e[1]=a,e[2]=t,e[3]=l,e[4]=m,e[5]=r,e[6]=d,e[7]=o,e[8]=f,e[9]=u,e[10]=h,e[11]=x}else l=e[3],m=e[4],r=e[5],d=e[6],o=e[7],f=e[8],u=e[9],h=e[10],x=e[11];let k;e[113]!==l||e[114]!==m?(k=s.jsx("div",{className:l,children:m}),e[113]=l,e[114]=m,e[115]=k):k=e[115];let A;return e[116]!==k||e[117]!==r||e[118]!==d||e[119]!==o||e[120]!==f||e[121]!==u||e[122]!==h||e[123]!==x?(A=s.jsxs("div",{className:r,style:d,children:[o,f,u,h,x,k]}),e[116]=k,e[117]=r,e[118]=d,e[119]=o,e[120]=f,e[121]=u,e[122]=h,e[123]=x,e[124]=A):A=e[124],A}const xa=i=>{"use forget";var T,_,E,C,M,L;const e=Oe.c(20),{workspaceId:a,data:t,isLoading:n,refetch:l,upsellEnterprise:m}=i,r=Xe(),d=re();let o;e[0]!==d||e[1]!==l||e[2]!==r||e[3]!==a?(o=async(P,S)=>{await Qe.safePost("/accounts/{account_id}/workspace_chat_theme",{parameters:{path:{account_id:a}},requestBody:{value:P,light:S==null?void 0:S.light,dark:S==null?void 0:S.dark}}),r.success(d.formatMessage({id:"4e+dwR",defaultMessage:"Workspace chat theme updated"})),l()},e[0]=d,e[1]=l,e[2]=r,e[3]=a,e[4]=o):o=e[4];const f=o;let u;e[5]!==((T=t.beta_settings_dict)==null?void 0:T.workspace_chat_theme_light)?(u=((_=t.beta_settings_dict)==null?void 0:_.workspace_chat_theme_light)||{},e[5]=(E=t.beta_settings_dict)==null?void 0:E.workspace_chat_theme_light,e[6]=u):u=e[6];let h;e[7]!==((C=t.beta_settings_dict)==null?void 0:C.workspace_chat_theme_dark)?(h=((M=t.beta_settings_dict)==null?void 0:M.workspace_chat_theme_dark)||{},e[7]=(L=t.beta_settings_dict)==null?void 0:L.workspace_chat_theme_dark,e[8]=h):h=e[8];let x;e[9]!==u||e[10]!==h?(x={light:u,dark:h},e[9]=u,e[10]=h,e[11]=x):x=e[11];const k=x,A=t.beta_settings_str.workspace_chat_theme||"default",N=m||n;let I;e[12]!==k||e[13]!==f||e[14]!==A||e[15]!==N?(I=s.jsx(ss,{children:s.jsx(ba,{defaultThemeValue:A,defaultCustomTheme:k,onSave:f,disabled:N})}),e[12]=k,e[13]=f,e[14]=A,e[15]=N,e[16]=I):I=e[16];let g;return e[17]!==I||e[18]!==m?(g=s.jsx($e,{title:ja.workspaceThemeSection,upsellEnterprise:m,children:I}),e[17]=I,e[18]=m,e[19]=g):g=e[19],g};function We(i,e){return s.jsx(Rt,{theme:i,name:e})}const ha=i=>[{label:We("default",i.formatMessage(De.default)),value:"default"},{label:We("blue",i.formatMessage(De.blue)),value:"blue"},{label:We("green",i.formatMessage(De.green)),value:"green"},{label:We("yellow",i.formatMessage(De.yellow)),value:"yellow"},{label:We("pink",i.formatMessage(De.pink)),value:"pink"},{label:We("orange",i.formatMessage(De.orange)),value:"orange"},{label:We("purple",i.formatMessage(De.purple)),value:"purple"},{label:We("custom",i.formatMessage({id:"settingsModal.chatTheme.custom",defaultMessage:"Custom"})),value:"custom"}];function ba(i){"use forget";const e=Oe.c(24),{defaultThemeValue:a,defaultCustomTheme:t,onSave:n,disabled:l}=i,m=re(),[r,d]=v.useState(a),o=ts();let f;if(e[0]!==o||e[1]!==r){const C=ft(o);f=r&&pt(C,r)?r:"default",e[0]=o,e[1]=r,e[2]=f}else f=e[2];const u=f;let h;e[3]!==m?(h=ha(m),e[3]=m,e[4]=h):h=e[4];const x=h;let k;e[5]!==n||e[6]!==x?(k=C=>{const M=x.map(ka),P=(S=>M.includes(S))(C)?C:"default";d(P),P!=="custom"&&n(P)},e[5]=n,e[6]=x,e[7]=k):k=e[7];const A=k;let N;e[8]!==n?(N=async C=>{await n("custom",C)},e[8]=n,e[9]=N):N=e[9];const I=N;let g;e[10]===Symbol.for("react.memo_cache_sentinel")?(g=s.jsx("div",{children:s.jsx(c,p({},De.chatTheme))}),e[10]=g):g=e[10];let T;e[11]!==l||e[12]!==u||e[13]!==A||e[14]!==x?(T=s.jsx(w,{className:"items-center",children:s.jsxs("div",{className:"flex w-full items-center justify-between",children:[g,s.jsx(Vs,{value:u,onValueChange:A,disabled:l,options:x})]})}),e[11]=l,e[12]=u,e[13]=A,e[14]=x,e[15]=T):T=e[15];let _;e[16]!==t||e[17]!==l||e[18]!==u||e[19]!==I?(_=u==="custom"&&s.jsx(fa,{defaultValue:t,onSave:I,disabled:l}),e[16]=t,e[17]=l,e[18]=u,e[19]=I,e[20]=_):_=e[20];let E;return e[21]!==T||e[22]!==_?(E=s.jsxs(s.Fragment,{children:[T,_]}),e[21]=T,e[22]=_,e[23]=E):E=e[23],E}function ka(i){return i.value}const ja=ze({workspaceThemeSection:{id:"workspaceSettings.workspaceThemeSection",defaultMessage:"Workspace theme"},workspaceAccentColorLabel:{id:"workspaceSettings.workspaceAccentColorLabel",defaultMessage:"Accent color"}});function ya({workspaceId:i}){const{data:e,isLoading:a,refetch:t}=ys(i),n=Ve(),m=!(n==null?void 0:n.isEnterprisey());return e===void 0?null:a?s.jsx(rs,{}):s.jsxs("div",{className:"mt-6 mb-3 flex flex-col gap-4",children:[s.jsx(da,{workspaceId:i,account:n,data:e}),s.jsx(xa,{workspaceId:i,data:e,isLoading:a,refetch:t,upsellEnterprise:m})]})}const Ca=i=>i==="general"||i==="customization"||i==="roles";function Sa({currentWorkspaceId:i}){const e=re(),a=xt(),t=ht(),n=v.useMemo(()=>{const u=[{key:"general",label:e.formatMessage(Ye.generalTab),children:s.jsx(la,{workspaceId:i})}];return t&&u.push({key:"customization",label:e.formatMessage(Ye.workspaceCustomizationTab),children:s.jsx(ya,{workspaceId:i})}),a&&u.push({key:"roles",label:e.formatMessage(Ye.customRolesTab),children:s.jsx(Ut,{workspaceId:i})}),u},[i,t,e,a]),l=ns(),[m]=Is(),r=m.get("tab"),[d,o]=v.useState(r&&Ca(r)?r:n[0].key),f=u=>{o(u),l({pathname:window.location.pathname,search:new URLSearchParams({tab:u}).toString()})};return s.jsxs(s.Fragment,{children:[s.jsx(Hs,{children:s.jsx("title",{children:e.formatMessage(Ye.title)})}),s.jsx(Ot,{title:e.formatMessage(Ye.title),subtitle:e.formatMessage(Ye.subtitle),tabsHeader:s.jsx(Wt,{items:n,activeTab:d,onTabChange:f})}),s.jsx(Gt,{children:s.jsx(Dt,{items:n,activeTab:d})})]})}const Ye=ze({title:{id:"842i2c",defaultMessage:"Settings & permissions"},subtitle:{id:"s0ozLO",defaultMessage:"Configure baseline permissions for your workspace and tailor access with custom roles."},generalTab:{id:"bNJn8S",defaultMessage:"Workspace"},workspaceCustomizationTab:{id:"8w0qc+",defaultMessage:"Customization"},customRolesTab:{id:"0SIrmV",defaultMessage:"Custom roles"}}),si=Ts(function(){const e=Ft();return Kt(),s.jsx(Sa,p({},e))});export{si as default};
//# sourceMappingURL=ja14r4obba1zuqsr.js.map
