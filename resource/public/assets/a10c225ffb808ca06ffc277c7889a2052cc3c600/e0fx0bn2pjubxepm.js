var P=Object.defineProperty;var C=Object.getOwnPropertySymbols;var E=Object.prototype.hasOwnProperty,B=Object.prototype.propertyIsEnumerable;var v=(a,e,s)=>e in a?P(a,e,{enumerable:!0,configurable:!0,writable:!0,value:s}):a[e]=s,S=(a,e)=>{for(var s in e||(e={}))E.call(e,s)&&v(a,s,e[s]);if(C)for(var s of C(e))B.call(e,s)&&v(a,s,e[s]);return a};import{b as U,r as $,j as t,M as u,c as k,G as F}from"./jj85rqzpbnvv3emr.js";import{fL as W}from"./mclphevd122040jw.js";import{k as T,E as L}from"./lef5ym39glv4981l.js";import{W as Y}from"./i5w9a1ap4yrxpqjj.js";import{f as q}from"./ef92qx749w9klz4o.js";import"./hqbuxjfjvu1puiaw.js";import"./jxokrjy8ycftw0wv.js";import"./jk4cx3iywxazx01l.js";import"./hc8beflnn681x6ow.js";import"./mw2u7timj0qnsnvj.js";import"./dvqe6kc43fkjsavv.js";import"./nk7ydxm8ptxusvbt.js";import"./k059n59kmbyb9lsl.js";import"./ojb4d4bxj44fs0l8.js";import"./oz589d7sqtxcbljf.js";import"./kxedrjbxv2qblujd.js";const R="quota";function I(a){return Math.min(Math.max(Math.round(a),0),100)}function O(a,e){return!e.allowed||e.limit_reached||a<=30?"bg-[#f87171]":"bg-[#22c55e]"}function A(a,e,s,i,o){var l;const r=I(100-((l=s.used_percent)!=null?l:0)),n=Q(a,s.reset_after_seconds);return{id:i,label:t.jsx(u,S({},o)),remainingPercent:r,resetLabel:n,barColorClassName:O(r,e)}}function G(a,e){const s=e==null?void 0:e.rate_limit;if(!s)return[];const i=[],o=[{window:s.primary_window,idSuffix:"primary",labelMessage:{id:"wham.usageDashboard.metric.window.primary",defaultMessage:"5 hour usage limit",description:"Label for the short usage window metric"}},{window:s.secondary_window,idSuffix:"secondary",labelMessage:{id:"wham.usageDashboard.metric.window.secondary",defaultMessage:"Weekly usage limit",description:"Label for the long usage window metric"}}];for(const r of o)r.window&&i.push(A(a,s,r.window,"".concat(R,"-").concat(r.idSuffix),r.labelMessage));return i.length===0?[]:[{id:R,title:t.jsx(u,{id:"wham.usageDashboard.section.quota",defaultMessage:"Quota usage"}),metrics:i}]}function Q(a,e){const s=Math.max(e,0),i=new Date,o=new Date(i.getTime()+s*1e3),r=a.formatTime(o,{hour:"2-digit",minute:"2-digit",hour12:!1});if(o.getFullYear()===i.getFullYear()&&o.getMonth()===i.getMonth()&&o.getDate()===i.getDate())return a.formatMessage({id:"wham.usageDashboard.metric.resetSameDay",defaultMessage:"Resets {time}"},{time:r});const l=a.formatDate(o,{day:"numeric"}),d=a.formatDate(o,{month:"short"}),c=a.formatMessage({id:"wham.usageDashboard.metric.resetDateLabel",defaultMessage:"{day} {month}"},{day:l,month:d});return a.formatMessage({id:"wham.usageDashboard.metric.resetWithDate",defaultMessage:"Resets {date}, {time}"},{date:c,time:r})}function V(){"use forget";var g;const a=U(),{data:e,isLoading:s,error:i,refetch:o,isFetching:r}=q(),n=$.useMemo(()=>G(a,e!=null?e:void 0),[e,a]),l=i instanceof T?i:null,d=!!(l&&(l.status===403||l.status===404)),c=!!(i&&!d),h=!!(e&&n.length===0),f=(g=e==null?void 0:e.rate_limit)!=null?g:null,M=!!(f&&(!f.allowed||f.limit_reached))?t.jsx(N,{title:f!=null&&f.limit_reached?t.jsx(u,{id:"wham.usageDashboard.banner.limitReached",defaultMessage:"You have reached your Codex usage limit. Usage will resume after the next reset."}):t.jsx(u,{id:"wham.usageDashboard.banner.temporarilyDisabled",defaultMessage:"Codex usage is restricted for your account."})}):null;let m;return s?m=t.jsxs("div",{className:"flex w-full items-center justify-center py-16",children:[t.jsx(L,{className:"icon me-2"}),t.jsx("span",{className:"text-token-text-secondary text-sm font-medium",children:t.jsx(u,{id:"wham.usageDashboard.loading",defaultMessage:"Loading usage data"})})]}):d?m=t.jsx(N,{title:t.jsx(u,{id:"wham.usageDashboard.unavailable.title",defaultMessage:"Usage information is not available"}),description:t.jsx(u,{id:"wham.usageDashboard.unavailable.body",defaultMessage:"Your workspace does not have access to individual Codex usage reporting. Check with your administrator if you believe this is an error."})}):c?m=t.jsx(N,{title:t.jsx(u,{id:"wham.usageDashboard.error.title",defaultMessage:"We couldnâ€™t load your usage data"}),description:t.jsx(u,{id:"wham.usageDashboard.error.body",defaultMessage:"Please try again. If the issue continues, contact support."}),action:t.jsx("button",{type:"button",className:"text-token-text-primary hover:bg-token-bg-tertiary border-token-border-default inline-flex items-center gap-2 rounded-xl border px-3 py-2 text-sm font-medium transition",onClick:()=>{o()},disabled:r,children:r?t.jsx(L,{className:"icon"}):t.jsx(u,{id:"wham.usageDashboard.error.retry",defaultMessage:"Retry"})})}):h?m=t.jsx(N,{title:t.jsx(u,{id:"wham.usageDashboard.empty.title",defaultMessage:"No personal rate limits"}),description:t.jsx(u,{id:"wham.usageDashboard.empty.body",defaultMessage:"Your current plan does not impose Codex rate limits, so there is no usage to display."})}):m=t.jsxs(t.Fragment,{children:[n.map(x=>t.jsx(z,{title:x.title,metrics:x.metrics},x.id)),M]}),t.jsx(Y,{topPadding:!0,children:t.jsxs("div",{className:"mx-auto flex h-full w-full max-w-5xl flex-1 flex-col gap-10 px-4 pb-16",children:[t.jsx("header",{className:"border-token-border-subtle flex flex-col gap-4 border-b pb-6",children:t.jsx("h1",{className:"text-token-text-primary text-2xl font-semibold",children:t.jsx(u,{id:"wham.usageDashboard.title",defaultMessage:"Usage dashboard"})})}),t.jsx("div",{className:"flex flex-col gap-10",children:m})]})})}function z(a){"use forget";const e=k.c(9),{title:s,metrics:i}=a;let o;e[0]!==s?(o=t.jsx("div",{className:"border-token-border-subtle flex flex-col gap-2 border-b pb-2",children:t.jsx("h2",{className:"text-token-text-primary text-base font-medium",children:s})}),e[0]=s,e[1]=o):o=e[1];let r;e[2]!==i?(r=i.map(H),e[2]=i,e[3]=r):r=e[3];let n;e[4]!==r?(n=t.jsx("div",{className:"grid gap-4 md:grid-cols-2",children:r}),e[4]=r,e[5]=n):n=e[5];let l;return e[6]!==o||e[7]!==n?(l=t.jsxs("section",{className:"flex flex-col gap-6",children:[o,n]}),e[6]=o,e[7]=n,e[8]=l):l=e[8],l}function H(a){return t.jsx(J,{metric:a},a.id)}function N(a){"use forget";const e=k.c(10),{title:s,description:i,action:o}=a;let r;e[0]!==s?(r=t.jsx("h2",{className:"text-token-text-primary text-base font-medium",children:s}),e[0]=s,e[1]=r):r=e[1];let n;e[2]!==i?(n=i?t.jsx("p",{className:"text-token-text-secondary text-sm",children:i}):null,e[2]=i,e[3]=n):n=e[3];let l;e[4]!==o?(l=o?t.jsx("div",{className:"pt-1",children:o}):null,e[4]=o,e[5]=l):l=e[5];let d;return e[6]!==r||e[7]!==n||e[8]!==l?(d=t.jsxs("article",{className:"border-token-border-subtle bg-token-bg-primary flex flex-col gap-3 rounded-3xl border p-6 shadow-[0_16px_32px_-24px_rgba(15,23,42,0.25)]",children:[r,n,l]}),e[6]=r,e[7]=n,e[8]=l,e[9]=d):d=e[9],d}function J(a){"use forget";const e=k.c(29),{metric:s}=a,i=U(),{label:o,remainingPercent:r,resetLabel:n,barColorClassName:l}=s;let d;e[0]!==r?(d=Math.round(r),e[0]=r,e[1]=d):d=e[1];const c=Math.min(Math.max(d,0),100);let h;e[2]!==i||e[3]!==c?(h=i.formatNumber(c/100,{style:"percent",maximumFractionDigits:0}),e[2]=i,e[3]=c,e[4]=h):h=e[4];const f=h;let y;e[5]!==i?(y=i.formatMessage({id:"wham.usageDashboard.metric.remainingLabel",defaultMessage:"remaining"}),e[5]=i,e[6]=y):y=e[6];const M=y;let m;e[7]!==o?(m=t.jsx("p",{className:"text-token-text-tertiary text-sm font-medium",children:o}),e[7]=o,e[8]=m):m=e[8];let g;e[9]!==f?(g=t.jsx("span",{className:"text-2xl font-semibold",children:f}),e[9]=f,e[10]=g):g=e[10];let x;e[11]!==M?(x=t.jsxs("span",{className:"text-base font-normal",children:[" ",M]}),e[11]=M,e[12]=x):x=e[12];let b;e[13]!==g||e[14]!==x?(b=t.jsxs("div",{className:"text-token-text-primary flex items-baseline gap-1",children:[g,x]}),e[13]=g,e[14]=x,e[15]=b):b=e[15];let p;e[16]!==m||e[17]!==b?(p=t.jsxs("header",{className:"flex flex-col gap-1",children:[m,b]}),e[16]=m,e[17]=b,e[18]=p):p=e[18];const _="".concat(l," rounded-full");let w;e[19]!==c||e[20]!==_?(w=t.jsx(W,{percentage:c,height:12,backgroundClassName:"rounded-full bg-[#ebebf0]",barClassName:_}),e[19]=c,e[20]=_,e[21]=w):w=e[21];let j;e[22]!==c||e[23]!==n?(j=c<100?t.jsxs("div",{className:"text-token-text-tertiary flex items-center text-xs",children:[t.jsx("span",{children:n}),t.jsx("span",{className:"bg-token-border-subtle mx-2 inline-block h-1 w-1 rounded-full","aria-hidden":!0})]}):null,e[22]=c,e[23]=n,e[24]=j):j=e[24];let D;return e[25]!==w||e[26]!==j||e[27]!==p?(D=t.jsxs("article",{className:"border-token-border-subtle bg-token-bg-primary flex flex-col gap-4 rounded-3xl border p-6 shadow-[0_16px_32px_-24px_rgba(15,23,42,0.25)]",children:[p,w,j]}),e[25]=w,e[26]=j,e[27]=p,e[28]=D):D=e[28],D}const xe=()=>[{title:"Codex"}],ge=F(function(){"use forget";const e=k.c(1);let s;return e[0]===Symbol.for("react.memo_cache_sentinel")?(s=t.jsx(V,{}),e[0]=s):s=e[0],s});export{ge as default,xe as meta};
//# sourceMappingURL=e0fx0bn2pjubxepm.js.map
