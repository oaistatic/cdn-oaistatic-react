var ot=Object.defineProperty,rt=Object.defineProperties;var it=Object.getOwnPropertyDescriptors;var Pe=Object.getOwnPropertySymbols;var lt=Object.prototype.hasOwnProperty,ct=Object.prototype.propertyIsEnumerable;var Ae=(t,e,n)=>e in t?ot(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,ee=(t,e)=>{for(var n in e||(e={}))lt.call(e,n)&&Ae(t,n,e[n]);if(Pe)for(var n of Pe(e))ct.call(e,n)&&Ae(t,n,e[n]);return t},se=(t,e)=>rt(t,it(e));import{j as s,b as Y,r as N,M as P,u as De,a as _e,s as Oe,g as Ge,c as q,R as we,L as dt,ak as be}from"./jj85rqzpbnvv3emr.js";import{B as mt}from"./hqbuxjfjvu1puiaw.js";import{f as me,sk as ut,hZ as ke,pj as ze,es as Ue,e as le,T as ft,B as Q,i6 as ht,E as ue,i as J,j as K,bo as xt,n as $e,_ as gt,S as pt,kK as wt,fw as bt,eE as ve,lC as vt,C as jt,mg as _t,r as kt,fn as yt,fl as Ct,b_ as St,gI as Nt,gz as ie,gC as Ie,be as Tt,rY as Et,s2 as Mt,jj as Rt,jX as Pt,qd as At,rX as Ce}from"./lef5ym39glv4981l.js";import{b as It}from"./n82i9qkvs5r9bggc.js";import{a as fe,b as Wt,g as Lt,W as Se}from"./jt0fc5oel309hgy2.js";import{a3 as Ft,u_ as Ht,bf as Bt,u$ as Ve,gt as Dt,v0 as Ot,bV as Gt,fz as zt,tQ as Ut,tT as $t}from"./mclphevd122040jw.js";import{C as ae,a as Qe,b as We,u as Vt,c as Qt}from"./nk7ydxm8ptxusvbt.js";import{R as Kt}from"./m83mvyv553om663v.js";import{W as qt}from"./dzxl2udm7ibdp6jw.js";import{u as Xt,b as Zt,a as Yt,c as Jt,E as es,h as Ne}from"./i5w9a1ap4yrxpqjj.js";import{P as ts,m as A,W as ye,u as Ke,Q as ss,R as as,t as ns,H as qe,v as os,c as Le,G as rs,T as is}from"./ef92qx749w9klz4o.js";import{T as ls}from"./nel1ztt16rssielp.js";import{u as Xe}from"./l0qst8b5ko1unmi5.js";import{S as cs}from"./be11s8wd1k6ws4r8.js";import{I as ds}from"./l45tzjfw41ny1oxj.js";import{u as ms,g as us,W as he}from"./i40tl4cuke87hmzs.js";import{h as fs}from"./jza9spsuu2f7ynxb.js";import{u as hs,A as xs,R as gs,N as ps,a as ws}from"./ghevfdrvws126g4g.js";import{F as Fe}from"./otrobs7izu0hlfln.js";import{u as bs}from"./hxd0yong6zdu9u3r.js";import{b as vs}from"./lptwpbjabrvjmhsj.js";import{u as js}from"./cyjxa1lf8mf7jt69.js";import{u as _s}from"./2dhqllc5pireni9q.js";import{u as ks}from"./chkdmiqd2p7k2syq.js";function Ze({disabled:t,children:e}){return t?s.jsx("div",{className:"pointer-events-none opacity-50 select-none","aria-hidden":"true",tabIndex:-1,inert:!0,children:e}):e}function Ye({isGitHubConnected:t=!1,onClickCreateEnvironment:e}){const n=Y(),c=me(),p=!1;ae.Complete;const r=p,h=p,{enabled:m,isLoading:l}=ut(ke.CODEX),u=N.useCallback(()=>{c.danger(n.formatMessage({id:"+vfzDI",defaultMessage:"Error fetching connector, please ensure GitHub is enabled for your account"}))},[n,c]),a=u,{isConnected:x,isLoading:i,openGithubModal:o,error:d,refetch:y}=ze(Ue.GITHUB_CONNECTOR,"github","/codex",ke.CODEX,u,a),j=s.jsx(Kt,{refetchConnectorData:y}),f=s.jsx(Q,{color:"primary",size:"medium",icon:ht,loading:i||l,onClick:()=>{!m||x||o()},disabled:!m||x,className:"px-3",children:s.jsx(P,{id:"wham.codexOnboardingConnections.connectGithub",defaultMessage:"Connect to GitHub"})}),b=s.jsx(Q,{color:"secondary",size:"medium",icon:Ft,onClick:()=>e==null?void 0:e(),className:"px-3",children:s.jsx(P,{id:"wham.createEnvironment.cta",defaultMessage:"Create environment"})}),w=t||h,g=w?b:d?j:f;return s.jsx("div",{className:le("bg-token-bg-tertiary","rounded-2xl","w-full","min-h-[220px]","flex items-center justify-center","pointer-events-auto","border-token-border-light","border"),children:s.jsxs("div",{className:"flex flex-col items-center gap-2 p-8",children:[w||d||m||r?g:s.jsx(ft,{label:n.formatMessage({id:"wham.codexOnboardingConnections.githubDisabledByAdmin",defaultMessage:"Disabled by workspace admin"}),children:s.jsx("div",{children:g})}),!w&&s.jsx("div",{className:"text-token-text-secondary text-xs",children:s.jsx(P,{id:"wham.whamComposer.connectGithubSubtitle",defaultMessage:"Connect a repository to create a task"})})]})})}function ys(){var r;const{data:t,isLoading:e}=ts(),n=(r=t==null?void 0:t.items)!=null?r:[],[c,p]=N.useState(null);return e&&n.length===0?s.jsx("div",{className:"mt-4 flex h-full w-full items-center justify-center",children:s.jsx(ue,{})}):s.jsx("div",{className:"flex flex-col justify-center",children:n.map((h,m)=>{var l;return s.jsx(Qe,{index:m,taskListItem:h,hoveredIndex:c,onMouseEnter:()=>p(m),onMouseLeave:()=>p(null),linkPath:"/s/".concat(h.share_task_id),showArchiveButton:!1,currentFilter:"current"},(l=h.id)!=null?l:"".concat(m))})})}function Je(){const t=Y(),e=me(),n=A(f=>f.environmentId),c=A(f=>f.branch),p=A(f=>f.setRateLimit),r=fe(),[h,m]=N.useState(null),l=De(),{isCreatingEnvironment:u,ensureEnvironment:a,hasRepository:x}=Wt(),i=!!(n&&c),o=r?!i&&!x:!i,d=[{id:"ask-0",type:"ask",prompt:t.formatMessage({id:"wham.codexOnboardingStarterTasks.ask.prompt.0",defaultMessage:"Explain the codebase to a newcomer. What is the general structure, what are the important things to know, and what are some pointers for things to learn next?"})},{id:"build-1",type:"build",prompt:t.formatMessage({id:"wham.codexOnboardingStarterTasks.build.prompt.1",defaultMessage:"Pick a part of the codebase that seems important and find and fix a bug."})},{id:"ask-2",type:"ask",prompt:t.formatMessage({id:"wham.codexOnboardingStarterTasks.ask.prompt.2",defaultMessage:"Go through the codebase, find issues and propose one task to fix a typo, one task to fix a bug, one task to fix a code comment or documentation discrepancy, and one task to improve a test."})}],{mutate:y}=_e({mutationFn:async({prompt:f,id:b})=>{const{environmentId:w,branch:g}=A.getState();if(!w||!g)throw e.danger(t.formatMessage({id:"wham.whamComposer.failedToCreateTask",defaultMessage:"Failed to create task"})),new Error("Environment, content, and branch are required");const k=crypto.randomUUID();return A.getState().addPendingTaskId(k),m(b),await ye.createNewTask(w,g,f,!1).catch(T=>{throw A.getState().removePendingTaskId(k),e.danger(t.formatMessage({id:"wham.whamComposer.failedToCreateTask",defaultMessage:"Failed to create task"}),{id:k,duration:5,hasCloseButton:!0}),T}).then(T=>(A.getState().assignPendingTaskToFinalTask(k,T.task.id),T))},onSuccess:f=>{l.refetchQueries({queryKey:["wham","tasks"]}),f&&p(f.rate_limit)},onSettled:()=>{m(null)}}),j=async f=>{if(r&&!i){if(!x){e.danger(t.formatMessage({id:"wham.startFirstTask.selectRepository",defaultMessage:"Select a repository before starting a task"}));return}m(f.id);try{if(!await a()){m(null);return}}catch(b){m(null);return}y({prompt:f.prompt,id:f.id});return}y({prompt:f.prompt,id:f.id})};return s.jsxs("div",{className:"w-full px-3 md:px-0",children:[s.jsx("div",{className:"text-token-text-primary ps-1 pt-6 pb-3 text-sm font-medium",children:s.jsx(P,{id:"wham.startFirstTask.title",defaultMessage:"Start your first task"})}),s.jsx("div",{className:"bg-token-bg-tertiary dark:bg-token-bg-secondary rounded-3xl p-4",children:s.jsx("div",{className:"grid grid-cols-1 gap-3 md:grid-cols-3",children:d.map(f=>s.jsxs("div",{className:le("bg-token-bg-primary dark:bg-token-bg-tertiary flex flex-col justify-between rounded-2xl p-4 shadow-[0px_1px_1px_0px_var(--shadow-color-1,rgba(0,_0,_0,_0.06)),0px_0px_1px_0px_var(--shadow-color-2,rgba(0,_0,_0,_0.3))] dark:shadow-[0px_1px_1px_0px_var(--shadow-color-1,rgba(0,_0,_0,_0.10)),inset_0px_0px_1px_0px_var(--shadow-color-2,rgba(255,_255,_255,_0.2))]"),children:[s.jsx("div",{className:"text-token-text-primary pb-4 text-sm leading-5.5",children:f.prompt}),s.jsx(Q,{color:"secondary",disabled:o||u,loading:h===f.id,className:"self-start",onClick:()=>j(f),children:s.jsx(P,{id:"wham.startFirstTask.cta",defaultMessage:"Start"})})]},f.id))})})]})}function Te(){const t=J();return K(t,"2894268612")||void 0}const He="tab";function Cs(t){switch(t){case"code_reviews":return"code_reviews";case"archived":return"archived";case"all":default:return"all"}}function et(){"use forget";const t=Oe(),e=Ge(),n=A(i=>i.setTasksFilter),c=A(i=>i.homeTab),p=A(i=>i.setHomeTabValue),r=Te(),m=N.useMemo(()=>new URLSearchParams(t.search),[t.search]).get(He),l=Cs(m),u=m!=null;let a=u?l:c;a==="code_reviews"&&!r&&(a="all"),N.useEffect(()=>{n(a==="archived"?"archived":a==="code_reviews"?"code_review":"current")},[a,n]),N.useEffect(()=>{c!==a&&p(a)},[a,p,c]);const x=N.useCallback(i=>{const o=i==="code_reviews"&&!r?"all":i;p(o),n(o==="archived"?"archived":o==="code_reviews"?"code_review":"current");const d=new URLSearchParams(t.search);d.set(He,o),e({pathname:t.pathname,search:d.toString()},{replace:!0})},[r,t.pathname,t.search,e,p,n]);return N.useEffect(()=>{m==="code_reviews"&&!r&&x("all")},[r,m,x]),{homeTab:a,setHomeTab:x,hasExplicitTab:u}}function Ee(){"use forget";const t=q.c(73),e=Y(),n=me(),{homeTab:c,setHomeTab:p}=et(),r=Te(),h=A(Ns),m=A(Ss),{eligible:l,isLoading:u,markAsViewed:a}=Ht(),x=r&&!u&&l,{data:i,isLoading:o}=Ke();let d;t[0]===Symbol.for("react.memo_cache_sentinel")?(d={showToast:!1},t[0]=d):d=t[0];const{mutate:y,isPending:j}=Xe(d),f=(i==null?void 0:i.code_review_preference)==="always",[b,w]=N.useState(f);let g,k;t[1]!==f?(g=()=>{w(f)},k=[f],t[1]=f,t[2]=g,t[3]=k):(g=t[2],k=t[3]),N.useEffect(g,k);let _;t[4]!==e||t[5]!==j||t[6]!==n||t[7]!==y||t[8]!==i?(_=te=>{if(!i||j)return;const Re=te?"always":"repo_default";if(i.code_review_preference===Re)return;const at=i.code_review_preference;w(te);const nt=te?{id:"wham.whamTasksHeader.autoReviewEnabledToast",defaultMessage:"Auto run on your PRs is on",description:"Toast message shown when a user enables automatic code reviews on their pull requests"}:{id:"wham.whamTasksHeader.autoReviewDisabledToast",defaultMessage:"Auto run on your PRs is off",description:"Toast message shown when a user disables automatic code reviews on their pull requests"};y({codeReviewPreference:Re},{onSuccess:()=>{n.success(e.formatMessage(nt),{duration:2})},onError:()=>{w(at==="always")}})},t[4]=e,t[5]=j,t[6]=n,t[7]=y,t[8]=i,t[9]=_):_=t[9];const T=_;let E;t[10]!==l||t[11]!==u||t[12]!==a||t[13]!==p||t[14]!==m?(E=te=>{p(te),te==="code_reviews"&&!u&&l&&a(),te==="all"&&m(!1)},t[10]=l,t[11]=u,t[12]=a,t[13]=p,t[14]=m,t[15]=E):E=t[15];const L=E;let I,F;t[16]!==c||t[17]!==l||t[18]!==u||t[19]!==a?(I=()=>{c==="code_reviews"&&!u&&l&&a()},F=[c,l,u,a],t[16]=c,t[17]=l,t[18]=u,t[19]=a,t[20]=I,t[21]=F):(I=t[20],F=t[21]),N.useEffect(I,F);let C,B;t[22]!==c||t[23]!==m?(C=()=>{c==="all"&&m(!1)},B=[c,m],t[22]=c,t[23]=m,t[24]=C,t[25]=B):(C=t[24],B=t[25]),N.useEffect(C,B);let D;t[26]!==e?(D=e.formatMessage({id:"wham.whamTasksHeader.tasks",defaultMessage:"Tasks"}),t[26]=e,t[27]=D):D=t[27];const U=D;let G;t[28]!==h?(G=h?s.jsx("span",{"aria-hidden":"true",className:"absolute -end-2 top-1 size-1.5 -translate-y-1/2 rounded-full bg-blue-400"}):null,t[28]=h,t[29]=G):G=t[29];let z;t[30]!==G||t[31]!==U?(z=s.jsxs("span",{className:"relative inline-flex items-center",children:[U,G]}),t[30]=G,t[31]=U,t[32]=z):z=t[32];const $=z;let v;t[33]!==e?(v=e.formatMessage({id:"wham.whamTasksHeader.codeReviews",defaultMessage:"Code reviews"}),t[33]=e,t[34]=v):v=t[34];const M=v;let R;t[35]!==x?(R=x?s.jsx("span",{"aria-hidden":"true",className:"absolute -end-2 top-1 size-1.5 -translate-y-1/2 rounded-full bg-blue-400"}):null,t[35]=x,t[36]=R):R=t[36];let S;t[37]!==M||t[38]!==R?(S=s.jsxs("span",{className:"relative inline-flex items-center",children:[M,R]}),t[37]=M,t[38]=R,t[39]=S):S=t[39];const W=S;let O;t[40]!==e?(O=e.formatMessage({id:"wham.whamTasksHeader.tasksAriaLabel",defaultMessage:"Tab selector to view active tasks"}),t[40]=e,t[41]=O):O=t[41];let H;t[42]!==O||t[43]!==$?(H={label:$,ariaLabel:O,key:"all"},t[42]=O,t[43]=$,t[44]=H):H=t[44];let X;t[45]!==r||t[46]!==W||t[47]!==e?(X=r?[{label:W,ariaLabel:e.formatMessage({id:"wham.whamTasksHeader.codeReviewsAriaLabel",defaultMessage:"Tab selector to view code reviews"}),key:"code_reviews"}]:[],t[45]=r,t[46]=W,t[47]=e,t[48]=X):X=t[48];let V;t[49]!==e?(V=e.formatMessage({id:"wham.whamTasksHeader.archived",defaultMessage:"Archive"}),t[49]=e,t[50]=V):V=t[50];let Z;t[51]!==e?(Z=e.formatMessage({id:"wham.whamTasksHeader.archivedAriaLabel",defaultMessage:"Tab selector to view archived tasks"}),t[51]=e,t[52]=Z):Z=t[52];let ne;t[53]!==V||t[54]!==Z?(ne={label:V,ariaLabel:Z,key:"archived"},t[53]=V,t[54]=Z,t[55]=ne):ne=t[55];let ce;t[56]!==H||t[57]!==X||t[58]!==ne?(ce=[H,...X,ne],t[56]=H,t[57]=X,t[58]=ne,t[59]=ce):ce=t[59];const ge=ce,st=xt(),pe=r&&c==="code_reviews"&&st;let oe;t[60]!==L||t[61]!==c||t[62]!==ge?(oe=s.jsx("div",{className:"flex items-center gap-2",children:s.jsx(ls,{currentTab:c,onChange:L,withUnderline:!0,skipTabUnderlineAnimation:!0,tabs:ge})}),t[60]=L,t[61]=c,t[62]=ge,t[63]=oe):oe=t[63];let re;t[64]!==T||t[65]!==o||t[66]!==j||t[67]!==b||t[68]!==pe?(re=pe&&s.jsxs("label",{className:"flex items-center gap-3 text-sm",children:[s.jsx("span",{className:"text-token-text-primary",children:s.jsx(P,{id:"wham.whamTasksHeader.autoReviewToggleLabel",defaultMessage:"Auto run on my PRs"})}),s.jsx($e,{withinLabel:!0,checked:b,onCheckedChange:T,disabled:o||j})]}),t[64]=T,t[65]=o,t[66]=j,t[67]=b,t[68]=pe,t[69]=re):re=t[69];let de;return t[70]!==oe||t[71]!==re?(de=s.jsxs("div",{className:"border-token-border-primary mt-4 flex w-full flex-wrap items-center justify-between gap-3 border-b align-middle md:mt-6",children:[oe,re]}),t[70]=oe,t[71]=re,t[72]=de):de=t[72],de}function Ss(t){return t.setShouldHighlightTasksTab}function Ns(t){return t.shouldHighlightTasksTab}function Ts({pullRequest:t,checked:e,onToggle:n,isPending:c=!1,disabled:p=!1}){var l;const r=Y(),h=(l=t.title)!=null&&l.trim()?t.title:r.formatMessage({id:"wham.codeReviewSuggestionsCard.untitledPullRequest",defaultMessage:"Untitled pull request"}),m="wham-code-review-suggestion-".concat(t.number);return s.jsx("li",{children:s.jsxs("label",{"aria-disabled":c,className:le("bg-token-bg-secondary flex items-center justify-between gap-4 rounded-lg border px-4 py-3 transition-colors",e&&"bg-token-bg-secondary"),children:[s.jsxs("div",{className:"min-w-0 flex-1",children:[s.jsx("p",{className:"text-token-text-primary text-sm font-medium",children:s.jsx(P,{id:"wham.codeReviewSuggestionsCard.pullRequestTitle",defaultMessage:"Review {title}",values:{title:h}})}),t.head?s.jsx("p",{className:"text-token-text-secondary mt-1 text-xs",children:s.jsx(P,{id:"wham.codeReviewSuggestionsCard.pullRequestBranch",defaultMessage:"Branch: {branch}",values:{branch:t.head}})}):null]}),s.jsx("div",{className:"flex min-w-[1.25rem] flex-shrink-0 items-center justify-center",children:c?s.jsx(ue,{className:"icon-sm text-token-text-secondary"}):s.jsx(Bt,{id:m,checked:e,onChange:u=>n(u.target.checked),containerClassName:"flex-shrink-0",disabled:p})})]})})}function Es({repository:t,pullRequests:e,isLoading:n,isError:c}){var G,z,$;const p=Y(),r=me(),h=De(),m=Ge(),l=A(v=>v.setRateLimit),[u,a]=N.useState([]),[x,i]=N.useState([]),o=v=>{v.length!==0&&i(M=>{const R=new Set(M);return v.forEach(S=>R.add(S)),Array.from(R)})},d=v=>{v.length!==0&&i(M=>{if(M.length===0)return M;const R=new Set(v);return M.filter(S=>!R.has(S))})};N.useEffect(()=>{var v;a((v=e==null?void 0:e.map(M=>M.number))!=null?v:[])},[e]),N.useEffect(()=>{if(!e){i(M=>M.length===0?M:[]);return}const v=new Set(e.map(M=>M.number));i(M=>{const R=M.filter(S=>v.has(S));return R.length===M.length?M:R})},[e]);const y=(v,M)=>{a(R=>M?R.includes(v)?R:[...R,v]:R.filter(S=>S!==v))},j=N.useMemo(()=>{var v;return(v=t==null?void 0:t.owner)==null?void 0:v.id},[t]),f=N.useMemo(()=>t==null?void 0:t.id,[t]),b=N.useMemo(()=>new Set(x),[x]),w=_e({mutationFn:async v=>{if(!t||j==null||f==null)throw new Error("missing_repository_context");return v.length===0?[]:await Promise.allSettled(v.map(R=>{const S=crypto.randomUUID();return A.getState().addPendingCodeReviewId(S),ye.createCodeReviewTask({installationId:j,repoId:f,prNumber:R}).then(W=>(A.getState().assignPendingCodeReviewToFinalTask(S,W.task.id),l(W.rate_limit),W)).catch(W=>{throw A.getState().removePendingCodeReviewId(S),W})}))},onMutate:v=>(o(v),{pendingNumbers:v}),onSuccess:async(v,M)=>{const R=v.filter(W=>W.status==="fulfilled"),S=v.filter(W=>W.status==="rejected");R.length>0&&(a(W=>W.filter(O=>!M.includes(O))),await h.invalidateQueries({queryKey:["wham","tasks"]}),await h.invalidateQueries({queryKey:["wham","pullRequests"]})),S.length>0&&r.danger(p.formatMessage({id:"wham.codeReviewSuggestionsCard.failureToast",defaultMessage:"We couldn't start Codex review for {count, plural, one {# pull request} other {# pull requests}}. Try again."},{count:S.length}))},onError:()=>{r.danger(p.formatMessage({id:"wham.codeReviewSuggestionsCard.genericErrorToast",defaultMessage:"We couldn't start Codex code review right now. Try again later."}))},onSettled:(v,M,R,S)=>{var W;d((W=S==null?void 0:S.pendingNumbers)!=null?W:[])}}),g=_e({mutationFn:v=>{if(!t||j==null||f==null)throw new Error("missing_repository_context");return ye.createCodeReviewTasksForOpenPullRequests({installationId:j,repoId:f,limit:v})},onMutate:v=>{const M=v!=null?v:10,R=e!=null?e:[],S=Math.min(M,R.length,10),W=R.slice(0,S).map(V=>V.number),O=W.slice(0,Math.min(5,W.length));o(O);const H=W.map(V=>{const Z=crypto.randomUUID();return A.getState().addPendingCodeReviewId(Z),{prNumber:V,pendingId:Z}});return{pendingNumbers:O,pendingMeta:H}},onSuccess:async(v,M)=>{var S;const R=(S=v==null?void 0:v.failures)!=null?S:0;R>0&&r.danger(p.formatMessage({id:"wham.codeReviewSuggestionsCard.failureToast",defaultMessage:"We couldn't start Codex review for {count, plural, one {# pull request} other {# pull requests}}. Try again."},{count:R})),a([]),await h.invalidateQueries({queryKey:["wham","tasks"]}),await h.invalidateQueries({queryKey:["wham","pullRequests"]})},onError:(v,M,R)=>{R==null||R.pendingMeta.forEach(({pendingId:S})=>{A.getState().removePendingCodeReviewId(S)}),r.danger(p.formatMessage({id:"wham.codeReviewSuggestionsCard.genericErrorToast",defaultMessage:"We couldn't start Codex code review right now. Try again later."}))},onSettled:(v,M,R,S)=>{var W;d((W=S==null?void 0:S.pendingNumbers)!=null?W:[]),S==null||S.pendingMeta.forEach(({pendingId:O})=>{A.getState().removePendingCodeReviewId(O)})}}),k=(z=(G=t==null?void 0:t.repository_full_name)!=null?G:t==null?void 0:t.name)!=null?z:"",_=(($=e==null?void 0:e.length)!=null?$:0)>0,T=w.isPending,E=g.isPending,L=T||E,I=t&&j!=null&&f!=null,F=u.length>0,C=T||E||!F||!I||n,B=T||E||!I||n||!_;let D;n?D=s.jsx("div",{className:"flex items-center justify-center py-8",children:s.jsx(ue,{})}):c?D=s.jsx("p",{className:"text-token-text-secondary text-sm",children:s.jsx(P,{id:"wham.codeReviewSuggestionsCard.error",defaultMessage:"We couldn't load your pull requests. Try again later."})}):t?_?D=s.jsx("div",{className:"flex flex-col gap-4",children:s.jsx("ul",{className:"flex flex-col gap-3",children:e==null?void 0:e.map(v=>s.jsx(Ts,{pullRequest:v,checked:u.includes(v.number),onToggle:M=>y(v.number,M),isPending:b.has(v.number),disabled:L},v.number))})}):D=s.jsx("p",{className:"text-token-text-secondary text-sm",children:s.jsx(P,{id:"wham.codeReviewSuggestionsCard.noOpenPullRequests",defaultMessage:"We didn't find any open pull requests in {repository}. Select a repository with open PRs to start code reviews.",values:{repository:k}})}):D=s.jsx("p",{className:"text-token-text-secondary text-sm",children:s.jsx(P,{id:"wham.codeReviewSuggestionsCard.noRepositorySelected",defaultMessage:"Select a repository with open PRs to start a code review."})});const U=I&&_?s.jsxs("div",{className:"flex flex-col gap-2",children:[s.jsx(Q,{type:"button",color:"primary",size:"medium",className:"w-full",disabled:C,loading:T,onClick:()=>w.mutate(u),children:s.jsx(P,{id:"wham.codeReviewSuggestionsCard.startReviewsButton",defaultMessage:"Kick off code reviews"})}),s.jsx(Q,{type:"button",color:"secondary",size:"medium",className:"w-full",disabled:B,loading:E,onClick:()=>{var v;return g.mutate(Math.min((v=e==null?void 0:e.length)!=null?v:10,10))},children:s.jsx(P,{id:"wham.codeReviewSuggestionsCard.runOnAllOpenPRsButton",defaultMessage:"Run on all open PRs"})})]}):s.jsx("span",{className:"text-token-text-tertiary text-xs",children:s.jsx(P,{id:"wham.codeReviewSuggestionsCard.missingInstallation",defaultMessage:"We couldn't find the GitHub installation required to start a review for this repository."})});return s.jsxs("div",{className:"border-token-border-default bg-token-bg-tertiary flex flex-col gap-6 rounded-3xl border p-6 shadow-[0_16px_32px_-24px_rgba(15,23,42,0.25)]",children:[s.jsx("div",{className:"flex flex-wrap items-start justify-between gap-3",children:s.jsxs("div",{className:"flex flex-col gap-2",children:[s.jsxs("div",{className:"flex items-center justify-between gap-2",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"bg-token-bg-primary flex items-center gap-2 rounded-lg p-2",children:s.jsx(Ve,{className:"icon-lg"})}),s.jsx("p",{className:"text-token-text-primary text-lg font-medium",children:s.jsx(P,{id:"wham.codeReviewSuggestionsCard.title",defaultMessage:"Set up Code Review"})})]}),s.jsx(Q,{onClick:()=>{m("/codex/settings/code-review")},icon:Dt,children:s.jsx(P,{id:"wham.codeReviewSuggestionsCard.documentation",defaultMessage:"Repo-level settings"})})]}),s.jsx("p",{className:"text-token-text-secondary mt-2 text-sm",children:s.jsx(P,{id:"wham.codeReviewSuggestionsCard.description",defaultMessage:"Code review catches critical bugs before they ship. It reviews PRs by navigating your codebase, reasoning through dependencies, and running your code and tests to validate correctness."})})]})}),D,U]})}function Ms(t){"use forget";const e=q.c(10),{filter:n,homeTab:c}=t,p=A(Rs),r=c||(n==="archived"?"archived":n==="code_review"?"code_reviews":"all"),h=r==="code_reviews"&&n==="code_review",m=fe(),l=h&&p!=null?p:void 0,{data:u,isLoading:a}=ss(l),x=h&&!!p;let i;e[0]!==x?(i={enabled:x,state:"open",limit:3},e[0]=x,e[1]=i):i=e[1];const{data:o,isLoading:d,isFetching:y,error:j}=as(h&&p!=null?p:null,i);if(h){const b=o==null?void 0:o.pull_requests,w=a||d||y,g=!!j;let k;return e[2]!==b||e[3]!==u||e[4]!==w||e[5]!==g?(k=s.jsx(Es,{repository:u,pullRequests:b,isLoading:w,isError:g}),e[2]=b,e[3]=u,e[4]=w,e[5]=g,e[6]=k):k=e[6],k}if(r==="archived"){let b;return e[7]===Symbol.for("react.memo_cache_sentinel")?(b=s.jsx("div",{className:"text-token-text-secondary text-sm",children:s.jsx(P,{id:"wham.whamTasksSection.noArchivedTasks",defaultMessage:"No archived tasks"})}),e[7]=b):b=e[7],b}if(r==="all"&&m){let b;return e[8]===Symbol.for("react.memo_cache_sentinel")?(b=s.jsx(Je,{}),e[8]=b):b=e[8],b}let f;return e[9]===Symbol.for("react.memo_cache_sentinel")?(f=s.jsx("div",{className:"text-token-text-secondary text-sm",children:s.jsx(P,{id:"wham.whamTasksSection.noActiveTasks",defaultMessage:"No active tasks"})}),e[9]=f):f=e[9],f}function Rs(t){return t.selectedRepositoryId}function Ps({filterOverride:t,homeTab:e}={}){var k;const n=A(({tasksFilter:_})=>_),c=t!=null?t:n,{data:p,isLoading:r,error:h,fetchNextPage:m,hasNextPage:l,isFetchingNextPage:u,refetch:a,isPending:x}=ns({filter:c,refetchOnMount:!0,refetchOnWindowFocus:!0}),i=(k=p==null?void 0:p.pages.flatMap(_=>{var T;return(T=_.items)!=null?T:[]}))!=null?k:[],o=A(_=>_.pendingTaskIds),d=A(_=>_.pendingCodeReviewIds),y=i.length>0,[j,f]=N.useState(null),b=Array.from(Object.entries(o)).filter(([_,T])=>!i.some(E=>E.id===T)).map(([_])=>_).reverse(),w=Array.from(Object.entries(d)).filter(([_,T])=>!i.some(E=>E.id===T)).map(([_])=>_).reverse(),g=i.length===0&&b.length===0&&w.length===0;return s.jsx("div",{className:"flex flex-col justify-center pb-20",children:r&&!y?s.jsx("div",{className:"mt-4 flex h-full w-full items-center justify-center",children:s.jsx(ue,{})}):s.jsxs(s.Fragment,{children:[g&&s.jsx(s.Fragment,{children:h?s.jsxs("div",{className:"mt-6 flex w-full flex-col items-center justify-center gap-2 text-sm",children:[s.jsx("div",{className:"text-interactive-label-warning-secondary",children:s.jsx(P,{id:"wham.whamTasksSection.errorLoadingTasks",defaultMessage:"Error loading tasks"})}),s.jsx(Q,{color:"secondary",onClick:()=>a(),children:s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx(P,{id:"wham.whamTasksSection.retry",defaultMessage:"Retry"}),s.jsx(cs,{className:"icon-xs"})]})})]}):s.jsx("div",{className:"mt-6 flex h-full w-full items-center justify-center",children:s.jsx(Ms,{filter:c,homeTab:e})})}),c==="current"&&b.map(_=>s.jsx(We,{},_)),c==="code_review"&&w.map(_=>s.jsx(We,{},_)),i.map((_,T)=>s.jsx(Qe,{index:T,taskListItem:_,hoveredIndex:j,onMouseEnter:()=>{f(T)},onMouseLeave:()=>f(null),currentFilter:c,showArchiveButton:c!=="code_review"},_.id)),s.jsx(ds,{isFetchingNextPage:u||x,hasNextPage:l!=null?l:!1,fetchNextPage:m})]})})}const Me=N.memo(Ps),As=t=>N.createElement("svg",ee({width:20,height:20,viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"},t),N.createElement("path",{d:"M2.71967 4.21967C3.01256 3.92678 3.48744 3.92678 3.78033 4.21967L9.03033 9.46967C9.32322 9.76256 9.32322 10.2374 9.03033 10.5303L3.78033 15.7803C3.48744 16.0732 3.01256 16.0732 2.71967 15.7803C2.42678 15.4874 2.42678 15.0126 2.71967 14.7197L7.43934 10L2.71967 5.28033C2.42678 4.98744 2.42678 4.51256 2.71967 4.21967ZM10 15.25C10 14.8358 10.3358 14.5 10.75 14.5H16.75C17.1642 14.5 17.5 14.8358 17.5 15.25C17.5 15.6642 17.1642 16 16.75 16H10.75C10.3358 16 10 15.6642 10 15.25Z",fill:"currentColor"}));function xe(){const t=Y(),{data:e,isLoading:n}=qe(),c=gt(),p=A(g=>g.preferredEditor),r=A(g=>g.setPreferredEditor),{eligible:h,isLoading:m,markAsViewed:l}=Ot(),{cli:u,vscode:a,cursor:x,windsurf:i}=ms(),{isConnected:o,openGithubModal:d}=ze(Ue.GITHUB_CONNECTOR,"github","/codex/settings/code-review",ke.CODEX),y=we.useCallback(g=>{o||(g.preventDefault(),d())},[o,d]),j=us(p,c),[f,b]=we.useState(!1),w=we.useRef(!1);return!h||m||n?null:s.jsxs("div",{className:"group w-full px-3 md:px-0",children:[s.jsxs("div",{className:"text-token-text-primary flex items-center justify-between gap-1 ps-1 pt-6 pb-2 text-sm leading-tight font-medium",children:[e?s.jsx(P,{id:"wham.whatsNew.title",defaultMessage:"What's new with Codex"}):s.jsx(P,{id:"wham.gettingStarted.title",defaultMessage:"Get started with Codex"}),s.jsx(Q,{onClick:l,className:"text-token-text-tertiary dark:text-token-text-tertiary w-7 items-center justify-center rounded-lg",size:"small",color:"ghost","aria-label":t.formatMessage({id:"wham.newFeatures.dismiss",defaultMessage:"Dismiss new features announcement"}),children:s.jsx(pt,{className:"icon-sm"})})]}),s.jsxs("div",{className:"grid grid-cols-1 gap-3 md:grid-cols-3",children:[s.jsx(je,{children:s.jsxs("a",{href:u,target:"_blank",rel:"noreferrer",className:"group/card -m-4 flex items-center justify-between gap-3 rounded-2xl p-4",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"bg-token-bg-primary dark:bg-token-bg-tertiary border-token-border-light flex h-10 w-10 items-center justify-center rounded-xl shadow-[0px_1px_1px_0px_var(--shadow-color-1,rgba(0,_0,_0,_0.06)),0px_0px_1px_0px_var(--shadow-color-2,rgba(0,_0,_0,_0.3))] dark:shadow-[0px_1px_1px_0px_var(--shadow-color-1,rgba(0,_0,_0,_0.10)),inset_0px_0px_1px_0px_var(--shadow-color-2,rgba(255,_255,_255,_0.2))]",children:s.jsx(As,{className:"icon-md"})}),s.jsx("div",{className:"text-token-text-primary text-sm font-medium",children:s.jsx(P,{id:"wham.gettingStarted.cli",defaultMessage:"Try in your terminal"})})]}),s.jsx(wt,{className:"icon-sm text-token-text-tertiary origin-bottom-left scale-75 opacity-0 transition-all duration-100 ease-out group-hover/card:scale-100 group-hover/card:opacity-100"})]})}),s.jsx(je,{children:s.jsxs("div",{className:"group/card -m-4 flex cursor-pointer items-center justify-between gap-3 rounded-2xl p-4 select-none",role:"button",tabIndex:0,onPointerDown:()=>{w.current=f},onClick:()=>{w.current?b(!1):b(!0)},onKeyDown:g=>{(g.key==="Enter"||g.key===" ")&&(g.preventDefault(),b(k=>!k))},children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"bg-token-bg-primary dark:bg-token-bg-tertiary border-token-border-light flex h-10 w-10 items-center justify-center rounded-xl shadow-[0px_1px_1px_0px_var(--shadow-color-1,rgba(0,_0,_0,_0.06)),0px_0px_1px_0px_var(--shadow-color-2,rgba(0,_0,_0,_0.3))] dark:shadow-[0px_1px_1px_0px_var(--shadow-color-1,rgba(0,_0,_0,_0.10)),inset_0px_0px_1px_0px_var(--shadow-color-2,rgba(255,_255,_255,_0.2))]",children:s.jsx(j,{className:"h-5 w-5"})}),s.jsx("div",{className:"text-token-text-primary text-sm font-medium",children:s.jsx(P,{id:"wham.gettingStarted.ide",defaultMessage:"Try in your IDE"})})]}),s.jsxs(bt,{contentAlign:"end",open:f,onOpenChange:b,triggerButton:s.jsx("button",{onClick:g=>g.stopPropagation(),"aria-label":t.formatMessage({id:"wham.gettingStarted.ide.open",defaultMessage:"Open IDE links"}),"aria-expanded":f,className:"hover:bg-token-bg-tertiary rounded-md p-1",children:s.jsx(Gt,{className:le("icon-sm text-token-text-tertiary shrink-0 transition-all duration-100 ease-out group-hover/card:translate-y-0 group-hover/card:opacity-100",f?"translate-y-0 opacity-100":"translate-y-0.5 opacity-0")})}),children:[s.jsx(ve.ItemAs,{as:"a",href:a,target:"_blank",rel:"noreferrer",onClick:()=>r("vscode"),children:"VS Code"}),s.jsx(ve.ItemAs,{as:"a",href:x,target:"_blank",rel:"noreferrer",onClick:()=>r("cursor"),children:"Cursor"}),s.jsx(ve.ItemAs,{as:"a",href:i,target:"_blank",rel:"noreferrer",onClick:()=>r("windsurf"),children:"Windsurf"})]})]})}),s.jsx(je,{children:s.jsxs(dt,{to:"/codex/settings/code-review",className:"group/card -m-4 flex items-center gap-2 rounded-2xl p-4",onClick:y,children:[s.jsx("div",{className:"bg-token-bg-primary dark:bg-token-bg-tertiary border-token-border-light flex h-10 w-10 items-center justify-center rounded-xl shadow-[0px_1px_1px_0px_var(--shadow-color-1,rgba(0,_0,_0,_0.06)),0px_0px_1px_0px_var(--shadow-color-2,rgba(0,_0,_0,_0.3))] dark:shadow-[0px_1px_1px_0px_var(--shadow-color-1,rgba(0,_0,_0,_0.10)),inset_0px_0px_1px_0px_var(--shadow-color-2,rgba(255,_255,_255,_0.2))]",children:s.jsx(Ve,{className:"icon-md"})}),s.jsx("div",{className:"text-token-text-primary text-sm font-medium",children:s.jsx(P,{id:"wham.gettingStarted.codeReview",defaultMessage:"Enable code review"})})]})})]})]})}function je({children:t}){return s.jsx("div",{className:le("bg-token-bg-tertiary","dark:bg-token-bg-secondary","flex flex-col justify-between gap-1 rounded-2xl p-4"),children:t})}function Is(){const t=J();return K(t,"3984934927")}function Ws({shouldTurnOn:t,onChange:e}){const{data:n}=Ke(),c=Y();return n?s.jsx("div",{className:"border-token-border-heavy bg-token-bg-primary flex w-full flex-col items-center rounded-lg border p-4",children:s.jsxs("div",{className:"flex w-full justify-between",children:[s.jsxs("div",{className:"flex w-full flex-col items-start justify-start gap-2",children:[s.jsx("p",{className:"text-token-text-primary text-sm leading-tight font-medium",children:s.jsx(P,{id:"wham.enableCodeReviewsToggle.label",defaultMessage:"Code reviews"})}),s.jsx("p",{className:"text-token-text-secondary justify-start text-xs leading-none font-normal",children:s.jsx(P,{id:"wham.enableCodeReviewsToggle.description",defaultMessage:"Automatically run reviews on new pull requests in this repo."})})]}),s.jsx("div",{className:"flex items-center",children:s.jsx($e,{checked:t,onCheckedChange:e,className:"radix-state-checked:bg-black!","aria-label":c.formatMessage({id:"wham.enableCodeReviewsToggle.ariaLabel",defaultMessage:"Enable code reviews by Codex"})})})]})}):null}function tt(){const t=J(),e=vt("installations/select_target"),{data:n,isLoading:c}=os();N.useEffect(()=>{var r,h;if(c)return;[...(r=n==null?void 0:n.memberships)!=null?r:[],...(h=n==null?void 0:n.other)!=null?h:[]].length===0&&fs(e)},[c,n,t,e])}function Ls({backCta:t,handleGoBack:e,handleSelectEnvironment:n,goToNextPage:c,lockPageView:p,shouldDisableRow:r,disablePill:h}){var F;const m=bs(),l=Y(),u=J(),a=Xt(),[x,i]=N.useState(""),[o,d]=N.useState(null),[y,j]=N.useState(!m),{mutate:f,isPending:b}=_s({onSuccess:C=>{Le.recordCreateEnvSuccess(),n(C.id,Lt(C)),c()}}),{mutate:w}=js(),{mutate:g}=Xe({showToast:!1}),k=K(u,"2134057841"),_=K(u,"1535847699");tt();const E=zt({defaultValues:{repositoryId:"",agentNetworkAccess:k?{mode:"off"}:null},validators:{onSubmit:({value:C})=>{var D;const B={};return(!C.repositoryId||C.repositoryId==="")&&(B.repositoryId=l.formatMessage({id:"wham.codexOnboardingEnvironments.repositoryIsRequired",defaultMessage:"Repository is required"})),k&&((D=C.agentNetworkAccess)==null?void 0:D.mode)==="on"&&C.agentNetworkAccess.preset_allowlist===vs&&(!C.agentNetworkAccess.allowlist_domains||C.agentNetworkAccess.allowlist_domains.length===0)&&(B.agentNetworkAccess=l.formatMessage({id:"wham.environmentsForm.agentNetworkAccessAllowlistRequired",defaultMessage:"At least one domain is required"})),{fields:B}}},onSubmit:({value:C})=>{Le.recordEnvironmentsSubmit(),p(),a&&y&&(g({codeReviewPreference:"repo_default"}),w({repo_review_settings:[{repository:C.repositoryId,review_preference:"team"}]})),f(se(ee({},C),{label:x,description:"",machine:"wham-public/wham-universal",workspaceDirectory:"/workspace",share_settings:"workspace",setupCommands:"",maintenanceSetupCommands:"",envVars:[],secrets:[],autoSetupSettings:_?{use_auto_setup:!0}:null}))}}),L=C=>{C.preventDefault(),C.stopPropagation(),E.handleSubmit()},I=hs();return s.jsx("form",{onSubmit:L,className:"flex flex-col gap-6",children:s.jsxs("div",{className:"flex w-full flex-col gap-4",children:[s.jsx(xs,{selectedInstallationId:(F=o==null?void 0:o.id)!=null?F:null,setSelectedInstallation:d}),s.jsx(E.Field,{name:"repositoryId",children:C=>{var B,D,U;return s.jsxs("div",{className:"flex w-full flex-col gap-4",children:[s.jsx(gs,{installationId:(B=o==null?void 0:o.id)!=null?B:null,installationAccountLogin:(D=o==null?void 0:o.account_login)!=null?D:null,installationAccountType:(U=o==null?void 0:o.account_type)!=null?U:null,selectedRepository:C.state.value,onSelect:(G,z)=>{C.handleChange(G),i(z)},shouldDisableRow:r,disablePill:h}),s.jsx(Fe,{field:C})]})}}),a&&s.jsx(Ws,{shouldTurnOn:y,onChange:j}),k&&s.jsx(E.Field,{name:"agentNetworkAccess",children:C=>{var B;return s.jsxs("div",{className:"flex flex-col gap-4",children:[I!=null&&s.jsx(ps,{disabledByWorkspaceSettings:I,agentNetworkAccess:C.state.value,onChange:C.handleChange}),s.jsx(Fe,{field:C}),((B=C.state.value)==null?void 0:B.mode)==="on"&&s.jsx(ws,{})]})}}),s.jsxs("div",{className:"flex w-full items-center justify-between",children:[s.jsx(Q,{color:"secondary",size:"medium",type:"button",onClick:e,children:t}),s.jsx(E.Subscribe,{selector:C=>C.values,children:C=>s.jsx(Q,{color:"primary",size:"medium",loading:b,disabled:!x||k&&!C.agentNetworkAccess,onClick:()=>E.handleSubmit(),children:s.jsx(P,{id:"wham.codexOnboardingEnvironments.createEnvironment",defaultMessage:"Create environment"})})})]})]})})}function Fs(t){"use forget";const e=q.c(24),{isOpen:n,onClose:c}=t,p=Y(),{markAsViewed:r}=Ut(),h=A(Ds),m=A(Bs);let l;e[0]!==m||e[1]!==h?(l=(f,b)=>{h(f),m(b)},e[0]=m,e[1]=h,e[2]=l):l=e[2];const u=l;tt();let a;e[3]!==r||e[4]!==c?(a=()=>{r(),c()},e[3]=r,e[4]=c,e[5]=a):a=e[5];let x;e[6]===Symbol.for("react.memo_cache_sentinel")?(x=s.jsx("h2",{className:"text-center text-2xl font-semibold",children:s.jsx(P,{id:"wham.createFirstEnvironmentModal.title",defaultMessage:"Create your first environment"})}),e[6]=x):x=e[6];let i;e[7]!==p?(i=p.formatMessage({id:"wham.createFirstEnvironmentModal.cancel",defaultMessage:"Cancel"}),e[7]=p,e[8]=i):i=e[8];let o;e[9]!==r||e[10]!==c?(o=()=>{r(),c()},e[9]=r,e[10]=c,e[11]=o):o=e[11];let d;e[12]!==r||e[13]!==c?(d=()=>{r(),c()},e[12]=r,e[13]=c,e[14]=d):d=e[14];let y;e[15]!==u||e[16]!==i||e[17]!==o||e[18]!==d?(y=s.jsxs("div",{className:"flex flex-col gap-4 p-6",children:[x,s.jsx(Ls,{backCta:i,handleGoBack:o,handleSelectEnvironment:u,goToNextPage:d,lockPageView:Hs})]}),e[15]=u,e[16]=i,e[17]=o,e[18]=d,e[19]=y):y=e[19];let j;return e[20]!==n||e[21]!==a||e[22]!==y?(j=s.jsx(jt,{isOpen:n,onClose:a,type:"success",size:"large",noPadding:!0,testId:"modal-wham-create-first-environment",position:"center",contentClassName:"no-scrollbar",className:"h-[90vh]",children:y}),e[20]=n,e[21]=a,e[22]=y,e[23]=j):j=e[23],j}function Hs(){}function Bs(t){return t.setBranch}function Ds(t){return t.setEnvironmentId}function Sa(t){"use forget";const e=q.c(18),n=J(),c=_t(),p=Is(),r=kt(n),h=$t();Vt();let m,l;e[0]!==n?(m=()=>yt(n).limitActionGroups([]),l=[n],e[0]=n,e[1]=m,e[2]=l):(m=e[1],l=e[2]),N.useEffect(m,l);const u=K(n,"547652119"),a=A(Os);if(!c){if(p){let g;return e[3]===Symbol.for("react.memo_cache_sentinel")?(g=s.jsx(Zt,{}),e[3]=g):g=e[3],g}let w;return e[4]===Symbol.for("react.memo_cache_sentinel")?(w=s.jsx(be,{to:"/"}),e[4]=w):w=e[4],w}if(u){let w;return e[5]===Symbol.for("react.memo_cache_sentinel")?(w=s.jsx(be,{to:"/codex/failwhale"}),e[5]=w):w=e[5],w}if(h==="DISABLED"){let w;return e[6]===Symbol.for("react.memo_cache_sentinel")?(w=s.jsx(be,{to:"/",replace:!0}),e[6]=w):w=e[6],w}const x=mt,i=r==null?void 0:r.getWorkspaceId();let o;e[7]!==x||e[8]!==i?(o=s.jsx(x,{page:"codex"},i),e[7]=x,e[8]=i,e[9]=o):o=e[9];let d;e[10]!==a?(d=!1,e[10]=a,e[11]=d):d=e[11];let y;e[12]===Symbol.for("react.memo_cache_sentinel")?(y=s.jsx(Yt,{children:s.jsx(Jt,{hideNotificationBell:!0})}),e[12]=y):y=e[12];let j,f;e[13]===Symbol.for("react.memo_cache_sentinel")?(j=s.jsx(It,{mobileHeaderRightContent:null,children:s.jsxs("div",{className:"flex h-full flex-col",children:[y,s.jsx(Ct,{children:s.jsx(Gs,{})})]})}),f=s.jsx(es,{}),e[13]=j,e[14]=f):(j=e[13],f=e[14]);let b;return e[15]!==o||e[16]!==d?(b=s.jsxs(s.Fragment,{children:[o,d,j,f]}),e[15]=o,e[16]=d,e[17]=b):b=e[17],b}function Os(t){return t.showReactQueryDevtools}function Gs(){"use forget";var R,S,W;const t=q.c(52),{homeTab:e,setHomeTab:n,hasExplicitTab:c}=et(),p=Te(),[r,h,m]=A(zs),[l,u]=N.useState(!1),a=Oe(),{data:x,isLoading:i}=qe(),o=J(),{composerController:d}=ks();let y,j;t[0]!==o?(y=()=>{St(o).prefetchInfiniteQuery(is("archived"))},j=[o],t[0]=o,t[1]=y,t[2]=j):(y=t[1],j=t[2]),N.useEffect(y,j);const f=N.useRef(!1);let b;t[3]!==d||t[4]!==o||t[5]!==((R=a.state)==null?void 0:R.focusComposer)?(b=()=>{var H;const O=K(o,"1406552515");(H=a.state)!=null&&H.focusComposer&&!f.current&&!O&&(Nt(ie(d)),f.current=!0)},t[3]=d,t[4]=o,t[5]=(S=a.state)==null?void 0:S.focusComposer,t[6]=b):b=t[6];const w=(W=a.state)==null?void 0:W.focusComposer;let g;t[7]!==d||t[8]!==o||t[9]!==w?(g=[w,d,o],t[7]=d,t[8]=o,t[9]=w,t[10]=g):g=t[10],N.useEffect(b,g);let k,_;t[11]!==d||t[12]!==o?(k=()=>{const O=K(o,"1406552515");Ie(ie(d),O?"":A.getState().promptDraft)},_=[d,o],t[11]=d,t[12]=o,t[13]=k,t[14]=_):(k=t[13],_=t[14]),N.useEffect(k,_);let T,E;t[15]!==d||t[16]!==r?(T=()=>{const O=Tt(H=>{r(Mt(H.doc)?"":Et(H.doc).content)},1e3);return Rt(()=>Pt(d),O)},E=[d,r],t[15]=d,t[16]=r,t[17]=T,t[18]=E):(T=t[17],E=t[18]),N.useEffect(T,E);let L,I;t[19]!==d||t[20]!==a.search?(I=()=>{const H=new URLSearchParams(a.search).get("prompt");H&&Ie(ie(d),H)},L=[a.search,d],t[19]=d,t[20]=a.search,t[21]=L,t[22]=I):(L=t[21],I=t[22]),N.useEffect(I,L);let F;t[23]!==i||t[24]!==c?(F=()=>{},t[23]=i,t[24]=c,t[25]=F):F=t[25];let C;t[26]!==p||t[27]!==x||t[28]!==i||t[29]!==c||t[30]!==e||t[31]!==n?(C=[p,x,i,e,c,n],t[26]=p,t[27]=x,t[28]=i,t[29]=c,t[30]=e,t[31]=n,t[32]=C):C=t[32],N.useEffect(F,C);const{data:B}=rs();let D,U;t[33]!==B||t[34]!==a.search||t[35]!==h?(D=()=>{const H=new URLSearchParams(a.search).get("environment");H&&(B!=null&&B.some(X=>X.id===H))&&h(H)},U=[a.search,B,h],t[33]=B,t[34]=a.search,t[35]=h,t[36]=D,t[37]=U):(D=t[36],U=t[37]),N.useEffect(D,U);let G,z;t[38]!==a.search||t[39]!==m?(G=()=>{const H=new URLSearchParams(a.search).get("branch");H&&m(H)},z=[a.search,m],t[38]=a.search,t[39]=m,t[40]=G,t[41]=z):(G=t[40],z=t[41]),N.useEffect(G,z);let $;t[42]!==d||t[43]!==e||t[44]!==r?($=s.jsx(qt,{children:s.jsx(Us,{setPromptDraft:r,setShowCreateEnvModal:u,composerController:d,homeTab:e})}),t[42]=d,t[43]=e,t[44]=r,t[45]=$):$=t[45];let v;t[46]!==l?(v=l&&s.jsx(Fs,{isOpen:l,onClose:()=>u(!1)}),t[46]=l,t[47]=v):v=t[47];let M;return t[48]!==d||t[49]!==$||t[50]!==v?(M=s.jsxs(At,{value:d,children:[$,v]}),t[48]=d,t[49]=$,t[50]=v,t[51]=M):M=t[51],M}function zs(t){return[t.setPromptDraft,t.setEnvironmentId,t.setBranch]}function Us(t){"use forget";const e=q.c(21),{state:n}=Qt(),[c,p]=N.useState(!0);let r;e[0]===Symbol.for("react.memo_cache_sentinel")?(r=a=>{const x=()=>{p(a.scrollTop===0)};return a.addEventListener("scroll",x),x(),()=>a.removeEventListener("scroll",x)},e[0]=r):r=e[0];const h=r,m=A($s),[l]=N.useState(!!m),u=c&&m==null;switch(n){case ae.Error:case ae.Complete:{let a;return e[1]!==u||e[2]!==l||e[3]!==t?(a=s.jsx(Be,se(ee({},t),{scrollRef:h,defaultExpanded:u,hasLastViewTaskIdOnMount:l})),e[1]=u,e[2]=l,e[3]=t,e[4]=a):a=e[4],a}case ae.NoGithubConnection:{let a;return e[5]!==u||e[6]!==l||e[7]!==t?(a=s.jsx(Ks,se(ee({},t),{scrollRef:h,defaultExpanded:u,hasLastViewTaskIdOnMount:l})),e[5]=u,e[6]=l,e[7]=t,e[8]=a):a=e[8],a}case ae.NoEnvironmentsCreated:{let a;return e[9]!==u||e[10]!==l||e[11]!==t?(a=s.jsx(qs,se(ee({},t),{scrollRef:h,defaultExpanded:u,hasLastViewTaskIdOnMount:l})),e[9]=u,e[10]=l,e[11]=t,e[12]=a):a=e[12],a}case ae.NoTasksCreated:{let a;return e[13]!==u||e[14]!==l||e[15]!==t?(a=s.jsx(Ys,se(ee({},t),{scrollRef:h,defaultExpanded:u,hasLastViewTaskIdOnMount:l})),e[13]=u,e[14]=l,e[15]=t,e[16]=a):a=e[16],a}case ae.Loading:{let a;return e[17]!==u||e[18]!==l||e[19]!==t?(a=s.jsx(Be,se(ee({},t),{scrollRef:h,defaultExpanded:u,hasLastViewTaskIdOnMount:l})),e[17]=u,e[18]=l,e[19]=t,e[20]=a):a=e[20],a}}}function $s(t){return t.lastViewedTaskId}function Be(t){"use forget";const e=q.c(31),{scrollRef:n,hasLastViewTaskIdOnMount:c,defaultExpanded:p,setPromptDraft:r,setShowCreateEnvModal:h,composerController:m,homeTab:l}=t,u=J();let a;e[0]!==u?(a=K(u,"1406552515"),e[0]=u,e[1]=a):a=e[1];const x=a;let i;e[2]===Symbol.for("react.memo_cache_sentinel")?(i={scrollbarGutter:"stable"},e[2]=i):i=e[2];let o;e[3]===Symbol.for("react.memo_cache_sentinel")?(o=s.jsx(he,{}),e[3]=o):o=e[3];let d;e[4]===Symbol.for("react.memo_cache_sentinel")?(d=s.jsx("h1",{className:"mb-4 pt-4 text-3xl font-normal 2xl:mb-8 2xl:pt-8 2xl:text-3xl [@media(max-height:550px)]:hidden",children:s.jsx(P,{id:"wham.home.title",defaultMessage:"What should we code next?"})}),e[4]=d):d=e[4];const y=c||x,j=p?!0:void 0,f=!x;let b;e[5]!==m||e[6]!==r?(b=()=>{Ce(ie(m)),r("")},e[5]=m,e[6]=r,e[7]=b):b=e[7];let w;e[8]!==h?(w=()=>h(!0),e[8]=h,e[9]=w):w=e[9];let g;e[10]!==y||e[11]!==j||e[12]!==f||e[13]!==b||e[14]!==w?(g=s.jsx(Se,{disableAutoFocus:y,expanded:j,isBigBoxMode:f,onSubmit:b,onSuccess:Vs,onCreateEnvironment:w}),e[10]=y,e[11]=j,e[12]=f,e[13]=b,e[14]=w,e[15]=g):g=e[15];let k;e[16]!==x||e[17]!==g?(k=s.jsx("div",{className:"w-full pt-px max-md:px-3",children:s.jsx(Ze,{disabled:x,children:g})}),e[16]=x,e[17]=g,e[18]=k):k=e[18];let _,T;e[19]===Symbol.for("react.memo_cache_sentinel")?(_=s.jsx(xe,{}),T=s.jsx(Ee,{}),e[19]=_,e[20]=T):(_=e[19],T=e[20]);let E;e[21]!==k?(E=s.jsxs("div",{className:"bg-token-bg-primary sticky top-0 z-50 flex flex-col items-center",children:[d,k,_,T]}),e[21]=k,e[22]=E):E=e[22];let L;e[23]!==l?(L=s.jsx(Me,{homeTab:l}),e[23]=l,e[24]=L):L=e[24];let I;e[25]!==E||e[26]!==L?(I=s.jsxs("div",{className:"z-0 mx-auto flex w-full flex-col md:w-3xl",children:[o,E,L]}),e[25]=E,e[26]=L,e[27]=I):I=e[27];let F;return e[28]!==n||e[29]!==I?(F=s.jsx("div",{className:"h-full w-full overflow-y-auto",ref:n,style:i,children:I}),e[28]=n,e[29]=I,e[30]=F):F=e[30],F}function Vs(){Ne.set(Qs)}function Qs(t){return t+1}function Ks(t){"use forget";const e=q.c(15),{scrollRef:n,setShowCreateEnvModal:c}=t;let p;e[0]===Symbol.for("react.memo_cache_sentinel")?(p={scrollbarGutter:"stable"},e[0]=p):p=e[0];let r;e[1]===Symbol.for("react.memo_cache_sentinel")?(r=s.jsx(he,{}),e[1]=r):r=e[1];let h;e[2]===Symbol.for("react.memo_cache_sentinel")?(h=s.jsx("h1",{className:"mb-4 pt-4 text-3xl font-normal 2xl:mb-8 2xl:pt-8 2xl:text-3xl [@media(max-height:550px)]:hidden",children:s.jsx(P,{id:"wham.home.title",defaultMessage:"What should we code next?"})}),e[2]=h):h=e[2];let m;e[3]!==c?(m=s.jsx("div",{className:"w-full pt-px max-md:px-3",children:s.jsx(Ye,{isGitHubConnected:!1,onClickCreateEnvironment:()=>c(!0)})}),e[3]=c,e[4]=m):m=e[4];let l;e[5]===Symbol.for("react.memo_cache_sentinel")?(l=s.jsx(xe,{}),e[5]=l):l=e[5];let u;e[6]===Symbol.for("react.memo_cache_sentinel")?(u=s.jsx("div",{className:"w-full px-3 md:px-0",children:s.jsx("div",{className:"text-token-text-primary ps-1 pt-6 pb-4 text-sm font-medium",children:s.jsx(P,{id:"wham.samples.title",defaultMessage:"Examples of what Codex can do"})})}),e[6]=u):u=e[6];let a;e[7]!==m?(a=s.jsxs("div",{className:"bg-token-bg-primary sticky top-0 z-50 flex flex-col items-center",children:[h,m,l,u]}),e[7]=m,e[8]=a):a=e[8];let x;e[9]===Symbol.for("react.memo_cache_sentinel")?(x=s.jsx("div",{className:"w-full px-3 md:px-0",children:s.jsx(ys,{})}),e[9]=x):x=e[9];let i;e[10]!==a?(i=s.jsxs("div",{className:"z-0 mx-auto flex w-full flex-col md:w-3xl",children:[r,a,x]}),e[10]=a,e[11]=i):i=e[11];let o;return e[12]!==n||e[13]!==i?(o=s.jsx("div",{className:"h-full w-full overflow-y-auto",ref:n,style:p,children:i}),e[12]=n,e[13]=i,e[14]=o):o=e[14],o}function qs(t){"use forget";const e=q.c(25),{scrollRef:n,hasLastViewTaskIdOnMount:c,defaultExpanded:p,setPromptDraft:r,composerController:h,setShowCreateEnvModal:m,homeTab:l}=t,u=J();let a;e[0]!==u?(a=K(u,"1406552515"),e[0]=u,e[1]=a):a=e[1];const x=a,i=fe();let o;e[2]===Symbol.for("react.memo_cache_sentinel")?(o={scrollbarGutter:"stable"},e[2]=o):o=e[2];let d;e[3]===Symbol.for("react.memo_cache_sentinel")?(d=s.jsx(he,{}),e[3]=d):d=e[3];let y;e[4]===Symbol.for("react.memo_cache_sentinel")?(y=s.jsx("h1",{className:"mb-4 pt-4 text-3xl font-normal 2xl:mb-8 2xl:pt-8 2xl:text-3xl [@media(max-height:550px)]:hidden",children:s.jsx(P,{id:"wham.home.title",defaultMessage:"What should we code next?"})}),e[4]=y):y=e[4];let j;e[5]!==h||e[6]!==p||e[7]!==i||e[8]!==c||e[9]!==x||e[10]!==r||e[11]!==m?(j=s.jsx("div",{className:"w-full pt-px max-md:px-3",children:i?s.jsx(Se,{disableAutoFocus:c||x,expanded:p?!0:void 0,isBigBoxMode:!x,onSubmit:()=>{Ce(ie(h)),r("")},onSuccess:Xs,onCreateEnvironment:()=>m(!0),showRepositorySelector:!0}):s.jsx(Ye,{isGitHubConnected:!0,onClickCreateEnvironment:()=>m(!0)})}),e[5]=h,e[6]=p,e[7]=i,e[8]=c,e[9]=x,e[10]=r,e[11]=m,e[12]=j):j=e[12];let f,b;e[13]===Symbol.for("react.memo_cache_sentinel")?(f=s.jsx(xe,{}),b=s.jsx(Ee,{}),e[13]=f,e[14]=b):(f=e[13],b=e[14]);let w;e[15]!==j?(w=s.jsxs("div",{className:"bg-token-bg-primary sticky top-0 z-50 flex flex-col items-center",children:[y,j,f,b]}),e[15]=j,e[16]=w):w=e[16];let g;e[17]!==l?(g=s.jsx(Me,{homeTab:l}),e[17]=l,e[18]=g):g=e[18];let k;e[19]!==w||e[20]!==g?(k=s.jsxs("div",{className:"z-0 mx-auto flex w-full flex-col md:w-3xl",children:[d,w,g]}),e[19]=w,e[20]=g,e[21]=k):k=e[21];let _;return e[22]!==n||e[23]!==k?(_=s.jsx("div",{className:"h-full w-full overflow-y-auto",ref:n,style:o,children:k}),e[22]=n,e[23]=k,e[24]=_):_=e[24],_}function Xs(){Ne.set(Zs)}function Zs(t){return t+1}function Ys(t){"use forget";const e=q.c(34),{scrollRef:n,hasLastViewTaskIdOnMount:c,defaultExpanded:p,setPromptDraft:r,setShowCreateEnvModal:h,composerController:m,homeTab:l}=t,u=J();let a;e[0]!==u?(a=K(u,"1406552515"),e[0]=u,e[1]=a):a=e[1];const x=a,i=fe();let o;e[2]===Symbol.for("react.memo_cache_sentinel")?(o={scrollbarGutter:"stable"},e[2]=o):o=e[2];let d;e[3]===Symbol.for("react.memo_cache_sentinel")?(d=s.jsx(he,{}),e[3]=d):d=e[3];let y;e[4]===Symbol.for("react.memo_cache_sentinel")?(y=s.jsx("h1",{className:"mb-4 pt-4 text-3xl font-normal 2xl:mb-8 2xl:pt-8 2xl:text-3xl [@media(max-height:550px)]:hidden",children:s.jsx(P,{id:"wham.home.title",defaultMessage:"What should we code next?"})}),e[4]=y):y=e[4];const j=c||x,f=p?!0:void 0,b=!x;let w;e[5]!==m||e[6]!==r?(w=()=>{Ce(ie(m)),r("")},e[5]=m,e[6]=r,e[7]=w):w=e[7];let g;e[8]!==h?(g=()=>h(!0),e[8]=h,e[9]=g):g=e[9];let k;e[10]!==j||e[11]!==f||e[12]!==b||e[13]!==w||e[14]!==g?(k=s.jsx(Se,{disableAutoFocus:j,expanded:f,isBigBoxMode:b,onSubmit:w,onSuccess:Js,onCreateEnvironment:g}),e[10]=j,e[11]=f,e[12]=b,e[13]=w,e[14]=g,e[15]=k):k=e[15];let _;e[16]!==x||e[17]!==k?(_=s.jsx("div",{className:"w-full pt-px max-md:px-3",children:s.jsx(Ze,{disabled:x,children:k})}),e[16]=x,e[17]=k,e[18]=_):_=e[18];let T;e[19]===Symbol.for("react.memo_cache_sentinel")?(T=s.jsx(xe,{}),e[19]=T):T=e[19];let E;e[20]!==i?(E=i?s.jsx(Ee,{}):null,e[20]=i,e[21]=E):E=e[21];let L;e[22]!==_||e[23]!==E?(L=s.jsxs("div",{className:"bg-token-bg-primary sticky top-0 z-50 flex flex-col items-center",children:[y,_,T,E]}),e[22]=_,e[23]=E,e[24]=L):L=e[24];let I;e[25]!==i||e[26]!==l?(I=s.jsx("div",{className:"w-full",children:i?s.jsx(Me,{homeTab:l}):s.jsx(Je,{})}),e[25]=i,e[26]=l,e[27]=I):I=e[27];let F;e[28]!==L||e[29]!==I?(F=s.jsxs("div",{className:"z-0 mx-auto flex w-full flex-col md:w-3xl",children:[d,L,I]}),e[28]=L,e[29]=I,e[30]=F):F=e[30];let C;return e[31]!==n||e[32]!==F?(C=s.jsx("div",{className:"h-full w-full overflow-y-auto",ref:n,style:o,children:F}),e[31]=n,e[32]=F,e[33]=C):C=e[33],C}function Js(){Ne.set(ea)}function ea(t){return t+1}export{Sa as W};
//# sourceMappingURL=osd3cpcsr2n89g2h.js.map
