var p=Object.defineProperty;var l=Object.getOwnPropertySymbols;var h=Object.prototype.hasOwnProperty,B=Object.prototype.propertyIsEnumerable;var i=(a,n,e)=>n in a?p(a,n,{enumerable:!0,configurable:!0,writable:!0,value:e}):a[n]=e,w=(a,n)=>{for(var e in n||(n={}))h.call(n,e)&&i(a,e,n[e]);if(l)for(var e of l(n))B.call(n,e)&&i(a,e,n[e]);return a};import{G as b,a6 as g,j as I,r as k,k as P}from"./jj85rqzpbnvv3emr.js";import{bE as f}from"./mclphevd122040jw.js";import{ax as o,o9 as y}from"./lef5ym39glv4981l.js";const m=async a=>{await P.signOut({callbackUrl:a}),y()},u=(a,n)=>{m(a).then(()=>o.addTiming("chatgpt.web.logout.shouldClearIndexedDB")).catch(e=>{o.addError(new Error("Failed to logout",{cause:e}))})};function F({federatedLogoutUri:a}){const{isFannyPackInitializerEnabled:n}=f();return k.useEffect(()=>{const e=a!=null?a:window.location.origin;window&&window.indexedDB&&n&&typeof window.indexedDB.databases=="function"?(o.addAction("chatgpt.web.logout.clearIndexedDB"),(async()=>{const x=(await window.indexedDB.databases()).map(t=>new Promise((r,D)=>{if(t.name){const s=window.indexedDB.deleteDatabase(t.name);s.onsuccess=()=>r(),s.onerror=E=>{o.addError(new Error("Delete IndexedDB failed for database ".concat(t.name,", ").concat(E))),D()},s.onblocked=()=>{o.addError(new Error("Delete IndexedDB blocked for database ".concat(t.name))),r()}}else o.addError(new Error("Invalid database name ".concat(t.name))),r()}));await Promise.all(x)})().then(()=>{o.addTiming("chatgpt.web.logout.clearedIndexedDB"),u(e)}).catch(c=>{o.addError(new Error("Failed to clear IndexedDB",{cause:c})),u(e)})):m(a!=null?a:window.location.origin).catch(d=>o.addError(new Error("Failed to logout",{cause:d})))},[n,a]),null}const R=b(function(){const n=g();return I.jsx(F,w({},n))});export{R as default};
//# sourceMappingURL=cn1dsf8is6cvpdpo.js.map
