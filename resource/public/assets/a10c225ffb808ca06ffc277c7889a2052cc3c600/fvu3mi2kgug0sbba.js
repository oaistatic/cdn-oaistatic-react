var xe=Object.defineProperty,ke=Object.defineProperties;var ge=Object.getOwnPropertyDescriptors;var F=Object.getOwnPropertySymbols;var ye=Object.prototype.hasOwnProperty,we=Object.prototype.propertyIsEnumerable;var z=(o,e,r)=>e in o?xe(o,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):o[e]=r,m=(o,e)=>{for(var r in e||(e={}))ye.call(e,r)&&z(o,r,e[r]);if(F)for(var r of F(e))we.call(e,r)&&z(o,r,e[r]);return o},I=(o,e)=>ke(o,ge(e));var J=(o,e,r)=>z(o,typeof e!="symbol"?e+"":e,r);import{tb as be,lW as oe,tc as Ee,td as Ie,te as Te,fr as Ae,fs as Ce,qq as se,cv as S,ax as W,tf as V,oB as f,oA as D,tg as L,th as ve,ti as ie,tj as q,qs as _e,tk as Se,qt as De,eJ as X,hB as Q,cX as Pe,e$ as Oe,tl as Re,bH as Le}from"./lef5ym39glv4981l.js";import{w as j,c as k,I as ae,T as le,t as $e,a as Be,b as Ue,P as He,H as Ke,R as ze}from"./em4qf21fn7t7dhqg.js";import{M as P,N as x,S as $,E as Ve,c as qe}from"./g2yrrlnprx92uhjb.js";import{i as ue,v as We,w4 as je,w5 as Ge,w6 as Fe,w7 as Je,w8 as Xe}from"./mclphevd122040jw.js";import{i as de,H as v,f as Qe,a as Ye}from"./moqemqor8gto0ynb.js";import{r as Ze,a as er}from"./doljxy43e4xie9bi.js";class rr extends P{unistNodeName(){return"link"}static proseMirrorMarkName(){return"link"}proseMirrorMarkSpec(){return{attrs:{href:{},title:{default:null},disabled:{default:!0}},inclusive:!1,parseDOM:[{tag:"a[href]",getAttrs(e){return{href:e.getAttribute("href"),title:e.getAttribute("title")}}}],toDOM(e){return["a",m(m({},e.attrs),e.attrs.disabled?{href:void 0}:{})]}}}unistNodeToProseMirrorNodes({node:e,convertedChildren:r,schema:t}){const{url:n,title:s}=e;return r.map(i=>i.mark(i.marks.concat([t.marks[this.proseMirrorMarkName()].create({href:n,title:s})])))}processConvertedUnistNode(e,r){return I(m({type:this.unistNodeName(),url:r.attrs.href},r.attrs.title!=null&&{title:r.attrs.title}),{children:[e]})}}class tr extends x{unistNodeName(){return"blockquote"}static proseMirrorNodeName(){return"blockquote"}proseMirrorNodeSpec(){return{content:"block+",group:"block",parseDOM:[{tag:"blockquote"}],toDOM(){return["blockquote",0]}}}proseMirrorInputRules(e){return[j(/^\s{0,3}>\s$/,e.nodes[this.proseMirrorNodeName()])]}proseMirrorKeymap(e){return{"Mod->":be(e.nodes[this.proseMirrorNodeName()])}}unistNodeToProseMirrorNodes({schema:e,convertedChildren:r,attrs:t}){return k(this.proseMirrorNodeName(),e,r,t)}proseMirrorNodeToUnistNodes(e,r){return[{type:this.unistNodeName(),children:r}]}}function nr(o,e,r,t){for(let n=0;n<e.length;n++){const{$from:s,$to:i}=e[n];let a=s.depth===0?o.inlineContent&&o.type.allowsMarkType(r):!1;if(o.nodesBetween(s.pos,i.pos,(u,d)=>{if(a)return!1;a=u.inlineContent&&u.type.allowsMarkType(r)}),a)return!0}return!1}function Y(o){var r,t;const e=/^\s*/.exec(o);return(t=(r=e==null?void 0:e[0])==null?void 0:r.length)!=null?t:0}function Z(o){var r,t;const e=/\s*$/.exec(o);return(t=(r=e==null?void 0:e[0])==null?void 0:r.length)!=null?t:0}function or(o,e,r){for(;e>0;){const t=e-1;if(!o.rangeHasMark(t,e,r))break;e=t}return e}function sr(o,e,r){for(;e<o.content.size&&o.rangeHasMark(e,e+1,r);)e+=1;return e}function ir(o,e,r,t=null){var u,d,l,p,c,N,h,M;const{selection:n}=o;if(!(n instanceof oe))return!1;const{empty:s,$cursor:i,ranges:a}=n;if(s&&!i||!nr(o.doc,a,r))return!1;if(i)r.isInSet(o.storedMarks||i.marks())?e(o.tr.removeStoredMark(r)):e(o.tr.addStoredMark(r.create(t)));else{const w=o.tr,b=!a.some(E=>o.doc.rangeHasMark(E.$from.pos,E.$to.pos,r));for(let E=0;E<a.length;E++){const{$from:A,$to:C}=a[E];let g=A.pos,y=C.pos;const B=o.doc.textBetween(g,y,"\n");if(/^\s*$/.test(B))continue;const U=(d=(u=A.nodeBefore)==null?void 0:u.text)!=null?d:"",H=(p=(l=A.nodeAfter)==null?void 0:l.text)!=null?p:"",Me=(N=(c=C.nodeBefore)==null?void 0:c.text)!=null?N:"",he=(M=(h=C.nodeAfter)==null?void 0:h.text)!=null?M:"";if(b){const O=Y(H),K=Z(Me);g+O<y&&(g+=O,y-=K),g=or(o.doc,g,r),y=sr(o.doc,y,r),w.removeMark(g,y,o.schema.marks[$.proseMirrorMarkName()]),w.addMark(g,y,r.create(t))}else{const O=Z(U),K=Y(he);g-=O,y+=K,w.removeMark(g,y,r)}}e(w.scrollIntoView())}return!0}function ee(o,e=null){return(r,t)=>t?ir(r,t,o,e):!0}class T extends ae{constructor(r,t){super(r,(n,s,i,a)=>this.markHandler(n,s,i,a));J(this,"markType");this.markType=t}static markApplies(r,t,n){for(const s of t){const{$from:i,$to:a}=s;let u=i.depth===0?r.type.allowsMarkType(n):!1;if(r.nodesBetween(i.pos,a.pos,d=>u?!1:(u=d.inlineContent&&d.type.allowsMarkType(n),!0)),u)return!0}return!1}markHandler(r,t,n,s){var p,c;if(!(r.selection instanceof oe))return null;const i=r.doc.resolve(n),a=r.doc.resolve(s),u=[new Ee(i,a)];if(!T.markApplies(r.doc,u,this.markType))return null;const d=(c=(p=r.doc.nodeAt(n))==null?void 0:p.marks.map(N=>N.type))!=null?c:[];d.push(this.markType);const l=r.tr.replaceWith(n,s,this.markType.schema.text(t[1]));for(const N of d)l.addMark(l.mapping.map(n),l.mapping.map(s),N.create(null));for(const N of d)l.removeStoredMark(N);return l.insertText(t[2])}}class ar extends P{unistNodeName(){return"strong"}static proseMirrorMarkName(){return"strong"}proseMirrorMarkSpec(){return{parseDOM:[{tag:"b"},{tag:"strong"},{style:"font-weight",getAttrs:e=>/^(bold(er)?|[5-9]\d{2,})$/.test(e)&&null}],toDOM(){return["strong"]}}}proseMirrorInputRules(e){return[new T(/\*\*([^\s](?:.*[^\s])?)\*\*([\s\S])$/,e.marks[this.proseMirrorMarkName()]),new T(/__([^\s](?:.*[^\s])?)__([\s\S])$/,e.marks[this.proseMirrorMarkName()])]}proseMirrorKeymap(e){const r=e.marks[this.proseMirrorMarkName()];return{"Mod-b":ee(r),"Mod-B":ee(r)}}unistNodeToProseMirrorNodes({schema:e,convertedChildren:r,attrs:t}){return r.map(n=>n.mark(n.marks.concat([e.marks[this.proseMirrorMarkName()].create(t)])))}processConvertedUnistNode(e){return{type:this.unistNodeName(),children:[e]}}}const pe=92,lr=10,R="backslashEscape";function ur(o,e,r){function t(n){return n==null||n===lr?(o.exit(R),e(n)):r(n)}return n=>n!==pe?r(n):(o.enter(R),o.consume(n),t)}function dr(){return{text:{[pe]:{name:R,tokenize:ur}}}}function pr(){var e,r;const o=this.data();(e=o.micromarkExtensions)!=null||(o.micromarkExtensions=[]),o.micromarkExtensions.push(dr()),(r=o.fromMarkdownExtensions)!=null||(o.fromMarkdownExtensions=[]),o.fromMarkdownExtensions.push({enter:{[R](t){this.enter({type:"break"},t),this.exit(t)}}})}class cr extends x{unistNodeName(){return"break"}static proseMirrorNodeName(){return"hard_break"}proseMirrorNodeSpec(){return{inline:!0,group:"inline",selectable:!1,parseDOM:[{tag:"br"}],marks:$.proseMirrorMarkName(),toDOM(){return["br"]}}}proseMirrorKeymap(e){const r=Ie(Te,(n,s)=>(s&&s(n.tr.replaceSelectionWith(e.nodes[this.proseMirrorNodeName()].create()).scrollIntoView()),!0)),t=Ae()||Ce();return m({"Mod-Enter":r,"Shift-Enter":r},t&&{"Ctrl-Enter":r})}unistNodeToProseMirrorNodes({schema:e,convertedChildren:r,attrs:t}){return k(this.proseMirrorNodeName(),e,r,t)}proseMirrorNodeToUnistNodes(){return[{type:this.unistNodeName()}]}unifiedInitializationHook(e){return e.use(pr)}}const Nr="code_block",re="```\n";function mr(o,e){var n;const{start:r,end:t}=o;return r==null||t==null?null:{start:r+re.length+((n=e.lang)!=null?n:"").length,end:t-re.length}}class fr extends x{dependencies(){return[new le]}unistNodeName(){return"code"}static proseMirrorNodeName(){return Nr}proseMirrorNodeSpec(){return{content:"text*",group:"block",code:!0,defining:!0,marks:[$.proseMirrorMarkName()].join(" "),attrs:{lang:{default:null},isDarkMode:{default:null}},parseDOM:[{tag:"pre",preserveWhitespace:"full"}],toDOM(){return["pre",["code",0]]}}}proseMirrorInputRules(e){return[$e(/^\s{0,3}```$/,e.nodes[this.proseMirrorNodeName()])]}unistNodeToProseMirrorNodes({node:e,attrs:r,schema:t}){var s;const{lang:n}=e;return k(this.proseMirrorNodeName(),t,se(e,t,m(m({},r),(s=mr(r,e))!=null?s:{})),m({lang:n},r))}proseMirrorNodeToUnistNodes(e,r){return[{type:this.unistNodeName(),value:r.map(t=>t.type==="startend"?t.children.map(n=>n.value).join(""):t.value).join(""),lang:e.attrs.lang}]}}class Mr extends x{unistNodeName(){return"textDirective"}customDirectiveName(){return S}static proseMirrorNodeName(){return S}proseMirrorNodeSpec(){return{group:"inline",inline:!0,content:"inline*",atom:!0,attrs:{index:{default:null},displayLayout:{default:"inline"}},toDOM:e=>["span",{"data-type":"content-reference","data-content-reference-index":e.attrs.index,"data-display-layout":e.attrs.displayLayout},":contentReference[oaicite:".concat(e.attrs.index,']{index="').concat(e.attrs.index,'" displayLayout="').concat(e.attrs.displayLayout,'"}')],parseDOM:[{tag:'span[data-type="content-reference"]',getAttrs(e){return{index:e.getAttribute("data-index"),displayLayout:e.getAttribute("data-display-layout")||"inline"}}}]}}unistNodeToProseMirrorNodes({node:e,schema:r,convertedChildren:t}){var s,i,a;if(!ue(e)||e.name!==S||e.type!==this.unistNodeName())return W.addError("ContentReferenceExtension: unistNodeToProseMirrorNodes: node is not a directive node or name is not contentReference",e),null;const n={index:(s=e.attributes)==null?void 0:s.index,displayLayout:(a=(i=e.attributes)==null?void 0:i.displayLayout)!=null?a:"inline"};return r.nodes.contentReference.create(n,t)}proseMirrorNodeToUnistNodes(e,r){if(r.length!==1)return console.warn("ContentReferenceExtension: proseMirrorNodeToUnistNodes: convertedChildren.length != 1",r),[];const s=[{type:"text",value:r[0].children[0].value}];return[{type:"textDirective",name:S,attributes:{index:e.attrs.index,displayLayout:e.attrs.displayLayout},children:s,data:{hName:S,hProperties:{displayLayout:e.attrs.displayLayout,index:e.attrs.index}}}]}}class hr extends x{unistNodeName(){return"thematicBreak"}static proseMirrorNodeName(){return"horizontal_rule"}proseMirrorNodeSpec(){return{group:"block",parseDOM:[{tag:"hr"}],toDOM(){return["div",["hr"]]}}}proseMirrorInputRules(e){return[new ae(/^\s{0,3}(?:\*\*\*|---|___)\n$/,(r,t,n,s)=>{var i;return r.tr.replaceWith(n,s,(i=k(this.proseMirrorNodeName(),e,[]))!=null?i:[])})]}proseMirrorKeymap(e){return{"Mod-_":(r,t)=>(t&&t(r.tr.replaceSelectionWith(e.nodes[this.proseMirrorNodeName()].create()).scrollIntoView()),!0)}}unistNodeToProseMirrorNodes({schema:e,convertedChildren:r,attrs:t}){return k(this.proseMirrorNodeName(),e,r,t)}proseMirrorNodeToUnistNodes(){return[{type:this.unistNodeName()}]}}class xr extends P{unistNodeName(){return"inlineCode"}static proseMirrorMarkName(){return"code"}proseMirrorMarkSpec(){return{inclusive:!1,parseDOM:[{tag:"code"}],toDOM(){return["code"]}}}proseMirrorInputRules(e){return[new T(/`([^\s](?:.*[^\s])?)`([\s\S])$/,e.marks[this.proseMirrorMarkName()])]}proseMirrorKeymap(e){const r=e.marks[this.proseMirrorMarkName()];return{"Ctrl-`":V(r)}}unistNodeToProseMirrorNodes({node:e,schema:r,attrs:t}){const n=se(e,r,t,[r.marks[this.proseMirrorMarkName()].create(t)]);return n?[n]:[]}processConvertedUnistNode(e){return{type:this.unistNodeName(),value:e.value}}}class kr extends x{unistNodeName(){return"inlineMath"}static proseMirrorNodeName(){return"inline_math"}proseMirrorNodeSpec(){return{group:"inline",inline:!0,content:"text*",atom:!0,attrs:{latex:{default:null}},parseDOM:[{tag:"span.inline-math",getAttrs(e){return{latex:e.getAttribute("latex")}}}],toDOM(){return["span",{class:"inline-math"},0]}}}unistNodeToProseMirrorNodes({node:e,schema:r,convertedChildren:t,attrs:n}){const{value:s}=e;return k(this.proseMirrorNodeName(),r,t,I(m({},n),{latex:s}))}proseMirrorNodeToUnistNodes(e){return[{type:this.unistNodeName(),value:e.attrs.latex}]}}class gr extends P{unistNodeName(){return"emphasis"}static proseMirrorMarkName(){return"em"}proseMirrorMarkSpec(){return{parseDOM:[{tag:"i"},{tag:"em"},{style:"font-style",getAttrs:e=>e==="italic"&&null}],toDOM(){return["em"]}}}proseMirrorInputRules(e){try{return[new T(new RegExp("(?<!\\*)\\*([^\\s*](?:.*[^\\s])?)\\*([^*])$"),e.marks[this.proseMirrorMarkName()]),new T(new RegExp("(?<!_)_([^\\s_](?:.*[^\\s])?)_([^_])$"),e.marks[this.proseMirrorMarkName()])]}catch(r){return W.addError(r),[]}}proseMirrorKeymap(e){const r=e.marks[this.proseMirrorMarkName()];return{"Mod-i":V(r),"Mod-I":V(r)}}unistNodeToProseMirrorNodes({schema:e,convertedChildren:r,attrs:t}){return r.map(n=>n.mark(n.marks.concat([e.marks[this.proseMirrorMarkName()].create(t)])))}processConvertedUnistNode(e){return{type:this.unistNodeName(),children:[e]}}}const _="lineEndingBlank";function te(o){return o.type===_}const yr=({startIndex:o,endIndex:e,depth:r,isLastChild:t,parent:n=null})=>{const s=e-o;return r>0&&(n==null?void 0:n.type)!=="list"?s:t||o===0?s-Math.floor((s+1)/2):s-Math.floor((s-1)/2)};function wr(){var r;const o=this.data();(r=o.fromMarkdownExtensions)!=null||(o.fromMarkdownExtensions=[]),o.fromMarkdownExtensions.push({enter:{lineEndingBlank(t){this.enter({type:_},t)}},exit:{lineEndingBlank(t){this.exit(t)}}});const e=(t,n=0)=>{if(!de(t))return;const{children:s}=t;let i=0,a=null,u=null;const d=s.length;for(let l=0;l<d;l++){const p=s[l-i];e(p,n+1);const{type:c}=p,h=l===d-1&&c===_;if(c===_&&a==null?a=l:c!==_&&a!=null?u=l:h&&a!=null&&(u=l+1),a!=null&&u!=null){const M=yr({startIndex:a,endIndex:u,depth:n,isLastChild:h,parent:t});s.splice(a-i,M),a=null,u=null,i+=M}}};return t=>{e(t)}}class br extends x{unistNodeName(){return _}static proseMirrorNodeName(){return"paragraph"}proseMirrorNodeSpec(){return Be}unistNodeToProseMirrorNodes({schema:e,convertedChildren:r,attrs:t}){return k(this.proseMirrorNodeName(),e,r,t)}proseMirrorNodeToUnistNodes(e,r){return[{type:Ue,children:r}]}unifiedInitializationHook(e){return e.use(wr)}}function ce(o,e=null){return function(r,t){let{$from:n,$to:s}=r.selection,i=n.blockRange(s),a=!1,u=i;if(!i)return!1;if(i.depth>=2&&n.node(i.depth-1).type.compatibleContent(o)&&i.startIndex==0){if(n.index(i.depth-1)==0)return!1;let l=r.doc.resolve(i.start-2);u=new q(l,l,i.depth),i.endIndex<i.parent.childCount&&(i=new q(n,r.doc.resolve(s.end(i.depth)),i.depth)),a=!0}let d=_e(u,o,e,i);return d?(t&&t(Er(r.tr,i,d,a,o).scrollIntoView()),!0):!1}}function Er(o,e,r,t,n){let s=f.empty;for(let l=r.length-1;l>=0;l--)s=f.from(r[l].type.create(r[l].attrs,s));o.step(new L(e.start-(t?2:0),e.end,e.start,e.end,new D(s,0,0),r.length,!0));let i=0;for(let l=0;l<r.length;l++)r[l].type==n&&(i=l+1);let a=r.length-i,u=e.start+r.length-(t?2:0),d=e.parent;for(let l=e.startIndex,p=e.endIndex,c=!0;l<p;l++,c=!1)!c&&ie(o.doc,u,a)&&(o.split(u,a),u+=2*a),u+=d.child(l).nodeSize;return o}function Ir(o,e){return function(r,t){let{$from:n,$to:s,node:i}=r.selection;if(i&&i.isBlock||n.depth<2||!n.sameParent(s))return!1;let a=n.node(-1);if(a.type!=o)return!1;if(n.parent.content.size==0&&n.node(-1).childCount==n.indexAfter(-1)){if(n.depth==3||n.node(-3).type!=o||n.index(-2)!=n.node(-2).childCount-1)return!1;if(t){let p=f.empty,c=n.index(-1)?1:n.index(-2)?2:3;for(let b=n.depth-c;b>=n.depth-3;b--)p=f.from(n.node(b).copy(p));let N=n.indexAfter(-1)<n.node(-2).childCount?1:n.indexAfter(-2)<n.node(-3).childCount?2:3;p=p.append(f.from(o.createAndFill()));let h=n.before(n.depth-(c-1)),M=r.tr.replace(h,n.after(-N),new D(p,4-c,0)),w=-1;M.doc.nodesBetween(h,M.doc.content.size,(b,E)=>{if(w>-1)return!1;b.isTextblock&&b.content.size==0&&(w=E+1)}),w>-1&&M.setSelection(ve.near(M.doc.resolve(w))),t(M.scrollIntoView())}return!0}let u=s.pos==n.end()?a.contentMatchAt(0).defaultType:null,d=r.tr.delete(n.pos,s.pos),l=u?[null,{type:u}]:void 0;return ie(d.doc,n.pos,2,l)?(t&&t(d.split(n.pos,2,l).scrollIntoView()),!0):!1}}function Tr(o){return function(e,r){let{$from:t,$to:n}=e.selection,s=t.blockRange(n,i=>i.childCount>0&&i.firstChild.type==o);return s?r?t.node(s.depth-1).type==o?Ar(e,r,o,s):Cr(e,r,s):!0:!1}}function Ar(o,e,r,t){let n=o.tr,s=t.end,i=t.$to.end(t.depth);s<i&&(n.step(new L(s-1,i,s,i,new D(f.from(r.create(null,t.parent.copy())),1,0),1,!0)),t=new q(n.doc.resolve(t.$from.pos),n.doc.resolve(i),t.depth));const a=Se(t);if(a==null)return!1;n.lift(t,a);let u=n.mapping.map(s,-1)-1;return De(n.doc,u)&&n.join(u),e(n.scrollIntoView()),!0}function Cr(o,e,r){let t=o.tr,n=r.parent;for(let N=r.end,h=r.endIndex-1,M=r.startIndex;h>M;h--)N-=n.child(h).nodeSize,t.delete(N-1,N+1);let s=t.doc.resolve(r.start),i=s.nodeAfter;if(t.mapping.map(r.end)!=r.start+s.nodeAfter.nodeSize)return!1;let a=r.startIndex==0,u=r.endIndex==n.childCount,d=s.node(-1),l=s.index(-1);if(!d.canReplace(l+(a?0:1),l+1,i.content.append(u?f.empty:f.from(n))))return!1;let p=s.pos,c=p+i.nodeSize;return t.step(new L(p-(a?1:0),c+(u?1:0),p+1,c-1,new D((a?f.empty:f.from(n.copy(f.empty))).append(u?f.empty:f.from(n.copy(f.empty))),a?0:1,u?0:1),a?0:1)),e(t.scrollIntoView()),!0}function vr(o){return function(e,r){let{$from:t,$to:n}=e.selection,s=t.blockRange(n,d=>d.childCount>0&&d.firstChild.type==o);if(!s)return!1;let i=s.startIndex;if(i==0)return!1;let a=s.parent,u=a.child(i-1);if(u.type!=o)return!1;if(r){let d=u.lastChild&&u.lastChild.type==a.type,l=f.from(d?o.create():null),p=new D(f.from(o.create(null,f.from(a.type.create(null,l)))),d?3:1,0),c=s.start,N=s.end;r(e.tr.step(new L(c-(d?3:1),N,c,N,p,1,!0)).scrollIntoView())}return!0}}class G extends x{unistNodeName(){return"listItem"}static proseMirrorNodeName(){return"regular_list_item"}proseMirrorNodeSpec(){return{content:"paragraph block*",defining:!0,group:"list_item",parseDOM:[{tag:"li"}],toDOM(){return["li",0]}}}unistToProseMirrorTest(e){return e.type===this.unistNodeName()&&(!("checked"in e)||typeof e.checked!="boolean")}proseMirrorKeymap(e){const r=e.nodes[this.proseMirrorNodeName()];return{Enter:Ir(r),"Shift-Tab":Tr(r),Tab:vr(r)}}unistNodeToProseMirrorNodes({schema:e,convertedChildren:r,attrs:t}){return k(this.proseMirrorNodeName(),e,r,t)}proseMirrorNodeToUnistNodes(e,r){return[{type:this.unistNodeName(),children:r}]}}class _r extends x{unistNodeName(){return"math"}static proseMirrorNodeName(){return"math_block"}proseMirrorNodeSpec(){return{group:"block",content:"text*",atom:!0,code:!0,attrs:{latex:{default:null}},parseDOM:[{tag:"div.math-block",getAttrs(e){return{latex:e.getAttribute("latex")}}}],toDOM(){return["div",{class:"math-block"},0]}}}unistNodeToProseMirrorNodes({node:e,schema:r,convertedChildren:t,attrs:n}){const{value:s}=e;return k(this.proseMirrorNodeName(),r,t,I(m({},n),{latex:s}))}proseMirrorNodeToUnistNodes(e){return[{type:this.unistNodeName(),value:e.attrs.latex}]}}class Sr extends x{dependencies(){return[new G]}unistNodeName(){return"list"}unistToProseMirrorTest(e){return e.type===this.unistNodeName()&&e.ordered===!0}static proseMirrorNodeName(){return"ordered_list"}proseMirrorNodeSpec(){return{content:"list_item+",group:"block",attrs:{spread:{default:!1},startingNumber:{default:1}},parseDOM:[{getAttrs(e){const r=e.getAttribute("start");return{spread:e.getAttribute("data-spread")==="true",startingNumber:r!=null?parseInt(r):1}},tag:"ol"}],toDOM(e){return["ol",{"data-spread":e.attrs.spread,start:e.attrs.startingNumber},0]}}}proseMirrorInputRules(e){return[j(/^\s{0,3}(\d+)\.\s$/,e.nodes[this.proseMirrorNodeName()],r=>({startingNumber:+r[1]}),(r,t)=>t.childCount+t.attrs.startingNumber===+r[1])]}proseMirrorKeymap(e){return{"Shift-Mod-9":ce(e.nodes[this.proseMirrorNodeName()])}}unistNodeToProseMirrorNodes({node:e,schema:r,convertedChildren:t,attrs:n}){const{spread:s,start:i}=e;return k(this.proseMirrorNodeName(),r,t,I(m({},n),{spread:s,startingNumber:i!=null?i:1}))}proseMirrorNodeToUnistNodes(e,r){const t=e.attrs.spread;return[{type:this.unistNodeName(),ordered:!0,spread:t,start:e.attrs.startingNumber,children:r.map(n=>(n.spread=t,n))}]}}class Dr extends P{unistNodeName(){return"delete"}static proseMirrorMarkName(){return"strikethrough"}proseMirrorMarkSpec(){return{parseDOM:[{tag:"s"},{tag:"del"},{style:"text-decoration",getAttrs:e=>/(^|[\s])line-through([\s]|$)/.test(e)&&null}],toDOM(){return["s"]}}}proseMirrorInputRules(e){return[new T(/~([^\s](?:.*[^\s~])?)~([^~])$/,e.marks[this.proseMirrorMarkName()]),new T(/~~([^\s](?:.*[^\s])?)~~([\s\S])$/,e.marks[this.proseMirrorMarkName()])]}unistNodeToProseMirrorNodes({schema:e,convertedChildren:r}){return r.map(t=>t.mark(t.marks.concat([e.marks[this.proseMirrorMarkName()].create()])))}processConvertedUnistNode(e){return{type:this.unistNodeName(),children:[e]}}}function Pr(){return o=>{let e=-1;function r(n,s){var i;if(n.type==="tableRow"&&e++,n.type==="tableCell"){const a=n;a.data=I(m({},(i=a.data)!=null?i:{}),{rowIndex:e,columnIndex:s})}}function t(n){if(de(n))for(let s=0;s<n.children.length;s++){const i=n.children[s];r(i,s),t(i)}}t(o)}}class Ne extends x{unistNodeName(){return"tableCell"}unistToProseMirrorTest(e){return e.type===this.unistNodeName()}static proseMirrorNodeName(){return"table_cell"}proseMirrorNodeSpec(){return{content:"inline*",attrs:{rowIndex:{default:null},columnIndex:{default:null},colspan:{default:1},rowspan:{default:1}},tableRole:"cell",isolating:!0,parseDOM:[{tag:"td",getAttrs(e){const r=e;return{colspan:Q(r.getAttribute("colspan"),1),rowspan:Q(r.getAttribute("rowspan"),1)}}}],toDOM(e){const{colspan:r,rowspan:t}=e.attrs,n={colspan:r!==1?X(r,void 0):void 0,rowspan:t!==1?X(t,void 0):void 0};return[e.attrs.rowIndex==null||e.attrs.rowIndex>0?"td":"th",n,0]}}}proseMirrorInputRules(e){return[]}proseMirrorKeymap(e){return{}}unistNodeToProseMirrorNodes({node:e,schema:r,convertedChildren:t,attrs:n}){var s,i;return k(this.proseMirrorNodeName(),r,t,I(m({},n),{colspan:1,rowspan:1,rowIndex:(s=e.data)==null?void 0:s.rowIndex,columnIndex:(i=e.data)==null?void 0:i.columnIndex}))}proseMirrorNodeToUnistNodes(e,r){return[{type:this.unistNodeName(),children:r,data:{rowIndex:e.attrs.rowIndex,columnIndex:e.attrs.columnIndex}}]}}class me extends x{dependencies(){return[new Ne]}unistNodeName(){return"tableRow"}static proseMirrorNodeName(){return"table_row"}proseMirrorNodeSpec(){return{content:"(table_cell+)",tableRole:"row",parseDOM:[{tag:"tr"}],toDOM(){return["tr",0]}}}proseMirrorInputRules(e){return[]}proseMirrorKeymap(e){return{}}unistNodeToProseMirrorNodes({schema:e,convertedChildren:r,attrs:t}){return k(this.proseMirrorNodeName(),e,r,t)}proseMirrorNodeToUnistNodes(e,r){return[{type:this.unistNodeName(),children:r}]}}class Or extends x{dependencies(){return[new me]}unistNodeName(){return"table"}static proseMirrorNodeName(){return"table"}proseMirrorNodeSpec(){return{content:"(table_row+)",tableRole:"table",isolating:!0,group:"block",parseDOM:[{tag:"table"}],toDOM(){return["table",["tbody",0]]}}}proseMirrorInputRules(e){return[]}proseMirrorKeymap(e){return{}}unistNodeToProseMirrorNodes({schema:e,convertedChildren:r,attrs:t}){return k(this.proseMirrorNodeName(),e,r,t)}proseMirrorNodeToUnistNodes(e,r){return[{type:this.unistNodeName(),align:[],children:r}]}unifiedInitializationHook(e){return e.use(Pr)}}class Rr extends x{dependencies(){return[new G]}unistNodeName(){return"list"}unistToProseMirrorTest(e){return e.type===this.unistNodeName()&&e.ordered!==!0}static proseMirrorNodeName(){return"list"}proseMirrorNodeSpec(){return{content:"list_item+",group:"block",attrs:{spread:{default:!1}},parseDOM:[{getAttrs(e){return{spread:e.getAttribute("data-spread")==="true"}},tag:"ul"}],toDOM(e){return["ul",{"data-spread":e.attrs.spread},0]}}}proseMirrorInputRules(e){return[j(/^\s{0,3}([-+*])\s$/,e.nodes[this.proseMirrorNodeName()])]}proseMirrorKeymap(e){return{"Shift-Mod-8":ce(e.nodes[this.proseMirrorNodeName()])}}unistNodeToProseMirrorNodes({node:e,schema:r,convertedChildren:t,attrs:n}){const{spread:s}=e;return k(this.proseMirrorNodeName(),r,t,I(m({},n),{spread:s}))}proseMirrorNodeToUnistNodes(e,r){const t=e.attrs.spread;return[{type:this.unistNodeName(),ordered:!1,spread:t,children:r.map(n=>(n.spread=t,n))}]}}function ne(o,e){if(!(o==null||e==null))return{start:m({},o),end:m({},e)}}const Lr=()=>o=>{We(o,"list",(e,r,t)=>{var a,u,d,l,p,c,N,h,M,w,b,E;if(t==null||r==null)return;const n=[];let s=[],i=0;for(;i<e.children.length;){const A=e.children[i];if(te(A)){const C=[];for(;i<e.children.length&&te(e.children[i]);)C.push(e.children[i]),i++;if(s.length===0)throw new Error("Unexpected state: currentListItems is empty after encountering blank lines.");const g=s[0],y=Pe(Oe(s)),B=ne((d=(a=g.position)==null?void 0:a.start)!=null?d:(u=e.position)==null?void 0:u.start,(c=(l=y.position)==null?void 0:l.end)!=null?c:(p=e.position)==null?void 0:p.end),U={type:"list",ordered:e.ordered,start:e.start,spread:e.spread,children:s,position:B};n.push(U),s=[],n.push(...C.map(H=>({type:"lineEndingBlank",position:H.position})))}else s.push(A),i++}if(s.length>0){const A=s[0],C=s[s.length-1],g=ne((M=(N=A.position)==null?void 0:N.start)!=null?M:(h=e.position)==null?void 0:h.start,(E=(w=C.position)==null?void 0:w.end)!=null?E:(b=e.position)==null?void 0:b.end),y={type:"list",ordered:e.ordered,start:e.start,spread:e.spread,children:s,position:g};n.push(y)}t.children.splice(r,1,...n)})};class $r extends x{unistNodeName(){return"textDirective"}customDirectiveName(){return v}static proseMirrorNodeName(){return v}proseMirrorNodeSpec(){return{group:"inline",inline:!0,atom:!0,selectable:!1,attrs:{timestamp:{default:null}},toDOM:e=>["span",{"data-type":"hive-log","data-timestamp":e.attrs.timestamp}],parseDOM:[{tag:'span[data-type="hive-log"]',getAttrs(e){return{timestamp:e.getAttribute("data-timestamp")}}}]}}unistNodeToProseMirrorNodes({node:e,schema:r,convertedChildren:t}){var s,i;if(!ue(e)||e.name!==v||e.type!==this.unistNodeName())return W.addError("HiveLogExtension: unistNodeToProseMirrorNodes: node is not a directive node or name is not HIVE_LOG_DIRECTIVE_NAME",e),null;const n={timestamp:(i=(s=e.attributes)==null?void 0:s.timestamp)!=null?i:null};return r.nodes[v].create(n,t)}proseMirrorNodeToUnistNodes(e){return[{type:"textDirective",name:v,attributes:{timestamp:e.attrs.timestamp},children:[],data:{hName:v,hProperties:{timestamp:e.attrs.timestamp}}}]}}const Br=(o,e,r,t)=>o.children.map(n=>r.handle(n,void 0,r,t)).join(""),Ur=(o,e,r,t)=>r.safe(o.value,t).replaceAll("\\[","[").replaceAll("\\&","&"),Hr=o=>"\\(".concat(o.value,"\\)");function Kr(){const o=this;o.compiler=e;function e(r){return je(r,I(m({},o.data("settings")),{fences:!0,bullet:"-",bulletOther:"*",listItemIndent:"one",resourceLink:!0,tightDefinitions:!0,rule:"-",handlers:{text:Ur,startend:Br,inlineMath:Hr},extensions:o.data("toMarkdownExtensions")||[]}))}}const fe=[Ge,[Fe,{singleTilde:!1}],[Ze,{singleDollarTextMath:!1}],Je,er,Xe,Qe,Lr,Kr,Ye];class zr extends Ve{dependencies(){const e=Re(Le());return[new br,new He,new tr,new ar,new cr,new fr,new Ke,new hr,new xr,new kr,new _r,new gr,new rr,new G,new Sr,new ze,new le,new Rr,new Dr,new $,new Or,new me,new Ne,...e?[new Mr]:[],...qe()?[new $r]:[]]}unifiedInitializationHook(e){return e.use(fe)}}const Xr=Object.freeze(Object.defineProperty({__proto__:null,CANVAS_REMARK_PLUGINS:fe,MarkdownExtension:zr},Symbol.toStringTag,{value:"Module"}));export{ar as B,Mr as C,gr as I,rr as L,zr as M,Nr as a,fr as b,Xr as p,ir as t};
//# sourceMappingURL=fvu3mi2kgug0sbba.js.map
