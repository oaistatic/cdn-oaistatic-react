var K=Object.defineProperty,U=Object.defineProperties;var Y=Object.getOwnPropertyDescriptors;var S=Object.getOwnPropertySymbols;var z=Object.prototype.hasOwnProperty,Q=Object.prototype.propertyIsEnumerable;var w=(e,t,o)=>t in e?K(e,t,{enumerable:!0,configurable:!0,writable:!0,value:o}):e[t]=o,d=(e,t)=>{for(var o in t||(t={}))z.call(t,o)&&w(e,o,t[o]);if(S)for(var o of S(t))Q.call(t,o)&&w(e,o,t[o]);return e},h=(e,t)=>U(e,Y(t));import{f as $,r as p,j as n,M as m,d as J,s as T,R as V}from"./jj85rqzpbnvv3emr.js";import{po as X,R as Z,pp as ee,pq as E,E as q,B as L,P as j,pr as ne,kK as te,ps as oe,dO as se,ax as re,dP as ie,aJ as ae}from"./lef5ym39glv4981l.js";import{u as ce,a as de}from"./fe3i8jtn19o2fvb7.js";import{S as le}from"./l5ox8g3ngfir6cri.js";import{gt as ue,gu as me,gv as ge,gw as fe}from"./mclphevd122040jw.js";import{S as he}from"./gwboocxkq4dvejju.js";import{S as B}from"./hhmq1bzp7fcba7ax.js";import{u as A}from"./ht7of10t76s6p5h9.js";const F=p.createContext(null),xe=async(e,t)=>await Z.safeGet("/aip/connectors/{connector_id}/tos",{parameters:{path:{connector_id:e}},additionalHeaders:t?{[ee]:t}:void 0}),I=(e,t,{enabled:o=!0}={})=>$({queryKey:X(e,t),queryFn:()=>{if(!e)throw new Error("connectorId is required to fetch connector TOS");return xe(e,t)},staleTime:5*60*1e3,enabled:o&&!!e}),pe=({connectorId:e,productSku:t,children:o,enabled:s=!0})=>{const r=I(e,t,{enabled:s}),a=p.useMemo(()=>({query:r}),[r]);return n.jsx(F.Provider,{value:a,children:o})},Me=()=>{const e=p.useContext(F);if(!e)throw new Error("useRedirectTos must be used within a RedirectTosProvider");return e.query},ve={external_link:ue,keys_multiple:B,exclamation_triangle:le,lock_key_hole:ie,folder_stuffed:he},je=e=>{var t;return(t=ve[e])!=null?t:B},ke=e=>{const t=[],o=/\[([^\]]+)\]\(([^)]+)\)/g;let s=0,r;for(;(r=o.exec(e))!==null;){r.index>s&&t.push(e.slice(s,r.index));const[a,c,i]=r;t.push(n.jsx("a",{href:i,target:"_blank",rel:"noreferrer",className:"underline",children:c},"".concat(i,"-").concat(r.index))),s=r.index+a.length}return s<e.length&&t.push(e.slice(s)),t.length===0?e:t.length===1?t[0]:t},Ce=(e,t)=>{var o,s;return t?{genericName:(o=t.generic_name)!=null?o:e.name,blurbs:(s=t.blurbs)!=null?s:[]}:null};function N(){const e=T();return V.useMemo(()=>{var o;const t=e.hash.includes("?")?e.hash.substring(e.hash.indexOf("?")+1):e.search.substring(1);return(o=new URLSearchParams(t).get("referrer"))!=null?o:void 0},[e.hash,e.search])}const G=({blurbs:e})=>{var t;return n.jsx("div",{className:"border-token-border-default rounded-2xl border px-4",children:Array.from({length:(t=e==null?void 0:e.length)!=null?t:3}).map((o,s)=>{const r=e==null?void 0:e[s],a=r?je(r.icon):"div";return n.jsxs("div",{className:"border-token-border-default flex items-center gap-4 border-b py-4 text-sm last-of-type:border-none",children:[n.jsx("span",{children:n.jsx(a,{className:"h-6 w-6"})}),n.jsx("div",{className:"w-full",children:r?n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"pb-0.5 font-medium",children:r.title}),n.jsx("div",{className:"text-token-text-secondary",children:ke(r.description)})]}):n.jsx(oe,{lines:2})})]},"".concat(s))})})},ye=({connector:e,onClose:t})=>{var o,s;return n.jsx(E,{onClose:t,connectorIcon:n.jsx(me,{connector:e,className:"rounded-xl border-[0.5px] p-2 shadow-sm",size:"medium"}),connectorDeveloper:(s=(o=e.branding)==null?void 0:o.developer)!=null?s:void 0,title:n.jsx(m,h(d({},g.addConnectorLinkModalTitle),{values:{connectorName:e.name}}))})},k=({loading:e,onClick:t,children:o})=>n.jsx(L,{className:"w-full",size:"large",onClick:t,loading:e,children:o}),C=({connector:e,tos:t,onClose:o,children:s})=>n.jsxs("div",{className:"flex flex-col gap-6",children:[n.jsx("div",{children:n.jsx(ye,{connector:e,onClose:o})}),n.jsx(G,{blurbs:t==null?void 0:t.blurbs}),s]}),P=({connector:e,tos:t,onClose:o})=>n.jsx(C,{connector:e,tos:t,onClose:o,children:n.jsx(k,{loading:!0,onClick:()=>{}})}),b=({connector:e,tos:t,onClose:o,retry:s})=>n.jsx(C,{connector:e,tos:t,onClose:o,children:n.jsx("div",{className:"flex items-center justify-center pt-4",children:n.jsx(L,{onClick:s,size:"large",className:"w-full",children:n.jsx(m,d({},g.errorLoadingStateButton))})})}),Be=({connectorIcon:e,connectorName:t,connectorId:o,onClose:s,isConnecting:r,onContinue:a,productSku:c})=>{var v,y;const{data:i,isLoading:u,isError:l,refetch:f}=I(o,c),M=(v=i==null?void 0:i.blurbs)!=null?v:[],x=(y=i==null?void 0:i.generic_name)!=null?y:"Google";return n.jsxs(n.Fragment,{children:[n.jsx(E,{onClose:s,connectorIcon:e,title:n.jsx(m,h(d({},g.addConnectorLinkModalTitle),{values:{connectorName:t}}))}),u?n.jsx("div",{className:"flex items-center justify-center p-4",children:n.jsx(q,{})}):l?n.jsx("div",{className:"flex items-center justify-center pt-4",children:n.jsx(L,{onClick:()=>void f(),size:"large",className:"w-full",children:n.jsx(m,d({},g.errorLoadingStateButton))})}):M.length>0?n.jsx(G,{blurbs:M}):null,n.jsx("div",{className:"pt-4",children:n.jsx(k,{loading:r,onClick:a,children:n.jsx(m,h(d({},g.continueButton),{values:{connectorName:x}}))})})]})},W=({connector:e,tos:t,onClose:o,isConnecting:s,onContinue:r,showExternalIcon:a})=>{const c=N();p.useEffect(()=>{j.logEventWithStatsig("connectors.shown_connect_modal","connectors.shown_connect_modal",d({mfa:"not_required"},c&&{referrer:c}))},[c]);const i=()=>{j.logEventWithStatsig("connectors.click_continue_modal","connectors.click_continue_modal",{action:"connection"}),r()},u=ne(e);return n.jsx(C,{connector:e,tos:t,onClose:o,children:n.jsx(k,{loading:s,onClick:i,children:n.jsxs("span",{className:"flex items-center justify-center gap-1",children:[u==="OAUTH"?n.jsx(m,h(d({},g.continueButton),{values:{connectorName:e.name}})):n.jsx(m,h(d({},g.connectButton),{values:{connectorName:e.name}})),a&&n.jsx(te,{className:"icon-sm"})]})})})},Te=({connector:e,tos:t,onClose:o})=>{const s=T(),[r,a]=p.useState(!1),c=s.hash?s.pathname+s.hash:s.pathname,{setupMfa:i}=A({redirectUrl:c}),u=N();p.useEffect(()=>{j.logEventWithStatsig("connectors.shown_connect_modal","connectors.shown_connect_modal",d({mfa:"required"},u&&{referrer:u}))},[u]);const l=()=>{a(!0),j.logEventWithStatsig("connectors.click_continue_modal","connectors.click_continue_modal",{action:"mfa"}),i()};return n.jsxs(C,{connector:e,tos:t,onClose:o,children:[n.jsx("div",{className:"pt-2"}),n.jsx("div",{className:"border-token-border-default border-t p-4",children:n.jsx("div",{className:"text-token-text-primary font-medium",children:n.jsx(m,d({},g.mfaRequiredTitle))})}),n.jsx(k,{loading:r,onClick:l,children:n.jsx(m,d({},g.mfaRequiredButton))})]})},D={"google-oauth2":{icon:n.jsx(ae,{}),name:"Google"},windowslive:{icon:n.jsx(fe,{}),name:"Microsoft"},apple:{icon:n.jsx(ge,{}),name:"Apple"}},Le=({connector:e,tos:t,onClose:o,isConnecting:s,onContinue:r})=>{var R;const{session:a}=se(),c=(R=a==null?void 0:a.user)==null?void 0:R.idp,i=T(),[u,l]=p.useState(!1),f=i.hash?i.pathname+i.hash:i.pathname,{setupMfa:M}=A({redirectUrl:f}),x=N();p.useEffect(()=>{j.logEventWithStatsig("connectors.shown_connect_modal","connectors.shown_connect_modal",d({mfa:"suggested"},x&&{referrer:x}))},[x]);const v=()=>{l(!0),j.logEventWithStatsig("connectors.click_continue_modal","connectors.click_continue_modal",{action:"mfa"}),M()},y=()=>{j.logEventWithStatsig("connectors.click_continue_modal","connectors.click_continue_modal",{action:"connection"}),r()};if(!c||!D[c])return re.addError("Unknown idp found on suggested mfa requirement",{idp:c}),n.jsx(W,{connector:e,onClose:o,tos:t,isConnecting:s,onContinue:r});const{icon:O,name:_}=D[c];return n.jsxs(C,{connector:e,tos:t,onClose:o,children:[n.jsxs("div",{className:"border-token-border-default flex items-center gap-4 rounded-xl border p-4 text-sm",children:[n.jsx("div",{className:"text-token-text-primary",children:O}),n.jsxs("div",{className:"flex flex-col",children:[n.jsx("div",{className:"text-token-text-primary font-medium",children:n.jsx(m,h(d({},g.socialLoginTitle),{values:{socialProvider:_}}))}),n.jsx("div",{className:"text-token-text-secondary",children:n.jsx(m,h(d({},g.socialLoginDescription),{values:{socialProvider:_,link:H=>n.jsx("button",{onClick:v,className:"underline",children:n.jsxs("span",{className:"flex items-center gap-2",children:[H,u&&n.jsx(q,{className:"h-4 w-4"})]})})}}))})]})]}),n.jsx("div",{className:"pt-6",children:n.jsx(k,{loading:s,onClick:y,children:n.jsx(m,h(d({},g.continueButton),{values:{connectorName:e.name}}))})})]})},Ne=({connector:e,onClose:t,isConnecting:o,onContinue:s,showExternalIcon:r})=>{const{data:a,isLoading:c,isError:i,refetch:u}=Me(),l=Ce(e,a),{status:f,retry:M}=ce(e.id),{status:x,retry:v}=de({enabled:f==="required"||f==="suggested"});return c?n.jsx(P,{connector:e,tos:l,onClose:t}):i||!l?n.jsx(b,{connector:e,tos:l,onClose:t,retry:()=>{u(),v(),M()}}):x==="loading"||f==="loading"?n.jsx(P,{connector:e,tos:l,onClose:t}):x==="enabled"||f==="not_required"?n.jsx(W,{connector:e,tos:l,onClose:t,isConnecting:o,onContinue:s,showExternalIcon:r}):f==="required"?n.jsx(Te,{connector:e,tos:l,onClose:t}):f==="suggested"?n.jsx(Le,{connector:e,tos:l,onClose:t,isConnecting:o,onContinue:s}):n.jsx(b,{connector:e,tos:l,onClose:t,retry:()=>{v(),M(),u()}})},Ae=({connector:e,onClose:t,isConnecting:o,onContinue:s,showExternalIcon:r,productSku:a})=>n.jsx(pe,{connectorId:e.id,productSku:a,children:n.jsx(Ne,{connector:e,onClose:t,isConnecting:o,onContinue:s,showExternalIcon:r})}),g=J({addConnectorLinkModalTitle:{id:"addConnectorLinkModal.title",defaultMessage:"Connect {connectorName}"},permissionsTitle:{id:"addConnectorLinkModal.permissionsTitle",defaultMessage:"Permissions always respected"},permissionsDescription:{id:"addConnectorLinkModal.permissionsDescription",defaultMessage:"ChatGPT is strictly limited to permissions you've explicitly set."},inControlTitle:{id:"addConnectorLinkModal.inControlTitle",defaultMessage:"You're in control"},inControlDescription:{id:"addConnectorLinkModal.inControlDescription",defaultMessage:"ChatGPT always respects your training data preferences."},noTrainTitle:{id:"addConnectorLinkModal.noTrainTitle",defaultMessage:"How ChatGPT uses data"},noTrainDescription:{id:"addConnectorLinkModal.noTrainDescription",defaultMessage:"Data accessed from this connector is not used to train our models."},neverTrainTitle:{id:"addConnectorLinkModal.neverTrainTitle",defaultMessage:"How ChatGPT uses data"},neverTrainDescription:{id:"addConnectorLinkModal.neverTrainDescription",defaultMessage:"Your data is never used for training."},risksTitle:{id:"addConnectorLinkModal.risksTitle",defaultMessage:"Connectors may introduce risk"},risksDescription:{id:"addConnectorLinkModal.risksDescription",defaultMessage:"Connectors are designed to respect your privacy, but sites may attempt to steal your data. <link>Learn more on how to stay safe</link>"},redirectTitle:{id:"addConnectorLinkModal.redirectTitle",defaultMessage:"This page will redirect to {connectorName}"},redirectDescription:{id:"addConnectorLinkModal.redirectDescription",defaultMessage:"You'll sign in and confirm permissions on {connectorName}'s page."},googlePrivacyTitle:{id:"addConnectorLinkModal.googlePrivacyTitle",defaultMessage:"Private and secure"},googlePrivacyDescription:{id:"addConnectorLinkModal.googlePrivacyDescription",defaultMessage:"Data accessed from {connectorName} may be used to reply to prompts. We do not train generalized models on this data or derivations of it, unless you choose to submit it as feedback. <link>Learn more</link>"},googleControlTitle:{id:"addConnectorLinkModal.googleControlTitle",defaultMessage:"You're in control of your data"},googleControlDescription:{id:"addConnectorLinkModal.googleControlDescription",defaultMessage:"You can delete your conversations, which will also delete any {connectorName} data used in those conversations. <link>Learn more</link>"},connectButton:{id:"addConnectorLinkModal.connectButton",defaultMessage:"Connect {connectorName}"},continueButton:{id:"addConnectorLinkModal.continueButton",defaultMessage:"Continue to {connectorName}"},socialLoginTitle:{id:"addConnectorLinkModal.socialLoginTitle",defaultMessage:"You use {socialProvider} to authenticate"},socialLoginDescription:{id:"addConnectorLinkModal.socialLoginDescription",defaultMessage:"For added security, enable Multi-factor authentication (MFA) on your {socialProvider} account or <link>your ChatGPT account.</link>"},mfaRequiredTitle:{id:"addConnectorLinkModal.mfaRequiredTitle",defaultMessage:"Multi-factor authentication (MFA) required"},mfaRequiredButton:{id:"addConnectorLinkModal.mfaRequiredButton",defaultMessage:"Turn on MFA to continue"},errorLoadingStateButton:{id:"addConnectorLinkModal.errorLoadingStateButton",defaultMessage:"Failed to load connector settings, please retry"}});export{Be as GoogleRedirectContent,W as MainRedirectContent,Ne as MainRedirectContentWrapper,Ae as RedirectContent};
//# sourceMappingURL=eu5xc064k5tcc0d1.js.map
