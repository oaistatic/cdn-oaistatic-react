var K=Object.freeze,V=Object.defineProperty,Me=Object.defineProperties;var be=Object.getOwnPropertyDescriptors;var Q=Object.getOwnPropertySymbols;var ve=Object.prototype.hasOwnProperty,Pe=Object.prototype.propertyIsEnumerable;var J=(s,e,o)=>e in s?V(s,e,{enumerable:!0,configurable:!0,writable:!0,value:o}):s[e]=o,U=(s,e)=>{for(var o in e||(e={}))ve.call(e,o)&&J(s,o,e[o]);if(Q)for(var o of Q(e))Pe.call(e,o)&&J(s,o,e[o]);return s},ee=(s,e)=>Me(s,be(e));var te=(s,e)=>K(V(s,"raw",{value:K(e||s.slice())}));import{d as ce,b as de,j as l,M as Y,c as ue}from"./jj85rqzpbnvv3emr.js";import{P as Z,lp as fe,i as w,eE as B,T as Ae,oW as je,F as ye,aF as ge,f as pe,gu as _e,a6 as Ue,iE as me,oX as Fe,oY as he,oZ as Le,gr as $,y as ke,fD as Te,gp as Ee,lR as De,gH as Ce,O as Ie,gq as se,kF as Re,o_ as Ne,o$ as Oe,p0 as ze,p1 as Se,jH as oe,jG as W}from"./lef5ym39glv4981l.js";import{fd as ae,fe as Be,ff as $e,fg as He,fh as le,fi as Xe,fj as We,fk as Ye,fl as Ze}from"./mclphevd122040jw.js";import{u as we}from"./dta5t6ifyam55mk9.js";function lt({clientThreadId:s,openFileDialog:e,icon:o,isDisabled:n=!1,isSmall:u=!1,showLabel:a=!1,showUpsell:r=!1,hideBorder:t=!1,highlightTooltip:f=!1,disabledReason:c,currentModelName:h,visualTreatment:M,showMenuForNoAuth:d,modelSupportsImages:x}){const i=de(),g=fe(),p=w();n=(n||!!g)&&!r;const m=l.jsxs(Be,{disabled:n,$showLabel:a,$hideBorder:t,$isSmall:u,$visualTreatment:M,onClick:v=>{if(v.preventDefault(),d||r){Z.logNoAuthAttachButtonClicked({location:d?"No auth file upload":"No auth upsell"});return}e()},"aria-label":$e(p,i,n,c,h),children:[o,a&&l.jsx(He,{})]}),b=l.jsx("div",{className:"flex",children:m});if(d||r){const v=d?l.jsx(Xe,{openFileDialog:e,showMenuForNoAuth:!0,modelSupportsImages:x}):l.jsx(je,{location:"attach",statsig_login_event:"chatgpt_composer_upsell_login_button_clicked",statsig_signup_event:"chatgpt_composer_upsell_signup_button_clicked"}),F=l.jsx(B.BasicTrigger,{asChild:!0,children:b});return l.jsxs(B.Root,{children:[d?l.jsx(le,{clientThreadId:s,rateLimitPopup:g,highlightTooltip:f,disabled:n,children:F}):l.jsx(Ae,{label:l.jsx(Y,{id:"wkpQmi",defaultMessage:"Upload files and more"}),side:"bottom",open:f||void 0,children:F}),l.jsx(B.Portal,{children:l.jsx(B.Content,{alignOffset:-8,side:"bottom",size:"small",className:"radix-side-bottom:flex-col-reverse flex flex-col",children:v})})]})}return l.jsx(le,{disabled:n,clientThreadId:s,rateLimitPopup:g,highlightTooltip:f,children:b})}function Ge({code:s,message:e}){switch(s){case ae.FileTooLarge:return ie.errorFileTooLarge;case ae.TooManyFiles:return Z.logEvent("Uploaded Max Files Error"),ie.errorTooManyFiles;default:return e}}const ie=ce({attachImages:{id:"PromptFilePicker.attachImages",defaultMessage:"Attach images"},attachFiles:{id:"PromptFilePicker.attachFiles",defaultMessage:"Upload files and more"},errorFileTooLarge:{id:"PromptFilePicker.errorFileTooLarge",defaultMessage:"Your file is too large. The maximum file size is {size}MB."},errorTooManyFiles:{id:"PromptFilePicker.errorTooManyFiles",defaultMessage:"You may only upload {maxNum} files at a time."},defaultFileUploadRateLimited:{id:"U5qAWP",defaultMessage:"You've reached your daily upload limit. Get ChatGPT Plus to unlock more."}}),re=ce({dragInstructions:{id:"FileDropZone.dragInstructions",defaultMessage:"Add anything"},dragAllAccepted:{id:"FileDropZone.dragAllAccepted",defaultMessage:"Drop any file here to add it to the conversation"}});function qe(s){if(!s.accept||Object.keys(s.accept).length===0)return[];const e=[];return Object.values(s.accept).forEach(o=>e.push(...o)),e.sort()}function it(s){"use forget";var q;const e=ue.c(48),{className:o,children:n,clientThreadId:u,currentModelConfig:a,noKeyboard:r}=s,t=de(),f=pe(),c=w();let h;e[0]!==c?(h=ke(c),e[0]=c,e[1]=h):h=e[1];const M=h;let d;if(e[2]!==c){const j=ge(c).flags;d=j==null?void 0:j.includes(me.NoAuthEnableFileUploads),e[2]=c,e[3]=d}else d=e[3];const x=d,i=Ye(u),g=Te();let p;e[4]!==g||e[5]!==i||e[6]!==a?(p=Ee(a,i,g),e[4]=g,e[5]=i,e[6]=a,e[7]=p):p=e[7];const m=p,b=m!==$.None,v=De(Ke),F=(m===$.Multimodal?Fe:he)-v.length,R=F<=0,{getGizmoId:G}=Ce();let L;e[8]!==u||e[9]!==c?(L=Se(c,u),e[8]=u,e[9]=c,e[10]=L):L=e[10];const P=Ie(L),N=Array.isArray(P)&&P.length>0;let y;e[11]!==i||e[12]!==a?(y=se(a,i),e[11]=i,e[12]=a,e[13]=y):y=e[13];let _;e[14]!==i||e[15]!==a?(_=(q=Re(a,i))==null?void 0:q.attachments,e[14]=i,e[15]=a,e[16]=_):_=e[16];const{handleFileAccepted:k}=Je(t,m,y,"drag",G,_,N?P:void 0),xe=fe();let O;e[17]!==i||e[18]!==a||e[19]!==M||e[20]!==x?(O=!M&&x?se(a,i):Ne(a,i),e[17]=i,e[18]=a,e[19]=M,e[20]=x,e[21]=O):O=e[21];const T=Oe(O),H=!b||R||xe!=null;let E;e[22]!==t||e[23]!==f||e[24]!==m?(E=j=>Qe(j,t,f,m),e[22]=t,e[23]=f,e[24]=m,e[25]=E):E=e[25];let z;e[26]!==T||e[27]!==k||e[28]!==r||e[29]!==F||e[30]!==H||e[31]!==E?(z=U({maxFiles:F,disabled:H,noClick:!0,noKeyboard:r,onDropAccepted:k,onDropRejected:E,multiple:!0,maxSize:ze},T),e[26]=T,e[27]=k,e[28]=r,e[29]=F,e[30]=H,e[31]=E,e[32]=z):z=e[32];const{getRootProps:I,isDragActive:X}=we(z);let A,D,C;if(e[33]!==n||e[34]!==o||e[35]!==T||e[36]!==I||e[37]!==X){const j=qe(T);e[41]!==o||e[42]!==I?(A=I({className:o}),e[41]=o,e[42]=I,e[43]=A):A=e[43],D=n,C=X&&l.jsxs(Ve,{children:[l.jsx(Ze,{}),l.jsx("h3",{children:l.jsx(Y,U({},re.dragInstructions))}),l.jsx("h4",{className:"w-2/3 text-center",children:j.length>0?j.join(", "):l.jsx(Y,U({},re.dragAllAccepted))})]}),e[33]=n,e[34]=o,e[35]=T,e[36]=I,e[37]=X,e[38]=A,e[39]=D,e[40]=C}else A=e[38],D=e[39],C=e[40];let S;return e[44]!==A||e[45]!==D||e[46]!==C?(S=l.jsxs("div",ee(U({},A),{children:[D,C]})),e[44]=A,e[45]=D,e[46]=C,e[47]=S):S=e[47],S}function Ke(s){return s.files}function Qe(s,e,o,n){const{errors:u}=s[0];u.forEach(a=>{const r=Ge(a);typeof r=="string"?o.danger(r,{hasCloseButton:!0,loggingTitle:"File upload error",loggingDescription:r,toastId:"file_upload_error"}):o.danger(e.formatMessage(r,{size:Le,maxNum:n===$.Multimodal?Fe:he}),{hasCloseButton:!0,loggingTitle:r.defaultMessage||"File upload error",loggingDescription:r.defaultMessage||"File upload error",toastId:"file_upload_error"})})}function Je(s,e,o,n,u,a,r){"use forget";const t=ue.c(18),f=w(),c=ge(f).flags,h=pe(),M=_e(),{isUnauthenticated:d}=Ue(),x=r!=null?r:void 0,i=c==null?void 0:c.includes(me.NoAuthEnableFileUploads);let g;t[0]!==f?(g=We(f,!0),t[0]=f,t[1]=g):g=t[1];const{persistFilesToLibrary:p,doubleWriteFilesToLibrary:m}=g;let b;t[2]!==a||t[3]!==x||t[4]!==u||t[5]!==s||t[6]!==m||t[7]!==p||t[8]!==d||t[9]!==o||t[10]!==i||t[11]!==M||t[12]!==h||t[13]!==n||t[14]!==e?(b=async(R,G)=>{Z.logEvent("Upload File",{client:"web",eventSource:n,intent:e.toString()});const L=u!=null?await u():void 0;R.length>0&&R.forEach(P=>{const N=U(U({gizmoId:L},i&&{isUnauthenticated:d}),x&&x.length>0?{contextScopes:x}:{}),y=[M,oe(P),P,e,o,s,h,N,a];if(e===$.Retrieval){let _=Promise.resolve(),k=Promise.resolve();p&&(k=W.uploadFile(M,"".concat(oe(P),":lib"),P,e,o,s,h,N,a,void 0,!0,!0)),(m||!p)&&(_=W.uploadFile(...y,void 0,!1,p)),Promise.all([_,k])}else W.uploadFile(...y)})},t[2]=a,t[3]=x,t[4]=u,t[5]=s,t[6]=m,t[7]=p,t[8]=d,t[9]=o,t[10]=i,t[11]=M,t[12]=h,t[13]=n,t[14]=e,t[15]=b):b=t[15];const v=b;let F;return t[16]!==v?(F={handleFileAccepted:v},t[16]=v,t[17]=F):F=t[17],F}var ne;const Ve=ye.div(ne||(ne=te(['absolute z-50 inset-0 flex gap-2 flex-col justify-center items-center after:contents-[""] after:absolute after:opacity-80 after:z-[-1] after:bg-token-main-surface-primary after:inset-0'])));export{Ve as D,it as F,lt as P,qe as g,Qe as h,Je as u};
//# sourceMappingURL=cncd8uuk5eicbkeu.js.map
