var ut=Object.defineProperty,ft=Object.defineProperties;var pt=Object.getOwnPropertyDescriptors;var D=Object.getOwnPropertySymbols;var ne=Object.prototype.hasOwnProperty,re=Object.prototype.propertyIsEnumerable;var te=(e,r,n)=>r in e?ut(e,r,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[r]=n,N=(e,r)=>{for(var n in r||(r={}))ne.call(r,n)&&te(e,n,r[n]);if(D)for(var n of D(r))re.call(r,n)&&te(e,n,r[n]);return e},S=(e,r)=>ft(e,pt(r));var O=(e,r)=>{var n={};for(var t in e)ne.call(e,t)&&r.indexOf(t)<0&&(n[t]=e[t]);if(e!=null&&D)for(var t of D(e))r.indexOf(t)<0&&re.call(e,t)&&(n[t]=e[t]);return n};import{fb as mt,x1 as gt,x2 as dt,x3 as ht,x4 as se,vD as yt,py as _t,j7 as Ae,x5 as ve,x6 as oe,x7 as ae,x8 as ie,x9 as Le,xa as W,xb as bt,xc as R,xd as wt,xe as I,xf as Nt,gz as Re,fk as Te,qG as xt,c4 as Ct,v as C,eR as St,xg as De,w6 as Oe,w7 as Pe,w8 as Fe,xh as F,xi as kt,xj as A,xk as z,xl as Et,xm as At,xn as ce,h as H,w5 as Me,j as vt,xo as Lt,i as Rt,mI as Tt}from"./mclphevd122040jw.js";import{i as Dt,fW as Ot,P as k,e as Pt,bi as Ft,$ as v,a0 as L,bK as Mt,f as Ut,T as jt,E as Bt,oq as It,or as Ue,R as Ht,io as qt,cM as Gt,cw as V,ci as $t,dl as Kt,gG as Wt,tt as zt,a3 as Vt,gz as Yt,gC as Qt,cx as q,cv as je,tu as Xt}from"./lef5ym39glv4981l.js";import{r as x,j as _,R as Y,u as Jt,b as Zt,d as en,f as tn}from"./jj85rqzpbnvv3emr.js";import{r as Be}from"./kxedrjbxv2qblujd.js";import{r as nn,a as Ie}from"./doljxy43e4xie9bi.js";import{k as le}from"./lep2wptoy14cfe2w.js";const ue={},fe={},pe={};function me(e,r){return"".concat(e,"::").concat(r)}function rn(c){var l=c,{node:e,onClick:r,children:n,clientThreadId:t,messageId:s,href:i,disableSafeURLs:a}=l,o=O(l,["node","onClick","children","clientThreadId","messageId","href","disableSafeURLs"]);var X,J,Z,ee;let u=r;const m=(X=e==null?void 0:e.properties)==null?void 0:X.href,f=x.useContext(mt),y=Dt(),g=Ot(t),p=gt(g,i,(f==null?void 0:f.useSafeUrls)&&!a),h=dt(t,s),b=(ee=(Z=(J=h==null?void 0:h.metadata)==null?void 0:J.__internal)==null?void 0:Z.utm_tags)!=null?ee:{},w=ht(t),M=!a&&p===void 0;return s!=null&&typeof m=="string"&&m.includes("/bing/redirect")&&(ue[s]||(k.logEvent("Browsing Show Bing Link",{id:s,content:m}),ue[s]=!0),u=T=>{fe[s]||(k.logEvent("Browsing Click Bing Link",{id:s,content:m}),fe[s]=!0),r==null||r(T)}),u=T=>{const U=""+m;if(s&&!pe[me(s,U)]){const lt=p||M?"URL Clicked Allowed":"URL Clicked Blocked";k.logEvent(lt,{id:s,content:U}),pe[me(s,U)]=!0}r==null||r(T),M&&i&&(T.preventDefault(),Ft(y,yt,{urls:se(i,b,w)}))},_.jsx(_.Fragment,{children:_.jsx("a",S(N({onClick:u},o),{className:Pt(o.className,M&&"cursor-pointer"),href:p&&se(p,b,w),rel:"noopener",children:n}))})}const sn="w";function on(i){var a=i,{messageId:e,clientThreadId:r,text:n,children:t}=a,s=O(a,["messageId","clientThreadId","text","children"]);const o=window.location.origin,c="".concat(o,"?q=").concat(encodeURIComponent(n)),l=_t(),u=x.useCallback(async m=>{m.preventDefault(),v.count(L.DEFAULT,"instant_follow_up_anchor_clicked"),k.logEventWithStatsig("Instant Follow Up Anchor Clicked","chatgpt_instant_follow_up_anchor_clicked",{clientThreadId:r,messageId:e}),l(m,{text:n,type:Ae.Reply},[],0)},[r,e,n,l]);return _.jsx(rn,S(N({},s),{href:c,disableSafeURLs:!0,clientThreadId:r,messageId:e,className:"cursor-pointer",onClick:u,children:t}))}const Xr=Y.memo(on),ge=/[#.]/g;function an(e,r){const n=e||"",t={};let s=0,i,a;for(;s<n.length;){ge.lastIndex=s;const o=ge.exec(n),c=n.slice(s,o?o.index:n.length);c&&(i?i==="#"?t.id=c:Array.isArray(t.className)?t.className.push(c):t.className=[c]:a=c,s+=c.length),o&&(i=o[0],s++)}return{type:"element",tagName:a||r||"div",properties:t,children:[]}}const cn=new Set(["button","menu","reset","submit"]),G={}.hasOwnProperty;function He(e,r,n){const t=n&&pn(n);function s(i,a,...o){let c=-1,l;if(i==null){l={type:"root",children:[]};const u=a;o.unshift(u)}else if(l=an(i,r),l.tagName=l.tagName.toLowerCase(),t&&G.call(t,l.tagName)&&(l.tagName=t[l.tagName]),ln(a,l.tagName)){let u;for(u in a)G.call(a,u)&&un(e,l.properties,u,a[u])}else o.unshift(a);for(;++c<o.length;)$(l.children,o[c]);return l.type==="element"&&l.tagName==="template"&&(l.content={type:"root",children:l.children},l.children=[]),l}return s}function ln(e,r){return e==null||typeof e!="object"||Array.isArray(e)?!1:r==="input"||!e.type||typeof e.type!="string"?!0:"children"in e&&Array.isArray(e.children)?!1:r==="button"?cn.has(e.type.toLowerCase()):!("value"in e)}function un(e,r,n,t){const s=ve(e,n);let i=-1,a;if(t!=null){if(typeof t=="number"){if(Number.isNaN(t))return;a=t}else typeof t=="boolean"?a=t:typeof t=="string"?s.spaceSeparated?a=oe(t):s.commaSeparated?a=ae(t):s.commaOrSpaceSeparated?a=oe(ae(t).join(" ")):a=de(s,s.property,t):Array.isArray(t)?a=t.concat():a=s.property==="style"?fn(t):String(t);if(Array.isArray(a)){const o=[];for(;++i<a.length;){const c=de(s,s.property,a[i]);o[i]=c}a=o}if(s.property==="className"&&Array.isArray(r.className)){const o=a;a=r.className.concat(o)}r[s.property]=a}}function $(e,r){let n=-1;if(r!=null)if(typeof r=="string"||typeof r=="number")e.push({type:"text",value:String(r)});else if(Array.isArray(r))for(;++n<r.length;)$(e,r[n]);else if(typeof r=="object"&&"type"in r)r.type==="root"?$(e,r.children):e.push(r);else throw new Error("Expected node, nodes, or string, got `"+r+"`")}function de(e,r,n){if(typeof n=="string"){if(e.number&&n&&!Number.isNaN(Number(n)))return Number(n);if((e.boolean||e.overloadedBoolean)&&(n===""||ie(n)===ie(r)))return!0}return n}function fn(e){const r=[];let n;for(n in e)G.call(e,n)&&r.push([n,e[n]].join(": "));return r.join("; ")}function pn(e){const r={};let n=-1;for(;++n<e.length;)r[e[n].toLowerCase()]=e[n];return r}const mn=["altGlyph","altGlyphDef","altGlyphItem","animateColor","animateMotion","animateTransform","clipPath","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","foreignObject","glyphRef","linearGradient","radialGradient","solidColor","textArea","textPath"],gn=He(Le,"div"),dn=He(W,"g",mn),j={html:"http://www.w3.org/1999/xhtml",svg:"http://www.w3.org/2000/svg"};function hn(e,r){return qe(e,{})||{type:"root",children:[]}}function qe(e,r){const n=yn(e,r);return n&&r.afterTransform&&r.afterTransform(e,n),n}function yn(e,r){switch(e.nodeType){case 1:return Nn(e,r);case 3:return bn(e);case 8:return wn(e);case 9:return he(e,r);case 10:return _n();case 11:return he(e,r);default:return}}function he(e,r){return{type:"root",children:Ge(e,r)}}function _n(){return{type:"doctype"}}function bn(e){return{type:"text",value:e.nodeValue||""}}function wn(e){return{type:"comment",value:e.nodeValue||""}}function Nn(e,r){const n=e.namespaceURI,t=n===j.svg?dn:gn,s=n===j.html?e.tagName.toLowerCase():e.tagName,i=n===j.html&&s==="template"?e.content:e,a=e.getAttributeNames(),o={};let c=-1;for(;++c<a.length;)o[a[c]]=e.getAttribute(a[c])||"";return t(s,o,Ge(i,r))}function Ge(e,r){const n=e.childNodes,t=[];let s=-1;for(;++s<n.length;){const i=qe(n[s],r);i!==void 0&&t.push(i)}return t}new DOMParser;function xn(e,r){const n=Cn(e);return hn(n)}function Cn(e){const r=document.createElement("template");return r.innerHTML=e,r.content}const ye=function(e,r,n){const t=bt(n);if(!e||!e.type||!e.children)throw new Error("Expected parent node");if(typeof r=="number"){if(r<0||r===Number.POSITIVE_INFINITY)throw new Error("Expected positive finite number as index")}else if(r=e.children.indexOf(r),r<0)throw new Error("Expected child node or index");for(;++r<e.children.length;)if(t(e.children[r],r,e))return e.children[r]},_e=/\n/g,be=/[\t ]+/g,K=R("br"),we=R(Tn),Sn=R("p"),Ne=R("tr"),kn=R(["datalist","head","noembed","noframes","noscript","rp","script","style","template","title",Rn,Dn]),$e=R(["address","article","aside","blockquote","body","caption","center","dd","dialog","dir","dl","dt","div","figure","figcaption","footer","form,","h1","h2","h3","h4","h5","h6","header","hgroup","hr","html","legend","li","listing","main","menu","nav","ol","p","plaintext","pre","section","ul","xmp"]);function En(e,r){const n=r||{},t="children"in e?e.children:[],s=$e(e),i=ze(e,{whitespace:n.whitespace||"normal"}),a=[];(e.type==="text"||e.type==="comment")&&a.push(...We(e,{breakBefore:!0,breakAfter:!0}));let o=-1;for(;++o<t.length;)a.push(...Ke(t[o],e,{whitespace:i,breakBefore:o?void 0:s,breakAfter:o<t.length-1?K(t[o+1]):s}));const c=[];let l;for(o=-1;++o<a.length;){const u=a[o];typeof u=="number"?l!==void 0&&u>l&&(l=u):u&&(l!==void 0&&l>-1&&c.push("\n".repeat(l)||" "),l=-1,c.push(u))}return c.join("")}function Ke(e,r,n){return e.type==="element"?An(e,r,n):e.type==="text"?n.whitespace==="normal"?We(e,n):vn(e):[]}function An(e,r,n){const t=ze(e,n),s=e.children||[];let i=-1,a=[];if(kn(e))return a;let o,c;for(K(e)||Ne(e)&&ye(r,e,Ne)?c="\n":Sn(e)?(o=2,c=2):$e(e)&&(o=1,c=1);++i<s.length;)a=a.concat(Ke(s[i],e,{whitespace:t,breakBefore:i?void 0:o,breakAfter:i<s.length-1?K(s[i+1]):c}));return we(e)&&ye(r,e,we)&&a.push("	"),o&&a.unshift(o),c&&a.push(c),a}function We(e,r){const n=String(e.value),t=[],s=[];let i=0;for(;i<=n.length;){_e.lastIndex=i;const c=_e.exec(n),l=c&&"index"in c?c.index:n.length;t.push(Ln(n.slice(i,l).replace(/[\u061C\u200E\u200F\u202A-\u202E\u2066-\u2069]/g,""),i===0?r.breakBefore:!0,l===n.length?r.breakAfter:!0)),i=l+1}let a=-1,o;for(;++a<t.length;)t[a].charCodeAt(t[a].length-1)===8203||a<t.length-1&&t[a+1].charCodeAt(0)===8203?(s.push(t[a]),o=void 0):t[a]?(typeof o=="number"&&s.push(o),s.push(t[a]),o=0):(a===0||a===t.length-1)&&s.push(0);return s}function vn(e){return[String(e.value)]}function Ln(e,r,n){const t=[];let s=0,i;for(;s<e.length;){be.lastIndex=s;const a=be.exec(e);i=a?a.index:e.length,!s&&!i&&a&&!r&&t.push(""),s!==i&&t.push(e.slice(s,i)),s=a?i+a[0].length:i}return s!==i&&!n&&t.push(""),t.join(" ")}function ze(e,r){if(e.type==="element"){const n=e.properties||{};switch(e.tagName){case"listing":case"plaintext":case"xmp":return"pre";case"nobr":return"nowrap";case"pre":return n.wrap?"pre-wrap":"pre";case"td":case"th":return n.noWrap?"nowrap":r.whitespace;case"textarea":return"pre-wrap"}}return r.whitespace}function Rn(e){return!!(e.properties||{}).hidden}function Tn(e){return e.tagName==="td"||e.tagName==="th"}function Dn(e){return e.tagName==="dialog"&&!(e.properties||{}).open}const On={},Pn=[];function Ve(e){const r=e||On;return function(n,t){wt(n,"element",function(s,i){const a=Array.isArray(s.properties.className)?s.properties.className:Pn,o=a.includes("language-math"),c=a.includes("math-display"),l=a.includes("math-inline");let u=c;if(!o&&!c&&!l)return;let m=i[i.length-1],f=s;if(s.tagName==="code"&&o&&m&&m.type==="element"&&m.tagName==="pre"&&(f=m,m=i[i.length-2],u=!0),!m)return;const y=En(f,{whitespace:"pre"});let g;try{g=le.renderToString(y,S(N({},r),{displayMode:u,throwOnError:!0}))}catch(h){const b=h,w=b.name.toLowerCase();t.message("Could not render math with KaTeX",{ancestors:[...i,s],cause:b,place:s.position,ruleId:w,source:"rehype-katex"}),w==="parseerror"?g=le.renderToString(y,S(N({},r),{displayMode:u,strict:"ignore",throwOnError:!1})):g=[{type:"element",tagName:"span",properties:{className:["katex-error"],style:"color:"+(r.errorColor||"#cc0000"),title:String(h)},children:[{type:"text",value:y}]}]}typeof g=="string"&&(g=xn(g).children);const p=m.children.indexOf(f);return m.children.splice(p,1,...g),I})}}function Fn(e){Nt(e,[/\r?\n|\r/g,Mn])}function Mn(){return{type:"break"}}function Ye(){return function(e){Fn(e)}}const Qe="sandbox:";function Un(e){const r=new URL(e).searchParams.get("se");if(!r)return!1;const n=Date.parse(r);return Number.isNaN(n)?!1:Date.now()>n}function Jr(s){var i=s,{messageId:e,clientThreadId:r,href:n}=i,t=O(i,["messageId","clientThreadId","href"]);const a=Jt(),[o,c]=x.useState(!1),l=n.substring(Qe.length),u=Mt(r),m=Zt(),f=Ut(),y=x.useCallback(b=>{const w=document.createElement("a");w.href=b,w.click(),c(!1)},[]),g=x.useCallback(b=>{c(!1),f.danger(b,{toastId:"file_download_failed"})},[f]),p=Bn(o,e,u,l,g,y).data,h=x.useCallback(async b=>{if(r!==void 0){b.preventDefault();const w=(p==null?void 0:p.download_url)&&Un(p.download_url);(p===void 0||(p==null?void 0:p.status)!=="success"||w)&&a.invalidateQueries({queryKey:Xe(e,l)}),(p==null?void 0:p.status)==="success"&&(p!=null&&p.download_url)&&!w?y(p.download_url):c(!0)}},[r,p,a,e,l,y]);return _.jsx(jt,{closeOnOutsideClick:!1,label:_.jsxs("span",{className:"flex items-center gap-1",children:[o?m.formatMessage(xe.startingDownload):m.formatMessage(xe.downloadFile),o&&_.jsx(Bt,{})]}),side:"top",children:_.jsx("a",S(N({},t),{className:"cursor-pointer",onClick:b=>!o&&h(b)}))})}async function jn(e,r,n){const t=await Ht.safeGet("/conversation/{conversation_id}/interpreter/download",{parameters:{path:{conversation_id:r},query:{message_id:e,sandbox_path:n}}});if(t.status===qt.Success)return t;throw new Ue("Could not download file from advanced data analysis","error_code"in t?t.error_code:"unknown_error")}function Bn(e,r,n,t,s,i){const a=It();return tn({queryKey:Xe(r,t),queryFn:()=>jn(r,n,t).then(o=>((o==null?void 0:o.status)==="success"&&i(o.download_url),o)).catch(o=>{let c=a("default_download_link_error",{fileName:t});throw o instanceof Ue&&o.code!=null&&(c=a(o.code)),s==null||s(c),o}),enabled:!!(e&&r&&n&&t)})}function Xe(e,r){return["downloadSandboxLink",e,r]}const xe=en({downloadFile:{id:"SandboxDownload.downloadFile",defaultMessage:"Download file"},startingDownload:{id:"SandboxDownload.startingDownload",defaultMessage:"Starting download"}}),In="f",Zr="dr",Je=(e,r,n=!1)=>{const t=x.useRef(!1);x.useEffect(()=>{t.current||(t.current=!0,v.count(L.DEFAULT,"clickable_follow_up_text_shown"),n&&v.count(L.DEFAULT,"clickable_follow_up_deep_research_text_shown"),k.logEventWithStatsig("Clickable Follow Up Text Shown","chatgpt_clickable_follow_up_text_shown",N({},V({clientThreadId:e,messageId:r}))))},[e,r,n])},Ze=({messageId:e,clientThreadId:r,text:n})=>{const t=Re(r),s=Gt.useStore(),i=Te(r);Je(r,e,!1);const a=x.useCallback(o=>{o.preventDefault(),v.count(L.DEFAULT,"clickable_follow_up_text_clicked"),k.logEventWithStatsig("Clickable Follow Up Text Clicked","chatgpt_clickable_follow_up_text_clicked",V({clientThreadId:r,messageId:e}));const c=s.getActiveSystemHintType();t({sourceEvent:o,promptMessage:Kt(n.toLowerCase(),{suggestion_type:Ae.Reply}),completionMetadata:{systemHints:c?[c]:[],conversationMode:i!=null?i:{kind:$t.PrimaryAssistant}}})},[r,i,e,s,t,n]);return _.jsx("span",{className:"decoration-token-text-secondary hover:text-token-text-secondary cursor-pointer underline decoration-dotted decoration-[12%] underline-offset-4 transition-colors duration-200 ease-in-out",onClick:a,children:n})},Hn=({messageId:e,clientThreadId:r,text:n})=>_.jsx(Ze,{messageId:e,clientThreadId:r,text:n}),es=Y.memo(Hn),qn=({messageId:e,clientThreadId:r,text:n})=>{const t=Wt(),{setThreadSystemHintMode:s}=xt(),i=!!zt(),a=Re(r),o=Te(r);Je(r,e,!0);const c=x.useCallback(l=>{l.preventDefault(),v.count(L.DEFAULT,"clickable_follow_up_text_clicked"),v.count(L.DEFAULT,"clickable_follow_up_deep_research_text_clicked"),k.logEventWithStatsig("Clickable Follow Up Text Clicked","chatgpt_clickable_follow_up_text_clicked",V({clientThreadId:r,messageId:e}));const u={clientThreadId:r};s(Vt.Research,!0,u);{const m=Yt(t);m.focus(),Qt(m,n)}},[r,e,n,t,s,o,a]);return i?_.jsx(Ze,{messageId:e,clientThreadId:r,text:n}):_.jsxs("span",{className:"decoration-token-text-secondary hover:text-token-text-secondary cursor-pointer underline decoration-dotted decoration-[12%] underline-offset-4 transition-colors duration-200 ease-in-out",onClick:c,children:[_.jsx(Ct,{className:"icon me-1 inline-block"}),n]})},Gn=({messageId:e,clientThreadId:r,text:n})=>_.jsx(qn,{messageId:e,clientThreadId:r,text:n}),ts=Y.memo(Gn);function $n(){return e=>{C(e,{tagName:"table"},r=>{var s,i,a,o,c,l,u,m;const n=(a=(i=(s=r.children.find(f=>E(f,"thead")))==null?void 0:s.children.find(f=>E(f,"tr")))==null?void 0:i.children.filter(f=>E(f,"th")))!=null?a:[],t=(l=(c=(o=r.children.find(f=>E(f,"tbody")))==null?void 0:o.children.filter(f=>E(f,"tr")))==null?void 0:c.map(f=>f.children.filter(y=>E(y,"td"))))!=null?l:[];for(let f=0;f<n.length;f++){const y=n[f];let g=Ce(y);for(let h=0;h<t.length;h++)g=Math.max(g,Ce((u=t[h])==null?void 0:u[f]));const p=g>160?"xl":g>100?"lg":g>40?"md":"sm";y.properties["data-col-size"]=p;for(let h=0;h<t.length;h++)(m=t[h])!=null&&m[f]&&(t[h][f].properties["data-col-size"]=p)}})}}function E(e,r){return e.type==="element"&&e.tagName===r}function Ce(e){let r=0;return e&&C(e,"text",n=>{r+=n.value.length}),r}const Kn=new Set([sn,In]),ns=e=>e.startsWith(Qe)||Kn.has(e)||e.startsWith("tel:")||e.startsWith("sms:")?e:kt(e);function et(){return e=>{C(e,"list",r=>{for(const n of r.children)n.spread=!0})}}function Wn(){return(e,r)=>{let n=0;const t=String(r.value);C(e,"containerDirective",s=>{var i,a,o,c;if(s.type==="containerDirective"&&s.name===q){const l=(a=(i=s.position)==null?void 0:i.start)==null?void 0:a.offset,u=(c=(o=s.position)==null?void 0:o.end)==null?void 0:c.offset;if(l==null||u==null)return;const f=t.slice(l,u).replace(/^:::[^\n]*\n?/,"").replace(/\n?:::\s*$/,""),y=s.data||(s.data={});y.hName=q;const g=n++,p=s.attributes||{};y.hProperties=S(N({},p),{content:f,index:g})}})}}function rs(e){return r=>{C(r,n=>{Object.defineProperties(n,{markdownSource:{get(){try{return e.slice(this.position.start.offset,this.position.end.offset)}catch(t){return""}}}})})}}const ss=[[Oe,{singleTilde:!1}],Ye,et,[nn,{singleDollarTextMath:!1}],Pe,Wn,Ie,Fe,...F?[F]:[],Be,tt,nt];function tt(){return e=>{C(e,"textDirective",r=>{r.name!==je&&(r.type="text",r.value=":".concat(r.name))})}}const zn=/\u200b/g;function nt(){return e=>{C(e,"text",r=>{r.value=r.value.replace(zn,"")})}}function Vn(){return e=>{var n;const r=(n=e.position)==null?void 0:n.end.offset;C(e,"element",(t,s)=>{var u;const{position:i}=t;if(!i)return;const{start:a,end:o}=i,c=a.offset,l=o.offset;(u=t.properties)!=null||(t.properties={}),c!=null&&(t.properties["data-start"]=c),l!=null&&(t.properties["data-end"]=l,r===l&&(t.properties["data-is-last-node"]=""),s===e.children.length-1&&(t.properties["data-is-only-node"]=""))})}}const os=[Ve,Vn,$n,[St,{target:"_new",rel:"noopener noreferrer"}],De],Yn=[[Ve,{output:"mathml"}],De],rt=[[Oe,{singleTilde:!1}],Ye,et,Pe,Ie,Fe,...F?[F]:[],Be,tt,nt],Qn=["area","base","basefont","bgsound","br","col","command","embed","frame","hr","image","img","input","keygen","link","meta","param","source","track","wbr"],Se={}.hasOwnProperty;function Xn(e,r){const n=r||{};function t(s,...i){let a=t.invalid;const o=t.handlers;if(s&&Se.call(s,e)){const c=String(s[e]);a=Se.call(o,c)?o[c]:t.unknown}if(a)return a.call(this,s,...i)}return t.handlers=n.handlers||{},t.invalid=n.invalid,t.unknown=n.unknown,t}const Jn=/^>|^->|<!--|-->|--!>|<!-$/g,Zn=[">"],er=["<",">"];function tr(e,r,n,t){return t.settings.bogusComments?"<?"+A(e.value,Object.assign({},t.settings.characterReferences,{subset:Zn}))+">":"<!--"+e.value.replace(Jn,s)+"-->";function s(i){return A(i,Object.assign({},t.settings.characterReferences,{subset:er}))}}function nr(e,r,n,t){return"<!"+(t.settings.upperDoctype?"DOCTYPE":"doctype")+(t.settings.tightDoctype?"":" ")+"html>"}const d=ot(1),st=ot(-1),rr=[];function ot(e){return r;function r(n,t,s){const i=n?n.children:rr;let a=(t||0)+e,o=i[a];if(!s)for(;o&&z(o);)a+=e,o=i[a];return o}}const sr={}.hasOwnProperty;function at(e){return r;function r(n,t,s){return sr.call(e,n.tagName)&&e[n.tagName](n,t,s)}}const Q=at({body:ar,caption:B,colgroup:B,dd:ur,dt:lr,head:B,html:or,li:cr,optgroup:fr,option:pr,p:ir,rp:ke,rt:ke,tbody:gr,td:Ee,tfoot:dr,th:Ee,thead:mr,tr:hr});function B(e,r,n){const t=d(n,r,!0);return!t||t.type!=="comment"&&!(t.type==="text"&&z(t.value.charAt(0)))}function or(e,r,n){const t=d(n,r);return!t||t.type!=="comment"}function ar(e,r,n){const t=d(n,r);return!t||t.type!=="comment"}function ir(e,r,n){const t=d(n,r);return t?t.type==="element"&&(t.tagName==="address"||t.tagName==="article"||t.tagName==="aside"||t.tagName==="blockquote"||t.tagName==="details"||t.tagName==="div"||t.tagName==="dl"||t.tagName==="fieldset"||t.tagName==="figcaption"||t.tagName==="figure"||t.tagName==="footer"||t.tagName==="form"||t.tagName==="h1"||t.tagName==="h2"||t.tagName==="h3"||t.tagName==="h4"||t.tagName==="h5"||t.tagName==="h6"||t.tagName==="header"||t.tagName==="hgroup"||t.tagName==="hr"||t.tagName==="main"||t.tagName==="menu"||t.tagName==="nav"||t.tagName==="ol"||t.tagName==="p"||t.tagName==="pre"||t.tagName==="section"||t.tagName==="table"||t.tagName==="ul"):!n||!(n.type==="element"&&(n.tagName==="a"||n.tagName==="audio"||n.tagName==="del"||n.tagName==="ins"||n.tagName==="map"||n.tagName==="noscript"||n.tagName==="video"))}function cr(e,r,n){const t=d(n,r);return!t||t.type==="element"&&t.tagName==="li"}function lr(e,r,n){const t=d(n,r);return!!(t&&t.type==="element"&&(t.tagName==="dt"||t.tagName==="dd"))}function ur(e,r,n){const t=d(n,r);return!t||t.type==="element"&&(t.tagName==="dt"||t.tagName==="dd")}function ke(e,r,n){const t=d(n,r);return!t||t.type==="element"&&(t.tagName==="rp"||t.tagName==="rt")}function fr(e,r,n){const t=d(n,r);return!t||t.type==="element"&&t.tagName==="optgroup"}function pr(e,r,n){const t=d(n,r);return!t||t.type==="element"&&(t.tagName==="option"||t.tagName==="optgroup")}function mr(e,r,n){const t=d(n,r);return!!(t&&t.type==="element"&&(t.tagName==="tbody"||t.tagName==="tfoot"))}function gr(e,r,n){const t=d(n,r);return!t||t.type==="element"&&(t.tagName==="tbody"||t.tagName==="tfoot")}function dr(e,r,n){return!d(n,r)}function hr(e,r,n){const t=d(n,r);return!t||t.type==="element"&&t.tagName==="tr"}function Ee(e,r,n){const t=d(n,r);return!t||t.type==="element"&&(t.tagName==="td"||t.tagName==="th")}const yr=at({body:wr,colgroup:Nr,head:br,html:_r,tbody:xr});function _r(e){const r=d(e,-1);return!r||r.type!=="comment"}function br(e){const r=new Set;for(const t of e.children)if(t.type==="element"&&(t.tagName==="base"||t.tagName==="title")){if(r.has(t.tagName))return!1;r.add(t.tagName)}const n=e.children[0];return!n||n.type==="element"}function wr(e){const r=d(e,-1,!0);return!r||r.type!=="comment"&&!(r.type==="text"&&z(r.value.charAt(0)))&&!(r.type==="element"&&(r.tagName==="meta"||r.tagName==="link"||r.tagName==="script"||r.tagName==="style"||r.tagName==="template"))}function Nr(e,r,n){const t=st(n,r),s=d(e,-1,!0);return n&&t&&t.type==="element"&&t.tagName==="colgroup"&&Q(t,n.children.indexOf(t),n)?!1:!!(s&&s.type==="element"&&s.tagName==="col")}function xr(e,r,n){const t=st(n,r),s=d(e,-1);return n&&t&&t.type==="element"&&(t.tagName==="thead"||t.tagName==="tbody")&&Q(t,n.children.indexOf(t),n)?!1:!!(s&&s.type==="element"&&s.tagName==="tr")}const P={name:[["	\n\f\r &/=>".split(""),"	\n\f\r \"&'/=>`".split("")],["\0	\n\f\r \"&'/<=>".split(""),"\0	\n\f\r \"&'/<=>`".split("")]],unquoted:[["	\n\f\r &>".split(""),"\0	\n\f\r \"&'<=>`".split("")],["\0	\n\f\r \"&'<=>`".split(""),"\0	\n\f\r \"&'<=>`".split("")]],single:[["&'".split(""),"\"&'`".split("")],["\0&'".split(""),"\0\"&'`".split("")]],double:[['"&'.split(""),"\"&'`".split("")],['\0"&'.split(""),"\0\"&'`".split("")]]};function Cr(e,r,n,t){const s=t.schema,i=s.space==="svg"?!1:t.settings.omitOptionalTags;let a=s.space==="svg"?t.settings.closeEmptyElements:t.settings.voids.includes(e.tagName.toLowerCase());const o=[];let c;s.space==="html"&&e.tagName==="svg"&&(t.schema=W);const l=Sr(t,e.properties),u=t.all(s.space==="html"&&e.tagName==="template"?e.content:e);return t.schema=s,u&&(a=!1),(l||!i||!yr(e,r,n))&&(o.push("<",e.tagName,l?" "+l:""),a&&(s.space==="svg"||t.settings.closeSelfClosing)&&(c=l.charAt(l.length-1),(!t.settings.tightSelfClosing||c==="/"||c&&c!=='"'&&c!=="'")&&o.push(" "),o.push("/")),o.push(">")),o.push(u),!a&&(!i||!Q(e,r,n))&&o.push("</"+e.tagName+">"),o.join("")}function Sr(e,r){const n=[];let t=-1,s;if(r){for(s in r)if(r[s]!==null&&r[s]!==void 0){const i=kr(e,s,r[s]);i&&n.push(i)}}for(;++t<n.length;){const i=e.settings.tightAttributes?n[t].charAt(n[t].length-1):void 0;t!==n.length-1&&i!=='"'&&i!=="'"&&(n[t]+=" ")}return n.join("")}function kr(e,r,n){const t=ve(e.schema,r),s=e.settings.allowParseErrors&&e.schema.space==="html"?0:1,i=e.settings.allowDangerousCharacters?0:1;let a=e.quote,o;if(t.overloadedBoolean&&(n===t.attribute||n==="")?n=!0:(t.boolean||t.overloadedBoolean&&typeof n!="string")&&(n=!!n),n==null||n===!1||typeof n=="number"&&Number.isNaN(n))return"";const c=A(t.attribute,Object.assign({},e.settings.characterReferences,{subset:P.name[s][i]}));return n===!0||(n=Array.isArray(n)?(t.commaSeparated?Et:At)(n,{padLeft:!e.settings.tightCommaSeparatedLists}):String(n),e.settings.collapseEmptyAttributes&&!n)?c:(e.settings.preferUnquoted&&(o=A(n,Object.assign({},e.settings.characterReferences,{attribute:!0,subset:P.unquoted[s][i]}))),o!==n&&(e.settings.quoteSmart&&ce(n,a)>ce(n,e.alternative)&&(a=e.alternative),o=a+A(n,Object.assign({},e.settings.characterReferences,{subset:(a==="'"?P.single:P.double)[s][i],attribute:!0}))+a),c+(o&&"="+o))}const Er=["<","&"];function it(e,r,n,t){return n&&n.type==="element"&&(n.tagName==="script"||n.tagName==="style")?e.value:A(e.value,Object.assign({},t.settings.characterReferences,{subset:Er}))}function Ar(e,r,n,t){return t.settings.allowDangerousHtml?e.value:it(e,r,n,t)}function vr(e,r,n,t){return t.all(e)}const Lr=Xn("type",{invalid:Rr,unknown:Tr,handlers:{comment:tr,doctype:nr,element:Cr,raw:Ar,root:vr,text:it}});function Rr(e){throw new Error("Expected node, not `"+e+"`")}function Tr(e){const r=e;throw new Error("Cannot compile unknown node `"+r.type+"`")}const Dr={},Or={},Pr=[];function Fr(e,r){const n=r||Dr,t=n.quote||'"',s=t==='"'?"'":'"';if(t!=='"'&&t!=="'")throw new Error("Invalid quote `"+t+"`, expected `'` or `\"`");return{one:Mr,all:Ur,settings:{omitOptionalTags:n.omitOptionalTags||!1,allowParseErrors:n.allowParseErrors||!1,allowDangerousCharacters:n.allowDangerousCharacters||!1,quoteSmart:n.quoteSmart||!1,preferUnquoted:n.preferUnquoted||!1,tightAttributes:n.tightAttributes||!1,upperDoctype:n.upperDoctype||!1,tightDoctype:n.tightDoctype||!1,bogusComments:n.bogusComments||!1,tightCommaSeparatedLists:n.tightCommaSeparatedLists||!1,tightSelfClosing:n.tightSelfClosing||!1,collapseEmptyAttributes:n.collapseEmptyAttributes||!1,allowDangerousHtml:n.allowDangerousHtml||!1,voids:n.voids||Qn,characterReferences:n.characterReferences||Or,closeSelfClosing:n.closeSelfClosing||!1,closeEmptyElements:n.closeEmptyElements||!1},schema:n.space==="svg"?W:Le,quote:t,alternative:s}.one(Array.isArray(e)?{type:"root",children:e}:e,void 0,void 0)}function Mr(e,r,n){return Lr(e,r,n,this)}function Ur(e){const r=[],n=e&&e.children||Pr;let t=-1;for(;++t<n.length;)r[t]=this.one(n[t],t,e);return r.join("")}function jr(e){const r=this,n=N(N({},r.data("settings")),e);r.compiler=t;function t(s){return Fr(s,n)}}function Br(e,r){const n=Xt(e,r);return ct(n,r)}function ct(e,r){const n=H().use(Me).use(rt).use([[qr,r!=null?r:[]]]).use(vt,{rule:"-",tightDefinitions:!0,handlers:{text:o=>(o.value=o.value.replaceAll("\\[","["),o.value),break:()=>"\n",link:Ir}}),t=H().use(Lt).use(Yn).use(jr),s=n.runSync(n.parse(e)),i=n.stringify(s),a=t.stringify(t.runSync(s));return{"text/plain":i,"text/html":a}}const Ir=(e,r,n,t)=>{const s=n.createTracker(t),i=n.enter("link"),a=n.enter("label");let o=s.move("[");return o+=s.move(n.containerPhrasing(e,N({before:o,after:"]("},s.current()))),o+=s.move("]("),a(),o+=s.move(e.url.replace(/[\x00-\x1F\x7F-\x9F()"]/g,Hr)),e.title&&(o+=s.move(" "+JSON.stringify(e.title))),o+=s.move(")"),i(),o};function Hr(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase().padStart(2,"0")}function qr(e){return r=>{const n={},t=(s,i)=>{var a;switch(i.type){case"grouped_webpages":{const o=[];for(const c of i.items)if(c.url&&c.title){let l=n[c.url];l||(l=n[c.url]={type:"definition",identifier:String(Object.keys(n).length+1),url:c.url,title:c.title}),o.push({type:"linkReference",referenceType:"shortcut",identifier:l.identifier,children:[{type:"text",value:(a=c.attribution)!=null?a:Tt(c.url)}]})}return o.length===0?[]:[{type:"text",value:"("},...o.flatMap((c,l,u)=>l<u.length-1?[c,{type:"text",value:", "}]:[c]),{type:"text",value:")"}]}case"title_citation":case"location_search":case"time":case"image_v2":case"nav_list":case"file_navlist":case"file":case"grouped_webpages_model_predicted_fallback":case"map":case"tldr":case"navigation":case"stock":case"calculator":case"python":case"container":case"code_execution":case"forecast":case"businesses_map":case"entity_metadata":case"video":case"entity":case"sources_footnote":case"sports_standings":case"sports_schedule":case"attribution":case"webpage_extended":case"checkout_confirmation":case"image_inline":case"image_group":case"product_entity":case"products":case"alt_text":case"product_reviews":case"product_rationale":case"link_title":if(i.alt){const o=H().use(Me).use(rt).parse(i.alt);if(s.type!=="textDirective")return o.children;const c=o.children[0];if(c.type==="paragraph")return c.children}return[];case"hidden":case"status":case"optimistic_image_citation":case"webpage":case"optimistic_image_inline":case"invalid":case"attribution_footer":case"sports":case"grouped_webpages_v2":return[]}};C(r,Rt,(s,i,a)=>{var l;if(a==null||i==null)return;if(s.type==="containerDirective"&&s.name===q){const u=Array.isArray(s.children)?s.children:[];return a.children.splice(i,1,...u),[I,i]}const o=Gr(s,e),c=o?(l=t(s,o))!=null?l:[s]:[];return a.children.splice(i,1,...c),[I,i+c.length]}),r.children.push(...Object.values(n))}}function Gr(e,r){var n;if(e.name===je){const t=(n=e.attributes)==null?void 0:n.index;if(t)return r[parseInt(t,10)]}}const as=Object.freeze(Object.defineProperty({__proto__:null,markdownToClipboardContent:ct,messageTextToClipboardContent:Br},Symbol.toStringTag,{value:"Module"}));export{In as C,sn as I,rn as M,ss as R,Qe as S,nt as a,jr as b,os as c,Jr as d,Xr as e,tt as f,es as g,Zr as h,ts as i,rs as j,as as k,ct as m,Ye as r,ns as u};
//# sourceMappingURL=efscvp3g4k0or8n5.js.map
