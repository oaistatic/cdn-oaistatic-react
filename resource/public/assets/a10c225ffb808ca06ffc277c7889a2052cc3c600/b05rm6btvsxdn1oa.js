const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/gbd597xrr5jydret.js","assets/jj85rqzpbnvv3emr.js","assets/lef5ym39glv4981l.js","assets/root-ogjlcpyy.css","assets/mclphevd122040jw.js","assets/conversation-small-g7l5datj.css","assets/c9981m30wjsnzhw5.js","assets/ek7qgesc03yusf3u.js","assets/mgvl43usqxj4xeax.js","assets/k6u2cn52t3dhqz8s.js","assets/ctl8k0odelcp7jyc.js","assets/ADAVisualizationComponent-jfgkc83t.css"])))=>i.map(i=>d[i]);
var V=Object.freeze,k=Object.defineProperty;var A=(e,n)=>V(k(e,"raw",{value:V(n||e.slice())}));import{cg as F,ex as O,N as w,U as W,F as v,ey as D}from"./lef5ym39glv4981l.js";import{j as t,b as N}from"./jj85rqzpbnvv3emr.js";import{u as U,g as L}from"./ctl8k0odelcp7jyc.js";import{cm as I,ct as P,cu as H,cl as m,cv as J,cw as R,ck as B,cx as G,cy as K,cz as Q}from"./mclphevd122040jw.js";const E=O(()=>D(()=>import("./gbd597xrr5jydret.js").then(e=>e.A),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11])).then(e=>e.default));function ts({messages:e,isRequestActive:n,clientThreadId:d}){var y,C,M,_,j;const[l,s]=e,o=I(l),a=(y=s==null?void 0:s.metadata)==null?void 0:y.aggregate_result,h=U(),u=P(),g=s?L(s):[],i=(_=(M=(C=s==null?void 0:s.metadata)==null?void 0:C.aggregate_result)==null?void 0:M.messages.filter(H))!=null?_:[],p=((j=g.filter(r=>r.type==="chart"))!=null?j:[]).length!==i.length,x=u&&!p;let c=m.Running;return(a==null?void 0:a.status)==="success"?c=m.Finished:s!=null&&s.content.content_type!==F.ExecutionOutput||a!=null&&a.status!=="running"?c=m.Error:(o||!n)&&(c=m.Stopped),t.jsxs(t.Fragment,{children:[t.jsx(X,{messages:e,status:c,isRequestActive:n}),x&&g.map((r,S)=>{const{type:T}=r;return T==="chart"&&!h?(r.fallback_to_image=!0,t.jsx(b,{children:t.jsx(E,{clientThreadId:d,visualization:r})},S)):t.jsx(b,{children:t.jsx(E,{clientThreadId:d,visualization:r})},S)}),!x&&s!=null&&t.jsx(J,{message:s})]})}var z;const b=v.div(z||(z=A(["mb-3 max-w-[80%]"])));function X({messages:e,status:n,isRequestActive:d}){var f;const[l,s]=e,o=N(),a=(f=s==null?void 0:s.metadata)==null?void 0:f.aggregate_result,h=I(l),{data:u,isLoading:g}=w(W.ShowExpandedCodeView);let i=o.formatMessage({id:"message.tools.data-analysis.running",defaultMessage:"Analyzing"});if((a==null?void 0:a.status)==="success"?i=o.formatMessage({id:"message.tools.data-analysis.finished",defaultMessage:"Analyzed"}):s!=null&&s.content.content_type!==F.ExecutionOutput||a!=null&&a.status!=="running"?i=o.formatMessage({id:"message.tools.data-analysis.error",defaultMessage:"Analysis errored"}):(h||!d)&&(i=o.formatMessage({id:"message.tools.data-analysis.stopped",defaultMessage:"Analysis paused"})),!g){const p=R(l)!=null;return t.jsx(B,{status:n,highlightedCommand:i,showWorkUserSetting:u!=null?u:!1,hideOnlyIfNotInteractedWith:!0,children:p?t.jsxs("div",{className:"bg-token-main-surface-primary mt-0.5 mb-3 overflow-hidden rounded-b-xl",children:[t.jsx(G,{message:l,FormattedText:K,codeRendererClassName:"rounded-t-md rounded-b-none"}),s!=null&&t.jsx(Q,{message:s})]}):null})}return null}export{ts as DataAnalysisMessage};
//# sourceMappingURL=b05rm6btvsxdn1oa.js.map
