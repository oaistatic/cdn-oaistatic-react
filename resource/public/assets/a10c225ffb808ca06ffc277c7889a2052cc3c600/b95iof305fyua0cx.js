const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/oyw5llz5411yxte4.js","assets/jj85rqzpbnvv3emr.js","assets/lef5ym39glv4981l.js","assets/root-ogjlcpyy.css","assets/jo2rzlevh0fbjyvo.js","assets/ih9wj2grf6eudhng.js","assets/mclphevd122040jw.js","assets/conversation-small-g7l5datj.css","assets/f8qcx5r3ombc6w5p.js","assets/mcz3fk8dwdc0wesf.js","assets/d9yelnvmrbnletz1.js","assets/ou0dbpaenmm0r7gk.js"])))=>i.map(i=>d[i]);
var z=Object.defineProperty;var N=Object.getOwnPropertySymbols;var W=Object.prototype.hasOwnProperty,A=Object.prototype.propertyIsEnumerable;var M=(s,t,a)=>t in s?z(s,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):s[t]=a,k=(s,t)=>{for(var a in t||(t={}))W.call(t,a)&&M(s,a,t[a]);if(N)for(var a of N(t))A.call(t,a)&&M(s,a,t[a]);return s};import{b as P,d as V,j as e,M as C,r as S,A as L}from"./jj85rqzpbnvv3emr.js";import{f as D,i as F,e as H,aI as O,T as Q,fv as G,B,j as K,C as q,ex as R,ey as T,ft as J,ax as U}from"./lef5ym39glv4981l.js";import{u as b,r as X}from"./ih9wj2grf6eudhng.js";import{S as Y}from"./jo2rzlevh0fbjyvo.js";import{kE as Z,dK as $,hA as ee}from"./mclphevd122040jw.js";import{u as se}from"./o00amwudg0s90vfh.js";import{d as te}from"./kl7c6054usfnqmd4.js";import{F as ae}from"./hm94yzqatxa451b5.js";import"./f8qcx5r3ombc6w5p.js";const E=V({downloadFileError:{id:"postSharingModal.downloadFileError",defaultMessage:"Failed to download file. Please try again later."},title:{id:"walnut.title",defaultMessage:"Preview"},tooltip:{id:"walnut.tooltip",defaultMessage:"This is a web preview and may not reflect exact formatting. Download to open in your preferred software for best results."}}),oe=({onClose:s,onPlay:t,extension:a,contentType:o,clientThreadId:d,editHandlers:_})=>{var w;const l=P(),p=D(),j=o==="presentation",{formatMessage:g}=P(),c=g(E.title),y=g(E.tooltip);F();const{focusedWalnutId:n,presentationMap:m}=b(),r=n?m[n]:void 0,f=(w=r==null?void 0:r.fileName)!=null?w:o==="presentation"?"presentation.pptx":"spreadsheet.xlsx",v=!1,u=r==null?void 0:r.fileBlob,i=l.formatMessage(E.downloadFileError),h=se(!1,d,n!=null?n:"",()=>{},()=>{p.danger(i,{toastId:"post_sharing_modal_download_error",loggingTitle:i,loggingDescription:"Error message when a file download fails"})});return e.jsxs("div",{className:H("text-token-text-secondary border-token-border-light relative flex w-full items-center justify-between border-b px-3 py-2",v),children:[e.jsxs("div",{className:"z-10 flex flex-row gap-2",children:[e.jsx(Z,{onClick:s,children:e.jsx(O,{})}),!1]}),e.jsxs("div",{className:"absolute start-1/2 top-1/2 flex -translate-x-1/2 -translate-y-1/2 items-center gap-1",children:[e.jsx(ae,{fileName:c!=null?c:null}),e.jsx("div",{className:"text-token-text-primary flex flex-row items-center truncate text-sm font-medium",children:e.jsx(Q,{label:y,theme:"white",defaultOpen:!0,customBackgroundColorClassName:"bg-[#6B91F1]",labelClassName:"text-white font-light",side:"bottom",disabled:v,children:e.jsxs("div",{className:"flex flex-row items-center",children:[c,e.jsx(G,{className:"ms-1 size-4"})]})})}),a&&e.jsx("div",{className:"text-token-text-tertiary ms-2 text-sm",children:a})]}),e.jsxs("div",{className:"z-10 flex items-center gap-1",children:[!1,e.jsx(B,{color:"ghost",size:"small",onClick:async()=>{if(u)te(u,f);else{const{data:x}=await h.refetch();if(x===void 0||(x==null?void 0:x.status)!=="success"){p.danger(i,{toastId:"post_sharing_modal_download_error",loggingTitle:i,loggingDescription:"Error message when a file download fails"});return}const I=document.createElement("a");I.href=x.download_url,I.click()}},children:e.jsx($,{})}),j&&e.jsx(B,{color:"primary",onClick:t,size:"small",children:e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(ee,{}),e.jsx("span",{className:"hidden sm:block",children:e.jsx(C,{id:"walnut.play",defaultMessage:"Play Slideshow"})})]})})]})]})},ne=R(()=>T(()=>import("./oyw5llz5411yxte4.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11])).then(s=>s.CanvasRenderer)),re=R(()=>T(()=>import("./ou0dbpaenmm0r7gk.js").then(s=>s.s),__vite__mapDeps([11,1,6,2,3,7,4,5,8])).then(s=>s.SpreadsheetRenderer));function le({isOpen:s,onClose:t,clientThreadId:a}){const[o,d]=S.useState(!1),{presentationMap:_,focusedWalnutId:l,setSelectedSlideIdx:p}=b(),j=F(),g=K(j,"3245235608"),[c,y]=S.useState(!1),n=l?_[l]:null,{presentation:m,fileName:r,workbook:f,document:v}=n!=null?n:{};if(!l||!n)return null;const u=m?"presentation":f?"spreadsheet":"none",i=u==="presentation"&&m&&!o,h=u==="spreadsheet"&&f&&!o;return e.jsx(q,{testId:"modal-walnut-content",type:"success",size:"fullscreen",isOpen:s,onClose:t,visuallyHiddenHeader:!0,children:e.jsxs("div",{className:"flex h-full flex-col overflow-hidden",children:[e.jsx(oe,{onClose:t,onPlay:()=>d(!o),title:r,contentType:u,clientThreadId:a,canEdit:!1}),i&&e.jsx(ne,{presentation:m,selectedSlideIdx:n.selectedSlideIdx,setSelectedSlideIdx:w=>p(l,w),isWalnutV2Enabled:g,isEditing:c,setIsEditing:y}),h&&e.jsx(re,{workbook:f,selectedSheetIdx:n.selectedSheetIdx}),!1,o&&e.jsx(Y,{startIndex:0,onExit:t,walnutId:l}),!i&&!h&&!0&&!o&&e.jsx("div",{className:"flex h-full w-full items-center justify-center",children:e.jsx(C,{id:"walnut.noFile",defaultMessage:"No file selected."})})]})})}const ie=({clientThreadId:s})=>{const{isOpen:t,close:a}=b(),o=t?e.jsx(le,{isOpen:t,onClose:a,clientThreadId:s}):null;return e.jsx(L,{children:o},s)},je=s=>{const t=S.useRef(null);return e.jsx(J,{ref:t,onError:(a,o)=>{X(),setTimeout(()=>{var d;(d=t.current)==null||d.resetErrorBoundary()}),U.addError(a,{componentStack:o})},name:"walnut-focused-view",children:e.jsx(ie,k({},s))})};export{je as WalnutFocusedViewManager};
//# sourceMappingURL=b95iof305fyua0cx.js.map
