var w=Object.defineProperty,V=Object.defineProperties;var $=Object.getOwnPropertyDescriptors;var q=Object.getOwnPropertySymbols;var O=Object.prototype.hasOwnProperty,b=Object.prototype.propertyIsEnumerable;var v=(a,e,t)=>e in a?w(a,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):a[e]=t,x=(a,e)=>{for(var t in e||(e={}))O.call(e,t)&&v(a,t,e[t]);if(q)for(var t of q(e))b.call(e,t)&&v(a,t,e[t]);return a},R=(a,e)=>V(a,$(e));import{G as k,c as A,a6 as D,g as F,r as B,f as G,j as o,M,d as I}from"./jj85rqzpbnvv3emr.js";import{B as z,E as K}from"./lef5ym39glv4981l.js";import{C as Q,g as U}from"./eyi9jrf1bwm7dn6f.js";import"./mclphevd122040jw.js";const X=500,H=2,te=k(function(){"use forget";const e=A.c(36),{processorEntity:t,checkoutSessionId:r,planType:c}=D(),i=F();let y;e[0]===Symbol.for("react.memo_cache_sentinel")?(y={firstRequestAt:Date.now(),pollCount:0,finished:!1,redirected:!1},e[0]=y):y=e[0];const[n,N]=B.useState(y);let u;e[1]!==r||e[2]!==t?(u=["checkoutSession",t,r],e[1]=r,e[2]=t,e[3]=u):u=e[3];let f;e[4]!==r||e[5]!==t||e[6]!==n.pollCount?(f=async()=>{const _=await Q.fetchExistingCheckoutSession(t,r),L=_.status==="complete"||_.status==="expired"||n.pollCount>=H;return N(T=>R(x({},T),{pollCount:T.pollCount+1,finished:L})),_},e[4]=r,e[5]=t,e[6]=n.pollCount,e[7]=f):f=e[7];const j=!n.finished;let h;e[8]!==u||e[9]!==f||e[10]!==j?(h={queryKey:u,queryFn:f,refetchInterval:X,enabled:j},e[8]=u,e[9]=f,e[10]=j,e[11]=h):h=e[11];const{data:s}=G(h);let g;e[12]!==(s==null?void 0:s.status)||e[13]!==r||e[14]!==i||e[15]!==c||e[16]!==t||e[17]!==n.finished||e[18]!==n.redirected?(g=()=>{!n.finished||n.redirected||(N(J),(s==null?void 0:s.status)==="complete"?i({pathname:"/payments/success",search:"?stripe_session_id=".concat(r,"&plan_type=").concat(c,"&processor_entity=").concat(t)}):(s==null?void 0:s.status)==="open"&&i({pathname:U(t,r),search:"",hash:""}))},e[12]=s==null?void 0:s.status,e[13]=r,e[14]=i,e[15]=c,e[16]=t,e[17]=n.finished,e[18]=n.redirected,e[19]=g):g=e[19];let C;e[20]!==s||e[21]!==r||e[22]!==i||e[23]!==c||e[24]!==t||e[25]!==n?(C=[n,s,r,t,c,i],e[20]=s,e[21]=r,e[22]=i,e[23]=c,e[24]=t,e[25]=n,e[26]=C):C=e[26],B.useEffect(g,C);const l=(s==null?void 0:s.status)==="expired";let d;e[27]!==l?(d=!l&&o.jsx(K,{className:"icon-xl"}),e[27]=l,e[28]=d):d=e[28];let p,m;e[29]!==l?(p=o.jsx("span",{className:"text-muted-foreground text-center text-sm",children:l?o.jsx(M,x({},E.errorProcessingPayment)):o.jsx(M,x({},E.processingPayment))}),m=l&&o.jsx(z,{color:"primary",as:"link",to:"/#pricing",children:o.jsx(M,x({},E.returnButtonText))}),e[29]=l,e[30]=p,e[31]=m):(p=e[30],m=e[31]);let P;return e[32]!==d||e[33]!==p||e[34]!==m?(P=o.jsx("div",{className:"flex h-screen flex-col p-4",children:o.jsx("div",{className:"flex flex-1 items-center justify-center",children:o.jsxs("div",{className:"flex flex-col items-center gap-3",children:[d,p,m]})})}),e[32]=d,e[33]=p,e[34]=m,e[35]=P):P=e[35],P});function J(a){return R(x({},a),{redirected:!0})}const E=I({processingPayment:{id:"CheckoutVerifyRoute.processingPayment",defaultMessage:"Processing Payment"},errorProcessingPayment:{id:"CheckoutVerifyRoute.errorProcessingPayment",defaultMessage:"There was an error processing your payment"},returnButtonText:{id:"CheckoutVerifyRoute.returnButtonText",defaultMessage:"Return to ChatGPT"}});export{te as default};
//# sourceMappingURL=laeyo1m3z52u0sxl.js.map
