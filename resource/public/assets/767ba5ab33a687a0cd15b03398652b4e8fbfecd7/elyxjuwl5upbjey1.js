import{fG as E,du as g,g0 as R,dY as M,aP as F,ap as y,dN as B,Q as N}from"./j5zd9vs1l0bwsjqa.js";import{E as O,l as A,f as H,r as s,c as Q,j as e}from"./j12so9ru57hpoz1y.js";import{r as _,t as T,a as m,u as D,s as L,C as j,b as $,g as P,P as k,T as q,c as G,d as K,e as V}from"./jn7p98x7qxquz26a.js";import{C as W}from"./epsg05et2lobrl6v.js";import{T as Y,C as z}from"./f25vds35u27mdgai.js";import{C as w,T as J}from"./pcetty3qfpqopskj.js";import{C as U}from"./b0v1yruiy44zd1p9.js";import"./gh4kfg6qlx7b3ikk.js";import"./fmw3vtt8y90emgda.js";import"./cx64odxk6g9mmfxk.js";import"./01yrv2o49ye0ebr7.js";import"./bmq33amvrfzjcyfd.js";import"./msp412gwqdn605it.js";import"./ok8fnoyzbnoyk9qs.js";import"./ng20n9f2et03jm61.js";import"./dyn54m8afmkkz42o.js";import"./ik1mvke1rzg5h1fr.js";import"./gld03raz97um5arz.js";import"./di9gukc1ozd2hjw9.js";import"./mbbi7ghgl3dsk97a.js";import"./doknjlw48az0ww3q.js";import"./j2m3ef69iou998eo.js";import"./egjzck8f21ldiiq8.js";import"./n5601invkykfg1ys.js";import"./owhjnpwqw9ddu7v0.js";import"./d8hi8vzea1zd4sdu.js";import"./hxt8zt4ovcs39phn.js";import"./mx9tryggoikmqll4.js";const Se=()=>(_(),null),Ee=E(function(){const a=O(),[o]=A(),u=H(),p=T(a.conversationId),i=m(o.get("readonly"),!1),c=m(o.get("isFullScreen"),!1),d=m(o.get("header"),!0),l=m(o.get("appPreview"),!1),n=g(()=>R()),C=g(()=>M()),b=m(o.get("hideBottomComposer"),!!i),r=T(a.canmoreId),t=p,f=D();s.useEffect(()=>{L({type:j.Textdoc,textdocId:r})},[r]),$(t,{kind:F.PrimaryAssistant});const h=Q();if(s.useEffect(()=>(y.retainThread(t),()=>{setTimeout(()=>{h.invalidateQueries({queryKey:["conversation",t]})},0),y.releaseThread(t)}),[t,h]),s.useEffect(()=>{r||u("/")},[r,u]),s.useEffect(()=>{P().sendMessage({type:w.Loaded})},[r]),!r||f?.type!==j.Textdoc)return null;const I=()=>{P().sendMessage({type:w.Close})},S=i&&!d;return e.jsxs("div",{className:"h-full w-full overflow-hidden contain-content",children:[e.jsx("meta",{name:"viewport",content:"width=device-width, initial-scale=1, maximum-scale=1"}),e.jsx(k,{clientThreadId:t,children:e.jsx(U,{clientThreadId:t,children:e.jsx(q,{clientThreadId:t,children:l?e.jsx(B,{children:e.jsx(X,{textdocId:f.textdocId})}):S?e.jsxs(e.Fragment,{children:[e.jsx(Y,{clientThreadId:t,disableScroll:!n,textdocId:f.textdocId}),e.jsx(z,{})]}):e.jsx(J,{isEmbedded:!0,hideRunCode:!n,isFullScreen:c,hideHeader:!d,hideBottomComposer:b,isReadonlyFromQueryParam:i,hideRenameButton:C,clientThreadId:t,focusedTextdoc:f,onClose:I},"textdocContent")})})})]})}),X=({textdocId:x})=>{const a=s.useRef(null),o=G(x),[u,p]=s.useState(!1),i=o?.versions??[],c=N(i),d=s.useCallback(K(async l=>{const n=V(l.type,l.content);if(a.current&&(n==="react"||n==="html")){p(!0);const v=a.current.evalAsync({language:n,code:l.content});for await(const C of v)console.debug(C)}p(!1)},100),[]);return s.useEffect(()=>{c&&d(c)},[c,d]),e.jsx(W,{visuallyHidden:!u,ref:a,enableTransition:!0,title:""})};export{Se as clientLoader,Ee as default};
//# sourceMappingURL=elyxjuwl5upbjey1.js.map
