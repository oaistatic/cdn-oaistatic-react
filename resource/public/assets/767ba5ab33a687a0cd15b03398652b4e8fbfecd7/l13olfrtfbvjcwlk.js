import{j as e,M as B,r as o,aa as F}from"./j12so9ru57hpoz1y.js";import{a as I,c_ as O,q as R,c as W,ef as G,aL as P}from"./j5zd9vs1l0bwsjqa.js";import{aN as q,fq as K,fr as V,a4 as X,fs as z,ft as H,fu as J,fv as Q}from"./jn7p98x7qxquz26a.js";import{u as Y,R as Z}from"./nc07k7y06adedb9d.js";import{b as $}from"./ojd4yynl6f6f4h3l.js";import"./b0v1yruiy44zd1p9.js";import"./msp412gwqdn605it.js";import"./ok8fnoyzbnoyk9qs.js";import"./d8hi8vzea1zd4sdu.js";import"./hxt8zt4ovcs39phn.js";import"./owhjnpwqw9ddu7v0.js";import"./i0f6lf35jgfv6z47.js";import"./egjzck8f21ldiiq8.js";import"./n5601invkykfg1ys.js";import"./01yrv2o49ye0ebr7.js";import"./l12f3ah2dx3larti.js";import"./epsg05et2lobrl6v.js";import"./gh4kfg6qlx7b3ikk.js";import"./jgfehaz03xkmntxn.js";import"./ke2u5pwt169srvv9.js";import"./c7zwb9p0mkhdhxup.js";import"./hv2qnh4kmlq1qj5o.js";import"./fqps1a3pxo0q8nxi.js";import"./n0tk3xne532h7ges.js";import"./ik1mvke1rzg5h1fr.js";const ee=({pressed:s,onClick:r})=>{const i=e.jsx("div",{className:"[display:var(--force-hide-label)] ps-1 pe-1 whitespace-nowrap",children:e.jsx(B,{id:"0MS4cd",defaultMessage:"Selection"})});return e.jsxs("div",{className:I("radix-state-open:bg-black/10 inline-flex max-h-9 min-h-9 rounded-full border text-[13px] font-medium",{"text-token-text-secondary":!s,"can-hover:hover:bg-[#BDDCF4] dark:can-hover:hover:bg-[#1A416A] border-transparent bg-[#DAEEFF] text-blue-400 dark:bg-[#2A4A6D] dark:text-[#48AAFF]":s,"border-token-border-default can-hover:hover:bg-token-main-surface-secondary dark:can-hover:hover:bg-gray-700 focus-visible:outline-black dark:focus-visible:outline-white":!s}),children:[e.jsxs("div",{className:"flex h-full min-w-8 cursor-default flex-row items-center justify-center p-2 select-none","aria-pressed":s,children:[e.jsx(q,{className:"h-5 w-5 pe-1"}),i]}),e.jsx("button",{className:"flex h-full min-w-8 flex-row items-center justify-center border-s border-blue-400/10 p-2","aria-pressed":s,onClick:r,children:e.jsx(O,{className:"h-4 w-4"})})]})},te=.0025,Ee=o.forwardRef(function({type:r,placeholder:i,state:t,renderFiles:y,leftSideActions:A,onSubmit:p,inputState:x,composerController:a,clientThreadId:u,gizmoId:f,disableReason:g},E){const{isInpainting:l,onCancelInpaint:U}=K(),{isUnauthenticated:n}=R(),h=V(),b=$(),[v,_]=o.useState(!1);let w=null;const{isLoading:c}=h;c||(w=h.modelId),o.useEffect(()=>{c||X()||a.focus()},[w,a,c]);const S=m=>{se({target:m.target,rootId:"composer-background",additonalInteractiveIds:["reply-regions"]})||a.focus()};o.useEffect(()=>W(document,{keydown:m=>{m.key==="Enter"&&b&&n&&_(!0)}}),[b,n]);const d=o.useMemo(()=>e.jsx(z,{inputState:x,state:t,onSubmit:p,composerController:a,clientThreadId:u,gizmoId:f,disableReason:g}),[x,t,p,a,u,f,g]),T=o.useCallback(()=>n?e.jsx(G,{triggerButton:e.jsx("div",{children:d}),sideOffset:0,alignOffset:0,open:v,onOpenChange:_,children:e.jsx(H,{location:"chatgpt-imagen-composer",statsig_login_event:"chatgpt_imagen_composer_upsell_login_button_clicked",statsig_signup_event:"chatgpt_imagen_composer_upsell_signup_button_clicked"})}):d,[n,v,d]),{whisperControls:C,waveContainerRef:M}=Y({composerController:a,renderInComposer:T,composerType:"imagegen"}),{controlsDisabled:j,waveformData:k,waveWidth:D}=P(a.store),N=e.jsx(Z,{composerController:a,placeholder:i},"userInput"),L=l||j;return e.jsx(J,{id:"composer-background",ref:E,className:I("border-token-border-xlight flex w-full cursor-text flex-col rounded-3xl border-s border-e border-t duration-150 ease-in-out contain-inline-size motion-safe:transition-[color,background-color,border-color,text-decoration-color,fill,stroke,box-shadow,bottom] dark:border-none dark:shadow-none",r!=="temporary"&&"shadow-[0_9px_9px_0px_rgba(0,0,0,0.01),_0_2px_5px_0px_rgba(0,0,0,0.06)] has-focus:shadow-[0_2px_12px_0px_rgba(0,0,0,0.04),0_9px_9px_0px_rgba(0,0,0,0.01),0_2px_5px_0px_rgba(0,0,0,0.06)]",r!=="temporary"&&"bg-token-main-surface-primary dark:bg-[#303030]",r==="temporary"&&"dark bg-[#303030]"),onClick:S,style:{viewTransitionName:"var(--vt-composer)"},children:e.jsx("div",{className:"px-1 py-1",children:e.jsxs(e.Fragment,{children:[y,e.jsx(F,{initial:!1,children:e.jsxs("div",{className:"flex flex-col justify-start",children:[L&&e.jsx("div",{className:"mx-1 flex flex-row pt-1",children:j?k&&e.jsx(Q,{waveform:k,containerWidth:D,scaleFactor:10,initialValue:te}):e.jsx("div",{className:"mx-2 max-h-12 grow overflow-x-auto",children:N})}),e.jsx("div",{className:"flex min-h-[44px] items-center ps-1",ref:M,children:e.jsx("div",{className:"max-w-full min-w-0 flex-1",children:e.jsxs("div",{className:"flex flex-row items-center justify-between gap-x-1.5",children:[e.jsxs("div",{className:"text-token-text-primary me-3 flex shrink gap-x-1.5",id:"imagegen-left-actions",children:[A,l&&e.jsx(ee,{pressed:!0,onClick:()=>U()})]}),!l&&e.jsx("div",{className:"mx-2 max-h-16 grow overflow-x-auto",children:N}),e.jsx("div",{className:"flex shrink gap-x-1.5 justify-self-end pe-2",id:"imagegen-voice-controls",children:C})]})})})]})})]})})})});function se({target:s,rootId:r,additonalInteractiveIds:i}){let t=s;for(;t&&t!=null;){if(t.tagName==="BUTTON"||t.tagName==="INPUT"||t.tagName==="TEXTAREA"||t.isContentEditable||i.includes(t.id))return!0;if(t.id===r)return!1;t=t.parentElement}return!1}export{Ee as ImageGenComposer};
//# sourceMappingURL=l13olfrtfbvjcwlk.js.map
