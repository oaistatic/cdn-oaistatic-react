import{r as p,j as s,L as Oe,o as Y,u as X,f as ce,M as N,d as ye,v as de,ad as We}from"./j12so9ru57hpoz1y.js";import{r as ve,a_ as be,a as W,aU as Se,aO as De,cU as je,P as D,aY as $,B as q,c3 as Ie,L as me,b as ue,aZ as ke,cG as Ue,e_ as Fe,go as Be,eo as He,T as Ve,gH as Ke}from"./j5zd9vs1l0bwsjqa.js";import{E as ae,ca as $e,gC as we,gD as Qe,gE as qe,gF as ze,gG as Ye,gH as Je,V as J,el as Ne,eI as Re,gI as Ze,d3 as Xe,e2 as es,gJ as fe,aj as ss,gK as ts,dI as Q,gL as rs,gM as Z,fL as os,eG as as,eE as is,bC as ls}from"./jn7p98x7qxquz26a.js";import{S as Ge}from"./jue5tlf16awjqha1.js";import{A as ge}from"./ex9799r9kkyop0zg.js";import{G as Ce}from"./owhjnpwqw9ddu7v0.js";import{G as Le,a as Me,c as cs,E as ns,P as ds}from"./j2m3ef69iou998eo.js";import{G as ne}from"./b3uizo711j30otmf.js";import{C as ms}from"./nj8u2ks29f8q72fp.js";function Ee({gizmo:r,children:e,onClick:t,onModalOpen:o,onModalClose:a,selectOnly:l,className:m}){const g=ve(),v=be(g,"1825130190"),[f,x]=p.useState(!1);return l?s.jsx("a",{className:W("gizmo-link cursor-pointer",m),href:"#",onClick:h=>{h.preventDefault(),t?.(h)},children:e}):v?s.jsxs(s.Fragment,{children:[f&&s.jsx(Le,{gizmoId:r.gizmo.id,creatorId:r.gizmo.author.user_id,onClose:()=>{x(!1),a?.()},children:s.jsx(Me,{as:"link",to:ae(g,r)})}),s.jsx("a",{className:W("gizmo-link cursor-pointer",m),href:"#",onClick:h=>{h.preventDefault(),t?.(h),x(!0),o?.()},children:e})]}):s.jsx(Oe,{to:ae(g,r),className:W("gizmo-link",m),target:"_blank",onClick:t,children:e})}function us(r){"use forget";const e=Y.c(27),{placeholder:t,effectiveRole:o,onSelect:a,popoverClassName:l}=r,m=X(),[g,v]=p.useState("ALL"),[f,x]=p.useState(""),[h,S]=p.useState(""),[i,n]=p.useState(null),b=Se()?.isWorkspaceAccount();let w;e[0]===Symbol.for("react.memo_cache_sentinel")?(w="3054422710",e[0]=w):w=e[0];const u=De(w).value,G=b!==void 0&&b&&u;let k,d;e[1]!==f?(k=()=>{const E=setTimeout(()=>{S(f)},250);return()=>{clearTimeout(E)}},d=[f],e[1]=f,e[2]=k,e[3]=d):(k=e[2],d=e[3]),p.useEffect(k,d);const y=ve(),z=ce();let L;e[4]!==a||e[5]!==z||e[6]!==y?(L=E=>{if(a){a(E);return}if(!be(y,"1825130190")){const P=ae(y,E);z(P);return}n(E)},e[4]=a,e[5]=z,e[6]=y,e[7]=L):L=e[7];const U=L;let M;e[8]===Symbol.for("react.memo_cache_sentinel")?(M=s.jsx($e,{className:"text-token-text-tertiary icon-md absolute start-5 top-1/2 z-30 -translate-y-1/2"}),e[8]=M):M=e[8];let _;e[9]!==m||e[10]!==t||e[11]!==l||e[12]!==f?(_=(E,A)=>s.jsxs(ms,{label:t??m.formatMessage(O.discoverySearch),inputClassName:"bg-token-main-surface-primary! py-4 px-3 rounded-xl font-normal text-base! ps-12",popoverClassName:W("-top-3! border-token-border-default! rounded-xl",l??"bg-token-main-surface-primary!"),className:"border-token-border-default! rounded-xl! p-0! ring-0!",name:"search",inputValue:f,onInputChange:x,onTabChange:P=>v(P==="WORKSPACE"?"WORKSPACE":"ALL"),suggestions:E,RenderTab:gs,children:[A,A==null&&s.jsx("div",{className:"w-full py-4",children:s.jsx(hs,{})})]}),e[9]=m,e[10]=t,e[11]=l,e[12]=f,e[13]=_):_=e[13];let F;e[14]!==g||e[15]!==h||e[16]!==o||e[17]!==U||e[18]!==G||e[19]!==_?(F=s.jsx(ps,{activeTab:g,query:h,effectiveRole:o,setPopoverForceOpen:fs,onSelect:U,showWorkspaceResults:G,renderCombobox:_}),e[14]=g,e[15]=h,e[16]=o,e[17]=U,e[18]=G,e[19]=_,e[20]=F):F=e[20];let R;e[21]!==i||e[22]!==y?(R=i&&s.jsx(Le,{gizmoId:i.gizmo.id,creatorId:i.gizmo.author.user_id,onClose:()=>{n(null)},children:s.jsx(Me,{as:"link",to:ae(y,i)})}),e[21]=i,e[22]=y,e[23]=R):R=e[23];let H;return e[24]!==F||e[25]!==R?(H=s.jsxs("div",{className:"relative z-0",children:[M,F,R]}),e[24]=F,e[25]=R,e[26]=H):H=e[26],H}function fs(){}function gs(r){"use forget";const e=Y.c(4),{tab:t}=r,o=we();if(t==="ALL"){let a;return e[0]===Symbol.for("react.memo_cache_sentinel")?(a=s.jsx(N,{...O.discoveryAllResultsHeader}),e[0]=a):a=e[0],a}if(t==="WORKSPACE"){let a;return e[1]!==o?(a=s.jsx(N,{...O.discoveryWorkspaceResultsHeader,values:{workspaceName:o}}),e[1]=o,e[2]=a):a=e[2],a}if(t==="discoverySearchRecentlyUsed"){let a;return e[3]===Symbol.for("react.memo_cache_sentinel")?(a=s.jsx(N,{...O.discoverySearchRecentlyUsed}),e[3]=a):a=e[3],a}return t}function hs(){return s.jsx("div",{className:"flex items-center justify-center py-1",children:s.jsx(je,{})})}function ps(r){"use forget";const e=Y.c(20),{activeTab:t,query:o,effectiveRole:a,setPopoverForceOpen:l,showWorkspaceResults:m,onSelect:g,renderCombobox:v}=r;let f;e[0]===Symbol.for("react.memo_cache_sentinel")?(f=[],e[0]=f):f=e[0],p.useEffect(vs,f);const{data:x,isLoading:h}=Qe(o),{data:S,isLoading:i}=qe(o,m);let n;e[1]===Symbol.for("react.memo_cache_sentinel")?(n={cutId:"recent",limit:3},e[1]=n):n=e[1];const{data:b,isLoading:w}=ze(n),u=x?.items,G=x?.cursor,k=S?.items,d=S?.cursor;let y;e[2]!==b?.pages?(y=b?.pages.flatMap(xs)??[],e[2]=b?.pages,e[3]=y):y=e[3];let z;return e[4]!==t||e[5]!==a||e[6]!==w||e[7]!==h||e[8]!==i||e[9]!==g||e[10]!==o||e[11]!==v||e[12]!==l||e[13]!==m||e[14]!==u||e[15]!==G||e[16]!==k||e[17]!==d||e[18]!==y?(z=s.jsx(bs,{debouncedQuery:o,searchResults:u,isLoadingSearch:h,searchResultsCursor:G,showWorkspaceResults:m,workspaceSearchResults:k,workspaceSearchResultsCursor:d,isLoadingWorkspaceSearch:i,isLoadingRecent:w,recent:y,effectiveRole:a,setPopoverForceOpen:l,onSelect:g,activeTab:t,renderCombobox:v}),e[4]=t,e[5]=a,e[6]=w,e[7]=h,e[8]=i,e[9]=g,e[10]=o,e[11]=v,e[12]=l,e[13]=m,e[14]=u,e[15]=G,e[16]=k,e[17]=d,e[18]=y,e[19]=z):z=e[19],z}function xs(r){return r.list.items.map(ys)}function ys(r){return r.resource}function vs(){D.logEvent("Search Start")}function bs(r){"use forget";const e=Y.c(25),{activeTab:t,debouncedQuery:o,searchResults:a,isLoadingSearch:l,searchResultsCursor:m,showWorkspaceResults:g,workspaceSearchResults:v,workspaceSearchResultsCursor:f,isLoadingWorkspaceSearch:x,recent:h,isLoadingRecent:S,effectiveRole:i,setPopoverForceOpen:n,onSelect:b,renderCombobox:w}=r;let u;e[0]===Symbol.for("react.memo_cache_sentinel")?(u=de(),e[0]=u):u=e[0];const G=p.useRef(u);let k;e[1]===Symbol.for("react.memo_cache_sentinel")?(k=[],e[1]=k):k=e[1],p.useEffect(Ss,k);let d,y;e[2]!==o||e[3]!==l||e[4]!==a?(d=()=>{!l&&a&&(G.current=de(),a.length>0?Promise.all(a.map((U,M)=>{D.logEvent("Search Display Result",{search_id:G.current,gizmo_id:U.gizmo.id,position:M,query:o})})):D.logEvent("Search No Results",{query:o}))},y=[a,l,o],e[2]=o,e[3]=l,e[4]=a,e[5]=d,e[6]=y):(d=e[5],y=e[6]),p.useEffect(d,y);let z;e[7]!==h?(z=h??[],e[7]=h,e[8]=z):z=e[8];let L;return e[9]!==t||e[10]!==o||e[11]!==i||e[12]!==S||e[13]!==l||e[14]!==x||e[15]!==b||e[16]!==w||e[17]!==a||e[18]!==m||e[19]!==n||e[20]!==g||e[21]!==z||e[22]!==v||e[23]!==f?(L=s.jsx(js,{query:o,activeTab:t,searchIdRef:G,searchResults:a,searchResultsCursor:m,isLoadingSearch:l,showWorkspaceResults:g,workspaceSearchResults:v,workspaceSearchResultsCursor:f,isLoadingWorkspaceSearch:x,isLoadingRecent:S,recentSearchResults:z,setPopoverForceOpen:n,effectiveRole:i,onSelect:b,renderCombobox:w}),e[9]=t,e[10]=o,e[11]=i,e[12]=S,e[13]=l,e[14]=x,e[15]=b,e[16]=w,e[17]=a,e[18]=m,e[19]=n,e[20]=g,e[21]=z,e[22]=v,e[23]=f,e[24]=L):L=e[24],L}function Ss(){D.logEvent("Search Start")}function le(r){"use forget";const e=Y.c(6),{children:t,onClick:o,isSelected:a,isClickable:l}=r,m=`text-token-text-tertiary px-3 pb-2 text-xs ${a?"border-b-2 font-bold":"font-semibold"} ${l?"cursor-pointer":""}`;let g;e[0]!==o?(g=()=>{o?.()},e[0]=o,e[1]=g):g=e[1];let v;return e[2]!==t||e[3]!==m||e[4]!==g?(v=s.jsx("div",{className:m,onClick:g,children:t}),e[2]=t,e[3]=m,e[4]=g,e[5]=v):v=e[5],v}function js(r){"use forget";const e=Y.c(74),{query:t,searchIdRef:o,isLoadingRecent:a,searchResults:l,searchResultsCursor:m,isLoadingSearch:g,showWorkspaceResults:v,workspaceSearchResults:f,workspaceSearchResultsCursor:x,isLoadingWorkspaceSearch:h,recentSearchResults:S,setPopoverForceOpen:i,activeTab:n,effectiveRole:b,onSelect:w,renderCombobox:u}=r;let G;e[0]!==l?(G=l===void 0?[]:l,e[0]=l,e[1]=G):G=e[1];const k=G;let d;e[2]!==f?(d=f===void 0?[]:f,e[2]=f,e[3]=d):d=e[3];const y=d,z=Ye(),[L,U]=p.useState(!1),M=Je(t,L,n==="WORKSPACE",n==="WORKSPACE"?x:m);let _;e[4]!==M.data?.pages?(_=M.data?.pages.flatMap(zs)??[],e[4]=M.data?.pages,e[5]=_):_=e[5];let F;e[6]!==M||e[7]!==_?(F={...M,data:_},e[6]=M,e[7]=_,e[8]=F):F=e[8];const{data:R,hasNextPage:H,fetchNextPage:E,isFetchingNextPage:A,isError:P}=F,[ee,Ae]=p.useState(R.length),Te=p.useRef(null);let se,te;e[9]!==ee||e[10]!==R.length?(se=()=>{R.length>ee&&(Ae(R.length),Te.current?.scrollIntoView({behavior:"smooth",block:"nearest"}))},te=[R.length,ee],e[9]=ee,e[10]=R.length,e[11]=se,e[12]=te):(se=e[11],te=e[12]),p.useEffect(se,te);let re;e[13]!==b||e[14]!==z||e[15]!==w||e[16]!==t||e[17]!==o?(re=(c,j)=>{const C=c.gizmo.vanity_metrics?.num_conversations_str,B=c.gizmo.tags?.includes(J.WorkspaceDisabled)&&b!==$.OWNER;return{id:c.gizmo.id,className:W("group flex items-center gap-3 rounded-lg px-3 py-2 hover:bg-gray-50 dark:hover:bg-white/10",B&&"opacity-50 hover:opacity-100"),focusedClassName:"bg-gray-50 dark:bg-white/10",onClick:()=>{w?w(c):D.logEvent("Store Click Gizmo",{search_id:o.current,gizmo_id:c.gizmo.id,position:j,query:t,section:"search"})},children:s.jsx(Rs,{resource:c,grayedOut:B??!1,isScreenSm:z,numConvos:C})}},e[13]=b,e[14]=z,e[15]=w,e[16]=t,e[17]=o,e[18]=re):re=e[18];const V=re;if(t===""&&S&&S.length>0){let c;return e[19]!==V||e[20]!==S||e[21]!==u?(c=u({discoverySearchRecentlyUsed:S.map(V)},null),e[19]=V,e[20]=S,e[21]=u,e[22]=c):c=e[22],c}if(t===""&&a){let c;return e[23]!==u?(c=u([],null),e[23]=u,e[24]=c):c=e[24],c}if(t===""){let c;if(e[25]!==u){let j;e[27]===Symbol.for("react.memo_cache_sentinel")?(j=s.jsx(le,{onClick:void 0,isSelected:void 0,isClickable:!1,children:s.jsx(N,{...O.discoverySearchRecentlyUsedEmpty})}),e[27]=j):j=e[27],c=u([],j),e[25]=u,e[26]=c}else c=e[26];return c}if(t!==""&&!g&&n==="ALL"&&(k==null||k.length===0)){let c;if(e[28]!==u){let j;e[30]===Symbol.for("react.memo_cache_sentinel")?(j=s.jsx("div",{className:"text-token-text-tertiary mt-4 px-3 pb-2 text-xs font-semibold",children:s.jsx(N,{...O.discoveryNoResultsSearch})}),e[30]=j):j=e[30],c=u([],j),e[28]=u,e[29]=c}else c=e[29];return c}if(t!==""&&!h&&n==="WORKSPACE"&&(y==null||y.length===0)){let c;if(e[31]!==u){let j;e[33]===Symbol.for("react.memo_cache_sentinel")?(j=s.jsx("div",{className:"text-token-text-tertiary mt-4 px-3 pb-2 text-xs font-semibold",children:s.jsx(N,{...O.discoveryNoResultsSearch})}),e[33]=j):j=e[33],c=u([],j),e[31]=u,e[32]=c}else c=e[32];return c}if(v){if(t!==""&&!g&&!h&&(!k||k.length===0)&&(!y||y.length===0)){let c;if(e[34]!==u){let j;e[36]===Symbol.for("react.memo_cache_sentinel")?(j=s.jsx("div",{className:"mx-2",children:s.jsx(le,{onClick:void 0,isSelected:void 0,isClickable:!1,children:s.jsx(N,{...O.discoveryNoResultsSearch})})}),e[36]=j):j=e[36],c=u([],j),e[34]=u,e[35]=c}else c=e[35];return c}}else{if(g){let c;return e[37]!==u?(c=u([],null),e[37]=u,e[38]=c):c=e[38],c}if(t!==""&&!g&&(!k||k.length===0)){let c;if(e[39]!==u){let j;e[41]===Symbol.for("react.memo_cache_sentinel")?(j=s.jsx("div",{className:"mx-2",children:s.jsx(le,{onClick:void 0,isSelected:void 0,isClickable:!1,children:s.jsx(N,{...O.discoveryNoResultsSearch})})}),e[41]=j):j=e[41],c=u([],j),e[39]=u,e[40]=c}else c=e[40];return c}}let oe;if(e[42]!==E||e[43]!==H||e[44]!==P||e[45]!==A||e[46]!==L||e[47]!==R||e[48]!==V||e[49]!==u||e[50]!==k||e[51]!==m||e[52]!==i||e[53]!==y||e[54]!==x){let c=[];if(k){const C=k.map(V);c=[...c,...C]}if(k&&R){const C=R.map(V);c=[...c,...C]}if((!L&&R.length===0||H||A||P)&&m!=null){let C;e[56]!==E||e[57]!==i?(C=()=>{U(!0),E(),i?.(!0)},e[56]=E,e[57]=i,e[58]=C):C=e[58];const B=P?"danger-outline":"secondary";let T;e[59]!==P?(T=P?s.jsx(N,{...O.discoveryLoadMoreError}):s.jsx(N,{...O.discoveryLoadMore}),e[59]=P,e[60]=T):T=e[60];let K;e[61]!==A||e[62]!==B||e[63]!==T?(K=s.jsx(q,{color:B,onClick:ws,loading:A,fullWidth:!0,className:"mt-2 md:mt-3",children:T}),e[61]=A,e[62]=B,e[63]=T,e[64]=K):K=e[64];const ie={id:"all-load-more-button",className:"",onClick:C,children:K};c=[...c,ie]}const j={ALL:c};if(y){const C=y.map(V);j.WORKSPACE=C}if(y&&R){const C=R.map(V);j.WORKSPACE=[...j.WORKSPACE,...C]}if((!L&&R.length===0||H||A||P)&&x!=null){let C;e[65]!==E||e[66]!==i?(C=()=>{U(!0),E(),i?.(!0)},e[65]=E,e[66]=i,e[67]=C):C=e[67];const B=P?"danger-outline":"secondary";let T;e[68]!==P?(T=P?s.jsx(N,{...O.discoveryLoadMoreError}):s.jsx(N,{...O.discoveryLoadMore}),e[68]=P,e[69]=T):T=e[69];let K;e[70]!==A||e[71]!==B||e[72]!==T?(K=s.jsx(q,{color:B,onClick:ks,fullWidth:!0,className:"mt-2 md:mt-3",loading:A,children:T}),e[70]=A,e[71]=B,e[72]=T,e[73]=K):K=e[73];const ie={id:"workspace-load-more-button",className:"",onClick:C,children:K};j.WORKSPACE=[...j.WORKSPACE,ie]}oe=u(j,null),e[42]=E,e[43]=H,e[44]=P,e[45]=A,e[46]=L,e[47]=R,e[48]=V,e[49]=u,e[50]=k,e[51]=m,e[52]=i,e[53]=y,e[54]=x,e[55]=oe}else oe=e[55];return oe}function ks(){}function ws(){}function zs(r){return r.items.map(Ns)}function Ns(r){return r}function Rs(r){"use forget";const e=Y.c(25),{resource:t,grayedOut:o,isScreenSm:a,numConvos:l}=r,m=!!t.gizmo.tags?.includes(J.FirstParty),g=t.gizmo.display.profile_picture_url??void 0,v=o&&"grayscale group-hover:grayscale-0";let f;e[0]!==v?(f=W("h-8 w-8 shrink-0",v),e[0]=v,e[1]=f):f=e[1];let x;e[2]!==m||e[3]!==g||e[4]!==f?(x=s.jsx(Ce,{isFirstParty:m,src:g,className:f}),e[2]=m,e[3]=g,e[4]=f,e[5]=x):x=e[5];let h;e[6]!==t.gizmo.display.name?(h=s.jsx("div",{className:"flex flex-row items-end space-x-2",children:s.jsx("span",{className:"shrink-0 truncate text-sm font-semibold",children:t.gizmo.display.name})}),e[6]=t.gizmo.display.name,e[7]=h):h=e[7];let S;e[8]!==a||e[9]!==t.gizmo.display.description?(S=a&&s.jsx("span",{className:"text-token-text-tertiary max-w-md truncate text-xs",children:t.gizmo.display.description}),e[8]=a,e[9]=t.gizmo.display.description,e[10]=S):S=e[10];let i;e[11]!==t?(i=s.jsx("div",{className:"-mt-1",children:s.jsx(Ne,{gizmo:t,className:"text-token-text-tertiary truncate text-xs",hideLink:!0})}),e[11]=t,e[12]=i):i=e[12];let n;e[13]!==l?(n=l&&s.jsxs("div",{className:"text-token-text-tertiary flex items-center gap-1 font-semibold",style:{marginTop:"-2px"},children:[s.jsx(Re,{className:"icon-xs"}),s.jsx("span",{className:"line-clamp-1 text-xs",children:l})]}),e[13]=l,e[14]=n):n=e[14];let b;e[15]!==i||e[16]!==n?(b=s.jsxs("div",{className:"flex items-center gap-2",children:[i,n]}),e[15]=i,e[16]=n,e[17]=b):b=e[17];let w;e[18]!==b||e[19]!==h||e[20]!==S?(w=s.jsxs("div",{className:"flex flex-col space-y-1 truncate",children:[h,S,b]}),e[18]=b,e[19]=h,e[20]=S,e[21]=w):w=e[21];let u;return e[22]!==w||e[23]!==x?(u=s.jsxs(s.Fragment,{children:[x,w]}),e[22]=w,e[23]=x,e[24]=u):u=e[24],u}const O=ye({discoveryAllResultsHeader:{id:"gizmo.discovery.AllResultsHeader",defaultMessage:"All"},discoveryWorkspaceResultsHeader:{id:"gizmo.discovery.workspaceResultsHeaderName",defaultMessage:"{workspaceName} workspace"},discoveryNoResultsSearch:{id:"gizmo.discovery.search.empty",defaultMessage:"No results found"},discoverySearch:{id:"gizmo.discovery.search",defaultMessage:"Search GPTs"},discoverySearchRecentlyUsed:{id:"gizmo.discovery.search.recentlyUsed",defaultMessage:"Recently Used"},discoverySearchRecentlyUsedEmpty:{id:"gizmo.discovery.search.recentlyUsedEmpty",defaultMessage:"No recently used GPTs"},discoveryLoadMore:{id:"gizmo.discovery.loadMore",defaultMessage:"See more"},discoveryLoadMoreError:{id:"gizmo.discovery.loadMoreError",defaultMessage:"Error loading more"}}),Pe=Ie.div`grid grid-cols-1 gap-x-1.5 gap-y-1 md:gap-x-2 md:gap-y-1.5 lg:grid-cols-2 lg:gap-x-3 lg:gap-y-2.5`,he="gpt_store";function Gs(r,e){e.scrollLeft>r.offsetLeft?e.scrollBy({left:r.offsetLeft-e.scrollLeft-20,behavior:"smooth"}):e.scrollLeft+e.clientWidth<r.offsetLeft+r.clientWidth&&e.scrollBy({left:r.offsetLeft+r.clientWidth-e.clientWidth-e.scrollLeft+20,behavior:"smooth"})}function Qs({anon:r}){const[e,t]=p.useState(()=>me.getItem(ue.GizmoDiscoveryLocale)),o=v=>{t(v),me.setItem(ue.GizmoDiscoveryLocale,v)},a=ke(),[l,m]=p.useState(!1),g=a?.isOwnerOfAccount()&&!l?$.OWNER:$.STANDARD;return s.jsx(Cs,{anon:r,currAccount:a,requestedLocale:e,effectiveRole:g,setPretendStandardUser:m,setLocale:o})}function Cs({anon:r,currAccount:e,requestedLocale:t,effectiveRole:o,setPretendStandardUser:a,setLocale:l}){const[m,g]=p.useState(void 0),v=!!r||e?.isPersonalAccount()&&!0,{data:f,isLoading:x,isError:h}=Ze(t,v);p.useEffect(()=>{f&&g({locale:f.locale,workspace_filtered:f.workspace_filtered,cuts:f.cuts.map(i=>({info:i.info,list:{items:i.list.items.map(n=>n.resource),cursor:i.list.cursor}}))})},[f]);const S=(...i)=>{const n=ze(...i);return{...n,data:n.data?.pages.flatMap(b=>b.list.items.map(w=>w.resource))??[]}};return s.jsx(Ls,{anon:r,discoveryLanding:m,isLoading:x,isError:h,effectiveRole:o,setPretendStandardUser:a,requestedLocale:t,setLocale:l,useFetchMoreQuery:S})}function Ls({anon:r,discoveryLanding:e,isLoading:t,isError:o,effectiveRole:a,setPretendStandardUser:l,requestedLocale:m,setLocale:g,useFetchMoreQuery:v}){const f=ke(),x=e?.locale??m,h=p.useRef({}),[S,i]=p.useState({}),n=p.useMemo(()=>Xe(Ue(e?.cuts.map(d=>({id:d.info.id,name:d.info.display_group}))),"name"),[e]),b=p.useRef(null),w=n.find(d=>S[d.id])??n[0];p.useEffect(()=>{const d=h.current,y=new IntersectionObserver(z=>{z.forEach(L=>{for(const U of n){const M=d[U.id];M!=null&&L.target===M&&i(_=>({..._,[U.id]:L.isIntersecting}))}})},{root:null,rootMargin:"-96px",threshold:.1});return Object.values(d).forEach(z=>{z!=null&&y.observe(z)}),()=>{Object.values(d).forEach(z=>{z!=null&&y.unobserve(z)})}},[h,n]);const u=p.useRef(null),G=s.jsx("div",{className:"flex h-full w-full items-center justify-center",children:o?s.jsx(es,{type:"danger",children:s.jsx(N,{...I.discoveryError})}):s.jsx(je,{})}),k=s.jsxs("div",{className:"screen-arch:w-full mx-auto max-w-3xl overflow-x-clip px-4",children:[s.jsx(Ms,{}),s.jsxs("div",{className:"bg-token-bg-primary sticky top-14 z-30 -mt-2 mb-12 flex flex-col gap-6 pt-2 [@media(min-width:1560px)]:top-0",children:[!r&&s.jsx(us,{}),n.length>0&&s.jsx(Es,{displayGroups:n,currentDisplayGroup:w,scrollToDisplayGroup:d=>{(h.current[d.id]??b.current).scrollIntoView({behavior:"smooth",block:"start"})}})]}),s.jsx("div",{ref:b,className:"scroll-mt-28"}),e?.cuts.map(d=>d.info.display_type==="featured"?s.jsx(Ts,{info:d.info,items:d.list.items,ref:y=>{y!=null&&(h.current[d.info.id]=y)},effectiveRole:a},d.info.id):s.jsx(Ws,{info:d.info,items:d.list.items,cursor:d.list.cursor??void 0,ref:y=>{y!=null&&(h.current[d.info.id]=y)},anon:r,effectiveRole:a,useFetchMoreQuery:v},d.info.id))??[]]});return t||o?s.jsxs(s.Fragment,{children:[r?s.jsx(ge,{redirectUrl:fe(),className:"bg-token-main-surface-primary sticky top-0 z-30 h-14"}):s.jsx(pe,{locale:x,setLocale:g,currAccount:f}),G]}):s.jsxs("div",{ref:u,className:"h-full overflow-y-auto",children:[r?s.jsx(ge,{redirectUrl:fe(),className:"bg-token-main-surface-primary sticky top-0 z-30 h-14"}):s.jsxs(s.Fragment,{children:[f?.isWorkspaceAccount()&&s.jsx(_s,{role:a,onPretendStandardUser:d=>{l(d)}}),s.jsx(pe,{locale:x,setLocale:g,currAccount:f})]}),k,e?.workspace_filtered&&!f?.isOwnerOfAccount()&&s.jsx(Ps,{})]})}function Ms(){return s.jsxs("div",{className:"mb-6",children:[s.jsx("div",{className:"my-2 text-center text-3xl font-bold md:my-4 md:text-5xl",children:s.jsx(N,{...I.discoverySplashHeader})}),s.jsx("div",{className:"text-token-text-secondary mx-auto w-full text-center text-sm md:text-lg md:leading-tight",children:s.jsx(N,{...I.discoverySplashDescription})})]})}function Es({displayGroups:r,currentDisplayGroup:e,scrollToDisplayGroup:t}){const o=p.useRef(null),a=X(),l=(...i)=>a.formatMessage(...i),m=p.useRef({}),[g,v]=p.useState(!1);p.useEffect(()=>{if(g||e==null)return;const n=m.current[e.id];if(n==null)return;const b=o.current;b!=null&&Gs(n,b)},[e,g]);const[f,x]=p.useState(!1),[h,S]=p.useState(!1);return p.useEffect(()=>{const i=o.current,n=()=>{i!=null&&(x(i.scrollLeft>0),S(i.scrollLeft+i.clientWidth<i.scrollWidth))};return i?.addEventListener("scroll",n),window.addEventListener("resize",n),n(),()=>{i?.removeEventListener("scroll",n),window.removeEventListener("resize",n)}},[o]),s.jsxs("div",{className:"bg-token-main-surface-primary sticky top-14 z-10 -ms-4 w-screen py-2 text-sm md:ms-0 md:w-full md:pb-0",children:[f&&s.jsx("div",{className:"absolute start-0 top-2 hidden h-full items-end bg-linear-to-r from-white from-50% to-transparent pe-8 md:block dark:from-gray-800",children:s.jsx("button",{className:"mt-2 rounded-full bg-gray-100 p-1 hover:bg-gray-200 dark:bg-gray-700 dark:hover:bg-white/20",onClick:()=>{o.current!=null&&o.current.scrollBy({left:-400,behavior:"smooth"})},children:s.jsx(Fe,{className:"icon-sm"})})}),s.jsx("div",{className:"no-scrollbar flex scroll-m-5 gap-1.5 overflow-x-auto md:overflow-hidden",ref:o,children:r.map(i=>s.jsx("div",{className:W("md:text-token-text-primary cursor-pointer scroll-mx-5 rounded-3xl px-3 py-2 whitespace-nowrap select-none first:ms-4 last:me-4 md:bg-transparent md:px-2 md:first:ms-0 md:last:me-0",i.id===e?.id?"border-token-text-primary text-token-main-surface-primary bg-black md:rounded-none md:border-b-2 dark:bg-gray-100 dark:md:bg-transparent":"bg-token-main-surface-secondary hover:text-token-text-primary md:text-token-text-tertiary hover:bg-gray-100 md:rounded-lg md:hover:bg-gray-50 dark:hover:bg-white/20 dark:md:bg-transparent dark:md:hover:bg-gray-700"),onClick:()=>{v(!0),t(i),setTimeout(()=>{v(!1)},1e3),D.logEvent("Store Click Category",{category:i.id})},ref:n=>{n!=null&&(m.current[i.id]=n)},children:l({id:`gizmo.categoryName.${i.name}`,defaultMessage:i.name,description:"store category"})},i.id))}),h&&s.jsx("div",{className:"absolute end-0 top-2 hidden h-full bg-linear-to-l from-white from-50% to-transparent ps-8 md:block dark:from-gray-800",children:s.jsx("button",{className:"mt-2 rounded-full bg-gray-100 p-1 hover:bg-gray-200 dark:bg-gray-700 dark:hover:bg-white/10",onClick:()=>{o.current!=null&&o.current.scrollBy({left:400,behavior:"smooth"})},children:s.jsx(ss,{className:"icon-sm"})})})]})}function Ps(){const r=X(),e=we(),t=ts();return s.jsxs("div",{className:W("bg-token-main-surface-secondary text-token-text-secondary screen-arch:static fixed bottom-0 flex w-full items-center justify-center gap-2 p-3 text-sm",!t&&"md:w-[calc(100%-16rem)]"),children:[s.jsx(Ge,{className:"icon-sm"}),r.formatMessage(I.discoveryThirdPartyGPTsDisabled,{workspaceName:e})]})}function _s({role:r,onPretendStandardUser:e}){const t=X();return Be()?s.jsxs("div",{className:"h-52px flex w-full items-center justify-center gap-2 bg-gray-100 p-3 text-sm dark:bg-gray-700",children:[s.jsx(Ge,{className:"icon-sm"}),s.jsx(N,{id:"gizmo.discovery.browsingAsOwner",defaultMessage:"You're viewing as a <b>workspace member</b>",values:{b:a=>s.jsxs(Q.Root,{defaultValue:r,onValueChange:l=>{e(l===$.STANDARD)},children:[s.jsxs(Q.Trigger,{className:"-mx-2 -my-2 bg-transparent px-1 font-semibold",children:[s.jsx(He,{disabled:r!==$.OWNER,label:t.formatMessage({id:"gizmo.discovery.browsingAsOwnerTooltip",defaultMessage:"Owners can access all third-party GPTs, even if they haven’t been approved."}),side:"bottom",children:s.jsx(Q.Value,{})}),s.jsx(Q.Icon,{})]}),s.jsx(Q.Portal,{children:s.jsxs(Q.Content,{children:[s.jsx(Q.Item,{value:$.OWNER,children:s.jsx(N,{id:"gizmo.discovery.browsingOwnerRole",defaultMessage:"workspace owner"})}),s.jsx(Q.Item,{value:$.STANDARD,children:s.jsx(N,{id:"gizmo.discovery.browsingMemberRole",defaultMessage:"workspace member"})})]})})]})}})]}):null}function pe({locale:r,setLocale:e,currAccount:t}){const o=is(),a=ce(),l=X(),m=t?.hasPlusFeatures();return s.jsx(s.Fragment,{children:s.jsxs(rs,{className:"z-30 mx-auto flex w-full justify-center gap-2 pt-[1.125rem] whitespace-nowrap",children:[s.jsxs("div",{className:"w-[calc((100%-768px)/2)] min-w-fit items-center",children:[s.jsx(ns,{}),s.jsx(Ve,{side:"right",label:r===Z.GLOBAL?l.formatMessage(I.discoveryGlobalViewOn):l.formatMessage(I.discoveryGlobalViewOff),children:s.jsx(q,{color:"ghost",onClick:()=>{r===Z.GLOBAL?e(Z.ENGLISH):e(Z.GLOBAL)},children:s.jsx(os,{className:W("icon-sm",r===Z.GLOBAL?"text-token-text-primary":"text-token-text-tertiary")})})})]}),s.jsx("div",{className:"grow"}),s.jsxs("div",{className:"flex w-[calc((100%-768px)/2)] min-w-fit justify-end gap-2",children:[m&&s.jsx(q,{color:"ghost",onClick:()=>{a("/gpts/mine"),D.logEvent("Store My Gizmos")},children:s.jsx(N,{...I.discoveryMyGPTs})}),s.jsx(As,{canCreateGPTs:m,createUrl:o})]}),s.jsx(ds,{})]})})}const As=({canCreateGPTs:r,createUrl:e})=>{const[t,o]=p.useState(!1),a=p.useRef(void 0),l=Ke(),g=Se()?.planType??"unknown",v="create_gpt",f=()=>{r||(D.logPopoverHover({location:he,type:v,plan_type:g}),clearTimeout(a.current),o(!0))},x=()=>{r||(a.current=l(function(){o(!1)},300))},h=ce(),S=()=>{D.logUpsellGetPlusButtonClicked({location:he,type:v,plan_type:g}),ls(h,"Gizmo Discovery page upsell")},i=r?()=>D.logEvent("Store Create Gizmo"):n=>n.preventDefault();return s.jsxs("div",{onMouseEnter:f,onMouseLeave:x,className:"screen-arch:flex screen-arch:items-center relative",children:[s.jsx(q,{color:"primary",disabled:!r,visuallyDisabled:!r,onClick:i,as:"link",to:e,icon:as,"data-testid":"create-gpt-discovery-button",children:s.jsx(N,{...I.discoveryCreateGPT})}),!r&&t&&s.jsxs("div",{className:"border-token-border-default bg-token-main-surface-primary screen-arch:top-12 absolute end-0 z-10 mt-2 w-64 rounded-lg border p-3 text-sm shadow-lg",children:[s.jsx("p",{className:"from-token-text-tertiary mb-2 text-start font-normal break-words whitespace-normal",children:s.jsx(N,{...I.createGPTUpsell})}),s.jsx(q,{color:"secondary",onClick:S,size:"small",children:s.jsx(N,{...I.createGPTUpsellButtonLabel})})]})]})},Ts=p.forwardRef(function({info:e,items:t,effectiveRole:o},a){return s.jsx(_e,{title:e.title,description:e.description,ref:a,children:s.jsx(Pe,{children:t.map((l,m)=>s.jsx(Os,{resource:l,effectiveRole:o},`${m}-${l.gizmo.id}`))})})});function Os({resource:r,effectiveRole:e}){const t=r.gizmo.vanity_metrics?.num_conversations_str,o=r.gizmo.tags?.includes(J.WorkspaceDisabled)&&e!==$.OWNER;return s.jsx(ne,{children:s.jsxs(Ee,{gizmo:r,className:W("group flex h-24 items-center gap-5 overflow-hidden rounded-xl bg-gray-50 px-7 py-8 hover:bg-gray-100 md:h-32 lg:h-36 dark:bg-gray-700 dark:hover:bg-white/10",o&&"opacity-50 hover:opacity-100"),onClick:()=>{D.logEvent("Store Click Gizmo",{gizmo_id:r.gizmo.id,section:"featured"})},children:[s.jsx(Ce,{isFirstParty:!!r.gizmo.tags?.includes(J.FirstParty),src:r.gizmo.display.profile_picture_url??void 0,className:W("h-16 w-16 shrink-0 md:h-24 md:w-24",o&&"grayscale group-hover:grayscale-0")}),s.jsxs("div",{className:"flex flex-col",children:[s.jsx("div",{className:"line-clamp-2 font-semibold md:text-lg",children:r.gizmo.display.name}),s.jsx("span",{className:"line-clamp-2 text-xs md:line-clamp-3",children:r.gizmo.display.description}),s.jsxs("div",{className:"text-token-text-tertiary mt-1 line-clamp-1 flex justify-start gap-1 text-xs",children:[s.jsx(Ne,{gizmo:r,className:"text-xs",hideLink:!0}),t&&s.jsxs(s.Fragment,{children:[s.jsx("span",{className:"text-[10px]",children:"•"}),s.jsx(Re,{className:"mt-0.5 h-3 w-3"}),t]})]})]})]})})}const Ws=p.forwardRef(function({info:e,items:t,cursor:o,anon:a,effectiveRole:l,useFetchMoreQuery:m},g){const[v,f]=p.useState(t.length===0),{data:x,hasNextPage:h,fetchNextPage:S,isFetchingNextPage:i,isError:n}=m({cutId:e.id,locale:e.locale,limit:6,cursor:o,enabled:v});p.useEffect(()=>{t.length===0&&S()},[S,t.length]);const[b,w]=p.useState(x.length),u=p.useRef(null),G=We(.1);return p.useEffect(()=>{x.length>b&&(w(x.length),u.current?.scrollIntoView({behavior:"smooth",block:"nearest"}))},[x.length,b]),s.jsxs(_e,{title:e.title,description:e.description,ref:g,children:[s.jsxs(Pe,{children:[t.map((k,d)=>s.jsx(xe,{resource:k,rank:d+1,cutId:e.id,effectiveRole:l},d)),x.map((k,d)=>s.jsx(xe,{resource:k,rank:t.length+d+1,cutId:e.id,delay:G(d-b,x.length-b),effectiveRole:l},d))]}),(!v||h||i||n)&&!a&&o!=null&&s.jsx(q,{color:n?"danger-outline":"secondary",onClick:()=>{f(!0),D.logEvent("Store Load More",{section:e.id}),S()},fullWidth:!0,className:"mt-2 md:mt-3",loading:i,children:n?s.jsx(N,{...I.discoveryLoadMoreError}):s.jsx(N,{...I.discoveryLoadMore})}),s.jsx("div",{ref:u})]})});function xe({resource:r,rank:e,cutId:t,delay:o,effectiveRole:a}){const l=r.gizmo.tags?.includes(J.WorkspaceDisabled)&&a!==$.OWNER,m=r.gizmo.tags?.includes(J.FirstParty);return s.jsx(ne,{delay:o,children:s.jsxs(Ee,{gizmo:r,className:W("group hover:bg-token-main-surface-secondary flex h-[104px] items-center gap-2.5 overflow-hidden rounded-xl px-1 py-4 md:px-3 md:py-4 lg:px-3",l&&"opacity-50 hover:opacity-100"),onClick:()=>{D.logEvent("Store Click Gizmo",{gizmo_id:r.gizmo.id,position:e,section:m?"first_party":t})},children:[s.jsx("div",{className:"text-md flex w-8 shrink-0 items-center justify-center font-semibold",children:e}),s.jsx(cs,{resource:r,grayedOut:l})]},r.gizmo.id)})}const _e=p.forwardRef(function({title:e,description:t,className:o,children:a},l){return s.jsxs("div",{ref:l,className:"h-fit scroll-mt-28 last:min-h-[calc(100vh-8rem)]",children:[s.jsxs(ne,{animateTap:!1,children:[s.jsx("div",{className:"text-xl font-semibold md:text-2xl",children:e}),t&&s.jsx("div",{className:"text-token-text-tertiary text-sm md:text-base",children:t})]}),s.jsx("div",{className:W("mt-4 mb-10",o),children:a})]})}),I=ye({discoveryAllResultsHeader:{id:"gizmo.discovery.AllResultsHeader",defaultMessage:"All"},discoveryWorkspaceResultsHeader:{id:"gizmo.discovery.workspaceResultsHeaderName",defaultMessage:"{workspaceName} workspace"},discoveryEmpty:{id:"gizmo.discovery.empty",defaultMessage:"Nothing to discover"},discoveryNoResultsSearch:{id:"gizmo.discovery.search.empty",defaultMessage:"No results found"},discoveryError:{id:"gizmo.discovery.error",defaultMessage:"Error loading GPTs"},discoverySearch:{id:"gizmo.discovery.search",defaultMessage:"Search GPTs"},discoverySearchSmall:{id:"gizmo.discovery.searchSmall",defaultMessage:"Search"},discoverySearchRecentlyUsed:{id:"gizmo.discovery.search.recentlyUsed",defaultMessage:"Recently Used"},discoverySearchRecentlyUsedEmpty:{id:"gizmo.discovery.search.recentlyUsedEmpty",defaultMessage:"No recently used GPTs"},discoverySearchResults:{id:"gizmo.discovery.search.results",defaultMessage:"Search Results"},discoveryLoadMore:{id:"gizmo.discovery.loadMore",defaultMessage:"See more"},discoveryLoadMoreError:{id:"gizmo.discovery.loadMoreError",defaultMessage:"Error loading more"},discoveryMyGPTs:{id:"gizmo.discovery.myGPTs",defaultMessage:"My GPTs"},discoveryCreateGPT:{id:"gizmo.discovery.createGPT",defaultMessage:"Create"},discoveryThirdPartyGPTsDisabled:{id:"gizmo.discovery.thirdPartyGPTsDisabled",defaultMessage:"Your admin has blocked GPTs created outside {workspaceName}."},discoverySplashHeader:{id:"gizmo.discovery.splashHeader",defaultMessage:"GPTs"},discoverySplashDescription:{id:"gizmo.discovery.splashDescription",defaultMessage:"Discover and create custom versions of ChatGPT that combine instructions, extra knowledge, and any combination of skills."},discoveryGlobalViewOn:{id:"gizmo.discovery.globalViewOn",defaultMessage:"Global View On"},discoveryGlobalViewOff:{id:"gizmo.discovery.globalViewOff",defaultMessage:"Global View Off"},createdAgoLabel:{id:"gizmo.discovery.createdAgoLabel",defaultMessage:"Created {createdAgo}"},createGPTUpsell:{id:"gizmo.discovery.createGPTUpsell",defaultMessage:"Get ChatGPT Plus to create and share your own GPTs"},createGPTUpsellButtonLabel:{id:"gizmo.discovery.createGPTUpsellButtonLabel",defaultMessage:"Get Plus"}});export{us as G,Qs as a};
//# sourceMappingURL=4b26elgpu3szmqym.js.map
