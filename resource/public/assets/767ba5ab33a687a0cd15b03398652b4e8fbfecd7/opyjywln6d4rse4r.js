import{u as T,r as y,j as e,M as r,f as $}from"./j12so9ru57hpoz1y.js";import{bO as O,bP as K,bQ as U,bR as n,bS as ee,bT as q,bU as te,bV as se,bJ as L,bW as M,bX as D,bY as P,bZ as ae,b_ as I,b$ as ne}from"./jn7p98x7qxquz26a.js";import{W as le}from"./ghwruzqbv6p8z2hl.js";import{c3 as oe,u as z,bi as X,bc as Y,aZ as E,P as w,aw as Z,C as _,eL as S,c5 as ce,a as ie,ao as G,D as re}from"./j5zd9vs1l0bwsjqa.js";import{c as me}from"./iej0cupg2dqkmejt.js";var H=(s=>(s.FLEXIBLE="month",s.ANNUAL="year",s))(H||{});const V=me(H),J=({isOpen:s,onClose:a,onSubmit:g})=>{const d=E(),[c,i]=y.useState(""),l=y.useMemo(()=>d?.subscriptionAnalyticsParams,[d]);y.useEffect(()=>{w.logEvent("Account Pay: Create Workspace Modal Show",l),Z.logEvent("chatgpt_select_team_plan_modal_show",null,{})},[l]);const t=k=>{w.logEvent("Account Pay: Create Workspace Modal Clicked",{...l,...k})},m=()=>{w.logEvent("Account Pay: Create Workspace Modal Dismiss",l)},o=T();return e.jsxs(_,{testId:"modal-workspace-name-collection",type:"success",isOpen:s,onClose:()=>{a(),m()},className:"max-w-lg",showCloseButton:!0,title:e.jsx(r,{...n.createWorkspace}),children:[e.jsx("div",{className:"bg-token-main-surface-primary flex flex-col justify-center pb-2",children:e.jsx(le,{workspaceName:c,onChangeWorkspaceName:i})}),e.jsxs("div",{className:"mt-4 flex flex-row justify-end",children:[e.jsx(S,{title:o.formatMessage(n.cancel),onClick:()=>{a(),t({buttonType:"Cancel"})}}),e.jsx(S,{title:o.formatMessage(n.selectBillingOption),onClick:()=>{g(c),t({buttonType:"Billing Options"})},disabled:c==="",color:"primary",className:"ms-4"})]})]})},F=oe.p`text-base font-medium mb-3`,Q=({isOpen:s,onClose:a,onSubmit:g,minimumSeats:d,billingDetails:c,isDirectFlow:i=!1})=>{const l=E(),[t,m]=y.useState("month"),[o,k]=y.useState(!1),j=T(),[f,v]=y.useState(Math.max(ee,d)),p=Math.max(d,P),{flexibleBillingPlan:N,annualBillingPlan:u}=q(c.currency),h=te(isNaN(f)?0:f,p,se),b=y.useMemo(()=>l?.subscriptionAnalyticsParams,[l]);y.useEffect(()=>{w.logEvent("Account Pay: Select Team Plan Modal Show",b)},[b]);const A=x=>{switch(x){case"month":w.logEvent("Account Pay: Team Plan Selection Clicked",{...b,buttonType:"Continue",numberOfSeats:f,planLength:I.MONTHLY});break;case"year":w.logEvent("Account Pay: Select Team Plan Modal Clicked",{...b,buttonType:"Continue",numberOfSeats:f,planLength:I.ANNUAL});break}},B=(x,W)=>{w.logEvent("Account Pay: Select Team Plan Modal Clicked",{...b,buttonType:"Continue",numberOfSeats:W,planLength:x}),Z.logEvent("chatgpt_select_team_plan_modal_continue_to_billing_clicked",x,{number_of_seats:W.toString()})},C=()=>{w.logEvent("Account Pay: Select Team Plan Modal Dismiss",b)};return i?e.jsx(_,{testId:"modal-workspace-purchase",type:"success",isOpen:s,onClose:()=>{a(),C()},size:"fullscreen",noPadding:!0,removePopoverStyling:!0,showCloseButton:!0,children:e.jsxs("div",{className:"grid grid-flow-row grid-cols-1 md:h-full md:grid-cols-2",children:[e.jsx("div",{className:"flex-column col-span-1 flex justify-center p-5 md:grid-cols-2",children:e.jsxs("div",{className:"flex w-full max-w-[400px] flex-col items-center",children:[e.jsx(ce,{className:"mt-8 mb-6 h-8 w-8 md:fixed md:start-4 md:top-4 md:mt-0 md:h-6 md:w-6"}),e.jsx("div",{className:"mb-8 text-3xl font-medium md:mt-[120px]",children:e.jsx(r,{id:"selectTeamPlanModal.title",defaultMessage:"Pick your plan"})}),e.jsxs(L,{className:"col-span-3 mb-6 grid w-full gap-4 md:col-span-2 md:grid-cols-2",defaultValue:t,onValueChange:x=>{V(x)&&(m(x),A(x))},children:[e.jsx(M,{billingType:"year",...u,selectedValue:t,hideDetails:!0}),e.jsx(M,{billingType:"month",...N,selectedValue:t,hideDetails:!0})]}),e.jsx(D,{numSeats:f,minSeats:p,setNumSeats:v}),e.jsx("div",{className:"text-token-text-secondary self-start text-xs",children:j.formatMessage({id:"selectTeamPlanModal.seatsDescription",defaultMessage:"Add more seats at any time. Minimum of {minSeats} seats."},{minSeats:P})})]})}),e.jsx("div",{className:"col-span-3 flex h-full flex-col items-center overflow-hidden p-6 md:col-span-1 md:shadow-lg",children:e.jsxs("div",{className:"flex w-full max-w-[400px] flex-col md:mt-[120px]",children:[e.jsx(F,{className:"mb-8 text-xl font-medium",children:e.jsx(r,{...n.summaryTitle})}),e.jsx(R,{numSeats:h,selectedPlan:t,billingDetails:c,totalLabel:n.allPlansTodayTotal,billDate:e.jsx(r,{...n.today})}),e.jsx(S,{title:j.formatMessage(n.continueToBillingButton),onClick:()=>{k(!0),g(t,h),B(t,h)},disabled:!1,loading:o,color:"green",className:"w-full rounded-xl"}),e.jsx(S,{title:j.formatMessage(n.cancel),onClick:()=>{a(),C()},color:"ghost",className:"mt-4 w-full rounded-xl"})]})})]})}):e.jsx(_,{testId:"modal-select-team-plan",type:"success",isOpen:s,onClose:()=>{a(),C()},size:"custom",noPadding:!0,removePopoverStyling:!0,className:"max-w-4xl",showCloseButton:!0,title:j.formatMessage(n.selectTeamPlanModalTitle),children:e.jsxs("div",{className:"grid h-full grid-flow-row grid-cols-3",children:[e.jsxs("div",{className:"flex-column col-span-3 p-5 md:col-span-2 md:grid-cols-2",children:[e.jsx(D,{numSeats:f,minSeats:p,setNumSeats:v}),e.jsxs(L,{className:"col-span-3 mt-5 grid gap-4 md:col-span-2 md:grid-cols-2",defaultValue:t,onValueChange:x=>{V(x)&&(m(x),A(x))},children:[e.jsx(M,{billingType:"year",...u,selectedValue:t}),e.jsx(M,{billingType:"month",...N,selectedValue:t})]})]}),e.jsxs("div",{className:"border-token-main-surface-tertiary bg-token-main-surface-secondary col-span-3 flex h-full flex-col overflow-hidden border-s p-6 md:col-span-1",children:[e.jsx(F,{children:e.jsx(r,{...n.summaryTitle})}),e.jsx(R,{numSeats:h,selectedPlan:t,billingDetails:c,totalLabel:n.allPlansTodayTotal,billDate:e.jsx(r,{...n.today})}),e.jsx(S,{title:j.formatMessage(n.continueToBillingButton),onClick:()=>{k(!0),g(t,h),B(t,h)},disabled:!1,loading:o,color:"primary",className:"w-full rounded-xl"})]})]})})},R=({numSeats:s,selectedPlan:a,billingDetails:g,totalLabel:d,billDate:c})=>{const i=T(),{flexibleBillingPlan:l,annualBillingPlan:t}=q(g.currency),m=a==="month"?l:t,o=ne[a];return e.jsxs("div",{className:"flex grow flex-col text-sm",children:[e.jsxs("div",{className:"text-token-text-secondary flex w-full justify-between text-sm",children:[e.jsx("div",{className:"flex",children:e.jsx(r,{...o.name})}),e.jsx("div",{className:"flex",children:e.jsx(r,{...n.allPlansPreDiscountTotal,values:{currencySign:i.formatMessage(m.currencySign),preDiscountTotalAmount:((s||0)*(a==="year"?t.monthlyCost*12:l.monthlyCost)).toLocaleString()}})})]}),e.jsxs("div",{className:"text-token-text-tertiary flex w-full justify-between text-xs",children:[e.jsx("div",{className:"flex",children:e.jsx(r,{...o.breakdown,values:{numSeats:s}})}),e.jsx("div",{className:"flex",children:e.jsx(r,{...n.breakdownAmount,values:{currencySign:i.formatMessage(m.currencySign),amount:m.monthlyCost}})})]}),e.jsxs("div",{className:"text-token-text-secondary mt-3 flex w-full justify-between text-sm",children:[e.jsx("div",{className:"flex",children:e.jsx(r,{...n.planDiscountLabel})}),e.jsx("div",{className:ie("flex",a==="year"&&t.discountedMonthlyCost<t.monthlyCost&&"font-medium text-[#10A37F]"),children:e.jsx(r,{...o.discountAmount,values:{currencySign:i.formatMessage(l.currencySign),discountAmount:((s||0)*(a==="year"?(t.monthlyCost-t.discountedMonthlyCost)*12:l.monthlyCost-l.discountedMonthlyCost)).toLocaleString()}})})]}),o.discountDescription&&t.discountedMonthlyCost<t.monthlyCost&&a==="year"&&e.jsx("div",{className:"text-token-text-tertiary text-xs",children:e.jsx(r,{...o.discountDescription,values:{discountPercentage:Math.floor((1-t.discountedMonthlyCost/t.monthlyCost)*100)}})}),e.jsx("hr",{className:"border-token-border-default my-3"}),e.jsxs("div",{className:"flex w-full justify-between text-base font-medium",children:[e.jsx("div",{className:"flex",children:e.jsx(r,{...d})}),e.jsx("div",{className:"flex",children:e.jsx(r,{...o.total,values:{currencyCode:i.formatMessage(m.currencyCode),currencySign:i.formatMessage(m.currencySign),totalAmount:((s||0)*m.unitCost).toLocaleString()}})})]}),e.jsx("div",{className:"text-token-text-tertiary mb-8 text-xs",children:e.jsx(r,{...o.billed,values:{billDate:c}})})]})};function pe(){const s=E(),a=$(),{initialBillingDetails:g}=ae(s,!0),d=T(),c=O(),i=U(d,void 0,c),{config:l}=X("3217984440"),t=l.get("enabled",!1),[m,o]=y.useState(t?i:""),k=Y(),j=z(),f=async(p,N)=>{try{const u=await G.getCheckoutLink(k,"Teams",{plan_name:"chatgptteamplan",team_plan_data:{workspace_name:i,price_interval:p,seat_quantity:N},billing_details:g});window.location.href=u.url}catch(u){re.addError(u),j.warning(d.formatMessage(n.paymentErrorWarning),{hasCloseButton:!0})}},v=()=>{a("/")};return m===""?e.jsx(J,{isOpen:!0,onClose:v,onSubmit:p=>o(p)}):e.jsx(Q,{isOpen:!0,onClose:v,onSubmit:(p,N)=>f(p,N),isDirectFlow:!0,minimumSeats:P,billingDetails:g})}function he({isOpen:s,onClose:a,minimumSeats:g,billingDetails:d,existingAccount:c=void 0}){const i=T(),l=z(),t=O(),m=c?K(i,c):"",o=U(i,c,t),{config:k}=X("3217984440"),j=k.get("enabled",!1),[f,v]=y.useState(j?o:m),p=Y(),N=async(u,h)=>{try{const b=await G.getCheckoutLink(p,"Teams",{plan_name:"chatgptteamplan",team_plan_data:{workspace_name:f,price_interval:u,seat_quantity:h,existing_workspace_id:c?.id},billing_details:d});window.location.href=b.url}catch{l.warning(i.formatMessage(n.paymentErrorWarning),{hasCloseButton:!0})}};return f===""?e.jsx(J,{isOpen:s,onClose:a,onSubmit:u=>{v(u)}}):e.jsx(Q,{isOpen:s,onClose:a,onSubmit:(u,h)=>N(u,h),minimumSeats:g,billingDetails:d})}export{R as B,pe as T,he as a};
//# sourceMappingURL=opyjywln6d4rse4r.js.map
