const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/j7c76ht6p24qd1gq.js","assets/j12so9ru57hpoz1y.js","assets/jn7p98x7qxquz26a.js","assets/j5zd9vs1l0bwsjqa.js","assets/root-eh80jqkj.css","assets/conversation-small-cmjjxogj.css","assets/nc07k7y06adedb9d.js","assets/b0v1yruiy44zd1p9.js","assets/msp412gwqdn605it.js","assets/ok8fnoyzbnoyk9qs.js","assets/d8hi8vzea1zd4sdu.js","assets/hxt8zt4ovcs39phn.js","assets/owhjnpwqw9ddu7v0.js","assets/i0f6lf35jgfv6z47.js","assets/egjzck8f21ldiiq8.js","assets/n5601invkykfg1ys.js","assets/01yrv2o49ye0ebr7.js","assets/b4wy8ndq94672kqa.js","assets/nj8u2ks29f8q72fp.js","assets/iwv1c9ejw1yung77.js","assets/du5vwlzyapcrudys.js","assets/m89x2zftpo6hrypr.js","assets/captzhlge9ntm5x9.js","assets/dqbjefrvqt13s2jj.js","assets/maecgyd65cpdm1y9.js","assets/d3y72ugnrmac5z1v.js","assets/e9lafxuzyeh4418f.js","assets/dyn54m8afmkkz42o.js"])))=>i.map(i=>d[i]);
import{a as b,cy as q,cz as V,gL as It,c3 as te,P as p,C as Pe,cU as ee,fI as At,ds as Gt,r as se,B as L,bc as xe,c2 as U,cG as Ee,cu as Tt,ef as ae,aO as D,bP as E,aZ as Fe,go as zt,Y as De,q as K,cW as l,ct as Pt,c_ as Et,v as Ft,u as Oe,dg as Dt,R as ge,aw as R,e1 as ne,aT as pe,eR as Ot,eQ as Bt,S as Wt,gB as Lt,T as B,bO as Be,dv as We,d as Ut,G as Rt,aI as O,A as Ht,cX as qt,aU as Vt,e2 as Kt,at as Ce,W as we,al as $t,aq as Le}from"./j5zd9vs1l0bwsjqa.js";import{j as e,r as z,u as M,M as u,b as fe,d as oe,a9 as Yt,L as Jt,f as W,c as Ue}from"./j12so9ru57hpoz1y.js";import{V as Re,el as me,eI as Xt,y as He,R as je,iV as Zt,i0 as Q,cF as Qt,iW as es,E as ts,er as ve,e6 as be,d3 as ss,bj as qe,iX as Ve,iY as as,iZ as Ke,c1 as $e,O as y,U as g,i_ as Ye,i$ as ns,j0 as os,j1 as is,j2 as rs,eB as ls,j3 as cs,j4 as ds,j5 as us,bn as Ne,eu as Je,bs as Xe,h4 as he,bM as ms,dK as Ze,br as ie,eJ as hs,j6 as xs,j7 as gs,aP as Qe,eA as ps,o as fs,j8 as js,j9 as vs,aR as bs,ax as Ss,b8 as ys,ja as _e,c6 as ce,jb as Ie,jc as Ms,ep as ks,jd as Cs,Q as ws,eh as Ns,je as _s,q as et,bO as re,jf as Se,bP as tt,dk as Is,bY as Ae,gv as st,jg as ye,jh as at,ji as nt,jj as ot,c9 as As,jk as Gs,jl as it,jm as rt,jn as lt,jo as ct,jp as dt,L as ut,jq as mt,jr as ht,gC as Ts,js as zs,bC as xt,eG as Ps,jt as Es,ju as Fs,jv as Ds,jw as Os,jx as Bs,d8 as Ws,jy as Ls,jz as H,cT as Us,hi as Rs,jA as Hs,jB as qs,jC as Vs,H as gt,gK as pt,jD as Ks,jE as $s,jF as ft,jG as Ys,jH as jt,jI as Js,jJ as Xs,jK as Zs,jL as Qs,jM as Ge,jN as ea,jO as ta,i2 as Te,jP as ze,jQ as sa,jR as aa,jS as na,dt as oa,jT as ia}from"./jn7p98x7qxquz26a.js";import{G as ra}from"./egjzck8f21ldiiq8.js";import{G as vt}from"./owhjnpwqw9ddu7v0.js";import{u as la}from"./d8hi8vzea1zd4sdu.js";import{g as ca}from"./hxt8zt4ovcs39phn.js";import{u as Me}from"./b0v1yruiy44zd1p9.js";function da({resource:t,grayedOut:s,className:a}){const n=t.gizmo.vanity_metrics?.num_conversations_str;return e.jsxs("div",{className:b("flex w-full grow items-center gap-4 overflow-hidden",a),children:[e.jsx(vt,{isFirstParty:!!t.gizmo.tags?.includes(Re.FirstParty),src:t.gizmo.display.profile_picture_url??void 0,className:b("h-12 w-12 shrink-0",s&&"grayscale group-hover:grayscale-0")}),e.jsxs("div",{className:"overflow-hidden break-words text-ellipsis",children:[e.jsx("span",{className:"line-clamp-2 text-sm leading-tight font-semibold",children:t.gizmo.display.name}),e.jsx("span",{className:"line-clamp-3 text-xs",children:t.gizmo.display.description}),e.jsxs("div",{className:"text-token-text-tertiary mt-1 flex items-center gap-1 pe-1 text-xs text-ellipsis whitespace-nowrap",children:[e.jsx(me,{gizmo:t,className:"text-xs",hideLink:!0}),n&&e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"text-[8px]",children:"â€¢"}),e.jsx(Xt,{className:"h-3 w-3"}),n]})]})]})]})}const ua=q(()=>V(()=>import("./j7c76ht6p24qd1gq.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21])).then(t=>t.SnorlaxSplashScreen)),pn=({clientThreadId:t,currentModelId:s,onRequestCompletion:a,gizmoId:n})=>{const{data:o}=He(n),i=je(n),r=It();return o==null?null:i?e.jsx(ua,{clientThreadId:t,gizmoId:n,currentModelId:s,onRequestCompletion:a}):e.jsx(bt,{gizmo:o,showStarterPrompts:!0,disableStarterPrompts:r})};function bt({gizmo:t,hideOwner:s=!1,children:a,className:n,avatarClassName:o,showStarterPrompts:i=!1,disableStarterPrompts:r=!1}){return t==null?null:e.jsx(e.Fragment,{children:e.jsxs("div",{className:b("text-token-text-primary flex h-full flex-col items-center justify-center","screen-arch:min-h-[calc(100dvh-var(--thread-leading-height)-var(--thread-trailing-height)-12px)]",n),children:[e.jsx(ma,{gizmo:t,avatarClassName:o}),e.jsx(xa,{gizmo:t,hideOwner:s,showStarterPrompts:i,disableStarterPrompts:r}),a]})})}function ma({gizmo:t,avatarClassName:s}){const a=!!(t!=null&&Zt(t)&&t?.gizmo.tags?.includes(Re.FirstParty));return e.jsx("div",{className:"relative",children:e.jsx(vt,{isFirstParty:a||!t,src:t!=null&&Q(t)?t.profilePictureUrl:t?.gizmo.display.profile_picture_url,className:b("mb-3 h-12 w-12",s)})})}function ha({gizmo:t,disabled:s}){const a=ca(t),n=la(),o=Qt();if(a==null||a.length===0)return null;const i=a.slice(0,o?2:4);return e.jsx(pa,{starterPrompts:i,onSelectStarterPrompt:n,disabled:s})}function xa({gizmo:t,hideOwner:s,showStarterPrompts:a,disableStarterPrompts:n}){const o=t!=null&&Q(t)?t.name:t?.gizmo.display.name,i=t!=null&&Q(t)?t.description:t?.gizmo.display.description;return e.jsxs("div",{className:"flex flex-col items-center gap-2",children:[e.jsx("div",{className:"text-center text-2xl font-semibold",children:o}),!s&&e.jsx("div",{className:"text-token-text-tertiary flex items-center gap-1",children:e.jsx(e.Fragment,{children:t&&Q(t)?e.jsx(me,{gizmo:t}):e.jsx(me,{gizmo:t,socials:t.gizmo.author.display_socials})})}),i&&e.jsx("div",{className:"text-token-text-primary max-w-md text-center text-sm font-normal",children:i}),a&&e.jsx(ha,{gizmo:t,disabled:n})]})}const ga=/\s/;function pa({starterPrompts:t,onSelectStarterPrompt:s,disabled:a,cssMobileDisplayLimit:n,marginOverride:o}){let i=t.map((r,c)=>{let d=r.oneliner??r.title;d===""&&(d=r.body);const m=ga.test(d);return e.jsxs("button",{className:b(n!==void 0&&c>=n&&"max-sm:hidden","border-token-border-default shadow-xxs enabled:hover:bg-token-main-surface-secondary relative flex w-40 flex-col gap-2 rounded-2xl border px-3 pt-3 pb-4 text-start align-top text-[15px] transition disabled:cursor-not-allowed"),disabled:a,onClick:h=>s(h,r,t,c),children:[e.jsx(es,{category:r.category}),e.jsx("div",{className:b("line-clamp-3 max-w-full text-balance text-gray-600 dark:text-gray-500",m?"break-word":"break-all"),children:d})]},r.id??c)});if(i.length>2){const r=Math.floor(i.length/2);i=[i.slice(0,r),i.slice(r)].map((c,d)=>e.jsx("div",{className:"flex max-w-3xl flex-wrap items-stretch justify-center gap-4",children:c},d))}return e.jsx("div",{className:b("mx-3 flex max-w-3xl flex-wrap items-stretch justify-center gap-4",o??"mt-12"),children:i})}const fa=q(()=>V(()=>import("./captzhlge9ntm5x9.js"),__vite__mapDeps([22,1,3,4,2,5])).then(t=>t.GizmoKeepInSidebarMenuItem)),ja=4,le=te.div`font-bold mt-6`,va=t=>fe({queryFn:async()=>be.getAbout(t),queryKey:["gizmo","about",{gizmoId:t}]}),ba=t=>fe({queryFn:async()=>be.getCreatorSlice({creatorId:t}),queryKey:["gizmo","creator",{creatorId:t}],enabled:t!=null}),Sa=t=>{switch(t.type){case E.BROWSER:return{title:_.browsing};case E.PYTHON:return{title:_.dataAnalysis};case E.DALLE:return{title:_.dalle};case E.IMAGE_GEN:return{title:_.imageGen};case E.MEMORY:return{title:_.memory,description:_.memoryDescription};case E.JIT_PLUGIN:return{title:_.actions,description:_.actionsDescription};default:return null}},ya=({tools:t})=>{const s=xe(),a=s?.includes(U.SearchTool)&&!s?.includes(U.SearchToolHoldout),n=ss(t??[],i=>i.type);var o=Ee(n.map(Sa).filter(i=>i!=null)??[]);return o.length===0?null:(a&&(o=o.map(i=>i.title===_.browsing?{title:_.search}:i)),e.jsxs("div",{className:"flex flex-col",children:[e.jsx(le,{className:"mb-2",children:e.jsx(u,{id:"gizmo.about.capabilitiesHeader",defaultMessage:"Capabilities"})}),o.map(i=>e.jsxs("div",{className:"flex flex-row items-start gap-2 py-1 text-sm",children:[e.jsx(Tt,{className:"icon-sm mt-0.5 text-green-600"}),e.jsxs("div",{children:[e.jsx(u,{...i.title}),i.description!=null&&e.jsx("div",{className:"text-token-text-tertiary text-xs",children:e.jsx(u,{...i.description})})]})]},i.title.id))]}))},J=te.div`flex flex-col justify-center items-center gap-2 border-s border-token-border-heavy first:border-0 w-48 mt-4 px-2`,X=te.div`flex flex-row items-center gap-1.5 pt-1 text-xl font-semibold text-center leading-none`,Z=te.div`text-xs text-token-text-tertiary`,Ma=({gizmoResource:t})=>e.jsxs(ae,{contentAlign:"end",sideOffset:4,triggerButton:e.jsx(L,{color:"ghost",icon:qe}),children:[e.jsx(fa,{gizmoResource:t,location:"about_modal"}),e.jsx(Ve,{gizmoResource:t})]}),ka=({aboutBlock:t})=>{switch(t.type){case"generic_title_subtitle":return e.jsxs(J,{children:[e.jsx(X,{children:t.title}),e.jsx(Z,{children:t.subtitle})]});case"rating":return e.jsxs(J,{children:[e.jsxs(X,{children:[e.jsx(Ke,{className:"icon-sm"}),t.avg]}),e.jsx(Z,{children:t.count_str})]});case"category":return t.category_ranking!=null?e.jsxs(J,{children:[e.jsx(X,{children:e.jsx(u,{id:"gizmo.about.trendingRank",defaultMessage:"#{rank}",values:{rank:t.category_ranking}})}),e.jsx(Z,{children:e.jsx(u,{id:"gizmo.about.inCategory",defaultMessage:"in {category} {locale}",values:{category:t.category_str,locale:t.category_locale_str??""}})})]}):e.jsxs(J,{children:[e.jsx(X,{children:t.category_str}),e.jsx(Z,{children:e.jsx(u,{id:"gizmo.about.category",defaultMessage:"Category"})})]})}},Ca=({blocks:t})=>e.jsx("div",{className:"flex justify-center",children:t.map(s=>e.jsx(ka,{aboutBlock:s},s.type))}),wa=({href:t,onClick:s,children:a})=>e.jsx(Yt.div,{whileTap:{scale:.98},className:"flex",children:e.jsxs(Jt,{to:t,reloadDocument:!0,onClick:s,className:b("group border-token-border-medium bg-token-main-surface-primary hover:bg-token-main-surface-secondary relative ms-2 h-14 min-w-full grow rounded-xl border px-4 focus:outline-hidden"),children:[e.jsx("div",{className:"flex h-full items-center",children:e.jsx("div",{className:"line-clamp-2 text-sm break-all",children:a})}),e.jsx("div",{className:"border-token-border-medium bg-token-main-surface-primary group-hover:bg-token-main-surface-secondary absolute -start-2 -bottom-px h-3 w-4 border-b",children:e.jsx("div",{className:"border-token-border-medium bg-token-main-surface-primary h-3 w-2 rounded-ee-full border-e border-b"})}),e.jsx("div",{className:"absolute end-2 top-0 bottom-0 hidden items-center group-hover:flex",children:e.jsx("div",{className:"bg-token-main-surface-primary flex h-8 w-8 items-center justify-center rounded-lg",children:e.jsx(ve,{className:"icon-md text-token-text-primary"})})})]})}),Na=({gizmo:t,onClose:s})=>{const a=D("1825130190").value,n=t.gizmo.display.prompt_starters?.slice(0,ja);return n==null||n.length===0||!a?null:e.jsxs("div",{className:"flex flex-col",children:[e.jsx(le,{children:e.jsx(u,{id:"gizmo.about.conversationStartersHeader",defaultMessage:"Conversation Starters"})}),e.jsx("div",{className:"mt-4 grid grid-cols-2 gap-x-1.5 gap-y-2",children:n.map((o,i)=>e.jsx(_a,{gizmo:t,prompt:o,onClick:s},i))})]})};function _a({gizmo:t,prompt:s,onClick:a}){const n=se(),o=as(n,t,s);return e.jsx(wa,{href:o?.toString()??"#",onClick:a,children:s})}const Ia=({reviewStats:t})=>D("1825130190").value?e.jsxs("div",{className:"flex flex-col",children:[e.jsx("div",{className:"mb-2",children:e.jsx(le,{children:e.jsx(u,{id:"gizmo.about.ratingsHeader",defaultMessage:"Ratings"})})}),t!=null?[5,4,3,2,1].map(a=>e.jsxs("div",{className:"flex flex-row items-center gap-2 py-1 text-xl font-semibold",children:[e.jsxs("div",{className:"icon-lg relative",children:[e.jsx(Ke,{className:"icon-lg text-green-500"}),e.jsx("div",{className:"absolute inset-0 flex items-center justify-center text-[11px] text-white",children:a})]}),e.jsx("div",{className:"h-2.5 grow overflow-hidden rounded-full bg-gray-100 dark:bg-gray-700",children:e.jsx("div",{className:"h-full bg-green-500",style:{width:`${(t?.by_rating[a-1]??0)*100}%`}})})]},a)):e.jsx("div",{className:"text-token-text-tertiary text-sm",children:e.jsx(u,{id:"gizmo.about.ratings.notEnoughRatings",defaultMessage:"Not enough ratings yet"})})]}):null,Aa=({gizmoId:t,creatorId:s})=>{const a=$e(y.GPTDetails),n=()=>g.closeModal(y.GPTDetails);return a?e.jsx(Ga,{gizmoId:t,creatorId:s,onClose:n}):null},Ga=({gizmoId:t,creatorId:s,onClose:a,children:n})=>{const o=He(t),i=va(t),r=ba(s);return z.useEffect(()=>{p.logEvent("Detail Show Modal",{gizmo_id:t})},[t]),e.jsx(Pe,{testId:"modal-gizmo-about",isOpen:!0,onClose:a,type:"success",hideSeparator:!0,showCloseButton:!0,noPadding:!0,className:"flex h-[calc(100vh-25rem)] min-h-[40vh] max-w-xl flex-col",children:e.jsx(Ta,{aboutQuery:i,gizmoQuery:o,creatorSliceQuery:r,onClose:a,children:n})})},Ta=({aboutQuery:t,gizmoQuery:s,creatorSliceQuery:a,children:n,onClose:o})=>{const i=M();if(t.isLoading||s.isLoading||a.isLoading)return e.jsx("div",{className:"flex h-40 items-center justify-center pb-10",children:e.jsx(ee,{})});const r=t.data?.gizmo,c=a?.data,d=s?.data;if(!r||t.error||s.error||a.error||t.data==null||s.data==null||a.data==null||!d){const m=At(t.error??s.error??a.error)??i.formatMessage({id:"I3v3Oj",defaultMessage:"An error occurred loading this GPT."});return e.jsx("div",{className:"relative flex flex-col gap-2 overflow-hidden px-2 py-4",children:e.jsx("div",{className:"flex flex-col p-4 text-red-500",children:m})})}return e.jsx("div",{className:"flex h-full px-2 py-4",children:e.jsxs("div",{className:"relative flex grow flex-col gap-4 overflow-y-auto px-8 pt-16 pb-20",children:[e.jsx("div",{className:"absolute top-0",children:e.jsxs("div",{className:"from-token-main-surface-primary fixed start-4 end-4 z-10 flex items-center justify-end bg-linear-to-b to-transparent pb-2",children:[d&&e.jsx(Ma,{gizmoResource:d}),e.jsx(Gt,{onClick:o})]})}),e.jsx("div",{className:"absolute bottom-[64px]",children:e.jsx("div",{className:"from-token-main-surface-primary fixed start-4 end-4 z-10 flex min-h-[64px] items-end bg-linear-to-t to-transparent px-2",children:n})}),e.jsx(bt,{gizmo:d,className:"h-fit!",avatarClassName:"h-20! w-20!"}),e.jsx(Ca,{blocks:t.data.about_blocks}),e.jsx(Na,{gizmo:d,onClose:o}),e.jsx(ya,{tools:d.tools}),e.jsx(Ia,{reviewStats:t.data.review_stats}),c&&e.jsx(za,{gizmos:c.items})]})})};function za({gizmos:t}){const s=se();return t.length===0?null:e.jsxs("div",{className:"flex flex-col",children:[e.jsx("div",{className:"mb-2",children:e.jsx(le,{children:e.jsx(u,{id:"gizmo.about.moreByHeader",defaultMessage:"More by {creatorName}",values:{creatorName:t[0].gizmo.author.display_name}})})}),e.jsx("div",{className:b("no-scrollbar group flex min-h-[104px] items-center space-x-2 overflow-x-auto overflow-y-hidden"),children:t?.map(a=>e.jsx("a",{onClick:()=>{p.logEvent("Detail Click Gizmo",{gizmo_id:a.gizmo.id})},href:ts(s,a),className:"bg-token-main-surface-secondary h-fit min-w-fit rounded-xl px-1 py-4 md:px-3 md:py-4 lg:px-3",children:e.jsx(da,{resource:a})},a.gizmo.id))})]})}const fn=t=>e.jsx("div",{className:"flex grow flex-col items-center",children:e.jsxs(L,{color:"primary",className:"h-12 w-full",icon:ve,...t,children:[e.jsx(u,{id:"gizmo.about.startChat",defaultMessage:"Start Chat"}),t.children]})}),_=oe({browsing:{id:"gizmo.about.tools.browsing",defaultMessage:"Browsing"},search:{id:"gizmo.about.tools.search",defaultMessage:"Web Search"},dataAnalysis:{id:"gizmo.about.tools.dataAnalysis",defaultMessage:"Code Interpreter & Data Analysis"},dalle:{id:"gizmo.about.tools.dalle",defaultMessage:"DALLÂ·E Images"},imageGen:{id:"gizmo.about.tools.imageGen",defaultMessage:"4o Image Generation"},memory:{id:"gizmo.about.tools.memory",defaultMessage:"Memory"},actions:{id:"gizmo.about.tools.actions",defaultMessage:"Actions"},actionsDescription:{id:"gizmo.about.tools.actionsDescription",defaultMessage:"Retrieves or takes actions outside of ChatGPT"},memoryDescription:{id:"gizmo.about.tools.memoryDescription",defaultMessage:"Learns from previous chats to improve future conversations"}}),Pa=q(()=>V(()=>import("./captzhlge9ntm5x9.js"),__vite__mapDeps([22,1,3,4,2,5])).then(t=>t.GizmoKeepInSidebarMenuItem));function Ea({children:t,clientThreadId:s,gizmoResource:a,showReportModal:n,inMobileHeader:o}){return e.jsxs(e.Fragment,{children:[e.jsx(ae,{contentAlign:o?"center":"start",size:"small",triggerButton:t,children:e.jsx(St,{clientThreadId:s,gizmoResource:a,showReportModal:n})}),e.jsx(Fa,{gizmoResource:a})]})}function Fa({gizmoResource:t}){const s=$e(y.GPTRemoveThirdParty),a=Fe(),n=Ye(t);return e.jsxs(e.Fragment,{children:[e.jsx(Aa,{gizmoId:t.gizmo.id,creatorId:t.gizmo.author.user_id}),e.jsx(ns,{gizmo:t}),n&&e.jsx(os,{gizmo:t}),n&&e.jsx(is,{gizmo:t}),e.jsx(rs,{gpt:t,isOpen:s,onClose:()=>g.closeModal(y.GPTRemoveThirdParty),account:a})]})}function St({clientThreadId:t,gizmoResource:s,showReportModal:a}){const n=ls(s),o=cs(s),i=ds(s.gizmo.id),r=xe(),c=us(s),d=s.gizmo.share_recipient===Ne.Marketplace||s.gizmo.share_recipient===Ne.Link,m=!c&&d,h=D("1825130190").value,f=D("3645668434").value,S=h&&!c&&Ye(s),w=r?.includes(U.GizmoSupportEmails)&&!c&&s.gizmo.author.will_receive_support_emails&&S,v=zt(),x=De(t),j=Je(U.WorkspaceShareLinks),{isUnauthenticated:k}=K(),G=j&&x&&!k,A=W();return e.jsxs(e.Fragment,{children:[e.jsx(l.Item,{onClick:()=>{p.logNewChatButtonClicked({location:"Gizmo information dropdown",gizmo_id:s.gizmo.id}),Xe(A,`/g/${s.gizmo.short_url}`)},icon:he,children:e.jsx(u,{...C.newChat})}),e.jsx(l.Item,{onClick:()=>g.openModal(y.GPTDetails),icon:ms,children:e.jsx(u,{...C.about})}),s.tools?.find(N=>N.type===E.JIT_PLUGIN)&&e.jsx(l.Item,{onClick:()=>g.openModal(y.GPTPrivacySettings),icon:Ze,children:e.jsx(u,{...C.privacySettings})}),n&&e.jsx(l.Item,{onClick:()=>{A(i)},icon:ie,children:e.jsx(u,{...C.customize})}),!n&&o&&f&&e.jsxs(e.Fragment,{children:[e.jsx(l.Item,{onClick:async()=>{A(`/g/${s.gizmo.id}/view`)},icon:hs,children:e.jsx(u,{id:"GizmoInformation.viewGizmoLabel",defaultMessage:"View configuration"})}),e.jsx(l.Item,{onClick:async()=>{const N=await be.copyGizmo({gizmoId:s.gizmo.id});N.gizmo.id&&A(`/gpts/editor/${N.gizmo.id}`)},icon:Pt,children:e.jsx(u,{id:"GizmoInformation.copyGizmoLabel",defaultMessage:"Duplicate GPT"})})]}),e.jsx(Pa,{gizmoResource:s,location:"conversation_page"}),e.jsx(Ve,{gizmoResource:s}),w&&e.jsx(l.Item,{onClick:()=>g.openModal(y.GPTFeedbackEmail),icon:ve,children:e.jsx(u,{...C.feedbackEmail})}),S&&e.jsx(l.Item,{onClick:()=>g.openModal(y.GPTReview),icon:xs,children:e.jsx(u,{...C.reviewGPT})}),m&&e.jsx(l.Item,{onClick:a,icon:gs,children:e.jsx(u,{...C.report})}),G&&e.jsx(l.Item,{onClick:()=>g.openSharingModal(x),icon:Qe,children:e.jsx(u,{...C.shareChat})}),v&&e.jsxs(e.Fragment,{children:[e.jsx(l.Separator,{}),e.jsx(l.Item,{color:"danger",onClick:()=>g.openModal(y.GPTRemoveThirdParty),icon:Et,children:e.jsx(u,{defaultMessage:"Remove GPT from workspace",id:"GizmoInformation.removeGPT"})})]}),r?.includes("debug")&&e.jsxs(e.Fragment,{children:[e.jsx(l.Separator,{}),e.jsx(l.Item,{onClick:()=>{A(ps(s))},children:"(Internal) See share page"})]})]})}const Da=({conversation:t,inMainScreen:s=!1,isActiveConversation:a,inChatWindow:n=!1})=>{const o=se(),i=t.id,r=t.gizmo_id,c=je(r),d=Ft(i),m=Je(U.WorkspaceShareLinks),{isUnauthenticated:h}=K(),f=m&&d&&!h&&!c,S=fs();z.useState(!!t.is_do_not_remember);const w=M();let v=null;const{snorlaxes:x}=js();v=x;let j=null;c&&v&&(j=v.find(({gizmo:P})=>P.gizmo.id===r)?.gizmo);const k=vs(),G=Ue(),{eligible:A,markAsViewed:N}=bs(Ss.ArchiveConversationOnboarding),Y=Oe(),T=W(),_t=async()=>{await ge.safePatch("/conversation/{conversation_id}",{parameters:{path:{conversation_id:t.id}},requestBody:{is_archived:!0}}),_s(G,t.gizmo_id),R.logEvent("chatgpt_conversation_archived"),p.logEvent("Conversation Archived"),A&&(Y.info(w.formatMessage({defaultMessage:"You can view archived chats in Settings",id:"HistoryGizmoItem.archiveChatOnboarding"}),{duration:10,hasCloseButton:!0}),N()),a&&Xe(T)};return e.jsxs(e.Fragment,{children:[f&&!n&&e.jsx(l.Item,{onClick:()=>g.openSharingModal(d,"History Item Menu"),icon:Qe,"data-testid":"share-chat-menu-item",children:e.jsx(u,{...C.shareChat})}),!1,S&&v&&v?.length>0&&ys(r)&&d&&e.jsxs(e.Fragment,{children:[f&&!n&&e.jsx(l.Separator,{}),c&&e.jsxs(e.Fragment,{children:[v.length>1&&e.jsxs(l.Sub,{children:[e.jsx(l.SubMenuTrigger,{icon:_e,children:e.jsx(u,{...ce.moveConversationToSnorlax})}),e.jsx(l.Portal,{children:e.jsx(l.SubContent,{children:e.jsx(Ie,{inSidebarFlyout:!1,onUpdateConversationGizmo:P=>{k({newGizmoId:P,conversation:t,previousGizmoId:r})},currentGizmoId:r})})})]}),e.jsx(l.Item,{onClick:()=>{k({newGizmoId:null,conversation:t,previousGizmoId:r})},icon:Ms,children:e.jsx("div",{className:"overflow-hidden text-ellipsis whitespace-nowrap",children:e.jsx(u,{...ce.removeConversationFromSnorlax,values:{projectName:j?.gizmo.display.name??"project"}})})})]}),!c&&e.jsxs(l.Sub,{children:[e.jsx(l.SubMenuTrigger,{icon:_e,children:w.formatMessage(ce.addConversationToSnorlax)}),e.jsx(l.Portal,{children:e.jsx(l.SubContent,{children:e.jsx(Ie,{inSidebarFlyout:!1,onUpdateConversationGizmo:P=>k({newGizmoId:P,conversation:t,previousGizmoId:r})})})})]}),e.jsx(l.Separator,{})]}),!n&&e.jsx(l.Item,{disabled:!d,onClick:()=>{setTimeout(()=>{d&&ra.publish({kind:s?"editTitleInMainScreen":"editTitle",serverThreadId:d})},100)},icon:ks,children:e.jsx(u,{...C.renameChat})}),!1,e.jsx(l.Item,{disabled:!d,onClick:()=>{d&&_t()},icon:Cs,children:e.jsx(u,{...C.archiveChat})}),e.jsx(l.Item,{color:"danger",disabled:!d,onClick:()=>{d&&Dt(o,({closeModal:P})=>e.jsx(ws,{serverThreadId:d,closeModal:P,isActiveConversation:a}))},icon:Ns,"data-testid":"delete-chat-menu-item",children:e.jsx(u,{...C.deleteChat})})]})},yt=({conversation:t,children:s,onOpenChange:a,inMainScreen:n=!1,isActiveConversation:o,inChatWindow:i=!1,...r})=>{const[c,d]=z.useState(!1);return e.jsx(ae,{...r,open:c,onOpenChange:m=>{d(m),a?.(m)},side:"bottom",contentAlign:i?"end":"start",triggerButton:s,size:"auto",children:c&&e.jsx(Da,{conversation:t,inMainScreen:n,isActiveConversation:o,inChatWindow:i})})},C=oe({newChat:{defaultMessage:"New chat",id:"GizmoInformation.newChat"},about:{defaultMessage:"About",id:"GizmoInformation.about"},privacySettings:{defaultMessage:"Privacy settings",id:"GizmoInformation.privacySettings"},viewDetails:{defaultMessage:"View details",id:"GizmoInformation.viewDetails"},share:{defaultMessage:"Share",id:"GizmoInformation.share"},favorite:{defaultMessage:"Favorite",id:"GizmoInformation.favorite"},customize:{defaultMessage:"Edit GPT",id:"GizmoInformation.customize"},feedbackEmail:{defaultMessage:"Send feedback",id:"GizmoInformation.feedbackEmail"},reviewGPT:{defaultMessage:"Review GPT",id:"GizmoInformation.reviewGPT"},report:{defaultMessage:"Report",id:"GizmoInformation.report"},privacy:{defaultMessage:"Privacy",id:"GizmoInformation.privacy"},deleteChat:{defaultMessage:"Delete",id:"GizmoInformation.deleteChat.0"},debugChat:{defaultMessage:"(Internal) Debug",id:"GizmoInformation.debugChat"},renameChat:{defaultMessage:"Rename",id:"GizmoInformation.renameChat"},archiveChat:{defaultMessage:"Archive",id:"GizmoInformation.archiveChat.0"},shareChat:{defaultMessage:"Share",id:"GizmoInformation.shareChat"},shareChatLong:{defaultMessage:"Share chat",id:"GizmoInformation.shareChatLong"}}),jn=Object.freeze(Object.defineProperty({__proto__:null,GizmoConversationOptionsDropdown:yt,GizmoInformationDropdown:Ea,GizmoInformationDropdownItems:St},Symbol.toStringTag,{value:"Module"})),Oa=q(()=>V(()=>import("./dqbjefrvqt13s2jj.js"),__vite__mapDeps([23,1,2,3,4,5,24,25,26,27])));function vn({onClickSettings:t}){return e.jsx("div",{className:"group relative",children:e.jsxs(l.Root,{children:[e.jsx(Ua,{}),e.jsx(l.Portal,{children:e.jsx(l.Content,{side:"top",className:"popover border-token-border-default bg-token-main-surface-primary absolute start-0 bottom-full z-50 mb-1 h-fit w-full overflow-hidden rounded-2xl border shadow-lg outline-hidden",children:e.jsx(La,{onClickSettings:t})})})]})})}function Mt({currentAccount:t}){const s=!t.isEnterprisey(),a=M(),n=re(),o=W();return n?e.jsxs("div",{className:"flex items-center justify-between gap-2 py-2 ps-5 pe-4",children:[n?.email&&e.jsx("div",{className:"text-token-text-secondary text-sm",children:n.email}),s&&e.jsx(B,{label:a.formatMessage(I.addWorkspaceTooltip),side:"right",children:e.jsx("button",{onClick:()=>xt(o,"profile menu"),children:e.jsx(Ps,{className:"icon-sm text-token-text-primary"})})})]}):null}function Ba({currentAccount:t}){return e.jsxs(e.Fragment,{children:[e.jsx(Mt,{currentAccount:t}),e.jsx("div",{className:"flex h-11 w-full items-center justify-start gap-3 px-3 py-1 text-sm",children:e.jsx(Ct,{workspace:t,isLoading:!1,currentWorkspaceId:t.id,showCheck:!1})})]})}function kt({accountSwitcherRedirectUrl:t}){const s=et(),a=Ue(),{data:n}=ne(),o=pe(n),[i,r]=z.useState(!1),c=re(),d=M(),m=Oe();if(!o||!n)return null;const h=o.isWorkspaceAccount(),f=n.accountItems.length>1,S=n.accountItems,w=Ee([S.find(x=>x.isPersonalAccount()),...S.filter(x=>!x.isPersonalAccount())]);if(w.sort((x,j)=>x.isPersonalAccount()?1:j.isPersonalAccount()?-1:0),!f)return h?e.jsx(Ba,{currentAccount:o}):c?.email&&e.jsx("div",{className:"text-token-text-secondary ms-3 me-2 py-2 text-sm",children:c.email});const v=w.map(x=>{const j=x.isDeactivated();return e.jsx(l.Item,{disabled:j,onClick:()=>{if(j||x.id===o?.id)return;r(!0);const{willRedirect:k}=Ot(a,x.id,s,d,m);k||Bt(t)},className:b(j&&"radix-disabled:pointer-events-auto hover:bg-transparent"),children:x.isDeactivated()?e.jsx(Wa,{workspace:x,isLoading:i}):e.jsx(Ct,{workspace:x,isLoading:i,currentWorkspaceId:o?.id})},x.id)});return e.jsxs(e.Fragment,{children:[e.jsx(Mt,{currentAccount:o}),e.jsx(l.Separator,{}),v]})}function Ct({workspace:t,isLoading:s,currentWorkspaceId:a,showCheck:n=!0}){const o=t.canAccessWithCurrentSession,i=!s&&n&&t.id===a;return e.jsxs("div",{children:[e.jsxs("div",{className:"flex w-full items-center gap-2.5",children:[e.jsx("span",{className:"flex h-5 w-5 items-center justify-center",children:e.jsx(Se,{iconSize:"small",workspace:t,className:b({"shrink-0":!0})})}),e.jsx("div",{className:"text-token-text-primary line-clamp-1",children:tt(M(),t)}),s&&e.jsx(ee,{}),i&&e.jsx("span",{className:"text-token-text-primary",children:e.jsx(Wt,{className:"icon-sm"})}),!o&&e.jsx("span",{className:"text-token-text-primary",children:e.jsx(Lt,{className:"icon-sm"})})]}),!o&&e.jsx("div",{className:"rowDivClassName",children:e.jsx("small",{className:"text-token-text-secondary",children:e.jsx(u,{...t.ssoConnectionName?I.authenticateWithSSOToAccessWorkspace:I.authenticateWithoutSSOToAccessWorkspace})})})]})}function Wa({workspace:t,isLoading:s}){const a=M(),n=t.isOwnerOfAccount(),[o,i]=z.useState(!1),r=Is(t.id),c=t.mustGetSubscriptionBillingCurrency("DeactivatedWorkspaceMenuItem");return z.useEffect(()=>{r!=null&&o&&(g.setPurchaseWorkspaceData({minimumSeats:Math.max(r,Ae),billingDetails:{currency:c},existingAccount:t}),i(!1))},[r,o,t,c]),e.jsxs(e.Fragment,{children:[e.jsxs(B,{className:"flex w-full flex-1 items-center gap-2.5",label:a.formatMessage(I.disabledWorkspaceTooltip),sideOffset:20,side:"right",children:[e.jsx("span",{className:"flex h-5 w-5 items-center justify-center",children:e.jsx(Ze,{className:"icon-sm shrink-0 opacity-30"})}),e.jsx("div",{className:"truncate opacity-30",children:tt(a,t)})]}),s&&e.jsx(ee,{}),!s&&e.jsxs(l.Root,{children:[e.jsx(l.Trigger,{className:"hover:bg-token-main-surface-secondary rounded-sm text-center",children:e.jsx(qe,{className:"icon-sm m-1"})}),e.jsx(l.Portal,{children:e.jsxs(l.Content,{children:[n&&e.jsx(e.Fragment,{children:e.jsx(l.Item,{onClick:()=>{r==null?i(!0):g.setPurchaseWorkspaceData({minimumSeats:Math.max(r,Ae),billingDetails:{currency:c},existingAccount:t})},children:o?e.jsx(ee,{}):e.jsx(u,{id:"navigation.reactivateWorkspace",defaultMessage:"Reactivate workspace"})})}),e.jsx(l.Item,{onClick:()=>{g.setLeaveWorkspaceData(t)},children:e.jsx(u,{id:"navigation.leaveWorkspace",defaultMessage:"Leave workspace"})})]})})]})]})}function La({onClickSettings:t}){const s=re(),{data:a}=ne(),n=pe(a),o=st(),{clientThreadId:i}=Me(),{isDesktopAppAvailable:r,isSidekickAvailable:c}=ye(),d=Ha(i??"none"),{openModal:m}=at();var h=n?.isTeam()??!1;if(!n||!a)return null;const f=n.isWorkspaceAccount(),S=!o;return e.jsxs(e.Fragment,{children:[e.jsx(kt,{}),s?.email&&e.jsx(l.Separator,{}),f?e.jsx(ot,{}):e.jsx(nt,{}),S&&e.jsx(l.Item,{icon:As,children:e.jsx("a",{href:Gs(),target:"_blank",onClick:()=>{p.logEvent("Click FAQ")},children:e.jsx(u,{...I.helpAndFaq})})}),e.jsx(l.Item,{onClick:t,icon:ie,testId:"accounts-settings-button",children:e.jsx(u,{...I.settings})}),h&&e.jsxs(e.Fragment,{children:[e.jsx(l.Item,{onClick:()=>{g.openModal(y.InviteUsersToWorkspace),p.logEvent("Account: Invite Member Button Clicked",{location:"dropdown-menu-click"}),R.logEvent("chatgpt_invite_users_to_workspace",0,{action:"OpenAdminInviteModal",location:"dropdown-menu-click",text:"AddTeammates",step:"OpenModal"})},icon:it,children:e.jsx(u,{...I.addTeammatesButton})}),e.jsx(Oa,{workspace:n})]}),(r||d)&&e.jsx(l.Separator,{}),r&&e.jsx(Ra,{openDownloadModal:m,isSidekickAvailable:c}),d&&e.jsx(qa,{}),e.jsx(l.Separator,{}),e.jsx(l.Item,{onClick:()=>{p.logEvent("Account: Click Log Out",{eventSource:"mouse"}),p.logLogOutButtonClicked({location:"account_switcher_menu"}),g.openModal(y.LogoutConfirm)},icon:rt,children:e.jsx(u,{...I.logOut})})]})}function Ua(){return re()?e.jsx(Va,{}):null}function Ra({openDownloadModal:t,isSidekickAvailable:s}){return e.jsx(l.Item,{icon:lt,onClick:()=>{p.logEvent("Account: Click Download App"),t()},children:e.jsx(u,{...s?I.downloadMacosApp:I.downloadWindowsApp})})}const Ha=t=>{const s=ct(t),a=dt(s,Be.Search),n=ut();return a&&We()&&!n&&!!1},qa=()=>e.jsx("span",{children:e.jsx(l.Item,{icon:mt,onClick:()=>{window.open(ht),p.logEventWithStatsig("ChatGPT Browser Extension: User Menu Clicked","chatgpt_browser_extension_user_menu_clicked")},children:e.jsx(u,{id:"E5VPz/",defaultMessage:"Get ChatGPT search extension"})})});function Va(){const{data:t}=ne(),s=pe(t),a=Ts(),n=zs(),o=M();if(!s||!t)return null;const i=s.isWorkspaceAccount(),r=t.accountItems.length>1;return e.jsxs(l.Trigger,{className:"can-hover:hover:bg-token-sidebar-surface-secondary radix-state-open:bg-token-sidebar-surface-secondary flex h-fit w-full max-w-[100%] items-center gap-2 rounded-lg p-2 text-sm","data-testid":"accounts-profile-button","aria-label":o.formatMessage({id:"VYC5Ys",defaultMessage:"Open profile menu for user {userName} in workspace: {workspaceName}"},{userName:n,workspaceName:a}),children:[e.jsx("div",{className:"shrink-0",style:{viewTransitionName:"var(--vt-profile-avatar-sidebar)"},children:e.jsx(Se,{iconSize:"gizmo"})}),e.jsxs("div",{className:"text-token-text-primary relative -top-px grow -space-y-px truncate text-start",children:[e.jsx("div",{dir:"auto",children:n}),i||r?e.jsx("div",{className:"text-token-text-secondary truncate text-xs",dir:"auto",children:a}):null]})]})}const I=oe({helpAndFaq:{id:"navigation.helpAndFaq",defaultMessage:"Help & FAQ"},settings:{id:"navigation.settings",defaultMessage:"Settings"},logOut:{id:"navigation.logOut",defaultMessage:"Log out"},accountSwitcherTitle:{id:"navigation.accountSwitcherTitle",defaultMessage:"Workspaces"},defaultWorkspaceTitle:{id:"useWorkspaces.defaultWorkspaceTitle",defaultMessage:"Untitled Workspace"},addWorkspaceTooltip:{id:"navigation.addWorkspaceTooltip",defaultMessage:"Create a Team workspace"},disabledWorkspaceTooltip:{id:"navigation.disabledWorkspaceTooltip",defaultMessage:"This workspace has been deactivated"},downloadMacosApp:{id:"navigation.downloadMacApp",defaultMessage:"Download the macOS app"},downloadWindowsApp:{id:"navigation.downloadWindowsApp",defaultMessage:"Download the Windows app"},authenticateWithSSOToAccessWorkspace:{id:"CV7pdM",defaultMessage:"Authenticate with SSO to access this workspace"},authenticateWithoutSSOToAccessWorkspace:{id:"zfCWFh",defaultMessage:"Authenticate without SSO to access this workspace"},addTeammatesButton:{id:"inviteMemberButton.inviteMemberButton",defaultMessage:"Add Teammates"}}),$=Ut(Rt(()=>({feedItems:[],hasUnreadNotifications:!1,isModalOpen:!1}))),de=$.getState,ue=$.setState,Ka={getIsModalOpen:(t=de())=>t.isModalOpen,getFeedItems:(t=de())=>t.feedItems,getHasUnreadNotifications:(t=de())=>t.hasUnreadNotifications},F={setIsModalOpen:t=>{ue({isModalOpen:t})},setHasUnreadNotifications:t=>{ue({hasUnreadNotifications:t})},bulkLoadFeedItems:t=>{ue(s=>{s.feedItems=t})}};function $a(){const t=ke(),s=$(Ka.getHasUnreadNotifications);return t&&s}function wt(t,s,a,n){const o=$a(),i=Es();return o||n&&i?t:s}function ke(){const{layer:t}=O("3606233934",{shouldLogExposure:!1});return t.get("enable_notifications_feed")}function bn(){const t=ke(),s=$(a=>a.isModalOpen);return t&&s}function Ya(){const t=ke(),s=fe({queryKey:["fetch-notifications-feed"],queryFn:async()=>{const a=await ge.safeGet("/notifications/feed");return F.bulkLoadFeedItems(a.items),F.setHasUnreadNotifications(a.has_unreads),a.items},enabled:t});return{isLoading:s.isLoading,isFetching:s.isFetching}}function Sn(){const t=M(),s=wt(Ls,Ws,!0,!1),a=t.formatMessage({id:"1UHY6w",defaultMessage:"Notifications"});return Ya(),e.jsx(B,{sideOffset:4,label:a,className:"group",children:e.jsx(H,{icon:s,onClick:()=>F.setIsModalOpen(!0),"aria-label":a})})}function Ja({item:t,closeModal:s}){const n={announcement:Hs}[t.type];let o=null;try{const m=new Date(t.created_at);o=Us({date:m})}catch{}const{clientThreadId:i}=Me(),r=Rs(i),c=W(),d=m=>{if(t.action?.type==="show_conversation")s(),c(t.action.conversation_id);else if(t.action?.type==="new_conversation"){const h=t.action;h.prefilled_message&&(r({sourceEvent:m,promptMessage:qt(h.prefilled_message),requestedModelId:h.model_slug??void 0}),s())}};return e.jsxs("button",{className:"border-token-border-default flex w-full items-center justify-start gap-3 overflow-hidden border-t py-4 first-of-type:border-none",onClick:d,disabled:!t.action,children:[e.jsx("div",{className:"relative",children:n&&e.jsx(n,{className:"icon-md"})}),e.jsxs("div",{className:"flex h-5 shrink grow basis-0 items-center justify-between",children:[e.jsx("div",{className:"text-token-text-primary text-sm leading-tight font-normal",children:t.message}),e.jsx("div",{className:"flex items-center justify-start gap-1",children:e.jsx("div",{className:"text-token-text-tertiary text-sm leading-tight font-normal",children:o??""})})]})]})}function yn(){const{feedItems:t,isModalOpen:s}=$();z.useEffect(()=>{s&&(F.setHasUnreadNotifications(!1),ge.safePost("/notifications/feed/read",{authOption:Ht.SendIfAvailable}))},[s]);const a=M(),n=W(),{value:o}=D("3325813340"),i=new Date,r=Fs(t,d=>{const m=new Date(d.created_at);if(Ds(m))return"today";const h=Os(i,m);return h<=7?"last_7_days":h<=30?"last_30_days":"more_than_30_days"}),c=d=>{switch(d){case"today":return a.formatMessage({id:"zlkA39",defaultMessage:"Today"});case"last_7_days":return a.formatMessage({id:"FW89A4",defaultMessage:"Last 7 days"});case"last_30_days":return a.formatMessage({id:"2s3h/P",defaultMessage:"Last 30 days"});case"more_than_30_days":return a.formatMessage({id:"yArZiR",defaultMessage:"More than 30 days"})}};return e.jsx(Pe,{testId:"modal-notifications-feed",isOpen:s,onClose:()=>{F.setIsModalOpen(!1)},type:"success",size:"custom",className:"max-w-3xl",children:e.jsxs("div",{className:"flex flex-col gap-y-10",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h2",{className:"text-2xl font-bold",children:a.formatMessage({id:"kWt8Cx",defaultMessage:"Notifications"})}),o&&e.jsx(Bs,{icon:e.jsx(ie,{className:"icon-lg"}),onClick:()=>{n("/#settings/Notifications")},label:a.formatMessage({id:"mZVh0S",defaultMessage:"Notifications settings"})})]}),Object.entries(r).map(([d,m])=>e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-bold",children:c(d)}),m.map(h=>e.jsx(Ja,{item:h,closeModal:()=>F.setIsModalOpen(!1)},h.id))]},d))]})})}const Xa=q(()=>V(()=>import("./dqbjefrvqt13s2jj.js"),__vite__mapDeps([23,1,2,3,4,5,24,25,26,27])));function Mn({showShareButton:t,showProfileDropdown:s,clientThreadId:a}){const n=De(a),o=M(),{layer:i}=O("1547743984"),[r,c,d,m]=Ce(a,T=>[we.hasUserMessage(T),we.getGizmoId(T),Ys(T),T?.is_do_not_remember??null]),h=jt(c),f=$t(a),{prefetchSearchPromises:S}=Me(),w=S!=null,v=i.get("show_share_button_text",!1),x=o.formatMessage({id:"GizmoInformation.shareChat",defaultMessage:"Share"}),j=()=>g.openSharingModal(n),k=je(c),G=xe();Le();const{isUnauthenticated:A}=K(),N=Ce(a,T=>T),Y=z.useMemo(()=>a==null?null:{id:a,title:N?.title??"",create_time:null,update_time:null,conversation_template_id:null,async_status:N?.async_status??null,gizmo_id:c??null,snippet:null,is_do_not_remember:m},[c,a,N?.title,N?.async_status,m]);return e.jsxs(e.Fragment,{children:[e.jsx(Js,{}),e.jsx(Xs,{}),h&&f&&!w&&!r&&e.jsx(Zs,{layout:"wide",clientThreadId:a}),G?.includes("caterpillar")&&e.jsx(Qs,{}),null,t&&n&&e.jsx(e.Fragment,{children:v?e.jsx(L,{onClick:j,icon:Ge,label:x,"data-testid":"share-chat-button",color:"secondary",className:"text-token-text-primary",style:{viewTransitionName:"var(--vt_share_chat_wide_button)"},children:x}):e.jsx(B,{label:o.formatMessage({id:"CPEfES",defaultMessage:"Share chat"}),children:e.jsx(H,{"data-testid":"share-chat-button",onClick:j,icon:Ge,style:{viewTransitionName:"var(--vt_share_chat_compact_button)"}})})}),n!=null&&Y!=null&&!A?e.jsx(yt,{conversation:Y,inMainScreen:!0,isActiveConversation:!0,inChatWindow:!0,children:e.jsx(ea,{"aria-label":o.formatMessage({id:"9Mk/E3",defaultMessage:"Open conversation options"}),"data-testid":"conversation-options-button"})}):c&&k?e.jsx(e.Fragment,{children:e.jsx(ta,{gizmoId:c})}):null,s&&e.jsx(Za,{clientThreadId:a})]})}function Za({clientThreadId:t}){const{isUnauthenticated:s}=K();return Te.markStart("LoginOrProfileMenu"),Te.markRendered("LoginOrProfileMenu"),s?e.jsx(rn,{}):e.jsx(Qa,{clientThreadId:t})}function Qa({clientThreadId:t}){const{data:s}=ne(),a=Vt(),n=Fe(),o=a?.isPlus()??!1,i=a?.isWorkspaceAccount()??!1,{openSettings:r}=qs(),{isDesktopAppAvailable:c}=ye(),d=sn(t??"none"),{openModal:m}=at(),{layer:h}=O("2888142241"),f=M(),S=se();let w=a?.isTeam()??!1;const v=s&&Kt(s),{layer:x}=O("2670443078");if(!a)return e.jsx("div",{className:"flex h-10 w-10 items-center justify-center",children:e.jsx("div",{className:"bg-token-main-surface-tertiary h-8 w-8 rounded-full"})});const j=s&&s.accountItems.length>1;let k=!1;!i&&!o&&v&&x.get("is_gating_fix_enabled",!1)&&(k=v);const G=!i&&!k&&h.get("is_upgrade_in_settings",!1);return Vs(S),e.jsxs(ae,{triggerButton:e.jsx("button",{onClick:()=>{p.logEvent("Account: Open Profile Menu"),R.logEvent("chatgpt_account_open_profile_menu")},"aria-label":f.formatMessage({id:"wz2MQV",defaultMessage:"Open Profile Menu"}),"data-testid":"profile-button",className:"text-token-text-secondary hover:text-token-text-primary hover:bg-token-surface-hover radix-state-open:text-token-text-secondary flex h-10 w-10 items-center justify-center rounded-full px-1 transition focus-visible:outline-0",children:e.jsx(Se,{iconSize:"medium",showPlanTypeBadge:!0})}),children:[j&&e.jsx(kt,{}),j?e.jsx(l.Separator,{}):null,i?e.jsx(ot,{}):e.jsx(nt,{}),e.jsx(l.Item,{icon:ie,onClick:()=>r(),"data-testid":"settings-menu-item",children:e.jsx(u,{defaultMessage:"Settings",id:"navigation.settings.0"})}),!1,!1,e.jsx(l.Separator,{}),w&&n&&e.jsxs(e.Fragment,{children:[e.jsx(l.Item,{"data-testid":"settings-menu-item-invite-teammates",onClick:()=>{g.openModal(y.InviteUsersToWorkspace),p.logEvent("Account: Invite Member Button Clicked",{eventSource:"mouse",location:"profile_drop_down"}),R.logEvent("chatgpt_invite_users_to_workspace",0,{action:"OpenAdminInviteModal",location:"dropdown-menu-click",text:"AddTeammates",step:"OpenModal"})},icon:it,children:e.jsx(u,{...Nt.addTeammatesButton})}),e.jsx(Xa,{workspace:n})]}),c&&e.jsx(tn,{openDownloadModal:m}),G&&e.jsx(nn,{currentAccount:n}),d&&e.jsx(an,{}),e.jsxs(e.Fragment,{children:[(G||c||d)&&e.jsx(l.Separator,{}),e.jsx(l.Item,{onClick:()=>{p.logEvent("Account: Click Log Out",{eventSource:"mouse"}),p.logLogOutButtonClicked({location:"profile_drop_down"}),g.openModal(y.LogoutConfirm)},"data-testid":"log-out-menu-item",icon:rt,children:e.jsx(u,{defaultMessage:"Log out",id:"navigation.logOut.0"})}),null]})]})}function en({onClick:t,className:s,testId:a}){const n=M(),o=Le(),{value:i}=D("4192239497"),r=jt(),c=o&&!r,d=ft(),m=c?n.formatMessage({id:"yqd/J5",defaultMessage:"Clear chat"}):n.formatMessage({id:"OFyxqj",defaultMessage:"New chat"}),h=f=>{if(!c&&i){if(f.metaKey||f.ctrlKey){p.logEventWithStatsig("New Chat Opened In New Tab","chatgpt_new_chat_opened_in_new_tab");return}f.preventDefault()}!ia(window)&&!d&&g.toggleNavCollapsed(!0),t()};return e.jsx(B,{sideOffset:4,label:m,className:b("flex",s),children:c||!i?e.jsx(H,{onClick:h,icon:c?ze:he,"aria-label":m,"data-testid":a,as:"button"}):e.jsx(H,{onClick:h,icon:c?ze:he,"aria-label":m,"data-testid":a,as:"link"})})}function kn({clientThreadId:t,hideNewChat:s=!1}){const[a]=gt(i=>[i.activeStageSidebar]),n=pt(),o=Ks({clientThreadId:t,location:"Navigation actions"});return!n&&!a?null:e.jsxs("div",{className:"flex items-center",children:[e.jsx(on,{}),!s&&e.jsx(en,{onClick:o})]})}function tn({openDownloadModal:t}){const{isSidekickAvailable:s}=ye();return e.jsx("span",{children:e.jsx(l.Item,{icon:lt,onClick:()=>{t(),p.logEvent("Account: Click Download App")},children:s?e.jsx(u,{id:"navigation.downloadMacApp",defaultMessage:"Download the macOS app"}):e.jsx(u,{id:"navigation.downloadWindowsApp",defaultMessage:"Download the Windows app"})})})}const sn=t=>{const s=ct(t),a=dt(s,Be.Search),n=ut();return a&&We()&&!n&&!!1},an=()=>e.jsx("span",{children:e.jsx(l.Item,{icon:mt,onClick:()=>{window.open(ht),p.logEventWithStatsig("ChatGPT Browser Extension: User Menu Clicked","chatgpt_browser_extension_user_menu_clicked")},children:e.jsx(u,{id:"E5VPz/",defaultMessage:"Get ChatGPT search extension"})})});function nn({currentAccount:t}){const s=W(),a=t?.hasPaidSubscription(),n=t?.isPlus(),o=t?.isWorkspacePlan(),i=t?.data.subscriptionStatus.planType;if(a&&!n&&!o)return null;const r=()=>{R.logEvent("chatgpt_upgrade_in_settings_menu_clicked",null,{current_plan_type:i??"unknown"}),p.logEvent("Upgrade In Settings Menu Clicked",{planType:i??"unknown"}),xt(s,"Upper right settings menu")};return e.jsx(l.Item,{icon:$s,onClick:r,children:e.jsx(u,{id:"navigation.upgradePlan",defaultMessage:"Upgrade Plan"})})}function on(){const t=M(),[s]=gt(m=>[m.activeStageSidebar]),a=pt(),n=st(),o=ft(),{isUnauthenticated:i}=K(),r=wt(aa,sa,!0,!0),{layer:c}=O("3737571708"),d=c.get("sidebar_type","slick");return i&&d==="slick"||!s&&!a||!n?null:e.jsx(B,{label:t.formatMessage({id:"cElEQV",defaultMessage:"Open sidebar"}),className:"flex",children:e.jsx(H,{"aria-label":t.formatMessage({id:"pV/Etp",defaultMessage:"Open sidebar"}),onClick:()=>{g.toggleNavCollapsed(!1,"button_click"),o&&g.setIsSidebarLocked(!0)},icon:r})})}function rn(){const t=et(),s=na(),a=oa(Nt.signUpCta),{layer:n}=O("3637408529"),o=n.get("is_desktop_primary_auth_button_on_right",!1),i=()=>{t({authType:"login",callback:h=>{p.logLogInButtonClicked({location:"Chat header",provider:h})}})},r=()=>{t({authType:"signup",callback:h=>{p.logSignUpButtonClicked({location:"Chat header",provider:h})}})},c=e.jsx(L,{onClick:i,color:s?"primary":"secondary","data-testid":"login-button",className:b(!s&&"screen-arch:hidden md:screen-arch:flex"),children:e.jsx(u,{id:"B1SN7b",defaultMessage:"Log in"})},"login"),d=e.jsx(L,{color:s?"secondary":"primary",onClick:r,"data-testid":"signup-button",className:b(s&&"screen-arch:hidden md:screen-arch:flex"),children:e.jsx(u,{...a})},"signup"),m=s?[c,d]:[d,c];return e.jsx("div",{className:"flex items-center justify-center gap-2",children:o?m.reverse():m})}const Nt=oe({signUpCta:{id:"P6cySK",defaultMessage:"Sign up"},addTeammatesButton:{id:"inviteMemberButton.inviteMemberButton",defaultMessage:"Add Teammates"}});export{Mn as C,on as E,Ga as G,Za as L,kn as N,Qa as P,fn as a,bt as b,da as c,yn as d,pn as e,en as f,wt as g,ke as h,Sn as i,vn as j,jn as k,bn as u};
//# sourceMappingURL=j2m3ef69iou998eo.js.map
