import{fG as d,u as E,ao as S,H as u,I as h}from"./j5zd9vs1l0bwsjqa.js";import{E as C,f as O,r as s}from"./j12so9ru57hpoz1y.js";const U=d(function(){const{pluginId:t}=C(),e=O(),l=s.useRef(!1),[p,m]=s.useState(""),{code:r,error:n,error_description:i,state:c}=Object.fromEntries(new URLSearchParams(p.substring(1)).entries());s.useEffect(()=>{m(window.location.hash)},[]),s.useEffect(()=>{if(l.current)return;if(t&&r&&c)l.current=!0;else{e("/");return}async function R(){const _=window.location.origin+`/ccc/${t}/oauth/callback`;if(!(!t||!r||!c))try{const a=await S.connectorOauthCallback(t,r,_,c);if(a.success){const o=new URL(u(h.OAUTH_SUCCESS,a.redirect_path),location.origin);o.searchParams.set("oauth_success","true"),e(o.pathname+o.search+o.hash)}else e(u(h.CUSTOM_ERROR,a.redirect_path,a.error??a.message))}catch{e(u(h.CUSTOM_ERROR))}}R()},[t,r,c,e]);const f=E();return s.useEffect(()=>{n&&f.danger(`${n}${i?`: ${i}`:""}`)},[n,i,f]),null});export{U as default};
//# sourceMappingURL=hfwrhbnkoe16g9f7.js.map
