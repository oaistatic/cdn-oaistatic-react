import{q as W,aO as K,d7 as oe,bD as H,P as w,C as re,dU as ie,B as R,bL as le,a as C,ff as ce,r as Y,aU as $,at as Z,aP as X,bO as ue,gP as de,fg as me,T as pe,bc as fe,R as he,D as ge,o as xe,Z as ye,n as be}from"./j5zd9vs1l0bwsjqa.js";import{aR as J,ax as Q,hW as Se,hX as ve,hY as Me,an as M,fK as q,bp as Ce,ez as ke,ew as _e,ex as we,ey as Ae,hZ as je,cI as Ne,h_ as Ee,Y as ee,h$ as Pe,i0 as Le,y as Ie,ff as He,i1 as Te,i2 as L,bO as Fe,i3 as Ge,i4 as Ue,i5 as De,a3 as Oe}from"./jn7p98x7qxquz26a.js";import{d as te}from"./b0v1yruiy44zd1p9.js";import{f as Be,r as b,u as U,j as t,M as E,a9 as G,ae as ze,aa as Re,l as qe,b as Ve}from"./j12so9ru57hpoz1y.js";import{u as We}from"./d8hi8vzea1zd4sdu.js";const Ke="https://persistent.oaistatic.com/image-gen/nux.222e584e.mp4",Ye="https://help.openai.com/en/articles/8932459",it=()=>{const{isLoading:e,eligible:s}=J(Q.hasSeenShibaHomeNux),{isUnauthenticated:u}=W(),[a]=Se(),{value:c}=K("2781425969");return u||!c||a?"hide":e?"loading":s?"show":"hide"};function D(e){return[{title:e.formatMessage({id:"er580q",defaultMessage:"Create an image of a magazine cover of cute animals with headlines and text"}),body:"",type:M.Autocomplete,prompt:e.formatMessage({id:"SKZKBN",defaultMessage:"Create an image of a photorealistic magazine cover for 'CUTE ANIMALS,' featuring three impossibly cute and stylishly accessorized pets, with realistic, catchy headlines and teaser text"})},{title:e.formatMessage({id:"ukPFbH",defaultMessage:"Create an image for a garden-themed birthday party invitation"}),body:"",type:M.Autocomplete,prompt:e.formatMessage({id:"uYg5kL",defaultMessage:"Create an image of a colorful invitation for a garden-themed birthday party, including whimsical typography"})},{title:e.formatMessage({id:"mMiJxP",defaultMessage:"Create an image of an astronaut with an inflatable duck on Mars"}),body:"",type:M.Autocomplete,prompt:e.formatMessage({id:"5nFWh4",defaultMessage:"Create a photorealistic image of an international astronaut on Mars, wearing a giant duck inflatable toy around its waist"})},{title:e.formatMessage({id:"+T7POI",defaultMessage:"Create an image of a tutorial for cooking pasta"}),body:"",type:M.Autocomplete,prompt:e.formatMessage({id:"9N2bJ0",defaultMessage:"Create an image of a comic-book style tutorial for cooking pasta"})}]}const lt=({onClose:e,clientThreadId:s})=>{const{markAsViewed:u}=J(Q.hasSeenShibaHomeNux),a=te(),c=Be(),n=oe("2604379743").config.value,m=typeof n.nux_video_url=="string"?n.nux_video_url:Ke,d=typeof n.nux_image_url=="string"?n.nux_image_url:"",[p,l]=b.useState(!1),h=ve(a,s),{activeSystemHints:g}=Me(s),x=g.find(S=>S.systemHint===H.PictureV2);b.useEffect(()=>{w.logEventWithStatsig("chatgpt_imagegen_nux_modal_shown","chatgpt_imagegen_nux_modal_shown")},[]);const i=U(),o=D(i),r=()=>{u(),e(),w.logEventWithStatsig("chatgpt_imagegen_nux_modal_dismissed","chatgpt_imagegen_nux_modal_dismissed")},y=()=>{u(),e(),requestAnimationFrame(()=>{requestAnimationFrame(()=>{x&&h({hint:x,enable:!0}),a.focus()})}),a.setAutocompletions(o)};return t.jsx(t.Fragment,{children:t.jsxs(re,{testId:"modal-imagegen-nux",isOpen:!0,noPadding:!0,onClose:ie,shouldIgnoreClickOutside:!0,showCloseButton:!1,size:"custom",type:"success",className:"max-w-lg",children:[t.jsxs("div",{className:"relative aspect-3/2 w-full",children:[!p&&t.jsx("img",{src:d,alt:"",className:"absolute inset-0 h-full w-full object-cover object-bottom transition-opacity duration-300"}),t.jsx("video",{src:m,autoPlay:!0,loop:!0,muted:!0,playsInline:!0,className:"h-full w-full object-cover object-bottom",onLoadedData:()=>l(!0)})]}),t.jsxs("div",{className:"flex flex-col gap-2 px-8 pt-6 pb-6 text-center",children:[t.jsx("div",{className:"text-xl font-medium",children:t.jsx(E,{id:"KgZP2O",defaultMessage:"Image creation just got better"})}),t.jsx("div",{className:"text-token-text-secondary w-full",children:t.jsx(E,{id:"/oguus",defaultMessage:"ChatGPT now thinks a little longer to make more accurate and detailed images. <link>Learn more</link>",values:{link:S=>t.jsx("a",{href:Ye,target:"_blank",rel:"noopener noreferrer",className:"text-blue-400 no-underline",children:S})}})}),t.jsx("div",{className:"mt-2 w-full text-xs text-[#8F8F8F] dark:text-[#C4C4C4]",children:t.jsx(E,{id:"6pIXUv",defaultMessage:"You must have permission to edit images you upload, including consent from any people in them."})}),t.jsxs("div",{className:"mt-4 flex w-full gap-3",children:[t.jsx(R,{color:"secondary",onClick:r,className:"flex-1",children:t.jsx(E,{id:"6nf9tD",defaultMessage:"Not now"})}),t.jsx(R,{color:"primary",onClick:()=>{y(),c("/?model=gpt-4o"),w.logEventWithStatsig("chatgpt_imagegen_nux_modal_continued","chatgpt_imagegen_nux_modal_continued")},className:"flex-1",children:t.jsx(E,{id:"ms5BU0",defaultMessage:"Try it"})})]})]})]})})};function ct({suggestions:e,composerController:s,onSelect:u,onChange:a}){const{isUXUpdatesEnabled:c}=le(),n=We(),m=b.useCallback((i,o,r,y)=>{u?.(o,r,y),n(i,o,r,y)},[u,n]),[d,p]=b.useState(()=>e.length>0),[l,h]=b.useState(-1),[g,x]=b.useState(!1);return b.useEffect(()=>{const i=o=>{if(!o.isComposing)if(o.key==="ArrowDown"){const r=l===e.length-1?0:l+1;h(r),a?.(r,!0,e[r])}else if(o.key==="ArrowUp"){o.preventDefault();const r=l<=0?e.length-1:l-1;h(r),a?.(r,!0,e[r])}else o.key==="Enter"&&!o.shiftKey&&e[l]&&m(o,e[l],e,l)};return s.subscribe("keydown",i)},[e,l,a,m,s]),b.useEffect(()=>s.subscribe("blur",()=>{h(-1),p(!1),a?.(-1,!1)}),[s,a]),b.useEffect(()=>s.subscribe("focus",()=>p(!0)),[s]),b.useEffect(()=>{if(!g){const i=()=>{x(!0),window.removeEventListener("mousemove",i)};return window.addEventListener("mousemove",i),()=>{window.removeEventListener("mousemove",i)}}},[g]),b.useEffect(()=>{h(-1),a?.(-1,!1),x(!1)},[e,a]),t.jsx(G.ul,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:C("w-full flex-col p-2.5 max-lg:flex-col-reverse",d?"flex":"hidden"),children:e.map((i,o)=>t.jsxs(G.li,{initial:{opacity:0,translateY:4},animate:{opacity:1,translateY:0},transition:{delay:o*.03},exit:{opacity:0,translateY:4},className:"w-full",children:[o>0&&t.jsx("div",{className:C("h-[1px] opacity-60 max-lg:hidden",l===o||l===o-1?"bg-token-main-surface-secondary mx-2":"bg-token-border-default")}),t.jsxs("button",{className:C("flex w-full cursor-pointer items-center justify-start rounded-lg px-2.5 py-3 text-start whitespace-pre-wrap",l===o?"bg-token-main-surface-secondary":c?"bg-transparent":"bg-token-main-surface-primary"),onClick:r=>{r.preventDefault(),m(r,i,e,o)},onMouseDown:r=>{r.preventDefault()},onMouseEnter:()=>{g&&(h(o),a?.(o,!1,i))},onMouseLeave:()=>{h(-1),a?.(-1,!1,i)},children:[i.icon?t.jsx("span",{className:"text-token-text-secondary me-2 h-[18px] w-[18px]",children:i.icon}):null,t.jsx("span",{className:"text-sm whitespace-pre-wrap",children:i.autocompletionChunks&&i.autocompletionChunks.length>0?t.jsx(t.Fragment,{children:i.autocompletionChunks.map((r,y)=>t.jsx("span",{className:C(r.isMatched?"text-token-text-tertiary":"text-token-text-primary"),children:r.text},y))}):t.jsxs(t.Fragment,{children:[t.jsx("span",{className:C(i.type===M.Starter||i.type===M.Trending?"text-token-text-secondary":"text-token-text-tertiary"),children:i.title}),t.jsx("span",{className:"text-token-text-primary",children:i.body})]})})]}),o>0&&t.jsx("div",{className:C("h-[1px] opacity-60 lg:hidden",l===o||l===o-1?"bg-token-main-surface-secondary mx-2":"bg-token-border-default")})]},i.id??o))})}function $e(e,s){e=e.toLocaleLowerCase();const u=s;s=s.toLocaleLowerCase();const a=[];let c=0;for(let d=0;d<s.length&&(c<e.length&&e[c]===s[d]&&(a.push(d),c++),c!==e.length);d++);const n=[];let m=0;if(a.forEach(d=>{if(d>m){const p=u.slice(m,d);p&&n.push({text:p,isMatched:!1})}n.push({text:u[d],isMatched:!0}),m=d+1}),m<s.length){const d=u.slice(m);d&&n.push({text:d,isMatched:!1})}return Ze(n)}function Ze(e){if(e.length===0)return e;let s=[e[0]];for(let a=1;a<e.length;a++){const c=s[s.length-1],n=e[a];c.isMatched===n.isMatched?c.text+=n.text:s.push(n)}const u=s.filter(a=>a.isMatched).reduce((a,c)=>a+c.text.trim().length,0);return s.length<=4&&u>=2?s:[{text:s.map(a=>a.text).join(""),isMatched:!1}]}const Xe=({pressed:e,disabled:s,icon:u,label:a,ariaLabel:c,animatedLabel:n,showLabel:m,onClick:d,splitButtonDropdownContent:p,dropdownContent:l,dataTestid:h,splitSecondaryButton:g})=>{const[x,i]=b.useState(!1),o=ze(),r=!s&&e,y=a&&t.jsx("div",{className:C("[display:var(--force-hide-label)] ps-1 pe-1 whitespace-nowrap"),children:a}),S=t.jsxs("button",{className:C("flex h-full min-w-8 items-center justify-center p-2",{"pe-1.5":!!p}),"data-testid":h,"aria-pressed":e,"aria-label":c,disabled:s,onTransitionEnd:()=>i(!1),onClick:j=>{l||(i(!0),d(j))},children:[u,!n&&m?y:null,n&&t.jsx(Re,{initial:!1,children:m&&t.jsx(G.span,{initial:{x:-10,width:0,opacity:0},animate:{x:0,width:"fit-content",opacity:1},exit:{x:-10,width:0,opacity:0},transition:{ease:"easeOut",duration:o?0:.15},children:y})})]}),A=p||l?t.jsx(t.Fragment,{children:t.jsx(we,{children:t.jsx(ce,{className:"p-0",$as:Ae,side:"bottom",align:"start",collisionPadding:10,sideOffset:8,children:l??p})})}):null,k=t.jsxs("div",{className:C("radix-state-open:bg-black/10 inline-flex h-9 rounded-full border text-[13px] font-medium",{"duration-75 motion-safe:transition-all":x,"text-token-text-secondary":!e,"text-token-interactive-label-accent-default can-hover:hover:bg-[#BDDCF4] dark:can-hover:hover:bg-[#1A416A] bg-token-composer-blue-bg border-transparent dark:bg-[#2A4A6D] dark:text-[#48AAFF]":!!r,"border-token-border-default can-hover:hover:bg-token-main-surface-secondary focus-visible:outline-black dark:focus-visible:outline-white":!r,"opacity-30":s}),children:[l?t.jsx(q,{asChild:!0,children:S}):S,!l&&p?t.jsx(q,{asChild:!0,children:t.jsx("button",{className:"border-token-border-default border-s p-2",style:{borderColor:r?"#0285FF0D":void 0},disabled:s,children:t.jsx(Ce,{className:"h-[18px] w-[18px]"})})}):null,g]});return p||l?t.jsxs(ke,{children:[t.jsx(_e,{asChild:!0,children:k}),A]}):k},I=H.PictureV2,Je=["o1","o3-mini","o3-mini-high","o1-pro","gpt-4.5","gpt-4-5"];function ut({clientThreadId:e,composerController:s,currentModelConfig:u,currentModelConfigLoading:a,disableIfNoAccess:c}){const n=Y(),[m]=qe(),d=$()?.planType,p=Z(e,N=>je(n,e,N,m,d)),{value:l}=K("2868048419"),g=null!=null;let x=Ne(e);const i=x==null||x?.kind===X.PrimaryAssistant,{isUnauthenticated:o}=W(),r=!o,y=u?.enabledTools?.includes(ue.ImageGen),S=de(),A=!!S,k=y&&!a&&p&&!Je.includes(p),j=r&&l&&!g&&i;return!me(H.PictureV2)||!(j&&(k||c))?null:t.jsx("div",{"data-testid":"system-hint-picture_v2",style:{viewTransitionName:`var(--vt-composer-${I}-action)`},children:t.jsx(Qe,{clientThreadId:e,composerController:s,disabled:!!c&&!k||A,imageGenFeatureBlock:S})},`system-hint-${I}`)}function Qe({clientThreadId:e,composerController:s,disabled:u,imageGenFeatureBlock:a}){const n=Ee(s)===I,m=U(),d=D(m),p=se(m),l=m.formatMessage({id:"Uh+8Ls",defaultMessage:"Visualize ideas and concepts"}),{clearAllSystemHintModeTriggers:h}=ee(),g=r=>{r.stopPropagation(),r.preventDefault(),requestAnimationFrame(()=>{requestAnimationFrame(()=>{h(),n?s.removeSystemHints():s.addSystemHint(I,p),s.focus()})}),s.setAutocompletions(d),n?w.logEventWithStatsig("Composer Create Image Button Disabled","composer_create_image_button_disabled",{clientThreadId:e}):w.logEventWithStatsig("Composer Create Image Button Enabled","composer_create_image_button_enabled",{clientThreadId:e})},x=t.jsx(Xe,{pressed:n,icon:t.jsx(Pe,{className:"h-[18px] w-[18px]"}),label:p,ariaLabel:p,animatedLabel:!0,showLabel:!0,onClick:g,disabled:!!u,dataTestid:"composer-button-create-image"}),i=a?.title??l,o=a?.description??void 0;return t.jsx(pe,{className:"inline-block",sideOffset:0,label:i,secondaryLabel:o,side:"bottom",onOpenChange:r=>{r&&w.logEventWithStatsig("Composer Create Image Button Hovered","composer_create_image_button_hovered",{clientThreadId:e})},children:x})}function se(e){return e.formatMessage({id:"rh3NHv",defaultMessage:"Create image"})}function V(e){return(Le(e)?e.promptStarters:e.gizmo.display.prompt_starters)?.map(s=>({type:M.Starter,title:"",body:s,prompt:s}))}const et=()=>{const e=Y(),s=xe(e),u=Fe(),a=Ge(Ue),c=ye(e),n=c?s.getLayer("4031588851"):s.getLayer("3533083032"),m=c?s.getLayer("4031588851",{disableExposureLog:!0}):s.getLayer("3533083032",{disableExposureLog:!0});return c?u==null?!1:Date.now()/1e3-u.created<m.get("new-user-age-seconds",14*24*60*60)&&n.get("web-enable-for-new-users",!1):a<m.get("new-user-message-count",20)&&n.get("web-enable-for-new-users",!1)},dt=({clientThreadId:e,limit:s,shouldBeEnabledForDefaultAssistant:u,isModelLoaded:a,modelSlug:c})=>{const n=te(),m=fe(),d=U(),{clearAllSystemHintModeTriggers:p}=ee(),l=Z(e,f=>f?.mode),h=Ie(l?.kind===X.GizmoInteraction?l.gizmo_id:void 0).data,{gizmoEditorData:g,mode:x}=He(),i=et(),o=Te(l),r=$(),y=i&&u&&!o&&!r?.isEnterprisey(),{data:S,isSuccess:A}=Ve({queryKey:["promptStarters",e,s,c],queryFn:async()=>{const f=await he.safeGet("/prompt_library/",{parameters:{query:{limit:s,use_v2:!0,model_slug:c}},anonAware:!0});return ge.addFirstTiming("load.promptStarters"),f},enabled:y});if(m==null)return{promptStarters:[],isLoading:!0,isSuccess:!1};if(x==="test"&&g)return{promptStarters:V(g)??[],isLoading:!1,isSuccess:!0};if(h!=null)return{promptStarters:V(h),isLoading:!1,isSuccess:!0};if(!y)return{promptStarters:[],isLoading:!1,isSuccess:!0};const k=S?.items.map(f=>({type:M.Starter,id:f.id,title:f.title,body:f.description,prompt:f.prompt,category:f.category,oneliner:f.oneliner,theme:f.theme,requires_file_upload:f.requires_file_upload}))??[],j=(f,v,tt,ne)=>{if(v.type===M.Starter&&v.category==="dalle"){requestAnimationFrame(()=>{p(),n.addSystemHint(H.PictureV2,se(d)),n.focus()}),n.setAutocompletions(D(d));return}const B=v.title;n.setAutocompletions([]),n.focus(),n.setText(B),requestAnimationFrame(()=>{const T=k.filter(_=>_.theme===v.theme).map(_=>{const F=be(_.oneliner),z=F.startsWith(_.title);return{..._,title:z?`${_.title} `:"",body:z?_.body:F,autocompletionChunks:$e(B,F),type:M.Autocomplete}});n.setAutocompletions(T),T.length>0&&De(T,e),Oe(v,ne,e)})},P=k?.reduce((f,v)=>(v.theme&&!f[v.theme]&&(f[v.theme]=v),f),{}),N=[];if(P)for(const f in P)f!=="For you"&&N.push(P[f]);const ae=N.length>0,O=!!(u&&A&&ae&&a);return u&&(L.markStart("StarterPromptChips",L.NS_COMPOSER),O&&L.markRendered("StarterPromptChips",L.NS_COMPOSER)),{onSelectStarterPrompt:j,shouldShowStarterPrompts:O,promptStarters:N}};export{ct as A,Xe as C,lt as I,ut as a,dt as b,V as g,it as u};
//# sourceMappingURL=hxt8zt4ovcs39phn.js.map
