import{r as S,j as B,d as K}from"./j12so9ru57hpoz1y.js";import{K as D,H as L,I as w,J as R,L as x,M as E,N as T,U as m,O as h,Q as z}from"./jn7p98x7qxquz26a.js";import{g6 as U,P as F,D as I,u as O,r as P,bL as V,dU as Z,W as G,V as N,J as j,K as _,v as H,dg as J,g7 as W,g8 as Q,g9 as X,ec as $,g0 as q,ga as Y}from"./j5zd9vs1l0bwsjqa.js";import{c as ee}from"./n5601invkykfg1ys.js";const oe=/```.*?\n([\s\S]+?)\n?```[^`]*$/gms;function f(){return q()||Y()}const e={Mod:"mod",Comma:",",Space:"Space"," ":"Space"," ":"Space",...D.Key},te={[e.Comma]:",",[e.Enter]:"⏎",[e.Escape]:"Esc",[e.ArrowUp]:"↑",[e.ArrowDown]:"↓",[e.ArrowLeft]:"←",[e.ArrowRight]:"→",[e.Backspace]:"⌫",[e.Delete]:"⌦",[e.Tab]:"⇥",[e.Control]:"Ctrl",[e.Shift]:"Shift"};function se(o){switch(o){case e.Mod:return f()?"⌘":"Ctrl";case e.Meta:return f()?"⌘":"Win";default:return te[o]}}const ue=o=>o.map(t=>se(t)??t),a=K({newChat:{id:"keyboardActions.newChat",defaultMessage:"Open new chat"},focusPromptTextarea:{id:"keyboardActions.focusPromptTextarea",defaultMessage:"Focus chat input"},copyLastCodeBlock:{id:"keyboardActions.copyLastCodeBlock",defaultMessage:"Copy last code block"},copyLastResponse:{id:"keyboardActions.copyLastResponse",defaultMessage:"Copy last response"},toggleCustomInstructions:{id:"keyboardActions.toggleCustomInstructions",defaultMessage:"Set custom instructions"},navigationToggle:{id:"keyboardActions.navigationToggle",defaultMessage:"Toggle sidebar"},deleteChat:{id:"keyboardActions.deleteChat",defaultMessage:"Delete chat"},zoomIn:{id:"keyboardActions.zoomIn",defaultMessage:"Zoom in"},zoomOut:{id:"keyboardActions.zoomOut",defaultMessage:"Zoom out"},resetZoom:{id:"keyboardActions.resetZoom",defaultMessage:"Reset zoom"},cycleReasoningLevel:{id:"keyboardActions.cycleReasoningLevel",defaultMessage:"Cycle reasoning level"},toggleKeyboardActions:{id:"keyboardActions.toggleKeyboardActions",defaultMessage:"Show shortcuts"}}),ae=new U,ne=({ctx:o,resetThreadAction:t,clientThreadId:s,focusPromptTextareaAction:n,toaster:i,isFannyPackEnabled:d,isZoomEnabled:r,isElectronClient:g,isCycleReasoningLevelEnabled:l})=>{const p=g?[[e.Mod,"n"]]:[];return[{key:"newChat",action:t||Z,actionMessageDescriptor:a.newChat,group:"Core",keyboardBinding:[e.Mod,e.Shift,"o"],altKeyboardBindings:d?[...p]:[...p,[e.Mod,"k"]]},{key:"focusPromptTextarea",action:n??E,actionMessageDescriptor:a.focusPromptTextarea,group:"Chat",keyboardBinding:[e.Shift,e.Escape]},{key:"copyLastCodeBlock",action:c=>{if(s!=null){const u=G.getConversationTurns(N(s));for(let b=u.length-1;b>=0;b--){const{messages:v}=u[b],M=[...v.reduce((k,y)=>y.clientMetadata?.err==null&&y.author.role===j.Assistant&&y.recipient==="all"?k+(k?`

`:"")+_(y):k,"").matchAll(oe)],C=M.length?M[M.length-1][1]:null;if(C!=null){T(C,i,c).then(()=>{i.success("Copied code block to clipboard")});break}}}},actionMessageDescriptor:a.copyLastCodeBlock,group:"Chat",keyboardBinding:[e.Mod,e.Shift,";"],altKeyboardBindings:[[e.Mod,e.Shift,":"]]},{key:"copyLastResponse",action:c=>{s!=null&&ee(o,s,i,c,"keyboard").then(()=>{i.success("Last response copied to clipboard")})},actionMessageDescriptor:a.copyLastResponse,group:"Chat",keyboardBinding:[e.Mod,e.Shift,"c"]},{key:"toggleCustomInstructions",action:()=>m.toggleModal(h.UserContext),actionMessageDescriptor:a.toggleCustomInstructions,group:"Settings",keyboardBinding:[e.Mod,e.Shift,"i"]},{key:"navigationToggle",action:()=>{m.toggleNavCollapsed()},actionMessageDescriptor:a.navigationToggle,group:"Core",keyboardBinding:[e.Mod,e.Shift,"s"]},{key:"deleteChat",action:()=>{if(s){const c=H(s);c&&J(o,({closeModal:u})=>B.jsx(z,{serverThreadId:c,closeModal:u,isActiveConversation:!0}))}},actionMessageDescriptor:a.deleteChat,group:"Chat",keyboardBinding:[e.Mod,e.Shift,e.Backspace],altKeyboardBindings:[[e.Mod,e.Shift,e.Delete]]},{key:"zoomIn",enabled:r,action:()=>W(),actionMessageDescriptor:a.zoomIn,group:"Chat",keyboardBinding:[e.Mod,"+"],altKeyboardBindings:[[e.Mod,"="]]},{key:"zoomOut",enabled:r,action:()=>Q(),actionMessageDescriptor:a.zoomOut,group:"Chat",keyboardBinding:[e.Mod,"-"]},{key:"resetZoom",enabled:r,action:()=>X(),actionMessageDescriptor:a.resetZoom,group:"Chat",keyboardBinding:[e.Mod,"0"]},{key:"toggleKeyboardActions",action:()=>m.toggleModal(h.KeyboardActions),actionMessageDescriptor:a.toggleKeyboardActions,group:"Settings",keyboardBinding:[e.Mod,"/"]},{key:"cycleReasoningLevel",action:()=>{ae.publish({kind:"cycleReasoningLevel"})},actionMessageDescriptor:a.cycleReasoningLevel,group:"Chat",keyboardBinding:[e.Mod,"."],enabled:l}]},A=o=>w(o,t=>{F.logEvent("Keyboard Shortcut",{keyboardActionKey:t.key}),I.addAction("chatgpt_keyboard_shortcut",{keyboardActionKey:t.key})},{enabled:!0}),ie=({resetThreadAction:o,clientThreadId:t,focusPromptTextareaAction:s}={})=>{const n=O(),{isFannyPackEnabled:i}=R(),d=x(),r=$,g=P(),{isUXUpdatesEnabled:l}=V();return S.useMemo(()=>ne({ctx:g,resetThreadAction:o,clientThreadId:t,focusPromptTextareaAction:s,toaster:n,isElectronClient:d,isFannyPackEnabled:i,isZoomEnabled:r,isCycleReasoningLevelEnabled:l}).filter(({enabled:c=!0})=>c),[g,o,t,s,n,d,i,r,l])},ye=({resetThreadAction:o,clientThreadId:t,focusPromptTextareaAction:s})=>{const n=ie({resetThreadAction:o,clientThreadId:t,focusPromptTextareaAction:s}),d=L(r=>r.isVoiceActive)?[]:n;A(d)},pe=({setSelectedVoiceIndex:o,prevVoiceIndex:t,nextVoiceIndex:s})=>{const n=[{key:"selectPrevVoice",action:()=>{o(t)},actionMessageDescriptor:{defaultMessage:"Select previous voice"},group:"Chat",keyboardBinding:[e.ArrowLeft]},{key:"selectNextVoice",action:()=>{o(s)},actionMessageDescriptor:{defaultMessage:"Select next voice"},group:"Chat",keyboardBinding:[e.ArrowRight]}];A(n)};export{ae as G,e as K,ye as a,pe as b,ue as g,f as i,ie as u};
//# sourceMappingURL=egjzck8f21ldiiq8.js.map
