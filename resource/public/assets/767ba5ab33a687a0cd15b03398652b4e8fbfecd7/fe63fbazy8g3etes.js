import{u as p,g as f}from"./ko9momito7h8y578.js";import{eI as l,ec as d,D as m}from"./j5zd9vs1l0bwsjqa.js";import{r as n}from"./j12so9ru57hpoz1y.js";function g(e){const r=n.useRef(void 0);n.useEffect(()=>{if(!(l()&&d||!navigator.permissions))return navigator.permissions.query({name:"microphone"}).then(o=>{r.current=o,o.onchange=()=>{e(o.state==="granted")}}).catch(()=>{}),()=>{r.current&&(r.current.onchange=null)}},[e])}const y=()=>{const[e,r]=n.useState(!1),[i,o]=n.useState(!1),[c,a]=n.useState(),u=n.useCallback(s=>{r(s)},[]);g(u);const t=p(),h=n.useCallback(async()=>i?e:t().then(s=>(r(s),s)).finally(()=>{o(!0)}),[t,i,e]);return n.useEffect(()=>{e&&D().then(s=>{a(s)})},[e]),{requestMicrophonePermissions:h,userDeclinedMicrophonePermissions:i&&!e,microphoneAvailable:e,microphoneLabel:c}},D=async()=>{try{return(await f("audioinput"))?.label??""}catch(e){return m.addError("Failed to fetch default media device",{error:e}),"Error accessing microphone devices"}};export{y as u};
//# sourceMappingURL=fe63fbazy8g3etes.js.map
