import{u as A,j as e,d as S,r as c,e as V}from"./j12so9ru57hpoz1y.js";import{C as F,b as G}from"./epsg05et2lobrl6v.js";import{C as Y}from"./jgfehaz03xkmntxn.js";import{P as W}from"./c7zwb9p0mkhdhxup.js";import{q as X,ho as H,hp as q,hq as B,hr as t,bJ as K,bK as Z,hs as $,dy as k,ht as z,dA as Q,dz as J,dB as ee}from"./jn7p98x7qxquz26a.js";import{q as te,a as se,T as ae,s as R,N as T,P as M,B as I,c5 as w,C as le,R as ne}from"./j5zd9vs1l0bwsjqa.js";import{a as oe}from"./gh4kfg6qlx7b3ikk.js";const ie="https://openai.com/form/report-content/";function re(s){return`/?model=gpt-4o&sharedCanvas=${s.sharedTextdocId}`}const P=({areButtonsFullWidth:s,sharedTextdoc:a,onClickCodePreview:y,isCodeRunning:r,showRunCodeButton:h,setIsReportModalOpen:d})=>{const{isUnauthenticated:o}=te(),u=X(),i=H(a.type,a.content),C=h&&(i||q(a.type)),l=A(),p=re(a),m=()=>{R.count(T.CANVAS,"shared.click_edit_button",[{key:"type",value:a.type},{key:"authed",value:o?"false":"true"}]),M.logEvent("Canvas Shared Edit Button Clicked",{textdocId:a.sharedTextdocId,textdocType:a.type})};return e.jsx("div",{className:"border-token-border-default flex w-full justify-center border-b-[0.5px] px-6",children:e.jsxs("div",{className:se("flex w-full items-center justify-between gap-4 py-4",!s&&"max-w-[1200px]"),children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-token-text-primary line-clamp-1 text-base font-semibold",children:a.title}),e.jsxs("div",{className:"text-token-text-secondary xs:flex-col flex flex-col gap-1.5 text-xs sm:flex-row",children:[e.jsx("div",{className:"cursor-default",children:e.jsx(ae,{withArrow:!1,align:"start",size:"xsmall",theme:"primary",labelTextAlign:"left",wide:!0,contentClassName:"![&>*]:font-normal *:font-normal",customPrimaryLabelColorStyle:"primary",label:l.formatMessage({id:"RkWIbL",defaultMessage:"The content you’re seeing was made by a ChatGPT user. It may be unverified or contain potentially unsafe content that doesn’t reflect the views of OpenAI."}),children:l.formatMessage(x.madeWithCanvas)})}),e.jsx("div",{children:o?e.jsx("a",{className:"underline",href:ie,target:"_blank",rel:"noreferrer",onClick:()=>{R.count(T.CANVAS,"shared.click_report_button",[{key:"type",value:a.type},{key:"authed",value:"false"}]),M.logEvent("Canvas Shared Unauthed Report Button Clicked",{textdocId:a.sharedTextdocId,textdocType:a.type})},children:l.formatMessage(x.report)}):e.jsx("button",{className:"underline",onClick:()=>{R.count(T.CANVAS,"shared.click_report_button",[{key:"type",value:a.type},{key:"authed",value:"true"}]),M.logEvent("Canvas Shared Authed Report Button Clicked",{textdocId:a.sharedTextdocId,textdocType:a.type}),d(!0)},children:l.formatMessage(x.report)})})]})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[C&&e.jsx(oe,{textdocType:a.type,isCodePreviewable:i,onClick:()=>{R.count(T.CANVAS,"shared.click_run_button",[{key:"type",value:a.type},{key:"authed",value:o?"false":"true"}]),M.logEvent("Canvas Shared Run Button Clicked",{textdocId:a.sharedTextdocId,textdocType:a.type}),y()},isCodeRunning:r}),o?e.jsxs(I,{onClick:()=>{u({authType:"login",callbackUrl:p}),m()},icon:w,children:[e.jsx("span",{className:"hidden sm:inline",children:l.formatMessage(x.editWithChatGPT)}),e.jsx("span",{className:"inline sm:hidden",children:l.formatMessage(x.edit)})]}):e.jsxs(I,{as:"link",to:p,openNewTab:!0,icon:w,onClick:m,children:[e.jsx("span",{className:"hidden sm:inline",children:l.formatMessage(x.editWithChatGPT)}),e.jsx("span",{className:"inline sm:hidden",children:l.formatMessage(x.edit)})]})]})]})})},x=S({report:{id:"DHsq+d",defaultMessage:"Report"},editWithChatGPT:{id:"DrcR8S",defaultMessage:"Edit with ChatGPT"},edit:{id:"PpEliN",defaultMessage:"Edit"},madeWithCanvas:{id:"h8SGou",defaultMessage:"You’re viewing user-generated content that may be unverified or unsafe."}}),de=B("Circle12Filled","12",["M6 1a5 5 0 1 0 0 10A5 5 0 0 0 6 1Z"]),ce=B("Circle12Regular","12",["M6 2a4 4 0 1 0 0 8 4 4 0 0 0 0-8ZM1 6a5 5 0 1 1 10 0A5 5 0 0 1 1 6Z"]),ue=[{id:"NUDITY_SEXUAL",label:"Nudity & Sexual Content"},{id:"CHILD_EXPLOITATION",label:"Child Exploitation"},{id:"VIOLENCE_SELF_HARM",label:"Violence & Self-Harm"},{id:"DECEPTIVE_SCAM",label:"Deceptive Behavior & Scams"},{id:"HATE_SPAM",label:"Hate, Harrassment & Spam"},{id:"OTHER_ILLEGAL",label:"Other inappropriate or illegal content"},{id:"IP",label:"Intellectual Property"}],pe={NUDITY_SEXUAL:[{id:t.NUDITY_SEXUAL_ADULT,label:"Adult nudity & sexual content"},{id:t.NUDITY_SEXUAL_ABUSE,label:"Sexual exploitation & abuse"},{id:t.NUDITY_SEXUAL_NCII,label:"Non-consensual or deepfake intimate imagery"}],CHILD_EXPLOITATION:[{id:t.CHILD_EXPLOITATION,label:"Child exploitation"}],VIOLENCE_SELF_HARM:[{id:t.VIOLENCE_SELF_HARM,label:"Suicide & self-harm"},{id:t.VIOLENCE_EATING,label:"Eating disorders"},{id:t.VIOLENCE_TERRORISM,label:"Terrorism"},{id:t.VIOLENCE_THREATS,label:"Threats or incitement to violence"},{id:t.VIOLENCE_GENDER,label:"Gender-based violence"},{id:t.VIOLENCE_WEAPONS,label:"Weapons creation & procurement"}],DECEPTIVE_SCAM:[{id:t.DECEPTIVE_IMPERSONATION,label:"Impersonation"},{id:t.DECEPTIVE_SCAM,label:"Fraud or scam"},{id:t.DECEPTIVE_MISINFO,label:"Misleading information"}],HATE_SPAM:[{id:t.HATE_SPEECH,label:"Hate speech or symbols"},{id:t.HATE_BULLYING,label:"Bullying & harassment"},{id:t.HATE_UNWANTED,label:"Unwanted depiction of real person"},{id:t.HATE_PRIVACY,label:"Privacy violating activities"},{id:t.HATE_SPAM,label:"Spam"}],OTHER_ILLEGAL:[{id:t.OTHER_UNSAFE,label:"Unsafe or prohibited products or activities"},{id:t.OTHER_ANIMAL,label:"Animal harm or welfare issues"},{id:t.OTHER_HEALTH,label:"Risks to public health and safety"},{id:t.OTHER_POLITICAL,label:"Deceptive content of political candidate or election equipment"},{id:t.OTHER_ILLEGAL,label:"Other inappropriate or illegal content"},{id:t.OTHER_DONT_LIKE,label:"I just don’t like it"}],IP:[{id:t.IP_COPYRIGHT,label:"Copyright",url:"https://openai.com/form/copyright-disputes"},{id:t.IP_TRADEMARK,label:"Trademark",url:"https://openai.com/form/trademark-disputes"}]},_={[t.IP_COPYRIGHT]:"https://openai.com/form/copyright-disputes",[t.IP_TRADEMARK]:"https://openai.com/form/trademark-disputes"},g=S({dialogTitle:{id:"reportModal.dialogTitle",defaultMessage:"Why are you reporting this content?"},cancelButton:{id:"reportModal.cancelButton",defaultMessage:"Cancel"},reportButton:{id:"reportModal.reportButton",defaultMessage:"Report"},submittingButton:{id:"reportModal.submittingButton",defaultMessage:"Submitting..."},submitSuccessMessage:{id:"reportModal.submitSuccessMessage",defaultMessage:"Your report has been submitted."},errorMessage:{id:"reportModal.errorMessage",defaultMessage:"An error occurred while submitting your report."},formRedirectMessage:{id:"reportModal.formRedirectMessage",defaultMessage:"Please use this form to report unlawful use of your work:"}}),O=({reportFunction:s,isOpen:a,dismissModal:y})=>{const r=A(),[h,d]=c.useState(null),[o,u]=c.useState(null),[i,C]=c.useState(null),[l,p]=c.useState("toplevel"),m=()=>{u(null),C(null),p("toplevel"),d(null),y()},{mutate:E,isPending:b}=V({mutationFn:async()=>{if(i)return s(i)},onSuccess:()=>{p("success")},onError:()=>{d(r.formatMessage(g.errorMessage))}}),f=i&&_[i];return e.jsxs(le,{testId:"modal-report",isOpen:a,showCloseButton:!0,onClose:m,title:r.formatMessage(g.dialogTitle),type:"success",primaryButton:l==="takedown"&&!f&&e.jsx(I,{onClick:()=>E(),disabled:!i,loading:b,children:b?r.formatMessage(g.submittingButton):r.formatMessage(g.reportButton)}),secondaryButton:l==="takedown"&&!f&&e.jsx(I,{onClick:m,color:"secondary",children:r.formatMessage(g.cancelButton)}),children:[l==="success"&&e.jsx("div",{children:r.formatMessage(g.submitSuccessMessage)}),l==="toplevel"&&e.jsx("div",{className:"flex flex-col gap-4",children:ue.map(n=>e.jsx("div",{className:"flex items-start gap-2",children:e.jsx(I,{className:"text-sm",color:"secondary",onClick:()=>{u(n.id),p("takedown")},children:n.label})},n.id))}),l==="takedown"&&o&&e.jsxs(e.Fragment,{children:[e.jsx(K,{className:"flex grow flex-col gap-4",children:pe[o].map(n=>{const N=n.id===i;return e.jsx(Z,{className:"flex grow items-center justify-start gap-2",value:n.id,children:e.jsx($,{htmlFor:n.id,className:"items-center text-start text-sm",onClick:()=>{C(n.id)},children:e.jsxs("div",{className:"text-token-text-primary flex items-center gap-2",children:[N&&e.jsx(de,{className:"icon-md"}),!N&&e.jsx(ce,{className:"icon-md text-token-text-tertiary"}),n.label]})},n.id)},n.id)})}),f&&e.jsxs("div",{className:"justify-between p-4 text-sm",children:[e.jsx("p",{children:r.formatMessage(g.formRedirectMessage)}),e.jsx("a",{href:_[i],target:"_blank",rel:"noreferrer",className:"text-primary underline",children:_[i]})]}),h&&e.jsx("div",{className:"p-4",children:e.jsx("p",{className:"text-xs text-red-500",children:h})})]})]})};function L(s,a){ne.safePost("/textdoc/shared/{shared_textdoc_id}/report",{parameters:{path:{shared_textdoc_id:s.sharedTextdocId}},requestBody:{takedown_type:a}})}function be({sharedTextdoc:s,disableNetworkRequests:a,disablePermissions:y,unsafeAllowAllNetworkRequests:r,showHeader:h=!0}){const d=k(s.type)&&H(s.type,s.content),[o,u]=c.useState(d),[i,C]=c.useState(!1),l=A(),p=c.useRef(null),m=c.useRef(null),E=c.useRef(null),[b,f]=c.useState(!1),n=d&&o,N=()=>{o?(E.current?.stopCode(),u(!1)):(u(!0),E.current?.runCode(s.type,s.content).finally(()=>u(!1)))},{type:U,content:D}=s,j=z(()=>{d&&(u(!0),E.current?.runCode(U,D))});return c.useEffect(()=>{j()},[j]),s.type===Q.DOCUMENT?e.jsxs("div",{className:"flex h-full w-full flex-col items-center overflow-y-auto",children:[e.jsx("div",{className:"bg-token-main-surface-secondary flex w-full grow justify-center",children:e.jsxs("div",{className:"bg-token-main-surface-primary w-full max-w-[1000px]",style:{boxShadow:"0px 4px 32px 0px rgba(0, 0, 0, 0.08)"},children:[h&&e.jsx(P,{areButtonsFullWidth:!1,sharedTextdoc:s,onClickCodePreview:()=>{},isCodeRunning:o,showRunCodeButton:!1,setIsReportModalOpen:f}),e.jsx("div",{className:"px-12 pt-12",children:e.jsx(W,{value:s.content,onChange:()=>{},isDisabled:!0,showChanges:!1,comments:[],diff:null,safeUrls:[],contentRefereces:[],wrapperClassName:"pb-12"})})]})}),e.jsx(O,{reportFunction:v=>{L(s,v)},isOpen:b,dismissModal:()=>f(!1)})]}):k(s.type)?e.jsxs("div",{className:"justify-top flex h-full w-full flex-col justify-between overflow-auto",children:[e.jsxs("div",{className:"flex grow flex-col justify-start overflow-auto",children:[h&&e.jsx(P,{areButtonsFullWidth:!0,sharedTextdoc:s,onClickCodePreview:N,isCodeRunning:o,showRunCodeButton:!d,setIsReportModalOpen:f}),e.jsx("div",{className:n?"grow":void 0,children:e.jsx(F,{isShare:!0,ref:m,enableTransition:d,visuallyHidden:!n,title:s.title,disableNetworkRequests:a,disablePermissions:y,unsafeAllowAllNetworkRequests:r})}),!n&&e.jsx("div",{children:e.jsx(Y,{id:"published-codemirror",value:s.content,hoveredCommentId:null,focusedCommentId:null,language:J(s.type),readonlyReason:ee({isReadonly:!0,isRequestActive:!1,isTextdocStreaming:!1,isHistoricalVersion:!1,isShowingChanges:!1,isReadonlyFromQueryParam:!1}),editorRef:p,isPreview:!0})})]}),e.jsx("div",{className:!o&&d?"hidden":"",children:e.jsx(G,{ref:E,isOpen:i,onOpenChange:C,sandboxRef:m,textdocId:"publishedCanvasTextdoc",textdocContent:s.content,textdocTitle:s.title,isTextdocAttachedPending:!1,highlightLine:v=>p.current?.highlightLine(v),isRequestActive:!1,createTextdocTurn:async()=>{}})}),e.jsx(O,{isOpen:b,dismissModal:()=>f(!1),reportFunction:v=>{L(s,v)}})]}):e.jsx("p",{children:l.formatMessage(me.unsupportedTextdocType)})}const me=S({unsupportedTextdocType:{id:"4hdXQX",defaultMessage:"Content type is not supported"}});export{be as T};
//# sourceMappingURL=l12f3ah2dx3larti.js.map
