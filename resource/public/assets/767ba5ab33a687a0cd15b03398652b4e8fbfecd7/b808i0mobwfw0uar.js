import{r as c,j as s,u as v,M as h,d as B}from"./j12so9ru57hpoz1y.js";import{dS as b,dT as k,dU as p,dV as N,dW as Y}from"./jn7p98x7qxquz26a.js";import{H as $}from"./b4wy8ndq94672kqa.js";function E({className:d,elementRef:o,item:i,isActive:e,testId:t,hideOverflowMenu:a=!1}){return s.jsx("li",{className:"relative","data-testid":t,children:s.jsx($,{className:d,conversation:i,isActive:e,elementRef:o,testId:t,hideOverflowMenu:a})})}const S=c.memo(E),u=B({historyBucketToday:{id:"history.bucket.today",defaultMessage:"Today"},historyBucketYesterday:{id:"history.bucket.yesterday",defaultMessage:"Yesterday"},historyBucketLastSeven:{id:"history.bucket.lastSeven",defaultMessage:"Previous 7 Days"},historyBucketLastThirty:{id:"history.bucket.lastThirty",defaultMessage:"Previous 30 Days"}}),F=5;function H(d,o){const i=v();return c.useMemo(()=>d.reduce((e,t)=>{const a=new Date(t.update_time??t.create_time??0),y=b(new Date,a);if(y===0)e.recent.today.items.push(t);else if(y<=1)e.recent.yesterday.items.push(t);else if(y<=7)e.recent.lastSeven.items.push(t);else if(y<=30)e.recent.lastThirty.items.push(t);else if(k(a)){const m=p(a),r=N(a),n=`${m}-${r}`;e.dynamicMonths[n]?e.dynamicMonths[n].items.push(t):e.dynamicMonths[n]={label:i.formatDate(a,{month:"long"}),items:[t]}}else{const r=`${p(a)}-`;e.dynamicYears[r]?e.dynamicYears[r].items.push(t):e.dynamicYears[r]={label:i.formatDate(a,{year:"numeric"}),items:[t]}}return e},{recent:{today:{label:s.jsx(h,{...u.historyBucketToday}),items:[]},yesterday:{label:s.jsx(h,{...u.historyBucketYesterday}),items:[]},lastSeven:{label:s.jsx(h,{...u.historyBucketLastSeven}),items:[]},lastThirty:{label:s.jsx(h,{...u.historyBucketLastThirty}),items:[]}},dynamicMonths:{},dynamicYears:{}}),[o,d])}function L({activeId:d,bucketedItems:o,items:i,hasNextPage:e,infiniteScrollTriggerElementRef:t,hideOverflowMenu:a}){return s.jsx(s.Fragment,{children:[o.recent,o.dynamicMonths,o.dynamicYears].flatMap((y,m)=>s.jsx(c.Fragment,{children:Object.entries(y).map(([r,{items:n,label:x}],M)=>{if(r!=="today"&&!n.length)return null;const g=!!n.find(l=>i.length>0&&l.id===i[0]?.id);return n.length>0&&s.jsxs("div",{className:"relative mt-5 first:mt-0 last:mb-5",children:[s.jsx("div",{className:"bg-token-sidebar-surface-primary sticky top-0 z-20",children:s.jsx("span",{className:"flex h-9 items-center",children:s.jsx(Y,{children:x})})}),s.jsx("ol",{children:n.map((l,f)=>{const T=g&&f===0,j=e&&i[i.length-F-1]?.id===l.id?t:void 0;return s.jsx(S,{item:l,hideOverflowMenu:a,isActive:d===l.id,isFirstItem:T,elementRef:j,testId:`history-item-${f}`},`history-item-${l.id}-${r}`)})})]},`${r}-${m}-${M}`)})},`category-${m}`))})}export{L as H,S as a,H as u};
//# sourceMappingURL=b808i0mobwfw0uar.js.map
