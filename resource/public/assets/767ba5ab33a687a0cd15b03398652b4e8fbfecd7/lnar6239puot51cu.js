import{j as e,M as h,r as g,a9 as R}from"./j12so9ru57hpoz1y.js";import{cR as x,ag as _,ae as k,ak as S,aX as N,cS as C,cT as E,cU as T}from"./jn7p98x7qxquz26a.js";import{aO as L,at as b,a as F,bN as w,P as y,cG as j,fS as z,W as G,fT as O}from"./j5zd9vs1l0bwsjqa.js";import{f as P}from"./j92odb70l0m0fpoz.js";function q({clientThreadId:t,turnIndex:a,messageId:n,scrollToHeader:s=x.Citations,shouldAnimateScroll:l,isInSidebar:i=!1}){const{value:r}=L("756982148"),[d,c]=A(t,n),o=b(t,f=>j(z(G.getNode(f,n).message))),u={clientThreadId:t,messageId:n,turnIndex:a},p=P(o,f=>f.entries).toSorted((f,M)=>(M?.pub_date??0)-(f?.pub_date??0));return e.jsxs("div",{className:F("bg-token-main-surface-primary flex w-full flex-col",i?"mt-[calc(var(--threadFlyOut-leading-height,57px)*-1)] min-h-screen":"mt-0",i?"":"border-token-border-default border-t"),children:[r&&c&&c.length>0&&e.jsx(m,{title:e.jsx(h,{id:"fYO0jL",defaultMessage:"Links"}),items:c,analyticsMetadata:{...u,linkType:"links"},scrollToHeader:s===x.Links,shouldAnimateScroll:l,messageId:n}),e.jsx(m,{title:e.jsx(h,{id:"dlVlo6",defaultMessage:"Citations"}),items:d,analyticsMetadata:{...u,linkType:"citation"},scrollToHeader:s===x.Citations,shouldAnimateScroll:l,messageId:n}),e.jsx(m,{title:e.jsx(h,{id:"Gz+4tE",defaultMessage:"More"}),items:p,analyticsMetadata:{...u,linkType:"search_result"},messageId:n,scrollToHeader:s===x.SearchResults,shouldAnimateScroll:l})]},`${a}-${t}`)}function m({title:t,items:a,analyticsMetadata:n,scrollToHeader:s,messageId:l,shouldAnimateScroll:i}){const r=g.useRef(null);return g.useEffect(()=>{r.current&&s&&setTimeout(()=>{r.current&&r.current.scrollIntoView({behavior:i?"smooth":"instant"})},300)},[s,i]),!a||a.length===0?null:e.jsxs("div",{ref:r,children:[e.jsx(v,{className:"border-token-border-sharp bg-token-main-surface-primary text-token-text-primary sticky top-0 z-1 flex h-[calc(var(--header-height,3.5rem)+1px)] items-center border-b px-6 pt-4 pb-4 text-sm font-medium",children:t}),e.jsx("div",{className:"flex flex-col px-3 py-2",children:a.map((d,c)=>e.jsx(v,{index:c,children:e.jsx(W,{item:d,analyticsMetadata:{...n,groupIndex:c},messageId:l},c)},`${t}-${c}`))})]})}function v({children:t,index:a=0,className:n=""}){return e.jsx(R.div,{className:n,initial:{opacity:0},animate:{opacity:1},transition:{delay:(a+1)*.03+.2},children:t})}function W({item:t,analyticsMetadata:a,messageId:n}){const s=t.attribution??_(t.url,"short"),l=r=>"ref_id"in r&&"content_type"in r;return e.jsxs($,{analyticsMetadata:a,href:t.url,target:"_blank",rel:"noopener",className:"hover:bg-token-main-surface-secondary flex flex-col gap-0.5 rounded-xl px-3 py-2.5",onMouseEnter:()=>{k.setHighlightBySource(n,t)},onMouseLeave:()=>{k.clearHighlights()},children:[e.jsxs("div",{className:"line-clamp-1 flex h-6 items-center gap-2 text-xs",children:[e.jsx(S,{url:t.url,className:"icon-sm bg-token-main-surface-primary rounded-full object-cover",size:32,minSize:20,fallback:e.jsx(N,{className:"icon-sm text-token-text-quaternary"})}),s,l(t)&&e.jsx(C,{searchResult:t,className:"text-token-text-tertiary inline h-4 w-4"})]}),e.jsx("div",{className:"line-clamp-2 text-sm font-semibold",children:t.title}),(t.pub_date??t.snippet)&&e.jsxs("div",{className:"text-token-text-secondary line-clamp-2 text-sm leading-snug font-normal",children:[t.pub_date&&e.jsx(E,{date:t.pub_date}),t.pub_date&&t.snippet&&" â€” ",t.snippet]})]})}const $=g.forwardRef(function(a,n){const{analyticsMetadata:s,...l}=a,{groupIndex:i,linkType:r,...d}=s,c={...w(d),url:a.href,section_index:(i+1).toString(),link_type:"text",section:r,section_location:"sidebar"};g.useEffect(()=>{y.logEventWithStatsig("link_action","link_action",{...c,action:"show"})},[]);const{target:o,...u}=l,p=o;return e.jsx("a",{ref:n,...u,target:p,onClick:f=>{a.onClick?.(f),f.stopPropagation(),y.logEventWithStatsig("link_action","link_action",{...c,action:"click"})}})}),A=(t,a)=>b(t,n=>{const s=j(O(n?.tree.getNodeByIdOrMessageId(a).message)),l=T(s);let i=[];const r=s.filter(o=>o.type==="navigation");r.length>0&&(i=r.flatMap(o=>o.domains.flatMap(u=>[{title:u.title,snippet:u.domain,url:u.url},...u.sub_domains.map(p=>({title:p.title,snippet:u.domain,url:p.url}))])));const d=s.filter(o=>o.type==="tldr").filter(o=>!o.used_as_navigation);d.length>0&&d.forEach(o=>{i.push({title:o.display_title,url:o.url})});const c=i.length>0?i:void 0;return[l,c]});export{v as AnimatedContainer,q as SearchSources};
//# sourceMappingURL=lnar6239puot51cu.js.map
