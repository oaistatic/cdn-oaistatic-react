const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/nw4g6hlq70oxillh.js","assets/j12so9ru57hpoz1y.js","assets/j5zd9vs1l0bwsjqa.js","assets/root-eh80jqkj.css","assets/c7o2kntlrw17fr8t.js","assets/kfx9sm4pjzhy5hcb.js","assets/jn7p98x7qxquz26a.js","assets/conversation-small-cmjjxogj.css","assets/4b26elgpu3szmqym.js","assets/jue5tlf16awjqha1.js","assets/ex9799r9kkyop0zg.js","assets/j2m3ef69iou998eo.js","assets/egjzck8f21ldiiq8.js","assets/n5601invkykfg1ys.js","assets/b0v1yruiy44zd1p9.js","assets/msp412gwqdn605it.js","assets/ok8fnoyzbnoyk9qs.js","assets/owhjnpwqw9ddu7v0.js","assets/d8hi8vzea1zd4sdu.js","assets/hxt8zt4ovcs39phn.js","assets/khnik5496p676mu9.js","assets/b3uizo711j30otmf.js","assets/n8jfalcwtj8ijtra.js","assets/nj8u2ks29f8q72fp.js","assets/n57wfl6xivwdsvwc.js","assets/euq7ybw4dhrsufo2.js"])))=>i.map(i=>d[i]);
import{at as Be,f6 as oa,a as A,P as U,V as ia,B as Me,cU as Ve,r as $e,o as ra,f4 as la,T as ge,gA as ca,dg as da,f5 as Y,bD as P,q as he,aI as B,bL as me,c5 as St,aq as wt,dT as ua,aL as Ct,gD as ga,l as X,m as Z,s as lt,N as ct,aO as ue,aU as Qe,cv as ha,dM as ma,R as pa,A as fa,ao as Ne,Y as Ke,c2 as xa,e0 as jt,cy as _t,cz as Mt,al as ze,bT as va,bc as ya,b2 as ba,bE as Sa,D as dt,h8 as wa,ar as Ca,aP as ja,dl as _a,eg as Ma,W as J,h1 as Na,fO as ka,dN as Ta,bf as Aa}from"./j5zd9vs1l0bwsjqa.js";import{r as o,f as Xe,c as Ze,j as e,a9 as qe,M as L,u as F,d as Nt,w as Ea,L as Pa,v as Ia,R as La,l as Ra}from"./j12so9ru57hpoz1y.js";import{nX as kt,hi as Tt,nY as pe,hP as Ha,cF as At,lo as Et,hR as Wa,hS as Pt,f as ut,hU as Oa,hT as Ua,nZ as Da,lC as Ga,aP as gt,n_ as Fa,aE as Va,go as It,c_ as za,c$ as qa,n$ as Ya,o0 as _e,jz as Ue,er as Ba,eJ as $a,aQ as Qa,aC as Ka,d0 as Xa,o1 as Za,t as Ye,d1 as Ja,P as Lt,F as es,gq as Rt,o2 as Ht,o3 as ht,o4 as ts,Y as Wt,o5 as Ot,o6 as ee,o7 as mt,o8 as as,o9 as pt,ln as ss,oa as Ut,ob as ns,oc as os,od as is,oe as rs,of as ls,og as cs,oh as Je,X as Dt,oi as ds,oj as us,bE as gs,bO as Gt,fC as hs,fm as ms,U as ke,O as ps,ok as fs,ol as xs,gl as vs,gn as ys,gp as bs,om as ft,on as Ss,fH as Ft,oo as ws,op as Cs,oq as js,iU as _s,cN as Ms,or as Ns,os as N,an as R,lH as ks,ot as Ts,lG as As,cb as Es,cx as Ps,ou as Is,i5 as xt,d as Ls,nC as Rs,ov as Hs,ow as Ws,H as Vt,eu as Os,R as et,u as Us,ox as zt,f5 as Ds,oy as Gs,y as Fs,oz as Vs,gv as zs,oA as qs,fL as Ys,oB as Bs,hj as $s,oC as Qs,gA as Ks,gB as vt,gL as Xs,V as Zs,gx as Js,oD as en,cI as tn,iE as an,gu as sn,oE as nn,oF as De,oG as on,oH as rn,fg as ln,oI as cn,je as qt,oJ as dn,oK as un,ka as gn,eN as hn,oL as mn,oM as pn,oN as fn,oO as xn,oP as vn,gz as yn,oQ as bn,oR as Sn,oS as wn,oT as Cn,oU as jn,oV as _n,oW as Mn}from"./jn7p98x7qxquz26a.js";import{C as tt,u as at,d as te,P as Nn}from"./b0v1yruiy44zd1p9.js";import{C as kn,N as Tn,e as An}from"./j2m3ef69iou998eo.js";import{u as En,b as Pn}from"./ojd4yynl6f6f4h3l.js";import{I as In,a as Ln,M as Rn,F as Hn,T as Wn}from"./nc07k7y06adedb9d.js";import{T as On}from"./jqgeyuwq00z6gkku.js";import"./cx64odxk6g9mmfxk.js";const Un=({assetPointer:t,isInFocusMode$:a,serverThreadId:n,transformationId:r,width:i,height:s,onEdit:u})=>{const g=kt(),[x,v]=o.useState(!1),[p]=Be(n,d=>[d?.modelId]),f=Tt(n),j=pe(),l=Xe(),c=Ze(),b=o.useRef(null);o.useEffect(()=>{In.prefetch()},[]),o.useEffect(()=>{v(!1),a?.set(!1)},[t,a]),o.useEffect(()=>oa(()=>{a&&!a()&&v(!1)}),[a]),Ha(o.useMemo(()=>({image:{asset_pointer:t,metadata:{dalle:{gen_id:r},generation:{gen_id:r}},height:s,width:i},currentDrawnShape:null,onCleared:()=>{},getImageData:()=>{}}),[r,t,s,i]));const _=d=>{j.transitionToPage({type:"conversation",value:void 0},()=>{u?.(),Ga(l,c,n,void 0,!0),f(d)})},h=At();return e.jsx(Et,{children:e.jsx(qe.div,{layout:!g,transition:{type:"spring",duration:.2},className:A(x?"w-full rounded-3xl":"mx-auto rounded-full"),children:x?e.jsx(Wa,{value:{isImageGenEditor:!0,isInpainting:!1,onCancelInpaint:()=>{}},children:e.jsx(tt,{clientThreadId:n,children:e.jsx(Ln,{clientThreadId:n,currentModelId:p??Pt(void 0).id,disableDraftPersistence:!0,onRequestCompletion:async d=>{a?.set(!1),U.logEventWithStatsig("chatgpt_web_image_library_lightbox_image_edit_submitted","chatgpt_web_image_library_lightbox_image_edit_submitted"),ia(n)==null&&await(b.current??ut(n,!0)),_(await Oa(d))},onContinueGenerating:d=>_(Ua(d)),hideHeader:!0,isNewThread:!1})})}):e.jsx(Me,{color:"secondary",size:h?"large":void 0,className:"px-4 max-md:min-w-[50vw]",onClick:()=>{U.logEventWithStatsig("chatgpt_web_image_library_lightbox_image_composer_opened","chatgpt_web_image_library_lightbox_image_composer_opened"),v(!0),a?.set(!0),b.current=ut(n,!0).finally(()=>{b.current=null})},icon:h?void 0:Da,children:e.jsx(qe.div,{initial:g?!1:{opacity:0},animate:{opacity:1},children:e.jsx(L,{id:"BD4ZLh",defaultMessage:"Edit image"})})})})})},Dn=({assetPointer:t,serverThreadId:a,messageId:n})=>{const r=F(),[i,s]=o.useState(!1),u=En({assetPointer:t,clientThreadId:a,imageGenMessageId:n}),g=o.useCallback(async()=>{s(!0);try{await u()}finally{s(!1)}U.logEventWithStatsig("chatgpt_web_image_library_lightbox_image_share_clicked","chatgpt_web_image_library_lightbox_image_share_clicked")},[u]),x=r.formatMessage({id:"lqgWN2",defaultMessage:"Share"});return e.jsxs(e.Fragment,{children:[e.jsx(Me,{className:"max-md:hidden",color:"secondary",icon:i?Ve:gt,onClick:g,disabled:i,children:x}),e.jsx(Me,{color:"ghost",className:"text-token-text-secondary w-10 md:hidden",icon:i?Ve:gt,size:"xl",onClick:g,label:x,disabled:i})]})},Gn=({initialIndex:t,includeArchived:a,onScrollToEnd:n,onClose:r})=>{const i=F(),s=$e(),u=ra(s).checkGate("1520205231"),{archiveMutation:g}=Fa(a),x=Va(),[v]=o.useState(()=>la(!1)),p=pe(),f=Xe(),{images:j}=It(a);return e.jsxs(za,{imageList:j,initialIndex:t??0,onClose:r,isInFocusMode$:v,onScrollToEnd:n,children:[e.jsx(qa,{children:({title:l,createdAt:c})=>e.jsxs("div",{className:"flex min-h-12 min-w-0 flex-col items-center max-md:h-full",children:[e.jsx("h2",{className:"text-token-text-primary max-w-full min-w-0 grow justify-center self-start truncate text-base text-balance max-md:flex max-md:items-center max-md:ps-2",children:e.jsx("span",{className:"line-clamp-2",children:l??e.jsx(L,{id:"OIDfvR",defaultMessage:"Image Generation"})})}),c&&e.jsx("span",{className:"text-token-text-secondary text-sm max-md:hidden",children:c.toDateString()})]})}),e.jsxs(Ya,{children:[e.jsx(_e,{children:({conversationId:l,messageId:c})=>e.jsx(Ue,{className:"aspect-square",icon:Ba,onClick:b=>{U.logEventWithStatsig("chatgpt_web_image_library_lightbox_image_open_in_chat_clicked","chatgpt_web_image_library_lightbox_image_open_in_chat_clicked"),b.preventDefault(),p.addClassToCurrentTransition(["from-lightbox","to-conversation"]),p.transitionToPage({type:"conversation",value:void 0},async()=>{r(null),await f(`/c/${l}?message=${c}`,{preventScrollReset:!0})})},"aria-label":i.formatMessage(G.openInChat)})}),u&&e.jsx(_e,{children:({id:l,archived:c})=>e.jsx(ge,{label:i.formatMessage(c?G.unarchive:G.archive),sideOffset:0,children:e.jsx(Ue,{className:"aspect-square",icon:c?ca:$a,onClick:()=>{U.logEventWithStatsig(c?"chatgpt_web_image_library_lightbox_image_unarchive_clicked":"chatgpt_web_image_library_lightbox_image_archive_clicked",c?"chatgpt_web_image_library_lightbox_image_unarchive_clicked":"chatgpt_web_image_library_lightbox_image_archive_clicked"),g.mutate({imageId:l,operation:c?"unarchive":"archive"})},"aria-label":i.formatMessage(c?G.unarchive:G.archive)})})}),e.jsx(_e,{children:({url:l,title:c})=>e.jsx(ge,{label:i.formatMessage(G.download),sideOffset:0,children:e.jsx(Ue,{className:"aspect-square",icon:Qa,onClick:()=>{U.logEventWithStatsig("chatgpt_web_image_library_lightbox_image_download_clicked","chatgpt_web_image_library_lightbox_image_download_clicked"),Ka({url:l,fileName:`${c??i.formatMessage({id:"cYxKbe",defaultMessage:"My ChatGPT image"})}.png`})},"aria-label":i.formatMessage(G.download)})})}),x()&&e.jsx(_e,{children:({assetPointer:l,conversationId:c,messageId:b})=>!c||!b?null:e.jsx(ge,{label:i.formatMessage(G.share),sideOffset:0,children:e.jsx(Dn,{assetPointer:l,serverThreadId:c,messageId:b})})})]}),e.jsx(Xa,{children:({url:l,width:c,height:b,title:_,position:h})=>e.jsx("img",{className:Za("bg-tertiary block h-fit max-h-full w-auto rounded-lg object-contain shadow-xl max-md:rounded-none max-md:shadow-none",h==="current"&&"[view-transition-name:var(--vt-active-image)]"),style:h&&h!=="current"?{viewTransitionName:`var(--vt-image-${h})`}:void 0,src:Ye(l),width:c,tabIndex:0,height:b,alt:_??""})}),e.jsx(Ja,{children:({width:l,height:c,assetPointer:b,conversationId:_,transformationId:h})=>_&&b&&e.jsx(Un,{isInFocusMode$:v,onEdit:()=>r(null),width:l,height:c,assetPointer:b,serverThreadId:_,transformationId:h})})]})},G=Nt({download:{id:"Z23tMl",defaultMessage:"Download image"},openInChat:{id:"Eh8G/f",defaultMessage:"Open in Chat"},archive:{id:"yOqxdz",defaultMessage:"Hide image"},unarchive:{id:"yEUKZl",defaultMessage:"Show image"},share:{id:"RdHYRY",defaultMessage:"Share image"}}),Fn=({disableEntryAnimation:t=!1,hasMoreImages:a,count:n,images:r,includeArchived:i,isFetchingMore:s,onScrollToEnd:u})=>{const g=a?Math.max((n??0)-(r.length??0),0):0,[x,v]=o.useState(!1),[p,f]=o.useState(null),j=pe(),l=$e(),{clientThreadId:c}=at(),b=o.useCallback(_=>{U.logEventWithStatsig("chatgpt_web_image_library_lightbox_opened","chatgpt_web_image_library_lightbox_opened"),v(!0),f(_),j.transitionToPage({type:"lightbox",value:void 0},()=>{da(l,({closeModal:h})=>e.jsx(Lt,{clientThreadId:c,children:e.jsx(es,{children:e.jsx(Rt,{children:e.jsx(Gn,{includeArchived:i,onClose:d=>{if(d==null){h();return}Ht({update:()=>{h(),f(d),v(!0)},className:"from-lightbox",forceFlushSync:!0}).finished.then(()=>v(!1))},initialIndex:_,onScrollToEnd:u})})})})),v(!1)})},[c,l,i,u,j]);return e.jsxs("div",{className:"w-full",children:[e.jsx("div",{className:"grid min-h-60 w-full grid-cols-2 gap-4 max-md:gap-0.5 sm:grid-cols-3 md:grid-cols-4",children:r.map(({url:_,thumbnail:h,width:d,height:y,title:T=null},m)=>e.jsx(ht,{disableEntryAnimation:t,index:m,active:x&&p===m,src:Ye(_),onClick:b,thumbnail:Ye(h),width:d,height:y,alt:T,children:m===r.length-1&&e.jsx(ts,{onScrollToEnd:u})},m)).concat(new Array(g).fill(null).map((_,h)=>{const d=r.length+h;return e.jsx(ht,{index:d,disableEntryAnimation:t,isPlaceholder:!0,active:!1},d)}))}),e.jsx("div",{className:"flex h-8 items-center justify-center",children:a&&s&&e.jsx(Ve,{})})]})};function Vn({clientThreadId:t,mobile:a}){const n=te(),[r,i]=o.useState(),s=At(),{updateSystemHint:u}=Wt(),{transitionToNextPage:g}=Ot(),x=ee(),v=Y(x.isImageGenLandingPageEnabled$),p=Y(x.isAllPagesEnabled$),f=mt.useState(({persistedSystemHints:h})=>h),j=mt.useState(({availableHints:h})=>h);if(s&&!a)return null;const l=Array.from(f)[0],c=[],b=a?rs:ls;v&&!p?c.push(as[P.PictureV2]):p&&c.push(...b);const _=h=>{u(h,{clientThreadId:t}),requestAnimationFrame(()=>{requestAnimationFrame(()=>{n?.focus()})})};return e.jsx("div",{className:pt.vanguardAppLaunchersContainer,children:e.jsx(ss,{verticalMargin:"none",verticalPadding:"none",horizontalPadding:"standard",children:e.jsx("ol",{className:A("start-0 end-0 flex w-full justify-center gap-10 select-none md:absolute md:mt-12",pt.vanguardAppLaunchers),children:c.map(h=>{const d=j.find(T=>T.systemHint===h.systemHint),y=d?.systemHint||h.systemHint;return e.jsxs("li",{children:[e.jsx(Ut,{className:"py-4",systemHint:y,onClick:()=>{if(d?.isPopulatedByDefault){i(y);return}l===y?_(null):ns(y)?(n.setAutocompletions([]),g({path:os(y),nextPageType:{type:"landing-page",value:y}})):_(y)},isSelected:l===y}),y===r&&e.jsx(is,{open:!0,systemHint:y,onOpenChange:()=>i(void 0)})]},y)})})})})}function zn(t){const{clientThreadId:a}=t;return e.jsx(tt,{clientThreadId:a,children:e.jsx(Yn,{...t})})}function qn({clientThreadId:t,headlineOption:a,currentModelId:n,isModelLoaded:r,overrideMessage:i}){const s=Je(),{getAndroidKeyboardLayout:u}=gs(),g=te(),{isFocused:x,autocompletions:v}=Ct(g.store),p=x&&v.length>0,f=ee(),j=Y(f.isImageGenLandingPageEnabled$);return e.jsxs(qe.div,{initial:{opacity:0},animate:{opacity:p?0:1},exit:{opacity:0},transition:{duration:.1},className:A("text-token-text-primary mt-[var(--screen-optical-compact-offset-amount)] [display:var(--display-hidden-until-loaded,flex)] shrink flex-col items-center justify-center overflow-hidden",u()?"keyboard-open:h-[calc(100%-var(--screen-keyboard-height,0px)-var(--composer-height,100px))] h-full motion-safe:[transition:height_0.3s_var(--easing-common)]":"h-full",p?"pointer-events-none":"",s?"@lg/thread:hidden":"lg:hidden"),children:[a==="CHATGPT_LOGO"?e.jsx(St,{className:"inline-block h-12 w-12"}):e.jsx(Yt,{headlineOption:a,overrideMessage:i}),!j&&e.jsx(Rn,{isModelLoaded:r,currentModelId:n,clientThreadId:t}),e.jsx(Vn,{clientThreadId:t,mobile:!0})]})}function Yn({clientThreadId:t,currentModelId:a,isModelLoaded:n}){const r=te(),{isUnauthenticated:i}=he();cs(r);const{layer:s}=B("4031588851"),{layer:u}=B("3533083032",{shouldLogExposure:!1}),g=i?u:s,x=Je(),{isUXUpdatesEnabled:v}=me(),p=v?"HOW_CAN_I_HELP":g.get("headline_option","HELP_WITH"),f=Dt(),j=f.has(P.Research),l=ds(Array.from(f)[0]),c=v&&l?l:j?k.deepResearchPlaceholder:void 0;return e.jsxs("div",{className:A("flex grow items-center justify-center",x?"@lg/thread:items-end":"lg:items-end"),children:[e.jsx("div",{className:A("hidden text-center @lg/thread:block","mb-5",v&&"max-md:mt-[-80px] md:-mt-48",x?"@lg/thread:block":"lg:block"),children:p==="CHATGPT_LOGO"?e.jsx(St,{className:"inline-block h-12 w-12"}):e.jsx(Yt,{headlineOption:p,overrideMessage:c})}),e.jsx(qn,{headlineOption:p,overrideMessage:v?c:void 0,clientThreadId:t,isModelLoaded:n,currentModelId:a})]})}function Bn({headlineOption:t,overrideMessage:a}){function n({name:d}){return e.jsx(ge,{label:s.formatMessage(k.editNicknameTooltip),delayDuration:300,side:"top",sideOffset:0,children:e.jsx("button",{onClick:()=>{ke.setAutoHighlightNicknameInput(!0),ke.openModal(ps.UserContext)},style:{textDecoration:"none",transition:"color 0.2s",lineHeight:"42px"},onMouseEnter:y=>{y.currentTarget.className="text-token-text-secondary"},onMouseLeave:y=>{y.currentTarget.className="text-inherit"},children:d})})}function r(){const d=[],y=[];d.push("READY_WHEN_YOU_ARE","ON_YOUR_MIND","WHAT_ARE_YOU_WORKING_ON","AGENDA_TODAY","SHOULD_WE_BEGIN"),y.push("GOOD_TO_SEE_YOU","DIVE_IN","HOW_CAN_I_HELP",...d);const T=y[Math.floor(Math.random()*y.length)],I=`${d[Math.floor(Math.random()*d.length)]} | ${T}`;X.setCookie(Z.headlineMessage,I)}function i(){const d=X.getCookie(Z.GreetingName),T=X.getCookie(Z.headlineMessage)?.split("|"),m=T?.[0]?.trim(),I=T?.[1]?.trim();return{cookieName:d,isReadyForPersonalized:!!d&&d.length<=g,headline:m,namedHeadline:I}}const s=F(),{layer:u}=B("1704793646"),g=u.get("name_char_limit",20),[x,v]=o.useState(i),{isUnauthenticated:p}=he(),f=Gt(),l=hs(!p&&!!f)?.data,c=ms(),b=u.get("greeting_web",!1),_=u.get("full_name_llm",!1);o.useEffect(()=>{if(b&&c){if(f&&l){const d=ga(l,f,_);X.setCookie(Z.GreetingName,d),lt.count(ct.MOONSHINE,"splashScreenV2.greeting_cookie_name_set_web")}r()}else X.deleteCookie(Z.GreetingName),X.deleteCookie(Z.headlineMessage)},[l,f,b,_,c]),o.useEffect(()=>{const d=()=>{if(b&&c){const{cookieName:y,isReadyForPersonalized:T}=i();v(m=>({...m,cookieName:y,isReadyForPersonalized:T}))}};return window.addEventListener("refreshGreeting",d),()=>window.removeEventListener("refreshGreeting",d)}),o.useEffect(()=>{b&&c&&lt.count(ct.MOONSHINE,"splashScreenV2.greeting_shown_web")},[b,c]);let h;return a?h=s.formatMessage(a):x.isReadyForPersonalized&&b?h=e.jsx(e.Fragment,{children:e.jsx(L,{...Ge[x.namedHeadline??t].withName,values:{name:e.jsx(n,{name:x.cookieName??""},"name")}})}):b?h=s.formatMessage(Ge[x.headline??t].original):h=s.formatMessage(Ge[t].original),h}function Yt({headlineOption:t,overrideMessage:a}){const n=wt(),r=o.useRef(null),[i,s]=o.useState({isTempChatVisible:n,titleTranslate:0});ua(()=>{s({isTempChatVisible:n,titleTranslate:n?-((r.current?.offsetHeight??0)+20):0})},[n]);const{isUXUpdatesEnabled:u}=me();return e.jsx("div",{className:"relative inline-flex justify-center text-center text-2xl leading-9 font-semibold",children:e.jsx("div",{children:e.jsxs("div",{className:"grid-cols-1 items-center justify-end",style:{viewTransitionName:"var(--vt-splash-screen-headline)"},children:[e.jsx("h1",{className:A("motion-safe:[transition:0.3s_transform_var(--spring-standard),0.5s_opacity_var(--spring-standard),0.5s_visibility_var(--spring-standard)]",!u&&"text-[28px] leading-[34px] font-semibold tracking-[0.38px]",i.isTempChatVisible?"invisible opacity-0":"opacity-100",u&&"text-[28px] leading-[50px] font-medium tracking-[-0.42px] sm:text-[40px] md:-mt-16"),"aria-hidden":n,style:{transform:`translateY(${i.titleTranslate}px)`},children:e.jsx("div",{className:"whitespace-pre-wrap",children:e.jsx(Bn,{headlineOption:t,overrideMessage:a})})}),e.jsx("div",{className:A("absolute bottom-0 motion-safe:[transition:0.3s_transform_var(--spring-standard),0.5s_opacity_var(--spring-standard),0.5s_visibility_var(--spring-standard)]",i.isTempChatVisible?"translate-y-0 opacity-100":"invisible translate-y-full opacity-0"),"aria-hidden":!n,ref:r,children:e.jsx(us,{})})]})})})}const k=Nt({whatCanIHelpWith:{id:"SplashScreenV2.whatCanIHelpWith",defaultMessage:"What can I help with?"},whatCanIHelpWithWithName:{id:"SplashScreenV2.whatCanIHelpWith.withName",defaultMessage:"What can I help with, {name}?"},whereShouldWeStart:{id:"SplashScreenV2.whereShouldWeStart",defaultMessage:"Where should we start?"},whereShouldWeStartWithName:{id:"SplashScreenV2.whereShouldWeStart.withName",defaultMessage:"Where should we start, {name}?"},askChatgptAnything:{id:"SplashScreenV2.askChatgptAnything",defaultMessage:"Ask ChatGPT anything"},askChatgptAnythingWithName:{id:"SplashScreenV2.askChatgptAnything.withName",defaultMessage:"Ask ChatGPT anything, {name}"},shouldWeBegin:{id:"SplashScreenV2.shouldWeBegin",defaultMessage:"Where should we begin?"},goodToSeeYouWithName:{id:"SplashScreenV2.goodToSeeYou.withName",defaultMessage:"Good to see you, {name}."},diveInWithName:{id:"SplashScreenV2.diveInWithName",defaultMessage:"Hey, {name}. Ready to dive in?"},readyWhenYouAre:{id:"SplashScreenV2.readyWhenYouAre",defaultMessage:"Ready when you are."},onYourMind:{id:"SplashScreenV2.onYourMind",defaultMessage:"What's on your mind today?"},whatAreYouWorkingOn:{id:"SplashScreenV2.whatAreYouWorkingOn",defaultMessage:"What are you working on?"},agendaToday:{id:"SplashScreenV2.agendaToday",defaultMessage:"What's on the agenda today?"},deepResearchPlaceholder:{id:"G1v9do",defaultMessage:"What are you researching?"},editNicknameTooltip:{id:"SplashScreenV2.editNicknameTooltip",defaultMessage:"Edit nickname"},howCanIHelp:{id:"SplashScreenV2.howCanIHelp",defaultMessage:"How can I help?"},howCanIHelpWithName:{id:"SplashScreenV2.howCanIHelp.withName",defaultMessage:"How can I help, {name}?"}}),Ge={HELP_WITH:{original:k.whatCanIHelpWith,withName:k.whatCanIHelpWithWithName},WHERE_TO_START:{original:k.whereShouldWeStart,withName:k.whereShouldWeStartWithName},ASK_CHATGPT:{original:k.askChatgptAnything,withName:k.askChatgptAnythingWithName},HOW_CAN_I_HELP:{original:k.howCanIHelp,withName:k.howCanIHelpWithName},GOOD_TO_SEE_YOU:{original:k.goodToSeeYouWithName,withName:k.goodToSeeYouWithName},DIVE_IN:{original:k.diveInWithName,withName:k.diveInWithName},READY_WHEN_YOU_ARE:{original:k.readyWhenYouAre,withName:k.readyWhenYouAre},ON_YOUR_MIND:{original:k.onYourMind,withName:k.onYourMind},WHAT_ARE_YOU_WORKING_ON:{original:k.whatAreYouWorkingOn,withName:k.whatAreYouWorkingOn},AGENDA_TODAY:{original:k.agendaToday,withName:k.agendaToday},SHOULD_WE_BEGIN:{original:k.shouldWeBegin,withName:k.shouldWeBegin}};function $n({onClick:t}){return e.jsxs("div",{className:"flex flex-col",children:[e.jsx("button",{onClick:t,"aria-labelledby":"upload-image-label",className:"relative",id:"upload-image-button",type:"button",children:e.jsx("div",{className:"bg-token-main-surface-primary dark:bg-token-main-surface-secondary border-token-border-default z-1 flex aspect-square items-center justify-center overflow-hidden rounded-2xl border p-5 text-xs transition-[transform_box-shadow] duration-[0.24s] select-none hover:motion-safe:scale-105",children:e.jsxs("div",{className:"text-token-text-tertiary inline-flex items-center justify-center",children:[e.jsx(Ss,{"aria-label":"",className:"h-12 w-12"}),e.jsx(Ft,{"aria-label":"",className:"absolute start-1/2 top-1/2 ms-1 mt-1 h-8 w-8"})]})})}),e.jsx("div",{id:"upload-image-label",className:"text-token-text-secondary mt-8 w-full text-center text-sm font-medium",children:e.jsx(L,{id:"DJ+4dI",defaultMessage:"Upload an image"})})]})}function yt({card:t,className:a,label:n}){const{formatMessage:r}=F();return typeof t.url=="string"?e.jsx("img",{src:t.url,alt:r(t.prompt),className:a}):e.jsxs("picture",{className:a,children:[t.url.map(({type:i,url:s})=>i==="jpg"?null:e.jsx("source",{srcSet:s,type:`image/${i}`},s)),e.jsx("img",{"aria-label":n,src:t.url[0].url,alt:r(t.prompt),className:A(a,"h-full w-full object-cover")})]})}function Qn({type:t,images:a,onClick:n}){const[r,i]=o.useState(0),{formatMessage:s}=F(),u=r+1>=a.length?0:r+1,g=a[r].prompt;return e.jsxs("div",{children:[e.jsxs("div",{className:"group/stack relative flex justify-center",children:[e.jsx("div",{onClick:()=>{const x=r+1>=a.length?0:r+1;i(x)},className:A("bg-token-bg-primary relative z-2 grid aspect-square h-full overflow-clip rounded-xl text-xs shadow-lg transition-transform duration-[0.24s]","group-hover/stack:-translate-x-2 group-hover/stack:rotate-[-3deg] group-hover/stack:shadow-md",a.length>1&&"cursor-pointer"),children:e.jsx(yt,{card:a[r],label:s(g)})},r),e.jsx("div",{className:A("ease-in-expo ease-spring-standard absolute top-0 left-0! flex aspect-square w-full translate-y-2 rotate-[2deg] opacity-40 transition-transform duration-[0.24s]","group-hover/stack:translate-x-2 group-hover/stack:translate-y-[0px] group-hover/stack:rotate-[4deg]"),children:e.jsx(yt,{card:a[u],label:s(g),className:A(ws.fadeScale,"aspect-square w-full overflow-hidden rounded-xl shadow-xl")})},u),e.jsx("button",{id:s(g),onClick:()=>n(s(g)),tabIndex:0,className:"border-token-border-default bg-token-main-surface-primary hover:bg-token-main-surface-tertiary can-hover:z-0 absolute bottom-6 flex w-fit items-center justify-center rounded-full border px-3 py-1 text-sm shadow-md duration-[0.24s] group-hover/stack:z-11 focus-visible:z-11 active:scale-98 motion-safe:transition-[background-color,transform]",children:e.jsx(L,{id:"wk6Ayk",defaultMessage:"Try this prompt"})})]}),t&&e.jsx("div",{className:"text-token-text-secondary mt-8 w-full text-center text-sm font-medium",children:s(t)})]})}function Kn({onCardClick:t,onUploadCardClick:a}){const{value:n}=ue("2640502720"),r=F(),s=Qe()?.isWorkspacePlan()?fs:xs,u=ee(),[g,x]=o.useState(!1),{images:v,hasNextPage:p,isLoading:f,isFetchingNextPage:j,fetchNextPage:l}=It(g),{data:c,isLoading:b}=vs(),_=te(),h=c?.images_count,d=!!h,y=!!c?.archived_images_count,m=!b&&!d,I=Ea({id:"Gd9T7H",defaultMessage:"My Library"});return e.jsxs("div",{className:"mx-auto flex w-full flex-col items-center",children:[e.jsxs("div",{className:"my-6 grid w-full grid-cols-2 gap-4 gap-y-10 max-md:px-4 sm:grid-cols-3 md:grid-cols-4",children:[e.jsx($n,{onClick:a}),s.map(E=>e.jsx(Qn,{type:E.type,images:E.images,onClick:W=>{t(W),E.needsUpload&&u.showUploadSuggestion$.set(!0)}},String(E.type.defaultMessage)))]}),e.jsx("div",{className:A("z-50 mt-4 flex w-full items-center justify-between max-md:px-4",n&&"sticky top-[9px]"),children:e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"flex text-lg font-medium",children:e.jsx(L,{...I})}),d&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-token-text-tertiary flex gap-6 text-sm",children:e.jsx(L,{id:"Grwczz",defaultMessage:"{count, plural, =0 {No images} one {# image} other {# images}}",values:{count:h}})}),y&&e.jsx(ys,{includeArchived:g,setIncludeArchived:x})]})]})}),!m&&e.jsx("div",{className:"mt-4 mb-6 w-full border-t max-md:mb-6 max-md:hidden"}),m&&e.jsx(bs,{onClick:()=>{const E=ft(s),W=ft(E?.images??[]);W&&t(r.formatMessage(W.prompt)),_.focus()}}),!m&&e.jsx("div",{className:"min-h-svh w-full max-md:px-4",children:e.jsx(Fn,{count:h??0,images:v??[],includeArchived:g,hasMoreImages:p,isFetchingMore:j||f,onScrollToEnd:l})})]})}const Xn=({systemHint:t})=>{const{updateSystemHint:a}=Wt(),n=pe(),{transitionToNextPage:r}=Ot(),{clientThreadId:i}=at();o.useEffect(()=>{n.activeViewTransition&&n.signalTransitionReady()},[n]),o.useEffect(()=>{a(t,{clientThreadId:i})},[t,i,a]);let s=null;switch(t){case P.Canvas:s=e.jsx(L,{id:"4+tS2L",defaultMessage:"Write with canvas"});break;case P.PictureV2:s=e.jsx(L,{id:"QtMyOg",defaultMessage:"Make an image"});break;case P.Research:s=e.jsx(L,{id:"Rdax1G",defaultMessage:"Deep research"});break;default:s=e.jsx(L,{id:"UrTsbY",defaultMessage:"Unknown landing page"});break}return e.jsx(Cs,{children:e.jsxs(js,{className:"mt-[100px] flex flex-col items-center gap-6",children:[e.jsx(Ut,{isBadge:!0,isLauncher:!1,systemHint:t,label:null}),e.jsxs("div",{className:"flex flex-col items-center justify-center gap-3",children:[e.jsx("div",{"data-landing-page-load-target":!0,className:"text-token-text-primary text-4xl font-medium tracking-tight [text-box-trim:trim-both] [view-transition-name:var(--vt-tool-page-title)] md:text-5xl",children:s}),e.jsxs(Pa,{to:"/",viewTransition:!0,onClick:u=>{u.preventDefault(),r({path:"/",nextPageType:{type:"home",value:void 0},update:()=>{a(null,{clientThreadId:i})}})},className:"group text-token-text-tertiary flex items-center gap-1 text-sm",children:[e.jsx(_s,{className:"h-4 w-4",style:{display:"var(--is-ltr, block) var(--is-rtl, none)"}}),e.jsx(ha,{className:"h-4 w-4",style:{display:"var(--is-ltr, none) var(--is-rtl, block)"}}),e.jsx("div",{className:"group-hover:underline",children:e.jsx(L,{id:"gdbtML",defaultMessage:"Back to ChatGPT home"})})]})]})]})})},Zn=({systemHint:t})=>{const a=te(),n=ee(),r=o.useCallback(j=>{a.setText(j),a.focus()},[a]);o.useEffect(()=>()=>{n.reset()},[n]);const i=o.useCallback(()=>{U.logEvent("Open File Viewer",{intent:Ms.Multimodal.toString()}),a.openFileDialog()},[a]),{isImageGenLandingPageEnabled$:s,isAllPagesEnabled$:u}=ee(),g=Y(s),x=Y(u),p=t===P.PictureV2&&g;if(!x&&!p)return null;let f=null;switch(t){case P.Canvas:f=!1;break;case P.PictureV2:f=e.jsx(Kn,{onCardClick:r,onUploadCardClick:i});break;case P.Research:f=!1;break;default:f=e.jsx(L,{id:"JEsPH+",defaultMessage:"Unknown landing page {systemHint}",values:{systemHint:t}})}return f},Jn=4,eo=3,to=async({text:t,numCompletions:a,isUnauthenticated:n,isThreadUsingSearchMode:r=!1,autocompleteMode:i,activeSystemHint:s})=>{try{return(n?await Ne.generateAutocompletionsAnon(t,a,r,s):await Ne.generateAutocompletions(t,a,r,s)).completions.map(g=>({id:Ia(),type:R.Autocomplete,title:g.slice(0,t.length),body:g.slice(t.length),oneliner:g,prompt:g,source:i}))}catch{return[]}},ao=()=>!1,so=({clientThreadId:t,composerController:a,isGizmoThread:n})=>{const r=Ct(a.store,S=>S.showTaggingDropdown),i=Dt(),s=Array.from(i)[0],u=o.useRef(void 0),[g,x]=o.useState([]);o.useState([]),o.useRef(0);const{isUXUpdatesEnabled:v}=me(),p=v?eo:Jn,[f,j]=o.useState(),l=o.useCallback(S=>{x(C=>{const w=typeof S=="function"?S(C):S;return ma(w,C)?C:w})},[]),{trendingSuggestions:c,fetchTrendingSuggestions:b}=no(p),{isUnauthenticated:_}=he(),h=Ns(),d=o.useCallback(S=>{const C=a.getCurrentText();return C&&Fe(S).startsWith(C.toLocaleLowerCase())},[a]),y=o.useCallback(S=>{const C=a.getCurrentText(),w=S.title+S.body;return d(S)?{...S,title:C,body:w.slice(C.length)}:{...S,title:w,body:""}},[a,d]),T=o.useCallback((S=!1)=>{l(C=>!C.some(d)&&C.length>0?[]:S?C:C.map(y))},[d,y,l]),m=F(),I=o.useMemo(()=>({[N.Canvas]:[{type:R.Starter,title:m.formatMessage({id:"GMvniX",defaultMessage:"Help me write a birthday message for a friend"}),prompt:m.formatMessage({id:"JInqHw",defaultMessage:"Help me write a birthday message for a friend"}),body:"",theme:N.Canvas},{type:R.Starter,title:m.formatMessage({id:"Xwp6O+",defaultMessage:"Help me write a short story"}),prompt:m.formatMessage({id:"e2j3PL",defaultMessage:"Help me write a short story set in a post-apocalyptic Tokyo, focused on a character who’s discovering a long-lost secret"}),body:"",theme:N.Canvas},{type:R.Starter,title:m.formatMessage({id:"ARQf7p",defaultMessage:"Help me write a basic outline for an essay"}),prompt:m.formatMessage({id:"K0WcGA",defaultMessage:"Help me write a basic outline for an essay"}),body:"",theme:N.Canvas},{type:R.Starter,title:m.formatMessage({id:"z+JwEj",defaultMessage:"Create a business plan outline"}),prompt:m.formatMessage({id:"4c/Ux5",defaultMessage:"Create a detailed outline for a business plan for a new app that connects local artists with buyers. Include sections for market analysis, monetization, and user acquisition"}),body:"",theme:N.Canvas}],[N.Image]:[{type:R.Starter,title:m.formatMessage({id:"noA7wB",defaultMessage:"Design a modern logo"}),prompt:m.formatMessage({id:"k53BuX",defaultMessage:"Create a modern, minimalist logo for a tech startup called ‘Nexora’. It should use bold typography and a sleek geometric icon, suitable for both light and dark backgrounds"}),body:"",theme:N.Image},{type:R.Starter,title:m.formatMessage({id:"akHy6z",defaultMessage:"Create an invite for my birthday"}),prompt:m.formatMessage({id:"BXf15G",defaultMessage:"Please create an invite for my birthday to send to my friends. It’ll be an outdoor barbeque with music and delicious food with my closest friends and family"}),body:"",theme:N.Image},{type:R.Starter,title:m.formatMessage({id:"57SKj2",defaultMessage:"Create a cartoon illustration of my pet"}),prompt:m.formatMessage({id:"EtCE7V",defaultMessage:"Please create an illustration of my pet in 2D animation style. It’s taking a nap in its favorite spot by the fire"}),body:"",theme:N.Image},{type:R.Starter,title:m.formatMessage({id:"s5iqKS",defaultMessage:"Create a Renaissance-style painting"}),prompt:m.formatMessage({id:"mEPKGA",defaultMessage:"Please create a Renaissance-style painting of a Mars rover. Use techniques like chiaroscuro and a warm color palette"}),body:"",theme:N.Image}],[N.ContextualAnswers]:[{type:R.Starter,title:m.formatMessage({id:"VJy602",defaultMessage:"Summarize my top projects this quarter and key outcomes across all of them."}),prompt:m.formatMessage({id:"BADBWZ",defaultMessage:"Summarize my top projects this quarter and key outcomes across all of them."}),icon:e.jsx(ks,{className:"h-full w-full"}),body:"",theme:N.ContextualAnswers},{type:R.Starter,title:m.formatMessage({id:"CXhrsc",defaultMessage:"Get me up to speed on the past 2 weeks of project updates."}),prompt:m.formatMessage({id:"WPQR3a",defaultMessage:"Get me up to speed on the past 2 weeks of project updates."}),icon:e.jsx(Ts,{className:"h-full w-full"}),body:"",theme:N.ContextualAnswers},{type:R.Starter,title:m.formatMessage({id:"7QVCTa",defaultMessage:"Find the revenue projection for Q3 and the most profitable projects."}),prompt:m.formatMessage({id:"tvB7JD",defaultMessage:"Find the revenue projection for Q3 and the most profitable projects."}),icon:e.jsx(As,{className:"h-full w-full"}),body:"",theme:N.ContextualAnswers},{type:R.Starter,title:m.formatMessage({id:"Rny+bg",defaultMessage:"What is our company's current policy on work from home?"}),prompt:m.formatMessage({id:"P0W1ks",defaultMessage:"What is our company's current policy on work from home?"}),icon:e.jsx(Es,{className:"h-full w-full"}),body:"",theme:N.ContextualAnswers}]}),[m]),E=!!Ps(),W=Is({exposed:E})==="autocomplete";o.useEffect(()=>{v||!E||!a.isEmpty()||!W||n||![void 0,P.ContextualAnswers].includes(s)||l(S=>S.length>0?S:I[N.ContextualAnswers].slice(0,p))},[I,a,E,v,p,l,W,s,n]),o.useEffect(()=>{if(v)return;const S=g.some(C=>C.theme===N.Search);h&&a.getCurrentText()===""?c.length>0?l(c):b():S&&!h&&l(C=>C.filter(w=>w.theme!==N.Search))},[g,a,b,h,l,c,v]),o.useEffect(()=>{h&&a.getCurrentText()===""&&c.length>0&&xt(c,t)},[h,a,c,t]);const ae=p-g.filter(d).length,H=io(h),{layer:fe}=B("4031588851"),V=fe.get("autocomplete_min_char",4),xe=fe.get("autocomplete_fetch_interval",200),se=o.useRef(null),z=o.useCallback(Ls(async S=>{const C=a.getCurrentText();if(!C||C.length<V||C.length>80||a.hasMultipleLines()){l([]);return}if(!r&&!(se.current&&se.current.length>V&&C.startsWith(se.current)))try{const w=(await to({text:C,numCompletions:S,isUnauthenticated:_,isThreadUsingSearchMode:h,autocompleteMode:H,activeSystemHint:s})).filter(d).map(y);l(O=>{const we=O.filter(d),Ae=w.filter($=>{const Q=Fe($);return!we.some(Ee=>{const D=Fe(Ee);if(Q===D)return!0;const ie=/[\p{P}\p{S}]$/u,re=Q.replace(ie,""),K=D.replace(ie,"");return re===D||Q===K||re===K})}).slice(0,p-we.length);return[...we,...Ae]}),w.length>0&&xt(w,t)}catch{}},H==="BING"?150:xe),[a,H,y,xe,s]);o.useEffect(()=>{const S=u.current!==s;if(!v||!S)return;u.current=s;let C;if(a.getCurrentText()==="")if(l(w=>w.filter(O=>O.theme!==N.Search&&O.theme!==N.Canvas&&O.theme!==N.Image)),s===P.Search)if(c.length>0)l(c);else{C=new AbortController;const{signal:w}=C;b().then(O=>{w.aborted||l(O)})}else s===P.Canvas?l(I[N.Canvas].slice(0,p)):s===P.Picture||s===P.PictureV2?l(I[N.Image].slice(0,p)):s===P.ContextualAnswers&&E&&W&&l(I[N.ContextualAnswers].slice(0,p));else l([]),a.getCurrentText().length>V&&z(p);return()=>{C?.abort()}},[c,b,a,l,s,p,v,I,V,z,E,W]),Rs(S=>S.files);const q=s===P.Research,Te=ao(),ve=q&&Te,ne=o.useCallback(()=>{T(),ae>0&&z(ae)},[z,T,ae]);o.useEffect(()=>{r&&l([])},[r,l]);const ye=o.useMemo(()=>H==="HARDCODED"?T:ne,[H,ne,T]),be=!1,Se=o.useCallback(()=>{ye()},[ye,be,ve,l]),oe=o.useCallback(()=>{a instanceof Nn&&T(!0),a.getCurrentText().indexOf(`
`)>0&&(l([]),j(void 0))},[a,l,T,be,ve]);return o.useEffect(()=>a.subscribe("input",()=>{Se()}),[a,Se]),o.useEffect(()=>a.subscribe("change",()=>{oe()}),[a,oe]),{autocompletions:g,matchaData:f}},no=t=>{const[a,n]=o.useState([]),r=o.useCallback(async()=>{const s=(await pa.safePost("/conversation/experimental/generate_trending_suggestions",{requestBody:{num_items:t},authOption:fa.SendIfAvailable})).suggestions.map((u,g)=>({type:R.Trending,title:bt(u),body:"",icon:e.jsx(Hs,{className:"h-full w-full"}),prompt:bt(u),id:`search-trending-${g}`,theme:N.Search}));return n(s),s},[t]);return{trendingSuggestions:a,fetchTrendingSuggestions:r}};function bt(t){return t.split(" ").map(Ws).join(" ")}const Fe=t=>`${t.title}${t.body}`.toLocaleLowerCase();function oo(){const{layer:t}=B("4031588851",{shouldLogExposure:!1}),a=t.get("autocomplete_qualified_start_date","2099-09-13T00:00:00Z"),n=Gt();return!!n&&n.created*1e3>=new Date(a).getTime()}function io(t){const{isUnauthenticated:a}=he(),n=ue("1468311859").value,r=ue("2053937752").value,i=ue("3664702598").value,s=ue("471233253").value,{layer:u}=B("4031588851"),{layer:g}=B("3533083032"),x=oo(),v=!a&&n||a&&r,p=(!a&&i||a&&s)&&x;let f="HARDCODED";{const j=a?g:u;if(t){const l=j.get("search_autocomplete_mode","");v&&l&&(f=l)}else p&&(f=j.get("autocomplete_mode","HARDCODED"))}return f}const ro=({clientThreadId:t,isGizmoThread:a})=>{const n=te(),{autocompletions:r,matchaData:i}=so({clientThreadId:t,composerController:n,isGizmoThread:a});return o.useEffect(()=>(n.store.setState({autocompletions:r,matchaData:i}),()=>{n.store.setState({autocompletions:[],matchaData:void 0})}),[r,n,i]),null},lo=({clientThreadId:t})=>{const a=Vt(f=>f.activeStageSidebar),n=Ke(t),r=Os(xa.WorkspaceShareLinks),{isUnauthenticated:i}=he(),s=wt(),u=jt(t),g=et(u),x=Us(),v=r&&n&&!i&&!s&&!g&&!x,p=!a;return e.jsx("div",{className:"flex items-center gap-2 pe-1 leading-[0]",id:"conversation-header-actions",children:e.jsx(kn,{showShareButton:v,showProfileDropdown:p,clientThreadId:t})})},co=_t(()=>Mt(()=>import("./nw4g6hlq70oxillh.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23])).then(t=>t.GizmoUsingAsOwnerNotice));function uo({clientThreadId:t,transparentBackground:a,isEmptyState:n}){const{isNewScrollEnabled:r}=zt(),i=jt(t),s=et(i),u=Ds(),g=Gs(),{data:x}=Fs(i),v=Qe(),p=Vs(),f=zs(),j=F(),{isUXUpdatesEnabled:l,showLegacyReasoningSlider:c,showReasoningSliderNux:b}=me(),_=ze(t),h=Vt(m=>m.isConversationScrolledFromTop),d=va(),y=!l&&!c||!!i&&(!s||!_)||p;if(u)return null;const T=y?e.jsx(e.Fragment,{children:f&&(s||!i)?e.jsx(Ks,{children:e.jsx(vt,{clientThreadId:t})}):e.jsx(vt,{clientThreadId:t})}):e.jsx(ge,{side:"bottom",theme:d?"default":"white",label:c&&!b?null:e.jsxs("div",{className:"flex h-full w-full flex-col overflow-hidden px-4 py-3",children:[e.jsx("div",{className:"flex w-full justify-center py-2",children:e.jsxs("div",{className:"border-token-border-default bg-token-main-surface-primary flex w-56 flex-col gap-2 rounded-xl border p-2 pt-1.5 shadow-lg",children:[e.jsx("div",{className:"text-token-text-tertiary flex w-full text-start text-[11px] font-normal tracking-tight",children:j.formatMessage({id:"kvZYws",defaultMessage:"Ask anything"})}),e.jsxs("div",{className:"flex w-full flex-row items-center gap-2",children:[l?e.jsx(qs,{className:"text-token-text-primary h-3 w-3 opacity-40"}):e.jsx(Ft,{className:"text-token-text-primary h-3 w-3 opacity-40"}),l?null:e.jsx(Ys,{className:"text-token-text-primary h-3 w-3 opacity-40"}),e.jsxs("div",{className:"relative h-3 w-3",children:[e.jsx(Bs,{className:"text-token-text-primary h-3 w-3"}),e.jsx("div",{className:"absolute start-0 top-0 h-full w-full scale-200 animate-ping rounded-full bg-blue-400/50 duration-1000"})]}),e.jsx("div",{className:"flex-auto"}),e.jsx("div",{className:"bg-token-main-surface-primary rounded-full p-[1px] opacity-20 invert",children:e.jsx($s,{className:"text-token-text-primary h-3 w-3"})})]})]})}),e.jsxs("div",{className:"text-token-text-primary mt-4 flex max-w-80 flex-col gap-1",children:[e.jsx("div",{className:"font-semibold",children:j.formatMessage({id:"ZQnsFt",defaultMessage:"The model picker has moved"})}),e.jsx("div",{className:"text-xs font-normal opacity-75",children:j.formatMessage({id:"EyZkkB",defaultMessage:"Adjust thinking or choose a model here"})})]})]}),onOpenChange:m=>{m&&U.logEvent("Model Switcher Moved Tooltip Hover",{location:"thread_header"})},delayDuration:0,ignoreTriggerOnOutsideClick:!0,interactive:!0,children:e.jsx("div",{className:"text-token-text-secondary px-0.5 text-xl",children:Qs})});return e.jsxs(e.Fragment,{children:[e.jsxs(Xs,{id:"page-header",className:A("pointer-events-none [view-transition-name:var(--vt-page-header)] select-none *:pointer-events-auto motion-safe:transition max-md:hidden",n&&"absolute start-0 end-0",!i&&"@[84rem]/thread:absolute @[84rem]/thread:start-0 @[84rem]/thread:end-0 @[84rem]/thread:bg-transparent @[84rem]/thread:shadow-none!",a&&"bg-transparent",!r&&h?"[box-shadow:var(--sharp-edge-top-shadow)]":"[box-shadow:var(--sharp-edge-top-shadow-placeholder)]",r&&"[box-shadow:var(--sharp-edge-top-shadow-placeholder)] group-data-scroll-from-top/thread:[box-shadow:var(--sharp-edge-top-shadow)]"),children:[e.jsxs("div",{className:"absolute start-1/2 ltr:-translate-x-1/2 rtl:translate-x-1/2",children:[x!=null&&v?.isWorkspaceAccount()&&x.gizmo.tags?.includes(Zs.WorkspaceDisabled)&&e.jsx(co,{gizmo:x}),e.jsx(Js,{gizmoId:i,clientThreadId:t})]}),e.jsxs("div",{className:"flex items-center gap-0 overflow-hidden",children:[e.jsx(Tn,{clientThreadId:t}),T]}),e.jsx(lo,{clientThreadId:t})]}),g&&e.jsx(en,{})]})}const go=_t(()=>Mt(()=>import("./n57wfl6xivwdsvwc.js"),__vite__mapDeps([24,1,6,2,3,7,25])));function ho({clientThreadId:t}){const a=Ze(),n=Ke(t),r=Be(t,J.getGizmoId),i=async()=>{n&&(await Ne.patchConversation(n,{is_archived:!1}),a.invalidateQueries({queryKey:["conversation",t]}),Aa(n,s=>{s.initialThreadData.isArchived=!1}),qt(a,r))};return e.jsxs("div",{className:"my-6 flex flex-col items-center justify-center gap-4",children:[e.jsx("div",{className:"text-token-text-secondary px-3 text-center text-sm",children:e.jsx(L,{id:"thread.archivedConversationDescription",defaultMessage:"This conversation is archived. To continue, please unarchive it first."})}),e.jsx("div",{children:e.jsx(Me,{disabled:!n,onClick:i,icon:Cn,children:e.jsx(L,{id:"thread.unarchiveButton",defaultMessage:"Unarchive"})})})]})}const mo=function({clientThreadId:t,getGizmosCompletionParams:a,hideDisclaimer:n,hideHeader:r,hideToolsOverlay:i,messagesVerticalAlign:s="top",renderEmptyState:u}){const g=ya(),{isNewScrollEnabled:x,autoPinningEnabled:v}=zt(),{data:p}=ba(),f=tn(t),j=Sa(),[l,c,b,_,h,d,y,T]=Be(t,M=>[M?.isLoading,J.getCurrentLeafId(M),J.hasUserMessage(M),J.getConversationTurns(M).length,J.getThreadData(M).isArchived,M?.modelId,M?J.getGizmoId(M):j,M?.conversationOrigin===Na.APPLE]),m=Ke(t),I=Ze(),{prefetchSearchPromises:E}=at(),[W]=Ra(),ae=!!W.get("message"),[H,fe]=o.useState(E?.navlink);o.useEffect(()=>{l||(ze(t)?dt.addTiming("chatgpt.web.chatPage.renderNewConversation"):dt.addTiming("chatgpt.web.chatPage.renderExistingConversation"))},[t,l]);const{setTargetedContent:V}=an(),xe=g?.includes(wa),se=null,z=_>=2,{pageType:q}=sn(),{isUXUpdatesEnabled:Te}=me(),ve=$e(),ne=ee(),ye=Y(ne.isImageGenLandingPageEnabled$),be=Y(ne.isAllPagesEnabled$),Se=o.useContext(Ca),oe=nn(),S=ze(t)&&!z&&De(f)&&!oe&&E==null,C=!1,w=q?.type==="landing-page"&&(be||q.value===P.PictureV2&&ye),O=S&&!b&&(De(f)||f?.kind===ja.GizmoTest)&&E==null,Ae=Pt(p).id,$=d??Ae,Q=!!d,Ee=on(p?.models,$),D=rn(t,f),ie=ln();cn(_,t),o.useEffect(()=>{ie||V(void 0)},[t,V,ie,c]),o.useEffect(()=>{ke.setIsConversationScrolledFromTop(!1)},[t]),o.useEffect(()=>{const M=new URLSearchParams(window.location.search),de=M.get("src");if(de==="history_search"){M.delete("src");const je=M.toString(),na=`${window.location.pathname}${je?`?${je}`:""}${window.location.hash}`;window.history.replaceState({},document.title,na)}m&&de==="history_search"&&Ne.patchConversation(m,{touch:!0}).then(()=>{qt(I,y)})},[m,y,I]);const re=Tt(t),K=o.useCallback(M=>{re(a?a(M):M)},[re,a]),Pe=pe(),Bt=kt(),$t=Xe(),Ie=o.useRef(null);Ie.current=M=>{w?Pe.transitionToPage({type:"home",value:void 0},()=>{$t("/",{preventScrollReset:!0}),K(M)}):S&&!Bt&&_a(ve,"3253785454").get("should_animate_composer",!1)?Ht({className:jn["composer-slide"],update:()=>K(M)}):K(M)};const le=o.useCallback(M=>Ie.current?.(M),[Ie]);o.useEffect(()=>{Pe.signalTransitionReady()},[Pe,w,t]);const Qt=dn({clientThreadId:t,handleRequestCompletion:le,prefetchSearchThreadIdPromise:E?.threadId})&&H==null,Le=o.useRef(null),Kt=M=>{if(x&&!w)return e.jsx(_n,{allowScrollToEnd:!0,allowScrollToTop:T,clientThreadId:t,enableAutoScrollPinning:v,initScrolledToEnd:H==null&&!ae,threadFooterRef:Oe,threadRootRef:st,children:M});{const de=e.jsx("div",{className:"relative h-full",children:e.jsxs("div",{className:A("flex h-full flex-col overflow-y-auto [scrollbar-gutter:stable] @[84rem]/thread:pt-(--header-height)"),ref:Le,children:[e.jsx(ka,{setIsScrolledToEdge:je=>{ke.setIsConversationScrolledFromTop(je)},options:{root:Le?.current}}),M]})});return H!=null?de:e.jsx(Ta,{children:e.jsxs(o.Suspense,{fallback:null,children:[e.jsx(Mn,{}),de]})})}},Re=Pn();o.useEffect(()=>{Re||(document.title=D??"ChatGPT")},[D,se,Re]);const Xt=Ma(Se),He=Qe(),Zt=He&&!He.isTeam()&&!He.isEnterprisey(),We=!n&&!Xt&&!C&&!(S&&Zt)&&De(f),st=o.useRef(null),nt=o.useRef(null),Oe=o.useRef(null),ot=un(M=>M.composerHeight),Jt=o.useMemo(()=>({threadContentScrollContainerElementRef:nt,footerRootContainerElementRef:Oe}),[]),ea=!S&&!w,ta=Je(),aa=et(y),ce=!!y,it=ce&&aa,Ce=!it,sa=S&&!w,rt=w&&q?.type==="landing-page";return e.jsx(gn.Provider,{value:H,children:e.jsx(Lt,{clientThreadId:t,children:e.jsxs(tt,{clientThreadId:t,children:[xe&&e.jsx(go,{}),!Re&&e.jsx(hn,{children:D!=null&&e.jsx("title",{children:D})}),e.jsx(mn.Provider,{value:le,children:e.jsxs(Rt,{children:[e.jsxs("div",{id:"thread",ref:st,className:A("group/thread @container/thread h-full w-full",x&&!w&&pn.threadRoot,w&&"overflow-y-auto"),children:[e.jsxs(Hn,{noKeyboard:!0,clientThreadId:t,currentModelConfig:Ee,className:A("composer-parent flex flex-col focus-visible:outline-0",!w&&"h-full"),children:[e.jsxs(fn,{value:Jt,children:[!r&&e.jsx(uo,{clientThreadId:t,isEmptyState:O}),e.jsxs("div",{ref:nt,className:A("flex shrink basis-auto flex-col overflow-hidden",ea&&"-mb-(--composer-overlap-px) [--composer-overlap-px:24px]",!w&&"grow"),style:{"--composer-height":ot?`${ot}px`:void 0},children:[rt&&e.jsx(Xn,{systemHint:q.value}),!w&&e.jsx(e.Fragment,{children:!l&&!Qt?O?u??e.jsx(e.Fragment,{children:ce?e.jsx(An,{clientThreadId:t,gizmoId:y,onRequestCompletion:le,currentModelId:$}):e.jsx(zn,{clientThreadId:t,currentModelId:$,isModelLoaded:Q})}):z||H!=null?Kt(e.jsx(On,{onRequestCompletion:le,clientThreadId:t,scrollContainerRef:Le,prefetchNavlink:H,setPrefetchNavlink:fe},t)):null:null})]})]}),e.jsxs("div",{id:"thread-bottom-container",className:A("isolate z-3 w-full basis-auto has-data-has-thread-error:pt-2 has-data-has-thread-error:[box-shadow:var(--sharp-edge-bottom-shadow)] md:border-transparent md:pt-0 dark:border-white/20 md:dark:border-transparent",!w&&!We&&"mb-4",!w&&Ce&&S&&(ta?"@lg/thread:grow":"lg:grow"),Ce&&"flex flex-col"),ref:Oe,children:[h?e.jsx(ho,{clientThreadId:t}):e.jsxs(e.Fragment,{children:[(!S||Ce)&&e.jsx(Wn,{isGizmoThread:ce,isProjectThread:it,clientThreadId:t,isNewThread:S,currentModelId:$,onRequestCompletion:le,shouldUseUnifiedComposer:Ce,isModelLoaded:Q,isVanguardUxEnabled:Te}),sa&&e.jsx(ro,{clientThreadId:t,isGizmoThread:ce})]}),We?e.jsx("div",{className:"text-token-text-secondary relative mt-auto flex min-h-8 w-full items-center justify-center p-2 text-center text-xs md:px-[60px]",children:e.jsx(xn,{clientThreadId:t})}):null,S&&!w&&!ce&&e.jsx(vn,{showDisclaimer:We})]})]}),rt&&e.jsx(Et,{children:e.jsx(Zn,{systemHint:q.value})})]}),!i&&e.jsx(yn,{clientThreadId:t}),e.jsx(bn,{clientThreadId:t,isStaticSharedThread:!1,isDynamicSharedThread:oe}),e.jsx(Sn,{}),e.jsx(wn,{conversationId:t})]})})]})})})},jo=La.memo(mo);export{lo as C,Fn as I,jo as M};
//# sourceMappingURL=ob1ryhq7reedd72f.js.map
