import{u as b}from"./b0v1yruiy44zd1p9.js";import{W as P,X as _,Y as U,Z as F,U as I,$ as O,a0 as w,a1 as E,a2 as A,a3 as G,a4 as k,M as D}from"./jn7p98x7qxquz26a.js";import{aO as N,bD as s,V as R,cX as W,W as X}from"./j5zd9vs1l0bwsjqa.js";import{r as q}from"./j12so9ru57hpoz1y.js";function j(){const{store:a}=P(),t=_(),{clearSystemHintModeTrigger:r,getSystemHintModeTrigger:o}=U(),{value:n}=N("1988730211"),i=!F.useDisabledGlobally(),{onRequestCompletion:c}=b();return q.useCallback((M,e,x,d)=>{const m=a.getSharedProps();if(!m)return;const{clientThreadId:S,onResetState:T,conversationMode:f}=m;I.hideThreadHeader();const l=t.has(s.Search),p=l?o(s.Search):void 0,u=R(S),{systemHints:H,extraStreamParams:g}=O(e)?{systemHints:[e.categoryId],extraStreamParams:e.modelOverride?{model:e.modelOverride}:{}}:n?w(Array.from(t)):{systemHints:Array.from(t),extraStreamParams:{}};i&&(g.enableMessageFollowups=!0);const h=E(),y={is_starter_prompt:!0,suggestion_type:e.type,starter_prompt_id:"id"in e?e.id:void 0};h&&(y.__internal={search_settings:h});const v=W(A(e),y);c({promptMessage:v,sourceEvent:M,extraStreamParams:g,completionMetadata:{suggestions:x,suggestion:e,suggestionIndex:d,conversationMode:f??u?.mode,systemHints:H,searchSource:p}});const C=X.getCurrentNode(u).message.id;T(),G(e,d,S,C),k()||D(),p&&l&&r(s.Search)},[a,t,o,n,i,c,r])}export{j as u};
//# sourceMappingURL=d8hi8vzea1zd4sdu.js.map
