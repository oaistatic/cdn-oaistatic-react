import{r as m,j as e,aa as Q,b as oe,M as S,u as j,a9 as M,d as ae}from"./j12so9ru57hpoz1y.js";import{at as ie,aI as z,aw as y,P as b,dQ as re,C as le,u as ce,B as k,ep as de,gn as B,c_ as ue,W as pe,ao as me,R as ge,A as fe}from"./j5zd9vs1l0bwsjqa.js";import{a as xe,C as he}from"./b0v1yruiy44zd1p9.js";import{cD as ye,bO as G,al as be,cE as _e,cF as T,U as R,cG as Y,cH as we,cI as Se,cJ as ke,cK as ve,cL as $,cM as je,cN as Me,cO as Ne,am as Ce,aS as Ee,cP as Oe}from"./jn7p98x7qxquz26a.js";import{M as Pe}from"./ob1ryhq7reedd72f.js";import{H as Te}from"./g4tl5lt9yqf20m4s.js";import"./msp412gwqdn605it.js";import"./ok8fnoyzbnoyk9qs.js";import"./j2m3ef69iou998eo.js";import"./egjzck8f21ldiiq8.js";import"./n5601invkykfg1ys.js";import"./owhjnpwqw9ddu7v0.js";import"./d8hi8vzea1zd4sdu.js";import"./hxt8zt4ovcs39phn.js";import"./ojd4yynl6f6f4h3l.js";import"./l12f3ah2dx3larti.js";import"./epsg05et2lobrl6v.js";import"./gh4kfg6qlx7b3ikk.js";import"./jgfehaz03xkmntxn.js";import"./ke2u5pwt169srvv9.js";import"./c7zwb9p0mkhdhxup.js";import"./hv2qnh4kmlq1qj5o.js";import"./fqps1a3pxo0q8nxi.js";import"./n0tk3xne532h7ges.js";import"./ik1mvke1rzg5h1fr.js";import"./nc07k7y06adedb9d.js";import"./i0f6lf35jgfv6z47.js";import"./01yrv2o49ye0ebr7.js";import"./jqgeyuwq00z6gkku.js";import"./cx64odxk6g9mmfxk.js";function Ue(t,s){const{data:o,isLoading:r,isSuccess:l,isError:c}=oe({queryKey:["onboardingSteps",t,s],queryFn:()=>ge.safePost("/onboarding/steps",{requestBody:{main_usage:void 0,main_usages:t,user_description:s},authOption:fe.SendIfAvailable})});return{steps:o?.steps??[],isLoading:r,isSuccess:l,isError:c}}function N({children:t,className:s}){return e.jsx(M.div,{className:s,initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{duration:.25},exit:{opacity:0,y:-10},children:t})}function De({isFirstStep:t,userName:s}){return e.jsx(N,{className:"max-sm:px-5 max-sm:py-4",children:e.jsx("h1",{className:"text-token-text-primary mb-2 text-3xl leading-9 font-medium max-sm:text-center",children:e.jsx(S,{...t?a.preparingOnboardingExperience:a.allSetLetMeShowYouAroundWithoutName,values:{name:s,nextLine:o=>e.jsx("span",{className:"block",children:o})}})})})}function Ie({setIsInWelcomePage:t}){const s=G();return m.useEffect(()=>{s&&setTimeout(()=>{t(!1)},2500)},[s,t]),s?e.jsx(N,{className:"max-sm:px-5 max-sm:py-4",children:e.jsx("h1",{className:"text-token-text-primary mb-2 text-3xl leading-9 font-medium max-sm:text-center",children:e.jsx(S,{...a.imChaggptNiceToMeetYou})})}):null}function Le(t){const s=Y(),o=j(),r=ce(),l=we(t);let c=Se(t);const d=ke(l,c),n=ve(l,c);return m.useCallback(async g=>{const u="text/plain",i=new Blob([g],{type:u}),x=new File([i],"My_File.txt",{type:u});return $.uploadFile(s,je(x),x,Me.Retrieval,n,o,r,void 0,d?.attachments)},[s,o,r,n,d?.attachments])}function qe({step:t,steps:s,stepIndex:o,handleGoBack:r,skipUsageQuestion:l,endOnboarding:c}){const d=j();return e.jsxs("div",{className:"absolute start-0 top-0 z-10 flex w-full items-center justify-between bg-none px-4",style:{minHeight:"var(--screen-thread-header-min-height,60px)"},children:[s&&s.length>0&&e.jsx("div",{className:"absolute start-0 top-0 h-2 w-full",children:e.jsx(M.div,{className:"bg-token-main-surface-primary-inverse h-1.5",initial:{width:"0%",opacity:0},animate:{width:`${(o+1)/s.length*100}%`,opacity:1},transition:{duration:.3}})}),o>0?e.jsx(k,{onClick:r,color:"ghost",className:"border-none",icon:de}):e.jsx("div",{}),t?.step_type==="usage_question"||t?.step_type==="self_description"?e.jsx(k,{onClick:l,color:"ghost",className:"border-none",children:d.formatMessage(a.skip)}):e.jsx(k,{onClick:()=>c(!0),color:"ghost",className:"border-none",children:d.formatMessage(a.close)})]})}function Fe({step:t,steps:s,stepIndex:o,skipUsageQuestion:r,endOnboarding:l,gotoStep:c,isInWelcomePage:d,isLoading:n,clientThreadId:g}){const u=j(),i=B({clientThreadId:g}),x=K(t,o,s.length,l,c);if(d||n||t?.step_type==="usage_question"||t?.step_type==="self_description")return e.jsxs("div",{className:"flex w-full justify-between px-5 py-1.5",children:[e.jsx("div",{}),e.jsx(k,{onClick:r,color:"ghost",children:u.formatMessage(a.skip)})]});const v=s.filter(_=>_.step_type==="usage_question"||_.step_type==="self_description");return e.jsxs("div",{className:"bg-token-main-surface-primary-inverse text-token-main-surface-primary dark:bg-token-main-surface-secondary flex w-full flex-col gap-y-1 bg-none px-4",children:[e.jsxs("div",{className:"flex items-center justify-between py-1.5",children:[e.jsxs("button",{onClick:()=>l(!0),className:"text-token-main-surface-primary dark:text-token-text-primary relative p-2",children:[e.jsx("div",{className:"bg-token-main-surface-primary dark:bg-token-text-primary absolute start-0 top-0 h-full w-full rounded-full opacity-20"}),e.jsx(ue,{className:"h-6 w-6"})]}),e.jsx("div",{className:"text-token-text-tertiary text-sm",children:u.formatMessage({id:"chatgpt_onboarding.steps_count",defaultMessage:"{current_step} of {total_steps}"},{current_step:o+1-v.length,total_steps:s.length-v.length})}),e.jsx(k,{onClick:x,color:"ghost",className:"bg-token-main-surface-primary text-token-main-surface-primary-inverse dark:bg-token-main-surface-primary-inverse dark:text-token-main-surface-primary",disabled:o!==s.length-1&&i,children:o===s.length-1?u.formatMessage(a.done):u.formatMessage(a.next)})]}),t&&e.jsxs("div",{className:"mb-4 text-center",children:[e.jsx("p",{className:"text-base leading-normal font-bold text-white",children:t.title?t.title:O[t.step_type]?u.formatMessage(O[t.step_type]):null}),e.jsx("p",{className:"text-token-text-tertiary text-sm leading-normal font-normal",children:t.subtitle?t.subtitle:P[t.step_type]?u.formatMessage(P[t.step_type]):null})]})]})}function yt({clientThreadId:t,setClientThreadId:s}){const[o,r]=m.useState(!0),{isOpen:l,setIsOpen:c,markAsViewed:d}=ye(),[n,g]=m.useState(0),[u,i]=m.useState(new Set(["usage_question"])),[x,v]=m.useState([]),[_,J]=m.useState(),[D,I]=m.useState(!1),{steps:h,isLoading:C,isError:U}=Ue(D?x:[],D?_:void 0),V=G(),L=be({clientThreadId:t}),q=Le(t),{createNewThread:F}=_e({clientThreadId:t,setClientThreadId:s}),A=ie(t,pe.hasUserMessage),{layer:X}=z("109457",{shouldLogExposure:!1}),Z=X.get("keep_onboarding_after_dismiss",!1),ee=T();m.useEffect(()=>{l?(y.logEvent("chatgpt_onboarding_flow_shown"),b.logEvent("Onboarding Shown")):R.setOnboardingConvoState(null)},[l]),m.useEffect(()=>{U&&(d(),y.logEvent("chatgpt_onboarding_flow_error"),b.logEvent("Onboarding Error"))},[U,d]),m.useEffect(()=>{if(!(C||!h[n])&&!u.has(h[n].step_type)){i(w=>new Set([...w,h[n].step_type]));const f=h[n].step_prompt;f&&(R.setOnboardingConvoState({onboardingConvoClientThreadId:t}),L({eventSource:"url",stepPrompt:f,authorMetadata:{real_author:re.Onboarding}}),h[n].step_type==="file_upload"&&h[n].additional_info&&q(h[n].additional_info))}},[n,C,u,L,h,q,t]);const p=h[n];if(m.useEffect(()=>{const f=p?.step_type;(f==="usage_question"||f==="self_description")&&A&&(F(),i(w=>new Set(Array.from(w).filter(W=>W==="usage_question"||W==="self_description"))))},[p?.step_type,F,A]),m.useEffect(()=>{p?.step_type&&(y.logEvent("chatgpt_onboarding_step_shown",null,{step_type:p?.step_type,step_index:n.toString()}),b.logEvent("Onboarding Step Shown",{step_type:p?.step_type,step_index:n.toString()}))},[n,p?.step_type]),U)return null;const E=f=>{c(!1),n===h.length-1?(y.logEvent("chatgpt_onboarding_flow_finished"),b.logEvent("Onboarding Finished")):(y.logEvent("chatgpt_onboarding_flow_dismissed",null,{step_type:p?.step_type,step_index:n.toString()}),b.logEvent("Onboarding Dismissed",{step_type:p?.step_type,step_index:n.toString()})),f&&!Z&&d()},te=f=>{v(f),h.find(w=>w.step_type==="self_description")||I(!0),g(w=>w+1),y.logEvent("chatgpt_onboarding_usage_question_selected",null,{main_usages:f.join(", ")}),b.logEvent("Onboarding Usage Question Selected",{main_usages:f.join(", ")})},se=f=>{J(f),I(!0),g(w=>w+1),y.logEvent("chatgpt_onboarding_self_description_entered",null,{main_usages:x.join(", ")}),b.logEvent("Onboarding Self Description Entered",{main_usages:x.join(", ")})},H=()=>{y.logEvent("chatgpt_onboarding_usage_question_skipped",null,{step_type:p?.step_type,step_index:n.toString()}),b.logEvent("Onboarding Usage Question Skipped",{step_type:p?.step_type,step_index:n.toString()}),g(f=>f+1)},ne=()=>{y.logEvent("chatgpt_onboarding_go_back",null,{step_type:p?.step_type,step_index:n.toString()}),b.logEvent("Onboarding Go Back",{step_type:p?.step_type,step_index:n.toString()}),g(f=>f-1)};return e.jsx(le,{testId:"modal-new-user-onboarding-flow",isOpen:l,onClose:()=>E(!1),type:"success",size:"fullscreen",noPadding:!0,className:"w-full",children:e.jsx(xe,{clientThreadId:t,children:e.jsxs("div",{className:"bg-token-main-surface-primary flex h-full max-h-full flex-col",children:[ee?e.jsx(Fe,{step:p,steps:h,stepIndex:n,skipUsageQuestion:H,endOnboarding:E,gotoStep:g,isInWelcomePage:o,isLoading:C,clientThreadId:t}):e.jsx(qe,{step:p,steps:h,stepIndex:n,handleGoBack:ne,skipUsageQuestion:H,endOnboarding:E}),e.jsx("div",{className:"flex min-h-0 flex-1 flex-col items-center justify-center overflow-hidden",children:e.jsx(Q,{mode:"wait",children:o?e.jsx(Ie,{setIsInWelcomePage:r},"welcome"):C?e.jsx(De,{isFirstStep:n<1,userName:V?.name},"loading"):p?.step_type==="usage_question"?e.jsx(Ae,{mainUsagesProp:x,onSelectMainUsages:te},"usage-question"):p?.step_type==="self_description"?e.jsx(He,{mainUsages:x,selfDescriptionProp:_,onEnterSelfDescription:se},"self-description"):["dalle","file_upload","canvas","voice","ask_any_question"].includes(p?.step_type)?e.jsx(We,{step:p,gotoStep:g,stepIndex:n,totalSteps:h.length,endOnboarding:E,clientThreadId:t},"tools-onboarding"):null})})]})})})}function Ae({mainUsagesProp:t,onSelectMainUsages:s}){const[o,r]=m.useState(new Set(t)),[l,c]=m.useState(void 0),d=j(),n=T(),g=()=>{const i=new Set(o);i.has("other")&&l&&(i.add(l),i.delete("other")),s(Array.from(i))},u=["school","work","personalTasks","funAndEntertainment","other"];return e.jsxs(N,{className:"max-sm:overflow-y-auto max-sm:px-5 max-sm:py-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-token-text-primary mb-2 text-3xl leading-9 font-medium",children:e.jsx(S,{...a.tellMeWhyHere})}),e.jsx("p",{className:"text-token-text-secondary mb-6 text-base",children:e.jsx(S,{...a.suggestUsefulIdeas})})]}),e.jsxs("div",{className:"flex flex-col items-start justify-start gap-7 ps-2.5",children:[u.map(i=>e.jsx(Ne,{id:`main-usage-${i}`,checked:o.has(i),onChange:x=>r(v=>{const _=new Set(v);return x.target.checked?_.add(i):_.delete(i),_}),label:e.jsx("span",{className:"cursor-pointer",children:d.formatMessage(Ce[i])}),className:"rounded-full!"},i)),o.has("other")&&e.jsx(Ee,{ariaLabel:d.formatMessage(a.tellMeWhyHere),name:"other",placeholder:d.formatMessage(a.tellMeWhyHere),onChange:i=>c(i.target.value),maxLength:100,className:"bg-token-main-surface-primary ms-6 min-w-64"})]}),e.jsx(k,{size:n?"large":"medium",color:"primary",onClick:g,className:"mt-10",disabled:o.size===0,fullWidth:n,children:e.jsx(S,{...a.next})})]})}function He({mainUsages:t,selfDescriptionProp:s,onEnterSelfDescription:o}){const[r,l]=m.useState(s),c=j(),d=T(),n=m.useMemo(()=>t.includes("school")?a.exampleSchoolSelfDescription:t.includes("work")?a.exampleWorkSelfDescription:t.includes("funAndEntertainment")?a.exampleFunAndEntertainmentSelfDescription:a.examplePersonalTasksSelfDescription,[t]),{layer:g}=z("109457",{shouldLogExposure:!1}),u=g.get("write_custom_instructions_in_onboarding",!1),i=async()=>{o(r),u&&r&&me.createOrUpdateUserSystemMessage({aboutUserMessage:r,aboutModelMessage:"",disabledTools:[],enabled:!0}).catch(()=>{})};return e.jsxs(N,{className:"flex w-[640px] flex-col items-start max-sm:w-full max-sm:overflow-y-auto max-sm:px-5 max-sm:py-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-token-text-primary mb-4 text-3xl leading-9 font-medium",children:e.jsx(S,{...a.anythingElseYouWantMeToKnow})}),e.jsx("p",{className:"text-token-text-secondary text-base",children:e.jsx(S,{...u?a.selfDescriptionReasonSaveToCustomInstructions:a.selfDescriptionReason,values:{customInstructions:x=>e.jsx("a",{href:Te,className:"underline",target:"_blank",rel:"noreferrer",children:x})}})})]}),e.jsx(Oe,{className:"!dark:bg-white/5 border-token-border-default placeholder-token-text-tertiary mt-10 rounded-sm border bg-black/5! p-5 text-base!",placeholder:c.formatMessage(n),rows:4,value:r,onChange:x=>l(x.target.value),autoFocus:!0}),e.jsx(k,{size:d?"large":"medium",color:"primary",onClick:i,className:"mt-10",fullWidth:d,children:e.jsx(S,{...a.next})})]})}function K(t,s,o,r,l){const c=Y();return m.useCallback(()=>{s<o-1?(y.logEvent("chatgpt_onboarding_flow_next_clicked",null,{source_step_type:t?.step_type,source_step_index:s.toString()}),b.logEvent("Onboarding Next",{source_step_type:t?.step_type,source_step_index:s.toString()}),t?.step_type==="file_upload"&&$.reset(c),l(s+1)):r(!0),document.body.scrollTo({top:document.body.scrollHeight,behavior:"smooth"})},[t,s,o,c,r,l])}function We({step:t,gotoStep:s,stepIndex:o,totalSteps:r,endOnboarding:l,clientThreadId:c}){const d=B({clientThreadId:c}),n=j(),g=o===r-1,u=T(),i=K(t,o,r,l,s);return e.jsxs(N,{className:"flex h-full w-full flex-row sm:px-8 md:px-12 lg:px-16 xl:px-24",children:[!u&&e.jsx("div",{className:"flex flex-1 flex-col items-center justify-center",children:e.jsxs(M.div,{className:"flex w-[90%] flex-1 flex-col items-start justify-center gap-2 md:w-[85%] lg:w-[80%]",initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{duration:.5},children:[e.jsxs(Q,{mode:"wait",children:[e.jsx(M.h1,{className:"text-token-text-primary mb-2 text-3xl font-medium",initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{duration:.5},exit:{opacity:0,y:-10},children:t.title?t.title:O[t.step_type]?n.formatMessage(O[t.step_type]):null},`title-${o}`),e.jsx(M.p,{className:"text-token-text-secondary mb-6 text-base",initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{duration:.5},exit:{opacity:0,y:-10},children:t.subtitle?t.subtitle:P[t.step_type]?n.formatMessage(P[t.step_type]):null},`subtitle-${o}`)]}),e.jsx(k,{size:"large",color:"primary",onClick:i,disabled:d&&!g,children:e.jsx(S,{...g?a.tryChatGPT:a.next})})]})}),e.jsx("div",{className:"relative flex h-full flex-1 flex-col sm:min-w-[360px] sm:pt-16 sm:pb-16",children:e.jsx("div",{className:"bg-token-main-surface-primary shadow-token-border-default h-full w-full overflow-auto shadow-[0_0_50px] sm:rounded-[30px]",children:e.jsx(he,{clientThreadId:c,ignoreParentComposerController:!0,children:e.jsx(Pe,{hideHeader:!0,hideToolsOverlay:!0,clientThreadId:c})})})})]})}const a=ae({skip:{defaultMessage:"Skip",id:"chatgpt.new-onboarding.skip"},close:{defaultMessage:"Close",id:"chatgpt.new-onboarding.close"},done:{defaultMessage:"Done",id:"chatgpt.new-onboarding.done"},submit:{defaultMessage:"Submit",id:"chatgpt.new-onboarding.submit"},next:{defaultMessage:"Next",id:"chatgpt.new-onboarding.next"},finish:{defaultMessage:"Finish",id:"chatgpt.new-onboarding.finish"},tellMeWhyHere:{defaultMessage:"Tell me about why you’re here.",id:"chatgpt.new-onboarding.tell-me-why-here"},suggestUsefulIdeas:{defaultMessage:"I’ll use this information to suggest ideas you might find useful.",id:"chatgpt.new-onboarding.suggest-useful-ideas"},imChaggptNiceToMeetYou:{defaultMessage:"👋 Hi, I’m ChatGPT. It’s nice to meet you!",id:"chatgpt.new-onboarding.im-chatgpt-nice-to-meet-you"},preparingOnboardingExperience:{defaultMessage:"Preparing your onboarding experience...",id:"chatgpt.new-onboarding.preparing-onboarding-experience"},oneLastQuestion:{defaultMessage:"One last question:",id:"chatgpt.new-onboarding.one-last-question-2"},anythingElseYouWantMeToKnow:{defaultMessage:"Is there anything else you’d like me to know?",id:"chatgpt.new-onboarding.anything-else-you-want-me-to-know-2"},oneQuestionAnythingElse:{defaultMessage:"One last question: Is there anything else you’d like me to know?",id:"chatgpt.new-onboarding.one-more-question"},selfDescriptionReason:{defaultMessage:"Details like your job, hobbies, or interests make my responses more relevant.",id:"chatgpt.new-onboarding.self-description-reason"},allSetLetMeShowYouAroundWithoutName:{defaultMessage:"All set!<nextLine></nextLine>Now, let me show you around...",id:"chatgpt.new-onboarding.all-set-let-me-show-you-around-without-name"},selfDescriptionReasonSaveToCustomInstructions:{defaultMessage:"Details like your job, hobbies, or interests make my responses more relevant. I’ll save this information as <customInstructions>Custom Instructions</customInstructions>, which you can update any time.",id:"chatgpt.new-onboarding.self-description-reason-save-to-custom-instructions"},exampleSchoolSelfDescription:{defaultMessage:"I'm a college student studying computer science, and I love to play the guitar.",id:"chatgpt.new-onboarding.example-school-self-description"},exampleWorkSelfDescription:{defaultMessage:"I'm a graphic designer based in Berlin, and I enjoy painting and attending art exhibitions.",id:"chatgpt.new-onboarding.example-work-self-description"},examplePersonalTasksSelfDescription:{defaultMessage:"I live in Sydney and love cooking new recipes and planning travel itineraries.",id:"chatgpt.new-onboarding.example-personal-tasks-self-description"},exampleFunAndEntertainmentSelfDescription:{defaultMessage:"I'm a music enthusiast based in Nashville, and I can talk for hours about guitar techniques and songwriting.",id:"chatgpt.new-onboarding.example-fun-and-entertainment-self-description"},tryChatGPT:{defaultMessage:"Try ChatGPT",id:"chatgpt.new-onboarding.try-chatgpt"}}),O={usage_question:a.tellMeWhyHere},P={usage_question:a.suggestUsefulIdeas};export{De as LoadingState,yt as default};
//# sourceMappingURL=e52jvl7uowvoaeca.js.map
